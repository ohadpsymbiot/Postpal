"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[132,1],{"./integrations/containers/CreateNewTeam.js":function(e,t,a){a.r(t);var i,s=a("../../node_modules/react/index.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=a("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=a("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/JoinTeam.js"),c=a("../../node_modules/mobx/lib/mobx.module.js"),d=a("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=a("./integrations/navigation/constants.js"),p=a("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=a("./js/services/NavigationService.js"),b=a("./onboarding/src/features/TeamOnboarding/pages/CreatingTeam/index.js"),g=a("./js/stores/StoreManager.js"),v=a("./js/stores/CurrentUserStore.js"),f=a("./integrations/constants/integrationsConstants.ts"),w=a("./js/modules/services/AnalyticsService.js"),T=a("./node_modules/lodash/lodash.js");const y=p.default.p`
  font-size: ${e=>e.theme["text-size-m"]};
  line-height: ${e=>e.theme["line-height-m"]};
  color: ${e=>e.theme["content-color-secondary"]}
  `;let E=(0,d.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isLoading:!1},this.checkForSoloUser=this.checkForSoloUser.bind(this),this.addAnalyticsEvent=this.addAnalyticsEvent.bind(this)}componentDidMount(){this.checkForSoloUser()}addAnalyticsEvent(){var e;const t={category:"integration",action:"initiate_create_new_team",label:null===(e=this.props.controller)||void 0===e?void 0:e.integrationClassID,value:1};w.default.addEventV2(t)}async checkForSoloUser(){this.setState({isLoading:!0});const e=(0,g.resolveStoreInstance)(v.default);e.isHydrating&&await(0,c.when)((()=>!e.isHydrating));const t=null==e?void 0:e.team;T.isEmpty(t)||h.default.transitionTo(u.OPEN_INTEGRATIONS_HOME_IDENTIFIER),this.setState({isLoading:!1})}render(){const{isLoading:e}=this.state;return e?s.createElement(n.default,{alignItems:"center",justifyContent:"center",direction:"column",height:"100%"},s.createElement(r.default,null)):s.createElement(o.default,{title:"Create a team to set up this integration",description:s.createElement(y,null,"With integrations, you can connect Postman to your development workflows. Learn more about ",s.createElement(l.default,{type:"monochrome-plain",onClick:()=>{h.default.openURL(f.INTEGRATION_INTRODUCTION_LEARNING_CENTER_LINK,{target:"_blank"})},text:"integrations"}),"."),primaryAction:s.createElement(l.default,{onClick:async()=>{this.addAnalyticsEvent(),await(0,b.createTeam)()},type:"primary",text:"Create Team"})},s.createElement(m.default,null))}})||i;t.default=E},"./onboarding/src/features/FeatureOverview/TeamFeatureOverviewHelper.js":function(e,t,a){a.r(t),a.d(t,{teamFeatureOverviewHelper:function(){return m}});var i,s,n,r=a("../../node_modules/mobx/lib/mobx.module.js"),o=a("./js/services/CurrentUserDetailsService.js");function l(e,t,a,i,s){var n={};return Object.keys(i).forEach((function(e){n[e]=i[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=a.slice().reverse().reduce((function(a,i){return i(e,t,a)||a}),n),s&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(s):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}const m=new(i=r.action.bound,n=l((s=class{constructor(){var e,t,a,i;e=this,t="isTeamFeatureOverviewModalOpen",i=this,(a=n)&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}update(e,t){this[e]=t}get isTeamCreated(){const e=o.default.teamId;return e&&"0"!==e}}).prototype,"isTeamFeatureOverviewModalOpen",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l(s.prototype,"update",[i],Object.getOwnPropertyDescriptor(s.prototype,"update"),s.prototype),l(s.prototype,"isTeamCreated",[r.computed],Object.getOwnPropertyDescriptor(s.prototype,"isTeamCreated"),s.prototype),s)},"./onboarding/src/features/TeamOnboarding/pages/CreatingTeam/index.js":function(e,t,a){a.r(t),a.d(t,{CreatingTeamModal:function(){return U},FLOW:function(){return C},createTeam:function(){return y.createTeam},initiateTeamCreation:function(){return y.initiateTeamCreation}});var i,s=a("../../node_modules/react/index.js"),n=a("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=a("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=a("./js/components/base/Markdown.js"),c=a("./js/components/base/Modals.js"),d=a("./js/modules/services/AnalyticsService.js"),u=a("./js/utils/PluralizeHelper.js"),p=a("./js/stores/StoreManager.js"),h=a("./js/stores/CurrentUserStore.js"),b=a("./js/electron/ElectronService.js"),g=a("./js/services/NavigationService.js"),v=a("./js/external-navigation/ExternalNavigationService.js"),f=a("./js/services/UIEventService.js"),w=a("./onboarding/navigation/constants.js"),T=a("./onboarding/src/common/ExternalLinkService.js"),y=a("./onboarding/public/TeamCreation.js"),E=a("./onboarding/src/features/FeatureOverview/TeamFeatureOverviewHelper.js"),S=a("./growth/foundation/public/amplitude/AmplitudeService.js"),j=a("./onboarding/src/common/LaunchDarkly.js"),_=a("./js/services/CurrentUserDetailsService.js"),k=a("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),A=a("./node_modules/lodash/lodash.js");const C={TEAM_CREATION:"teamCreation",INVITE_MEMBERS:"inviteMember",CREATE_TEAM_WORKSPACE:"createTeamWorkspace",ADD_NEW_TEAM:"addNewTeam"},D={isOpen:!1,teamDomain:"",flow:C.TEAM_CREATION,member:0,teamWorkspaceData:{wid:"",collectionCount:0},isSetupTeamButtonLoading:!1},O="Customize your team’s profile to make it easy for your future team members to find.",I="Set Up Team",N=(0,k.default)(r.default)`
  width: fit-content !important;
`;function L(e){d.default.addEventV2AndPublish({category:"team_create_source",action:"create",label:{teamCreation:"homepage",inviteMember:"invite_member",createTeamWorkspace:"new_team_workspace"}[e]})}const P=A.once((()=>{S.Ampli.createTeamSuccessPageViewed((0,S.getAmpliPageViewedProperties)())}));let U=(0,n.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isOpen:!1,flow:C.TEAM_CREATION,members:0,isLoading:!1,teamWorkspaceData:{wid:"",collectionCount:0},teamDomain:"",isSetupTeamButtonLoading:!1},this.handleToggle=this.handleToggle.bind(this),this.handleEditTeamProfile=this.handleEditTeamProfile.bind(this),this.handleSetUpTeamProfile=this.handleSetUpTeamProfile.bind(this),this.handleUpgradePlan=this.handleUpgradePlan.bind(this),this.handleMaybeLater=this.handleMaybeLater.bind(this),this.handleWorkspaceSwitch=this.handleWorkspaceSwitch.bind(this),this.resetIntailState=this.resetIntailState.bind(this)}componentDidMount(){this.unsubscribeHandler=f.default.subscribe(w.CREATING_TEAM_LOADER,this.handleToggle)}componentWillUnmount(){this.unsubscribeHandler&&this.unsubscribeHandler()}componentDidUpdate(){(0,p.resolveStoreInstance)(h.default).teamId&&this.state.teamWorkspaceData.wid&&P()}handleToggle({isOpen:e=!0,flow:t=C.TEAM_CREATION,members:a=0,teamWorkspaceData:i={},teamDomain:s=""}){if(!A.isEmpty(i))return this.setState({teamWorkspaceData:i,teamDomain:s});this.setState({isOpen:e,flow:t,members:a,teamDomain:s})}resetIntailState(){this.setState(D)}async handleWorkspaceSwitch(){if("browser"===window.SDK_PLATFORM)return(0,b.openURL)(`${pm.artemisUrl}/workspace/${this.state.teamWorkspaceData.wid}/overview?isNewTeam=${0===this.state.teamWorkspaceData.collectionCount?1:0}${E.teamFeatureOverviewHelper.isTeamCreated?"&feature_overview=show":""}`);g.default.transitionTo("build.overview",{wid:this.state.teamWorkspaceData.wid},A.assign({},{isNewTeam:0===this.state.teamWorkspaceData.collectionCount?1:0},E.teamFeatureOverviewHelper.isTeamCreated&&{feature_overview:"show"})),this.resetIntailState()}handleMaybeLater(){if("browser"===window.SDK_PLATFORM)return(0,b.openURL)(`${pm.artemisUrl}/home`);this.resetIntailState()}handleUpgradePlan(){return"browser"!==window.SDK_PLATFORM&&this.resetIntailState(),(0,T.openUpgradePlanPage)({source:"app",label:"team_creation_page"})}handleEditTeamProfile(){if(this.setState({isSetupTeamButtonLoading:!0}),L(this.state.flow),"browser"===window.SDK_PLATFORM){let e=`${pm.artemisUrl}/onboarding/team`,t=[];return this.state.members&&t.push("invited=user"),this.state.teamWorkspaceData.wid&&(t.push(`wid=${this.state.teamWorkspaceData.wid}`),t.push("isNewTeam="+(0===this.state.teamWorkspaceData.collectionCount?1:0))),t.length>0&&(e+=`?${t.join("&")}`),void(0,b.openURL)(e)}g.default.transitionTo(w.TEAM_ONBOARDING_IDENTIFIER,null,A.assign({},this.state.members&&{invited:"user"},this.state.teamWorkspaceData.wid&&{wid:this.state.teamWorkspaceData.wid,isNewTeam:0===this.state.teamWorkspaceData.collectionCount?1:0})),this.resetIntailState()}handleSetUpTeamProfile(){this.setState({isSetupTeamButtonLoading:!0}),L(this.state.flow);let e=`${pm.artemisUrl}/onboarding/team`,t=`${pm.identityUrl}/teams/${this.state.teamDomain}?newteam=true&continue=${e}`;return"desktop"===window.SDK_PLATFORM&&(g.default.transitionTo(w.HOME_IDENTIFIER,null,{}),this.resetIntailState()),(0,v.openExternalLink)(t)}render(){let e=(0,p.resolveStoreInstance)(h.default),t=this.state.members,a=A.get(e.team,"account.user_addition.limit"),i=(A.get(e,"team.name","Home"),t-a),n=i>0,d="ENABLED"===j.launchDarkly.getFlag("iam_2684_multi_teams","DISABLED"),b=A.get(_.default.fetchUserFlags(),"flags.multi_team.enabled",!1)&&d,g=u.default.pluralize({count:i,singular:"person",plural:"people"}),v=u.default.pluralize({count:this.state.members,singular:"person",plural:"people"}),f=u.default.pluralize({count:this.state.members,singular:"user",plural:"users"}),w=u.default.pluralize({count:this.state.members,singular:"member",plural:"members"}),T=u.default.pluralize({count:this.state.members,singular:"invite",plural:"invites"});if(e.teamId&&this.state.teamWorkspaceData.wid){let e={teamCreation:{title:"Bravo! You’ve created a team",subtitle:b?"Your existing personal workspaces will be moved to this team. You can invite team members once you are ready to collaborate.":O,primaryActionText:b?I:"Edit Team Profile",primaryAction:this.handleEditTeamProfile},addNewTeam:{title:"Bravo! You’ve created your team",subtitle:O,primaryActionText:I,primaryAction:this.handleSetUpTeamProfile},inviteMember:{title:`Invited ${this.state.members} ${v} to your team`,subtitle:n?`You’ve invited ${i} ${g} beyond your team’s capacity.\n            Upgrade your plan to let them join and collaborate in this workspace.`:O,primaryActionText:n?"Upgrade Plan":"Edit Team profile",primaryAction:n?this.handleUpgradePlan:this.handleEditTeamProfile,secondaryActionText:"Go to Workspace",secondaryAction:this.handleWorkspaceSwitch},createTeamWorkspace:{title:"Team workspace created",subtitle:n?`You’ve invited ${i} ${g} beyond your team’s capacity.\n            Upgrade your plan to let them join and collaborate in this workspace.`:O,primaryActionText:n?"Upgrade Plan":"Edit Team profile",primaryAction:n?this.handleUpgradePlan:this.handleEditTeamProfile,secondaryActionText:"Go to Workspace",secondaryAction:this.handleWorkspaceSwitch}};return s.createElement(c.Modal,{isOpen:this.state.isOpen,fullscreen:!0,customStyles:{background:"var(--background-color-primary)"}},s.createElement("div",{className:"creating-team"},s.createElement("div",{className:"creating-team-icon"},s.createElement(l.default,{name:"icon-state-success-stroke",color:"content-color-success"})),s.createElement("h4",{className:"creating-team-title"},e[this.state.flow].title),s.createElement(m.default,{className:"creating-team-subtext",source:e[this.state.flow].subtitle}),s.createElement(N,{type:"primary",size:"medium",className:"creating-team-action",isDisabled:this.state.isSetupTeamButtonLoading,isLoading:this.state.isSetupTeamButtonLoading,text:e[this.state.flow].primaryActionText,onClick:e[this.state.flow].primaryAction}),e[this.state.flow].secondaryAction&&s.createElement(r.default,{type:"outline",size:"medium",className:"creating-team-action-outline",isDisabled:this.state.isLoading,text:e[this.state.flow].secondaryActionText,onClick:e[this.state.flow].secondaryAction})))}let y={teamCreation:{title:"Setting up your team"},addNewTeam:{title:"Setting up your team"},inviteMember:{title:`Inviting ${this.state.members} ${f} to your team`,subtitle:`Hang on while we send out ${T} to your future team ${w}.`},createTeamWorkspace:{title:"Creating your team workspace",subtitle:"Hang on while we set up your team and invite people."}};return s.createElement(c.Modal,{isOpen:this.state.isOpen,fullscreen:!0,customStyles:{background:"var(--background-color-primary)"}},s.createElement("div",{className:"creating-team"},s.createElement(o.default,null),s.createElement("h4",{className:"creating-team-title"},y[this.state.flow].title),s.createElement("div",{className:"creating-team-subtitle"},y[this.state.flow].subtitle),s.createElement("div",{className:"creating-team-info"},"Please don’t close or refresh this tab.")))}})||i}}]);