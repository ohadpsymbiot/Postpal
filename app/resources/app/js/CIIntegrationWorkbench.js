"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[15],{"../../node_modules/@postman/aether/esmLib/src/components/Card/Card.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),o=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=r.default.div.withConfig({displayName:"Card__StyledCard",componentId:"qu0gct-0"})(["background-color:",";border:",";border-radius:",";box-sizing:border-box;height:",";width:",";min-width:",";max-width:",";padding:",";&:hover{background-color:",";}cursor:",";"],(function(e){return"fill"===e.type?e.theme["background-color-secondary"]:e.theme["background-color-primary"]}),(function(e){return"outline"===e.type?"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"]):"none"}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.minWidth}),(function(e){return e.maxWidth}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.isClickable?"fill"===e.type?e.theme["background-color-tertiary"]:e.theme["background-color-secondary"]:""}),(function(e){return e.isClickable?"pointer":"default"})),d=(0,r.default)(a.default).withConfig({displayName:"Card__StyledCardContentArea",componentId:"qu0gct-1"})(["padding:20px;"]),u=i.forwardRef((function(e,t){var n=e.type,s=e.onClick,o=e.id,r=e.cover,u=e.title,p=e.figure,m=e.tag,g=e.height,h=e.width,f=e.minWidth,I=e.maxWidth,b=e.dataTestId,v=e.children,y=r.src,S=r.position,E=void 0===S?"left":S,C=!!m&&!p;return i.createElement(c,{type:n,ref:t,height:g,width:h,minWidth:f,maxWidth:I,"data-aether-id":"aether-card","data-testid":b,isClickable:!!s,onClick:function(){s&&s(o)}},i.createElement(a.default,{direction:"top"===E?"column":"row"},y&&("left"===E||"top"===E)&&i.createElement(a.default,{justifyContent:"center",alignItems:"center",backgroundColor:"background-color-primary",padding:"spacing-l",borderRadius:"border-radius-default"},y),i.createElement(d,{coverPosition:E,gap:"spacing-s",direction:"column",shrink:1,grow:1},p&&i.createElement(a.default,{justifyContent:"space-between",wrap:"wrap"},i.createElement(a.default,{padding:{paddingBottom:"spacing-s"}},p),m),i.createElement(a.default,{direction:"column",gap:"spacing-s"},C?i.createElement(a.default,{justifyContent:"space-between",gap:"spacing-m"},u&&i.createElement(l.default,{type:"h4",text:u}),m):u&&i.createElement(l.default,{type:"h4",text:u}),v)),y&&"right"===E&&i.createElement(a.default,{justifyContent:"center",alignItems:"center",padding:"spacing-l",borderRadius:"border-radius-default",backgroundColor:"background-color-primary"},y)))}));u.defaultProps={type:"outline",onClick:null,id:"",cover:{},title:"",figure:null,tag:null,height:"max-content",width:"inherit",minWidth:"228px",maxWidth:"",dataTestId:""},u.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,type:o().oneOf(["outline","fill"]),onClick:o().func,id:o().string,cover:o().shape({src:o().node,position:o().oneOf(["top","right","left"])}),title:o().string,figure:o().node,tag:o().node,height:o().string,width:o().string,minWidth:o().string,maxWidth:o().string,dataTestId:o().string},t.default=u},"../../node_modules/@postman/aether/esmLib/src/components/Form/Form.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/prop-types/index.js"),l=n.n(a),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=["heading","description","width","onSubmit","preventDefault","primaryAction","secondaryAction","children"],g=r.default.form.withConfig({displayName:"Form__StyledForm",componentId:"ak4rok-0"})(["width:",";"],(function(e){return e.width}));function h(e){var t=e.heading,n=e.description,r=e.width,a=e.onSubmit,l=e.preventDefault,h=e.primaryAction,f=e.secondaryAction,I=e.children,b=(0,s.default)(e,m);return o.createElement(g,(0,i.default)({width:r},b,{"data-aether-id":"aether-form",onSubmit:function(e){l&&e.preventDefault(),a&&a(e)}}),o.createElement(c.default,{gap:"spacing-xxl",direction:"column"},o.createElement(c.default,{gap:"spacing-xl",direction:"column"},(t||n)&&o.createElement(c.default,{gap:"spacing-xs",direction:"column"},t?o.createElement(u.default,{type:"h1",text:t,"data-testid":"aether-form-heading"}):null,n?o.createElement(p.default,{type:"lead","data-testid":"aether-form-description"},n):null),I),o.createElement(c.default,{gap:"spacing-s"},function(e){if(e&&e.type===d.default&&"primary"===(e.props&&e.props.type))return e;return null}(h),function(e){if(e&&e.type===d.default&&"secondary"===(e.props&&e.props.type))return e;return null}(f))))}h.defaultProps={heading:"",description:"",width:"100%",primaryAction:null,secondaryAction:null,preventDefault:!0,onSubmit:null,"data-testid":"aether-form","data-click":""},h.propTypes={heading:l().string,description:l().string,width:l().string,onSubmit:l().func,preventDefault:l().bool,primaryAction:function(e){var t=e.primaryAction;if(t){if(t.type!==d.default)return new Error("Form: primaryAction prop only accepts Aether button component.");if("primary"!==(t.props&&t.props.type))return new Error("Form: primaryAction prop only accepts button type primary.")}return null},secondaryAction:function(e){var t=e.secondaryAction;if(t){if(t.type!==d.default)return new Error("Form: secondaryAction prop only accepts Aether button component.");if("secondary"!==(t.props&&t.props.type))return new Error("Form: secondaryAction prop only accepts button type secondary.")}return null},children:l().oneOfType([l().arrayOf(l().node),l().node]).isRequired,"data-testid":l().string,"data-click":l().string}},"./api-dev/components/api/AddCollectionToAPI/AddCollectionToAPI.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),d=n("./api-dev/services/APIDevService.js"),u=n("./js/stores/StoreManager.js"),p=n("./api-dev/stores/APIListStore.js"),m=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),g=n("./api-dev/util/error.js"),h=n("./js/components/base/LoadingIndicator.js"),f=n("../../packages/version-control/change-management/index.ts"),I=n("./js/modules/services/AnalyticsService.js"),b=n("./api-dev/interfaces/APIInterface.js"),v=n("./runtime-repl/collection/_api/CollectionInterface.js"),y=n("./api-dev/constants/APITabModes.js"),S=n("./node_modules/lodash/lodash.js");function E(e){const{label:t,forkLabel:n,id:r}=e;return i.createElement(s.default,{grow:1,shrink:1,minWidth:"0px",alignItems:"center",gap:"spacing-s"},i.createElement(o.default,{isTruncated:!0},t),n&&i.createElement(f.ForkLabel,{forkDetails:{id:r,label:n,type:"collection",parent:{}},disableTooltip:!0}))}class C extends i.Component{constructor(e){super(e),this.state={selectedCollections:null,collections:[],isFetchingCollections:!1,isCreatingCollections:!1,errorFetchingCollections:!1},this.handleCollectionSelection=this.handleCollectionSelection.bind(this),this.fetchCollectionsInWorkspace=this.fetchCollectionsInWorkspace.bind(this),this.handleAddCollectionsToAPI=this.handleAddCollectionsToAPI.bind(this),this.addExistingCollectionInBranch=this.addExistingCollectionInBranch.bind(this),this.addExistingCollectionInAPIWorkbench=this.addExistingCollectionInAPIWorkbench.bind(this),this.fetchVersionId=this.fetchVersionId.bind(this)}componentDidUpdate(e){this.props.showAddCollectionsModal&&this.props.showAddCollectionsModal!==e.showAddCollectionsModal&&this.fetchCollectionsInWorkspace()}async fetchCollectionsInWorkspace(){this.setState({isFetchingCollections:!0,errorFetchingCollections:!1});try{const e=await(0,d.getWorkspaceId)(),t=await(0,m.getMeta)(e),n=S.chain(t).get("list").map((e=>S.pick(e,["id","name","forkLabel"]))).value(),i=S.keyBy(n,"id");let s=[];S.isEmpty(i)||(s=await d.default.checkConstraintsForRelationLink(this.props.apiId,this.fetchVersionId(),"unclassified",S.keys(i)));const o=S.reduce(i,(function(e,t,n){return S.find(s,(e=>e.entityId===n&&!0===e.allowed))&&e.push({value:n,label:i[n].name,forkLabel:i[n].forkLabel,id:i[n].id}),e}),[]);this.setState({collections:S.sortBy(o,["label"]),isFetchingCollections:!1,errorFetchingCollections:!1})}catch(e){(0,g.handleError)(e),this.setState({errorFetchingCollections:!0,isFetchingCollections:!1})}}handleCollectionSelection(e){this.setState((t=>({selectedCollections:e})))}fetchVersionId(){const e=(0,u.resolveStoreInstance)(p.default).find(this.props.apiId);return S.get(e,"childEntities.values.0.id")}async addExistingCollectionInBranch(e){const t=this.props.apiId,n=await(0,m.cloneCollection)(e,{format:"2.1.0"});return(0,b.addCollectionOnBranch)(t,"unclassified",n).then((async e=>{const n=(null==e?void 0:e.id)||(null==e?void 0:e.modelId),i={branch:S.get(this.props.model,"apiMode.value"),collection:n},s={type:"api",id:t};return(0,v.openCollectionInTab)(n,{tabOptions:{forceNew:!0},focusContext:"info"},s,i)}))}async addExistingCollectionInAPIWorkbench(e){var t;const n=this.props.apiId,i=null===(t=this.props.model)||void 0===t?void 0:t.id;return(0,v.duplicateCollectionInAPI)(e,{type:"api",id:n,apiVersionId:i,relation:"unclassified"},{origin:"api-overview",openCollectionInTabOptions:{tabOptions:{forceNew:!0}},suffix:""})}async handleAddCollectionsToAPI(){const e=S.get(this.state,"selectedCollections.value"),t=(await(0,b.getAPI)(this.props.apiId)).version.apiRepositoryStore;if(!t.canEditAPISource.allowed)return this.props.toggleShowAddCollectionsModal(),void t.openEditDisabledModal();this.setState({isCreatingCollections:!0});try{I.default.addEventV2({category:"builder"===S.get(this.props,"mode.name")?"collection-non-git-linked":"collection-git-linked",action:"copy-collection-to-api",entityId:S.get(this.state,"selectedCollections.value")})}catch(e){pm.logger.error("AddCollectionToAPI~handleAddCollectionsToAPI Error while sending analytics events",e)}if(this.props.isAPISidebarMode){try{await this.props.onAddExistingCollectionToAPI(S.get(this.state,"selectedCollections.value"))}catch(e){pm.logger.error("AddCollectionToAPI~handleAddCollectionsToAPI Error while adding collection to API",e)}this.setState({isCreatingCollections:!1})}else try{const t=S.get(this.props.model,"apiMode.name")===y.BRANCH_VIEW,n=S.get(this.props.model,"apiMode.name")===y.BUILDER_VIEW;t&&await this.addExistingCollectionInBranch(e),n&&await this.addExistingCollectionInAPIWorkbench(e)}catch(e){(0,g.handleError)(e)}finally{this.setState({isCreatingCollections:!1,selectedCollections:null}),this.props.toggleShowAddCollectionsModal()}}render(){const e=!this.state.isFetchingCollections&&!this.state.errorFetchingCollections;return i.createElement(r.Modal,{isOpen:this.props.showAddCollectionsModal,size:"small",onClose:()=>this.props.toggleShowAddCollectionsModal()},i.createElement(r.ModalHeader,{heading:"Copy an existing collection to this API"}),i.createElement(r.ModalContent,null,this.state.isFetchingCollections&&i.createElement("div",{className:"add-collection-to-api__loader"},i.createElement(h.default,null)),this.state.errorFetchingCollections&&i.createElement(s.default,{direction:"column",gap:"spacing-m",alignItems:"center"},i.createElement(a.default,null),i.createElement(l.default,{type:"primary",text:"Try again",onClick:()=>this.fetchCollectionsInWorkspace()})),e&&i.createElement(c.default,{onChange:this.handleCollectionSelection,options:this.state.collections,value:this.state.selectedCollections,customOptionComponent:E,label:"Collection",placeholder:"Select collection",isSearchable:!0,menuPlacement:"bottom-start",menuMaxHeight:240,isClearable:!0,viaPortal:!0})),i.createElement(r.ModalFooter,null,i.createElement(s.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},i.createElement(l.default,{type:"secondary",text:"Cancel",onClick:()=>this.props.toggleShowAddCollectionsModal()}),i.createElement(l.default,{type:"primary",text:"Copy Collection",isLoading:this.state.isCreatingCollections,isDisabled:S.isNull(this.state.selectedCollections),onClick:()=>this.handleAddCollectionsToAPI()}))))}}},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,n){n.r(t);var i=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const s=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(i.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=s},"./integrations/ci-cd/CircleCIHelper.js":function(e,t,n){n.r(t),n.d(t,{translateToValidSlug:function(){return s}});var i=n("./node_modules/lodash/lodash.js");function s(e){const t=i.split(e,"/"),n=i.first(t);return"bb"===n?`bitbucket/${i.join(i.slice(t,1),"/")}`:"gh"===n?`github/${i.join(i.slice(t,1),"/")}`:e}},"./integrations/ci-cd/buildUtils.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),p=n("./integrations/ci-cd/timeUtils.js"),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("./appsdk/components/link/Link.js"),h=n("./integrations/ci-cd/services/index.ts"),f=n("./integrations/ci-cd/components/CIStatusBadge.js"),I=n("./integrations/ci-cd/constants.ts"),b=n("./js/utils/PluralizeHelper.js"),v=n("./runtime-repl/runner/_api/RunnerInterface.js"),y=n("./js/modules/services/AnalyticsService.js"),S=n("./js/stores/StoreManager.js"),E=n("./js/stores/CurrentUserStore.js"),C=n("./integrations/ci-cd/helpers.js"),j=n("./runtime-repl/runner/workbench/common.js"),_=n("./node_modules/lodash/lodash.js");const P="Cancel",A=(0,m.default)(g.default)`
  display: flex;
  align-items: center;
  min-width: 0px;
`,w=(0,m.default)(s.default)`
    margin-left: 0px;
    text-transform: capitalize;
  `,T=(e,t)=>{const[n,s]=(0,i.useState)(P),[l,c]=(0,i.useState)(!1),{addToast:d}=(0,o.default)(),u=_.get(e,"outcome"),p=_.get(t,"rule"),m=_.includes(_.get(I.CANCELLABLE_OUTCOMES,p),u)&&_.isFunction(_.get(h.default,[p,"cancelBuild"]));return i.createElement(r.default,{direction:"row",gap:"spacing-s"},i.createElement(f.default,{status:u}),m&&i.createElement(a.default,{type:"monochrome-plain",text:n,isDisabled:l,onClick:()=>{s("Cancelling"),c(!0),((e,t,n)=>{const i=_.get(h.default,[e,"cancelBuild"]);return new Promise(((e,s)=>{_.isFunction(i)?i(t,n).then((t=>{e(t)})).catch((e=>{s(e)})):e(!1)}))})(t.rule,t.id,e).then((e=>{let t,n;e?(n={title:"Build Cancelled",status:"success",description:"Build successfully cancelled."},t="Cancelled"):(n={title:"Error",status:"error",description:"Something went wrong while cancelling the build! Please refresh the page"},c(!1),t=P),d(n),s(t)})).catch((e=>{pm.logger.error("CIBuild ~ cancelRunningBuild : Error occurred while cancelling builds",e),d({title:"Error",status:"error",description:"Something went wrong while cancelling the build! Please refresh the page"}),c(!1),s(P)}))}}))};t.default={getTableColumns:function(e,t){let n=t?[{Header:"",accessor:"empty",Cell:e=>i.createElement(i.Fragment,null),disableSortBy:!0,cellWidth:"32px"}]:[];return n=_.concat(n,[{Header:"Name",accessor:e=>({buildName:_.get(e,"build_num"),buildUrl:_.get(e,"build_url"),rowData:e}),Cell:({value:t})=>{const{buildName:n,buildUrl:s,rowData:o}=t;return i.createElement("div",{id:(0,C.getRowIdForBuildsTable)(o)},i.createElement(r.default,{direction:"row",alignItems:"center"},i.createElement(c.default,{color:"content-color-primary"}),i.createElement(A,{to:s,target:"_blank",onClick:()=>{var t;const n=(0,S.resolveStoreInstance)(E.default);y.default.addEventV2({action:"open-build-url",entityId:null==e||null===(t=e.variables)||void 0===t?void 0:t.api_id,entityType:"api",integrationId:null==e?void 0:e.id,rule:null==e?void 0:e.rule,userId:n.id,teamId:n.teamId,category:"postman-cli-api-builder"})}},i.createElement(l.default,{type:"link-subtle",isExternal:!0,isTruncated:!0,className:"build-row-text-with-icon"},n))))}},{Header:"Branch",accessor:"branch",Cell:e=>i.createElement(l.default,{isTruncated:!0},e.value)},{Header:"Timestamp",accessor:"start_time",Cell:e=>`${p.default.timeSince(e.value)}`},{Header:"Duration",accessor:"duration",cellWidth:"15%",Cell:e=>`${p.default.getFormattedDuration(e.value)}`},{Header:"Status",accessor:e=>e,cellWidth:"25%",Cell:({value:t})=>T(t,e)}]),n},getBuildStepsExpandColumns:function(e){return[{Header:"",accessor:"empty",Cell:e=>i.createElement(i.Fragment,null),disableSortBy:!0,cellWidth:"24px"},{Header:"Name",accessor:"name",Cell:e=>i.createElement(l.default,null,e.value),disableSortBy:!0,cellWidth:"30%"},{Header:"Duration",accessor:"duration",Cell:e=>`${p.default.getFormattedDuration(e.value)}`,disableSortBy:!0,cellWidth:"30%"},{Header:"Status",accessor:"status",Cell:e=>i.createElement(f.default,{status:_.get(e,"value")}),disableSortBy:!0},{Header:"",id:"a4042383-8033-4aad-a904-9e84c5cf7724",accessor:"empty",Cell:e=>i.createElement(l.default,null,e.value),disableSortBy:!0}]},getCollectionRunsExpandColumns:function(e){return[{id:"Collection Name",accessor:"name",Cell:e=>i.createElement(r.default,{direction:"row"},i.createElement(d.default,{color:"content-color-primary"}),i.createElement(l.default,{isTruncated:!0,className:"build-row-text-with-icon"},e.value)),disableSortBy:!0},{id:"Status",accessor:e=>{var t;const{status:n,internalLink:i,metrics:s}=e;return[n,i,null==s||null===(t=s.find((e=>"Assertions"===(null==e?void 0:e.name))))||void 0===t?void 0:t.status]},Cell:e=>{const[t,n,o]=e.value,r=(0,m.default)(s.default)`
              margin-left: 0px;
            `,{failedCount:a,totalCount:c}=o||{},d=0!==a?`${a}/${c} failed`:`${c}/${c} passed`,u=(0,j.getAPIParentMetaFromUrl)();return i.createElement("div",null,i.createElement(r,{status:t.status,text:d}),i.createElement("span",{onClick:()=>{(0,v.openRunInTab)(n.split("/").pop(),{preview:!1,activeTestTab:"all"},u)}},i.createElement(g.default,null,i.createElement(l.default,{type:"link-default"},"View Report"))))},disableSortBy:!0,cellWidth:"200px"}]},getSpecificCollectionRunDetailsColumns:function(){return[{Header:"",accessor:"empty",Cell:e=>i.createElement(i.Fragment,null),disableSortBy:!0,cellWidth:"32px"},{Header:"",accessor:"name",Cell:e=>i.createElement(l.default,{isTruncated:!0},e.value),disableSortBy:!0,cellWidth:"60%"},{Header:"",accessor:"status",Cell:e=>{let{failedCount:t,totalCount:n,failedRequests:o}=_.get(e,"value",{}),a=0!==t?"critical":"success",c=0!==t?`${t}/${n} failed`:`${n}/${n} passed`;return 0===n?i.createElement(s.default,{text:"N/A",status:"neutral"}):_.isEmpty(o)?i.createElement(s.default,{text:c,status:a}):i.createElement(r.default,{direction:"column"},i.createElement(s.default,{text:c,status:a}),_.map(o,(e=>i.createElement(g.default,{to:e.link,target:"_blank"},i.createElement(l.default,{type:"link-default",isTruncated:!0,isExternal:!0},e.link)))))},disableSortBy:!0},{Header:"",accessor:"empty3",Cell:e=>i.createElement(i.Fragment,null),disableSortBy:!0}]},getSchemaColumns:function(e){return[{Header:"Schema Name",accessor:"empty",Cell:t=>i.createElement(r.default,{direction:"row"},i.createElement(u.default,{color:"content-color-primary"}),i.createElement(l.default,{isTruncated:!0,className:"build-row-text-with-icon"},e)),disableSortBy:!0},{Header:"Status",accessor:e=>{const{warnings:t}=e;return[t]},cellWidth:"200px",Cell:e=>{const[t]=e.value,n=_.size(t),s=b.default.pluralize({count:n,singular:"Rule violation",plural:"Rule violations"});return i.createElement("div",null,n>0?i.createElement(w,{status:"warning",text:`${n} ${s}`}):i.createElement(w,{status:"success",text:"No rule violation"}))},disableSortBy:!0}]},getSpecificSchemaWarningDetailsColumns:function(){return[{Header:"",accessor:"empty",Cell:e=>i.createElement(i.Fragment,null),disableSortBy:!0,cellWidth:"24px"},{Header:"Warning Message",accessor:"message",Cell:e=>i.createElement(l.default,{isTruncated:!0,className:"build-row-text-with-icon"},e.value),disableSortBy:!0},{Header:"Type",accessor:"type",Cell:e=>i.createElement(l.default,{isTruncated:!0},_.capitalize(e.value)),cellWidth:"40%",disableSortBy:!0},{Header:"Learn more",accessor:"possibleFixUrl",Cell:e=>{if(!e.value)return null;const t=(0,m.default)(l.default)`
            padding-left: var(--spacing-s);
          `;return i.createElement(g.default,{to:e.value,target:"_blank"},i.createElement(t,{type:"link-default",isExternal:!0,isTruncated:!0},"Learn more"))},disableSortBy:!0,cellWidth:"200px"}]}}},"./integrations/ci-cd/components/BitbucketCI.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./integrations/ci-cd/services/BitbucketCI.js"),d=n("./appsdk/workbench/TabService.js"),u=n("./integrations/navigation/constants.js"),p=n("./api-dev/constants/APISubViews.js"),m=n("./integrations/ci-cd/components/Button/AddIntegration.js"),g=n("./integrations/ci-cd/components/Button/CancelButton.js"),h=n("./node_modules/prop-types/index.js"),f=n.n(h),I=n("./js/services/NavigationService.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),v=n("./integrations/ci-cd/constants.ts"),y=n("./integrations/ci-cd/components/CIOAuth.js"),S=n("./node_modules/lodash/lodash.js");let E=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.fetchWorkspaces=()=>{const{addToast:e}=this.props;this.setState({loadingWorkspaces:!0,errorWorkspaces:""}),c.default.fetchWorkspaces(this.state.oauthTokenId).then((e=>{const t=S.get(this.state,"selectedWorkspace.value.workspace_uuid"),n=S.find(e,(e=>S.get(e,"value.workspace_uuid")===t));this.setState({workspaces:e,selectedWorkspace:n,loadingWorkspaces:!1,errorWorkspaces:""})})).catch((t=>{this.setState({loadingWorkspaces:!1,errorWorkspaces:"Error occured while fetching workspaces"}),pm.logger.error("BitbucketCI ~ fetchWorkspaces : Error occurred while fetching workspaces",t),e({title:"Error",description:"Error occurred while fetching workspaces",status:"error"})}))},this.fetchRepositories=()=>{const{addToast:e}=this.props,{selectedWorkspace:t,oauthTokenId:n}=this.state;if(!S.every([t,n],Boolean))return void this.setState({loadingProjects:!1,errorProjects:""});this.setState({loadingProjects:!0,errorProjects:""});const i={tokenId:n,workspaceSlug:S.get(t,"value.workspace_uuid")};c.default.fetchRepositories(i).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((t=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.logger.error("BitbucketCI ~ fetchRepositories : Error occurred while fetching projects",t),e({title:"Error",description:"Error occurred while fetching projects",status:"error"})}))};const{defaultIntegrationName:t}=e;this.store=(0,r.resolveStoreInstance)(a.default),this.state={isAuthenticated:!1,oauthTokenId:null,projects:[],workspaces:[],loadingProjects:!1,loadingWorkspaces:!1,selectedProject:"",selectedWorkspace:"",errorProjects:"",errorWorkspace:"",nickname:t},this.fetchRepositories=this.fetchRepositories.bind(this),this.fetchWorkspaces=this.fetchWorkspaces.bind(this),this.getPayload=this.getPayload.bind(this),this.closeCurrentTab=this.closeCurrentTab.bind(this)}componentDidMount(){const{workspace:e,project:t}=this.props.apiRepositoryLink;S.every([e,t],Boolean)&&this.setState({selectedProject:{label:S.get(t,"name"),value:{workspace_uuid:S.get(e,"slug"),repo_uuid:S.get(t,"slug"),repo_name:S.get(t,"name")}},selectedWorkspace:{label:S.get(e,"name"),value:{workspace_uuid:S.get(e,"slug"),workspace_name:S.get(e,"name")}},nickname:`Bitbucket Pipeline Integration with ${t.name}`})}closeCurrentTab(){const{apiId:e,apiVersionId:t}=this.props;d.default.closeByRoute(u.V10_API_ADD_CI_INTEGRATION_URL,{apiId:e}),I.default.transitionTo("build.apiVersion",{apiId:e,versionId:t},{tab:p.TEST})}getPayload(){const{nickname:e,selectedProject:t,selectedWorkspace:n,oauthTokenId:i}=this.state,{rule:s,apiId:o,apiVersionId:r}=this.props,a=S.get(t,"value.repo_uuid"),l=S.get(t,"value.repo_name");return{classId:s,name:e,inputs:{api_id:o,apiversion:r,repo_slug:a,workspace_slug:S.get(n,"value.workspace_uuid"),repository_name:l,workspace_name:S.get(n,"value.workspace_name"),oauth_token_id:i}}}render(){const{apiId:e,apiVersionId:t,rule:n,originalTabId:i}=this.props;return this.state.isAuthenticated?s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(l.NicknameFieldSegment,{id:"bitbucket-pipelines-nickname",value:this.state.nickname,error:""===this.state.nickname?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),s.createElement(l.SelectSegmentV2,{title:"Choose your workspace",description:"Select the Bitbucket workspace",label:"Select",disabled:this.state.loadingWorkspaces||!S.isEmpty(this.state.errorWorkspaces),options:this.state.workspaces,value:this.state.selectedWorkspace,onTargetSelect:e=>{this.setState({selectedWorkspace:e,selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No workspace found",error:this.state.errorWorkspaces,loading:this.state.loadingWorkspaces,handleRetry:this.fetchWorkspaces}),s.createElement(l.SelectSegmentV2,{title:"Choose your CI project",description:"Select the Bitbucket repository where the pipeline is configured",label:"Select",disabled:this.state.loadingProjects||!S.isEmpty(this.state.errorProjects),options:this.state.projects,value:this.state.selectedProject,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:this.state.errorProjects,loading:this.state.loadingProjects,handleRetry:this.fetchRepositories}),s.createElement(m.default,{type:"primary",size:"small",payload:this.getPayload(),disabled:!this.state.selectedProject||S.isEmpty(this.state.nickname),alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:i},"Connect"),s.createElement(g.default,{apiId:e,apiVersionId:t})):s.createElement(y.default,{onComplete:(e,t)=>{if(e)return void pm.logger.error("Bitbucket~oauth: Unable to complete authentication",e);const{tokenId:n}=t;n&&this.setState({isAuthenticated:!0,oauthTokenId:n},(()=>{this.fetchWorkspaces()}))},onCancel:this.closeCurrentTab,oAuthServiceName:S.get(v.RULE_TO_OAUTH_SERVICE_MAPPING,n)})}})||i;t.default=(0,b.default)(E),E.propTypes={rule:f().string.isRequired,apiId:f().string.isRequired,apiVersionId:f().string.isRequired,apiRepositoryLink:f().object}},"./integrations/ci-cd/components/BranchFilterDropdown.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),a=n("./node_modules/prop-types/index.js"),l=n.n(a),c=n("./integrations/ci-cd/helpers.js");const d=(0,s.default)(o.default)`
  width: fit-content;
  max-width: 300px;
  &-filter-select__popover {
    & .aether-filter-select-dropdown__control,
    & .aether-filter-select-dropdown__menu {
      width: 300px;
    }
  }
`,u=e=>{const{allowMultipleSelection:t,branchOptions:n,onChange:s,defaultSelectedOptions:o,className:a}=e,[l,u]=(0,i.useState)(o),p=e=>(u(e),s(e));return t?i.createElement(d,{triggerType:"tertiary",className:`filter-dropdowns--branch ${a}`,inlineLabel:(0,c.getFilterInlineLabel)(l,"branches"),value:l,options:n,onChange:p,placeholder:"Branch",emptyStateMessage:"No branch found"}):i.createElement(r.default,{className:"filter-dropdowns--branch",value:l,options:n,onChange:p,placeholder:"Branch",emptyStateMessage:"No branch found",isClearable:!1,allowCreateNewOption:!0})};u.propTypes={branchOptions:l().array.isRequired,allowMultipleSelection:l().bool,onChange:l().func.isRequired,defaultSelectedOptions:l().array},u.defaultProps={allowMultipleSelection:!1,defaultSelectedOptions:[]},t.default=u},"./integrations/ci-cd/components/BuildsTable.js":function(e,t,n){n.r(t);var i=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("./integrations/ci-cd/components/CIEmptyTableView.js"),l=n("./integrations/ci-cd/buildUtils.js"),c=n("./integrations/ci-cd/components/ExpandedBuildRow.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),p=n("./integrations/ci-cd/helpers.js"),m=n("./integrations/ci-cd/customHooks/useAPIName.js"),g=n("./node_modules/lodash/lodash.js");const h=e=>{const t=(0,m.default)(g.get(e,"apiId","")),[n,o]=(0,s.useState)(!0),[r,h]=(0,s.useState)({[g.get(e,"branchAndBuildIdIdentifier")]:!0});(0,s.useEffect)((()=>{const{data:t,branchAndBuildIdIdentifier:i}=e;if(n){const e=g.find(t,(e=>i===(0,p.getRowIdForBuildsTable)(e))),n=e&&document.getElementById((0,p.getRowIdForBuildsTable)(e));n&&n.scrollIntoView({behavior:"smooth"}),o(!1),h({})}return()=>{(0,d.resolveStoreInstance)(u.default).cleanUp(g.get(e,"integration.id"))}}));const{data:f,integration:I,showConfigureNewmanButtonOnEmptyState:b,apiId:v,apiVersionId:y}=e,S=g.get(I,"rule"),E=g.get(f,"0.showCollectionRuns"),C=g.get(f,"0.showBuildSteps"),j=E||C,_={className:"table-content",data:f,blankState:{isEmpty:g.isEmpty(f),component:s.createElement(a.default,{showConfigureNewmanButton:b,integrationData:I,apiId:v,apiVersionId:y})},getRowId:p.getRowIdForBuildsTable,columns:l.default.getTableColumns(I,!j),sorting:!0},P=e=>s.createElement(c.default,{rule:S,rowData:e,integration:I,apiName:t});return j&&(_.rowExpanded={subComponent:P,initialExpansionState:r}),"gitlab_ci"===S&&(_.columns=g.reject(_.columns,{accessor:"duration"})),s.createElement(i.default,_)};h.propTypes={data:r().arrayOf(r().object).isRequired,integration:r().object.isRequired,showConfigureNewmanButtonOnEmptyState:r().bool,apiId:r().string,apiVersionId:r().string,buildId:r().string,branchAndBuildIdIdentifier:r().string},t.default=h},"./integrations/ci-cd/components/Button/AddIntegration.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var i,s=n("../../node_modules/react/index.js"),o=n("./js/components/base/Buttons.js"),r=n("./js/components/base/LoadingIndicator.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),p=n("./js/services/NavigationService.js"),m=n("./appsdk/workbench/TabService.js"),g=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=n("./js/modules/services/AnalyticsService.js"),f=n("./node_modules/classnames/index.js"),I=n.n(f),b=n("./integrations/navigation/constants.js"),v=n("./node_modules/lodash/lodash.js");function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y.apply(this,arguments)}let S=(0,g.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,d.resolveStoreInstance)(u.default),this.integrationsStore=(0,d.resolveStoreInstance)(c.default),this.state={isProcessing:!1},this.handleProcessing=this.handleProcessing.bind(this),this.getExistingIntegrations=this.getExistingIntegrations.bind(this)}async getExistingIntegrations(e){const t=["continuous-integration"];await a.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,t).then((e=>{if(e[t[0]].length>0)throw e})).catch((e=>{throw pm.logger.error("Something went wrong. Please try again."),e}))}handleProcessing(e){this.setState({isProcessing:e})}render(){const{disabled:e,payload:t,workspaceId:n,service:i,useInstanceApi:c,alignLeft:d,isBrowseIntegration:u,originalTabId:g,...f}=this.props;let S=t.rule||t.classId,E=v.get(t,"variables.api_id")||v.get(t,"inputs.api_id"),C=v.get(t,"executor")||v.get(t,"inputs.apiversion");return s.createElement("div",{className:I()("integrations-add-actions__button--container",{"align-left":d})},s.createElement(o.Button,y({type:"primary",className:"integrations-add-actions__button--proceed",disabled:e||this.store.isAdding||this.state.isProcessing,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:async e=>{this.handleProcessing(!0);try{let e;u&&await this.getExistingIntegrations(C),e=c?l.default.createIntegrationInstance(t.classId,t.name,t.inputs):a.default.createIntegration(n||null,t),e.then((e=>{if(200===e.status&&(v.get(e,"body.model_id")||v.get(e,"body.data.id"))){pm.toasts.success("Added a new integration");const t=v.get(e,"body.model_id")||v.get(e,"body.data.id");if(this.integrationsStore.setRuleSpecificTeamIntegrations(S,null),this.integrationsStore.refetchTeamIntegrations(),this.store.fetchIntegrationInstance("apiversion",C),u){if(h.default.addEventV2({category:"integrations",action:S+"_created_integration",label:"team_integrations_create_forms",value:1}),this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;p.default.transitionTo(e,t,n)}else p.default.transitionTo(b.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:i,ruleId:S});this.integrationsStore.resetAddIntegrationDependencies()}else if(h.default.addEventV2({category:"ci_integrations",action:"click",label:"api_builder_completed",type:{rule:S},value:1}),m.default.closeByRoute(b.V10_API_ADD_CI_INTEGRATION_URL,{apiId:E}),this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;p.default.transitionTo(e,t,n)}else{const e=b.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,n={apiId:E,integrationId:t},i={additionalContext:{isIntegrationAdded:!0},...g&&{tabOptions:{openIn:g}}};p.default.transitionTo(e,n,{},i)}}else pm.toasts.error("Something went wrong while adding a new integration.");this.handleProcessing(!1)})).catch((e=>{this.handleProcessing(!1),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration."),pm.logger.error("Something went wrong while adding a new integration",e)}))}catch(e){this.handleProcessing(!1),pm.toasts.error("The integration already exists for the provided API version. Please select a different version or delete the existing integration!")}}},f),this.state.isProcessing?s.createElement(r.default,null):this.props.children))}})||i},"./integrations/ci-cd/components/Button/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i=n("../../node_modules/react/index.js"),s=n("./appsdk/workbench/TabService.js"),o=n("./integrations/navigation/constants.js"),r=n("./js/components/base/Buttons.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./api-dev/util/navigationHelper.js"),p=n("./integrations/ci-cd/constants.ts");function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m.apply(this,arguments)}class g extends i.Component{constructor(e){super(e),this.store=(0,c.resolveStoreInstance)(d.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,...a}=this.props;return i.createElement("div",{className:`${this.props.isBrowseIntegration?l()("integrations-add-actions__button--container",{"align-left":n}):"cancel-button"}`},i.createElement(r.Button,m({className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{s.default.closeByRoute(o.V10_API_ADD_CI_INTEGRATION_URL,{apiId:this.props.apiId}),setTimeout((()=>{(0,u.transitionToAPI)({apiId:this.props.apiId},{view:p.TEST_AND_AUTOMATION_VIEW})}),0),this.store.resetAddIntegrationDependencies()}},a),"Cancel"))}}},"./integrations/ci-cd/components/CIDetailedBuilds.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/ActiveWorkspaceSessionStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./api-dev/stores/APIListStore.js"),c=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),b=n("./integrations/ci-cd/components/StatusFilterDropdown.js"),v=n("./integrations/ci-cd/components/BranchFilterDropdown.js"),y=n("./integrations/ci-cd/helpers.js"),S=(n("./js/utils/NavigationUtil.js"),n("./js/services/NavigationService.js")),E=(n("./appsdk/workbench/TabService.js"),n("./integrations/navigation/constants.js")),C=n("./integrations/ci-cd/components/CommonCIComponents.js"),j=n("./js/modules/services/AnalyticsService.js"),_=n("./js/external-navigation/ExternalNavigationService.js"),P=n("./integrations/ci-cd/constants.ts"),A=n("./integrations/ci-cd/components/BuildsTable.js"),w=n("./integrations/ci-cd/components/ErrorStates/AuthenticationExpiredBanner.js"),T=n("./integrations/utils/CommonHelperMethods.ts"),k=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),L=n("./integrations/constants/v10IntegrationConstants.ts"),D=n("./node_modules/lodash/lodash.js");let R=(0,o.observer)(i=class extends s.Component{constructor(e){super(e);const{builds:t,branches:n,selectedBranch:i}=e,s=[],o=i?(0,y.getFilteredBuilds)(t,[i],null):t,l=(0,y.getUniqueItemsFromBuilds)(t,"branch"),d=D.map(l,"value");i?(D.includes(d,i)||l.push({value:i,label:i}),s.push(i),this.defaultSelectedBranchOption=D.filter(l,{value:i})):this.defaultSelectedBranchOption=[],this.store=D.get(e,["controller","store"],(0,a.resolveStoreInstance)(c.default)),this.state={builds:t,integration:{id:"",rule:"",variables:{project_slug:""}},loadingBuilds:!1,errorBuilds:"",triggerBranches:n,loadingTriggerBranches:!1,errorTriggerBranches:"",branchOptions:[],filteredBuilds:o,filteredBranches:l,buildOffset:0,paginationLimit:100,buildsPerPage:10,loadMoreVisible:!0,branchesSelected:0,statusSelected:0,isPopoverOpen:!0,isIntegrationAdded:D.get(this.props,"controller.additionalContext.isIntegrationAdded"),currentWorkspaceId:(0,a.resolveStoreInstance)(r.default).workspace,isNewmanConfigTooltipVisible:!1,selectedStatusFilters:[],selectedBranchFilters:s},this.populateFilteredBranches=this.populateFilteredBranches.bind(this),this.handleBuildsRefresh=this.handleBuildsRefresh.bind(this),this.handleBackButtonPress=this.handleBackButtonPress.bind(this),this.handleConfigureNewmanPress=this.handleConfigureNewmanPress.bind(this),this.handleCovertBranch=this.handleConvertBranch.bind(this),this.getTooltipContent=this.getTooltipContent.bind(this)}componentDidMount(){const{builds:e}=this.state,{apiId:t,version:n}=this.props.controller;this.populateBranches(e);let i=pm.settings.getSetting("NewmanConfigOnboardingTooltip")||[];i&&i.includes(this.state.currentWorkspaceId)||(this.state.isIntegrationAdded&&this.setState({isNewmanConfigTooltipVisible:!0}),i.push(this.state.currentWorkspaceId),pm.settings.setSetting("NewmanConfigOnboardingTooltip",i)),this.store.initializeApiIntegrationsStore({apiId:t,apiVersionId:n,category:P.CI_CD_BUILDS})}populateBranches(e){const{branchOptions:t}=this.state;let n=[...t],i=[];D.forEach(e,(e=>{let t=0;D.forEach(n,(n=>{n===e.branch&&(t=1)})),0===t&&(n.push(e.branch),i.push(e.branch))})),this.setState({branchOptions:[...n]}),this.populateFilteredBranches(D.compact(i))}populateFilteredBranches(e){const t=[...this.state.filteredBranches];D.forEach(e,(e=>{t.push({label:e,value:e})})),this.setState({filteredBranches:t})}handleBuildsRefresh(){const{integrationId:e,rule:t,apiId:n,version:i}=this.props.controller,{selectedStatusFilters:s,selectedBranchFilters:o}=this.state;this.store.fetchBuilds(e,t,(()=>{let r=this.props.builds,a=(0,y.getFilteredBuilds)(r,o,s);this.setState({builds:r,filteredBuilds:a,filteredBranches:(0,y.getUniqueItemsFromBuilds)(this.props.builds,"branch")}),this.populateBranches(this.props.builds),this.store.fetchBranches(e,t,(()=>{this.setState({triggerBranches:this.props.branches}),this.store.initializeApiIntegrationsStore({apiId:n,apiVersionId:i,category:P.CI_CD_BUILDS})}))}))}handleBackButtonPress(){const{apiId:e,version:t}=this.props.controller,n=(0,a.resolveStoreInstance)(r.default).activeEditor;S.default.transitionTo(E.API_OVERVIEW_IDENTIFIER,{apiId:e},{view:L.TESTS},{tabOptions:{openIn:n}}),this.store.initializeApiIntegrationsStore({apiId:e,apiVersionId:t,category:P.CI_CD_BUILDS})}async handleConfigureNewmanPress(){const{apiId:e,version:t,rule:n,integrationId:i,service:s}=this.props.controller,o=(0,a.resolveStoreInstance)(l.default).find(e);j.default.addEventV2({category:"ci-integration",action:"configure-postman-cli",label:n,value:1}),(0,k.openConfigurePostmanCLIInTab)({isMigrated:null==o?void 0:o.isMigrated,apiId:e,versionId:t,queryParams:{integration:i,rule:n,service:s}})}handleConvertBranch(e){if(0!=this.state.triggerBranches.length)return this.state.triggerBranches;{let t=[];return e.forEach((e=>{let n={label:e,value:e};t.push(n)})),t}}handlePopoverButtons(e){"configurePostmanCLI"===e&&this.handleConfigureNewmanPress(),this.setState({isPopoverOpen:!1,isNewmanConfigTooltipVisible:!1})}getTooltipContent(){return s.createElement("div",{className:"configure-newman-button-tooltip"},s.createElement("div",{className:"configure-newman-button-tooltip__header"},"Run Postman collections on CI/CD"),s.createElement("div",{className:"configure-newman-button-tooltip__content"},"Configure Postman CLI to run API tests created in Postman on your CI pipeline. ",s.createElement("span",{className:"configure-newman-button-tooltip__link",onClick:()=>(0,_.openExternalLink)(P.POSTMAN_CLI_TOOLTIP_URL,"_blank")},"Learn more")," about Postman CLI Configuration."),s.createElement(d.default,null,s.createElement(u.default,{type:"primary",size:"medium",text:"Configure Postman CLI",onClick:()=>{this.handlePopoverButtons("configurePostmanCLI")}}),s.createElement(u.default,{type:"secondary",size:"medium",text:"Maybe Later",onClick:()=>this.handlePopoverButtons("mayBeLater")})))}render(){const{branchOptions:e,builds:t,selectedStatusFilters:n,selectedBranchFilters:i,filteredBuilds:o,isPopoverOpen:r}=this.state,{integration:a,rule:l,apiId:c,version:d,buildId:S,branchAndBuildIdIdentifier:E}=this.props.controller,{loadingBuilds:j,isAuthenticationError:_}=this.store,k=D.get(a,"id"),L=D.get(a,"service"),R=(0,y.getProjectName)(a),x=D.get(P.RULE_TO_OAUTH_SERVICE_MAPPING,l),B=D.get(P.RULE_TO_SERVICE,l),N=this.handleConvertBranch(e);return s.createElement("div",{className:"ci-cd-builds-page-container"},s.createElement("div",{className:"ci-cd-builds-page-info-container"},s.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},s.createElement(u.default,{type:"tertiary",icon:s.createElement(f.default,null),onClick:this.handleBackButtonPress}),s.createElement(C.ProjectHeader,{projectName:R,readableServiceName:B})),s.createElement("div",{className:"right-hand-buttons"},this.state.isNewmanConfigTooltipVisible?s.createElement(m.default,{className:"configure-newman-button-popover",maxWidth:300,placement:"left-start",isOpen:r,trigger:s.createElement(u.default,{onClick:this.handleConfigureNewmanPress,className:"configure-newman-button",icon:s.createElement(I.default,null),text:"Configure Postman CLI",type:"tertiary",size:"medium"})},this.getTooltipContent()):s.createElement(u.default,{onClick:this.handleConfigureNewmanPress,className:"configure-newman-button",icon:s.createElement(I.default,null),text:"Configure Postman CLI",type:"tertiary",tooltip:"Run collections using Postman CLI"}),s.createElement(C.IntegrationEditDeleteMenu,{rule:l,integrationId:k,onIntegrationDelete:this.handleBackButtonPress,integrationService:L,apiId:c,apiVersionId:d}))),s.createElement("div",{className:"dynamic-container"},_&&x&&s.createElement(p.default,{padding:{paddingTop:"spacing-l",paddingLeft:"spacing-l",paddingBottom:"spacing-zero",paddingRight:"spacing-l"}},s.createElement(w.default,{serviceId:x,tokenId:(0,T.getTokenIdFromIntegration)(a),reauthQueryParamData:{apiId:c,eventName:`api-oauth-integration-re-authenticated-${c}`,apiVersionId:d}})),s.createElement(p.default,{alignItems:"center",justifyContent:"space-between",padding:"spacing-s spacing-l"},s.createElement(p.default,{alignItems:"center",gap:"spacing-xs"},s.createElement(g.default,null,"Filter by "),s.createElement(v.default,{allowMultipleSelection:!0,branchOptions:this.state.filteredBranches,defaultSelectedOptions:this.defaultSelectedBranchOption,onChange:e=>{const i=D.map(e,"value");this.setState({selectedBranchFilters:i,filteredBuilds:(0,y.getFilteredBuilds)(t,i,n)})}}),s.createElement(b.default,{onChange:e=>{const n=D.map(e,"value");this.setState({selectedStatusFilters:n,filteredBuilds:(0,y.getFilteredBuilds)(t,i,n)})}})),s.createElement(p.default,{gap:"spacing-xs"},s.createElement(C.TriggerBuild,{rule:l,integrationId:k,branches:N,refreshBuilds:()=>{this.handleBuildsRefresh()},iconSize:"medium"}),s.createElement(C.RefreshBuildsButton,{onClick:this.handleBuildsRefresh,iconSize:"medium"}))),j?s.createElement(h.default,{className:"ci-cd-loading-build-indicator"}):s.createElement("div",{className:"ci-cd-builds-table"},s.createElement("div",{className:"ci-cd-builds-table-success"},s.createElement(A.default,{data:o,integration:a,apiId:c,apiVersionId:d,showConfigureNewmanButtonOnEmptyState:!D.size(o),buildId:S,branchAndBuildIdIdentifier:E})))))}})||i},"./integrations/ci-cd/components/CIEmptyTableView.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),o=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),c=n("./integrations/ci-cd/constants.ts"),d=n("./js/stores/StoreManager.js"),u=n("./api-dev/stores/APIListStore.js"),p=n("./js/modules/services/AnalyticsService.js"),m=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),g=n("./node_modules/lodash/lodash.js");const h=e=>{const{entityName:t="builds",apiId:n,apiVersionId:s,integrationData:o,showConfigureNewmanButton:h,description:f,title:I}=e,b=g.get(o,"id"),v=g.get(o,"rule"),y=g.get(o,"service"),S=g.get(c.RULE_TO_SERVICE,v,"");return i.createElement(r.default,{title:I||`No ${t} found`,description:f||`There are no ${t} on ${S}. You can run your Postman Collections on ${S} by configuring Postman CLI.`,secondaryAction:h&&i.createElement(a.default,{type:"outline",text:"Configure Postman CLI","data-testid":"integrations-configure-newman-button",onClick:()=>{const e=(0,d.resolveStoreInstance)(u.default).find(n);p.default.addEventV2({category:"ci-integration",action:"configure-postman-cli",label:v,value:1}),(0,m.openConfigurePostmanCLIInTab)({isMigrated:null==e?void 0:e.isMigrated,apiId:n,versionId:s,queryParams:{integration:b,rule:v,service:y}})}})},i.createElement(l.default,null))};h.propTypes={entityName:o().string,title:o().string,description:o().string,showConfigureNewmanButton:o().bool,integrationData:o().shape({id:o().string.isRequired,rule:o().string.isRequired,service:o().string.isRequired}),apiId:o().string,apiVersionId:o().string},t.default=h},"./integrations/ci-cd/components/CIOAuth.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),o=n.n(s),r=n("./integrations/services/OAuthService.js"),a=n("./api-dev/services/IntegrationService.js"),l=n("./js/services/NavigationService.js"),c=n("./integrations/components/OAuthComponent.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Form/Form.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),h=n("./integrations/constants/integrationsConstants.ts"),f=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),n("./node_modules/lodash/lodash.js"));function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I.apply(this,arguments)}const b=(0,d.default)((e=>{const{addToast:t,oAuthServiceConfig:n,onComplete:s,onCancel:o}=e,[l,c]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[I,b]=(0,i.useState)(!1),v=f.get(n,"userFriendlyServiceName"),y=f.get(n,"requiredScopes"),S=y?`Please ensure that you provide the following scopes: ${y}`:"",E=(e,n)=>{b(!1),e&&t({title:"Error",description:"Unable to authenticate with the provided domain and access token. Please try again.",status:"error"}),s(e,n)},C=l&&d;return i.createElement(i.Fragment,null,i.createElement(u.default,{name:"enterprise-auth-form","data-testid":"integrations-enterprise-auth-form",primaryAction:i.createElement(p.default,{type:"primary",text:"Authenticate","data-testid":"integrations-enterprise-auth-submit-button",isLoading:I,tooltip:C?"":"Please enter both the domain URL and access token",isDisabled:!C,onClick:e=>{b(!0),r.default.createToken({service:f.get(n,"service"),accessToken:d}).then((e=>{const t=f.get(e,"id");t||E(e),a.default.getUserDetails(t,l).then((n=>{f.isEmpty(n)?E(e):E(null,{tokenId:t,domain:l})})).catch(E)})).catch(E)}}),secondaryAction:i.createElement(p.default,{type:"secondary","data-testid":"integrations-enterprise-auth-cancel-button",text:"Cancel",onClick:e=>{o()}})},i.createElement(m.default,{label:i.createElement(g.default,{text:`${v} domain URL`,fieldType:"required"}),value:l,"data-testid":"integrations-enterprise-auth-domain-input",onChange:e=>{c(e.target.value)}}),i.createElement(m.default,{label:i.createElement(g.default,{text:"Token",infoText:S,fieldType:"required"}),type:"password","data-testid":"integrations-enterprise-auth-token-input",value:d,onChange:e=>{h(e.target.value)}})))}));b.propTypes={onComplete:o().func.isRequired,onCancel:o().func.isRequired,oAuthServiceConfig:o().object.isRequired};class v extends i.Component{constructor(e){super(e),this.state={authorizationError:!1},this.initiateOAuth=this.initiateOAuth.bind(this)}componentDidMount(){this.initiateOAuth()}initiateOAuth(){const{onComplete:e,oAuthServiceConfig:t}=this.props,n=f.get(t,"service"),i=f.get(t,"tokenType");this.setState({authorizationError:!1}),r.default.initiateAuthorization(n,{tokenType:i}).then((({status:t,body:i})=>{if(200!==t)pm.logger.error("CIOAuth ~ Failed to create an OAuth session",t,i),this.setState({authorizationError:!0},(()=>{e({status:t,body:i})}));else{let t=`${window.postman_integrations_public_url}/oauth/authorize/${n}?sessionId=${i.sessionId}`;l.default.openURL(t,{target:"_blank"}),r.default.getToken(i.sessionId,((t,n)=>{if(t)return this.setState({authorizationError:!0},(()=>{e(t)})),void pm.logger.error("CIOAuth ~ Failed to fetch token information",t);e(null,{tokenId:f.get(n,"tokenId")})}))}})).catch((t=>{this.setState({authorizationError:!0},(()=>{e(t)})),pm.logger.error("CIOAuth ~ Unable to perform OAuth",t)}))}render(){const{authorizationError:e}=this.state,{onCancel:t,oAuthServiceConfig:n}=this.props,s=f.get(n,"userFriendlyServiceName");return e?i.createElement(c.AuthorizationErrorView,{title:`${s} authorization error`,description:"Please try again.",buttonText:"Try again",onButtonClick:()=>{this.initiateOAuth()}}):i.createElement(c.AuthorizingView,{iconName:f.get(n,"iconName"),primaryText:`Connecting to ${s}...`,secondaryText:"This may take up to 60 seconds.",onCancel:t})}}v.propTypes={onComplete:o().func.isRequired,onCancel:o().func.isRequired,oAuthServiceConfig:o().object.isRequired};const y=e=>{const{oAuthServiceName:t}=e,n=f.get(h.SERVICE_OAUTH_CONFIG,f.upperCase(t));return f.get(n,"tokenType")===h.PERSONAL_ACCESS_TOKEN_TYPE?i.createElement(b,I({},e,{oAuthServiceConfig:n})):i.createElement(v,I({},e,{oAuthServiceConfig:n}))};y.propTypes={onComplete:o().func.isRequired,onCancel:o().func.isRequired,oAuthServiceName:o().string.isRequired},t.default=y},"./integrations/ci-cd/components/CIStatusBadge.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("./integrations/ci-cd/constants.ts"),l=n("./node_modules/lodash/lodash.js");const c=e=>{const{status:t}=e,n=l.lowerCase(t)||"-",o=l.get(a.BUILD_STATUS_TO_BADGE_TYPE_MAP,n,a.AETHER_BADGE_STATUS.NEUTRAL);return i.createElement(s.default,{status:o,text:n})};c.propTypes={status:r().string.isRequired},t.default=c},"./integrations/ci-cd/components/CircleCI.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./integrations/ci-cd/components/Button/AddIntegration.js"),a=n("./integrations/ci-cd/components/CircleCIFormData.js"),l=n("./integrations/ci-cd/components/Button/CancelButton.js");let c=(0,o.observer)(i=class extends s.Component{render(){const{rule:e,service:t,apiId:n,apiVersionId:i,originalTabId:o}=this.props;return s.createElement(a.default,{apiId:n,apiVersionId:i,classId:e,optionalFormComponents:(e,a)=>s.createElement(s.Fragment,null,s.createElement(r.default,{type:"primary",size:"small",payload:a,service:t,disabled:!e,alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:o},"Connect"),s.createElement(l.default,{apiId:n,apiVersionId:i}))})}})||i},"./integrations/ci-cd/components/CircleCIFormData.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),l=n("./integrations/ci-cd/services/Circleci.js"),c=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./js/stores/StoreManager.js"),m=n("./node_modules/prop-types/index.js"),g=n.n(m),h=n("./integrations/constants/integrationsConstants.ts"),f=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),I=n("./integrations/ci-cd/constants.ts"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),v=n("./integrations/ci-cd/CircleCIHelper.js"),y=n("./node_modules/lodash/lodash.js");const{UNABLE_TO_FETCH_PROJECTS:S,FETCH_PROJECTS_AUTHENTICATION_ERROR:E,UNABLE_TO_FETCH_CLASS_DATA:C}=I.ERRORS;let j=(0,f.observer)(i=class extends s.Component{constructor(e){super(e),this.state={selectedWorkspace:{},selectedApi:{},selectedApiVersion:{},selectedProject:{},projects:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorToken:"",integrationId:null},this.debouncedFetchProjects=y.debounce(this.fetchProjects.bind(this),1e3),this.store=(0,p.resolveStoreInstance)(u.default),this.setProjectInputClassData=this.setProjectInputClassData.bind(this),this.getInitialState=this.getInitialState.bind(this),this.addToast=this.props.addToast,this.addProjectSlugToCurrentStateData=this.addProjectSlugToCurrentStateData.bind(this)}componentDidMount(){const{classData:e,classId:t}=this.props;this.setState(this.getInitialState()),y.isEmpty(e)?d.default.fetchIntegrationClassDetails(t).then((e=>{const t=y.get(e,"body.data");200!==e.status||y.isEmpty(t)?(pm.logger.error("CircleCI Service ~ Error in fetching class details",e,{errorContext:I.errorContext}),this.addToast({description:C,status:"error"})):this.setProjectInputClassData(t)})).catch((e=>{pm.logger.error("CircleCI Service ~ Unknown error in fetching class details",e,{errorContext:I.errorContext}),this.addToast({description:C,status:"error"})})):this.setProjectInputClassData(e)}getInitialState(){const{defaultName:e,defaultCircleCIToken:t,defaultSelectedProjectSlug:n}=this.props;return{nickname:e,circleCIToken:t,selectedProjectSlug:(0,v.translateToValidSlug)(n)}}addProjectSlugToCurrentStateData(){return{...this.state,selectedProjectSlug:(0,v.translateToValidSlug)(y.get(this.state,["selectedProject","value"],""))}}setProjectInputClassData(e){const t=y.get(e,"inputs"),{defaultCircleCIToken:n}=this.props,i=y.first(y.filter(t,{key:"project_slug"}));this.setState({projectClassInputData:i},(()=>{n&&this.fetchProjects()}))}fetchProjects(){const{circleCIToken:e,projectClassInputData:t}=this.state,{integrationId:n,defaultSelectedProjectSlug:i}=this.props,s={circleci_token:e};this.setState({loadingProjects:!0,errorProjects:""}),l.default.fetchProjects(s,t,n).then((e=>{let t={};if(i){const n=(0,v.translateToValidSlug)(i);t=y.find(e,{value:n})||{}}this.setState({projects:e,loadingProjects:!1,errorProjects:"",selectedProject:t})})).catch((e=>{const t=y.get(e,"error.details.statusCode");let n=S;!t||401!==t&&403!==t||(n=E),this.setState({loadingProjects:!1,errorProjects:n}),pm.logger.error("CircleCIFormData ~ "+n,e,{errorContext:I.errorContext})}))}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:i,errorToken:a,errorProjects:l,circleCIToken:d}=this.state,{optionalFormComponents:u,renderDisabledApiApiversionSelector:p,apiId:m,apiVersionId:g,renderApiApiversionSelector:f,classId:I}=this.props,v=m||this.store.selectedEntity&&this.store.selectedEntity.value,S=g||this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,E=this.store.selectedWorkspace&&this.store.selectedWorkspace.value,C={classId:I,name:e,inputs:{api_id:v,apiversion:S,circleci_token:d,project_slug:y.get(i,"value","")}},j=y.get(C,"name")&&y.every(y.values(y.get(C,"inputs",{})),Boolean);return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(o.NicknameFieldSegment,{id:"circleci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),p&&s.createElement(c.default,{apiId:m,apiVersionId:g}),f&&s.createElement(s.Fragment,null,s.createElement(o.WorkspaceSelector,{description:"Select the workspace your API is in"}),s.createElement(o.EntitySelector,{id:"api-schemas",entity:h.entityTypes.APIS,workspaceId:E,title:"Select API",description:"Select the API to connect",rule:I,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),s.createElement(o.EntitySelector,{id:"api-schema-versions",entity:h.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:I,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity})),s.createElement(o.SensitiveFieldSegment,{title:"API Key",description:"Enter CircleCI token or ",customLink:s.createElement(r.default,{extUrl:"https://go.pstmn.io/docs-circleci-apikey"},"generate one here"),error:a,value:d,onChange:e=>{this.setState({circleCIToken:e.trim(),selectedProject:"",projects:[]},this.debouncedFetchProjects)}}),s.createElement(o.SelectSegmentV2,{title:"Choose your CI project",description:"If your project is not listed, please make sure you follow it on CircleCI.",label:"Select",disabled:n||!y.isEmpty(l),options:t,value:i,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:l,loading:n,handleRetry:this.debouncedFetchProjects}),u&&u(j,C,(0,b.isFormUpdated)(this.getInitialState(),this.addProjectSlugToCurrentStateData())))}})||i;j.propTypes={classData:g().object,defaultCircleCIToken:g().string,defaultSelectedProjectSlug:g().string,defaultName:g().string,integrationId:g().string,apiId:g().string,apiVersionId:g().string,classId:g().string.isRequired,renderDisabledApiApiversionSelector:g().bool,renderApiApiversionSelector:g().bool,optionalFormComponents:g().func},t.default=(0,a.default)(j)},"./integrations/ci-cd/components/CommonCIComponents.js":function(e,t,n){n.r(t),n.d(t,{IntegrationEditDeleteMenu:function(){return R},ProjectHeader:function(){return x},RefreshBuildsButton:function(){return L},TriggerBuild:function(){return D}});var i=n("../../node_modules/react/index.js"),s=n("./js/modules/services/AnalyticsService.js"),o=n("./js/services/NavigationService.js"),r=n("./integrations/navigation/constants.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-run-stroke.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-options-stroke.js"),b=n("./integrations/ci-cd/modals/RunBuildsModal.js"),v=n("./integrations/ci-cd/modals/DeleteIntegrationModal.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),S=n("./integrations/ci-cd/constants.ts"),E=n("./integrations/ci-cd/services/index.ts"),C=n("./node_modules/prop-types/index.js"),j=n("./integrations/api-observability/constants.ts"),_=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),P=n("./js/stores/StoreManager.js"),A=n("./js/stores/CurrentUserStore.js"),w=n("./node_modules/lodash/lodash.js");const T=_.default.div`
    display: flex;
    align-items: center;
    text-overflow: ellipsis;
  `,k=(0,_.default)(a.default)`
    padding-top: calc(var(--spacing-xs) / 2);
  `,L=e=>{const{onClick:t,iconSize:n}=e;return i.createElement(l.default,{onClick:t,icon:i.createElement(h.default,null),type:"tertiary",size:"medium",tooltip:"Refresh your build runs"})},D=e=>{const[t,n]=(0,i.useState)(!1),{iconSize:o,rule:r,integrationId:a,branches:c,refreshBuilds:d}=e,u=E.default[r];return(null==u?void 0:u.triggerBuild)?i.createElement(i.Fragment,null,i.createElement(l.default,{onClick:()=>{n(!0),s.default.addEventV2({category:"ci-integration",action:"run-build-initiated",label:r,value:1})},icon:i.createElement(f.default,null),text:"Run Build",type:"tertiary",size:"medium",tooltip:"Trigger a build manually"}),t&&i.createElement(b.default,{isOpen:t,handleCloseModal:()=>{n(!1)},integrationId:a,rule:r,branches:c,refreshBuilds:d})):i.createElement(i.Fragment,null)},R=e=>{const{integrationId:t,rule:n,menuButtonSize:a,canUpdateIntegration:m,canDeleteIntegration:g,apiId:h,apiVersionId:f,onIntegrationDelete:b}=e,[E,C]=(0,i.useState)(!1),[_,T]=(0,i.useState)(!m),[k,L]=(0,i.useState)(!g);return(0,i.useEffect)((()=>{w.every([m,g],w.isBoolean)||y.default.getIntegrationData(t).then((e=>{200===e.status?(T(!w.get(e,"body.meta.allowedActions.update",!1)),L(!w.get(e,"body.meta.allowedActions.delete",!1))):pm.logger.error("CICDIntegrationComponents~CommonCIComponents~IntegrationEditDeleteMenu ~ Error occurred while loading integration details",e,{errorContext:S.errorContext})})).catch((e=>{pm.logger.error("CICDIntegrationComponents~CommonCIComponents~IntegrationEditDeleteMenu ~ Error occurred while loading integration details",e,{errorContext:S.errorContext})}))}),[m,g]),i.createElement(i.Fragment,null,i.createElement(c.default,null,i.createElement(d.default,null,i.createElement(l.default,{icon:i.createElement(I.default,null),type:"tertiary",tooltip:"View more actions",size:a})),i.createElement(u.default,null,i.createElement(p.default,{onClick:()=>{const i=(0,P.resolveStoreInstance)(A.default);s.default.addEventV2({action:"open-edit-ci-integration"+(e.source?`-${e.source}`:""),entityId:h,entityType:"api",integrationId:t,rule:n,userId:i.id,teamId:i.teamId,category:"postman-cli-api-builder"}),o.default.transitionTo(r.V10_API_EDIT_CI_INTEGRATION_NAV_IDENTIFIER,{apiId:h,integrationId:t},{version:f})},isDisabled:_,tooltip:_&&j.PERMISSION_ERROR},"Edit Integration"),i.createElement(p.default,{type:"destructive",onClick:()=>{const i=(0,P.resolveStoreInstance)(A.default);s.default.addEventV2({action:"init-delete-ci-integration"+(e.source?`-${e.source}`:""),entityId:h,entityType:"api",integrationId:t,rule:n,userId:i.id,teamId:i.teamId,category:"postman-cli-api-builder"}),C(!0)},isDisabled:k,tooltip:k&&j.PERMISSION_ERROR},"Delete Integration"))),i.createElement(v.default,{isOpen:E,handleCloseModal:()=>{C(!1)},onDelete:()=>{const i=(0,P.resolveStoreInstance)(A.default);s.default.addEventV2({action:"delete-ci-integration"+(e.source?`-${e.source}`:""),entityId:h,entityType:"api",integrationId:t,rule:n,userId:i.id,teamId:i.teamId,category:"postman-cli-api-builder"})},integrationId:t,ruleId:n,handleBack:b,apiVersionId:f}))},x=e=>{const{projectName:t,readableServiceName:n}=e;return i.createElement(T,null,i.createElement(m.default,{type:"h4",text:t}),i.createElement(a.default,{padding:"spacing-s"},i.createElement(g.default,{color:"content-color-tertiary"},"·")),i.createElement(k,{inline:!0,justifyContent:"center",alignItems:"center"},i.createElement(g.default,null,"Source: "),i.createElement(g.default,{type:"body-medium",color:"content-color-secondary"},n)))};L.propTypes={onClick:C.PropTypes.func.isRequired,iconSize:C.PropTypes.string},L.defaultProps={iconSize:"small"},D.propTypes={rule:C.PropTypes.string.isRequired,integrationId:C.PropTypes.string.isRequired,branches:C.PropTypes.array.isRequired,refreshBuilds:C.PropTypes.func.isRequired,iconSize:C.PropTypes.string},D.defaultProps={iconSize:"small"},R.propTypes={rule:C.PropTypes.string.isRequired,integrationId:C.PropTypes.string.isRequired,onIntegrationDelete:C.PropTypes.func.isRequired,menuButtonSize:C.PropTypes.string,canUpdateIntegration:C.PropTypes.boolean,canDeleteIntegration:C.PropTypes.boolean,integrationService:C.PropTypes.string,apiId:C.PropTypes.string,apiVersionId:C.PropTypes.string},R.defaultProps={menuButtonSize:"medium"},x.propTypes={projectName:C.PropTypes.string.isRequired,readableServiceName:C.PropTypes.string.isRequired}},"./integrations/ci-cd/components/ConfigureNewmanbox.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i,s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-copy-stroke.js"),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./node_modules/prop-types/index.js"),p=n.n(u),m=n("../../node_modules/react/index.js"),g=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),h=n("./appsdk/components/editors/texteditor/TextEditor.js"),f=n("./js/utils/ClipboardHelper.js"),I=n("./js/modules/services/AnalyticsService.js");const b=(0,c.default)(s.default)`
    background-color: var(--background-color-primary);
    border-radius: var(--border-radius-default);
    padding: var(--spacing-m) var(--spacing-m) ;
    overflow-y: auto;
    white-space: pre-wrap;
    min-height: 324px;
    width: 100%;
  `,v=c.default.div`
    width: ${e=>e.width};
    height: var(--size-xs);
    background-color: var(--highlight-background-color-secondary);
    border-radius: var(--border-radius-s);
    animation: fade 1s linear infinite;
  `,y=(0,c.default)(s.default)`
    background-color: var(--background-color-tertiary);
    padding-top: var(--spacing-s);
    padding-right: ${e=>e.isLoading?"var(--spacing-m)":"var(--spacing-xs)"};
    padding-bottom: ${e=>e.isLoading?"var(--spacing-m)":"var(--spacing-xs)"};
    padding-left: var(--spacing-l);
    min-height: 388px;
  `,S=(0,c.default)(s.default)`
    padding-right: ${e=>e.isLoading?"var(--spacing-zero)":"var(--spacing-xs)"};
    margin-right: ${e=>e.isLoading?"calc(-1 * var(--spacing-s))":"var(--spacing-zero)"};
  `;let E=(0,d.observer)(i=class extends m.Component{constructor(e){super(e),this.state={title:"Postman CLI Config",isCopySuccess:!1}}componentWillUnmount(){this.clearCopySuccessTimeout&&clearTimeout(this.clearCopySuccessTimeout)}copyNewmanConfig(e){var t,n;f.default.copy(e),this.setState({isCopySuccess:!0},(()=>{this.clearCopySuccessTimeout=setTimeout((()=>this.setState({isCopySuccess:!1})),1500)})),I.default.addEventV2({category:"ci_integrations",action:"copy",label:"postman_cli_config_copied",value:1}),null===(t=(n=this.props).onCopy)||void 0===t||t.call(n)}render(){const{title:e}=this.state,{template:t,isLoading:n}=this.props;return m.createElement(y,{direction:"column",gap:"spacing-s",isLoading:n,className:"configure-newman-box"},m.createElement(S,{justifyContent:"space-between",alignItems:"center",isLoading:n},m.createElement(o.default,{type:"para"},"Copy this command and paste it to your build configuration file"),m.createElement(r.default,{type:"tertiary",icon:m.createElement(l.default,null),isDisabled:n,tooltip:m.createElement(a.default,{content:"Copied",isOpen:this.state.isCopySuccess}),onClick:()=>this.copyNewmanConfig(t)})),m.createElement(g.default,{renderIfTruthy:n},m.createElement(b,{direction:"column",gap:"spacing-l"},m.createElement(v,{width:"512px"}),m.createElement(v,{width:"256px"}),m.createElement(v,{width:"384px"}),m.createElement(v,{width:"452px"}),m.createElement(v,{width:"192px"}),m.createElement(v,{width:"256px"}),m.createElement(v,{width:"320px"}),m.createElement(v,{width:"452px"}),m.createElement(v,{width:"384px"}),m.createElement(v,{width:"384px"}))),m.createElement(g.default,{renderIfFalsy:n},m.createElement(h.default,{value:t,readOnly:!0,ref:"editor"})))}})||i;E.propTypes={template:p().string,isLoading:p().bool.isRequired,onCopy:p().func}},"./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),a=n("./node_modules/prop-types/index.js"),l=n.n(a),c=n("./node_modules/lodash/lodash.js");class d extends i.Component{constructor(e){super(e),this.state={selectedApi:{},selectedApiVersion:{}}}componentDidMount(){const{addToast:e,apiId:t,apiVersionId:n}=this.props;r.default.fetchAPIMeta(t).then((e=>{this.setState({selectedApi:{id:c.get(e,"id"),name:c.get(e,"name")}})})).catch((t=>{pm.logger.error("Error occurred while fetching APIs",t),e({title:"Error",description:"Something went wrong while fetching APIs, please try again",status:"error"})})),r.default.fetchAPIVersionMeta(t,n).then((e=>{this.setState({selectedApiVersion:{id:c.get(e,"versionId"),name:c.get(e,"name")}})})).catch((t=>{pm.logger.error("Error occurred while fetching API versions",t),e({title:"Error",description:"Something went wrong while fetching API versions, please try again",status:"error"})}))}render(){const{selectedApi:e,selectedApiVersion:t}=this.state;return i.createElement(i.Fragment,null,i.createElement(s.SelectSegment,{disabled:!0,id:"integrations-selected-api",title:"Selected API",description:"The selected API is connected with this integration",selectedTarget:e,filterItems:[e],initialLabel:"Loading API..."}),i.createElement(s.SelectSegment,{disabled:!0,id:"integrations-selected-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",selectedTarget:t,filterItems:[t],initialLabel:"Loading API version..."}))}}d.propTypes={apiId:l().string.isRequired,apiVersionId:l().string.isRequired},t.default=(0,o.default)(d)},"./integrations/ci-cd/components/Edit/BitbucketCI.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/services/BitbucketCI.js"),c=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),d=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./api-dev/constants/APISubViews.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),g=n("./node_modules/prop-types/index.js"),h=n.n(g),f=n("./integrations/navigation/constants.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),b=n("./node_modules/lodash/lodash.js");let v=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.fetchWorkspaces=()=>{const{addToast:e}=this.props;this.setState({loadingWorkspaces:!0,errorWorkspaces:""}),l.default.fetchWorkspaces(this.state.tokenId).then((e=>{this.setState({workspaces:e,loadingWorkspaces:!1,errorWorkspaces:""})})).catch((t=>{this.setState({loadingWorkspaces:!1,errorWorkspaces:"Error occured while fetching workspaces"}),e({title:"Error",description:"Error occurred while fetching workspace",status:"error"}),pm.logger.error("BitbucketCIEdit ~ fetchWorkspaces : Error occurred while fetching workspace",t)}))},this.fetchRepositories=()=>{const e={tokenId:this.state.tokenId,workspaceSlug:b.get(this.state.selectedWorkspace,"value.workspace_uuid")},{addToast:t}=this.props;this.setState({loadingProjects:!0,errorProjects:""}),l.default.fetchRepositories(e).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),t({title:"Error",description:"Error occurred while fetching projects",status:"error"}),pm.logger.error("BitbucketCIEdit ~ fetchRepositories : Error occurred while fetching projects",e)}))},this.store=(0,r.resolveStoreInstance)(a.default);const{name:t,id:n,variables:i,rule:s,serviceId:o,executor:c}=this.props.controller.integrationData;this.state={...this.getInitialState(),integrationId:n,tokenId:b.get(i,"oauth_token_id"),serviceId:o,rule:s,projects:[],workspaces:[],executor:c,loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorWorkspaces:"",apiId:i.api_id},this.fetchRepositories=this.fetchRepositories.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){this.fetchWorkspaces(),this.fetchRepositories()}getInitialState(){const{name:e,id:t,variables:n,rule:i,serviceId:s,executor:o}=this.props.controller.integrationData;return{selectedProject:{label:b.get(n,"repository_name"),value:{workspace_uuid:b.get(n,"workspace_slug"),repo_uuid:b.get(n,"repo_slug"),repo_name:b.get(n,"repository_name")}},selectedWorkspace:{label:b.get(n,"workspace_name"),value:{workspace_uuid:b.get(n,"workspace_slug"),workspace_name:b.get(n,"workspace_name")}},nickname:e}}render(){const{nickname:e,loadingProjects:t,loadingWorkspaces:n,projects:i,workspaces:o,selectedProject:r,selectedWorkspace:a,errorProjects:l,errorWorkspaces:m,integrationId:g,serviceId:h,rule:v,apiId:y,executor:S}=this.state,E={name:e,inputs:{api_id:y,repo_slug:b.get(r,"value.repo_uuid"),repository_name:b.get(r,"value.repo_name"),workspace_slug:b.get(a,"value.workspace_uuid"),workspace_name:b.get(a,"value.workspace_name")}},C=!r||!a||b.isEmpty(e)||l||m,j=b.get(this.props,"controller.routeBack"),_=1==j?{identifier:"build.apiVersion",routeParams:{apiId:b.get(E,"inputs.api_id"),versionId:S},queryParams:{tab:p.TEST}}:{identifier:f.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:b.get(E,"inputs.api_id"),integrationId:g},queryParams:{refresh:"true"}};return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(u.NicknameFieldSegment,{id:"bitbucket-pipelines-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),s.createElement(u.SelectSegmentV2,{title:"Choose your workspace",description:"Select the Bitbucket workspace",label:"Select",disabled:n||!b.isEmpty(m),options:o,value:a,onTargetSelect:e=>{this.setState({selectedWorkspace:e,selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No workspaces found",error:m,loading:n,handleRetry:this.fetchWorkspaces}),s.createElement(u.SelectSegmentV2,{title:"Choose your CI project",description:"Select the Bitbucket repository where the pipeline is configured",label:"Select",disabled:t||!b.isEmpty(l),options:i,value:r,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:l,loading:t,handleRetry:this.fetchRepositories}),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(c.default,{disabled:C||!(0,I.isFormUpdated)(this.getInitialState(),this.state),payload:E,integrationId:g,apiId:E.inputs.api_id,versionId:S,rule:v,redirect:_,useInstanceApi:!0,onSuccess:()=>{this.store.initialiseBuildsPage(g,v),this.store.initializeApiIntegrationsStore({apiId:E.inputs.api_id,apiVersionId:S,category:"ci-builds"})}},"Save changes")),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(d.default,{integrationId:g,apiId:E.inputs.api_id,versionId:S,rule:v,service:h,routeBack:j})))}})||i;t.default=(0,m.default)(v),v.propTypes={controller:h().shape({integrationData:h().shape({name:h().string,id:h().number,variables:h().object,rule:h().string,serviceId:h().string,executor:h().string}).isRequired,routeBack:h().bool.isRequired})}},"./integrations/ci-cd/components/Edit/CircleCI.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),c=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),d=n("./api-dev/constants/APISubViews.js"),u=n("./integrations/ci-cd/components/CircleCIFormData.js"),p=n("./integrations/ci-cd/constants.ts"),m=n("./integrations/navigation/constants.js"),g=n("./node_modules/lodash/lodash.js");let h=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default);const{name:t,id:n,variables:i,rule:s,serviceId:o,executor:l}=this.props.controller.integrationData;this.state={apiId:g.get(i,"api_id"),apiVersionId:l,integrationId:n,selectedProjectSlug:g.get(i,"project_slug"),defaultName:t,rule:s,serviceId:o,circleCIToken:g.get(i,"circleci_token")}}render(){const{serviceId:e,defaultName:t,selectedProjectSlug:n,rule:i,apiId:o,apiVersionId:r,integrationId:a,circleCIToken:h}=this.state;return s.createElement(u.default,{apiId:o,apiVersionId:r,classId:i,defaultName:t,defaultSelectedProjectSlug:n,defaultCircleCIToken:h,optionalFormComponents:(t,n,u)=>{const h=g.get(this.props,"controller.routeBack"),f=1==h?{identifier:"build.apiVersion",routeParams:{apiId:o,versionId:r},queryParams:{tab:d.TEST}}:{identifier:m.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:o,integrationId:a},queryParams:{refresh:"true"}};return s.createElement(s.Fragment,null,s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(l.default,{disabled:!t||!u,payload:n,integrationId:a,apiId:o,versionId:r,rule:i,redirect:f,useInstanceApi:!0,onSuccess:()=>{this.store.initialiseBuildsPage(a,i),this.store.initializeApiIntegrationsStore({apiId:o,apiVersionId:r,category:p.CI_CD_BUILDS})}},"Save changes")),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(c.default,{integrationId:a,apiId:g.get(n,"inputs.api_id"),versionId:r,rule:i,service:e,routeBack:h})))}})}})||i},"./integrations/ci-cd/components/Edit/GitLabCI.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),c=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),d=n("./integrations/ci-cd/components/GitlabCIFormData.js"),u=n("./integrations/ci-cd/constants.ts"),p=n("./api-dev/constants/APISubViews.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),g=n("./node_modules/prop-types/index.js"),h=n.n(g),f=n("./integrations/navigation/constants.js"),I=n("./node_modules/lodash/lodash.js");let b=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default);const{name:t,id:n,variables:i,rule:s,serviceId:o,executor:l}=this.props.controller.integrationData;this.state={integrationId:n,tokenId:I.get(i,"oauth_token_id"),serviceId:o,rule:s,apiId:I.get(i,"api_id"),apiVersionId:l,defaultSelectedProject:{label:I.get(i,"project_name"),value:{workspaceId:I.get(i,"workspace_id"),repoId:I.get(i,"project_id"),repoName:I.get(i,"project_name")}},defaultDomain:I.get(i,"domain"),defaultSelectedWorkspace:{label:I.get(i,"workspace_name"),value:{workspaceId:I.get(i,"workspace_id"),workspaceName:I.get(i,"workspace_name")}},defaultName:t}}render(){const{integrationId:e,serviceId:t,rule:n,apiId:i,apiVersionId:o,tokenId:r,defaultSelectedProject:a,defaultSelectedWorkspace:m,defaultName:g,defaultDomain:h}=this.state;return s.createElement(d.default,{apiId:i,apiVersionId:o,oAuthTokenId:r,rule:n,defaultSelectedProject:a,defaultSelectedWorkspace:m,defaultName:g,defaultDomain:h,optionalFormComponents:(r,a,d)=>{const m=I.get(this.props,"controller.routeBack"),g=1==m?{identifier:"build.apiVersion",routeParams:{apiId:i,versionId:o},queryParams:{tab:p.TEST}}:{identifier:f.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:i,integrationId:e},queryParams:{refresh:"true"}};return s.createElement(s.Fragment,null,s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(l.default,{disabled:!r||!d,payload:a,integrationId:e,apiId:i,versionId:o,rule:n,redirect:g,useInstanceApi:!0,onSuccess:()=>{this.store.initialiseBuildsPage(e,n),this.store.initializeApiIntegrationsStore({apiId:i,apiVersionId:o,category:u.CI_CD_BUILDS})}},"Save changes")),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(c.default,{integrationId:e,apiId:I.get(a,"inputs.api_id"),versionId:o,rule:n,service:t,routeBack:m})))}})}})||i;t.default=(0,m.default)(b),b.propTypes={controller:h().shape({integrationData:h().shape({name:h().string,id:h().number,variables:h().object,rule:h().string,serviceId:h().string,executor:h().string}).isRequired,routeBack:h().bool.isRequired})}},"./integrations/ci-cd/components/Edit/GithubCI.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),c=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),d=n("./integrations/ci-cd/components/GithubCIFormData.js"),u=n("./integrations/ci-cd/constants.ts"),p=n("./api-dev/constants/APISubViews.js"),m=n("./integrations/navigation/constants.js"),g=n("./node_modules/prop-types/index.js"),h=n.n(g),f=n("./node_modules/lodash/lodash.js");let I=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default);const{name:t,id:n,variables:i,rule:s,serviceId:o,executor:l}=this.props.controller.integrationData;this.state={integrationId:n,tokenId:f.get(i,"oauth_token_id"),serviceId:o,rule:s,apiId:f.get(i,"api_id"),apiVersionId:l,defaultSelectedProject:f.get(i,"repository"),defaultDomain:f.get(i,"domain"),defaultSelectedWorkspace:f.get(i,"workspace"),defaultName:t}}render(){const{integrationId:e,serviceId:t,rule:n,apiId:i,apiVersionId:o,tokenId:r,defaultSelectedProject:a,defaultSelectedWorkspace:g,defaultName:h,defaultDomain:I}=this.state;return s.createElement(d.default,{apiId:i,apiVersionId:o,oAuthTokenId:r,rule:n,defaultSelectedProject:a,defaultSelectedWorkspace:g,defaultName:h,defaultDomain:I,optionalFormComponents:(r,a,d)=>{const g=f.get(this.props,"controller.routeBack"),h=1==g?{identifier:"build.apiVersion",routeParams:{apiId:i,versionId:o},queryParams:{tab:p.TEST}}:{identifier:m.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:i,integrationId:e},queryParams:{refresh:"true"}};return s.createElement(s.Fragment,null,s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(l.default,{disabled:!r||!d,payload:a,integrationId:e,apiId:i,versionId:o,rule:n,redirect:h,useInstanceApi:!0,onSuccess:()=>{this.store.initialiseBuildsPage(e,n),this.store.initializeApiIntegrationsStore({apiId:i,apiVersionId:o,category:u.CI_CD_BUILDS})}},"Save changes")),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(c.default,{integrationId:e,apiId:f.get(a,"inputs.api_id"),versionId:o,rule:n,service:t,routeBack:g})))}})}})||i;t.default=I,I.propTypes={controller:h().shape({integrationData:h().shape({name:h().string,id:h().number,variables:h().object,rule:h().string,serviceId:h().string,executor:h().string}).isRequired,routeBack:h().bool.isRequired})}},"./integrations/ci-cd/components/Edit/Jenkins.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),d=n("./integrations/ci-cd/services/JenkinsCI.js"),u=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),p=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),m=n("../../node_modules/mobx/lib/mobx.module.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),h=n("./api-dev/constants/APISubViews.js"),f=n("./integrations/navigation/constants.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),b=n("./node_modules/lodash/lodash.js");let v=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default),this.state={verifying:!1,host_url:null,username:null,auth_token:null,errorToken:"",projects:[],loadingProjects:!1,selectedProject:null,errorProjects:"",nickname:null,variables:{}},this.validateUser=b.debounce(this.validateUser.bind(this),500),this.fetchProjectsWithIntegration=this.fetchProjectsWithIntegration.bind(this),this.fetchProjectsWithoutIntegration=this.fetchProjectsWithoutIntegration.bind(this),this.onProjectSelect=this.onProjectSelect.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{name:e,id:t,variables:n}=this.props.controller.integrationData;e&&n&&this.setState(this.getInitialState()),this.fetchProjectsWithIntegration(t)}getInitialState(){const{name:e,executor:t,id:n,rule:i,serviceId:s,variables:o}=this.props.controller.integrationData;return{nickname:e,serviceId:s,executor:t,variables:o,rule:i,integrationId:n,host_url:o.host_url,username:o.username,auth_token:o.auth_token,selectedProject:{label:o.project,value:o.project,type:o.project_type}}}fetchProjectsWithIntegration(e){this.setState({loadingProjects:!0,errorProjects:""});let{variables:t}=this.props.controller.integrationData,n=(0,m.toJS)(t);d.default.getProjectsByIntegrationId(e).then((e=>{let t=b.find(e,{value:n.project});this.setState({projects:e,selectedProject:t,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.toasts.error("Error occurred while fetching projects"),pm.logger.error("Error occurred while fetching projects",e)}))}fetchProjectsWithoutIntegration(){this.setState({loadingProjects:!0,errorProjects:""});const e=b.pick(this.state,["host_url","username","auth_token"]),{variables:t}=this.props.controller.integrationData,n=(0,m.toJS)(t);d.default.fetchProjects(e).then((e=>{let t=b.find(e,{value:n.project});this.setState({projects:e,selectedProject:t,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.toasts.error("Error occurred while fetching projects"),pm.logger.error("Error occurred while fetching projects",e)}))}onProjectSelect(e){return this.setState({selectedProject:e})}validateUser(){const{host_url:e,username:t,auth_token:n}=this.state;if(b.isEmpty(n))this.setState({errorToken:"Please enter your authentication token"});else{this.setState({verifying:!0});const i={host_url:e,username:t,auth_token:n};d.default.validateUser(i).then((()=>{this.setState({verifying:!1,errorToken:""}),this.fetchProjects()})).catch((e=>{this.setState({verifying:!1,errToken:"Please enter a valid authentication token"}),pm.logger.error("Error occurred while authenticating",e)}))}}render(){const{host_url:e,username:t,auth_token:n,loadingProjects:i,errorProjects:o,projects:r,selectedProject:a,nickname:d,variables:m,errorToken:v,integrationId:y,executor:S,rule:E,serviceId:C}=this.state,j={name:d,inputs:{api_id:m.api_id,host_url:e&&e.replace(/\/$/,""),username:t,auth_token:n,project:a&&a.value,project_type:a&&a.type}},_=b.get(this.props,"controller.routeBack"),P=1==_?{identifier:"build.apiVersion",routeParams:{apiId:m.api_id,versionId:S},queryParams:{tab:h.TEST}}:{identifier:f.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:m.api_id,integrationId:y},queryParams:{refresh:"true"}};return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(l.NicknameFieldSegment,{id:"jenkins-nickname",value:d,error:""===d?"Please enter a nickname for your integration":"",onBlur:()=>{d&&this.setState({nickname:b.isFunction(d.trim)?d.trim():d})},onChange:e=>{this.setState({nickname:e})}}),s.createElement(l.FieldSegment,{description:"Enter your domain where Jenkins server is hosted.",id:"jenkins-domain",title:"Jenkins Server URL",value:e,error:e&&!g.default.isSecureUrl(e.trim())?"Enter secure server URL":"",onBlur:()=>{e&&this.setState({host_url:b.isFunction(e.trim)?e.trim():e})},onChange:e=>{this.setState({host_url:e})}}),s.createElement(l.FieldSegment,{description:"Enter your username.",id:"jenkins-username",title:"Jenkins username",value:t,error:""===t?"Please provide your username":"",onBlur:()=>{t&&this.setState({username:b.isFunction(t.trim)?t.trim():t})},onChange:e=>{this.setState({username:e})}}),s.createElement(l.SensitiveFieldSegment,{title:"Authentication token",description:"Enter your authentication token or ",customLink:s.createElement(c.default,{extUrl:"https://go.pstmn.io/docs-jenkins-apikey"},"generate one here."),maskedPlaceholderWhenEmpty:!0,value:n,error:v,onChange:e=>{this.setState({auth_token:e.trim()}),this.validateUser()}}),s.createElement(l.SelectSegmentV2,{title:"Choose your CI project",label:"Select",disabled:i||!b.isEmpty(o),options:r,value:a,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:o,loading:i,handleRetry:this.fetchProjectsWithIntegration.bind(this,y)}),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(u.default,{useInstanceApi:!0,disabled:!a||b.isEmpty(n)||b.isEmpty(d)||v||!(0,I.isFormUpdated)(this.getInitialState(),this.state),payload:j,integrationId:y,apiId:m.api_id,versionId:S,redirect:P,rule:E,onSuccess:()=>{this.store.initialiseBuildsPage(y,E),this.store.initializeApiIntegrationsStore({apiId:m.api_id,apiVersionId:S,category:"ci-builds"})}},"Save changes")),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(p.default,{integrationId:y,apiId:m.api_id,versionId:S,rule:E,service:C,routeBack:_})))}})||i},"./integrations/ci-cd/components/Edit/TravisCI.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),c=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),d=n("./integrations/ci-cd/components/TravisCIFormData.js"),u=n("./api-dev/constants/APISubViews.js"),p=n("./integrations/ci-cd/constants.ts"),m=n("./integrations/navigation/constants.js"),g=n("./node_modules/lodash/lodash.js");let h=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default);const{name:t,id:n,variables:i,rule:s,serviceId:o,executor:l}=this.props.controller.integrationData;this.state={apiId:g.get(i,"api_id"),apiVersionId:l,integrationId:n,selectedProjectId:g.get(i,"repository_id"),defaultName:t,rule:s,serviceId:o,travisCIToken:g.get(i,"travisci_token")}}render(){const{serviceId:e,defaultName:t,selectedProjectId:n,rule:i,apiId:o,apiVersionId:r,integrationId:a,travisCIToken:h}=this.state;return s.createElement(d.default,{apiId:o,apiVersionId:r,classId:i,defaultName:t,defaultSelectedProjectId:n,defaultTravisCIToken:h,optionalFormComponents:(t,n,d)=>{const h=g.get(this.props,"controller.routeBack"),f=1==h?{identifier:"build.apiVersion",routeParams:{apiId:o,versionId:r},queryParams:{tab:u.TEST}}:{identifier:m.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:o,integrationId:a},queryParams:{refresh:"true"}};return s.createElement(s.Fragment,null,s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(l.default,{disabled:!t||!d,payload:n,integrationId:a,apiId:o,versionId:r,rule:i,redirect:f,useInstanceApi:!0,onSuccess:()=>{this.store.initialiseBuildsPage(a,i),this.store.initializeApiIntegrationsStore({apiId:o,apiVersionId:r,category:p.CI_CD_BUILDS})}},"Save changes")),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(c.default,{integrationId:a,apiId:g.get(n,"inputs.api_id"),versionId:r,rule:i,service:e,routeBack:h})))}})}})||i},"./integrations/ci-cd/components/Edit/common/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),s=n("./js/services/NavigationService.js"),o=n("./js/components/base/Buttons.js"),r=n("./appsdk/workbench/TabService.js"),a=n("./api-dev/constants/APISubViews.js"),l=n("./integrations/navigation/constants.js");class c extends i.Component{constructor(e){super(e)}render(){const{apiId:e,versionId:t,integrationId:n,rule:c,service:d,routeBack:u}=this.props;return i.createElement(o.Button,{className:"integrations-edit-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{r.default.closeByRoute(l.V10_API_EDIT_CI_INTEGRATION_URL,{apiId:e,integrationId:String(n)}),1==u?s.default.transitionTo("build.apiVersion",{apiId:e,versionId:t},{tab:a.TEST}):s.default.transitionTo(l.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:e,integrationId:n})}},"Cancel")}}},"./integrations/ci-cd/components/Edit/common/UpdateButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i,s=n("../../node_modules/react/index.js"),o=n("./js/components/base/Buttons.js"),r=n("./js/components/base/LoadingIndicator.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),p=n("./js/services/NavigationService.js"),m=n("./appsdk/workbench/TabService.js"),g=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=(n("./js/modules/services/AnalyticsService.js"),n("./integrations/navigation/constants.js")),f=n("./node_modules/lodash/lodash.js");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I.apply(this,arguments)}let b=(0,g.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,d.resolveStoreInstance)(u.default),this.state={isProcessing:!1},this.handleProcessing=this.handleProcessing.bind(this)}handleProcessing(e){this.setState({isProcessing:e})}render(){const{disabled:e,payload:t,rule:n,service:i,redirect:u,onSuccess:g,apiId:b,versionId:v,integrationId:y,useInstanceApi:S,...E}=this.props;return s.createElement(o.Button,I({type:"primary",className:"integrations-edit-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{let e;this.handleProcessing(!0),e=S?l.default.updateIntegrationInstance(y,t.name,t.inputs):a.default.updateIntegration(y,t),e.then((e=>{200===e.status&&(e.body.model_id||f.get(e.body,"data.id"))?((0,d.resolveStoreInstance)(c.default).setRuleSpecificTeamIntegrations(n,null),this.store.fetchIntegrationInstance("apiversion",v),f.isFunction(g)&&g(),m.default.closeByRoute(h.V10_API_EDIT_CI_INTEGRATION_URL,{apiId:b,integrationId:String(y)}),u&&p.default.transitionTo(u.identifier,u.routeParams,u.queryParams)):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.handleProcessing(!1)})).catch((e=>{this.handleProcessing(!1),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while editing your integration"),pm.logger.error("Error occurred while editing integration",e)}))}},E),this.state.isProcessing?s.createElement(r.default,null):this.props.children)}})||i},"./integrations/ci-cd/components/ErrorStates/AuthenticationExpiredBanner.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./js/services/NavigationService.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("./integrations/constants/integrationsConstants.ts"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./node_modules/lodash/lodash.js");const p=d.default.div`
    display: inline;
  `,m=e=>{const{serviceId:t,tokenId:n,reauthQueryParamData:l}=e,c=u.get(a.SERVICE_OAUTH_CONFIG,u.upperCase(t)),d=u.get(c,"userFriendlyServiceName");return i.createElement(o.default,{status:"error"},"Authentication for ",d," is expired, please"," ",i.createElement(p,{onClick:()=>{s.default.transitionTo("build.oauthReauthenticate",{tokenId:n,serviceId:t},l)}},i.createElement(r.default,{type:"link-default"},"reauthenticate")),".")};m.propTypes={serviceId:c().string.isRequired,tokenId:c().string.isRequired,reauthQueryParamData:c().object},t.default=m},"./integrations/ci-cd/components/ExpandedBuildRow.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js"),c=n.n(l),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),h=n("./integrations/ci-cd/buildUtils.js"),f=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),I=n("./integrations/ci-cd/services/index.ts"),b=n("./js/stores/StoreManager.js"),v=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),y=n("./js/modules/services/AnalyticsService.js");(0,f.default)(d.default)`
  align-items: center;
`;let S=(0,s.observer)(i=class extends o.Component{constructor(e){super(e),this.state={isBuildStepsExpanded:!1,isCollectionRunsExpanded:!1,loadingBuildSteps:!1,loadingAPIScanResults:!0,apiScanResults:null,loadingCollectionRuns:!1,errorCollectionRuns:"",buildSteps:[]},this.toggleArrowBuilds=this.toggleArrowBuilds.bind(this),this.toggleArrowCollections=this.toggleArrowCollections.bind(this),this.getExpandedRowBuildInformation=this.getExpandedRowBuildInformation.bind(this)}componentDidMount(){const{rule:e,rowData:t,integration:n}=this.props;this.getExpandedRowBuildInformation(e,t,c().get(n,"id")),this.getAPIWarningsDetails()}getExpandedRowBuildInformation(e,t,n){const i=c().get(I.default,[e,"getBuildSteps"]),{addToast:s}=this.props;this.setState({loadingBuildSteps:!0}),c().isFunction(i)?i(n,t).then((e=>{this.setState({buildSteps:e,loadingBuildSteps:!1})})).catch((e=>{this.setState({loadingBuildSteps:!1}),s({title:"Error",description:"Something went wrong while fetching build steps, please try again",status:"error"}),pm.logger.error("Error occurred while fetching build steps",e)})):this.setState({loadingBuildSteps:!1})}getAPIWarningsDetails(){const{rowData:e,integration:t}=this.props,n=(0,b.resolveStoreInstance)(v.default);this.setState({loadingAPIScanResults:!0}),n.fetchAPISchemaScanResults(c().get(t,"id"),c().get(e,"buildIdentifier"),c().get(e,"branch")).then((e=>{this.setState({apiScanResults:c().get(e,"0.apis",[]),loadingAPIScanResults:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching api scan details",e),this.setState({loadingAPIScanResults:!1})}))}toggleArrowBuilds(){const{isBuildStepsExpanded:e}=this.state;e||y.default.addEventV2({category:"ci-integration",action:"expand-build-steps",label:this.props.rule,value:1}),this.setState((e=>({isBuildStepsExpanded:!e.isBuildStepsExpanded})))}toggleArrowCollections(){const{isCollectionRunsExpanded:e}=this.state;e||y.default.addEventV2({category:"ci-integration",action:"expand-collection-run",label:this.props.rule,value:1}),this.setState((e=>({isCollectionRunsExpanded:!e.isCollectionRunsExpanded})))}getEmptyStateMessage(){const{loadingAPIScanResults:e,apiScanResults:t}=this.state,{showCollectionRuns:n,collectionRunDetails:i}=this.props.rowData;return c().isEmpty(i)&&c().isEmpty(t)&&n&&!e?"No collection runs or API linting results for the build.":c().isEmpty(t)&&!e?"No API linting results for the build.":n&&c().isEmpty(i)?"No collection runs for the build.":""}render(){const{isBuildStepsExpanded:e,isCollectionRunsExpanded:t,loadingBuildSteps:n,loadingCollectionRuns:i,buildSteps:s}=this.state,{rule:r,rowData:a,apiName:l}=this.props,{showCollectionRuns:g,showBuildSteps:f}=this.props.rowData,I=this.getEmptyStateMessage();return o.createElement("div",{className:"build-expand-table-wrapper"},o.createElement("div",{className:"build-expand-table"},o.createElement(u.default,{data:a.collectionRunDetails,className:"table-without-head",columns:h.default.getCollectionRunsExpandColumns(r),rowExpanded:{subComponent:e=>o.createElement(u.default,{columns:h.default.getSpecificCollectionRunDetailsColumns(),data:e.metrics,className:"table-without-head",loader:{isLoading:i,skeletonRowCount:1}}),autoResetExpanded:!1}})),I?o.createElement(d.default,{direction:"row",padding:"spacing-l",justifyContent:"center"},o.createElement(p.default,{type:"para"},I)):null,c().isEmpty(this.state.apiScanResults)?this.state.loadingAPIScanResults?o.createElement(d.default,{className:"expanded_row",padding:"spacing-s spacing-l spacing-l spacing-xxxl",border:{borderBottom:"border-width-default"},justifyContent:"center"},o.createElement(m.default,{description:"Loading schema scan details"})):null:o.createElement("div",{className:"build-expand-table"},o.createElement(u.default,{className:"table-without-head",data:this.state.apiScanResults,columns:h.default.getSchemaColumns(l),rowExpanded:{subComponent:e=>o.createElement(u.default,{columns:h.default.getSpecificSchemaWarningDetailsColumns(),data:e.warnings,className:"table-without-head"}),autoResetExpanded:!1}})))}})||i;S.propTypes={rule:a().string.isRequired,rowData:a().object.isRequired,integration:a().object.isRequired,apiName:a().string.isRequired},t.default=(0,g.default)(S)},"./integrations/ci-cd/components/GitLabCI.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/GitlabCIFormData.js"),c=n("./appsdk/workbench/TabService.js"),d=n("./integrations/navigation/constants.js"),u=n("./api-dev/constants/APISubViews.js"),p=n("./integrations/ci-cd/components/Button/AddIntegration.js"),m=n("./integrations/ci-cd/components/Button/CancelButton.js"),g=n("./node_modules/prop-types/index.js"),h=n.n(g),f=n("./js/services/NavigationService.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),b=n("./integrations/ci-cd/components/CIOAuth.js"),v=n("./integrations/ci-cd/constants.ts"),y=n("./node_modules/lodash/lodash.js");let S=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default);const{workspace:t,project:n,tokenId:i}=e.apiRepositoryLink,{defaultIntegrationName:s}=e,o=n?{label:y.get(n,"name"),value:{repoId:y.get(n,"id"),repoName:y.get(n,"name"),workspaceId:y.get(t,"id")}}:{},l=t?{label:y.get(t,"name"),value:{workspaceId:y.get(t,"id"),workspaceName:y.get(t,"name")}}:{},c=s;this.state={isAuthenticated:Boolean(i),errorToken:"",oauthTokenId:i,defaultSelectedProject:o,defaultSelectedWorkspace:l,defaultName:c,defaultDomain:""},this.closeCurrentTab=this.closeCurrentTab.bind(this)}closeCurrentTab(){c.default.closeByRoute(d.V10_API_ADD_CI_INTEGRATION_URL,{apiId:this.props.apiId}),f.default.transitionTo("build.apiVersion",{apiId:y.get(this.props,"apiId"),versionId:y.get(this.props,"apiVersionId")},{tab:u.TEST})}render(){const{apiId:e,apiVersionId:t,rule:n,originalTabId:i}=this.props,{oauthTokenId:o,defaultSelectedProject:r,defaultSelectedWorkspace:a,defaultName:c,defaultDomain:d}=this.state;return this.state.isAuthenticated?s.createElement(l.default,{apiId:e,apiVersionId:t,oAuthTokenId:o,rule:n,defaultDomain:d,defaultSelectedProject:r,defaultSelectedWorkspace:a,defaultName:c,optionalFormComponents:(n,o)=>s.createElement(s.Fragment,null,s.createElement(p.default,{type:"primary",size:"small",payload:o,disabled:!n,alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:i},"Connect"),s.createElement(m.default,{apiId:e,apiVersionId:t}))}):s.createElement(b.default,{onComplete:(e,t)=>{if(e)return void pm.logger.error("Gitlab~oauth: Unable to complete authentication",e);const{tokenId:n,domain:i}=t;n&&this.setState({isAuthenticated:!0,oauthTokenId:n,defaultDomain:i})},onCancel:this.closeCurrentTab,oAuthServiceName:y.get(v.RULE_TO_OAUTH_SERVICE_MAPPING,n)})}})||i;t.default=(0,I.default)(S),S.propTypes={rule:h().string.isRequired,apiId:h().string.isRequired,apiVersionId:h().string.isRequired,apiRepositoryLink:h().object,defaultIntegrationName:h().string}},"./integrations/ci-cd/components/GithubCI.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/GithubCIFormData.js"),c=n("./integrations/ci-cd/components/Button/AddIntegration.js"),d=n("./integrations/ci-cd/components/Button/CancelButton.js"),u=n("./node_modules/prop-types/index.js"),p=n.n(u),m=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),g=n("./integrations/ci-cd/components/CIOAuth.js"),h=n("./integrations/ci-cd/constants.ts"),f=n("./integrations/ci-cd/navigationHelpers.ts"),I=n("./node_modules/lodash/lodash.js");let b=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default);const{workspace:t,project:n}=e.apiRepositoryLink,{defaultIntegrationName:i}=e,s=n?I.get(n,"name"):"",o=t?I.get(t,"name"):"",l=i;this.state={isAuthenticated:!1,errorToken:"",oauthTokenId:"",defaultSelectedProject:s,defaultSelectedWorkspace:o,defaultName:l,defaultDomain:""},this.authOnCancel=this.authOnCancel.bind(this)}authOnCancel(){(0,f.closeCurrentTab)(I.get(this.props,"apiId"),I.get(this.props,"apiVersionId"))}render(){const{apiId:e,apiVersionId:t,rule:n,originalTabId:i}=this.props,{oauthTokenId:o,defaultSelectedProject:r,defaultSelectedWorkspace:a,defaultName:u,defaultDomain:p,isAuthenticated:m}=this.state;return m?s.createElement(l.default,{apiId:e,apiVersionId:t,oAuthTokenId:o,rule:n,defaultDomain:p,defaultSelectedProject:r,defaultSelectedWorkspace:a,defaultName:u,optionalFormComponents:(n,o)=>s.createElement(s.Fragment,null,s.createElement(c.default,{type:"primary",size:"small",payload:o,disabled:!n,alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:i},"Connect"),s.createElement(d.default,{apiId:e,apiVersionId:t}))}):s.createElement(g.default,{onComplete:(e,t)=>{if(e)return void pm.logger.error("Github~oauth: Unable to complete authentication",e);const{tokenId:n,domain:i}=t;n&&this.setState({isAuthenticated:!0,oauthTokenId:n,defaultDomain:i})},onCancel:this.authOnCancel,oAuthServiceName:I.get(h.RULE_TO_OAUTH_SERVICE_MAPPING,n)})}})||i;t.default=(0,m.default)(b),b.propTypes={rule:p().string.isRequired,apiId:p().string.isRequired,apiVersionId:p().string.isRequired,apiRepositoryLink:p().object,defaultIntegrationName:p().string}},"./integrations/ci-cd/components/GithubCIFormData.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),r=n("./integrations/ci-cd/services/GithubCI.js"),a=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),u=n("./node_modules/lodash/lodash.js");class p extends i.Component{constructor(e){super(e),this.fetchWorkspace=()=>{const{addToast:e,oAuthTokenId:t,defaultDomain:n}=this.props;return this.setState({loadingWorkspaces:!0,errorWorkspace:""}),r.default.fetchWorkspaces(t,n).then((e=>{this.setState({workspaces:e,loadingWorkspaces:!1,errorWorkspace:""})})).catch((t=>{const n="401"==t.status?": "+u.get(t,"error.message"):"";this.setState({loadingWorkspaces:!1,errorWorkspace:"Error occurred while fetching GitHub organizations"}),pm.logger.error("GitHubCIFormData ~ Error occurred while fetching GitHub organizations",t),e({title:"Error",description:"Error occurred while fetching GitHub organizations"+n,status:"error"})}))},this.fetchRepositories=()=>{const{selectedWorkspace:e}=this.state,{addToast:t,oAuthTokenId:n,defaultDomain:i}=this.props,s={tokenId:n,domain:i,workspace:e};this.setState({loadingProjects:!0,errorProjects:""}),r.default.fetchRepositories(s).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{const n="401"==e.status?": "+u.get(e,"error.message"):"";this.setState({loadingProjects:!1,errorProjects:"Error occurred while fetching repositories"}),pm.logger.error("GitHubCiFormData ~ Error occurred while fetching repositories",e),t({title:"Error",description:"Error occurred while fetching repositories"+n,status:"error"})}))},this.fetchWorkspace=this.fetchWorkspace.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.getInitialState=this.getInitialState.bind(this),this.state={...this.getInitialState(),projects:[],workspaces:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorWorkspaces:"",integrationId:null,rule:null}}componentDidMount(){const{defaultSelectedProject:e}=this.props;this.fetchWorkspace(),e&&this.fetchRepositories()}getInitialState(){const{defaultSelectedProject:e,defaultSelectedWorkspace:t,defaultName:n}=this.props;return{nickname:n,selectedProject:e,selectedWorkspace:t}}getPayload(){const{nickname:e,selectedProject:t,selectedWorkspace:n}=this.state,{rule:i,apiId:s,apiVersionId:o,oAuthTokenId:r,defaultDomain:a}=this.props,l={classId:i,name:e,inputs:{api_id:s,apiversion:o,repository:t,workspace:n,oauth_token_id:r}};return a&&(l.inputs.domain=a),l}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:o,errorProjects:r,workspaces:l,selectedWorkspace:c,loadingWorkspaces:p,errorWorkspaces:m}=this.state,{optionalFormComponents:g,renderDisabledApiApiversionSelector:h,apiId:f,apiVersionId:I}=this.props,b=this.getPayload(),v=e&&u.every(u.values(u.get(b,"inputs",{})),Boolean);return i.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},i.createElement(s.NicknameFieldSegment,{id:"githubci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),h&&i.createElement(a.default,{apiId:f,apiVersionId:I}),i.createElement(s.SelectSegmentV2,{title:"Choose your organization",description:"Select the GitHub organization",label:"Select",disabled:p||!u.isEmpty(m),options:l,value:{label:c,value:c},onTargetSelect:e=>{this.setState({selectedWorkspace:u.get(e,"value"),selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No organizations found",error:m,loading:p,handleRetry:this.fetchWorkspace}),i.createElement(s.SelectSegmentV2,{title:"Choose your repository",description:"Select the repository where the GitHub Actions workflows are configured",label:"Select",disabled:n||!u.isEmpty(r),options:t,value:{label:o,value:o},onTargetSelect:e=>{this.setState({selectedProject:u.get(e,"value")})},noOptionsForDropdown:"No repositories found",error:r,loading:n,handleRetry:this.fetchRepositories}),g&&g(v,b,(0,d.isFormUpdated)(this.getInitialState(),this.state)))}}p.propTypes={oAuthTokenId:c().string.isRequired,apiId:c().string.isRequired,apiVersionId:c().string.isRequired,rule:c().string.isRequired,optionalFormComponents:c().func,renderDisabledApiApiversionSelector:c().bool,defaultSelectedProject:c().string,defaultSelectedWorkspace:c().string,defaultName:c().string,defaultDomain:c().string},t.default=(0,o.default)(p)},"./integrations/ci-cd/components/GitlabCIFormData.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),r=n("./integrations/ci-cd/services/GitLabCI.js"),a=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),u=n("./node_modules/lodash/lodash.js");class p extends i.Component{constructor(e){super(e),this.fetchWorkspace=()=>{const{addToast:e,oAuthTokenId:t,defaultDomain:n}=this.props;return this.setState({loadingWorkspaces:!0,errorWorkspace:""}),r.default.fetchWorkspaces(t,n).then((e=>{this.setState({workspaces:e,loadingWorkspaces:!1,errorWorkspace:""})})).catch((t=>{this.setState({loadingWorkspaces:!1,errorWorkspace:"Error occured while fetching Gitlab workspaces"}),pm.logger.error("GitlabCiFormData ~ Error occurred while fetching Gitlab workspaces",t),e({title:"Error",description:"Error occurred while fetching Gitlab workspaces",status:"error"})}))},this.fetchRepositories=()=>{const{selectedWorkspace:e}=this.state,{addToast:t,oAuthTokenId:n,defaultDomain:i}=this.props,s={tokenId:n,domain:i,workspaceId:u.get(e,"value.workspaceId")};this.setState({loadingProjects:!0,errorProjects:""}),r.default.fetchRepositories(s).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.logger.error("GitlabCiFormData ~ Error occurred while fetching projects",e),t({title:"Error",description:"Error occurred while fetching projects",status:"error"})}))},this.state={...this.getInitialState(),projects:[],workspaces:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorWorkspaces:"",integrationId:null,rule:null},this.fetchWorkspace=this.fetchWorkspace.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{defaultSelectedProject:e}=this.props;this.fetchWorkspace(),u.isEmpty(e)||this.fetchRepositories()}getInitialState(){const{defaultSelectedProject:e,defaultSelectedWorkspace:t,defaultName:n}=this.props;return{nickname:n,selectedProject:e,selectedWorkspace:t}}getPayload(){const{nickname:e,selectedProject:t,selectedWorkspace:n}=this.state,{rule:i,apiId:s,apiVersionId:o,oAuthTokenId:r,defaultDomain:a}=this.props,l={classId:i,name:e,inputs:{api_id:s,apiversion:o,project_id:u.toString(u.get(t,"value.repoId","")),workspace_id:u.toString(u.get(n,"value.workspaceId","")),project_name:u.get(t,"value.repoName",""),workspace_name:u.get(n,"value.workspaceName",""),oauth_token_id:r}};return a&&(l.inputs.domain=a),l}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:o,errorProjects:r,workspaces:l,selectedWorkspace:c,loadingWorkspaces:p,errorWorkspaces:m}=this.state,{optionalFormComponents:g,renderDisabledApiApiversionSelector:h,apiId:f,apiVersionId:I}=this.props,b=this.getPayload(),v=e&&u.every(u.values(u.get(b,"inputs",{})),Boolean);return i.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},i.createElement(s.NicknameFieldSegment,{id:"gitlabci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),h&&i.createElement(a.default,{apiId:f,apiVersionId:I}),i.createElement(s.SelectSegmentV2,{title:"Choose your workspace",description:"Select the Gitlab workspace",label:"Select",disabled:p||!u.isEmpty(m),options:l,value:c,onTargetSelect:e=>{this.setState({selectedWorkspace:e,selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No workspaces found",error:m,loading:p,handleRetry:this.fetchWorkspace}),i.createElement(s.SelectSegmentV2,{title:"Choose your CI project",description:"Select the Gitlab repository where the pipeline is configured",label:"Select",disabled:n||!u.isEmpty(r),options:t,value:o,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:r,loading:n,handleRetry:this.fetchRepositories}),g&&g(v,b,(0,d.isFormUpdated)(this.getInitialState(),this.state)))}}p.propTypes={oAuthTokenId:c().string.isRequired,apiId:c().string.isRequired,apiVersionId:c().string.isRequired,rule:c().string.isRequired,optionalFormComponents:c().func,renderDisabledApiApiversionSelector:c().bool,defaultSelectedProject:c().object,defaultSelectedWorkspace:c().object,defaultName:c().string,defaultDomain:c().string},t.default=(0,o.default)(p)},"./integrations/ci-cd/components/Jenkins.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),d=n("./integrations/ci-cd/services/JenkinsCI.js"),u=n("./node_modules/lodash/lodash.js"),p=n.n(u),m=n("./integrations/ci-cd/components/Button/AddIntegration.js"),g=n("./integrations/ci-cd/components/Button/CancelButton.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js");let f=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default),this.state={verifying:!1,host_url:null,username:null,auth_token:null,errorToken:"",projects:[],loadingProjects:!1,selectedProject:null,selectedProjectType:null,errorProjects:"",nickname:null},this.validateUser=p().debounce(this.validateUser,500),this.validateUser=this.validateUser.bind(this),this.fetchProjects=this.fetchProjects.bind(this)}validateUser(){const e=p().pick(this.state,["host_url","username","auth_token"]);p().isEmpty(e.auth_token)?this.setState({errorToken:"Please enter your authentication token"}):(this.setState({verifying:!0,loadingProjects:!0}),d.default.validateUser(e).then((()=>{this.setState({verifying:!1,errorToken:""}),this.fetchProjects()})).catch((e=>{this.setState({verifying:!1,errToken:"Please enter a valid authentication token",loadingProjects:!1}),pm.logger.error("Error occurred while authenticating",e)})))}fetchProjects(){this.setState({loadingProjects:!0,errorProjects:""});const e=p().pick(this.state,["host_url","username","auth_token"]);d.default.getProjects(e).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.toasts.error("Error occurred while fetching projects"),pm.logger.error("Error occurred while fetching projects",e)}))}render(){const{verifying:e,host_url:t,username:n,auth_token:i,errorToken:o,loadingProjects:r,errorProjects:a,projects:d,selectedProject:u,nickname:f}=this.state,{rule:I,apiId:b,apiVersionId:v,originalTabId:y}=this.props,S={classId:I,name:f,inputs:{api_id:b,apiversion:v,host_url:t&&t.replace(/\/$/,""),username:n,auth_token:i,project:u&&u.value,project_type:u&&u.type}};return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(l.NicknameFieldSegment,{id:"jenkins-nickname",value:f,error:""===f?"Please enter a nickname for your integration":"",onBlur:()=>{f&&this.setState({nickname:p().isFunction(f.trim)?f.trim():f})},onChange:e=>{this.setState({nickname:e})}}),s.createElement(l.FieldSegment,{description:"Enter your domain where Jenkins server is hosted.",id:"jenkins-domain",title:"Jenkins Server URL",value:t,error:t&&!h.default.isSecureUrl(t.trim())?"Enter secure server URL":"",onBlur:()=>{t&&this.setState({host_url:p().isFunction(t.trim)?t.trim():t})},onChange:e=>{this.setState({host_url:e})}}),s.createElement(l.FieldSegment,{description:"Enter your username.",id:"jenkins-username",title:"Jenkins username",value:n,error:""===n?"Please provide your username":"",onBlur:()=>{n&&this.setState({username:p().isFunction(n.trim)?n.trim():n})},onChange:e=>{this.setState({username:e})}}),s.createElement(l.SensitiveFieldSegment,{title:"Authentication token",description:"Enter your authentication token. You can ",customLink:s.createElement(c.default,{extUrl:"https://go.pstmn.io/docs-jenkins-apikey"},"generate one from here."),value:i,error:o,onChange:e=>{this.setState({auth_token:e.trim()}),this.validateUser()}}),s.createElement(l.SelectSegmentV2,{title:"Choose your CI project",label:"Select",disabled:r||!p().isEmpty(a),options:d,value:u,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:a,loading:r,handleRetry:this.fetchProjects}),s.createElement(m.default,{type:"primary",size:"small",payload:S,disabled:!u||p().isEmpty(i)||p().isEmpty(f)||e,alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:y},"Connect"),s.createElement(g.default,{apiId:b,apiVersionId:v}))}})||i},"./integrations/ci-cd/components/Jenkins/ConfigureNewmanAndIntegrationsActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=n("../../node_modules/react/index.js"),s=n("./js/stores/CurrentUserStore.js"),o=n("./js/stores/StoreManager.js"),r=n("./js/stores/ActiveWorkspaceSessionStore.js"),a=n("./api-dev/stores/APIListStore.js"),l=n("./integrations/navigation/constants.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),y=n("./integrations/ci-cd/modals/DeleteIntegrationModal.js"),S=n("./integrations/ci-cd/constants.ts"),E=n("./integrations/api-observability/constants.ts"),C=n("./api-dev/constants/Permissions.js"),j=n("./js/external-navigation/ExternalNavigationService.js"),_=n("./js/modules/services/AnalyticsService.js"),P=n("./js/services/NavigationService.js"),A=n("./api-dev/services/APIPermissionService.js"),w=(n("./api-dev/interfaces/APIInterface.js"),n("./integrations/ci-cd/configurePostmanCLIInterfaces.js")),T=n("./node_modules/lodash/lodash.js");const k=e=>{const t=(0,o.resolveStoreInstance)(a.default).find(T.get(e,"variables.api_id"));_.default.addEventV2({category:"ci-integration",action:"configure-postman-cli",label:e.rule,value:1}),(0,w.openConfigurePostmanCLIInTab)({isMigrated:null==t?void 0:t.isMigrated,apiId:T.get(e,"variables.api_id"),versionId:null==e?void 0:e.executor,queryParams:{integration:e.id,rule:e.rule,service:e.service}})},L=e=>{const{showNewmanOnboardingTooltip:t,setShowNewmanOnboardingTooltip:n,integration:s}=e;return t?i.createElement(u.default,{className:"configure-newman-button-popover",maxWidth:300,placement:"left-start",isOpen:!0,trigger:i.createElement(d.default,{onClick:()=>{k(s)},className:"configure-newman-button",icon:i.createElement(b.default,null),text:"Configure Postman CLI",type:"tertiary",size:"medium"})},i.createElement("div",{className:"configure-newman-button-tooltip"},i.createElement("div",{className:"configure-newman-button-tooltip__header"},"Run Postman collections on CI/CD"),i.createElement("div",{className:"configure-newman-button-tooltip__content"},"Configure Postman CLI to run API tests created in Postman on your CI pipeline. ",i.createElement("span",{className:"configure-newman-button-tooltip__link",onClick:()=>(0,j.openExternalLink)(S.POSTMAN_CLI_TOOLTIP_URL,"_blank")},"Learn more")," about Postman CLI Configuration."),i.createElement(p.default,null,i.createElement(d.default,{type:"primary",size:"medium",text:"Configure Postman CLI",onClick:()=>{n(!1),k(s)}}),i.createElement(d.default,{type:"secondary",size:"medium",text:"Maybe Later",onClick:()=>{n(!1)}})))):i.createElement(c.default,{content:"Run collections using Postman CLI",placement:"left"},i.createElement(d.default,{onClick:()=>{k(s)},className:"configure-newman-button",icon:i.createElement(b.default,null),text:"Configure Postman CLI",type:"tertiary",size:"medium"}))};function D(e){const{integration:t,controller:n}=e,[a,c]=(0,i.useState)((e=>{const t=pm.settings.getSetting("NewmanConfigOnboardingTooltip")||[],n=(0,o.resolveStoreInstance)(r.default).workspace;return!(t&&t.includes(n)||(t.push(n),pm.settings.setSetting("NewmanConfigOnboardingTooltip",t),!e))})(T.get(n,"additionalContext.isIntegrationAdded",!1))),[u,p]=(0,i.useState)(!1),[b,S]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{var e;(e=T.get(t,"variables.api_id"),new Promise((t=>{const n=(0,o.resolveStoreInstance)(s.default).id,i=[C.UPDATE_API_META],r=A.default.getAPIPermissionQueryObject(i,[{id:e}],n);A.default.fetchPermissions(r).then((n=>t(T.get(n,`${e}:UPDATE_API_META.allowed`,!1)))).catch((e=>(pm.logger.error("ConfigureNewmanAndIntegrationActions~fetchPermissions: Something went wrong while fetching API permissions",e),t(!1))))}))).then(S)})),i.createElement("div",{className:"ci-cd-builds-page-info-container"},i.createElement("div",{className:"ci-cd-builds-page-back-button-container",onClick:e.handleBack},i.createElement(v.default,{name:"icon-direction-back",color:"content-color-secondary"})),i.createElement("div",{className:"project-service-name"},i.createElement(m.default,{type:"h4",text:T.get(t,"variables.project")}),"      Source: Jenkins"),i.createElement("div",{className:"right-hand-buttons"},i.createElement(L,{showNewmanOnboardingTooltip:a,setShowNewmanOnboardingTooltip:c,integration:t}),i.createElement("div",{className:"integration-options"},i.createElement(g.default,null,i.createElement(h.default,null,i.createElement(d.default,{icon:"icon-action-options-stroke",type:"tertiary"})),i.createElement(f.default,null,i.createElement(I.default,{onClick:()=>{P.default.transitionTo(l.V10_API_EDIT_CI_INTEGRATION_NAV_IDENTIFIER,{apiId:t.variables.api_id,integrationId:t.id},{version:t.executor})},isDisabled:!b,tooltip:!b&&E.PERMISSION_ERROR},"Edit Integration"),i.createElement(I.default,{type:"destructive",onClick:()=>{p(!0)},isDisabled:!b,tooltip:!b&&E.PERMISSION_ERROR},"Delete Integration"))),i.createElement(y.default,{apiVersionId:t.executor,isOpen:u,handleCloseModal:()=>{p(!1)},integrationId:t.id,ruleId:t.rule,handleBack:()=>{p(!1),e.handleBack()}}))))}},"./integrations/ci-cd/components/Jenkins/DetailedBuilds.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("./js/stores/StoreManager.js"),c=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-run-stroke.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),h=n("./js/components/base/LoadingIndicator.js"),f=n("./integrations/ci-cd/components/Jenkins/ConfigureNewmanAndIntegrationsActions.js"),I=n("./integrations/ci-cd/components/ExpandedBuildRow.js"),b=n("./integrations/ci-cd/components/StatusFilterDropdown.js"),v=n("./integrations/ci-cd/components/BranchFilterDropdown.js"),y=n("./integrations/ci-cd/components/CIEmptyTableView.js"),S=n("./js/modules/services/AnalyticsService.js"),E=n("./js/services/NavigationService.js"),C=n("./appsdk/workbench/TabService.js"),j=n("./integrations/ci-cd/services/JenkinsCI.js"),_=n("./integrations/ci-cd/helpers.js"),P=n("./api-dev/constants/APISubViews.js"),A=n("./integrations/navigation/constants.js"),w=n("./integrations/ci-cd/constants.ts"),T=n("./integrations/ci-cd/components/Jenkins/constants.js"),k=n("./integrations/ci-cd/customHooks/useAPIName.js"),L=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),D=n("./node_modules/lodash/lodash.js");const R=e=>!D.isEmpty(D.find(e,(e=>!D.isEmpty(e.branch)))),x=e=>{const{showBranches:t,allBranches:n,triggeringBuild:i,onBranchFilterChange:o,onStatusFilterChange:r,defaultSelectedBranchOption:a}=e;return s.createElement("div",{className:"ci-cd-builds-page-button-container"},s.createElement("div",{className:"filter-container"},s.createElement("div",{className:"filter-text"},"Filter by  "),s.createElement("div",{className:"filter-dropdowns"},t&&s.createElement(v.default,{allowMultipleSelection:!0,defaultSelectedOptions:a,branchOptions:n,onChange:o}),s.createElement(b.default,{onChange:r}))),s.createElement("div",{className:"run-refresh-container"},s.createElement(d.default,{content:"Trigger a build manually",placement:"bottom"},s.createElement(u.default,{onClick:e.triggerBuild,isLoading:i,className:"ci-cd-builds-button",icon:s.createElement(m.default,null),text:"Run Build",type:"tertiary",size:"medium"})),s.createElement(d.default,{content:"Refresh your build runs",placement:"bottom"},s.createElement(u.default,{onClick:e.refreshBuilds,className:"ci-cd-builds-button",icon:s.createElement(g.default,null),text:"Refresh",type:"tertiary",size:"medium"}))))},B=e=>{const{filteredBuilds:t,showBranches:n,loading:i,builds:o,integration:r,initialExpansionState:a}=e,l=(0,k.default)(D.get(r,"variables.api_id"));let c=n?T.BUILDS_TABLE_COLUMNS:T.BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH;return c=D.reject(c,{accessor:"empty"}),0===t.length&&(c=D.reject(c,{accessor:"url"})),i?s.createElement(h.default,{className:"ci-cd-loading-build-indicator"}):s.createElement("div",{className:"ci-cd-builds-table"},s.createElement("div",{className:"ci-cd-builds-table-success"},s.createElement(p.default,{sorting:!0,data:t,columns:c,blankState:{isEmpty:0===t.length,component:s.createElement(y.default,{integrationData:r,description:D.isEmpty(o)?null:"There are no builds on Jenkins for the selected filters",showConfigureNewmanButton:D.isEmpty(o),apiId:D.get(r,"variables.api_id"),apiVersionId:D.get(r,"executor")})},getRowId:_.getRowIdForBuildsTable,rowExpanded:{subComponent:e=>s.createElement(I.default,{rule:T.RULE,rowData:e,integration:r,apiName:l}),initialExpansionState:a}})))};let N=(0,o.observer)(i=class extends s.Component{constructor(e){super(e);const{builds:t,selectedBranch:n,integration:i}=e,s=(0,_.getUniqueItemsFromBuilds)(t,"branch"),o=D.map(s,"value"),r=(0,_.getSanitizedSelectedBranchName)(o,n),a=[],d=r?(0,_.getFilteredBuilds)(t,[r],null):t;r?(D.includes(o,r)||s.push({value:n,label:n}),a.push(r),this.defaultSelectedBranchOption=D.filter(s,{value:r})):this.defaultSelectedBranchOption=[],this.state={integration:i,loading:!1,builds:t,filteredBuilds:d,showBranches:R(t),allBranches:s,selectedBranchFilters:a,selectedStatusFilters:[],triggeringBuild:!1,doInitialScroll:!0,initialExpansionState:{[D.get(e.controller,"branchAndBuildIdIdentifier")]:!0}},this.store=(0,l.resolveStoreInstance)(c.default),this.handleBackButton=this.handleBackButton.bind(this),this.handleTriggerBuild=this.handleTriggerBuild.bind(this),this.handleBuildsRefresh=this.handleBuildsRefresh.bind(this),this.performInitialScroll=this.performInitialScroll.bind(this)}componentDidMount(){const{apiId:e}=this.props.controller;this.performInitialScroll()}performInitialScroll(){const{doInitialScroll:e,filteredBuilds:t}=this.state,{branchAndBuildIdIdentifier:n}=this.props.controller;if(e){const e=D.find(t,(e=>n===(0,_.getRowIdForBuildsTable)(e))),i=e&&document.getElementById((0,_.getRowIdForBuildsTable)(e));i&&i.scrollIntoView({behavior:"smooth"}),this.setState({doInitialScroll:!1,initialExpansionState:{}})}}handleBackButton(){const{apiId:e,version:t,integrationId:n}=this.props.controller;C.default.closeByRoute(A.V10_API_CI_INTEGRATION_BUILDS_URL,{apiId:e,integrationId:n}),E.default.transitionTo("build.apiVersion",{apiId:e,versionId:t},{tab:P.TEST}),this.store.initializeApiIntegrationsStore({apiId:e,apiVersionId:t,category:"ci-builds"})}handleTriggerBuild(){this.setState({triggeringBuild:!0});const{integration:e}=this.state;S.default.addEventV2({category:"ci-integration",action:"run-build-initiated",label:e.rule,value:1}),j.default.triggerBuild(e.id).then((t=>{this.setState({triggeringBuild:!1}),pm.toasts.success("New build triggered successfully! If you don't see the run try refreshing the page"),S.default.addEventV2({category:"ci-integration",action:"run-build-complete",label:e.rule,value:1}),this.handleBuildsRefresh()})).catch((e=>{this.setState({triggeringBuild:!1}),pm.toasts.error("Something went wrong while triggering build, please try again"),pm.logger.error("Error occurred while fetching builds",e)}))}handleBuildsRefresh(){const{integration:e,selectedBranchFilters:t,selectedStatusFilters:n}=this.state;this.setState({loading:!0}),j.default.getBuilds({integrationId:e.id,offset:0,limit:100}).then((i=>{this.setState({builds:i,filteredBuilds:(0,_.getFilteredBuilds)(i,t,n),allBranches:(0,_.getUniqueItemsFromBuilds)(i,"branch"),loading:!1}),this.store.initializeApiIntegrationsStore({apiId:D.get(e,"variables.api_id"),apiVersionId:e.executor,category:w.CI_CD_BUILDS})})).catch((e=>{this.setState({loading:!1}),pm.toasts.error("Something went wrong while getting new builds, please try again"),pm.logger.error("Error occurred while fetching builds",e)}))}componentWillUnmount(){(0,l.resolveStoreInstance)(L.default).cleanUp(D.get(this.state,"integration.id"))}render(){const{integration:e,showBranches:t,allBranches:n,filteredBuilds:i,loading:o,triggeringBuild:r,builds:a,selectedBranchFilters:l,selectedStatusFilters:c,initialExpansionState:d}=this.state;return s.createElement("div",{className:"ci-cd-builds-page-container"},s.createElement(f.default,{integration:e,controller:this.props.controller,handleBack:this.handleBackButton}),s.createElement("div",{className:"dynamic-container"},s.createElement(x,{builds:a,showBranches:t,allBranches:n,triggeringBuild:r,triggerBuild:this.handleTriggerBuild,refreshBuilds:this.handleBuildsRefresh,defaultSelectedBranchOption:this.defaultSelectedBranchOption,onBranchFilterChange:e=>{const t=D.map(e,"value");this.setState({selectedBranchFilters:t,filteredBuilds:(0,_.getFilteredBuilds)(a,t,c)})},onStatusFilterChange:e=>{const t=D.map(e,"value");this.setState({selectedStatusFilters:t,filteredBuilds:(0,_.getFilteredBuilds)(a,l,t)})}}),s.createElement(B,{filteredBuilds:i,showBranches:t,loading:o,integration:e,builds:a,initialExpansionState:d})))}})||i;N.propTypes={controller:a().object.isRequired,integration:a().object.isRequired,builds:a().arrayOf(a().object).isRequired,branches:a().arrayOf(a().object)}},"./integrations/ci-cd/components/Jenkins/MultiBranchDetailedBuilds.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./api-dev/stores/APIListStore.js"),c=n("./js/components/base/LoadingIndicator.js"),d=n("./integrations/ci-cd/components/Jenkins/ConfigureNewmanAndIntegrationsActions.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-run-stroke.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),b=n("./integrations/ci-cd/components/StatusFilterDropdown.js"),v=n("./integrations/ci-cd/components/BranchFilterDropdown.js"),y=n("./integrations/ci-cd/components/ExpandedBuildRow.js"),S=n("./js/modules/services/AnalyticsService.js"),E=n("./js/services/NavigationService.js"),C=n("./appsdk/workbench/TabService.js"),j=n("./integrations/ci-cd/services/JenkinsCI.js"),_=n("./integrations/ci-cd/helpers.js"),P=n("./api-dev/constants/APISubViews.js"),A=n("./integrations/navigation/constants.js"),w=n("./integrations/ci-cd/constants.ts"),T=n("./integrations/ci-cd/components/Jenkins/constants.js"),k=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),L=n("./integrations/ci-cd/customHooks/useAPIName.js"),D=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),R=n("./node_modules/lodash/lodash.js");const x=(e,t)=>`${e}/job/${t}`,B=e=>{if(e.initialLoad)return s.createElement(s.Fragment,null);const{allBranches:t,selectedBranch:n,triggeringBuild:i,builds:o,updateBuildsAndselectedStatusFilters:r}=e;return s.createElement("div",{className:"ci-cd-builds-page-button-container"},s.createElement("div",{className:"filter-container"},s.createElement("div",{className:"filter-text"},"Filter by  "),s.createElement("div",{className:"filter-dropdowns"},s.createElement(v.default,{branchOptions:t,defaultSelectedOptions:n,onChange:t=>{e.onBranchChange(t)}}),s.createElement(b.default,{onChange:e=>{const t=R.map(e,"value"),n=(0,_.getFilteredBuilds)(o,[],t);r(n,t)}}))),s.createElement("div",{className:"run-refresh-container"},s.createElement(u.default,{content:"Trigger a build manually",placement:"bottom"},s.createElement(p.default,{onClick:e.triggerBuild,isLoading:i,className:"ci-cd-builds-button",icon:s.createElement(f.default,null),text:"Run Build",type:"tertiary",size:"medium"})),s.createElement(u.default,{content:"Refresh your build runs",placement:"bottom"},s.createElement(p.default,{onClick:e.refreshBuilds,className:"ci-cd-builds-button",icon:s.createElement(I.default,null),text:"Refresh",type:"tertiary",size:"medium"}))))},N=e=>{const{filteredBuilds:t,loading:n,onConfigureNewman:i,builds:o,integration:r,initialExpansionState:a}=e,l=(0,L.default)(R.get(r,"variables.api_id")),d=()=>R.isEmpty(o)?s.createElement(m.default,{title:"No builds found",description:"There are no builds on Jenkins. You can run your Postman Collections on Jenkins by configuring Postman CLI.",secondaryAction:s.createElement(p.default,{type:"outline",text:"Configure Postman CLI",onClick:i})},s.createElement(g.default,null)):s.createElement(m.default,{title:"No builds found",description:"There are no builds on Jenkins for the selected filters"},s.createElement(g.default,null));let u=0!==t.length?T.BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH:R.reject(T.BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH,{accessor:"url"});return u=R.reject(u,{accessor:"empty"}),n?s.createElement(c.default,{className:"ci-cd-loading-build-indicator"}):s.createElement("div",{className:"ci-cd-builds-table"},s.createElement("div",{className:"ci-cd-builds-table-success"},s.createElement(h.default,{sorting:!0,data:t,columns:u,blankState:{isEmpty:0===t.length,component:s.createElement(d,null)},getRowId:_.getRowIdForBuildsTable,rowExpanded:{subComponent:e=>s.createElement(y.default,{rule:T.RULE,rowData:e,integration:r,apiName:l}),initialExpansionState:a}})))};let O=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={integration:e.integration,loading:!0,initialLoad:!1,builds:[],filteredBuilds:[],allBranches:[],selectedBranch:R.get(e,"controller.additionalContext.branch")?{label:R.get(e,"controller.additionalContext.branch"),value:R.get(e,"controller.additionalContext.branch")}:{},triggeringBuild:!1,selectedStatusFilters:[],doInitialScroll:!0,initialExpansionState:{[R.get(e.controller,"branchAndBuildIdIdentifier")]:!0}},this.store=(0,r.resolveStoreInstance)(a.default),this.getBranchBuilds=this.getBranchBuilds.bind(this),this.handleBranchChange=this.handleBranchChange.bind(this),this.handleBackButton=this.handleBackButton.bind(this),this.handleTriggerBuild=this.handleTriggerBuild.bind(this),this.handleBuildsRefresh=this.handleBuildsRefresh.bind(this),this.handleConfigureNewman=this.handleConfigureNewman.bind(this),this.performInitialScroll=this.performInitialScroll.bind(this)}componentDidMount(){this.setState({initialLoad:!0});const{integration:e}=this.state;j.default.getProjectInfoByIntegrationId(e.id).then((e=>{const t=(0,_.getUniqueItemsFromBuilds)(e.jobs,"displayName");R.isEmpty(this.state.selectedBranch)?this.setState({allBranches:t,selectedBranch:{label:R.get(e.jobs,"0.displayName"),value:R.get(e.jobs,"0.displayName")},initialLoad:!1}):this.setState({allBranches:t,initialLoad:!1}),this.getBranchBuilds()})).catch((e=>{this.setState({initialLoad:!1}),pm.toasts.error("Something went wrong while trying to fetch project branches"),pm.logger.error(e)}))}performInitialScroll(){const{doInitialScroll:e,filteredBuilds:t,loading:n}=this.state,{branchAndBuildIdIdentifier:i}=this.props.controller;if(e&&!n){const e=R.find(t,(e=>i===(0,_.getRowIdForBuildsTable)(e))),n=e&&document.getElementById((0,_.getRowIdForBuildsTable)(e));n&&n.scrollIntoView({behavior:"smooth"}),this.setState({doInitialScroll:!1,initialExpansionState:{}})}}getBranchBuilds(){this.setState({loading:!0});const{selectedBranch:e,integration:t,selectedStatusFilters:n}=this.state,i=x(R.get(t,"variables.project"),e.value);j.default.getMultiBranchProjectBuilds(t.id,{project:i,offset:0,limit:100}).then((e=>{this.setState({builds:e,filteredBuilds:(0,_.getFilteredBuilds)(e,[],n),loading:!1},(()=>{this.performInitialScroll()}))})).catch((e=>{this.setState({errorFetchingData:!0,loading:!1,builds:[],filteredBuilds:[]}),pm.toasts.error("Something went wrong while fetching builds for your project branch"),pm.logger.error("CompactBuilds~getBuilds: Erorr occured in fetching builds",e)}))}handleBranchChange(e){if(e.value===this.state.selectedBranch.value)return;const{allBranches:t}=this.state;R.find(t,{value:e.value})||t.push(e),this.setState({selectedBranch:e,allBranches:t},(()=>{this.getBranchBuilds()}))}handleBackButton(){const{apiId:e,version:t,integrationId:n}=this.props.controller;C.default.closeByRoute(A.V10_API_CI_INTEGRATION_BUILDS_URL,{apiId:e,integrationId:n}),E.default.transitionTo("build.apiVersion",{apiId:e,versionId:t},{tab:P.TEST}),this.store.initializeApiIntegrationsStore({apiId:e,apiVersionId:t,category:"ci-builds"})}handleTriggerBuild(){this.setState({triggeringBuild:!0});const{integration:e,selectedBranch:t}=this.state,n=x(R.get(e,"variables.project"),t.value);S.default.addEventV2({category:"ci-integration",action:"run-build-initiated",label:e.rule,value:1}),j.default.triggerMultiBranchProjectBuild(e.id,{project:n}).then((t=>{this.setState({triggeringBuild:!1}),pm.toasts.success("New build triggered successfully! If you don't see the run try refreshing the page"),S.default.addEventV2({category:"ci-integration",action:"run-build-complete",label:e.rule,value:1}),this.handleBuildsRefresh()})).catch((e=>{this.setState({triggeringBuild:!1}),pm.toasts.error("Something went wrong while triggering build, please try again"),pm.logger.error("Error occurred while fetching builds",e)}))}handleBuildsRefresh(){const{integration:e,selectedBranch:t,selectedStatusFilters:n}=this.state,i=x(R.get(e,"variables.project"),t.value);this.setState({loading:!0}),j.default.getMultiBranchProjectBuilds(e.id,{project:i,offset:0,limit:100}).then((t=>{this.setState({builds:t,filteredBuilds:(0,_.getFilteredBuilds)(t,[],n),loading:!1}),this.store.initializeApiIntegrationsStore({apiId:R.get(e,"variables.api_id"),apiVersionId:e.executor,category:w.CI_CD_BUILDS})})).catch((e=>{this.setState({loading:!1}),pm.toasts.error("Something went wrong while getting new builds, please try again"),pm.logger.error("Error occurred while fetching builds",e)}))}handleConfigureNewman(){const{integration:e}=this.state,t=(0,r.resolveStoreInstance)(l.default).find(R.get(e,"variables.api_id"));S.default.addEventV2({category:"ci-integration",action:"configure-postman-cli",label:e.rule,value:1}),(0,k.openConfigurePostmanCLIInTab)({isMigrated:null==t?void 0:t.isMigrated,apiId:R.get(e,"variables.api_id"),versionId:null==e?void 0:e.executor,queryParams:{integration:e.id,rule:e.rule,service:e.service}})}componentWillUnmount(){(0,r.resolveStoreInstance)(D.default).cleanUp(R.get(this.state,"integration.id"))}render(){const{integration:e,allBranches:t,filteredBuilds:n,loading:i,triggeringBuild:o,selectedBranch:r,initialLoad:a,builds:l,initialExpansionState:c}=this.state;return s.createElement("div",{className:"ci-cd-builds-page-container"},s.createElement(d.default,{integration:e,controller:this.props.controller,handleBack:this.handleBackButton}),s.createElement("div",{className:"dynamic-container"},s.createElement(B,{builds:l,updateBuildsAndselectedStatusFilters:(e,t)=>{this.setState({filteredBuilds:e,selectedStatusFilters:t})},initialLoad:a,allBranches:t,triggeringBuild:o,selectedBranch:r,onBranchChange:this.handleBranchChange,triggerBuild:this.handleTriggerBuild,refreshBuilds:this.handleBuildsRefresh}),s.createElement(N,{filteredBuilds:n,loading:i,onConfigureNewman:this.handleConfigureNewman,integration:e,builds:l,initialExpansionState:c})))}})||i},"./integrations/ci-cd/components/Jenkins/constants.js":function(e,t,n){n.r(t),n.d(t,{BUILDS_STATUS:function(){return v},BUILDS_TABLE_COLUMNS:function(){return S},BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH:function(){return E},ON_DEMAND_TRIGGER_ACTIONS:function(){return P},PROJECT_TYPES:function(){return b},RULE:function(){return I},SERVICE_ACTIONS:function(){return j},SERVICE_ACTION_PAYLOAD:function(){return _},STATUS_BUILD_IN_PROGRESS:function(){return y},getMultiBranchProjectTableColumns:function(){return C}});var i=n("../../node_modules/react/index.js"),s=n("./appsdk/components/link/Link.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("./integrations/ci-cd/components/CIStatusBadge.js"),c=n("./integrations/ci-cd/timeUtils.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./js/services/NavigationService.js"),p=n("./integrations/navigation/constants.js"),m=n("./integrations/ci-cd/helpers.js"),g=n("./node_modules/lodash/lodash.js");const h=a.default.div`
    display: flex;
    align-items: center;
  `,f=a.default.div`
    display: flex;
    align-items: center;
    margin-right: var(--spacing-s);
  `,I="jenkins_ci",b={FREESTYLE:"FreeStyleProject",WORKFLOW:"WorkflowJob",MULTI_BRANCH_PIPELINE:"WorkflowMultiBranchProject"},v=["SUCCESS","FAILURE","BUILDING","UNSTABLE","NOT BUILT","ABORTED"],y="BUILDING",S=[{Header:"Name",accessor:e=>({buildName:g.get(e,"name"),buildUrl:g.get(e,"url"),rowData:e}),Cell:({value:e})=>{const{buildName:t,buildUrl:n,rowData:a}=e;return i.createElement("div",{id:(0,m.getRowIdForBuildsTable)(a)},i.createElement(h,null,i.createElement(f,null,i.createElement(r.default,{color:"content-color-primary"})),i.createElement(s.default,{to:n,target:"_blank"},i.createElement(o.default,{type:"link-default",isExternal:!0,isTruncated:!0},t))))}},{Header:"Branch",accessor:"branch",Cell:e=>i.createElement(o.default,{isTruncated:!0},e.value)},{Header:"Timestamp",accessor:"timestamp",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Duration",accessor:"duration",cellWidth:"100px",Cell:e=>`${c.default.getFormattedDuration(e.value)}`},{Header:"Status",accessor:"status",cellWidth:"200px",Cell:e=>i.createElement(l.default,{status:g.get(e,"value")}),align:"center"}],E=g.reject(S,{Header:"Branch"}),C=e=>[{Header:"",accessor:"empty",Cell:e=>i.createElement(i.Fragment,null),disableSortBy:!0,cellWidth:"32px"},{Header:"Branch",accessor:"name",Cell:t=>i.createElement(s.default,{onClick:()=>{const n=e.integration,i=n.rule;d.default.addEventV2({category:"ci-integration",action:"click-all-builds",label:i,value:1}),u.default.transitionTo(p.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:n.variables.api_id,integrationId:n.id},{},{additionalContext:{branch:t.value}})}},i.createElement(o.default,{type:"link-default",isExternal:!0,isTruncated:!0},t.value))},{Header:"Status",accessor:"status",Cell:e=>i.createElement(l.default,{status:g.get(e,"value")}),align:"center"},{Header:"Last runtime",accessor:"lastTimestamp",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last success",accessor:"lastSuccess",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last failure",accessor:"lastFailure",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last duration",accessor:"lastDuration",Cell:e=>`${c.default.getFormattedDuration(e.value)}`}],j={VALIDATE_USER:"validateUser",GET_PROJECTS:"getProjects",GET_PROJECT:"getProject",GET_NEWMAN_CONFIG:"getNewmanConfig"},_={type:"handleActions"},P={GET_PROJECTS:"get_projects",GET_PROJECT:"get_project",GET_BUILDS:"get_builds",TRIGGER_BUILD:"trigger_build"}},"./integrations/ci-cd/components/StatusFilterDropdown.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("./integrations/ci-cd/constants.ts"),l=n("./integrations/ci-cd/helpers.js");const c=n("./node_modules/lodash/lodash.js").map(a.BUILD_FILTER_STATUS,(e=>({label:e,value:e}))),d=e=>{const{onChange:t}=e,[n,o]=(0,i.useState)("");return i.createElement(s.default,{isSearchable:!1,triggerType:"tertiary",className:"filter-dropdowns--status",inlineLabel:n,options:c,onChange:e=>{o((0,l.getFilterInlineLabel)(e,"statuses")),t&&t(e)},placeholder:"Build Status",emptyStateMessage:"No status found"})};d.propTypes={onChange:r().func.isRequired},t.default=d},"./integrations/ci-cd/components/TravisCI.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./integrations/ci-cd/components/Button/AddIntegration.js"),a=n("./integrations/ci-cd/components/TravisCIFormData.js"),l=n("./integrations/ci-cd/components/Button/CancelButton.js");let c=(0,o.observer)(i=class extends s.Component{render(){const{rule:e,service:t,apiId:n,apiVersionId:i,originalTabId:o}=this.props;return s.createElement(a.default,{apiId:n,apiVersionId:i,classId:e,optionalFormComponents:(e,a)=>s.createElement(s.Fragment,null,s.createElement(r.default,{type:"primary",size:"small",payload:a,service:t,disabled:!e,alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:o},"Connect"),s.createElement(l.default,{apiId:n,apiVersionId:i}))})}})||i},"./integrations/ci-cd/components/TravisCIFormData.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),l=n("./integrations/ci-cd/services/TravisCI.js"),c=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./js/stores/StoreManager.js"),m=n("./node_modules/prop-types/index.js"),g=n.n(m),h=n("./integrations/constants/integrationsConstants.ts"),f=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),I=n("./integrations/ci-cd/constants.ts"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),v=n("./node_modules/lodash/lodash.js");const{UNABLE_TO_FETCH_PROJECTS:y,FETCH_PROJECTS_AUTHENTICATION_ERROR:S,UNABLE_TO_FETCH_CLASS_DATA:E}=I.ERRORS;let C=(0,f.observer)(i=class extends s.Component{constructor(e){super(e);const{addToast:t}=e;this.state={...this.getInitialState(),selectedWorkspace:{},selectedApi:{},selectedApiVersion:{},selectedProject:{},projects:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorToken:"",integrationId:null},this.debouncedFetchProjects=v.debounce(this.fetchProjects.bind(this),1e3),this.store=(0,p.resolveStoreInstance)(u.default),this.setProjectInputClassData=this.setProjectInputClassData.bind(this),this.getInitialState=this.getInitialState.bind(this),this.addToast=t}componentDidMount(){const{classData:e,classId:t}=this.props;v.isEmpty(e)?d.default.fetchIntegrationClassDetails(t).then((e=>{const t=v.get(e,"body.data");200!==e.status||v.isEmpty(t)?(pm.logger.error("TravisCI Service ~ Error in fetching class details",e,{errorContext:I.errorContext}),this.addToast({description:E,status:"error"})):this.setProjectInputClassData(t)})).catch((e=>{pm.logger.error("TravisCI Service ~ Unknown error in fetching class details",e,{errorContext:I.errorContext}),this.addToast({description:E,status:"error"})})):this.setProjectInputClassData(e)}getInitialState(){const{defaultName:e,defaultTravisCIToken:t,defaultSelectedProjectId:n}=this.props;return{nickname:e,travisCIToken:t,selectedProjectId:n}}setProjectInputClassData(e){const t=v.get(e,"inputs"),{defaultTravisCIToken:n}=this.props,i=v.first(v.filter(t,{key:"repository_id"}));this.setState({projectClassInputData:i},(()=>{n&&this.fetchProjects()}))}fetchProjects(){const{travisCIToken:e,projectClassInputData:t}=this.state,{integrationId:n,defaultSelectedProjectId:i}=this.props,s={travisci_token:e};this.setState({loadingProjects:!0,errorProjects:""}),l.default.fetchProjects(s,t,n).then((e=>{let t={};i&&(t=v.find(e,{value:i})||{}),this.setState({projects:e,loadingProjects:!1,errorProjects:"",selectedProject:t,selectedProjectId:t.value})})).catch((e=>{const t=v.get(e,"error.details.statusCode");let n=y;!t||401!==t&&403!==t||(n=S),this.setState({loadingProjects:!1,errorProjects:n}),pm.logger.error("TravisCIFormData ~ "+n,e,{errorContext:I.errorContext})}))}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:i,errorToken:a,errorProjects:l,travisCIToken:d}=this.state,{optionalFormComponents:u,renderDisabledApiApiversionSelector:p,apiId:m,apiVersionId:g,renderApiApiversionSelector:f,classId:I}=this.props,y=m||this.store.selectedEntity&&this.store.selectedEntity.value,S=g||this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,E=this.store.selectedWorkspace&&this.store.selectedWorkspace.value,C={classId:I,name:e,inputs:{api_id:y,apiversion:S,travisci_token:d,repository_name:v.get(i,"label",""),repository_id:v.get(i,"value","")}},j=v.get(C,"name")&&v.every(v.values(v.get(C,"inputs",{})),Boolean);return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(o.NicknameFieldSegment,{id:"travisci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),p&&s.createElement(c.default,{apiId:m,apiVersionId:g}),f&&s.createElement(s.Fragment,null,s.createElement(o.WorkspaceSelector,{description:"Select the workspace your API is in"}),s.createElement(o.EntitySelector,{id:"api-schemas",entity:h.entityTypes.APIS,workspaceId:E,title:"Select API",description:"Select the API to connect",rule:I,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),s.createElement(o.EntitySelector,{id:"api-schema-versions",entity:h.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:I,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity})),s.createElement(o.SensitiveFieldSegment,{title:"API Key",description:"Enter Travis CI token or ",customLink:s.createElement(r.default,{extUrl:"https://go.pstmn.io/docs-travisci-apikey"},"generate one here"),error:a,value:d,onChange:e=>{this.setState({travisCIToken:e.trim(),selectedProject:"",projects:[]},this.debouncedFetchProjects)}}),s.createElement(o.SelectSegmentV2,{title:"Choose your CI project",label:"Select",disabled:n||!v.isEmpty(l),options:t,value:i,onTargetSelect:e=>{this.setState({selectedProject:e,selectedProjectId:e.value})},noOptionsForDropdown:"No projects found",error:l,loading:n,handleRetry:this.debouncedFetchProjects}),u&&u(j,C,(0,b.isFormUpdated)(this.getInitialState(),this.state)))}})||i;C.propTypes={classData:g().object,defaultTravisCIToken:g().string,defaultSelectedProjectId:g().string,defaultName:g().string,integrationId:g().string,apiId:g().string,apiVersionId:g().string,classId:g().string.isRequired,renderDisabledApiApiversionSelector:g().bool,renderApiApiversionSelector:g().bool,optionalFormComponents:g().func},t.default=(0,a.default)(C)},"./integrations/ci-cd/components/configurePostmanCLI/APIPostmanCLIConfigurationContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./node_modules/prop-types/index.js"),l=n.n(a),c=n("./js/modules/services/AnalyticsService.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/CurrentUserInfoStore.js"),p=n("./integrations/ci-cd/components/configurePostmanCLI/base/APICollections.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),f=n("./integrations/ci-cd/components/configurePostmanCLI/components/PostmanCLICommandViewHeader.js"),I=n("./integrations/ci-cd/components/configurePostmanCLI/components/CollectionAndEnvironmentSelector.js"),b=n("./integrations/ci-cd/components/configurePostmanCLI/components/AddCollectionToAPI.js"),v=n("./integrations/ci-cd/components/configurePostmanCLI/components/GovernanceAndSecurity.js"),y=n("./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/PostmanCLICommandBoxContainer.js"),S=n("./node_modules/lodash/lodash.js");const E=r.default.div`
  box-sizing: border-box;
  height: 100%;
  margin: var(--spacing-l) auto 0 auto;
  max-width: 984px;
  padding: var(--spacing-xxl) var(--spacing-l);
  width: 100%;
`;let C=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isAPIGitLinked:!1,selectedItems:[],isCollectionsLoading:!0,isRunApiLintSelected:!1},this.currentUserInfo=(0,d.resolveStoreInstance)(u.default),this.updateSelectedItems=this.updateSelectedItems.bind(this),this.handleSelectedItemsChange=this.handleSelectedItemsChange.bind(this),this.handleRunApiLintChange=this.handleRunApiLintChange.bind(this),this.recordEvent=this.recordEvent.bind(this)}handleRunApiLintChange(e){this.setState({isRunApiLintSelected:e})}handleSelectedItemsChange({selectedItems:e}){this.setState({selectedItems:e})}updateSelectedItems({isCollectionsLoading:e,isAPIGitLinked:t,collections:n}){if(!e){const i=n.map((e=>{const t=S.find(this.state.selectedItems,S.matchesProperty("collection",e));return t||{environment:{},collection:e,isSelected:!0}}));this.setState({isAPIGitLinked:t,selectedItems:i,isCollectionsLoading:e})}}recordEvent(e,t,n){const i={action:e,entityId:this.props.apiId,entityType:"api",label:this.props.cliEnvironment,userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...t?{label:t}:{},...null!=n?n:{}};c.default.addEventV2({category:"postman-cli-api-builder",...i})}render(){const{selectedItems:e,isRunApiLintSelected:t}=this.state,{isCollectionsLoading:n,isAPIGitLinked:i}=this.state,{apiId:o,version:r,cliEnvironment:a,integrationId:l}=this.props,c=!S.isEmpty(e),d=e.some((e=>e.isSelected)),u=c&&!d,C=e.filter((e=>e.isSelected));return s.createElement(s.Fragment,null,s.createElement(E,null,s.createElement(h.default,{renderIfTruthy:n},s.createElement(m.default,{alignItems:"center",justifyContent:"center",height:"100%",padding:"spacing-xxl spacing-xxl","data-testid":"loading-spinner"},s.createElement(g.default,null))),s.createElement(h.default,{renderIfFalsy:n},s.createElement(f.default,{cliEnvironment:a,recordEvent:this.recordEvent}),s.createElement(h.default,{renderIfFalsy:c},s.createElement(b.default,{apiId:o,version:r,recordEvent:this.recordEvent})),s.createElement(h.default,{renderIfTruthy:c},s.createElement(I.default,{apiId:o,selectedItems:e,handleSelectedItemsChange:this.handleSelectedItemsChange})),s.createElement(v.default,{apiId:o,isAPIGitLinked:i,isRunAPILintSelected:t,isBannerActive:u,updateRunApiLintValue:this.handleRunApiLintChange}),s.createElement(y.default,{apiId:o,version:r,isAPIGitLinked:i,cliEnvironment:a,integrationId:l,selectedItems:C,isRunApiLintSelected:t,recordEvent:this.recordEvent}))),s.createElement(p.default,{apiId:o,handleCollectionChange:this.updateSelectedItems}))}})||i;C.propTypes={apiId:l().string.isRequired,version:l().string,cliEnvironment:l().string,integrationId:l().string}},"./integrations/ci-cd/components/configurePostmanCLI/WorkspacePostmanCLIConfigurationContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./node_modules/prop-types/index.js"),l=n.n(a),c=n("./js/modules/services/AnalyticsService.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/CurrentUserInfoStore.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=n("./appsdk/components/link/Link.js"),h=n("./integrations/ci-cd/components/configurePostmanCLI/components/workspaceCollection/WorkspaceCollectionAndEnvironmentSelector.js"),f=n("./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/PostmanCLICommandBoxContainer.js"),I=n("./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js");const b=r.default.div`
  box-sizing: border-box;
  height: 100%;
  margin: var(--spacing-l) auto 0 auto;
  max-width: 984px;
  padding: var(--spacing-xxl) var(--spacing-l);
  width: 100%;
`;let v=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={selectedItems:[]},this.currentUserInfo=(0,d.resolveStoreInstance)(u.default),this.handleSelectedItemsChange=this.handleSelectedItemsChange.bind(this),this.handleAddAnotherSelectionItem=this.handleAddAnotherSelectionItem.bind(this),this.recordEvent=this.recordEvent.bind(this)}componentDidMount(){const{collection:e,environment:t}=this.props;let n,i;e&&e.name&&e.id&&(n={label:e.name,value:e.id}),t&&t.name&&t.id&&(i={label:t.name,value:t.id}),this.handleAddAnotherSelectionItem(n,i)}handleAddAnotherSelectionItem(e,t){const{selectedItems:n}=this.state;this.setState({selectedItems:[...n,{collection:null!=e?e:{},environment:null!=t?t:{}}]})}handleSelectedItemsChange({selectedItems:e}){this.setState({selectedItems:e})}recordEvent(e,t,n){const i={action:e,entityId:this.props.collection,entityType:"collection",label:"cli-config-page",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...t?{label:t}:{},...null!=n?n:{}};c.default.addEventV2({category:"postman-cli-discoverability",...i})}render(){const{selectedItems:e}=this.state,t=e.filter((({collection:e})=>e.value));return s.createElement(s.Fragment,null,s.createElement(b,null,s.createElement(p.default,{type:"h1",hasBottomSpacing:!0,text:"Generate Postman CLI Configuration"}),s.createElement(m.default,{type:"lead",hasBottomSpacing:!0},"Run your tests and validations on CI/CD using Postman CLI configuration. ",s.createElement(g.default,{to:(0,I.getPostmanCLIDownloadLink)(),onClick:()=>this.recordEvent("download_postman_cli",null,null),target:"_blank"},s.createElement(m.default,{type:"link-default",isExternal:!0},"Download Postman CLI"))),s.createElement(h.default,{selectedItems:e,handleAddAnotherSelectionItem:this.handleAddAnotherSelectionItem,handleSelectedItemsChange:this.handleSelectedItemsChange}),s.createElement(f.default,{selectedItems:t,recordEvent:this.recordEvent})))}})||i;v.propTypes={collection:l().object,environment:l().object}},"./integrations/ci-cd/components/configurePostmanCLI/base/APICollections.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),c=n("./api-dev/interfaces/APIInterface.js"),d=n("./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js"),u=n("./node_modules/lodash/lodash.js");const p="UNKNOWN",m="NOT_GIT_LINKED",g="GIT_LINKED";let h=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isCollectionsLoading:!0,gitLinkedStatus:p},this.apiModel=null,this.apiSyncCollectionStore=null,this.getCollections=this.getCollections.bind(this),this.getGitCollections=this.getGitCollections.bind(this),this.getNonGitCollections=this.getNonGitCollections.bind(this),this.notifyCollectionChange=this.notifyCollectionChange.bind(this)}async checkIsAPIGitLinked(e){try{return await(0,c.isAPIGitLinked)(e)}catch(e){return pm.logger.error("APICollections~checkIsAPIGitLinked Error fetching git link status",e),!1}}componentDidUpdate(){const{gitLinkedStatus:e}=this.state,{apiId:t}=this.props;this.apiSyncCollectionStore||e!==m||(0,l.subscribePartialForAPI)(this.props.apiId).then((e=>{this.apiSyncCollectionStore=e})).catch((e=>{pm.logger.error("APICollections~componentDidUpdate: Error subscribing to API store",e)})).finally((()=>{this.setState({isCollectionsLoading:!1})})),this.apiModel||e!==g||(0,c.getAPI)(t).then((e=>{this.apiModel=e})).catch((e=>{pm.logger.error("APICollections~componentDidUpdate: Error subscribing to API store",e)})).finally((()=>{this.setState({isCollectionsLoading:!1})}))}componentDidMount(){this.checkIsAPIGitLinked(this.props.apiId).then((e=>{const t=e?g:m;this.setState({gitLinkedStatus:t})})).catch((e=>{pm.logger.error("PostmanCLICommandBox~componentDidMount - get API is Git linked failed",e)})),this.notifyCollectionChange(this.state.isCollectionsLoading,null,[])}componentWillUnmount(){var e;null===(e=this.apiSyncCollectionStore)||void 0===e||e.unsubscribe()}notifyCollectionChange(e,t,n){Promise.resolve().then((()=>{this.props.handleCollectionChange({isCollectionsLoading:e,isAPIGitLinked:t,collections:(0,d.getSortedList)(n)})}))}getGitCollections(){const{version:e}=this.apiModel,t=u.get(e,"apiRepositoryStore.entityHandlers.collections");return t&&t.collectionsOnBranch()}getNonGitCollections(){return this.apiSyncCollectionStore.list}getCollections(e,t){const n=[];Array.isArray(t)&&t.forEach((t=>{const{name:i,id:s,modelId:o}=t;n.push({label:i,value:e?o:s})})),this.notifyCollectionChange(this.state.isCollectionsLoading,e,n)}render(){const{gitLinkedStatus:e}=this.state;return this.apiSyncCollectionStore&&e===m?this.getCollections(!1,this.getNonGitCollections()):this.apiModel&&e===g&&this.getCollections(!0,this.getGitCollections()),null}})||i;h.propTypes={apiId:r().string.isRequired,handleCollectionChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/base/APIEnvironments.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./api-dev/stores/APIListStore.js"),d=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),u=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),p=n("./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js"),m=n("./node_modules/lodash/lodash.js");let g=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isEnvironmentsLoading:!0},this.environmentStore=null,this.apiListStore=(0,l.resolveStoreInstance)(c.default),this.getEnvironments=this.getEnvironments.bind(this),this.getApiEnvironments=this.getApiEnvironments.bind(this),this.getWorkspaceEnvironments=this.getWorkspaceEnvironments.bind(this),this.notifyEnvironmentsChange=this.notifyEnvironmentsChange.bind(this)}componentDidMount(){(0,u.subscribeMeta)((0,l.resolveStoreInstance)(d.default).id,{parent:["workspace","api"],enableLazyLoading:!0}).then((e=>{this.environmentStore=e})).catch((e=>{pm.logger.error("ApiEnvironments(configurePostmanCLI)~componentDidMount: Error subscribing to environments",e)})).finally((()=>{this.setState({isEnvironmentsLoading:!1})})),this.notifyEnvironmentsChange(this.state.isEnvironmentsLoading,[])}componentWillUnmount(){var e;null===(e=this.environmentStore)||void 0===e||e.unsubscribe()}notifyEnvironmentsChange(e,t){Promise.resolve().then((()=>{this.props.handleEnvironmentsChange({isEnvironmentsLoading:e,environments:t})}))}getOptions(e,t){const n=e.map((e=>{var n,i,s;const o=t.get(e);return{label:m.get(o,"name"),value:e,isForked:null!==(n=m.get(o,"isForked"))&&void 0!==n&&n,forkLabel:null!==(i=m.get(o,"forkLabel"))&&void 0!==i?i:null,baseEnvironmentUid:null!==(s=m.get(o,"baseEnvironmentUid"))&&void 0!==s?s:null}}));return(0,p.getSortedList)(n)}getApiEnvironments(e){const{apiId:t}=this.props,n=[],i=e.get("api");if(i){var s;const e=null!==(s=i.get(t))&&void 0!==s?s:[];e.length&&n.push({label:this.apiListStore.find(t).name,options:this.getOptions(e,this.environmentStore)})}return n}getWorkspaceEnvironments(e,t){const n=[],i=e.get("workspace");if(i){var s;const e=null!==(s=i.get((0,l.resolveStoreInstance)(d.default).id))&&void 0!==s?s:[];e.length&&n.push({label:t?"Others":"",options:this.getOptions(e,this.environmentStore)})}return n}getEnvironments(){const{parentToEntityMap:e}=this.environmentStore,t=this.getApiEnvironments(e),n=this.getWorkspaceEnvironments(e,t.length);this.notifyEnvironmentsChange(this.state.isEnvironmentsLoading,[...t,...n])}render(){return this.environmentStore&&this.getEnvironments(),null}})||i;g.propTypes={apiId:r().string.isRequired,handleEnvironmentsChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/base/WorkspaceCollections.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),d=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),u=n("./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js");let p=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isCollectionsLoading:!0},this.workspaceCollectionStore=null,this.notifyCollectionsChange=this.notifyCollectionsChange.bind(this)}componentDidMount(){const e=(0,l.resolveStoreInstance)(c.default);e&&((0,d.subscribeMeta)(e.id).then((e=>{this.workspaceCollectionStore=e})).catch((e=>{pm.logger.error("WorkspaceCollections(configurePostmanCLI)~componentDidMount: Error subscribing to store",e)})).finally((()=>{this.setState({isCollectionsLoading:!1})})),this.notifyCollectionsChange(this.state.isCollectionsLoading,[]))}componentWillUnmount(){var e;null===(e=this.workspaceCollectionStore)||void 0===e||e.unsubscribe()}notifyCollectionsChange(e,t){const{handleCollectionChange:n}=this.props;Promise.resolve().then((()=>{n({isCollectionsLoading:e,collections:(0,u.getSortedList)(t)})}))}getCollections(){const e=[],{isCollectionsLoading:t}=this.state,n=this.workspaceCollectionStore.list;Array.isArray(n)&&n.forEach((({name:t,id:n})=>{e.push({label:t,value:n})})),this.notifyCollectionsChange(t,e)}render(){return this.workspaceCollectionStore&&this.getCollections(),null}})||i;p.propTypes={handleCollectionChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/base/WorkspaceEnvironments.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),d=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),u=n("./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js"),p=n("./node_modules/lodash/lodash.js");const m="workspace";let g=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isEnvironmentsLoading:!0},this.environmentStore=null,this.getEnvironments=this.getEnvironments.bind(this),this.notifyEnvironmentsChange=this.notifyEnvironmentsChange.bind(this)}componentDidMount(){(0,d.subscribeMeta)((0,l.resolveStoreInstance)(c.default).id,{parent:[m],enableLazyLoading:!0}).then((e=>{this.environmentStore=e})).catch((e=>{pm.logger.error("WorkspaceEnvironments(configurePostmanCLI)~componentDidMount: Error subscribing to environments",e)})).finally((()=>{this.setState({isEnvironmentsLoading:!1})})),this.notifyEnvironmentsChange(this.state.isEnvironmentsLoading,[])}componentWillUnmount(){var e;null===(e=this.environmentStore)||void 0===e||e.unsubscribe()}notifyEnvironmentsChange(e,t){Promise.resolve().then((()=>{this.props.handleEnvironmentsChange({isEnvironmentsLoading:e,environments:(0,u.getSortedList)(t)})}))}getEnvironments(){const e=[],{isEnvironmentsLoading:t}=this.state,{parentToEntityMap:n}=this.environmentStore,i=n.get(m);if(i){var s;(null!==(s=i.get((0,l.resolveStoreInstance)(c.default).id))&&void 0!==s?s:[]).forEach((t=>{var n,i,s;const o=this.environmentStore.get(t);e.push({label:p.get(o,"name"),value:t,isForked:null!==(n=p.get(o,"isForked"))&&void 0!==n&&n,forkLabel:null!==(i=p.get(o,"forkLabel"))&&void 0!==i?i:null,baseEnvironmentUid:null!==(s=p.get(o,"baseEnvironmentUid"))&&void 0!==s?s:null})}))}this.notifyEnvironmentsChange(t,e)}render(){return this.environmentStore&&this.getEnvironments(),null}})||i;g.propTypes={handleEnvironmentsChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/AddCollectionToAPI.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./js/stores/StoreManager.js"),d=n("./api-dev/stores/APIListStore.js"),u=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),p=n("./api-dev/services/APIPermissionService.js"),m=n("./runtime-repl/collection/_api/CollectionInterface.js"),g=n("./api-dev/interfaces/APIInterface.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),b=n("./api-dev/components/api/AddCollectionToAPI/AddCollectionToAPI.js"),v=n("./api-dev/util/error.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke.js"),S=n("./node_modules/lodash/lodash.js");const E=(0,l.default)(h.default)`
  background: var(--background-color-secondary);
  border-radius: var(--border-radius-default)
`,C="unclassified";let j=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={showAddCollectionsModal:!1},this.apiListStore=(0,c.resolveStoreInstance)(d.default),this.toggleShowAddCollectionsModal=this.toggleShowAddCollectionsModal.bind(this),this.hasEditAPIPermission=this.hasEditAPIPermission.bind(this),this.getAPIVersionItem=this.getAPIVersionItem.bind(this),this.handleAddExistingCollectionToAPI=this.handleAddExistingCollectionToAPI.bind(this)}toggleShowAddCollectionsModal(){const{apiId:e,version:t,recordEvent:n}=this.props;(0,g.shouldTriggerMigrationModal)(e)?(0,g.migrateAPI)(e,t).catch(S.noop):(this.setState((e=>({showAddCollectionsModal:!e.showAddCollectionsModal}))),n("open_add_collection_modal"))}async addExistingCollectionInBranch(e,t){const n=await(0,u.cloneCollection)(e,{format:"2.1.0"});return(0,g.addCollectionOnBranch)(t,C,n)}async addExistingCollectionInAPIWorkbench(e,t,n){return(0,m.duplicateCollectionInAPI)(e,{type:"api",id:t,apiVersionId:n,relation:C},{shouldOpenCollectionInTab:!1})}hasEditAPIPermission(){const{apiId:e}=this.props,t=this.apiListStore.permissions;return p.default.hasPermission(t,"edit","api",e)}getAPIVersionItem(){const{apiId:e,version:t}=this.props,n=this.apiListStore.find(e),{childEntities:i}=n;return t?i.find(t):S.head(i.values)}async handleAddExistingCollectionToAPI(e){const{apiId:t}=this.props,n=this.hasEditAPIPermission(),i=this.getAPIVersionItem();if(n&&i)try{"branch"===i.mode.name?await this.addExistingCollectionInBranch(e,t):await this.addExistingCollectionInAPIWorkbench(e,t,i.id)}catch(e){(0,v.handleError)(e,"There was an unexpected error adding this collection to the API. Please try again.")}finally{this.toggleShowAddCollectionsModal()}}render(){const{showAddCollectionsModal:e}=this.state,{apiId:t}=this.props,n=this.hasEditAPIPermission();return s.createElement(s.Fragment,null,s.createElement(E,{gap:"spacing-m",padding:"spacing-m spacing-m spacing-m spacing-l",alignItems:"center"},s.createElement(y.default,null),s.createElement(h.default,{width:"100%",justifyContent:"space-between",shrink:1,alignItems:"center"},s.createElement(f.default,{type:"para",color:"content-color-primary"},"No collections found for tests to be run."),s.createElement(I.default,{text:"Add Collection",type:"outline",isDisabled:!n,tooltip:!n&&"You do not have permission to add collection",onClick:this.toggleShowAddCollectionsModal}))),s.createElement(b.default,{showAddCollectionsModal:e,toggleShowAddCollectionsModal:this.toggleShowAddCollectionsModal,apiId:t,isAPISidebarMode:!0,onAddExistingCollectionToAPI:this.handleAddExistingCollectionToAPI}))}})||i;j.propTypes={apiId:r().string.isRequired,version:r().string,recordEvent:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/CollectionAndEnvironmentSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/uuid/v4.js"),d=n.n(c),u=n("./integrations/ci-cd/components/configurePostmanCLI/base/APIEnvironments.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),f=n("./integrations/ci-cd/components/configurePostmanCLI/components/EnvironmentDropdown.js"),I=n("./node_modules/lodash/lodash.js");const b=(0,l.default)(p.default)`
  flex:1;
`,v=l.default.div`
  align-items: center;
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-s) var(--spacing-zero);
  border-bottom: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
`,y=l.default.div`
  margin-right: var(--spacing-l);
  height: var(--size-xs);
  width: var(--size-xs);
`,S=l.default.div`
  margin-right: var(--spacing-m);
  flex: 1;
`,E=l.default.div`
  flex:1;
  margin-right: var(--spacing-xxl);
`;let C=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={environments:[],isEnvironmentsLoading:!0},this.handleAllSelectionChange=this.handleAllSelectionChange.bind(this),this.handleItemSelectionChange=this.handleItemSelectionChange.bind(this),this.handleEnvironmentChange=this.handleEnvironmentChange.bind(this),this.updateEnvironmentsList=this.updateEnvironmentsList.bind(this)}updateEnvironmentsList({isEnvironmentsLoading:e,environments:t}){e||this.setState({environments:t,isEnvironmentsLoading:!1})}handleAllSelectionChange(e){const{selectedItems:t,handleSelectedItemsChange:n}=this.props;n({selectedItems:t.map((t=>(t.isSelected=e,t)))})}handleItemSelectionChange(e,t){const{selectedItems:n,handleSelectedItemsChange:i}=this.props;i({selectedItems:n.map((n=>(n.collection.value===t.collection.value&&(n.isSelected=e),n)))})}handleEnvironmentChange(e,t){const{selectedItems:n,handleSelectedItemsChange:i}=this.props;i({selectedItems:n.map((n=>(n.collection.value===t.collection.value&&(n.environment=null!=e?e:{}),n)))})}render(){const{environments:e}=this.state,{selectedItems:t,apiId:n}=this.props,i=I.every(t,(e=>e.isSelected));return s.createElement(s.Fragment,null,s.createElement(p.default,{type:"h4",hasBottomSpacing:!0,text:"Choose the collections you want to run"}),s.createElement(m.default,{alignItems:"center",padding:{paddingBottom:"spacing-s",paddingTop:"spacing-l"},gap:"spacing-l",border:{borderBottom:"border-width-default",borderColor:"border-color-default"}},s.createElement(g.default,{isChecked:i,onChange:this.handleAllSelectionChange,"data-testid":"collection-environment-selector-all-selection"}),s.createElement(b,{text:"Collections",type:"h6"}),s.createElement(b,{text:"Environment",type:"h6"})),t.map(((t,n)=>s.createElement(v,{key:t.collection.value},s.createElement(y,null,s.createElement(g.default,{isChecked:t.isSelected,onChange:e=>this.handleItemSelectionChange(e,t),"data-testid":`collection-checkbox-${n}`})),s.createElement(S,null,s.createElement(h.default,{type:"body-medium",color:"content-color-primary"},t.collection.label)),s.createElement(E,{"data-testid":"environment-dropdown-container"},s.createElement(f.default,{id:`api-${n}-${d()()}`,label:"",options:e,value:t.environment,handleEnvironmentChange:e=>this.handleEnvironmentChange(e,t)}))))),s.createElement(u.default,{apiId:n,handleEnvironmentsChange:this.updateEnvironmentsList}))}})||i;C.propTypes={apiId:r().string.isRequired,selectedItems:r().array.isRequired,handleSelectedItemsChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/EnvironmentDropdown.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("./version-control/common/ForkLabel.js"),m=n("./node_modules/lodash/lodash.js");const g="environment",h="postman-cli-environment-dropdown-selection-";let f=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isDropdownOpen:!1},this.getCurrentEnvironmentValue=this.getCurrentEnvironmentValue.bind(this),this.getEnvironmentOptionLabel=this.getEnvironmentOptionLabel.bind(this),this.getTruncatedLabel=this.getTruncatedLabel.bind(this),this.handleDropdownOpen=this.handleDropdownOpen.bind(this),this.handleDropdownClose=this.handleDropdownClose.bind(this)}handleDropdownOpen(){this.setState({isDropdownOpen:!0})}handleDropdownClose(e){const t=document.getElementById(h+this.props.id);e.target===t||null!=t&&t.contains(e.target)||this.setState({isDropdownOpen:!1})}componentDidMount(){document.addEventListener("click",this.handleDropdownClose)}componentWillUnmount(){document.removeEventListener("click",this.handleDropdownClose)}getTruncatedLabel(e,t){const n=t?35:60;return`${m.truncate(e,{length:n})}`}getCurrentEnvironmentValue(e){if(m.isEmpty(e))return e;const{label:t,isForked:n,forkLabel:i}=e;return{...e,label:n?`${this.getTruncatedLabel(t,!0)} [${this.getTruncatedLabel(i,!0)}]`:this.getTruncatedLabel(t,!1)}}getEnvironmentOptionLabel(e){if(m.isEmpty(e))return null;const{label:t,value:n,isForked:i,forkLabel:o,baseEnvironmentUid:r}=e;return i?s.createElement(l.default,{direction:"row",alignItems:"center",gap:"spacing-s","data-testid":"fork-label"},s.createElement(c.default,{content:t,placement:"bottom",openDelay:1e3},s.createElement(l.default,{direction:"row",alignItems:"center"},s.createElement(d.default,{color:"content-color-primary"},this.getTruncatedLabel(t,!0)))),s.createElement(p.default,{label:this.getTruncatedLabel(o,!0),showForkLabel:!0,forkedEntity:{id:n,forkLabel:o,model:g},baseEntity:{id:r,model:g}})):s.createElement(c.default,{content:t,placement:"bottom"},s.createElement(l.default,{direction:"row",alignItems:"center"},s.createElement(d.default,{color:"content-color-primary"},this.getTruncatedLabel(t,!1))))}render(){const{id:e,label:t,options:n,value:i,handleEnvironmentChange:o}=this.props,{isDropdownOpen:r}=this.state,a=this.getCurrentEnvironmentValue(i);return s.createElement(s.Fragment,null,s.createElement("div",{id:h+e},s.createElement(u.default,{label:t,options:n,placeholder:"",isClearable:!0,isOpen:r,onOpen:this.handleDropdownOpen,isSearchable:!1,menuMaxWidth:480,triggerMaxWidth:480,menuMaxHeight:480,maxMenuHeight:480,onChange:e=>{o(e),this.setState({isDropdownOpen:!1})},value:a,emptyStateMessage:"No environments found",customOptionComponent:this.getEnvironmentOptionLabel})))}})||i;f.propTypes={id:r().string.isRequired,label:r().string.isRequired,options:r().arrayOf(r().shape({label:r().string.isRequired,options:r().arrayOf(r().shape({label:r().string.isRequired,value:r().string.isRequired}))})).isRequired,value:r().shape({label:r().string,value:r().string}),handleEnvironmentChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/GovernanceAndSecurity.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),g=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),h=n("./js/services/NavigationService.js"),f=n("./api-dev/interfaces/APIInterface.js"),I=n("../../packages/api-security/admin-panels/index.ts"),b=n("./node_modules/lodash/lodash.js");let v=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={showBanner:!0},this.handleBannerClose=this.handleBannerClose.bind(this),this.handleNavigation=this.handleNavigation.bind(this)}componentDidMount(){const{apiId:e,updateRunApiLintValue:t,isAPIGitLinked:n}=this.props;(0,f.getAPI)(e).then((e=>{const{version:i}=e;if(n){const e=!b.get(i,"apiRepositoryStore.entityHandlers.schemas.store.isSchemaContentEmpty");t(e)}else{const e=!b.isEmpty(b.get(i,"relationsStore.relations.apiDefinition"));t(e)}})).catch((e=>{pm.logger.error("GovernanceAndSecurity~componentDidMount: Error getting API store",e)}))}handleBannerClose(){this.setState({showBanner:!this.state.showBanner})}handleNavigation(e){h.default.openURL(`${pm.artemisUrl}/${e}`,{target:"_blank"})}render(){const{showBanner:e}=this.state,{isBannerActive:t,isRunAPILintSelected:n,updateRunApiLintValue:i}=this.props;return s.createElement(s.Fragment,null,s.createElement(l.default,{direction:"column"},s.createElement(g.default,{renderIfTruthy:t&&n&&e},s.createElement(l.default,{padding:{paddingTop:"spacing-l"}},s.createElement(c.default,{"data-testid":"info-banner",status:"info",onDismiss:this.handleBannerClose},"No collections chosen. Only definition rules will be run."))),s.createElement(l.default,{direction:"column",gap:"spacing-m",padding:{paddingTop:"spacing-xxl"}},s.createElement(l.default,{direction:"column",gap:"spacing-xs"},s.createElement(d.default,{type:"h4",text:"Governance and Security"}),s.createElement(u.default,null,"Test the definition against configured ",s.createElement(p.default,{"data-testid":"governance-button",text:"governance",type:"monochrome-plain",onClick:()=>this.handleNavigation(I.GOVERNANCE_ROUTE)})," and ",s.createElement(p.default,{"data-testid":"security-button",text:"security",type:"monochrome-plain",onClick:()=>this.handleNavigation(I.SECURITY_ROUTE)})," rules.")),s.createElement(m.default,{"data-testid":"run-rules-checkbox",label:"Run governance and security rules",isChecked:n,onChange:e=>i(e)}))))}})||i;v.propTypes={apiId:r().string.isRequired,isAPIGitLinked:r().bool.isRequired,isBannerActive:r().bool.isRequired,isRunAPILintSelected:r().bool.isRequired,updateRunApiLintValue:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/PostmanCLICommandViewHeader.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("./appsdk/components/link/Link.js"),u=n("./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js"),p=n("./integrations/ci-cd/components/configurePostmanCLI/constants/constants.js");let m=(0,a.observer)(i=class extends s.Component{constructor(e){super(e)}render(){const{cliEnvironment:e,recordEvent:t}=this.props;return s.createElement(s.Fragment,null,s.createElement(l.default,{type:"h1",hasBottomSpacing:!0,text:e===p.CLI_ENV_LOCAL?"Run Postman CLI on local environment":"Generate Postman CLI Configuration"}),s.createElement(c.default,{type:"lead",hasBottomSpacing:!0},e===p.CLI_ENV_LOCAL?"Automate your tests and validations using Postman’s command line tool. ":"Run your tests and validations on CI/CD using Postman CLI configuration. ",s.createElement(d.default,{to:(0,u.getPostmanCLIDownloadLink)(),onClick:()=>t("download_postman_cli",null,null),target:"_blank"},s.createElement(c.default,{type:"link-default",isExternal:!0},"Download Postman CLI"))))}})||i;m.propTypes={cliEnvironment:r().string,recordEvent:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js":function(e,t,n){n.r(t);var i=n("./node_modules/prop-types/index.js"),s=n.n(i);function o({renderIfTruthy:e=!1,renderIfFalsy:t=!0,children:n}){return e||!t?n:null}const r=s().oneOfType([s().string,s().number,s().bool,s().object,s().array,s().oneOf([null,void 0])]);o.propTypes={renderIfTruthy:r,renderIfFalsy:r,children:s().oneOfType([s().element,s().arrayOf(s().element)]).isRequired},t.default=o},"./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/CloneSteps.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),o=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Tag/Tag.js"),d=n("./appsdk/components/link/Link.js"),u=n("./js/stores/StoreManager.js"),p=n("./api-dev/stores/APIListStore.js"),m=n("./js/modules/services/AnalyticsService.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke.js"),h=n("./node_modules/lodash/lodash.js");class f extends i.Component{constructor(e){super(e),this.apiListStore=(0,u.resolveStoreInstance)(p.default),this.handleLinkClick=this.handleLinkClick.bind(this)}getBranchAndRepoUrl(e,t){if(e&&this.apiListStore){var n,i,s,o,r,a;const l=this.apiListStore.find(e),c=t?l.childEntities.find(t):h.head(null==l?void 0:l.childEntities.values);return{branchName:null==c||null===(n=c.apiRepositoryStore)||void 0===n||null===(i=n.apiVersionRepositoryInterface)||void 0===i||null===(s=i.git)||void 0===s?void 0:s.branch,repositoryUrl:null==c||null===(o=c.apiRepositoryStore)||void 0===o||null===(r=o.apiVersionRepositoryInterface)||void 0===r||null===(a=r.links)||void 0===a?void 0:a.repository}}return{}}handleLinkClick(){const{apiId:e}=this.props;m.default.addEventV2({entityType:"api",apiId:e,action:"open_v10_learning_center",category:"postman-cli-api-builder"})}render(){const{apiId:e,version:t}=this.props,{repositoryUrl:n,branchName:s}=this.getBranchAndRepoUrl(e,t);return n&&s?i.createElement(i.Fragment,null,i.createElement(r.default,{gap:"spacing-s",direction:"column"},i.createElement(r.default,{direction:"column",gap:"spacing-s"},i.createElement(r.default,{gap:"spacing-s",alignItems:"center"},i.createElement(a.default,{color:"content-color-secondary","data-testid":"clone-steps"},"1. Start by cloning the repository to your system. Ensure you are on the right branch."),i.createElement(l.default,{trigger:i.createElement(g.default,null),pointer:!0,placement:"top"},i.createElement(r.default,{direction:"column",gap:"spacing-s",padding:"spacing-s"},i.createElement(r.default,null,i.createElement(d.default,{to:"https://go.pstmn.io/v10-git-local-docs",target:"_blank",onClick:this.handleLinkClick},i.createElement(a.default,{type:"link-subtle",isExternal:!0},"Local git workflow")),i.createElement(a.default,null,"support on Postman.")),i.createElement(c.default,{text:"COMING SOON",color:"teal"}))))),i.createElement(r.default,{padding:"spacing-zero spacing-zero spacing-zero spacing-m"},i.createElement(a.default,{color:"content-color-secondary",type:"code",text:`git clone -b ${s} ${n}`}))),i.createElement(r.default,{alignItems:"center"},i.createElement(a.default,{color:"content-color-secondary","data-testid":"clone-steps-last"},"2. Switch to the appropriate directory in your local terminal. Copy the command below and run it."))):null}}f.propTypes={apiId:o().string,version:o().string}},"./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/CommandTemplate.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./js/utils/HttpService.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),m=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),g=n("./integrations/ci-cd/constants.ts"),h=n("./integrations/ci-cd/components/configurePostmanCLI/constants/constants.js"),f=n("./node_modules/lodash/lodash.js");const I=l.default.div`
  box-sizing: border-box;
  flex: 1;
`,b=l.default.div`
  box-sizing: border-box;
  flex: 1;
`,v=l.default.div`
  margin-left: var(--spacing-m);
  height: 32px;
  width:32px;
`;let y=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={selectedOS:h.SELECTED_OS,servicesList:[],selectedService:{}},this.commandTemplateCache=new Map,this.initiateTemplateFetch=this.initiateTemplateFetch.bind(this),this._fetchCommandTemplate=this._fetchCommandTemplate.bind(this),this.fetchPipelineServiceList=this.fetchPipelineServiceList.bind(this),this.getCommandTemplateUrl=this.getCommandTemplateUrl.bind(this),this.notifyCommandTemplateChange=this.notifyCommandTemplateChange.bind(this)}componentDidMount(){const{cliEnvironment:e}=this.props,{selectedOS:t}=this.state,n=g.RULE_TO_TEMPLATE[e];e&&n?this.initiateTemplateFetch(n,t.value):this.fetchPipelineServiceList()}notifyCommandTemplateChange(e){this.props.handleCommandTemplateChange({configCommandContent:e,collectionRunnerTemplate:f.get(e,"pipeline.postmanCLI.collection_runner"),collectionRunnerPathTemplate:f.get(e,"pipeline.postmanCLI.collection_path_runner"),integrationIdentifierTemplate:f.get(e,"pipeline.postmanCLI.iid"),selectedOS:this.state.selectedOS})}getCommandTemplateUrl(e,t){return this.props.cliEnvironment===h.CLI_ENV_LOCAL?`${pm.runtimeAssetsUrl}/postman-cli-ci-cd-integration/${e}-cli-config.json`:`${pm.runtimeAssetsUrl}/postman-cli-ci-cd-integration/${t}/${e}-cli-config.json`}_fetchCommandTemplate(e,t){const n=e+t,i=this.commandTemplateCache.get(n);if(i)return this.notifyCommandTemplateChange(i);!this.props.isLoading&&this.props.setIsLoading(!0);const s=this.getCommandTemplateUrl(e,h.OS_URL_PATH[t]);c.default.request(s,{method:"GET",headers:{},credentials:"omit"}).then((e=>{this.commandTemplateCache.set(n,e.body),this.notifyCommandTemplateChange(e.body)})).catch((e=>{pm.logger.error("CommandTemplate~fetchCommandTemplate - There was an error while fetching the configuration template",e),pm.toasts.error("Cannot fetch template for configuring Postman CLI",{dedupeId:"configure-postman-cli-error"})})).finally((()=>{this.props.setIsLoading(!1)}))}initiateTemplateFetch(e,t){const{cliEnvironment:n}=this.props,i=e||g.RULE_TO_TEMPLATE[n];this._fetchCommandTemplate(i,t)}fetchPipelineServiceList(){const{selectedOS:e}=this.state,t=`${pm.runtimeAssetsUrl}/postman-cli-ci-cd-integration/services-list.json`;this.props.setIsLoading(!0),c.default.request(t,{method:"GET",headers:{},credentials:"omit"}).then((t=>{const n=t.body,[i]=n;this.setState({servicesList:n,selectedService:i}),this.initiateTemplateFetch(i.value,e.value)})).catch((e=>{this.props.setIsLoading(!1),pm.logger.error("CommandTemplate~fetchPipelineServiceList - There was an error while fetching the ci/cd services list",e),pm.toasts.error("Cannot fetch template for configuring Postman CLI",{dedupeId:"configure-postman-cli-error"})}))}render(){const{servicesList:e,selectedService:t,selectedOS:n}=this.state,{cliEnvironment:i}=this.props;return i===h.CLI_ENV_LOCAL?null:s.createElement(d.default,{direction:"column",padding:{paddingTop:"spacing-xxl"}},s.createElement(u.default,{type:"h4",text:"CI/CD configuration"}),s.createElement(d.default,{gap:"spacing-xxl",padding:{paddingTop:"spacing-l"}},s.createElement(m.default,{renderIfTruthy:!i},s.createElement(I,{"data-testid":"services-dropdown"},s.createElement(p.default,{className:"ci-cd-configure-newman-service",label:"CI/CD Provider",trigger:!0,isClearable:!1,isSearchable:!1,options:e,onChange:e=>{this.setState({selectedService:e}),this.initiateTemplateFetch(e.value,n.value)},value:t,emptyStateMessage:"No services found"}))),s.createElement(b,{"data-testid":"operating-system-dropdown",style:{marginRight:0}},s.createElement(p.default,{label:"Operating system for CI/CD",isClearable:!1,isSearchable:!1,triggerMaxWidth:480,menuMaxWidth:480,options:h.OS_LIST,onChange:e=>{this.setState({selectedOS:e}),this.initiateTemplateFetch(t.value,e.value)},value:n})),s.createElement(v,null)))}})||i;y.propTypes={cliEnvironment:r().string,handleCommandTemplateChange:r().func.isRequired,isLoading:r().bool.isRequired,setIsLoading:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/GenerateAPIKey.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./iam/src/common/api/IAMservice.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Card/Card.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),I=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),b=n("./appsdk/components/link/Link.js"),v=n("./js/utils/ClipboardHelper.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),S=n("./integrations/ci-cd/components/configurePostmanCLI/constants/constants.js"),E=n("./node_modules/lodash/lodash.js");const C=(0,l.default)(y.default)`
  padding-top: 2px;
`,j=(0,l.default)(d.ModalFooter)`
  justify-content: flex-end;
`,{GENERATE_API_KEY:_,API_KEY_GENERATED:P,GENERATE_API_KEY_HEADER:A,API_KEY_GENERATED_HEADER:w,API_KEY_LIMIT_REACHED:T,ERROR:k,DEFAULT_ERROR_MESSAGE:L,ACCOUNT_SETTINGS:D,SHOW_COPY_SUCCESS_DURATION:R}=S.API_KEY;let x=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isModalOpen:!1,modalView:_,apiKeyName:"",isGeneratingKey:!1,generatedAPIKeyText:"",apiKeyGenerationError:null,isAPIKeyCopySuccess:!1},this.clearCopySuccessTimeout=null,this.handleModalOpen=this.handleModalOpen.bind(this),this.handleModalClose=this.handleModalClose.bind(this),this.handleAPIKeyNameChange=this.handleAPIKeyNameChange.bind(this),this.handleAPIKeyNameClear=this.handleAPIKeyNameClear.bind(this),this.generateNewApiKey=this.generateNewApiKey.bind(this),this.handleCopyApiKey=this.handleCopyApiKey.bind(this)}componentWillUnmount(){clearTimeout(this.clearCopySuccessTimeout)}handleCopyApiKey(){const{isAPIKeyCopySuccess:e,generatedAPIKeyText:t}=this.state,{recordEvent:n}=this.props;e||(v.default.copy(t),this.setState({isAPIKeyCopySuccess:!0},(()=>{this.clearCopySuccessTimeout=setTimeout((()=>{this.setState({isAPIKeyCopySuccess:!1})}),R)})),n("copy-generated-api-key"))}generateNewApiKey(e){const{recordEvent:t}=this.props;this.setState({isGeneratingKey:!0}),(0,c.createNewApiKey)(e).then((e=>{e.status===k?(this.setState({apiKeyGenerationError:E.get(e,"error.message",L)}),t("generate_new_api_key","error")):(this.setState({generatedAPIKeyText:E.get(e,"apikey.key"),modalView:P}),t("generate_new_api_key","success"))})).catch((e=>{pm.toasts.error(E.get(e,"error.message",L))})).finally((()=>{this.setState({isGeneratingKey:!1})}))}handleAPIKeyNameClear(){this.setState({apiKeyName:"",apiKeyGenerationError:null})}handleAPIKeyNameChange(e){this.setState({apiKeyName:e.target.value})}handleModalClose(){this.setState({isModalOpen:!1,modalView:_,apiKeyName:"",apiKeyGenerationError:null})}handleModalOpen(){const{recordEvent:e}=this.props;this.setState({isModalOpen:!0,modalView:_,apiKeyName:"",apiKeyGenerationError:null}),e("open-generate-new-api-key-modal")}getHeaderText(e){return e===_?A:w}getValidationResult(e,t){if(e){return e.includes(T)?null:t}return null}render(){const{isModalOpen:e,modalView:t,apiKeyName:n,generatedAPIKeyText:i}=this.state,{apiKeyGenerationError:o,isGeneratingKey:r,isAPIKeyCopySuccess:a}=this.state;return s.createElement(s.Fragment,null,s.createElement(u.default,null,s.createElement(p.default,{direction:"column",gap:"spacing-s"},s.createElement(m.default,{"data-testid":"api-key-heading",type:"h5",text:"Note: Postman API key is needed to log in to Postman CLI"}),s.createElement(p.default,{justifyContent:"space-between",alignItems:"center"},s.createElement(g.default,{type:"body-medium",color:"content-color-secondary","data-testid":"api-key-description"},"We recommend that you save your Postman API key as a secret environment variable in your CI/CD pipeline to prevent exposure.",s.createElement("br",null),"The login command already contains $POSTMAN_API_KEY variable to get you started."),s.createElement(h.default,{"data-testid":"generate-new-api-key-btn",type:"outline",text:"Generate API Key",onClick:this.handleModalOpen})))),s.createElement(d.Modal,{isOpen:e,onClose:this.handleModalClose,size:"small"},s.createElement(d.ModalHeader,{heading:this.getHeaderText(t)}),s.createElement(I.default,{renderIfTruthy:t===_},s.createElement(s.Fragment,null,s.createElement(d.ModalContent,null,s.createElement(g.default,{type:"body-medium",color:"content-color-primary"},"This will help you identify and manage the keys."),s.createElement(p.default,{gap:"spacing-xs",direction:"column"},s.createElement(f.default,{"data-testid":"api-key-name-input",type:"text",placeholder:"Enter name",value:n,autoFocus:!0,onChange:this.handleAPIKeyNameChange,onClear:this.handleAPIKeyNameClear,validationStatus:this.getValidationResult(o,k),validationMessage:this.getValidationResult(o,o)}),s.createElement(I.default,{renderIfTruthy:o&&o.includes(T)},s.createElement(p.default,{gap:"spacing-xs"},s.createElement(C,{color:"content-color-error"}),s.createElement(g.default,{type:"body-small",color:"content-color-error"},o,"Remove or regenerate keys in your ",s.createElement(b.default,{to:`${pm.artemisUrl}/${D}`,target:"_blank"},s.createElement(g.default,{type:"link-default"},"account settings")),"."))))),s.createElement(j,null,s.createElement(p.default,{justifyContent:"flex-end",gap:"spacing-m"},s.createElement(h.default,{type:"secondary",onClick:this.handleModalClose,text:"Cancel",isDisabled:r}),s.createElement(h.default,{type:"primary",onClick:()=>this.generateNewApiKey(n),text:"Generate",isLoading:r,isDisabled:E.isEmpty(n)}))))),s.createElement(I.default,{renderIfTruthy:t===P},s.createElement(s.Fragment,null,s.createElement(d.ModalContent,null,s.createElement(g.default,{type:"body-medium",color:"content-color-primary"},"Make sure you copy and save this as an environment variable in your CI/CD pipeline to be used as $POSTMAN_API_KEY in the command."),s.createElement(f.default,{"data-testid":"generated-api-key",type:"text",value:i})),s.createElement(j,null,s.createElement(h.default,{"data-testid":"copy-to-clipboard-btn",type:"primary",onClick:this.handleCopyApiKey,text:a?"Copied!":"Copy to Clipboard"}))))))}})||i;x.propTypes={recordEvent:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/PostmanCLICommandBox.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),m=n("./runtime-repl/runner/workbench/CollectionRunCreate/AutomateRun/AutomateRun.js"),g=n("./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/CloneSteps.js"),h=n("./integrations/ci-cd/components/ConfigureNewmanbox.js"),f=n("./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/GenerateAPIKey.js"),I=n("./js/stores/StoreManager.js"),b=n("./api-dev/stores/APIListStore.js"),v=n("./js/utils/ClipboardHelper.js"),y=n("./integrations/ci-cd/components/configurePostmanCLI/constants/constants.js"),S=n("./node_modules/lodash/lodash.js");const E=l.default.div`
  margin-bottom: var(--spacing-xxl);
`,C=(0,l.default)(c.default)`
  .configure-newman-box {
    border-radius: var(--border-radius-default);

    .text-editor {
      overflow: scroll;
      min-height: fit-content;
    }

    .monaco-editor {
      min-height: 324px;

      .line-numbers {
        color: var(--content-color-tertiary);
      }
    }
  }
`;let j=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.automateRunRef=null,this.state={isCLICommandCopied:!1},this.copyCommandTimerRef=null,this.collectionRunnerListLength=0,this.apiListStore=(0,I.resolveStoreInstance)(b.default),this.handleCopyPostmanCLICommand=this.handleCopyPostmanCLICommand.bind(this),this.constructPostmanCLICommand=this.constructPostmanCLICommand.bind(this),this.checkCollectionSanity=this.checkCollectionSanity.bind(this),this.getModelCommandPath=this.getModelCommandPath.bind(this),this.getCollectionRunnerList=this.getCollectionRunnerList.bind(this),this.sanitizeCollectionRunnerList=this.sanitizeCollectionRunnerList.bind(this),this.sanitizeApiRunnerContent=this.sanitizeApiRunnerContent.bind(this)}checkCollectionSanity(e){e.forEach((e=>{e.collection.value||pm.logger.error("PostmanCLICommandBox~checkCollectionSanity - Invalid collection item found",new Error("Invalid collection"))}))}sanitizeApiRunnerContent(e){const{configCommandContent:t}=e,{apiId:n,cliEnvironment:i,integrationId:s}=this.props,{isAPIGitLinked:o,isRunApiLintSelected:r}=this.props,a=S.get(t,"pipeline.postmanCLI.api");if(!n||!a||!r)return"";let l=S.get(a,"runner",""),c=S.get(a,"runner_prefix",""),d=S.get(a,"runner_suffix","");return l=c+l,i!==y.CLI_ENV_LOCAL?s?l=l.replace("%iid%",`--integration-id ${s}`):(l=l.replace("%iid%",""),l=l.trimEnd()):o?(l=l.replace("%aid%",""),l=l.trimEnd()):l=l.replace("%aid%",n),l+d}sanitizeCollectionRunnerList(e,t){let n="";const{cliEnvironment:i,integrationId:s}=this.props,{configCommandContent:o,integrationIdentifierTemplate:r}=t,a=S.get(o,"pipeline.postmanCLI.collection_runner_prefix",""),l=S.get(o,"pipeline.postmanCLI.collection_runner_suffix","");return e.forEach((e=>{if(-1===e.indexOf("%cid")&&-1===e.indexOf("%path")){if(-1!==(e=a+e).indexOf("%eid")?n+=e.split("%mid ")[0]:n+=S.replace(e,"%mid ",""),s&&i!==y.CLI_ENV_LOCAL){const e=S.replace(r,"%iid",s);n+=e}n+=l}})),n}getModelCommandPath(e){var t;const{apiId:n,version:i,cliEnvironment:s}=this.props;if(!n)return null;const o=this.apiListStore.find(n),r=i?null==o?void 0:o.childEntities.find(i):S.head(null==o||null===(t=o.childEntities)||void 0===t?void 0:t.values),a=S.get(r,"apiRepositoryStore.entityHandlers.collections"),l=S.get(a,"collectionFileIdAgainstPath"),c=S.get(r,"apiRepositoryStore.apiVersionRepositoryInterface"),d=null==l?void 0:l.get(e);return S.isEmpty(d)?null:s===y.CLI_ENV_LOCAL&&S.get(c,"localGitConfigured")?S.get(c,["collections",d,"absolutePath"]):S.get(c,"remoteGitConfigured")&&`${S.get(c,["RemoteGit","collectionDirectoryPath"])}/${d}`}getCollectionRunnerList(e,t){const n=[],{collectionRunnerPathTemplate:i,collectionRunnerTemplate:s}=t;return e.forEach((e=>{const t=e.collection.value,o=this.getModelCommandPath(t),r=!S.isEmpty(o)&&"string"==typeof o,a=r?i:s;let l=a;-1===l.indexOf(r?"%path":"%cid")&&(l=a.split("%mid ")[0]+"%mid "+l.split("%mid ")[1]),l=r?S.replace(l,"%path",o):S.replace(l,"%cid",e.collection.value),e.environment.value&&(l=S.replace(l,"%eid",e.environment.value)),n.push(l)})),n}constructPostmanCLICommand(e,t){if(S.isEmpty(t))return"";const{configCommandContent:n,selectedOS:i}=t;this.checkCollectionSanity(e);const s=S.get(n,"pipeline.postmanCLI.build_setup",""),o=S.replace(s,"%os",i.value),r=S.get(n,"pipeline.postmanCLI.post_build",""),a=this.getCollectionRunnerList(e,t);this.collectionRunnerListLength=a.length;return o+this.sanitizeCollectionRunnerList(a,t)+this.sanitizeApiRunnerContent(t)+r}getSourceInfoForLocalEnv(e,t){return{category:"postman-cli-api-builder",...e?{entityType:"api",entityId:e}:{},rule:t,value:this.collectionRunnerListLength}}handleCopyPostmanCLICommand(){const{cliEnvironment:e,recordEvent:t}=this.props,{selectedItems:n,commandTemplatePayload:i}=this.props;if(e===y.CLI_ENV_LOCAL)this.automateRunRef&&this.automateRunRef.handleCopyNemanCommand();else{const e=this.constructPostmanCLICommand(n,i);v.default.copy(e),t("copy","postman_cli_config_copied",{category:"ci_integrations",value:1}),t("copy_postman-cli-command","copy-command-cta",{value:this.collectionRunnerListLength})}this.setState({isCLICommandCopied:!0},(()=>{this.copyCommandTimerRef=setTimeout((()=>this.setState({isCLICommandCopied:!1})),2e3)}))}render(){const{isCLICommandCopied:e}=this.state,{apiId:t,cliEnvironment:n,selectedItems:i,version:o,isLoading:r}=this.props,{commandTemplatePayload:a,isRunApiLintSelected:l,recordEvent:c}=this.props,I=n===y.CLI_ENV_LOCAL,b=i.length||l,v=this.constructPostmanCLICommand(i,a);return s.createElement(s.Fragment,null,s.createElement(p.default,{renderIfTruthy:I&&b},s.createElement(d.default,{type:"h4",text:"Postman CLI command preview","data-testid":"command-box-heading"}),s.createElement(g.default,{apiId:t,version:o}),s.createElement(m.default,{command:v,sourceInfo:this.getSourceInfoForLocalEnv(t,n),ref:e=>{this.automateRunRef=e},hideDescription:!0,hideCICDConfig:!0,hideViewRunsLink:!0,hideHeader:!0})),s.createElement(p.default,{renderIfTruthy:!I&&b},s.createElement(C,{direction:"column",gap:"spacing-l"},s.createElement(d.default,{type:"h4",text:"Postman CLI command preview","data-testid":"command-box-heading"}),s.createElement(h.default,{template:v,onCopy:()=>{c("copy_postman-cli-command","text_area_button",{value:this.collectionRunnerContent,isGovernanceEnabled:l})},isLoading:r}),s.createElement(f.default,{recordEvent:c}))),s.createElement(E,null,s.createElement(u.default,{type:"primary",onClick:this.handleCopyPostmanCLICommand,isDisabled:!b||r,text:e?"Copied!":"Copy Postman CLI Command",minWidth:"195px"})))}})||i;j.propTypes={apiId:r().string,version:r().string,integrationId:r().string,cliEnvironment:r().string,selectedItems:r().array.isRequired,commandTemplatePayload:r().object.isRequired,isRunApiLintSelected:r().bool,isAPIGitLinked:r().bool,recordEvent:r().func.isRequired,isLoading:r().bool.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/PostmanCLICommandBoxContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/CommandTemplate.js"),d=n("./integrations/ci-cd/components/configurePostmanCLI/components/postmanCLICommandBox/PostmanCLICommandBox.js");let u=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={commandTemplatePayload:{},isLoading:!1},this.handleCommandTemplateChange=this.handleCommandTemplateChange.bind(this),this.setIsLoading=this.setIsLoading.bind(this)}setIsLoading(e){this.setState({isLoading:e})}handleCommandTemplateChange(e){this.setState({commandTemplatePayload:e})}render(){const{commandTemplatePayload:e,isLoading:t}=this.state,{cliEnvironment:n,apiId:i,selectedItems:o,isAPIGitLinked:r}=this.props,{integrationId:a,isRunApiLintSelected:u,version:p,recordEvent:m}=this.props;return s.createElement(s.Fragment,null,s.createElement(c.default,{cliEnvironment:n,handleCommandTemplateChange:this.handleCommandTemplateChange,isLoading:t,setIsLoading:this.setIsLoading}),s.createElement(l.default,{direction:"column",gap:"spacing-xl",padding:{paddingTop:"spacing-xxl"}},s.createElement(l.default,{direction:"column",gap:"spacing-l"},s.createElement(d.default,{apiId:i,version:p,cliEnvironment:n,selectedItems:o,commandTemplatePayload:e,isRunApiLintSelected:u,integrationId:a,isAPIGitLinked:r,recordEvent:m,isLoading:t}))))}})||i;u.propTypes={apiId:r().string,version:r().string,isAPIGitLinked:r().bool,cliEnvironment:r().string,selectedItems:r().array.isRequired,isRunApiLintSelected:r().bool,integrationId:r().string,recordEvent:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/components/workspaceCollection/WorkspaceCollectionAndEnvironmentSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i,s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),r=n.n(o),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/uuid/v4.js"),d=n.n(c),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),h=n("./integrations/ci-cd/components/configurePostmanCLI/components/RenderView.js"),f=n("./integrations/ci-cd/components/configurePostmanCLI/components/EnvironmentDropdown.js"),I=n("./integrations/ci-cd/components/configurePostmanCLI/base/WorkspaceCollections.js"),b=n("./integrations/ci-cd/components/configurePostmanCLI/base/WorkspaceEnvironments.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-remove-stroke.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),S=n("./node_modules/lodash/lodash.js");const E="collection",C="environment",j=l.default.div`
  box-sizing: border-box;
  flex: 1;
`,_=l.default.div`
  box-sizing: border-box;
  flex: 1;
`,P=(0,l.default)(u.default)`
  margin-top:var(--spacing-l);
`,A=l.default.div`
  align-self: flex-end;
  box-sizing: border-box;
  display: flex;
  height:32px;
  margin-left: var(--spacing-m);
  width:32px;
`;let w=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isCollectionsLoading:!0,isEnvironmentsLoading:!0,collections:[],environments:[]},this.updateCollectionsList=this.updateCollectionsList.bind(this),this.updateEnvironmentsList=this.updateEnvironmentsList.bind(this),this.handleItemSelection=this.handleItemSelection.bind(this),this.handleItemDelete=this.handleItemDelete.bind(this),this.isAddBtnDisabled=this.isAddBtnDisabled.bind(this)}updateCollectionsList({isCollectionsLoading:e,collections:t}){e||this.setState({isCollectionsLoading:e,collections:t})}updateEnvironmentsList({isEnvironmentsLoading:e,environments:t}){e||this.setState({isEnvironmentsLoading:e,environments:t})}handleItemSelection(e,t,n){const{handleSelectedItemsChange:i,selectedItems:s}=this.props;i({selectedItems:s.map(((i,s)=>{const o=s===t;return o&&n===E?i.collection=null!=e?e:{}:o&&n===C&&(i.environment=null!=e?e:{}),i}))})}handleItemDelete(e){const{handleSelectedItemsChange:t,selectedItems:n}=this.props;t({selectedItems:n.filter(((t,n)=>n!==e))})}isAddBtnDisabled(){const{selectedItems:e}=this.props;if(S.isEmpty(e))return!1;const t=S.last(e);return S.isEmpty(t.collection)}render(){const{collections:e,environments:t}=this.state,{selectedItems:n,handleAddAnotherSelectionItem:i}=this.props;return s.createElement(s.Fragment,null,s.createElement(p.default,{type:"h4",hasBottomSpacing:!0,text:"Choose the collections you want to run"}),s.createElement(m.default,{gap:"spacing-l",direction:"column",padding:{paddingTop:"spacing-l"}},n.map(((i,o)=>{const{collection:r,environment:a}=i;return s.createElement(m.default,{gap:"spacing-xxl",key:`${r.value}-${o}`,alignItems:"center"},s.createElement(j,{"data-testid":"collection-dropdown-container-"+o},s.createElement(g.default,{label:"Collection",isClearable:!1,isSearchable:!1,options:e,onChange:e=>{this.handleItemSelection(e,o,E)},value:r,emptyStateMessage:"No collections found"})),s.createElement(_,{style:{margin:"0px"},"data-testid":"environment-dropdown-container-"+o},s.createElement(f.default,{id:`workspace-${o}-${d()()}`,label:"Environment",options:t,value:a,handleEnvironmentChange:e=>{this.handleItemSelection(e,o,C)}})),s.createElement(A,null,s.createElement(h.default,{renderIfTruthy:n.length>1},s.createElement(u.default,{"data-testid":"delete-btn-"+o,onClick:()=>this.handleItemDelete(o),type:"tertiary",icon:s.createElement(v.default,null),tooltip:"Remove"}))))}))),s.createElement(P,{isDisabled:this.isAddBtnDisabled(),icon:s.createElement(y.default,null),onClick:()=>i(),type:"tertiary",text:"Add Another Collection"}),s.createElement(I.default,{handleCollectionChange:this.updateCollectionsList}),s.createElement(b.default,{handleEnvironmentsChange:this.updateEnvironmentsList}))}})||i;w.propTypes={selectedItems:r().array.isRequired,handleAddAnotherSelectionItem:r().func.isRequired,handleSelectedItemsChange:r().func.isRequired}},"./integrations/ci-cd/components/configurePostmanCLI/constants/constants.js":function(e,t,n){n.r(t),n.d(t,{API_KEY:function(){return d},CLI_ENV_LOCAL:function(){return i},LINUX:function(){return s},MAC:function(){return o},OS_LIST:function(){return a},OS_URL_PATH:function(){return c},PIPELINE_SERVICE_LIST_URL:function(){return u},SELECTED_OS:function(){return l},WINDOWS:function(){return r}});const i="local",s={label:"Linux",value:"linux"},o={label:"Mac OS (Intel)",value:"osx_64"},r={label:"Windows",value:"windows"},a=[s,o,r],l=s,c={[s.value]:"linux",[o.value]:"osx",[r.value]:"windows"},d={GENERATE_API_KEY_VIEW:"GENERATE_API_KEY",API_KEY_GENERATED:"API_KEY_GENERATED",GENERATE_API_KEY_HEADER:"Name your API key",API_KEY_GENERATED_HEADER:"Key generated!",API_KEY_LIMIT_REACHED:"API Key limit reached",ERROR:"error",DEFAULT_ERROR_MESSAGE:"Unable to create API key",ACCOUNT_SETTINGS:"settings/me/api-keys",SHOW_COPY_SUCCESS_DURATION:2e3},u="/postman-cli-ci-cd-integration/services-list.json"},"./integrations/ci-cd/components/configurePostmanCLI/utils/postmanAutomationCLIUtils.js":function(e,t,n){n.r(t),n.d(t,{getPostmanCLIDownloadLink:function(){return s},getSortedList:function(){return o}});var i=n("./js/utils/platform-utils.js");const s=()=>{const e=(0,i.getArch)();return(0,i.isMacApp)()&&"arm64"===e?"https://go.pstmn.io/install-cli-osx-arm64":(0,i.isMacApp)()?"https://go.pstmn.io/install-cli-osx64":(0,i.isWindowsApp)()?"https://go.pstmn.io/install-cli-win64":(0,i.isLinuxApp)()?"https://go.pstmn.io/install-cli-linux":"https://go.pstmn.io/install-cli"},o=e=>(Array.isArray(e)&&e.sort(((e,t)=>{var n,i;return(null===(n=e.label)||void 0===n?void 0:n.toLowerCase())>(null===(i=t.label)||void 0===i?void 0:i.toLowerCase())?1:-1})),e)},"./integrations/ci-cd/components/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i=n("../../node_modules/react/index.js"),s=n("./integrations/ci-cd/components/TravisCI.js"),o=n("./integrations/ci-cd/components/CircleCI.js"),r=n("./integrations/ci-cd/components/Jenkins.js"),a=n("./integrations/ci-cd/components/DevOps.tsx"),l=n("./integrations/ci-cd/components/BitbucketCI.js"),c=n("./integrations/ci-cd/components/GitLabCI.js"),d=n("./integrations/ci-cd/components/GithubCI.js"),u=n("./integrations/components/error-states/IntegrationNotSupported.js"),p=n("./integrations/ci-cd/constants.ts");const m={travisci:s.default,circleci:o.default,jenkins:r.default,bitbucket:l.default,gitlab:c.default,azure:a.default,github:d.default};function g(e){const{service:t,apiId:n,apiVersionId:s}=e,o=m[t];return(0,i.useEffect)((()=>{o||e.handleHeadingView(!1)}),[]),o?i.createElement(o,e):i.createElement(u.default,{apiId:n,apiVersionId:s,tab:p.TEST})}},"./integrations/ci-cd/configurePostmanCLIInterfaces.js":function(e,t,n){n.r(t),n.d(t,{openConfigurePostmanCLIInTab:function(){return a}});var i=n("./api-dev/interfaces/APIInterface.js"),s=n("./js/services/NavigationService.js"),o=n("./integrations/navigation/constants.js"),r=n("./node_modules/lodash/lodash.js");function a({isMigrated:e,apiId:t,versionId:n,queryParams:a}){e?s.default.transitionTo(o.OPEN_CONFIGURE_POSTMAN_CLI_IN_API_CONTEXT,{apiId:t},null!=a?a:{}):(0,i.migrateAPI)(t,n).catch(r.noop)}},"./integrations/ci-cd/containers/CIBuildsContainer.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),c=n("./js/components/base/LoadingIndicator.js"),d=n("./integrations/ci-cd/components/CIDetailedBuilds.js"),u=n("./integrations/ci-cd/components/Jenkins/DetailedBuilds.js"),p=n("./integrations/ci-cd/components/Jenkins/MultiBranchDetailedBuilds.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),I=n("./api-dev/constants/APISubViews.js"),b=n("./integrations/ci-cd/components/Jenkins/constants.js"),v=n("./integrations/ci-cd/constants.ts"),y=n("./integrations/components/error-states/IntegrationNotSupported.js"),S=n("./node_modules/lodash/lodash.js");let E=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{loadingIntegration:e,canUserOperateAPI:t,integration:n,errorIntegration:i,apiId:o,version:a,branch:l}=this.props.controller,f=S.get(i,"error.name")||S.get(i,"name"),{addToast:E}=this.props,{builds:C,errorBuilds:j,branches:_,loadingBranches:P,errorBranches:A,loadingBuildsPage:w,errorBuildsPage:T,isIntegrationSupported:k}=this.store,L=C[n.id];if(e||P||w)return s.createElement("div",{className:"integrations-page-container"},s.createElement(c.default,null));if(!t)return s.createElement(m.default,{title:v.NOT_AN_API_EDITOR.TITLE,description:v.NOT_AN_API_EDITOR.DESCRIPTION},s.createElement(g.default,null));if(f||!S.isEmpty(i))return"instanceNotFoundError"==f?s.createElement(m.default,{title:v.ERROR_INTEGRATION_NOT_FOUND.TITLE,description:v.ERROR_INTEGRATION_NOT_FOUND.DESCRIPTION},s.createElement(g.default,null)):s.createElement(m.default,{title:v.ERROR_UNABLE_TO_GET_INTEGRATION_DATA.TITLE,description:v.ERROR_UNABLE_TO_GET_INTEGRATION_DATA.DESCRIPTION,primaryAction:s.createElement(h.default,{type:"primary",text:"Try Again",onClick:()=>{this.props.controller.fetchIntegrationData()}})},s.createElement(g.default,null));if(!k)return s.createElement(y.default,{apiId:o,apiVersionId:a,tab:I.TEST});(j||A||T)&&(pm.logger.error("CIBuildsContainer ~ Error occurred while fetching builds",j),E({status:"error",description:"Something went wrong while fetching builds."}));const D=(e=>{if(e.rule===b.RULE)return"WorkflowMultiBranchProject"===S.get(e,"variables.project_type")?p.default:u.default;return d.default})(n),R={controller:this.props.controller,integration:n,builds:(0,r.toJS)(L),branches:(0,r.toJS)(_)};return s.createElement("div",{className:"ci-cd-builds-page-container"},s.createElement(D,R))}})||i;t.default=(0,f.default)(E)},"./integrations/ci-cd/containers/EditIntegration.js":function(e,t,n){n.r(t),n.d(t,{components:function(){return P},default:function(){return A}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./js/stores/SyncStatusStore.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("./integrations/ci-cd/constants.ts"),d=n("./js/components/base/LoadingIndicator.js"),u=n("./integrations/ci-cd/components/Edit/CircleCI.js"),p=n("./integrations/ci-cd/components/Edit/TravisCI.js"),m=n("./integrations/ci-cd/components/Edit/Jenkins.js"),g=n("./integrations/ci-cd/components/Edit/DevOps.tsx"),h=n("./integrations/ci-cd/components/Edit/BitbucketCI.js"),f=n("./integrations/ci-cd/components/Edit/GitLabCI.js"),I=n("./integrations/ci-cd/components/Edit/GithubCI.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),y=n("./appsdk/workbench/TabService.js"),S=n("./js/services/NavigationService.js"),E=n("./integrations/navigation/constants.js"),C=n("./api-dev/constants/APISubViews.js"),j=n("./integrations/components/error-states/IntegrationNotSupported.js"),_=n("./node_modules/lodash/lodash.js");const P={[c.CIRCLE_CI_CLASS_ID]:u.default,[c.TRAVIS_CLASS_ID]:p.default,[c.JENKINS_CLASS_ID]:m.default,[c.BITBUCKET_PIPELINES_CLASS_ID]:h.default,[c.GITLAB_CI_CLASS_ID]:f.default,[c.GITLAB_SELF_HOSTED_CLASS_ID]:f.default,[c.DEVOPS_CI_CLASS_ID]:g.default,[c.GITHUB_CI_CLASS_ID]:I.default};let A=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.handleTabSwitch=this.handleTabSwitch.bind(this)}handleTabSwitch(){const{apiId:e,integrationId:t,version:n}=this.props.controller;y.default.closeByRoute(E.V10_API_EDIT_CI_INTEGRATION_URL,{apiId:e,integrationId:t}),S.default.transitionTo("build.apiVersion",{apiId:e,versionId:n},{tab:C.TEST})}render(){let e=this.props.controller.integrationData,t=!(0,r.resolveStoreInstance)(a.default).isSocketConnected;if(this.props.controller.loadingIntegrationData)return s.createElement("div",{className:"integrations-page-container"},s.createElement(d.default,null));if(!t&&this.props.controller.errorInIntegrationData){let e={...this.props.controller.integrationDataErrorDetails};if(pm.logger.error("Error occurred while loading page",this.props.controller.integrationDataErrorDetails),!e||"instanceNotFoundError"!=_.get(e,"error.name"))return pm.toasts.error("Something went wrong while loading page."),s.createElement("div",{className:"integrations-page-container"},s.createElement(v.default,{errorDetails:_.get(this.props,"controller.integrationDataErrorDetails","")}));pm.toasts.error("The integration you are looking for does not exist!"),this.handleTabSwitch()}if(!_.isEmpty(e)&&e.rule){let t=P[e.rule];if(!t){const e=C.TEST,{apiId:t,version:n}=this.props.controller;return s.createElement(j.default,{apiId:t,apiVersionId:n,tab:e})}return s.createElement("div",{className:"integrations-page-container"},s.createElement("div",{className:"integration-edit"},s.createElement("div",{className:"integration-edit-card"},s.createElement(l.default,{type:"h1",text:"Edit integration",className:"integration-edit-card__head"}),s.createElement(t,this.props))))}return s.createElement("div",{className:"integrations-page-container"},s.createElement(b.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."}))}})||i},"./integrations/ci-cd/containers/IntegrationServiceSetup.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),l=n("./integrations/ci-cd/components/index.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./js/components/base/LoadingIndicator.js"),m=n("./integrations/ci-cd/constants.ts"),g=n("./integrations/ci-cd/services/index.ts"),h=n("./node_modules/lodash/lodash.js");let f=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={loadingRuleDetails:!0,loadingAPILinkInfo:!0,error:!1,errorDetails:"",description:"",authType:"",showHeading:!0,apiRepositoryLinkDetails:{}},this.store=(0,r.resolveStoreInstance)(a.default),this.populateRuleDetails=this.populateRuleDetails.bind(this),this.populateAuthenticationDetails=this.populateAuthenticationDetails.bind(this),this.toggleHeading=this.toggleHeading.bind(this)}componentDidMount(){this.populateRuleDetails(),this.populateAuthenticationDetails()}populateAuthenticationDetails(){const{selectedAPIVersion:e,selectedRule:t}=this.store,n=h.get(g.default,[t,"fetchAPIRepoLinkDetails"]);h.isFunction(n)?this.setState({loadingAPILinkInfo:!0},(()=>{n(e).then((e=>{this.setState({loadingAPILinkInfo:!1,apiRepositoryLinkDetails:h.isEmpty(e)?{}:e})})).catch((e=>{pm.logger.error("IntegrationServiceSetup ~ populateAuthenticationDetails : Error occurred while fetching api repository link",e),this.setState({loadingAPILinkInfo:!1})}))})):this.setState({loadingAPILinkInfo:!1})}populateRuleDetails(){const{selectedService:e,selectedRule:t}=this.store;this.setState({loadingRuleDetails:!0},(()=>{u.default.getAvailableIntegrations({service:e}).then((e=>{let n=h.get(e,["body","integrations",t],{});200!==e.status||h.isEmpty(n)?this.setState({description:"",authType:"",loadingRuleDetails:!1,error:!0,errorDetails:{status:e.status}}):this.setState({description:n.description,authType:h.get(n,"auth_type",""),loadingRuleDetails:!1})})).catch((e=>{pm.logger.error("Error in fetching service specific rule details for create forms",e),this.setState({description:"",authType:"",loadingRuleDetails:!1,error:!0,errorDetails:{status:e.status}})}))}))}toggleHeading(e){this.setState({showHeading:e})}render(){const{selectedService:e,selectedRule:t,selectedAPI:n,selectedAPIVersion:i}=this.store,o=`Connect to ${m.RULE_TO_SERVICE[t]}`;return this.state.loadingRuleDetails||this.state.loadingAPILinkInfo?s.createElement("div",{className:"integrations-page-container"},s.createElement(p.default,null)):s.createElement("div",{className:"integrations-page-container"},s.createElement("div",{className:"integrations-add"},s.createElement("div",{className:"integrations-add-card"},this.state.showHeading&&s.createElement("div",null,s.createElement(c.default,{type:"h1",text:o}),s.createElement(d.default,{type:"lead",className:"integrations-add-card__description"},"github_ci"===t?"View your builds and test status from "+m.RULE_TO_SERVICE[t]+" and more.":"View your builds and test status from "+m.RULE_TO_SERVICE[t]+", run builds and more.")),s.createElement(l.default,{rule:t,service:e,apiId:n,apiVersionId:i,defaultIntegrationName:h.get(this.props,["controller","defaultIntegrationName"]),additionalContext:this.props.controller.additionalContext,handleHeadingView:this.toggleHeading,apiRepositoryLink:this.state.apiRepositoryLinkDetails,originalTabId:h.get(this.props,["controller","originalTabId"])}))))}})||i},"./integrations/ci-cd/containers/PostmanCLIConfigurationContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./api-dev/stores/APIListStore.js"),l=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),u=n("./integrations/ci-cd/components/configurePostmanCLI/APIPostmanCLIConfigurationContainer.js"),p=n("./integrations/ci-cd/components/configurePostmanCLI/WorkspacePostmanCLIConfigurationContainer.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=n("./js/services/NavigationService.js"),h=n("./js/services/EditorService.js"),f=n("./api-dev/constants/APISubViews.js"),I=n("./node_modules/lodash/lodash.js");let b=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(l.default),this.state={loading:!1,error:!1,errorDetails:""},this.fetchIntegrationDetails=this.fetchIntegrationDetails.bind(this),this.handleTabSwitch=this.handleTabSwitch.bind(this)}componentDidMount(){const{integrationId:e}=this.props.controller;e&&this.fetchIntegrationDetails()}handleTabSwitch(){var e,t;const{apiId:n,version:i}=this.props.controller,s=(0,r.resolveStoreInstance)(a.default).find(n),o=!i&&(null===(e=I.head(null==s||null===(t=s.childEntities)||void 0===t?void 0:t.values))||void 0===e?void 0:e.id);h.default.closeCurrent().then((()=>{g.default.transitionTo("build.apiVersion",{apiId:n,versionId:i||o},{view:f.TEST})}))}fetchIntegrationDetails(){this.setState({loading:!0},(()=>{m.default.getIntegrationData(this.props.controller.integrationId).then((e=>{200===e.status?this.setState({loading:!1}):this.setState({error:!0,loading:!1,errorDetails:e.body})})).catch((e=>{this.setState({loading:!1,error:!0,errorDetails:e})}))}))}render(){const{apiId:e,version:t,rule:n,integrationId:i}=this.props.controller;let o,r,a=!1;if(e||n||i||(a=!0,o=this.props.controller.collection,r=this.props.controller.environment),this.state.loading)return s.createElement("div",{className:"integrations-page-container"},s.createElement(c.default,null));if(this.state.error){let e={...this.state.errorDetails};return pm.logger.error("Error occurred while loading page",this.state.errorDetails),e&&"instanceNotFoundError"==I.get(e,"error.name")?(pm.toasts.error("The integration you are looking for does not exist!"),this.handleTabSwitch(),null):s.createElement(d.default,null)}return a||e?s.createElement("div",{className:"ci-cd-configure-newman-container"},a?s.createElement(p.default,{collection:o,environment:r}):s.createElement(u.default,{apiId:e,version:t,cliEnvironment:n,integrationId:i})):s.createElement(d.default,null)}})||i},"./integrations/ci-cd/controllers/BuildsController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i,s,o,r,a,l,c,d,u=n("./appsdk/workbench/BaseWorkbenchController.js"),p=n("./js/stores/SyncStatusStore.js"),m=n("./js/stores/StoreManager.js"),g=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),f=n("../../node_modules/mobx/lib/mobx.module.js"),I=n("./integrations/ci-cd/constants.ts"),b=n("./integrations/utils/CommonHelperMethods.ts"),v=n("./node_modules/lodash/lodash.js");function y(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function S(e,t,n,i,s){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let E=(i=class extends u.default{constructor(...e){super(...e),y(this,"integration",s,this),y(this,"loadingIntegration",o,this),y(this,"errorIntegration",r,this),y(this,"version",a,this),y(this,"branch",l,this),y(this,"buildId",c,this),y(this,"canUserOperateAPI",d,this),this.store=(0,m.resolveStoreInstance)(g.default),this._reloadBuildsData=()=>{this.store.initialiseBuildsPage(this.integrationId,this.rule)}}get branchAndBuildIdIdentifier(){return`${this.branch}-${this.buildId}`}setVersionId(e){this.version=e}updateIntegrationData(e){this.integration=e}setBranch(e){this.branch=e}setBuildId(e){this.buildId=e}updateUserAPIOperation(e){this.canUserOperateAPI=e}updateIntegrationStates(e,t){this.loadingIntegration=e,this.errorIntegration=t}async didCreate({routeParams:e,queryParams:t,additionalContext:n}){const i=v.get(e,"versionId",null)||v.get(t,"version",null);this.setVersionId(i),this.integrationId=v.get(e,"integrationId"),this.apiId=v.get(e,"apiId"),this.additionalContext=n,this.setBuildId(v.get(t,"buildId")),this.setBranch(v.get(t,"branch")),pm.windowEvents.addListener(`api-oauth-integration-re-authenticated-${this.apiId}`,this._reloadBuildsData),await(0,m.resolveStoreInstance)(p.default).onSyncAvailable({timeout:8e3}).then((async()=>{let e=await(0,b.fetchApiPermissions)(this.apiId,["CAN_OPERATE_API_WRITE_INTEGRATION"]);if(this.updateUserAPIOperation(e),e)try{await this.fetchIntegrationData()}catch(e){this.updateIntegrationStates(!1,e)}else this.updateIntegrationStates(!1,!1)})).catch((e=>{this.updateIntegrationStates(!1,!1)}))}async fetchIntegrationData(){const e=this.integrationId;await(0,m.resolveStoreInstance)(p.default).onSyncAvailable({timeout:8e3}).then((async()=>{this.store.updateStatusBuildsPage(null,!0),this.updateIntegrationData({}),this.updateIntegrationStates(!0,!1);try{const t=await h.default.getIntegrationData(e),n=v.get(t,"body.data"),i=v.get(n,"rule"),s=await h.default.getIntegrationRuleDetails(i),o=v.get(s,"body.service.id");if(this.store.initialiseBuildsPage(e,i),this.rule=i,this.service=o,200!==t.status||v.isEmpty(n))this.updateIntegrationData({}),this.updateIntegrationStates(!1,!0),this.store.updateStatusBuildsPage(!0,null);else{const e=v.get(n,"executor");this.setVersionId(e),this.updateIntegrationData(n),this.updateIntegrationStates(!1,!1)}}catch(e){pm.logger.error("BuildsController ~ Unable to get integration data ",e,I.errorContext),this.updateIntegrationData({}),this.updateIntegrationStates(!1,e),this.store.updateStatusBuildsPage(!0,null)}})).catch((e=>{this.updateIntegrationData({}),this.updateIntegrationStates(!1,e),this.store.updateStatusBuildsPage(!0,null)}))}didQueryParamsChange(e){v.has(e,"refresh")&&"true"===v.get(e,"refresh")&&this.fetchIntegrationData(),v.has(e,"branch")&&this.setBranch(v.get(e,"branch"))}beforeDestroy(){this.store=null,pm.windowEvents.removeListener(`api-oauth-integration-re-authenticated-${this.apiId}`,this._reloadBuildsData)}},s=S(i.prototype,"integration",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=S(i.prototype,"loadingIntegration",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r=S(i.prototype,"errorIntegration",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=S(i.prototype,"version",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=S(i.prototype,"branch",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=S(i.prototype,"buildId",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=S(i.prototype,"canUserOperateAPI",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S(i.prototype,"branchAndBuildIdIdentifier",[f.computed],Object.getOwnPropertyDescriptor(i.prototype,"branchAndBuildIdIdentifier"),i.prototype),S(i.prototype,"setVersionId",[f.action],Object.getOwnPropertyDescriptor(i.prototype,"setVersionId"),i.prototype),S(i.prototype,"updateIntegrationData",[f.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationData"),i.prototype),S(i.prototype,"setBranch",[f.action],Object.getOwnPropertyDescriptor(i.prototype,"setBranch"),i.prototype),S(i.prototype,"setBuildId",[f.action],Object.getOwnPropertyDescriptor(i.prototype,"setBuildId"),i.prototype),S(i.prototype,"updateUserAPIOperation",[f.action],Object.getOwnPropertyDescriptor(i.prototype,"updateUserAPIOperation"),i.prototype),S(i.prototype,"updateIntegrationStates",[f.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationStates"),i.prototype),i)},"./integrations/ci-cd/controllers/ConfigurePostmanCLIController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n("./appsdk/workbench/BaseWorkbenchController.js"),s=n("./js/stores/StoreManager.js"),o=n("./integrations/ci-cd/stores/APIIntegrationsStore.js");class r extends i.default{didCreate({routeParams:e,queryParams:t,additionalContext:n}){this.store=(0,s.resolveStoreInstance)(o.default),e&&e.apiId&&(this.apiId=e.apiId),e&&e.versionId&&(this.version=e.versionId),t&&t.integration&&(this.integrationId=t.integration),t&&t.rule&&(this.rule=t.rule),t&&t.service&&(this.service=t.service),this.routeBack=n&&n.routeBack,this.collection=n&&n.collection,this.environment=n&&n.environment}didQueryParamsChange(e){e&&e.integration&&(this.integrationId=e.integration),e&&e.service&&(this.service=e.service),e&&e.rule&&(this.rule=e.rule)}beforeDestroy(){this.store=null}}},"./integrations/ci-cd/controllers/EditIntegrationController.js":function(e,t,n){n.r(t);var i,s,o,r,a,l,c=n("./appsdk/workbench/BaseWorkbenchController.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./api-dev/stores/APISidebarStore.js"),p=n("./js/stores/StoreManager.js"),m=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),h=n("../../node_modules/mobx/lib/mobx.module.js"),f=n("./node_modules/lodash/lodash.js");function I(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function b(e,t,n,i,s){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let v=(i=class extends c.default{constructor(...e){super(...e),I(this,"integrationData",s,this),I(this,"loadingIntegrationData",o,this),I(this,"errorInIntegrationData",r,this),I(this,"integrationDataErrorDetails",a,this),I(this,"version",l,this),this.store=(0,p.resolveStoreInstance)(m.default)}setVersionId(e){this.version=e,this.store.setSelectedAPIVersion({value:this.version})}updateIntegrationDataStatus(e,t,n){this.loadingIntegrationData=e,this.errorInIntegrationData=t,this.integrationDataErrorDetails=n}updateIntegrationData(e){this.integrationData=e}didCreate({routeParams:e,queryParams:t,additionalContext:n}){const i=f.get(e,"versionId",null)||f.get(t,"version",null);this.setVersionId(i),this.integrationId=f.get(e,"integrationId"),this.apiId=f.get(e,"apiId"),this.routeBack=n,this.apiId&&this.store.setSelectedAPI({value:this.apiId}),(0,p.resolveStoreInstance)(u.default).focusItem(e.apiId),(0,p.resolveStoreInstance)(d.default).onSyncAvailable({timeout:8e3}).then((async()=>{this.updateIntegrationDataStatus(!0,!1,"");try{let e=await g.default.getIntegrationData(this.integrationId),t=f.get(e,"body.data");if(200!==e.status||f.isEmpty(t))this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,"");else{t.allowedActions=f.get(e,["body","meta","allowedActions"]);const n=await g.default.getIntegrationRuleDetails(t.rule),i=f.get(t,"executor");this.setVersionId(i),200===n.status?(t.serviceId=f.get(n,"body.service.id"),this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,"")):(this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,""))}}catch(e){this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e)}})).catch((()=>{this.updateIntegrationDataStatus(!1,!1,"")}))}beforeDestroy(){this.store=null}},s=b(i.prototype,"integrationData",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=b(i.prototype,"loadingIntegrationData",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r=b(i.prototype,"errorInIntegrationData",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=b(i.prototype,"integrationDataErrorDetails",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=b(i.prototype,"version",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b(i.prototype,"setVersionId",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setVersionId"),i.prototype),b(i.prototype,"updateIntegrationDataStatus",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationDataStatus"),i.prototype),b(i.prototype,"updateIntegrationData",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationData"),i.prototype),i);t.default=v},"./integrations/ci-cd/controllers/IntegrationServiceSetupController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i,s,o=n("./appsdk/workbench/BaseWorkbenchController.js"),r=n("./api-dev/stores/APISidebarStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),c=n("../../node_modules/mobx/lib/mobx.module.js"),d=n("./integrations/utils/CommonHelperMethods.ts"),u=n("./node_modules/lodash/lodash.js");function p(e,t,n,i,s){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let m=(i=class extends o.default{constructor(...e){var t,n,i,o;super(...e),t=this,n="version",o=this,(i=s)&&Object.defineProperty(t,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.store=(0,a.resolveStoreInstance)(l.default)}setVersionId(e){this.version=e,this.store.setSelectedAPIVersion(e)}didCreate({routeParams:e,queryParams:t,additionalContext:n}){const i=u.get(t,"version",null),s=u.get(e,"apiId",null),o=u.get(n,"originalTabId",null);this.apiId=s,this.originalTabId=o,s&&this.store.setSelectedAPI(this.apiId),t&&t.service&&this.store.setSelectedService(t.service),t&&t.rule&&this.store.setSelectedRule(t.rule),i?this.setVersionId(i):(0,d.getAPIDetails)(this.apiId).then((e=>{const t=u.get(e,"version.id");this.setVersionId(t)})),this.defaultIntegrationName=u.get(t,"defaultIntegrationName"),(0,a.resolveStoreInstance)(r.default).focusItem(e.apiId)}didQueryParamsChange(e){e&&e.service&&this.store.setSelectedService(e.service),e&&e.rule&&this.store.setSelectedRule(e.rule)}beforeDestroy(){this.store=null}},s=p(i.prototype,"version",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p(i.prototype,"setVersionId",[c.action],Object.getOwnPropertyDescriptor(i.prototype,"setVersionId"),i.prototype),i)},"./integrations/ci-cd/customHooks/useAPIName.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n("../../node_modules/react/index.js"),s=n("./api-dev/interfaces/APIInterface.js"),o=n("./integrations/ci-cd/constants.ts");function r(e){const[t,n]=(0,i.useState)(o.API_SCHEMA_DEFAULT_NAME);return(0,i.useEffect)((()=>{(0,s.getAPI)(e).then((({name:e})=>{n(e||o.API_SCHEMA_DEFAULT_NAME)})).catch((t=>{pm.logger.error(`BuildsTable~getAPI- Error while fetching API name for ${e} from getAPI`,t),n(o.API_SCHEMA_DEFAULT_NAME)}))}),[e]),t}},"./integrations/ci-cd/helpers.js":function(e,t,n){n.r(t),n.d(t,{convertNewmanRunMetrics:function(){return v},getActiveBranchNameFromApiId:function(){return j},getBuildFilterStatus:function(){return f},getCollectionRunStatusSummary:function(){return b},getFilterInlineLabel:function(){return E},getFilteredBuilds:function(){return I},getIconForCIIntegration:function(){return C},getProjectName:function(){return y},getRowIdForBuildsTable:function(){return P},getSanitizedSelectedBranchName:function(){return _},getUniqueItemsFromBuilds:function(){return S}});var i=n("../../node_modules/react/index.js"),s=n("./integrations/ci-cd/constants.ts"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-bitbucket.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-travisci.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-gitlab.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-github.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-circleci.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-jenkins.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-devops.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),m=n("./js/stores/StoreManager.js"),g=n("./api-dev/stores/APIListStore.js"),h=n("./node_modules/lodash/lodash.js");function f(e){return h.get(s.BUILD_STATUS_TO_FILTER_STATUS_MAP,h.lowerCase(e),s.BUILD_FILTER_STATUS.DEFAULT)}function I(e,t,n){return h.filter(e,(e=>!(!h.isEmpty(t)&&!h.includes(t,e.branch))&&!(!h.isEmpty(n)&&!h.includes(n,e.filterStatus))))}function b(e){if(h.isEmpty(e))return{status:"neutral",text:"N/A"};let t=h.size(e),n=h(e).filter((e=>"critical"===h.get(e,"status.status"))).size();return 0===n?{status:"success",text:`${t}/${t} passed`}:{status:"critical",text:`${n}/${t} failed`}}function v(e){let t=h.get(e,"runOverview"),n=h.get(t,"totalDataReceivedInBytes",""),i=h.get(t,"averageResponseTimeInMiliseconds","")+" ms",s=h.get(t,"runDurationInMiliseconds","");n=n<=1024?"1 KB":h.round(n/1024)+" KB",s<1e3?s+=" ms":s=h.round(s/1e3)+" s";const o={name:h.get(t,"collectionName","Collection"),data:n,internalLink:h.get(t,"newmanRunUrl",""),responseTime:i,duration:s,metrics:[{name:"Iterations",status:{totalCount:h.get(t,"statistics.iterations.total",0),failedCount:h.get(t,"statistics.iterations.failed",0)}},{name:"Requests",status:{totalCount:h.get(t,"statistics.requests.total",0),failedCount:h.get(t,"statistics.requests.failed",0)}},{name:"Pre-request Scripts",status:{totalCount:h.get(t,"statistics.prerequestScripts.total",0),failedCount:h.get(t,"statistics.prerequestScripts.failed",0)}},{name:"Test Scripts",status:{totalCount:h.get(t,"statistics.testScripts.total",0),failedCount:h.get(t,"statistics.testScripts.failed",0)}},{name:"Assertions",status:{totalCount:h.get(t,"statistics.assertions.total",0),failedCount:h.get(t,"statistics.assertions.failed",0)}}]};return h.some(h.map(o.metrics,"status.failedCount"),(e=>0!==e))?o.status={status:"critical",text:"Failure"}:o.status={status:"success",text:"Success"},o}function y(e){switch(h.get(e,"rule")){case s.BITBUCKET_PIPELINES_CLASS_ID:case s.TRAVIS_CLASS_ID:return h.get(e,["variables","repository_name"]);case s.GITLAB_SELF_HOSTED_CLASS_ID:case s.GITLAB_CI_CLASS_ID:return h.get(e,["variables","project_name"]);case s.GITHUB_CI_CLASS_ID:return h.get(e,["variables","repository"]);case s.JENKINS_CLASS_ID:return h.get(e,["variables","project"]);case s.DEVOPS_CI_CLASS_ID:return h.get(e,["variables","repository_name"]);case s.CIRCLE_CI_CLASS_ID:const t=h.get(e,["variables","project_slug"]);return h.last(h.split(t,"/"))||""}}function S(e,t){return h(e).map((e=>{const n=h.get(e,t);return{label:n,value:n}})).uniqBy((e=>h.get(e,"value"))).value()}function E(e,t){const n=h.size(e);return 0===n?"":1===n?h.get(h.first(e),"value"):`${n} ${t}`}function C(e){switch(e){case s.BITBUCKET_PIPELINES_CLASS_ID:return i.createElement(o.default,null);case s.TRAVIS_CLASS_ID:return i.createElement(r.default,null);case s.GITLAB_SELF_HOSTED_CLASS_ID:case s.GITLAB_CI_CLASS_ID:return i.createElement(a.default,null);case s.GITHUB_CI_CLASS_ID:return i.createElement(l.default,null);case s.CIRCLE_CI_CLASS_ID:return i.createElement(c.default,null);case s.JENKINS_CLASS_ID:return i.createElement(d.default,null);case s.DEVOPS_CI_CLASS_ID:return i.createElement(u.default,null);default:return i.createElement(p.default,null)}}function j(e){const t=(0,m.resolveStoreInstance)(g.default).find(e),n=h.head(h.get(t,"childEntities.values"));return h.get(n,"apiRepositoryStore.branch")}function _(e,t){let n=t;return t&&h.forEach(e,(e=>{const i=h.split(e,"/");if(e===t)return!1;if(h.size(i)>1){if(h.join(h.slice(i,1),"/")===t)return n=e,!1}})),n}function P(e){return`${h.get(e,"branch")}-${h.get(e,"buildIdentifier")}`}},"./integrations/ci-cd/modals/DeleteIntegrationModal.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),r=n("./js/components/base/Modals.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=(n("./js/components/base/LoadingIndicator.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts")),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIIntegrationsStore.js");n("./js/stores/CurrentUserStore.js"),n("./js/modules/services/AnalyticsService.js");let p=(0,s.observer)(i=class extends o.Component{constructor(e){super(e),this.state={isDeleting:!1},this.store=(0,d.resolveStoreInstance)(u.default),this.integrationsStore=(0,d.resolveStoreInstance)(c.default),this.handleReset=this.handleReset.bind(this)}handleReset(){this.props.handleBack()}render(){const{integrationId:e,ruleId:t,apiVersionId:n}=this.props,{isDeleting:i}=this.state;return o.createElement("div",null,o.createElement(r.Modal,{isOpen:this.props.isOpen,size:"small",onRequestClose:this.props.handleCloseModal},o.createElement(r.ModalHeader,null,"Delete Integration"),o.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),o.createElement(r.ModalFooter,null,o.createElement(a.default,{text:"Delete Integration",className:"ci-cd-modal__delete-button",type:"destructive",isDisabled:i,isLoading:i,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{var i,s;null===(i=this.props)||void 0===i||null===(s=i.onDelete)||void 0===s||s.call(i),this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration is deleted successfully."),this.integrationsStore.refetchTeamIntegrations(),this.store.removeIntegrationInstances(n),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.handleReset()):(pm.toasts.error("Something went wrong while deleting your integration."),pm.logger.error("Something went wrong while deleting your integration",e)),this.props.handleCloseModal()})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while deleting your integration"),pm.logger.error("Error occurred while deleting integration",e),this.props.handleCloseModal()}))}}),o.createElement(a.default,{text:"Cancel",className:"ci-cd-modal__cancel-button",isDisabled:i,type:"secondary",onClick:this.props.handleCloseModal}))))}})||i},"./integrations/ci-cd/modals/RunBuildsModal.js":function(e,t,n){n.r(t);var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),d=n("./integrations/ci-cd/services/index.ts"),u=n("./js/modules/services/AnalyticsService.js"),p=n("./integrations/ci-cd/components/Jenkins/constants.js"),m=n("./node_modules/lodash/lodash.js");let g=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={showModal:!0,loadingBranches:!1,errorBranches:"",selectedBranch:null,owner_name:"",repo_name:""},this.triggerBuild=this.triggerBuild.bind(this),this.handleBranch=this.handleBranch.bind(this),this.getTriggerBuildFnAndPayload=this.getTriggerBuildFnAndPayload.bind(this)}handleBranch(e){this.setState({selectedBranch:e})}getTriggerBuildFnAndPayload(e,t,n){let i="triggerBuild",s={branch:{name:n}};return e===p.RULE&&(i="triggerMultiBranchProjectBuild",s={project:`${t}/job/${n}`}),{fn:i,payload:s}}triggerBuild(){this.setState({loadingTriggerBuild:!0,errorTriggerBuild:""});let{integrationId:e,rule:t,project:n,addToast:i}=this.props,{fn:s,payload:o}=this.getTriggerBuildFnAndPayload(t,n,this.state.selectedBranch.value);d.default[t][s](e,o).then((e=>{i({description:"New build triggered successfully! If you don't see the run try refreshing the page",status:"success"}),this.setState({loadingTriggerBuild:!1,errorTriggerBuild:""}),u.default.addEventV2({category:"ci-integration",action:"run-build-complete",label:t,value:1}),this.props.refreshBuilds(),this.props.handleCloseModal()})).catch((e=>{const t=m.get(e,"error.title",""),n=m.get(e,"error.message");i({title:t,description:n||"Something went wrong while triggering build, please try again",status:"error"}),pm.logger.error("Error occurred while fetching builds",e),this.setState({errorTriggerBuild:"Unable to load builds",loadingTriggerBuild:!1}),this.props.handleCloseModal()}))}render(){const{branches:e,loadingBranches:t,errorBranches:n,handleCloseModal:i}=this.props;return s.createElement("div",null,s.createElement(r.Modal,{isOpen:this.props.isOpen,size:"small",onClose:i,className:"rb-modal"},s.createElement(r.ModalHeader,{heading:"Run Build"}),s.createElement(r.ModalContent,{className:"rb-modal__content"},s.createElement("div",{className:"ci-cd-run-builds-modal__dropdown"},s.createElement(a.default,{isClearable:!0,allowCreateNewOption:!0,label:"Branch",placeholder:"Select option",options:e,error:n,isLoading:t,value:this.state.selectedBranch,onChange:this.handleBranch,helperText:"Build run will be triggered on the selected branch"}))),s.createElement(r.ModalFooter,{className:"rb-modal__footer"},s.createElement(l.default,{type:"secondary",size:"medium",onClick:i,className:"run-build-modal-button",text:"Cancel"}),s.createElement(l.default,{type:"primary",size:"medium",isDisabled:!this.state.selectedBranch,isLoading:this.state.loadingTriggerBuild,onClick:this.triggerBuild,className:"run-build-modal-button",text:"Run Build"}))))}})||i;t.default=(0,c.default)(g)},"./integrations/ci-cd/services/BitbucketCI.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./api-dev/services/IntegrationService.js"),o=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/lodash/lodash.js");const a="list_pipelines",l="run_pipeline",c="stop_pipeline",d="list_pipeline_steps",u="newman_template";function p(e){let t="PENDING",n=r.get(e,"name");return n?t=r.get(e,"result.name"):"IN_PROGRESS"===n&&(t="PAUSED"===r.get(e,"stage.name")?"SUCCESSFUL":r.get(e,"stage.name")),t}t.default={fetchRepositories:e=>new Promise(((t,n)=>{s.default.getRepositories(e.tokenId,e.workspaceSlug).then((e=>{if(r.get(e,"repositories")){const n=r.map(e.repositories,(e=>({label:e.name,value:{workspace_uuid:e.owner.id,repo_uuid:e.id,repo_name:e.name}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:e=>new Promise(((t,n)=>{s.default.getOrgs(e).then((e=>{if(r.get(e,"orgs")){const n=r.map(e.orgs,(e=>({label:e.name,value:{workspace_uuid:e.id,workspace_name:e.name}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchAPIRepoLinkDetails:e=>{let t={};return new Promise(((n,i)=>{s.default.getAPIRepoLinkInfo(e).then((e=>{if(e){const{repository:i,tokenId:s,tokenType:o}=e;"bitbucket"===r.get(i,"service")&&"integration_oauth"===o&&(t={project:{slug:r.get(i,"info.id"),name:r.get(i,"info.name")},workspace:{slug:r.get(i,"info.owner.id"),name:r.get(i,"info.owner.name")}}),n(t)}i()})).catch(i)}))},getBranches:e=>Promise.resolve([]),getBuilds:e=>new Promise(((t,n)=>{const s=r.assign({},{inputs:{limit:r.get(e,"limit")}});i.default.triggerIntegrationOnDemand(e.integrationId,a,s).then((e=>{if(e.status&&200===e.status){let n,i=r.get(e,"body.builds",[]),s=r.get(e,"body.showCollectionRuns",!1),a=r.get(e,"body.showBuildSteps",!1),l=r.map(i,(e=>{const t=r.get(e,"collectionRunMetrics")||r.map(r.get(e,"collectionRunData",[]),o.convertNewmanRunMetrics);let i="CREATED";return"COMPLETED"===r.get(e,"state.name")?i=r.get(e,"state.result.name"):"IN_PROGRESS"===r.get(e,"state.name")&&(i="PAUSED"===r.get(e,"state.stage.name")?"SUCCESSFUL":r.get(e,"state.stage.name")),"branch"===r.get(e,"target.ref_type")&&(n=r.get(e,"target.ref_name")),{showCollectionRuns:s,showBuildSteps:a,collectionRunSummary:(0,o.getCollectionRunStatusSummary)(t),collectionRunDetails:t,build_num:"Build "+e.build_number,start_time:e.created_on,branch:n,duration:1e3*e.duration_in_seconds,outcome:i,filterStatus:(0,o.getBuildFilterStatus)(i),pipeline_uuid:e.uuid,buildIdentifier:e.build_number,build_url:`https://bitbucket.org/${e.repository.full_name}/addon/pipelines/home#!/results/${e.build_number}`}}));return t(l)}return n(e)})).catch(n)})),triggerBuild:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{branch:r.get(t,"branch.name")}});i.default.triggerIntegrationOnDemand(e,l,o).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,u).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBuildSteps:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{pipelineUuid:r.get(t,"pipeline_uuid")}});i.default.triggerIntegrationOnDemand(e,d,o).then((e=>{if(e.status&&200===e.status){const t=r.get(e,"body",[]),i=r.map(t,(e=>({name:r.get(e,"name"),status:p(r.get(e,"state")),duration:1e3*r.get(e,"duration_in_seconds")})));return n(i)}return s(e)})).catch(s)})),cancelBuild:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{pipelineUuid:r.get(t,"pipeline_uuid")}});i.default.triggerIntegrationOnDemand(e,c,o).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/Circleci.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./integrations/ci-cd/helpers.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./node_modules/lodash/lodash.js");const a="list_builds",l="trigger_build",c="cancel_build",d="newman_template",u=e=>{let t=r.get(e,"subject",null),n=r.get(e,"workflows.job_name",null),i=r.get(e,"workflows.workflow_name",null),s=r.get(e,"build_num"),o=t||s;return n?o+=": "+n:i&&(o+=": "+i),o};t.default={triggerBuild:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{branchName:r.get(t,"branch.name")}});i.default.triggerIntegrationOnDemand(e,l,o).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),fetchProjects:(e,t,n)=>{const i=t.options,s=r.reduce(r.get(i,"inputs",[]),((t,n,i)=>(t[i]=r.get(e,n,""),t)),{});return new Promise(((e,a)=>{o.default.runServiceAction(i.service,i.serviceActionId,s,t.integrationClass,t.id,n||null).then((t=>{const n=r.get(t,"body",[]),i=r.map(n,(e=>{const t=r.get(e,"username"),n=r.get(e,"vcs_type"),i=r.get(e,"reponame");return{label:`${t}/${i}`,value:`${n}/${t}/${i}`}}));return e(i)})).catch((e=>(pm.logger.error("CircleCI.fetchProjects ~ Error occurred while fetching projects",e),a(e))))}))},getBuilds:e=>new Promise(((t,n)=>{const o={inputs:{offset:e.offset,limit:e.limit}};i.default.triggerIntegrationOnDemand(e.integrationId,a,o).then((e=>{if(e.status&&200===e.status){const n=r.get(e,"body.builds",[]).map((t=>{const n=r.get(t,"status",""),i=r.get(t,"build_num",""),o=r.get(t,"build_url",""),a=r.get(t,"branch",""),l=r.get(t,"start_time",""),c=r.map(r.get(t,"collectionRunData",[]),s.convertNewmanRunMetrics),d=r.get(t,"build_time_millis");return{showCollectionRuns:r.get(e,"body.showCollectionRuns",!1),showBuildSteps:r.get(e,"body.showBuildSteps",!1),collectionRunSummary:(0,s.getCollectionRunStatusSummary)(c),collectionRunDetails:c,build_num:u(t),branch:a,start_time:l,outcome:n,filterStatus:(0,s.getBuildFilterStatus)(n),duration:d,build_url:o,buildNumber:i,buildIdentifier:i}}));return t(n)}return n(e)})).catch((e=>n(e)))})),getNewmanConfig:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,d).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBranches:e=>Promise.resolve([]),cancelBuild:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{buildNumber:r.get(t,"buildNumber")}});i.default.triggerIntegrationOnDemand(e,c,o).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/GitLabCI.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./api-dev/services/IntegrationService.js"),o=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/lodash/lodash.js");const a="list_pipeline",l="run_pipeline",c="stop_pipeline",d="list_pipeline_jobs",u="newman_template";t.default={fetchRepositories:e=>new Promise(((t,n)=>{s.default.getRepositories(e.tokenId,e.workspaceId,e.domain).then((e=>{if(r.get(e,"repositories")){const n=r.map(r.get(e,"repositories"),(e=>({label:e.name,value:{workspaceId:r.toString(r.get(e,"owner.id")),repoId:r.toString(r.get(e,"id")),repoName:r.get(e,"name")}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:(e,t)=>new Promise(((n,i)=>{s.default.getOrgs(e,t).then((e=>{if(r.get(e,"orgs")){const t=r.map(e.orgs,(e=>({label:r.get(e,"name"),value:{workspaceId:r.toString(r.get(e,"id")),workspaceName:r.get(e,"name")}})));return n(t)}return i(e)})).catch((e=>i(e)))})),fetchAPIRepoLinkDetails:e=>new Promise(((t,n)=>{s.default.getAPIRepoLinkInfo(e).then((e=>{if(e){let{repository:n}=e,i=null;"gitlab"===r.get(n,"service")&&(i={project:{id:r.get(n,"info.id"),name:r.get(n,"info.name")},workspace:{id:r.get(n,"info.owner.id"),name:r.get(n,"info.owner.name")}}),t(i)}})).catch(n)})),getBranches:e=>Promise.resolve([]),getBuilds:e=>new Promise(((t,n)=>{const s=r.assign({},{inputs:{limit:r.get(e,"limit")}});i.default.triggerIntegrationOnDemand(e.integrationId,a,s).then((e=>{if(e.status&&200===e.status){let n=r.get(e,"body.builds",[]),i=r.get(e,"body.showCollectionRuns",!1),s=r.get(e,"body.showBuildSteps",!1),a=r.map(n,(e=>{const t=r.get(e,"status","created"),n=r.map(r.get(e,"collectionRunData",[]),o.convertNewmanRunMetrics);return{showCollectionRuns:i,showBuildSteps:s,collectionRunSummary:(0,o.getCollectionRunStatusSummary)(n),collectionRunDetails:n,build_num:"Build "+r.get(e,"iid"),start_time:r.get(e,"created_at"),branch:r.get(e,"ref"),duration:1e3*r.get(e,"duration",0),outcome:t,filterStatus:(0,o.getBuildFilterStatus)(t),pipelineId:r.get(e,"id"),build_url:r.get(e,"web_url"),buildIdentifier:r.get(e,"id")}}));return t(a)}return n(e)})).catch(n)})),triggerBuild:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{target_branch:r.get(t,"branch.name")}});i.default.triggerIntegrationOnDemand(e,l,o).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,u).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBuildSteps:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{pipelineId:r.get(t,"pipelineId")}});i.default.triggerIntegrationOnDemand(e,d,o).then((e=>{if(e.status&&200===e.status){const t=r.get(e,"body",[]),i=r.map(t,(e=>({name:r.get(e,"name"),status:r.get(e,"status"),duration:1e3*r.get(e,"duration")})));return n(i)}return s(e)})).catch(s)})),cancelBuild:(e,t)=>new Promise(((n,s)=>{const o=r.assign({},{inputs:{pipelineId:r.get(t,"pipelineId")}});i.default.triggerIntegrationOnDemand(e,c,o).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/GithubCI.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./api-dev/services/IntegrationService.js"),o=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/moment/moment.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");const c="list_workflow_runs",d="get_workflow_jobs",u="cancel_workflow_run",p="newman_template",m=e=>l.get(e,"conclusion")?l.get(e,"created_at")?a()(l.get(e,"updated_at")).diff(a()(l.get(e,"created_at"))):l.get(e,"started_at")?a()(l.get(e,"completed_at")).diff(a()(l.get(e,"started_at"))):void 0:0,g=e=>"workflow_dispatch"==l.get(e,"event")?l.get(e,"name")+" #"+l.get(e,"run_number"):l.get(e,["head_commit","message"])+" - "+l.get(e,"name")+" #"+l.get(e,"run_number");t.default={fetchRepositories:e=>new Promise(((t,n)=>{const{tokenId:i,workspace:o,domain:r}=e;s.default.getRepositories(i,o,r).then((e=>{if(l.get(e,"repositories")){const n=l.map(l.get(e,"repositories"),(e=>({label:e.name,value:e.id})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:(e,t)=>new Promise(((n,i)=>{s.default.getOrgs(e,t).then((e=>{if(l.get(e,"orgs")){const t=l.map(e.orgs,(e=>({label:l.get(e,"name"),value:l.get(e,"name")})));return n(t)}return i(e)})).catch((e=>i(e)))})),fetchAPIRepoLinkDetails:e=>new Promise(((t,n)=>{s.default.getAPIRepoLinkInfo(e).then((e=>{if(e){let{repository:n}=e,i=null;"github"===l.get(n,"service")&&(i={project:{id:l.get(n,"info.id"),name:l.get(n,"info.name")},workspace:{id:l.get(n,"info.owner.id"),name:l.get(n,"info.owner.name")}}),t(i)}})).catch(n)})),getBranches:e=>Promise.resolve([]),getBuilds:({limit:e,integrationId:t})=>new Promise(((n,s)=>{const r=l.assign({},{inputs:{limit:e}});i.default.triggerIntegrationOnDemand(t,c,r).then((e=>{if(e.status&&200===e.status){let t=l.get(e,"body.workflow_runs",[]),i=l.get(e,"body.showCollectionRuns",!1),s=l.get(e,"body.showBuildSteps",!1),r=l.map(t,(e=>{const t=l.get(e,"conclusion")||l.get(e,"status"),n=l.map(l.get(e,"collectionRunData",[]),o.convertNewmanRunMetrics);return{showCollectionRuns:i,showBuildSteps:s,collectionRunSummary:(0,o.getCollectionRunStatusSummary)(n),collectionRunDetails:n,build_num:g(e),start_time:l.get(e,"created_at"),branch:l.get(e,"head_branch"),duration:m(e),outcome:t,filterStatus:(0,o.getBuildFilterStatus)(t),runId:l.get(e,"id"),build_url:l.get(e,"html_url"),buildIdentifier:l.get(e,"run_number")}}));return n(r)}return s(e)})).catch(s)})),getBuildSteps:(e,{runId:t})=>new Promise(((n,s)=>{const o=l.assign({},{inputs:{runId:t}});i.default.triggerIntegrationOnDemand(e,d,o).then((e=>{if(e.status&&200===e.status){const t=l.get(e,"body.jobs",[]),i=l.map(t,(e=>({name:l.get(e,"name"),status:l.get(e,"conclusion")||l.get(e,"status"),duration:m(e)})));return n(i)}return s(e)})).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,p).then((e=>e.status&&200===e.status?t(l.get(e,"body")):n(e))).catch(n)})),cancelBuild:(e,{runId:t})=>new Promise(((n,s)=>{const o=l.assign({},{inputs:{runId:t}});i.default.triggerIntegrationOnDemand(e,u,o).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/JenkinsCI.js":function(e,t,n){n.r(t);var i=n("./node_modules/lodash/lodash.js"),s=n.n(i),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./js/modules/services/AnalyticsService.js"),a=n("./integrations/ci-cd/components/Jenkins/constants.js"),l=n("./integrations/ci-cd/helpers.js");t.default={validateUser:e=>new Promise(((t,n)=>{const i=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.VALIDATE_USER,rule:a.RULE},s().pick(e,["host_url","username","auth_token"]));o.default.fetchActionDetailsWithoutIntegration(i).then((e=>200===e.status?t():n(e))).catch(n)})),getProjects:e=>new Promise(((t,n)=>{const i=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.GET_PROJECTS,rule:a.RULE},s().pick(e,["host_url","username","auth_token"]));o.default.fetchActionDetailsWithoutIntegration(i).then((e=>{if(200===e.status&&s().get(e,"body")){const n=s().map(e.body,(e=>({label:e.name,value:e.name,type:s()(e._class).split(".").last()})));return t(n)}return r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e)})).catch((e=>(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e))))})),getProjectsByIntegrationId:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.GET_PROJECTS).then((e=>{if(200===e.status&&s().get(e,"body")){const n=s().map(e.body,(e=>({label:e.name,value:e.name,type:s()(e._class).split(".").last()})));return t(n)}return n(e)})).catch(n)})),getProjectInfo:e=>new Promise(((t,n)=>{const i=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.GET_PROJECT,rule:a.RULE},s().pick(e,["host_url","username","auth_token","project"]));o.default.fetchActionDetailsWithoutIntegration(i).then((e=>200===e.status&&s().get(e,"body")?t(s().get(e,"body")):(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e)))).catch((e=>(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e))))})),getProjectInfoByIntegrationId:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.GET_PROJECT).then((e=>e.status&&200===e.status?t(s().get(e,"body")):n(e))).catch(n)})),getBuilds:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e.integrationId,a.ON_DEMAND_TRIGGER_ACTIONS.GET_BUILDS,{inputs:s().pick(e,["offset","limit"])}).then((e=>{const i=s().get(e,"body.showCollectionRuns",!1),o=s().get(e,"body.showBuildSteps",!1);if(200===e.status&&s().get(e,"body")){const n=s().map(s().get(e,"body.builds",[]),(e=>{const t=e.result||(e.building?a.STATUS_BUILD_IN_PROGRESS:""),n=s().get(e,"collectionRunMetrics")||s().map(s().get(e,"collectionRunData",[]),l.convertNewmanRunMetrics);return s().assign({},{name:"Build "+e.id,status:t,filterStatus:(0,l.getBuildFilterStatus)(t),url:e.url+"console",collectionRunSummary:(0,l.getCollectionRunStatusSummary)(n),collectionRunDetails:n,showCollectionRuns:i,showBuildSteps:o,buildIdentifier:e.number},s().pick(e,["branch","timestamp","duration"]))}));return t(n)}return n(e)})).catch(n)})),getMultiBranchProjectBuilds:(e,t)=>new Promise(((n,i)=>{o.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.GET_BUILDS,{inputs:s().pick(t,["project","offset","limit"])}).then((e=>{const t=s().get(e,"body.showCollectionRuns",!1),o=s().get(e,"body.showBuildSteps",!1);if(200===e.status&&s().get(e,"body")){const i=s().map(s().get(e,"body.builds",[]),(e=>{const n=e.result||(e.building?a.STATUS_BUILD_IN_PROGRESS:"");return s().assign({},{name:"Build "+e.id,status:n,filterStatus:(0,l.getBuildFilterStatus)(n),url:e.url+"console",collectionRunSummary:(0,l.getCollectionRunStatusSummary)(s().get(e,"collectionRunMetrics")),collectionRunDetails:s().get(e,"collectionRunMetrics"),showCollectionRuns:t,showBuildSteps:o,buildIdentifier:e.number},s().pick(e,["branch","timestamp","duration"]))}));return n(i)}return i(e)})).catch(i)})),triggerBuild:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.TRIGGER_BUILD).then((e=>e.status&&200===e.status?t(e):n(e))).catch(n)})),triggerMultiBranchProjectBuild:(e,t)=>new Promise(((n,i)=>{o.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.TRIGGER_BUILD,{inputs:s().pick(t,["project"])}).then((e=>e.status&&200===e.status?n(e):i(e))).catch(i)})),getNewmanConfig:e=>new Promise(((t,n)=>{const i=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.GET_NEWMAN_CONFIG});o.default.fetchActionDetails(e,i).then((e=>{if(e.status&&200===e.status){let n=s().get(e,"body.data",[]);return t(n)}return n(e)})).catch(n)})),getBranches:e=>Promise.resolve([])}},"./integrations/ci-cd/services/TravisCI.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./integrations/ci-cd/helpers.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./node_modules/moment/moment.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");const c="list_builds",d="list_build_jobs",u="cancel_build",p="trigger_build",m="newman_template";t.default={triggerBuild:(e,t)=>{const n={inputs:{branchName:l.get(t,"branch.name")}};return i.default.triggerIntegrationOnDemand(e,p,n).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},getBuilds:e=>{const t={inputs:{offset:e.offset,limit:e.limit}};return i.default.triggerIntegrationOnDemand(e.integrationId,c,t).then((e=>{const t=l.get(e,"body.showBuildSteps",!1),n=l.get(e,"body.showCollectionRuns",!1);if(e.status&&200===e.status){const i=l.get(e,"body.builds",[]),o=l.map(i,(e=>{const i=l.get(e,"commit.message",""),o=l.map(l.get(e,"collectionRunData",[]),s.convertNewmanRunMetrics),r=l.get(e,"id",""),a=l.get(e,"branch.name",""),c=l.get(e,"started_at",""),d=l.get(e,"state",""),u=1e3*l.get(e,"duration",0),p=`https://app.travis-ci.com/${l.get(e,"repository.slug","")}/build/${l.get(e,"id")}`;return{buildId:r,collectionRunSummary:(0,s.getCollectionRunStatusSummary)(o),collectionRunDetails:o,build_num:i,branch:a,start_time:c,outcome:d,filterStatus:(0,s.getBuildFilterStatus)(d),duration:u,build_url:p,showBuildSteps:t,showCollectionRuns:n,buildIdentifier:l.get(e,"number","")}}));return Promise.resolve(o)}throw e})).catch((e=>Promise.reject(e)))},getBuildSteps:(e,t)=>new Promise(((n,s)=>{const o=l.assign({},{inputs:{buildId:l.get(t,"buildId")}});i.default.triggerIntegrationOnDemand(e,d,o).then((e=>{if(e.status&&200===e.status){const t=l.get(e,"body.jobs",[]),i=l.map(t,(e=>{const t=l.get(e,"number",""),n=l.get(e,"started_at",""),i=l.get(e,"finished_at",""),s=n&&i?a()(i)-a()(n):null,o=l.get(e,"stage.name","");return{name:o?`${o} - ${t}`:t,status:l.get(e,"state"),duration:s}}));return n(i)}return s(e)})).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,m).then((e=>e.status&&200===e.status?t(l.get(e,"body")):n(e))).catch(n)})),cancelBuild:(e,t)=>new Promise(((n,s)=>{const o=l.assign({},{inputs:{buildId:l.get(t,"buildId")}});i.default.triggerIntegrationOnDemand(e,u,o).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)})),fetchProjects:(e,t,n)=>{e.travisci_domain=e.travisci_domain||"com";const i=t.options,s=l.reduce(l.get(i,"inputs",[]),((t,n,i)=>(t[i]=l.get(e,n,""),t)),{});return new Promise(((e,r)=>{o.default.runServiceAction(i.service,i.serviceActionId,s,t.integrationClass,t.id,n||null).then((t=>{const n=l.get(t,"body.repositories",[]),s=l.map(n,(e=>({label:l.get(e,l.get(i,"labelPath","")),value:l.toString(l.get(e,l.get(i,"valuePath","")))})));return e(s)})).catch((e=>(pm.logger.error("TravisCI.fetchProjects ~ Error occurred while fetching projects",e),r(e))))}))},getBranches:e=>Promise.resolve([])}},"./integrations/ci-cd/stores/APIIntegrationsStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var i,s,o,r,a,l,c,d,u,p,m,g,h,f,I,b,v,y,S,E,C,j,_,P,A,w,T,k,L,D,R,x,B,N=n("../../node_modules/mobx/lib/mobx.module.js"),O=n("./node_modules/lodash/lodash.js"),F=n.n(O),V=n("./js/stores/StoreManager.js"),U=n("./js/stores/SyncStatusStore.js"),M=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),H=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),W=n("./js/stores/IntegrationsStore.js"),z=n("./integrations/ci-cd/constants.ts"),G=n("./integrations/ci-cd/services/index.ts"),q=n("./node_modules/async/dist/async.js"),K=n.n(q),$=n("./integrations/services/AuthenticationInstanceService.ts");function J(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Y(e,t,n,i,s){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Q={[z.CI_CD_BUILDS]:"apiversion"},Z={[z.CI_CD_BUILDS]:"continuous-integration"};let X=(s=Y((i=class{constructor(){J(this,"isHydrating",s,this),J(this,"availableIntegrations",o,this),J(this,"configuredIntegrations",r,this),J(this,"categoryIntegrations",a,this),J(this,"activeRule",l,this),J(this,"activeService",c,this),J(this,"errorAvailableIntegrations",d,this),J(this,"errorConfiguredIntegrations",u,this),J(this,"loadingAvailableIntegrations",p,this),J(this,"loadingConfiguredIntegrations",m,this),J(this,"isAuthenticationError",g,this),J(this,"selectedAPI",h,this),J(this,"selectedAPIVersion",f,this),J(this,"selectedService",I,this),J(this,"selectedRule",b,this),J(this,"category",v,this),J(this,"isAdding",y,this),J(this,"builds",S,this),J(this,"loadingBuilds",E,this),J(this,"errorBuilds",C,this),J(this,"branches",j,this),J(this,"loadingBranches",_,this),J(this,"errorBranches",P,this),J(this,"loadingBuildsPage",A,this),J(this,"errorBuildsPage",w,this),J(this,"isIntegrationSupported",T,this),J(this,"authenticationInstances",k,this),J(this,"loadingAuthenticationInstances",L,this),J(this,"errorAuthenticationInstances",D,this),J(this,"integrationInstance",R,this),J(this,"integrationClass",x,this),J(this,"loadingIntegrationInstanceAndClass",B,this),this.integrationsStore=(0,V.resolveStoreInstance)(W.default)}initializeApiIntegrationsStore(e){(0,V.resolveStoreInstance)(U.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:i}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(i),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(n,Q[i],[Z[i]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiIntegrationsStoreV2(e){(0,V.resolveStoreInstance)(U.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:i}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(i),this.fetchConfiguredIntegrations(n,Q[i],[Z[i]])})).catch((e=>{pm.logger.error("APIObservabilityStore~initializeApiIntegrationsStoreV2~Error while initialising APIObservabilityStore: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}setActiveCategory(e){this.category=e}setActiveService(e){this.activeService=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,Q[this.category],[Z[this.category]])}getAvailableIntegrations(){return(0,N.toJS)(this.availableIntegrations)}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){this.categoryIntegrations=e}getConfiguredIntegrations(e){return(0,N.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,N.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=Z[this.category];F().forEach((0,N.toJS)(this.availableIntegrations),(n=>{const i={},s=n.integrations[n.id];F().forEach(s,((e,n)=>{e.client_categories.includes(t)&&(i[n]=e)})),F().isEmpty(i)||(n.integrations[n.id]={...i},e.push(n))})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(e){this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),M.default.getAvailableIntegrations().then((t=>{const n=F().get(t,"body.services",[]);if(200!==t.status||F().isEmpty(n))throw t;this.updateAvailableIntegrations(F().map(n,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1),F().isFunction(e)&&e(null)})).catch((t=>{this.updateErrorAvailableIntegrations((0,N.toJS)(t)),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations"),F().isFunction(e)&&e(t)}))}fetchConfiguredIntegrations(e,t,n,i){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),M.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,n).then((e=>{this.updateConfiguredIntegrations(e[n[0]]),this.updateLoadingConfiguredIntegrations(!1),F().isFunction(i)&&i(null)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations"),F().isFunction(i)&&i(e)}))}updateBuildsStatus(e,t,n,i){t&&(this.builds[e]=t),this.errorBuilds=n,this.loadingBuilds=i}updateBranchesStatus(e,t,n){e&&(this.branches=e),this.errorBuilds=t,this.loadingBuilds=n}setIsAuthenticationError(e){this.isAuthenticationError=e}fetchBuilds(e,t,n){let i=G.default[t];if(!i||!F().isFunction(i.getBuilds)){let e=new Error;return e.name="integrationNotSupported",n(e)}this.updateBuildsStatus(e,[],null,!0),i.getBuilds({integrationId:e,offset:0,limit:100}).then((t=>{this.updateBuildsStatus(e,t||[],null,!1),this.setIsAuthenticationError(!1),F().isFunction(n)&&n(null)})).catch((t=>{const i=F().get(t,"error.details.statusCode",-1);401!==i&&403!==i||this.setIsAuthenticationError(!0),this.updateBuildsStatus(e,null,t,!1),F().isFunction(n)&&n(t)}))}fetchBranches(e,t,n){let i=G.default[t];if(!i||!F().isFunction(i.getBranches)){let e=new Error;return e.name="integrationNotSupported",n(e)}this.updateBranchesStatus([],null,!0),i.getBranches(e).then((e=>{this.updateBranchesStatus(e||[],null,!1),F().isFunction(n)&&n(null)})).catch((e=>{this.updateBranchesStatus(null,e,!1),F().isFunction(n)&&n(e)}))}clearBuilds(){this.builds=[],this.errorBuilds=null}clearBranches(){this.branches=[],this.errorBranches=null}updateStatusBuildsPage(e,t,n){this.loadingBuildsPage=t,this.errorBuildsPage=e,this.isIntegrationSupported=n}initialiseBuildsPage(e,t){this.updateStatusBuildsPage(null,!0),K().series([n=>{this.fetchBuilds(e,t,n)},n=>{this.fetchBranches(e,t,n)}],(e=>{"integrationNotSupported"===F().get(e,"name")?this.updateStatusBuildsPage(null,!1,!1):this.updateStatusBuildsPage(e,!1,!0)}))}setloadingAuthenticationInstances(e){this.loadingAuthenticationInstances=e}setErrorAuthenticationInstances(e){this.errorAuthenticationInstances=e}setAuthenticationInstances(e){this.authenticationInstances=e}fetchAuthenticationInstances(e){pm.logger.info("APIIntegrationsStore~Initializing fetching auth instances: ",e),this.setloadingAuthenticationInstances(!0),this.setErrorAuthenticationInstances(null),$.default.listAuthenticationInstancesOnApi(e).then((({body:e})=>{F().isNil(e.data)?pm.logger.error("Error loading authentication instances! Received null response!",{body:e}):pm.logger.info("APIIntegrationsStore~Successfully fetched auth instances: ",e),this.setAuthenticationInstances(e.data||[]),this.setloadingAuthenticationInstances(!1)})).catch((e=>{pm.logger.error("APIIntegrationsStore~Something went wrong while fetching authentication instances: ",e),this.setloadingAuthenticationInstances(!1),this.setErrorAuthenticationInstances(e)}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await H.default.getConfiguredIntegrationsForAnEntity(e,t,[z.CI_CD_CLIENT_CATEGORY]);let i=F().get(n,"body.data",[]),s=F().map(i,"class"),o=[];if(!F().isEmpty(s)){const e=this.integrationsStore.getIntegrationClasses(),t=s[0];o=F().find(e,(e=>e.id===t))}this.updateIntegrationClass([o],t),this.updateIntegrationInstance(i,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIIntegrationsStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=Y(i.prototype,"availableIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=Y(i.prototype,"configuredIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=Y(i.prototype,"categoryIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n("./integrations/ci-cd/stores/fixture.json")}}),l=Y(i.prototype,"activeRule",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=Y(i.prototype,"activeService",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Y(i.prototype,"errorAvailableIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=Y(i.prototype,"errorConfiguredIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=Y(i.prototype,"loadingAvailableIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=Y(i.prototype,"loadingConfiguredIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=Y(i.prototype,"isAuthenticationError",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Y(i.prototype,"selectedAPI",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=Y(i.prototype,"selectedAPIVersion",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Y(i.prototype,"selectedService",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Y(i.prototype,"selectedRule",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Y(i.prototype,"category",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=Y(i.prototype,"isAdding",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=Y(i.prototype,"builds",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=Y(i.prototype,"loadingBuilds",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Y(i.prototype,"errorBuilds",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Y(i.prototype,"branches",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=Y(i.prototype,"loadingBranches",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Y(i.prototype,"errorBranches",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Y(i.prototype,"loadingBuildsPage",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Y(i.prototype,"errorBuildsPage",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=Y(i.prototype,"isIntegrationSupported",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=Y(i.prototype,"authenticationInstances",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=Y(i.prototype,"loadingAuthenticationInstances",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Y(i.prototype,"errorAuthenticationInstances",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=Y(i.prototype,"integrationInstance",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=Y(i.prototype,"integrationClass",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),B=Y(i.prototype,"loadingIntegrationInstanceAndClass",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Y(i.prototype,"initializeApiIntegrationsStore",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"initializeApiIntegrationsStore"),i.prototype),Y(i.prototype,"setActiveCategory",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveCategory"),i.prototype),Y(i.prototype,"setActiveService",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveService"),i.prototype),Y(i.prototype,"setActiveRule",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveRule"),i.prototype),Y(i.prototype,"setSelectedAPI",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedAPI"),i.prototype),Y(i.prototype,"setSelectedAPIVersion",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedAPIVersion"),i.prototype),Y(i.prototype,"setSelectedRule",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedRule"),i.prototype),Y(i.prototype,"setSelectedService",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedService"),i.prototype),Y(i.prototype,"updateLoadingAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateLoadingAvailableIntegrations"),i.prototype),Y(i.prototype,"updateLoadingConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateLoadingConfiguredIntegrations"),i.prototype),Y(i.prototype,"updateErrorAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateErrorAvailableIntegrations"),i.prototype),Y(i.prototype,"updateErrorConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateErrorConfiguredIntegrations"),i.prototype),Y(i.prototype,"updateAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateAvailableIntegrations"),i.prototype),Y(i.prototype,"updateSelectedAPIVersion",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateSelectedAPIVersion"),i.prototype),Y(i.prototype,"updateConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateConfiguredIntegrations"),i.prototype),Y(i.prototype,"updateCategoryIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateCategoryIntegrations"),i.prototype),Y(i.prototype,"getConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"getConfiguredIntegrations"),i.prototype),Y(i.prototype,"updateIsHydrating",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIsHydrating"),i.prototype),Y(i.prototype,"updateIsAdding",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIsAdding"),i.prototype),Y(i.prototype,"findIntegrationsByCategory",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"findIntegrationsByCategory"),i.prototype),Y(i.prototype,"fetchAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchAvailableIntegrations"),i.prototype),Y(i.prototype,"fetchConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchConfiguredIntegrations"),i.prototype),Y(i.prototype,"updateBuildsStatus",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateBuildsStatus"),i.prototype),Y(i.prototype,"updateBranchesStatus",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateBranchesStatus"),i.prototype),Y(i.prototype,"setIsAuthenticationError",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setIsAuthenticationError"),i.prototype),Y(i.prototype,"fetchBuilds",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchBuilds"),i.prototype),Y(i.prototype,"fetchBranches",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchBranches"),i.prototype),Y(i.prototype,"clearBuilds",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"clearBuilds"),i.prototype),Y(i.prototype,"clearBranches",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"clearBranches"),i.prototype),Y(i.prototype,"updateStatusBuildsPage",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateStatusBuildsPage"),i.prototype),Y(i.prototype,"initialiseBuildsPage",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"initialiseBuildsPage"),i.prototype),Y(i.prototype,"setloadingAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setloadingAuthenticationInstances"),i.prototype),Y(i.prototype,"setErrorAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setErrorAuthenticationInstances"),i.prototype),Y(i.prototype,"setAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setAuthenticationInstances"),i.prototype),Y(i.prototype,"fetchAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchAuthenticationInstances"),i.prototype),Y(i.prototype,"fetchIntegrationInstance",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchIntegrationInstance"),i.prototype),Y(i.prototype,"updateIntegrationInstance",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationInstance"),i.prototype),Y(i.prototype,"updateIntegrationClass",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationClass"),i.prototype),Y(i.prototype,"setLoadingIntegrationInstancesAndClass",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setLoadingIntegrationInstancesAndClass"),i.prototype),Y(i.prototype,"resetPowerUpVariables",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"resetPowerUpVariables"),i.prototype),Y(i.prototype,"removeIntegrationInstances",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"removeIntegrationInstances"),i.prototype),i)},"./integrations/ci-cd/stores/APIRunInfoStore.js":function(e,t,n){n.r(t);n("./node_modules/lodash/lodash.js");var i,s,o=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("./js/utils/PostmanGatewayService.js");function a(e,t,n,i,s){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const l=pm.logger.getContext("APIRunInfoStore","api-governance");let c=(s=a((i=class{constructor(){!function(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}(this,"apiSchemaScanDetailsMap",s,this)}async fetchAPISchemaScanResults(e,t,n){try{const i=`${t}-${n}`;if(this.apiSchemaScanDetailsMap.has(e)&&this.apiSchemaScanDetailsMap.get(e).has(i))return Promise.resolve(this.apiSchemaScanDetailsMap.get(e).get(i));const s=await r.default.request("/ws/proxy",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:"/governance/ci/builds",service:"ruleset",method:"get",query:{branch:n,buildId:t,populate:"results",integrationId:e}})},{returnRawResponse:!0});if(!s.ok)return Promise.reject(await s.json());const o=await s.json();return this.apiSchemaScanDetailsMap.has(e)||this.apiSchemaScanDetailsMap.set(e,new Map),this.apiSchemaScanDetailsMap.get(e).set(i,o),o}catch(e){return pm.logger.error("APIRunInfoStore~fetchAPISchemaScanResults",e,{context:l}),[]}}cleanUp(e){e&&this.apiSchemaScanDetailsMap.delete(e)}}).prototype,"apiSchemaScanDetailsMap",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),a(i.prototype,"fetchAPISchemaScanResults",[o.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchAPISchemaScanResults"),i.prototype),a(i.prototype,"cleanUp",[o.action],Object.getOwnPropertyDescriptor(i.prototype,"cleanUp"),i.prototype),i);t.default=c},"./integrations/ci-cd/timeUtils.js":function(e,t,n){n.r(t);var i=n("./node_modules/moment/moment.js"),s=n.n(i),o=n("./node_modules/lodash/lodash.js");t.default={timeDifference:function(e,t){var n=6e4,i=36e5,s=864e5,r=e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*n-e.getHours()*i-(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*n-t.getHours()*i);return 0==r/s?"Today":r/s==1?"Yesterday":o.round(r/s)+" days ago"},timeSince:function(e){if(!e)return"N/A";var t=new Date,n=new Date(e),i=n.getHours()%12||12,s=n.getMinutes()<10?`0${n.getMinutes()}`:n.getMinutes(),o=n.getHours()<12?"am":"pm";return`${this.timeDifference(t,n)}, ${i}:${s} ${o}`},getFormattedDuration:function(e){if(!e||"0"===e)return"N/A";e=parseInt(e);let t=s().duration(e),n=t.hours(),i=t.minutes(),o=t.seconds(),r="";return n>0&&(r+=`${n}h`),i>0&&(r+=` ${i}m`),o>0&&(r+=` ${o}s`),""===r&&(r+=e/1e3+"s"),r}}},"./integrations/components/OAuthComponent.js":function(e,t,n){n.r(t),n.d(t,{AuthorizationErrorView:function(){return I},AuthorizingView:function(){return f}});var i=n("./node_modules/prop-types/index.js"),s=n.n(i),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("../../node_modules/react/index.js");const u=c.default.div`
    overflow: auto;
    padding: var(--spacing-xxl);
    display: flex;
    align-items: center;
    flex-direction: column;
  `,p=c.default.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: var(--spacing-xxxl);
  `,m=c.default.div`
    background-color: var(--background-color-primary);
    width: 60px;
    height: 60px;
    border-radius: var(--border-radius-default);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--spacing-m);
  `,g=c.default.div`
    margin-bottom: var(--spacing-l);
  `,h=c.default.div`
    margin-bottom: var(--spacing-xl);
  `,f=e=>{const{iconName:t,primaryText:n,secondaryText:i,onCancel:s}=e;return d.createElement(u,null,d.createElement(p,null,d.createElement(m,null,d.createElement("div",{className:t,"data-testid":"oauth-icon"})),d.createElement(g,{"data-testid":"oauth-primary-text"},d.createElement(o.default,{color:"content-color-primary",typographyStyle:{fontSize:"text-size-xxl",fontWeight:"text-weight-bold",lineHeight:"line-height-xxl"}},n)),d.createElement(h,{"data-testid":"oauth-secondary-text"},d.createElement(o.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-l"}},i)),d.createElement(r.default,{"data-testid":"oauth-cancel-button",type:"secondary",onClick:s,text:"Cancel"})))},I=e=>{const{title:t,description:n,buttonText:i,onButtonClick:s}=e;return d.createElement(u,null,d.createElement(a.default,{title:t,description:n,secondaryAction:d.createElement(r.default,{type:"outline",text:i,onClick:s,"data-testid":"oauth-error-button"})},d.createElement(l.default,null)))};f.propTypes={iconName:s().string.isRequired,primaryText:s().string.isRequired,secondaryText:s().string.isRequired,onCancel:s().func.isRequired},I.propTypes={title:s().string.isRequired,description:s().string.isRequired,buttonText:s().string.isRequired,onButtonClick:s().func.isRequired}},"./integrations/components/error-states/IntegrationNotSupported.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),r=n("../../node_modules/react/index.js"),a=n("./integrations/utils/CommonHelperMethods.ts"),l=n("./js/services/NavigationService.js"),c=n("./js/external-navigation/ExternalNavigationService.js"),d=n("./integrations/constants/integrationsConstants.ts");function u(e){let{apiId:t,apiVersionId:n,tab:s}=e,o={apiId:t,versionId:n},u={tab:s},p=(0,a.getURLFromBasePathAndRoute)(pm.artemisUrl,l.default.getURLForRoute("build.apiVersion",o,u));return r.createElement("div",{className:"unsupported-integrations-error-cta__subtitle"},"browser"===window.SDK_PLATFORM?r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_WEB_APP):r.createElement("div",null,r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_DESKTOP),r.createElement("span",{onClick:()=>(0,c.openExternalLink)(p||"#","_blank"),className:"unsupported-integrations-error-cta__subtitle__link"},r.createElement(i.default,{type:"link-primary",isExternal:!0},"web app"))))}function p(e){let t={title:"browser"===window.SDK_PLATFORM?d.INTEGRATION_NOT_SUPPORTED_TITLE_WEB_APP:d.INTEGRATION_NOT_SUPPORTED_TITLE_DESKTOP,subtitle:u(e)};return r.createElement("div",{className:"unsupported-integrations-error-cta"},r.createElement(s.default,{direction:"column",justifyContent:"center",alignItem:"center",alignSelf:"center"},r.createElement(o.default,{errorDetails:t})))}},"./integrations/monitoring/services/NewRelicService.js":function(e,t,n){n.r(t);var i=n("./node_modules/lodash/lodash.js"),s=n.n(i),o=n("./node_modules/moment/moment.js"),r=n.n(o),a=n("./node_modules/async/dist/async.js"),l=n.n(a),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./integrations/monitoring/constants.js");t.default={listServices:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listDashboards:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchChartUrls:(e,t,n,i)=>{let o={};l().parallel([function(i){c.default.fetchActionDetails(e,{type:"fetchWebTransactionsChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.webTransactionsChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchApdexScoreChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.apdexScoreChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchErrorRateChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.errorRateChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchThroughputChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.throughputChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))}],(e=>e?i(e):i(null,o)))},fetchStatistics:(e,t,n,i)=>{let o={};l().parallel([function(n){c.default.fetchActionDetails(e,{type:"fetchDeployments",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=s().map(s().get(e.body,"data.data.actor.entity.deployments"),(e=>({...e,timestamp:r()(s().get(e,"timestamp")).format("MMM DD h:mm A")})));return o.deployments=t,n()}throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchViolationEvents",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=s().map(s().get(e.body,"data.data.actor.entities[0].recentAlertViolations"),(e=>({...e,openedAt:r()(s().get(e,"openedAt")).format("MMM DD h:mm A"),closedAt:s().get(e,"closedAt")?r()(s().get(e,"closedAt")).format("MMM DD h:mm A"):"-"})));return o.violationEvents=t,n()}throw e})).catch((e=>n(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchSlowestWebTransactions",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status){let t=s().map(s().get(e.body,"data.data.actor.entity.nrdbQuery.results"),(e=>({name:s().replace(e.name,"WebTransaction/Custom/",""),avg_time:`${s().round(e.avg_time,2)} ms`,error_rate:`${s().round(e.error_rate,1)}%`})));return o.slowestTransactions=t,i()}throw e})).catch((e=>i(e)))}],(e=>e?i(e):i(null,o)))},fetchMetricsForLinkedServices:e=>c.default.fetchActionDetails(e,{type:"fetchMetricsForLinkedServices"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchLinkedDashboards:e=>c.default.fetchActionDetails(e,{type:"fetchLinkedDashboards"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listSevicesWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_SERVICES,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),listDashboardsWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_DASHBOARDS,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),authenticateApiKey:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e)))}},"./js/components/base/PasswordInput.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),o=n.n(s),r=n("./js/components/base/Inputs.js"),a=n("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=n("./js/components/base/Buttons.js"),c=n("./node_modules/prop-types/index.js"),d=n.n(c),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}class m extends i.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:n}=e;if(t){let i,s;for(let o=0;o<t.length;o++){const{validator:r,message:a,type:l}=t[o]||{};if("function"==typeof r&&!r(n,e)){i=l,s=a;break}}if(i)return this.state[i]!==s&&this.setState({[i]:s})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?i.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},i.createElement(u.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?i.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},i.createElement(u.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?i.createElement(r.Input,p({},e,{type:"password"})):i.createElement(a.AutoSuggestInput,p({},e,{enableVariableSuggestions:!0,type:"text"})):i.createElement(r.Input,p({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return i.createElement("div",{className:o()("password-input",e)},this.getPasswordInput(t),i.createElement("div",{className:"password-input-message"},this.getValidationIcon()),i.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?i.createElement(u.default,{name:"icon-action-hide-stroke",title:"Show"}):i.createElement(u.default,{name:"icon-action-view-stroke",title:"Hide"})))}}m.propTypes={className:d().string,inputStyle:d().oneOf(["box","line"]),size:d().oneOf(["huge"]),enableVariableSuggestions:d().bool,validation:d().arrayOf(d().shape({validator:d().func.isRequired,message:d().string,type:d().oneOf(["error","warning"])}))},m.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,n){n.r(t),n.d(t,{LoadingLabel:function(){return c},default:function(){return d}});var i=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),o=n.n(s),r=n("./node_modules/react-select-v1/dist/react-select.es.js"),a=n("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function c(e){return i.createElement(i.Fragment,null,e.loadingLabel||"Loading...",i.createElement("span",{className:"pm-select-loader"},i.createElement(a.default,null)))}class d extends i.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:n,className:s,label:a,isClearable:d,isCreatable:u,autoBlur:p=!0}=this.props;return u?i.createElement(r.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:o()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,s),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?i.createElement(c,this.props):a,scrollMenuIntoView:!1})):i.createElement(r.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:o()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,s),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?i.createElement(c,this.props):a,scrollMenuIntoView:!1}))}}d.defaultProps={size:"sm"},d.displayName="SelectDropdown"},"./js/stores/IntegrationsStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var i,s,o,r,a,l,c,d,u,p,m,g,h,f,I,b,v,y,S,E,C,j,_,P,A,w,T,k,L,D,R,x,B,N,O,F,V,U,M,H,W,z,G,q,K,$,J,Y,Q,Z,X,ee,te,ne,ie,se,oe=n("../../node_modules/mobx/lib/mobx.module.js"),re=n("./integrations/constants/integrationsConstants.ts"),ae=n("./js/stores/StoreManager.js"),le=n("./js/stores/SyncStatusStore.js"),ce=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),de=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),ue=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),pe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),me=(n("./integrations/monitoring/services/NewRelicService.js"),n("./integrations/monitoring/constants.js"),n("./node_modules/lodash/lodash.js"));function ge(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function he(e,t,n,i,s){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const fe=3e5,Ie=8e3;let be=(s=he((i=class{constructor(){ge(this,"activeIntegrationsView",s,this),ge(this,"serviceId",o,this),ge(this,"activeServiceDetailsId",r,this),ge(this,"ruleId",a,this),ge(this,"teamIntegrations",l,this),ge(this,"availableIntegrations",c,this),ge(this,"loadingAvailableIntegrations",d,this),ge(this,"loadingIntegrationClasses",u,this),ge(this,"loadingIntegrationServices",p,this),ge(this,"errorFetchingAvailableIntegrations",m,this),ge(this,"availableIntegrationsErrorDetails",g,this),ge(this,"filteredAvailableIntegrations",h,this),ge(this,"filterByCategoryAvailableIntegrations",f,this),ge(this,"integrationCategories",I,this),ge(this,"noTeamIntegrations",b,this),ge(this,"loadingTeamIntegrations",v,this),ge(this,"errorInFetchingTeamIntegrations",y,this),ge(this,"errorDetails",S,this),ge(this,"ruleSpecificTeamIntegrations",E,this),ge(this,"ruleSpecificTeamIntegrationErrors",C,this),ge(this,"serviceDetails",j,this),ge(this,"ruleDetails",_,this),ge(this,"noRuleSpecificTeamIntegrations",P,this),ge(this,"isHydrating",A,this),ge(this,"isAdding",w,this),ge(this,"categoryFilter",T,this),ge(this,"createFormActiveRuleId",k,this),ge(this,"createFormActiveServiceId",L,this),ge(this,"workspaces",D,this),ge(this,"entities",R,this),ge(this,"selectedWorkspace",x,this),ge(this,"selectedEntity",B,this),ge(this,"selectedEntityVersion",N,this),ge(this,"authDetails",O,this),ge(this,"errorFetchingAuthDetails",F,this),ge(this,"authDetailsError",V,this),ge(this,"runLogPageData",U,this),ge(this,"loadingRunLogPage",M,this),ge(this,"errorInFetchingRunLogPageData",H,this),ge(this,"runLogPageErrorDetails",W,this),ge(this,"sourceConflicting",z,this),ge(this,"refreshingRunLog",G,this),ge(this,"authType",q,this),ge(this,"availableIntegrationClasses",K,this),ge(this,"integrationCategories",$,this),ge(this,"availableIntegrationServices",J,this),ge(this,"availableIntegrationServicesByCategory",Y,this),ge(this,"filteredIntegrationServices",Q,this),ge(this,"preferredEntities",Z,this),ge(this,"integrationClass",X,this),ge(this,"loadingIntegrationClass",ee,this),ge(this,"errorFetchingIntegrationClass",te,this),ge(this,"integrationInstance",ne,this),ge(this,"loadingIntegrationInstance",ie,this),ge(this,"errorFetchingIntegrationInstance",se,this),this.initializeFetchingTeamIntegrations=me.debounce(this.initializeFetchingTeamIntegrations.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationClasses=me.debounce(this.getAvailableIntegrationClasses.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationServices=me.debounce(this.getAvailableIntegrationServices.bind(this),fe,{leading:!0,trailing:!1}),this.initializeRuleSpecificTeamIntegrations=((e,t,n)=>{const i={};return(...s)=>{const[o,r]=s;return"function"==typeof i[r]||(i[r]=me.debounce(e,t,{...n,leading:!0})),i[r](...s)}})(this.initializeRuleSpecificTeamIntegrations.bind(this),3e5,{leading:!0,trailing:!1})}setActiveIntegrationsView(e){this.activeIntegrationsView=e}readRuleSpecificTeamIntegrations(e){return(0,oe.toJS)(this.ruleSpecificTeamIntegrations[e])}readServiceDetails(e){return(0,oe.toJS)(this.serviceDetails[e])}readRuleDetails(e){return(0,oe.toJS)(this.ruleDetails[e])}setAuthType(e){this.authType=e}setRuleSpecificTeamIntegrations(e,t){this.ruleSpecificTeamIntegrations[e]=t}resetRuleSpecificTeamIntegrations(e){delete this.ruleSpecificTeamIntegrations[e]}setServiceDetails(e,t){this.serviceDetails[e]=t}setRuleDetails(e,t){this.ruleDetails[e]=t}resetServiceDetails(e){delete this.serviceDetails[e]}setActiveIntegrationRule(e,t){this.serviceId=e,this.ruleId=t}updateCategoryfilter(e){this.categoryFilter=e,this.updateIntegrationServicesPerCategory(e)}updateRuleSpecificTeamIntegrationsDataStatus(e,t,n,i){this.ruleSpecificTeamIntegrationErrors[i]={loading:e,error:t,errorDetails:n}}readRuleSpecificTeamIntegrationsDataStatus(e){return{loading:!0,...(0,oe.toJS)(this.ruleSpecificTeamIntegrationErrors[e])}}getRuleSpecificTeamIntegrationData(e,t){return this.updateRuleSpecificTeamIntegrationsDataStatus(!0,!1,"",t),Promise.all([de.default.fetchIntegrationClassDetails(t),de.default.fetchIntegrationServiceDetails(e),ce.default.getTeamIntegrationInstances(t)]).then((([n,i,s])=>{const o=me.get(s,"body.data",[]),r=me.get(n,"body.data",{}),a=me.get(i,"body.data",{});if(200!==n.status||200!==s.status||200!==i.status||me.isEmpty(r)||me.isEmpty(a)){let e={};(200!==n.status||me.isEmpty(r))&&(e.errorFetchingClassDetails=n),(200!==i.status||me.isEmpty(a))&&(e.errorFetchingServiceDetatils=i),200!==s.status&&(e.errorFetchingTeamIntegrations=s),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}else{if(me.isEmpty(o))this.setRuleSpecificTeamIntegrations(t,[]);else{let e=me.map(o,(e=>({id:e.id,name:e.name,userId:e.createdBy.id,userName:me.get(e,"createdBy.name")||me.get(e,"createdBy.username")||me.get(e,"createdBy.email")||"A user",isUserNameClickable:Boolean(me.get(e,"createdBy.name")||me.get(e,"createdBy.username")||me.get(e,"createdBy.email")),userProfileUrl:e.createdBy.profilePicUrl,status:e.status,apiDetails:e.entity.api,entityType:e.entity.type,entityId:e.entity.id,entityName:e.entity.name,lastRunAt:e.lastRunAt,clientCategories:e.clientCategories})));this.setRuleSpecificTeamIntegrations(t,e)}this.setServiceDetails(e,a),this.setRuleDetails(t,r),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!1,"",t)}})).catch((n=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,n,t),this.resetRuleSpecificTeamIntegrations(t),this.resetServiceDetails(e)}))}getTeamIntegrationsData(){return this.setLoadingIntegrationClasses(!0),this.setLoadingIntegrationServices(!0),Promise.all([de.default.fetchAvailableClasses(),de.default.fetchAvailableServices(),ce.default.getTeamIntegrations()]).then((([e,t,n])=>{const i=me.get(t,"body.data",[]),s=me.get(e,"body.data",[]),o=me.get(n,"body.data",[]);if(200!==e.status||200!==n.status||200!==t.status||me.isEmpty(i)||me.isEmpty(s)){let o={};(200!==t.status||me.isEmpty(i))&&(o.errorFetchingServices=t),(200!==e.status||me.isEmpty(s))&&(o.errorFetchingClasses=e),200!==n.status&&(o.errorFetchingTeamIntegrations=n),this.updateData(!1,[]),this.updateState(!1,!0,o)}else{if(me.isEmpty(o))this.updateData(!0,[]),this.updateState(!1,!1,"");else{const e=me.groupBy(o,"rule"),t=me.map(e,((e,t)=>{const n=e[0].service,o=me.find(s,(e=>e.id===t)),r=me.find(i,(e=>e.id===n));return{ruleName:me.get(o,"name"),ruleId:t,serviceId:n,serviceName:me.get(r,"name",""),serviceIconURL:me.get(r,"iconUrl",""),serviceDarkIconURL:me.get(r,"darkIconUrl",""),statusCount:me.countBy(e,(e=>e.status)),totalIntegrations:e.length}})),n=this.defaultSortTeamIntegrations(t);this.updateData(!1,n),this.updateState(!1,!1,"")}const e=this.addDisplayNameToIntegrationClasses(s);this.setAvailableIntegrationClasses(e),this.setAvailableIntegrationServices(i),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory)}this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!1,"")})).catch((e=>{pm.logger.error("Error in fetching team integrations",e),this.updateData(!1,[]),this.updateState(!1,!0,e),this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!0,e)}))}setIsHydrating(e){this.isHydrating=e}updateState(e,t,n){this.loadingTeamIntegrations=e,this.errorInFetchingTeamIntegrations=t,this.errorDetails=n}updateData(e,t){this.noTeamIntegrations=e,this.teamIntegrations=t}updateAvailableIntegrations(e){this.availableIntegrations=e}updateIntegrationCategories(){this.integrationCategories=ue.default.getAllCategories(this.availableIntegrations)}setAvailableIntegrationServices(e){this.availableIntegrationServices=e}addDisplayNameToIntegrationClasses(e){const t={};return me.forEach(e,(e=>{const n=me.get(e,"services",[]);me.forEach(n,(n=>{me.get(t,n.id)?t[n.id].push(e.id):t[n.id]=[e.id]}))})),me.forEach(e,(e=>{const n=me.get(e,"services.0",{});e.displayName=me.size(t[n.id])>1?e.name:n.name})),e}setAvailableIntegrationClasses(e){this.availableIntegrationClasses=e}getIntegrationCategoriesFromServices(){this.integrationCategories=ue.default.getAllIntegrationCategories(this.availableIntegrationServices)}updateIntegrationServicesPerCategory(e){let t=ue.default.filterByCategory(e,(0,oe.toJS)(this.availableIntegrationServices));me.isEmpty(t)&&!me.isEmpty((0,oe.toJS)(this.availableIntegrationServices))&&(this.updateCategoryfilter("all"),t=(0,oe.toJS)(this.availableIntegrationServices)),this.availableIntegrationServicesByCategory=t}updateFilteredIntegrationServices(e){this.filteredIntegrationServices=e}updateAvailableIntegrationsStatus(e,t,n){this.loadingAvailableIntegrations=e,this.errorFetchingAvailableIntegrations=t,this.availableIntegrationsErrorDetails=n}setLoadingIntegrationServices(e){this.loadingIntegrationServices=e}setLoadingIntegrationClasses(e){this.loadingIntegrationClasses=e}updateFilteredAvailableIntegrations(e){this.filteredAvailableIntegrations=e}updateFilterByCategoryAvailableIntegrations(e){let t=ue.default.filterByCategory(e,(0,oe.toJS)(this.availableIntegrations));me.isEmpty(t)&&!me.isEmpty((0,oe.toJS)(this.availableIntegrations))&&(this.updateCategoryfilter("all"),t=(0,oe.toJS)(this.availableIntegrations)),this.filterByCategoryAvailableIntegrations=t}initializeFetchingTeamIntegrations(){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:Ie}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}initializeRuleSpecificTeamIntegrations(e,t){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:Ie}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchRuleSpecificTeamIntegrations(e,t){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:Ie}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchTeamIntegrations(){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:Ie}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}getAvailableIntegrationClasses(){return this.setLoadingIntegrationClasses(!0),de.default.fetchAvailableClasses().then((e=>{const t=this.addDisplayNameToIntegrationClasses(me.get(e,"body.data",[]));this.setAvailableIntegrationClasses(t),this.updateAvailableIntegrationsStatus(!1,!1,""),this.setLoadingIntegrationClasses(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationClasses(!1),pm.logger.error("Error occurred while fetching available integration classes",e)}))}getAvailableIntegrationServices(){return this.setLoadingIntegrationServices(!0),de.default.fetchAvailableServices().then((e=>{this.setAvailableIntegrationServices(me.get(e,"body.data",[])),this.updateAvailableIntegrationsStatus(!1,!1,""),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory),this.setLoadingIntegrationServices(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationServices(!1),pm.logger.error("Error occurred while fetching available integration services",e)}))}populateIntegrationClasses(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:Ie}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationClasses()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}populateIntegrationServices(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:Ie}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationServices()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}setActiveIntegrationService(e){this.activeServiceDetailsId=e}setActiveIntegrationCreateForm(e,t){this.createFormActiveServiceId=e,this.createFormActiveRuleId=t}setSelectedWorkspace(e){this.selectedWorkspace=e}setSelectedEntity(e){this.selectedEntity=e}setSelectedEntityVersion(e){this.selectedEntityVersion=e}resetSelectedWorkspace(){this.selectedWorkspace=null}resetSelectedEntity(){this.selectedEntity=null}resetSelectedEntityVersion(){this.selectedEntityVersion=null}resetAddIntegrationDependencies(){this.resetSelectedEntityVersion(),this.resetSelectedEntity(),this.resetSelectedWorkspace()}updateIsAdding(e){this.isAdding=e}updateSourceConflicting(e){this.sourceConflicting=e}readTeamIntegrations(){return(0,oe.toJS)(this.teamIntegrations)}updateIdentityResponse(e){this.authDetails=me.get(e,"body.handover")}updateIdentityResponseStatus(e,t){this.errorFetchingAuthDetails=e,this.authDetailsError=t}setAuthDetails(e){this.authDetails=e}readAuthDetails(){return(0,oe.toJS)(this.authDetails)}defaultSortTeamIntegrations(e){const t=me.filter(e,(e=>!!e.statusCount.failed)),n=me.sortBy(t,(e=>me.toLower(e.ruleName))),i=me.sortBy(me.difference(e,n),(e=>me.toLower(e.ruleName)));return me.concat(n,i)}updateRunsPageResponseStatus(e,t,n){this.loadingRunLogPage=e,this.errorInFetchingRunLogPageData=t,this.runLogPageErrorDetails=n}updateRunsPageResponse(e){this.runLogPageData=e}readIntegrationRunLogData(){return(0,oe.toJS)(this.runLogPageData)}updateRefreshingRunLog(e){this.refreshingRunLog=e}addPreferredEntity(e,t){const n={entityType:e,entityId:t};me.some(this.preferredEntities,n)||this.preferredEntities.push(n)}getIntegrationClassDetails(e){return this.loadingIntegrationClass=!0,new Promise(((t,n)=>{de.default.fetchIntegrationClassDetails(e).then((e=>{const n=me.get(e,"body.data");200!==e.status||me.isEmpty(n)?this.errorFetchingIntegrationClass=e:(this.integrationClass=n,this.errorFetchingIntegrationClass=!1),this.loadingIntegrationClass=!1,t()})).catch((t=>{pm.logger.error("Error in fetching integration class details",e,t),this.errorFetchingIntegrationClass=t,this.loadingIntegrationClass=!1,n(t)}))}))}getIntegrationInstanceDetails(e){this.loadingIntegrationInstance=!0,pe.default.fetchIntegrationInstanceDetails(e).then((e=>{const t=me.get(e,"body.data");200!==e.status||me.isEmpty(t)?this.errorFetchingIntegrationInstance=e:(t.allowedActions=me.get(e,"body.meta.allowedActions"),this.integrationInstance=t,this.errorFetchingIntegrationInstance=!1),this.loadingIntegrationInstance=!1})).catch((t=>{pm.logger.error("Error in fetching integration instance details",e,t),this.errorFetchingIntegrationInstance=t,this.loadingIntegrationInstance=!1}))}getIntegrationClasses(){return me.isEmpty(this.availableIntegrationClasses)&&this.populateIntegrationClasses(),this.availableIntegrationClasses}getIntegrationServices(){return me.isEmpty(this.availableIntegrationServices)&&this.populateIntegrationServices(),this.availableIntegrationServices}}).prototype,"activeIntegrationsView",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.INTEGRATIONS_VIEW.TEAM}}),o=he(i.prototype,"serviceId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r=he(i.prototype,"activeServiceDetailsId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=he(i.prototype,"ruleId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=he(i.prototype,"teamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=he(i.prototype,"availableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=he(i.prototype,"loadingAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=he(i.prototype,"loadingIntegrationClasses",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=he(i.prototype,"loadingIntegrationServices",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=he(i.prototype,"errorFetchingAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=he(i.prototype,"availableIntegrationsErrorDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=he(i.prototype,"filteredAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=he(i.prototype,"filterByCategoryAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=he(i.prototype,"integrationCategories",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=he(i.prototype,"noTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=he(i.prototype,"loadingTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=he(i.prototype,"errorInFetchingTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=he(i.prototype,"errorDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=he(i.prototype,"ruleSpecificTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=he(i.prototype,"ruleSpecificTeamIntegrationErrors",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),j=he(i.prototype,"serviceDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=he(i.prototype,"ruleDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),P=he(i.prototype,"noRuleSpecificTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=he(i.prototype,"isHydrating",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=he(i.prototype,"isAdding",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=he(i.prototype,"categoryFilter",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),k=he(i.prototype,"createFormActiveRuleId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=he(i.prototype,"createFormActiveServiceId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=he(i.prototype,"workspaces",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=he(i.prototype,"entities",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=he(i.prototype,"selectedWorkspace",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=he(i.prototype,"selectedEntity",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=he(i.prototype,"selectedEntityVersion",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=he(i.prototype,"authDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F=he(i.prototype,"errorFetchingAuthDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=he(i.prototype,"authDetailsError",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=he(i.prototype,"runLogPageData",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=he(i.prototype,"loadingRunLogPage",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=he(i.prototype,"errorInFetchingRunLogPageData",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=he(i.prototype,"runLogPageErrorDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=he(i.prototype,"sourceConflicting",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=he(i.prototype,"refreshingRunLog",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=he(i.prototype,"authType",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=he(i.prototype,"availableIntegrationClasses",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=he(i.prototype,"integrationCategories",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=he(i.prototype,"availableIntegrationServices",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=he(i.prototype,"availableIntegrationServicesByCategory",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=he(i.prototype,"filteredIntegrationServices",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=he(i.prototype,"preferredEntities",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=he(i.prototype,"integrationClass",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=he(i.prototype,"loadingIntegrationClass",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=he(i.prototype,"errorFetchingIntegrationClass",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=he(i.prototype,"integrationInstance",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=he(i.prototype,"loadingIntegrationInstance",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=he(i.prototype,"errorFetchingIntegrationInstance",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he(i.prototype,"setActiveIntegrationsView",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationsView"),i.prototype),he(i.prototype,"setAuthType",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAuthType"),i.prototype),he(i.prototype,"setRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"resetRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"setServiceDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setServiceDetails"),i.prototype),he(i.prototype,"setRuleDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setRuleDetails"),i.prototype),he(i.prototype,"resetServiceDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetServiceDetails"),i.prototype),he(i.prototype,"setActiveIntegrationRule",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationRule"),i.prototype),he(i.prototype,"updateCategoryfilter",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateCategoryfilter"),i.prototype),he(i.prototype,"updateRuleSpecificTeamIntegrationsDataStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRuleSpecificTeamIntegrationsDataStatus"),i.prototype),he(i.prototype,"getRuleSpecificTeamIntegrationData",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getRuleSpecificTeamIntegrationData"),i.prototype),he(i.prototype,"getTeamIntegrationsData",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getTeamIntegrationsData"),i.prototype),he(i.prototype,"setIsHydrating",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setIsHydrating"),i.prototype),he(i.prototype,"updateState",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateState"),i.prototype),he(i.prototype,"updateData",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateData"),i.prototype),he(i.prototype,"updateAvailableIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateAvailableIntegrations"),i.prototype),he(i.prototype,"updateIntegrationCategories",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationCategories"),i.prototype),he(i.prototype,"setAvailableIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAvailableIntegrationServices"),i.prototype),he(i.prototype,"setAvailableIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAvailableIntegrationClasses"),i.prototype),he(i.prototype,"getIntegrationCategoriesFromServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getIntegrationCategoriesFromServices"),i.prototype),he(i.prototype,"updateIntegrationServicesPerCategory",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationServicesPerCategory"),i.prototype),he(i.prototype,"updateFilteredIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateFilteredIntegrationServices"),i.prototype),he(i.prototype,"updateAvailableIntegrationsStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateAvailableIntegrationsStatus"),i.prototype),he(i.prototype,"setLoadingIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setLoadingIntegrationServices"),i.prototype),he(i.prototype,"setLoadingIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setLoadingIntegrationClasses"),i.prototype),he(i.prototype,"updateFilteredAvailableIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateFilteredAvailableIntegrations"),i.prototype),he(i.prototype,"updateFilterByCategoryAvailableIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateFilterByCategoryAvailableIntegrations"),i.prototype),he(i.prototype,"initializeFetchingTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"initializeFetchingTeamIntegrations"),i.prototype),he(i.prototype,"initializeRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"initializeRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"refetchRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"refetchRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"refetchTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"refetchTeamIntegrations"),i.prototype),he(i.prototype,"getAvailableIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getAvailableIntegrationClasses"),i.prototype),he(i.prototype,"getAvailableIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getAvailableIntegrationServices"),i.prototype),he(i.prototype,"populateIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"populateIntegrationClasses"),i.prototype),he(i.prototype,"populateIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"populateIntegrationServices"),i.prototype),he(i.prototype,"setActiveIntegrationService",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationService"),i.prototype),he(i.prototype,"setActiveIntegrationCreateForm",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationCreateForm"),i.prototype),he(i.prototype,"setSelectedWorkspace",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedWorkspace"),i.prototype),he(i.prototype,"setSelectedEntity",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedEntity"),i.prototype),he(i.prototype,"setSelectedEntityVersion",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedEntityVersion"),i.prototype),he(i.prototype,"resetSelectedWorkspace",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetSelectedWorkspace"),i.prototype),he(i.prototype,"resetSelectedEntity",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetSelectedEntity"),i.prototype),he(i.prototype,"resetSelectedEntityVersion",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetSelectedEntityVersion"),i.prototype),he(i.prototype,"resetAddIntegrationDependencies",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetAddIntegrationDependencies"),i.prototype),he(i.prototype,"updateIsAdding",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIsAdding"),i.prototype),he(i.prototype,"updateSourceConflicting",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateSourceConflicting"),i.prototype),he(i.prototype,"updateIdentityResponse",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIdentityResponse"),i.prototype),he(i.prototype,"updateIdentityResponseStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIdentityResponseStatus"),i.prototype),he(i.prototype,"setAuthDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAuthDetails"),i.prototype),he(i.prototype,"updateRunsPageResponseStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRunsPageResponseStatus"),i.prototype),he(i.prototype,"updateRunsPageResponse",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRunsPageResponse"),i.prototype),he(i.prototype,"updateRefreshingRunLog",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRefreshingRunLog"),i.prototype),he(i.prototype,"addPreferredEntity",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"addPreferredEntity"),i.prototype),he(i.prototype,"getIntegrationClassDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getIntegrationClassDetails"),i.prototype),he(i.prototype,"getIntegrationInstanceDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getIntegrationInstanceDetails"),i.prototype),i)},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n("../../node_modules/react/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),r=n("./js/stores/StoreManager.js"),a=n("./js/stores/IntegrationsStore.js"),l=n("../../node_modules/mobx/lib/mobx.module.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}function d(e){let{disabled:t,workspaceId:n,payload:d,integrationFormActions:u,source:p,showDivider:m,...g}=e,h="basic_auth"!==(f=(0,l.toJS)((0,r.resolveStoreInstance)(a.default).authType))&&"token"!==f;var f;return p||(p="team_integrations_create_forms"),i.createElement("div",null,m&&i.createElement("hr",{className:"integration-add-actions-separator"}),i.createElement(o.default,c({disabled:t,workspaceId:n,payload:d},g,{redirect:e.redirect,integrationFormActions:u,source:p,alignLeft:h})),i.createElement(s.default,c({alignLeft:h,integrationFormActions:u,payload:d,source:p},g)))}d.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var i=n("../../node_modules/react/index.js");function s(e){const{imageSrc:t,displayField:n}=e;return i.createElement("div",{className:"integrations-add-card__authed-user"},i.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&i.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),i.createElement("span",{className:"integrations-add-card__authed-user__name"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var i=n("../../node_modules/react/index.js");function s(e){const{className:t,extUrl:n,target:s}=e;return i.createElement("a",{className:t,href:n,rel:"_blank"===s?"noopener noreferrer":"",target:s,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i,s=n("../../node_modules/react/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),r=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./monitors/services/MonitorService.js"),d=n("./js/services/NavigationService.js"),u=n("./api-dev/services/APIDevService.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=(n("./js/modules/services/RemoteSyncRequestService.js"),n("./integrations/constants/integrationsConstants.ts")),h=n("./runtime-repl/collection/_api/CollectionInterface.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),b=n("./js/external-navigation/ExternalNavigationService.js"),v=n("./api-dev/interfaces/APIInterface.js"),y=n("../../node_modules/mobx/lib/mobx.module.js"),S=n("./node_modules/lodash/lodash.js"),E=n.n(S);const C="Malformed response",j={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},_={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let P=(0,p.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===g.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===g.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,y.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:E().get(e,"name"),value:E().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(E().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===g.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===g.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===g.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===g.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===g.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return j[this.props.entity]?j[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,i){return new Promise(((i,s)=>{const o=e.map((e=>({id:E().get(e,"apiversion"===n?"api":"id")})));let r=null;g.INTEGRATION_FORM_MODE.ADD,r=m.default.fetchCreatePermissions,r(t,n,o).then((t=>(E().forEach(E().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),i(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}fetchCollections(e){e?(0,h.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(C);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===g.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?c.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(C);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===g.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?c.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(C);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===g.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?u.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(C);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===g.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await u.default.getVersions(e);let{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(C);if(this.props.rule&&this.props.mode){const e="apiversion";n=await this.fetchAndAssignPermissions(n,this.props.rule,e,this.props.mode)}this.props.entity===g.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(E().find(n,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:n,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){E().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==g.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===g.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return s.createElement(f.default,{alignItems:"center",direction:"column"},s.createElement("div",null,"This workspace doesn't have any monitors."),s.createElement("div",{onClick:()=>{"workspace"===E().split(d.default.getCurrentURL(),"/",1)[0]?d.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,b.openExternalLink)(d.default.getBaseURL()+"/"+d.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},s.createElement(I.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===g.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:n}=this.state;if(e===g.entityTypes.API_VERSIONS){const e=await(0,v.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(n[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:n,entityVersions:i,firstLoad:r,shouldHideDropdown:a}=this.state,{selectedEntity:l,selectedEntityVersion:c}=this.store;return a?null:s.createElement(o.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===g.entityTypes.API_VERSIONS?i:n,value:this.props.value||(this.props.entity===g.entityTypes.API_VERSIONS?c:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||E().get(_,this.props.entity),emptyStateError:!e&&(this.props.entity===g.entityTypes.API_VERSIONS?i.length>0&&!c:n.length>0&&!l)&&!r&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var i,s=n("../../node_modules/react/index.js"),o=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./monitors/services/MonitorService.js"),l=n("./api-dev/services/APIDevService.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./runtime-repl/collection/_api/CollectionInterface.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("./js/components/base/LoadingIndicator.js"),h=n("./integrations/api-observability/components/base/CustomDropdown.js"),f=n("./node_modules/lodash/lodash.js");const I="Malformed response",b={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},v={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let y=(0,c.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===u.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:f.get(e,"name"),value:f.get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(f.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===u.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===u.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===u.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return b[this.props.entity]?b[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,i){return new Promise(((i,s)=>{const o=e.map((e=>({id:f.get(e,"apiversion"===n?"api":"id")})));let r=null;u.INTEGRATION_FORM_MODE.ADD,r=d.default.fetchCreatePermissions,r(t,n,o).then((t=>(f.forEach(f.zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),i(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}fetchCollections(e){e?(0,p.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(I);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?a.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(I);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?a.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(I);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(I);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(I);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(f.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){f.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==u.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===u.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:n,entityVersions:i,firstLoad:o}=this.state,{selectedEntity:r,selectedEntityVersion:a}=this.store;return t||!e&&(this.props.entity===u.entityTypes.API_VERSIONS?i.length>0&&!f.get(a,"value"):n.length>0&&!f.get(r,"value"))&&!o?{status:"error",message:t?s.createElement("div",null,t,s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return s.createElement(m.default,{justifyContent:"space-between"},s.createElement("div",null,"Loading..."),s.createElement(g.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return v[this.props.entity]?v[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:n}=this.state,{selectedEntity:i,selectedEntityVersion:o}=this.store;return s.createElement(h.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===u.entityTypes.API_VERSIONS?n:t,value:this.props.entity===u.entityTypes.API_VERSIONS?o:i,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),s=n("./js/components/base/Inputs.js"),o=n("./node_modules/lodash/lodash.js"),r=n.n(o);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:o,optionalText:l,id:c,disabled:d,error:u,...p}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},n," ",o?i.createElement("span",null,"(",l||"optional",")"):""),i.createElement("div",{className:"integrations-add-card__label-description"},t),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(s.Input,a({inputStyle:"box",type:"text",disabled:d,error:r().isEmpty(u)?"":"This is a mandatory field"},p)),r().isEmpty(u)?"":i.createElement("div",{className:"integrations-add-card__error"},u)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),s=n("./js/components/base/Inputs.js"),o=n("./node_modules/lodash/lodash.js"),r=n.n(o);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e){const{id:t,error:n,...o}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),i.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(s.Input,a({id:t,inputStyle:"box",type:"text",error:r().isEmpty(n)?"":"This is a mandatory field"},o)),r().isEmpty(n)?"":i.createElement("div",{className:"integrations-add-card__error"},n)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),s=(n("./js/components/base/Inputs.js"),n("./node_modules/lodash/lodash.js")),o=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function c(e){const{id:t,error:n,...s}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement(r.default,l({id:t,label:i.createElement(a.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:o().isEmpty(n)?"":"error",validationMessage:o().isEmpty(n)?"":"This is a mandatory field"},s)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i=n("../../node_modules/react/index.js"),s=n("./js/components/base/InputSelectV2.js"),o=n("./js/components/base/SearchHighlighter.js"),r=n("./node_modules/lodash/lodash.js");class a extends i.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,n={}){return!t||n.firstRender?e:r.filter(e,(e=>e.id&&r.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,n=r.find(e,(e=>e.id===t.id));return n||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,n={}){const s=e.name,r=e.id;return t&&!n.firstRender?i.createElement("div",{className:"input-select-item",key:r},i.createElement(o.default,{source:s,query:t})):i.createElement("div",{className:"input-select-item",key:r},s)}render(){var{title:e,description:t,customLabel:n,showCustomLabel:o,filterItems:r}=this.props;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},e),i.createElement("div",{className:"integrations-add-card__label-description"},t),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(s.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,r),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),o?n:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n("../../node_modules/react/index.js"),s=n("./js/components/base/SelectDropdown.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./version-control/common/ForkLabel.js"),c=n("./node_modules/lodash/lodash.js");class d extends i.Component{constructor(e){super(e),this.optionRenderer=e=>i.createElement(o.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!c.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,n=null;if(t&&(n=c.find(e,(e=>c.isEqual(e.value,t.value)))),n){let e,t;var s,o,d,u,p;return n.isForked?(e={id:null===(s=n)||void 0===s?void 0:s.id,forkLabel:null===(o=n)||void 0===o?void 0:o.forkLabel,model:null===(d=n)||void 0===d?void 0:d.type},t={id:null===(u=n)||void 0===u?void 0:u.baseCollectionUid,model:null===(p=n)||void 0===p?void 0:p.type},n={...n,label:i.createElement(r.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},i.createElement(a.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},n.label),i.createElement(l.default,{forkedEntity:e,baseEntity:t,label:n.forkLabel}))}):n}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:n,error:o,isCreatable:r,isClearable:a,noResultsForSearch:l,optional:d,noOptionsForDropdown:u,loading:p,disabled:m,handleRetry:g,checkForValidInput:h,customInputMessage:f,emptyStateError:I,label:b}=this.props;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},e," ",d?i.createElement("span",null,"(optional)"):""),i.createElement("div",{className:"integrations-add-card__label-description"},t),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(s.default,{isCreatable:r,isClearable:a,multi:this.props.multi,label:b,optionRenderer:this.optionRenderer,loading:p,className:(I||o)&&"is-error",disabled:m,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:n&&0!==n.length?l:u,options:n,isValidNewOption:h||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,f),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),I?i.createElement("span",{className:"integrations-add-card__error"},I):o?i.createElement("span",{className:"integrations-add-card__error"},o+". ",c.isFunction(g)&&i.createElement("span",{onClick:g,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n("../../node_modules/react/index.js"),s=n("./js/components/base/PasswordInput.js"),o=n("./node_modules/lodash/lodash.js"),r=n.n(o),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}const p=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function m(e){const{isInlineSaveVisible:t,inlineSaveButtonData:n,onSave:o,value:a}=e,{isSaveDisabled:l,integrationId:m,payload:g}=n||{};return i.createElement(d.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},i.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:n,optional:o,id:a,customLink:l,error:c,descriptionClass:d,maskedPlaceholderWhenEmpty:m,...g}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},n," ",o?i.createElement("span",null,"(optional)"):""),i.createElement("div",{className:d||"integrations-add-card__label-description"},t," ",l),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(s.default,u({inputStyle:"box",type:"text",error:r().isEmpty(c)?"":"This is a mandatory field",placeholder:m?"************":""},g,{className:p(e.className,e.error)})),r().isEmpty(c)?"":i.createElement("div",{className:"integrations-add-card__error"},c)))})(e)),t&&i.createElement(c.default,{isSaveDisabled:l,integrationId:m,payload:g,onSave:o,value:a}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),o=n.n(s),r=(n("./node_modules/classnames/index.js"),n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:s,id:l,customLink:c,error:d,descriptionClass:u,maskedPlaceholderWhenEmpty:p,...m}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",s?i.createElement("span",null,"(optional)"):""),i.createElement("div",{className:u||"integrations-add-card__label-description"},t," ",c),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(r.default,a({type:"password",placeholder:p?"************":""},m)),o().isEmpty(d)?"":i.createElement("div",{className:"integrations-add-card__error"},d)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i,s=n("../../node_modules/react/index.js"),o=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./node_modules/lodash/lodash.js");let m=(0,c.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{o.default.findAll({limit:50,...e&&{cursor:e}}).then((i=>(e=p.get(i,"meta.nextCursor"),t=p.unionBy(t,i.data,"id"),n()))).catch((e=>n(e)))}),(()=>p.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const i=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:i,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),p.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:n,firstLoad:i,shouldDisableDropdown:o}=this.state,{selectedWorkspace:a}=this.store;return!o&&s.createElement(r.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||o,error:t,entityType:u.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&n.length>0&&!a&&!i&&"Please select a workspace",options:n,value:a,onTargetSelect:this.onTargetSelect})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i,s=n("../../node_modules/react/index.js"),o=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./integrations/api-observability/components/base/CustomDropdown.js"),m=n("./node_modules/lodash/lodash.js");let g=(0,c.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{o.default.findAll({limit:50,...e&&{cursor:e}}).then((i=>(e=m.get(i,"meta.nextCursor"),t=m.unionBy(t,i.data,"id"),n()))).catch((e=>n(e)))}),(()=>m.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const i=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:i,loading:!1})}}))}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),m.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1}))}renderLoadingState(){return s.createElement(r.default,{justifyContent:"space-between"},s.createElement("div",null,"Loading..."),s.createElement(u.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(){let{error:e,firstLoad:t,loading:n,workspaces:i}=this.state,{selectedWorkspace:o}=this.store;return e||!n&&i.length>0&&!m.get(o,"value")&&!t?{status:"error",message:e?s.createElement("div",null,"Unable to load workspaces.",s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchAllWorkspaces()}},"Retry")):"Please select a workspace."}:{}}render(){const{loading:e,workspaces:t,shouldDisableDropdown:n}=this.state,{selectedWorkspace:i}=this.store;return!n&&s.createElement(p.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||n,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,validationState:this.getValidationState(),options:t||[],value:i,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found"})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i,s=n("../../node_modules/react/index.js"),o=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./js/modules/services/AnalyticsService.js"),m=n("./node_modules/classnames/index.js"),g=n.n(m),h=n("./js/components/base/LoadingIndicator.js"),f=n("./node_modules/lodash/lodash.js");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I.apply(this,arguments)}let b=(0,u.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:n,rule:i,service:a,alignLeft:l,integrationFormActions:u,source:m,labels:b,...v}=this.props,y=(null==b?void 0:b.add)||"Add Integration";let S=m||"team_integrations_create_forms";return s.createElement("div",{"data-testid":"add-integration-button",className:g()("integrations-add-actions__button--container",{"align-left":l})},s.createElement(o.Button,I({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():r.default.createIntegration(n||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&f.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),p.default.addEventV2({category:"integrations",action:i+"_created_integration",label:S,value:1}),u)u(t);else{if("api_github"===i&&"github"===a)c.default.transitionTo(d.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:f.get(e,"body.data.id")},{apiId:t.executor,workspaceId:n});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;c.default.transitionTo(e,t,n)}else c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:i});this.store.refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies(),this.store.setRuleSpecificTeamIntegrations(i,null)}else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(f.get(e,"error.details.message")||f.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},v)," ",this.store.isAdding?s.createElement(h.default,null):y))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i,s=n("../../node_modules/react/index.js"),o=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/services/NavigationService.js"),d=n("./node_modules/classnames/index.js"),u=n.n(d);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}let m=(0,l.observer)(i=class extends s.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(r.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,integrationFormActions:i,payload:o,labels:r,...l}=this.props,d=(null==r?void 0:r.cancel)||"Cancel";return s.createElement("div",{"data-testid":"cancel-integration-addition-button",className:u()("integrations-add-actions__button--container",{"align-left":n})},s.createElement(a.Button,p({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{i?i(o,"cancel"):(c.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",d," "))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n("../../node_modules/react/index.js"),s=n("./js/components/base/Tooltips.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=n("./integrations/constants/integrationsConstants.ts"),g=n("./collaboration/utils/util.js"),h=n("./version-control/common/ForkLabel.js"),f=n("./node_modules/lodash/lodash.js");class I extends i.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:n,workspaceId:I}=this.props;let b,v;return e.isForked&&(b={id:e.id,forkLabel:e.forkLabel,model:e.type},v={id:e.baseCollectionUid,model:e.type}),i.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!f.isEmpty(t)&&e.disabled&&i.createElement(s.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},i.createElement(s.TooltipBody,null,t)),i.createElement(o.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let n=e.disabled?"content-color-tertiary":"",s={[m.entityTypes.COLLECTIONS]:i.createElement(a.default,{color:n}),[m.entityTypes.COLLECTIONS_FORKED]:i.createElement(l.default,{color:n}),[m.entityTypes.APIS]:i.createElement(c.default,{color:n}),[m.entityTypes.MONITORS]:i.createElement(d.default,{color:n}),[m.entityTypes.API_VERSIONS]:i.createElement(u.default,{color:n})};return t===m.entityTypes.WORKSPACES?i.createElement(p.default,{name:g.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===m.entityTypes.COLLECTIONS&&e&&e.forkLabel?s[m.entityTypes.COLLECTIONS_FORKED]:s[t]})(e,n),i.createElement(o.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},i.createElement(r.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&i.createElement(h.default,{workspaceId:I,forkedEntity:b,baseEntity:v,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=n("./js/external-navigation/ExternalNavigationService.js");function r(e){const{extUrl:t}=e;return i.createElement("span",{onClick:()=>(0,o.openExternalLink)(t,"_blank")},i.createElement(s.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,n){n.r(t),n.d(t,{AddIntegrationActions:function(){return m.default},AuthUserSegment:function(){return h.default},CustomLink:function(){return g.default},EntitySelector:function(){return u.default},EntitySelectorV2:function(){return p.default},FieldSegment:function(){return i.default},NicknameFieldSegment:function(){return s.default},NicknameFieldSegmentV2:function(){return o.default},SelectSegment:function(){return a.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return r.default},SensitiveFieldSegmentV2:function(){return f.default},WorkspaceSelector:function(){return c.default},WorkspaceSelectorV2:function(){return d.default}});var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js":function(e,t,n){n.r(t),t.default={isSecureUrl:function(e){return/^https:\/\/[^.]+\..+$/i.test(e)},isBaseUrl:function(e){return e&&"/"!==e.charAt(e.length-1)},isValidUrl:function(e){return/^https{0,1}:\/\/[^.]+\..+$/i.test(e)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:n,payload:l,value:c}=e,[d,u]=(0,i.useState)(!1);return i.createElement(s.default,{className:"integrations-edit-actions__button--container-inline"},i.createElement(o.default,{type:"secondary",text:"Cancel",isDisabled:d,onClick:()=>{e.onSave("",a.RESET)}}),i.createElement(o.default,{type:"primary",text:"Save",isDisabled:t,isLoading:d,onClick:()=>{u(!0),r.default.updateIntegration(n,l).then((t=>{e.onSave(c)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{u(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var i=n("../../node_modules/react/index.js");class s extends i.Component{render(){return i.createElement("div",{className:"team-integrations-offline-state"},i.createElement("div",{className:"team-integrations-offline-state__illustration-wrapper"},i.createElement("div",{className:"offline__illustration"})),i.createElement("div",{className:"team-integrations-offline-state__title"},this.props.title||"You're offline"),i.createElement("div",{className:"team-integrations-offline-state__subtitle"},this.props.subtitle||"You need to have an active internet connection to access integrations."))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),o=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("./node_modules/lodash/lodash.js");class c extends i.Component{constructor(e){super(e)}render(){return i.createElement("div",{className:"team-integrations-error-state"},i.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=i.createElement(r.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=i.createElement(a.default,null)),t}(this.props.errorDetails)),i.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),i.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}c.propTypes={errorDetails:o().object,origin:o().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,n){n.r(t),n.d(t,{RESET:function(){return i}});const i="reset"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");const s="integrations";t.default={fetchIntegrationClassDetails(e,t){const n=`/integration-classes/${e}`;return i.HTTPGatewayService.request({data:{service:s,method:"get",path:n,query:t}})},fetchAvailableClasses:()=>i.HTTPGatewayService.request({data:{service:s,method:"get",path:"/integration-classes"}}),fetchAvailableServices:()=>i.HTTPGatewayService.request({data:{service:s,method:"get",path:"/services"}}),fetchIntegrationServiceDetails(e,t){const n=`/services/${e}`;return i.HTTPGatewayService.request({data:{service:s,method:"get",path:n,query:t}})}}},"./runtime-repl/environment/workbench/EnvironmentSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var i,s,o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("../../node_modules/react/index.js"),l=n("./node_modules/classnames/index.js"),c=n.n(l),d=n("./js/components/base/InputSelectV2.js"),u=n("./js/components/base/SearchHighlighter.js"),p=n("./js/components/base/XPaths/XPath.js"),m=n("./js/stores/StoreManager.js"),g=n("./api-dev/stores/APIListStore.js"),h=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),f=n("./runtime-repl/_common/ModelConstant.js"),I=n("./runtime-repl/environment/workbench/EnvironmentMetaIcons.js"),b=n("./runtime-repl/environment/datastores/ActiveEnvironmentStore.js"),v=n("./node_modules/lodash/lodash.js");const y={id:null,name:"No Environment",type:f.ENVIRONMENT};let S=(0,o.observer)((s=class extends a.Component{constructor(e){super(e),this.handleEnvironmentSelect=this.handleEnvironmentSelect.bind(this),this.handleOpen=this.handleOpen.bind(this),this.state={isAPIStoreLoaded:!1}}componentDidMount(){pm.mediator.on("showEnvironmentSelectorDropdown",this.handleOpen),this.apiListStore=(0,m.resolveStoreInstance)(g.default),(0,r.when)((()=>this.apiListStore.isLoaded),(()=>this.setState({isAPIStoreLoaded:!0})))}componentWillUnmount(){pm.mediator.off("showEnvironmentSelectorDropdown",this.handleOpen)}getOption(e,t,n={}){const{name:i,id:s,type:o}=e,r=t&&!n.firstRender;return"parent"===o?a.createElement(p.default,{identifier:s},a.createElement("div",{className:"parent-wrapper"},a.createElement("div",{className:"parent-label",title:i},r?a.createElement(u.default,{source:i,query:t}):i))):a.createElement(p.default,{identifier:s},a.createElement("div",{className:"item-wrapper"},a.createElement("div",{className:"item-label",title:i},r?a.createElement(u.default,{source:i,query:t}):i),null!==s&&a.createElement(I.default,{environment:e,showForkLabel:!0})))}get isHydratingActiveEnvironment(){return(0,m.resolveStoreInstance)(b.default).isHydrating}getEnvironmentName(e){return e.isForked&&e.forkLabel?`${e.name} [${e.forkLabel}]`:e.name||""}getSelectWrapperClasses(){return c()({"environment-selector-wrapper":!0})}getEnvironmentsFromIds(e){return v.chain(e).map((e=>{var t;return null===(t=this.props.environmentStore)||void 0===t?void 0:t.get(e)})).compact().value()}handleOpen(){v.invoke(this.refs.inputSelect.__wrappedInstance,"handleOpen")}getEnvironmentSelectorList(e,t,n={}){const i=!n.firstRender&&t;return this.sortEnvironmentsByParent(e,{searchQuery:i})}handleEnvironmentSelect(e){e.type===f.ENVIRONMENT&&(pm.mediator.trigger("focusBuilder"),this.props.onSelect&&this.props.onSelect(e.id))}sortEnvironmentsByName(e){return v.chain(e).sortBy((e=>e.name.toLowerCase())).value()}addDefaultEnvironment(e=[]){return y.addDivider=e.length,e.unshift(y),e}addEnvironmentsToList(e,t,n,i){var s;const o=null==i?void 0:i.searchQuery,r=null==i?void 0:i.hideParent,a=!o||v.includes(null==e||null===(s=e.name)||void 0===s?void 0:s.toLowerCase(),o.toLowerCase()),l=this.sortEnvironmentsByName(t),c=o?v.filter(l,(e=>v.includes(e.name.toLowerCase(),o.toLowerCase()))):l,d=(null==c?void 0:c.length)>0;(a||d)&&!r&&n.push(e),!a||r?n.push(...c):n.push(...l)}addWorkspaceEnvironments(e,t=[],n){var i;if(null==e||!e.get("workspace"))return;const s=(0,m.resolveStoreInstance)(h.default).id,o=e.get("workspace"),r=null==n?void 0:n.searchQuery;if((null===(i=o.get(s))||void 0===i?void 0:i.length)>0){const e={type:"parent",notSelectable:!0,id:s,name:"Others"},i=this.getEnvironmentsFromIds(o.get(s)),a=!(null!=n&&n.addOthersTag);this.addEnvironmentsToList(e,i,t,{searchQuery:r,hideParent:a})}}addAPIEnvironments(e,t=[],n){var i;if(null==e||!e.get("api"))return;const s=e.get("api"),o=null==n?void 0:n.searchQuery;if(this.props.activeApiIdInWorkbench&&(null===(i=s.get(this.props.activeApiIdInWorkbench))||void 0===i?void 0:i.length)>0){var r;const n=null===(r=this.apiListStore.find(this.props.activeApiIdInWorkbench))||void 0===r?void 0:r.name,i={type:"parent",notSelectable:!0,id:this.props.activeApiIdInWorkbench,name:n},s=e.get("api").get(this.props.activeApiIdInWorkbench),a=this.getEnvironmentsFromIds(s);this.addEnvironmentsToList(i,a,t,{searchQuery:o})}}sortEnvironmentsByParent(e,t){if(!e)return[];const n=[];return this.props.activeApiIdInWorkbench?(this.state.isAPIStoreLoaded&&this.addAPIEnvironments(e,n,t),this.addWorkspaceEnvironments(e,n,{addOthersTag:n.length>0,searchQuery:null==t?void 0:t.searchQuery}),(null==t||!t.searchQuery)&&this.addDefaultEnvironment(n),n):(this.addWorkspaceEnvironments(e,n,t),(null==t||!t.searchQuery)&&this.addDefaultEnvironment(n),n)}render(){const{environmentStore:e,selectedEnvironment:t,selectorWidth:n}=this.props,i=this.props.selectedEnvironment&&null!==this.props.selectedEnvironment.id,s=c()({"user-selected-environment-input-loading":this.isHydratingActiveEnvironment,"user-selected-environment-input":!this.isHydratingActiveEnvironment&&i}),o=c()({"environment-selector-menu":!0,"use-browser-tabs-header":this.props.useBrowserTabs});return a.createElement("div",{className:"environment-selector-container"},a.createElement("div",{className:this.getSelectWrapperClasses()},a.createElement(d.InputSelectV2,{style:{width:n},selectedItem:t,getInputValue:e=>this.getEnvironmentName(e),optionRenderer:this.getOption,getFilteredList:this.getEnvironmentSelectorList.bind(this,null==e?void 0:e.parentToEntityMap),ref:"inputSelect",isLoading:this.isHydratingActiveEnvironment,onSelect:this.handleEnvironmentSelect,menuClassName:o,inputClassName:s,resetSearchFilterOnBlur:!0})))}},E=s.prototype,C="isHydratingActiveEnvironment",j=[r.computed],_=Object.getOwnPropertyDescriptor(s.prototype,"isHydratingActiveEnvironment"),P=s.prototype,A={},Object.keys(_).forEach((function(e){A[e]=_[e]})),A.enumerable=!!A.enumerable,A.configurable=!!A.configurable,("value"in A||A.initializer)&&(A.writable=!0),A=j.slice().reverse().reduce((function(e,t){return t(E,C,e)||e}),A),P&&void 0!==A.initializer&&(A.value=A.initializer?A.initializer.call(P):void 0,A.initializer=void 0),void 0===A.initializer&&(Object.defineProperty(E,C,A),A=null),i=s))||i;var E,C,j,_,P,A},"./runtime-repl/environment/workbench/EnvironmentSelectorContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/modules/pipelines/user-action.js"),c=n("./js/modules/model-event.js"),d=n("./runtime-repl/_common/uid-helper.ts"),u=n("./js/modules/services/AnalyticsService.js"),p=n("./js/stores/ActiveWorkspaceSessionStore.js"),m=n("./js/stores/EditorStore.js"),g=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),h=n("./runtime-repl/_common/ModelConstant.js"),f=n("./runtime-repl/environment/datastores/ActiveEnvironmentStore.js"),I=n("./runtime-repl/environment/workbench/EnvironmentSelector.js"),b=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),v=n("./node_modules/lodash/lodash.js");const y={id:null,name:"No Environment"};let S=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={environmentStore:{}},this.handleEnvironmentSelect=this.handleEnvironmentSelect.bind(this)}componentDidMount(){this.reactionDisposer=(0,r.reaction)((()=>(0,a.resolveStoreInstance)(g.default).id),(async e=>{if(!e)return;const t=await(0,b.subscribeMeta)(e,{parent:["workspace","api"],enableLazyLoading:!0}).catch((e=>{pm.logger.error("EnvironmentSelectorContainer~componentDidMount: Error subscribing to environment store",e)}));v.invoke(this.state.store,"unsubscribe"),t&&this.setState({environmentStore:t})}),{fireImmediately:!0})}componentDidCatch(e){throw u.default.addEventV2AndPublish({category:"workspace-load",action:"environment-selector-container-fail",label:`${e.name}:${e.message}`}),e}componentWillUnmount(){var e,t,n;null===(e=this.reactionDisposer)||void 0===e||e.call(this),null===(t=this.store)||void 0===t||null===(n=t.unsubscribe)||void 0===n||n.call(t)}handleEnvironmentSelect(e){const t=(0,a.resolveStoreInstance)(p.default).id;(0,l.default)((0,c.createEvent)("setActiveEnvironment","workspacesession",{workspaceSession:{id:t},activeEnvironment:(0,d.decomposeUID)(e).modelId}))}getActiveApiIdInWorkbench(e){if(!e)return;const t=e.type,n=e.model;let i,s;switch(t){case h.REQUEST:case h.RESPONSE:case h.FOLDER:case h.COLLECTION:i=e.parentApiId;break;case h.ENVIRONMENT:{var o,r,a;const{environmentUid:t}=e;s=null===(o=(r=this.state.environmentStore).getParent)||void 0===o?void 0:o.call(r,t),i="api"===(null===(a=s)||void 0===a?void 0:a.type)&&s.id;break}default:pm.logger.info("EnvironmentSelectorContainer~getActiveApiInWorkbench: Active Tab is not a child of an API")}return"apiVersion"===(null==n?void 0:n.type)&&(i=null==n?void 0:n.parentEntityId),i}render(){var e,t;const n=v.find((null===(e=this.state.environmentStore)||void 0===e?void 0:e.list)||[],(e=>e.id===(0,a.resolveStoreInstance)(f.default).uid))||y,i=(0,a.resolveStoreInstance)(p.default).activeEditor,o=(0,a.resolveStoreInstance)(m.default).find(i),r=null==o||null===(t=o.v2Model)||void 0===t?void 0:t.tabController,l=this.getActiveApiIdInWorkbench(r),{forkLabel:c}=n;return s.createElement(I.default,{environmentStore:this.state.environmentStore,ref:"selector",selectedEnvironment:n,activeApiIdInWorkbench:l,selectorWidth:this.props.selectorWidth,onSelect:this.handleEnvironmentSelect,useBrowserTabs:!!this.props.useBrowserTabs})}})||i},"./runtime-repl/runner/workbench/CollectionRunCreate/AutomateRun/AutomateRun.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var i,s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-copy-stroke.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke.js"),S=n("./runtime-repl/collection/_api/CollectionInterface.js"),E=n("./runtime-repl/transient-collection/datastores/stores/TransientCollectionStore.ts"),C=n("./runtime-repl/collection/CollectionModalTabsConstants.js"),j=n("./runtime-repl/_common/uid-helper.ts"),_=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),P=n("./js/stores/StoreManager.js"),A=n("./runtime-repl/environment/datastores/ActiveEnvironmentStore.js"),w=n("./api-dev/stores/APIListStore.js"),T=n("./js/stores/CurrentUserInfoStore.js"),k=n("./runtime-repl/runner/workbench/common.js"),L=n("./js/modules/services/AnalyticsService.js"),D=n("./js/services/NavigationService.js"),R=n("./js/utils/ClipboardHelper.js"),x=n("./iam/src/common/api/IAMservice.js"),B=n("./collaboration/utils/workspace.js"),N=n("./js/components/base/keymaps/KeyMaps.js"),O=n("./appsdk/components/link/Link.js"),F=n("./js/utils/HttpService.js"),V=n("./integrations/navigation/constants.js"),U=n("./js/utils/platform-utils.js"),M=n("./api-dev/interfaces/APIInterface.js"),H=n("./runtime-repl/environment/workbench/EnvironmentSelectorContainer.js"),W=n("./appsdk/workbench/WorkbenchService.js"),z=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),G=n("./runtime-repl/runner/workbench/CollectionRunCreate/AutomateRun/PostmanCLICommandTemplate.js"),q=n("./node_modules/lodash/lodash.js");const K=`${pm.runtimeAssetsUrl}/postman-cli/postman-cli-command-template.json`,$=(0,_.default)(l.default)`
    background-color: var(--background-color-tertiary);
    border-radius: var(--border-radius-default);
  `,J=_.default.span`
    margin-left: var(--spacing-xs);
    margin-right: var(--spacing-xs);
    display: inline-block;
  `,Y=_.default.div`
    background-color: var(--background-color-primary);
    border-radius: var(--border-radius-default);
    padding: var(--spacing-m) var(--spacing-l) ;
    margin-right: var(--spacing-s);
    overflow-y: auto;
    white-space: pre-wrap;
    text-align: ${({alignCenter:e})=>e?"center":"start"};
  `,Q=_.default.div`
    display: grid;
    grid-auto-flow: column;
  `,Z=_.default.div`
    padding: var(--spacing-s);
  `,X=_.default.div`
    padding-top: var(--spacing-s);
    padding-bottom: var(--spacing-s);
  `;let ee=(0,o.observer)(i=class extends s.Component{constructor(e){super(e),this.state={isLoading:!0,isCopySuccess:!1,apiKeyInputText:"",apiKey:"",apiKeyName:"",isPopoverOpen:!1,popoverView:"InsertAPIKey",isGeneratingKey:!1,isButtonLoading:!1,apiKeyGenerationError:"",postmanCLICommandTemplate:{}},this.currentUserInfo=(0,P.resolveStoreInstance)(T.default),this.handleCopyNemanCommand=this.handleCopyNemanCommand.bind(this),this.handleCopy=this.handleCopy.bind(this),this.fetchPostmanCLICommand=this.fetchPostmanCLICommand.bind(this),this.getDownloadPostmanCliLink=this.getDownloadPostmanCliLink.bind(this),this.fetchPostmanCLICommand()}getKeyMapHandlers(){return{copy:pm.shortcuts.handle("copyCommand",this.handleCopy)}}getInsertAPIKeyBody(){const{selection:e}=this.props;return s.createElement(l.default,{direction:"column",gap:"spacing-m"},s.createElement(l.default,{direction:"column",gap:"spacing-s"},s.createElement(c.default,{type:"h3",text:"Add Postman API key"}),s.createElement(d.default,{type:"body-medium",color:"content-color-primary"},"API key is needed to access Postman API and fetch live Postman data. Learn how to ",s.createElement(O.default,{to:"https://learning.postman.com/docs/developer/intro-api/#generating-a-postman-api-key",target:"_blank",onClick:()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"open-postman-api-key-learning-center",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}},s.createElement(d.default,{type:"link-default",isExternal:!0},"generate a Postman API key")))),s.createElement(l.default,{padding:{paddingTop:"spacing-xs"},alignItems:"center",gap:"spacing-m"},s.createElement(u.default,{"data-testid":"generate-api-key-button",type:"primary",isLoading:this.state.isButtonLoading,onClick:()=>{this.setState({isButtonLoading:!0},(()=>(0,x.fetchAllApiKeys)().then((t=>{const n=q.get(t,"apiKeys",[]),i=q.size(n)>4?"EnterAPIKey":"GenerateAPIKey";this.setState({popoverView:i,isAPILimitReached:q.size(n)>4,isButtonLoading:!1},(()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"open-generate-new-api-key-modal",label:q.size(n)>4?"api-key-limit-exceeded-view":"generate-new-key-view",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))}))))},text:"Generate Key"}),s.createElement(u.default,{type:"secondary",onClick:()=>{this.setState({popoverView:"EnterAPIKey",isAPILimitReached:!1,apiKeyInputText:""},(()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"open-use-existing-key-modal",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))},text:"Use Existing Key"})))}getEnterApiKeyBody(){const e=this.state.isAPILimitReached?"Postman API key limit reached":"Paste an existing Postman API key",t=this.state.isAPILimitReached?"You already have 5 keys. Enter existing key or delete/regenerate keys in ":"You can also delete, regenerate or check status of existing API keys in your ",{selection:n}=this.props,i=()=>{this.setState({apiKey:this.state.apiKeyInputText,isPopoverOpen:!1},(()=>{var e;""!==this.state.apiKey&&L.default.addEventV2({category:"postman-cli-discoverability",action:"insert-api-key",label:this.state.isAPILimitReached?"api-key-limit-exceeded-view":"use-existing-key-view",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==n?void 0:n.collection)&&{entityId:n.collection},...null!==(e=this.props.sourceInfo)&&void 0!==e?e:{}})}))};return s.createElement(l.default,{direction:"column",gap:"spacing-l"},s.createElement(l.default,{direction:"column",gap:"spacing-s"},s.createElement(c.default,{type:"h3",text:e}),s.createElement(d.default,{type:"body-medium",color:"content-color-primary"},t,s.createElement(O.default,{to:`${pm.artemisUrl}/settings/me/api-keys`,target:"_blank",onClick:()=>{var e;L.default.addEventV2({category:"postman-cli-discoverability",action:"open-api-key-settings",label:this.state.isAPILimitReached?"api-key-limit-exceeded-view":"use-existing-key-view",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(e=this.props.sourceInfo)&&void 0!==e?e:{}})}},s.createElement(d.default,{type:"link-default",isExternal:!0},"account settings")))),s.createElement(p.default,{type:"text","data-testid":"existing-postman-api-key",placeholder:"Paste an existing Postman API key",value:this.state.apiKeyInputText,autoFocus:!0,onChange:e=>{this.setState({apiKeyInputText:e.target.value})},onKeyDown:e=>"Enter"===e.key&&i(),onClear:()=>this.setState({apiKeyInputText:""})}),s.createElement(l.default,{gap:"spacing-m"},s.createElement(u.default,{"data-testid":"insert-existing-api-key",type:"primary",onClick:i,text:"Insert Key"}),s.createElement(u.default,{type:"secondary",onClick:()=>this.setState({popoverView:"UseExistingKey",apiKeyName:"",apiKeyInputText:""}),text:"Back"})))}getGenerateApiKeyBody(){const{selection:e}=this.props,t=e=>{this.setState({isGeneratingKey:e})},n=()=>{t(!0),(0,x.createNewApiKey)(this.state.apiKeyName).then((e=>{if("error"===e.status)this.setState({isGeneratingKey:!1,apiKeyGenerationError:q.get(e,"error.message","Unable to create API key")});else{const t=q.get(e,"apikey.key");this.setState({apiKeyInputText:t,popoverView:"GeneratedKey",isGeneratingKey:!1})}})).catch((e=>{this.setState({isPopoverOpen:!1,isGeneratingKey:!1},(()=>{pm.toasts.error(q.get(e,"error.message","Unable to create API key"))}))})).finally((()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"generate_new_api_key",label:q.isEmpty(this.state.apiKeyGenerationError)?"success":"error",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))};return s.createElement(l.default,{direction:"column",gap:"spacing-s"},s.createElement(c.default,{type:"h3",text:"Name your API key"}),s.createElement(d.default,{type:"body-medium",color:"content-color-primary"},"This will help you identify and manage the keys."),s.createElement(p.default,{"data-testid":"new-api-key-name",type:"text",placeholder:"Enter name",value:this.state.apiKeyName,autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&n(),onChange:e=>{this.setState({apiKeyName:e.target.value})},onClear:()=>{this.setState({apiKeyName:"",apiKeyGenerationError:""})},validationStatus:q.isEmpty(this.state.apiKeyGenerationError)?null:"error",validationMessage:q.isEmpty(this.state.apiKeyGenerationError)?null:this.state.apiKeyGenerationError}),s.createElement(l.default,{gap:"spacing-m",padding:"spacing-s spacing-zero spacing-zero spacing-zero"},s.createElement(u.default,{"data-testid":"generate-new-api-key-button",type:"primary",onClick:n,text:"Generate",isLoading:this.state.isGeneratingKey,isDisabled:q.isEmpty(this.state.apiKeyName)}),s.createElement(u.default,{type:"secondary",onClick:()=>this.setState({popoverView:"UseExistingKey",apiKeyName:"",apiKeyInputText:""}),text:"Back"})))}getGeneratedKeyBody(){const{selection:e}=this.props;return s.createElement(l.default,{direction:"column",gap:"spacing-s"},s.createElement(c.default,{type:"h3",text:"Key generated!"}),s.createElement(d.default,{type:"body-medium",color:"content-color-primary"},"Make sure you copy and save this API key."),s.createElement(p.default,{"data-testid":"new-api-key-generated-input",type:"text",value:this.state.apiKeyInputText,enableCopy:!0,onCopy:()=>{var e;L.default.addEventV2({category:"postman-cli-discoverability",action:"copy-generated-api-key",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(e=this.props.sourceInfo)&&void 0!==e?e:{}})}}),s.createElement("div",{style:{paddingTop:"var(--spacing-s)",width:"fit-content"}},s.createElement(u.default,{"data-testid":"insert-new-api-key",type:"primary",onClick:()=>{this.setState({apiKey:this.state.apiKeyInputText,isPopoverOpen:!1},(()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"insert-api-key",label:"generated-api-key",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))},text:"Insert Key"})))}getInsertedAPIKeyBody(){const{selection:e}=this.props;return s.createElement(l.default,{direction:"column",gap:"spacing-s",width:"270px"},s.createElement(c.default,{type:"h3",text:"Inserted API key"}),s.createElement(p.default,{"data-testid":"inserted-api-key",type:"text",value:this.state.apiKey,enableCopy:!0}),s.createElement(l.default,{padding:{paddingTop:"spacing-s"},alignItems:"center",justifyContent:"space-between"},s.createElement(u.default,{"data-testid":"inserted-api-key-done-btn",type:"primary",onClick:()=>{this.setState({isPopoverOpen:!1})},text:"Done"}),s.createElement(u.default,{type:"plain",onClick:()=>{this.setState({isPopoverOpen:!0,popoverView:"InsertAPIKey",apiKeyName:"",apiKeyInputText:"",isButtonLoading:!1,isAPILimitReached:!1,apiKeyGenerationError:""},(()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"change-api-key",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))},text:"Change Key"})))}getPopoverBody(){switch(this.state.popoverView){case"InsertAPIKey":default:return this.getInsertAPIKeyBody();case"EnterAPIKey":return this.getEnterApiKeyBody();case"GenerateAPIKey":return this.getGenerateApiKeyBody();case"GeneratedKey":return this.getGeneratedKeyBody();case"InsertedAPIKey":return this.getInsertedAPIKeyBody()}}fetchPostmanCLICommand(){this.setState({isLoading:!0}),F.default.request(this.props.templateURL||K,{method:"GET",headers:{},credentials:"omit"}).then((e=>{this.setState({postmanCLICommandTemplate:e.body,isLoading:!1})})).catch((e=>{pm.logger.error("AutomateRun~fetchPostmanCLICommand - There was an error while fetching the postman cli command template",e),pm.logger.info("AutomateRun~fetchPostmanCLICommand - Using fallback template for postman cli command"),this.setState({postmanCLICommandTemplate:G.POSTMAN_CLI_COMMAND_TEMPLATE,isLoading:!1})}))}addRunOrderChangeToCliCommand({runOrderChange:e,folder:t},n){if(null!=e&&e.isModified){return`${n}${q.join(q.map(null==e?void 0:e.reqOrderIds,(e=>` -i ${e}`)),"")}`}return!t||!e||null!=e&&e.isModified?n:`${n} -i ${t}`}generatePostmanCLICommand(e,t={replaceAPIKey:!0}){if(!e)return"";const n=(0,P.resolveStoreInstance)(A.default).uid,{postmanCLICommandTemplate:i}=this.state,s=q.get(e,"$collection.meta.parent.id"),o=q.get(e,"$collection.meta.parent.apiVersionId"),r=s&&(0,P.resolveStoreInstance)(w.default).find(s),a=o&&(null==r?void 0:r.childEntities.find(o)),l=q.get(a,"apiRepositoryStore.apiVersionRepositoryInterface"),c=q.get(l,"configs.api.value.relations.collections.files"),d=q.find(c,(t=>t.id===q.get(e,"$collection.id"))),u=null==d?void 0:d.path,p=!q.isEmpty(u)&&l&&q.get(l,["collections",u,"absolutePath"],"");let m;return p?(m=i.pathCommand,i.prePathCommand&&(m=`${i.prePathCommand} ${m}`),m=m.replaceAll("%path",`"${p}"`),n&&(m=`${m} ${i.envArg}`,m=m.replaceAll("%eid",n)),i.reporterCommand&&(m=`${m} ${i.reporterCommand}`),i.postPathCommand&&(m=`${m}${i.postPathCommand}`),m=this.addRunOrderChangeToCliCommand(e,m),m):(m=i.command,i.preCommand&&(m=`${i.preCommand} ${m}`),t.replaceAPIKey&&(m=this.state.apiKey?m.replaceAll("%pid",this.state.apiKey):m.replaceAll("%pid","{{postman-api-key-here}}")),m=null!=e&&e.collection?m.replaceAll("%cid",null==e?void 0:e.collection):m.replaceAll("%cid","{{collection-id-here}}"),n&&i.envArg&&(m=`${m} ${i.envArg}`,m=m.replaceAll("%eid",n)),i.reporterCommand&&(m=`${m} ${i.reporterCommand}`),i.postCommand&&(m=`${m}${i.postCommand}`),m=this.addRunOrderChangeToCliCommand(e,m),m)}handleCopy(){var e;let t=getSelection().toString();const{selection:n}=this.props;t=t.replace(/\n.*\n{0,1}/,this.state.apiKey?`${this.state.apiKey}`:"{{postman-api-key-here}}"),R.default.copy(t),L.default.addEventV2({category:"postman-cli-discoverability",action:"copy_postman-cli-command",label:"keyboard-shortcut",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(e=this.props.sourceInfo)&&void 0!==e?e:{},...(null==n?void 0:n.collection)&&{entityId:n.collection,entityType:"collection"}})}getDownloadPostmanCliLink(){const e=(0,U.getArch)();return(0,U.isMacApp)()&&"arm64"===e?"https://go.pstmn.io/install-cli-osx-arm64":(0,U.isMacApp)()?"https://go.pstmn.io/install-cli-osx64":(0,U.isWindowsApp)()?"https://go.pstmn.io/install-cli-win64":(0,U.isLinuxApp)()?"https://go.pstmn.io/install-cli-linux":"https://go.pstmn.io/install-cli"}handleCopyNemanCommand(e){if(this.state.isCopySuccess)return;let t=q.get(this.props,"command","");var n;(t&&(t=this.state.apiKey?t.replaceAll("%pid",this.state.apiKey):t.replaceAll("%pid","{{postman-api-key-here}}")),R.default.copy(t||this.generatePostmanCLICommand(e)),e)?this.setState({isCopySuccess:!0},(()=>{var t;this.clearCopySuccessTimeout=setTimeout((()=>this.setState({isCopySuccess:!1})),1500),L.default.addEventV2({category:"postman-cli-discoverability",action:"copy_postman-cli-command",label:"copy-command-cta",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{},...(null==e?void 0:e.collection)&&{entityId:e.collection,entityType:"collection"}})})):L.default.addEventV2({category:"postman-cli-discoverability",action:"copy_postman-cli-command",label:"copy-command-cta",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(n=this.props.sourceInfo)&&void 0!==n?n:{}})}renderAddAPIKeyButton(){const{selection:e}=this.props,t=(0,B.isPublicUserForWorkspace)();return s.createElement(m.default,{isOpen:this.state.isPopoverOpen,placement:"top-start",padding:"spacing-l",appendTo:"parent",maxWidth:"350px",trigger:this.state.apiKey?s.createElement("span",{onClick:()=>this.setState({isPopoverOpen:!0,popoverView:"InsertedAPIKey",apiKeyName:"",isButtonLoading:!1,isAPILimitReached:!1,apiKeyGenerationError:""},(()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"open_inserted_api_key_modal",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))},s.createElement(d.default,{type:"link-primary"},q.truncate(this.state.apiKey,{length:18}))):s.createElement(J,null,s.createElement(u.default,{size:"small",type:"outline",text:"Add API Key","data-testid":"add-api-key-button",isDisabled:t,onClick:()=>this.setState({isPopoverOpen:!0,popoverView:"InsertAPIKey",apiKeyName:"",isButtonLoading:!1,isAPILimitReached:!1,apiKeyGenerationError:""},(()=>{var t;L.default.addEventV2({category:"postman-cli-discoverability",action:"open_add_api_key_modal",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==e?void 0:e.collection)&&{entityId:e.collection},...null!==(t=this.props.sourceInfo)&&void 0!==t?t:{}})}))}))},s.createElement(Q,null,s.createElement(Z,null,this.getPopoverBody()),s.createElement(u.default,{type:"tertiary",icon:s.createElement(b.default,null),onClick:()=>this.setState({isPopoverOpen:!1})})))}renderPostmanCLICommand(e){if(!(null!=e&&e.collection||this.props.command))return s.createElement(d.default,{type:"Code/Medium",color:"content-color-primary"},"Select a collection to generate the Postman CLI commands");if(null!=e&&e.runOrderChange&&q.isEmpty(e.runOrderChange.reqOrderIds))return s.createElement(d.default,{type:"Code/Medium",color:"content-color-primary"},"Select some requests to generate the Postman CLI commands");const t=this.props.command||this.generatePostmanCLICommand(e,{replaceAPIKey:!1}),[n,i]=t.split("%pid");return s.createElement(d.default,{color:"content-color-primary",typographyStyle:{fontSize:"text-size-m",lineHeight:"line-height-m",fontFamily:"text-family-code"}},n,this.renderAddAPIKeyButton(),i)}render(){var e,t,n,i;const{selection:o}=this.props,r=(0,B.isPublicUserForWorkspace)(),a=null===(e=(0,j.decomposeUID)(null===(t=this.props.selection)||void 0===t?void 0:t.collection))||void 0===e?void 0:e.modelId,p=null===(n=E.default.find(a))||void 0===n?void 0:n.model,m="version"===q.get(p,"meta.parent.mode.name");return this.state.isLoading?s.createElement(l.default,{alignItems:"center",justifyContent:"center",height:"100%","data-testid":"loading-spinner"},s.createElement(g.default,null)):s.createElement(l.default,{direction:"column",gap:"spacing-s"},r&&(null==o?void 0:o.collection)&&s.createElement(h.default,{status:"neutral",title:"Create a fork to run this collection",primaryAction:s.createElement(u.default,{type:"outline",text:"Fork Collection",onClick:()=>{var e;(0,S.collectionActions)(null===(e=this.props.selection)||void 0===e?void 0:e.collection,"fork",null,{origin:"automate-run"})}})},s.createElement(d.default,{type:"body-medium"},"You don’t have permission to run this collection. Fork the collection to your own workspace to run.")),!this.props.hideDescription&&s.createElement(l.default,{direction:"column"},s.createElement(c.default,{type:this.props.isModalView?"h5":"h4",text:"Run on Postman CLI",color:this.props.isModalView?"content-color-secondary":"content-color-primary"}),s.createElement(d.default,{type:"body-medium",color:"content-color-secondary"},"Automate using Postman’s command-line tool. ",s.createElement(O.default,{to:this.getDownloadPostmanCliLink(),target:"_blank",onClick:()=>{var e;L.default.addEventV2({category:"postman-cli-discoverability",action:"download_postman_cli",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(e=this.props.sourceInfo)&&void 0!==e?e:{}})}},s.createElement(d.default,{type:"link-default",isExternal:!0},"Download Postman CLI")))),W.default.isUseBrowserTabsActive()&&s.createElement(X,null,s.createElement("div",{className:"runner-runs-selector__item runner-runs-selector__item--environment"},s.createElement("div",{className:"runner-runs-selector__meta"},s.createElement(f.default,{text:"Environment"})),s.createElement("div",{className:"artemis-environment-selector"},s.createElement(H.default,null)))),s.createElement($,{direction:"column",padding:"spacing-s spacing-s spacing-l spacing-l",gap:"spacing-s"},s.createElement(l.default,{justifyContent:"space-between",alignItems:"center"},s.createElement(d.default,{type:"para"},"Copy this command and run it in your local terminal."),s.createElement(u.default,{"data-testid":"copy-postman-cli-command",type:"tertiary",icon:s.createElement(v.default,null),isDisabled:r,onClick:()=>this.handleCopyNemanCommand(o),tooltip:s.createElement(I.default,{content:"Copied",isOpen:this.state.isCopySuccess})})),s.createElement(N.default,{handlers:this.getKeyMapHandlers()},s.createElement(Y,{style:{maxHeight:this.props.height||"fit-content"},alignCenter:!(null!=o&&o.collection)&&!this.props.command||(null==o?void 0:o.runOrderChange)&&q.isEmpty(o.runOrderChange.reqOrderIds)},this.renderPostmanCLICommand(this.props.selection)))),!this.props.hideViewRunsLink&&!m&&!r&&(this.props.command||!q.isEmpty(null===(i=this.props.selection)||void 0===i?void 0:i.collection))&&s.createElement(l.default,{alignItems:"center",gap:"spacing-xs",padding:{paddingTop:"spacing-s"}},s.createElement(y.default,{color:"content-color-secondary"}),s.createElement(d.default,{type:"body-medium",color:"content-color-secondary"},"You can view all your runs for this collection under the ",s.createElement("span",{onClick:async()=>{var e,t,n;const{collection:i}=this.props.selection||{},s=null===(e=(0,j.decomposeUID)(i))||void 0===e?void 0:e.modelId,r=(0,k.getAPIParentMetaFromUrl)(),a=E.default.find(s);if(a)return a.openInWorkbench({setActiveTab:C.COLLECTION_RUN_REPORTS});L.default.addEventV2({category:"postman-cli-discoverability",action:"open-view-all-runs",label:"runner",entityId:null!==(t=null==o?void 0:o.folder)&&void 0!==t?t:null==o?void 0:o.collection,entityType:null!=o&&o.folder?"folder":"collection",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...null!==(n=this.props.sourceInfo)&&void 0!==n?n:{}}),(0,S.openCollectionInTab)(i,{setActiveTab:C.COLLECTION_RUN_REPORTS},r)}},s.createElement(d.default,{type:"link-default"},"runs tab"),"."))),!this.props.hideCICDConfig&&s.createElement(l.default,{direction:"column",padding:{paddingTop:"spacing-l"}},s.createElement(c.default,{type:"h4",text:"Run on CI/CD",color:"content-color-primary"}),s.createElement(d.default,{type:"body-medium",color:"content-color-secondary"},s.createElement(u.default,{type:"monochrome-plain",text:"Configure command",isDisabled:r,onClick:async()=>{var e;const t=await(0,k.getParentAPIContext)(q.get(o,"collection")).catch((e=>{pm.logger.warn("AutomateRun~render: Error while fetching parent api context",e)})),n=null==t?void 0:t.id,i=null==t?void 0:t.versionId;if(L.default.addEventV2({category:"postman-cli-discoverability",action:"integrate_with_ci_cd",label:"runner",userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,...(null==o?void 0:o.collection)&&{entityId:o.collection},...null!==(e=this.props.sourceInfo)&&void 0!==e?e:{}}),t&&n)return(0,z.openConfigurePostmanCLIInTab)({isMigrated:await(0,M.hasAPIMigrated)(n),apiId:n,versionId:i});D.default.transitionTo(V.OPEN_CONFIGURE_POSTMAN_CLI,{},{},{additionalContext:{collection:{id:this.props.selection&&this.props.selection.collection,name:q.get(this.props.selection,"$collection.name")},environment:{id:(0,P.resolveStoreInstance)(A.default).uid,name:(0,P.resolveStoreInstance)(A.default).name}}})}})," to run collection on CI/CD pipeline.")))}})||i;ee.defaultProps={hideDescription:!1,hideCICDConfig:!1,hideViewRunsLink:!1,templateURL:null,command:null,isModalView:!1},ee.propTypes={selection:a().object.isRequired,templateURL:a().string,hideDescription:a().bool,hideCICDConfig:a().bool,hideViewRunsLink:a().bool,command:a().string,isModalView:a().bool}},"./runtime-repl/runner/workbench/CollectionRunCreate/AutomateRun/PostmanCLICommandTemplate.js":function(e,t,n){n.r(t),n.d(t,{POSTMAN_CLI_COMMAND_TEMPLATE:function(){return i}});const i={command:"postman login --with-api-key %pid\npostman collection run %cid",pathCommand:"postman login --with-api-key %pid\npostman collection run %path",envArg:"-e %eid"}},"./node_modules/date-fns/esm/_lib/requiredArgs/index.js":function(e,t,n){function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.r(t),n.d(t,{default:function(){return i}})},"./node_modules/date-fns/esm/_lib/toInteger/index.js":function(e,t,n){function i(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.r(t),n.d(t,{default:function(){return i}})},"./node_modules/date-fns/esm/constants/index.js":function(e,t,n){n.r(t),n.d(t,{daysInWeek:function(){return i},maxTime:function(){return s},millisecondsInHour:function(){return r},millisecondsInMinute:function(){return o},millisecondsInSecond:function(){return a},minTime:function(){return l},minutesInHour:function(){return c},monthsInQuarter:function(){return d},monthsInYear:function(){return u},quartersInYear:function(){return p},secondsInHour:function(){return m},secondsInMinute:function(){return g}});var i=7,s=24*Math.pow(10,8)*60*60*1e3,o=6e4,r=36e5,a=1e3,l=-s,c=60,d=3,u=12,p=4,m=3600,g=60},"./node_modules/date-fns/esm/differenceInMilliseconds/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var i=n("./node_modules/date-fns/esm/toDate/index.js"),s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function o(e,t){return(0,s.default)(2,arguments),(0,i.default)(e).getTime()-(0,i.default)(t).getTime()}},"./node_modules/date-fns/esm/parseISO/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n("./node_modules/date-fns/esm/constants/index.js"),s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),o=n("./node_modules/date-fns/esm/_lib/toInteger/index.js");function r(e,t){(0,s.default)(1,arguments);var n=t||{},i=null==n.additionalDigits?2:(0,o.default)(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,a=u(e);if(a.date){var l=p(a.date,i);r=m(l.restDateString,l.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var c,d=r.getTime(),g=0;if(a.time&&(g=h(a.time),isNaN(g)))return new Date(NaN);if(!a.timezone){var f=new Date(d+g),b=new Date(0);return b.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),b.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),b}return c=I(a.timezone),isNaN(c)?new Date(NaN):new Date(d+g+c)}var a={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){var t,n={},i=e.split(a.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?t=i[0]:(n.date=i[0],t=i[1],a.timeZoneDelimiter.test(n.date)&&(n.date=e.split(a.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var s=a.timezone.exec(t);s?(n.time=t.replace(s[1],""),n.timezone=s[1]):n.time=t}return n}function p(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};var s=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:null===o?s:100*o,restDateString:e.slice((i[1]||i[2]).length)}}function m(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var i=!!n[4],s=g(n[1]),o=g(n[2])-1,r=g(n[3]),a=g(n[4]),c=g(n[5])-1;if(i)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,a,c)?function(e,t,n){var i=new Date(0);i.setUTCFullYear(e,0,4);var s=i.getUTCDay()||7,o=7*(t-1)+n+1-s;return i.setUTCDate(i.getUTCDate()+o),i}(t,a,c):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(b[t]||(v(e)?29:28))}(t,o,r)&&function(e,t){return t>=1&&t<=(v(e)?366:365)}(t,s)?(d.setUTCFullYear(t,o,Math.max(s,r)),d):new Date(NaN)}function g(e){return e?parseInt(e):1}function h(e){var t=e.match(c);if(!t)return NaN;var n=f(t[1]),s=f(t[2]),o=f(t[3]);return function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,s,o)?n*i.millisecondsInHour+s*i.millisecondsInMinute+1e3*o:NaN}function f(e){return e&&parseFloat(e.replace(",","."))||0}function I(e){if("Z"===e)return 0;var t=e.match(d);if(!t)return 0;var n="+"===t[1]?-1:1,s=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(s*i.millisecondsInHour+o*i.millisecondsInMinute):NaN}var b=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100!=0}},"./node_modules/date-fns/esm/toDate/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var i=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),s=n("../../node_modules/console-browserify/index.js");function o(e){(0,i.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||void 0===s||(s.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),s.warn((new Error).stack)),new Date(NaN))}},"./integrations/ci-cd/components/DevOps.tsx":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),o=n.n(s),r=n("./integrations/ci-cd/components/DevOpsFormData.tsx"),a=n("./integrations/ci-cd/components/Button/AddIntegration.js"),l=n("./integrations/ci-cd/components/Button/CancelButton.js"),c=n("./integrations/ci-cd/components/CIOAuth.js"),d=n("./integrations/ci-cd/constants.ts"),u=n("./integrations/ci-cd/navigationHelpers.ts");const p=e=>{const{rule:t,apiId:n,apiVersionId:s,defaultIntegrationName:o,defaultOrganization:p,originalTabId:m}=e,[g,h]=(0,i.useState)(null),[f,I]=(0,i.useState)(null),b={nickname:o,organization:p},v=(e,t)=>{e?pm.logger.error("DevOps~oauth: Unable to complete authentication",e):(h(t.tokenId),I(t.domain))},y=()=>{(0,u.closeCurrentTab)(n,s)};if(!g){const e=d.RULE_TO_OAUTH_SERVICE_MAPPING[d.DEVOPS_CI_CLASS_ID];return i.createElement(c.default,{oAuthServiceName:e,onComplete:v,onCancel:y})}return i.createElement(r.default,{integrationClassId:t,apiId:n,defaults:b,apiVersionId:s,oAuthTokenId:g,defaultDomain:f,confirmButtonFactory:(e,t)=>i.createElement(a.default,{type:"primary",size:"small",payload:e,service:d.DEVOPS_CI_CLASS_ID,disabled:!t,alignLeft:"alignLeft",useInstanceApi:!0,originalTabId:m},"Connect"),cancelButtonFactory:()=>i.createElement(l.default,{apiId:n,apiVersionId:s})})};p.propTypes={rule:o().string.isRequired,apiId:o().string.isRequired,apiVersionId:o().string.isRequired,debounceFetchingDisabled:o().bool,defaultIntegrationName:o().string.isRequired,service:o().string},t.default=p},"./integrations/ci-cd/components/DevOpsFormData.tsx":function(e,t,n){n.r(t),n.d(t,{COMPONENT_TITLE_ORGANIZATION:function(){return E},COMPONENT_TITLE_REPOSITORY:function(){return C}});var i=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),o=n.n(s),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),l=n("./integrations/ci-cd/services/DevOps.ts"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),d=n("./integrations/ci-cd/constants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),p=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},m=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const{NicknameFieldSegment:g,SelectSegmentV2:h}=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),{UNABLE_TO_FETCH_CLASS_DATA:f}=d.ERRORS,I={loading:!1,error:null,current:null,data:[]},b=Object.assign({},I),v=e=>e?{label:e.name,value:e.name}:{},y=e=>e?{label:e.name,value:e.id}:{},S=(e,t)=>e&&t.some((t=>t===e))?e:null,E="Organization",C="Repository";let j=class extends i.Component{constructor(e){super(e),this.getInitialState=this.getInitialState.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.fetchOrganizations=this.fetchOrganizations.bind(this),this.onNicknameChange=this.onNicknameChange.bind(this),this.onSelectedRepositoryChange=this.onSelectedRepositoryChange.bind(this),this.onOrganizationChange=this.onOrganizationChange.bind(this),this.state=this.getInitialState()}componentDidMount(){this.fetchIntegrationClass()}getInitialState(){const{defaults:e}=this.props;return{organizations:Object.assign(Object.assign({},b),{current:null==e?void 0:e.organization}),integrationClass:null,repositories:Object.assign(Object.assign({},I),{current:null==e?void 0:e.repository}),nickname:{default:null,current:null==e?void 0:e.nickname}}}fetchIntegrationClass(){var e;return m(this,void 0,void 0,(function*(){const{integrationClass:t,integrationClassId:n,addToast:i}=this.props,s=e=>{pm.logger.error("Azure Pipelines ~ Error in fetching class details",e,{errorContext:d.errorContext}),i({description:f,status:"error"})};if(t)yield this.fetchOrganizations();else try{const t=yield c.default.fetchIntegrationClassDetails(n),i=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.data;if(200!=t.status||!i)return void s(t);this.setState({integrationClass:i},this.fetchOrganizations)}catch(e){s(e)}}))}fetchRepositories(){return m(this,void 0,void 0,(function*(){const{repositories:e,organizations:t}=this.state,{oAuthTokenId:n}=this.props;if(t.current){this.setState({repositories:Object.assign(Object.assign({},e),{loading:!0,error:null})});try{const i=yield l.default.fetchRepositories(n,t.current),s=S(e.current,i.map((e=>e.id)));this.setState({repositories:Object.assign(Object.assign({},I),{current:s,data:i})})}catch(e){this.setState({repositories:Object.assign(Object.assign({},I),{error:e})})}}}))}fetchOrganizations(){return m(this,void 0,void 0,(function*(){const{organizations:e}=this.state,{oAuthTokenId:t}=this.props;this.setState({organizations:Object.assign(Object.assign({},e),{loading:!0,error:null})});try{const n=yield l.default.fetchOrganizations(t),i=S(e.current,n.map((e=>e.name))),s=i?this.fetchRepositories:()=>{};this.setState({organizations:Object.assign(Object.assign({},b),{current:i,data:n})},s)}catch(e){this.setState({organizations:Object.assign(Object.assign({},b),{error:e})})}}))}onNicknameChange(e){this.setState({nickname:Object.assign(Object.assign({},this.state.nickname),{current:e})})}onOrganizationChange(e){const{organizations:t}=this.state;this.setState({organizations:Object.assign(Object.assign({},t),{current:e.value})},this.fetchRepositories)}onSelectedRepositoryChange(e){const{repositories:t}=this.state;this.setState({repositories:Object.assign(Object.assign({},t),{current:e.value})})}render(){var e,t,n,s,r,a,c,d,p,m,f;const{nickname:I,repositories:b,organizations:S,integrationClass:j}=this.state,{apiId:_,apiVersionId:P,confirmButtonFactory:A,cancelButtonFactory:w,oAuthTokenId:T}=this.props,k=I.current!=I.default,L=b.loading||b.error,D=!(!I.current||!T||S.loading||b.loading||!S.current||!b.current),R=null!==(t=null===(e=b.data)||void 0===e?void 0:e.map(y))&&void 0!==t?t:[],x=o().find(R,(e=>"value"in e&&e.value===b.current)),B=null!==(s=null===(n=S.data)||void 0===n?void 0:n.map(v))&&void 0!==s?s:[],N=o().find(B,(e=>"value"in e&&e.value===S.current)),O=b.current?b.data.find((e=>e.id===b.current)):null,F=l.default.getAddIntegrationPayload(null!==(r=I.current)&&void 0!==r?r:"",null!==(a=S.current)&&void 0!==a?a:"",T,_,null!=P?P:"",null!==(c=null==O?void 0:O.projectName)&&void 0!==c?c:"",null!==(d=null==O?void 0:O.id)&&void 0!==d?d:"",null!==(p=null==O?void 0:O.name)&&void 0!==p?p:"",j);return i.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},i.createElement(g,{id:"devops_pipelines-nickname",value:I.current,error:!k,onChange:this.onNicknameChange}),i.createElement(h,{title:E,label:"Select",options:B,value:N,noOptionsDropdown:"No organizations found",error:null===(m=S.error)||void 0===m?void 0:m.message,loading:S.loading,hadleRetry:this.fetchOrganizations,onTargetSelect:this.onOrganizationChange}),i.createElement(h,{title:C,label:"Select",disabled:L,options:R,value:x,noOptionsDropdown:"No repositories found",error:null===(f=b.error)||void 0===f?void 0:f.message,loading:b.loading,hadleRetry:this.fetchRepositories,onTargetSelect:this.onSelectedRepositoryChange,description:"The Azure repo where the pipeline is configured."}),A(F,D,(0,u.isFormUpdated)(this.getInitialState(),this.state)),w())}};j=p([r.observer],j),t.default=(0,a.default)(j)},"./integrations/ci-cd/components/Edit/DevOps.tsx":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("./js/stores/StoreManager.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("./integrations/ci-cd/components/DevOpsFormData.tsx"),c=n("./integrations/ci-cd/components/Edit/common/UpdateButton.js"),d=n("./integrations/ci-cd/components/Edit/common/CancelButton.js"),u=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),p=n("./integrations/ci-cd/constants.ts"),m=n("./api-dev/constants/APISubViews.js"),g=n("./integrations/navigation/constants.js");const h=e=>{const t=(0,o.resolveStoreInstance)(u.default),{controller:n}=e,{integrationData:s,routeBack:r}=n,{name:a,id:h,variables:f,serviceId:I,executor:b,rule:v}=s,y=null==f?void 0:f.api_id,S=null==f?void 0:f.oauth_token_id,E=null==f?void 0:f.domain,C={repository:null==f?void 0:f.repository_id,organization:null==f?void 0:f.organization,nickname:a},j=r?{identifier:"build.apiVersion",routeParams:{apiId:y,versionId:b},queryParams:{tab:m.TEST}}:{identifier:g.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,routeParams:{apiId:y,integrationId:h},queryParams:{refresh:(!0).toString()}};return i.createElement(l.default,{integrationClassId:v,apiId:y,apiVersionId:b,defaults:C,oAuthTokenId:S,defaultDomain:E,confirmButtonFactory:(e,n,s)=>i.createElement("div",{className:"integrations-edit-actions__button--container"},i.createElement(c.default,{redirect:j,payload:e,integrationId:h,apiId:y,versionId:b,rule:v,disabled:!n||!s,alignLeft:"alignLeft",useInstanceApi:!0,onSuccess:()=>{t.initialiseBuildsPage(h,v),t.initializeApiIntegrationsStore({apiId:y,apiVersionId:b,category:p.CI_CD_BUILDS})}},"Save changes")),cancelButtonFactory:()=>i.createElement("div",{className:"integrations-edit-actions__button--container"},i.createElement(d.default,{integrationId:h,apiId:y,versionId:b,rule:v,service:I,routeBack:r}))})};h.propTypes={rule:a().string.isRequired,apiId:a().string.isRequired,apiVersionId:a().string.isRequired,debounceFetchingDisabled:a().bool},t.default=(0,s.observer)(h)},"./integrations/ci-cd/constants.ts":function(e,t,n){n.r(t),n.d(t,{AETHER_BADGE_STATUS:function(){return k},ALL_CI_INTEGRATION_CLASSES:function(){return I},ALL_TESTS:function(){return r},API_SCHEMA_DEFAULT_NAME:function(){return N},BITBUCKET_PIPELINES_CLASS_ID:function(){return p},BUILD_FILTER_STATUS:function(){return D},BUILD_STATUS_TO_BADGE_TYPE_MAP:function(){return L},BUILD_STATUS_TO_FILTER_STATUS_MAP:function(){return R},CANCELLABLE_OUTCOMES:function(){return x},CIRCLE_CI_CLASS_ID:function(){return d},CI_CD_BUILDS:function(){return a},CI_CD_CLIENT_CATEGORY:function(){return l},COMPACT_VIEW_BUILDS_LIMIT:function(){return s},COMPACT_VIEW_DEFAULT_OFFSET:function(){return o},DEVOPS_CI_CLASS_ID:function(){return h},ERRORS:function(){return P},ERROR_INTEGRATION_NOT_FOUND:function(){return C},ERROR_UNABLE_TO_GET_INTEGRATION_DATA:function(){return j},GENERATE_API_KEY_URL:function(){return y},GITHUB_CI_CLASS_ID:function(){return f},GITLAB_CI_CLASS_ID:function(){return g},GITLAB_SELF_HOSTED_CLASS_ID:function(){return m},INITIALS_TO_EXPANDED:function(){return B},JENKINS_CLASS_ID:function(){return u},NEWMAN_TOOLTIP_URL:function(){return S},NEWMAN_URL:function(){return b},NOT_AN_API_EDITOR:function(){return _},POSTMAN_CLI_TOOLTIP_URL:function(){return E},POSTMAN_CLOUD_REPORTER_LINK:function(){return v},RULE_TO_OAUTH_SERVICE_MAPPING:function(){return w},RULE_TO_SERVICE:function(){return A},RULE_TO_TEMPLATE:function(){return T},TEST_AND_AUTOMATION_VIEW:function(){return O},TRAVIS_CLASS_ID:function(){return c},errorContext:function(){return i}});const i=pm.logger.getContext("CI CD Integration","integrations"),s=5,o=0,r="all",a="ci-builds",l="continuous-integration",c="travis_ci",d="circle_ci",u="jenkins_ci",p="bitbucket_pipelines",m="gitlab_selfhosted_ci",g="gitlab_ci",h="devops_pipelines",f="github_ci",I=[c,d,u,p,m,g,h,f],b="https://go.pstmn.io/newman-config-for-ci-cd",v="https://go.pstmn.io/newman-reporter-postman-cloud",y="https://go.pstmn.io/docs-postman-api-key",S="https://go.pstmn.io/newman-config-tooltip",E="https://go.pstmn.io/postman-cli-config-tooltip",C={TITLE:"CI Integration not found",DESCRIPTION:"The integration you are looking for might have been deleted."},j={TITLE:"Unable to get integration details",DESCRIPTION:"Something went wrong while fetching details for your integration."},_={TITLE:"",DESCRIPTION:"You do not have permission to view this page."},P={UNABLE_TO_FETCH_PROJECTS:"Error occurred while fetching projects",FETCH_PROJECTS_AUTHENTICATION_ERROR:"Unable to fetch projects, invalid access token supplied",UNABLE_TO_FETCH_CLASS_DATA:"Something went wrong while fetching integration details, please try again"},A={devops_pipelines:"Azure Pipelines",travis_ci:"Travis CI",circle_ci:"CircleCI",jenkins_ci:"Jenkins",bitbucket_pipelines:"Bitbucket Pipelines",gitlab_ci:"GitLab SaaS",gitlab_selfhosted_ci:"GitLab Self-managed",github_ci:"GitHub Actions"},w={[p]:"bitbucket",[g]:"gitlab",[m]:"gitlabenterprise",[f]:"github",[h]:"azure"},T={[p]:"bitbucket-pipelines",[u]:"jenkins",[c]:"travis",[d]:"circleci",[g]:"gitlab",[h]:"azure-pipelines",[f]:"github-actions",local:"local-env"},k={NEUTRAL:"neutral",SUCCESS:"success",INFO:"info",WARNING:"warning",CRITICAL:"critical",NEW:"new",COUNT:"count"},L={passed:k.SUCCESS,success:k.SUCCESS,successful:k.SUCCESS,succeeded:k.SUCCESS,stopped:k.WARNING,partiallySucceeded:k.WARNING,failed:k.CRITICAL,failure:k.CRITICAL,"not running":k.CRITICAL,canceled:k.NEUTRAL,cancelled:k.NEUTRAL,unstable:k.CRITICAL,"not built":k.CRITICAL,aborted:k.NEUTRAL,errored:k.CRITICAL,building:k.NEUTRAL,queued:k.NEUTRAL,created:k.NEUTRAL,running:k.NEUTRAL,in_progress:k.NEUTRAL,pending:k.NEUTRAL,"waiting for resource":k.NEUTRAL,preparing:k.NEUTRAL,skipped:k.NEUTRAL,manual:k.NEUTRAL,scheduled:k.NEUTRAL,started:k.NEUTRAL,inProgress:k.NEUTRAL,notStarted:k.NEUTRAL,received:k.NEUTRAL,none:k.NEUTRAL},D={SUCCESS:"Success",FAILED:"Failed",DEFAULT:"Other"},R={passed:D.SUCCESS,success:D.SUCCESS,successful:D.SUCCESS,succeeded:D.SUCCESS,completed:D.SUCCESS,failed:D.FAILED,failure:D.FAILED},x={[p]:["RUNNING","CREATED"],[g]:["running","created","pending","preparing","scheduled"],[m]:["running","created","pending","preparing","scheduled"],[c]:["created","received","started"],[d]:["running","queued","on_hold"],[h]:["notStarted","inProgress","postponed"],[f]:["queued","in_progress"]},B={bb:"bitbucket.com",gh:"github.com"},N="Postman API Schema",O="tests"},"./integrations/ci-cd/navigationHelpers.ts":function(e,t,n){n.r(t),n.d(t,{closeCurrentTab:function(){return a}});var i=n("./js/services/NavigationService.js");const{V10_API_ADD_CI_INTEGRATION_URL:s}=n("./integrations/navigation/constants.js"),o=n("./appsdk/workbench/TabService.js").default,{TEST:r}=n("./api-dev/constants/APISubViews.js");function a(e,t){o.closeByRoute(s,{apiId:e}),i.default.transitionTo("build.apiVersion",{apiId:e,apiVersionId:t},{tab:r})}},"./integrations/ci-cd/services/DevOps.ts":function(e,t,n){n.r(t);var i=n("./node_modules/date-fns/esm/differenceInMilliseconds/index.js"),s=n("./node_modules/date-fns/esm/parseISO/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const{getRepositories:a,getOrgs:l}=n("./api-dev/services/IntegrationService.js").default,{getBuildFilterStatus:c,getCollectionRunStatusSummary:d,convertNewmanRunMetrics:u}=n("./integrations/ci-cd/helpers.js"),p="list_builds",m="cancel_build",g="newman_template",h=pm.logger.getContext("DevOps","Integrations"),f=(e,t)=>{if(!e||!t)return null;const n=(0,s.default)(e),o=(0,s.default)(t);return(0,i.default)(o,n)};t.default={fetchOrganizations:e=>r(void 0,void 0,void 0,(function*(){const{orgs:t}=yield l(e,null);return t})),fetchRepositories:(e,t)=>r(void 0,void 0,void 0,(function*(){const{repositories:n}=yield a(e,t,null);return n.map((e=>{return{id:e.id,name:e.name,projectName:(t=e.full_name,t.split("/")[0])};var t}))})),getBuilds:({limit:e,offset:t,integrationId:n})=>r(void 0,void 0,void 0,(function*(){var i;try{const{body:s}=yield o.default.triggerIntegrationOnDemand(n,p,{inputs:{limit:e,offset:t}}),r=s?s.devOpsBuilds:null,a=s?s.newmanRuns:null,l=!0,m=(null!==(i=null==r?void 0:r.value)&&void 0!==i?i:[]).map((e=>{var t,n,i;const s=(o=e,(null!=a?a:[]).filter((e=>e.build===o.id.toString())).map(u));var o,r,p,m;return{id:e.id,branch:(m=e.sourceBranch,m.replace(/^\/?(refs\/)?(heads)?\/?/g,"")),build_url:e._links.web.href,buildNumber:e.buildNumber,build_num:(r=e.buildNumber,p=null===(t=e.definition)||void 0===t?void 0:t.name,p?`${p}: ${r}`:r),showCollectionRuns:l,showBuildSteps:!1,collectionRunSummary:d(s),collectionRunDetails:s,duration:f(e.startTime,e.finishTime),buildIdentifier:e.id,filterStatus:c(e.result),outcome:null!==(n=e.result)&&void 0!==n?n:e.status,start_time:null!==(i=e.startTime)&&void 0!==i?i:null}}));return m}catch(e){throw pm.logger.error("DevOps.getBuilds ~ Error occurred while fetching projects",e,{context:h}),e}})),triggerBuild:void 0,cancelBuild:(e,t)=>r(void 0,void 0,void 0,(function*(){return yield o.default.triggerIntegrationOnDemand(e,m,{inputs:{build_id:t.id}}),!0})),getBuildSteps:void 0,getNewmanConfig:e=>r(void 0,void 0,void 0,(function*(){try{const{body:t}=yield o.default.triggerIntegrationOnDemand(e,g);return t}catch(e){throw pm.logger.error("DevOps.getNewmanConfig ~ Error occurred while fetching newman config",e,{context:h}),e}})),getAddIntegrationPayload:(e,t,n,i,s,o,r,a,l)=>({classId:null==l?void 0:l.id,name:e,inputs:{api_id:i,organization:t,apiversion:s,oauth_token_id:n,project_name:o,repository_id:r,repository_name:a}}),getBranches:()=>Promise.resolve([])}},"./integrations/ci-cd/services/index.ts":function(e,t,n){n.r(t);var i=n("./integrations/ci-cd/constants.ts"),s=n("./integrations/ci-cd/services/Circleci.js"),o=n("./integrations/ci-cd/services/DevOps.ts"),r=n("./integrations/ci-cd/services/TravisCI.js"),a=n("./integrations/ci-cd/services/JenkinsCI.js"),l=n("./integrations/ci-cd/services/BitbucketCI.js"),c=n("./integrations/ci-cd/services/GitLabCI.js"),d=n("./integrations/ci-cd/services/GithubCI.js");t.default={[i.CIRCLE_CI_CLASS_ID]:s.default,[i.TRAVIS_CLASS_ID]:r.default,[i.JENKINS_CLASS_ID]:a.default,[i.BITBUCKET_PIPELINES_CLASS_ID]:l.default,[i.GITLAB_CI_CLASS_ID]:c.default,[i.GITLAB_SELF_HOSTED_CLASS_ID]:c.default,[i.DEVOPS_CI_CLASS_ID]:o.default,[i.GITHUB_CI_CLASS_ID]:d.default}},"./integrations/constants/v10IntegrationConstants.ts":function(e,t,n){n.r(t),n.d(t,{DEPLOYMENTS:function(){return s},PERFORMANCE:function(){return o},TESTS:function(){return i}});const i="tests",s="deployments",o="performance"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,n){n.r(t),n.d(t,{isFormUpdated:function(){return o}});var i=n("./node_modules/lodash/lodash.js"),s=n.n(i);function o(e,t){const n=s().pick(t,s().keys(e));return!s().isEqual(e,n)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),s=n("./node_modules/lodash/lodash.js"),o=n.n(s);const r="integrations",a="/integration-instances",l="/bulk";t.default={fetchIntegrationInstanceDetails(e,t){const n=`/integration-instances/${e}`;return i.HTTPGatewayService.request({data:{service:r,method:"get",path:n,query:t}})},getConfiguredIntegrationsForAnEntity(e,t,n){const s=o().join(n,",");return i.HTTPGatewayService.request({data:{service:r,method:"get",path:"/integration-instances",query:{entityType:e,entityId:t,clientCategory:s}}})},createIntegrationInstance(e,t,n){const s=o().map(n,((e,t)=>({key:t,value:e})));return i.HTTPGatewayService.request({data:{service:r,method:"post",path:"/integration-instances",body:{class:e,name:t,inputs:s}}})},createIntegrationInstanceBulk(e){const t=a+l;return i.HTTPGatewayService.request({data:{service:r,method:"post",path:t,body:e}})},updateIntegrationInstance(e,t,n){const s=`/integration-instances/${e}`,a=o().map(n,((e,t)=>({key:t,value:e}))),l={};return o().isNil(t)||(l.name=t),o().isEmpty(a)||(l.inputs=a),i.HTTPGatewayService.request({data:{service:r,method:"put",path:s,body:l}})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),s=n("./node_modules/lodash/lodash.js"),o=n.n(s),r=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};t.default={runServiceAction(e,t,n,s,o,a){return r(this,void 0,void 0,(function*(){const r=`/services/${e}/actions/${t}/run`;return yield i.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:r,body:{integration:{instanceId:a||void 0,classId:s,classInputId:o},inputs:n}}})}))},getValidationError(e,t,n){return r(this,void 0,void 0,(function*(){if(o().isEmpty(e.validator)||this.state.inputErrors[e.key])return Promise.resolve();const i=e.validator,s=o().map(n,(n=>n.key===e.key?Object.assign(Object.assign({},n),{value:t}):n)),r=yield this.runServiceAction(i.service,i.serviceActionId,s,e.integrationClass,e.id,null),a=o().get(r,"body",!0);if("boolean"==typeof a&&a||o().isObject(a)&&(o().isEmpty(a)||o().isEqual(o().keys(a),["error"]))||o().isString(a)&&(o().isEmpty(a)||"true"===a.toLowerCase()))return Promise.resolve();let l="This field isn't valid";return o().isString(a)?l="false"===a.toLowerCase()?l:a:o().isObject(a)&&(l=a.message||a.msg||l),Promise.resolve(l)}))}}},"./integrations/ci-cd/stores/fixture.json":function(e){e.exports=JSON.parse('[{"id":"circleci","name":"Circle CI","icon":"pm-icon-circle-ci","description":"Bring your pipeline builds to Postman","icon_url":"https://static.getpostman.com/assets/circleci-light.png","dark_icon_url":"https://static.getpostman.com/assets/circleci-dark.png","extended_description":"Bring your pipeline builds in Postman and also trigger your build pipleines right from Postman","categories":["CI"],"integrations":{"circleci":{"circle_ci":{"name":"Create CI with Circle CI","description":"Bring circle ci builds inside Postman","categories":["CI"],"summary":"","client_categories":["continuous-integration"],"type":"multiple","entity":"apiversion","scope":"user","sync_data":[],"variables":[],"auth_type":"token","canCreateIntegration":true}}},"setup_details":"","service_data":[],"summary":"","misc":"","oauth_initiator_host":null},{"id":"travisci","name":"TravisCI","icon":"pm-icon-travisci","description":"Bring your pipeline builds to Postman","icon_url":"https://static.getpostman.com/assets/travisci-light.png","dark_icon_url":"https://static.getpostman.com/assets/travisci-dark.png","extended_description":"Bring your pipeline builds in Postman and also trigger your build pipleines right from Postman","categories":["CI"],"integrations":{"travisci":{"travis_ci":{"name":"Trigger builds from Postman with TravisCI","description":"Bring TravisCI builds inside Postman","categories":["CI"],"summary":"","client_categories":["continuous-integration"],"type":"multiple","entity":"apiversion","scope":"user","sync_data":[],"variables":[],"auth_type":"token","canCreateIntegration":true}}},"setup_details":"","service_data":[],"summary":"","misc":"","oauth_initiator_host":null}]')}}]);