"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[104,103],{"./integrations/components/context-bar/IntegrationContextBarList.js":function(e,t,i){i.r(t),i.d(t,{IntegrationContextBarList:function(){return D}});var o,n=i("../../node_modules/react/index.js"),r=i("./node_modules/prop-types/index.js"),a=i.n(r),s=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=i("./js/components/base/LoadingIndicator.js"),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("./integrations/components/context-bar/IntegrationItem.js"),p=i("./integrations/components/context-bar/IntegrationInfoMock.js"),d=i("./js/stores/SyncStatusStore.js"),g=i("./js/stores/IntegrationsStore.js"),h=i("./js/stores/StoreManager.js"),m=i("./js/stores/ActiveWorkspaceStore.js"),b=i("../../node_modules/mobx/lib/mobx.module.js"),y=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),f=i("./integrations/components/context-bar/ViewConfig.js"),I=i("./integrations/navigation/constants.js"),v=i("./integrations/constants/IntegrationTargets.ts"),S=i("./integrations/components/context-bar/util.js"),E=i("./js/modules/services/AnalyticsService.js"),C=i("./appsdk/components/link/Link.js"),_=i("./node_modules/lodash/lodash.js");const w=["GitHub","Dropbox"],T=["Slack","PagerDuty"],A=["Datadog","Coralogix"],k={collection:{categories:[v.CLIENT_CATEGORY_COLLECTION_BACKUP]},monitor:{categories:[v.CLIENT_CATEGORY_MONITOR_ANALYTICS,v.CLIENT_CATEGORY_MONITOR_NOTIFICATIONS]}};function j(e,t,i,o,n,r){switch(o){case"collection":return function(e,t,i,o){const n=[];if(_.isEmpty(_.get(e,v.CLIENT_CATEGORY_COLLECTION_BACKUP,[]))){const e=S.default.filterAvailableIntegrationsByCategory(t,v.CATEGORY_BACKUP),r=S.default.generateAddIntegrationHelperText(e,w,2),a=f.default.getCollectionBackupViewConfig(r,i,o);n.push(a)}return n}(e,t,i,n);case"monitor":return function(e,t,i,o){const n=[];if(_.isEmpty(_.get(e,v.CLIENT_CATEGORY_MONITOR_NOTIFICATIONS,[]))){const e=S.default.filterIntegrationsByClientCategories(t,[v.CLIENT_CATEGORY_MONITOR_NOTIFICATIONS]),r=S.default.generateAddIntegrationHelperText(e,T,2),a=f.default.getMonitorNotificationViewConfig(r,i,o);n.push(a)}if(_.isEmpty(_.get(e,v.CLIENT_CATEGORY_MONITOR_ANALYTICS,{}))){const e=S.default.filterIntegrationsByClientCategories(t,[v.CLIENT_CATEGORY_MONITOR_ANALYTICS]),r=S.default.generateAddIntegrationHelperText(e,A,2),a=f.default.getMonitorAnalyticsViewConfig(r,i,o);n.push(a)}return n}(e,r,i,n)}return[]}function O(e){const{entityType:t,entityId:i,configuredIntegrationsByClientCategory:o,integrationServices:r,integrationClasses:a}=e,[s,l]=(0,n.useState)([]),c=(0,h.resolveStoreInstance)(m.default).id;(0,n.useEffect)((()=>{l(j(o,r,c,t,i,a))}),[o,r,a]);const d=_.sortBy(_.uniqBy(_.flatMap(o),(e=>e.id)),(e=>e.name)),g=!_.isEmpty(d);return n.createElement(n.Fragment,null,n.createElement("div",{className:"integration-context-bar-list__integration-list"},d.map((e=>n.createElement(u.default,{key:e.name,integration:e}))),s.map((e=>n.createElement(p.default,{key:e.key,viewConfig:e}))),g&&n.createElement("div",{className:"integration-context-bar-list__browse",onClick:()=>{E.default.addEventV2({category:"integrations",action:"click",label:`integrations_browse_all_${t}`,value:1})}},n.createElement(C.default,{to:{routeIdentifier:I.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:"all"}}},"Browse integrations"))))}let D=(0,y.observer)(o=class extends n.Component{constructor(e){super(e),this.entityType=e.entityType,this.entityId=e.entityId,this.state={showIntegrations:!0,loading:!1,loaded:!1,error:!1,configuredIntegrationsByClientCategory:{}},this.toggleShowIntegrations=this.toggleShowIntegrations.bind(this),this.updateComponentData=this.updateComponentData.bind(this),this.integrationsStore=(0,h.resolveStoreInstance)(g.default)}updateComponentData(){const e=k[this.entityType].categories;let t=!1;this.fetchConfiguredIntegrationsAutorun=(0,b.autorun)((()=>{if((0,h.resolveStoreInstance)(d.default).isSocketConnected){t||this.setState({loading:!0,loaded:!1});const i=v.INTERNAL_ENTITY_NAME_MAPPING[this.entityType];c.default.getConfiguredIntegrationsByEntityAndClientCategory(i,this.entityId,e).then((e=>{const i=e;this.setState({configuredIntegrationsByClientCategory:i,loaded:!0}),t=!0})).catch((e=>this.setState({error:!0}))).finally((()=>this.setState({loading:!1})))}}))}componentDidMount(){this.updateComponentData()}componentWillUnmount(){this.fetchConfiguredIntegrationsAutorun&&this.fetchConfiguredIntegrationsAutorun()}toggleShowIntegrations(){this.setState((e=>({showIntegrations:!e.showIntegrations})))}render(){const e=!(0,h.resolveStoreInstance)(d.default).isSocketConnected,t=this.integrationsStore.getIntegrationServices(),i=this.integrationsStore.getIntegrationClasses(),o=this.integrationsStore.loadingIntegrationClasses,r=this.integrationsStore.loadingIntegrationServices;return n.createElement("div",{className:"integration-context-bar-list"},n.createElement("div",{className:"integration-context-bar-list__label-wrapper",onClick:this.toggleShowIntegrations},this.state.showIntegrations?n.createElement(s.default,{className:"integration-context-bar-list__label-wrapper-toggle",name:"icon-direction-down"}):n.createElement(s.default,{className:"integration-context-bar-list__label-wrapper-toggle",name:"icon-direction-right"})),n.createElement("div",{className:"integration-context-bar-list__label-wrapper-label",onClick:this.toggleShowIntegrations},"Integrations"),this.state.showIntegrations&&e&&!this.state.loaded&&n.createElement("div",{className:"integration-context-bar-list__status-info"},"You seem to be offline"),this.state.showIntegrations&&!e&&this.state.loading||o||r?n.createElement("div",{className:"integration-context-bar-list__loading"},n.createElement(l.default,null)):null,this.state.showIntegrations&&!e&&!this.state.loading&&this.state.error&&n.createElement("span",{className:"integration-context-bar-list__status-info"},"Unable to fetch integrations"),this.state.showIntegrations&&!this.state.error&&this.state.loaded&&!o&&!r&&n.createElement(O,{configuredIntegrationsByClientCategory:this.state.configuredIntegrationsByClientCategory,entityType:this.entityType,entityId:this.entityId,integrationServices:t,integrationClasses:i}))}})||o;D.propTypes={entityId:a().string.isRequired,entityType:a().oneOf(["collection","monitor"]).isRequired}},"./integrations/components/context-bar/IntegrationInfoMock.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return n}});var o=i("../../node_modules/react/index.js");function n(e){const{viewConfig:t}=e,[i,n]=(0,o.useState)(t.header),[r,a]=(0,o.useState)(t.body),[s,l]=(0,o.useState)(t.footer);return(0,o.useEffect)((()=>{n(t.header),a(t.body),l(t.footer)}),[t]),o.createElement("div",{className:"integration-context-bar-list__info"},o.createElement("div",{key:"header",className:"integration-context-bar-list__info-header"},i&&i),o.createElement("div",{key:"body",className:"integration-context-bar-list__info-body"},r&&r),o.createElement("div",{key:"footer",className:"integration-context-bar-list__info-footer"},t.route()))}},"./integrations/components/context-bar/IntegrationItem.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o=i("../../node_modules/react/index.js"),n=i("./node_modules/@postman/date-helper/index.js"),r=i.n(n),a=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),s=i("./integrations/navigation/constants.js"),l=i("./js/components/base/Tooltips.js"),c=i("./js/modules/services/AnalyticsService.js"),u=i("./appsdk/components/link/Link.js"),p=i("./node_modules/lodash/lodash.js");const d={created:{class:"integration-status-icon-success",icon:"icon-state-success-stroke"},active:{class:"integration-status-icon-success",icon:"icon-state-success-stroke"},failed:{class:"integration-status-icon-error",icon:"icon-state-info-stroke"}};function g(e){const{integration:t}=e,i=(0,o.useRef)(null),[n,g]=(0,o.useState)(!1);return o.createElement("div",{className:"integration-context-bar-list__item"},o.createElement("div",{className:"integration-context-bar-list__item-icon",onMouseEnter:()=>p.includes(["failed"],t.status)&&g(!0),onMouseLeave:()=>p.includes(["failed"],t.status)&&g(!1),ref:i},o.createElement(a.default,{className:d[t.status].class,name:d[t.status].icon,size:"small"}),o.createElement(l.Tooltip,{show:n,target:i.current,placement:"top",immediate:!0},o.createElement(l.TooltipBody,null,"This integration has ",o.createElement("strong",null,t.status)))),o.createElement("div",{className:"integration-context-bar-list__item-area"},o.createElement("div",{className:"integration-context-bar-list__item-label",title:t.name,onClick:()=>{c.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_run_log_target",value:1})}},o.createElement("span",null,o.createElement(u.default,{to:{routeIdentifier:s.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,routeParams:{integrationId:t.id}}},t.name))),o.createElement("div",null,o.createElement("span",{className:"integration-context-bar-list__item-last-run"},`Last run: ${t.lastRunAt?r().getFormattedDateAndTime(t.lastRunAt):"Not Available"}`))))}},"./integrations/components/context-bar/ViewConfig.js":function(e,t,i){i.r(t);var o=i("./js/modules/services/AnalyticsService.js"),n=i("./runtime-repl/_common/NavigationConstants.js"),r=i("./integrations/constants/IntegrationTargets.ts"),a=i("./integrations/navigation/constants.js"),s=i("../../node_modules/react/index.js"),l=i("./appsdk/components/link/Link.js");class c{constructor(e,t,i,o,n,r,a){this.key=e,this.header=t,this.body=i,this.footer=o,this.workspaceId=n,this.entityType=r,this.entityId=a}route(){}}class u extends c{constructor(e,t,i){super("backup-view-config","Back up your collection",e,"View all options",t,"collection",i)}route(){return o.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_all_collection_backup",value:1}),s.createElement(l.default,{to:{routeIdentifier:a.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:"backup"}},options:{additionalContext:{selectedWorkspaceId:this.workspaceId,selectedEntityId:this.entityId,selectedEntityType:"collection",redirect:{identifier:n.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_WITH_WS_SELECT,routeParams:{cid:this.entityId},queryParams:{ctx:"info"}}}}},this.footer&&this.footer)}}class p extends c{constructor(e,t,i){super("activity-view-config","Send monitoring results",e,"View all options",t,"monitor",i)}route(){return o.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_all_monitor_notifications",value:1}),s.createElement(l.default,{to:{routeIdentifier:a.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:r.CATEGORY_NOTIFICATIONS_NAV}},options:{additionalContext:{selectedWorkspaceId:this.workspaceId,selectedEntityId:this.entityId,selectedEntityType:"monitor",redirect:{identifier:"monitor.openWithWsSelect",routeParams:{monitorPath:this.entityId},queryParams:{ctx:"info"}}}}},this.footer&&this.footer)}}class d extends c{constructor(e,t,i){super("analytics-view-config","Send monitor analytics results",e,"View all options",t,"monitor",i)}route(){return o.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_all_monitor_analytics",value:1}),s.createElement(l.default,{to:{routeIdentifier:a.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:r.CATEGORY_ANALYTICS_NAV}},options:{additionalContext:{selectedWorkspaceId:this.workspaceId,selectedEntityId:this.entityId,selectedEntityType:"monitor",redirect:{identifier:"monitor.openWithWsSelect",routeParams:{monitorPath:this.entityId},queryParams:{ctx:"info"}}}}},this.footer&&this.footer)}}t.default={getCollectionBackupViewConfig:function(e,t,i){return new u(e,t,i)},getMonitorNotificationViewConfig:function(e,t,i){return new p(e,t,i)},getMonitorAnalyticsViewConfig:function(e,t,i){return new d(e,t,i)}}},"./integrations/components/context-bar/util.js":function(e,t,i){i.r(t);var o=i("./node_modules/lodash/lodash.js"),n=i.n(o);t.default={generateAddIntegrationHelperText:function(e,t,i){const o=new Set(e),r=[];for(const e of t)if(o.has(e)&&(r.push(e),o.delete(e)),n().isEqual(r.length,i))break;const a=[...o];for(;!n().isEqual(r.length,i)&&!n().isEmpty(a);)r.push(a.pop());return`\n      To ${r.join(", ")} \n      ${a.length>0?`or ${a.length} other ${a.length>1?"services":"service"}`:""}\n    `},filterAvailableIntegrationsByCategory:function(e,t){return n().map(n().filter(e,(e=>{const i=n().map(e.categories,"name");return n().includes(i,t)})),(e=>e.name))},filterIntegrationsByClientCategories:function(e,t){let i=n().filter(e,(e=>{const i=n().uniq(n().map(e.clientCategories,"key"));return n().find(i,(e=>n().includes(t,e)))}));return n().uniq(n().flatMap(i,(e=>n().map(e.services,"name"))))}}},"./integrations/monitoring/services/NewRelicService.js":function(e,t,i){i.r(t);var o=i("./node_modules/lodash/lodash.js"),n=i.n(o),r=i("./node_modules/moment/moment.js"),a=i.n(r),s=i("./node_modules/async/dist/async.js"),l=i.n(s),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("./integrations/monitoring/constants.js");t.default={listServices:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listDashboards:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchChartUrls:(e,t,i,o)=>{let r={};l().parallel([function(o){c.default.fetchActionDetails(e,{type:"fetchWebTransactionsChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return r.webTransactionsChartUrl=n().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchApdexScoreChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return r.apdexScoreChartUrl=n().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchErrorRateChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return r.errorRateChartUrl=n().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchThroughputChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return r.throughputChartUrl=n().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))}],(e=>e?o(e):o(null,r)))},fetchStatistics:(e,t,i,o)=>{let r={};l().parallel([function(i){c.default.fetchActionDetails(e,{type:"fetchDeployments",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=n().map(n().get(e.body,"data.data.actor.entity.deployments"),(e=>({...e,timestamp:a()(n().get(e,"timestamp")).format("MMM DD h:mm A")})));return r.deployments=t,i()}throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchViolationEvents",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=n().map(n().get(e.body,"data.data.actor.entities[0].recentAlertViolations"),(e=>({...e,openedAt:a()(n().get(e,"openedAt")).format("MMM DD h:mm A"),closedAt:n().get(e,"closedAt")?a()(n().get(e,"closedAt")).format("MMM DD h:mm A"):"-"})));return r.violationEvents=t,i()}throw e})).catch((e=>i(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchSlowestWebTransactions",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status){let t=n().map(n().get(e.body,"data.data.actor.entity.nrdbQuery.results"),(e=>({name:n().replace(e.name,"WebTransaction/Custom/",""),avg_time:`${n().round(e.avg_time,2)} ms`,error_rate:`${n().round(e.error_rate,1)}%`})));return r.slowestTransactions=t,o()}throw e})).catch((e=>o(e)))}],(e=>e?o(e):o(null,r)))},fetchMetricsForLinkedServices:e=>c.default.fetchActionDetails(e,{type:"fetchMetricsForLinkedServices"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchLinkedDashboards:e=>c.default.fetchActionDetails(e,{type:"fetchLinkedDashboards"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listSevicesWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:u.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_SERVICES,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(n().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),listDashboardsWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:u.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_DASHBOARDS,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(n().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),authenticateApiKey:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e)))}},"./js/stores/IntegrationsStore.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return fe}});var o,n,r,a,s,l,c,u,p,d,g,h,m,b,y,f,I,v,S,E,C,_,w,T,A,k,j,O,D,R,P,N,M,x,L,F,B,z,U,q,V,W,H,G,Y,$,J,K,Q,X,Z,ee,te,ie,oe,ne,re=i("../../node_modules/mobx/lib/mobx.module.js"),ae=i("./integrations/constants/integrationsConstants.ts"),se=i("./js/stores/StoreManager.js"),le=i("./js/stores/SyncStatusStore.js"),ce=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),ue=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),pe=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),de=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),ge=(i("./integrations/monitoring/services/NewRelicService.js"),i("./integrations/monitoring/constants.js"),i("./node_modules/lodash/lodash.js"));function he(e,t,i,o){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function me(e,t,i,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,o){return o(e,t,i)||i}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const be=3e5,ye=8e3;let fe=(n=me((o=class{constructor(){he(this,"activeIntegrationsView",n,this),he(this,"serviceId",r,this),he(this,"activeServiceDetailsId",a,this),he(this,"ruleId",s,this),he(this,"teamIntegrations",l,this),he(this,"availableIntegrations",c,this),he(this,"loadingAvailableIntegrations",u,this),he(this,"loadingIntegrationClasses",p,this),he(this,"loadingIntegrationServices",d,this),he(this,"errorFetchingAvailableIntegrations",g,this),he(this,"availableIntegrationsErrorDetails",h,this),he(this,"filteredAvailableIntegrations",m,this),he(this,"filterByCategoryAvailableIntegrations",b,this),he(this,"integrationCategories",y,this),he(this,"noTeamIntegrations",f,this),he(this,"loadingTeamIntegrations",I,this),he(this,"errorInFetchingTeamIntegrations",v,this),he(this,"errorDetails",S,this),he(this,"ruleSpecificTeamIntegrations",E,this),he(this,"ruleSpecificTeamIntegrationErrors",C,this),he(this,"serviceDetails",_,this),he(this,"ruleDetails",w,this),he(this,"noRuleSpecificTeamIntegrations",T,this),he(this,"isHydrating",A,this),he(this,"isAdding",k,this),he(this,"categoryFilter",j,this),he(this,"createFormActiveRuleId",O,this),he(this,"createFormActiveServiceId",D,this),he(this,"workspaces",R,this),he(this,"entities",P,this),he(this,"selectedWorkspace",N,this),he(this,"selectedEntity",M,this),he(this,"selectedEntityVersion",x,this),he(this,"authDetails",L,this),he(this,"errorFetchingAuthDetails",F,this),he(this,"authDetailsError",B,this),he(this,"runLogPageData",z,this),he(this,"loadingRunLogPage",U,this),he(this,"errorInFetchingRunLogPageData",q,this),he(this,"runLogPageErrorDetails",V,this),he(this,"sourceConflicting",W,this),he(this,"refreshingRunLog",H,this),he(this,"authType",G,this),he(this,"availableIntegrationClasses",Y,this),he(this,"integrationCategories",$,this),he(this,"availableIntegrationServices",J,this),he(this,"availableIntegrationServicesByCategory",K,this),he(this,"filteredIntegrationServices",Q,this),he(this,"preferredEntities",X,this),he(this,"integrationClass",Z,this),he(this,"loadingIntegrationClass",ee,this),he(this,"errorFetchingIntegrationClass",te,this),he(this,"integrationInstance",ie,this),he(this,"loadingIntegrationInstance",oe,this),he(this,"errorFetchingIntegrationInstance",ne,this),this.initializeFetchingTeamIntegrations=ge.debounce(this.initializeFetchingTeamIntegrations.bind(this),be,{leading:!0,trailing:!1}),this.getAvailableIntegrationClasses=ge.debounce(this.getAvailableIntegrationClasses.bind(this),be,{leading:!0,trailing:!1}),this.getAvailableIntegrationServices=ge.debounce(this.getAvailableIntegrationServices.bind(this),be,{leading:!0,trailing:!1}),this.initializeRuleSpecificTeamIntegrations=((e,t,i)=>{const o={};return(...n)=>{const[r,a]=n;return"function"==typeof o[a]||(o[a]=ge.debounce(e,t,{...i,leading:!0})),o[a](...n)}})(this.initializeRuleSpecificTeamIntegrations.bind(this),3e5,{leading:!0,trailing:!1})}setActiveIntegrationsView(e){this.activeIntegrationsView=e}readRuleSpecificTeamIntegrations(e){return(0,re.toJS)(this.ruleSpecificTeamIntegrations[e])}readServiceDetails(e){return(0,re.toJS)(this.serviceDetails[e])}readRuleDetails(e){return(0,re.toJS)(this.ruleDetails[e])}setAuthType(e){this.authType=e}setRuleSpecificTeamIntegrations(e,t){this.ruleSpecificTeamIntegrations[e]=t}resetRuleSpecificTeamIntegrations(e){delete this.ruleSpecificTeamIntegrations[e]}setServiceDetails(e,t){this.serviceDetails[e]=t}setRuleDetails(e,t){this.ruleDetails[e]=t}resetServiceDetails(e){delete this.serviceDetails[e]}setActiveIntegrationRule(e,t){this.serviceId=e,this.ruleId=t}updateCategoryfilter(e){this.categoryFilter=e,this.updateIntegrationServicesPerCategory(e)}updateRuleSpecificTeamIntegrationsDataStatus(e,t,i,o){this.ruleSpecificTeamIntegrationErrors[o]={loading:e,error:t,errorDetails:i}}readRuleSpecificTeamIntegrationsDataStatus(e){return{loading:!0,...(0,re.toJS)(this.ruleSpecificTeamIntegrationErrors[e])}}getRuleSpecificTeamIntegrationData(e,t){return this.updateRuleSpecificTeamIntegrationsDataStatus(!0,!1,"",t),Promise.all([ue.default.fetchIntegrationClassDetails(t),ue.default.fetchIntegrationServiceDetails(e),ce.default.getTeamIntegrationInstances(t)]).then((([i,o,n])=>{const r=ge.get(n,"body.data",[]),a=ge.get(i,"body.data",{}),s=ge.get(o,"body.data",{});if(200!==i.status||200!==n.status||200!==o.status||ge.isEmpty(a)||ge.isEmpty(s)){let e={};(200!==i.status||ge.isEmpty(a))&&(e.errorFetchingClassDetails=i),(200!==o.status||ge.isEmpty(s))&&(e.errorFetchingServiceDetatils=o),200!==n.status&&(e.errorFetchingTeamIntegrations=n),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}else{if(ge.isEmpty(r))this.setRuleSpecificTeamIntegrations(t,[]);else{let e=ge.map(r,(e=>({id:e.id,name:e.name,userId:e.createdBy.id,userName:ge.get(e,"createdBy.name")||ge.get(e,"createdBy.username")||ge.get(e,"createdBy.email")||"A user",isUserNameClickable:Boolean(ge.get(e,"createdBy.name")||ge.get(e,"createdBy.username")||ge.get(e,"createdBy.email")),userProfileUrl:e.createdBy.profilePicUrl,status:e.status,apiDetails:e.entity.api,entityType:e.entity.type,entityId:e.entity.id,entityName:e.entity.name,lastRunAt:e.lastRunAt,clientCategories:e.clientCategories})));this.setRuleSpecificTeamIntegrations(t,e)}this.setServiceDetails(e,s),this.setRuleDetails(t,a),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!1,"",t)}})).catch((i=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,i,t),this.resetRuleSpecificTeamIntegrations(t),this.resetServiceDetails(e)}))}getTeamIntegrationsData(){return this.setLoadingIntegrationClasses(!0),this.setLoadingIntegrationServices(!0),Promise.all([ue.default.fetchAvailableClasses(),ue.default.fetchAvailableServices(),ce.default.getTeamIntegrations()]).then((([e,t,i])=>{const o=ge.get(t,"body.data",[]),n=ge.get(e,"body.data",[]),r=ge.get(i,"body.data",[]);if(200!==e.status||200!==i.status||200!==t.status||ge.isEmpty(o)||ge.isEmpty(n)){let r={};(200!==t.status||ge.isEmpty(o))&&(r.errorFetchingServices=t),(200!==e.status||ge.isEmpty(n))&&(r.errorFetchingClasses=e),200!==i.status&&(r.errorFetchingTeamIntegrations=i),this.updateData(!1,[]),this.updateState(!1,!0,r)}else{if(ge.isEmpty(r))this.updateData(!0,[]),this.updateState(!1,!1,"");else{const e=ge.groupBy(r,"rule"),t=ge.map(e,((e,t)=>{const i=e[0].service,r=ge.find(n,(e=>e.id===t)),a=ge.find(o,(e=>e.id===i));return{ruleName:ge.get(r,"name"),ruleId:t,serviceId:i,serviceName:ge.get(a,"name",""),serviceIconURL:ge.get(a,"iconUrl",""),serviceDarkIconURL:ge.get(a,"darkIconUrl",""),statusCount:ge.countBy(e,(e=>e.status)),totalIntegrations:e.length}})),i=this.defaultSortTeamIntegrations(t);this.updateData(!1,i),this.updateState(!1,!1,"")}const e=this.addDisplayNameToIntegrationClasses(n);this.setAvailableIntegrationClasses(e),this.setAvailableIntegrationServices(o),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory)}this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!1,"")})).catch((e=>{pm.logger.error("Error in fetching team integrations",e),this.updateData(!1,[]),this.updateState(!1,!0,e),this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!0,e)}))}setIsHydrating(e){this.isHydrating=e}updateState(e,t,i){this.loadingTeamIntegrations=e,this.errorInFetchingTeamIntegrations=t,this.errorDetails=i}updateData(e,t){this.noTeamIntegrations=e,this.teamIntegrations=t}updateAvailableIntegrations(e){this.availableIntegrations=e}updateIntegrationCategories(){this.integrationCategories=pe.default.getAllCategories(this.availableIntegrations)}setAvailableIntegrationServices(e){this.availableIntegrationServices=e}addDisplayNameToIntegrationClasses(e){const t={};return ge.forEach(e,(e=>{const i=ge.get(e,"services",[]);ge.forEach(i,(i=>{ge.get(t,i.id)?t[i.id].push(e.id):t[i.id]=[e.id]}))})),ge.forEach(e,(e=>{const i=ge.get(e,"services.0",{});e.displayName=ge.size(t[i.id])>1?e.name:i.name})),e}setAvailableIntegrationClasses(e){this.availableIntegrationClasses=e}getIntegrationCategoriesFromServices(){this.integrationCategories=pe.default.getAllIntegrationCategories(this.availableIntegrationServices)}updateIntegrationServicesPerCategory(e){let t=pe.default.filterByCategory(e,(0,re.toJS)(this.availableIntegrationServices));ge.isEmpty(t)&&!ge.isEmpty((0,re.toJS)(this.availableIntegrationServices))&&(this.updateCategoryfilter("all"),t=(0,re.toJS)(this.availableIntegrationServices)),this.availableIntegrationServicesByCategory=t}updateFilteredIntegrationServices(e){this.filteredIntegrationServices=e}updateAvailableIntegrationsStatus(e,t,i){this.loadingAvailableIntegrations=e,this.errorFetchingAvailableIntegrations=t,this.availableIntegrationsErrorDetails=i}setLoadingIntegrationServices(e){this.loadingIntegrationServices=e}setLoadingIntegrationClasses(e){this.loadingIntegrationClasses=e}updateFilteredAvailableIntegrations(e){this.filteredAvailableIntegrations=e}updateFilterByCategoryAvailableIntegrations(e){let t=pe.default.filterByCategory(e,(0,re.toJS)(this.availableIntegrations));ge.isEmpty(t)&&!ge.isEmpty((0,re.toJS)(this.availableIntegrations))&&(this.updateCategoryfilter("all"),t=(0,re.toJS)(this.availableIntegrations)),this.filterByCategoryAvailableIntegrations=t}initializeFetchingTeamIntegrations(){(0,se.resolveStoreInstance)(le.default).onSyncAvailable({timeout:ye}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}initializeRuleSpecificTeamIntegrations(e,t){(0,se.resolveStoreInstance)(le.default).onSyncAvailable({timeout:ye}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchRuleSpecificTeamIntegrations(e,t){(0,se.resolveStoreInstance)(le.default).onSyncAvailable({timeout:ye}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchTeamIntegrations(){(0,se.resolveStoreInstance)(le.default).onSyncAvailable({timeout:ye}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}getAvailableIntegrationClasses(){return this.setLoadingIntegrationClasses(!0),ue.default.fetchAvailableClasses().then((e=>{const t=this.addDisplayNameToIntegrationClasses(ge.get(e,"body.data",[]));this.setAvailableIntegrationClasses(t),this.updateAvailableIntegrationsStatus(!1,!1,""),this.setLoadingIntegrationClasses(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationClasses(!1),pm.logger.error("Error occurred while fetching available integration classes",e)}))}getAvailableIntegrationServices(){return this.setLoadingIntegrationServices(!0),ue.default.fetchAvailableServices().then((e=>{this.setAvailableIntegrationServices(ge.get(e,"body.data",[])),this.updateAvailableIntegrationsStatus(!1,!1,""),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory),this.setLoadingIntegrationServices(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationServices(!1),pm.logger.error("Error occurred while fetching available integration services",e)}))}populateIntegrationClasses(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,se.resolveStoreInstance)(le.default).onSyncAvailable({timeout:ye}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationClasses()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}populateIntegrationServices(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,se.resolveStoreInstance)(le.default).onSyncAvailable({timeout:ye}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationServices()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}setActiveIntegrationService(e){this.activeServiceDetailsId=e}setActiveIntegrationCreateForm(e,t){this.createFormActiveServiceId=e,this.createFormActiveRuleId=t}setSelectedWorkspace(e){this.selectedWorkspace=e}setSelectedEntity(e){this.selectedEntity=e}setSelectedEntityVersion(e){this.selectedEntityVersion=e}resetSelectedWorkspace(){this.selectedWorkspace=null}resetSelectedEntity(){this.selectedEntity=null}resetSelectedEntityVersion(){this.selectedEntityVersion=null}resetAddIntegrationDependencies(){this.resetSelectedEntityVersion(),this.resetSelectedEntity(),this.resetSelectedWorkspace()}updateIsAdding(e){this.isAdding=e}updateSourceConflicting(e){this.sourceConflicting=e}readTeamIntegrations(){return(0,re.toJS)(this.teamIntegrations)}updateIdentityResponse(e){this.authDetails=ge.get(e,"body.handover")}updateIdentityResponseStatus(e,t){this.errorFetchingAuthDetails=e,this.authDetailsError=t}setAuthDetails(e){this.authDetails=e}readAuthDetails(){return(0,re.toJS)(this.authDetails)}defaultSortTeamIntegrations(e){const t=ge.filter(e,(e=>!!e.statusCount.failed)),i=ge.sortBy(t,(e=>ge.toLower(e.ruleName))),o=ge.sortBy(ge.difference(e,i),(e=>ge.toLower(e.ruleName)));return ge.concat(i,o)}updateRunsPageResponseStatus(e,t,i){this.loadingRunLogPage=e,this.errorInFetchingRunLogPageData=t,this.runLogPageErrorDetails=i}updateRunsPageResponse(e){this.runLogPageData=e}readIntegrationRunLogData(){return(0,re.toJS)(this.runLogPageData)}updateRefreshingRunLog(e){this.refreshingRunLog=e}addPreferredEntity(e,t){const i={entityType:e,entityId:t};ge.some(this.preferredEntities,i)||this.preferredEntities.push(i)}getIntegrationClassDetails(e){return this.loadingIntegrationClass=!0,new Promise(((t,i)=>{ue.default.fetchIntegrationClassDetails(e).then((e=>{const i=ge.get(e,"body.data");200!==e.status||ge.isEmpty(i)?this.errorFetchingIntegrationClass=e:(this.integrationClass=i,this.errorFetchingIntegrationClass=!1),this.loadingIntegrationClass=!1,t()})).catch((t=>{pm.logger.error("Error in fetching integration class details",e,t),this.errorFetchingIntegrationClass=t,this.loadingIntegrationClass=!1,i(t)}))}))}getIntegrationInstanceDetails(e){this.loadingIntegrationInstance=!0,de.default.fetchIntegrationInstanceDetails(e).then((e=>{const t=ge.get(e,"body.data");200!==e.status||ge.isEmpty(t)?this.errorFetchingIntegrationInstance=e:(t.allowedActions=ge.get(e,"body.meta.allowedActions"),this.integrationInstance=t,this.errorFetchingIntegrationInstance=!1),this.loadingIntegrationInstance=!1})).catch((t=>{pm.logger.error("Error in fetching integration instance details",e,t),this.errorFetchingIntegrationInstance=t,this.loadingIntegrationInstance=!1}))}getIntegrationClasses(){return ge.isEmpty(this.availableIntegrationClasses)&&this.populateIntegrationClasses(),this.availableIntegrationClasses}getIntegrationServices(){return ge.isEmpty(this.availableIntegrationServices)&&this.populateIntegrationServices(),this.availableIntegrationServices}}).prototype,"activeIntegrationsView",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.INTEGRATIONS_VIEW.TEAM}}),r=me(o.prototype,"serviceId",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=me(o.prototype,"activeServiceDetailsId",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=me(o.prototype,"ruleId",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=me(o.prototype,"teamIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=me(o.prototype,"availableIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=me(o.prototype,"loadingAvailableIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=me(o.prototype,"loadingIntegrationClasses",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=me(o.prototype,"loadingIntegrationServices",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=me(o.prototype,"errorFetchingAvailableIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=me(o.prototype,"availableIntegrationsErrorDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=me(o.prototype,"filteredAvailableIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=me(o.prototype,"filterByCategoryAvailableIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=me(o.prototype,"integrationCategories",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=me(o.prototype,"noTeamIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=me(o.prototype,"loadingTeamIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=me(o.prototype,"errorInFetchingTeamIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=me(o.prototype,"errorDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=me(o.prototype,"ruleSpecificTeamIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=me(o.prototype,"ruleSpecificTeamIntegrationErrors",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=me(o.prototype,"serviceDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=me(o.prototype,"ruleDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T=me(o.prototype,"noRuleSpecificTeamIntegrations",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=me(o.prototype,"isHydrating",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=me(o.prototype,"isAdding",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=me(o.prototype,"categoryFilter",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),O=me(o.prototype,"createFormActiveRuleId",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=me(o.prototype,"createFormActiveServiceId",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=me(o.prototype,"workspaces",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=me(o.prototype,"entities",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=me(o.prototype,"selectedWorkspace",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=me(o.prototype,"selectedEntity",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=me(o.prototype,"selectedEntityVersion",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=me(o.prototype,"authDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F=me(o.prototype,"errorFetchingAuthDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=me(o.prototype,"authDetailsError",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=me(o.prototype,"runLogPageData",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=me(o.prototype,"loadingRunLogPage",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=me(o.prototype,"errorInFetchingRunLogPageData",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=me(o.prototype,"runLogPageErrorDetails",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=me(o.prototype,"sourceConflicting",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=me(o.prototype,"refreshingRunLog",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=me(o.prototype,"authType",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=me(o.prototype,"availableIntegrationClasses",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=me(o.prototype,"integrationCategories",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=me(o.prototype,"availableIntegrationServices",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=me(o.prototype,"availableIntegrationServicesByCategory",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=me(o.prototype,"filteredIntegrationServices",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=me(o.prototype,"preferredEntities",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=me(o.prototype,"integrationClass",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=me(o.prototype,"loadingIntegrationClass",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=me(o.prototype,"errorFetchingIntegrationClass",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=me(o.prototype,"integrationInstance",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=me(o.prototype,"loadingIntegrationInstance",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=me(o.prototype,"errorFetchingIntegrationInstance",[re.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me(o.prototype,"setActiveIntegrationsView",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationsView"),o.prototype),me(o.prototype,"setAuthType",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setAuthType"),o.prototype),me(o.prototype,"setRuleSpecificTeamIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setRuleSpecificTeamIntegrations"),o.prototype),me(o.prototype,"resetRuleSpecificTeamIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"resetRuleSpecificTeamIntegrations"),o.prototype),me(o.prototype,"setServiceDetails",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setServiceDetails"),o.prototype),me(o.prototype,"setRuleDetails",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setRuleDetails"),o.prototype),me(o.prototype,"resetServiceDetails",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"resetServiceDetails"),o.prototype),me(o.prototype,"setActiveIntegrationRule",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationRule"),o.prototype),me(o.prototype,"updateCategoryfilter",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateCategoryfilter"),o.prototype),me(o.prototype,"updateRuleSpecificTeamIntegrationsDataStatus",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRuleSpecificTeamIntegrationsDataStatus"),o.prototype),me(o.prototype,"getRuleSpecificTeamIntegrationData",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getRuleSpecificTeamIntegrationData"),o.prototype),me(o.prototype,"getTeamIntegrationsData",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getTeamIntegrationsData"),o.prototype),me(o.prototype,"setIsHydrating",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsHydrating"),o.prototype),me(o.prototype,"updateState",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateState"),o.prototype),me(o.prototype,"updateData",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateData"),o.prototype),me(o.prototype,"updateAvailableIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateAvailableIntegrations"),o.prototype),me(o.prototype,"updateIntegrationCategories",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationCategories"),o.prototype),me(o.prototype,"setAvailableIntegrationServices",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setAvailableIntegrationServices"),o.prototype),me(o.prototype,"setAvailableIntegrationClasses",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setAvailableIntegrationClasses"),o.prototype),me(o.prototype,"getIntegrationCategoriesFromServices",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getIntegrationCategoriesFromServices"),o.prototype),me(o.prototype,"updateIntegrationServicesPerCategory",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationServicesPerCategory"),o.prototype),me(o.prototype,"updateFilteredIntegrationServices",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFilteredIntegrationServices"),o.prototype),me(o.prototype,"updateAvailableIntegrationsStatus",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateAvailableIntegrationsStatus"),o.prototype),me(o.prototype,"setLoadingIntegrationServices",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingIntegrationServices"),o.prototype),me(o.prototype,"setLoadingIntegrationClasses",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingIntegrationClasses"),o.prototype),me(o.prototype,"updateFilteredAvailableIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFilteredAvailableIntegrations"),o.prototype),me(o.prototype,"updateFilterByCategoryAvailableIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFilterByCategoryAvailableIntegrations"),o.prototype),me(o.prototype,"initializeFetchingTeamIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"initializeFetchingTeamIntegrations"),o.prototype),me(o.prototype,"initializeRuleSpecificTeamIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"initializeRuleSpecificTeamIntegrations"),o.prototype),me(o.prototype,"refetchRuleSpecificTeamIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"refetchRuleSpecificTeamIntegrations"),o.prototype),me(o.prototype,"refetchTeamIntegrations",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"refetchTeamIntegrations"),o.prototype),me(o.prototype,"getAvailableIntegrationClasses",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getAvailableIntegrationClasses"),o.prototype),me(o.prototype,"getAvailableIntegrationServices",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getAvailableIntegrationServices"),o.prototype),me(o.prototype,"populateIntegrationClasses",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"populateIntegrationClasses"),o.prototype),me(o.prototype,"populateIntegrationServices",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"populateIntegrationServices"),o.prototype),me(o.prototype,"setActiveIntegrationService",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationService"),o.prototype),me(o.prototype,"setActiveIntegrationCreateForm",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationCreateForm"),o.prototype),me(o.prototype,"setSelectedWorkspace",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedWorkspace"),o.prototype),me(o.prototype,"setSelectedEntity",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedEntity"),o.prototype),me(o.prototype,"setSelectedEntityVersion",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedEntityVersion"),o.prototype),me(o.prototype,"resetSelectedWorkspace",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"resetSelectedWorkspace"),o.prototype),me(o.prototype,"resetSelectedEntity",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"resetSelectedEntity"),o.prototype),me(o.prototype,"resetSelectedEntityVersion",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"resetSelectedEntityVersion"),o.prototype),me(o.prototype,"resetAddIntegrationDependencies",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"resetAddIntegrationDependencies"),o.prototype),me(o.prototype,"updateIsAdding",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIsAdding"),o.prototype),me(o.prototype,"updateSourceConflicting",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateSourceConflicting"),o.prototype),me(o.prototype,"updateIdentityResponse",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIdentityResponse"),o.prototype),me(o.prototype,"updateIdentityResponseStatus",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIdentityResponseStatus"),o.prototype),me(o.prototype,"setAuthDetails",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"setAuthDetails"),o.prototype),me(o.prototype,"updateRunsPageResponseStatus",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRunsPageResponseStatus"),o.prototype),me(o.prototype,"updateRunsPageResponse",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRunsPageResponse"),o.prototype),me(o.prototype,"updateRefreshingRunLog",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRefreshingRunLog"),o.prototype),me(o.prototype,"addPreferredEntity",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"addPreferredEntity"),o.prototype),me(o.prototype,"getIntegrationClassDetails",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getIntegrationClassDetails"),o.prototype),me(o.prototype,"getIntegrationInstanceDetails",[re.action],Object.getOwnPropertyDescriptor(o.prototype,"getIntegrationInstanceDetails"),o.prototype),o)},"./mocks/components/InactiveMockIndicator.js":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Tooltips.js");class r extends o.Component{constructor(e){super(e),this.state={tooltipVisible:!1},this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this)}mouseEnter(){this.setState({tooltipVisible:!0})}mouseLeave(){this.setState({tooltipVisible:!1})}render(){return o.createElement("div",{className:"inactive-mock-indicator",ref:"bullet",onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave},o.createElement(n.Tooltip,{target:this.refs.bullet,show:this.state.tooltipVisible,delay:0,placement:"bottom"},o.createElement(n.TooltipBody,null,"This mock server has been ",o.createElement("strong",null,"deactivated"),".")))}}t.default=r},"./mocks/components/InfoPaneMockListing.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var o=i("../../node_modules/react/index.js"),n=i("./node_modules/lodash/lodash.js"),r=i.n(n),a=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=i("./appsdk/components/link/Link.js"),p=i("./js/stores/CurrentUserStore.js"),d=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),g=i("./js/stores/StoreManager.js"),h=i("./js/stores/SyncStatusStore.js"),m=i("./js/components/base/LoadingIndicator.js"),b=i("./js/components/base/Buttons.js"),y=i("./mocks/services/MockService.js"),f=i("./mocks/services/MockNavigationService.js"),I=i("./mocks/constants/MockErrors.js"),v=i("./mocks/components/InactiveMockIndicator.js"),S=i("./collaboration/workspace/types/PermissionTypes.ts");function E(e){return o.createElement("div",{className:"info-pane__mock-servers__header-wrapper"},o.createElement("div",{className:"info-pane__mock-servers__header-wrapper__label"},"Mock servers"),"collection"===e.entity&&o.createElement(b.Button,{className:"info-pane__mock-servers__header-wrapper__create-new-mock",onClick:e.handleMockCreate,type:"tertiary",size:"small",disabled:!e.canAddMockToCollection||e.socketConnectionError,tooltip:(t=e.socketConnectionError,i=e.canAddMockToCollection,t?I.OFFLINE_ERROR:i?"Create mock server":I.PERMISSION_ERROR),tooltipPlacement:"left"},o.createElement(c.default,{name:"icon-action-add-stroke",color:"content-color-secondary",size:"small",className:"info-pane__mock-servers__header-wrapper__create-new-mock__icon"}),"New"));var t,i}class C extends o.Component{constructor(e){super(e),this.state={showAll:!1},this.toggleShowAll=this.toggleShowAll.bind(this)}toggleShowAll(){this.setState({showAll:!this.state.showAll})}render(){const e=r().get(this.props,"mocks",[]),t=e.length;return this.props.socketConnectionError?o.createElement("div",{className:"info-pane__mock-servers__error-state"},"Unable to load mock servers"):this.props.fetchingMocks?o.createElement("div",{className:"info-pane__mock-servers__loading"},o.createElement(m.default,null)):this.props.errorFetchingMocks?o.createElement(o.Fragment,null,o.createElement("div",{className:"info-pane__mock-servers__error-state"},"There was an unexpected error while loading mock servers. Please try again."),o.createElement(s.default,{onClick:this.props.handleFetchMocks,type:"secondary",size:"small",text:"Try again"})):0===t?o.createElement("div",{className:"info-pane__mock-servers__empty-state"},"collection"===this.props.entity?"There are no mock servers created for this collection.":"No mock server uses this environment."):o.createElement(o.Fragment,null,e.slice(0,this.state.showAll?t:5).map((e=>o.createElement("div",{key:e.id,className:"info-pane__mock-servers__mock-item"},o.createElement(u.default,{className:"info-pane__mock-servers__mock-item__link",to:{routeIdentifier:"mock.openWithWsSelect",routeParams:{mockId:e.id},queryParams:{}},options:{additionalContext:{origin:this.props.entity+"_info_pane"}},title:e.name},o.createElement(l.default,{type:"link-subtle",className:"info-pane__mock-servers__mock-item__link__name"},e.name)),!1===e.active&&o.createElement("div",{className:"info-pane__mock-servers__mock-item__active"},o.createElement(v.default,null))))),t>5&&(this.state.showAll?o.createElement("div",{onClick:this.toggleShowAll,className:"info-pane__mock-servers__show-all-mocks-label"},"Show less"):o.createElement("div",{onClick:this.toggleShowAll,className:"info-pane__mock-servers__show-all-mocks-label"},"Show ",t-5," more")))}}class _ extends o.Component{constructor(e){super(e),this.state={mocks:[],fetchingMocks:!0,errorFetchingMocks:!1,socketConnectionError:!1},this.handleFetchMocks=this.handleFetchMocks.bind(this),this.handleMockCreate=this.handleMockCreate.bind(this),this.canAddMockToCollection=this.canAddMockToCollection.bind(this)}componentDidMount(){this.fetchMockListingDisposer=(0,a.reaction)((()=>(0,g.resolveStoreInstance)(h.default).isSocketConnected),(e=>{e?this.handleFetchMocks():this.setState({socketConnectionError:!0,fetchingMocks:!1})}),{fireImmediately:!0})}componentWillUnmount(){this.fetchMockListingDisposer=null}handleFetchMocks(){let e={};return"collection"===this.props.entity&&this.props.collectionUid?e=r().assign(e,{collection:this.props.collectionUid}):"environment"===this.props.entity&&this.props.environmentUid&&(e=r().assign(e,{environment:this.props.environmentUid})),this.setState({fetchingMocks:!0,errorFetchingMocks:!1,socketConnectionError:!1}),(0,y.getMocks)({...e,inactive:!0}).then((e=>{this.setState({mocks:e,fetchingMocks:!1,errorFetchingMocks:!1})})).catch((e=>{this.setState({mocks:[],fetchingMocks:!1,errorFetchingMocks:!0})}))}handleMockCreate(){f.default.transitionTo("build.mockCreate",{},{collection:this.props.collectionUid},{additionalContext:{origin:"collection_info_pane"}})}canAddMockToCollection(){const e=r().get(this.props,"info.collection"),t=(0,g.resolveStoreInstance)(d.default),i=t&&t.permissions;return!(0,g.resolveStoreInstance)(p.default).isLoggedIn||r().get(e,"permissions.addMock",!0)&&r().get(i,S.WORKSPACE_PERMISSIONS.ADD_MOCK_TO_WORKSPACE,!0)}render(){return o.createElement("div",{className:"info-pane__mock-servers"},o.createElement(E,{canAddMockToCollection:this.canAddMockToCollection(),entity:this.props.entity,handleMockCreate:this.handleMockCreate,socketConnectionError:this.state.socketConnectionError}),o.createElement(C,{fetchingMocks:this.state.fetchingMocks,errorFetchingMocks:this.state.errorFetchingMocks,socketConnectionError:this.state.socketConnectionError,mocks:this.state.mocks,entity:this.props.entity,handleFetchMocks:this.handleFetchMocks}))}}},"./mocks/services/MockRealtimeRequestService.js":function(e,t,i){i.r(t);var o=i("./node_modules/uuid/v4.js"),n=i.n(o),r=i("./js/modules/model-event.js"),a=i("./node_modules/rxjs/_esm5/internal/Observable.js"),s=i("./node_modules/rxjs/_esm5/internal/operators/share.js"),l=i("./node_modules/rxjs/_esm5/internal/operators/filter.js"),c=i("./node_modules/lodash/lodash.js");const u="NEXT",p="ERROR",d="COMPLETE";let g=new a.Observable((e=>{let t;if(!pm||!pm.eventBus)return void pm.logger.error("RemoteRealtimeRequestService~requestListener: Could not fetch. Missing event bus.");let i=i=>{t=i.name,t!==u&&t!==p&&t!==d||e.next(i)};return pm.windowEvents.addListener("realtime-requests",i),()=>{pm.windowEvents.removeListener("realtime-requests",i)}})).pipe((0,s.share)());t.default=function(e,t={},i,o={}){pm.eventBus.channel("realtime-requests");let s=n()();return new a.Observable((n=>{let a=!1;pm.windowEvents.emit("realtime-requests",(0,r.createEvent)("SUBSCRIBE","realtimeRequest",{id:s,subscriptionRequestObject:{subscriptionRequestUrl:e,subscriptionRequestOptions:t},unsubscriptionRequestObject:{unsubscriptionRequestUrl:i,unsubscriptionRequestOptions:o}}));let h=g.pipe((0,l.filter)((e=>c.get(e,"data.id")===s))).subscribe((e=>{e.name===u?n.next(c.get(e,"data.response")):e.name===p?n.error(new Error(c.get(e,"data.error"))):e.name===d&&(a=!0,h.unsubscribe(),n.complete())}),(e=>{n.error(e)}),(()=>{n.complete()}));return function(){a||(pm.windowEvents.emit("realtime-requests",(0,r.createEvent)("UNSUBSCRIBE","realtimeRequest",{id:s,unsubscriptionRequestObject:{unsubscriptionRequestUrl:i,unsubscriptionRequestOptions:o}})),h.unsubscribe())}}))}},"./mocks/services/MockService.js":function(e,t,i){i.r(t),i.d(t,{createMock:function(){return g},deleteMock:function(){return d},getAllRealtimeEvents:function(){return p},getMockConfigOptions:function(){return l},getMocks:function(){return c},updateMock:function(){return u}});var o=i("./node_modules/querystring-browser/querystring.js"),n=i.n(o),r=i("./js/modules/services/RemoteSyncRequestService.js"),a=i("./mocks/services/MockRealtimeRequestService.js"),s=i("./node_modules/lodash/lodash.js");function l(){return r.default.request("/ws/proxy",{method:"post",data:{method:"get",service:"mock",path:"/mocks/config"}}).then((({body:e})=>e))}function c(e={}){let t=`/mocks?${n().stringify(e)}`;return r.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"get",path:t}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}function u(e={}){const t=`/mocks/${e.id}`,i=s.pick(e,["private","name","versionTag","environment"]);if(i.name&&(i.name=i.name.trim()),s.isUndefined(e.delay)||(i.config={delay:s.isNull(e.delay)?e.delay:{...e.delay,duration:Number(e.delay.duration)}}),!s.isUndefined(e.serverResponseId)){let t=i.config?i.config:{};i.config={...t,serverResponseId:e.serverResponseId}}if(!s.isUndefined(e.matchBody)){let t=i.config?i.config:{};i.config={...t,matchBody:e.matchBody}}if(!s.isUndefined(e.matchHeader)){let t=i.config?i.config:{};i.config={...t,matchHeader:e.matchHeader,headers:e.headers}}return r.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"put",body:i,path:t}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}function p(e,t){if(!e&&!t)return void pm.logger.error("MockService~getAllRealtimeEvents: workspaceId or mockId not found");const i="/mocks/subscribe",o="/ws/proxy",n=s.isEmpty(e)?{mock:t}:{workspace:e},r="mock",l={method:"post",data:{body:n,path:i,service:r,method:"post"}},c={method:"post",data:{body:n,path:i,service:r,method:"delete"}};return(0,a.default)(o,l,o,c)}function d(e){if(!e)return void pm.logger.error("MockService~deleteMock: mockId not found");const t=`/mocks/${e}`;return r.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"delete",path:t}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}function g(e,t,i=""){if(!e||!t)return void pm.logger.error("MockService~createMock: workspaceId or mockData not found");let o=`/mocks?workspace=${e}`;return t.name&&(t.name=t.name.trim()),"template"===i&&(o+="&source=template"),r.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"post",body:t,path:o}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}},"./monitors/components/common/MonitorStatusIndicator.js":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("./node_modules/classnames/index.js"),r=i.n(n),a=i("./js/components/base/Tooltips.js");class s extends o.Component{constructor(e){super(e),this.state={tooltipVisible:!1},this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.getStatus=this.getStatus.bind(this)}mouseEnter(){this.setState({tooltipVisible:!0})}mouseLeave(){this.setState({tooltipVisible:!1})}getClasses(){return r()({"monitor-list-item-health-status":!0,[this.getStatus()]:!!this.getStatus(),[this.props.className]:this.props.className})}getStatus(){return this.props.isPaused?"paused":this.props.isHealthy?"healthy":!1===this.props.isHealthy?"unhealthy":!!this.props.status&&this.props.status}getUptimeStatus(){return this.props.isPaused?o.createElement(a.TooltipBody,null,"This ",this.props.entityType," is ",o.createElement("strong",null,"paused"),"."):!this.props.isPaused&&"up"==this.props.status||"down"==this.props.status?o.createElement(a.TooltipBody,null,"Service is ",o.createElement("strong",null,this.props.status),"."):!this.props.isPaused&&"unknown"==this.props.status&&o.createElement(a.TooltipBody,null,"Service status is ",o.createElement("strong",null,this.props.status),".")}render(){return this.getStatus()?o.createElement("div",{className:this.getClasses(),ref:"bullet",onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave},o.createElement(a.Tooltip,{target:this.refs.bullet,show:this.state.tooltipVisible,delay:"0",className:"monitor-list-item-health-tooltip",placement:this.props.placement||"top"},"uptime"===this.props.type?this.getUptimeStatus():o.createElement(a.TooltipBody,null,"This ",this.props.entityType," is ",o.createElement("strong",null,this.getStatus()),"."))):null}}t.default=s},"./monitors/components/context-bar/MonitorContextBarList.js":function(e,t,i){i.r(t),i.d(t,{MonitorContextBarList:function(){return _}});var o,n=i("../../node_modules/react/index.js"),r=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=i("./monitors/stores/domain/MasterMonitorStore.js"),s=i("./monitors/services/UrlService.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=i("./appsdk/components/link/Link.js"),d=i("./js/components/base/LoadingIndicator.js"),g=i("./monitors/components/common/MonitorStatusIndicator.js"),h=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),m=i("./js/stores/CurrentUserStore.js"),b=i("./js/stores/StoreManager.js"),y=i("./js/stores/ActiveWorkspaceStore.js"),f=i("./js/components/base/Buttons.js"),I=i("./monitors/utils/messages/index.js"),v=i("./runtime-repl/_common/ModelConstant.js"),S=i("./node_modules/lodash/lodash.js");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},E.apply(this,arguments)}function C(e){return n.createElement(p.default,{className:"monitor-context-bar-list__item",to:{routeIdentifier:"monitor.openWithWsSelect",routeParams:{monitorPath:s.default.getMonitorPath({monitorName:e.name,monitorId:e.id})}}},n.createElement(l.default,{type:"link-subtle",className:"monitor-context-bar-list__item-label"},e.name),n.createElement("div",{className:"monitor-context-bar-list__item-icon"},n.createElement(g.default,{entityType:"monitor",isHealthy:e._healthy,isPaused:!e.active})))}let _=(0,r.observer)(o=class extends n.Component{constructor(e){super(e),this.masterMonitorStore=new a.default,this.entityId=e.id,this.state={showAllMonitors:!1,loading:!1,error:!1},this.toggleShowAllMonitors=this.toggleShowAllMonitors.bind(this),this.createNewMonitor=this.createNewMonitor.bind(this),this.activeWorkspaceStore=(0,b.resolveStoreInstance)(y.default),this.currentUserStore=(0,b.resolveStoreInstance)(m.default),this.fetchEmptyState=this.fetchEmptyState.bind(this),this.getEntityIdWithoutUserId=this.getEntityIdWithoutUserId.bind(this),this.canCreateMonitor=this.canCreateMonitor.bind(this),this.loadMonitors=this.loadMonitors.bind(this),this.fetchErrorState=this.fetchErrorState.bind(this),this.getTooltipMessage=this.getTooltipMessage.bind(this)}toggleShowAllMonitors(){this.setState({showAllMonitors:!this.state.showAllMonitors})}createNewMonitor(){if(!this.currentUserStore.isLoggedIn)return pm.mediator.trigger("showSignInModal",{title:I.SIGN_IN_MESSAGE.title,subtitle:I.SIGN_IN_MESSAGE.subTitle,origin:`${this.props.entity}_context_bar_monitor_list`});s.default.openCreateMonitorUrl(this.entityId)}loadMonitors(){this.setState({loading:!0}),this.masterMonitorStore.loadJobTemplatesByEntity({entity:this.props.entity,entityId:this.props.id}).then((()=>this.setState({...this.state,loading:!1,error:!1}))).catch((()=>this.setState({error:!0}))).finally((()=>this.setState({loading:!1})))}componentDidMount(){this.loadMonitors()}fetchEmptyState(e){const t="environment",i="collection";return e===t?n.createElement("span",{className:"monitor-context-bar-list__empty-state"},`${I.EMPTY_STATE.noEnvironment} ${t}.`):n.createElement("span",{className:"monitor-context-bar-list__empty-state"},`${I.EMPTY_STATE.noCollection} ${i}.`)}fetchErrorState(){return n.createElement("div",{className:"monitor-context-bar-list__error-state"},n.createElement("span",{className:"monitor-context-bar-list__error-state-message"},I.MONITOR_ACTION_ERROR.load),n.createElement(c.default,{onClick:this.loadMonitors,type:"secondary",size:"small",text:I.TRY_AGAIN,className:"monitor-context-bar-list__error-state-retry-btn"}))}getEntityIdWithoutUserId(){let e=S.get(this,"props.id","").indexOf("-");if(-1!==e)return this.props.id.substr(e+1)}canCreateMonitor(){const e=(0,b.resolveStoreInstance)(h.default).permissions;if(this.props.entity!==v.COLLECTION)return!0;const t=this.props.info.collection;return!this.currentUserStore.isLoggedIn||e&&e.ADD_MONITOR_TO_WORKSPACE&&S.get(t,"permissions.addMonitor",!0)}getTooltipMessage(){return this.masterMonitorStore.isOffline?I.TOOLTIP_TEXT.isOffline:this.canCreateMonitor()?I.MONITOR_ACTION.create:I.PERMISSION_TEXT.WORKSPACE_VIEWER_DISABLED}render(){const e=this.masterMonitorStore.getJobTemplatesByEntity({entity:this.props.entity,entityId:this.props.id}),t=this.state.showAllMonitors?e:e.slice(0,5);return n.createElement("div",{className:"monitor-context-bar-list"},n.createElement("div",{className:"monitor-context-bar-list__label-wrapper"},n.createElement("span",{className:"monitor-context-bar-list__label-wrapper-label"},"Monitors"),this.props.showCreateMonitor?n.createElement(f.Button,{onClick:this.createNewMonitor,type:"tertiary",size:"small",disabled:!this.canCreateMonitor()||this.masterMonitorStore.isOffline,className:"monitor-context-bar-list__label-wrapper-create-new-monitor",tooltip:this.getTooltipMessage(),tooltipPlacement:"left"},n.createElement(u.default,{name:"icon-action-add-stroke",color:"content-color-secondary",size:"small",className:"monitor-context-bar-list__label-wrapper-create-new-monitor-icon"}),"New"):null),this.state.loading&&!t.length&&n.createElement("div",{className:"monitor-context-bar-list__loading"},n.createElement(d.default,null)),this.state.error&&!this.state.loading&&this.fetchErrorState(),!this.state.error&&!this.state.loading&&0===t.length&&this.fetchEmptyState(this.props.entity),n.createElement("div",{className:"monitor-context-bar-list__monitor-list"},t.map((e=>n.createElement(C,E({key:e.id},e,{openMonitor:this.openMonitor}))))),e.length>5?this.state.showAllMonitors?n.createElement("span",{onClick:this.toggleShowAllMonitors,className:"monitor-context-bar-list__show-all-monitors"},I.MONITOR_ACTION.showLess):n.createElement("span",{onClick:this.toggleShowAllMonitors,className:"monitor-context-bar-list__show-all-monitors"},"Show ",e.length-5," more"):null)}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js":function(e,t,i){i.r(t);var o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");const n="integrations";t.default={fetchIntegrationClassDetails(e,t){const i=`/integration-classes/${e}`;return o.HTTPGatewayService.request({data:{service:n,method:"get",path:i,query:t}})},fetchAvailableClasses:()=>o.HTTPGatewayService.request({data:{service:n,method:"get",path:"/integration-classes"}}),fetchAvailableServices:()=>o.HTTPGatewayService.request({data:{service:n,method:"get",path:"/services"}}),fetchIntegrationServiceDetails(e,t){const i=`/services/${e}`;return o.HTTPGatewayService.request({data:{service:n,method:"get",path:i,query:t}})}}},"./runtime-repl/collection/contextbar/CollectionInfoCBController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o,n,r,a,s,l=i("../../node_modules/mobx/lib/mobx.module.js"),c=i("./runtime-repl/collection/_api/CollectionStoreV2.js");function u(e,t,i,o){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function p(e,t,i,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,o){return o(e,t,i)||i}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let d=(n=p((o=class{constructor(){u(this,"id",n,this),u(this,"createdAt",r,this),u(this,"collection",a,this),u(this,"owner",s,this)}update(e){e&&(e.id&&(this.id=e.id),e.createdAt&&(this.createdAt=e.createdAt),e.owner&&(this.owner=e.owner),e.collection&&(this.collection=e.collection))}}).prototype,"id",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=p(o.prototype,"createdAt",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=p(o.prototype,"collection",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=p(o.prototype,"owner",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p(o.prototype,"update",[l.action],Object.getOwnPropertyDescriptor(o.prototype,"update"),o.prototype),o);class g{constructor(){this.info=new d}async didCreate(e){const{uid:t}=e;this.info.update({id:t}),this.collection=await(0,c.subscribeOne)(t,{permissions:this.constructor.collectionPermissions,exclude:["response","request"]}),this.collection&&this.info.update({id:t,createdAt:this.collection.createdAt,owner:this.collection.owner,collection:this.collection})}willDestroy(){this.collection&&this.collection.unsubscribe&&this.collection.unsubscribe()}}g.collectionPermissions=["addMock","addMonitor"]},"./runtime-repl/collection/contextbar/CollectionInfoCBView/CollectionInfoCBView.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o=i("../../node_modules/react/index.js"),n=i("./node_modules/prop-types/index.js"),r=i.n(n),a=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=i("../../packages/api-network/private-network/index.js"),l=i("./js/stores/ActiveWorkspaceSessionStore.js"),c=i("./js/stores/StoreManager.js"),u=i("./js/services/NavigationService.js"),p=i("./runtime-repl/_common/components/molecule.js"),d=i("./appsdk/contextbar/ContextBarViewHeader.js"),g=i("./monitors/components/context-bar/MonitorContextBarList.js"),h=i("./runtime-repl/collection/contextbar/CollectionInfoCBController.js"),m=i("./mocks/components/InfoPaneMockListing.js"),b=i("./integrations/components/context-bar/IntegrationContextBarList.js"),y=i("./appsdk/workbench/WorkbenchService.js"),f=i("./node_modules/lodash/lodash.js");const I=a.default.div`
  padding-top: var(--spacing-l);
`;function v(e){const{controller:t}=e,{info:i={}}=t,{apiId:n}=u.default.getCurrentRouteParams(),r=(0,c.resolveStoreInstance)(l.default).activeEditor,a=y.default.getTabController(r),h=a&&a.model,v=h&&h.actionMenuContext,S=f.get(v,"canEditEntity");return o.createElement("div",{className:"collection-info-cb"},o.createElement(d.ContextBarViewHeader,{title:"Collection details",onClose:e.onClose}),o.createElement("div",{className:"collection-info-cb__container"},o.createElement(p.EntityMetaInfoView,{userFriendlyEntityName:"collection",info:i}),!n&&o.createElement(m.default,{collectionUid:i.id,info:i,entity:"collection"}),!n&&o.createElement(g.MonitorContextBarList,{id:i.id,info:i,entity:"collection",showCreateMonitor:!0}),o.createElement(I,null,o.createElement(s.AddToNetworkCTA,{entityId:i.id,entityType:"collection",origin:"collection-cb",canNotEditEntity:!S})),f.includes(["dev","beta","stage","canary","prod"],window.RELEASE_CHANNEL)&&o.createElement(b.IntegrationContextBarList,{entityId:i.id,entityType:"collection"})))}v.propTypes={controller:r().instanceOf(h.default).isRequired,onClose:r().func.isRequired}},"./integrations/constants/IntegrationTargets.ts":function(e,t,i){i.r(t),i.d(t,{CATEGORY_ANALYTICS_NAV:function(){return s},CATEGORY_BACKUP:function(){return l},CATEGORY_NOTIFICATIONS_NAV:function(){return a},CLIENT_CATEGORY_COLLECTION_BACKUP:function(){return o},CLIENT_CATEGORY_MONITOR_ANALYTICS:function(){return n},CLIENT_CATEGORY_MONITOR_NOTIFICATIONS:function(){return r},INTERNAL_ENTITY_NAME_MAPPING:function(){return c}});const o="backup-collection",n="analytics-monitor",r="notifications-monitor",a="notifications",s="analytics",l="Backup",c={monitor:"jobTemplate",collection:"collection"}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts":function(e,t,i){i.r(t);var o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),n=i("./node_modules/lodash/lodash.js"),r=i.n(n);const a="integrations",s="/integration-instances",l="/bulk";t.default={fetchIntegrationInstanceDetails(e,t){const i=`/integration-instances/${e}`;return o.HTTPGatewayService.request({data:{service:a,method:"get",path:i,query:t}})},getConfiguredIntegrationsForAnEntity(e,t,i){const n=r().join(i,",");return o.HTTPGatewayService.request({data:{service:a,method:"get",path:"/integration-instances",query:{entityType:e,entityId:t,clientCategory:n}}})},createIntegrationInstance(e,t,i){const n=r().map(i,((e,t)=>({key:t,value:e})));return o.HTTPGatewayService.request({data:{service:a,method:"post",path:"/integration-instances",body:{class:e,name:t,inputs:n}}})},createIntegrationInstanceBulk(e){const t=s+l;return o.HTTPGatewayService.request({data:{service:a,method:"post",path:t,body:e}})},updateIntegrationInstance(e,t,i){const n=`/integration-instances/${e}`,s=r().map(i,((e,t)=>({key:t,value:e}))),l={};return r().isNil(t)||(l.name=t),r().isEmpty(s)||(l.inputs=s),o.HTTPGatewayService.request({data:{service:a,method:"put",path:n,body:l}})}}}}]);