"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[42],{"../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/@postman/aether-design-tokens/esmLib/src/tokens.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js");function p(e){var t=e.isHidden,n=e.direction,r=e.children,o=e.padding,s=e.label,p=e.helperText,u=e["data-testid"],g=e["data-click"],m=i.Children.map(r,(function(e){return(0,i.isValidElement)(e)&&e.type===d.default?e:null}));return i.createElement("div",{"data-testid":u,"data-click":g},s?i.createElement(l.default,{type:"h6",text:s}):"",p?i.createElement(a.default,{padding:"spacing-xs spacing-zero"},i.createElement(c.default,{type:"para"},p)):"",i.createElement(a.default,{hiddenFor:t?["mobile","tablet","computer"]:[],direction:n,padding:o,gap:"column"===n?"spacing-m":"spacing-l"},m))}t.default=p,p.defaultProps={label:"",isHidden:!1,direction:"column",padding:"spacing-s spacing-zero spacing-zero",helperText:"","data-testid":"aether-checkbox-group","data-click":""},p.propTypes={isHidden:o().bool,direction:o().oneOf(["row","column"]),children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,padding:o().oneOfType([o().oneOf(Object.keys(s.globals.spacing)),o().shape({paddingTop:o().string,paddingBottom:o().string,paddingLeft:o().string,paddingRight:o().string}),o().string]),label:o().string,helperText:o().string,"data-testid":o().string,"data-click":o().string}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js":function(e,t,n){n.r(t),n.d(t,{DefaultMultiSelectMenuList:function(){return v},MultiSelectChip:function(){return h},MultiSelectChipCloseIcon:function(){return g},MultiSelectChipLabel:function(){return b},MultiSelectOption:function(){return p}});var i=n("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("../../node_modules/@postman/aether/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke-small.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=["isDisabled","isFocused","children"],d=o.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectOption",componentId:"sc-1e7h8n3-0"})(["display:flex;align-items:center;cursor:pointer;font-size:",";line-height:",";padding:",";border-radius:",";color:",";"," ",""],(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["line-height-m"]}),(function(e){return"".concat(e.theme["spacing-xs"]," ").concat(e.theme["spacing-m"],";")}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.isFocused&&!e.isDisabled&&"background-color: ".concat(e.theme["highlight-background-color-primary"],";")}),(function(e){return e.isDisabled&&"\n      cursor: not-allowed;\n      color: ".concat(e.theme["content-color-tertiary"],";\n    ")}));function p(e){var t=e.isDisabled,n=e.isFocused,o=e.children,a=(0,i.default)(e,c);return r.createElement(s.c.Option,a,r.createElement(d,{isDisabled:t,isFocused:n},o))}var u=o.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChipCloseIcon",componentId:"sc-1e7h8n3-1"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";margin-left:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:",";svg path{fill:",";}&:hover{background-color:",";svg path{fill:",";}}"],(function(e){return e.theme["size-s"]}),(function(e){return e.theme["size-s"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-primary"]}));function g(e){return r.createElement(s.c.MultiValueRemove,e,r.createElement(u,{className:"aether-multiselect-dropdown__multi-value-chip--remove-icon"},r.createElement(a.default,null)))}var m=o.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChip",componentId:"sc-1e7h8n3-2"})(["box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;height:",";padding:",";margin-bottom:",";margin-right:",";color:",";background-color:",";border-radius:",";"],(function(e){return e.theme["size-s"]}),(function(e){return"2px ".concat(e.theme["spacing-zero"]," 2px ").concat(e.theme["spacing-s"])}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["border-radius-default"]}));function h(e){var t=e.children;return r.createElement(m,{className:"aether-multiselect-dropdown__multi-select-chip"},t)}function b(e){var t=e.children;return r.createElement(l.default,{type:"body-medium"},t)}var f=(0,o.default)(s.c.MenuList).withConfig({displayName:"CustomMultiSelectComponents__StyledMenuList",componentId:"sc-1e7h8n3-3"})(["padding:8px;& .aether-multiselect-dropdown__group:not(:last-child){margin-bottom:12px;}& .aether-multiselect-dropdown__group:first-child{padding-top:4px;}"]);function v(e){var t=e.children;return r.createElement(f,e,t)}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js":function(e,t,n){n.r(t),n.d(t,{customBaseStyles:function(){return a},postmanSpecificStyles:function(){return s}});var i=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").css)(["& .aether-multiselect-dropdown__single-value{color:",";left:",";right:",";}& .aether-multiselect-dropdown__control{box-sizing:border-box;height:auto;min-height:32px;max-height:72px;overflow-x:hidden;overflow-y:auto;border:",";transition:border-color 0.2s ease-in-out,box-shadow 0.2s ease-in-out;background-color:",";& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:none;}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__value-container,& .aether-multiselect-dropdown__single-value{color:",";}&:hover{border-color:",";}&--is-focused{outline:none;border:",";box-shadow:",";&:hover{border:",";}& .aether-multiselect-dropdown__single-value{right:",";}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:inline-flex;}}&--is-disabled{user-select:none;cursor:not-allowed;background:",";border:",";color:",";& .aether-multiselect-dropdown__dropdown-indicator svg path{fill:",";}& .aether-multiselect-dropdown__multi-select-chip{color:",";}&:hover{border-color:",";}}","}& .aether-multiselect-dropdown__input{color:"," !important;caret-color:",";height:16px;}& .aether-multiselect-dropdown__placeholder{color:",";}& .aether-multiselect-dropdown__dropdown-indicator{svg path{fill:",";}padding:",";}& .aether-multiselect-dropdown__clear-indicator{padding:",";}"],(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["spacing-xl"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-default"],";")}),(function(e){return e.theme["background-color-primary"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["input-border-color-default"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return"0 0 0 2px ".concat(e.theme["input-shadow-focus"],";")}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return e.theme["spacing-xxxl"]}),(function(e){return e.theme["spacing-zero"]}),(function(e){return e.theme["input-background-color-disabled"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"],";")}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["border-color-strong"]}),(function(e){var t=e.validationState;return t.status?"\n          border-color: ".concat(e.theme["input-border-color-".concat(t.status)],";\n\n          &:hover {\n            border-color: ").concat(e.theme["input-border-color-".concat(t.status)],";\n          }\n\n          &--is-focused,\n          &--is-focused:hover {\n            border-color: ").concat(e.theme["input-border-color-focus"],";;\n          }\n        "):""}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-s"],";")}),(function(e){return e.theme["spacing-zero"]})),a={container:function(e){return o(o({},e),{},{pointerEvents:"auto"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}}}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js":function(e,t,n){n.r(t),n.d(t,{StyledCreatableReactSelect:function(){return f},StyledReactSelect:function(){return b},default:function(){return v}});var i=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),r=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/node_modules/react-select/dist/react-select.esm.js"),l=n("../../node_modules/@postman/aether/node_modules/react-select/creatable/dist/react-select.esm.js"),c=n("../../node_modules/prop-types/index.js"),d=n.n(c),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/CustomComponents.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,s.default)(a.default).withConfig({displayName:"DefaultMultiSelect__StyledReactSelect",componentId:"sc-14ka43a-0"})(["",""],g.postmanSpecificStyles),f=(0,s.default)(l.default).withConfig({displayName:"DefaultMultiSelect__StyledCreatableReactSelect",componentId:"sc-14ka43a-1"})(["",""],g.postmanSpecificStyles);function v(e){var t=e["aria-label"],n=e["aria-labelledby"],r=e.id,s=e.isOpen,a=e.onChange,l=e.onCreateNewOption,c=e.onClose,d=e.onOpen,g=e.options,m=e.value,v=e.placeholder,y=e.emptyStateMessage,I=e.isDisabled,S=e.isLoading,E=e.isOptionDisabled,A=e.viaPortal,_=e.closeMenuOnSelect,w=e.validationState,j=e.allowCreateNewOption,D=e.customOptionComponent,C=e.menuMaxHeight,P=e.triggerWidth,T=e.containerWidth,O=e.className;function M(e,t){var n=t.action,i=t.option;"create-option"===n&&l&&l(i),a(e,{action:n,option:i})}return o.createElement(o.Fragment,null,j?o.createElement(f,(0,i.default)({isMulti:!0,inputId:r,menuIsOpen:s},A&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:M,onMenuClose:c,onMenuOpen:d},m&&{value:m},{options:g,placeholder:v,isDisabled:I,closeMenuOnSelect:_,"aria-label":t,"aria-labelledby":n},E&&{isOptionDisabled:E},{emptyStateMessage:y,formatOptionLabel:!S&&D,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:O,maxMenuHeight:C,styles:{container:function(e){return h(h({},e),{},{pointerEvents:"auto"})},control:function(e){return h(h({},e),{},{width:P})},input:function(e){return h(h({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return h(h({},e),{},{padding:0,margin:0})},groupHeading:function(e){return h(h({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return h(h({},e),{},{width:T,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return h(h({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return h(h({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return h(h({},e),{},{padding:"0"})},option:function(e){return h(h({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return h(h({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return h(h({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:p.EmptyState,Option:u.MultiSelectOption,Menu:p.Menu,MenuList:S?p.StaticLoader:u.DefaultMultiSelectMenuList,MultiValueContainer:u.MultiSelectChip,MultiValueLabel:u.MultiSelectChipLabel,MultiValueRemove:u.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:p.GroupHeading}})):o.createElement(b,(0,i.default)({isMulti:!0,inputId:r,menuIsOpen:s},A&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:M,onMenuClose:c,onMenuOpen:d},m&&{value:m},{options:g,placeholder:v,isDisabled:I,closeMenuOnSelect:_,"aria-label":t,"aria-labelledby":n},E&&{isOptionDisabled:E},{emptyStateMessage:y,formatOptionLabel:!S&&D,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:O,maxMenuHeight:C,styles:{container:function(e){return h(h({},e),{},{pointerEvents:"auto"})},control:function(e){return h(h({},e),{},{width:P})},input:function(e){return h(h({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return h(h({},e),{},{padding:0,margin:0})},groupHeading:function(e){return h(h({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return h(h({},e),{},{width:T,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return h(h({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return h(h({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return h(h({},e),{},{padding:"0"})},option:function(e){return h(h({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return h(h({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return h(h({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:p.EmptyState,Option:u.MultiSelectOption,Menu:p.Menu,MenuList:S?p.StaticLoader:u.DefaultMultiSelectMenuList,MultiValueContainer:u.MultiSelectChip,MultiValueLabel:u.MultiSelectChipLabel,MultiValueRemove:u.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:p.GroupHeading}})))}v.defaultProps={isOpen:void 0,onClose:null,onCreateNewOption:null,onOpen:null,value:null,"aria-label":void 0,"aria-labelledby":void 0,placeholder:"Select option",emptyStateMessage:"No options found",menuMaxHeight:"auto",triggerWidth:"auto",containerWidth:"auto",className:"",isDisabled:!1,isLoading:!1,viaPortal:!1,isOptionDisabled:function(){},closeMenuOnSelect:!1,allowCreateNewOption:!1,customOptionComponent:null,validationState:{status:"",message:""}},v.propTypes={onChange:d().func.isRequired,options:d().arrayOf(d().shape({label:d().string,value:d().oneOfType([d().string,d().number])})).isRequired,id:d().string.isRequired,"aria-label":d().string,"aria-labelledby":d().string,value:d().array,isOpen:d().bool,onClose:d().func,onCreateNewOption:function(e){var t=e.allowCreateNewOption,n=e.onCreateNewOption;return!t&&n?new Error("MultiSelect: onCreateNewOption is only allowed to be used when the prop allowCreateNewOption is passed as true."):n&&"function"!=typeof n?new Error("MultiSelect: Expected the type of the onCreateNewOption to be a function."):null},onOpen:d().func,placeholder:d().string,emptyStateMessage:d().string,menuMaxHeight:d().oneOfType([d().number,d().string]),triggerWidth:d().oneOfType([d().number,d().string]),containerWidth:d().oneOfType([d().string,d().number]),className:d().string,isDisabled:d().bool,isLoading:d().bool,viaPortal:d().bool,isOptionDisabled:d().func,closeMenuOnSelect:d().bool,allowCreateNewOption:d().bool,customOptionComponent:d().func,validationState:d().shape({status:d().oneOf(["","success","error","warning"]),message:d().string})}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),r=n("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),a=n.n(s),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownContainer.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownLabel.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownValidationMessage.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js");function m(e){var t=(0,o.useRef)(null),n=(0,o.useState)(""),s=(0,r.default)(n,2),a=s[0],l=s[1],m=e.type,h=e.label,b=e.helperText,f=e.id,v=e.validationState,y=e["data-testid"],I=e["data-click"];return(0,o.useEffect)((function(){t.current&&(t.current.offsetWidth?l(t.current.offsetWidth):l("auto"))}),[]),"compact"===m?o.createElement(g.default,e):o.createElement(c.default,{ref:t,"data-aether-id":"aether-multiSelect","data-testid":y,"data-click":I},o.createElement(d.default,{id:f,label:h,helperText:b}),o.createElement(u.default,(0,i.default)({containerWidth:a},e)),o.createElement(p.default,{validationState:v}))}m.defaultProps={type:"default",id:"",label:"",helperText:"",validationState:{status:"",message:""},"data-testid":"aether-multi-select","data-click":""},m.propTypes={type:a().oneOf(["default","compact"]),id:a().string,label:function(e){var t=e.label;return t&&t.type!==l.default&&"string"!=typeof t?new Error("MultiSelect: label prop only accepts string or the Aether's Label component as valid value."):null},helperText:a().string,validationState:a().shape({status:a().oneOf(["","success","error","warning"]),message:a().string}),"data-testid":a().string,"data-click":a().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=s.default.span.withConfig({displayName:"Step__StyledStatusIndicator",componentId:"hb80lw-0"})(["width:12px;height:12px;box-sizing:border-box;border-radius:",";border:",";background-color:",";"],(function(e){return e.theme["border-radius-max"]}),(function(e){return"progress"!==e.status?"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["grey-40"]):""}),(function(e){return"progress"===e.status?e.theme["base-color-brand"]:e.theme["background-color-primary"]})),u=s.default.div.withConfig({displayName:"Step__StyledStepWrapper",componentId:"hb80lw-1"})(["display:inline;padding-left:",";& > .aether-step__label{& > .aether-button__text{color:",";&:hover{color:",";}}}"],(function(e){return e.theme["spacing-xs"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-primary"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-link"]})),g=(0,s.default)(d.default).withConfig({displayName:"Step__StyledCustomCurrentStepText",componentId:"hb80lw-2"})(["line-height:1.334;"]);function m(e){var t=e.label,n=e.status,r=e.isDisabled,o=e._stepIndex,s=e._onChange,d=e._isActive,m=e.className;return i.createElement(l.default,{basis:"0px",grow:1,shrink:1,alignItems:"center",className:m,padding:{paddingRight:"spacing-l"}},"completed"===n?i.createElement(a.default,{name:"icon-state-success-stroke-small",color:"content-color-primary",size:"small"}):i.createElement(p,{status:n}),i.createElement(u,{isDisabled:r},d?i.createElement(g,{color:"content-color-primary"},t):i.createElement(c.default,{className:"aether-step__label",isDisabled:r,text:t,type:"plain",onClick:function(){!r&&s&&s(o)}})))}m.defaultProps={className:"",status:"pending",isDisabled:!1,_isActive:!1,_stepIndex:0,_onChange:null},m.propTypes={label:o().string.isRequired,isDisabled:o().bool,_isActive:o().bool,status:o().oneOf(["pending","progress","completed"]),_stepIndex:o().number,_onChange:o().func,className:o().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=s.default.div.withConfig({displayName:"StepHeader__StyledProgressLine",componentId:"sc-1xnw5na-0"})(["position:relative;width:100%;height:2px;background-color:",";&:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:2px;width:",";max-width:100%;background-color:",";}"],(function(e){return e.theme["border-color-strong"]}),(function(e){return"".concat((e.activeStepIndex+1)/e.totalSteps*100,"%")}),(function(e){return e.theme["stepper-progress-line-background-color"]}));function d(e){var t=0,n=e._activeStepIndex,r=e._onChange,o=e.className,s=e.children,d=i.Children.map(s,(function(e){var o=e;return(0,i.isValidElement)(e)&&[a.default].includes(e.type)?(o=(0,i.cloneElement)(e,{_isActive:t===n,_stepIndex:t,_onChange:r}),t+=1,o):null}));return i.createElement(l.default,{gap:"spacing-s",className:o,direction:"column"},i.createElement(c,{activeStepIndex:n,totalSteps:d.length}),i.createElement(l.default,null,d))}d.defaultProps={className:"",_activeStepIndex:0,_onChange:null},d.propTypes={_activeStepIndex:o().number,_onChange:o().func,className:o().string,children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=s.default.div.withConfig({displayName:"StepPanel__StyledStepPanelElement",componentId:"sc-7pb8oz-0"})(["display:",";color:",";"],(function(e){return e._isActive?"block":"none"}),(function(e){return e.theme["content-color-primary"]}));function u(e){var t=e._isActive,n=e._index,r=e.heading,o=e.description,s=e.primaryAction,u=e.secondaryAction,g=e.className,m=e.children;return i.createElement(p,{_isActive:t,className:g,key:"STEP_CONTENT ".concat(n)},i.createElement(d.default,{direction:"column",gap:"spacing-xxl"},i.createElement(d.default,{direction:"column",gap:"spacing-l"},r||o?i.createElement(d.default,{direction:"column",gap:"spacing-s"},r?i.createElement(a.default,{type:"h3",text:r}):"",o?i.createElement(c.default,{type:"para"},o):""):"",m),i.createElement(d.default,{gap:"spacing-s",grow:1,shrink:1,justifyContent:"flex-end"},function(e){if(e&&e.type===l.default&&"secondary"===(e.props&&e.props.type))return e;return null}(u),function(e){if(e&&e.type===l.default&&"primary"===(e.props&&e.props.type))return e;return null}(s))))}u.defaultProps={_isActive:!1,heading:"",description:"",primaryAction:null,secondaryAction:null,className:"",_index:null},u.propTypes={_isActive:o().bool,_index:o().number,heading:o().string,description:o().string,primaryAction:function(e){var t=e.primaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: primaryAction prop only accepts Aether button component.");if("primary"!==(t.props&&t.props.type))return new Error("StepPanel: primaryAction prop only accepts button type primary.")}return null},secondaryAction:function(e){var t=e.secondaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: secondaryAction prop only accepts Aether button component.");if("secondary"!==(t.props&&t.props.type))return new Error("StepPanel: secondaryAction prop only accepts button type secondary.")}return null},className:o().string,children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),l=s.default.div.withConfig({displayName:"StepPanels__StyledStepPanelContainer",componentId:"sc-1bky6oo-0"})(["padding-top:",";padding-bottom:",";"],(function(e){return e.theme["spacing-xl"]}),(function(e){return e.theme["spacing-xl"]}));function c(e){var t=0,n=e._activeStepIndex,r=e.className,o=e.children,s=i.Children.map(o,(function(e){var r=e;return(0,i.isValidElement)(e)&&[a.default].includes(e.type)?(r=(0,i.cloneElement)(e,{_isActive:t===n,_index:t}),t+=1,r):null}));return i.createElement(l,{className:r},s)}c.defaultProps={_activeStepIndex:0,className:""},c.propTypes={_activeStepIndex:o().number,className:o().string,children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function c(e){var t=e.activeStepIndex,n=e.onChange,r=e.className,o=e.children,c=e["data-testid"],d=e["data-click"],p=i.Children.map(o,(function(e){if((0,i.isValidElement)(e)){if([s.default].includes(e.type))return(0,i.cloneElement)(e,{_activeStepIndex:t,_onChange:n});if([a.default].includes(e.type))return(0,i.cloneElement)(e,{_activeStepIndex:t})}return null}));return i.createElement(l.default,{className:r,direction:"column","data-aether-id":"aether-stepper","data-testid":c,"data-click":d,width:"100%"},p)}c.defaultProps={className:"",onChange:null,"data-testid":"aether-stepper","data-click":""},c.propTypes={activeStepIndex:o().number.isRequired,onChange:o().func,className:o().string,children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,"data-testid":o().string,"data-click":o().string}},"./api-dev/components/api-repo-integration/OAuthLoadingView/OAuthLoadingView.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");class a extends i.Component{constructor(e){super(e)}render(){const{serviceName:e,serviceFriendlyName:t,handleOnClose:n}=this.props;return i.createElement("div",{className:"connect-repo-tab","data-testId":"connect-repo-tab-loading"},i.createElement("div",{className:"api-repository-connecting"},i.createElement("div",{className:"api-repository-connecting__illustration_wrapper"},i.createElement("div",{className:`api-repository-connecting__illustration__${e}`})),i.createElement(r.default,{type:"h4",hasBottomSpacing:!0,text:`Connecting to ${t}…`}),i.createElement(o.default,{type:"para",hasBottomSpacing:!0},"This may take up to 60 seconds."),i.createElement(s.default,{type:"outline",onClick:n,text:"Cancel"})))}}},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,n){n.r(t);var i=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const r=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(i.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=r},"./integrations/components/CodeRepository/CodeRepositoryAuthenticating.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("./api-dev/components/api-repo-integration/OAuthLoadingView/OAuthLoadingView.js");let a=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.oauthTimeout,this.waitingTextTimeoutInterval=4e3,this.waitingTextTimeout,this.state={waitingTextEnabled:!1},this.getServiceTitle=this.getServiceTitle.bind(this)}getServiceTitle(){let e=this.props.selectedServiceForAuthorization;switch(e){case"github":return"GitHub";case"gitlab":return"GitLab";case"azure":return"Azure DevOps";default:return e.charAt(0).toUpperCase()+e.slice(1)}}componentDidMount(){this.oauthTimeout=setTimeout((()=>{this.props.handleOauthTimeout()}),this.props.oauthTimeoutInterval),this.waitingTextTimeout=setTimeout((()=>{this.setState({waitingTextEnabled:!0},(()=>{clearTimeout(this.waitingTextTimeout)}))}),this.waitingTextTimeoutInterval)}componentWillUnmount(){clearTimeout(this.oauthTimeout)}render(){return r.createElement(s.default,{serviceName:this.props.selectedServiceForAuthorization,serviceFriendlyName:this.getServiceTitle(),handleOnClose:this.props.handleStop})}})||i},"./integrations/components/DeleteIntegrationModal.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i,r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Modals.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),c=n("./js/services/NavigationService.js"),d=n("./js/stores/StoreManager.js"),p=n("./integrations/monitoring/stores/APMIntegrationStore.js"),u=n("./js/stores/IntegrationsStore.js"),g=n("./api-dev/constants/APISubViews.js"),m=n("./js/modules/services/AnalyticsService.js"),h=n("./integrations/utils/CommonHelperMethods.ts");let b=(0,r.observer)(i=class extends o.Component{constructor(e){super(e),this.state={isDeleting:!1},this.store=this.props.store,this.integrationsStore=(0,d.resolveStoreInstance)(u.default),this.apmIntegrationStore=(0,d.resolveStoreInstance)(p.default),this.handleReset=this.handleReset.bind(this)}handleReset(){let{payload:e,integrationId:t,category:n}=this.props;pm.windowEvents.emit(`${n}-integration-deleted`,{apiId:e.api_id,apiVersionId:e.executor,integrationId:t}),c.default.transitionTo("build.apiVersion",{apiId:e.api_id,versionId:e.executor},{tab:g.MONITORING})}render(){const{integrationId:e,ruleId:t,source:n,payload:i}=this.props,{isDeleting:r}=this.state;return o.createElement("div",null,o.createElement(s.Modal,{isOpen:this.props.isOpen,onRequestClose:this.props.handleCloseModal},o.createElement(s.ModalHeader,null,"Delete Integration"),o.createElement(s.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),o.createElement(s.ModalFooter,null,o.createElement(a.default,{text:"Delete Integration",isLoading:this.state.isDeleting,type:"destructive",disabled:r,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),n&&m.default.addEventV2({category:"integrations",action:t+"_edited_integration",label:n,value:1}),this.props.handleCloseModal(),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.apmIntegrationStore.fetchIntegrationInstance("apiversion",i.executor),this.props.handleReset?this.props.handleReset():this.handleReset()):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error((0,h.getErrorMessage)(e,"Something went wrong while deleting your integration.")),pm.logger.error("Error occurred while deleting integration",e)}))}})," ",o.createElement(a.default,{text:"Cancel",type:"secondary",onClick:this.props.handleCloseModal}))))}})||i},"./integrations/components/api-builder/DetailedViewContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=n("./node_modules/prop-types/index.js"),s=n.n(o),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js");const d=r.default.div`
    overflow-y: auto;
    overflow-x: hidden;
  `,p=(0,r.default)(a.default)`
    z-index: 2;
    margin: var(--spacing-zero);
    padding: var(--spacing-zero) var(--spacing-s);
    min-height: 48px;
    box-shadow: inset 0px -1px 0px var(--border-color-strong);
  `,u=(0,r.default)(a.default)`
    margin:var(--spacing-s) var(--spacing-l);
  `,g=(0,r.default)(a.default)`
  `,m=(0,r.default)(a.default)`
  `,h=r.default.div`
    display: flex;
    align-items: center;
    cursor:pointer;
    padding:var(--spacing-s);
  `,b=(0,r.default)(a.default)`
    width: 65%;
    color: var(--content-color-secondary);
    font-size: var(--text-size-m);
    overflow: hidden;
    text-overflow: ellipsis;
  `,f=r.default.div`
    margin-left: var(--spacing-l);
  `,v=(0,r.default)(a.default)`
    margin-left: auto;
    width:30%;
  `,y=(0,r.default)(a.default)`
    margin: var(--spacing-m);
  `;class I extends i.Component{constructor(e){super(e)}render(){const{titleHeading:e,onBackButtonClick:t,titleSubheadingComponent:n,titleRightSideComponent:r,subtitleLeftSideComponent:o,subtitleRightSideComponent:s,bodyComponent:I}=this.props;return i.createElement(d,null,i.createElement(a.default,{direction:"column"},i.createElement(p,{alignItems:"center"},i.createElement(h,{onClick:()=>{t()}},i.createElement(c.default,null)),i.createElement(b,{alignItems:"center"},i.createElement(l.default,{type:"h4",text:e}),i.createElement(f,null,n)),i.createElement(v,{justifyContent:"flex-end",alignItems:"center"},r)),i.createElement(u,{justifyContent:"space-between"},i.createElement(g,null,o),i.createElement(m,{justifyContent:"flex-end"},s)),i.createElement(y,null,I)))}}I.propTypes={titleHeading:s().string.isRequired,titleSubheadingComponent:s().element,titleRightSideComponent:s().element,subtitleLeftSideComponent:s().element,subtitleRightSideComponent:s().element,bodyComponent:s().element,onBackButtonClick:s().func.isRequired}},"./integrations/components/base/EditIntegration.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./appsdk/workbench/TabService.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./node_modules/lodash/lodash.js");function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m.apply(this,arguments)}let h=(0,l.observer)(i=class extends r.Component{constructor(e){super(e),this.store=this.props.store,this.state={isUpdating:!1},this.apmIntegrationStore=(0,d.resolveStoreInstance)(u.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:i,service:l,route:u,client_category:h,redirect:b,alignLeft:f,generatePayload:v,...y}=this.props;return r.createElement("div",{className:"integrations-add-actions__button--container"},r.createElement(o.default,m({text:"Update",isLoading:this.state.isUpdating,type:"primary",isDisabled:e||this.state.isUpdating,tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:()=>{this.setState({isUpdating:!0},(async()=>{let e=g.assign({},t);g.isFunction(v)&&(e=await v(t)),s.default.updateIntegration(n,e).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${g.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),(0,d.resolveStoreInstance)(p.default).setRuleSpecificTeamIntegrations(i,null),this.apmIntegrationStore.fetchIntegrationInstance("apiversion",t.executor),c.default.addEventV2({category:"integrations",action:i+"_edited_integration",label:"team_integrations_edit_forms",value:1}),pm.windowEvents.emit(`${h}-integration-edited`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:n}),a.default.closeByRoute(u,{apiId:t.api_id,integrationId:n}),b&&b()):(pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.setState({isUpdating:!1}))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}))}},y)))}})||i},"./integrations/components/base/IntegrationCreateDataFormatWrapper.js":function(e,t,n){n.r(t),n.d(t,{IntegrationCreateDataFormatWrapper:function(){return g}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("./node_modules/lodash/lodash.js"),a=n.n(s),l=n("./js/components/base/LoadingIndicator.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),d=n("./integrations/components/error-states/ErrorIntegrations.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}const u=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Create Form Data Format Wrapper");let g=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.state={loading:!1,classData:null,error:null},this.fetchClassData=this.fetchClassData.bind(this)}fetchClassData(e){this.setState({loading:!0},(()=>{c.default.fetchIntegrationClassDetails(e).then((e=>{const t=a().get(e,"body.data");a().isEmpty(e)||200!==e.status||a().isEmpty(t)?(pm.logger.error("Error in fetching class details for create form",e,{context:u}),this.setState({loading:!1,error:{status:a().get(e,"status"),body:a().get(e,"body","Empty response")}})):this.setState({loading:!1,error:null,classData:t})})).catch((e=>{pm.logger.error("Error in fetching class details for create form",e,{context:u}),this.setState({loading:!1,error:e})}))}))}componentDidMount(){return this.fetchClassData(this.props.rule)}render(){const{FormComponent:e,rule:t,service:n,postCreationAction:i}=this.props,{classData:o,loading:s,error:c}=this.state,u=a().find(a().get(o,"inputs"),(e=>a().has(["postman-monitor","postman-collection","postman-api","postman-apiversion","postman-team","postman-user","postman-uptimeMonitor"],a().get(e,"key")))),g=function(e){const{apiId:t,apiVersionId:n,workspaceId:i}=e,r=[];return i&&r.push({entityType:"workspace",entityId:i,force:!0}),t&&r.push({entityType:"api",entityId:t,force:!0}),n&&r.push({entityType:"apiversion",entityId:n,force:!0}),r}(this.props);return s?r.createElement(l.default,null):c?r.createElement(d.default,{error:{title:"Something went wrong",message:"Something went wrong while loading the integration creation form. Please close the tab and try again."}}):r.createElement(e,p({},this.props,{classData:o,classId:t,serviceId:n,preferredEntities:g,redirect:e=>a().isFunction(i)&&i({rule:t,executor:(a().find(e.inputs,["key",u])||{}).value})}))}})||i},"./integrations/components/base/IntegrationEditDataFormatWrapper.js":function(e,t,n){n.r(t),n.d(t,{IntegrationEditDataFormatWrapper:function(){return g}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("./node_modules/lodash/lodash.js"),a=n.n(s),l=n("./js/components/base/LoadingIndicator.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),d=n("./integrations/components/error-states/ErrorIntegrations.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}const u=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Edit Form Data Format Wrapper");let g=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.state={loading:!1,classData:null,error:null},this.fetchClassData=this.fetchClassData.bind(this)}fetchClassData(){this.setState({loading:!0},(()=>{c.default.fetchIntegrationClassDetails(a().get(this.props,"integrationData.class",this.props.rule)).then((e=>{const t=a().get(e,"body.data");200!==e.status||a().isEmpty(t)?(pm.logger.error("Error in fetching class details for edit form",e,{context:u}),this.setState({loading:!1,error:{status:a().get(e,"status"),body:a().get(e,"body","Empty response")}})):this.setState({loading:!1,error:null,classData:t})})).catch((e=>{pm.logger.error("Error in fetching class details for edit form",e,{context:u}),this.setState({loading:!1,error:e})}))}))}componentDidMount(){this.fetchClassData()}render(){const{FormComponent:e,rule:t,integrationId:n,integrationData:i,postEditAction:o}=this.props,{classData:s,loading:c,error:u}=this.state,g=i.class||t,m=a().find(a().get(s,"inputs"),(e=>a().has(["postman-monitor","postman-collection","postman-api","postman-apiversion","postman-team","postman-user","postman-uptimeMonitor"],a().get(e,"key")))),h=function(e){const{apiId:t,apiVersionId:n,workspaceId:i}=e,r=[];return i&&r.push({entityType:"workspace",entityId:i,force:!0}),t&&r.push({entityType:"api",entityId:t,force:!0}),n&&r.push({entityType:"apiversion",entityId:n,force:!0}),r}(this.props);return c?r.createElement(l.default,null):u||!s?r.createElement(d.default,{error:{title:"Something went wrong",message:"Something went wrong while loading the integration edit form. Please close the tab and try again."}}):r.createElement(e,p({},this.props,{classData:s,classId:g,integrationData:i,integrationId:n,preferredEntities:h,redirect:e=>a().isFunction(o)&&o({classId:g,executor:(a().find(e.inputs,["key",m])||{}).value})}))}})||i},"./integrations/components/base/MonitorSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx/lib/mobx.module.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("./js/modules/services/RemoteSyncRequestService.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=n("./monitors/services/MonitorService.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),h=n("./integrations/monitoring/constants.js"),b=n("./integrations/constants/integrationsConstants.ts"),f=n("./node_modules/lodash/lodash.js"),v=n.n(f),y=n("./node_modules/prop-types/index.js"),I=n.n(y);const S={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"};let E=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(s.default),this.fetchAndAssignConstraints=this.fetchAndAssignConstraints.bind(this),this.fetchMonitorsLinkedToAPIVersion=this.fetchMonitorsLinkedToAPIVersion.bind(this),this.performEntityChecks=this.performEntityChecks.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.customDropdownOption=this.customDropdownOption.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e&&this.fetchMonitors(e.value),(0,c.reaction)((()=>this.workspaceStore.dependencies),(()=>{this.fetchMonitors(e.value)}))}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:v().get(e,"name"),value:v().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}fetchMonitors(e){this.setState({loading:!0}),e?g.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=v().get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error("Malformed response");return n})).then((e=>{if(!this.props.integrationClassId||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.integrationClassId,"monitor",this.props.mode)})).then((e=>v().map(e,(e=>v().omit(e,["options"]))))).then((e=>this.performEntityChecks(e))).then((e=>{this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchAndAssignPermissions(e,t,n,i){return new Promise(((i,r)=>{const o=e.map((e=>({id:v().get(e,"id")})));let s=null;b.INTEGRATION_FORM_MODE.ADD,s=u.default.fetchCreatePermissions,s(t,n,o).then((t=>(v().forEach(v().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),i(e)))).catch((e=>{pm.logger.error(e),r(e)}))}))}updateSelectedEntity(e){this.store.setSelectedEntity(v().find(e,{value:this.store.selectedEntity.value}))}fetchAndAssignConstraints(e,t,n){let i=`/apis/${t}/versions/${n}/relations/monitor/constraint-checks`,r=[];return r=v().map(e,(e=>e.id)),p.default.request(i,{method:"post",timeout:6e4,data:{entityIds:r}}).then((({body:t})=>(v().each(e,(e=>{let n=v().find(t.data,{entityId:e.id});e.disabled=!n.allowed,e.disabled&&(e.disabledMessage="This monitor is already linked to another API version.")})),Promise.resolve(e)))).catch((t=>(pm.logger.error("Error in fetching relation constraints.",t),Promise.resolve(e))))}fetchMonitorsLinkedToAPIVersion(e,t,n){let i=`/apis/${t}/versions/${n}/monitor`;return p.default.request(i,{method:"get"}).then((t=>{if(t&&200===t.status){let n=v().get(t.body,"data.monitor");return v().each(e,(e=>{v().find(n,{id:e.id})&&(e.disabled=!1)})),Promise.resolve(e)}throw t&&t.body||{error:"serverError",message:"Something went wrong while fetching the linked monitors"}})).catch((t=>(pm.logger.error("Error in fetching linked monitors",t),Promise.resolve(e))))}performEntityChecks(e){return this.fetchAndAssignConstraints(e,this.props.apiId,this.props.apiVersionId).then((e=>this.fetchMonitorsLinkedToAPIVersion(e,this.props.apiId,this.props.apiVersionId))).then((e=>(v().each(e,(e=>{e.disabled||v().find(this.props.configuredIntegrations,{executor:e.id,rule:this.props.integrationClassId})&&(e.disabled=!0,e.disabledMessage="Integration is already configured on this monitor.")})),e))).then((e=>{let t;return v().each(e,(async e=>{e.disabled||(t=await u.default.getConfiguredIntegrationsByEntityAndClientCategory(h.ENTITY,e.id,[h.API_MONITORING],!0).catch((e=>pm.logger.error("MonitorSelector~Error occurred while fetching the configured integrations",e))),t=v()(t).flatMap((e=>Object.values(e))).value(),v().find(t,{rule:this.props.integrationClassId})&&(e.disabled=!0,e.disabledMessage="Integration is already configured on this monitor."))})),Promise.resolve(e)}))}customDropdownOption(e){return r.createElement(m.default,{option:e,entityType:b.entityTypes.MONITORS,tooltipMessage:e.disabledMessage||this.props.tooltipMessage})}getEmptyStateError(){return S[b.entityTypes.MONITORS]?S[b.entityTypes.MONITORS]:""}render(){let{executor:e,onTargetSelect:t,title:n,description:i,disabled:o,optional:s,selectedWorkspace:a}=this.props,{selectedEntity:l}=this.store,{entities:c,loading:p,firstLoad:u,error:g}=this.state,m=!p&&c.length>0&&!l&&!u&&this.getEmptyStateError();return r.createElement("div",{className:"integrations-add-card__segment"},r.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",s?r.createElement("span",null,"(optional)"):""),r.createElement("div",{className:"integrations-add-card__label-description"},i),r.createElement("div",{className:"integrations-add-card__input"},r.createElement(d.default,{onChange:t,options:c,value:e,isLoading:p,isDisabled:o,emptyStateMessage:"No monitors found",customOptionComponent:this.customDropdownOption,isOptionDisabled:e=>e.disabled}),m?r.createElement("span",{className:"integrations-add-card__error"},m):g?r.createElement("span",{className:"integrations-add-card__error"},g+". ",r.createElement("span",{onClick:()=>{a&&this.fetchMonitors(a.value)},className:"integrations-add-card__error__btn"},"Retry")):""))}})||i;E.propTypes={executor:I().object.isRequired,selectedWorkspace:I().object.isRequired,title:I().string.isRequired,description:I().string.isRequired,disabled:I().bool.isRequired,onTargetSelect:I().func.isRequired,apiId:I().string.isRequired,apiVersionId:I().string.isRequired,configuredIntegrations:I().array.isRequired,integrationClassId:I().string.isRequired,mode:I().string.isRequired}},"./integrations/components/error-states/ErrorIntegrations.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i,r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js");let c=(0,r.observer)(i=class extends o.Component{constructor(e){super(e),this.state={error:{}}}componentDidMount(){let{error:e}=this.props;e?this.setState({statusCode:e.statusCode,title:e.title,message:e.message}):this.setState({title:"Something went wrong",message:"Something went wrong while performing this action. Please refresh the page and try again."})}render(){let{statusCode:e,title:t,message:n}=this.state;return o.createElement("div",null,o.createElement("div",{className:"team-integrations-error-state"},o.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},(!e||e>499&&e<600)&&o.createElement(s.default,null),404===e&&o.createElement(a.default,null),e>399&&e<500&&404!==e&&o.createElement(l.default,null)),o.createElement("div",{className:"team-integrations-error-state__title"},t),o.createElement("div",{className:"team-integrations-error-state__subtitle"},n)))}})||i},"./integrations/components/error-states/IntegrationNotSupported.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),s=n("../../node_modules/react/index.js"),a=n("./integrations/utils/CommonHelperMethods.ts"),l=n("./js/services/NavigationService.js"),c=n("./js/external-navigation/ExternalNavigationService.js"),d=n("./integrations/constants/integrationsConstants.ts");function p(e){let{apiId:t,apiVersionId:n,tab:r}=e,o={apiId:t,versionId:n},p={tab:r},u=(0,a.getURLFromBasePathAndRoute)(pm.artemisUrl,l.default.getURLForRoute("build.apiVersion",o,p));return s.createElement("div",{className:"unsupported-integrations-error-cta__subtitle"},"browser"===window.SDK_PLATFORM?s.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_WEB_APP):s.createElement("div",null,s.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_DESKTOP),s.createElement("span",{onClick:()=>(0,c.openExternalLink)(u||"#","_blank"),className:"unsupported-integrations-error-cta__subtitle__link"},s.createElement(i.default,{type:"link-primary",isExternal:!0},"web app"))))}function u(e){let t={title:"browser"===window.SDK_PLATFORM?d.INTEGRATION_NOT_SUPPORTED_TITLE_WEB_APP:d.INTEGRATION_NOT_SUPPORTED_TITLE_DESKTOP,subtitle:p(e)};return s.createElement("div",{className:"unsupported-integrations-error-cta"},s.createElement(r.default,{direction:"column",justifyContent:"center",alignItem:"center",alignSelf:"center"},s.createElement(o.default,{errorDetails:t})))}},"./integrations/monitoring/add/Datadog/Datadog.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./integrations/monitoring/stores/APMIntegrationStore.js"),d=n("./js/stores/StoreManager.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),f=n("./integrations/navigation/constants.js"),v=n("./integrations/monitoring/constants.js"),y=n("./api-dev/constants/APISubViews.js"),I=n("./js/services/NavigationService.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),E=n("./appsdk/workbench/TabService.js"),A=n("./js/modules/services/AnalyticsService.js"),_=n("./integrations/monitoring/add/Datadog/DatadogMonitorSetupForm.js"),w=n("./integrations/monitoring/add/Datadog/DatadogAPMSetupForm.js"),j=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),D=n("./integrations/utils/CommonHelperMethods.ts");let C=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={nickname:"",activeStepIndex:0,stepperStatuses:["progress","pending"],isCreatingIntegration:!1,errorNickname:"",monitor:"",dashboardGuids:[],datadogAPM:{environments:j.default.getEmptyEnvironmentsList(),datadogAuthInfo:{apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,region:"us1"},datadogDashboardGuids:[]},monitorIntegrationStates:[{nickname:v.MONITOR_RUN_DATADOG_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:!1,executor:null,region:"us1",metrics:!0,events:!0}]},this.integrationsStore=(0,d.resolveStoreInstance)(l.default),this.apmIntegrationsStore=(0,d.resolveStoreInstance)(c.default),this.setActiveStepIndex=this.setActiveStepIndex.bind(this),this.renderSkipButton=this.renderSkipButton.bind(this),this.renderConnectButton=this.renderConnectButton.bind(this),this.client_category=v.API_MONITORING,this.setDatadogAPMEnvs=this.setDatadogAPMEnvs.bind(this),this.setDatadogAPMAuthInfo=this.setDatadogAPMAuthInfo.bind(this),this.setDatadogAPMDashboardGuids=this.setDatadogAPMDashboardGuids.bind(this),this.createDatadogAPMIntegrationInstance=this.createDatadogAPMIntegrationInstance.bind(this),this.getAPMSetupForm=this.getAPMSetupForm.bind(this),this.createIntegrationInstanceBulk=this.createIntegrationInstanceBulk.bind(this),this.prepareMonitorSetupPayload=this.prepareMonitorSetupPayload.bind(this),this.getMonitorSetupForm=this.getMonitorSetupForm.bind(this)}componentDidMount(){const e=o().find(this.apmIntegrationsStore.getConfiguredIntegrations(),{rule:v.DATADOG_APM_CLASS_ID}),t=!o().isEmpty(e);this.setActiveStepIndex(t?1:0)}setActiveStepIndex(e){let{stepperStatuses:t}=this.state,n=o().find(this.apmIntegrationsStore.getConfiguredIntegrations(),{rule:v.DATADOG_APM_CLASS_ID});t=o().map(t,((t,n)=>"completed"===t?"completed":n===e?"progress":"pending")),o().isEmpty(n)||(t[0]="completed"),this.setState({stepperStatuses:t,activeStepIndex:e})}renderSkipButton(e){let{apiId:t,apiVersionId:n,controller:i}=this.props;return s.createElement(p.default,{className:"integrations-add-actions__button--cancel",type:"secondary",text:v.SKIP_BUTTON_TEXT[e],onClick:()=>{"configureAPM"===e?this.setState({stepperStatuses:["pending","progress"],activeStepIndex:1}):(E.default.closeByRoute(f.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),I.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:y.MONITORING}))}})}renderConnectButton(e,t){let n,{isCreatingIntegration:i,datadogAPM:r,monitorIntegrationStates:a}=this.state,{controller:l}=this.props,{postman_api_id:c,apiversion:d}=t.inputs,{environments:u}=r,g=j.default.areEnvironmentsValid(u),{apiKey:m,appKey:h,region:b,errorApiKey:v,errorAppKey:S}=r.datadogAuthInfo;return"configureAPM"===e?n=i||!(m&&h&&b)||!g||v||S:o().forEach(a,(e=>{(o().isEmpty(e.apiKey)||o().isEmpty(e.executor)||!e.events&&!e.metrics)&&(n=!0)})),s.createElement(p.default,{type:"primary",text:"Connect",className:"integrations-add-actions__button--proceed",isLoading:i,isDisabled:n,tooltip:n&&"Fill in the details to continue",onClick:()=>{if("configureAPM"===e)this.setState({isCreatingIntegration:!0}),this.createDatadogAPMIntegrationInstance(t).then((()=>{this.setState({stepperStatuses:["completed","progress"],activeStepIndex:1,isCreatingIntegration:!1})})).catch((()=>{this.setState({isCreatingIntegration:!1})}));else{let e=this.prepareMonitorSetupPayload();this.setState({isCreatingIntegration:!0}),this.createIntegrationInstanceBulk(e).then((()=>{this.setState({isCreatingIntegration:!1}),E.default.closeByRoute(f.V10_API_ADD_APM_INTEGRATION_URL,{apiId:c}),I.default.transitionTo("build.apiVersion",{apiId:c,versionId:d},{tab:y.MONITORING})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}}})}setDatadogAPMDashboardGuids(e){this.setState((t=>({datadogAPM:{...t.datadogAPM,datadogDashboardGuids:e}})))}setDatadogAPMAuthInfo(e,t){const n=this.state.datadogAPM.datadogAuthInfo;n[e]=t,this.setState((e=>({datadogAPM:{...e.datadogAPM,datadogAuthInfo:n}})))}setDatadogAPMEnvs(e){this.setState((t=>({datadogAPM:{...t.datadogAPM,environments:e}})))}createDatadogAPMIntegrationInstance(e){const t=(0,D.getErrorContextObject)("Datadog APM Integration");let{name:n,inputs:i}=e,{postman_api_id:r,apiversion:o}=i;return new Promise(((e,s)=>{S.default.createIntegrationInstance(v.DATADOG_APM_CLASS_ID,n,i).then((t=>{200===t.status&&t.body.model_id?(pm.toasts.success("Added a new integration"),A.default.addEventV2({category:"integrations",action:v.DATADOG_APM_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:1}),pm.windowEvents.emit(`${v.API_MONITORING}-integration-added`,{apiId:r,apiVersionId:o}),this.apmIntegrationsStore.fetchIntegrationInstance("apiversion",o),e(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),s(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Monitoring Tab Add Form ~ Something went wrong while adding a new integration",e,{context:t}),this.setState({isCreatingIntegration:!1}),s(e)}))}))}getAPMSetupForm(){return s.createElement(w.default,{apiId:this.props.apiId,apiVersionId:this.props.apiVersionId,rule:v.DATADOG_APM_CLASS_ID,datadogAPM:this.state.datadogAPM,setDatadogAPMEnvs:this.setDatadogAPMEnvs,setDatadogAPMAuthInfo:this.setDatadogAPMAuthInfo,setDatadogAPMDashboardGuids:this.setDatadogAPMDashboardGuids})}createIntegrationInstanceBulk(e){const t=(0,D.getErrorContextObject)("Datadog Monitor Integration");return new Promise(((n,i)=>{S.default.createIntegrationInstanceBulk(e).then((t=>{200===t.status?(pm.toasts.success(`Added ${e.length} new integrations.`),A.default.addEventV2({category:"integrations",action:v.DATADOG_MONITOR_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:e.length}),n(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),i(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Monitoring Tab Add Form ~ Something went wrong while adding a new integration",e,{context:t}),this.setState({isCreatingIntegration:!1}),i(e)}))}))}prepareMonitorSetupPayload(){let e,{monitorIntegrationStates:t}=this.state;return e=o().map(t,(e=>{let t=e.events,n=e.metrics;return{name:e.nickname,class:v.DATADOG_MONITOR_CLASS_ID,inputs:[{key:"api_key",value:e.apiKey},{key:"region",value:e.region},{key:"monitor",value:o().get(e,"executor.value")},{key:"new_metric",value:!0},{key:"options",value:(t&&n?"both":t&&"events")||n&&"metrics"}]}})),e}getMonitorSetupForm(){return s.createElement(_.default,{selectedWorkspace:this.props.selectedWorkspace,apiId:this.props.apiId,apiVersionId:this.props.apiVersionId,controller:this.props.controller,setMonitorIntegrationStates:e=>{this.setState({monitorIntegrationStates:e})},monitorIntegrationStates:this.state.monitorIntegrationStates})}render(){const{activeStepIndex:e,stepperStatuses:t,datadogAPM:n}=this.state,{rule:i,apiId:r,apiVersionId:a}=this.props,{environments:l,datadogDashboardGuids:c,datadogAuthInfo:d}=n,{apiKey:p,appKey:f,region:y}=d,I=t[0],S=t[1];let E={name:v.APM_DATADOG_INTEGRATION_NAME,class:v.DATADOG_APM_CLASS_ID,inputs:{api_key:p,app_key:f,region:y,environments:o().map(l,(e=>({name:e.name,services:e.services}))),postman_api_id:r,apiversion:a,dashboard_guids:c}};return s.createElement(u.default,{activeStepIndex:e,onChange:this.setActiveStepIndex},s.createElement(g.default,null,s.createElement(m.default,{label:"Monitor API performance",status:I,isDisabled:"completed"===I}),s.createElement(m.default,{label:"Post monitoring results",status:S})),s.createElement(h.default,null,s.createElement(b.default,{className:"add-integration-step-panel",heading:"Monitor API Performance from Postman",description:"View Datadog metrics and graphs directly from Postman.",primaryAction:this.renderConnectButton("configureAPM",E),secondaryAction:this.renderSkipButton("configureAPM")},this.getAPMSetupForm()),s.createElement(b.default,{className:"add-integration-step-panel",heading:"Post monitoring results",description:"Send your Postman monitor run metrics and events to Datadog.",primaryAction:this.renderConnectButton("configureMonitoring",E),secondaryAction:this.renderSkipButton("configureMonitoring")},this.getMonitorSetupForm())))}})||i},"./integrations/monitoring/add/Datadog/DatadogAPMSetupForm.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/monitoring/services/index.js"),p=n("./integrations/monitoring/constants.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("./node_modules/uuid/index.js"),h=n.n(m),b=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js");const y=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Datadog APM Integration");let I=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={nickname:"",isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],errorDashboards:!1,loadingDashboards:!1,region:"us1"},this.integrationsStore=(0,l.resolveStoreInstance)(c.default),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.listDashboards=this.listDashboards.bind(this),this.resetSelectedDashboardsAndServices=this.resetSelectedDashboardsAndServices.bind(this),this.client_category=p.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this)}onServiceSelect(e){if(!o().isArray(e))return;let t=o().map(e,"value");this.setState({selectedServices:e,serviceNames:t})}onDashboardSelect(e){if(!o().isArray(e))return;let t=o().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e},(()=>{this.props.setDatadogAPMDashboardGuids(t)}))}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return this.props.setDatadogAPMAuthInfo("region",e),this.resetForm(),{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1}}))}resetForm(){this.props.setDatadogAPMAuthInfo("apiKey",""),this.props.setDatadogAPMAuthInfo("appKey",""),this.resetSelectedDashboardsAndServices()}resetSelectedDashboardsAndServices(){this.setState({selectedDashboards:[],availableDashboards:[],errorDashboards:!1,loadingDashboards:!1},(()=>{this.props.setDatadogAPMDashboardGuids([]),this.props.setDatadogAPMEnvs(b.default.getEmptyEnvironmentsList())}))}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1};if(o().isEmpty(e.trim()))return t.errorApiKey=!0,this.setState(t),this.resetSelectedDashboardsAndServices(),void this.props.setDatadogAPMAuthInfo("apiKey",t.apiKey);t.apiKey!==o().get(this.props.datadogAPM,"datadogAuthInfo.apiKey")&&this.resetSelectedDashboardsAndServices(),this.props.setDatadogAPMAuthInfo("apiKey",t.apiKey),this.setState(t,(()=>{this.listDashboards()}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1};if(o().isEmpty(e.trim()))return t.errorAppKey=!0,this.setState(t),this.resetSelectedDashboardsAndServices(),void this.props.setDatadogAPMAuthInfo("appKey",t.appKey);t.appKey!==o().get(this.props.datadogAPM,"datadogAuthInfo.appKey")&&this.resetSelectedDashboardsAndServices(),this.props.setDatadogAPMAuthInfo("appKey",t.appKey),this.setState(t,(()=>{this.listDashboards()}))}removeEnvironmentSelector(e){const{environments:t}=this.props.datadogAPM;let n=o().cloneDeep(t);o()(n).splice(e,1).value(),this.props.setDatadogAPMEnvs(n)}async listDashboards(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(p.DATADOG_APM_CLASS_ID);const{rule:e}=this.props,{datadogDashboardGuids:t}=this.props.datadogAPM,{apiKey:n,appKey:i,region:r}=this.state,s=o().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),a=o().get(s,"options.serviceActionId"),l=o().get(s,"id");if(o().isEmpty(n)||o().isEmpty(i)||!r)return void this.setState({authenticatingApiKey:!1,authenticationFailed:!1,errorApiKey:!o().isEmpty(i),errorAppKey:!o().isEmpty(n),errorDashboards:!1,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]});this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!0,errorServices:!1,loadingDashboards:!0});const c={rule:e,api_key:n,app_key:i,region:r};d.default[e].listDashboards(c,null,a,l).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!1});let n=o().map(o().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${b.default.getDatadogHostname(r)}${e.url}`}))),i=o().filter(n,(e=>o().includes(o().map(t,"link"),e.url)));this.setState({availableDashboards:n,loadingDashboards:!1,selectedDashboards:i})})).catch((e=>{pm.logger.error("DatadogAPMSetupForm ~ Monitoring Tab Add Form ~ Error occurred while listing dashboards",e,{context:y}),this.resetSelectedDashboardsAndServices(),this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,errorAppKey:!0,errorDashboards:!1,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}render(){const{apiKey:e,appKey:t,region:n,errorApiKey:i,errorAppKey:r,loadingDashboards:a,selectedDashboards:l,availableDashboards:c,errorDashboards:d,authenticationFailed:u}=this.state,{environments:g}=this.props.datadogAPM,m=b.default.areEnvironmentsValid(g);return s.createElement(s.Fragment,null,s.createElement(f.default,{mode:p.ADD_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:i&&(u?"error":null),apiKeyValidationMessage:i&&(u?"Invalid API Key or APP key":o().isEmpty(e.trim())&&"Please enter the API key"),handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:r&&(u?"error":null),appKeyValidationMessage:r&&(u?"Invalid API Key or APP key":o().isEmpty(t.trim())&&"Please enter the Application key"),region:n,handleOnRegionChange:e=>{this.onRegionSelectorChange(e)}}),s.createElement(v.default,{mode:p.ADD_MODE,apiKey:e,appKey:t,selectedDashboards:l,availableDashboards:c,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:a,errorDashboards:d,environments:g,rule:p.DATADOG_APM_CLASS_ID,onSelectEnvironmentServices:(e,t,n)=>{let i=g;i[n]={id:o().get(g[n],"id"),name:e,services:t},this.props.setDatadogAPMEnvs(i)},region:n,removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{let e=g;g.push({name:"",services:[],id:h().v4()}),this.props.setDatadogAPMEnvs(e)},isAddEnvironmentButtonDisabled:!m}))}})||i;I.propTypes={apiId:g().string.isRequired,apiVersionId:g().string.isRequired,rule:g().string.isRequired,datadogAPM:g().object.isRequired,setDatadogAPMEnvs:g().func.isRequired,setDatadogAPMAuthInfo:g().func.isRequired,setDatadogAPMDashboardGuids:g().func.isRequired}},"./integrations/monitoring/add/Datadog/DatadogMonitorSetupForm.js":function(e,t,n){n.r(t),n.d(t,{APIKeyInputWrapper:function(){return C},default:function(){return P}});var i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),S=n("./integrations/monitoring/constants.js"),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),A=n("./integrations/constants/integrationsConstants.ts"),_=n("./integrations/components/base/MonitorSelector.js"),w=n("./node_modules/prop-types/index.js"),j=n.n(w),D=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js");const C=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`;let P=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",errorApiKey:!1},this.integrationsStore=(0,l.resolveStoreInstance)(c.default),this.toggle=this.toggle.bind(this),this.renderMonitorSetupForm=this.renderMonitorSetupForm.bind(this),this.addMonitorSetupForm=this.addMonitorSetupForm.bind(this),this.renderAddMonitorButton=this.renderAddMonitorButton.bind(this),this.onMonitorDataChange=this.onMonitorDataChange.bind(this),this.removeMonitorSetupForm=this.removeMonitorSetupForm.bind(this),this.getAPIKeyTextInput=this.getAPIKeyTextInput.bind(this)}toggle(e){this.setState((t=>({[e]:!t[e]})))}getAPIKeyTextInput(e,t,n,i,r,a){return s.createElement(d.default,{id:"datadog-api-key",type:"password",value:e,label:s.createElement(p.default,{text:"Datadog API Key",fieldType:"required"}),helperText:s.createElement(u.default,null,"Enter the API Key provided by Datadog or  ",s.createElement(E.default,{extUrl:`${D.default.getDatadogHostname(t)}/organization-settings/api-keys`},"generate one here.")),onChange:e=>{n[a]=o().merge(i,{apiKey:e.target.value,errorApiKey:!1}),this.props.setMonitorIntegrationStates(n)},onBlur:()=>{n[a]=o().merge(i,{apiKey:e.trim(),errorApiKey:o().isEmpty(e.trim())}),this.props.setMonitorIntegrationStates(n)},validationStatus:r?"error":null,validationMessage:r?"Please enter an API key":""})}getInitialMonitorState(){return{nickname:S.MONITOR_RUN_DATADOG_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:!1,executor:"",region:"us1",metrics:!0,events:!0}}onMonitorDataChange(e,t,n){let i=this.props.monitorIntegrationStates,r=i[e],s={};s[t]=n,i[e]=o().merge(r,s),this.props.setMonitorIntegrationStates(i)}renderMonitorSetupForm(e){let{selectedWorkspace:t,apiId:n,apiVersionId:i,controller:r}=this.props,a=this.props.monitorIntegrationStates,l=a[e],{apiKey:c,executor:d,events:I,metrics:E,region:w}=l,j=o().get(a[e],"errorApiKey");return s.createElement(s.Fragment,null,a.length>1&&s.createElement(g.default,{justifyContent:"space-between",alignItems:"center"},s.createElement(u.default,{type:"strong"}," Setup Postman monitor to send run metrics "),s.createElement(m.default,{type:"tertiary",onClick:()=>this.removeMonitorSetupForm(e),text:"Remove",icon:s.createElement(y.default,null)})),s.createElement(h.default,{name:"Select Datadog site",value:w,direction:"column",onChange:t=>{this.onMonitorDataChange(e,"region",t),a[e]=o().merge(l,{apiKey:"",errorApiKey:!1}),this.props.setMonitorIntegrationStates(a)},label:s.createElement(p.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},s.createElement(b.default,{label:"US1 (datadoghq.com)",value:"us1"}),s.createElement(b.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),s.createElement(b.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),s.createElement(b.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),s.createElement(b.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),this.getAPIKeyTextInput(c,w,a,l,j,e),s.createElement(_.default,{executor:d,selectedWorkspace:t,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog.",disabled:!t,onTargetSelect:t=>{this.onMonitorDataChange(e,"executor",t)},apiId:n,apiVersionId:i,configuredIntegrations:r.monitorIntegrationStore.getConfiguredIntegrations(),integrationClassId:S.DATADOG_MONITOR_CLASS_ID,mode:A.INTEGRATION_FORM_MODE.ADD}),s.createElement(g.default,{direction:"column",gap:"spacing-s"},s.createElement(f.default,{label:s.createElement(p.default,{type:"primary",text:"Datadog Events and Metrics"}),helperText:"Select at least one of the following options"},s.createElement(v.default,{label:"Send events for completed runs",isChecked:I,onChange:()=>{this.toggle("events"),this.onMonitorDataChange(e,"events",!l.events)}}),s.createElement(v.default,{label:"Send metrics for each run",isChecked:E,onChange:()=>{this.onMonitorDataChange(e,"metrics",!l.metrics)}}))))}addMonitorSetupForm(){let e=this.props.monitorIntegrationStates;e.push(this.getInitialMonitorState()),this.props.setMonitorIntegrationStates(e)}removeMonitorSetupForm(e){let t=this.props.monitorIntegrationStates;o()(t).splice(e,1).value(),this.props.setMonitorIntegrationStates(t)}renderAddMonitorButton(){let e,t=this.props.monitorIntegrationStates;return o().forEach(t,(t=>{(o().isEmpty(t.nickname)||o().isEmpty(t.apiKey)||o().isEmpty(t.executor)||!t.metrics&&!t.events)&&(e=!0)})),s.createElement(g.default,{width:"fit-content"},s.createElement(m.default,{type:"tertiary",onClick:()=>this.addMonitorSetupForm(),text:"Configure for another monitor",icon:s.createElement(I.default,null),isDisabled:e,tooltip:e&&"Fill in the details to add a new monitor",fullWidth:!1}))}render(){const e=this.props.monitorIntegrationStates;return s.createElement(s.Fragment,null,o().map(e,((e,t)=>this.renderMonitorSetupForm(t))),this.renderAddMonitorButton())}})||i;P.propTypes={controller:j().object.isRequired,apiId:j().string.isRequired,apiVersionId:j().string.isRequired,selectedWorkspace:j().string.isRequired,monitorIntegrationStates:j().array.isRequired,setMonitorIntegrationStates:j().func.isRequired}},"./integrations/monitoring/add/MonitoringSetup.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./integrations/monitoring/add/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=n("./js/stores/StoreManager.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./js/components/base/Tabs.js"),h=n("./integrations/monitoring/constants.js"),b=n("./api-dev/constants/APISubViews.js"),f=n("./integrations/components/CodeRepository/CodeRepositoryAuthenticating.js"),v=n("./integrations/components/error-states/ErrorIntegrations.js"),y=n("./integrations/components/error-states/IntegrationNotSupported.js"),I=n("./integrations/monitoring/customComponents.js"),S=n("./integrations/utils/CommonHelperMethods.ts"),E=n("./js/stores/IntegrationsStore.js"),A=n("./node_modules/lodash/lodash.js");let _=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.setActiveTab=e=>this.setState({activeTab:e}),this.store=(0,p.resolveStoreInstance)(u.default),this.integrationsStore=(0,p.resolveStoreInstance)(E.default),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",selectedClassData:{},selectedServiceName:this.store.selectedServiceName,selectedAPI:e.controller.apiId,selectedAPIVersion:e.controller.version,activeTab:"authenticate"},this.setActiveTab=this.setActiveTab.bind(this),this.populateRuleDetails=this.populateRuleDetails.bind(this)}componentDidMount(){const{selectedAPI:e,selectedAPIVersion:t}=this.state;t||(0,S.getAPIDetails)(e).then((e=>{const t=A.get(e,"version.id");this.props.controller.setAPIVersion(t),this.setState({selectedAPIVersion:t})})),this.populateRuleDetails()}setSelectedClassData(e,t){const n=A.find(e,(e=>e.id===t))||{};this.setState({selectedClassData:n})}async populateRuleDetails(){await(0,s.when)((()=>!A.isEmpty(this.store.selectedRule)));const{selectedRule:e}=this.store;let t=this.integrationsStore.getIntegrationClasses();A.isEmpty(t)&&(await(0,s.when)((()=>!this.integrationsStore.loadingIntegrationClasses)),t=this.integrationsStore.getIntegrationClasses()),this.setSelectedClassData(t,e)}render(){const{selectedAPI:e,selectedAPIVersion:t,activeTab:n,selectedClassData:i}=this.state,o=A.get(i,"meta.authType"),s=A.get(i,"description",""),p=this.integrationsStore.loadingIntegrationClasses,{selectedService:u,selectedRule:S}=this.store,E=A.has(I.serviceBasedCustomComponents,u),_=A.get(i,"clientCategories",[]),{controller:w}=this.props;return A.isEmpty(u)||E?p||w.isHydratingStore||A.isEmpty(i)?r.createElement("div",{className:"integrations-page-container"},r.createElement(g.default,null)):w.oauthStatus===h.AUTH_STATES.AUTHORISING?r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integrations-add"},r.createElement("div",{className:"integrations-add-card"},r.createElement(f.default,{connecting:!0,selectedServiceForAuthorization:u,handleStop:()=>{w.handleOauthStop()},handleOauthTimeout:()=>{w.handleOauthTimeout()},oauthTimeoutInterval:w.OAUTH_TIMEOUT_INTERVAL})))):w.oauthStatus===h.AUTH_STATES.FAILED?r.createElement(v.default,{error:{title:"Something went wrong",message:"Something went wrong while authorising the user. Please close the tab and try again."}}):r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integrations-add"},r.createElement("div",{className:"integrations-add-card"},r.createElement(l.default,{type:"h1",text:`Connect to ${h.RULE_TO_TITLE[S]}`}),!A.isEmpty(s)&&r.createElement(c.default,{type:"lead",className:"monitor-integration-description"},s),"basic_auth"!==o&&"token"!==o||A.some(_,(e=>{const t=A.get(e,"key");return t===h.API_MONITORING||t===h.API_PERFORMANCE_INTEGRATION}))?r.createElement(a.default,{rule:S,service:u,apiId:e,apiVersionId:t,controller:w,source:h.CREATE_SOURCE}):r.createElement(r.Fragment,null,r.createElement("div",{className:"integrations-add-card__auth-tabs"},r.createElement(m.Tabs,{activeRef:n,className:"integrations-add-card__auth-tabs-wrapper",defaultActive:"authenticate",type:"primary"},r.createElement(m.Tab,{className:"integrations-add-card__auth-tabs-tab",refKey:"authenticate",disabled:"configure"===n},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title"},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title__label"},"1. Authenticate","configure"===n?r.createElement(d.default,{name:"icon-state-success-stroke",color:"content-color-primary",className:"integrations-add-card__authenticated-icon"}):""))),r.createElement(m.Tab,{className:"integrations-add-card__auth-tabs-tab",refKey:"configure",disabled:"authenticate"===n},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title"},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title__label"},"2. Configure"))))),r.createElement(a.default,{rule:S,service:u,apiId:e,apiVersionId:t,setActiveTab:e=>{this.setActiveTab(e)},controller:w,source:h.CREATE_SOURCE}))))):r.createElement(y.default,{apiId:e,apiVersionId:t,tab:b.MONITORING})}})||i},"./integrations/monitoring/add/NewRelic.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./integrations/monitoring/stores/APMIntegrationStore.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./integrations/components/base/MonitorSelector.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),E=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),A=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),_=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),w=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),j=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),D=n("./integrations/monitoring/services/index.js"),C=n("./integrations/navigation/constants.js"),P=n("./integrations/monitoring/constants.js"),T=n("./api-dev/constants/APISubViews.js"),O=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),M=n("./js/services/NavigationService.js"),x=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),N=n("./appsdk/workbench/TabService.js"),R=n("./js/modules/services/AnalyticsService.js"),k=n("./integrations/constants/integrationsConstants.ts"),L=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),F=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),V=n("./integrations/services/AuthenticationInstanceService.ts"),U=n("./js/stores/CurrentUserStore.js"),H=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),B=n("./js/services/CurrentUserDetailsService.js");const K=pm.logger.getContext("NewRelicAdd","integrations");let z=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",activeStepIndex:0,stepperStatuses:["progress","pending"],isCreatingIntegration:!1,authenticationFailed:!1,addNewRelicToTeam:!1,errorNickname:"",errorApiKey:"",monitor:"",region:P.NEW_RELIC_REGIONS.US,dashboardGuids:[],monitorIntegrationStates:[{nickname:P.MONITOR_RUN_NR_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:"",executor:""}],monitorIntegrationsToBeCreated:[],authenticationInstances:[],loadingAuthenticationInstances:!0,isUsingApiKeyInput:!1,installedAppFeatureFlag:!1},this.store=(0,c.resolveStoreInstance)(d.default),this.integrationsStore=(0,c.resolveStoreInstance)(l.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.setActiveStepIndex=this.setActiveStepIndex.bind(this),this.authenticateApiKey=this.authenticateApiKey.bind(this),this.renderSkipButton=this.renderSkipButton.bind(this),this.authenticateApiKeyDebounced=o().debounce(this.authenticateApiKey,1e3),this.renderMonitorSetupForm=this.renderMonitorSetupForm.bind(this),this.addMonitorSetupForm=this.addMonitorSetupForm.bind(this),this.prepareMonitorSetupPayload=this.prepareMonitorSetupPayload.bind(this),this.renderAddMonitorButton=this.renderAddMonitorButton.bind(this),this.onMonitorSelect=this.onMonitorSelect.bind(this),this.createNewRelicAPMIntegrationInstance=this.createNewRelicAPMIntegrationInstance.bind(this),this.removeMonitorSetupForm=this.removeMonitorSetupForm.bind(this),this.fetchAuthenticationInstances=this.fetchAuthenticationInstances.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.client_category=P.API_MONITORING,this.createAuthenticationInstance=this.createAuthenticationInstance.bind(this)}componentDidMount(){let{stepperStatuses:e}=this.state,t=o().find(this.store.getConfiguredIntegrations(),{rule:P.NEW_RELIC_APM_CLASS_ID}),n=(0,P.isFeatureFlagEnabled)(P.NEW_RELIC_APM_CLASS_ID);o().isEmpty(t)||(e[1]="progress",e[0]="completed",this.setState({stepperStatuses:e,activeStepIndex:1,isCreatingIntegration:!1,configuredAPMIntegration:t,hasAPMIntegrationConfigured:!0,region:o().get(t,"variables.region","us")})),n?(this.setState({installedAppFeatureFlag:n}),this.fetchAuthenticationInstances()):this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1})}fetchAuthenticationInstances(){const e=(0,c.resolveStoreInstance)(U.default);this.setState({loadingAuthenticationInstances:!0}),V.default.listAuthenticationInstances({scope:[{type:P.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[P.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[P.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(o().isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:K}),this.setState({loadingAuthenticationInstances:!1});if(o().isEmpty(e.data))return this.setState({isUsingApiKeyInput:!0,authenticationInstances:[],loadingAuthenticationInstances:!1});const t=o().head(e.data);H.default.fetchUserInfo(t.createdBy,((n,i)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=o().get(i,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,isUsingApiKeyInput:!1,loadingAuthenticationInstances:!1},(()=>{this.listServices(),this.listDashboards()})))))})).catch((e=>(pm.logger.error("APIBuilder-AddNewRelic~Error loading authentication instances!",e,{context:K}),this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1}))))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onServiceSelect(e){if(!o().isArray(e))return;let t=o().map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!o().isArray(e))return;let t=o().map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:o().isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}listServices(){const{rule:e}=this.props,{apiKey:t,region:n,isUsingApiKeyInput:i,authenticationInstances:r}=this.state,s={rule:e,type:"listServices"};i?(s.api_key=t,s.region=n):s.serviceAuth=o().head(r).id,this.setState({loadingServices:!0,errorServices:!1}),D.default[e].listServices(s).then((e=>{const t=o().map(o().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedService:[]})}))}listDashboards(){const{rule:e}=this.props,{apiKey:t,region:n,isUsingApiKeyInput:i,authenticationInstances:r}=this.state,s={rule:e,type:"listDashboards"};i?(s.api_key=t,s.region=n):s.serviceAuth=o().head(r).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),D.default[e].listServices(s).then((e=>{let t=o().map(o().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableDashboards:t,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,availableDashboards:[],selectedDashboard:[]})}))}createAuthenticationInstance(){const{apiKey:e,region:t}=this.state,n=[{type:P.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:B.default.teamId}],i={user_key:e,region:t},r=P.AUTHENTICATION_CLASSES.NEW_RELIC_USER;return new Promise(((e,t)=>{V.default.createAuthenticationInstance(r,n,i).then((n=>{const i=o().get(n,"body.data[0].id");i?e(i):t(n&&n.body)})).catch((e=>{t(e)}))}))}authenticateApiKey(){const{rule:e}=this.props,{apiKey:t,region:n}=this.state;this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,loadingServices:!0,errorServices:!1}),D.default[e].authenticateApiKey({rule:e,type:"getUserInfo",api_key:t,region:n}).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,loadingServices:!1},(()=>{this.listServices(),this.listDashboards()}))})).catch((e=>{this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,loadingServices:!1}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}setActiveStepIndex(e){let{apmSetupStatus:t,monitorSetupStatus:n,hasAPMIntegrationConfigured:i}=this.state,r=[t,n];r=o().map(r,((t,n)=>"completed"===t?"completed":n===e?"progress":"pending")),i&&(r[0]="completed"),this.setState({stepperStatuses:r,activeStepIndex:e})}renderSkipButton(e){let{apiId:t,apiVersionId:n}=this.props;return s.createElement(g.default,{className:"integrations-add-actions__button--cancel",type:"secondary",text:P.SKIP_BUTTON_TEXT[e],onClick:()=>{"configureAPM"===e?this.setState({stepperStatuses:["pending","progress"],activeStepIndex:1}):(N.default.closeByRoute(C.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),M.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:T.MONITORING}))}})}createNewRelicAPMIntegrationInstance(e){let{name:t,inputs:n}=e,{postman_api_id:i,apiversion:r}=n;return new Promise(((e,o)=>{x.default.createIntegrationInstance(P.NEW_RELIC_APM_CLASS_ID,t,n).then((t=>{200===t.status&&t.body.model_id?(pm.toasts.success("Added a new integration"),R.default.addEventV2({category:"integrations",action:P.NEW_RELIC_APM_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:1}),pm.windowEvents.emit(`${P.API_MONITORING}-integration-added`,{apiId:i,apiVersionId:r}),this.store.fetchIntegrationInstance("apiversion",r),e(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),o(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.setState({isCreatingIntegration:!1}),o(e)}))}))}createIntegrationInstanceBulk(e){return new Promise(((t,n)=>{x.default.createIntegrationInstanceBulk(e).then((i=>{200===i.status?(pm.toasts.success(`Added ${e.length} new integrations.`),R.default.addEventV2({category:"integrations",action:P.NEW_RELIC_MONITOR_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:e.length}),t(i.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),n(i&&i.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.setState({isCreatingIntegration:!1}),n(e)}))}))}async handleConnectAPMClick(e,t){let n;if(this.setState({isCreatingIntegration:!0}),t)try{n=await this.createAuthenticationInstance(),e.inputs.auth=n,delete e.inputs.api_key,delete e.inputs.region}catch(e){return this.setState({isCreatingIntegration:!1}),e.name===P.TEAM_AUTH_FORBIDDEN_ERROR?pm.toasts.error(P.ADD_NEW_RELIC_TO_TEAM_FORBIDDEN):pm.toasts.error(P.ERROR_ADDING_NEW_RELIC_TO_TEAM),void pm.logger.error("Error while adding authentication instance for New Relic",e,K)}this.createNewRelicAPMIntegrationInstance(e).then((()=>{this.setState({stepperStatuses:["completed","progress"],activeStepIndex:1,isCreatingIntegration:!1})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}handleConnectMonitoringClick(e){const{postman_api_id:t,apiversion:n}=e.inputs;let i=this.prepareMonitorSetupPayload();this.setState({isCreatingIntegration:!0}),this.createIntegrationInstanceBulk(i).then((()=>{this.setState({isCreatingIntegration:!1}),N.default.closeByRoute(C.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),M.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:T.MONITORING})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}renderConnectButton(e,t){let n,{apiKey:i,region:r,isCreatingIntegration:a,serviceGuids:l,monitorIntegrationStates:c,addNewRelicToTeam:d}=this.state,{auth:p}=t.inputs,u=!1;return(p||!o().isEmpty(i)&&r)&&(u=!0),"configureAPM"===e?n=a||!u||o().isEmpty(l):o().forEach(c,(e=>{(o().isEmpty(e.apiKey)||o().isEmpty(e.executor))&&(n=!0)})),s.createElement(g.default,{type:"primary",text:"Connect",className:"integrations-add-actions__button--proceed",isLoading:a,isDisabled:n,tooltip:n&&"Fill in the details to continue",onClick:async()=>{"configureAPM"===e?await this.handleConnectAPMClick(t,d):"configureMonitoring"===e&&this.handleConnectMonitoringClick(t)}})}renderMonitorSetupForm(e){let{monitorIntegrationStates:t}=this.state,{selectedWorkspace:n,apiId:i,apiVersionId:r,controller:a}=this.props,l=t[e],{nickname:c,errorNickname:d,apiKey:m,errorApiKey:h,executor:b}=l;return s.createElement(s.Fragment,null,e>0&&s.createElement(s.Fragment,null,s.createElement(L.MonitorSetupSectionSeparator,null),s.createElement(L.MonitoringSetupFormTitleContainer,null,s.createElement(L.MonitoringSetupFormTitle,null,`Monitor (${e+1}) Setup`),s.createElement(L.RemoveButtonContainer,null,s.createElement(g.default,{type:"tertiary",onClick:()=>this.removeMonitorSetupForm(e),text:"Remove",icon:s.createElement(w.default,null)})))),s.createElement(p.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:n}),s.createElement(p.SensitiveFieldSegmentV2,{title:"New Relic API Key",description:"Enter the Ingest-Licence Key provided by New Relic or ",customLink:s.createElement(O.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:m,error:o().get(t[e],"errorApiKey"),onChange:n=>{t[e]=o().merge(l,{apiKey:n.target.value,errorApiKey:""}),this.setState({monitorIntegrationStates:t})},onBlur:()=>{t[e]=o().merge(l,{apiKey:m.trim(),errorApiKey:o().isEmpty(m.trim())?"Please enter an API key":""}),this.setState({monitorIntegrationStates:t})}}),s.createElement(u.default,{executor:b,selectedWorkspace:n,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",disabled:!n,onTargetSelect:t=>{this.onMonitorSelect(e,t)},apiId:i,apiVersionId:r,configuredIntegrations:a.monitorIntegrationStore.getConfiguredIntegrations(),integrationClassId:P.NEW_RELIC_MONITOR_CLASS_ID,mode:k.INTEGRATION_FORM_MODE.ADD}))}addMonitorSetupForm(){this.setState((e=>{let{monitorIntegrationStates:t}=e;return t.push({nickname:P.MONITOR_RUN_NR_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:"",executor:""}),{monitorIntegrationStates:t}}))}removeMonitorSetupForm(e){this.setState((t=>{let{monitorIntegrationStates:n}=t;return o()(n).splice(e,1).value(),{monitorIntegrationStates:n}}))}prepareMonitorSetupPayload(){let e,{monitorIntegrationStates:t,region:n}=this.state;return e=o().map(t,(e=>({name:e.nickname,class:P.NEW_RELIC_MONITOR_CLASS_ID,inputs:[{key:"api_key",value:e.apiKey},{key:"region",value:n},{key:"monitor",value:o().get(e,"executor.value")}]}))),e}onMonitorSelect(e,t){this.setState((n=>{let{monitorIntegrationStates:i}=n,r=i[e];return i[e]=o().merge(r,{executor:t}),{monitorIntegrationStates:i}}))}renderAddMonitorButton(){let e,{monitorIntegrationStates:t}=this.state;return o().forEach(t,(t=>{(o().isEmpty(t.nickname)||o().isEmpty(t.apiKey)||o().isEmpty(t.executor))&&(e=!0)})),s.createElement(s.Fragment,null,s.createElement(L.MonitorSetupSectionSeparator,null),s.createElement(L.AddMonitorButtonContainer,null,s.createElement(g.default,{type:"tertiary",onClick:()=>this.addMonitorSetupForm(),text:"Add Monitor",icon:s.createElement(j.default,null),isDisabled:e,tooltip:e&&"Fill in the details to add a new monitor"})))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,availableDashboards:[],loadingDashboards:!1,availableServices:[],loadingServices:!1,selectedService:[],selectedDashboard:[]})}render(){const{apiKey:e,region:t,errorApiKey:n,availableServices:i,selectedService:r,loadingServices:a,loadingDashboards:l,selectedDashboard:c,availableDashboards:d,serviceGuids:u,dashboardGuids:g,errorServices:w,errorDashboards:j,activeStepIndex:D,stepperStatuses:C,authenticationFailed:T,monitorIntegrationStates:M,authenticationInstances:x,loadingAuthenticationInstances:N,isUsingApiKeyInput:R,addNewRelicToTeam:k,installedAppFeatureFlag:L}=this.state,{rule:V,apiId:U,apiVersionId:H}=this.props,B=C[0],K=C[1];let z={name:P.APM_NR_INTEGRATION_NAME,class:V,inputs:{...R?{api_key:e,region:t}:{auth:x.length>0?o().head(x).id:""},postman_api_id:U,apiversion:H,service_guids:u,dashboard_guids:g}};return s.createElement(m.default,{activeStepIndex:D,onChange:this.setActiveStepIndex},s.createElement(h.default,null,s.createElement(b.default,{label:"Monitor API performance",status:B,isDisabled:"completed"===B}),s.createElement(b.default,{label:"Post monitoring results",status:K})),s.createElement(f.default,null,s.createElement(v.default,{className:"add-integration-step-panel",heading:"Monitor API Performance from Postman",description:"View New Relic metrics and statuses directly from Postman",primaryAction:this.renderConnectButton("configureAPM",z),secondaryAction:this.renderSkipButton("configureAPM")},R?s.createElement(p.SensitiveFieldSegmentV2,{title:"New Relic API Key",description:"Enter the User Key provided by New Relic or ",customLink:s.createElement(O.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n&&(T?"Invalid API Key":o().isEmpty(e.trim())&&"Please enter the API key"),onChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1},(()=>this.authenticateApiKeyDebounced()))},onBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:!!o().isEmpty(e.trim()),authenticationFailed:!o().isEmpty(e.trim())})}}):s.createElement(F.default,{connectedAccount:o().head(x),isLoading:N,isUsingPersonalCredentials:R,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+o().get(o().head(x),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account"}),s.createElement(y.default,{menuMaxHeight:"36vh",value:r,options:i,placeholder:"Select New Relic Services",label:s.createElement(I.default,{text:"Services",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:w&&"Unable to load services",emptyStateMessage:"No services found"}),s.createElement(y.default,{menuMaxHeight:"28vh",value:c,options:d,placeholder:"Select Dashboards",label:s.createElement(I.default,{text:"Link Dashboards (Optional)"}),onChange:this.onDashboardSelect,isLoading:l,error:j&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}),R?s.createElement(s.Fragment,null,s.createElement("div",{className:"push-double--bottom__add-to-team"},s.createElement(I.default,{text:"New Relic region",type:"primary"}),s.createElement(S.default,{type:"para"},"This helps us know what New Relic region to use"),s.createElement(E.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},s.createElement(A.default,{label:"US (.com)",value:"us"}),s.createElement(A.default,{label:"EU (.eu)",value:"eu"}))),L&&!N&&o().isEmpty(x)?s.createElement("div",null,s.createElement(_.default,{isChecked:k,label:P.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:P.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!k})}})):null):null),s.createElement(v.default,{className:"add-integration-step-panel",heading:"Post monitoring results",description:"Send your monitor run metrics to New Relic.",primaryAction:this.renderConnectButton("configureMonitoring",z),secondaryAction:this.renderSkipButton("configureMonitoring")},o().map(M,((e,t)=>this.renderMonitorSetupForm(t))),this.renderAddMonitorButton())))}})||i},"./integrations/monitoring/add/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),o=n("./appsdk/workbench/TabService.js"),s=n("./integrations/navigation/constants.js"),a=n("./integrations/monitoring/customComponents.js"),l=n("./integrations/components/base/IntegrationCreateDataFormatWrapper.js"),c=n("./node_modules/lodash/lodash.js");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}let p;function u(e,t){o.default.closeByRoute(s.V10_API_ADD_APM_INTEGRATION_URL,{apiId:p.apiId})}function g(e){const{service:t,source:n}=e,o=c.get(e,"controller.apiVersionItemStore.apiName"),s=c.get(e,"controller.apiVersionItemStore.name"),g=c.get(a.serviceBasedCustomComponents,[t,"customCreateComponent"]);return p=e.controller,g?c.get(a.serviceBasedCustomComponents,[t,"useLegacyDataFormat"],!1)?i.createElement(g,d({},e,{apiName:o,apiVersionName:s,integrationFormActions:u,selectedWorkspace:(0,r.toJS)(p.currentWorkspace),source:n})):i.createElement(l.IntegrationCreateDataFormatWrapper,d({},e,{FormComponent:g,workspaceId:c.get((0,r.toJS)(p.currentWorkspace),"value"),postCreationAction:u})):i.createElement("div",null)}},"./integrations/monitoring/components/DatadogMonitorStatus.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=(n("./js/external-navigation/ExternalNavigationService.js"),n("./integrations/monitoring/constants.js")),l=n("./node_modules/prop-types/index.js"),c=n.n(l);const{ALERT:d,WARN:p,NO_DATA:u,OK:g,NO_MONITORS:m,UNAVAILABLE:h}=a.DATADOG_MONITOR_STATUSES;function b(e){const t=e.numMonitors?`${e.numMonitors} `:"",n={[p]:i.createElement(r.default,{status:"warning",text:`${t+p}`,className:"health-status-badge"}),[d]:i.createElement(r.default,{status:"critical",text:`${t+d}`,className:"health-status-badge"}),[g]:i.createElement(r.default,{status:"success",text:`${t+g}`,className:"health-status-badge"}),[u]:i.createElement(r.default,{status:"neutral",text:`${t+u}`,className:"health-status-badge"}),[m]:i.createElement(o.default,{type:"para"},"No Monitors"),[h]:i.createElement(s.default,{size:"small"})};return n[e.alertSeverity]||n[m]}b.defaultProps={alertSeverity:m,numMonitors:0},b.propTypes={alertSeverity:c().string,numMonitors:c().number}},"./integrations/monitoring/components/DatadogTriggeredMonitorsTable.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("./node_modules/lodash/lodash.js"),c=n.n(l),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./appsdk/components/link/Link.js"),u=n("./integrations/monitoring/constants.js"),g=n("./js/modules/services/AnalyticsService.js"),m=n("./js/external-navigation/ExternalNavigationService.js"),h=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),b=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js");t.default=(0,d.observer)((e=>{const[t,n]=(0,i.useState)(c().isEmpty(e.data)&&!e.loadingTriggeredMonitors);(0,i.useEffect)((()=>{n(c().isEmpty(e.data)&&!e.loadingTriggeredMonitors)}),[e.data,e.loadingTriggeredMonitors]);const l=[{Header:()=>i.createElement(r.default,{inline:!0,gap:"spacing-xs"},i.createElement(o.default,{type:"strong"},"Name")),cellWidth:"180px",id:"name",accessor:e=>[c().get(e,"name"),e],Cell:({value:t})=>{const[n,s]=t;return i.createElement(p.default,{onClick:t=>{t.preventDefault(),(t=>{const n=`${b.default.getDatadogHostname(e.region)}/monitors/${t}`;n&&(0,m.openExternalLink)(n,"_blank"),g.default.addEventV2({category:"apm-integration",action:"view-triggered-monitor",label:u.DATADOG_APM_CLASS_ID,value:1})})(s.id)}},i.createElement(o.default,{type:"link-subtle",isTruncated:!0},i.createElement(r.default,null,n,i.createElement("div",null,i.createElement(a.default,{name:"icon-action-openWeb-stroke",color:"content-color-primary"})))))},align:"left"},{Header:()=>i.createElement(r.default,{inline:!0,gap:"spacing-xs"},i.createElement(o.default,{type:"strong"},"Opened at")),cellWidth:"42px",id:"opened_at",accessor:e=>[c().get(e,"timestamp")],Cell:({value:e})=>{const[t]=e;return i.createElement(o.default,{isTruncated:!0},t)},align:"left"},{Header:()=>i.createElement(r.default,{inline:!0,gap:"spacing-xs"},i.createElement(o.default,{type:"strong"},"Status")),cellWidth:"42px",id:"status",accessor:e=>[c().get(e,"status"),e],Cell:({value:e})=>{const[t,n]=e;return i.createElement(h.default,{alertSeverity:t})},align:"left"}];return i.createElement(r.default,{className:"apm-services-table",width:"100%",direction:"column",gap:"spacing-m"},i.createElement(s.default,{data:e.data,columns:l,blankState:{isEmpty:t,component:i.createElement(r.default,{padding:{paddingLeft:"spacing-s"}},i.createElement(o.default,{type:"para"},"No monitors were triggered for current service."))},loader:{isLoading:e.loadingTriggeredMonitors}}))}))},"./integrations/monitoring/components/HealthStatus.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./appsdk/components/link/Link.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js");const d={CRITICAL:i.createElement(r.default,{status:"critical",text:"Critical",className:"health-status-badge"}),WARNING:i.createElement(r.default,{status:"warning",text:"Warning",className:"health-status-badge"}),NOT_ALERTING:i.createElement(r.default,{status:"success",text:"Healthy",className:"health-status-badge"}),NOT_CONFIGURED:i.createElement(o.default,{triggerEvent:"click",placement:"bottom-start",padding:"spacing-s",trigger:i.createElement(s.default,{type:"muted-plain",text:"Alerts not configured",icon:i.createElement(c.default,null)})},i.createElement("div",{className:"alert-config-info-popover"},i.createElement(a.default,{type:"para",color:"content-color-primary"},"Learn how to configure ",i.createElement(l.default,{to:"https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-policies/create-edit-or-find-alert-policy/",target:"_blank"},i.createElement(a.default,{type:"link-default",isExternal:!0},"alert policy")))))};function p(e){return d[e.alertSeverity]||d.NOT_CONFIGURED}},"./integrations/monitoring/components/NewRelic/AddComponents.js":function(e,t,n){n.r(t),n.d(t,{AddMonitorButtonContainer:function(){return a},MonitorSetupSectionSeparator:function(){return s},MonitoringSetupFormTitle:function(){return o},MonitoringSetupFormTitleContainer:function(){return r},MultiSelectContainer:function(){return d},MultiSelectDiv:function(){return p},MultiSelectWrapper:function(){return c},RadioButtonDiv:function(){return u},RemoveButtonContainer:function(){return l}});var i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const r=i.default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`,o=i.default.div`
  color: var(--content-color-primary);
  font-weight: var(--text-weight-medium);
  font-size: var(--text-size-m);
  line-height: var(--line-height-m);
`,s=i.default.div`
  border-top: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
`,a=i.default.div`width: fit-content;`,l=i.default.div`width: fit-content; float: right; margin-left: auto;`,c=i.default.div`display: flex; flex-direction: column; padding-right: 10px; padding-top: 16px`,d=i.default.div`display: flex; flex-direction: column`,p=i.default.div`padding: 10px`,u=i.default.div`margin-bottom: var(--spacing-l); padding-top: var(--spacing-l)`},"./integrations/monitoring/components/StatsListItem.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i,r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),s=(n("./js/services/NavigationService.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js"),n("./node_modules/lodash/lodash.js"));let a=(0,r.observer)(i=class extends o.Component{constructor(e){super(e),this.statusClassnames={CRITICAL:"monitoring-services-table-row-cell-status-critical",WARNING:"monitoring-services-table-row-cell-status-warning",openedAt:"monitoring-services-table-row-cell-opened-at",closedAt:"monitoring-services-table-row-cell-closed-at",label:"monitoring-services-table-row-cell-event-name"},this.getClassnames=this.getClassnames.bind(this)}getClassnames(e,t){return this.statusClassnames[e]?this.statusClassnames[e]:this.statusClassnames[t]?this.statusClassnames[t]:void 0}render(){const{stats:e}=this.props;return o.createElement("div",{className:"monitoring-services-table-row"},s.map(s.keys(e),(t=>o.createElement("div",{className:`monitoring-services-table-row-cell-stats ${this.getClassnames(s.get(e,t),t)}`},s.get(e,t)||"-"))))}})||i},"./integrations/monitoring/components/helpers/APMChartContainer.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/LoadingIndicator.js"),o=n("./node_modules/prop-types/index.js"),s=n.n(o),a=n("./node_modules/lodash/lodash.js");const l=/width=\d+/,c=e=>{const[t,n]=(0,i.useState)(e.graphURL),[o,s]=(0,i.useState)(e.loadingChartUrls),[c,d]=(0,i.useState)("");return(0,i.useEffect)((()=>{const e=document.querySelector(".datadog-apm-metric-chart-iframe-wrapper"),t=new ResizeObserver((e=>{(e=>{const t=a.get(e[0],"contentRect.width");d(parseInt(t))})(e)}));return t.observe(e),()=>{t.unobserve(e)}}),[]),(0,i.useEffect)((()=>{s(e.loadingChartUrls),n(e.graphURL)}),[e.loadingChartUrls,e.graphURL]),i.createElement("div",{className:"datadog-apm-metric-chart-iframe-wrapper"},o&&i.createElement(r.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!o&&i.createElement("iframe",{className:"metric-chart",frameBorder:"0",id:e.graphName,name:`datadog-${e.graphName}_iframe`,sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:"block"},src:a.replace(t,l,`width=${parseInt(c)}`)}):!o&&e.renderWebview(a.replace(t,l,`width=${parseInt(c)}`)))};t.default=c,c.propTypes={loadingChartUrls:s().bool.isRequired,graphName:s().string.isRequired,selectedService:s().object.isRequired,renderWebview:s().func.isRequired}},"./integrations/monitoring/components/helpers/APMDashboardTitleBar.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),p=n("./integrations/monitoring/components/helpers/MoreOptions.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("./node_modules/lodash/lodash.js");let h=(0,o.observer)(i=class extends r.PureComponent{constructor(e){super(e)}render(){let{integration:e,dropdownGroupedOptions:t,availableTimeFrames:n,selectedTimeFrame:i,canEditIntegration:o,payload:u,availableServices:g,selectedService:h,selectedAPIVersion:b,selectedAPI:f}=this.props;return r.createElement(s.default,{padding:"spacing-s spacing-l spacing-s spacing-s",border:{borderBottom:"border-width-default"},className:"apm-titlebar-wrapper",justifyContent:"space-between",grow:0,shrink:1,wrap:"wrap"},r.createElement(s.default,{alignItems:"center",padding:{paddingRight:"spacing-xxl"}},r.createElement(a.default,{icon:r.createElement(c.default,null),onClick:this.props.onBackPressed,type:"tertiary"}),!m.isEmpty(g)&&r.createElement(r.Fragment,null,r.createElement(l.default,{className:"apm-service-selector",onChange:this.props.handleServiceSelect,options:t,value:h,placeholder:"Select a service",isClearable:!1,isSearchable:!1,triggerWidth:"inherit",triggerType:"tertiary",menuMaxWidth:"auto"}),m.get(h,"healthStatus")&&r.createElement("div",{className:"monitoring-service-selector-health-status"},m.get(h,"healthStatus.component")))),r.createElement(s.default,{gap:"spacing-xs",alignItems:"center",grow:1,justifyContent:"flex-end"},h&&r.createElement(s.default,{padding:{paddingRight:"spacing-xs"}},r.createElement(a.default,{type:"secondary",onClick:this.props.handleViewOnAPMSite,text:`View on ${this.props.serviceProvider} ↗`})),!m.isEmpty(g)&&r.createElement(l.default,{onChange:this.props.onSelectTimeFrame,options:n,value:i,isClearable:!1,isSearchable:!1,triggerWidth:"auto",triggerType:"tertiary",menuMinWidth:"160px"}),r.createElement(a.default,{type:"tertiary",icon:r.createElement(d.default,null),onClick:this.props.bootstrap}),r.createElement(p.default,{integration:e,payload:u,canEditIntegration:o,apiVersionId:b,selectedAPI:f})))}})||i;h.propTypes={onBackPressed:g().func.isRequired,handleServiceSelect:g().func.isRequired,handleViewOnAPMSite:g().func.isRequired,onSelectTimeFrame:g().func.isRequired,bootstrap:g().func.isRequired,integration:g().object.isRequired,selectedAPIVersion:g().string.isRequired,selectedAPI:g().string.isRequired,availableTimeFrames:g().array.isRequired,selectedTimeFrame:g().object.isRequired,canEditIntegration:g().bool.isRequired,payload:g().object.isRequired,dropdownGroupedOptions:g().array.isRequired,serviceProvider:g().string.isRequired}},"./integrations/monitoring/components/helpers/MoreOptions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-options-stroke.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("./integrations/monitoring/constants.js"),h=n("./integrations/api-observability/constants.ts"),b=n("./integrations/components/DeleteIntegrationModal.js"),f=n("./js/stores/StoreManager.js"),v=n("./integrations/monitoring/stores/APMIntegrationStore.js"),y=n("./js/services/NavigationService.js"),I=n("./integrations/navigation/constants.js"),S=n("./node_modules/lodash/lodash.js");let E=(0,o.observer)(i=class extends r.PureComponent{constructor(e){super(e),this.store=(0,f.resolveStoreInstance)(v.default),this.state={isPopOverOpen:!1,showDeleteModal:!1},this.handleDeleteModalAction=this.handleDeleteModalAction.bind(this),this.handleEditIntegration=this.handleEditIntegration.bind(this)}handleDeleteModalAction(){let e=!this.state.showDeleteModal;this.setState({showDeleteModal:e,isPopOverOpen:!1})}handleEditIntegration(){let{integration:e,selectedAPI:t}=this.props;this.setState({isPopOverOpen:!1},(()=>{y.default.transitionTo(I.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:t,integrationId:S.get(e,"id")},{service:e.service||e.rule},{additionalContext:{origin:"services_container"}})}))}render(){const{isPopOverOpen:e,showDeleteModal:t}=this.state,{payload:n,integration:i}=this.props;return r.createElement("div",{className:"api-monitoring-more-options"},r.createElement(s.default,null,r.createElement(a.default,null,r.createElement(l.default,{className:"api-monitoring-more-options-icon-wrapper",type:"tertiary",onClick:()=>{this.setState({isPopOverOpen:!e})},icon:r.createElement(p.default,null)})),this.props.canEditIntegration?r.createElement(c.default,null,r.createElement(d.default,{onClick:this.handleEditIntegration},"Edit Integration"),r.createElement(d.default,{onClick:this.handleDeleteModalAction,type:"destructive"},"Delete Integration")):r.createElement(c.default,null,r.createElement(d.default,{isDisabled:!0,tooltip:h.PERMISSION_ERROR},"Edit Integration"),r.createElement(d.default,{isDisabled:!0,tooltip:h.PERMISSION_ERROR,type:"destructive"},"Delete Integration"))),r.createElement(b.default,{size:"small",store:this.store,category:m.API_PERFORMANCE_INTEGRATION,payload:n,isOpen:t,handleCloseModal:this.handleDeleteModalAction,integrationId:S.get(i,"id"),ruleId:S.get(i,"rule")}))}})||i;E.propTypes={showDeleteModal:g().bool,payload:g().object.isRequired,canEditIntegration:g().bool.isRequired,integration:g().object.isRequired,apiVersionId:g().string.isRequired,selectedAPI:g().string.isRequired}},"./integrations/monitoring/containers/APMDashboard.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),f=n("./integrations/monitoring/components/StatsListItem.js"),v=n("./integrations/monitoring/services/index.js"),y=(n("./js/utils/NavigationUtil.js"),n("./integrations/monitoring/constants.js")),I=n("./js/services/NavigationService.js"),S=n("./appsdk/workbench/TabService.js"),E=n("./integrations/navigation/constants.js"),A=n("./integrations/components/error-states/ErrorIntegrations.js"),_=n("./js/external-navigation/ExternalNavigationService.js"),w=n("./integrations/monitoring/components/HealthStatus.js"),j=n("./js/modules/services/AnalyticsService.js"),D=n("./onboarding/src/common/LaunchDarkly.js"),C=n("./integrations/monitoring/components/helpers/MoreOptions.js"),P=n("./integrations/utils/CommonHelperMethods.ts"),T=(n("./integrations/constants/integrationsConstants.ts"),n("./js/stores/ActiveWorkspaceSessionStore.js")),O=n("./integrations/constants/v10IntegrationConstants.ts"),M=n("./node_modules/lodash/lodash.js");const x=(0,P.getErrorContextObject)("New Relic APM Integration");let N=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={loadingServiceMetrics:!1,availableServices:[],selectedService:{},showDeleteModal:!1,isPopOverOpen:!1,isServiceSelectorOpen:!1,isTimelineSelectorOpen:!1,selectedAPI:e.controller.apiId,selectedAPIVersion:e.controller.version,loadingChartUrls:!0,loadingStatistics:!0,webTransactionChartLoading:!0,throughputChartLoading:!0,apdexChartLoading:!0,errorRateChartLoading:!0,bootstrapInProgress:!0,selectedTimeframe:{label:"Since 3 hours",value:"3 hours"},availableTimeframes:[{label:"Since 1 hour",value:"1 hour"},{label:"Since 3 hours",value:"3 hours"},{label:"Since 1 day",value:"1 day"},{label:"Since 3 days",value:"3 days"},{label:"Since 1 week",value:"1 week"}]},this.bootstrap=this.bootstrap.bind(this),this.handleServiceSelect=this.handleServiceSelect.bind(this),this.fetchChartUrls=this.fetchChartUrls.bind(this),this.fetchStatistics=this.fetchStatistics.bind(this),this.handleDeleteModalAction=this.handleDeleteModalAction.bind(this),this.fetchServiceMetrics=this.fetchServiceMetrics.bind(this),this.renderTitleBar=this.renderTitleBar.bind(this),this.onBackPressed=this.onBackPressed.bind(this),this.onSelectTimeframe=this.onSelectTimeframe.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${y.API_MONITORING}-service-selected`,this.onServiceSelectEventCaptured.bind(this)),pm.windowEvents.addListener(`${y.API_MONITORING}-integration-deleted`,this.onIntegrationDelete.bind(this)),pm.windowEvents.addListener(`${y.API_MONITORING}-integration-edited`,this.onIntegrationUpdate.bind(this));const e=this.props.controller;this.loadIntegrationReaction=(0,s.reaction)((()=>e.loadingIntegrationData),(()=>{M.isEmpty(e.legacyIntegrationData)||this.setState({integration:M.get(e,"legacyIntegrationData"),executor:M.get(e.legacyIntegrationData,"executor"),selectedAPIVersion:M.get(e.legacyIntegrationData,"executor"),canEditIntegration:e.canEditIntegration||!1,variables:M.get(e.legacyIntegrationData,"data.variables"),rule:M.get(e.legacyIntegrationData,"rule"),integrationId:e.integrationId},(()=>{this.bootstrap()}))}))}componentWillUnmount(){M.isFunction(this.loadIntegrationReaction)&&this.loadIntegrationReaction()}bootstrap(){let e=this.state.integrationId||this.store.getSelectedIntegration()||M.get(this.props.controller,"integrationId"),t=M.isEmpty(this.state.availableServices)?this.store.getAvailableAPMServices():this.state.availableServices,n=M.isEmpty(this.state.selectedService)?this.store.getSelectedAPMService():this.state.selectedService,{rule:i}=this.state;this.setState({availableServices:t,selectedService:n,integrationId:e},(()=>{try{t?(this.fetchChartUrls(e,i),this.fetchStatistics(e,i)):this.fetchServiceMetrics(e,i)}catch(e){pm.logger.error("NewRelicAPMDashboard~ error fetching service metrics or statistics: ",e,{context:x})}}))}fetchChartUrls(e,t){let{selectedService:n,selectedTimeframe:i,bootstrapInProgress:r}=this.state;this.setState({errorChartUrl:!1,loadingChartUrls:!0}),v.default[t].fetchChartUrls(e,n.value,i.value,((e,t)=>{e&&(pm.toasts.error(M.get(e,"data.error.title")),this.setState({loadingChartUrls:!1,bootstrapInProgress:!1,errorChartUrl:!0,chartUrls:t})),this.setState({loadingChartUrls:!1,bootstrapInProgress:!1,chartUrls:t})}))}fetchStatistics(e,t){let{selectedService:n,selectedTimeframe:i,bootstrapInProgress:r}=this.state;this.setState({loadingStatistics:!0,errorStatistics:!1}),v.default[t].fetchStatistics(e,n.value,i.value,((e,t)=>{e&&(pm.toasts.error(M.get(e,"data.error.title")),this.setState({loadingStatistics:!1,bootstrapInProgress:!1,errorStatistics:!0,statistics:t})),this.setState({loadingStatistics:!1,bootstrapInProgress:!1,statistics:t})}))}handleServiceSelect(e){let{integration:t}=this.state;this.setState({selectedService:e,isServiceSelectorOpen:!1,bootstrapInProgress:!0,webTransactionChartLoading:!0,errorRateChartLoading:!0,apdexChartLoading:!0,throughputChartLoading:!0},(()=>{this.fetchChartUrls(t.id,t.rule),this.fetchStatistics(t.id,t.rule)}))}onSelectTimeframe(e){let{integration:t}=this.state;this.setState({selectedTimeframe:e,bootstrapInProgress:!0,webTransactionChartLoading:!0,errorRateChartLoading:!0,apdexChartLoading:!0,throughputChartLoading:!0},(()=>{this.fetchChartUrls(t.id,t.rule),this.fetchStatistics(t.id,t.rule)}))}handleDeleteModalAction(){let e=!this.state.showDeleteModal;this.setState({showDeleteModal:e,isPopOverOpen:!1})}fetchServiceMetrics(e,t){this.setState({loadingServiceMetrics:!0,errorServiceMetrics:!1}),v.default[t].fetchMetricsForLinkedServices(e).then((n=>{let i=M.map(M.get(n,"data.data.actor.entities"),(e=>({label:e.name,value:e.guid,serviceName:e.name,serviceGuid:e.guid,latency:`${M.round(1e3*M.get(e,"apmSummary.responseTimeAverage"),2)} ms`,errorRate:`${M.round(100*M.get(e,"apmSummary.errorRate"),2)}`,apdex:M.get(e,"apmSummary.apdexScore"),link:M.get(e,"permalink"),alertSeverity:M.get(e,"alertSeverity")})));this.store.setAvailableAPMServices(i),this.store.setSelectedAPMService(i[0]),this.setState({availableServices:i,selectedService:i[0],loadingServiceMetrics:!1},(()=>{this.fetchChartUrls(e,t),this.fetchStatistics(e,t)}))})).catch((e=>{pm.toasts.error(M.get(e,"data.error.title")),this.setState({loadingServiceMetrics:!1,errorServiceMetrics:!0})}))}onIntegrationDelete(e){let{integrationId:t,selectedAPIVersion:n,selectedAPI:i}=this.state;e.apiVersionId===n&&S.default.closeByRoute(E.V10_API_APM_INTEGRATION_DASHBOARD_URL,{apiId:i,integrationId:t})}onBackPressed(){let{selectedAPI:e}=this.state,t=(0,a.resolveStoreInstance)(T.default).activeEditor;I.default.transitionTo(E.API_OVERVIEW_IDENTIFIER,{apiId:e},{view:O.PERFORMANCE},{tabOptions:{openIn:t}})}onIntegrationUpdate(e){let{selectedAPIVersion:t}=this.state;e.apiVersionId===t&&this.setState({selectedService:{},availableServices:[]},(()=>{this.store.clearAvailableAPMServices(),this.store.clearSelectedAPMService(),this.bootstrap()}))}onServiceSelectEventCaptured(e){let{executor:t}=this.state;e.apiVersionId===t&&this.setState({selectedService:e.selectedService,bootstrapInProgress:!0},(()=>{this.setState({bootstrapInProgress:!1}),this.bootstrap()}))}handleViewOnNewRelic(e){e&&(0,_.openExternalLink)(e,"_blank"),j.default.addEventV2({category:"apm-integration",action:"view-on-newrelic",label:M.get(this.state.integration,"rule"),value:1})}renderTitleBar(e){let{isServiceSelectorOpen:t,selectedService:n,loadingServiceMetrics:i,availableServices:o,isTimelineSelectorOpen:s,selectedTimeframe:a,availableTimeframes:l,isPopOverOpen:u,showDeleteModal:g,integration:m,selectedAPI:f,selectedAPIVersion:v}=this.state,y={api_id:f,executor:v};return r.createElement(c.default,{padding:"spacing-s spacing-l spacing-s spacing-s",border:{borderBottom:"border-width-default"},className:"api-monitoring-titlebar-wrapper",justifyContent:"space-between",grow:0,shrink:1,wrap:"wrap"},r.createElement(c.default,{alignItems:"center",padding:{paddingRight:"spacing-xxl"}},r.createElement(d.default,{icon:r.createElement(h.default,null),onClick:()=>this.onBackPressed(),type:"tertiary"}),!M.isEmpty(o)&&r.createElement(r.Fragment,null,r.createElement(p.default,{className:"api-monitoring-service-selector",onChange:this.handleServiceSelect,options:[{label:"Select Service",options:o}],value:n,placeholder:"Select a service",isClearable:!1,isSearchable:!1,triggerWidth:"inherit",triggerType:"tertiary",menuMaxWidth:"auto"}),M.get(n,"serviceName")&&r.createElement("div",{className:"monitoring-service-selector-health-status"},r.createElement(w.default,{alertSeverity:M.get(n,"alertSeverity")})))),r.createElement(c.default,{gap:"spacing-xs",alignItems:"center",grow:1,justifyContent:"flex-end"},r.createElement(r.Fragment,null,n&&r.createElement(c.default,{padding:{paddingRight:"spacing-xs"}},r.createElement(d.default,{type:"secondary",onClick:()=>this.handleViewOnNewRelic(M.get(n,"link")),text:"View on New Relic ↗"}))),!M.isEmpty(o)&&r.createElement(p.default,{onChange:this.onSelectTimeframe,options:l,value:a,isClearable:!1,isSearchable:!1,triggerWidth:"auto",triggerType:"tertiary",menuMinWidth:"160px"}),r.createElement(d.default,{type:"tertiary",icon:r.createElement(b.default,null),onClick:this.bootstrap}),r.createElement(C.default,{integration:m,payload:y,canEditIntegration:this.state.canEditIntegration,apiVersionId:v,selectedAPI:f})))}renderWebview(e){return r.createElement("webview",{ref:e=>this.webview=e,style:{width:"100%",height:"100%"},src:e})}render(){let{chartUrls:e,loadingChartUrls:t,loadingStatistics:n,statistics:i,selectedService:o,webTransactionChartLoading:s,errorRateChartLoading:a,throughputChartLoading:l,apdexChartLoading:d,bootstrapInProgress:p,errorloadingIntegration:h,errorChartUrl:b,errorServiceMetrics:v,errorStatistics:y}=this.state;if(h){let e={...this.state.errorDetails};pm.logger.error("NewRelicAPMDashboard~ Error occurred while loading page",this.state.errorDetails,{context:x}),e&&"instanceNotFoundError"==M.get(e,"error.name")&&this.onBackPressed()}return p?r.createElement("div",{className:"api-monitoring-dashboard"},r.createElement("div",{className:"api-monitoring-dashboard-wrapper"},this.renderTitleBar(!0),r.createElement("div",{className:"api-monitoring-titlebar-divider"}),r.createElement(u.default,{className:"bootstrap-loading-indicator"}))):b||v||y||h?r.createElement("div",{className:"api-monitoring-dashboard"},r.createElement("div",{className:"api-monitoring-dashboard-wrapper"},this.renderTitleBar(!0),r.createElement("div",{className:"api-monitoring-titlebar-divider"}),r.createElement("div",{className:"observability-error"},r.createElement(A.default,null)))):r.createElement("div",{className:"api-monitoring-dashboard"},r.createElement("div",{className:"api-monitoring-dashboard-wrapper"},this.renderTitleBar(),p?r.createElement(u.default,{className:"bootstrap-loading-indicator"}):r.createElement(c.default,{direction:"column",padding:"spacing-xxl spacing-xxl",gap:"spacing-xxl",className:"api-monitoring-dashboard-wrapper__inner",shrink:1},D.launchDarkly.getFlag("charts-on-new-relic",!1)&&r.createElement("div",null,r.createElement("div",{className:"api-monitoring-chart-title-wrapper"},r.createElement("div",{className:"api-monitoring-chart-title"},"Web Transaction Time")),r.createElement("div",{className:"api-monitoring-web-transaction-chart"},r.createElement("div",{className:"api-monitoring-web-transaction-chart-iframe-wrapper"},t&&r.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&r.createElement("iframe",{className:"web-transaction-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:s?"none":"block"},onLoad:()=>{this.setState({webTransactionChartLoading:!1})},src:`${M.get(e,"webTransactionsChartUrl")}?height=431px&timepicker=false`}):!t&&this.renderWebview(`${M.get(e,"webTransactionsChartUrl")}?height=431px&timepicker=false`))),r.createElement("div",{className:"api-monitoring-chart-title-wrapper"},r.createElement("div",{className:"api-monitoring-chart-title"},"Throughput"),r.createElement("div",{className:"api-monitoring-chart-title"},"Error Rate"),r.createElement("div",{className:"api-monitoring-chart-title"},"Apdex Score")),r.createElement("div",{className:"api-monitoring-chart-wrapper"},r.createElement("div",{className:"api-monitoring-web-throughput-chart-iframe-wrapper"},t&&r.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&r.createElement("iframe",{className:"throughput-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:l?"none":"block"},onLoad:()=>{this.setState({throughputChartLoading:!1})},src:`${M.get(e,"throughputChartUrl")}?height=309px&timepicker=false`}):!t&&this.renderWebview(`${M.get(e,"throughputChartUrl")}?height=309px&timepicker=false`)),r.createElement("div",{className:"api-monitoring-web-error-rate-chart-iframe-wrapper"},t&&r.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&r.createElement("iframe",{className:"error-rate-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:a?"none":"block"},onLoad:()=>{this.setState({errorRateChartLoading:!1})},src:`${M.get(e,"errorRateChartUrl")}?height=309px&timepicker=false`}):!t&&this.renderWebview(`${M.get(e,"errorRateChartUrl")}?height=309px&timepicker=false`)),r.createElement("div",{className:"api-monitoring-web-apdex-chart-iframe-wrapper"},t&&r.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&r.createElement("iframe",{className:"apdex-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:d?"none":"block"},onLoad:()=>{this.setState({apdexChartLoading:!1})},src:`${M.get(e,"apdexScoreChartUrl")}?height=309px&timepicker=false`}):!t&&this.renderWebview(`${M.get(e,"apdexScoreChartUrl")}?height=309px&timepicker=false`)))),r.createElement("div",null,r.createElement(g.default,{type:"h4",text:"Violation Events",hasBottomSpacing:!0}),n?r.createElement(u.default,{className:"table-loading-indicator"}):r.createElement("div",null,0===M.get(i,"violationEvents").length?r.createElement(m.default,{type:"para"},`No alert conditions were violated by ‘${M.get(o,"label")}’.`):r.createElement("div",{className:"monitoring-services-table"},r.createElement("div",{className:"monitoring-services-table-success"},r.createElement("div",{className:"monitoring-services-table-header"},r.createElement("div",{className:"monitoring-services-table-header-cell-event-name"},r.createElement(g.default,{type:"h6",text:"Event name"})),r.createElement("div",{className:"monitoring-services-table-header-cell-opened-at"},r.createElement(g.default,{type:"h6",text:"Opened at"})),r.createElement("div",{className:"monitoring-services-table-header-cell-closed-at"},r.createElement(g.default,{type:"h6",text:"Closed at"})),r.createElement("div",{className:"monitoring-services-table-header-cell-severity"},r.createElement(g.default,{type:"h6",text:"Severity"}))),r.createElement("div",{className:"monitoring-services-table-row-wrapper"},M.map(M.get(i,"violationEvents"),(e=>r.createElement(f.default,{key:e.violationId,stats:M.pick(e,["label","openedAt","closedAt","alertSeverity"]),length:M.get(i,"violationEvents")})))))))),r.createElement("div",null,r.createElement(g.default,{type:"h4",text:"Slowest transactions by time",hasBottomSpacing:!0}),n?r.createElement(u.default,{className:"table-loading-indicator"}):r.createElement("div",null,0===M.get(i,"slowestTransactions").length?r.createElement(m.default,{type:"para"},"No transactions for the selected time range."):r.createElement("div",{className:"monitoring-services-table monitoring-services-table--wo_bleed"},r.createElement("div",{className:"monitoring-services-table-success"},r.createElement("div",{className:"monitoring-services-table-header"},r.createElement("div",{className:"monitoring-services-table-header-cell-stats"},r.createElement(g.default,{type:"h6",text:"Transaction name"})),r.createElement("div",{className:"monitoring-services-table-header-cell-stats"},r.createElement(g.default,{type:"h6",text:"Avg duration"})),r.createElement("div",{className:"monitoring-services-table-header-cell-stats"},r.createElement(g.default,{type:"h6",text:"Error rate"}))),r.createElement("div",{className:"monitoring-services-table-row-wrapper"},M.map(M.get(i,"slowestTransactions"),(e=>r.createElement(f.default,{key:e.name,stats:M.pick(e,["name","avg_time","error_rate"]),length:M.get(i,"slowestTransactions")})))))))),r.createElement("div",null,r.createElement(g.default,{type:"h4",text:"Deployments",hasBottomSpacing:!0}),n?r.createElement(u.default,{className:"table-loading-indicator"}):r.createElement("div",null,0===M.get(i,"deployments").length?r.createElement(m.default,{type:"para"},"No deployments yet."):r.createElement("div",{className:"monitoring-services-table"},r.createElement("div",{className:"monitoring-services-table-success"},r.createElement("div",{className:"monitoring-services-table-header"},r.createElement("div",{className:"monitoring-services-table-header-cell-stats"},r.createElement(g.default,{type:"h6",text:"Deployment name"})),r.createElement("div",{className:"monitoring-services-table-header-cell-stats"},r.createElement(g.default,{type:"h6",text:"Deployment date"}))),r.createElement("div",{className:"monitoring-services-table-row-wrapper"},M.map(M.get(i,"deployments"),(e=>r.createElement(f.default,{key:e.timestamp,stats:M.pick(e,["revision","timestamp"]),length:M.get(i,"deployments")})))))))))))}})||i},"./integrations/monitoring/containers/DatadogAPMDashboard.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),c=n("./integrations/monitoring/services/index.js"),d=n("./integrations/monitoring/constants.js"),p=n("./js/services/NavigationService.js"),u=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n("./appsdk/workbench/TabService.js")),g=n("./integrations/navigation/constants.js"),m=n("./js/external-navigation/ExternalNavigationService.js"),h=n("./js/modules/services/AnalyticsService.js"),b=n("./integrations/monitoring/components/DatadogTriggeredMonitorsTable.js"),f=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),v=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),y=n("./integrations/monitoring/components/helpers/APMDashboardTitleBar.js"),I=n("./integrations/monitoring/components/helpers/APMChartContainer.js"),S=n("./integrations/utils/CommonHelperMethods.ts"),E=n("./node_modules/moment/moment.js"),A=n.n(E),_=(n("./integrations/constants/integrationsConstants.ts"),n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js")),w=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),j=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),D=n("./js/stores/ActiveWorkspaceSessionStore.js"),C=n("./integrations/constants/v10IntegrationConstants.ts"),P=n("./node_modules/lodash/lodash.js");const T=(0,S.getErrorContextObject)("Datadog APM Integration"),{OK:O}=d.DATADOG_MONITOR_STATUSES;let M=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.stringToHTML=function(e){return(new DOMParser).parseFromString(e,"text/html")},this.apmIntegrationsStore=(0,a.resolveStoreInstance)(l.default),this.datadogStore=this.apmIntegrationsStore.find(d.DATADOG_APM_CLASS_ID),this.state={canEditIntegration:!1,loadingServiceMetrics:!1,isServiceSelectorOpen:!1,loadingTriggeredMonitors:!1,isTimelineSelectorOpen:!1,selectedAPI:e.controller.apiId,selectedAPIVersion:e.controller.version,loadingChartUrls:!0,bootstrapInProgress:!0,violations:[],variables:{},selectedService:{},selectedTimeFrame:{label:"Since 1 hour",value:"1_hour"},availableTimeFrames:[{label:"Since 1 hour",value:"1_hour"},{label:"Since 4 hours",value:"4_hours"},{label:"Since 1 day",value:"1_day"},{label:"Since 2 days",value:"2_days"},{label:"Since 1 week",value:"1_week"}]},this.onBackPressed=this.onBackPressed.bind(this),this.bootstrap=this.bootstrap.bind(this),this.renderTitleBar=this.renderTitleBar.bind(this),this.onSelectTimeFrame=this.onSelectTimeFrame.bind(this),this.fetchGraphURLs=this.fetchGraphURLs.bind(this),this.handleServiceSelect=this.handleServiceSelect.bind(this),this.handleViewOnDatadog=this.handleViewOnDatadog.bind(this),this.renderWebview=this.renderWebview.bind(this),this.fetchServiceMonitorsStatusAndViolations=this.fetchServiceMonitorsStatusAndViolations.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${d.API_MONITORING}-service-selected`,this.onServiceSelectEventCaptured.bind(this)),pm.windowEvents.addListener(`${d.API_MONITORING}-integration-deleted`,this.onIntegrationDelete.bind(this)),pm.windowEvents.addListener(`${d.API_MONITORING}-integration-edited`,this.onIntegrationUpdate.bind(this));const e=this.props.controller;this.loadIntegrationReaction=(0,s.reaction)((()=>e.loadingIntegrationData),(()=>{P.isEmpty(e.legacyIntegrationData)||this.setState({integration:P.get(e,"legacyIntegrationData"),executor:P.get(e.legacyIntegrationData,"executor"),selectedAPIVersion:P.get(e.legacyIntegrationData,"executor"),canEditIntegration:e.canEditIntegration||!1,variables:P.get(e.legacyIntegrationData,"data.variables"),rule:P.get(e.legacyIntegrationData,"rule"),integrationId:e.integrationId},(()=>{if(!this.datadogStore){let e={},t={};e[this.state.selectedAPIVersion]=[],t[this.state.selectedAPIVersion]={},this.apmIntegrationsStore.add({id:d.DATADOG_APM_CLASS_ID,availableAPMServices:e,selectedAPMService:t}),this.datadogStore=this.apmIntegrationsStore.find(d.DATADOG_APM_CLASS_ID)}this.bootstrap()}))}))}componentWillUnmount(){P.isFunction(this.loadIntegrationReaction)&&this.loadIntegrationReaction()}onServiceSelectEventCaptured(e){let{executor:t}=this.state;e.apiVersionId===t&&(this.datadogStore.setSelectedAPMService(t,e.selectedService),this.setState({selectedService:e.selectedService},(()=>{this.bootstrap()})))}onIntegrationUpdate(e){let t=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion;e.apiVersionId===t&&(this.datadogStore.setSelectedAPMService(t,{}),this.datadogStore.setAvailableAPMServices(t,[]),this.bootstrap())}onIntegrationDelete(e){let{integrationId:t,selectedAPI:n}=this.state,i=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion;e.apiVersionId===i&&u.default.closeByRoute(g.V10_API_APM_DATADOG_INTEGRATION_DASHBOARD_URL,{apiId:n,integrationId:t})}fetchServiceMonitorsStatusAndViolations(e,t,n){if(t!==d.DATADOG_APM_CLASS_ID)return;const i=this.datadogStore.getAvailableAPMServices(n);let r=this.datadogStore.getSelectedAPMService(n)||this.state.selectedService;this.setState({loadingTriggeredMonitors:!0}),c.default[t].fetchServiceMonitorsStatus(e,P.get(r,"label"),P.get(r,"environment")).then((e=>{const t=P.reduce(e.data.monitors,((e,t)=>(t.status!==O&&e.push({...t,timestamp:A()(P.get(t,"last_triggered_ts")).format(d.TIMESTAMP)}),e)),[]),r=P.reduce(e.data.counts.status,((e,{name:t,count:n})=>(e[t]=n,e)),{}),o=this.datadogStore.getSelectedAPMService(n),s=v.default.getDatadogMonitorHealthStatusObject(r),a=P.map(i,(e=>{if(e.value===o.value){let t=e;return t.healthStatus=s,t.serviceStatuses=r,this.datadogStore.setSelectedAPMService(n,t),t}return e}));this.datadogStore.setAvailableAPMServices(n,a),this.setState({violations:t,loadingServiceMetrics:!1,loadingTriggeredMonitors:!1})})).catch((e=>{this.setState({loadingTriggeredMonitors:!1}),pm.logger.error("DatadogAPMDashboard ~ Error occurred while fetching monitor statuses from datadog",e,{context:T})}))}fetchServiceMetrics(e,t,n){t===d.DATADOG_APM_CLASS_ID&&(this.setState({loadingServiceMetrics:!0}),c.default[t].fetchMetricsForLinkedServices(e).then((i=>{let o=[];P.forEach(i.servicesMetrics,((e,t)=>{const n=P.reduce(e,((e,n,i)=>{let o=`${Math.ceil(P.get(n,"rpm_score"))}`,s=`${parseFloat(P.get(n,"apdex_score")).toFixed(2)}`,a=`${(1e3*parseFloat(P.get(n,"latency"))).toFixed(2)}`,l=P.get(n,"error_rate_score");return e.push({label:i,value:i+t,environment:t,serviceName:i,metrics:{throughput:"NaN"===o?"-":`${o} hits/m`,errorRate:"NaN"===l?"-":`${l}%`,apdexScore:"NaN"===s?"-":s,latency:"NaN"===a?"-":`${a} ms`},embedGraphs:{apdex_graphs:{},error_rate_graphs:{},latency_graphs:{},throughput_graphs:{}},healthStatus:{status:"Unavailable",component:r.createElement(f.default,{alertSeverity:"Unavailable"})},link:`${v.default.getDatadogHostname(P.get(this.state,"variables.region"))}/apm/service/${i}/http.request?env=${t}&topGraphs=latency%3Alatency_by_version%2CbreakdownAs%3Apercentage%2Cerrors%3Acount%2Chits%3Acount&paused=false`}),e}),[]);o=P.concat(o,n)})),this.datadogStore.setAvailableAPMServices(n,o),this.datadogStore.setSelectedAPMService(n,o[0]),this.fetchServiceMonitorsStatusAndViolations(e,t,n),this.setState({loadingServiceMetrics:!1,selectedService:o[0]},(()=>{this.fetchGraphURLs(e,t,n)}))})).catch((e=>{pm.logger.error("DatadogAPMDashboard ~ Error occurred while fetching service metrics from datadog",e,{context:T}),this.setState({loadingServiceMetrics:!1})})))}handleServiceSelect(e){let{integration:t,selectedAPIVersion:n}=this.state;this.datadogStore.setSelectedAPMService(n,e),this.setState({selectedService:e,isServiceSelectorOpen:!1,bootstrapInProgress:!0},(()=>{this.fetchGraphURLs(t.id,t.rule,this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion),this.fetchServiceMonitorsStatusAndViolations(t.id,t.rule,this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion)})),h.default.addEventV2({category:"apm-integration",action:"switch-service",label:d.DATADOG_APM_CLASS_ID,value:1})}onSelectTimeFrame(e){let{integration:t}=this.state;this.setState({selectedTimeFrame:e,bootstrapInProgress:!0},(()=>{this.fetchGraphURLs(t.id,t.rule,this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion)})),h.default.addEventV2({category:"apm-integration",action:"switch-time-frame",label:d.DATADOG_APM_CLASS_ID,value:1})}fetchGraphURLs(e,t,n){if(t!==d.DATADOG_APM_CLASS_ID)return;let{selectedTimeFrame:i}=this.state,r=this.datadogStore.getSelectedAPMService(n)||this.state.selectedService;this.setState({errorChartUrl:!1,loadingChartUrls:!0}),c.default[t].fetchGraphURLs(e,P.get(i,"value"),P.get(r,"label"),P.get(r,"environment"),((e,t)=>{if(e)return pm.logger.error("DatadogAPMDashboard ~ Error occurred while fetching graph urls from datadog",e,{context:T}),void this.setState({errorChartUrl:!0});const i=P.reduce(t,((e,t,n)=>{let i={},r=P.get(t,"html"),o=this.stringToHTML(r).getElementsByTagName("iframe")[0].attributes.src.value;return i.embedId=P.get(t,"embed_id"),i.graphURL=P.replace(o,"height=500","height=400"),e[n]=i,e}),{}),r=this.datadogStore.getAvailableAPMServices(n),o=this.datadogStore.getSelectedAPMService(n),s=P.map(r,(e=>e.value===o.value?{...e,embedGraphs:i}:e));this.datadogStore.setAvailableAPMServices(n,s),this.datadogStore.setSelectedAPMService(n,{...o,embedGraphs:i}),this.setState({loadingChartUrls:!1,bootstrapInProgress:!1,selectedService:{...o,embedGraphs:i}})}))}handleViewOnDatadog(e){e&&(0,m.openExternalLink)(e,"_blank"),h.default.addEventV2({category:"apm-integration",action:"view-on-datadog",label:P.get(this.state.integration,"rule"),value:1})}renderWebview(e){return r.createElement("webview",{ref:e=>this.webview=e,style:{width:"100%",height:"100%"},src:e})}bootstrap(){const e=this.state.integrationId||this.apmIntegrationsStore.getSelectedIntegration()||P.get(this.props.controller,"integrationId"),t=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion,n=this.apmIntegrationsStore.find(d.DATADOG_APM_CLASS_ID),i=n.getAvailableAPMServices(t),r=n.getSelectedAPMService(t)||{},{rule:o}=this.state,s={integrationId:e};P.isEmpty(i)?this.fetchServiceMetrics(e,o,t):(P.get(r,"embedGraphs.apdex_graphs.graphURL")&&P.get(r,"embedGraphs.error_rate_graphs.graphURL")&&P.get(r,"embedGraphs.latency_graphs.graphURL")&&P.get(r,"embedGraphs.throughput_graphs.graphURL")?s.loadingChartUrls=!1:this.fetchGraphURLs(e,o,t),this.fetchServiceMonitorsStatusAndViolations(e,o,t)),this.setState(s)}onBackPressed(){let{selectedAPI:e}=this.state,t=(0,a.resolveStoreInstance)(D.default).activeEditor;p.default.transitionTo(g.API_OVERVIEW_IDENTIFIER,{apiId:e},{view:C.PERFORMANCE},{tabOptions:{openIn:t}})}getGroupedServices(e){return P.map(P.groupBy(e,"environment"),((e,t)=>({label:`env:${t}`,options:e})))}renderTitleBar(){let{integration:e,selectedAPI:t,availableTimeFrames:n,selectedTimeFrame:i,canEditIntegration:o}=this.state,s=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion,a={api_id:t,executor:s},l=this.datadogStore&&this.datadogStore.getAvailableAPMServices(s),c=this.datadogStore&&this.datadogStore.getSelectedAPMService(s),d=l?this.getGroupedServices(l):[];return r.createElement(y.default,{onBackPressed:this.onBackPressed,handleServiceSelect:this.handleServiceSelect,handleViewOnAPMSite:()=>this.handleViewOnDatadog(P.get(c,"link")),onSelectTimeFrame:this.onSelectTimeFrame,bootstrap:this.bootstrap,integration:e,availableTimeFrames:n,selectedTimeFrame:i,canEditIntegration:o,payload:a,dropdownGroupedOptions:d,availableServices:l,selectedService:c,serviceProvider:"Datadog",selectedAPI:t,selectedAPIVersion:s})}render(){let{bootstrapInProgress:e,loadingChartUrls:t,selectedAPIVersion:n}=this.state,{loadingTriggeredMonitors:i,variables:o}=this.state,s=this.datadogStore&&this.datadogStore.getSelectedAPMService(n);return e?r.createElement("div",{className:"datadog-apm-dashboard"},r.createElement("div",{className:"datadog-apm-dashboard-wrapper"},this.renderTitleBar(),r.createElement(_.default,{className:"bootstrap-loading-indicator"}))):r.createElement("div",{className:"datadog-apm-dashboard"},r.createElement("div",{className:"datadog-apm-dashboard-wrapper"},this.renderTitleBar(),r.createElement("div",{className:"datadog-apm-dashboard-wrapper--inner"},e?r.createElement(_.default,{className:"bootstrap-loading-indicator"}):r.createElement(w.default,{direction:"column",shrink:1},r.createElement("div",{className:"datadog-apm-chart-wrapper"},r.createElement(I.default,{loadingChartUrls:t,graphName:"latency",graphURL:P.get(s,"embedGraphs.latency_graphs.graphURL"),renderWebview:this.renderWebview}),r.createElement(I.default,{loadingChartUrls:t,graphName:"throughput",graphURL:P.get(s,"embedGraphs.throughput_graphs.graphURL"),renderWebview:this.renderWebview})),r.createElement("div",{className:"datadog-apm-chart-wrapper"},r.createElement(I.default,{loadingChartUrls:t,graphName:"apdex",graphURL:P.get(s,"embedGraphs.apdex_graphs.graphURL"),renderWebview:this.renderWebview}),r.createElement(I.default,{loadingChartUrls:t,graphName:"error_rate",graphURL:P.get(s,"embedGraphs.error_rate_graphs.graphURL"),renderWebview:this.renderWebview}))),r.createElement(w.default,{direction:"column",padding:"spacing-xl spacing-xxl spacing-xxl spacing-xxl",gap:"spacing-s"},r.createElement(j.default,{type:"h4",text:"Triggered Monitors"}),r.createElement(b.default,{data:this.state.violations,loadingTriggeredMonitors:i,region:P.get(o,"region")})))))}})||i},"./integrations/monitoring/containers/helpers/DatadogAPMUtils.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),r=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),o=n("./integrations/monitoring/constants.js"),s=n("./node_modules/uuid/index.js"),a=n.n(s),l=n("./node_modules/lodash/lodash.js");t.default={getDatadogMonitorHealthStatusObject:function(e){const{ALERT:t,WARN:n,NO_DATA:s,OK:a,NO_MONITORS:c}=o.DATADOG_MONITOR_STATUSES;let d={status:c,component:i.createElement(r.default,{alertSeverity:c})};return l.get(e,t)>0?d={status:t,component:i.createElement(r.default,{numMonitors:l.get(e,t),alertSeverity:t})}:l.get(e,n)>0?d={status:n,component:i.createElement(r.default,{numMonitors:l.get(e,n),alertSeverity:n})}:l.get(e,s)>0?d={status:s,component:i.createElement(r.default,{numMonitors:l.get(e,s),alertSeverity:s})}:l.get(e,a)>0&&(d={status:a,component:i.createElement(r.default,{numMonitors:l.get(e,a),alertSeverity:a})}),d},getDatadogHostname:function(e){return"https://app.datadoghq"+("eu"===e?".eu":".com")},areEnvironmentsValid:function(e){const t=l.some(e,(e=>l.isEmpty(e.name)||l.isEmpty(e.services))),n=l(e).map("name").uniq().value().length!==e.length;return!t&&!n},getEmptyEnvironmentsList:function(){return[{name:"none",services:[],id:a().v4()}]}}},"./integrations/monitoring/controllers/APIMonitoringController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i,r,o,s,a,l,c,d,p,u,g,m,h,b=n("../../node_modules/mobx/lib/mobx.module.js"),f=n("./appsdk/workbench/BaseWorkbenchController.js"),v=n("./js/stores/IntegrationsStore.js"),y=n("./js/stores/SyncStatusStore.js"),I=n("./js/stores/ActiveWorkspaceStore.js"),S=n("./integrations/monitoring/stores/MonitorIntegrationStore.js"),E=n("./js/stores/StoreManager.js"),A=n("./integrations/monitoring/stores/APMIntegrationStore.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),w=n("./integrations/services/OAuthService.js"),j=n("./js/services/NavigationService.js"),D=n("./appsdk/workbench/TabService.js"),C=n("./integrations/monitoring/constants.js"),P=n("./integrations/navigation/constants.js"),T=n("./js/services/PageMetadataService.js"),O=n("./integrations/utils/CommonHelperMethods.ts"),M=n("./node_modules/lodash/lodash.js");function x(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function N(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let R=(i=class extends f.default{constructor(...e){super(...e),x(this,"origin",r,this),x(this,"currentWorkspace",o,this),x(this,"selectedMonitorId",s,this),x(this,"authorisationState",a,this),x(this,"oauthSessionId",l,this),x(this,"OAUTH_INITIATOR_DETAILS",c,this),x(this,"OAUTH_TIMEOUT_INTERVAL",d,this),x(this,"apiId",p,this),x(this,"version",u,this),x(this,"editIntegrationData",g,this),x(this,"hydratingStore",m,this),x(this,"loadingIntegrationData",h,this),this.integrationId=void 0,this.legacyIntegrationData={},this.canEditIntegration=!1,this.store=(0,E.resolveStoreInstance)(A.default),this.relation={type:"monitor",model:"monitor"},this.STATES={AUTH:"AUTH",SESSION:"SESSION"}}setAPIVersion(e){this.version=e,this.store.setSelectedAPIVersion(e)}async didCreate({routeParams:e,queryParams:t,additionalContext:n}){this.monitorIntegrationStore=(0,E.resolveStoreInstance)(S.default),this.integrationsStore=(0,E.resolveStoreInstance)(v.default);let i=(0,E.resolveStoreInstance)(I.default);this.currentWorkspace={label:M.get(i,"name"),value:M.get(i,"id")};const r=M.get(e,"integrationId")||M.get(t,"integration_id"),o=M.get(t,"version"),s=M.get(t,"name");this.apiId=M.get(e,"apiId",null),this.integrationId=r,this.store.setSelectedIntegration(r),this.apiId&&this.store.setSelectedAPI(e.apiId),o?this.setAPIVersion(o):r||await(0,O.getAPIDetails)(this.apiId).then((e=>{this.setAPIVersion(M.get(e,"version.id"))})),t&&t.service&&this.store.setSelectedService(t.service),t&&t.rule&&this.store.setSelectedRule(t.rule),s&&(this.store.setSelectedServiceName(s),this.setTitle(`Connect to ${s}`)),this.origin=M.get(n,"origin",null),this.apiVersionItemStore=M.get(n,"apiVersionItemStore"),M.includes(C.OAUTH_ENABLED_RULES,t.rule)&&(this.OAUTH_INITIATOR_DETAILS={rule:t.rule,service:t.service},this.setState(this.STATES.AUTH,C.AUTH_STATES.AUTHORISING),this.handleInitiateOAuth(t.service,t.rule)),M.isNil(n)&&(this.setHydratingStatus(!0),this.store.initializeApmIntegrationStoreV2({apiId:this.apiId,apiVersionId:this.version,category:C.API_MONITORING}).then((()=>{this.setHydratingStatus(!1)})).catch((()=>{this.setHydratingStatus(!1)}))),await this.fetchIntegrationData(r)}async fetchIntegrationData(e){if(!e)return;let t={};try{if(t=await _.default.getIntegrationData(e),200===t.status){this.legacyIntegrationData=M.get(t,"body.data"),this.canEditIntegration=M.get(t,"body.meta.allowedActions.update");const e=this.legacyIntegrationData.executor;this.setAPIVersion(e),this.setLoadingIntegrationData(!1)}}catch(e){pm.logger.error("APIMonitoringController~~ Error loading integration data",e)}}setHydratingStatus(e){this.hydratingStore=e}get isHydratingStore(){return this.hydratingStore}isOnline(){return(0,E.resolveStoreInstance)(y.default).isSocketConnected}didQueryParamsChange(e){e&&e.version&&this.store.setSelectedAPIVersion(e.version),e&&e.integration_id&&this.store.setSelectedIntegration(e.integration_id),e&&e.service&&this.store.setSelectedService(e.service),e&&e.rule&&this.store.setSelectedRule(e.rule);const t=M.get(e,"name");t&&(this.store.setSelectedServiceName(t),this.setTitle(`Connect to ${t}`))}setTitle(e){this._editorModel&&(this._editorModel.setTitle&&this._editorModel.setTitle(e),this._editorModel.isActive&&T.default.setPageTitle(this._editorModel.getPageTitle&&this._editorModel.getPageTitle()))}handleInitiateOAuth(e,t){w.default.initiateAuthorization(e).then((n=>{let i,r=n.body;200!==n.status||M.isEmpty(r)?(pm.logger.warn("APIMonitoringController~handleInitiateOAuth: Something went wrong while opening authorization",n.body),pm.toasts.error("Something went wrong while initiating authorization"),this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED)):(i=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${r.sessionId}`,j.default.openURL(i,{target:"_blank"}),this.setState(this.STATES.SESSION,r.sessionId),this.pollForToken(e,t))})).catch((e=>{let t=!this.isOnline()?"You need to be online to complete the authorization ":"Something went wrong while initiating authorization";pm.logger.warn("IntegrationTypesPerService~handleInitiateOAuth: Something went wrong while opening authorization",e),pm.toasts.error(t),this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED)}))}pollForToken(e,t){let n=0,i=this.oauthSessionId;if(!i)return pm.logger.warn("APIMonitoringController~pollForToken: sessionId is required."),pm.toasts.error("Something went wrong while fetching authorization information"),void this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED);const r=async(o,s)=>{n++,w.default.getSession(i).then((i=>{let a=i.body;if(30===n)return pm.toasts.error("Service timed out while performing authorization"),this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED),s(new Error("Exceeded max attempts"));if(!a.token||M.isEmpty(a.token))setTimeout(r,2e3,o,s);else{if(a.error)return pm.logger.warn("IntegrationTypesPerService~pollForToken: Error while getting a session for the user",a.error),pm.toasts.error("Something went wrong while fetching authorization information"),this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED),s(new Error("Error while getting a session for the user"));if(a.token)return this.fetchAuthDetails(e,t,a),o("Fetched OAuth token successfully for service ",e)}})).catch((e=>{if(e.error){let t=!this.isOnline()?"You need to be online to complete the authorization ":"Something went wrong while fetching authorization information";return pm.logger.warn("IntegrationTypesPerService~pollForToken: Error while getting a session for the user",e.error),pm.toasts.error(t),this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED),s(e.error)}}))};return new Promise(r)}fetchAuthDetails(e,t,n){w.default.services[e].fetchAuthDetails(n,((t,n)=>{t?(pm.logger.warn(`IntegrationTypesPerService~fetchAuthDetails: Error while fetching service details for ${e} `,t),pm.toasts.error(`Something went wrong while fetching authorization information for ${e}`),this.setState(this.STATES.AUTH,C.AUTH_STATES.FAILED)):(this.integrationsStore.setAuthDetails(n),this.setState(this.STATES.AUTH,C.AUTH_STATES.AUTHORISED))}))}setState(e,t){switch(e){case"AUTH":this.authorisationState=t;break;case"SESSION":this.oauthSessionId=t}}get oauthStatus(){return this.authorisationState}setLoadingIntegrationData(e){this.loadingIntegrationData=e}handleOauthStop(){D.default.closeByRoute(P.V10_API_ADD_APM_INTEGRATION_URL,{apiId:this.apiId})}handleOauthTimeout(){D.default.closeByRoute(P.V10_API_ADD_APM_INTEGRATION_URL,{apiId:this.apiId}),pm.toasts.error(this.OAUTH_INITIATOR_DETAILS.service+" didn't respond in time. Try again.",{title:"Request Timeout"})}setSelectedMonitorId(e){this.selectedMonitorId=e}setIntegrationData(e){this.editIntegrationData=e}get integrationData(){return(0,b.toJS)(this.editIntegrationData)}beforeDestroy(){this.store=null}},r=N(i.prototype,"origin",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=N(i.prototype,"currentWorkspace",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=N(i.prototype,"selectedMonitorId",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=N(i.prototype,"authorisationState",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=N(i.prototype,"oauthSessionId",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=N(i.prototype,"OAUTH_INITIATOR_DETAILS",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=N(i.prototype,"OAUTH_TIMEOUT_INTERVAL",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6e4}}),p=N(i.prototype,"apiId",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=N(i.prototype,"version",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=N(i.prototype,"editIntegrationData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=N(i.prototype,"hydratingStore",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=N(i.prototype,"loadingIntegrationData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N(i.prototype,"setAPIVersion",[b.action],Object.getOwnPropertyDescriptor(i.prototype,"setAPIVersion"),i.prototype),N(i.prototype,"setHydratingStatus",[b.action],Object.getOwnPropertyDescriptor(i.prototype,"setHydratingStatus"),i.prototype),N(i.prototype,"isHydratingStore",[b.computed],Object.getOwnPropertyDescriptor(i.prototype,"isHydratingStore"),i.prototype),N(i.prototype,"setState",[b.action],Object.getOwnPropertyDescriptor(i.prototype,"setState"),i.prototype),N(i.prototype,"oauthStatus",[b.computed],Object.getOwnPropertyDescriptor(i.prototype,"oauthStatus"),i.prototype),N(i.prototype,"setLoadingIntegrationData",[b.action],Object.getOwnPropertyDescriptor(i.prototype,"setLoadingIntegrationData"),i.prototype),N(i.prototype,"integrationData",[b.computed],Object.getOwnPropertyDescriptor(i.prototype,"integrationData"),i.prototype),i)},"./integrations/monitoring/customComponents.js":function(e,t,n){n.r(t),n.d(t,{serviceBasedCustomComponents:function(){return a}});var i=n("./integrations/monitoring/add/Datadog/Datadog.js"),r=n("./integrations/monitoring/add/NewRelic.js"),o=n("./integrations/monitoring/edit/Datadog.js"),s=n("./integrations/monitoring/edit/NewRelic.js");const a={datadog:{customCreateComponent:i.default,customEditComponent:o.default,useLegacyDataFormat:!0},apm_datadog:{customCreateComponent:i.default,customEditComponent:o.default,useLegacyDataFormat:!0},apm_new_relic:{customCreateComponent:r.default,customEditComponent:s.default,useLegacyDataFormat:!0}}},"./integrations/monitoring/edit/Datadog.js":function(e,t,n){n.r(t),n.d(t,{DatadogAPM:function(){return T},default:function(){return O}});var i,r,o=n("./node_modules/lodash/lodash.js"),s=n.n(o),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/IntegrationsStore.js"),p=n("./js/stores/StoreManager.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=n("./integrations/components/base/EditIntegration.js"),h=n("./integrations/monitoring/services/index.js"),b=n("./integrations/navigation/constants.js"),f=n("./integrations/monitoring/constants.js"),v=n("./js/components/base/Buttons.js"),y=n("./js/services/NavigationService.js"),I=n("./appsdk/workbench/TabService.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js"),E=n("./node_modules/uuid/index.js"),A=n.n(E),_=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js"),D=n("./integrations/utils/CommonHelperMethods.ts"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const P=(0,D.getErrorContextObject)("Datadog APM Integration");let T=(0,c.observer)(i=class extends a.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=async e=>{this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(f.DATADOG_APM_CLASS_ID);const{rule:t}=this.props,{apiKey:n,appKey:i,region:r,dashboardGuids:o}=this.state,a=s().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),l=s().get(a,"options.serviceActionId"),c=s().get(a,"id");this.setState({loadingDashboards:!0,errorDashboards:!1});const d={rule:t,type:"listDashboards",...n?{api_key:n}:{},...i?{app_key:i}:{},region:r};h.default[t].listDashboardsWithIntegrationId(d,e,l,c).then((e=>{let t=s().map(s().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${_.default.getDatadogHostname(r)}${e.url}`}))),n=s().filter(t,(e=>s().includes(s().map(o,"link"),e.url)));this.setState({errorDashboards:!1,availableDashboards:t,selectedDashboards:n,loadingDashboards:!1,errorApiKey:!1,errorAppKey:!1})})).catch((e=>{pm.logger.error("Monitoring Tab Edit Form ~ Error occurred while listing dashboards",e,{context:P}),this.setState({errorDashboards:!0,loadingDashboards:!1,errorApiKey:!0,errorAppKey:!0,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],environments:_.default.getEmptyEnvironmentsList()})}))},this.state={nickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,errorNickname:"",dashboardGuids:[],selectedDashboards:[],availableDashboards:[],loadingDashboards:!1,errorDashboards:!1,environments:_.default.getEmptyEnvironmentsList(),region:"us1"},this.store=(0,p.resolveStoreInstance)(u.default),this.integrationsStore=(0,p.resolveStoreInstance)(d.default),this.toggle=this.toggle.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.listDashboardsWithIntegrationId=this.listDashboardsWithIntegrationId.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.client_category=f.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this),this.getInitialData=this.getInitialData.bind(this)}componentDidMount(){let{variables:e,origin:t,nickname:n}=this.props;this.setState({apiKey:e.api_key,appKey:e.app_key,region:"us"==e.region?"us1":"eu"==e.region?"eu1":e.region,apiId:e.postman_api_id,dashboardGuids:e.dashboard_guids,environments:s().map(e.environments,(e=>({...e,id:A().v4()}))),errorApiKey:!1,errorAppKey:!1,nickname:n,origin:t},(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}getInitialData(){const{variables:e,name:t,rule:n}=this.props.controller.integrationData;return{name:t,rule:n,variables:s().pick(e,["api_key","app_key","region","environments","dashboard_guids"])}}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],loadingDashboards:!1,errorDashboards:!1,environments:_.default.getEmptyEnvironmentsList()}}))}removeEnvironmentSelector(e){this.setState((t=>{let{environments:n}=t;return s()(n).splice(e,1).value(),{environments:n}}))}onDashboardSelect(e){if(!s().isArray(e))return;let t=s().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e,dashboardGuids:t})}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1,dashboardGuids:[],environments:_.default.getEmptyEnvironmentsList()};s().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)})):this.setState((n=>n.apiKey!==e.trim()?t:{apiKey:e.trim(),errorApiKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1,dashboardGuids:[],environments:_.default.getEmptyEnvironmentsList()};s().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)})):this.setState((n=>n.appKey!==e.trim()?t:{appKey:e.trim(),errorAppKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{apiKey:e,appKey:t,region:n,errorNickname:i,environments:r,loadingDashboards:o,selectedDashboards:c,availableDashboards:d,dashboardGuids:p,errorDashboards:u,nickname:h,errorApiKey:S,errorAppKey:E}=this.state,{rule:D,apiId:P,apiVersionId:T,integrationId:O,variables:M}=this.props,x=_.default.areEnvironmentsValid(r);let N={name:h,rule:D,api_id:P,entity:"apiversion",executor:T,variables:{...e?{api_key:e}:{},...t?{app_key:t}:{},region:n,dashboard_guids:p,environments:s().map(r,(e=>({name:e.name,services:e.services})))}};return a.createElement("div",null,a.createElement(g.NicknameFieldSegment,{id:"datadog-nickname",value:h,error:i,onBlur:()=>{this.setState({nickname:h.trim(),errorNickname:s().isEmpty(h.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),a.createElement(l.default,{direction:"column",gap:"spacing-l",padding:{paddingTop:"spacing-l"}},a.createElement(w.default,{mode:f.EDIT_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:S?"error":null,apiKeyValidationMessage:S?"Invalid API Key or APP key":null,handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value,errorAppKey:!1})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:E?"error":null,appKeyValidationMessage:E?"Invalid API Key or APP key":null,region:n,handleOnRegionChange:this.onRegionSelectorChange}),a.createElement(j.default,{mode:f.EDIT_MODE,apiKey:e,appKey:t,integrationId:O,selectedDashboards:c,availableDashboards:d,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:o,errorDashboards:u,environments:r,region:n,rule:D,onSelectEnvironmentServices:(e,t,n)=>{this.setState((i=>(i.environments[n]={id:s().get(i.environments[n],"id"),name:e,services:t},i)))},removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{this.setState((e=>(e.environments.push({name:"",services:[],id:A().v4()}),e)))},isAddEnvironmentButtonDisabled:!x})),a.createElement(m.default,{type:"primary",disabled:s().isEmpty(h.trim())||S||E||!x||i||o||!(0,C.isFormUpdated)(this.getInitialData(),N),payload:N,store:this.store,rule:D,client_category:this.client_category,route:b.V10_API_EDIT_APM_INTEGRATION_URL,integrationId:O,redirect:()=>{y.default.transitionTo(b.V10_API_APM_DATADOG_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:P,integrationId:O})}},"Update"),a.createElement("div",{className:"integrations-add-actions__button--container"},a.createElement(v.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{I.default.closeByRoute(b.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:P,integrationId:O})}},"Cancel")))}})||i,O=(0,c.observer)(r=class extends a.Component{render(){let{rule:e}=this.props;return e===f.DATADOG_APM_CLASS_ID?a.createElement(T,this.props):e===f.DATADOG_MONITOR_CLASS_ID?a.createElement(S.default,this.props):void 0}})||r},"./integrations/monitoring/edit/MonitoringEdit.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("./js/stores/SyncStatusStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),c=n("./integrations/monitoring/edit/index.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=n("./js/components/base/LoadingIndicator.js"),g=n("./integrations/components/error-states/ErrorIntegrations.js"),m=n("./js/services/NavigationService.js"),h=n("./appsdk/workbench/TabService.js"),b=n("./integrations/navigation/constants.js"),f=n("./api-dev/constants/APISubViews.js"),v=n("./integrations/monitoring/constants.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),I=n("./integrations/components/error-states/IntegrationNotSupported.js"),S=n("./integrations/monitoring/customComponents.js"),E=n("./integrations/constants/integrationsConstants.ts"),A=n("./node_modules/lodash/lodash.js");let _=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",variables:{},integrationData:{},selectedService:"",apiVersion:A.get(this.props,"controller.version")},this.store=(0,a.resolveStoreInstance)(l.default),this.fetchIntegrationDetails=this.fetchIntegrationDetails.bind(this),this.handleTabSwitch=this.handleTabSwitch.bind(this)}componentDidMount(){this.setState({selectedService:this.store.selectedService},(()=>{this.fetchIntegrationDetails()}))}fetchIntegrationDetails(){const e=this.store.getSelectedIntegration();this.setState({loading:!0},(async()=>{await(0,a.resolveStoreInstance)(s.default).onSyncAvailable({timeout:8e3});const t=this.state.selectedService;A.get(S.serviceBasedCustomComponents,[t,"useLegacyDataFormat"],!1)?p.default.getIntegrationData(e).then((t=>{if(200===t.status){const n=A.get(t.body,"data.entity"),i=this.state.apiVersion,r=A.get(t.body,"data.executor"),o={selectedIntegrationId:e,executor:r,variables:A.get(t.body,"data.variables"),rule:A.get(t.body,"data.rule"),nickname:A.get(t.body,"data.name")};i||n!==E.INTEGRATION_API_VERSION_ENTITY_TYPE||(o.apiVersion=r,this.props.controller.setAPIVersion(r)),this.setState(o,(()=>{this.props.controller.setIntegrationData({...A.get(t.body,"data"),serviceId:this.store.selectedService}),this.setState({loading:!1})}))}else this.setState({error:!0,loading:!1,errorDetails:t.body})})).catch((e=>{this.setState({loading:!1,error:!0,errorDetails:e})})):y.default.fetchIntegrationInstanceDetails(e).then((e=>{if(200===e.status){const t=A.get(e,"body.data"),n=A.get(t,"inputs"),i=A.head(A.filter(n,{type:E.INTEGRATION_INSTANCE_INPUT_ENTITY_TYPES.APIVERSION})),r=A.get(i,"value"),o={loading:!1,integrationData:t};r&&!this.state.apiVersion&&(o.apiVersion=r,this.props.controller.setAPIVersion(r)),this.setState(o,(()=>{this.props.controller.setIntegrationData(t)}))}else this.setState({error:!0,loading:!1,errorDetails:A.get(e,"body")})})).catch((e=>{pm.logger.error("MonitoringEdit ~ Unable to fetch integration data",e),this.setState({loading:!1,error:!0,errorDetails:e})}))}))}handleTabSwitch(){const{selectedIntegrationId:e,apiVersion:t}=this.state;h.default.closeByRoute(b.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:this.props.controller.apiId,integrationId:e}),m.default.transitionTo("build.apiVersion",{apiId:A.get(this.props,"controller.apiId",void 0),versionId:t},{tab:f.MONITORING})}render(){const{variables:e,selectedService:t,selectedIntegrationId:n,nickname:i,rule:o,apiVersion:s}=this.state,a=A.has(S.serviceBasedCustomComponents,[t,"customEditComponent"]),l=A.get(this.props,"controller.apiId"),p=s;if(!a)return r.createElement(I.default,{apiId:l,apiVersionId:p,tab:f.MONITORING});if(this.state.error){let e={...this.state.errorDetails};return pm.logger.error("Error occurred while loading page",this.state.errorDetails),e&&"instanceNotFoundError"==A.get(e,"error.name")&&(pm.toasts.error("The integration you are looking for does not exist!"),this.handleTabSwitch()),r.createElement("div",{className:"observability-error"},r.createElement(g.default,null))}return this.state.loading?r.createElement("div",{className:"integrations-page-container"},r.createElement(u.default,null)):r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integrations-edit"},r.createElement("div",{className:"integrations-edit-card"},r.createElement(d.default,{type:"h1",text:"Edit Integration"}),r.createElement(c.default,{integrationId:n,nickname:i,apiId:l,apiVersionId:p,variables:e,rule:o,origin:this.props.controller.origin,controller:this.props.controller,service:t,additionalContext:this.props.controller.additionalContext,integrationData:this.state.integrationData,source:v.EDIT_SOURCE}))))}})||i},"./integrations/monitoring/edit/NewRelic.js":function(e,t,n){n.r(t),n.d(t,{NewRelicAPM:function(){return R},default:function(){return k}});var i,r,o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./integrations/components/base/EditIntegration.js"),p=n("./integrations/monitoring/services/index.js"),u=n("./integrations/monitoring/constants.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/utils.js"),h=n("./js/components/base/Buttons.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),E=n("./js/services/NavigationService.js"),A=n("./appsdk/workbench/TabService.js"),_=n("./api-dev/constants/APISubViews.js"),w=n("./integrations/navigation/constants.js"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js"),D=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),P=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),T=n("./js/stores/CurrentUserStore.js"),O=n("./integrations/services/AuthenticationInstanceService.ts"),M=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),x=n("./node_modules/lodash/lodash.js");const N=pm.logger.getContext("NewRelicEdit","integrations");let R=(0,s.observer)(i=class extends o.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=e=>{const{rule:t}=this.props,{dashboardGuids:n}=this.state;this.setState({loadingDashboards:!0,errorDashboards:!1}),p.default[t].listDashboardsWithIntegrationId(e).then((e=>{let t=x.map(x.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),i=x.map(t,(e=>{if(x.includes(n,e.value))return e}));i=x.compact(i),this.setState({availableDashboards:t,selectedDashboard:i,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))},this.listServiesWithIntegrationId=e=>{const{rule:t}=this.props,{serviceGuids:n}=this.state;this.setState({loadingServices:!0,errorServices:!1}),p.default[t].listSevicesWithIntegrationId(e).then((e=>{let t=x.map(x.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),i=x.map(t,(e=>{if(x.includes(n,e.value))return e}));i=x.compact(i),this.setState({availableServices:t,selectedService:i,loadingServices:!1})})).catch((e=>{var t,n;this.setState({orphaned:403===(null===(t=e.error)||void 0===t?void 0:t.statusCode)&&"newRelicError"===(null===(n=e.error)||void 0===n?void 0:n.name),errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))},this.state={nickname:"",apiKey:"",errorNickname:"",errorApiKey:"",monitor:"",region:u.NEW_RELIC_REGIONS.US,isUsingApiKeyInput:!0,loadingAuthenticationInstances:!0,authenticationInstances:[],addNewRelicToTeam:!1,installedAppFeatureFlag:!1,orphaned:!1,authToBeUsed:""},this.store=(0,a.resolveStoreInstance)(l.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.client_category=u.API_MONITORING,this.getInitialState=this.getInitialState.bind(this),this.changeAuthenticationCallback=this.changeAuthenticationCallback.bind(this)}componentDidMount(){const{origin:e,variables:t}=this.props,n=(0,u.isFeatureFlagEnabled)(u.NEW_RELIC_APM_CLASS_ID);this.setState({...this.getInitialState(),isUsingApiKeyInput:!t.auth,installedAppFeatureFlag:n,origin:e},(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId),this.listServiesWithIntegrationId(this.props.integrationId),n&&this.fetchAuthenticationInstance()}))}fetchAuthenticationInstance(){const e=(0,a.resolveStoreInstance)(T.default);this.setState({loadingAuthenticationInstances:!0}),O.default.listAuthenticationInstances({scope:[{type:u.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[u.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[u.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(x.isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:N}),this.setState({loadingAuthenticationInstances:!1});if(x.isEmpty(e.data))return this.setState({authenticationInstances:[],loadingAuthenticationInstances:!1});const t=x.head(e.data);M.default.fetchUserInfo(t.createdBy,((n,i)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=x.get(i,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,loadingAuthenticationInstances:!1}))))})).catch((e=>(pm.logger.error("APIBuilder-EditNewRelic~Error loading authentication instances!",e,{context:N}),this.setState({loadingAuthenticationInstances:!1}))))}getInitialState(){const{variables:e,nickname:t}=this.props;return{apiKey:e.api_key,region:e.region?e.region:u.NEW_RELIC_REGIONS.US,apiId:e.postman_api_id,serviceGuids:e.service_guids,dashboardGuids:e.dashboard_guids,nickname:t,addNewRelicToTeam:!1,authToBeUsed:e.auth}}toggle(e){this.setState((t=>({[e]:!t[e]})))}onServiceSelect(e){if(!x.isArray(e))return;let t=x.map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!x.isArray(e))return;let t=x.map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:x.isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}listServices(){const{rule:e}=this.props,{apiKey:t,region:n,serviceGuids:i,isUsingApiKeyInput:r,authenticationInstances:o}=this.state,s={rule:e,type:"listServices"};r?(s.api_key=t,s.region=n):s.serviceAuth=x.head(o).id,this.setState({loadingServices:!0,errorServices:!1}),p.default[e].listServices(s).then((e=>{const t=x.map(x.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));let n=x.map(t,(e=>{if(x.includes(i,e.value))return e}));n=x.compact(n),this.setState({availableServices:t,selectedService:n,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))}listDashboards(){const{rule:e}=this.props,{apiKey:t,region:n,dashboardGuids:i,isUsingApiKeyInput:r,authenticationInstances:o}=this.state,s={rule:e,type:"listDashboards"};r?(s.api_key=t,s.region=n):s.serviceAuth=x.head(o).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),p.default[e].listServices(s).then((e=>{let t=x.map(x.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),n=x.map(t,(e=>{if(x.includes(i,e.value))return e}));n=x.compact(n),this.setState({availableDashboards:t,selectedDashboard:n,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,authToBeUsed:null})}changeAuthenticationCallback(){const{authenticationInstances:e}=this.state;this.setState({orphaned:!1,authToBeUsed:x.head(e).id},(()=>{this.listServices(),this.listDashboards()}))}render(){const{apiKey:e,region:t,errorApiKey:n,errorNickname:i,availableServices:r,selectedService:s,loadingServices:a,loadingDashboards:l,selectedDashboard:p,availableDashboards:j,serviceGuids:T,dashboardGuids:O,errorServices:M,errorDashboards:N,origin:R,nickname:k,orphaned:L,authToBeUsed:F,isUsingApiKeyInput:V,authenticationInstances:U,loadingAuthenticationInstances:H,addNewRelicToTeam:B,installedAppFeatureFlag:K}=this.state,{rule:z,apiId:G,apiVersionId:W,integrationId:q,variables:$}=this.props,J=!H&&x.isEmpty(U)&&L,Y=K&&!H&&x.isEmpty(U),Q=!x.isEmpty(U)&&F!==x.head(U).id,X=e||F;let Z={name:k,rule:z,api_id:G,entity:"apiversion",executor:W,variables:{...e&&V?{api_key:e}:{},...V?{region:t,auth:""}:{auth:F},postman_api_id:G,service_guids:T,dashboard_guids:O}};return o.createElement("div",null,o.createElement(c.NicknameFieldSegment,{id:"new-relic-nickname",value:k,error:i,onBlur:()=>{this.setState({nickname:k.trim(),errorNickname:x.isEmpty(k.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),V?o.createElement(c.SensitiveFieldSegment,{title:o.createElement(b.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:o.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):o.createElement(o.Fragment,null,o.createElement(P.default,{connectedAccount:x.head(U),isLoading:H,isUsingPersonalCredentials:V,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+x.get(x.head(U),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account",orphaned:J,reauthenticateWithAnotherAccount:Q,primaryChangeAuthenticationText:"Connected New Relic account is changed by "+x.get(x.head(U),"createdByDetails.name","your team member"),changeAuthenticationText:"Setup services using this authenticated account",changeAuthenticationCallback:this.changeAuthenticationCallback}),Q?o.createElement(c.SensitiveFieldSegment,{title:o.createElement(b.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:o.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):null),o.createElement(D.MultiSelectWrapper,null,o.createElement(f.default,{menuMaxHeight:"36vh",value:s,options:r,placeholder:"Select New Relic Services",label:o.createElement(b.default,{text:"Services",type:"secondary",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:M&&"Unable to load services",emptyStateMessage:"No services found"})),o.createElement(D.MultiSelectWrapper,null,o.createElement(f.default,{menuMaxHeight:"24vh",value:p,options:j,placeholder:"Select Dashboards",label:o.createElement(b.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:this.onDashboardSelect,isLoading:l,error:N&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"})),V||Q?o.createElement(o.Fragment,null,o.createElement(D.RadioButtonDiv,null,o.createElement(b.default,{text:"New Relic region",type:"primary"}),o.createElement(v.default,{type:"para"},"This helps us know what New Relic region to use"),o.createElement(y.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},o.createElement(I.default,{label:"US (.com)",value:"us"}),o.createElement(I.default,{label:"EU (.eu)",value:"eu"}))),Y?o.createElement("div",null,o.createElement(S.default,{isChecked:B,label:u.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:u.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!B})}})):null):null,o.createElement(d.default,{type:"primary",disabled:x.isEmpty(k.trim())||!X||x.isEmpty(T)||!(0,C.isFormUpdated)(this.getInitialState(),this.state),payload:Z,generatePayload:B?m.default.createAndPopulateNewRelicAuthenticationInstance:null,store:this.store,rule:z,client_category:this.client_category,redirect:()=>{R===u.SERVICES_CONTAINER?E.default.transitionTo("build.apiVersion",{apiId:G,versionId:W},{tab:_.MONITORING}):E.default.transitionTo(w.V10_API_APM_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:G,integrationId:q})},route:w.V10_API_EDIT_APM_INTEGRATION_URL,integrationId:q},"Update"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{A.default.closeByRoute(w.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:G,integrationId:q})}},"Cancel")))}})||i,k=(0,s.observer)(r=class extends o.Component{render(){let{rule:e}=this.props;return e===u.NEW_RELIC_APM_CLASS_ID?o.createElement(R,this.props):e===u.NEW_RELIC_MONITOR_CLASS_ID?o.createElement(j.default,this.props):void 0}})||r},"./integrations/monitoring/edit/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),o=n("./appsdk/workbench/TabService.js"),s=n("./integrations/navigation/constants.js"),a=n("./integrations/monitoring/constants.js"),l=n("./integrations/monitoring/customComponents.js"),c=n("./integrations/components/base/IntegrationEditDataFormatWrapper.js"),d=n("./node_modules/lodash/lodash.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}let u;function g(e,t){o.default.closeByRoute(s.V10_API_EDIT_APM_INTEGRATION_URL,{integrationId:`${e}`,apiId:u.apiId}),"cancel"!==t&&pm.windowEvents.emit(`${a.API_MONITORING}-integration-edited`,{apiId:u.apiId,apiVersionId:u.version})}function m(e){const{service:t,source:n}=e,o=d.get(l.serviceBasedCustomComponents,[t,"customEditComponent"]);return u=e.controller,o?d.get(l.serviceBasedCustomComponents,[t,"useLegacyDataFormat"],!1)?i.createElement(o,p({},e,{controller:u,integrationFormActions:g,selectedWorkspace:(0,r.toJS)(u.currentWorkspace),showDisabledApiVersionSelector:!1,source:n})):i.createElement(c.IntegrationEditDataFormatWrapper,p({},e,{FormComponent:o,workspaceId:d.get((0,r.toJS)(u.currentWorkspace),"value"),postEditAction:g})):i.createElement("div",null)}},"./integrations/monitoring/sentry/DetailedView.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var i,r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),s=n("./integrations/components/api-builder/DetailedViewContainer.js"),a=n("./integrations/monitoring/sentry/components/IntegrationActionsMenu.js"),l=n("./integrations/monitoring/sentry/components/RefreshIssuesButton.js"),c=n("./integrations/monitoring/sentry/components/IssueFilters.js"),d=n("./integrations/monitoring/sentry/components/ProjectName.js"),p=n("./integrations/monitoring/sentry/components/IssuesTable.js"),u=n("./integrations/monitoring/sentry/constants.js"),g=n("./appsdk/workbench/TabService.js"),m=n("./js/services/NavigationService.js"),h=n("./api-dev/constants/APISubViews.js"),b=n("./integrations/navigation/constants.js"),f=n("./js/modules/services/AnalyticsService.js"),v=n("./node_modules/lodash/lodash.js");let y=(0,r.observer)(i=class extends o.Component{constructor(e){super(e),this.onEnvironmentChange=e=>{const t=v.get(e,"value","");this.setState({selectedEnvironment:t},(()=>{f.default.addEventV2({category:u.ANALYTICS_EVENT_CATEGORY,action:"update-environment",value:t,label:u.SOURCE.DETAILD_VIEW})}))},this.onDurationChange=e=>{const t=v.get(e,"value","");this.setState({selectedDuration:t},(()=>{f.default.addEventV2({category:u.ANALYTICS_EVENT_CATEGORY,action:"update-duration",value:t,label:u.SOURCE.DETAILD_VIEW})}))},this.state={selectedEnvironment:u.ALL_ENVIRONEMENT_OPTION_VALUE,selectedDuration:v.get(v.nth(u.DURATION_OPTIONS,u.DEFAULT_DURATION_INDEX),"value")},this.onEnvironmentChange=this.onEnvironmentChange.bind(this),this.onDurationChange=this.onDurationChange.bind(this),this.issuesTableRef=o.createRef()}render(){const{selectedDuration:e,selectedEnvironment:t}=this.state,{apiId:n,versionId:i,integrationId:r}=this.props.controller;return o.createElement(s.default,{titleHeading:"Sentry",titleSubheadingComponent:o.createElement(d.default,{integrationId:r}),titleRightSideComponent:o.createElement(a.default,{integrationId:r,apiId:n,apiVersionId:i,menuButtonSize:"large"}),subtitleRightSideComponent:o.createElement(l.default,{onClick:()=>{f.default.addEventV2({category:u.ANALYTICS_EVENT_CATEGORY,action:"refresh-issues",label:u.SOURCE.DETAILD_VIEW}),v.invoke(this.issuesTableRef,["current","refreshIssues"])}}),subtitleLeftSideComponent:o.createElement(c.default,{integrationId:r,onEnvironmentChange:this.onEnvironmentChange,onDurationChange:this.onDurationChange}),bodyComponent:o.createElement(p.default,{ref:this.issuesTableRef,source:u.SOURCE.DETAILD_VIEW,integrationId:r,selectedEnvironment:t,selectedDuration:e}),onBackButtonClick:()=>{g.default.closeByRoute(b.V10_API_SENTRY_INTEGRATION_DASHBOARD_URL,{apiId:n,integrationId:`${r}`}),m.default.transitionTo("build.apiVersion",{apiId:n,versionId:i},{tab:h.MONITORING})}})}})||i},"./integrations/monitoring/sentry/DetailedViewController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var i=n("./appsdk/workbench/BaseWorkbenchController.js"),r=n("./node_modules/lodash/lodash.js");class o extends i.default{didCreate({routeParams:e,queryParams:t}){this.apiId=r.get(e,"apiId"),this.versionId=r.get(t,"version"),this.integrationId=r.get(e,"integrationId")}}},"./integrations/monitoring/sentry/components/IntegrationActionsMenu.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),u=n("./js/stores/SyncStatusStore.js"),g=n("./js/stores/StoreManager.js"),m=n("./integrations/monitoring/stores/APMIntegrationStore.js"),h=n("./js/services/NavigationService.js"),b=n("./integrations/api-observability/constants.ts"),f=n("./integrations/monitoring/constants.js"),v=n("./integrations/components/DeleteIntegrationModal.js"),y=n("./integrations/utils/CommonHelperMethods.ts"),I=n("./integrations/monitoring/sentry/constants.js"),S=n("./integrations/navigation/constants.js");class E extends i.Component{constructor(e){super(e),this.state={showDeleteModal:!1,canEditDeleteIntegration:!1},this.store=(0,g.resolveStoreInstance)(m.default)}componentDidMount(){const{apiId:e}=this.props;(0,g.resolveStoreInstance)(u.default).onSyncAvailable({timeout:I.SYNC_STATUS_TIMEOUT}).then((()=>(0,y.fetchApiPermissions)(e))).then((e=>{this.setState({canEditDeleteIntegration:e})}))}render(){const{showDeleteModal:e,canEditDeleteIntegration:t}=this.state,{apiId:n,apiVersionId:r,integrationId:o,menuButtonSize:u}=this.props,g=!t&&b.PERMISSION_ERROR;return i.createElement(s.default,{justifyContent:"center",alignItems:"center"},i.createElement(a.default,null,i.createElement(l.default,null,i.createElement(c.default,{icon:"icon-action-options-stroke",type:"tertiary",size:u||"small"})),i.createElement(d.default,null,i.createElement(p.default,{onClick:()=>{h.default.transitionTo(S.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:n,integrationId:o},{service:I.SERVICE_ID,rule:I.INTEGRATION_CLASS_NAME})},isDisabled:!t,tooltip:g},"Edit Integration"),i.createElement(p.default,{type:"destructive",onClick:()=>{this.setState({showDeleteModal:!0})},isDisabled:!t,tooltip:g},"Delete Integration"))),i.createElement(v.default,{size:"small",store:this.store,category:f.API_MONITORING,payload:{api_id:n,executor:r},isOpen:e,handleCloseModal:()=>{this.setState({showDeleteModal:!1})},integrationId:o,ruleId:I.INTEGRATION_CLASS_NAME}))}}E.propTypes={integrationId:o().string.isRequired,apiId:o().string.isRequired,apiVersionId:o().string.isRequired,menuButtonSize:o().string}},"./integrations/monitoring/sentry/components/IssueDetails.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var i,r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),p=n("./integrations/monitoring/sentry/service.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("./integrations/monitoring/sentry/components/StackTraceItem.js"),b=n("./integrations/monitoring/sentry/constants.js"),f=n("./appsdk/components/link/Link.js"),v=n("./node_modules/lodash/lodash.js");const y=(0,m.default)(s.default)`
    background-color: var(--background-color-secondary);
    padding: var(--spacing-m) var(--spacing-m) var(--spacing-m) calc(var(--spacing-xxl) + var(--spacing-s));
  `,I=(0,m.default)(s.default)`
    row-gap: var(--spacing-xs);
  `;let S=(0,r.observer)(i=class extends o.Component{constructor(e){super(e),this.state={issueDetails:{},loadingDetails:!0},this.fetchIssueDetails=this.fetchIssueDetails.bind(this)}fetchIssueDetails(){this.setState({loadingDetails:!0});const{integrationId:e,issueId:t,sentryEnvironment:n}=this.props,i={inputs:{issue_id:t,sentryEnvironment:n}};p.default.fetchIssueDetails(e,i).then((e=>{this.setState({loadingDetails:!1,issueDetails:e})})).catch((e=>{pm.logger.error("Sentry.IssueDetails ~ Error in fetching issue details",e),this.setState({loadingDetails:!1})}))}componentDidMount(){this.fetchIssueDetails()}render(){const{issueDetails:e,loadingDetails:t}=this.state,n=v.get(e,["metadata","type"],""),i=v.get(e,["metadata","value"],""),r=v.get(e,"entries",[]),p=v.first(v.filter(r,{type:"exception"})),u=v.get(p,"data.values[0].stacktrace.frames",[]);return t?o.createElement(y,{justifyContent:"center",alignItems:"center"},o.createElement(a.default,{size:"small",description:b.LOADING_ISSUE_DETAILS})):v.isEmpty(e)?o.createElement(y,{justifyContent:"center",alignItems:"end"},o.createElement(l.default,null,b.ERROR_MESSAGES.UNABLE_TO_FETCH_ISSUES_DETAILS," "),o.createElement(f.default,{onClick:e=>{e.preventDefault(),this.fetchIssueDetails()}},o.createElement(l.default,{type:"link-default"},o.createElement(l.default,null,"Try again")))):o.createElement(y,{direction:"column"},o.createElement(s.default,{direction:"row"},o.createElement(s.default,{justifyContent:"center",alignItems:"flex-start"},o.createElement(c.default,{type:"h5",text:"Tags: "})),o.createElement(I,{justifyContent:"flex-start",alignItems:"center",wrap:"wrap",width:"100%"},v.map(e.tags,(e=>o.createElement(d.default,{type:"neutral",text:`${v.lowerCase(e.key)}: ${e.value}`}))))),(n||i)&&o.createElement(o.Fragment,null,o.createElement("br",null),o.createElement(c.default,{type:"h5",text:n}),o.createElement(l.default,null,i)),!v.isEmpty(u)&&o.createElement(o.Fragment,null,o.createElement("br",null),v.map(u,(e=>o.createElement(h.default,{traceFrameData:e})))),o.createElement("br",null))}})||i;S.propTypes={integrationId:g().string.isRequired,issueId:g().string.isRequired,sentryEnvironment:g().string}},"./integrations/monitoring/sentry/components/IssueFilters.js":function(e,t,n){n.r(t);var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),p=n("./integrations/monitoring/sentry/service.js"),u=n("./integrations/monitoring/sentry/constants.js"),g=n("./node_modules/lodash/lodash.js");const m=(0,s.default)(a.default)`
    & .aether-dropdown__control {
      border: none;
    }
    & .aether-dropdown__control--is-focused, &:hover {
      border: none;
      box-shadow: none;
    }
  `;class h extends i.Component{constructor(e){super(e),this.handleEnvironmentChange=e=>{this.setState({selectedEnvironment:e},(()=>{this.props.onEnvironmentChange(e)}))},this.handleDurationChange=e=>{this.setState({selectedDuration:e},(()=>{this.props.onDurationChange(e)}))},this.state={environments:[],selectedDuration:g.nth(u.DURATION_OPTIONS,u.DEFAULT_DURATION_INDEX),selectedEnvironment:g.first(u.ENVIRONMENT_DEFAULT_OPTION),loadingEnvironments:!0},this.addToast=this.props.addToast,this.handleEnvironmentChange=this.handleEnvironmentChange.bind(this),this.handleDurationChange=this.handleDurationChange.bind(this)}componentDidMount(){const{integrationId:e}=this.props;p.default.fetchEnvironments(e).then((e=>{const t=g.map(e,(e=>({value:e.value,label:e.name})))||[];this.setState({loadingEnvironments:!1,environments:[...u.ENVIRONMENT_DEFAULT_OPTION,...t]})})).catch((e=>{pm.logger.error("sentry.IssueFilters ~ Error fetching environments",e),this.addToast({title:u.ENVIROMENT_LOADING_FAILED_TOAST.title,status:"error",description:u.ENVIROMENT_LOADING_FAILED_TOAST.description}),this.setState({loadingEnvironments:!1})}))}render(){const{loadingEnvironments:e,environments:t,selectedEnvironment:n,selectedDuration:r}=this.state;return i.createElement(l.default,{direction:"row"},i.createElement(l.default,{justifyContent:"center",alignItems:"center"},i.createElement(c.default,{color:"content-color-secondary"},"Environments:")),i.createElement(m,{triggerWidth:"auto",menuWidth:"auto",isClearable:!1,isLoading:e,onChange:this.handleEnvironmentChange,placeholder:"Select Environment",value:n,options:t}),i.createElement(l.default,{justifyContent:"center",alignItems:"center"},i.createElement(c.default,{color:"content-color-secondary"},"Duration:")),i.createElement(m,{triggerWidth:"auto",menuWidth:"auto",isClearable:!1,options:u.DURATION_OPTIONS,onChange:this.handleDurationChange,value:r,placeholder:"Select duration"}))}}h.propTypes={onEnvironmentChange:o().func.isRequired,onDurationChange:o().func.isRequired,integrationId:o().string.isRequired},t.default=(0,d.default)(h)},"./integrations/monitoring/sentry/components/IssuesTable.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/TestPass.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),h=n("./integrations/utils/CommonHelperMethods.ts"),b=n("./integrations/monitoring/sentry/constants.js"),f=n("./integrations/monitoring/sentry/service.js"),v=n("./integrations/monitoring/sentry/components/IssueDetails.js"),y=n("./js/external-navigation/ExternalNavigationService.js"),I=n("./js/modules/services/AnalyticsService.js"),S=n("./node_modules/lodash/lodash.js");const E=s.default.div`
    display: flex;
    aligh-items: center;
    width: 100%;
  `,A=s.default.div`
    margin: var(--spacing-m);
    overflow:hidden;
  `;class _ extends i.Component{constructor(e){super(e),this.state={issuesList:[],loadingIssues:!0,nextCursor:"",errorFetchingIssues:!1},this.refreshIssues=this.refreshIssues.bind(this),this.issueRowSubComponent=this.issueRowSubComponent.bind(this),this.getEmptyTableComponent=this.getEmptyTableComponent.bind(this),this.getSentryTableColumns=this.getSentryTableColumns.bind(this)}componentDidMount(){this.refreshIssues()}componentDidUpdate(e){const{selectedEnvironment:t,selectedDuration:n}=this.props;e.selectedEnvironment===t&&e.selectedDuration===n||this.refreshIssues()}issueRowSubComponent(e){const{integrationId:t,selectedEnvironment:n}=this.props;return i.createElement(v.default,{integrationId:t,issueId:e.id,sentryEnvironment:n})}getSentryTableColumns(){const{source:e}=this.props;return[{Header:"Issues",accessor:e=>[S.get(e,"title"),S.get(e,"permalink")],Cell:({value:t})=>{const[n,r]=t;return i.createElement(E,{onClick:t=>{t.preventDefault(),I.default.addEventV2({category:b.ANALYTICS_EVENT_CATEGORY,action:"open-issue-on-sentry",label:e}),(0,y.openExternalLink)(r,"_blank")}},i.createElement(a.default,{type:"link-default",isExternal:!0,isTruncated:!0},n))}},{Header:"Level",accessor:"level",Cell:({value:e})=>(e||(e="N/A"),i.createElement(l.default,{alignItems:"center"},i.createElement(c.default,{status:S.get(b.LEVEL_TO_BADGE_STATUS_MAPPING,e,b.LEVEL_TO_BADGE_STATUS_MAPPING.default),text:e}))),cellWidth:"100px"},{Header:"Handled",accessor:"isUnhandled",Cell:({value:e})=>{const t=e?"No":"Yes";return i.createElement(l.default,{alignItems:"center"},i.createElement(c.default,{status:"neutral",text:t}))},cellWidth:"90px"},{Header:"First Seen",accessor:"firstSeen",Cell:e=>i.createElement(l.default,{alignItems:"center"},i.createElement(a.default,{isTruncated:!0},(0,h.getRelativeTime)(e.value))),cellWidth:"120px"},{Header:"Last Seen",accessor:"lastSeen",Cell:e=>i.createElement(l.default,{alignItems:"center"},i.createElement(a.default,{isTruncated:!0},(0,h.getRelativeTime)(e.value))),cellWidth:"120px"},{Header:"Events",accessor:"count",Cell:e=>i.createElement(l.default,{alignItems:"center"},i.createElement(a.default,{isTruncated:!0},S.toString(e.value))),cellWidth:"80px"},{Header:"Users",accessor:"userCount",Cell:e=>i.createElement(l.default,{alignItems:"center"},i.createElement(a.default,{isTruncated:!0},S.toString(e.value))),cellWidth:"80px"}]}getEmptyTableComponent(){const{errorFetchingIssues:e}=this.state;return e?i.createElement(d.default,{description:"Unable to load issues.",secondaryAction:i.createElement(p.default,{type:"outline",text:"Try Again",onClick:this.refreshIssues})},i.createElement(u.default,null)):i.createElement(d.default,{title:"Things look good!",description:"We couldn’t find any issues.",secondaryAction:i.createElement(p.default,{type:"outline",text:"Refresh",onClick:this.refreshIssues})},i.createElement(g.default,null))}refreshIssues(e){const{integrationId:t,selectedEnvironment:n,selectedDuration:i,issuesLimit:r}=this.props,{cursor:o}=this.state;e?this.setState({loadingIssues:!0}):this.setState({loadingIssues:!0,issuesList:[]}),f.default.fetchIssues(t,{inputs:{sentryEnvironment:n,sentryDuration:i,cursor:o,limit:r||b.SINGLE_API_CALL_ISSUE_LIMIT}}).then((t=>{const n=S.get(t,"issues",[]),i=S.get(t,"nextCursor");let r=[];r=e?[...this.state.issuesList,...n]:n,this.setState({loadingIssues:!1,errorFetchingIssues:!1,issuesList:r,cursor:i})})).catch((e=>{pm.logger.error("Sentry.IssuesTable ~ Error fetching issues",e),this.setState({loadingIssues:!1,errorFetchingIssues:!0})}))}render(){const{issuesList:e,loadingIssues:t,cursor:n}=this.state,{hideLoadmoreButton:r}=this.props;return i.createElement(A,null,i.createElement(m.default,{data:e,columns:this.getSentryTableColumns(),sorting:!0,rowExpanded:this.issueRowSubComponent,loader:{isLoading:t,showLoadMoreButton:!r&&n,onLoadMore:()=>{this.refreshIssues(!0)}},blankState:{isEmpty:S.isEmpty(e)&&!t,component:this.getEmptyTableComponent()}}))}}_.propTypes={integrationId:o().string.isRequired,selectedEnvironment:o().string,selectedDuration:o().string,hideLoadmoreButton:o().bool,source:o().string,issuesLimit:o().number}},"./integrations/monitoring/sentry/components/ProjectName.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("./integrations/monitoring/sentry/service.js"),d=n("./integrations/monitoring/sentry/constants.js"),p=n("./node_modules/lodash/lodash.js");class u extends i.Component{constructor(e){super(e),this.state={projectName:"",loadingProjectName:!0}}componentDidMount(){const{integrationId:e}=this.props;c.default.fetchProjectDetails(e).then((e=>{this.setState({loadingProjectName:!1,projectName:p.get(e,"name")})})).catch((e=>{pm.logger.error("Sentry.ProjectName ~ Error in fetching project details",e),this.setState({loadingProjectName:!1,errorIssues:e})}))}render(){const{projectName:e,loadingProjectName:t}=this.state;return i.createElement(i.Fragment,null,t?i.createElement(s.default,{size:"small",description:d.LOADING_PROJECT_NAME_MESSAGE}):i.createElement(a.default,{direction:"row"},i.createElement(l.default,{color:"content-color-secondary"}," Project:  ",e)))}}u.propTypes={integrationId:o().string.isRequired}},"./integrations/monitoring/sentry/components/RefreshIssuesButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js");class l extends i.Component{constructor(e){super(e)}render(){const{onClick:e}=this.props;return i.createElement(s.default,{onClick:e,icon:i.createElement(a.default,null),text:"Refresh",type:"tertiary",size:"medium"})}}l.propTypes={onClick:o().func.isRequired}},"./integrations/monitoring/sentry/components/StackTraceItem.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-subtract-stroke-small.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),p=n("./node_modules/lodash/lodash.js");const u=(0,s.default)(a.default)`
    border-radius: var(--border-radius-default);
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
  `,g=s.default.div`
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-strong);
    background-color: var(--background-color-primary);
    padding: var(--spacing-xs) var(--spacing-m);
  `,m=s.default.div`
    background-color: var(--background-color-primary);
  `,h=s.default.pre`
    font-size: var(--text-size-m);
    padding: var(--spacing-xs) var(--spacing-m);
    margin: var(--spacing-zero);
  `,b=s.default.pre`
    font-size: var(--text-size-m);
    padding: var(--spacing-xs) var(--spacing-m);
    margin: var(--spacing-zero) var(--spacing-zero) var(--spacing-zero) var(--spacing-xs) !important;
    overflow: hidden;
    text-overflow: ellipsis;
  `,f=(0,s.default)(a.default)`
    background-color: var(--background-color-info);
  `;class v extends i.Component{constructor(e){super(e),this.state={showDetails:!1},this.getTraceTitle=this.getTraceTitle.bind(this),this.getTitleIcon=this.getTitleIcon.bind(this)}getTitleIcon(){const{showDetails:e}=this.state;return e?i.createElement(c.default,null):i.createElement(d.default,null)}getTraceTitle(e){const{filename:t,absPath:n,lineNo:r}=e,o=p.get(e,"function");return i.createElement(a.default,{direction:"row"},i.createElement(l.default,null,n||t,o&&i.createElement(i.Fragment,null,i.createElement(l.default,{color:"content-color-secondary"}," in "),o),r&&i.createElement(i.Fragment,null,i.createElement(l.default,{color:"content-color-secondary"}," at line "),r)))}render(){const{showDetails:e}=this.state,{traceFrameData:t}=this.props,n=p.get(t,"lineNo"),r=p.get(t,"context",[]);return i.createElement(u,{direction:"column"},i.createElement(g,{onClick:()=>{this.setState({showDetails:!e})}},this.getTraceTitle(t),this.getTitleIcon()),e&&i.createElement(m,null,p.map(r,(e=>{const t=p.nth(e,0),r=p.nth(e,1),o=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(h,null,t)),i.createElement(b,null,r));return t===n?i.createElement(f,{direction:"row"},o):i.createElement(a.default,{direction:"row"},o)}))))}}v.propTypes={traceFrameData:o().object.isRequired}},"./integrations/monitoring/sentry/service.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./integrations/monitoring/sentry/constants.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),a=n("./node_modules/lodash/lodash.js");function l(e){return a.get(e,["inputs","sentryEnvironment"],"")===r.ALL_ENVIRONEMENT_OPTION_VALUE&&(e.inputs.sentryEnvironment=""),e}t.default={fetchIssues:(e,t)=>(t=l(t),new Promise(((n,o)=>{i.default.triggerIntegrationOnDemand(e,r.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUES,t).then((e=>e.status>=200&&e.status<300?n(a.get(e,"body",{})):o(e))).catch(o)}))),fetchIssueDetails:(e,t)=>(t=l(t),new Promise(((n,o)=>{i.default.triggerIntegrationOnDemand(e,r.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUE_DETAILS,t).then((e=>e.status>=200&&e.status<300?n(a.get(e,"body",{})):o(e))).catch(o)}))),fetchEnvironments:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,r.SENTRY_ONDEMAND_TRIGGERS.FETCH_ENVIRONMENTS,{}).then((e=>e.status>=200&&e.status<300?t(a.get(e,"body",[])):n(e))).catch(n)})),fetchProjectDetails:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,r.SENTRY_ONDEMAND_TRIGGERS.FETCH_PROJECT_DETAILS,{}).then((e=>e.status>=200&&e.status<300?t(a.get(e,"body",{})):n(e))).catch(n)})),fetchProjects:(e,t,n)=>{if(!t)return new Promise;const i=t.options,r=a.reduce(a.get(i,"inputs",[]),((t,n,i)=>(t[i]=a.get(e,n,""),t)),{});return new Promise(((e,l)=>{o.default.runServiceAction(i.service,i.serviceActionId,r,t.integrationClass,t.id,n||null).then((t=>{const n=a.get(t,"body",[]),r=a.get(i,"labelPath"),o=a.get(i,"valuePath"),l=(0,s.convertObjectListToOptions)(n,r,o);return e(l)})).catch((e=>(pm.logger.error("Sentry.service.fetchProjects ~ Error occurred while fetching projects",e),l(e))))}))}}},"./integrations/monitoring/services/DatadogService.js":function(e,t,n){n.r(t);var i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),a=n("./integrations/monitoring/constants.js"),l=n("./node_modules/async/dist/async.js"),c=n.n(l);function d(e,t,n,i){return new Promise(((o,l)=>{s.default.runServiceAction("datadog",n,e,a.DATADOG_APM_CLASS_ID,i,t).then((e=>{if(e.status&&200===e.status)return o(r().get(e,"body"));throw r().get(e,"body")})).catch((e=>l(e)))}))}function p(e,t,n,i){return new Promise(((o,l)=>{s.default.runServiceAction("datadog",n,e,a.DATADOG_APM_CLASS_ID,i,t).then((e=>{if(e.status&&200===e.status)return o(r().get(e,"body"));throw r().get(e,"body")})).catch((e=>l(e)))}))}t.default={listServices:e=>p(e,null),listDashboards:(e,t,n,i)=>d(e,t,n,i),listDashboardsWithIntegrationId:(e,t,n,i)=>d(e,t,n,i),listServicesWithIntegrationId:(e,t,n,i)=>p(e,t,n,i),authenticateApiKey:(e,t,n,i)=>d(e,t,n,i),fetchMetricsForLinkedServices:e=>{const t=Date.now()/1e3,n=t-1800;return o.default.triggerIntegrationOnDemand(e,"fetch_metrics_for_added_services",{inputs:{startTime:n,endTime:t}}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))},fetchGraphURLs:(e,t,n,i,s)=>{let a={};const l=(s,l,c)=>{o.default.triggerIntegrationOnDemand(e,l,{inputs:{timeFrame:t,service:n,environment:i}}).then((e=>{if(e.status&&200===e.status)return a[c]=r().get(e.body,"data"),s();throw e.body})).catch((e=>s(e)))};c().parallel([function(e){l(e,"fetch_apdex_graph_url","apdex_graphs")},function(e){l(e,"fetch_error_rate_graph_url","error_rate_graphs")},function(e){l(e,"fetch_latency_graph_url","latency_graphs")},function(e){l(e,"fetch_throughput_graph_url","throughput_graphs")}],(e=>e?s(e):s(null,a)))},fetchServiceMonitorsStatus:(e,t,n)=>o.default.triggerIntegrationOnDemand(e,"get_violations",{inputs:{service:t,environment:n}}).then((e=>{if(e&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/NewRelicService.js":function(e,t,n){n.r(t);var i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./node_modules/moment/moment.js"),s=n.n(o),a=n("./node_modules/async/dist/async.js"),l=n.n(a),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./integrations/monitoring/constants.js");t.default={listServices:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listDashboards:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchChartUrls:(e,t,n,i)=>{let o={};l().parallel([function(i){c.default.fetchActionDetails(e,{type:"fetchWebTransactionsChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.webTransactionsChartUrl=r().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchApdexScoreChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.apdexScoreChartUrl=r().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchErrorRateChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.errorRateChartUrl=r().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchThroughputChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return o.throughputChartUrl=r().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),i();throw e})).catch((e=>i(e)))}],(e=>e?i(e):i(null,o)))},fetchStatistics:(e,t,n,i)=>{let o={};l().parallel([function(n){c.default.fetchActionDetails(e,{type:"fetchDeployments",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=r().map(r().get(e.body,"data.data.actor.entity.deployments"),(e=>({...e,timestamp:s()(r().get(e,"timestamp")).format("MMM DD h:mm A")})));return o.deployments=t,n()}throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchViolationEvents",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=r().map(r().get(e.body,"data.data.actor.entities[0].recentAlertViolations"),(e=>({...e,openedAt:s()(r().get(e,"openedAt")).format("MMM DD h:mm A"),closedAt:r().get(e,"closedAt")?s()(r().get(e,"closedAt")).format("MMM DD h:mm A"):"-"})));return o.violationEvents=t,n()}throw e})).catch((e=>n(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchSlowestWebTransactions",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status){let t=r().map(r().get(e.body,"data.data.actor.entity.nrdbQuery.results"),(e=>({name:r().replace(e.name,"WebTransaction/Custom/",""),avg_time:`${r().round(e.avg_time,2)} ms`,error_rate:`${r().round(e.error_rate,1)}%`})));return o.slowestTransactions=t,i()}throw e})).catch((e=>i(e)))}],(e=>e?i(e):i(null,o)))},fetchMetricsForLinkedServices:e=>c.default.fetchActionDetails(e,{type:"fetchMetricsForLinkedServices"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchLinkedDashboards:e=>c.default.fetchActionDetails(e,{type:"fetchLinkedDashboards"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listSevicesWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_SERVICES,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(r().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),listDashboardsWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_DASHBOARDS,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(r().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),authenticateApiKey:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/index.js":function(e,t,n){n.r(t);var i=n("./integrations/monitoring/services/NewRelicService.js"),r=n("./integrations/monitoring/services/DatadogService.js");t.default={apm_new_relic:i.default,apm_datadog:r.default}},"./integrations/monitoring/stores/APMIntegrationStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var i,r,o,s,a,l,c,d,p,u,g,m,h,b,f,v,y,I,S,E,A,_,w,j,D,C,P,T,O,M,x,N=n("../../node_modules/mobx/lib/mobx.module.js"),R=n("./node_modules/lodash/lodash.js"),k=n.n(R),L=n("./js/stores/StoreManager.js"),F=n("./js/stores/SyncStatusStore.js"),V=n("./js/stores/IntegrationsStore.js"),U=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),H=n("./integrations/monitoring/stores/fallbackCategoryIntegrations.js"),B=n("./js/stores/BaseListStore.js"),K=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),z=n("./integrations/monitoring/constants.js"),G=n("./integrations/monitoring/services/NewRelicService.js"),W=n("./integrations/services/AuthenticationInstanceService.ts"),q=n("./integrations/utils/CommonHelperMethods.ts");function $(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function J(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Y="apiversion",Q=(0,q.getErrorContextObject)("APMIntegrationStore","integrations");let X=(r=J((i=class{constructor(e){this.id="",$(this,"availableAPMServices",r,this),$(this,"selectedAPMService",o,this),this.id=e.id,this.availableAPMServices=e.availableAPMServices||{},this.selectedAPMService=e.selectedAPMService||{},this.integrationsStore=(0,L.resolveStoreInstance)(V.default)}update(e){k().has(e,"id")&&(this.id=e.id),k().has(e,"availableAPMServices")&&(this.availableAPMServices=e.availableAPMServices),k().has(e,"selectedAPMService")&&(this.selectedAPMService=e.selectedAPMService)}setAvailableAPMServices(e,t){this.availableAPMServices[e]=t}getAvailableAPMServices(e){return(0,N.toJS)(this.availableAPMServices[e])}setSelectedAPMService(e,t){this.selectedAPMService[e]=t}getSelectedAPMService(e){return(0,N.toJS)(this.selectedAPMService[e])}}).prototype,"availableAPMServices",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=J(i.prototype,"selectedAPMService",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),J(i.prototype,"update",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"update"),i.prototype),J(i.prototype,"setAvailableAPMServices",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setAvailableAPMServices"),i.prototype),J(i.prototype,"setSelectedAPMService",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedAPMService"),i.prototype),J(i.prototype,"getSelectedAPMService",[N.action],Object.getOwnPropertyDescriptor(i.prototype,"getSelectedAPMService"),i.prototype),i),Z=(s=class extends B.default{constructor(){super(X),this.id="",$(this,"isHydrating",a,this),$(this,"availableIntegrations",l,this),$(this,"configuredIntegrations",c,this),$(this,"categoryIntegrations",d,this),$(this,"builds",p,this),$(this,"activeRule",u,this),$(this,"activeService",g,this),$(this,"errorAvailableIntegrations",m,this),$(this,"errorConfiguredIntegrations",h,this),$(this,"loadingAvailableIntegrations",b,this),$(this,"loadingConfiguredIntegrations",f,this),$(this,"availableAPMServices",v,this),$(this,"selectedAPMService",y,this),$(this,"selectedAPI",I,this),$(this,"selectedAPIVersion",S,this),$(this,"selectedService",E,this),$(this,"selectedServiceName",A,this),$(this,"selectedIntegration",_,this),$(this,"selectedRule",w,this),$(this,"clientCategory",j,this),$(this,"isAdding",D,this),$(this,"integrationInstance",C,this),$(this,"loadingIntegrationInstanceAndClass",P,this),$(this,"integrationClass",T,this),$(this,"authenticationInstances",O,this),$(this,"loadingAuthenticationInstances",M,this),$(this,"errorAuthenticationInstances",x,this),this.integrationsStore=(0,L.resolveStoreInstance)(V.default)}initializeApmIntegrationStore(e){return new Promise(((t,n)=>{(0,L.resolveStoreInstance)(F.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:i,category:r}=e;this.setClientCategory(r||z.API_MONITORING),this.setSelectedAPI(n),this.setSelectedAPIVersion(i),this.fetchConfiguredIntegrations(i,Y).then((()=>{this.fetchAvailableIntegrations(),t()}))})).catch((e=>{this.updateLoadingAvailableIntegrations(!1),n(e)})).finally((()=>{this.updateIsHydrating(!1)}))}))}initializeApmIntegrationStoreV2(e){return new Promise(((t,n)=>{(0,L.resolveStoreInstance)(F.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:i,category:r}=e;this.setClientCategory(r||z.API_MONITORING),this.setSelectedAPI(n),this.setSelectedAPIVersion(i),this.fetchConfiguredIntegrations(i,Y).then(t)})).catch(n).finally((()=>{this.updateIsHydrating(!1)}))}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setAvailableAPMServices(e){this.availableAPMServices[this.selectedAPIVersion]=e}setClientCategory(e){this.clientCategory=e}getAvailableAPMServices(){return(0,N.toJS)(this.availableAPMServices[this.selectedAPIVersion])}clearAvailableAPMServices(){this.availableAPMServices[this.selectedAPIVersion]=void 0}setSelectedAPMService(e){this.selectedAPMService[this.selectedAPIVersion]=e}getSelectedAPMService(){return(0,N.toJS)(this.selectedAPMService[this.selectedAPIVersion])}clearSelectedAPMService(){this.selectedAPMService[this.selectedAPIVersion]=void 0}setSelectedIntegration(e){this.selectedIntegration[this.clientCategory]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,Y)}getAvailableIntegrations(){return(0,N.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.clientCategory]}getSelectedAPI(){return this.selectedAPI}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){k().isEmpty(e)?this.categoryIntegrations=[...H.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,N.toJS)(this.configuredIntegrations[e||this.selectedAPIVersion])}getCategoryIntegrations(){return(0,N.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByClientCategory(){const e=[];k().forEach((0,N.toJS)(this.availableIntegrations),(t=>{const n={},i=t.integrations[t.id];k().forEach(i,((e,t)=>{e.client_categories.includes(this.clientCategory)&&(n[t]=e)})),k().isEmpty(n)||(t.integrations[t.id]={...n},e.push(t))})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),U.default.getAvailableIntegrations().then((e=>{const t=k().get(e,"body.services",[]);if(200!==e.status||k().isEmpty(t))throw e;this.updateAvailableIntegrations(k().map(t,((e,t)=>({id:t,...e})))),this.findIntegrationsByClientCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t){return this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),U.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,[this.clientCategory]).then((e=>{this.updateConfiguredIntegrations(e[this.clientCategory]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await K.default.getConfiguredIntegrationsForAnEntity(e,t,[z.API_PERFORMANCE_INTEGRATION]);let i=k().get(n,"body.data",[]),r=[];if(r=k().map(i,"class"),r.includes(z.NEW_RELIC_APM_CLASS_ID)&&r.includes(z.DATADOG_APM_CLASS_ID)){const e=r.indexOf(z.NEW_RELIC_APM_CLASS_ID),t=r.indexOf(z.DATADOG_APM_CLASS_ID);r.splice(e<t?t:e,1)}let o=[];if(!k().isEmpty(r)){const e=this.integrationsStore.getIntegrationClasses(),t=r[0];o=k().find(e,(e=>e.id===t))}if(r.includes(z.NEW_RELIC_APM_CLASS_ID)){const e=k().find(i,(e=>e.class===z.NEW_RELIC_APM_CLASS_ID)),t=await this.updateNewRelicInstance(e);i=t?[t]:[]}this.updateIntegrationClass([o],t),this.updateIntegrationInstance(i,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APMIntegrationStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}async updateNewRelicInstance(e){try{const t=await G.default.fetchMetricsForLinkedServices(e.id),n=k().map(k().get(t,"data.data.actor.entities"),(e=>e.name));e.services=n}catch(e){pm.logger.error("NewRelicService ~ error occurred while fetching metrics for linked services",e)}return e}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}setAuthenticationInstances(e){this.authenticationInstances=e}setErrorAuthenticationInstances(e){this.errorAuthenticationInstances=e}setLoadingAuthenticationInstances(e){this.loadingAuthenticationInstances=e}fetchAuthenticationInstances(e,t,n,i){pm.logger.info("APMIntegrationsStore~Initializing fetching auth instances: ",n),this.setLoadingAuthenticationInstances(!0),this.setErrorAuthenticationInstances(null),W.default.listAuthenticationInstances({scope:[{type:e,id:t}],authenticationClass:[n],service:[i]}).then((({body:e})=>{k().isNil(e.data)&&pm.logger.error("APMIntegrationsStore~fetchAuthenticationInstances: Error loading authentication instances! Received null response!",{body:e},Q),this.setAuthenticationInstances(e.data||[]),this.setLoadingAuthenticationInstances(!1)})).catch((e=>{pm.logger.error("APMIntegrationsStored~fetchAuthenticationInstances: Something went wrong while fetching authentication instances: ",e,Q),this.setLoadingAuthenticationInstances(!1),this.setErrorAuthenticationInstances(e)}))}},a=J(s.prototype,"isHydrating",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=J(s.prototype,"availableIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=J(s.prototype,"configuredIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=J(s.prototype,"categoryIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.fallbackCategoryIntegrations}}),p=J(s.prototype,"builds",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=J(s.prototype,"activeRule",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=J(s.prototype,"activeService",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=J(s.prototype,"errorAvailableIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=J(s.prototype,"errorConfiguredIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),b=J(s.prototype,"loadingAvailableIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=J(s.prototype,"loadingConfiguredIntegrations",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=J(s.prototype,"availableAPMServices",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),y=J(s.prototype,"selectedAPMService",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),I=J(s.prototype,"selectedAPI",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=J(s.prototype,"selectedAPIVersion",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=J(s.prototype,"selectedService",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=J(s.prototype,"selectedServiceName",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=J(s.prototype,"selectedIntegration",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=J(s.prototype,"selectedRule",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=J(s.prototype,"clientCategory",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.API_MONITORING}}),D=J(s.prototype,"isAdding",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=J(s.prototype,"integrationInstance",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),P=J(s.prototype,"loadingIntegrationInstanceAndClass",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T=J(s.prototype,"integrationClass",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),O=J(s.prototype,"authenticationInstances",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=J(s.prototype,"loadingAuthenticationInstances",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=J(s.prototype,"errorAuthenticationInstances",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J(s.prototype,"initializeApmIntegrationStore",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"initializeApmIntegrationStore"),s.prototype),J(s.prototype,"clearStore",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"clearStore"),s.prototype),J(s.prototype,"setAvailableAPMServices",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setAvailableAPMServices"),s.prototype),J(s.prototype,"setClientCategory",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setClientCategory"),s.prototype),J(s.prototype,"getAvailableAPMServices",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getAvailableAPMServices"),s.prototype),J(s.prototype,"clearAvailableAPMServices",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"clearAvailableAPMServices"),s.prototype),J(s.prototype,"setSelectedAPMService",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPMService"),s.prototype),J(s.prototype,"getSelectedAPMService",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPMService"),s.prototype),J(s.prototype,"clearSelectedAPMService",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"clearSelectedAPMService"),s.prototype),J(s.prototype,"setSelectedIntegration",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedIntegration"),s.prototype),J(s.prototype,"setActiveService",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveService"),s.prototype),J(s.prototype,"setSelectedServiceName",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedServiceName"),s.prototype),J(s.prototype,"setActiveRule",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveRule"),s.prototype),J(s.prototype,"setSelectedAPI",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPI"),s.prototype),J(s.prototype,"setSelectedAPIVersion",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPIVersion"),s.prototype),J(s.prototype,"setSelectedRule",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedRule"),s.prototype),J(s.prototype,"setSelectedService",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedService"),s.prototype),J(s.prototype,"updateLoadingAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingAvailableIntegrations"),s.prototype),J(s.prototype,"updateLoadingConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingConfiguredIntegrations"),s.prototype),J(s.prototype,"updateErrorAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorAvailableIntegrations"),s.prototype),J(s.prototype,"updateErrorConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorConfiguredIntegrations"),s.prototype),J(s.prototype,"updateAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateAvailableIntegrations"),s.prototype),J(s.prototype,"updateSelectedAPIVersion",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateSelectedAPIVersion"),s.prototype),J(s.prototype,"getAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getAvailableIntegrations"),s.prototype),J(s.prototype,"getSelectedIntegration",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedIntegration"),s.prototype),J(s.prototype,"getSelectedAPI",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPI"),s.prototype),J(s.prototype,"getSelectedAPIVersion",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPIVersion"),s.prototype),J(s.prototype,"updateConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateConfiguredIntegrations"),s.prototype),J(s.prototype,"updateCategoryIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateCategoryIntegrations"),s.prototype),J(s.prototype,"getConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getConfiguredIntegrations"),s.prototype),J(s.prototype,"getCategoryIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"getCategoryIntegrations"),s.prototype),J(s.prototype,"updateIsHydrating",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsHydrating"),s.prototype),J(s.prototype,"updateIsAdding",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsAdding"),s.prototype),J(s.prototype,"findIntegrationsByClientCategory",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"findIntegrationsByClientCategory"),s.prototype),J(s.prototype,"fetchAvailableIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchAvailableIntegrations"),s.prototype),J(s.prototype,"fetchConfiguredIntegrations",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchConfiguredIntegrations"),s.prototype),J(s.prototype,"fetchIntegrationInstance",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchIntegrationInstance"),s.prototype),J(s.prototype,"updateIntegrationInstance",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationInstance"),s.prototype),J(s.prototype,"updateIntegrationClass",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationClass"),s.prototype),J(s.prototype,"setLoadingIntegrationInstancesAndClass",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingIntegrationInstancesAndClass"),s.prototype),J(s.prototype,"resetPowerUpVariables",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"resetPowerUpVariables"),s.prototype),J(s.prototype,"setAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setAuthenticationInstances"),s.prototype),J(s.prototype,"setErrorAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setErrorAuthenticationInstances"),s.prototype),J(s.prototype,"setLoadingAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingAuthenticationInstances"),s.prototype),J(s.prototype,"fetchAuthenticationInstances",[N.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchAuthenticationInstances"),s.prototype),s)},"./integrations/monitoring/stores/MonitorIntegrationStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var i,r,o,s,a,l,c,d,p,u,g,m,h,b,f,v=n("../../node_modules/mobx/lib/mobx.module.js"),y=n("./node_modules/lodash/lodash.js"),I=n.n(y),S=n("./js/stores/StoreManager.js"),E=n("./js/stores/SyncStatusStore.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),_=n("./integrations/monitoring/stores/fallbackCategoryIntegrations.js"),w=n("./api-dev/services/APIDevService.js");function j(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function D(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const C=["notifications-monitor","analytics-monitor"],P=["notifications-monitor","analytics-monitor","apm_api-observability"],T=[],O="jobTemplate";let M=(r=D((i=class{constructor(){j(this,"isHydrating",r,this),j(this,"availableIntegrations",o,this),j(this,"configuredIntegrations",s,this),j(this,"populatedConfiguredIntegrations",a,this),j(this,"categoryIntegrations",l,this),j(this,"builds",c,this),j(this,"errorAvailableIntegrations",d,this),j(this,"errorConfiguredIntegrations",p,this),j(this,"loadingAvailableIntegrations",u,this),j(this,"loadingConfiguredIntegrations",g,this),j(this,"selectedAPI",m,this),j(this,"selectedAPIVersion",h,this),j(this,"category",b,this),j(this,"isAdding",f,this)}initializeMonitoringIntegrationStore(e){return new Promise(((t,n)=>{(0,S.resolveStoreInstance)(E.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:i}=e;this.setSelectedAPI(n),this.setSelectedAPIVersion(i),this.fetchAvailableIntegrations().then((()=>{this.fetchConfiguredIntegrations(i,O,P).then((()=>{t()}))}))})).catch((()=>{this.updateLoadingAvailableIntegrations(!1),n()})).finally((()=>{this.updateIsHydrating(!1)}))}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setAvailableIntegrations(e){this.availableIntegrations[this.selectedAPIVersion]=e}getAvailableIntegrations(){return(0,v.toJS)(this.availableIntegrations[this.selectedAPIVersion])}clearAvailableIntegrations(){this.availableIntegrations[this.selectedAPIVersion]=void 0}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateSelectedAPIVersion(e){return this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,O,P)}getSelectedAPI(){return this.selectedAPI}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e],this.populatedConfiguredIntegrations=!0}updateCategoryIntegrations(e){I().isEmpty(e)?this.categoryIntegrations=[..._.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,v.toJS)(this.configuredIntegrations[e||this.selectedAPIVersion])}getCategoryIntegrations(){return(0,v.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}filterAvailableIntegrations(){const e=[];I().forEach(this.getAvailableIntegrations(),(t=>{if(![T].includes(t.id)){const n={},i=t.integrations[t.id];I().forEach(i,((e,t)=>{I().isEmpty(I().intersection(e.client_categories,C))||(n[t]=e)})),I().isEmpty(n)||(t.integrations[t.id]={...n},e.push(t))}})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),new Promise((e=>A.default.getAvailableIntegrations().then((t=>{const n=I().get(t,"body.services",[]);if(200!==t.status||I().isEmpty(n))throw t;this.setAvailableIntegrations(I().map(n,((e,t)=>({id:t,...e})))),this.filterAvailableIntegrations(),this.updateLoadingAvailableIntegrations(!1),e()})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))))}fetchConfiguredIntegrations(e,t,n){return this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),new Promise(((e,i)=>{w.default.getRelations(this.selectedAPI,this.selectedAPIVersion,"monitor").then((r=>{if(r.monitor){let o=Object.values(r.monitor);Promise.all(I().map(o,(e=>A.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e.id,n,!0)))).then((e=>{let t=I()(e).map((e=>Object.values(e))).flatten().flatten().value();this.updateConfiguredIntegrations(t),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations"),i()})).finally((()=>{e()}))}else this.updateConfiguredIntegrations([]),e()}))}))}}).prototype,"isHydrating",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=D(i.prototype,"availableIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=D(i.prototype,"configuredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=D(i.prototype,"populatedConfiguredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=D(i.prototype,"categoryIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.fallbackCategoryIntegrations}}),c=D(i.prototype,"builds",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=D(i.prototype,"errorAvailableIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=D(i.prototype,"errorConfiguredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=D(i.prototype,"loadingAvailableIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=D(i.prototype,"loadingConfiguredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=D(i.prototype,"selectedAPI",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=D(i.prototype,"selectedAPIVersion",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=D(i.prototype,"category",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=D(i.prototype,"isAdding",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D(i.prototype,"initializeMonitoringIntegrationStore",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"initializeMonitoringIntegrationStore"),i.prototype),D(i.prototype,"clearStore",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"clearStore"),i.prototype),D(i.prototype,"setAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"setAvailableIntegrations"),i.prototype),D(i.prototype,"getAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"getAvailableIntegrations"),i.prototype),D(i.prototype,"clearAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"clearAvailableIntegrations"),i.prototype),D(i.prototype,"setSelectedAPI",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedAPI"),i.prototype),D(i.prototype,"setSelectedAPIVersion",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedAPIVersion"),i.prototype),D(i.prototype,"updateLoadingAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateLoadingAvailableIntegrations"),i.prototype),D(i.prototype,"updateLoadingConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateLoadingConfiguredIntegrations"),i.prototype),D(i.prototype,"updateErrorAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateErrorAvailableIntegrations"),i.prototype),D(i.prototype,"updateErrorConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateErrorConfiguredIntegrations"),i.prototype),D(i.prototype,"updateSelectedAPIVersion",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateSelectedAPIVersion"),i.prototype),D(i.prototype,"getSelectedAPI",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"getSelectedAPI"),i.prototype),D(i.prototype,"getSelectedAPIVersion",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"getSelectedAPIVersion"),i.prototype),D(i.prototype,"updateConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateConfiguredIntegrations"),i.prototype),D(i.prototype,"updateCategoryIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateCategoryIntegrations"),i.prototype),D(i.prototype,"getConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"getConfiguredIntegrations"),i.prototype),D(i.prototype,"getCategoryIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"getCategoryIntegrations"),i.prototype),D(i.prototype,"updateIsHydrating",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIsHydrating"),i.prototype),D(i.prototype,"updateIsAdding",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIsAdding"),i.prototype),D(i.prototype,"filterAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"filterAvailableIntegrations"),i.prototype),D(i.prototype,"fetchAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchAvailableIntegrations"),i.prototype),D(i.prototype,"fetchConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchConfiguredIntegrations"),i.prototype),i)},"./integrations/monitoring/stores/fallbackCategoryIntegrations.js":function(e,t,n){n.r(t),n.d(t,{fallbackCategoryIntegrations:function(){return i}});const i=[{id:"apm_new_relic",name:"New Relic",icon:"pm-icon-newrelic",description:"View New Relic metrics and statuses directly from Postman.",featureFlag:"apm-integrations-in-api-platform",icon_url:"https://static.getpostman.com/assets/newrelic-light.svg",dark_icon_url:"https://static.getpostman.com/assets/newrelic-dark.svg",extended_description:"New Relic provides a connected, real-time view of all your operational data in one place. This integration allows you to view New Relic data into Postman",categories:["Analytics"],integrations:{apm_new_relic:{apm_new_relic:{name:"Monitor API performance",description:"View New Relic metrics and statuses directly from Postman.",categories:["Analytics"],summary:"",client_categories:["apm_api-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./js/components/base/PasswordInput.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/classnames/index.js"),o=n.n(r),s=n("./js/components/base/Inputs.js"),a=n("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=n("./js/components/base/Buttons.js"),c=n("./node_modules/prop-types/index.js"),d=n.n(c),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}class g extends i.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:n}=e;if(t){let i,r;for(let o=0;o<t.length;o++){const{validator:s,message:a,type:l}=t[o]||{};if("function"==typeof s&&!s(n,e)){i=l,r=a;break}}if(i)return this.state[i]!==r&&this.setState({[i]:r})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?i.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},i.createElement(p.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?i.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},i.createElement(p.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?i.createElement(s.Input,u({},e,{type:"password"})):i.createElement(a.AutoSuggestInput,u({},e,{enableVariableSuggestions:!0,type:"text"})):i.createElement(s.Input,u({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return i.createElement("div",{className:o()("password-input",e)},this.getPasswordInput(t),i.createElement("div",{className:"password-input-message"},this.getValidationIcon()),i.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?i.createElement(p.default,{name:"icon-action-hide-stroke",title:"Show"}):i.createElement(p.default,{name:"icon-action-view-stroke",title:"Hide"})))}}g.propTypes={className:d().string,inputStyle:d().oneOf(["box","line"]),size:d().oneOf(["huge"]),enableVariableSuggestions:d().bool,validation:d().arrayOf(d().shape({validator:d().func.isRequired,message:d().string,type:d().oneOf(["error","warning"])}))},g.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,n){n.r(t),n.d(t,{LoadingLabel:function(){return c},default:function(){return d}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/classnames/index.js"),o=n.n(r),s=n("./node_modules/react-select-v1/dist/react-select.es.js"),a=n("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function c(e){return i.createElement(i.Fragment,null,e.loadingLabel||"Loading...",i.createElement("span",{className:"pm-select-loader"},i.createElement(a.default,null)))}class d extends i.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:n,className:r,label:a,isClearable:d,isCreatable:p,autoBlur:u=!0}=this.props;return p?i.createElement(s.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:u,className:o()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,r),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?i.createElement(c,this.props):a,scrollMenuIntoView:!1})):i.createElement(s.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:u,className:o()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,r),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?i.createElement(c,this.props):a,scrollMenuIntoView:!1}))}}d.defaultProps={size:"sm"},d.displayName="SelectDropdown"},"./js/stores/IntegrationsStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return ve}});var i,r,o,s,a,l,c,d,p,u,g,m,h,b,f,v,y,I,S,E,A,_,w,j,D,C,P,T,O,M,x,N,R,k,L,F,V,U,H,B,K,z,G,W,q,$,J,Y,Q,X,Z,ee,te,ne,ie,re,oe=n("../../node_modules/mobx/lib/mobx.module.js"),se=n("./integrations/constants/integrationsConstants.ts"),ae=n("./js/stores/StoreManager.js"),le=n("./js/stores/SyncStatusStore.js"),ce=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),de=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),pe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),ue=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),ge=(n("./integrations/monitoring/services/NewRelicService.js"),n("./integrations/monitoring/constants.js"),n("./node_modules/lodash/lodash.js"));function me(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function he(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const be=3e5,fe=8e3;let ve=(r=he((i=class{constructor(){me(this,"activeIntegrationsView",r,this),me(this,"serviceId",o,this),me(this,"activeServiceDetailsId",s,this),me(this,"ruleId",a,this),me(this,"teamIntegrations",l,this),me(this,"availableIntegrations",c,this),me(this,"loadingAvailableIntegrations",d,this),me(this,"loadingIntegrationClasses",p,this),me(this,"loadingIntegrationServices",u,this),me(this,"errorFetchingAvailableIntegrations",g,this),me(this,"availableIntegrationsErrorDetails",m,this),me(this,"filteredAvailableIntegrations",h,this),me(this,"filterByCategoryAvailableIntegrations",b,this),me(this,"integrationCategories",f,this),me(this,"noTeamIntegrations",v,this),me(this,"loadingTeamIntegrations",y,this),me(this,"errorInFetchingTeamIntegrations",I,this),me(this,"errorDetails",S,this),me(this,"ruleSpecificTeamIntegrations",E,this),me(this,"ruleSpecificTeamIntegrationErrors",A,this),me(this,"serviceDetails",_,this),me(this,"ruleDetails",w,this),me(this,"noRuleSpecificTeamIntegrations",j,this),me(this,"isHydrating",D,this),me(this,"isAdding",C,this),me(this,"categoryFilter",P,this),me(this,"createFormActiveRuleId",T,this),me(this,"createFormActiveServiceId",O,this),me(this,"workspaces",M,this),me(this,"entities",x,this),me(this,"selectedWorkspace",N,this),me(this,"selectedEntity",R,this),me(this,"selectedEntityVersion",k,this),me(this,"authDetails",L,this),me(this,"errorFetchingAuthDetails",F,this),me(this,"authDetailsError",V,this),me(this,"runLogPageData",U,this),me(this,"loadingRunLogPage",H,this),me(this,"errorInFetchingRunLogPageData",B,this),me(this,"runLogPageErrorDetails",K,this),me(this,"sourceConflicting",z,this),me(this,"refreshingRunLog",G,this),me(this,"authType",W,this),me(this,"availableIntegrationClasses",q,this),me(this,"integrationCategories",$,this),me(this,"availableIntegrationServices",J,this),me(this,"availableIntegrationServicesByCategory",Y,this),me(this,"filteredIntegrationServices",Q,this),me(this,"preferredEntities",X,this),me(this,"integrationClass",Z,this),me(this,"loadingIntegrationClass",ee,this),me(this,"errorFetchingIntegrationClass",te,this),me(this,"integrationInstance",ne,this),me(this,"loadingIntegrationInstance",ie,this),me(this,"errorFetchingIntegrationInstance",re,this),this.initializeFetchingTeamIntegrations=ge.debounce(this.initializeFetchingTeamIntegrations.bind(this),be,{leading:!0,trailing:!1}),this.getAvailableIntegrationClasses=ge.debounce(this.getAvailableIntegrationClasses.bind(this),be,{leading:!0,trailing:!1}),this.getAvailableIntegrationServices=ge.debounce(this.getAvailableIntegrationServices.bind(this),be,{leading:!0,trailing:!1}),this.initializeRuleSpecificTeamIntegrations=((e,t,n)=>{const i={};return(...r)=>{const[o,s]=r;return"function"==typeof i[s]||(i[s]=ge.debounce(e,t,{...n,leading:!0})),i[s](...r)}})(this.initializeRuleSpecificTeamIntegrations.bind(this),3e5,{leading:!0,trailing:!1})}setActiveIntegrationsView(e){this.activeIntegrationsView=e}readRuleSpecificTeamIntegrations(e){return(0,oe.toJS)(this.ruleSpecificTeamIntegrations[e])}readServiceDetails(e){return(0,oe.toJS)(this.serviceDetails[e])}readRuleDetails(e){return(0,oe.toJS)(this.ruleDetails[e])}setAuthType(e){this.authType=e}setRuleSpecificTeamIntegrations(e,t){this.ruleSpecificTeamIntegrations[e]=t}resetRuleSpecificTeamIntegrations(e){delete this.ruleSpecificTeamIntegrations[e]}setServiceDetails(e,t){this.serviceDetails[e]=t}setRuleDetails(e,t){this.ruleDetails[e]=t}resetServiceDetails(e){delete this.serviceDetails[e]}setActiveIntegrationRule(e,t){this.serviceId=e,this.ruleId=t}updateCategoryfilter(e){this.categoryFilter=e,this.updateIntegrationServicesPerCategory(e)}updateRuleSpecificTeamIntegrationsDataStatus(e,t,n,i){this.ruleSpecificTeamIntegrationErrors[i]={loading:e,error:t,errorDetails:n}}readRuleSpecificTeamIntegrationsDataStatus(e){return{loading:!0,...(0,oe.toJS)(this.ruleSpecificTeamIntegrationErrors[e])}}getRuleSpecificTeamIntegrationData(e,t){return this.updateRuleSpecificTeamIntegrationsDataStatus(!0,!1,"",t),Promise.all([de.default.fetchIntegrationClassDetails(t),de.default.fetchIntegrationServiceDetails(e),ce.default.getTeamIntegrationInstances(t)]).then((([n,i,r])=>{const o=ge.get(r,"body.data",[]),s=ge.get(n,"body.data",{}),a=ge.get(i,"body.data",{});if(200!==n.status||200!==r.status||200!==i.status||ge.isEmpty(s)||ge.isEmpty(a)){let e={};(200!==n.status||ge.isEmpty(s))&&(e.errorFetchingClassDetails=n),(200!==i.status||ge.isEmpty(a))&&(e.errorFetchingServiceDetatils=i),200!==r.status&&(e.errorFetchingTeamIntegrations=r),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}else{if(ge.isEmpty(o))this.setRuleSpecificTeamIntegrations(t,[]);else{let e=ge.map(o,(e=>({id:e.id,name:e.name,userId:e.createdBy.id,userName:ge.get(e,"createdBy.name")||ge.get(e,"createdBy.username")||ge.get(e,"createdBy.email")||"A user",isUserNameClickable:Boolean(ge.get(e,"createdBy.name")||ge.get(e,"createdBy.username")||ge.get(e,"createdBy.email")),userProfileUrl:e.createdBy.profilePicUrl,status:e.status,apiDetails:e.entity.api,entityType:e.entity.type,entityId:e.entity.id,entityName:e.entity.name,lastRunAt:e.lastRunAt,clientCategories:e.clientCategories})));this.setRuleSpecificTeamIntegrations(t,e)}this.setServiceDetails(e,a),this.setRuleDetails(t,s),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!1,"",t)}})).catch((n=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,n,t),this.resetRuleSpecificTeamIntegrations(t),this.resetServiceDetails(e)}))}getTeamIntegrationsData(){return this.setLoadingIntegrationClasses(!0),this.setLoadingIntegrationServices(!0),Promise.all([de.default.fetchAvailableClasses(),de.default.fetchAvailableServices(),ce.default.getTeamIntegrations()]).then((([e,t,n])=>{const i=ge.get(t,"body.data",[]),r=ge.get(e,"body.data",[]),o=ge.get(n,"body.data",[]);if(200!==e.status||200!==n.status||200!==t.status||ge.isEmpty(i)||ge.isEmpty(r)){let o={};(200!==t.status||ge.isEmpty(i))&&(o.errorFetchingServices=t),(200!==e.status||ge.isEmpty(r))&&(o.errorFetchingClasses=e),200!==n.status&&(o.errorFetchingTeamIntegrations=n),this.updateData(!1,[]),this.updateState(!1,!0,o)}else{if(ge.isEmpty(o))this.updateData(!0,[]),this.updateState(!1,!1,"");else{const e=ge.groupBy(o,"rule"),t=ge.map(e,((e,t)=>{const n=e[0].service,o=ge.find(r,(e=>e.id===t)),s=ge.find(i,(e=>e.id===n));return{ruleName:ge.get(o,"name"),ruleId:t,serviceId:n,serviceName:ge.get(s,"name",""),serviceIconURL:ge.get(s,"iconUrl",""),serviceDarkIconURL:ge.get(s,"darkIconUrl",""),statusCount:ge.countBy(e,(e=>e.status)),totalIntegrations:e.length}})),n=this.defaultSortTeamIntegrations(t);this.updateData(!1,n),this.updateState(!1,!1,"")}const e=this.addDisplayNameToIntegrationClasses(r);this.setAvailableIntegrationClasses(e),this.setAvailableIntegrationServices(i),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory)}this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!1,"")})).catch((e=>{pm.logger.error("Error in fetching team integrations",e),this.updateData(!1,[]),this.updateState(!1,!0,e),this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!0,e)}))}setIsHydrating(e){this.isHydrating=e}updateState(e,t,n){this.loadingTeamIntegrations=e,this.errorInFetchingTeamIntegrations=t,this.errorDetails=n}updateData(e,t){this.noTeamIntegrations=e,this.teamIntegrations=t}updateAvailableIntegrations(e){this.availableIntegrations=e}updateIntegrationCategories(){this.integrationCategories=pe.default.getAllCategories(this.availableIntegrations)}setAvailableIntegrationServices(e){this.availableIntegrationServices=e}addDisplayNameToIntegrationClasses(e){const t={};return ge.forEach(e,(e=>{const n=ge.get(e,"services",[]);ge.forEach(n,(n=>{ge.get(t,n.id)?t[n.id].push(e.id):t[n.id]=[e.id]}))})),ge.forEach(e,(e=>{const n=ge.get(e,"services.0",{});e.displayName=ge.size(t[n.id])>1?e.name:n.name})),e}setAvailableIntegrationClasses(e){this.availableIntegrationClasses=e}getIntegrationCategoriesFromServices(){this.integrationCategories=pe.default.getAllIntegrationCategories(this.availableIntegrationServices)}updateIntegrationServicesPerCategory(e){let t=pe.default.filterByCategory(e,(0,oe.toJS)(this.availableIntegrationServices));ge.isEmpty(t)&&!ge.isEmpty((0,oe.toJS)(this.availableIntegrationServices))&&(this.updateCategoryfilter("all"),t=(0,oe.toJS)(this.availableIntegrationServices)),this.availableIntegrationServicesByCategory=t}updateFilteredIntegrationServices(e){this.filteredIntegrationServices=e}updateAvailableIntegrationsStatus(e,t,n){this.loadingAvailableIntegrations=e,this.errorFetchingAvailableIntegrations=t,this.availableIntegrationsErrorDetails=n}setLoadingIntegrationServices(e){this.loadingIntegrationServices=e}setLoadingIntegrationClasses(e){this.loadingIntegrationClasses=e}updateFilteredAvailableIntegrations(e){this.filteredAvailableIntegrations=e}updateFilterByCategoryAvailableIntegrations(e){let t=pe.default.filterByCategory(e,(0,oe.toJS)(this.availableIntegrations));ge.isEmpty(t)&&!ge.isEmpty((0,oe.toJS)(this.availableIntegrations))&&(this.updateCategoryfilter("all"),t=(0,oe.toJS)(this.availableIntegrations)),this.filterByCategoryAvailableIntegrations=t}initializeFetchingTeamIntegrations(){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:fe}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}initializeRuleSpecificTeamIntegrations(e,t){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:fe}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchRuleSpecificTeamIntegrations(e,t){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:fe}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchTeamIntegrations(){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:fe}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}getAvailableIntegrationClasses(){return this.setLoadingIntegrationClasses(!0),de.default.fetchAvailableClasses().then((e=>{const t=this.addDisplayNameToIntegrationClasses(ge.get(e,"body.data",[]));this.setAvailableIntegrationClasses(t),this.updateAvailableIntegrationsStatus(!1,!1,""),this.setLoadingIntegrationClasses(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationClasses(!1),pm.logger.error("Error occurred while fetching available integration classes",e)}))}getAvailableIntegrationServices(){return this.setLoadingIntegrationServices(!0),de.default.fetchAvailableServices().then((e=>{this.setAvailableIntegrationServices(ge.get(e,"body.data",[])),this.updateAvailableIntegrationsStatus(!1,!1,""),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory),this.setLoadingIntegrationServices(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationServices(!1),pm.logger.error("Error occurred while fetching available integration services",e)}))}populateIntegrationClasses(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:fe}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationClasses()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}populateIntegrationServices(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:fe}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationServices()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}setActiveIntegrationService(e){this.activeServiceDetailsId=e}setActiveIntegrationCreateForm(e,t){this.createFormActiveServiceId=e,this.createFormActiveRuleId=t}setSelectedWorkspace(e){this.selectedWorkspace=e}setSelectedEntity(e){this.selectedEntity=e}setSelectedEntityVersion(e){this.selectedEntityVersion=e}resetSelectedWorkspace(){this.selectedWorkspace=null}resetSelectedEntity(){this.selectedEntity=null}resetSelectedEntityVersion(){this.selectedEntityVersion=null}resetAddIntegrationDependencies(){this.resetSelectedEntityVersion(),this.resetSelectedEntity(),this.resetSelectedWorkspace()}updateIsAdding(e){this.isAdding=e}updateSourceConflicting(e){this.sourceConflicting=e}readTeamIntegrations(){return(0,oe.toJS)(this.teamIntegrations)}updateIdentityResponse(e){this.authDetails=ge.get(e,"body.handover")}updateIdentityResponseStatus(e,t){this.errorFetchingAuthDetails=e,this.authDetailsError=t}setAuthDetails(e){this.authDetails=e}readAuthDetails(){return(0,oe.toJS)(this.authDetails)}defaultSortTeamIntegrations(e){const t=ge.filter(e,(e=>!!e.statusCount.failed)),n=ge.sortBy(t,(e=>ge.toLower(e.ruleName))),i=ge.sortBy(ge.difference(e,n),(e=>ge.toLower(e.ruleName)));return ge.concat(n,i)}updateRunsPageResponseStatus(e,t,n){this.loadingRunLogPage=e,this.errorInFetchingRunLogPageData=t,this.runLogPageErrorDetails=n}updateRunsPageResponse(e){this.runLogPageData=e}readIntegrationRunLogData(){return(0,oe.toJS)(this.runLogPageData)}updateRefreshingRunLog(e){this.refreshingRunLog=e}addPreferredEntity(e,t){const n={entityType:e,entityId:t};ge.some(this.preferredEntities,n)||this.preferredEntities.push(n)}getIntegrationClassDetails(e){return this.loadingIntegrationClass=!0,new Promise(((t,n)=>{de.default.fetchIntegrationClassDetails(e).then((e=>{const n=ge.get(e,"body.data");200!==e.status||ge.isEmpty(n)?this.errorFetchingIntegrationClass=e:(this.integrationClass=n,this.errorFetchingIntegrationClass=!1),this.loadingIntegrationClass=!1,t()})).catch((t=>{pm.logger.error("Error in fetching integration class details",e,t),this.errorFetchingIntegrationClass=t,this.loadingIntegrationClass=!1,n(t)}))}))}getIntegrationInstanceDetails(e){this.loadingIntegrationInstance=!0,ue.default.fetchIntegrationInstanceDetails(e).then((e=>{const t=ge.get(e,"body.data");200!==e.status||ge.isEmpty(t)?this.errorFetchingIntegrationInstance=e:(t.allowedActions=ge.get(e,"body.meta.allowedActions"),this.integrationInstance=t,this.errorFetchingIntegrationInstance=!1),this.loadingIntegrationInstance=!1})).catch((t=>{pm.logger.error("Error in fetching integration instance details",e,t),this.errorFetchingIntegrationInstance=t,this.loadingIntegrationInstance=!1}))}getIntegrationClasses(){return ge.isEmpty(this.availableIntegrationClasses)&&this.populateIntegrationClasses(),this.availableIntegrationClasses}getIntegrationServices(){return ge.isEmpty(this.availableIntegrationServices)&&this.populateIntegrationServices(),this.availableIntegrationServices}}).prototype,"activeIntegrationsView",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return se.INTEGRATIONS_VIEW.TEAM}}),o=he(i.prototype,"serviceId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=he(i.prototype,"activeServiceDetailsId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=he(i.prototype,"ruleId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=he(i.prototype,"teamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=he(i.prototype,"availableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=he(i.prototype,"loadingAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=he(i.prototype,"loadingIntegrationClasses",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=he(i.prototype,"loadingIntegrationServices",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=he(i.prototype,"errorFetchingAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=he(i.prototype,"availableIntegrationsErrorDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=he(i.prototype,"filteredAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=he(i.prototype,"filterByCategoryAvailableIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=he(i.prototype,"integrationCategories",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=he(i.prototype,"noTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=he(i.prototype,"loadingTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),I=he(i.prototype,"errorInFetchingTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=he(i.prototype,"errorDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=he(i.prototype,"ruleSpecificTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=he(i.prototype,"ruleSpecificTeamIntegrationErrors",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=he(i.prototype,"serviceDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=he(i.prototype,"ruleDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),j=he(i.prototype,"noRuleSpecificTeamIntegrations",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=he(i.prototype,"isHydrating",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=he(i.prototype,"isAdding",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=he(i.prototype,"categoryFilter",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),T=he(i.prototype,"createFormActiveRuleId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=he(i.prototype,"createFormActiveServiceId",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=he(i.prototype,"workspaces",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=he(i.prototype,"entities",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=he(i.prototype,"selectedWorkspace",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=he(i.prototype,"selectedEntity",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=he(i.prototype,"selectedEntityVersion",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=he(i.prototype,"authDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F=he(i.prototype,"errorFetchingAuthDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=he(i.prototype,"authDetailsError",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=he(i.prototype,"runLogPageData",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=he(i.prototype,"loadingRunLogPage",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=he(i.prototype,"errorInFetchingRunLogPageData",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=he(i.prototype,"runLogPageErrorDetails",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=he(i.prototype,"sourceConflicting",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=he(i.prototype,"refreshingRunLog",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=he(i.prototype,"authType",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),q=he(i.prototype,"availableIntegrationClasses",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=he(i.prototype,"integrationCategories",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=he(i.prototype,"availableIntegrationServices",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=he(i.prototype,"availableIntegrationServicesByCategory",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=he(i.prototype,"filteredIntegrationServices",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=he(i.prototype,"preferredEntities",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=he(i.prototype,"integrationClass",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=he(i.prototype,"loadingIntegrationClass",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=he(i.prototype,"errorFetchingIntegrationClass",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=he(i.prototype,"integrationInstance",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=he(i.prototype,"loadingIntegrationInstance",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=he(i.prototype,"errorFetchingIntegrationInstance",[oe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he(i.prototype,"setActiveIntegrationsView",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationsView"),i.prototype),he(i.prototype,"setAuthType",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAuthType"),i.prototype),he(i.prototype,"setRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"resetRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"setServiceDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setServiceDetails"),i.prototype),he(i.prototype,"setRuleDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setRuleDetails"),i.prototype),he(i.prototype,"resetServiceDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetServiceDetails"),i.prototype),he(i.prototype,"setActiveIntegrationRule",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationRule"),i.prototype),he(i.prototype,"updateCategoryfilter",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateCategoryfilter"),i.prototype),he(i.prototype,"updateRuleSpecificTeamIntegrationsDataStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRuleSpecificTeamIntegrationsDataStatus"),i.prototype),he(i.prototype,"getRuleSpecificTeamIntegrationData",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getRuleSpecificTeamIntegrationData"),i.prototype),he(i.prototype,"getTeamIntegrationsData",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getTeamIntegrationsData"),i.prototype),he(i.prototype,"setIsHydrating",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setIsHydrating"),i.prototype),he(i.prototype,"updateState",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateState"),i.prototype),he(i.prototype,"updateData",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateData"),i.prototype),he(i.prototype,"updateAvailableIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateAvailableIntegrations"),i.prototype),he(i.prototype,"updateIntegrationCategories",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationCategories"),i.prototype),he(i.prototype,"setAvailableIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAvailableIntegrationServices"),i.prototype),he(i.prototype,"setAvailableIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAvailableIntegrationClasses"),i.prototype),he(i.prototype,"getIntegrationCategoriesFromServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getIntegrationCategoriesFromServices"),i.prototype),he(i.prototype,"updateIntegrationServicesPerCategory",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIntegrationServicesPerCategory"),i.prototype),he(i.prototype,"updateFilteredIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateFilteredIntegrationServices"),i.prototype),he(i.prototype,"updateAvailableIntegrationsStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateAvailableIntegrationsStatus"),i.prototype),he(i.prototype,"setLoadingIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setLoadingIntegrationServices"),i.prototype),he(i.prototype,"setLoadingIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setLoadingIntegrationClasses"),i.prototype),he(i.prototype,"updateFilteredAvailableIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateFilteredAvailableIntegrations"),i.prototype),he(i.prototype,"updateFilterByCategoryAvailableIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateFilterByCategoryAvailableIntegrations"),i.prototype),he(i.prototype,"initializeFetchingTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"initializeFetchingTeamIntegrations"),i.prototype),he(i.prototype,"initializeRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"initializeRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"refetchRuleSpecificTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"refetchRuleSpecificTeamIntegrations"),i.prototype),he(i.prototype,"refetchTeamIntegrations",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"refetchTeamIntegrations"),i.prototype),he(i.prototype,"getAvailableIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getAvailableIntegrationClasses"),i.prototype),he(i.prototype,"getAvailableIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getAvailableIntegrationServices"),i.prototype),he(i.prototype,"populateIntegrationClasses",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"populateIntegrationClasses"),i.prototype),he(i.prototype,"populateIntegrationServices",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"populateIntegrationServices"),i.prototype),he(i.prototype,"setActiveIntegrationService",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationService"),i.prototype),he(i.prototype,"setActiveIntegrationCreateForm",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setActiveIntegrationCreateForm"),i.prototype),he(i.prototype,"setSelectedWorkspace",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedWorkspace"),i.prototype),he(i.prototype,"setSelectedEntity",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedEntity"),i.prototype),he(i.prototype,"setSelectedEntityVersion",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedEntityVersion"),i.prototype),he(i.prototype,"resetSelectedWorkspace",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetSelectedWorkspace"),i.prototype),he(i.prototype,"resetSelectedEntity",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetSelectedEntity"),i.prototype),he(i.prototype,"resetSelectedEntityVersion",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetSelectedEntityVersion"),i.prototype),he(i.prototype,"resetAddIntegrationDependencies",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"resetAddIntegrationDependencies"),i.prototype),he(i.prototype,"updateIsAdding",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIsAdding"),i.prototype),he(i.prototype,"updateSourceConflicting",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateSourceConflicting"),i.prototype),he(i.prototype,"updateIdentityResponse",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIdentityResponse"),i.prototype),he(i.prototype,"updateIdentityResponseStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateIdentityResponseStatus"),i.prototype),he(i.prototype,"setAuthDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"setAuthDetails"),i.prototype),he(i.prototype,"updateRunsPageResponseStatus",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRunsPageResponseStatus"),i.prototype),he(i.prototype,"updateRunsPageResponse",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRunsPageResponse"),i.prototype),he(i.prototype,"updateRefreshingRunLog",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"updateRefreshingRunLog"),i.prototype),he(i.prototype,"addPreferredEntity",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"addPreferredEntity"),i.prototype),he(i.prototype,"getIntegrationClassDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getIntegrationClassDetails"),i.prototype),he(i.prototype,"getIntegrationInstanceDetails",[oe.action],Object.getOwnPropertyDescriptor(i.prototype,"getIntegrationInstanceDetails"),i.prototype),i)},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-success-stroke.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),p=n("./node_modules/lodash/lodash.js"),u=n.n(p);class g extends i.Component{componentDidMount(){const e=(0,d.getPreferredEntityId)(this.props.preferredEntities,"connectedAccount");e&&u().isFunction(this.props.onSelection)&&this.props.onSelection(e)}render(){const{connectedAccount:e,isLoading:t,isUsingPersonalCredentials:n,orphaned:d,reauthenticateCallback:p,primarySuccessText:u,primaryOrphanedText:g,reauthenticateText:m,reauthenticateWithAnotherAccount:h,primaryChangeAuthenticationText:b,changeAuthenticationText:f,changeAuthenticationCallback:v}=this.props;return t?i.createElement(r.default,null):h?i.createElement("div",{className:"integrations-connected-account__form__header"},i.createElement(o.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},i.createElement(l.default,{color:"content-color-primary"}),i.createElement(o.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},b,i.createElement("div",{className:"integrations-connected-account__form__header__helper"},i.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>v()}," ",f," "))))):d?i.createElement("div",{className:"integrations-connected-account__form__header"},i.createElement(o.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},i.createElement(l.default,{color:"base-color-error"}),i.createElement(o.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},g,i.createElement("div",{className:"integrations-connected-account__form__header__helper"},"To continue using this integration,",i.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>p()}," ",m," "))))):n||!e?null:i.createElement(i.Fragment,null,i.createElement("div",{className:"integrations-connected-account__form__header"},i.createElement(o.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},i.createElement(c.default,{color:"base-color-success"}),i.createElement(o.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},i.createElement(s.default,{styleAs:"h6",type:"h6",text:u,color:"content-color-secondary"}),i.createElement(a.default,{onClick:()=>p(),type:"plain",text:m})))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js":function(e,t,n){n.r(t),n.d(t,{convertEntityListToOptions:function(){return o},convertObjectListToOptions:function(){return s},getInputError:function(){return u},getPreferredEntity:function(){return d},getPreferredEntityId:function(){return p},getServiceActionInputsMap:function(){return l},isBlockedOnAnotherInput:function(){return c},isEntityInputInEditFlow:function(){return g},isValidSetOfOptions:function(){return a}});var i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(e){return s(e,"name","id")}function s(e,t="name",n="id"){return e?e.map((e=>({label:r().get(e,t),value:r().get(e,n)}))):[]}function a(e){return r().isArray(e)&&r().some(e,(e=>r().has(e,"label")&&r().has(e,"value")))}function l(e,t){return r().reduce(r().get(e,"inputs"),((e,n,i)=>(e[i]=r().get(r().find(t,["key",n]),"value"),e)),{})}function c(e,t){return r().some(e,(e=>{const n=r().find(t,["key",e]);return r().isEmpty(n)||r().isNil(n.value)||(r().isObject(n.value)||r().isString(n.value))&&r().isEmpty(n.value)||n.error}))}function d(e,t){return r().find(e,["entityType",t])||null}function p(e,t){return r().get(d(e,t),"entityId")}function u(e,t){const n=r().isNil(t)||(r().isObject(t)||r().isString(t))&&r().isEmpty(t);return e.mandatory&&n&&"This field is mandatory"}function g(e){return e.currentValue&&e.disabled}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});n("./node_modules/lodash/lodash.js");var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),b=n("./integrations/monitoring/constants.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f.apply(this,arguments)}let v=(0,o.observer)(i=class extends r.Component{constructor(e){super(e)}render(){const{handleOnApiKeyChange:e,handleOnApiKeyBlur:t,apiKey:n,handleOnAppKeyChange:i,handleOnAppKeyBlur:o,appKey:g,region:m,handleOnRegionChange:v,mode:y,apiKeyValidationStatus:I,apiKeyValidationMessage:S,appKeyValidationStatus:E,appKeyValidationMessage:A}=this.props,_=y===b.ADD_MODE?{fieldType:"required"}:{};return r.createElement(r.Fragment,null,r.createElement(s.default,{direction:"column",gap:"spacing-l"},r.createElement(a.default,{name:"Select Datadog site",value:m,direction:"column",onChange:v,label:r.createElement(l.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(c.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(c.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(c.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(c.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(c.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),r.createElement(d.default,{id:"datadog-api-key",type:"password",label:r.createElement(l.default,f({text:"Datadog API Key"},_)),helperText:r.createElement(p.default,null,"Enter the API Key provided by Datadog or ",r.createElement(h.default,{extUrl:`${u.default.getDatadogHostname(m)}/organization-settings/api-keys`},"generate one here.")),onChange:e,onBlur:t,value:n,validationStatus:I,validationMessage:S,placeholder:y===b.EDIT_MODE?"****************************":null}),r.createElement(d.default,{id:"datadog-app-key",type:"password",label:r.createElement(l.default,f({text:"Datadog Application Key"},_)),helperText:r.createElement(p.default,null,"Enter the Application Key provided by Datadog or ",r.createElement(h.default,{extUrl:`${u.default.getDatadogHostname(m)}/organization-settings/application-keys`},"generate one here.")),value:g,onChange:i,onBlur:o,validationStatus:E,validationMessage:A,placeholder:y===b.EDIT_MODE?"****************************":null})))}})||i;v.propTypes={handleOnApiKeyChange:m().func.isRequired,handleOnApiKeyBlur:m().func.isRequired,apiKey:m().string.isRequired,apiKeyValidationStatus:m().string.isRequired,apiKeyValidationMessage:m().string.isRequired,handleOnAppKeyChange:m().func.isRequired,handleOnAppKeyBlur:m().func.isRequired,appKey:m().string.isRequired,appKeyValidationStatus:m().string.isRequired,appKeyValidationMessage:m().string.isRequired,region:m().string.isRequired,handleOnRegionChange:m().func.isRequired,mode:m().string.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});n("./node_modules/lodash/lodash.js");var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js"),u=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g);const h=u.default.div`
  width: fit-content;
`;let b=(0,o.observer)(i=class extends r.Component{constructor(e){super(e)}render(){const{apiKey:e,appKey:t,selectedDashboards:n,availableDashboards:i,handleDashboardsChange:o,isLoadingDashboards:u,errorDashboards:g,region:m,environments:b,rule:f,onSelectEnvironmentServices:v,removeEnvironmentSelector:y,handleAddEnvironmentButtonClick:I,isAddEnvironmentButtonDisabled:S,integrationId:E}=this.props;return r.createElement(s.default,{direction:"column",gap:"spacing-l",width:"100%"},r.createElement(p.default,{integrationId:E,mode:this.props.mode,apiKey:e,appKey:t,environments:b,region:m,rule:f,onSelectEnvironmentServices:v,removeEnvironmentSelector:y}),r.createElement(h,null,r.createElement(a.default,{type:"tertiary",onClick:I,text:"Add Environment",icon:r.createElement(d.default,null),isDisabled:S,tooltip:!S&&"Fill in the details to add a new environment."})),r.createElement(l.default,{value:n,options:i,placeholder:"Select Dashboards",label:r.createElement(c.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:o,isLoading:u,error:g&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}))}})||i;b.propTypes={mode:m().string.isRequired,apiKey:m().string.isRequired,appKey:m().string.isRequired,selectedDashboards:m().array.isRequired,availableDashboards:m().array.isRequired,handleDashboardsChange:m().func.isRequired,isLoadingDashboards:m().bool.isRequired,errorDashboards:m().bool.isRequired,region:m().string.isRequired,environments:m().array.isRequired,rule:m().string.isRequired,onSelectEnvironmentServices:m().func.isRequired,removeEnvironmentSelector:m().func.isRequired,handleAddEnvironmentButtonClick:m().func.isRequired,isAddEnvironmentButtonDisabled:m().bool.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js":function(e,t,n){n.r(t),n.d(t,{DatadogEnvironmentSelector:function(){return S},default:function(){return I}});var i,r,o=n("./node_modules/lodash/lodash.js"),s=n.n(o),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),p=n("./integrations/monitoring/constants.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),y=n("./integrations/monitoring/services/index.js");let I=(0,l.observer)(r=class extends a.Component{constructor(e){super(e)}render(){let{environments:e,apiKey:t,appKey:n,region:i,rule:r,integrationId:o}=this.props;return a.createElement(a.Fragment,null,s().map(e,((l,c)=>a.createElement(a.Fragment,null,a.createElement(u.default,{direction:"column",gap:"spacing-l"},a.createElement(u.default,{justifyContent:"space-between",alignItems:"center"},a.createElement(g.default,{type:"h4",text:"Select services for Environment",color:"content-color-primary"}),s().size(e)>1&&a.createElement(m.default,{type:"tertiary",onClick:()=>this.props.removeEnvironmentSelector(c),text:"Remove",icon:a.createElement(v.default,null)})),a.createElement(S,{integrationId:o,mode:this.props.mode,apiKey:t,appKey:n,environments:e,environment:l,key:l.id,region:i,rule:r,onSelectEnvironmentServices:this.props.onSelectEnvironmentServices,index:c}))))))}})||r,S=(0,l.observer)(i=class extends a.Component{constructor(e){super(e),this.state={environmentName:e.environment.name,selectedServices:s().map(e.environment.services,(e=>({label:e,value:e}))),availableServices:[],loadingServices:!1,errorServices:"",errorName:""},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.onServiceSelect=this.onServiceSelect.bind(this),this.listServicesDebounce=s().debounce(this.listServices.bind(this),1e3)}componentDidMount(){this.listServices()}onServiceSelect(e){s().isArray(e)&&this.setState({selectedServices:e},(()=>{this.props.onSelectEnvironmentServices(this.state.environmentName,s().map(e,"value"),this.props.index)}))}async listServices(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(p.DATADOG_APM_CLASS_ID);const{rule:e,apiKey:t,appKey:n,region:i,integrationId:r,mode:o}=this.props,{environmentName:a}=this.state,l=s().find(this.integrationsStore.integrationClass.inputs,{key:"environments"}),c=s().get(l,"options.serviceActionId"),d=s().get(l,"id");if((s().isEmpty(t)||s().isEmpty(n))&&o===p.ADD_MODE)return;this.setState({loadingServices:!0,errorServices:!1});let u={};u=o&&o===p.EDIT_MODE?{rule:e,...t?{api_key:t}:{},...n?{app_key:n}:{},environment:a,region:i}:{rule:e,api_key:t,app_key:n,environment:a,region:i},y.default[e].listServicesWithIntegrationId(u,r||null,c,d).then((e=>{let t=s().map(s().keys(e),(e=>({label:e,value:e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedServices:[]})}))}render(){const{selectedServices:e,availableServices:t,loadingServices:n,errorServices:i,environmentName:r,errorName:o}=this.state;let{environments:l}=this.props;return a.createElement(u.default,{direction:"column",gap:"spacing-l"},a.createElement(h.default,{id:"apm-datadog-environment",label:a.createElement(b.default,{text:"Datadog Environment",infoText:"Enter the Datadog environment for the services."}),helperText:"This will be used as a filter on the environment tag on datadog.",value:r,isDisabled:s().size(e)>0,onChange:e=>{const t=e.target.value,n=s().find(l,(e=>e.name===t&&s().size(e.services)>0));n&&s().size(n.services)?this.setState({environmentName:t,errorName:"You cannot input multiple environments with the same name.",validationStatus:"error",selectedServices:[]}):this.setState({environmentName:t,errorName:"",validationStatus:null,selectedServices:[]},(()=>{this.listServicesDebounce()}))},validationStatus:this.state.validationStatus,validationMessage:"error"===this.state.validationStatus?o:null}),a.createElement(f.default,{value:e,options:t,placeholder:"Select Datadog APM Services",label:a.createElement(b.default,{text:"Services",type:"secondary",infoText:"Datadog Metric Graphs will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:n,error:i&&"Unable to load services",isDisabled:!s().isEmpty(o)}))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n("../../node_modules/react/index.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),s=n("./js/stores/StoreManager.js"),a=n("./js/stores/IntegrationsStore.js"),l=n("../../node_modules/mobx/lib/mobx.module.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}function d(e){let{disabled:t,workspaceId:n,payload:d,integrationFormActions:p,source:u,showDivider:g,...m}=e,h="basic_auth"!==(b=(0,l.toJS)((0,s.resolveStoreInstance)(a.default).authType))&&"token"!==b;var b;return u||(u="team_integrations_create_forms"),i.createElement("div",null,g&&i.createElement("hr",{className:"integration-add-actions-separator"}),i.createElement(o.default,c({disabled:t,workspaceId:n,payload:d},m,{redirect:e.redirect,integrationFormActions:p,source:u,alignLeft:h})),i.createElement(r.default,c({alignLeft:h,integrationFormActions:p,payload:d,source:u},m)))}d.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n("../../node_modules/react/index.js");function r(e){const{imageSrc:t,displayField:n}=e;return i.createElement("div",{className:"integrations-add-card__authed-user"},i.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&i.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),i.createElement("span",{className:"integrations-add-card__authed-user__name"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n("../../node_modules/react/index.js");function r(e){const{className:t,extUrl:n,target:r}=e;return i.createElement("a",{className:t,href:n,rel:"_blank"===r?"noopener noreferrer":"",target:r,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var i,r=n("../../node_modules/react/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),s=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./monitors/services/MonitorService.js"),d=n("./js/services/NavigationService.js"),p=n("./api-dev/services/APIDevService.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=(n("./js/modules/services/RemoteSyncRequestService.js"),n("./integrations/constants/integrationsConstants.ts")),h=n("./runtime-repl/collection/_api/CollectionInterface.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),v=n("./js/external-navigation/ExternalNavigationService.js"),y=n("./api-dev/interfaces/APIInterface.js"),I=n("../../node_modules/mobx/lib/mobx.module.js"),S=n("./node_modules/lodash/lodash.js"),E=n.n(S);const A="Malformed response",_={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},w={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let j=(0,u.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(s.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===m.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===m.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,I.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:E().get(e,"name"),value:E().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(E().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===m.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===m.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===m.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===m.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===m.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return _[this.props.entity]?_[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,i){return new Promise(((i,r)=>{const o=e.map((e=>({id:E().get(e,"apiversion"===n?"api":"id")})));let s=null;m.INTEGRATION_FORM_MODE.ADD,s=g.default.fetchCreatePermissions,s(t,n,o).then((t=>(E().forEach(E().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),i(e)))).catch((e=>{pm.logger.error(e),r(e)}))}))}fetchCollections(e){e?(0,h.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(A);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===m.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?c.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(A);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===m.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?c.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(A);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===m.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?p.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(A);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===m.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await p.default.getVersions(e);let{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(A);if(this.props.rule&&this.props.mode){const e="apiversion";n=await this.fetchAndAssignPermissions(n,this.props.rule,e,this.props.mode)}this.props.entity===m.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(E().find(n,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:n,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){E().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==m.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===m.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return r.createElement(b.default,{alignItems:"center",direction:"column"},r.createElement("div",null,"This workspace doesn't have any monitors."),r.createElement("div",{onClick:()=>{"workspace"===E().split(d.default.getCurrentURL(),"/",1)[0]?d.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,v.openExternalLink)(d.default.getBaseURL()+"/"+d.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},r.createElement(f.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===m.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:n}=this.state;if(e===m.entityTypes.API_VERSIONS){const e=await(0,y.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(n[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:n,entityVersions:i,firstLoad:s,shouldHideDropdown:a}=this.state,{selectedEntity:l,selectedEntityVersion:c}=this.store;return a?null:r.createElement(o.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===m.entityTypes.API_VERSIONS?i:n,value:this.props.value||(this.props.entity===m.entityTypes.API_VERSIONS?c:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||E().get(w,this.props.entity),emptyStateError:!e&&(this.props.entity===m.entityTypes.API_VERSIONS?i.length>0&&!c:n.length>0&&!l)&&!s&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i,r=n("../../node_modules/react/index.js"),o=n("./js/stores/StoreManager.js"),s=n("./js/stores/IntegrationsStore.js"),a=n("./monitors/services/MonitorService.js"),l=n("./api-dev/services/APIDevService.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./integrations/constants/integrationsConstants.ts"),u=n("./runtime-repl/collection/_api/CollectionInterface.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("./js/components/base/LoadingIndicator.js"),h=n("./integrations/api-observability/components/base/CustomDropdown.js"),b=n("./node_modules/lodash/lodash.js");const f="Malformed response",v={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},y={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let I=(0,c.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(s.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===p.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:b.get(e,"name"),value:b.get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(b.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===p.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===p.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===p.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===p.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===p.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return v[this.props.entity]?v[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,i){return new Promise(((i,r)=>{const o=e.map((e=>({id:b.get(e,"apiversion"===n?"api":"id")})));let s=null;p.INTEGRATION_FORM_MODE.ADD,s=d.default.fetchCreatePermissions,s(t,n,o).then((t=>(b.forEach(b.zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),i(e)))).catch((e=>{pm.logger.error(e),r(e)}))}))}fetchCollections(e){e?(0,u.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(f);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?a.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=b.get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(f);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?a.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=b.get(e,"body.data",[]),{newEntities:n,malformedResponse:i}=this.getFormattedResponse(t);if(i)throw new Error(f);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(f);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(f);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(b.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){b.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==p.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===p.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:n,entityVersions:i,firstLoad:o}=this.state,{selectedEntity:s,selectedEntityVersion:a}=this.store;return t||!e&&(this.props.entity===p.entityTypes.API_VERSIONS?i.length>0&&!b.get(a,"value"):n.length>0&&!b.get(s,"value"))&&!o?{status:"error",message:t?r.createElement("div",null,t,r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return r.createElement(g.default,{justifyContent:"space-between"},r.createElement("div",null,"Loading..."),r.createElement(m.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return y[this.props.entity]?y[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:n}=this.state,{selectedEntity:i,selectedEntityVersion:o}=this.store;return r.createElement(h.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===p.entityTypes.API_VERSIONS?n:t,value:this.props.entity===p.entityTypes.API_VERSIONS?o:i,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Inputs.js"),o=n("./node_modules/lodash/lodash.js"),s=n.n(o);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:o,optionalText:l,id:c,disabled:d,error:p,...u}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},n," ",o?i.createElement("span",null,"(",l||"optional",")"):""),i.createElement("div",{className:"integrations-add-card__label-description"},t),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(r.Input,a({inputStyle:"box",type:"text",disabled:d,error:s().isEmpty(p)?"":"This is a mandatory field"},u)),s().isEmpty(p)?"":i.createElement("div",{className:"integrations-add-card__error"},p)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Inputs.js"),o=n("./node_modules/lodash/lodash.js"),s=n.n(o);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e){const{id:t,error:n,...o}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),i.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(r.Input,a({id:t,inputStyle:"box",type:"text",error:s().isEmpty(n)?"":"This is a mandatory field"},o)),s().isEmpty(n)?"":i.createElement("div",{className:"integrations-add-card__error"},n)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),r=(n("./js/components/base/Inputs.js"),n("./node_modules/lodash/lodash.js")),o=n.n(r),s=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function c(e){const{id:t,error:n,...r}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement(s.default,l({id:t,label:i.createElement(a.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:o().isEmpty(n)?"":"error",validationMessage:o().isEmpty(n)?"":"This is a mandatory field"},r)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/InputSelectV2.js"),o=n("./js/components/base/SearchHighlighter.js"),s=n("./node_modules/lodash/lodash.js");class a extends i.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,n={}){return!t||n.firstRender?e:s.filter(e,(e=>e.id&&s.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,n=s.find(e,(e=>e.id===t.id));return n||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,n={}){const r=e.name,s=e.id;return t&&!n.firstRender?i.createElement("div",{className:"input-select-item",key:s},i.createElement(o.default,{source:r,query:t})):i.createElement("div",{className:"input-select-item",key:s},r)}render(){var{title:e,description:t,customLabel:n,showCustomLabel:o,filterItems:s}=this.props;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},e),i.createElement("div",{className:"integrations-add-card__label-description"},t),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(r.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,s),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),o?n:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/SelectDropdown.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./version-control/common/ForkLabel.js"),c=n("./node_modules/lodash/lodash.js");class d extends i.Component{constructor(e){super(e),this.optionRenderer=e=>i.createElement(o.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!c.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,n=null;if(t&&(n=c.find(e,(e=>c.isEqual(e.value,t.value)))),n){let e,t;var r,o,d,p,u;return n.isForked?(e={id:null===(r=n)||void 0===r?void 0:r.id,forkLabel:null===(o=n)||void 0===o?void 0:o.forkLabel,model:null===(d=n)||void 0===d?void 0:d.type},t={id:null===(p=n)||void 0===p?void 0:p.baseCollectionUid,model:null===(u=n)||void 0===u?void 0:u.type},n={...n,label:i.createElement(s.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},i.createElement(a.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},n.label),i.createElement(l.default,{forkedEntity:e,baseEntity:t,label:n.forkLabel}))}):n}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:n,error:o,isCreatable:s,isClearable:a,noResultsForSearch:l,optional:d,noOptionsForDropdown:p,loading:u,disabled:g,handleRetry:m,checkForValidInput:h,customInputMessage:b,emptyStateError:f,label:v}=this.props;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},e," ",d?i.createElement("span",null,"(optional)"):""),i.createElement("div",{className:"integrations-add-card__label-description"},t),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(r.default,{isCreatable:s,isClearable:a,multi:this.props.multi,label:v,optionRenderer:this.optionRenderer,loading:u,className:(f||o)&&"is-error",disabled:g,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:n&&0!==n.length?l:p,options:n,isValidNewOption:h||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,b),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),f?i.createElement("span",{className:"integrations-add-card__error"},f):o?i.createElement("span",{className:"integrations-add-card__error"},o+". ",c.isFunction(m)&&i.createElement("span",{onClick:m,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/PasswordInput.js"),o=n("./node_modules/lodash/lodash.js"),s=n.n(o),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}const u=(e,t)=>l()(e,{"hide-toggle":!s().isEmpty(t)});function g(e){const{isInlineSaveVisible:t,inlineSaveButtonData:n,onSave:o,value:a}=e,{isSaveDisabled:l,integrationId:g,payload:m}=n||{};return i.createElement(d.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},i.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:n,optional:o,id:a,customLink:l,error:c,descriptionClass:d,maskedPlaceholderWhenEmpty:g,...m}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title"},n," ",o?i.createElement("span",null,"(optional)"):""),i.createElement("div",{className:d||"integrations-add-card__label-description"},t," ",l),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(r.default,p({inputStyle:"box",type:"text",error:s().isEmpty(c)?"":"This is a mandatory field",placeholder:g?"************":""},m,{className:u(e.className,e.error)})),s().isEmpty(c)?"":i.createElement("div",{className:"integrations-add-card__error"},c)))})(e)),t&&i.createElement(c.default,{isSaveDisabled:l,integrationId:g,payload:m,onSave:o,value:a}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=(n("./node_modules/classnames/index.js"),n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:r,id:l,customLink:c,error:d,descriptionClass:p,maskedPlaceholderWhenEmpty:u,...g}=e;return i.createElement("div",{className:"integrations-add-card__segment"},i.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",r?i.createElement("span",null,"(optional)"):""),i.createElement("div",{className:p||"integrations-add-card__label-description"},t," ",c),i.createElement("div",{className:"integrations-add-card__input"},i.createElement(s.default,a({type:"password",placeholder:u?"************":""},g)),o().isEmpty(d)?"":i.createElement("div",{className:"integrations-add-card__error"},d)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i,r=n("../../node_modules/react/index.js"),o=n("./collaboration/workspace/controller/WorkspaceController.ts"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),p=n("./integrations/constants/integrationsConstants.ts"),u=n("./node_modules/lodash/lodash.js");let g=(0,c.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{o.default.findAll({limit:50,...e&&{cursor:e}}).then((i=>(e=u.get(i,"meta.nextCursor"),t=u.unionBy(t,i.data,"id"),n()))).catch((e=>n(e)))}),(()=>u.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const i=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:i,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),u.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:n,firstLoad:i,shouldDisableDropdown:o}=this.state,{selectedWorkspace:a}=this.store;return!o&&r.createElement(s.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||o,error:t,entityType:p.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&n.length>0&&!a&&!i&&"Please select a workspace",options:n,value:a,onTargetSelect:this.onTargetSelect})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i,r=n("../../node_modules/react/index.js"),o=n("./collaboration/workspace/controller/WorkspaceController.ts"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),p=n("./js/components/base/LoadingIndicator.js"),u=n("./integrations/api-observability/components/base/CustomDropdown.js"),g=n("./node_modules/lodash/lodash.js");let m=(0,c.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{o.default.findAll({limit:50,...e&&{cursor:e}}).then((i=>(e=g.get(i,"meta.nextCursor"),t=g.unionBy(t,i.data,"id"),n()))).catch((e=>n(e)))}),(()=>g.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const i=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:i,loading:!1})}}))}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),g.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1}))}renderLoadingState(){return r.createElement(s.default,{justifyContent:"space-between"},r.createElement("div",null,"Loading..."),r.createElement(p.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(){let{error:e,firstLoad:t,loading:n,workspaces:i}=this.state,{selectedWorkspace:o}=this.store;return e||!n&&i.length>0&&!g.get(o,"value")&&!t?{status:"error",message:e?r.createElement("div",null,"Unable to load workspaces.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchAllWorkspaces()}},"Retry")):"Please select a workspace."}:{}}render(){const{loading:e,workspaces:t,shouldDisableDropdown:n}=this.state,{selectedWorkspace:i}=this.store;return!n&&r.createElement(u.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||n,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,validationState:this.getValidationState(),options:t||[],value:i,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found"})}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i,r=n("../../node_modules/react/index.js"),o=n("./js/components/base/Buttons.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./js/modules/services/AnalyticsService.js"),g=n("./node_modules/classnames/index.js"),m=n.n(g),h=n("./js/components/base/LoadingIndicator.js"),b=n("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f.apply(this,arguments)}let v=(0,p.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:n,rule:i,service:a,alignLeft:l,integrationFormActions:p,source:g,labels:v,...y}=this.props,I=(null==v?void 0:v.add)||"Add Integration";let S=g||"team_integrations_create_forms";return r.createElement("div",{"data-testid":"add-integration-button",className:m()("integrations-add-actions__button--container",{"align-left":l})},r.createElement(o.Button,f({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():s.default.createIntegration(n||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&b.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),u.default.addEventV2({category:"integrations",action:i+"_created_integration",label:S,value:1}),p)p(t);else{if("api_github"===i&&"github"===a)c.default.transitionTo(d.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:b.get(e,"body.data.id")},{apiId:t.executor,workspaceId:n});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;c.default.transitionTo(e,t,n)}else c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:i});this.store.refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies(),this.store.setRuleSpecificTeamIntegrations(i,null)}else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(b.get(e,"error.details.message")||b.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},y)," ",this.store.isAdding?r.createElement(h.default,null):I))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i,r=n("../../node_modules/react/index.js"),o=n("./js/stores/StoreManager.js"),s=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/services/NavigationService.js"),d=n("./node_modules/classnames/index.js"),p=n.n(d);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}let g=(0,l.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(s.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,integrationFormActions:i,payload:o,labels:s,...l}=this.props,d=(null==s?void 0:s.cancel)||"Cancel";return r.createElement("div",{"data-testid":"cancel-integration-addition-button",className:p()("integrations-add-actions__button--container",{"align-left":n})},r.createElement(a.Button,u({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{i?i(o,"cancel"):(c.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",d," "))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Tooltips.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),g=n("./integrations/constants/integrationsConstants.ts"),m=n("./collaboration/utils/util.js"),h=n("./version-control/common/ForkLabel.js"),b=n("./node_modules/lodash/lodash.js");class f extends i.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:n,workspaceId:f}=this.props;let v,y;return e.isForked&&(v={id:e.id,forkLabel:e.forkLabel,model:e.type},y={id:e.baseCollectionUid,model:e.type}),i.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!b.isEmpty(t)&&e.disabled&&i.createElement(r.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},i.createElement(r.TooltipBody,null,t)),i.createElement(o.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let n=e.disabled?"content-color-tertiary":"",r={[g.entityTypes.COLLECTIONS]:i.createElement(a.default,{color:n}),[g.entityTypes.COLLECTIONS_FORKED]:i.createElement(l.default,{color:n}),[g.entityTypes.APIS]:i.createElement(c.default,{color:n}),[g.entityTypes.MONITORS]:i.createElement(d.default,{color:n}),[g.entityTypes.API_VERSIONS]:i.createElement(p.default,{color:n})};return t===g.entityTypes.WORKSPACES?i.createElement(u.default,{name:m.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===g.entityTypes.COLLECTIONS&&e&&e.forkLabel?r[g.entityTypes.COLLECTIONS_FORKED]:r[t]})(e,n),i.createElement(o.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},i.createElement(s.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&i.createElement(h.default,{workspaceId:f,forkedEntity:v,baseEntity:y,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=n("./js/external-navigation/ExternalNavigationService.js");function s(e){const{extUrl:t}=e;return i.createElement("span",{onClick:()=>(0,o.openExternalLink)(t,"_blank")},i.createElement(r.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,n){n.r(t),n.d(t,{AddIntegrationActions:function(){return g.default},AuthUserSegment:function(){return h.default},CustomLink:function(){return m.default},EntitySelector:function(){return p.default},EntitySelectorV2:function(){return u.default},FieldSegment:function(){return i.default},NicknameFieldSegment:function(){return r.default},NicknameFieldSegmentV2:function(){return o.default},SelectSegment:function(){return a.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return s.default},SensitiveFieldSegmentV2:function(){return b.default},WorkspaceSelector:function(){return c.default},WorkspaceSelectorV2:function(){return d.default}});var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),d=n("./js/components/base/Inputs.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let I=(0,a.observer)(i=class extends s.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:"",advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:i,serviceId:r,variables:o}=this.props.controller.integrationData,s={name:e,serviceId:r,executor:t,variables:o,ruleId:i,events:"both"===o.options||"events"==o.options,metrics:"both"===o.options||"metrics"==o.options,integrationId:n};return"us"===s.variables.region?s.variables.region="us1":"eu"===s.variables.region&&(s.variables.region="eu1"),s}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),b.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}render(){const{advanced:e,name:t,metrics:n,region:i,events:r,configuredOn:a,variables:b,executor:I,integrationId:S,ruleId:E,serviceId:A,errorMonitorMeta:_,loadingMonitorMeta:w}=this.state,{integrationFormActions:j,source:D}=this.props;let C={name:t,executor:I,variables:{region:b.region,options:(r&&n?"both":r&&"events")||n&&"metrics"||"none",...b.api_key?{api_key:b.api_key}:{}}};return s.createElement("div",null,s.createElement(l.NicknameFieldSegment,{id:"datadog-nickname",value:t,error:o().isEmpty(t)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:t.trim()})},onChange:e=>{this.setState({name:e})}}),s.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog",value:a,options:a?[a]:[],error:_,loading:w,handleRetry:()=>this.fetchMonitorMeta(I)}),s.createElement(p.default,{padding:{paddingTop:"spacing-l"}},s.createElement(u.default,{name:"Select Datadog site",value:b.region,direction:"column",onChange:e=>{this.setState({variables:{...b,region:e,api_key:""}})},label:s.createElement(g.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},s.createElement(m.default,{label:"US1 (datadoghq.com)",value:"us1"}),s.createElement(m.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),s.createElement(m.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),s.createElement(m.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),s.createElement(m.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"}))),s.createElement(l.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Datadog API Key",description:"Enter the API Key provided by Datadog or",customLink:s.createElement(v.default,{extUrl:`${c.default.getDatadogHostname(b.region)}/organization-settings/api-keys`},"generate one here"),id:"datadog-key",value:b.api_key||"",onChange:e=>{this.setState({variables:{...b,api_key:e}})}}),s.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options",s.createElement(h.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),e&&s.createElement("div",{className:"push-double--bottom"},s.createElement("div",{className:"integrations-checkbox__select-group--events"},s.createElement(d.Checkbox,{checked:r,onChange:()=>{this.toggle("events")}}),s.createElement("span",null,"Send events for completed runs")),s.createElement("div",{className:"integrations-checkbox__select-group--events"},s.createElement(d.Checkbox,{checked:n,onChange:()=>{this.toggle("metrics")}}),s.createElement("span",null,"Send metrics for each run"))),s.createElement(f.default,{disabled:!(a&&t&&b.region&&(r||n)&&(0,y.isFormUpdated)(this.getInitialState(),this.state)),integrationId:S,payload:C,rule:E,service:A,integrationFormActions:j,source:D}))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=(n("../../node_modules/mobx/lib/mobx.module.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js")),a=n("./node_modules/react-radio-group/lib/index.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),u=n("./node_modules/lodash/lodash.js");let g=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:i,serviceId:r,variables:o}=this.props.controller.integrationData;return{name:e,serviceId:r,executor:t,variables:o,ruleId:i,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,configuredOn:t,variables:n,executor:i,integrationId:o,ruleId:l,serviceId:g,errorMonitorMeta:m,loadingMonitorMeta:h,region:b}=this.state,{integrationFormActions:f,source:v}=this.props;let y={name:e,executor:i,variables:{region:n.region,...n.api_key?{api_key:n.api_key}:{}}};return r.createElement("div",null,r.createElement(s.NicknameFieldSegment,{id:"new-relic-nickname",value:e,error:u.isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(s.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",value:t,options:t?[t]:[],error:m,loading:h,handleRetry:()=>this.fetchMonitorMeta(i)}),r.createElement(s.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"New Relic API Key",description:"Enter the API Key provided by New Relic or ",customLink:r.createElement(d.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:n.api_key||"",onChange:e=>{this.setState({variables:{...n,api_key:e}})}}),r.createElement("div",{className:"push-double--bottom"},r.createElement("label",null,r.createElement("h4",{className:"integrations-add-card__label-title"},"Select New Relic region"),r.createElement("p",{className:"integrations-add-card__label-description"},"This helps us know what New Relic region to use")),r.createElement(a.RadioGroup,{name:"Select New Relic site",selectedValue:n.region,onChange:e=>{this.setState({variables:{...n,region:e}})}},r.createElement("div",{className:"integrations-radio-button__select-group--regions"},r.createElement("label",null,r.createElement(a.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),r.createElement("span",null,"US (.com)"))),r.createElement("div",{className:"integrations-radio-button__select-group--regions"},r.createElement("label",null,r.createElement(a.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),r.createElement("span",null,"EU (.eu)"))))),r.createElement(c.default,{disabled:!(t&&e&&n.region&&(0,p.isFormUpdated)(this.getInitialState(),this.state)),integrationId:o,payload:y,rule:l,service:g,integrationFormActions:f,source:v}))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i,r=n("../../node_modules/react/index.js"),o=n("./js/stores/StoreManager.js"),s=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("./js/services/NavigationService.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}let d=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(s.default)}render(){const{integrationId:e,integrationFormActions:t}=this.props;return r.createElement("div",{className:"integrations-edit-actions__button--container"},r.createElement(a.Button,c({className:"integrations-edit-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{t?t(e,"cancel"):(l.default.back(),this.store.resetAddIntegrationDependencies())}},this.props)," Cancel "))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i=n("../../node_modules/react/index.js"),r=(n("./node_modules/lodash/lodash.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js")),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function a(e){let{disabled:t,integrationId:n,payload:a,integrationFormActions:l,source:c,showDivider:d,...p}=e;return c||(c="team_integrations_edit_forms"),i.createElement("div",null,d&&i.createElement("hr",{className:"integration-edit-actions__separator"}),i.createElement("div",{className:"integration-edit-actions__button"},i.createElement(o.default,s({disabled:t,integrationId:n,payload:a,integrationFormActions:l,source:c},p)),i.createElement(r.default,s({integrationId:n,payload:a,integrationFormActions:l,source:c},p))))}a.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:n,payload:l,value:c}=e,[d,p]=(0,i.useState)(!1);return i.createElement(r.default,{className:"integrations-edit-actions__button--container-inline"},i.createElement(o.default,{type:"secondary",text:"Cancel",isDisabled:d,onClick:()=>{e.onSave("",a.RESET)}}),i.createElement(o.default,{type:"primary",text:"Save",isDisabled:t,isLoading:d,onClick:()=>{p(!0),s.default.updateIntegration(n,l).then((t=>{e.onSave(c)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{p(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i,r=n("../../node_modules/react/index.js"),o=n("./js/components/base/Buttons.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),p=n("./integrations/monitoring/constants.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./js/modules/services/AnalyticsService.js"),h=n("./node_modules/lodash/lodash.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(this,arguments)}let f=(0,u.observer)(i=class extends r.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:i,service:a,source:l,integrationFormActions:u,generatePayload:f,...v}=this.props,y=l||"team_integrations_edit_forms";return r.createElement("div",{className:"integrations-edit-actions__button--container"},r.createElement(o.Button,b({type:"primary",className:"integrations-edit-actions__button--save-changes",disabled:e||this.store.isAdding,size:"small",tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:async()=>{this.store.updateIsAdding(!0);let e=h.assign({},t);if(h.isFunction(f))try{e=await f(t)}catch(e){return this.store.updateIsAdding(!1),void pm.toasts.error(p.ERROR_ADDING_NEW_RELIC_TO_TEAM)}s.default.updateIntegration(n,e).then((e=>{this.store.updateIsAdding(!1),200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${h.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),m.default.addEventV2({category:"integrations",action:i+"_edited_integration",label:y,value:1}),u&&h.isFunction(u)?u(n):(c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:i}),this.store.setRuleSpecificTeamIntegrations(i,null),this.store.resetAddIntegrationDependencies())):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"})})).catch((e=>{this.store.updateIsAdding(!1),this.store.resetAddIntegrationDependencies(),pm.toasts.error(h.get(e,"error.details.message")||h.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}},v)," ",this.store.isAdding?r.createElement(g.default,null):"Save Changes"))}})||i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),o=n.n(r),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("./node_modules/lodash/lodash.js");class c extends i.Component{constructor(e){super(e)}render(){return i.createElement("div",{className:"team-integrations-error-state"},i.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=i.createElement(s.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=i.createElement(a.default,null)),t}(this.props.errorDetails)),i.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),i.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}c.propTypes={errorDetails:o().object,origin:o().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js":function(e,t,n){function i(e,t,n){if("string"==typeof e&&e.length<t){let i="",r=t-e.length;for(;i.length<r;)i+=n;return i+e}return e}n.r(t),t.default={format:function(e,t,n={}){const r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=new Date(e),s=n.padDate?i(o.getDate().toString(),2,"0"):o.getDate(),a=o.getMonth(),l=o.getFullYear(),c=o.getHours()%12||12,d=i(o.getMinutes().toString(),2,"0"),p=o.getHours()<12?"AM":"PM",u=t?`${c}:${d} ${p}, ${s} ${r[a]} ${l}`:`${s} ${r[a]}, ${l}`;return"NaN"===s.toString()?"string"==typeof e&&e.indexOf(" ")>-1?this.format(e.replace(" ","T"),t):"":u}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,n){n.r(t),n.d(t,{RESET:function(){return i}});const i="reset"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");const r="integrations";t.default={fetchIntegrationClassDetails(e,t){const n=`/integration-classes/${e}`;return i.HTTPGatewayService.request({data:{service:r,method:"get",path:n,query:t}})},fetchAvailableClasses:()=>i.HTTPGatewayService.request({data:{service:r,method:"get",path:"/integration-classes"}}),fetchAvailableServices:()=>i.HTTPGatewayService.request({data:{service:r,method:"get",path:"/services"}}),fetchIntegrationServiceDetails(e,t){const n=`/services/${e}`;return i.HTTPGatewayService.request({data:{service:r,method:"get",path:n,query:t}})}}},"./node_modules/react-radio-group/lib/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t,n){for(var i=!0;i;){var r=e,o=t,s=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,n=s,i=!0,a=c=void 0}};function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=s(n("./node_modules/prop-types/index.js")),d=s(n("../../node_modules/react/index.js")),p=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),r(t,[{key:"render",value:function(){var e=this.context.radioGroup,t=e.name,n=e.selectedValue,r=e.onChange,o={};return void 0!==n&&(o.checked=this.props.value===n),"function"==typeof r&&(o.onChange=r.bind(null,this.props.value)),d.default.createElement("input",i({},this.props,{type:"radio",name:t},o))}}]),t}(d.default.Component);t.Radio=p,p.contextTypes={radioGroup:c.default.object};var u=function(e){function t(){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),r(t,[{key:"getChildContext",value:function(){var e=this.props;return{radioGroup:{name:e.name,selectedValue:e.selectedValue,onChange:e.onChange}}}},{key:"render",value:function(){var e=this.props,t=e.Component,n=(e.name,e.selectedValue,e.onChange,e.children),i=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["Component","name","selectedValue","onChange","children"]);return d.default.createElement(t,i,n)}}]),t}(d.default.Component);t.RadioGroup=u,u.defaultProps={Component:"div"},u.propTypes={name:c.default.string,selectedValue:c.default.oneOfType([c.default.string,c.default.number,c.default.bool]),onChange:c.default.func,children:c.default.node.isRequired,Component:c.default.oneOfType([c.default.string,c.default.func,c.default.object])},u.childContextTypes={radioGroup:c.default.object}},"./integrations/constants/v10IntegrationConstants.ts":function(e,t,n){n.r(t),n.d(t,{DEPLOYMENTS:function(){return r},PERFORMANCE:function(){return o},TESTS:function(){return i}});const i="tests",r="deployments",o="performance"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,n){n.r(t),n.d(t,{isFormUpdated:function(){return o}});var i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(e,t){const n=r().pick(t,r().keys(e));return!r().isEqual(e,n)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=n("./node_modules/lodash/lodash.js"),o=n.n(r);const s="integrations",a="/integration-instances",l="/bulk";t.default={fetchIntegrationInstanceDetails(e,t){const n=`/integration-instances/${e}`;return i.HTTPGatewayService.request({data:{service:s,method:"get",path:n,query:t}})},getConfiguredIntegrationsForAnEntity(e,t,n){const r=o().join(n,",");return i.HTTPGatewayService.request({data:{service:s,method:"get",path:"/integration-instances",query:{entityType:e,entityId:t,clientCategory:r}}})},createIntegrationInstance(e,t,n){const r=o().map(n,((e,t)=>({key:t,value:e})));return i.HTTPGatewayService.request({data:{service:s,method:"post",path:"/integration-instances",body:{class:e,name:t,inputs:r}}})},createIntegrationInstanceBulk(e){const t=a+l;return i.HTTPGatewayService.request({data:{service:s,method:"post",path:t,body:e}})},updateIntegrationInstance(e,t,n){const r=`/integration-instances/${e}`,a=o().map(n,((e,t)=>({key:t,value:e}))),l={};return o().isNil(t)||(l.name=t),o().isEmpty(a)||(l.inputs=a),i.HTTPGatewayService.request({data:{service:s,method:"put",path:r,body:l}})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts":function(e,t,n){n.r(t);var i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=n("./node_modules/lodash/lodash.js"),o=n.n(r),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};t.default={runServiceAction(e,t,n,r,o,a){return s(this,void 0,void 0,(function*(){const s=`/services/${e}/actions/${t}/run`;return yield i.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:s,body:{integration:{instanceId:a||void 0,classId:r,classInputId:o},inputs:n}}})}))},getValidationError(e,t,n){return s(this,void 0,void 0,(function*(){if(o().isEmpty(e.validator)||this.state.inputErrors[e.key])return Promise.resolve();const i=e.validator,r=o().map(n,(n=>n.key===e.key?Object.assign(Object.assign({},n),{value:t}):n)),s=yield this.runServiceAction(i.service,i.serviceActionId,r,e.integrationClass,e.id,null),a=o().get(s,"body",!0);if("boolean"==typeof a&&a||o().isObject(a)&&(o().isEmpty(a)||o().isEqual(o().keys(a),["error"]))||o().isString(a)&&(o().isEmpty(a)||"true"===a.toLowerCase()))return Promise.resolve();let l="This field isn't valid";return o().isString(a)?l="false"===a.toLowerCase()?l:a:o().isObject(a)&&(l=a.message||a.msg||l),Promise.resolve(l)}))}}}}]);