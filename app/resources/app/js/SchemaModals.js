/*! For license information please see SchemaModals.js.LICENSE.txt */
(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[64],{"../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether-design-tokens/esmLib/src/tokens.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js");function u(e){var t=e.isHidden,n=e.direction,s=e.children,i=e.padding,r=e.label,u=e.helperText,p=e["data-testid"],m=e["data-click"],h=o.Children.map(s,(function(e){return(0,o.isValidElement)(e)&&e.type===d.default?e:null}));return o.createElement("div",{"data-testid":p,"data-click":m},r?o.createElement(l.default,{type:"h6",text:r}):"",u?o.createElement(a.default,{padding:"spacing-xs spacing-zero"},o.createElement(c.default,{type:"para"},u)):"",o.createElement(a.default,{hiddenFor:t?["mobile","tablet","computer"]:[],direction:n,padding:i,gap:"column"===n?"spacing-m":"spacing-l"},h))}t.default=u,u.defaultProps={label:"",isHidden:!1,direction:"column",padding:"spacing-s spacing-zero spacing-zero",helperText:"","data-testid":"aether-checkbox-group","data-click":""},u.propTypes={isHidden:i().bool,direction:i().oneOf(["row","column"]),children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired,padding:i().oneOfType([i().oneOf(Object.keys(r.globals.spacing)),i().shape({paddingTop:i().string,paddingBottom:i().string,paddingLeft:i().string,paddingRight:i().string}),i().string]),label:i().string,helperText:i().string,"data-testid":i().string,"data-click":i().string}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultMultiSelectMenuList:function(){return y},MultiSelectChip:function(){return g},MultiSelectChipCloseIcon:function(){return m},MultiSelectChipLabel:function(){return f},MultiSelectOption:function(){return u}});var o=n("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke-small.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=["isDisabled","isFocused","children"],d=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectOption",componentId:"sc-1e7h8n3-0"})(["display:flex;align-items:center;cursor:pointer;font-size:",";line-height:",";padding:",";border-radius:",";color:",";"," ",""],(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["line-height-m"]}),(function(e){return"".concat(e.theme["spacing-xs"]," ").concat(e.theme["spacing-m"],";")}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.isFocused&&!e.isDisabled&&"background-color: ".concat(e.theme["highlight-background-color-primary"],";")}),(function(e){return e.isDisabled&&"\n      cursor: not-allowed;\n      color: ".concat(e.theme["content-color-tertiary"],";\n    ")}));function u(e){var t=e.isDisabled,n=e.isFocused,i=e.children,a=(0,o.default)(e,c);return s.createElement(r.c.Option,a,s.createElement(d,{isDisabled:t,isFocused:n},i))}var p=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChipCloseIcon",componentId:"sc-1e7h8n3-1"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";margin-left:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:",";svg path{fill:",";}&:hover{background-color:",";svg path{fill:",";}}"],(function(e){return e.theme["size-s"]}),(function(e){return e.theme["size-s"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-primary"]}));function m(e){return s.createElement(r.c.MultiValueRemove,e,s.createElement(p,{className:"aether-multiselect-dropdown__multi-value-chip--remove-icon"},s.createElement(a.default,null)))}var h=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChip",componentId:"sc-1e7h8n3-2"})(["box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;height:",";padding:",";margin-bottom:",";margin-right:",";color:",";background-color:",";border-radius:",";"],(function(e){return e.theme["size-s"]}),(function(e){return"2px ".concat(e.theme["spacing-zero"]," 2px ").concat(e.theme["spacing-s"])}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["border-radius-default"]}));function g(e){var t=e.children;return s.createElement(h,{className:"aether-multiselect-dropdown__multi-select-chip"},t)}function f(e){var t=e.children;return s.createElement(l.default,{type:"body-medium"},t)}var b=(0,i.default)(r.c.MenuList).withConfig({displayName:"CustomMultiSelectComponents__StyledMenuList",componentId:"sc-1e7h8n3-3"})(["padding:8px;& .aether-multiselect-dropdown__group:not(:last-child){margin-bottom:12px;}& .aether-multiselect-dropdown__group:first-child{padding-top:4px;}"]);function y(e){var t=e.children;return s.createElement(b,e,t)}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js":function(e,t,n){"use strict";n.r(t),n.d(t,{customBaseStyles:function(){return a},postmanSpecificStyles:function(){return r}});var o=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").css)(["& .aether-multiselect-dropdown__single-value{color:",";left:",";right:",";}& .aether-multiselect-dropdown__control{box-sizing:border-box;height:auto;min-height:32px;max-height:72px;overflow-x:hidden;overflow-y:auto;border:",";transition:border-color 0.2s ease-in-out,box-shadow 0.2s ease-in-out;background-color:",";& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:none;}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__value-container,& .aether-multiselect-dropdown__single-value{color:",";}&:hover{border-color:",";}&--is-focused{outline:none;border:",";box-shadow:",";&:hover{border:",";}& .aether-multiselect-dropdown__single-value{right:",";}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:inline-flex;}}&--is-disabled{user-select:none;cursor:not-allowed;background:",";border:",";color:",";& .aether-multiselect-dropdown__dropdown-indicator svg path{fill:",";}& .aether-multiselect-dropdown__multi-select-chip{color:",";}&:hover{border-color:",";}}","}& .aether-multiselect-dropdown__input{color:"," !important;caret-color:",";height:16px;}& .aether-multiselect-dropdown__placeholder{color:",";}& .aether-multiselect-dropdown__dropdown-indicator{svg path{fill:",";}padding:",";}& .aether-multiselect-dropdown__clear-indicator{padding:",";}"],(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["spacing-xl"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-default"],";")}),(function(e){return e.theme["background-color-primary"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["input-border-color-default"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return"0 0 0 2px ".concat(e.theme["input-shadow-focus"],";")}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return e.theme["spacing-xxxl"]}),(function(e){return e.theme["spacing-zero"]}),(function(e){return e.theme["input-background-color-disabled"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"],";")}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["border-color-strong"]}),(function(e){var t=e.validationState;return t.status?"\n          border-color: ".concat(e.theme["input-border-color-".concat(t.status)],";\n\n          &:hover {\n            border-color: ").concat(e.theme["input-border-color-".concat(t.status)],";\n          }\n\n          &--is-focused,\n          &--is-focused:hover {\n            border-color: ").concat(e.theme["input-border-color-focus"],";;\n          }\n        "):""}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-s"],";")}),(function(e){return e.theme["spacing-zero"]})),a={container:function(e){return i(i({},e),{},{pointerEvents:"auto"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}}}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js":function(e,t,n){"use strict";n.r(t),n.d(t,{StyledCreatableReactSelect:function(){return b},StyledReactSelect:function(){return f},default:function(){return y}});var o=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/node_modules/react-select/dist/react-select.esm.js"),l=n("../../node_modules/@postman/aether/node_modules/react-select/creatable/dist/react-select.esm.js"),c=n("../../node_modules/prop-types/index.js"),d=n.n(c),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/CustomComponents.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,r.default)(a.default).withConfig({displayName:"DefaultMultiSelect__StyledReactSelect",componentId:"sc-14ka43a-0"})(["",""],m.postmanSpecificStyles),b=(0,r.default)(l.default).withConfig({displayName:"DefaultMultiSelect__StyledCreatableReactSelect",componentId:"sc-14ka43a-1"})(["",""],m.postmanSpecificStyles);function y(e){var t=e["aria-label"],n=e["aria-labelledby"],s=e.id,r=e.isOpen,a=e.onChange,l=e.onCreateNewOption,c=e.onClose,d=e.onOpen,m=e.options,h=e.value,y=e.placeholder,v=e.emptyStateMessage,I=e.isDisabled,_=e.isLoading,E=e.isOptionDisabled,S=e.viaPortal,C=e.closeMenuOnSelect,T=e.validationState,A=e.allowCreateNewOption,j=e.customOptionComponent,w=e.menuMaxHeight,O=e.triggerWidth,N=e.containerWidth,R=e.className;function P(e,t){var n=t.action,o=t.option;"create-option"===n&&l&&l(o),a(e,{action:n,option:o})}return i.createElement(i.Fragment,null,A?i.createElement(b,(0,o.default)({isMulti:!0,inputId:s,menuIsOpen:r},S&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:P,onMenuClose:c,onMenuOpen:d},h&&{value:h},{options:m,placeholder:y,isDisabled:I,closeMenuOnSelect:C,"aria-label":t,"aria-labelledby":n},E&&{isOptionDisabled:E},{emptyStateMessage:v,formatOptionLabel:!_&&j,validationState:T,classNamePrefix:"aether-multiselect-dropdown",className:R,maxMenuHeight:w,styles:{container:function(e){return g(g({},e),{},{pointerEvents:"auto"})},control:function(e){return g(g({},e),{},{width:O})},input:function(e){return g(g({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return g(g({},e),{},{padding:0,margin:0})},groupHeading:function(e){return g(g({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return g(g({},e),{},{width:N,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return g(g({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return g(g({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return g(g({},e),{},{padding:"0"})},option:function(e){return g(g({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return g(g({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return g(g({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:u.EmptyState,Option:p.MultiSelectOption,Menu:u.Menu,MenuList:_?u.StaticLoader:p.DefaultMultiSelectMenuList,MultiValueContainer:p.MultiSelectChip,MultiValueLabel:p.MultiSelectChipLabel,MultiValueRemove:p.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:u.GroupHeading}})):i.createElement(f,(0,o.default)({isMulti:!0,inputId:s,menuIsOpen:r},S&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:P,onMenuClose:c,onMenuOpen:d},h&&{value:h},{options:m,placeholder:y,isDisabled:I,closeMenuOnSelect:C,"aria-label":t,"aria-labelledby":n},E&&{isOptionDisabled:E},{emptyStateMessage:v,formatOptionLabel:!_&&j,validationState:T,classNamePrefix:"aether-multiselect-dropdown",className:R,maxMenuHeight:w,styles:{container:function(e){return g(g({},e),{},{pointerEvents:"auto"})},control:function(e){return g(g({},e),{},{width:O})},input:function(e){return g(g({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return g(g({},e),{},{padding:0,margin:0})},groupHeading:function(e){return g(g({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return g(g({},e),{},{width:N,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return g(g({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return g(g({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return g(g({},e),{},{padding:"0"})},option:function(e){return g(g({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return g(g({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return g(g({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:u.EmptyState,Option:p.MultiSelectOption,Menu:u.Menu,MenuList:_?u.StaticLoader:p.DefaultMultiSelectMenuList,MultiValueContainer:p.MultiSelectChip,MultiValueLabel:p.MultiSelectChipLabel,MultiValueRemove:p.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:u.GroupHeading}})))}y.defaultProps={isOpen:void 0,onClose:null,onCreateNewOption:null,onOpen:null,value:null,"aria-label":void 0,"aria-labelledby":void 0,placeholder:"Select option",emptyStateMessage:"No options found",menuMaxHeight:"auto",triggerWidth:"auto",containerWidth:"auto",className:"",isDisabled:!1,isLoading:!1,viaPortal:!1,isOptionDisabled:function(){},closeMenuOnSelect:!1,allowCreateNewOption:!1,customOptionComponent:null,validationState:{status:"",message:""}},y.propTypes={onChange:d().func.isRequired,options:d().arrayOf(d().shape({label:d().string,value:d().oneOfType([d().string,d().number])})).isRequired,id:d().string.isRequired,"aria-label":d().string,"aria-labelledby":d().string,value:d().array,isOpen:d().bool,onClose:d().func,onCreateNewOption:function(e){var t=e.allowCreateNewOption,n=e.onCreateNewOption;return!t&&n?new Error("MultiSelect: onCreateNewOption is only allowed to be used when the prop allowCreateNewOption is passed as true."):n&&"function"!=typeof n?new Error("MultiSelect: Expected the type of the onCreateNewOption to be a function."):null},onOpen:d().func,placeholder:d().string,emptyStateMessage:d().string,menuMaxHeight:d().oneOfType([d().number,d().string]),triggerWidth:d().oneOfType([d().number,d().string]),containerWidth:d().oneOfType([d().string,d().number]),className:d().string,isDisabled:d().bool,isLoading:d().bool,viaPortal:d().bool,isOptionDisabled:d().func,closeMenuOnSelect:d().bool,allowCreateNewOption:d().bool,customOptionComponent:d().func,validationState:d().shape({status:d().oneOf(["","success","error","warning"]),message:d().string})}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownContainer.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownLabel.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownValidationMessage.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js");function h(e){var t=(0,i.useRef)(null),n=(0,i.useState)(""),r=(0,s.default)(n,2),a=r[0],l=r[1],h=e.type,g=e.label,f=e.helperText,b=e.id,y=e.validationState,v=e["data-testid"],I=e["data-click"];return(0,i.useEffect)((function(){t.current&&(t.current.offsetWidth?l(t.current.offsetWidth):l("auto"))}),[]),"compact"===h?i.createElement(m.default,e):i.createElement(c.default,{ref:t,"data-aether-id":"aether-multiSelect","data-testid":v,"data-click":I},i.createElement(d.default,{id:b,label:g,helperText:f}),i.createElement(p.default,(0,o.default)({containerWidth:a},e)),i.createElement(u.default,{validationState:y}))}h.defaultProps={type:"default",id:"",label:"",helperText:"",validationState:{status:"",message:""},"data-testid":"aether-multi-select","data-click":""},h.propTypes={type:a().oneOf(["default","compact"]),id:a().string,label:function(e){var t=e.label;return t&&t.type!==l.default&&"string"!=typeof t?new Error("MultiSelect: label prop only accepts string or the Aether's Label component as valid value."):null},helperText:a().string,validationState:a().shape({status:a().oneOf(["","success","error","warning"]),message:a().string}),"data-testid":a().string,"data-click":a().string}},"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/MergeConditions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function i(){return o.createElement(s.default,{name:"illustration-merge-conditions"})}},"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoMonitor.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function i(){return o.createElement(s.default,{name:"illustration-no-monitor"})}},"../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuDivider.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.hr.withConfig({displayName:"MenuDivider__StyledMenuDivider",componentId:"dii7go-0"})(["border:none;border-bottom:",";margin:",";"],(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-default"],";")}),(function(e){return e.theme["spacing-s"]}));function i(){return o.createElement(s,null)}i.displayName="MenuDivider",t.default=i},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=r.default.span.withConfig({displayName:"Step__StyledStatusIndicator",componentId:"hb80lw-0"})(["width:12px;height:12px;box-sizing:border-box;border-radius:",";border:",";background-color:",";"],(function(e){return e.theme["border-radius-max"]}),(function(e){return"progress"!==e.status?"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["grey-40"]):""}),(function(e){return"progress"===e.status?e.theme["base-color-brand"]:e.theme["background-color-primary"]})),p=r.default.div.withConfig({displayName:"Step__StyledStepWrapper",componentId:"hb80lw-1"})(["display:inline;padding-left:",";& > .aether-step__label{& > .aether-button__text{color:",";&:hover{color:",";}}}"],(function(e){return e.theme["spacing-xs"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-primary"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-link"]})),m=(0,r.default)(d.default).withConfig({displayName:"Step__StyledCustomCurrentStepText",componentId:"hb80lw-2"})(["line-height:1.334;"]);function h(e){var t=e.label,n=e.status,s=e.isDisabled,i=e._stepIndex,r=e._onChange,d=e._isActive,h=e.className;return o.createElement(l.default,{basis:"0px",grow:1,shrink:1,alignItems:"center",className:h,padding:{paddingRight:"spacing-l"}},"completed"===n?o.createElement(a.default,{name:"icon-state-success-stroke-small",color:"content-color-primary",size:"small"}):o.createElement(u,{status:n}),o.createElement(p,{isDisabled:s},d?o.createElement(m,{color:"content-color-primary"},t):o.createElement(c.default,{className:"aether-step__label",isDisabled:s,text:t,type:"plain",onClick:function(){!s&&r&&r(i)}})))}h.defaultProps={className:"",status:"pending",isDisabled:!1,_isActive:!1,_stepIndex:0,_onChange:null},h.propTypes={label:i().string.isRequired,isDisabled:i().bool,_isActive:i().bool,status:i().oneOf(["pending","progress","completed"]),_stepIndex:i().number,_onChange:i().func,className:i().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=r.default.div.withConfig({displayName:"StepHeader__StyledProgressLine",componentId:"sc-1xnw5na-0"})(["position:relative;width:100%;height:2px;background-color:",";&:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:2px;width:",";max-width:100%;background-color:",";}"],(function(e){return e.theme["border-color-strong"]}),(function(e){return"".concat((e.activeStepIndex+1)/e.totalSteps*100,"%")}),(function(e){return e.theme["stepper-progress-line-background-color"]}));function d(e){var t=0,n=e._activeStepIndex,s=e._onChange,i=e.className,r=e.children,d=o.Children.map(r,(function(e){var i=e;return(0,o.isValidElement)(e)&&[a.default].includes(e.type)?(i=(0,o.cloneElement)(e,{_isActive:t===n,_stepIndex:t,_onChange:s}),t+=1,i):null}));return o.createElement(l.default,{gap:"spacing-s",className:i,direction:"column"},o.createElement(c,{activeStepIndex:n,totalSteps:d.length}),o.createElement(l.default,null,d))}d.defaultProps={className:"",_activeStepIndex:0,_onChange:null},d.propTypes={_activeStepIndex:i().number,_onChange:i().func,className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=r.default.div.withConfig({displayName:"StepPanel__StyledStepPanelElement",componentId:"sc-7pb8oz-0"})(["display:",";color:",";"],(function(e){return e._isActive?"block":"none"}),(function(e){return e.theme["content-color-primary"]}));function p(e){var t=e._isActive,n=e._index,s=e.heading,i=e.description,r=e.primaryAction,p=e.secondaryAction,m=e.className,h=e.children;return o.createElement(u,{_isActive:t,className:m,key:"STEP_CONTENT ".concat(n)},o.createElement(d.default,{direction:"column",gap:"spacing-xxl"},o.createElement(d.default,{direction:"column",gap:"spacing-l"},s||i?o.createElement(d.default,{direction:"column",gap:"spacing-s"},s?o.createElement(a.default,{type:"h3",text:s}):"",i?o.createElement(c.default,{type:"para"},i):""):"",h),o.createElement(d.default,{gap:"spacing-s",grow:1,shrink:1,justifyContent:"flex-end"},function(e){if(e&&e.type===l.default&&"secondary"===(e.props&&e.props.type))return e;return null}(p),function(e){if(e&&e.type===l.default&&"primary"===(e.props&&e.props.type))return e;return null}(r))))}p.defaultProps={_isActive:!1,heading:"",description:"",primaryAction:null,secondaryAction:null,className:"",_index:null},p.propTypes={_isActive:i().bool,_index:i().number,heading:i().string,description:i().string,primaryAction:function(e){var t=e.primaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: primaryAction prop only accepts Aether button component.");if("primary"!==(t.props&&t.props.type))return new Error("StepPanel: primaryAction prop only accepts button type primary.")}return null},secondaryAction:function(e){var t=e.secondaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: secondaryAction prop only accepts Aether button component.");if("secondary"!==(t.props&&t.props.type))return new Error("StepPanel: secondaryAction prop only accepts button type secondary.")}return null},className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),l=r.default.div.withConfig({displayName:"StepPanels__StyledStepPanelContainer",componentId:"sc-1bky6oo-0"})(["padding-top:",";padding-bottom:",";"],(function(e){return e.theme["spacing-xl"]}),(function(e){return e.theme["spacing-xl"]}));function c(e){var t=0,n=e._activeStepIndex,s=e.className,i=e.children,r=o.Children.map(i,(function(e){var s=e;return(0,o.isValidElement)(e)&&[a.default].includes(e.type)?(s=(0,o.cloneElement)(e,{_isActive:t===n,_index:t}),t+=1,s):null}));return o.createElement(l,{className:s},r)}c.defaultProps={_activeStepIndex:0,className:""},c.propTypes={_activeStepIndex:i().number,className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function c(e){var t=e.activeStepIndex,n=e.onChange,s=e.className,i=e.children,c=e["data-testid"],d=e["data-click"],u=o.Children.map(i,(function(e){if((0,o.isValidElement)(e)){if([r.default].includes(e.type))return(0,o.cloneElement)(e,{_activeStepIndex:t,_onChange:n});if([a.default].includes(e.type))return(0,o.cloneElement)(e,{_activeStepIndex:t})}return null}));return o.createElement(l.default,{className:s,direction:"column","data-aether-id":"aether-stepper","data-testid":c,"data-click":d,width:"100%"},u)}c.defaultProps={className:"",onChange:null,"data-testid":"aether-stepper","data-click":""},c.propTypes={activeStepIndex:i().number.isRequired,onChange:i().func,className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired,"data-testid":i().string,"data-click":i().string}},"./node_modules/@postman/data-editor/lib/components/ListRenderer2.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=c(s),r=c(n("./node_modules/lodash/map.js")),a=c(n("./node_modules/lodash/times.js")),l=c(n("./node_modules/lodash/filter.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={height:e.config.height,overscanColumnCount:0,overscanRowCount:5,rowHeight:30},o.renderColumn=o.renderColumn.bind(o),o._rowRenderer=o._rowRenderer.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"renderColumn",value:function(e){var t=e.rowIndex,n=e.columnIndex,o=e.style;return i.default.createElement("div",{className:"data-editor__cell",key:t+"-"+n,style:o,onClick:this.props.onColumnClick.bind(this,t,n)},this.props.cellRenderer({rowIndex:t,columnIndex:n}))}},{key:"_rowRenderer",value:function(e){var t=this,n=(0,l.default)(this.props.config.widths,(function(e,n){return n<t.props.columnCount})),o=(0,r.default)(n,(function(n,o){return t.renderColumn({rowIndex:e,columnIndex:o,style:{width:n+"%"}})}));return i.default.createElement("div",{className:"data-editor__row",key:""+e},this.props.rowRenderer&&this.props.rowRenderer(o,e,{}))}},{key:"render",value:function(){var e=this,t=["data-editor__rows"];return this.props.className&&t.push(this.props.className),i.default.createElement("div",{className:t},(0,a.default)(this.props.rowCount,(function(t){return e._rowRenderer(t)})))}}]),t}(s.PureComponent);t.default=d},"./node_modules/@postman/data-editor/lib/components/base/ArrayMeta.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=l(s),r=l(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=l(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleAddChild=n.handleAddChild.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column,o=e.direction;t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:o})}},{key:"handleAddChild",value:function(){this.props.onAction&&this.props.onAction("create")}},{key:"render",value:function(){var e=a.default.getImmutablePathValue(this.props.value,["childrenCount"]);return i.default.createElement("div",{className:"data-editor__array-meta"},"Array ("+e+" items)",i.default.createElement("div",{className:"data-editor__add-child",onClick:this.handleAddChild},"+"))}}]),t}(s.Component);t.default=c,c.contextTypes={events:r.default.object}},"./node_modules/@postman/data-editor/lib/components/base/BooleanInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=c(s),r=c(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=n("./node_modules/react-shortcuts/lib/index.js"),l=c(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleChange=n.handleChange.bind(n),n.handleShortcut=n.handleShortcut.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column;t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.refs.input&&this.refs.input.focus()}},{key:"handleChange",value:function(e){this.props.onAction&&this.props.onAction("edit",{value:e.target.value})}},{key:"handleShortcut",value:function(e,t){var n=l.default.getImmutablePathValue(this.props.value,["value"]);switch(e){case"MOVE_LEFT":0===this.refs.input.selectionStart&&(t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"}));break;case"MOVE_RIGHT":this.refs.input.selectionStart===n.length&&(t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"}));break;case"MOVE_UP":t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"});break;case"MOVE_DOWN":t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"})}}},{key:"render",value:function(){var e=l.default.getImmutablePathValue(this.props.value,["value"]);return i.default.createElement(a.Shortcuts,{name:"navigation",handler:this.handleShortcut,className:"data-editor__cell__boolean"},i.default.createElement("input",{ref:"input",onChange:this.handleChange,value:e}))}}]),t}(s.Component);t.default=d,d.contextTypes={events:r.default.object}},"./node_modules/@postman/data-editor/lib/components/base/NumberInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=c(s),r=c(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=n("./node_modules/react-shortcuts/lib/index.js"),l=c(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleChange=n.handleChange.bind(n),n.handleShortcut=n.handleShortcut.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column;t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.refs.input&&this.refs.input.focus()}},{key:"handleChange",value:function(e){this.props.onAction&&this.props.onAction("edit",{value:parseInt(e.target.value,10)})}},{key:"handleShortcut",value:function(e,t){var n=l.default.getImmutablePathValue(this.props.value,["value"]);switch(e){case"MOVE_LEFT":0===this.refs.input.selectionStart&&(t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"}));break;case"MOVE_RIGHT":this.refs.input.selectionStart===n.length&&(t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"}));break;case"MOVE_UP":t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"});break;case"MOVE_DOWN":t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"})}}},{key:"render",value:function(){var e=l.default.getImmutablePathValue(this.props.value,["value"]);return i.default.createElement(a.Shortcuts,{name:"navigation",handler:this.handleShortcut,className:"data-editor__cell__number"},i.default.createElement("input",{ref:"input",onChange:this.handleChange,value:e}))}}]),t}(s.Component);t.default=d,d.contextTypes={events:r.default.object}},"./node_modules/@postman/data-editor/lib/components/base/ObjectKeyInput.js":function(e,t,n){"use strict";var o=n("../../node_modules/console-browserify/index.js");Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("../../node_modules/react/index.js"),r=u(i),a=u(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),l=n("./node_modules/react-shortcuts/lib/index.js"),c=u(n("./node_modules/@postman/data-editor/lib/components/base/TypeSelector.js")),d=u(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function u(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleKeyChange=n.handleKeyChange.bind(n),n.handleTypeChange=n.handleTypeChange.bind(n),n.handleShortcut=n.handleShortcut.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column;o.log("test"),t===this.props.cellInfo.node&&n===this.props.cellInfo.column?(o.log(this.refs.input),this.refs.input&&this.refs.input.focus()):o.log("not meant for me")}},{key:"handleShortcut",value:function(e,t){switch(t&&t.preventDefault(),t&&t.stopPropagation(),e){case"MOVE_LEFT":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"});break;case"MOVE_RIGHT":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"});break;case"MOVE_UP":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"});break;case"MOVE_DOWN":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"})}}},{key:"handleKeyChange",value:function(e){this.props.onAction&&this.props.onAction("edit",{key:e.target.value})}},{key:"handleTypeChange",value:function(e){this.props.onAction&&this.props.onAction("edit",{type:e.target.value})}},{key:"render",value:function(){var e=d.default.getImmutablePathValue(this.props.value,["key"]),t=d.default.getImmutablePathValue(this.props.value,["type"]);return r.default.createElement(l.Shortcuts,{name:"navigation",handler:this.handleShortcut,className:"data-editor__object-key"},r.default.createElement("div",{className:"data-editor__object-key__content",style:this.props.style},r.default.createElement("input",{ref:"input",value:e,onChange:this.handleKeyChange}),r.default.createElement(c.default,{value:t,onChange:this.handleTypeChange})))}}]),t}(i.Component);t.default=p,p.contextTypes={events:a.default.object}},"./node_modules/@postman/data-editor/lib/components/base/ObjectMeta.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=l(s),r=l(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=l(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleAddChild=n.handleAddChild.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column,o=e.direction;t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:o})}},{key:"handleAddChild",value:function(){this.props.onAction&&this.props.onAction("create")}},{key:"render",value:function(){var e=a.default.getImmutablePathValue(this.props.value,["childrenCount"]);return i.default.createElement("div",{className:"data-editor__object-meta"},"Object ("+e+" items)",i.default.createElement("div",{className:"data-editor__add-child",onClick:this.handleAddChild},"+"))}}]),t}(s.Component);t.default=c,c.contextTypes={events:r.default.object}},"./node_modules/@postman/data-editor/lib/components/base/ObjectNameInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=d(s),r=d(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=n("./node_modules/react-shortcuts/lib/index.js"),l=d(n("./node_modules/@postman/data-editor/lib/components/base/TypeSelector.js")),c=d(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleChangeName=n.handleChangeName.bind(n),n.handleChangeType=n.handleChangeType.bind(n),n.handleCollapse=n.handleCollapse.bind(n),n.handleShortcut=n.handleShortcut.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column;t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.refs.input&&this.refs.input.focus()}},{key:"handleChangeName",value:function(e){this.props.onAction&&this.props.onAction("edit",{name:e.target.value})}},{key:"handleChangeType",value:function(e){this.props.onAction&&this.props.onAction("edit",{type:e.target.value})}},{key:"handleShortcut",value:function(e,t){switch(t&&t.preventDefault(),t&&t.stopPropagation(),e){case"MOVE_LEFT":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"});break;case"MOVE_RIGHT":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"});break;case"MOVE_UP":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"});break;case"MOVE_DOWN":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"})}}},{key:"handleCollapse",value:function(){this.props.isCollapsed?this.props.onAction&&this.props.onAction("expand"):this.props.onAction&&this.props.onAction("collapse")}},{key:"render",value:function(){var e=c.default.getImmutablePathValue(this.props.value,["name"]),t=c.default.getImmutablePathValue(this.props.value,["type"]),n=this.props.isCollapsed;return i.default.createElement(a.Shortcuts,{name:"navigation",handler:this.handleShortcut,className:"data-editor__object-name"},i.default.createElement("div",{className:"data-editor__object-name__content",style:this.props.style},i.default.createElement("div",{className:"data-editor__collapse",onClick:this.handleCollapse},i.default.createElement("div",{className:"data-editor__collapse__icon "+(n?"is-collapsed":"")})),i.default.createElement("input",{ref:"input",value:e,onChange:this.handleChangeName}),i.default.createElement(l.default,{value:t,onChange:this.handleChangeType})))}}]),t}(s.Component);t.default=u,u.contextTypes={events:r.default.object}},"./node_modules/@postman/data-editor/lib/components/base/ObjectValueInput.js":function(e,t,n){"use strict";var o=n("../../node_modules/console-browserify/index.js");Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("../../node_modules/react/index.js"),r=d(i),a=d(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),l=n("./node_modules/react-shortcuts/lib/index.js"),c=d(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleChange=n.handleChange.bind(n),n.handleShortcut=n.handleShortcut.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column;o.log("test2"),t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.refs.input&&this.refs.input.focus()}},{key:"handleShortcut",value:function(e,t){switch(t&&t.preventDefault(),t&&t.stopPropagation(),e){case"MOVE_LEFT":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"});break;case"MOVE_RIGHT":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"});break;case"MOVE_UP":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"});break;case"MOVE_DOWN":this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"})}}},{key:"handleChange",value:function(e){this.props.onAction&&this.props.onAction("edit",{value:e.target.value})}},{key:"render",value:function(){var e=c.default.getImmutablePathValue(this.props.value,["value"]);return r.default.createElement(l.Shortcuts,{name:"navigation",handler:this.handleShortcut,className:"data-editor__object-value"},r.default.createElement("div",{className:"data-editor__object-value__content",style:this.props.style},r.default.createElement("input",{ref:"input",value:e,onChange:this.handleChange})))}}]),t}(i.Component);t.default=u,u.contextTypes={events:a.default.object}},"./node_modules/@postman/data-editor/lib/components/base/StringInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=c(s),r=c(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=n("./node_modules/react-shortcuts/lib/index.js"),l=c(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=n.handleFocus.bind(n),n.handleChange=n.handleChange.bind(n),n.handleShortcut=n.handleShortcut.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"handleFocus",value:function(e){var t=e.node,n=e.column;t===this.props.cellInfo.node&&n===this.props.cellInfo.column&&this.refs.input&&this.refs.input.focus()}},{key:"handleChange",value:function(e){this.props.onAction&&this.props.onAction("edit",{value:e.target.value})}},{key:"handleShortcut",value:function(e,t){var n=l.default.getImmutablePathValue(this.props.value,["value"]);switch(e){case"MOVE_LEFT":0===this.refs.input.selectionStart&&(t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"}));break;case"MOVE_RIGHT":this.refs.input.selectionStart===n.length&&(t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"}));break;case"MOVE_UP":t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"});break;case"MOVE_DOWN":t&&t.preventDefault(),t&&t.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"})}}},{key:"render",value:function(){var e=l.default.getImmutablePathValue(this.props.value,["value"]);return i.default.createElement(a.Shortcuts,{name:"navigation",handler:this.handleShortcut,className:"data-editor__cell__string"},i.default.createElement("input",{ref:"input",onChange:this.handleChange,value:e}))}}]),t}(s.Component);t.default=d,d.contextTypes={events:r.default.object}},"./node_modules/@postman/data-editor/lib/components/base/TypeSelector.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("../../node_modules/react/index.js"),r=(o=i)&&o.__esModule?o:{default:o};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"render",value:function(){return r.default.createElement("select",{tabIndex:-1,value:this.props.value,onChange:this.props.onChange},r.default.createElement("option",{value:"string"},"str"),r.default.createElement("option",{value:"number"},"num"),r.default.createElement("option",{value:"boolean"},"bool"),r.default.createElement("option",{value:"array"},"arr"),r.default.createElement("option",{value:"object"},"obj"))}}]),t}(i.Component);t.default=c},"./node_modules/@postman/data-editor/lib/containers/DataEditor.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=I(s),r=I(n("./node_modules/@postman/data-editor/node_modules/prop-types/index.js")),a=I(n("./node_modules/lodash/get.js")),l=I(n("./node_modules/lodash/map.js")),c=I(n("./node_modules/lodash/reduce.js")),d=I(n("./node_modules/lodash/findIndex.js")),u=I(n("./node_modules/lodash/isEqual.js")),p=n("./node_modules/fbemitter/index.js"),m=n("./node_modules/react-shortcuts/lib/index.js"),h=I(n("./node_modules/@postman/data-editor/lib/utilities/utils.js")),g=I(n("./node_modules/@postman/data-editor/lib/shortcuts.js")),f=I(n("./node_modules/@postman/data-editor/lib/utilities/GenerateRenderers.js")),b=I(n("./node_modules/@postman/data-editor/lib/reducers/index.js")),y=I(n("./node_modules/@postman/data-editor/lib/containers/Header.js")),v=I(n("./node_modules/@postman/data-editor/lib/components/ListRenderer2.js"));function I(e){return e&&e.__esModule?e:{default:e}}var _=new m.ShortcutManager(g.default),E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.generateGridToColumnMap(e.config.columns);var o=h.default.isMap(e.input)?{state:e.input,maxDepth:h.default.getMaxDepth(e.input)}:h.default.flattenNodes(e.config,e.input);return n.state={is:o.state,columnWidths:(0,l.default)(n.GridToColumnMap,(function(e){return e.width}))},n.listConfig={widths:n.state.columnWidths,cellWidth:260+20*o.maxDepth,height:e.config.height},n.reducer=new b.default(e.config),n.initializeRenderers(e.config),n.events=new p.EventEmitter,n.handleColumnResize=n.handleColumnResize.bind(n),n.handleColumnClick=n.handleColumnClick.bind(n),n.handleAction=n.handleAction.bind(n),n.moveToCell=n.moveToCell.bind(n),n._renderColumn=n._renderColumn.bind(n),n._renderRow=n._renderRow.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getChildContext",value:function(){return{events:this.events,shortcuts:_}}},{key:"componentDidMount",value:function(){!h.default.isMap(this.props.input)&&this.generateCreateRow(this.props.config),this.events.addListener("moveToCell",this.moveToCell)}},{key:"componentWillReceiveProps",value:function(e){if(!(0,u.default)(this.props.config.columns,e.config.columns)){this.generateGridToColumnMap(e.config.columns);var t=(0,l.default)(this.GridToColumnMap,(function(e){return e.width}));this.listConfig=Object.assign({},this.listConfig,{widths:t}),this.setState({columnWidths:t})}}},{key:"componentWillUnmount",value:function(){this.events.removeAllListeners("moveToCell")}},{key:"generateGridToColumnMap",value:function(e){this.GridToColumnMap=(0,c.default)(e,(function(e,t){return t.hidden||("string"===t.type||"number"===t.type||"boolean"===t.type?e.push({name:t.name,index:0,width:t.width,renderer:(0,a.default)(t,"renderer"),header:(0,a.default)(t,"label",t.name),resize:!!t.resize}):"object"!==t.type&&"array"!==t.type||(e.push({name:t.name,index:0,width:t.width/2,renderer:(0,a.default)(t,"renderer"),header:(0,a.default)(t,"label.key",t.name),resize:!!t.resize}),e.push({name:t.name,index:1,width:t.width/2,renderer:(0,a.default)(t,"renderer"),header:(0,a.default)(t,"label.value",t.name),resize:!!t.resize}))),e}),[])}},{key:"initializeRenderers",value:function(e){this.renderers=(0,f.default)(e.renderers)}},{key:"generateCreateRow",value:function(e){var t=this;this.setState((function(e){return{is:t.reducer.reduce(e.is,{source:{},type:"create"})}}))}},{key:"handleColumnResize",value:function(e){this.listConfig=Object.assign({},this.listConfig,{widths:e}),this.setState({columnWidths:e})}},{key:"handleColumnClick",value:function(e,t){this.events.emit("focusCell",{node:h.default.getImmutablePathValue(this.state.is,["order",e]),column:(0,a.default)(this.GridToColumnMap,"["+t+"].name")})}},{key:"handleAction",value:function(e,t,n){var o=this,s=h.default.getImmutablePathValue(this.state.is,["order"]);"edit"===t&&h.default.getLastInList(s)===e.node&&this.generateCreateRow(),this.setState((function(s){var i=h.default.createAction(e,t,n);return{is:o.reducer.reduce(s.is,i)}}),(function(){o.props.onChange&&o.props.onChange(o.state.is)}))}},{key:"moveToCell",value:function(e){var t=e.node,n=e.column,o=e.direction,s=h.default.getImmutablePathValue(this.state.is,["order"]),i=this.GridToColumnMap,r=h.default.findIndexInOrder(s,t),l=(0,d.default)(i,(function(e){return e.name===n})),c=void 0,u=void 0,p=s.size-1,m=this.GridToColumnMap.length-1;switch(o){case"left":case"shiftTab":l-1>=0?(c=r,u=l-1):r-1>=0&&(c=r-1,u=m),this.events.emit("focusCell",{node:h.default.getImmutablePathValue(this.state.is,["order",c]),column:(0,a.default)(this.GridToColumnMap,"["+u+"].name"),direction:o});break;case"right":case"tab":l+1<=m?(c=r,u=l+1):r+1<=p&&(c=r+1,u=0),this.events.emit("focusCell",{node:h.default.getImmutablePathValue(this.state.is,["order",c]),column:(0,a.default)(this.GridToColumnMap,"["+u+"].name"),direction:o});break;case"up":r-1>=0&&(c=h.default.getImmutablePathValue(this.state.is,["order",r-1]),this.events.emit("focusCell",{node:c,column:n,direction:o}));break;case"down":r+1<=p&&(c=h.default.getImmutablePathValue(this.state.is,["order",r+1]),this.events.emit("focusCell",{node:c,column:n,direction:o}))}}},{key:"_renderColumn",value:function(e){var t=e.rowIndex,n=e.columnIndex,o=h.default.getImmutablePathValue(this.state.is,["order",t]),s=h.default.getImmutablePathValue(this.state.is,["rows",""+o,"columns",this.GridToColumnMap[n].name]),i=o;if(s){var r=h.default.getImmutablePathValue(s,["type"]),a=20*h.default.getImmutablePathValue(this.state.is,["rows",""+o,"depth"])+"px",l=h.default.getImmutablePathValue(s,["meta"]),c=!!h.default.getImmutablePathValue(this.state.is,["collapsedRows",""+i]);return this.GridToColumnMap[n].renderer?this.GridToColumnMap[n].renderer&&"function"==typeof this.GridToColumnMap[n].renderer&&this.GridToColumnMap[n].renderer(l,this.handleAction.bind(this,{node:i,column:this.GridToColumnMap[n].name}),{isCollapsed:c,subColumnIndex:this.GridToColumnMap[n].index},{marginLeft:a},{node:i,column:this.GridToColumnMap[n].name}):this.renderers&&this.renderers[r]&&"function"==typeof this.renderers[r]&&this.renderers[r](l,this.handleAction.bind(this,{node:i,column:this.GridToColumnMap[n].name}),{isCollapsed:c,subColumnIndex:this.GridToColumnMap[n].index},{marginLeft:a},{node:i,column:this.GridToColumnMap[n].name})}}},{key:"_renderRow",value:function(e,t,n){var o=h.default.getImmutablePathValue(this.state.is,["order",t]);return this.renderers.row&&this.renderers.row({children:e,index:t,nodeId:o},this.handleAction.bind(this,{node:o}),{isCollapsed:!1,subColumnIndex:0},n)}},{key:"render",value:function(){var e=h.default.getImmutablePathValue(this.state.is,["order"]).size;return i.default.createElement("div",{className:"data-editor"},i.default.createElement(y.default,{columns:this.GridToColumnMap,columnWidths:this.state.columnWidths,renderers:this.renderers,onColumnResize:this.handleColumnResize}),i.default.createElement(v.default,{state:this.state.is,rowCount:e,columnCount:this.GridToColumnMap.length,config:this.listConfig,cellRenderer:this._renderColumn,rowRenderer:this._renderRow,className:this.props.className,classNames:this.props.config.classNames,onColumnClick:this.handleColumnClick}))}}]),t}(s.Component);E.childContextTypes={shortcuts:r.default.object.isRequired,events:r.default.object},t.default=E},"./node_modules/@postman/data-editor/lib/containers/Header.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n("../../node_modules/react/index.js"),i=p(s),r=p(n("./node_modules/lodash/reduce.js")),a=p(n("./node_modules/lodash/map.js")),l=p(n("./node_modules/lodash/clone.js")),c=p(n("./node_modules/lodash/isEmpty.js")),d=p(n("./node_modules/lodash/get.js")),u=n("./node_modules/@postman/react-draggable/dist/react-draggable.js");function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={widths:(0,a.default)(e.columns,(function(e){return e.width}))},n.widths=n.state.widths,n.handleResize=n.handleResize.bind(n),n.handleResizeStart=n.handleResizeStart.bind(n),n.handleResizeStop=n.handleResizeStop.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({widths:e.columnWidths},(function(){t.widths=e.columnWidths}))}},{key:"handleResize",value:function(e){var t=this.initial.pageX-e.pageX,n=this.initial.index,o=(0,l.default)(this.widths),s=t/this.refs.DataEditorHeader.offsetWidth*100,i=o[n]-s,r=o[n+1]+s;i>5&&r>5&&(o[n]=i,o[n+1]=r,this.setState({widths:o}),this.widths=o,this.initial.pageX=e.pageX)}},{key:"handleResizeStart",value:function(e){var t=Number(e.target.getAttribute("data-index")),n=this.refs.DataEditorHeader.querySelectorAll(".data-editor__header__cell");this.initial={pageX:e.pageX,index:t,leftColumnContentWidth:n[t].getBoundingClientRect().width,rightColumnContentWidth:n[t+1].getBoundingClientRect().width,headerActionsWidth:this.refs.editorToggleControls?this.refs.editorToggleControls.getBoundingClientRect().width:0}}},{key:"handleResizeStop",value:function(e){this.initial={},this.props.onColumnResize&&this.props.onColumnResize(this.widths)}},{key:"render",value:function(){var e=this,t=(0,r.default)(Array((0,d.default)(this.initial,"index",0)+1),(function(t,n,o){return t+(0,d.default)(e,"state.widths["+o+"]",0)}),0),n=(0,a.default)(this.props.columns,(function(t,n){return i.default.createElement("div",{key:n,className:"data-editor__header__cell",style:{width:e.props.columnWidths[n]+"%"}},i.default.createElement("span",{className:"data-editor__header__cell__title"},t.header),n!==e.props.columns.length-1&&t.resize&&i.default.createElement(u.DraggableCore,{axis:"x",onDrag:e.handleResize,onStart:e.handleResizeStart,onStop:e.handleResizeStop},i.default.createElement("div",{className:"resize-handle","data-index":n})))}));return i.default.createElement("div",{className:"data-editor__header",ref:"DataEditorHeader"},!(0,c.default)(this.initial)&&i.default.createElement("div",{className:"resize-preview",style:{left:t+"%"}}),this.props.renderers.header(n))}}]),t}(s.Component);t.default=m},"./node_modules/@postman/data-editor/lib/lib.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.DataEditor=void 0;var o=i(n("./node_modules/@postman/data-editor/lib/containers/DataEditor.js")),s=i(n("./node_modules/@postman/data-editor/lib/utilities/utils.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.DataEditor=o.default,t.utils=s.default},"./node_modules/@postman/data-editor/lib/reducers/CollapseReducer.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n=t.node,o=(t.column,e.getIn(["rows",""+n,"allChildren"]));if(!o)return e;if(e.getIn(["collapsedRows",""+n]))return e;var s=e.getIn(["order"]);return s=s.filter((function(e){return!o.includes(e)})),e=(e=e.setIn(["order"],s)).setIn(["collapsedRows",""+n],!0)}},"./node_modules/@postman/data-editor/lib/reducers/CreateReducer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n("./node_modules/@postman/data-editor/lib/utilities/utils.js")),s=a(n("./node_modules/lodash/forEach.js")),i=a(n("./node_modules/lodash/get.js")),r=n("./node_modules/immutable/dist/immutable.js");function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t={};return(0,s.default)(e.columns,(function(e){switch(e.type){case"string":t[""+e.name]={type:"string",meta:{value:(0,i.default)(e,"default","")}};break;case"number":t[""+e.name]={type:"number",meta:{value:(0,i.default)(e,"default",0)}};break;case"boolean":t[""+e.name]={type:"boolean",meta:{value:(0,i.default)(e,"default",!0)}};break;case"array":t[""+e.name]={type:"array",meta:{key:(0,i.default)(e,"default",""),type:"string"}};break;case"object":t[""+e.name]={type:"object",meta:{key:(0,i.default)(e,"default.key",""),value:(0,i.default)(e,"default.value",""),type:"string"}}}})),t};t.default=function(e,t,n,s){var i=t.node,a=t.column;if(null==i){var c=o.default.getId(),d={id:c,depth:0,columns:l(s)},u=(e=e.setIn(["rows",""+c],(0,r.fromJS)(d))).getIn(["order"]);return u=u.concat(c),e=e.setIn(["order"],u)}var p=e.getIn(["rows",""+i]),m=o.default.getId(),h={id:m,depth:p.get("depth")+1,parent:i,columns:l(s)},g=(e=e.setIn(["rows",""+m],(0,r.fromJS)(h))).getIn(["order"]),f=g.indexOf(i);g=g.insert(f+1,m);var b=(e=e.setIn(["order"],g)).getIn(["rows",""+i,"allChildren"]);b=b.push(m);var y=(e=e.setIn(["rows",""+i,"allChildren"],b)).getIn(["rows",""+i,"children"]);y=y.push(m);var v=(e=e.setIn(["rows",""+i,"children"],y)).getIn(["rows",""+i,"columns",""+a,"meta","childrenCount"]);return e=e.setIn(["rows",""+i,"columns",""+a,"meta","childrenCount"],v+1)}},"./node_modules/@postman/data-editor/lib/reducers/DeleteReducer.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n=t.node,o=(t.column,e.getIn(["rows",""+n,"allChildren"])),s=e.getIn(["order"]);o&&o.forEach((function(t){e=e.deleteIn("rows",[""+n]);var o=s.findIndex((function(e){return e===t}));s=s.delete(o)}));var i=e.getIn(["rows",""+n,"parent"]);if(i){var r=e.getIn(["rows",""+i]),a=r.get("allChildren"),l=a.indexOf(n);r.set("allChildren",a.delete(l));var c=r.get("children"),d=c.indexOf(n);r.set("children",c.delete(d))}e=e.deleteIn(["rows",""+n]);var u=s.indexOf(n);return s=s.delete(u),e=e.setIn(["order"],s)}},"./node_modules/@postman/data-editor/lib/reducers/EditReducer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=n("./node_modules/immutable/dist/immutable.js"),i=n("./node_modules/@postman/data-editor/lib/reducers/CreateReducer.js"),r=(o=i)&&o.__esModule?o:{default:o};t.default=function(e,t,n,o){var i=t.node,a=t.column,l=n.meta;if(void 0!==l.name&&(e=e.setIn(["rows",""+i,"columns",""+a,"meta","name"],l.name)),void 0!==l.key&&(e=e.setIn(["rows",""+i,"columns",""+a,"meta","key"],l.key)),void 0!==l.value&&(e=e.setIn(["rows",""+i,"columns",""+a,"meta","value"],l.value)),void 0!==l.type){var c=(e=e.setIn(["rows",""+i,"columns",""+a,"meta","type"],l.type)).getIn(["rows",""+i,"allChildren"]);if(c){var d=e.getIn(["order"]);d=d.filter((function(e){return!c.includes(e)})),e=e.setIn(["order"],d),c.forEach((function(t){e=e.deleteIn(["rows",""+t])})),e=(e=(e=e.deleteIn(["rows",""+i,"children"])).deleteIn(["rows",""+i,"allChildren"])).deleteIn(["rows",""+i,"columns",""+a,"meta","childrenCount"])}var u=e.getIn(["rows",""+i,"columns",""+a,"meta","key"])||e.getIn(["rows",""+i,"columns",""+a,"meta","name"])||e.getIn(["rows",""+i,"columns",""+a,"meta","value"]);"string"===l.type||"number"===l.type||"boolean"===l.type?e=(e=e.setIn(["rows",""+i,"columns",""+a,"type"],"object")).setIn(["rows",""+i,"columns",""+a,"meta"],(0,s.fromJS)({key:u||""})):"array"===l.type?(e=(e=(e=(e=e.setIn(["rows",""+i,"columns",""+a,"type"],"arraymeta")).setIn(["rows",""+i,"children"],(0,s.fromJS)([]))).setIn(["rows",""+i,"allChildren"],(0,s.fromJS)([]))).setIn(["rows",""+i,"columns",""+a,"meta"],(0,s.fromJS)({name:u||"",childrenCount:0,type:"array"})),e=(0,r.default)(e,{node:i,column:a},{},o)):"object"===l.type&&(e=(e=(e=(e=e.setIn(["rows",""+i,"columns",""+a,"type"],"objectmeta")).setIn(["rows",""+i,"children"],(0,s.fromJS)([]))).setIn(["rows",""+i,"allChildren"],(0,s.fromJS)([]))).setIn(["rows",""+i,"columns",""+a,"meta"],(0,s.fromJS)({name:u||"",childrenCount:0,type:"object"})),e=(0,r.default)(e,{node:i,column:a},{},o))}return e}},"./node_modules/@postman/data-editor/lib/reducers/ExpandReducer.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n=t.node,o=(t.column,e.getIn(["rows",""+n,"allChildren"]));if(!o)return e;if(!e.getIn(["collapsedRows",""+n]))return e;var s=e.getIn(["order"]),i=s.findIndex((function(e){return e===n}));return o.forEach((function(e,t){s=s.insert(i+t+1,e)})),e=(e=e.setIn(["order"],s)).deleteIn(["collapsedRows",""+n])}},"./node_modules/@postman/data-editor/lib/reducers/MoveReducer.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){var o=t.node,s=n.sourceIndex,i=n.position,r=e.getIn(["order"]),a=o,l=r.get(s),c=r.indexOf(a);if("before"===i&&(c-=1),c===r.size-1||s===r.size-1)return e;var d=e.getIn(["rows",""+a,"allChildren"]);return r=r.delete(s),d&&d.forEach((function(){r=r.delete(s)})),s>c?(r=r.insert(c+1,l),d&&d.forEach((function(e,t){r=r.insert(c+1+t+1,e)}))):d?(r=r.insert(c-d.size,l),d.forEach((function(e,t){r=r.insert(c+t+1-d.size,e)}))):r=r.insert(c,l),e=e.setIn(["order"],r)}},"./node_modules/@postman/data-editor/lib/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=d(n("./node_modules/@postman/data-editor/lib/reducers/CreateReducer.js")),i=d(n("./node_modules/@postman/data-editor/lib/reducers/EditReducer.js")),r=d(n("./node_modules/@postman/data-editor/lib/reducers/MoveReducer.js")),a=d(n("./node_modules/@postman/data-editor/lib/reducers/DeleteReducer.js")),l=d(n("./node_modules/@postman/data-editor/lib/reducers/CollapseReducer.js")),c=d(n("./node_modules/@postman/data-editor/lib/reducers/ExpandReducer.js"));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t}return o(e,[{key:"reduce",value:function(e,t){switch(t.type){case"create":return(0,s.default)(e,t.source,t.payload,this.config);case"edit":return(0,i.default)(e,t.source,t.payload,this.config);case"move":return(0,r.default)(e,t.source,t.payload);case"delete":return(0,a.default)(e,t.source,t.payload);case"collapse":return(0,l.default)(e,t.source);case"expand":return(0,c.default)(e,t.source);default:return e}}}]),e}();t.default=u},"./node_modules/@postman/data-editor/lib/shortcuts.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={navigation:{MOVE_LEFT:"left",MOVE_RIGHT:"right",MOVE_UP:"up",MOVE_DOWN:"down",MOVE_TAB:"tab",MOVE_SHIFT_TAB:"shift+tab"}}},"./node_modules/@postman/data-editor/lib/utilities/GenerateRenderers.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=m(n("../../node_modules/react/index.js")),s=m(n("./node_modules/lodash/assign.js")),i=m(n("./node_modules/@postman/data-editor/lib/components/base/StringInput.js")),r=m(n("./node_modules/@postman/data-editor/lib/components/base/NumberInput.js")),a=m(n("./node_modules/@postman/data-editor/lib/components/base/BooleanInput.js")),l=m(n("./node_modules/@postman/data-editor/lib/components/base/ObjectMeta.js")),c=m(n("./node_modules/@postman/data-editor/lib/components/base/ArrayMeta.js")),d=m(n("./node_modules/@postman/data-editor/lib/components/base/ObjectNameInput.js")),u=m(n("./node_modules/@postman/data-editor/lib/components/base/ObjectKeyInput.js")),p=m(n("./node_modules/@postman/data-editor/lib/components/base/ObjectValueInput.js"));function m(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t={string:function(e,t,n,s,r){n.isCollapsed,n.subColumnIndex;return o.default.createElement(i.default,{value:e,onAction:t,cellInfo:r})},number:function(e,t,n,s,i){n.isCollapsed,n.subColumnIndex;return o.default.createElement(r.default,{value:e,onAction:t,cellInfo:i})},boolean:function(e,t,n,s,i){n.isCollapsed,n.subColumnIndex;return o.default.createElement(a.default,{value:e,onAction:t,cellInfo:i})},objectmeta:function(e,n,s,i,r){var a=s.isCollapsed,c=s.subColumnIndex;return 0===c?t.objectNameInput(e,n,{isCollapsed:a,subColumnIndex:c},i,r):1===c?o.default.createElement(l.default,{value:e,onAction:n,cellInfo:r}):void 0},arraymeta:function(e,n,s,i,r){var a=s.isCollapsed,l=s.subColumnIndex;return 0===l?t.objectNameInput(e,n,{isCollapsed:a,subColumnIndex:l},i,r):1===l?o.default.createElement(c.default,{value:e,onAction:n,cellInfo:r}):void 0},object:function(e,n,o,s,i){var r=o.isCollapsed,a=o.subColumnIndex;return 0===a?t.objectKeyInput(e,n,{isCollapsed:r,subColumnIndex:a},s,i):1===a?t.objectValueInput(e,n,{isCollapsed:r,subColumnIndex:a},{},i):void 0},row:function(e,t,n,s){n.isCollapsed,n.subColumnIndex;return o.default.createElement("div",{className:"data-editor__basic-row"},e.children,o.default.createElement("div",{className:"data-editor__row__actions"},o.default.createElement("div",{className:"data-editor__row__action--delete",onClick:function(){t("delete")}})))},objectNameInput:function(e,t,n,s,i){var r=n.isCollapsed;n.subColumnIndex;return o.default.createElement(d.default,{style:s,value:e,onAction:t,isCollapsed:r,cellInfo:i})},objectKeyInput:function(e,t,n,s,i){n.isCollapsed,n.subColumnIndex;return o.default.createElement(u.default,{style:s,value:e,onAction:t,cellInfo:i})},objectValueInput:function(e,t,n,s,i){n.isCollapsed,n.subColumnIndex;return o.default.createElement(p.default,{value:e,onAction:t,cellInfo:i})},header:function(e){return o.default.createElement("div",{className:"data-editor__basic-header"},e)}};return(0,s.default)(t,e)}},"./node_modules/@postman/data-editor/lib/utilities/utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=b(n("./node_modules/lodash/isString.js")),i=b(n("./node_modules/lodash/isNumber.js")),r=b(n("./node_modules/lodash/isBoolean.js")),a=b(n("./node_modules/lodash/isArray.js")),l=b(n("./node_modules/lodash/isObject.js")),c=b(n("./node_modules/lodash/forEach.js")),d=b(n("./node_modules/lodash/forOwn.js")),u=b(n("./node_modules/lodash/concat.js")),p=b(n("./node_modules/lodash/reject.js")),m=b(n("./node_modules/lodash/size.js")),h=b(n("./node_modules/lodash/assign.js")),g=b(n("./node_modules/lodash/get.js")),f=n("./node_modules/immutable/dist/immutable.js");function b(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.counter=0}return o(e,[{key:"getId",value:function(){return this.counter++}},{key:"_getType",value:function(e){return(0,s.default)(e)?"string":(0,i.default)(e)?"number":(0,r.default)(e)?"boolean":(0,a.default)(e)?"array":(0,l.default)(e)?"object":void 0}},{key:"flattenNode",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=this,h=arguments[5],f=arguments[6],b=this._getType(n),y=e,I=[],_=[];switch(null==y&&(y=this.getId(),this.flattened.order=(0,u.default)(this.flattened.order,y)),this.maxDepth<o&&(this.maxDepth=o),b){case"string":case"number":case"boolean":this.flattened.rows[y]=Object.assign({},this.flattened.rows[y],{id:y,depth:o,parent:f,columns:Object.assign({},(0,g.default)(this.flattened.rows[y],"columns",[]),v({},""+t,{type:b,meta:{value:n}}))}),I.push(y);break;case"array":_.push(y),I.push(y),(0,c.default)(n,(function(e,n){if((0,s.default)(e)||(0,i.default)(e)||(0,r.default)(e)){var c=l.getId();l.flattened.rows[c]=Object.assign({},l.flattened.rows[c],{id:c,depth:o+1,parent:y,columns:Object.assign({},(0,g.default)(l.flattened.rows[c],"columns",[]),v({},""+t,{type:"object",meta:{key:a+"["+n+"]",value:e,type:l._getType(e)}}))}),l.flattened.order=(0,u.default)(l.flattened.order,c),_.push(c),I.push(c)}else{var d=l.flattenNode(null,t,e,o+1,a+"["+n+"]",!0,y);I=(0,u.default)(I,d.allChildren);var m=(0,p.default)(d.children,(function(e){return l.flattened.rows[e].depth!==o+1}));_=(0,u.default)(_,m)}})),this.flattened.rows[y]=Object.assign({},this.flattened.rows[y],{id:y,depth:o,parent:f,children:(0,p.default)(_,(function(e){return""+e==""+y})),allChildren:(0,p.default)(I,(function(e){return""+e==""+y})),columns:Object.assign({},(0,g.default)(this.flattened.rows[y],"columns",[]),v({},""+t,{type:"arraymeta",meta:{name:a,childrenCount:(0,m.default)(n),type:this._getType(n)}}))});break;case"object":_.push(y),I.push(y),(0,d.default)(n,(function(e,n){if((0,s.default)(e)||(0,i.default)(e)||(0,r.default)(e)){var a=l.getId();l.flattened.rows[a]=Object.assign({},l.flattened.rows[a],{id:a,depth:o+1,parent:y,columns:Object.assign({},(0,g.default)(l.flattened.rows[a],"columns",[]),v({},""+t,{type:"object",meta:{key:""+n,value:e,type:l._getType(e)}}))}),l.flattened.order=(0,u.default)(l.flattened.order,a),_.push(a),I.push(a)}else{var c=l.flattenNode(null,t,e,o+1,n,!1,y);I=(0,u.default)(I,c.allChildren);var d=(0,p.default)(c.children,(function(e){return l.flattened.rows[e].depth!==o+1}));_=(0,u.default)(_,d)}})),this.flattened.rows[y]=Object.assign({},this.flattened.rows[y],{id:y,depth:o,parent:f,children:(0,p.default)(_,(function(e){return""+e==""+y})),allChildren:(0,p.default)(I,(function(e){return""+e==""+y})),columns:Object.assign({},(0,g.default)(this.flattened.rows[y],"columns",[]),v({},""+t,{type:"objectmeta",meta:{name:a,autogen:h,childrenCount:(0,m.default)(n),type:this._getType(n)}}))})}return{children:_,allChildren:I}}},{key:"flattenNodes",value:function(e,t){var n=this;return delete this.flattened,this.flattened={rows:{},order:[],collapsedRows:{}},this.maxDepth=0,(0,c.default)(t,(function(t){var o=n.getId();n.flattened.order=(0,u.default)(n.flattened.order,o),(0,c.default)(e.columns,(function(e){switch(e.type){case"string":case"number":case"boolean":n.flattened.rows[o]=Object.assign({},n.flattened.rows[o],{id:o,depth:0,columns:Object.assign({},(0,g.default)(n.flattened.rows[o],"columns",[]),v({},""+e.name,{type:e.type,meta:{value:t[e.name]}}))});break;case"object":case"array":var a=t[e.name],l=a.key,c=a.value;(0,s.default)(c)||(0,i.default)(c)||(0,r.default)(c)?n.flattened.rows[o]=Object.assign({},n.flattened.rows[o],{id:o,depth:0,columns:Object.assign({},(0,g.default)(n.flattened.rows[o],"columns",[]),v({},""+e.name,{type:"object",meta:{key:""+l,value:c,type:"string"}}))}):n.flattenNode(o,e.name,c,0,l)}}))})),{state:(0,f.fromJS)(this.flattened),maxDepth:this.maxDepth}}},{key:"unflattenChildren",value:function(e,t,n){var o=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=s;return(0,c.default)(n,(function(n){var s=e.rows[""+n];"object"===s.columns[t].type?("object"===o._getType(i)&&(i=Object.assign({},i,v({},s.columns[t].meta.key,s.columns[t].meta.value))),"array"===o._getType(i)&&(i=[].concat(y(i),[v({},s.columns[t].meta.key,s.columns[t].meta.value)]))):"objectmeta"===s.columns[t].type?("object"===o._getType(i)&&(i=v({},s.columns[t].meta.name,o.unflattenChildren(e,t,s.children,{}))),"array"===o._getType(i)&&!s.columns[t].meta.autogen&&(i=[h.default.apply(void 0,[{}].concat(y(i),[v({},s.columns[t].meta.name,o.unflattenChildren(e,t,s.children,{}))]))]),"array"===o._getType(i)&&s.columns[t].meta.autogen&&(i=o.unflattenChildren(e,t,s.children,i))):"arraymeta"===s.columns[t].type&&("object"===o._getType(i)&&(i=v({},s.columns[t].meta.name,o.unflattenChildren(e,t,s.children,[]))),"array"===o._getType(i)&&(i=o.unflattenChildren(e,t,s.children,[])))})),i}},{key:"unflattenNodes",value:function(e){var t=this,n=e.toJS(),o=[],s=0,i=n.order;return(0,c.default)(i,(function(e){var i=n.rows[e],r=i.depth;(0,d.default)(i.columns,(function(e,a){if(0!==r)return!1;"string"===e.type||"number"===e.type||"boolean"===e.type?o[s]=Object.assign({},o[s],v({},a,e.meta.value)):"object"===e.type?o[s]=Object.assign({},o[s],v({},a,Object.assign({},(0,g.default)(o,"["+s+"]["+a+"]",{}),{key:e.meta.key,value:e.meta.value}))):"objectmeta"===e.type?o[s]=Object.assign({},o[s],v({},a,Object.assign({},(0,g.default)(o,"["+s+"]["+a+"]",{}),{key:e.meta.name,value:t.unflattenChildren(n,a,i.children,{})}))):"arraymeta"===e.type&&(o[s]=Object.assign({},o[s],v({},a,Object.assign({},(0,g.default)(o,"["+s+"]["+a+"]",{}),{key:e.meta.name,value:t.unflattenChildren(n,a,i.children,[])}))))})),0===r&&s++})),o}},{key:"getImmutablePathValue",value:function(e,t){if(e)return e.getIn(t)}},{key:"createAction",value:function(e,t,n){switch(t){case"create":case"move":case"delete":default:return{source:e,type:t,payload:n};case"edit":return{source:e,type:t,payload:{meta:n}};case"expand":case"collapse":return{source:e,type:t}}}},{key:"getEmptyRow",value:function(e){var t={id:this.getId(),depth:0,columns:{}};return(0,c.default)(e.columns,(function(e){switch(e.type){case"string":case"number":case"boolean":t.columns=Object.assign({},t.columns,v({},""+e.name,{type:e.type,meta:{value:""}}));break;case"object":t.columns=Object.assign({},t.columns,v({},""+e.name,{type:e.type,meta:{key:"",value:""}}))}})),t}},{key:"findIndexInOrder",value:function(e,t){return e.findIndex((function(e){return""+e==""+t}))}},{key:"getLastInList",value:function(e){return e.last()}},{key:"isMap",value:function(e){return f.Map.isMap(e)}},{key:"getMaxDepth",value:function(e){var t=0;return(0,c.default)(e.rows,(function(e){e.depth>t&&(t=e.depth)})),t}}]),e}();t.default=new I},"./node_modules/@postman/data-editor/node_modules/prop-types/factoryWithThrowingShims.js":function(e,t,n){"use strict";var o=n("./node_modules/fbjs/lib/emptyFunction.js"),s=n("./node_modules/fbjs/lib/invariant.js"),i=n("./node_modules/@postman/data-editor/node_modules/prop-types/lib/ReactPropTypesSecret.js");e.exports=function(){function e(e,t,n,o,r,a){a!==i&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},"./node_modules/@postman/data-editor/node_modules/prop-types/index.js":function(e,t,n){e.exports=n("./node_modules/@postman/data-editor/node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/@postman/data-editor/node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"../../packages/monitoring/monitoring-actions/constants/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{SCHEDULED_COLLECTION_ACTION_SUCCESS:function(){return i},SCHEDULED_COLLECTION_RUNS:function(){return s},UNKNOWN_SOURCE:function(){return o}});const o="Unknown",s={willRun:"This scheduled collection will run on its regular schedule.",willNotRun:"This scheduled collection will no longer make its scheduled runs."},i={paused:"Scheduled collection paused"}},"../../packages/monitoring/monitoring-actions/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{openMonitor:function(){return o.default},openMonitorForm:function(){return s.default},openMonitoringUsage:function(){return a.default},openScheduledCollection:function(){return r.default},pauseMonitor:function(){return l.default},pauseScheduledCollection:function(){return c.default},recordClientEvent:function(){return i.default}});var o=n("../../packages/monitoring/monitoring-actions/src/transitions/openMonitor.js"),s=n("../../packages/monitoring/monitoring-actions/src/transitions/openMonitorForm.js"),i=n("../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/index.js"),r=n("../../packages/monitoring/monitoring-actions/src/scheduled-collection/openScheduledCollection.js"),a=n("../../packages/monitoring/monitoring-actions/src/monitor/monitoring-usage/openMonitoringUsage.js"),l=n("../../packages/monitoring/monitoring-actions/src/monitor/pause-monitor/index.js"),c=n("../../packages/monitoring/monitoring-actions/src/scheduled-collection/pause-scheduled-collection/index.js");t.default={openMonitor:o.default,openMonitorForm:s.default,recordClientEvent:i.default}},"../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/eventConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ACTION:function(){return o},CATEGORY:function(){return i},LABEL:function(){return s}});const o={VIEW_SUMMARY:"view_summary",INITIATE_SUMMARY:"initiate_summary",INITIATE_CREATE:"initiate_create",CONFIRM_CREATE:"confirm_create",INITIATE_EDIT:"initiate_edit",CONFIRM_EDIT:"confirm_edit",PAUSE_MONITOR:"pause_monitor",INITIATE_PAUSE:"initiate_pause",INITIATE_RESUME:"initiate_resume",INITIATE_DELETE:"initiate_delete",VIEW_CREATE:"view_create",PAUSE_SCHEDULED_COLLECTION:"pause_scheduled_collection",VIEW_MONITORING_USAGE:"view_monitoring_usage",VIEW_MONITORING_USAGE_FORBIDDEN:"view_monitoring_usage_forbidden",VIEW_UPTIME_INTEGRATIONS_NOTIFY:"view_available_uptime_monitor_integrations",INITIATE_CREATE_UPTIME_INTEGRATION:"initiate_create_uptime_monitor_integration",CANCEL_UPTIME_INTEGRATION_AUTH:"cancel_authorization_uptime_monitor_integration",VIEW_UPTIME_INTEGRATION_CREATE_FORM:"view_uptime_monitor_integration_create_form",CONFIRM_CREATE_UPTIME_INTEGRATION:"confirm_create_uptime_monitor_integration",INITIATE_EDIT_UPTIME_INTEGRATION:"initiate_edit_uptime_monitor_integration",VIEW_UPTIME_INTEGRATION_EDIT_FORM:"view_uptime_monitor_integration_edit_form",CONFIRM_EDIT_UPTIME_INTEGRATION:"confirm_edit_uptime_monitor_integration",INITIATE_DELETE_UPTIME_INTEGRATION:"initiate_delete_uptime_monitor_integration",CONFIRM_DELETE_UPTIME_INTEGRATION:"confirm_delete_uptime_monitor_integration",DELETE_MONITOR_FEEDBACK:"delete_monitor_feedback",ADVANCED_SETTINGS_EXPANDED:"advanced_settings_expanded",SET_CUSTOM_ORDER:"set_custom_run_order",NAME_EDITED:"name_edited",CREATE_FREQUENCY_EDITED:"create_frequency_edited",ENVIRONMENT_SET:"environment_set",ITERATION_EDITED:"iteration_edited",NOTIF_EDITED:"email_notif_edited",NOTIF_STOP_EDITED:"notification_stop_edited",OPEN_RUNS_TAB:"open_runs_tab",INITIATE_MANUAL_RUN:"initiate_manual_run",DATA_FILE_MAX_SIZE_HIT:"data_file_max_size_hit",JUMP_TO_ITERATION:"jump_to_iteration"},s={COLLECTION_BASED:"collection_based",UPTIME_BETA:"uptime_beta",CNX:"cnx",LISTING_VIEW:"listing_view",WORKBENCH:"workbench",CREATE_FORM:"create_form",EDIT_FORM:"edit_form",EMAIL:"email",UPTIME_BETA_ONRAMP:"uptime_beta_onramp",BILLING_OVERVIEW:"billing_overview",UNKNOWN:"unknown",UPTIME_MONITOR_DETAILS_VIEW:"uptime_monitor_details_view",UPTIME_INTEGRATIONS_SLACK:"slack",NEEDS_UNMET:"needs_unmet",EXPECTATION_SHORTFALL:"expectation_shortfall",BAD_EXPERIENCE:"bad_experience",USER_EXPLORATORY:"user_exploratory",OTHER_REASONS:"other_reasons",MONITOR_RUN_RESULTS_CONTAINER:"monitor_run_results_container",SCHEDULED_COLLECTION_RUN_RESULTS_CONTAINER:"scheduled_collection_run_results_container"},i={SCHEDULED_COLLECTION:"scheduled_collection"}},"../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/eventRegistry.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/eventConstants.js");const s={collectionMonitorSummaryViewed:{action:o.ACTION.VIEW_SUMMARY,label:o.LABEL.COLLECTION_BASED},confirmBetaUptimeCreation:{action:o.ACTION.CONFIRM_CREATE,label:o.LABEL.UPTIME_BETA},confirmBetaUptimeEdit:{action:o.ACTION.CONFIRM_EDIT,label:o.LABEL.UPTIME_BETA},initiateMonitorCreationCnx:{action:o.ACTION.INITIATE_CREATE,label:o.LABEL.CNX},initiateMonitorCreationUptimeBetaOnramp:{action:o.ACTION.INITIATE_CREATE,label:o.LABEL.UPTIME_BETA_ONRAMP},initiateMonitorCreationUnknown:{action:o.ACTION.INITIATE_CREATE,label:o.LABEL.UNKNOWN},pauseMonitorUsageView:{action:o.ACTION.PAUSE_MONITOR,label:o.LABEL.BILLING_OVERVIEW},pauseMonitorUnknown:{action:o.ACTION.PAUSE_MONITOR,label:o.LABEL.UNKNOWN},pauseScheduledCollectionUsageView:{action:o.ACTION.PAUSE_SCHEDULED_COLLECTION,label:o.LABEL.BILLING_OVERVIEW},pauseScheduledCollectionUnknown:{action:o.ACTION.PAUSE_SCHEDULED_COLLECTION,label:o.LABEL.UNKNOWN},initiatePauseScheduledRunWorkbench:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_PAUSE,label:o.LABEL.WORKBENCH},initiatePauseScheduledRunListingView:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_PAUSE,label:o.LABEL.LISTING_VIEW},confirmCreateScheduledRunCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.CONFIRM_CREATE,label:o.LABEL.CREATE_FORM},confirmEditScheduledRunEditForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.CONFIRM_EDIT,label:o.LABEL.EDIT_FORM},initiateCreateScheduledRunlistingView:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_CREATE,label:o.LABEL.LISTING_VIEW},viewCreateScheduledRun:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.VIEW_CREATE},initiateResumeScheduledRunListingView:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_RESUME,label:o.LABEL.LISTING_VIEW},initiateResumeScheduledRunWorkbench:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_RESUME,label:o.LABEL.WORKBENCH},initiateDeleteScheduledRunListingView:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_DELETE,label:o.LABEL.LISTING_VIEW},initiateDeleteScheduledRunWorkbench:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_DELETE,label:o.LABEL.WORKBENCH},initiateSummaryScheduledRunListingView:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_SUMMARY,label:o.LABEL.LISTING_VIEW},initiateEditScheduledRunListingView:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_EDIT,label:o.LABEL.LISTING_VIEW},initiateEditScheduledRunWorkbench:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_EDIT,label:o.LABEL.WORKBENCH},advancedSectionExpandedScheduledRuncreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.ADVANCED_SETTINGS_EXPANDED,label:o.LABEL.CREATE_FORM},advancedSectionExpandedScheduledRuneditForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.ADVANCED_SETTINGS_EXPANDED,label:o.LABEL.CREATE_FORM},setCustomScheduledRuncreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.SET_CUSTOM_ORDER,label:o.LABEL.CREATE_FORM},setCustomScheduledRuneditForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.SET_CUSTOM_ORDER,label:o.LABEL.EDIT_FORM},nameEditedScheduledRunCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.NAME_EDITED,label:o.LABEL.CREATE_FORM},createFrequencyEditedScheduledRun:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.CREATE_FREQUENCY_EDITED},openRunsTabScheduledCollectionUnknown:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.OPEN_RUNS_TAB,label:o.LABEL.UNKNOWN},environmentSetScheduledRunCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.ENVIRONMENT_SET,label:o.LABEL.CREATE_FORM},iterationEditedScheduledRunCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.ITERATION_EDITED,label:o.LABEL.CREATE_FORM},notifEditedScheduledRunCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.NOTIF_EDITED,label:o.LABEL.CREATE_FORM},initiateManualRunScheduledRunWorkbench:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.INITIATE_MANUAL_RUN,label:o.LABEL.WORKBENCH},notifStopEditedScheduledRunCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.NOTIF_STOP_EDITED,label:o.LABEL.CREATE_FORM},viewSummaryScheduledRunUnknown:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.VIEW_SUMMARY,label:o.LABEL.UNKNOWN},viewSummaryScheduledRunEmail:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.VIEW_SUMMARY,label:o.LABEL.EMAIL},dataFileMaxSizeHitScheduledRunsCreateForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.DATA_FILE_MAX_SIZE_HIT,label:o.LABEL.CREATE_FORM},dataFileMaxSizeHitScheduledRunsEditForm:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.DATA_FILE_MAX_SIZE_HIT,label:o.LABEL.EDIT_FORM},clickIntegrationNotifyButton:{action:o.ACTION.VIEW_UPTIME_INTEGRATIONS_NOTIFY,label:o.LABEL.UPTIME_MONITOR_DETAILS_VIEW},initiateCreateUptimeSlackIntegration:{action:o.ACTION.INITIATE_CREATE_UPTIME_INTEGRATION,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},viewCreateUptimeSlackIntegrationForm:{action:o.ACTION.VIEW_UPTIME_INTEGRATION_CREATE_FORM,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},cancelAuthUptimeSlackIntegrationForm:{action:o.ACTION.CANCEL_UPTIME_INTEGRATION_AUTH,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},confirmCreateUptimeSlackIntegration:{action:o.ACTION.CONFIRM_CREATE_UPTIME_INTEGRATION,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},initiateEditUptimeSlackIntegration:{action:o.ACTION.INITIATE_EDIT_UPTIME_INTEGRATION,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},viewEditUptimeSlackIntegrationForm:{action:o.ACTION.VIEW_UPTIME_INTEGRATION_EDIT_FORM,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},confirmEditUptimeSlackIntegration:{action:o.ACTION.CONFIRM_EDIT_UPTIME_INTEGRATION,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},initiateDeleteUptimeSlackIntegration:{action:o.ACTION.INITIATE_DELETE_UPTIME_INTEGRATION,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},confirmDeleteUptimeSlackIntegration:{action:o.ACTION.CONFIRM_DELETE_UPTIME_INTEGRATION,label:o.LABEL.UPTIME_INTEGRATIONS_SLACK},deleteMonitorFeedbackOption1:{action:o.ACTION.DELETE_MONITOR_FEEDBACK,label:o.LABEL.NEEDS_UNMET},deleteMonitorFeedbackOption2:{action:o.ACTION.DELETE_MONITOR_FEEDBACK,label:o.LABEL.EXPECTATION_SHORTFALL},deleteMonitorFeedbackOption3:{action:o.ACTION.DELETE_MONITOR_FEEDBACK,label:o.LABEL.BAD_EXPERIENCE},deleteMonitorFeedbackOption4:{action:o.ACTION.DELETE_MONITOR_FEEDBACK,label:o.LABEL.USER_EXPLORATORY},deleteMonitorFeedbackOption5:{action:o.ACTION.DELETE_MONITOR_FEEDBACK,label:o.LABEL.OTHER_REASONS},jumpToIterationForMonitor:{action:o.ACTION.JUMP_TO_ITERATION,label:o.LABEL.MONITOR_RUN_RESULTS_CONTAINER},jumpToIterationForScheduledCollection:{category:o.CATEGORY.SCHEDULED_COLLECTION,action:o.ACTION.JUMP_TO_ITERATION,label:o.LABEL.SCHEDULED_COLLECTION_RUN_RESULTS_CONTAINER}};function i(e){if(s.hasOwnProperty(e))return s[e]}},"../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/modules/services/AnalyticsService.js"),s=n("./monitors/constants.js"),i=n("../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/eventRegistry.js");t.default=function({eventId:e,label:t,entityId:n}){const r=(0,i.default)(e);if(!r)return pm.logger.error("Monitoring~recordClientEvent attempted to record unknown eventId.",null,{eventId:e});t&&(r.label=t),n&&(r.entityId=n),o.default.addEventV2({category:s.MONITOR_ANALYTICS_CATEGORY,...r})}},"../../packages/monitoring/monitoring-actions/src/monitor/monitoring-usage/openMonitoringUsage.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/services/NavigationService.js"),s=n("./monitors/constants.js"),i=n("./billing/navigation/constants.js"),r=n("../../packages/monitoring/monitoring-actions/constants/index.js");t.default=function({source:e=r.UNKNOWN_SOURCE,view:t=s.MONITORING_USAGE_DETAIL_VIEW}={}){switch(t){case s.MONITORING_USAGE_OVERVIEW:o.default.transitionTo(i.OPEN_BILLING_VIEW_RESOURCE_USAGE_IDENTIFIER);break;case s.MONITORING_USAGE_DETAIL_VIEW:o.default.transitionTo(s.MONITORING_USAGE_VIEW_IDENTIFIER);break;default:pm.logger.warn("MonitoringActions~openMonitoringUsage called with incorrect view"),o.default.transitionTo(s.MONITORING_USAGE_VIEW_IDENTIFIER)}}},"../../packages/monitoring/monitoring-actions/src/monitor/pause-monitor/get-pause-payload-body.js":function(e,t,n){"use strict";n.r(t);var o=n("./monitors/constants.js");t.default=function(e){switch(e){case o.UPTIME_MONITOR_TYPE:return[{op:"replace",path:"/active",value:!1}];case o.COLLECTION_MONITOR_TYPE:return{active:!1}}}},"../../packages/monitoring/monitoring-actions/src/monitor/pause-monitor/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./monitors/utils/messages/index.js"),s=n("./monitors/constants.js"),i=n("./monitors/stores/domain/MonitorConfigurationStore.js"),r=n("../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/index.js"),a=n("../../packages/monitoring/monitoring-actions/constants/index.js"),l=n("../../packages/monitoring/monitoring-actions/src/monitor/pause-monitor/get-pause-payload-body.js");t.default=async function({id:e,source:t=a.UNKNOWN_SOURCE,silent:n=!1,monitorType:c}){let d;(0,r.default)({eventId:`pauseMonitor${t}`});const u=new i.default({monitorId:e});if(d=[s.COLLECTION_MONITOR_TYPE,s.UPTIME_MONITOR_TYPE].includes(c)?c:await u.monitorType,!d)throw!n&&pm.toasts.error(o.MONITOR_ACTION_ERROR.update),new Error(o.MONITOR_ACTION_ERROR.update);await u.updateMonitorConfiguration(e,(0,l.default)(d)),!n&&pm.toasts.success(o.MONITOR_RUNS.willNotRun,{title:o.MONITOR_ACTION_SUCCESS.paused})}},"../../packages/monitoring/monitoring-actions/src/scheduled-collection/openScheduledCollection.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/services/NavigationService.js"),s=n("./monitors/constants.js"),i=n("../../packages/monitoring/monitoring-data/index.ts"),r=n("./runtime-repl/collection/CollectionModalTabsConstants.js"),a=n("./runtime-repl/collection/_api/CollectionInterface.js"),l=n("../../node_modules/lodash/lodash.js");t.default=async function({id:e,view:t=s.DETAIL_VIEW,tabId:n,origin:c,newTab:d=!1,queryParams:u={},highlight:p=!1}){const m=await i.ScheduledCollection.getCollectionId({id:e}),h={...u},g={};if(l.set(g,"tabOptions.preview",!d),n&&l.set(g,"tabOptions.openIn",n),c&&l.set(g,"additionalContext.origin",c),m)switch(t){case s.COLLECTION_VIEW:const t={setActiveTab:r.COLLECTION_RUN_REPORTS};n&&(t.tabOptions={openIn:n}),(0,a.openCollectionInTab)(m,t,null,{...h,view:s.SCHEDULED_COLLECTION_TAB_PARAM,...p?{schedule:e}:{}});break;case s.DETAIL_VIEW:o.default.transitionTo("build.scheduled-collection-details",{collectionId:m,scheduleId:e},h,g);break;case s.EDIT_VIEW:o.default.transitionTo("build.scheduled-collection-edit",{collectionId:m,scheduleId:e},h,g);break;default:pm.logger.warn("MonitoringActions~openScheduledCollection called with incorrect view"),o.default.transitionTo("build.scheduled-collection-details",{collectionId:m,scheduleId:e},h,g)}else pm.logger.error("openScheduledCollection~error finding the scheduled collection.",e)}},"../../packages/monitoring/monitoring-actions/src/scheduled-collection/pause-scheduled-collection/index.js":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/index.js"),s=n("../../packages/monitoring/monitoring-actions/constants/index.js"),i=n("../../packages/monitoring/monitoring-data/index.ts");t.default=async function({id:e,source:t=s.UNKNOWN_SOURCE,silent:n=!1}){(0,o.default)({eventId:`pauseScheduledCollection${t}`});const r=await new i.ScheduledCollection({id:e});await r.pause(!1),!n&&pm.toasts.success(s.SCHEDULED_COLLECTION_RUNS.willNotRun,{title:s.SCHEDULED_COLLECTION_ACTION_SUCCESS.paused})}},"../../packages/monitoring/monitoring-actions/src/transitions/openMonitor.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/services/NavigationService.js"),s=n("./monitors/services/UrlService.js"),i=n("./monitors/constants.js"),r=n("./monitors/stores/domain/MasterMonitorStore.js");t.default=function({id:e,view:t=i.DETAIL_VIEW,queryParams:n={},additionalOptions:a={}}){const l=new r.default,c=l.getJobTemplateConfiguration(e),d=l.getJobTemplateType(e);switch(t){case i.DETAIL_VIEW:const t={...n};d!==i.UPTIME_MONITOR_TYPE||t[i.TIME_FRAME_PARAM]||(t[i.TIME_FRAME_PARAM]=i.DEFAULT_TIME_FRAME),o.default.transitionTo("build.monitor",{monitorPath:s.default.getMonitorPath({monitorName:c.name,monitorId:e})},t,a);break;case i.EDIT_VIEW:o.default.transitionTo("build.edit-monitor",{},n,a);break;default:pm.logger.warn("MonitoringActions~openMonitor called with incorrect view"),o.default.transitionTo("build.monitor",{monitorPath:s.default.getMonitorPath({monitorName:c.name,monitorId:e})},n)}}},"../../packages/monitoring/monitoring-actions/src/transitions/openMonitorForm.js":function(e,t,n){"use strict";n.r(t);var o=n("./monitors/constants.js"),s=n("./js/services/NavigationService.js"),i=n("../../packages/monitoring/monitoring-actions/src/common/recordClientEvent/index.js");t.default=function({type:e,source:t="Unknown",prefill:n,previewMode:r=!0}){(0,i.default)({eventId:`initiateMonitorCreation${t}`}),e===o.UPTIME_MONITOR_TYPE?s.default.transitionTo("build.create-monitor",void 0,{type:o.UPTIME_MONITOR_TYPE},{additionalContext:{prefill:n},tabOptions:{preview:r}}):s.default.transitionTo("build.create-monitor",void 0,void 0,{tabOptions:{preview:r}})}},"./api-dev/components/api-repo-integration/APIRepositoryIntegrationEntitySelectDropdown/APIRepositoryIntegrationEntitySelectDropdown.js":function(e,t,n){"use strict";n.r(t),n.d(t,{APIRepositoryIntegrationEntitySelectDropdown:function(){return j}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/react-dom/index.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuDivider.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),y=n("./node_modules/@postman/react-click-outside/dist/index.js"),v=n.n(y),I=n("./js/components/base/Dropdowns.js"),_=n("./js/components/base/Buttons.js"),E=n("./js/components/base/Inputs.js"),S=n("./js/modules/services/AnalyticsService.js"),C=n("./js/utils/openSettings.js"),T=n("./js/constants/SettingsTypeConstants.js"),A=n("./node_modules/lodash/lodash.js");let j=v()(o=class extends s.Component{constructor(e){super(e),this.state={focusedItem:null,isOpen:!1,inputValue:e.getInputValue(e.selectedItem),selectedItem:e.selectedItem},this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleToggleList=this.handleToggleList.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleClose=this.handleClose.bind(this),this.triggerBranchCreateFlow=this.triggerBranchCreateFlow.bind(this),this.renderEmptyState=this.renderEmptyState.bind(this)}renderEmptyState(e,t,n){const{isMenuLoading:o}=this.props;if(!o){if(e){const e={id:t},n=this.props.isBranchSelectionDropdown&&A.isEmpty(this.props.getFilteredList());if(n&&!t)return s.createElement(d.default,{justifyContent:"center",alignItems:"center",padding:{paddingBottom:"spacing-m",paddingTop:"spacing-s",paddingLeft:"spacing-s",paddingRight:"spacing-s"},direction:"column"},s.createElement(u.default,{type:"body-medium",color:"content-color-secondary"},"No branches found in the repository."),s.createElement(u.default,{type:"body-medium",color:"content-color-secondary"},"Enter a branch name to create a new branch."));const o=this.props.customEmptyStateComponent&&!A.isEmpty(this.props.customEmptyStateComponent(t))&&this.props.customEmptyStateComponent(t)||s.createElement(u.default,null,'No results found. Use "',s.createElement("span",{className:"search-highlighted-api-git"},t),'" anyway.');return[s.createElement(I.MenuItem,{className:"item "+(n?"create-branch-from-scratch-menu-item":""),key:t,refKey:t,onMouseEnter:()=>{this.handleMouseEnter(e)},onMouseLeave:()=>{this.handleMouseLeave()}},o)]}return t?s.createElement(u.default,{maxLines:2,color:"content-color-tertiary",className:"api-repository-integration-entity-select-dropdown__empty-state"},"No results found. Check your spelling or try a different search term."):s.createElement(u.default,{color:"content-color-tertiary",className:"api-repository-integration-entity-select-dropdown__empty-state"},n)}}renderOptions(){const{optionRenderer:e,getFilteredList:t,isOptionsCreatable:n,emptyStateMessage:o}=this.props,{inputValue:i,selectedItem:r,focusedItem:l}=this.state,c=i;if(this._visibleItems=t(c,{firstRender:this.state.disableFiltering}),A.isEmpty(this._visibleItems))return this.renderEmptyState(n,c,o);const d=this.props.isBranchCreationModalDropdown||this.props.isBranchSelectionDropdown,u=A.filter(this._visibleItems,(e=>e.id===c)).length>0,p=[];if(c&&d&&!u&&!A.isEmpty(this.props.customEmptyStateComponent(c))){const e={id:c};p.push(s.createElement(I.MenuItem,{className:"item",key:c,refKey:c,onMouseEnter:()=>{this.handleMouseEnter(e)},onMouseLeave:()=>{this.handleMouseLeave()}},this.props.customEmptyStateComponent(c)))}return p.concat(A.chain(this._visibleItems).flatMap((t=>{let n=e(t,c,{firstRender:this.state.disableFiltering}),o=t.id===(l&&l.id),i=t.id===(r&&r.id),d=t.isDisabled,u=t.disabledText,p=[];return n?(p.push(s.createElement(I.MenuItem,{className:a()({item:!0,"is-focused":o,"is-selected":i}),key:t.id,refKey:t.id,onMouseEnter:()=>{this.handleMouseEnter(t)},onMouseLeave:()=>{this.handleMouseLeave()},disabled:d,disabledText:u,tooltipPlacement:"left"},n)),t.addDivider&&p.push(s.createElement("div",{className:"divider divider--space"})),p):p})).compact().value())}handleMouseEnter(e){this.focusOption(e)}handleMouseLeave(){this.focusOption(null)}handleCancel(){setImmediate((()=>{this.focus()})),A.isFunction(this.props.onClear)&&this.props.onClear()}focus(){this.refs.input&&this.refs.input.focus()}blur(){this.refs.input&&(this.refs.input.blur(),(this.props.resetSearchFilterOnBlur||this.props.resetEmptyFilterOnBlur&&!this.state.inputValue)&&this.setState({inputValue:this.props.getInputValue(this.props.selectedItem)}),pm.mediator.trigger("focusBuilder"),this.props.onBlur&&this.props.onBlur())}handleOpen(){this.setState({isOpen:!0,disableFiltering:!0},this.focus)}handleToggleList(){this.state.isOpen?this.handleClose():this.handleOpen()}handleClickOutside(e){const t=this.dropdownMenuRef&&(0,i.findDOMNode)(this.dropdownMenuRef);t&&t.contains(e.target)||this.handleClose()}handleClose(){this.state.isOpen&&this.setState({isOpen:!1},this.blur)}handleSelect(e){let t=A.find(this._visibleItems,{id:e});if(this.props.isOptionsCreatable&&!t){const t={id:e};return this.selectFocusedOption(t,!0)}return this.selectFocusedOption(t)}handleKeyDown(e){let t=this.state.focusedItem;switch(e.key){case"ArrowDown":e.preventDefault(),this.focusAdjacentOption("next");break;case"ArrowUp":e.preventDefault(),this.focusAdjacentOption("previous");break;case"Enter":if(e.preventDefault(),t)return this.handleSelect(t.id),void this.handleClose();if(this.props.isOptionsCreatable&&!A.isEmpty(this.state.inputValue)){const e={id:this.state.inputValue};return this.selectFocusedOption(e)}this.handleClose();break;case"Escape":e.preventDefault();break;default:this.state.disableFiltering&&this.setState({disableFiltering:!1})}}handleFocus(){this.props.openOnFocus&&this.setState({isOpen:!0,disableFiltering:!0}),this.props.onFocus&&this.props.onFocus()}getNextVisibleItem(e,t){if(A.every(e,{disableFocus:!0}))return null;let n,o=A.findIndex(e,{id:t&&t.id});return-1===o||o===e.length-1?(n=e[0],n.disableFocus?this.getNextVisibleItem(e,n):n):(n=e[o+1],n.disableFocus?this.getNextVisibleItem(e,n):n)}getPreviousVisibleItem(e,t){if(A.every(e,{disableFocus:!0}))return null;let n,o=A.findIndex(e,{id:t&&t.id});return-1===o||0===o?(n=A.last(e),n.disableFocus?this.getPreviousVisibleItem(e,n):n):(n=e[o-1],n.disableFocus?this.getPreviousVisibleItem(e,n):n)}focusOption(e){this.setState({focusedItem:e})}focusAdjacentOption(e){let t=this.state.focusedItem,n=this._visibleItems;"next"===e?t=this.getNextVisibleItem(n,t):"previous"===e&&(t=this.getPreviousVisibleItem(n,t)),this._scrollToFocusedOption=!0,this.setState({focusedItem:t})}selectFocusedOption(e,t=!1){const n=e||this.state.focusedItem;this.props.isBranchSelectionDropdown||this.props.isBranchCreationModalDropdown?t?this.props.onSelect&&this.props.onSelect(n,!1,!1):this.props.onSelect&&this.props.onSelect(n,!1,!0):this.props.onSelect&&this.props.onSelect(n),this.handleClose()}handleChange(e){this.setState({inputValue:e,isOpen:!0,focusedItem:null},(()=>{this.props.onChange&&this.props.onChange(e)}))}UNSAFE_componentWillReceiveProps(e){this.props.selectedItem!==e.selectedItem&&this.setState({selectedItem:e.selectedItem,inputValue:e.getInputValue(e.selectedItem)})}getWrapperClasses(){return a()({[this.props.className]:!0,"input-select-v2-wrapper":!0,"is-open":this.state.isOpen,"is-disabled":this.props.disabled,"is-error":A.isEqual(this.props.validationState,"error"),"api-repository-integration-entity-select-dropdown":!0})}triggerBranchCreateFlow(){S.default.addEventV2({category:"api_repo_integration_v2",entityId:A.get(this.props,"apiId"),action:"create_branch",label:"config_form",value:1}),this.props.createBranch&&this.props.createBranch(),this.handleClose()}renderCreateBranchMenuItem(){return s.createElement("div",{className:`${this.props.menuClassName}__create-branch-menuitem`},s.createElement(p.default,null),s.createElement(I.MenuItem,{className:"item",onSelect:this.triggerBranchCreateFlow},s.createElement(f.default,null),s.createElement("span",null,"Create new branch")))}renderReauthMenu(){return s.createElement(s.Fragment,null,s.createElement(p.default,null),s.createElement("div",{className:"reauth-menu-container"},s.createElement("div",{className:"reauth-menu"},"Want to connect to a different ",this.props.reauthEntity,"?",s.createElement("div",{onClick:this.props.performReauth},s.createElement(u.default,{type:"link-primary"},"Connect with ",this.props.reauthService," account"))),s.createElement("div",{className:"reauth-menu"},"Manage all connected accounts on",s.createElement(m.default,{type:"monochrome-plain",text:"settings",onClick:()=>{(0,C.default)(null,T.SETTINGS_CONNECTED_ACCOUNTS),this.setState({isOpen:!1})}}))))}renderMenu(){const e=this.renderOptions(),{isBranchSelectionDropdown:t,isMenuLoading:n,shouldRenderReAuthMenu:o}=this.props,i=A.isEmpty(this.props.getFilteredList()),r=t&&!i;return A.isEmpty(e)&&!n?null:s.createElement(I.DropdownMenu,{disableCloseOnInputElementScroll:this.props.disableCloseOnInputElementScroll,fluid:!0,parentClassName:`input-select-v2-dropdown-menu ${this.props.menuClassName}`,targetRef:this.refs.wrapper,onSelect:this.handleSelect,onClose:this.handleClose,ref:e=>{this.dropdownMenuRef=e},className:"api-repository-integration-entity-select-dropdown-menu"},e,n&&s.createElement("div",{className:"api-repository-integration-entity-select-dropdown-menu__loader"},s.createElement(h.default,null)),r&&this.renderCreateBranchMenuItem(),!n&&o&&this.renderReauthMenu())}renderInputWithDropdown(){const{placeholder:e,hideSearchGlass:t,hideCancelOnBlur:n,showToggleButton:o,selectAllOnFocus:i}=this.props;return s.createElement("div",{ref:"wrapper",className:this.getWrapperClasses(),style:this.props.style},s.createElement(E.Input,{hideCancelOnBlur:n,hideSearchGlass:t,inputStyle:"search",className:this.props.inputClassName,placeholder:e||"Type to filter",query:this.state.inputValue,ref:"input",selectAllOnFocus:i,onCancel:this.handleCancel,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,disabled:this.props.disabled}),o&&s.createElement(_.Button,{className:"dropdown-button",ref:"button",onClick:this.handleToggleList,disabled:this.props.disabled},s.createElement(b.default,{name:this.state.isOpen?"icon-direction-up":"icon-direction-down",className:"dropdown-caret"})),this.state.isOpen&&this.renderMenu())}render(){const{tooltip:e}=this.props;return e?s.createElement(g.default,{content:e},this.renderInputWithDropdown()):this.renderInputWithDropdown()}})||o;j.defaultProps={closeOnBlur:!0,closeOnSelect:!0,hideCancelOnBlur:!0,selectAllOnFocus:!0,showToggleButton:!0,hideSearchGlass:!0,openOnFocus:!0,resetEmptyFilterOnBlur:!0,resetSearchFilterOnBlur:!1,menuClassName:"",inputClassName:"",disableCloseOnInputElementScroll:!0},j.propTypes={closeOnBlur:c().bool,closeOnSelect:c().bool,hideCancelOnBlur:c().bool,selectAllOnFocus:c().bool,showToggleButton:c().bool,hideSearchGlass:c().bool,resetEmptyFilterOnBlur:c().bool,resetSearchFilterOnBlur:c().bool,menuClassName:c().string,inputClassName:c().string,onBlur:c().func,onFocus:c().func,openOnFocus:c().bool,optionRenderer:c().func.isRequired,getInputValue:c().func.isRequired,selectedItem:c().object.isRequired,getFilteredList:c().func.isRequired,disableCloseOnInputElementScroll:c().bool}},"./api-dev/components/api-repo-integration/EntitySelectDropdown/EntitySelectDropdown.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/SearchHighlighter.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=n("./api-dev/components/api-repo-integration/APIRepositoryIntegrationEntitySelectDropdown/APIRepositoryIntegrationEntitySelectDropdown.js"),l=n("./api-dev/components/api-repo-integration/APIRepoIntegrationConfigurationBranchCreateModal/index.tsx"),c=n("./node_modules/lodash/lodash.js");function d(e){const{title:t,description:n,parentClassName:d,selectedItem:u,disabled:p,handleSelect:m,filterList:h,errorMessage:g,retryHandler:f,isLoading:b,isOptionsCreatable:y,warningMessage:v,tooltip:I,isBranchSelectionDropdown:_,markCreateBranch:E,doesBranchExist:S,apiId:C,customEmptyStateComponent:T,validationState:A,onChange:j,onClear:w,onBlur:O,placeholder:N,shouldRenderReAuthMenu:R,reauthEntity:P,reauthService:D,performReauth:M}=e,[x,L]=o.useState(!1),[k,F]=o.useState(!1),B=_&&0===(h()||[]).length;function U(e,t,n=!1,o=!0){m(e,n,o,t),E(e.name,t),L(!1),F(!0)}function V(...e){e[0].name||(e[0].name=e[0].id),m(...e),F(!1)}function G(e){if(!e)return"";return e.name||e.id}function z(e,t,{firstRender:n}={}){const{name:i}=e,a="directory"===c.get(e,"type"),l=t&&!n;return o.createElement("div",{className:"api-repo-integration-configuration__dropdown-item-wrapper"},o.createElement("div",{className:"api-repo-integration-configuration__dropdown-item-label"},a&&o.createElement(r.default,{name:"icon-entity-folder-stroke",color:"content-color-tertiary",className:"api-repo-integration-configuration__dropdown-item-icon"}),l?o.createElement(s.default,{source:i,query:t,highlightClassName:"search-highlighted-api-git"}):o.createElement("span",{className:"api-repo-integration-configuration__dropdown-item-label__name",title:i},i)))}function H(e){const{errorMessage:t,parentClassName:n,retryHandler:s}=e;return t?o.createElement("div",{className:`${n}__error`},o.createElement(r.default,{className:`${n}__error__icon`,name:"icon-state-error-stroke",color:"content-color-error",size:"small"}),o.createElement("span",{className:`${n}__error__message`},t),s&&o.createElement("div",{onClick:s,className:`${n}__error__message`},o.createElement(i.default,{type:"link-default",color:"content-color-error"},"Try Again"))):null}function W({warningMessage:e}={}){return e?o.createElement(i.default,{type:"body-medium",color:"content-color-warning"},e):null}return o.createElement("div",{className:d},o.createElement("span",{className:`${d}__title`},t),o.createElement("span",{className:`${d}__description`},n),o.createElement(a.APIRepositoryIntegrationEntitySelectDropdown,{className:`${d}__dropdown-container__dropdown`,inputClassName:`${d}__dropdown-container__input`,menuClassName:`${d}__dropdown-container__menu`,placeholder:N,selectedItem:u,customEmptyStateComponent:T,disabled:p,getInputValue:G,optionRenderer:z,getFilteredList:h,onSelect:B?function(e){U(e,null,!0,!0)}:_?V:m,isOptionsCreatable:y,tooltip:I,resetSearchFilterOnBlur:!0,isBranchSelectionDropdown:_,createBranch:_&&(()=>L(!0)),apiId:C,validationState:A,onChange:j,isMenuLoading:b,onClear:w,onBlur:O,shouldRenderReAuthMenu:R,reauthEntity:P,reauthService:D,performReauth:M}),o.createElement(H,{errorMessage:g,parentClassName:d,retryHandler:f}),o.createElement(W,{warningMessage:v}),_&&x&&o.createElement(l.default,{branches:h()||[],selectedBranch:u,onSelect:V,onSubmit:U,isOpen:x,onCancel:()=>L(!1),doesBranchExist:S,errorMessage:g,parentClassName:d,branchSelectorDropdown:o.createElement(o.Fragment,null,o.createElement(a.APIRepositoryIntegrationEntitySelectDropdown,{className:`${d}__dropdown-container__dropdown ${d}__dropdown-container__dropdown__alt`,inputClassName:`${d}__dropdown-container__input`,menuClassName:`${d}__dropdown-container__menu__alt`,placeholder:N,selectedItem:k?{}:u,disabled:p,getInputValue:G,optionRenderer:z,getFilteredList:h,onSelect:V,isOptionsCreatable:y,customEmptyStateComponent:T,tooltip:I,resetSearchFilterOnBlur:!0,onChange:j,isMenuLoading:b,onClear:w,onBlur:O,isBranchCreationModalDropdown:!0}),o.createElement(H,{errorMessage:g,parentClassName:d,retryHandler:f}))}))}d.defaultProps={parentClassName:"api-repo-integration-configuration__select-repo"},t.default=d},"./api-dev/components/api-repo-integration/OAuthLoadingView/OAuthLoadingView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");class a extends o.Component{constructor(e){super(e)}render(){const{serviceName:e,serviceFriendlyName:t,handleOnClose:n}=this.props;return o.createElement("div",{className:"connect-repo-tab","data-testId":"connect-repo-tab-loading"},o.createElement("div",{className:"api-repository-connecting"},o.createElement("div",{className:"api-repository-connecting__illustration_wrapper"},o.createElement("div",{className:`api-repository-connecting__illustration__${e}`})),o.createElement(s.default,{type:"h4",hasBottomSpacing:!0,text:`Connecting to ${t}…`}),o.createElement(i.default,{type:"para",hasBottomSpacing:!0},"This may take up to 60 seconds."),o.createElement(r.default,{type:"outline",onClick:n,text:"Cancel"})))}}},"./api-dev/components/api-version/api-version-sub-tabs/Deployments/Deployments.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/XPaths/XPath.js"),i=n("./onboarding/src/common/LaunchDarkly.js"),r=n("./integrations/api-observability/containers/ObservabilityContainer.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/CurrentUserStore.js"),c=n("./node_modules/lodash/lodash.js");class d extends o.Component{constructor(e){super(e),this.isUserLoggedIn=(0,a.resolveStoreInstance)(l.default).isLoggedIn}isAPIIntegrationVisible(e){return this.isUserLoggedIn&&i.launchDarkly.getFlag(e,!1)&&c.get(this.props,"model.apiPermissionStore.canViewAPIIntegrations")}render(){var e,t,n;return this.isAPIIntegrationVisible("api-deployments-tab-enabled")&&o.createElement(s.default,{identifier:"deploymentTabContent",isVisible:"deployment"===c.get(this.props,"model.apiEditorUIStore.activeTab")},"deployments"===(null===(e=this.props)||void 0===e||null===(t=e.model)||void 0===t||null===(n=t.apiEditorUIStore)||void 0===n?void 0:n.activeScreen)&&o.createElement(r.default,{model:this.props.model,promoteTab:this.props.promoteTab}))}}},"./api-dev/components/api-version/api-version-sub-tabs/Monitoring/Monitoring.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/XPaths/XPath.js"),i=n("./onboarding/src/common/LaunchDarkly.js"),r=n("./integrations/monitoring/containers/MonitoringContainerWrap.js"),a=(n("./api-dev/components/api-version/observation/Monitors/Monitor.js"),n("./api-dev/components/api-version/observation/Monitors/UptimeMonitor.js"),n("./js/stores/StoreManager.js")),l=n("./js/stores/CurrentUserStore.js"),c=(n("./integrations/monitoring/constants.js"),n("./node_modules/lodash/lodash.js"));class d extends o.Component{constructor(e){super(e),this.isUserLoggedIn=(0,a.resolveStoreInstance)(l.default).isLoggedIn}isAPIIntegrationVisible(e){return this.isUserLoggedIn&&i.launchDarkly.getFlag(e,!1)&&c.get(this.props,"model.apiPermissionStore.canViewAPIIntegrations")}render(){var e,t,n;return o.createElement(s.default,{identifier:"monitoringTabContent",isVisible:"monitoring"===c.get(this.props,"model.apiEditorUIStore.activeTab")},"performance"===(null===(e=this.props)||void 0===e||null===(t=e.model)||void 0===t||null===(n=t.apiEditorUIStore)||void 0===n?void 0:n.activeScreen)&&this.isAPIIntegrationVisible("apm-integrations-in-api-platform")&&o.createElement(r.default,{model:this.props.model,promoteTab:this.props.promoteTab}))}}},"./api-dev/components/api-version/api-version-sub-tabs/Test/Test.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/XPaths/XPath.js"),i=n("./onboarding/src/common/LaunchDarkly.js"),r=n("./integrations/ci-cd/containers/ApiIntegrationViewContainer.js"),a=n("./api-dev/components/api-version/test/TestSuite/TestSuite.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/CurrentUserStore.js"),d=n("./node_modules/lodash/lodash.js");class u extends o.Component{constructor(e){super(e),this.isUserLoggedIn=(0,l.resolveStoreInstance)(c.default).isLoggedIn}isAPIIntegrationVisible(e){return this.isUserLoggedIn&&i.launchDarkly.getFlag(e,!1)&&d.get(this.props,"model.apiPermissionStore.canViewAPIIntegrations")}render(){var e,t,n,i,l,c;return o.createElement(s.default,{identifier:"testTabContent",isVisible:"tests"===d.get(this.props,"model.apiEditorUIStore.activeScreen")},"tests"===(null===(e=this.props)||void 0===e||null===(t=e.model)||void 0===t||null===(n=t.apiEditorUIStore)||void 0===n?void 0:n.activeScreen)&&o.createElement(a.default,{model:this.props.model,key:`${d.get(this.props,"model.id")}/tests`,promoteTab:this.props.promoteTab}),"tests"===(null===(i=this.props)||void 0===i||null===(l=i.model)||void 0===l||null===(c=l.apiEditorUIStore)||void 0===c?void 0:c.activeScreen)&&this.isAPIIntegrationVisible("ci-cd-integrations-in-api-platform")&&o.createElement(r.default,{model:this.props.model,promoteTab:this.props.promoteTab}))}}},"./api-dev/components/api-version/common/APIEntityActions/APIEntityActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./api-dev/components/api-version/common/RemoveEntity/RemoveEntity.tsx"),a=n("./api-dev/components/api-version/common/MoreActions/MoreActions.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}let c=(0,s.observer)(o=class extends i.Component{constructor(e){super(e)}render(){return this.props.isWindowShrunk?i.createElement(a.default,l({},this.props,{entityType:this.props.entityType})):i.createElement(i.Fragment,null,this.props.actionComponent,i.createElement(r.default,{entity:this.props.entity,onRemoveEntity:this.props.onRemoveEntity,canRemoveEntity:this.props.canRemoveEntity,isAPIDeleted:this.props.isAPIDeleted,isSmall:!0,tooltipPosition:"bottom"}))}})||o},"./api-dev/components/api-version/common/APIEntityEmptyState/EntityEmptyState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("./appsdk/components/link/Link.js");class r extends o.Component{constructor(e){super(e)}render(){return this.props.isOpen&&o.createElement("div",{className:"entity-empty__description"},o.createElement("span",null,this.props.entityDescription),o.createElement(i.default,{to:this.props.link,target:"_blank"},o.createElement(s.default,{className:"entity-learn-more-link",type:"link-default"},"Learn more")),o.createElement("span",null,this.props.learnText))}}},"./api-dev/components/api-version/common/APIEntitySection/APIEntitySection.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=n("./js/components/base/Buttons.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./js/stores/StoreManager.js"),p=n("./js/stores/CurrentUserStore.js"),m=n("./api-dev/util/TooltipText.js"),h=n("./js/components/base/Tooltips.js"),g=n("./api-dev/constants/Permissions.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),y=n("./node_modules/lodash/lodash.js");let v=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={isOpen:void 0===this.props.open||this.props.open,showTooltip:!1},this.handleCollapse=this.handleCollapse.bind(this),this.handleAdd=this.handleAdd.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this)}handleCollapse(){this.setState((e=>({isOpen:!e.isOpen})))}handleAdd(){if(!(0,u.resolveStoreInstance)(p.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"addEnvironment",origin:"api_builder_add_environment_button",continueUrl:new URL(window.location.href)});y.isFunction(this.props.onAddEntity)&&this.props.onAddEntity()}getContentClasses(){return a()({"api-entity-contents":!0,"is-collapsed":!this.state.isOpen})}showTooltip(){this.setState({showTooltip:!0})}hideTooltip(){this.setState({showTooltip:!1})}render(){let e=this.state.isOpen?"icon-direction-down":"icon-direction-right",t=this.state.isOpen?"Hide":"Show";const n=!(0,u.resolveStoreInstance)(d.default).isSocketConnected,o=y.get(this.props,"model.isAPIDeleted"),i=this.props.model&&this.props.model.apiPermissionStore.canAddEnvironment,r=n||!i||o,a="Add Environment"===this.props.actionTitle&&r,p=o&&g.DELETED_API_DISABLED_TEXT;return s.createElement(f.default,{direction:"column",grow:1,padding:"spacing-l",className:"api-entity-collapse-section"},s.createElement(f.default,{justifyContent:"space-between",alignItems:"center",padding:{paddingTop:"spacing-xs",paddingBottom:"spacing-xs"},className:"api-entity-header"},s.createElement("div",{"data-testid":"api-entity-header__left-section",className:"api-entity-header__left-section",onClick:this.handleCollapse},s.createElement("div",{className:"api-entity-header__icon",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,ref:e=>this.arrowIconRef=e},s.createElement(l.default,{name:e})),s.createElement(h.Tooltip,{show:this.state.showTooltip,target:this.arrowIconRef,placement:"bottom",immediate:!0},s.createElement(h.TooltipBody,null,t)),s.createElement(b.default,{type:"h4",text:this.props.title})),s.createElement("div",{className:"api-entity-header__right-section"},s.createElement("div",{className:"api-entity-header__action"},y.invoke(this.props,"renderDropdown")||s.createElement(c.Button,{type:"text",disabled:a,tooltip:(0,m.default)(a,!i,p),className:"api-entity-header__add-button",onClick:this.handleAdd},this.props.actionTitle)))),s.createElement("div",{className:this.getContentClasses()},this.props.renderSectionContent(this.state.isOpen)))}})||o},"./api-dev/components/api-version/common/APIEntityTable/APIEntityTable.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o,s=n("../../node_modules/react/index.js"),i=n("./api-dev/components/api-version/common/APIEntityTable/TableHeader/TableHeader.js"),r=n("./api-dev/components/api-version/common/APIEntityTable/TableBody/TableBody.js");let a=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(o=class extends s.Component{constructor(e){super(e)}render(){return this.props.isOpen&&s.createElement("div",{className:"api-dev-table"},s.createElement(i.default,{headers:this.props.headers,type:this.props.type}),s.createElement(r.default,{headers:this.props.headers,cells:this.props.cells,content:this.props.content,className:this.props.className,type:this.props.type}))}})||o},"./api-dev/components/api-version/common/APIEntityTable/TableBody/TableBody.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");let c=(0,i.observer)(o=class extends s.Component{constructor(e){super(e)}getClassName(e){return a()({"api-dev-table-row__cell":!0,"row-hover__cell":!0,[e]:!0})}render(){return s.createElement("div",{className:"api-dev-table-body"},l.map(this.props.content,(e=>s.createElement("div",{className:a()({"api-dev-table-row":!0,"row-hover":!0,"api-dev-table-row-monitors":"monitors"===this.props.type,"api-dev-table-row-uptime-monitors":"uptimeMonitors"===this.props.type}),key:e.id},s.createElement("div",{className:"row-empty"}),l.map(this.props.headers,(t=>{let n=l.get(e.links,`${t.key}.action`);return s.createElement("div",{key:t.key,className:this.getClassName(t.class)},this.props.cells[t.key](e[t.key],e,n))}))))))}})||o},"./api-dev/components/api-version/common/APIEntityTable/TableCells/LastRunResultsCell/LastRunResultsCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o,s=n("../../node_modules/react/index.js"),i=(n("./js/components/base/Buttons.js"),n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js")),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=(n("./runtime-repl/runner/_api/RunnerInterface.js"),n("./js/stores/StoreManager.js")),c=n("./js/stores/SyncStatusStore.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=(n("./js/components/base/Tooltips.js"),n("./node_modules/classnames/index.js")),p=n.n(u),m=(n("./api-dev/util/TooltipText.js"),n("./api-dev/components/api-version/common/APIEntityTable/TableCells/LastRunResultsCell/LastRunStatusBadge.js")),h=n("./api-dev/components/api-version/test/Services/DateUtil.js"),g=n("./node_modules/lodash/lodash.js");let f=(0,d.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showTooltip:!1},this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.resultTooltip=s.createRef()}showTooltip(){this.setState({showTooltip:!0})}hideTooltip(){this.setState({showTooltip:!1})}getClassName(e){return p()({"entity-last-run__status":!0,shrinked:g.get(this.props.model,"apiEditorUIStore.isWindowShrunk"),[e]:!0})}hasError(e,t){return!g.isInteger(e)||!g.isInteger(t)}render(){(0,l.resolveStoreInstance)(c.default).isSocketConnected;const e=g.get(this.props,"entity.lastRuns");return g.get(this.props,"entity.loadingRuns")?s.createElement("span",{"data-testid":"last-run-results-spinner"},s.createElement(i.default,null)):e&&e.error?s.createElement("div",{className:this.getClassName(status),onClick:e.handleRetry,className:"entity-last-run__error"},s.createElement(a.default,{className:"entity-last-run__status-icon",name:"icon-state-error-stroke",color:"content-color-error",size:"small"}),"Retry fetching"):g.isEmpty(e)?s.createElement(r.default,{color:"content-color-secondary","data-testid":"last-run-results-no-run"},"No runs yet"):g.map(e,(e=>{const t=g.get(e,"passedTestCount",null),n=g.get(e,"failedTestCount",null),o=g.get(e,"updatedAt",null);return s.createElement(m.default,{testPassed:t,testFailed:n,updatedAt:h.default.getFormattedTime(o),model:this.props.model})}))}})||o},"./api-dev/components/api-version/common/APIEntityTable/TableCells/LastRunResultsCell/LastRunStatusBadge.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=(n("./js/components/base/Buttons.js"),n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js")),r=(n("./runtime-repl/runner/_api/RunnerInterface.js"),n("../../node_modules/mobx-react/dist/mobx-react.module.js")),a=n("./js/components/base/Tooltips.js"),l=n("./node_modules/classnames/index.js"),c=n.n(l),d=(n("./api-dev/util/TooltipText.js"),n("./js/components/base/LoadingIndicator.js"),n("./node_modules/lodash/lodash.js"));let u=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showTooltip:!1},this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.resultTooltip=s.createRef()}showTooltip(){this.setState({showTooltip:!0})}hideTooltip(){this.setState({showTooltip:!1})}getClassName(e){return c()({"entity-last-run__status":!0,shrinked:d.get(this.props.model,"apiEditorUIStore.isWindowShrunk"),[e]:!0})}renderBatchLabel(e,t){let n="error";return"failed"===t?n=`${e} FAILED on ${this.props.updatedAt}`:"success"===t?n=`${e} PASSED on ${this.props.updatedAt}`:"notest"===t&&(n="No tests were linked during this collection run"),s.createElement(s.Fragment,null,s.createElement("div",{"data-testid":"last-run-status-badge",className:this.getClassName(t),ref:this.resultTooltip,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},"error"==t&&s.createElement(i.default,{className:"entity-last-run__status-icon",name:"icon-state-error-stroke",color:"content-color-error",size:"small"}),e),s.createElement(a.Tooltip,{show:this.state.showTooltip,target:this.resultTooltip.current,placement:"bottom"},s.createElement(a.TooltipBody,null,n,s.createElement("br",null),"Source: Postman Collection Runner")))}hasError(e,t){return!d.isInteger(e)||!d.isInteger(t)}render(){const{testFailed:e,testPassed:t}=this.props;return s.createElement(s.Fragment,null,this.hasError(t,e)?this.renderBatchLabel("ERROR","error"):e+t===0&&this.renderBatchLabel("N/A","notest")||e>0&&this.renderBatchLabel(e+"/"+(e+t),"failed")||0==e&&this.renderBatchLabel(t+"/"+(e+t),"success"))}})||o},"./api-dev/components/api-version/common/APIEntityTable/TableCells/LastUpdatedCell/LastUpdatedCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/@postman/date-helper/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");class a extends o.Component{constructor(e){super(e)}render(){let e=i().getFormattedDateAndTime(this.props.cellInfo);return o.createElement(r.default,{className:"entity-last-updated__label",type:"body-medium",color:"content-color-primary"},e)}}},"./api-dev/components/api-version/common/APIEntityTable/TableCells/NameCell/NameCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./api-dev/util/URLDomainValidation.js"),i=n("./js/modules/services/AnalyticsService.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("./appsdk/components/link/Link.js"),c=n("./node_modules/lodash/lodash.js");class d extends o.Component{constructor(e){super(e),this.getNavigationIntentObject=this.getNavigationIntentObject.bind(this),this.handleClick=this.handleClick.bind(this)}getNavigationIntentObject(){let{link:e}=this.props.action;const t=this.props.navigationIntentObject;if(this.props.ignoreValidationForNavigation||e&&(0,s.validateUrlDomain)(e))return t}handleClick(e){this.props.onClick&&this.props.onClick();let{link:t,analyticEventLabel:n,entityId:o}=this.props.action;if(this.props.ignoreValidationForNavigation||t){if(c.get(this.props,"promoteTab")&&c.isFunction(this.props.promoteTab)&&this.props.promoteTab(),i.default.addEventV2({category:"api_relation",entityId:o,action:"navigate",label:n,value:1}),"documentation"===n){let e=new RegExp("[0-9]+-[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}"),n=c.get(e.exec(t),"0");i.default.addEventV2({category:"documentation",action:"view_private",label:"api",entityType:"collection",entityId:n})}}else e.preventDefault()}render(){let e=this.props.icon;return o.createElement(o.Fragment,null,o.createElement("div",{className:"entity-name__icon","data-testid":"name-cell-icon"},o.createElement(a.default,{name:e,color:"content-color-primary"})),o.createElement(l.default,{className:"entity-name__link",to:this.getNavigationIntentObject(),onClick:this.handleClick},o.createElement("div",{className:"entity-name__label"},o.createElement(r.default,{type:"link-subtle",tooltip:this.props.cellInfo,isTruncated:!0},this.props.cellInfo))))}}},"./api-dev/components/api-version/common/APIEntityTable/TableCells/ValidationCell/ValidationCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("./js/components/base/LoadingIndicator.js"),c=n("./api-dev/components/api-version/common/ValidationInfoPopup/ValidationInfoPopup.js"),d=n("./js/services/NavigationService.js"),u=n("./js/stores/SyncStatusStore.js"),p=n("./js/stores/StoreManager.js"),m=n("./js/stores/CurrentUserStore.js"),h=n("./js/modules/services/AnalyticsService.js"),g=n("./api-dev/constants/RelationValidationConstants.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),y=n("./api-dev/util/TooltipText.js"),v=n("./api-dev/constants/Permissions.js"),I=n("../../node_modules/mobx/lib/mobx.module.js"),_=n("./node_modules/lodash/lodash.js");const E={error:s.createElement(b.default,{name:"icon-state-disable-stroke",size:"small"}),success:s.createElement(b.default,{name:"icon-state-success-stroke",color:"content-color-success",size:"small"}),warning:s.createElement(b.default,{name:"icon-state-warning-stroke",color:"content-color-warning",size:"small"}),validating:s.createElement(l.default,null),refresh:s.createElement(b.default,{name:"icon-state-disable-stroke",size:"small"}),validate:null};let S=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showValidationInfo:!1,showValidationStatusButton:!1},this.showValidationInfo=this.showValidationInfo.bind(this),this.hideValidationInfo=this.hideValidationInfo.bind(this),this.handlePopupActions=this.handlePopupActions.bind(this),this.handleValidate=this.handleValidate.bind(this),this.handleRefreshValidate=this.handleRefreshValidate.bind(this),this.waitForValidationStatusUpdate=this.waitForValidationStatusUpdate.bind(this)}isLoggedIn(){return(0,p.resolveStoreInstance)(m.default).isLoggedIn}handleValidate(){if(!this.isLoggedIn())return pm.mediator.trigger("showSignInModal",{type:"validate",origin:"api_builder_validate_relation_button",continueUrl:new URL(window.location.href)});_.invoke(this.props,"store.validateRelation",_.get(this.props,"entity.id")),this.waitForValidationStatusUpdate()}handleRefreshValidate(){_.invoke(this.props.store,"validateRelation",this.props.entity.id).then((e=>{this.waitForValidationStatusUpdate(),e&&pm.windowEvents.emit("collection-validation-invalidate-cache",{relationId:_.get(this.props,"entity.id")})}))}waitForValidationStatusUpdate(){this.setState({showValidationStatusButton:!0});const e=(0,I.reaction)((()=>_.get(this.props,"entity.isValidating")),(t=>{t||setTimeout((()=>{this.setState({showValidationStatusButton:!1}),e()}),2e3)}))}handleClick(e){if(!_.isEmpty(e)){switch(e.type){case"validate":this.handleValidate();break;case"error":case"success":case"warning":case"refresh":this.showValidationInfo()}h.default.addEventV2({category:"api-design",action:"interact",label:"read",value:1,entityType:"api",entityId:_.get(this.props,"store.apiId")}),h.default.addEventV2({category:"relation_validation",entityId:_.get(this.props,"store.apiId"),action:"click_results",label:e.message,value:1})}}showValidationInfo(){if(!this.isLoggedIn())return pm.mediator.trigger("showSignInModal",{type:"showValidationInfo",origin:"api_builder_show_validation_button",continueUrl:new URL(window.location.href)});this.setState({showValidationInfo:!0})}hideValidationInfo(){this.state.showValidationInfo&&this.setState({showValidationInfo:!1})}handlePopupActions(e){switch(e){case"refresh":this.handleRefreshValidate();break;case"link":d.default.transitionTo("build.collectionSchemaSync",{apiId:_.get(this.props,"store.apiId")},{version:_.get(this.props,"store.__version.id"),relation:_.get(this.props,"entity.id"),type:_.get(this.props,"store.type")});break;case"add_schema":_.invoke(this.props.apiEditorUIStore,"setActiveTab","define")}this.hideValidationInfo()}renderValidationStatus(e){let t="content-color-primary";return"warning"===e.type?t="content-color-warning":"validating"===e.type?t="content-color-secondary":"success"===e.type&&(t="content-color-success"),s.createElement(s.Fragment,null,E[e.type],s.createElement("span",{className:"entity-validation__status_text"},s.createElement(f.default,{type:"body-medium",color:t},e.message)))}getClasses(e,t){const n=this.state.showValidationInfo||"validating"===e||this.state.showValidationStatusButton;return a()(e,{"entity-validation__status":!0,"is-validate-disabled":t,"entity-validation__status__active":n})}render(){let e,t,n,o=_.get(this.props,"cellInfo"),i=_.get(this.props,"entity.isValidating"),r=_.get(this.props,"entity.isValidationFailed"),a=this.props.isAPIDeleted;!_.isEmpty(o)||i||r?i?o=g.VALIDATIONS.VALIDATING:r&&(o=g.VALIDATIONS.FAILED):o=g.VALIDATIONS.VALIDATE;const l=!(0,p.resolveStoreInstance)(u.default).isSocketConnected;return e=o.actions||null,t=l||!this.props.canValidateRelation||a,n=a&&v.DELETED_API_DISABLED_TEXT,s.createElement(s.Fragment,null,s.createElement("div",{className:this.getClasses(o.type,t),onClick:()=>!t&&this.handleClick(o),ref:e=>this.validationStatus=e,title:t?(0,y.default)(t,!this.props.canValidateRelation,n):o.message},this.renderValidationStatus(o)),e&&s.createElement(c.default,{info:e.popup,show:this.state.showValidationInfo,target:this.validationStatus,placement:"right",onSelectAction:this.handlePopupActions,onClose:this.hideValidationInfo,entityId:_.get(this.props,"store.apiId"),promoteTab:_.get(this.props,"promoteTab")}))}})||o},"./api-dev/components/api-version/common/APIEntityTable/TableCells/VersionCell/VersionCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("./node_modules/postman-collection/index.js"),c=n("./js/components/base/Markdown.js"),d=n("./js/components/base/WarningButton.js"),u=n("./js/components/base/InfoButtonV3.js"),p=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(o=class extends s.Component{constructor(e){super(e)}getVersionLabelClass(){return a()({"entity-version__label":!0,"entity-version__current-label":p.isEqual(p.get(this.props.cellInfo,"name"),"CURRENT")})}renderVersionIcon(){if(p.get(this.props.cellInfo,"indicators[0]")){let e=l.Property.replaceSubstitutions(p.get(this.props.cellInfo,"indicators[0].message.template"),p.get(this.props.cellInfo,"indicators[0].message.variables")),t=s.createElement(c.default,{className:"entity-version__markdown",source:e,linkTarget:"_blank"});return{warning:s.createElement(d.default,{tooltip:t}),info:s.createElement(u.default,{tooltip:t})}[p.get(this.props.cellInfo,"indicators[0].type")]}}render(){return s.createElement(s.Fragment,null,s.createElement("div",{className:this.getVersionLabelClass(),title:this.props.cellInfo&&this.props.cellInfo.name},this.props.cellInfo&&this.props.cellInfo.name),s.createElement("div",{className:"entity-version__icon"},this.renderVersionIcon()))}})||o},"./api-dev/components/api-version/common/APIEntityTable/TableHeader/TableHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/base/Tooltips.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/lodash/lodash.js");let u=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({showTooltip:!0})},this.hideTooltip=()=>{this.setState({showTooltip:!1})},this.state={showTooltip:!1}}getClassName(e){return l()({"api-dev-table-row__cell":!0,shrinked:d.get(this.props.model,"model.apiEditorUIStore.isWindowShrunk"),"api-dev-table-header__cell":!0,[e]:!0})}render(){return s.createElement("div",{className:l()({"api-dev-table-row api-dev-table-header":!0,"api-dev-table-header-monitors":"monitors"===this.props.type})},s.createElement("div",{className:"api-tab-header-empty"},s.createElement("span",{className:"api-dev-table-header__cell-name empty-column"})),d.map(this.props.headers,(e=>s.createElement("div",{className:this.getClassName(e.class),key:e.key},s.createElement("span",{className:"api-dev-table-header__cell-name",title:e.tooltip},e.val),e.helperText&&s.createElement(s.Fragment,null,s.createElement("div",{className:"api-dev-table-header__helper-icon",ref:e=>this.questionIconRef=e,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},s.createElement(r.default,{name:"icon-state-info-stroke",color:"content-color-tertiary",size:"small"})),s.createElement(i.Tooltip,{show:this.state.showTooltip,target:this.questionIconRef,placement:"right",immediate:!0},s.createElement(i.TooltipBody,null,e.helperText)))))))}})||o},"./api-dev/components/api-version/common/AddEntityModal/AddEntityModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("./js/components/base/Buttons.js"),h=n("./api-dev/services/APIDevService.js"),g=n("./js/components/base/LoadingIndicator.js"),f=n("./api-dev/components/common/ErrorHandler/ErrorHandler.js"),b=n("./js/stores/StoreManager.js"),y=n("./js/stores/SyncStatusStore.js"),v=n("./js/components/collections/CollectionForkLabel.js"),I=n("./js/components/base/Modals.js"),_=n("./api-dev/util/TooltipText.js"),E=n("./js/modules/services/ManageRolesModalService.js"),S=n("./node_modules/lodash/lodash.js"),C=n.n(S);const T={mock:"mock servers",documentation:"documentation",environment:"environments",contracttest:"contract tests",integrationtest:"integration tests",testsuite:"test suites",monitor:"monitors",uptimemonitor:"uptime monitors"};function A({forkLabel:e,name:t,reason:n,isDisabled:o}={}){if(e){const i={forkLabel:e};return o?s.createElement(r.default,{content:C().get(n,"message"),placement:"right",closeDelay:20},s.createElement("div",{className:"add-entity-modal__dropdown-options"},s.createElement(a.default,{isTruncated:!0},t),s.createElement(v.default,{forkInfo:i}))):s.createElement(s.Fragment,null,s.createElement(a.default,{isTruncated:!0},t),s.createElement(v.default,{forkInfo:i}))}return o?s.createElement(r.default,{content:C().get(n,"message"),placement:"right",closeDelay:20},s.createElement("div",{className:"add-entity-modal__dropdown-options"},s.createElement(a.default,{isTruncated:!0},t))):s.createElement(a.default,{isTruncated:!0},t)}let j=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={items:[],selectedItem:null,isLoading:!1,isLoadingError:!1},this.fetchLinkableEntities=this.fetchLinkableEntities.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleAdd=this.handleAdd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.renderContent=this.renderContent.bind(this),this.getEntityName=this.getEntityName.bind(this)}componentDidMount(){this.fetchLinkableEntities()}fetchLinkableEntities(){let e;this.setState({isLoading:!0}),this.props.getEntities().then((t=>{const n=C().map(C().filter(t,"fromWorkspace"),"id");if(C().isEmpty(t))return Promise.resolve([]);if(e=C().keyBy(t,"id"),C().isEmpty(n))return Promise.resolve([]);const{apiId:o,apiVersionId:s,type:i}=this.props;return h.default.checkConstraintsForRelationLink(o,s,i,n)})).then((t=>{C().forEach(t,((t={})=>{const{entityId:n,allowed:o,reason:s}=t;e[n]={...e[n],isAllowed:o,reason:s}})),this.setState({items:e,isLoading:!1,isLoadingError:!1})})).catch((e=>{pm.logger.error("AddEntityModal~fetchLinkableEntities: Failed to fetch possible entities",e),this.setState({isLoading:!1,isLoadingError:!0})}))}handleSelect(e){const t=C().get(e,"id"),n=C().find(this.state.items,["id",t]);this.setState({selectedItem:n})}handleAdd(){C().isFunction(this.props.onAdd)&&this.props.onAdd(this.state.selectedItem)}handleCancel(){C().isFunction(this.props.onCancel)&&this.props.onCancel()}renderErrorHandler(){let e,t,n;return!(0,b.resolveStoreInstance)(y.default).isSocketConnected?(e="No internet connection",t="You can only access your APIs when you’re online.  Check your internet connection and try again.",n=s.createElement(l.default,null)):(e=`Couldn't load ${T[this.props.type]}`,t="There was an unexpected error. Please try again.",n=s.createElement(c.default,null)),s.createElement(f.default,{title:e,description:t,buttonText:"Try Again",handler:this.fetchLinkableEntities,blankState:n})}renderContent(){if(this.state.isLoading)return s.createElement("div",{className:"add-entity-modal__loading-indicator"},s.createElement(g.default,null));if(this.state.isLoadingError)return this.renderErrorHandler();const e=[],t=[];C().forEach(this.state.items,(n=>{const o={value:n.id,label:n.name,isDisabled:!!n.fromWorkspace&&!n.isAllowed,...n};n.isAllowed?t.push(o):e.push(o)})),t.sort(((e,t)=>e.name.toUpperCase()>t.name.toUpperCase()?1:-1));const n=t.concat(e);let o="No results found";return C().isEmpty(n)&&(o=this.props.emptyStateText),s.createElement(d.default,{label:this.props.label,options:n,onChange:this.handleSelect,customOptionComponent:A,isOptionDisabled:e=>e.isDisabled,placeholder:"Select",emptyStateMessage:o,menuMaxHeight:100})}getEntityName(){const{type:e}=this.props;return{documentation:"documentation collection",mock:"mock server",environment:"environment",test:"test collection",monitor:"monitor"}[e]||"collection"}render(){const e=!(0,b.resolveStoreInstance)(y.default).isSocketConnected,t=this.props.isLoadingAddRelation||!this.state.selectedItem||e;return s.createElement(I.Modal,{className:"add-entity-modal",isOpen:this.props.isOpen,onRequestClose:this.handleCancel,customStyles:{width:"400px"}},s.createElement(I.ModalHeader,null,this.props.title),s.createElement(I.ModalContent,{className:this.state.isLoadingError&&"model-content__error"},s.createElement(u.default,{direction:"column",justifyContent:"space-between",height:"100%"},this.renderContent(),s.createElement(a.default,null,"Note: This API ",this.getEntityName()," will inherit roles from the API. "," ",s.createElement(p.default,{onClick:()=>(0,E.manageRolesOnAPI)(this.props.apiId),type:"monochrome-plain",text:"View API roles"})))),!this.state.isLoadingError&&s.createElement(I.ModalFooter,null,s.createElement(m.Button,{className:"add-entity__add-button",type:"primary",onClick:this.handleAdd,disabled:t,tooltip:(0,_.default)(t)},this.props.isLoadingAddRelation?s.createElement(g.default,null):this.props.buttonLabel),s.createElement(m.Button,{className:"add-entity__cancel-button",type:"secondary",onClick:this.handleCancel},"Cancel")))}})||o},"./api-dev/components/api-version/common/MoreActions/MoreActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Buttons.js"),i=n("./js/components/base/Dropdowns.js"),r=n("./js/stores/SyncStatusStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/CurrentUserStore.js"),c=n("./api-dev/util/RunTestActions.js"),d=n("./api-dev/util/RunMonitorActions.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=n("./api-dev/util/TooltipText.js"),m=n("./monitors/services/MonitorService.js"),h=n("./node_modules/lodash/lodash.js");class g extends o.Component{constructor(e){super(e),this.handleDropdownActionSelect=(e,t)=>{switch(e){case"Run Test":(0,c.getRunnerTab)(h.get(this.props.entity,"modelId"));break;case"Run Monitor":(0,d.runMonitor)(h.get(this.props.entity,"id"));break;case"Remove":this.onRemove();break;default:return}},this.state={},this.getMenuActions=this.getMenuActions.bind(this),this.initialisePermissionsForAction=this.initialisePermissionsForAction.bind(this)}componentDidMount(){this.initialisePermissionsForAction(this.props.entityType)}onRemove(){if(!(0,a.resolveStoreInstance)(l.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"removeEntity",origin:"api_builder_remove_entity_button",continueUrl:new URL(window.location.href)});h.isFunction(this.props.onRemoveEntity)&&this.props.onRemoveEntity(this.props.entity)}initialisePermissionsForAction(e){"Monitor"===e&&m.default.getPermissionsForJobTemplates([this.props.entity.id]).then((e=>{e[0]&&this.setState({"Run Monitor":e[0].run})}))}getMenuActions(e){const t=!(0,a.resolveStoreInstance)(r.default).isSocketConnected;switch(e){case"Test":return[{action:"Run Test",label:"Run",isDisabled:t,hasPermission:!0},{action:"Remove",label:"Delete",isDisabled:t||!this.props.canRemoveEntity,hasPermission:this.props.canRemoveEntity}];case"Monitor":return[{action:"Run Monitor",label:"Run Monitor",isDisabled:t||!this.state["Run Monitor"],permissionErrorText:"You don't have permission to take this action",hasPermission:this.state["Run Monitor"]},{action:"Remove",label:"Remove",isDisabled:t||!this.props.canRemoveEntity,hasPermission:this.props.canRemoveEntity}];case"UptimeMonitor":return[{action:"Remove",label:"Remove",isDisabled:t||!this.props.canRemoveEntity,hasPermission:this.props.canRemoveEntity}];default:return}}render(){return o.createElement(o.Fragment,null,o.createElement(i.Dropdown,{ref:"menu",onSelect:this.handleDropdownActionSelect,className:"more-actions-dropdown"},o.createElement(i.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},o.createElement(s.Button,{tooltip:"View more actions",type:"tertiary"},o.createElement(u.default,{name:"icon-action-options-stroke",className:"pm-icon pm-icon-normal"}))),o.createElement(i.DropdownMenu,{"align-right":!0},h.map(this.getMenuActions(this.props.entityType),(e=>o.createElement(i.MenuItem,{key:e.action,refKey:e.action,disabled:e.isDisabled,disabledText:(0,p.default)(e.isDisabled,!e.hasPermission,e.permissionErrorText)},o.createElement("span",null,e.label)))))))}}},"./api-dev/components/api-version/common/ValidationInfoPopup/ValidationInfoPopup.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/base/Tooltips.js"),r=n("./js/components/base/Buttons.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/SyncStatusStore.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./api-dev/util/TooltipText.js"),p=n("./node_modules/lodash/lodash.js");let m=(0,d.observer)(o=class extends s.Component{constructor(e){super(e)}handleAction(e){if(c.default.addEventV2({category:"relation_validation",entityId:this.props.entityId,action:"click",label:e.label,value:1}),c.default.addEventV2({category:"api-design",action:"interact",label:"read",value:1,entityType:"api",entityId:p.get(this.props,"entityId")}),e)return"link"===e.type?(p.get(this.props,"promoteTab")&&p.isFunction(this.props.promoteTab)&&this.props.promoteTab(),void this.props.onSelectAction(e.type,{url:e.url})):void this.props.onSelectAction(e.type)}getRefreshButtonTooltip(e){if(e)return"Get online to perform this action"}renderActions(){let e=p.get(this.props.info,"actions"),t=!(0,a.resolveStoreInstance)(l.default).isSocketConnected;if(!p.isEmpty(e))return s.createElement("div",{className:"validation-info__actions"},p.map(e,(e=>{let n="refresh"===e.type?"secondary":"primary";return s.createElement(r.Button,{key:e.type,className:`validation-info__action_${n}`,type:n,size:"small",onClick:()=>this.handleAction(e),disabled:t,tooltip:(0,u.default)(t)},e.label)})))}render(){return s.createElement(i.Tooltip,{show:this.props.show,target:this.props.target,placement:this.props.placement,className:"validation-info",onClose:this.props.onClose,closeOnClickOutside:!0,immediate:!0},s.createElement(i.TooltipBody,null,s.createElement("div",{className:"validation-info__description"},this.props.info.description),this.renderActions()))}})||o},"./api-dev/components/api-version/monitors/AddUptimeMonitorModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("./js/modules/services/RemoteSyncRequestService.js"),h=n("./js/components/base/Buttons.js"),g=n("./js/components/base/LoadingIndicator.js"),f=n("./api-dev/components/common/ErrorHandler/ErrorHandler.js"),b=n("./js/stores/StoreManager.js"),y=n("./js/stores/SyncStatusStore.js"),v=n("./js/components/base/Modals.js"),I=n("./collaboration/workspace/controller/ActiveWorkspaceController.ts"),_=n("./monitors/services/MonitorService.js"),E=n("./node_modules/lodash/lodash.js"),S=n.n(E),C=n("./js/modules/services/ManageRolesModalService.js");function T({name:e,reason:t,isDisabled:n}={}){return n?s.createElement(r.default,{content:S().get(t,"message"),placement:"right",closeDelay:20},s.createElement("div",{className:"add-entity-modal__dropdown-options"},s.createElement(a.default,{isTruncated:!0},e))):s.createElement(a.default,{isTruncated:!0},e)}let A=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={items:[],selectedItem:null,isLoading:!1,isLoadingError:!1},this.fetchLinkableEntities=this.fetchLinkableEntities.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleAdd=this.handleAdd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.renderContent=this.renderContent.bind(this)}componentDidMount(){this.fetchLinkableEntities()}fetchLinkableEntities(){let e;this.setState({isLoading:!0}),new Promise(((e,t)=>{try{let t=I.default.get();return e(S().get(t,"id"))}catch(e){return pm.logger.error("APIDevService~workspaceId not found.",e),t(e)}})).then((t=>{_.default.getMonitorsByWorkspace({workspaceId:t}).then((t=>{const n=S().map(t.body.data,"id");if(S().isEmpty(n))return Promise.resolve([]);e=S().keyBy(t.body.data,"id");const{apiId:o,apiVersionId:s}=this.props;return function(e,t,n){const o=`/apis/${e}/versions/${t}/relations/uptimemonitor/constraint-checks`;return m.default.request(o,{method:"post",data:{entityIds:n},timeout:6e4}).then((({body:e})=>e.data)).catch((e=>(pm.logger.warn("APIDevService~checkConstraintsForRelationLink: Failed to check constraint for relation linking.",e),Promise.reject(e))))}(o,s,n)})).then((t=>{S().forEach(t,((t={})=>{const{entityId:n,allowed:o,reason:s}=t;e[n]={...e[n],isAllowed:o,reason:s}})),this.setState({items:e,isLoading:!1,isLoadingError:!1})})).catch((e=>{pm.logger.error("AddEntityModal~fetchLinkableEntities: Failed to fetch possible entities",e),this.setState({isLoading:!1,isLoadingError:!0})}))}))}handleSelect(e={}){const t=null===e?null:S().find(this.state.items,["id",e.id]);this.setState({selectedItem:t})}handleAdd(){S().isFunction(this.props.onAdd)&&this.props.onAdd(this.state.selectedItem)}handleCancel(){S().isFunction(this.props.onCancel)&&this.props.onCancel()}renderErrorHandler(){let e,t,n;return!(0,b.resolveStoreInstance)(y.default).isSocketConnected?(e="No internet connection",t="You can only access your APIs when you’re online.  Check your internet connection and try again.",n=s.createElement(l.default,null)):(e="Couldn't load uptime monitors",t="There was an unexpected error. Please try again.",n=s.createElement(c.default,null)),s.createElement(f.default,{title:e,description:t,buttonText:"Try Again",handler:this.fetchLinkableEntities,blankState:n})}renderContent(){if(this.state.isLoading)return s.createElement("div",{className:"add-entity-modal__loading-indicator"},s.createElement(g.default,null));if(this.state.isLoadingError)return this.renderErrorHandler();const e=[],t=[];S().forEach(this.state.items,(n=>{const o={...n,value:n.id,label:n.name,isDisabled:!n.isAllowed};n.isAllowed?t.push(o):e.push(o)})),t.sort(((e,t)=>e.name.toUpperCase()>t.name.toUpperCase()?1:-1));const n=t.concat(e);let o;return S().isEmpty(n)&&(o=this.props.emptyStateText||"No results found"),s.createElement(d.default,{options:n,onChange:this.handleSelect,label:this.props.label,customOptionComponent:T,isOptionDisabled:e=>e.isDisabled,placeholder:"Select",emptyStateMessage:o,menuMaxHeight:100})}render(){const e=this.props.isDisabled||!this.state.selectedItem,t=this.state.selectedItem?this.props.disabledText:"";return s.createElement(v.Modal,{className:"add-entity-modal",isOpen:this.props.isOpen,onRequestClose:this.handleCancel,customStyles:{width:"400px"}},s.createElement(v.ModalHeader,null,this.props.title),s.createElement(v.ModalContent,{className:this.state.isLoadingError&&"model-content__error"},s.createElement(u.default,{direction:"column",justifyContent:"space-between",height:"100%"},this.renderContent(),s.createElement(a.default,null,"Note: This API uptime monitor will inherit roles from the API. "," ",s.createElement(p.default,{onClick:()=>(0,C.manageRolesOnAPI)(this.props.apiId),type:"monochrome-plain",text:"View API roles"})))),!this.state.isLoadingError&&s.createElement(v.ModalFooter,null,s.createElement(h.Button,{className:"add-entity__add-button",type:"primary",onClick:this.handleAdd,disabled:e,tooltip:t},this.props.isLoadingAddRelation?s.createElement(g.default,null):this.props.buttonLabel),s.createElement(h.Button,{className:"add-entity__cancel-button",type:"secondary",onClick:this.handleCancel},"Cancel")))}})||o},"./api-dev/components/api-version/observation/CreateMonitorEntityModal/CreateMonitorEntityModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),l=n("./js/components/base/Tabs.js"),c=n("./js/components/base/Buttons.js"),d=n("./js/components/base/Inputs.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./js/components/new-button/CreationError.js"),m=n("./js/components/base/Dropdowns.js"),h=n("./js/components/base/data-editor/components/HeaderActions.js"),g=n("./api-dev/components/common/GenerationConfigOptions/GenerationConfigOptions.js"),f=n("./js/constants/AppUrlConstants.js"),b=n("./api-dev/util/URLDomainValidation.js"),y=n("./node_modules/@postman/data-editor/lib/lib.js"),v=n("./js/components/base/data-editor/RowRenderer.js"),I=n("./js/components/base/data-editor/components/DEInputs.js"),_=n("./js/components/new-button/DataEditorRequestMethods.js"),E=n("./js/utils/GetUniqueIdHelper.js"),S=n("./runtime-repl/request-http/httpstatuscodes.js"),C=n("./appsdk/components/link/Link.js"),T=n("./monitors/components/create-edit-form/MonitorFormComponent.js"),A=n("./monitors/components/create-edit-form/MonitorFormHelperFunctions.js"),j=n("./node_modules/lodash/lodash.js");const w={isEditable:!1,type:"modal",showFormControls:!1,hideCollection:!0,preserveContext:!0};class O extends o.Component{constructor(e){super(e),this.onCreate=()=>{this.refs.content.handleCreationSelf()},this.onValidation=e=>{this.refs.content.handleValidationError(e)};let t={columns:[{name:"method",type:"string",label:"Request Method",width:21,resize:!0,default:"GET",renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>o.createElement(_.default,{allowScroll:!0,value:e,onChange:e=>t("edit",{value:e})})},{name:"url",type:"string",label:"Request URL",width:37,resize:!0,default:"",renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>o.createElement(I.default,{type:"autosuggest",value:e,onAction:e=>{t&&t("edit",{value:e})},cellInfo:r,placeholder:"URL"})},{name:"body",hidden:!0,type:"string",label:"Request Body",width:25,resize:!0,default:"",renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>o.createElement(I.default,{type:"autosuggest",value:e,onAction:e=>{t&&t("edit",{value:e})},cellInfo:r,placeholder:"Body"})},{name:"description",hidden:!0,type:"string",label:"Description",width:20,resize:!0,default:"",renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>o.createElement(I.default,{type:"autosuggest",value:e,onAction:e=>{t&&t("edit",{value:e})},cellInfo:r,placeholder:"Description"})},{name:"testResponseCode",type:"string",label:"Check Status Code",width:21,resize:!0,default:200,renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>o.createElement(I.default,{type:"number",value:e,onAction:e=>{t&&t("edit",{value:e})},cellInfo:r,placeholder:"Status Code",suggestions:j.reduce(S.default,((e,t,n)=>(e.push({value:`${n} ${t.name}`}),e)),[])})},{name:"testResponseTime",type:"number",label:"Check Response Time",width:21,resize:!0,default:400,renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>o.createElement("div",{className:"data-editor__cell--time"},o.createElement(I.default,{type:"number",value:e,onAction:e=>{t&&t("edit",{value:e})},cellInfo:r,placeholder:"Response Time"}),o.createElement("span",{className:"postfix"},"ms"))}],renderers:{row:({children:e,index:t,nodeId:n},s,{isCollapsed:i,subColumnIndex:r},a)=>o.createElement(v.default,{index:t,style:a,nodeId:n,onAction:s},e),header:e=>o.createElement("div",{className:"data-editor__custom-header"},o.createElement("div",{className:"data-editor__header-offset"}),e,o.createElement("div",{className:"data-editor__header__controls"},o.createElement(h.default,{onColumnToggle:this.handleColumnToggle,config:this.state.config,columnGroups:[{label:"Show columns",columns:["method","url","body","description"]},{label:"Add tests",columns:["testResponseCode","testResponseTime"]}]})))},height:300};this.state={collectionName:"",selectedCollection:j.get(j.head(this.props.collectionList),"name","Select a collection"),monitorName:"",versionTag:"",environment:"",showAdditional:!1,newRecipient:"",values:[],config:t,uniqueName:E.default.generateUniqueId(),showRegionTooltip:!1,target:null,isConfigVisible:!1},this.handleCollectionNameChange=this.handleCollectionNameChange.bind(this),this.handleSelectCollection=this.handleSelectCollection.bind(this),this.handleMonitorNameChange=this.handleMonitorNameChange.bind(this),this.handleSelectVersionTag=this.handleSelectVersionTag.bind(this),this.handleToggleAdditional=this.handleToggleAdditional.bind(this),this.handleNewRecipientChange=this.handleNewRecipientChange.bind(this),this.handleRecipientAdd=this.handleRecipientAdd.bind(this),this.getLinkToOpen=this.getLinkToOpen.bind(this),this.handleDataEditorInputChange=this.handleDataEditorInputChange.bind(this),this.handleColumnToggle=this.handleColumnToggle.bind(this),this.setRegionDisplay=this.setRegionDisplay.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.handleConfigToggle=this.handleConfigToggle.bind(this),this.onCreate=this.onCreate.bind(this)}setRegionDisplay(e){return i()({"create-monitor-entity__body__input":!0,"create-monitor-entity__body__input--regions":!0,[`create-monitor-entity__body__input-regions--${e}`]:!0})}handleMouseOver(e){e.enabled||this.setState({target:e.id,showRegionTooltip:!0})}handleMouseOut(){this.setState({target:null,showRegionTooltip:!1})}handleDataEditorInputChange(e){this.setState({values:e});let t=j.dropRight(y.utils.unflattenNodes(e));this.props.onRequestChange(t)}handleColumnToggle(e){this.setState({config:e})}getLinkToOpen(e){if(e&&(0,b.validateLearningCntrUrlDomain)(e))return e}handleCollectionNameChange(e){this.setState({collectionName:e}),this.props.onSelectedOptionsChange&&this.props.onSelectedOptionsChange("collectionName",e)}handleSelectCollection(e){let t=j.find(this.props.collectionList,["id",e]);this.setState({selectedCollection:j.get(t,"name")}),this.props.onSelectedOptionsChange&&this.props.onSelectedOptionsChange("collectionUid",j.get(t,"uid"))}handleMonitorNameChange(e){this.setState({monitorName:e}),this.props.onSelectedOptionsChange&&this.props.onSelectedOptionsChange("monitorName",e)}handleSelectVersionTag(e){let t=j.find(this.props.versionTagList,["id",e]);this.setState({versionTag:t.name}),this.props.onSelectedOptionsChange&&this.props.onSelectedOptionsChange("versionTagId",t.id)}handleToggleAdditional(){this.setState({showAdditional:!this.state.showAdditional})}handleConfigToggle(e){this.setState({isConfigVisible:e})}handleNewRecipientChange(e){this.setState({newRecipient:e})}handleRecipientAdd(){let e=j.size(this.props.additionalOptions.notifications.recipients);j.invoke(this.props,"onNotificationsChange",!0,e,this.state.newRecipient),this.setState({newRecipient:""},(()=>{this.refs.recipientAdd&&this.refs.recipientAdd.clear()}))}getTooltipForGenerateCollection(){return this.props.isSchemaEmpty?"Collection generation is not supported for empty schemas.":this.props.hasValidSchema?void 0:"Add a valid schema to generate a collection from it."}getClasses(){return i()({"create-new-monitor-modal__content":!0,step2:!0})}renderSelectCollection(){const e=!this.props.isSchemaEmpty&&this.props.hasValidSchema;let t=this.props.hasValidSchema?"generate-new":"use-existing";return o.createElement("div",{className:`${this.getClasses()} select-collection`},o.createElement("div",{className:"select-collection__tabs"},o.createElement(l.Tabs,{type:"secondary",defaultActive:t,activeRef:this.props.activeSource,onChange:this.props.onChangeSource},o.createElement(l.Tab,{refKey:"generate-new",disabled:!e,tooltip:this.getTooltipForGenerateCollection()},"Generate collection from schema"),o.createElement(l.Tab,{refKey:"use-existing"},"Use an existing collection"),o.createElement(l.Tab,{refKey:"new"},"Create new collection"))),"generate-new"===this.props.activeSource&&o.createElement(o.Fragment,null,o.createElement("div",{className:"create-monitor-entity-modal__content-wrapper"},o.createElement("div",{className:"collection-name-wrapper"},o.createElement("span",{className:"input-label"},"Name your collection"),o.createElement("div",{className:"collection-name"},o.createElement("div",{className:"collection-name__input"},o.createElement(d.Input,{inputStyle:"box",ref:"collectionName",onChange:this.handleCollectionNameChange,value:this.state.collectionName,placeholder:"e.g. Payment API"})))),o.createElement(g.default,{options:this.props.generationOptions,preferences:this.props.optionsPreferences,onOptionsChange:this.props.onConfigOptionsChange,onToggle:this.handleConfigToggle,forceShowOptions:this.state.isConfigVisible})),o.createElement("div",{className:"create-monitor-entity-modal__footer__helptext"},o.createElement("span",null,"Learn how to "),o.createElement(r.default,{type:"link-default"},o.createElement(C.default,{to:this.getLinkToOpen(f.API_GENERATING_COLLECTION_FROM_SCHEMA),target:"_blank"},"generate collections from schema")))),"use-existing"===this.props.activeSource&&o.createElement("div",{className:"create-monitor-entity-modal__content-wrapper"},o.createElement("div",{className:"select-collection-wrapper"},o.createElement("span",{className:"input-label"},"Select a collection in this workspace"),o.createElement("div",{className:"select-collection__content"},o.createElement("div",{className:"select-collection__dropdown"},o.createElement(m.Dropdown,{onSelect:this.handleSelectCollection,"full-width":!0},o.createElement(m.DropdownButton,{type:"secondary",size:"small"},o.createElement(c.Button,{className:"dropdown-head"},o.createElement("span",{className:"dropdown-head__label"},this.state.selectedCollection))),o.createElement(m.DropdownMenu,{className:"dropdown__menu-list",fluid:!0},j.isEmpty(this.props.collectionList)?o.createElement(m.MenuItem,null,o.createElement("span",null,"There are no collections in this workspace")):this.props.collectionList.map((e=>o.createElement(m.MenuItem,{key:e.id,refKey:e.id},o.createElement("span",null,e.name)))))))))),"new"===this.props.activeSource&&o.createElement(o.Fragment,null,o.createElement("div",{className:"create-monitor-entity-modal__content-wrapper__intro"},o.createElement("span",null,"Enter the requests you want to monitor. Optionally, add a request body by clicking on the (•••) icon.")),o.createElement("div",{className:"create-monitor-entity-modal__content-wrapper"},o.createElement("div",{className:"create-monitor-entity-modal__content-wrapper__table"},o.createElement("div",{className:"create-monitor-entity-modal__data-editor"},o.createElement(y.DataEditor,{input:this.state.values,config:this.state.config,onChange:this.handleDataEditorInputChange}))))),("new"===this.props.activeSource||"use-existing"===this.props.activeSource)&&o.createElement("div",{className:"create-monitor-entity-modal__footer__helptext"},o.createElement("b",null,"What is a monitor? "),o.createElement("span",null,"A monitor lets you run requests periodically to check for its performance and response through "),o.createElement(r.default,{type:"link-default"},o.createElement(C.default,{to:this.getLinkToOpen(f.TEST_SCRIPT_DOCS),target:"_blank"},"tests")),".",o.createElement("span",null," Learn more about "),o.createElement(r.default,{type:"link-default"},o.createElement(C.default,{to:this.getLinkToOpen(f.MONITORING_DOCS),target:"_blank"},"monitors"))))}renderConfigureMonitor(){return o.createElement("div",{className:"create-new-monitor-modal__body"},o.createElement("div",{className:this.getClasses()},o.createElement(T.default,{ref:"content",selectedOptions:this.props.selectedOptions,onClose:this.props.onClose,getSelectedOptionName:A.default.getSelectedOptionNameNoCollection,monitorFormConfig:w,collectionFromContainer:this.props.collectionFromContainer,activeSourceFromContainer:this.props.activeSourceFromContainer,onCreateMonitor:this.props.onCreateMonitor})))}render(){return"selectCollection"===this.props.monitorSteps[this.props.activeStep]?this.renderSelectCollection():"configureMonitor"===this.props.monitorSteps[this.props.activeStep]?this.props.isVersionLoading||this.props.isRegionsLoading?o.createElement("div",{className:"create-monitor-entity-modal__content configure-monitor is-loading"},o.createElement(u.default,null)):this.props.errorLoadingVersionTags?o.createElement("div",{className:"create-monitor-entity-modal__content  configure-monitor error-loading-versions"},o.createElement(p.default,{subtitle:"Something went wrong while loading this form",onRetry:this.props.onLoadVersionRetry,blankState:o.createElement(a.default,null)})):this.props.errorLoadingRegions?o.createElement("div",{className:"create-monitor-entity-modal__content  configure-monitor error-loading-regions"},o.createElement(p.default,{subtitle:"Something went wrong while loading this form",onRetry:this.props.onLoadRegionsRetry,blankState:o.createElement(a.default,null)})):this.renderConfigureMonitor():void 0}}},"./api-dev/components/api-version/observation/CreateMonitorEntityModalContainer/CreateMonitorEntityModalContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var o,s,i=n("../../node_modules/react/index.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("./node_modules/moment-timezone/index.js"),c=n.n(l),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./node_modules/prop-types/index.js"),p=n.n(u),m=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=n("./js/components/base/Tabs.js"),g=n("./js/components/base/Buttons.js"),f=n("./js/components/base/Modals.js"),b=n("./js/containers/new-button/services/VersionTagService.js"),y=n("./js/containers/new-button/services/MonitorRegionsService.js"),v=n("./api-dev/util/getConfigurationOptions.js"),I=n("./api-dev/components/api-version/observation/CreateMonitorEntityModal/CreateMonitorEntityModal.js"),_=n("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),E=n("./js/modules/controllers/UserController.js"),S=n("./js/utils/util.js"),C=n("./node_modules/postman-collection/index.js"),T=n("./runtime-repl/request-http/httpstatuscodes.js"),A=n("./js/stores/GateKeeperStore.js"),j=n("./js/stores/ActiveWorkspaceStore.js"),w=n("./js/stores/SyncStatusStore.js"),O=n("./js/stores/StoreManager.js"),N=n("./js/stores/CurrentUserStore.js"),R=n("./monitors/utils/messages/index.js"),P=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),D=n("./js/constants/MonitoringErrors.js"),M=n("./node_modules/lodash/lodash.js");const x=/^[^@]+@[^.]+\..+$/;let L={activeStep:1,activeSource:null,isVersionLoading:!1,isRegionsLoading:!1,isCreating:!1,errorLoadingVersionTags:!1,errorLoadingRegions:!1,workspaceCollectionsStore:{},versionTagList:[],availableRegions:[],monitorUrl:"",selectedRegionMode:"auto",selectedOptions:{collectionName:"",collectionUid:"",monitorName:"",environmentUid:"",versionTagId:"",schedule:"0 0 0 * * *",regions:[],requests:[],tests:[{name:"Check Response code",code:"pm.response.to.have.status({{variable}});",enabled:!0,suggestions:M.reduce(T.default,((e,t,n)=>(e.push({value:`${n} ${t.name}`}),e)),[]),type:"number",placeholder:"Enter response code"},{name:"Check Response time",code:"pm.expect(pm.response.responseTime).to.be.below({{variable}});",enabled:!0,postfix:"ms",type:"number",placeholder:"Enter response time"}]},from:"api_dev_create_new_monitor",notifications:{enabled:!0,recipients:[]},requestTimeout:{enabled:!1,timeout:5e3},requestDelay:{enabled:!1,delay:0},errors:{},followRedirects:!0,strictSSL:!0,showTooltip:!1,schemaFormat:"",generationOptions:[],optionsPreferences:{},formState:{}},k=(0,d.observer)(((s=class extends i.Component{constructor(e){super(e),this.onCreate=()=>{this.refs.content.onCreate()},this.onValidation=e=>{this.refs.content.onValidation(e)},this.state=L,this.handleBack=this.handleBack.bind(this),this.handleClose=this.handleClose.bind(this),this.constructMonitorOptions=this.constructMonitorOptions.bind(this),this.handleCreateMonitor=this.handleCreateMonitor.bind(this),this.handleLoadVersionRetry=this.handleLoadVersionRetry.bind(this),this.handleLoadRegionsRetry=this.handleLoadRegionsRetry.bind(this),this.handleChangeSource=this.handleChangeSource.bind(this),this.handleActiveStepChange=this.handleActiveStepChange.bind(this),this.handleShowTooltip=this.handleToggleTooltip.bind(this,!0),this.handleHideTooltip=this.handleToggleTooltip.bind(this,!1),this.handleSelectedOptionsChange=this.handleSelectedOptionsChange.bind(this),this.handleRegionChange=this.handleRegionChange.bind(this),this.handleNotificationsChange=this.handleNotificationsChange.bind(this),this.hydrateConfigOptions=this.hydrateConfigOptions.bind(this),this.handleConfigOptionsChange=this.handleConfigOptionsChange.bind(this),this.handleRequestTimeoutChange=this.handleRequestTimeoutChange.bind(this),this.handleRequestDelayChange=this.handleRequestDelayChange.bind(this),this.handleFollowRedirectChange=this.handleFollowRedirectChange.bind(this),this.handleStrictSSLChange=this.handleStrictSSLChange.bind(this),this.constructCollection=this.constructCollection.bind(this),this.handleRequestChange=this.handleRequestChange.bind(this),this.handleRegionSelectorChange=this.handleRegionSelectorChange.bind(this),this.validateNotificationRecipients=this.validateNotificationRecipients.bind(this),this.onCreate=this.onCreate.bind(this)}componentDidMount(){const e=!(0,O.resolveStoreInstance)(N.default).isLoggedIn;!(0,O.resolveStoreInstance)(w.default).isSocketConnected||e||this.getAvailableRegions(),this.getCollectionList();const t=!this.props.isSchemaEmpty&&this.props.hasValidSchema?"generate-new":"use-existing";this.handleChangeSource(t)}componentWillUnmount(){this.state.workspaceCollectionsStore&&this.state.workspaceCollectionsStore.unsubscribe&&this.state.workspaceCollectionsStore.unsubscribe()}componentDidUpdate(e){if(this.props.isOpen!==e.isOpen){this.getCollectionList(),this.getAvailableRegions();const e=!this.props.isSchemaEmpty&&this.props.hasValidSchema?"generate-new":"use-existing";this.handleChangeSource(e)}}hydrateConfigOptions(){let e=this.props.schemaFormat,t=this.props.advancedOptions;e&&!M.isEmpty(t)&&(t=(0,v.checkAndOverrideDefaultValue)(e,t),this.setState({schemaFormat:e.id,generationOptions:t,optionsPreferences:pm.settings.getSetting(`import.options.${e.id}`)||{}}))}handleToggleTooltip(e){this.setState({showTooltip:e})}handleRegionSelectorChange(e){this.setState({selectedRegionMode:e})}getCollectionList(){const e=(0,O.resolveStoreInstance)(j.default).id;(0,P.subscribeMeta)(e,{permissions:this.constructor.collectionPermissions}).then((e=>{this.setState({workspaceCollectionsStore:e})}))}getVersionTagList(){return this.setState({isVersionLoading:!0,errorLoadingVersionTags:!1}),(0,b.fetchAllTags)({collectionUid:this.state.selectedOptions.collectionUid}).then((e=>{this.setState({versionTagList:e,isVersionLoading:!1,selectedOptions:{...this.state.selectedOptions,versionTagId:M.head(e).id}})})).catch((e=>{this.setState({isVersionLoading:!1,errorLoadingVersionTags:!0}),pm.logger.warn("Failed to fetch tags",e),pm.toasts.error("Couldn't get tags. Please try again.")}))}getAvailableRegions(){this.setState({isRegionsLoading:!0,errorLoadingRegions:!1}),(0,y.fetchAvailableRegions)().then((e=>{this.setState({availableRegions:e,isRegionsLoading:!1})})).catch((e=>{this.setState({isRegionsLoading:!1,errorLoadingRegions:!0}),pm.logger.warn("Failed to fetch regions",e),pm.toasts.error("Couldn't get regions. Please try again.")}))}handleChangeSource(e){this.setState({activeSource:e,selectedOptions:{...this.state.selectedOptions,collectionUid:M.get(M.head(this.state.workspaceCollectionsStore.list),"uid","")}},(()=>{"generate-new"===this.state.activeSource&&this.hydrateConfigOptions()}))}handleActiveStepChange(){"generate-new"!==this.state.activeSource&&"new"!==this.state.activeSource?"use-existing"!==this.state.activeSource||this.setState({activeStep:this.state.activeStep+1},(()=>{this.getVersionTagList(),M.invoke(this.refs,"content.refs.monitorName.focus")})):this.setState({activeStep:this.state.activeStep+1},(()=>{M.invoke(this.refs,"content.refs.monitorName.focus")}))}handleSelectedOptionsChange(e,t){this.setState({selectedOptions:{...this.state.selectedOptions,[e]:t}})}handleRegionChange(e){let t=this.state.selectedOptions.regions;M.includes(t,e)?M.remove(t,(t=>t===e)):t.push(e),this.setState((e=>({selectedOptions:{...e.selectedOptions,regions:t}})))}handleNotificationsChange(e,t,n){if(M.isUndefined(t))return void this.setState({notifications:{enabled:e,recipients:this.state.notifications.recipients}});let o=[...M.slice(this.state.notifications.recipients,0,t),n,...M.slice(this.state.notifications.recipients,t+1)];o=M.compact(o),this.validateNotificationRecipients(o),this.setState({notifications:{enabled:e,recipients:o}})}validateNotificationRecipients(e){const t={};e.forEach(((n,o)=>{let s=M.size(n)&&!x.test(n)?"invalid":e.indexOf(n)!==o&&"duplicate";t[o]=s&&{message:R.MONITOR_EMAIL_VALIDATION_ERROR[s],error:s}})),this.setState((e=>({errors:{...e.errors,recipients:t}})))}handleRequestTimeoutChange(e,t=this.state.requestTimeout.timeout){this.setState({requestTimeout:{enabled:e,timeout:t}})}handleRequestDelayChange(e,t=this.state.requestDelay.delay){this.setState({requestDelay:{enabled:e,delay:t}})}handleStrictSSLChange(e){this.setState({strictSSL:!e})}handleFollowRedirectChange(e){this.setState({followRedirects:!e})}handleConfigOptionsChange(e){this.setState({optionsPreferences:e}),pm.settings.setSetting(`import.options.${this.state.schemaFormat}`,e)}handleCreateMonitor(e,t,n,o,s){let i;switch(this.state.activeSource){case"generate-new":i={selectedOptions:{...t,collectionId:"",versionTagId:"",collectionName:this.state.selectedOptions.collectionName}};break;case"use-existing":i={selectedOptions:{...t,collectionName:""}};break;case"new":if(M.isEmpty(e.monitorName))return;this.setState({isCreating:!0},(()=>{this.constructCollection((i=>{(0,P.getOne)(i,{permissions:this.constructor.collectionPermissions,exclude:["response","request"]}).then((({uid:i})=>{const r=i,a={selectedOptions:{...t,collectionId:r}};this.setState({...a},(()=>this.constructMonitorOptions(e,t,n,o,s)))}))}),e,t)}))}"new"!==this.state.activeSource&&this.setState({...i,isCreating:!0},(()=>{this.constructMonitorOptions(e,t,n,o,s)}))}handleBack(){1!==this.state.activeStep?this.setState((e=>({activeStep:e.activeStep-1}))):this.props.handleBack&&this.props.handleBack()}handleClose(){this.resetState(),this.props.onClose&&this.props.onClose()}handleOfflineRetry(){(0,O.resolveStoreInstance)(w.default).isSocketConnected&&2===this.state.activeStep&&this.handleCreateMonitor()}handleLoadVersionRetry(){this.getVersionTagList()}handleLoadRegionsRetry(){this.getAvailableRegions()}handleRequestChange(e){this.setState((t=>{let n=M.map(e,(e=>({url:e.url,method:e.method,body:e.body,description:e.description,tests:[parseInt(e.testResponseCode),parseInt(e.testResponseTime)]})));return{selectedOptions:{...t.selectedOptions,requests:n}}}))}async constructCollection(e,t){let{id:n}=await E.default.get(),o={name:t.monitorName,id:S.default.guid(),owner:n},s=M.map(this.state.selectedOptions.requests,(e=>{let t=M.reduce(e.tests,((e,t,n)=>(this.state.selectedOptions.tests[n].enabled&&e.push("\t"+M.replace(this.state.selectedOptions.tests[n].code,"{{variable}}",parseInt(t))),e)),[]),n=M.join(["pm.test('Some test name', function () {",...t,"})"],"\n");return{id:S.default.guid(),url:e.url,method:e.method,data:e.body,dataMode:"raw",collection:o.id,name:e.url,description:e.description,time:(new Date).getTime(),events:new C.EventList({},[{listen:"test",script:n||""}]).toJSON()}})),i=M.map(s,"id");M.assign(o,{requests:s,order:i});try{const t=(0,O.resolveStoreInstance)(j.default).id;let n=await(0,_.createCollection)(o,t,{analyticsOptions:{origin:(r=this.state.from,r.startsWith("history")?"history/monitor":"create_new_x"===r?"cnx":r)}});if(!M.isEmpty(M.get(n,"error")))return void pm.logger.error("Error in creating monitor",n.error);e&&e(`${o.owner}-${o.id}`)}catch(e){pm.logger.error("Error in pipeline for creating monitor",e)}var r}constructMonitorOptions(e,t,n,o,s){let i,r;if(e.monitorName)return E.default.get().then((a=>{let l=a.email,d=n.enabled?M.map(n.recipients,(e=>({type:"email",address:e}))):[];switch(n.enabled&&!M.some(d,{address:l})&&d.push({type:"email",address:l}),r={environment:e.environment||null,name:e.monitorName,schedule:{cronPattern:t.schedule,timeZone:c().tz.guess()},options:{strictSSL:e.options.strictSSL,followRedirects:e.options.followRedirects,requestTimeout:e.options.requestTimeout,requestDelay:e.options.requestDelay},notifications:{onFailure:d,onError:d},retry:s.enabled?{attempts:parseInt(s.attempts)}:{}},"manual"===o&&(r.distribution=M.map(t.regions,(e=>({region:e,runCount:1})))),r.versionTag=t.versionTag,(t.dataFile||null===t.dataFile)&&(r.files={data:t.dataFile}),this.state.activeSource){case"use-existing":i={collectionId:t.collectionId,configurations:{converter:{...this.state.optionsPreferences},monitor:r}};break;case"new":i={collectionId:this.state.selectedOptions.collectionId,configurations:{converter:{...this.state.optionsPreferences},monitor:r}};break;case"generate-new":i={configurations:{converter:{...this.state.optionsPreferences},collection:{name:this.state.selectedOptions.collectionName},monitor:r}}}this.props.onCreateMonitor(i).then((e=>{this.setState({isCreating:!1,monitorUrl:M.get(e,"body.data.links.dashboard.action")}),pm.eventBus.channel("monitor-updates").publish({action:"refreshMonitorsList"}),this.handleClose()})).catch((e=>{this.setState({isCreating:!1}),e.error.name===D.VALIDATION_ERROR&&this.onValidation(e.error.message)}))}))}resetState(){this.setState({...L})}getStepClasses(e){return a()({"is-done":this.state.activeStep>e,"incomplete-tab-steps":this.state.activeStep<e})}render(){let e=(0,O.resolveStoreInstance)(N.default),t=e&&e.isLoggedIn,n=(0,O.resolveStoreInstance)(A.default).isSyncEnabled,o=!(0,O.resolveStoreInstance)(w.default).isSocketConnected,s=M.pick(this.state,["notifications","requestTimeout","requestDelay","followRedirects","strictSSL"]);return i.createElement(f.Modal,{className:"create-monitor-entity-modal",isOpen:this.props.isOpen,onRequestClose:this.handleClose,customStyles:this.props.monitorModalStyles},i.createElement(f.ModalHeader,null,i.createElement(h.Tabs,{type:"primary",defaultActive:1,activeRef:this.state.activeStep},M.map(this.props.monitorStepsNameMap,(e=>i.createElement(h.Tab,{className:this.getStepClasses(e.step),refKey:e.step,key:e.step},i.createElement("div",{className:"create-monitor-entity-modal__tab"},this.state.activeStep<=e.step?`${e.step}. `:i.createElement(m.default,{name:"icon-state-success-stroke",color:"content-color-secondary"}),i.createElement("div",{className:"create-monitor-entity-modal__tab-name"},e.name))))))),i.createElement(f.ModalContent,{className:{selectCollection:"select-collection",configureMonitor:"configure-monitor",nextSteps:"next-steps"}[this.props.monitorSteps[this.state.activeStep]]},i.createElement(I.default,{ref:"content",activeStep:this.state.activeStep,activeSource:this.state.activeSource,onChangeSource:this.handleChangeSource,isOffline:o,isVersionLoading:this.state.isVersionLoading,isRegionsLoading:this.state.isRegionsLoading,errorLoadingVersionTags:this.state.errorLoadingVersionTags,errorLoadingRegions:this.state.errorLoadingRegions,onOfflineRetry:this.handleOfflineRetry,onLoadVersionRetry:this.handleLoadVersionRetry,onLoadRegionsRetry:this.handleLoadRegionsRetry,isSchemaEmpty:this.props.isSchemaEmpty,hasValidSchema:this.props.hasValidSchema,collectionList:this.state.workspaceCollectionsStore.list,versionTagList:this.state.versionTagList,selectedOptions:this.state.selectedOptions,regions:this.state.availableRegions,additionalOptions:s,generationOptions:this.state.generationOptions,optionsPreferences:this.state.optionsPreferences,onSelectedOptionsChange:this.handleSelectedOptionsChange,onRegionChange:this.handleRegionChange,onNotificationsChange:this.handleNotificationsChange,onRequestTimeoutChange:this.handleRequestTimeoutChange,onRequestDelayChange:this.handleRequestDelayChange,onFollowRedirectsChange:this.handleFollowRedirectChange,onStrictSSLChange:this.handleStrictSSLChange,onConfigOptionsChange:this.handleConfigOptionsChange,onCreateMonitor:this.handleCreateMonitor,onClose:this.handleClose,monitorSteps:this.props.monitorSteps,onRequestChange:this.handleRequestChange,onShowTooltip:this.handleShowTooltip,onHideTooltip:this.handleHideTooltip,onRegionSelectorChange:this.handleRegionSelectorChange,selectedRegionMode:this.state.selectedRegionMode,showTooltip:this.state.showTooltip,errors:this.state.errors,collectionFromContainer:this.state.selectedOptions,activeSourceFromContainer:this.state.activeSource})),!o&&t&&n&&i.createElement(f.ModalFooter,null,"selectCollection"===this.props.monitorSteps[this.state.activeStep]&&"generate-new"===this.state.activeSource&&i.createElement("div",{className:"create-monitor-entity-modal__footer"},i.createElement(g.Button,{className:"action-button__cancel",type:"secondary",onClick:this.handleClose},"Cancel"),i.createElement(g.Button,{className:"action-button__generate",type:"primary",onClick:this.handleActiveStepChange,disabled:!this.state.selectedOptions.collectionName,tooltip:!this.state.selectedOptions.collectionName&&"Give the collection a name to continue"},"Generate Collection and Continue")),"selectCollection"===this.props.monitorSteps[this.state.activeStep]&&"use-existing"===this.state.activeSource&&i.createElement("div",{className:"create-monitor-entity-modal__footer"},i.createElement(g.Button,{className:"action-button__cancel",type:"secondary",onClick:this.handleClose},"Cancel"),i.createElement(g.Button,{className:"action-button__generate",type:"primary",onClick:this.handleActiveStepChange,disabled:M.isEmpty(this.state.workspaceCollectionsStore.list)},"Select Collection and Continue")),"selectCollection"===this.props.monitorSteps[this.state.activeStep]&&"new"===this.state.activeSource&&i.createElement("div",{className:"create-monitor-entity-modal__footer"},i.createElement(g.Button,{className:"action-button__cancel",type:"secondary",onClick:this.handleClose},"Cancel"),i.createElement(g.Button,{className:"action-button__generate",type:"primary",onClick:this.handleActiveStepChange,disabled:M.isEmpty(this.state.selectedOptions.requests)},"Create Collection and Continue")),"configureMonitor"===this.props.monitorSteps[this.state.activeStep]&&i.createElement("div",{className:"create-monitor-entity-modal__footer"},i.createElement(g.Button,{className:"action-button__cancel",type:"secondary",disabled:this.state.isCreating,onClick:this.handleBack},"Back"),i.createElement(g.Button,{className:"action-button__generate",type:"primary",onClick:this.onCreate,disabled:this.state.isCreating},"Create Monitor"))))}}).collectionPermissions=["edit","addMonitor"],o=s))||o;k.propTypes={monitorStepsNameMap:p().array.isRequired,monitorModalStyles:p().object.isRequired,monitorSteps:p().object.isRequired}},"./api-dev/components/api-version/observation/Monitors/Monitor.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),l=n("./js/components/base/Dropdowns.js"),c=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/NameCell/NameCell.js"),d=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/VersionCell/VersionCell.js"),u=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/LastUpdatedCell/LastUpdatedCell.js"),p=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/ValidationCell/ValidationCell.js"),m=n("./api-dev/components/api-version/common/APIEntitySection/APIEntitySection.js"),h=n("./api-dev/components/api-version/common/APIEntityTable/APIEntityTable.js"),g=n("./api-dev/components/api-version/common/AddEntityModal/AddEntityModal.js"),f=n("./api-dev/components/api-version/common/APIEntityEmptyState/EntityEmptyState.js"),b=(n("./api-dev/components/api-version/common/RemoveEntity/RemoveEntity.tsx"),n("./api-dev/components/common/DeleteModal/DeleteModal.js")),y=n("./js/constants/AppUrlConstants.js"),v=n("./api-dev/constants/APIEntityTableConstants.js"),I=n("./api-dev/constants/Permissions.js"),_=n("./api-dev/components/api-version/observation/CreateMonitorEntityModalContainer/CreateMonitorEntityModalContainer.js"),E=n("./js/modules/services/AnalyticsService.js"),S=n("./js/stores/SyncStatusStore.js"),C=n("./js/stores/StoreManager.js"),T=n("./js/stores/CurrentUserStore.js"),A=(n("./js/services/NavigationService.js"),n("./api-dev/util/TooltipText.js")),j=n("./monitors/services/UrlService.js"),w=n("./integrations/monitoring/constants.js"),O=n("./api-dev/components/api-version/common/APIEntityActions/APIEntityActions.js"),N=n("./integrations/connected-integrations/containers/ConnectedIntegrationsContainer.js"),R=n("./integrations/monitors/runs/containers/RunsContainer.js"),P=n("./integrations/monitors/runs/components/base/RunMonitorButton.js"),D=n("./api-dev/services/APIDevService.js"),M=n("./monitors/services/MonitorService.js"),x=n("./api-dev/components/common/DeleteModalContent/DeleteModalContent.tsx"),L=n("./node_modules/lodash/lodash.js");async function k(){const e=await(0,D.getWorkspaceId)(),t=await M.default.getJobTemplatesByWorkspace({workspaceId:e});return L.chain(t).get("body.data",[]).map((e=>L.pick(e,["id","name"]))).value()}const F={1:"selectCollection",2:"configureMonitor",3:"nextSteps"},B=[{step:1,name:"Select collection to monitor"},{step:2,name:"Configure monitor"}],U={margin:"auto",width:"923px"};let V=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showAddEntityModal:!1,showDeleteModal:!1,relationToBeDeleted:null,showMonitorEntityModal:!1,hasValidSchema:null,isSchemaEmpty:null},this.handleToggleAddEntityModal=this.handleToggleAddEntityModal.bind(this),this.handleOpenMonitorEntityModal=this.handleOpenMonitorEntityModal.bind(this),this.handleCloseMonitorEntityModal=this.handleCloseMonitorEntityModal.bind(this),this.handleCreateMonitor=this.handleCreateMonitor.bind(this),this.addRelation=this.addRelation.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleDeleteRelation=this.handleDeleteRelation.bind(this),this.handleOptionSelect=this.handleOptionSelect.bind(this),this.toggleDeleteModal=this.toggleDeleteModal.bind(this),this.renderMonitorSection=this.renderMonitorSection.bind(this),this.renderMonitorOptions=this.renderMonitorOptions.bind(this),this.getMonitorTabNavigationObject=this.getMonitorTabNavigationObject.bind(this)}handleToggleAddEntityModal(){this.setState({showAddEntityModal:!this.state.showAddEntityModal},(()=>{L.invoke(this.rightOverlayModalRef,"focus")}))}handleOpenMonitorEntityModal(){E.default.addEventV2({category:"monitor",entityId:this.props.model.monitors.apiId,action:"initiate_create",label:"api_observe",value:1});let e=this.props.model.schema,t=e.isSchemaValid,n=L.isEmpty(e.content);this.setState({hasValidSchema:t,isSchemaEmpty:n,showMonitorEntityModal:!0})}handleCloseMonitorEntityModal(){this.setState({showMonitorEntityModal:!1})}handleCreateMonitor(e){let t;if(E.default.addEventV2({category:"monitor",entityId:this.props.model.monitors.apiId,action:"confirm_create",label:"create_monitor_from_schema",value:1}),e.collectionId)t={...e};else{let n=L.get(this.props,"model.schema");t={...L.pick(n,["schemaId"]),...e}}return L.get(this.props,"promoteTab")&&L.isFunction(this.props.promoteTab)&&this.props.promoteTab(),this.props.model.monitors.createAndAddRelationToAPIVersion(t)}addRelation(e){return this.props.model.monitors.addRelation(e).then((e=>{L.get(this.props,"promoteTab")&&L.isFunction(this.props.promoteTab)&&this.props.promoteTab(),e&&this.handleToggleAddEntityModal(),pm.windowEvents.emit(`${w.API_MONITORING}-monitor-linked`,{apiId:L.get(this.props,"model.apiId"),apiVersionId:L.get(this.props,"model.id")})}))}toggleDeleteModal(){this.setState((e=>({showDeleteModal:!e.showDeleteModal})))}handleRemove(e){this.setState({relationToBeDeleted:e}),this.toggleDeleteModal()}handleDeleteRelation(){return this.props.model.monitors.deleteRelation(this.state.relationToBeDeleted).then((e=>{e&&this.toggleDeleteModal(),pm.windowEvents.emit(`${w.API_MONITORING}-monitor-unlinked`,{apiId:L.get(this.props,"model.apiId"),apiVersionId:L.get(this.props,"model.id")})}))}handleOptionSelect(e){if(!(0,C.resolveStoreInstance)(T.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"addMonitor",origin:"api_builder_add_monitor_button",continueUrl:new URL(window.location.href)});"create_new"===e?this.handleOpenMonitorEntityModal():this.handleToggleAddEntityModal()}getMonitorTabNavigationObject(e,t){return{routeIdentifier:"build.monitor",routeParams:{monitorPath:j.default._getEncodedMonitorName(t).concat("~",e)}}}renderMonitorSection(e){const t=[{key:"name",val:"Name",tooltip:"Name"},{key:"validation",val:"Validation",tooltip:"Validation",helperText:(0,v.getValidationHelpText)(this.props.model.monitors.type)},{key:"monitorRuns",val:"Last runs",tooltip:"Last runs of the linked monitor",class:"linked-monitor-runs-wrapper "+(L.get(this.props,"model.apiEditorUIStore.isWindowShrunk")?"is-runs-shrunk":"")},{key:"connectedIntegrations",val:"Connected with",class:"connected-integrations-wrapper "+(L.get(this.props,"model.apiEditorUIStore.isWindowShrunk")?"is-connected-integrations-shrunk":"")},{key:"actions",val:"",class:"monitor-actions"}],n={name:(e,t,n)=>{let o={link:n,analyticEventLabel:"monitor",entityId:this.props.model.monitors.apiId};return s.createElement(c.default,{icon:"icon-entity-monitor-stroke",cellInfo:e,action:o,navigationIntentObject:this.getMonitorTabNavigationObject(t.modelId,t.name),promoteTab:L.get(this.props,"promoteTab")})},versionTag:e=>s.createElement(d.default,{cellInfo:e}),updatedAt:e=>s.createElement(u.default,{cellInfo:e}),validation:(e,t)=>s.createElement(p.default,{cellInfo:e,entity:t,canValidateRelation:L.get(this.props.model,"apiPermissionStore.canValidateAPIRelation"),apiEditorUIStore:this.props.model.apiEditorUIStore,store:this.props.model.monitors,promoteTab:L.get(this.props,"promoteTab"),isAPIDeleted:L.get(this.props,"model.isAPIDeleted")}),actions:(e,t)=>s.createElement(O.default,{isWindowShrunk:L.get(this.props,"model.apiEditorUIStore.isWindowShrunk"),entityType:"Monitor",entity:t,onRemoveEntity:this.handleRemove,canRemoveEntity:L.get(this.props.model,"apiPermissionStore.canRemoveMonitor"),actionComponent:s.createElement(P.default,{entity:t}),isAPIDeleted:L.get(this.props,"model.isAPIDeleted")}),monitorRuns:(e,t)=>s.createElement(R.default,{isWindowShrunk:L.get(this.props,"model.apiEditorUIStore.isWindowShrunk"),entity:t,model:this.props.model}),connectedIntegrations:(e,t)=>s.createElement(N.default,{cellInfo:e,entity:t,model:this.props.model.monitors.connectedIntegrations,type:"cell"})};return L.isEmpty(this.props.model.monitors.relations)?s.createElement(f.default,{isOpen:e,entityDescription:"Check an API's performance and response times at scheduled intervals.",learnText:"about how to create a monitoring system.",link:y.API_MONITOR_DOCS_URL}):s.createElement(h.default,{isOpen:e,headers:t,content:this.props.model.monitors.relations,cells:n,type:"monitors"})}getAddMonitorOptions(){const e=!(0,C.resolveStoreInstance)(S.default).isSocketConnected,t=L.get(this.props,"model.isAPIDeleted"),n=L.get(this.props.model,"apiPermissionStore.canAddMonitor"),o=e||!n||t,s=L.get(this.props.model,"apiPermissionStore.canCreateMonitor");return[{action:"create_new",name:"Create new monitor",isDisabled:e||!s||t,disabledText:t&&I.DELETED_API_DISABLED_TEXT,hasPermission:s},{action:"add_existing",name:"Add existing monitor",isDisabled:o,disabledText:t&&I.DELETED_API_DISABLED_TEXT,hasPermission:n}]}renderMonitorOptions(){return s.createElement("div",{className:"api-entity-header__add-options"},s.createElement(l.Dropdown,{onSelect:this.handleOptionSelect},s.createElement(l.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},s.createElement(r.default,{type:"tertiary",text:"Add Monitor",icon:s.createElement(a.default,null)})),s.createElement(l.DropdownMenu,{"align-right":!0},this.getAddMonitorOptions().map((e=>{const{action:t,isDisabled:n,hasPermission:o,disabledText:i,name:r}=e;return s.createElement(l.MenuItem,{key:t,refKey:t,disabled:n,disabledText:(0,A.default)(n,!o,i)},s.createElement("span",null,r))})))))}render(){return s.createElement("div",{id:"entity-monitors"},s.createElement(m.default,{title:"Collection-based Monitors",actionTitle:"Add Monitor",onAddEntity:this.handleToggleAddEntityModal,renderSectionContent:e=>this.renderMonitorSection(e),renderDropdown:()=>this.renderMonitorOptions()}),this.state.showAddEntityModal&&s.createElement(g.default,{apiId:this.props.model.monitors.apiId,apiVersionId:this.props.model.monitors.versionId,isOpen:this.state.showAddEntityModal,title:"Add a collection-based monitor to this API",type:"monitor",label:"Select a collection-based monitor",buttonLabel:"Add Monitor",onAdd:this.addRelation,getEntities:k,onCancel:this.handleToggleAddEntityModal,isLoadingAddRelation:this.props.model.monitors.isLoadingAddRelation,placeholder:"Select a monitor",emptyStateText:"There are no monitors in this workspace"}),s.createElement(b.default,{isOpen:this.state.showDeleteModal,onRequestClose:this.toggleDeleteModal,headerTitle:"Remove monitor from API?",subTitle:this.props.model.monitors.apiName,content:s.createElement(x.default,{relation:{name:this.state.relationToBeDeleted?this.state.relationToBeDeleted.name:"",type:"monitor"},type:"relation"}),btnContent:"Remove Monitor",onSubmit:this.handleDeleteRelation,isLoading:this.props.model.monitors.isLoadingDeleteRelation}),s.createElement(_.default,{isOpen:this.state.showMonitorEntityModal,onClose:this.handleCloseMonitorEntityModal,onCreateMonitor:this.handleCreateMonitor,isSchemaEmpty:this.state.isSchemaEmpty,hasValidSchema:this.state.hasValidSchema,monitorSteps:F,monitorStepsNameMap:B,monitorModalStyles:U,schemaFormat:L.get(this.props,"model.schema.schemaFormat"),advancedOptions:L.get(this.props,"model.schema.advancedOptions")}))}})||o},"./api-dev/components/api-version/observation/Monitors/UptimeMonitor.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/async/dist/async.js"),r=n.n(i),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/common/LaunchDarkly.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),h=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/NameCell/NameCell.js"),g=n("./api-dev/components/api-version/common/APIEntitySection/APIEntitySection.js"),f=n("./api-dev/components/api-version/common/APIEntityTable/APIEntityTable.js"),b=n("./api-dev/components/api-version/monitors/AddUptimeMonitorModal.js"),y=n("./api-dev/components/api-version/common/APIEntityEmptyState/EntityEmptyState.js"),v=n("./api-dev/components/common/DeleteModal/DeleteModal.js"),I=n("./js/stores/SyncStatusStore.js"),_=n("./js/stores/StoreManager.js"),E=n("./js/stores/CurrentUserStore.js"),S=n("./api-dev/components/api-version/common/APIEntityActions/APIEntityActions.js"),C=n("../../node_modules/mobx/lib/mobx.module.js"),T=n("./monitors/services/UrlService.js"),A=n("./monitors/constants.js"),j=n("./monitors/stores/domain/MonitorStore.js"),w=n("./monitors/components/uptime/Timeline/TimeSeriesPlot.js"),O=n("./api-dev/constants/Permissions.js"),N=n("./api-dev/components/common/DeleteModalContent/DeleteModalContent.tsx"),R=n("./node_modules/lodash/lodash.js");let P=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showAddEntityModal:!1,showDeleteModal:!1,initialized:!1,relationToBeDeleted:null,metrics:{},states:{}},this.handleToggleAddEntityModal=this.handleToggleAddEntityModal.bind(this),this.addRelation=this.addRelation.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleDeleteRelation=this.handleDeleteRelation.bind(this),this.handleClick=this.handleClick.bind(this),this.toggleDeleteModal=this.toggleDeleteModal.bind(this),this.renderMonitorSection=this.renderMonitorSection.bind(this),this.renderMonitorOptions=this.renderMonitorOptions.bind(this),this.getUptimeMonitorTabNavigationObject=this.getUptimeMonitorTabNavigationObject.bind(this),this.fetchMetricsAndStates=this.fetchMetricsAndStates.bind(this),this.getDisabled=this.getDisabled.bind(this),this.interval=null,this.monitorStores={}}componentDidMount(){(0,C.when)((()=>!this.props.model.uptimeMonitors.isLoadingAddRelation),(()=>{(()=>{r().map(this.props.model.uptimeMonitors.relations,((e,t)=>{this.monitorStores[e.modelId]=new j.default(e.modelId),this.fetchMetricsAndStates(e.modelId),t()}),(()=>{this.setState({initialized:!0})}))})()}))}componentWillUnmount(){clearInterval(this.interval)}fetchMetricsAndStates(e){let t=(e,t,n,o)=>{this.setState((s=>({[t]:{...s[t],[e]:R.merge({},s[t][e],{_meta:{loading:n,error:o}})}})))};r().parallel([n=>{let o=this.monitorStores[e];t(e,"metrics",!0,!1),o.metrics.getMetrics(e,o.url.computeTimeFrame(1)).then((()=>{const t={responseTime:"ms",uptime:"%",incidents:""};let s={};R.forEach(o.metrics.values,((e,n)=>{s[n]={value:e,unit:t[n]}})),this.setState((t=>({metrics:{...t.metrics,[e]:{_meta:{loading:!1,error:!1},...s}}}))),n()})).catch((o=>{t(e,"metrics",!1,!0),n()}))},n=>{t(e,"states",!0,!1);let o=this.monitorStores[e];o.incidents.hydrate().then((()=>{this.setState((t=>({states:{...t.states,[e]:{_meta:{loading:!1,error:!1},store:o}}}))),n()})).catch((()=>{t(e,"states",!1,!0),n()}))}])}handleToggleAddEntityModal(){this.setState({showAddEntityModal:!this.state.showAddEntityModal},(()=>{R.invoke(this.rightOverlayModalRef,"focus")}))}addRelation(e){return this.props.model.uptimeMonitors.addRelation(e).then((t=>{R.get(this.props,"promoteTab")&&R.isFunction(this.props.promoteTab)&&this.props.promoteTab(),t&&this.handleToggleAddEntityModal(),this.monitorStores[e.id]=new j.default(e.id),this.fetchMetricsAndStates(e.id)}))}toggleDeleteModal(){this.setState((e=>({showDeleteModal:!e.showDeleteModal})))}handleRemove(e){this.setState({relationToBeDeleted:e}),this.toggleDeleteModal()}handleDeleteRelation(){return this.props.model.uptimeMonitors.deleteRelation(this.state.relationToBeDeleted).then((e=>{e&&this.toggleDeleteModal()}))}handleClick(){if(!(0,_.resolveStoreInstance)(E.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"addMonitor",origin:"api_builder_add_monitor_button",continueUrl:new URL(window.location.href)});this.handleToggleAddEntityModal()}getUptimeMonitorTabNavigationObject(e,t){return{routeIdentifier:"build.monitor",routeParams:{monitorPath:T.default.getMonitorPath({monitorName:t,monitorId:e})},queryParams:{timePeriod:A.DEFAULT_TIME_FRAME}}}renderMonitorSection(e){const t=(e,t,n,o)=>{const i=this.state.metrics[e],r=R.get(i,"_meta.loading"),a=R.get(i,"_meta.error"),l=o(i,n),u="--"===l||null===l?"":R.get(i,`${n}.unit`);return r?s.createElement(c.default,null):a?s.createElement("div",{className:"linked-uptime-monitor-error"},"Error"):s.createElement("div",{key:t},s.createElement(d.default,{className:"entity-name__label"},l," ",u))},n=[{key:"name",val:"Name",tooltip:"Name"},{key:"uptime",val:"Uptime(3 hours)",class:"api-monitoring-uptime-monitor-timeline",tooltip:"Uptime(3 hours)"},{key:"status",val:"Service status",class:"api-monitoring-uptime-monitor-short-field",tooltip:"Service status"},{key:"availability",val:"Availability",class:"api-monitoring-uptime-monitor-short-field",tooltip:"Availability"},{key:"incidents",val:"Incidents",class:"api-monitoring-uptime-monitor-short-field",tooltip:"Incidents"},{key:"avgResponseTime",val:"Avg. response time",class:"api-monitoring-uptime-short-field",tooltip:"Avg. response time"},{key:"actions",val:"",class:"monitor-actions"}],o={uptime:(e,t)=>{const n=this.state.states[t.modelId],o=R.get(n,"_meta.loading"),i=R.get(n,"_meta.error"),r=R.get(n,"store");let a=!0;if(o||!this.state.initialized)return s.createElement(c.default,null);if(R.isUndefined(o)&&this.state.initialized)return this.monitorStores[t.modelId]=new j.default(t.modelId),this.fetchMetricsAndStates(t.modelId),s.createElement(c.default,null);if(i)return s.createElement("div",{className:"linked-uptime-monitor-error"},"Error");{const e=r.incidents.since.valueOf(),t=r.incidents.until.valueOf();return s.createElement(w.default,{showTooltip:!0,height:20,nodes:r.incidents.sortedIncidents[A.TIMELINE_SUMMARY_VIEW],viewStart:e,viewEnd:t,getNodeSpanStartTimeStamp:t=>{let n=R.isEmpty(t)?null:new Date(t.startedAt).valueOf();return n=n<e&&a?e:n,a=!0,n},getNodeSpanEndTimeStamp:e=>(R.isEmpty(e)?null:new Date(e.endedAt).valueOf())||t,getNodeState:e=>void 0===e?A.UNKNOWN_STATE_NAME:"down"===e.value?A.DOWN_STATE_NAME:"up"===e.value?A.UP_STATE_NAME:A.UNKNOWN_STATE_NAME})}},status:(e,t)=>{const n=this.state.states[t.modelId],o=R.get(n,"_meta.loading"),i=R.get(n,"_meta.error"),r=R.get(n,"store");if(o||void 0===o)return s.createElement(c.default,null);if(i)return s.createElement("div",{className:"linked-uptime-monitor-error"},"Error");{const e=R.get(r.incidents,["sortedIncidents",A.TIMELINE_SUMMARY_VIEW],[]),t=R.get(R.last(e),"value","unknown");return s.createElement(d.default,{className:"entity-name__label"},R.capitalize(t))}},availability:(e,n)=>t(n.modelId,"availability","uptime",((e,t)=>{let n=R.get(e,`${t}.value`);return n=null===n?"--":parseFloat(n),isNaN(n)?n:n.toFixed(2)})),incidents:(e,n)=>t(n.modelId,"incidents","incidents",((e,t)=>{const n=R.get(e,`${t}.value`);return Number(n)||null!==n?n:"--"})),avgResponseTime:(e,n)=>t(n.modelId,"avgResponseTime","responseTime",((e,t)=>{let n=R.get(e,`${t}.value`);return n=null===n?"--":Number(n),n})),name:(e,t)=>{let n={analyticEventLabel:"uptime-monitor",entityId:R.get(this.props.model,"uptimeMonitors.apiId")};return s.createElement(h.default,{ignoreValidationForNavigation:!0,cellInfo:e,action:n,navigationIntentObject:this.getUptimeMonitorTabNavigationObject(t.modelId,t.name),promoteTab:R.get(this.props,"promoteTab"),icon:"icon-descriptive-uptime-stroke"})},actions:(e,t)=>s.createElement(S.default,{isWindowShrunk:R.get(this.props,"model.apiEditorUIStore.isWindowShrunk"),entityType:"UptimeMonitor",entity:t,onRemoveEntity:this.handleRemove,canRemoveEntity:R.get(this.props.model,"apiPermissionStore.canRemoveMonitor"),isAPIDeleted:R.get(this.props,"model.isAPIDeleted")})};return R.isEmpty(this.props.model.uptimeMonitors.relations)?s.createElement(s.Fragment,null,s.createElement(y.default,{isOpen:e,entityDescription:"Know when your service is down. Monitor uptime for a URL across regions and setup timely alerts without having to create a collection.",link:A.UPTIME_MONITOR_DOCUMENTATION_LEARN_MORE})):s.createElement(f.default,{isOpen:e,headers:n,content:this.props.model.uptimeMonitors.relations,cells:o,type:"uptimeMonitors"})}getDisabled(){const e=!(0,_.resolveStoreInstance)(I.default).isSocketConnected,t=R.get(this.props,"model.isAPIDeleted"),n=R.get(this.props.model,"apiPermissionStore.canAddMonitor"),o=R.parseInt(l.launchDarkly.getFlag("IS_2321_max_uptime_monitors",5)),s=R.get(this.props.model,"uptimeMonitors.relations.length",0)>=o,i=e||!n||t||s||this.props.model.uptimeMonitors.isLoadingAddRelation;let r;return r=s?`You can't connect more than ${o} uptime monitor to an API Version`:t?O.DELETED_API_DISABLED_TEXT:n?e?O.MANAGE_ROLES_DISABLED_TEXT:"":O.API_PERMISSION_ERROR,[i,r]}renderMonitorOptions(){let[e,t]=this.getDisabled();return s.createElement("div",{className:"api-entity-header__add-options"},s.createElement(u.default,{type:"tertiary",text:"Add Monitor",icon:s.createElement(m.default,null),onClick:this.handleClick,isDisabled:e,tooltip:t}))}render(){let[e,t]=this.getDisabled();return s.createElement("div",{id:"entity-monitors"},s.createElement(g.default,{title:s.createElement("span",null,"Uptime Monitors ",s.createElement(p.default,{text:"Beta",status:"info"})),actionTitle:"Add Monitor",onAddEntity:this.handleToggleAddEntityModal,renderSectionContent:e=>this.renderMonitorSection(e),renderDropdown:()=>this.renderMonitorOptions()}),this.state.showAddEntityModal&&s.createElement(b.default,{apiId:this.props.model.uptimeMonitors.apiId,apiVersionId:this.props.model.uptimeMonitors.versionId,isOpen:this.state.showAddEntityModal,title:"Add an uptime monitor to this API",type:"uptimemonitor",label:"Select an uptime monitor",buttonLabel:"Add Monitor",onAdd:this.addRelation,onCancel:this.handleToggleAddEntityModal,isDisabled:e,disabledText:t,isLoadingAddRelation:this.props.model.uptimeMonitors.isLoadingAddRelation,placeholder:"Select an uptime monitor",emptyStateText:"There are no uptime monitors in this workspace"}),s.createElement(v.default,{isOpen:this.state.showDeleteModal,onRequestClose:this.toggleDeleteModal,headerTitle:"Remove uptime monitor from API?",subTitle:this.props.model.uptimeMonitors.apiName,content:s.createElement(N.default,{relation:{name:this.state.relationToBeDeleted?this.state.relationToBeDeleted.name:"",type:"uptimemonitor"},type:"relation"}),btnContent:"Remove Monitor",onSubmit:this.handleDeleteRelation,isLoading:this.props.model.uptimeMonitors.isLoadingDeleteRelation}))}})||o},"./api-dev/components/api-version/test/Components/DetailedTestEntry.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),a=n("./runtime-repl/runner/_api/RunnerInterface.js"),l=n("./runtime-repl/runner/workbench/common.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/CurrentUserStore.js"),u=n("./api-dev/components/api-version/test/Services/DateUtil.js"),p=n("./node_modules/classnames/index.js"),m=n.n(p);class h extends o.Component{constructor(e){super(e),this.getRunReport=async e=>{if(!(0,c.resolveStoreInstance)(d.default).isLoggedIn){const e=new URL(window.location.href);return pm.mediator.trigger("showSignInModal",{type:"runSummary",origin:"api_builder_run_summary_button",continueUrl:e})}const t=i().get(e,"id","null"),n=(0,l.getAPIParentMetaFromUrl)();t&&(0,a.openRunInTab)(t,{preview:!1},n)},this.renderTestBadge=this.renderTestBadge.bind(this),this.getRunReport=this.getRunReport.bind(this),this.getClassName=this.getClassName.bind(this)}getClassName(e){return m()({"detailed-section":!0,shrinked:!i().isEmpty(e)})}renderTestBadge(e,t){const n=e+t;return 0===n?o.createElement(r.default,{status:"neutral",text:"NO TESTS FOUND"}):0===t?o.createElement(r.default,{status:"success",text:`${e}/${n} PASSED`}):o.createElement(r.default,{status:"critical",text:`${t}/${n} FAILED`})}render(){const{runs:e}=this.props;return o.createElement("div",{className:this.getClassName(this.props.windowStatus)},o.createElement("div",{className:"empty-section"}),o.createElement("div",{className:"filled-section"},e&&i().map(e,(e=>o.createElement("div",{className:"detail-row",key:`run-${e.id}`},o.createElement("div",{className:"detail-row-header"},o.createElement("div",{className:"badge"},this.renderTestBadge(e.passedTestCount,e.failedTestCount),o.createElement("span",{title:u.default.getFormattedTime(e.lastUpdated)},u.default.getRelativeTime(e.lastUpdated))),o.createElement("div",{className:"view-report",onClick:()=>this.getRunReport(e)},"View Report")),o.createElement("ul",{className:"logs"},i().map(e.logs,((t,n)=>o.createElement("li",{key:`log-${n}-${e.id}`},t)))))))))}}},"./api-dev/components/api-version/test/Components/LastUpdatedCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("./api-dev/components/api-version/test/Services/DateUtil.js");class a extends o.Component{constructor(e){super(e)}render(){const{loadingRuns:e,lastRunDate:t}=this.props.entity;return e?o.createElement("span",{"data-testid":"last-updated-spinner"},o.createElement(s.default,null)):t?o.createElement(i.default,{"data-testid":"last-updated-run-time",className:"entity-last-updated__label",type:"body-medium",color:"content-color-primary"},o.createElement("span",{title:r.default.getFormattedTime(t)},r.default.getRelativeTime(t))):o.createElement(i.default,{"data-testid":"last-updated-no-run",className:"entity-last-updated__label",color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-xs",marginLeft:"spacing-xs"}},"No runs yet")}}},"./api-dev/components/api-version/test/Components/TestTabTable.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o,s=n("../../node_modules/react/index.js"),i=n("./api-dev/components/api-version/test/Components/TestTabTableHeader.js"),r=n("./api-dev/components/api-version/test/Components/TestTabTableBody.js");let a=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(o=class extends s.Component{constructor(e){super(e)}render(){return this.props.isOpen&&s.createElement("div",{className:"api-dev-table test-tab-table"},s.createElement(i.default,{headers:this.props.headers}),s.createElement(r.default,{headers:this.props.headers,cells:this.props.cells,content:this.props.content,windowStatus:this.props.windowStatus,branch:this.props.branch}))}})||o},"./api-dev/components/api-version/test/Components/TestTabTableBody.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=(n("./node_modules/classnames/index.js"),n("./api-dev/components/api-version/test/Components/TestTableEntry.js"));let d=(0,a.observer)(o=class extends r.Component{constructor(e){super(e)}render(){var e;const t=null===(e=this.props.content)||void 0===e?void 0:e.sort(((e,t)=>{var n,o;return(null==e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase())>(null==t||null===(o=t.name)||void 0===o?void 0:o.toLowerCase())?1:-1}));return r.createElement("div",{className:"api-dev-table-body"},i().map((0,l.toJS)(t),(e=>r.createElement(c.default,{key:e.id,row:e,cells:this.props.cells,headers:this.props.headers,windowStatus:this.props.windowStatus,branch:this.props.branch}))))}})||o},"./api-dev/components/api-version/test/Components/TestTabTableHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/base/Tooltips.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/lodash/lodash.js");let u=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({showTooltip:!0})},this.hideTooltip=()=>{this.setState({showTooltip:!1})},this.state={showTooltip:!1}}getClassName(e){return l()({"api-dev-table-row__cell":!0,shrinked:d.get(this.props,"model.apiEditorUIStore.isWindowShrunk"),"api-dev-table-header__cell":!0,[e]:!0})}render(){return s.createElement("div",{className:"api-dev-table-row api-dev-table-header"},s.createElement("div",{className:"test-tab-header-arrow"},s.createElement("span",{className:"api-dev-table-header__cell-name arrow-column"})),d.map(this.props.headers,(e=>s.createElement("div",{className:this.getClassName(e.class),key:e.key},s.createElement("span",{className:"api-dev-table-header__cell-name",title:e.tooltip},e.val),e.helperText&&s.createElement(s.Fragment,null,s.createElement("div",{className:"api-dev-table-header__helper-icon",ref:e=>this.questionIconRef=e,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},s.createElement(r.default,{name:"icon-state-info-stroke",color:"content-color-tertiary",size:"small"})),s.createElement(i.Tooltip,{show:this.state.showTooltip,target:this.questionIconRef,placement:"right",immediate:!0},s.createElement(i.TooltipBody,null,e.helperText)))))))}})||o},"./api-dev/components/api-version/test/Components/TestTableEntry.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./node_modules/moment/moment.js"),l=n.n(a),c=n("./node_modules/classnames/index.js"),d=n.n(c),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("./api-dev/components/api-version/test/Components/DetailedTestEntry.js"),m=n("./api-dev/components/api-version/test/Services/CollectionRunService.js"),h=n("./js/stores/StoreManager.js"),g=n("./runtime-repl/runner/RunnerRun/RunnerRunStore.js"),f=n("./runtime-repl/runner/SyncService.js"),b=n("./node_modules/lodash/lodash.js"),y=n.n(b);let v=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={isDetailed:!1,iconName:"icon-direction-right",row:{},render:!0,loadingDetails:!1,errorDetails:!1,tooltipText:null,disabled:!1},this.oldLastNRunIds=[],this.toggleDetailed=this.toggleDetailed.bind(this),this.fetchDetails=this.fetchDetails.bind(this),this.handleRetry=this.handleRetry.bind(this),this.updateRow=this.updateRow.bind(this),this.initializeDetailsArrow=this.initializeDetailsArrow.bind(this),this.sortByDate=this.sortByDate.bind(this)}initializeDetailsArrow(){const{loadingDetails:e,errorDetails:t,row:n}=this.state;e||t||y().isEmpty(n.lastRuns)?this.setState({disabled:!0,tooltipText:"No runs to display"}):this.setState({disabled:!1,tooltipText:null})}handleRetry(){const e=y().get(this.props.row,"modelId");(0,f.fetchMoreRunsInActiveWorkspace)(5,0,{collection:e,iterations:!0,branch:this.props.branch})}async componentDidMount(){const e=y().get(this.props.row,"modelId");this.props.row.loadingRuns=!0,this.setState({loadingDetails:!0,errorDetails:!1,row:this.props.row}),await(0,f.fetchMoreRunsInActiveWorkspace)(5,0,{collection:e,iterations:!0,branch:this.props.branch}),this.reactionDisposer=(0,r.autorun)((async()=>{const e=(0,h.resolveStoreInstance)(g.default),t=y().get(this.props.row,"modelId"),n=y().filter(e.collectionRunsInActiveWorkspace,(e=>e.context&&e.context.collection===t&&y().includes(["finished","error","aborted"],e.status)&&(!this.props.branch||e.branch===this.props.branch))).sort(this.sortByDate).slice(0,5),o=y().map(n,(e=>e.id));!y().isEmpty(o)&&y().isEqual(this.oldLastNRunIds,o)||(this.oldLastNRunIds=o,this.fetchDetails(this.props.row,o))}))}componentDidUpdate(e){y().isEqual(e.row,this.props.row)||this.updateRow()}componentWillUnmount(){this.reactionDisposer&&this.reactionDisposer()}updateRow(){let e=this.state.row,t=this.props.row;if(e.id===t.id&&y().isEqual(e.latestCollectionRun,t.latestCollectionRun))this.setState({render:!1},(()=>{this.setState({render:!0,row:{...e,...t}})}));else{const e=y().get(t,"modelId"),n=5;(0,f.fetchMoreRunsInActiveWorkspace)(n,0,{collection:e,iterations:!0,branch:this.props.branch})}}sortByDate(e,t){const n=this.getRunStartTime(e),o=this.getRunStartTime(t);return new Date(o)-new Date(n)}getRunStartTime(e){return e.startedAt?e.startedAt:l()(e.createdAt).subtract(e.meta.totalTime,"milliseconds").toISOString()}fetchDetails(e,t){let n={...e};m.default.getCollectionRunPayload(t).then((e=>{const t=y().get(e,"lastRuns",[]),o=y().get(e,"runs",[]);let s=null;n.lastRuns=t,n.runDetails=o,n.loadingRuns=!1,y().isArray(t)&&t.length>0&&(s=t[0].updatedAt),this.setState((e=>({row:{...e.row,lastRuns:t,runDetails:o,loadingRuns:!1,lastRunDate:s},render:!0,loadingDetails:!1,errorDetails:!1})),this.initializeDetailsArrow)})).catch((e=>{n.lastRuns={error:!0,handleRetry:this.handleRetry},n.loadingRuns=!1,this.setState({errorDetails:!0,loadingDetails:!1,render:!1},(()=>{this.setState({render:!0,row:n}),this.initializeDetailsArrow()})),pm.logger.error("Error occurred while fetching run details",e)}))}toggleDetailed(){const{isDetailed:e,loadingDetails:t,errorDetails:n,row:o}=this.state;t||n||y().isEmpty(o.lastRuns)||(e?this.setState({iconName:"icon-direction-right",isDetailed:!1}):this.setState({iconName:"icon-direction-down",isDetailed:!0}))}getClassName(e){return d()({"api-dev-table-row__cell":!0,"row-hover__cell":!0,[e]:!0})}render(){let{row:e,isDetailed:t,iconName:n,render:o,disabled:i,tooltipText:r}=this.state;return s.createElement("div",{className:"row-parent"},o&&s.createElement("div",{className:"api-dev-table-row row-hover"},s.createElement(u.default,{"data-testid":"test-table-entry-row-icon",type:"tertiary",size:"medium",className:"row-arrow",onClick:this.toggleDetailed,tooltip:i&&r,isDisabled:i,icon:n}),y().map(this.props.headers,(t=>{let n=y().get(e.links,`${t.key}.action`);return s.createElement("div",{key:t.key,className:this.getClassName(t.class)},this.props.cells[t.key](e[t.key],e,n))}))),t&&o&&s.createElement(p.default,{runs:e.runDetails,windowStatus:this.props.windowStatus,collectionId:e.modelId}))}})||o},"./api-dev/components/api-version/test/CreateTestSuiteEntityModal/CreateTestSuiteEntityModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("./js/components/base/LoadingIndicator.js"),d=n("./js/components/base/Buttons.js"),u=n("./js/components/base/Inputs.js"),p=n("./js/components/base/Modals.js"),m=n("./api-dev/components/common/GenerationConfigOptions/GenerationConfigOptions.js"),h=n("./js/stores/StoreManager.js"),g=n("./js/stores/SyncStatusStore.js"),f=n("./api-dev/util/getConfigurationOptions.js"),b=n("./js/constants/AppUrlConstants.js"),y=n("./appsdk/components/link/Link.js"),v=n("./integrations/ci-cd/constants.ts"),I=n("./js/modules/services/ManageRolesModalService.js"),_=n("./node_modules/lodash/lodash.js");let E=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={testSuiteName:"",isCreating:!1,schemaFormat:"",generationOptions:[],optionsPreferences:{}},this.hydrateConfigOptions=this.hydrateConfigOptions.bind(this),this.handleOptionsChange=this.handleOptionsChange.bind(this),this.handleTestSuiteNameChange=this.handleTestSuiteNameChange.bind(this),this.handleCreate=this.handleCreate.bind(this),this.handleClose=this.handleClose.bind(this),this.renderContent=this.renderContent.bind(this)}renderContent(){return s.createElement("div",{className:"create-test-suite-entity-wrapper"},s.createElement("div",{className:"intro-content-wrapper"},s.createElement("div",{className:"intro-title"},"Create a collection from your API schema to write tests."),"Learn how to "," ",s.createElement(r.default,{type:"link-default"},s.createElement(y.default,{to:b.API_GENERATING_COLLECTION_FROM_SCHEMA,target:"_blank"},"generate collections from schema"))),s.createElement("div",{className:"test-suite-name-input-wrapper"},s.createElement("div",{className:"test-suite-name-input-header"},"Name your collection"),s.createElement("div",{className:"test-suite-name-input"},s.createElement(u.Input,{inputStyle:"box",ref:"testSuiteName",onChange:this.handleTestSuiteNameChange,value:this.state.testSuiteName,placeholder:"e.g. Payment API"}))),s.createElement(m.default,{options:this.state.generationOptions,preferences:this.state.optionsPreferences,onOptionsChange:this.handleOptionsChange}))}componentDidMount(){this.focusInput()}componentDidUpdate(e){this.props.isOpen&&this.props.isOpen!==e.isOpen&&(this.focusInput(),this.hydrateConfigOptions())}focusInput(){_.invoke(this.refs,"testSuiteName.focus")}hydrateConfigOptions(){let e=this.props.schemaFormat,t=this.props.advancedOptions;e&&!_.isEmpty(t)&&(t=(0,f.checkAndOverrideDefaultValue)(e,t),this.setState({schemaFormat:e.id,generationOptions:t,optionsPreferences:pm.settings.getSetting(`import.options.${e.id}`)||{}}))}handleTestSuiteNameChange(e){this.setState({testSuiteName:e})}handleOptionsChange(e){this.setState({optionsPreferences:e}),pm.settings.setSetting(`import.options.${this.state.schemaFormat}`,e)}handleCreate(){let e={configurations:{converter:{...this.state.optionsPreferences},collection:{name:this.state.testSuiteName}}};return this.setState({isCreating:!0}),this.props.onCreate(e).then((()=>{this.handleClose(),pm.windowEvents.emit(`${v.CI_CD_BUILDS}-test-suite-linked`,{apiId:this.props.apiId,apiVersionId:this.props.apiVersionId})})).catch((()=>{this.setState({isCreating:!1})}))}handleClose(){this.setState({testSuiteName:"",isCreating:!1,schemaFormat:"",generationOptions:[]}),_.invoke(this.props,"onClose")}applyCustomStyle(){return{margin:"auto",height:"60vh",maxHeight:"580px",minHeight:"580px",width:"700px"}}getPrimaryActionTooltip(e){return e?"Get online to perform this action":this.state.testSuiteName?void 0:"Give the collection a name to continue"}render(){const e=!(0,h.resolveStoreInstance)(g.default).isSocketConnected,t=e||!this.state.testSuiteName||this.state.isCreating,n=this.getPrimaryActionTooltip(e);return s.createElement(p.Modal,{className:"create-test-suite-entity-modal",isOpen:this.props.isOpen,onRequestClose:this.handleClose,customStyles:this.applyCustomStyle()},s.createElement(p.ModalHeader,null,"Create collection"),s.createElement(p.ModalContent,null,s.createElement(a.default,{direction:"column",width:"100%",justifyContent:"space-between",height:"100%",gap:"spacing-l"},this.renderContent(),s.createElement(r.default,null,"Note: This API test collection will inherit roles from the API. "," ",s.createElement(l.default,{onClick:()=>(0,I.manageRolesOnAPI)(this.props.apiId),type:"monochrome-plain",text:"View API roles"})))),s.createElement(p.ModalFooter,null,s.createElement("div",{className:"actions"},s.createElement(d.Button,{className:"action-button__cancel",type:"secondary",onClick:this.handleClose},"Cancel"),s.createElement(d.Button,{className:"action-button__generate",type:"primary",onClick:this.handleCreate,disabled:t,tooltip:n},this.state.isCreating?s.createElement(c.default,null):"Create Collection"))))}})||o},"./api-dev/components/api-version/test/Services/CollectionRunService.js":function(e,t,n){"use strict";n.r(t);var o=n("./runtime-repl/runner/datastores/controllers/CollectionRunController.js"),s=n("./node_modules/moment/moment.js"),i=n.n(s),r=n("./node_modules/lodash/lodash.js");function a(e){return e.startedAt?e.startedAt:i()(e.createdAt).subtract(e.meta.totalTime,"milliseconds").toISOString()}t.default={getCollectionRunPayload:e=>r.isEmpty(e)?Promise.resolve({lastRuns:[],runs:[]}):o.default.getAll({id:e}).then((e=>{const t=[],n=[];return r.each(e,(e=>{const o=function(e){const t=[];return r.each(e,(e=>{r.each(e,(e=>{r.each(r.get(e,"tests",[]),(e=>{("fail"===r.get(e,"status")||r.get(e,"error"))&&t.push(r.get(e,"name")||r.get(e,"error.message"))}))}))})),t}(r.get(e,"iterations",[]));t.push(function(e){return{passed:!(r.get(e,"failedTestCount")>0),failedTestCount:r.get(e,"failedTestCount"),totalTestCount:r.get(e,"totalTestCount"),passedTestCount:r.get(e,"totalTestCount",0)-r.get(e,"failedTestCount",0),updatedAt:a(e)}}(e)),n.push(function(e,t){return{totalTestCount:r.get(e,"totalTestCount"),failedTestCount:r.get(e,"failedTestCount"),passedTestCount:r.get(e,"totalTestCount",0)-r.get(e,"failedTestCount",0),status:r.get(e,"status"),lastUpdated:a(e),id:r.get(e,"id"),logs:t}}(e,o||[]))})),Promise.resolve({lastRuns:t,runs:n})})).catch((e=>Promise.reject({errorDetails:e})))}},"./api-dev/components/api-version/test/Services/DateUtil.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js");t.default={getFormattedTime(e){let t=i.default.format(e,!0);return t.length>0&&(t=t.split(",")[1]+", "+t.split(",")[0]),t},timeDifference(e,t){var n=6e4,o=36e5,i=864e5,r=e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*n-e.getHours()*o-(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*n-t.getHours()*o);return 0==r/i?"Today":r/i==1?"Yesterday":s().round(r/i)+" days ago"},getRelativeTime(e){let t=new Date,n=new Date(e),o=n.getHours()%12||12,s=n.getMinutes()<10?`0${n.getMinutes()}`:n.getMinutes(),i=n.getHours()<12?"am":"pm";return`${this.timeDifference(t,n)}, ${o<10?`0${o}`:o}:${s}${i}`}}},"./api-dev/components/api-version/test/TestSuite/TestSuite.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./api-dev/stores/APIListStore.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("./js/services/NavigationService.js"),d=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/NameCell/NameCell.js"),u=n("./api-dev/components/api-version/test/Components/LastUpdatedCell.js"),p=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/ValidationCell/ValidationCell.js"),m=n("./api-dev/components/api-version/common/APIEntityTable/TableCells/LastRunResultsCell/LastRunResultsCell.js"),h=n("./api-dev/components/api-version/common/APIEntitySection/APIEntitySection.js"),g=n("./api-dev/components/api-version/test/Components/TestTabTable.js"),f=n("./api-dev/components/api-version/common/AddEntityModal/AddEntityModal.js"),b=n("./api-dev/components/common/DeleteModal/DeleteModal.js"),y=n("./api-dev/components/api-version/test/CreateTestSuiteEntityModal/CreateTestSuiteEntityModal.js"),v=n("./api-dev/components/api-version/common/APIEntityActions/APIEntityActions.js"),I=n("./api-dev/components/api-version/test/test-section/TestAction/TestActions.js"),_=n("./js/constants/AppUrlConstants.js"),E=n("./api-dev/constants/Permissions.js"),S=n("./js/modules/services/AnalyticsService.js"),C=n("./js/stores/SyncStatusStore.js"),T=n("./js/stores/StoreManager.js"),A=n("./js/stores/CurrentUserStore.js"),j=n("./api-dev/util/TooltipText.js"),w=n("./api-dev/util/storeHelper.ts"),O=n("./api-dev/services/APIDevService.js"),N=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),R=n("./integrations/ci-cd/constants.ts"),P=n("./api-dev/constants/APITabModes.js"),D=n("./api-dev/components/common/DeleteModalContent/DeleteModalContent.tsx"),M=n("./api-dev/interfaces/APIInterface.js"),x=n("./api-dev/util/error.js"),L=n("./appsdk/components/link/Link.js"),k=n("./runtime-repl/_common/NavigationConstants.js"),F=n("./runtime-repl/collection/_api/CollectionInterface.js"),B=n("./runtime-repl/transient-collection/_api/TransientCollectionInterface.ts"),U=n("./api-dev/components/api/api-tab/tiles/Collections/AddCollectionCTA.js"),V=n("./node_modules/lodash/lodash.js");async function G(){const e=await(0,O.getWorkspaceId)(),t=await(0,N.getMeta)(e),n=V.chain(t).get("list").map((e=>{const t=V.pick(e,["id","name","forkLabel"]);return t.fromWorkspace=!0,t})).value(),o=V.get(this.props.model,"unclassifiedCollectionsOnBranch")&&this.props.model.unclassifiedCollectionsOnBranch();return V.concat(n,o)}let z=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showAddEntityModal:!1,showDeleteModal:!1,relationToBeDeleted:null,showCreateTestSuiteModal:!1,isRemovingCollection:!1},this.openCreateTestSuiteModal=this.openCreateTestSuiteModal.bind(this),this.closeCreateTestSuiteModal=this.closeCreateTestSuiteModal.bind(this),this.handleToggleAddEntityModal=this.handleToggleAddEntityModal.bind(this),this.handleCreate=this.handleCreate.bind(this),this.addRelation=this.addRelation.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleDeleteRelation=this.handleDeleteRelation.bind(this),this.toggleDeleteModal=this.toggleDeleteModal.bind(this),this.handleOptionSelect=this.handleOptionSelect.bind(this),this.renderTestSuiteSection=this.renderTestSuiteSection.bind(this),this.renderAddTestSuiteOptions=this.renderAddTestSuiteOptions.bind(this),this.getCollectionTabNavigationObject=this.getCollectionTabNavigationObject.bind(this)}openCreateTestSuiteModal(){S.default.addEventV2({category:"test",action:"initiate_create",label:"api_test",value:1,entityId:V.get(this.props,"model.tests.apiId")}),this.setState({showCreateTestSuiteModal:!0})}closeCreateTestSuiteModal(){this.setState({showCreateTestSuiteModal:!1})}handleToggleAddEntityModal(){this.setState({showAddEntityModal:!this.state.showAddEntityModal},(()=>{V.invoke(this.rightOverlayModalRef,"focus")}))}handleCreate(e){return S.default.addEventV2({category:"test",action:"confirm_create",label:"create_test_from_schema",value:1,entityId:V.get(this.props,"model.tests.apiId")}),V.get(this.props.model,"schema.isSchema")?Object.assign(e,{schemaId:V.get(this.props.model,"schema.schemaId")}):Object.assign(e,{apiDefinitionId:V.get(this.props.model,"schema.apiDefinitionId")}),V.get(this.props,"promoteTab")&&V.isFunction(this.props.promoteTab)&&this.props.promoteTab(),this.props.model.tests.createAndAddRelationToAPIVersion(e)}async addRelation(e){return this.props.model.tests.addRelation(e).then((e=>{V.get(this.props,"promoteTab")&&V.isFunction(this.props.promoteTab)&&this.props.promoteTab(),e&&this.handleToggleAddEntityModal(),pm.windowEvents.emit(`${R.CI_CD_BUILDS}-test-suite-linked`,{apiId:V.get(this.props,"model.apiId",""),apiVersionId:V.get(this.props,"model.id","")})}))}toggleDeleteModal(){this.setState((e=>({showDeleteModal:!e.showDeleteModal})))}handleRemove(e){if(null==e||!e.modelId||null==e||!e.name)return pm.logger.error("RemoveCollectionFromAPI~handleRemoveCollection: Params missing for collection in API"),pm.toasts.error("Couldn't delete collection. Please try again.");const t=(0,w.getRemoteGitConfiguredStatus)(this.props.model),n={name:e.name,isAPIExclusive:!0};return t?B.default.destroy(e.modelId).catch((t=>{(0,x.handleError)(t),pm.logger.error("RemoveCollectionFromAPI~handleRemoveCollection: Error occurred while removing collection "+e.modelId,t)})):(0,F.deleteCollection)(null==e?void 0:e.modelId,n).catch((t=>{(0,x.handleError)(t),pm.logger.error("RemoveCollectionFromAPI~handleRemoveCollectionFromAPI: Error occurred while removing collection "+e.modelId,t)}))}handleDeleteRelation(){const e=V.get(this.props.model,"apiRepositoryStore.apiVersionRepositoryInterface.remoteGitConfigured");if(this.setState({isRemovingCollection:!0}),e){const e=V.get(this.state.relationToBeDeleted,"id"),t=V.get(this.state.relationToBeDeleted,"path");try{V.get(this.props.model,"apiRepositoryStore.entityHandlers.collections.onCollectionFileDelete")&&V.isFunction(this.props.model.apiRepositoryStore.entityHandlers.collections.onCollectionFileDelete)&&this.props.model.apiRepositoryStore.entityHandlers.collections.onCollectionFileDelete(t,e)}catch(e){(0,x.handleError)(e)}finally{this.toggleDeleteModal(),this.setState({isRemovingCollection:!1})}}const t=V.get(this.state.relationToBeDeleted,"relationType");return this.props.model[t]&&this.props.model[t].deleteRelation(this.state.relationToBeDeleted).then((e=>{e&&this.toggleDeleteModal(),V.get(this.props,"promoteTab")&&V.isFunction(this.props.promoteTab)&&this.props.promoteTab()})).finally((()=>{this.setState({isRemovingCollection:!1})}))}async handleOptionSelect(e){if(!(0,T.resolveStoreInstance)(A.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"addTestSuite",origin:"api_builder_add_test_suite_button",continueUrl:new URL(window.location.href)});await(0,M.migrateAPI)(this.props.model.apiId,this.props.model.id),"create_new"===e?this.openCreateTestSuiteModal():this.handleToggleAddEntityModal()}getCollectionTabNavigationObject(e){return{routeIdentifier:"collection.openWithWsSelect",routeParams:{cid:e}}}navigateToCollectionTab(e){var t,n,o,s,i,a;if(V.get(this.props,"model.mode")===P.FEATURE_BRANCH_MODE)return this.props.model.tests.openCollectionInTab(e);const l=null===(t=this.props.model)||void 0===t?void 0:t.apiId,d=l&&(null===(n=(0,T.resolveStoreInstance)(r.default))||void 0===n||null===(o=n.find)||void 0===o||null===(s=o.call(n,l))||void 0===s?void 0:s.isMigrated),u="builder"===(null===(i=this.props.model)||void 0===i||null===(a=i.apiMode)||void 0===a?void 0:a.name);return null!=e&&e.modelId&&d&&u?c.default.transitionTo(k.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:null==e?void 0:e.modelId,apiId:l}):void 0}renderTestSuiteSection(e){const t=V.get(this.props.model,"mode")===P.FEATURE_BRANCH_MODE,n=V.get(this.props.model,"apiEditorUIStore.isWindowShrunk")?"shrinked":null,o=[{key:"name",val:"Name",class:`test-suite-name ${n}`,tooltip:"Name"},{key:"lastRun",val:"Last run results",class:`test-suite-last-run ${n}`,tooltip:"Last run results"},{key:"updatedAt",val:"Last run date",class:`test-suite-last-updated ${n}`,tooltip:"Last updated"},{key:"actions",val:"",class:`${n}`}],i={name:(e,t,n)=>{let o={link:n,analyticEventLabel:"test",entityId:V.get(this.props,"model.tests.apiId")};return s.createElement(d.default,{icon:"icon-entity-collection-stroke",cellInfo:e,action:o,navigationIntentObject:this.getCollectionTabNavigationObject(t.modelId),onClick:()=>this.navigateToCollectionTab(t),promoteTab:V.get(this.props,"promoteTab")})},lastRun:(e,t)=>s.createElement(m.default,{entity:t,model:this.props.model}),updatedAt:(e,t)=>s.createElement(u.default,{entity:t}),validation:(e,t)=>s.createElement(p.default,{cellInfo:e,entity:t,canValidateRelation:V.get(this.props.model,"apiPermissionStore.canValidateAPIRelation"),apiEditorUIStore:V.get(this.props.model,"apiEditorUIStore"),store:this.props.model.tests,promoteTab:V.get(this.props,"promoteTab"),isAPIDeleted:V.get(this.props,"model.isAPIDeleted")}),actions:(e,t)=>s.createElement(v.default,{isWindowShrunk:V.get(this.props,"model.apiEditorUIStore.isWindowShrunk"),entityType:"Test",entity:t,onRemoveEntity:this.handleRemove,canRemoveEntity:V.get(this.props.model,"apiPermissionStore.canRemoveMock"),actionComponent:s.createElement(I.default,{testActions:t}),isAPIDeleted:V.get(this.props,"model.isAPIDeleted")})};return t?s.createElement(g.default,{isOpen:e,headers:o,content:V.get(this.props.model,"apiRepositoryStore.entityHandlers.collections.transientCollectionStores")&&this.props.model.apiRepositoryStore.entityHandlers.collections.collectionsOnBranch(),cells:i,windowStatus:n,branch:V.get(this.props.model,"apiRepositoryStore.apiVersionRepositoryInterface.git.branch")}):V.isEmpty(this.props.model.collectionBasedRelations)?s.createElement(a.default,{padding:"spacing-l spacing-zero spacing-xxl spacing-xs",className:"api-test-suite__blankstate"},s.createElement(l.default,{type:"para"},"Test your API endpoints for specific behaviours. Learn more about how to ",s.createElement(L.default,{to:_.API_TEST_SUITE_DOCS_URL,target:"_blank"},s.createElement(l.default,{type:"link-default",isExternal:!0},"test APIs with Postman")))):s.createElement(g.default,{isOpen:e,headers:o,content:this.props.model.collectionBasedRelations,cells:i,windowStatus:n})}getDisabledText(e,t,n){if(!t)return;const o=V.get(this.props,"model.isAPIDeleted")&&E.DELETED_API_DISABLED_TEXT;if("create_new"===e&&!n){if(!V.get(this.props,"model.schema.content"))return"To create new collection, add a schema in your API";if(!V.get(this.props,"model.schema.isSchemaValid"))return"Add a valid schema to create new collection from it."}return(0,j.default)(t,n,o)}getAddTestSuiteOptions(){const e=!(0,T.resolveStoreInstance)(C.default).isSocketConnected,t=V.get(this.props,"model.isAPIDeleted"),n=V.get(this.props.model,"apiPermissionStore.canAddTest"),o=e||!n||t,s=V.get(this.props,"model.apiPermissionStore.canGenerateCollection");return[{action:"create_new",name:"Create new collection",isDisabled:e||!s||!V.get(this.props,"model.schema.content")||!V.get(this.props,"model.schema.isSchemaValid")||t,hasPermission:s},{action:"add_existing",name:"Add existing collection",isDisabled:o,hasPermission:n}]}renderAddTestSuiteOptions(){return s.createElement(U.default,{model:this.props.model,editor:V.get(this.props.model,"apiEditorUIStore"),eventLabel:"test_automate"})}render(){return s.createElement("div",{id:"entity-testsuite"},s.createElement(h.default,{title:"Collections",actionTitle:"Add Collection",onAddEntity:this.handleToggleAddEntityModal,renderSectionContent:e=>this.renderTestSuiteSection(e),renderDropdown:this.renderAddTestSuiteOptions}),this.state.showAddEntityModal&&s.createElement(f.default,{apiId:this.props.model.tests.apiId,apiVersionId:this.props.model.tests.versionId,isOpen:this.state.showAddEntityModal,title:"Add a collection to this API",type:"test",label:"Select a collection to add",buttonLabel:"Add Collection",onAdd:this.addRelation,onCancel:this.handleToggleAddEntityModal,isLoadingAddRelation:this.props.model.tests.isLoadingAddRelation,getEntities:G.bind(this),placeholder:"Select a Collection",emptyStateText:"There are collections in this workspace"}),s.createElement(b.default,{isOpen:this.state.showDeleteModal,onRequestClose:this.toggleDeleteModal,headerTitle:"Remove collection from API?",subTitle:this.props.model.tests.apiName,content:s.createElement(D.default,{type:"relation",relation:{name:this.state.relationToBeDeleted?this.state.relationToBeDeleted.name:"",type:"test"}}),btnContent:"Remove Collection",onSubmit:this.handleDeleteRelation,isLoading:this.props.model.tests.isLoadingDeleteRelation||this.state.isRemovingCollection}),s.createElement(y.default,{isOpen:this.state.showCreateTestSuiteModal,onClose:this.closeCreateTestSuiteModal,onCreate:this.handleCreate,schemaFormat:V.get(this.props,"model.schema.schemaFormat"),advancedOptions:V.get(this.props,"model.schema.advancedOptions"),apiVersionId:V.get(this.props,"model.id",""),apiId:V.get(this.props,"model.apiId","")}))}})||o},"./api-dev/components/api-version/test/test-section/RunTest/RunTest.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-run-stroke.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/SyncStatusStore.js"),c=n("./api-dev/util/TooltipText.js"),d=n("./api-dev/util/RunTestActions.js"),u=n("./node_modules/lodash/lodash.js");const p=(0,r.default)(s.default)`
  & i, span {
    visibility: inherit !important;
  }
`;class m extends o.Component{constructor(e){super(e)}render(){const e=u.get(this.props.testActions,"modelId"),t=!(0,a.resolveStoreInstance)(l.default).isSocketConnected;return o.createElement(p,{type:"tertiary",onClick:()=>(0,d.getRunnerTab)(e),className:"run-test-btn",text:"Run",icon:o.createElement(i.default,null),isDisabled:t,tooltip:(0,c.default)(t,!1)})}}},"./api-dev/components/api-version/test/test-section/TestAction/TestActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Buttons.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/SyncStatusStore.js"),c=n("./api-dev/constants/APIEntityActionsConstants.js"),d=n("./api-dev/util/TooltipText.js"),u=n("./node_modules/lodash/lodash.js");let p=(0,s.observer)(o=class extends i.Component{constructor(e){super(e)}render(){const e=!(0,a.resolveStoreInstance)(l.default).isSocketConnected;return u.map(c.API_ENTITY_ACTIONS.testActions.buttons,(t=>i.cloneElement(t,{testActions:this.props.testActions,onRender:(t,n,o,s)=>i.createElement(r.Button,{className:o,type:s,onClick:n,tooltip:(0,d.default)(e,!1),disabled:e},t)})))}})||o},"./api-dev/components/api/api-tab/tiles/Collections/AddCollectionCTA.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o,s=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("../../node_modules/react/index.js"),u=n("./js/modules/services/AnalyticsService.js"),p=n("./js/stores/StoreManager.js"),m=n("../../packages/api-design/api-definition-ui/index.js"),h=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),g=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),f=n("./api-dev/constants/APIActionsConstants.js"),b=n("./api-dev/constants/APITooltips.js"),y=n("./api-dev/interfaces/APIInterface.js"),v=n("./node_modules/lodash/lodash.js");let I=(0,c.observer)(o=class extends d.Component{constructor(e){super(e),this.state={collectionStore:null},this.openGenerateCollectionModal=this.openGenerateCollectionModal.bind(this),this.openAddCollectionsModal=this.openAddCollectionsModal.bind(this),this.handleAddNewCollection=this.handleAddNewCollection.bind(this)}componentDidMount(){const e=(0,p.resolveStoreInstance)(h.default).id;(0,g.subscribeMeta)(e).then((e=>{this.setState({collectionStore:e})})).catch((e=>{pm.logger.error("AddCollectionCTA-componentDidMount Failed to get collections in workspace",e)}))}componentWillUnmount(){var e;null===(e=this.state.collectionStore)||void 0===e||e.unsubscribe()}openGenerateCollectionModal(){pm.mediator.trigger("showAddCollectionToAPIModal",f.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,this.props.model.apiId,this.props.model.apiMode,{apiVersionId:this.props.model.id,definitionModel:this.props.model.schema}),u.default.addEventV2({category:"api_repo_integration_v2",entityId:v.get(this,"props.model.apiId"),action:"generate_collection",label:this.props.eventLabel||"overview",value:1})}openAddCollectionsModal(){u.default.addEventV2({category:"api_repo_integration_v2",entityId:v.get(this,"props.model.apiId"),action:"copy_collection",label:this.props.eventLabel||"overview",value:1});const e={category:"api_repo_integration_v2",entityId:v.get(this,"props.model.apiId"),action:"initiate_migration",label:"copy_collection",value:1};(0,y.migrateAPI)(this.props.model.apiId,this.props.model.id,e).then((({migratedAPIId:e,apiVersionId:t})=>{pm.mediator.trigger("showAddCollectionToAPIModal",f.ACTION_TYPE_COPY_EXISTING_COLLECTION,e,this.props.model.apiMode,{apiVersionId:t})})).catch(v.noop)}handleAddNewCollection(){u.default.addEventV2({category:"api_repo_integration_v2",entityId:v.get(this,"props.model.apiId"),action:"add_new_collection",label:this.props.eventLabel||"overview",value:1});const e={category:"api_repo_integration_v2",entityId:v.get(this,"props.model.apiId"),action:"initiate_migration",label:"add_collection",value:1};(0,y.migrateAPI)(this.props.model.apiId,this.props.model.id,e).then((({migratedAPIId:e,apiVersionId:t})=>{pm.mediator.trigger("showAddCollectionToAPIModal",f.ACTION_TYPE_CREATE_NEW_COLLECTION,e,this.props.model.apiMode,{apiVersionId:t})})).catch(v.noop)}render(){var e,t;const n=v.get(this.props,"model.apiPermissionStore.canAddCollection"),o=null===(e=this.state.collectionStore)||void 0===e||null===(t=e.list)||void 0===t?void 0:t.length,{generateCollectionDisabledMsg:c,isGenerateCollectionButtonDisabled:u}=(0,m.getGenerateCollectionIsDisabledAndMsg)(this.props.model.schema);return d.createElement("div",null,d.createElement(s.default,null,d.createElement(i.default,null,d.createElement(r.default,{tooltip:"Add a collection",icon:"icon-action-add-stroke",type:"tertiary"})),d.createElement(a.default,{placement:"bottom-end"},d.createElement(l.default,{isDisabled:0===o,onClick:this.openAddCollectionsModal,tooltip:0===o?b.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY:null},"Copy existing collection"),d.createElement(l.default,{isDisabled:u,onClick:this.openGenerateCollectionModal,tooltip:c},"Generate from definition"),d.createElement(l.default,{onClick:this.handleAddNewCollection,isDisabled:!n,tooltip:n?"":"You don't have permission to add collection to this API."},"Add new collection"))))}})||o},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/APIDeployments/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("../../node_modules/mobx/lib/mobx.module.js"),l=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/GenericPowerUpTile.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./integrations/utils/PowerUpSectionUtils.js"),u=n("./integrations/api-observability/stores/APIObservabilityStore.js"),p=n("./js/stores/StoreManager.js"),m=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/LoadingPowerUpValues.js");const h=["Source"];let g=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.apiObservabilityStore=(0,p.resolveStoreInstance)(u.default)}componentDidMount(){const e={apiVersionId:this.props.apiVersionId};this.apiObservabilityStore.resetPowerUpVariables(e)}render(){const{clientCategory:e,apiVersionId:t}=this.props,n=this.apiObservabilityStore.getIntegrationClass(t),o=this.apiObservabilityStore.getIntegrationInstance(t),i=this.apiObservabilityStore.loadingIntegrationInstanceAndClass[t],r=(0,d.findConfiguredClassAndInstance)(e,(0,a.toJS)(n),(0,a.toJS)(o));if(i)return s.createElement(m.default,{fields:h});if(r){const{configuredInstance:t,configuredClass:n}=r;return s.createElement(l.default,{fields:h,configuredInstance:t,configuredClass:n,clientCategory:e})}return null}})||o;g.PropTypes={apiId:r().string,apiVersionId:r().string,clientCategory:r().string}},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/APIPerformance/AuthenticatedServicesView.js":function(e,t,n){"use strict";n.r(t);var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),d=n("./node_modules/prop-types/index.js"),u=n.n(d),p=n("./js/stores/StoreManager.js"),m=n("./js/stores/IntegrationsStore.js"),h=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/LoadingPowerUpValues.js"),g=n("./integrations/monitoring/constants.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-newrelic.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),y=n("./js/modules/services/AnalyticsService.js"),v=n("./js/services/NavigationService.js"),I=n("./integrations/navigation/constants.js"),_=n("./integrations/utils/CommonHelperMethods.ts"),E=n("./integrations/utils/PowerUpSectionUtils.js"),S=n("./api-dev/constants/PowerUpYourAPIConstants.js"),C=n("./node_modules/lodash/lodash.js");const T=(0,_.getErrorContextObject)("APM~AuthenticatedServicesView"),A=e=>e===g.NEW_RELIC_APM_CLASS_ID?s.createElement(f.default,null):s.createElement(b.default,null);let j=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={serviceData:null,classOfIntegrationBeingCreated:null},this.integrationsStore=(0,p.resolveStoreInstance)(m.default)}getServiceId(){return C.get(this.props,"authenticationInstance.service")}handleOneClickCreation(e,t){const n=C.get(this.props,"model.apiId"),o=C.get(this.props,"model.id"),{addToast:s}=this.props;this.setState({classOfIntegrationBeingCreated:e});const i={apiId:n,versionId:o},r={service:t.id,name:t.name,rule:e},a={apiVersionItemStore:this.props.model};(0,_.getSanitizedRouteAndQueryParamsForV10APIUrls)(i,r,n).then((([e,n])=>{y.default.addEventV2({category:S.API_BUILDER_ANALYTICS_CATEGORY,action:S.CONNECT_VIA_API_ANALYTICS_ACTION_CONNECT_API,label:t.name,value:1}),v.default.transitionTo(I.V10_API_ADD_APM_INTEGRATION_NAV_IDENTIFIER,e,n,a)})).catch((e=>{s({title:"Error",description:"Something went wrong! Could not navigate to create form",status:"error"}),pm.logger.error("AddAPMIntegration ~ Error while navigating to create form for APM Integration",e,{context:T,routeParams:JSON.stringify(i),queryParams:JSON.stringify(r),apiId:n})}))}render(){const{classOfIntegrationBeingCreated:e}=this.state,{errorFetchingAvailableIntegrations:t,loadingIntegrationClasses:n}=this.integrationsStore,o=this.integrationsStore.getIntegrationClasses(),i=this.getServiceId(),c=(0,E.filterAuthenticatedAPMClasses)(o,i),d=(0,E.getAPMServiceData)(c,i),u=C.filter(c,(e=>C.includes(g.AUTH_SUPPORTED_CLASSES,e.id)));return n?s.createElement(h.default,{fields:g.APM_POWER_UP_FIELDS}):C.isEmpty(u)&&!C.isEmpty(t)?null:s.createElement(r.default,{direction:"column",gap:"spacing-m",alignItems:"left",className:"power-up__screen-body",padding:"spacing-s spacing-zero spacing-s spacing-zero"},s.createElement(a.default,{type:"para"},"Your team is authorized to ",d.name,". Complete setup to view ",d.name," metrics in Postman."),C.map(u,(t=>{const n=t.id;return s.createElement(l.default,{type:"outline",icon:A(n),text:d.name,isDisabled:e===n,onClick:()=>this.handleOneClickCreation(n,d)})})))}})||o;t.default=(0,c.default)(j),j.PropTypes={authenticationInstance:u().object,model:u().shape({id:u().string,apiId:u().string})}},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/APIPerformance/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),l=n.n(a),c=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/GenericPowerUpTile.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),p=n("./integrations/monitoring/constants.js"),m=n("./integrations/utils/PowerUpSectionUtils.js"),h=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/LoadingPowerUpValues.js"),g=n("./integrations/services/AuthenticationInstanceService.ts"),f=n("./js/stores/CurrentUserStore.js"),b=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/APIPerformance/AuthenticatedServicesView.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),I=n("./js/modules/services/AnalyticsService.js"),_=n("./js/services/NavigationService.js"),E=n("./integrations/navigation/constants.js"),S=n("./api-dev/constants/PowerUpYourAPIConstants.js"),C=n("./node_modules/lodash/lodash.js");function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},T.apply(this,arguments)}let A=(0,s.observer)(o=class extends r.Component{constructor(e){super(e),this.state={authenticationInstances:[],loadingAuthenticationInstance:!0,installedAppFeatureFlag:!1},this.apmIntegrationStore=(0,d.resolveStoreInstance)(u.default),this.datadogStore=this.apmIntegrationStore.find(p.DATADOG_APM_CLASS_ID)}componentDidMount(){const e={apiVersionId:this.props.apiVersionId},t=(0,p.isFeatureFlagEnabled)(p.NEW_RELIC_APM_CLASS_ID);this.setState({installedAppFeatureFlag:t,loadingAuthenticationInstance:t}),this.apmIntegrationStore.resetPowerUpVariables(e),t&&this.fetchAuthenticationInstances()}fetchAuthenticationInstances(){const e=(0,d.resolveStoreInstance)(f.default);this.setState({loadingAuthenticationInstance:!0}),g.default.listAuthenticationInstances({scope:[{type:p.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[p.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[p.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>C.isNil(e.data)?(pm.logger.error("Error loading authentication instances! Received null response!",{body:e}),this.setState({loadingAuthenticationInstance:!1})):this.setState({loadingAuthenticationInstance:!1,authenticationInstances:e.data}))).catch((e=>{pm.logger.error("Error loading authentication instances!",e),this.setState({loadingAuthenticationInstance:!1})}))}renderReauthenticateState(e){const{apiId:t}=this.props,{configuredClass:n,configuredInstance:o}=e,s=C.head(C.get(n,["services"]));return r.createElement(y.default,{direction:"column",padding:{paddingTop:"spacing-s"}},r.createElement(v.default,{type:"para",color:"content-color-error"},s.name," access token is no longer valid.",r.createElement("div",{onClick:()=>{I.default.addEventV2({category:S.API_BUILDER_ANALYTICS_CATEGORY,action:S.CONNECT_INTEGRATION_ANALYTICS_ACTION+s.id,label:"edit",value:1}),_.default.transitionTo(E.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:t,integrationId:o.id},{service:s.id},{additionalContext:{origin:"api_builder"}})}},r.createElement(v.default,{type:"link-default"},"Re-authenticate")," with a new API key to view services.")))}render(){const{clientCategory:e,apiVersionId:t}=this.props,{authenticationInstances:n,loadingAuthenticationInstance:o,installedAppFeatureFlag:s}=this.state,a=this.apmIntegrationStore.getIntegrationClass(t),l=this.apmIntegrationStore.getIntegrationInstance(t),d=this.apmIntegrationStore.loadingIntegrationInstanceAndClass[t],u=(0,m.findConfiguredClassAndInstance)(e,(0,i.toJS)(a),(0,i.toJS)(l));if(d||o)return r.createElement(h.default,{fields:p.APM_POWER_UP_FIELDS});if(!C.isEmpty(u)){const{configuredInstance:t,configuredClass:n}=u,o=C.get(t,"services",[]),s=C.head(o);return r.createElement(r.Fragment,null,r.createElement(c.default,{fields:p.APM_POWER_UP_FIELDS,configuredInstance:t,configuredClass:n,clientCategory:e}),s?null:this.renderReauthenticateState(u))}return C.isEmpty(n)?null:r.createElement(b.default,T({authenticationInstance:C.head(n)},this.props))}})||o;A.PropTypes={apiId:l().string,apiVersionId:l().string,clientCategory:l().string}},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/AuthenticatedServicesView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("./integrations/services/OneClickIntegrationCreateService.js"),d=n("./integrations/ci-cd/helpers.js"),u=n("./js/services/NavigationService.js"),p=n("./appsdk/components/link/Link.js"),m=n("./integrations/navigation/constants.js"),h=n("./js/stores/StoreManager.js"),g=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),f=n("./js/stores/IntegrationsStore.js"),b=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/LoadingPowerUpValues.js"),y=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/constants.ts"),v=n("./node_modules/prop-types/index.js"),I=n.n(v),_=n("./node_modules/lodash/lodash.js");let E=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={oneClickCreationEnabled:!0,serviceData:null,classOfIntegrationBeingCreated:null},this.integrationsStore=(0,h.resolveStoreInstance)(f.default)}componentDidMount(){const e=c.default.isOneClickCreationEnabled();this.setState({oneClickCreationEnabled:e})}getServiceId(){return _.get(this.props,"authenticationInstance.service")}render(){if(!this.state.oneClickCreationEnabled||!_.get(this.props.model,"apiRepositoryStore.apiVersionRepositoryInterface.remoteGitConfigured",!0))return null;const{classOfIntegrationBeingCreated:e}=this.state,{errorFetchingAvailableIntegrations:t,loadingIntegrationClasses:n}=this.integrationsStore,o=this.integrationsStore.getIntegrationClasses(),i=this.getServiceId(),f=((e,t)=>_.filter(e,(e=>!_.isNil(_.find(e.services,["id",t]))&&!_.isNil(_.find(e.clientCategories,["key","continuous-integration"])))))(o,i),v=((e,t)=>_.find(_.get(e,"0.services"),["id",t]))(f,i),I=_.filter(f,(e=>_.includes(c.default.SUPPORTED_CLASSES,e.id))),E=_.get(this.props,"model.apiId"),S=_.get(this.props,"model.id"),C=this.props.screenId,T=e=>(e&&_.isFunction(e.preventDefault)&&e.preventDefault(),_.isFunction(_.get(this.props.model,"apiEditorUIStore.setActiveScreen"))&&this.props.model.apiEditorUIStore.setActiveScreen(C));return n?s.createElement(b.default,{fields:y.CI_POWER_UP_FIELDS}):_.isEmpty(I)||!_.isEmpty(t)?null:s.createElement(r.default,{direction:"column",gap:"spacing-m",alignItems:"left",className:"power-up__screen-body",padding:"spacing-s spacing-zero spacing-s spacing-zero"},s.createElement(a.default,{type:"para"},"You are authenticated with ",v.name,". Complete setup of ",I[0].name," to view builds from within Postman."),_.map(I,(t=>{const n=t.id;return s.createElement(l.default,{type:"outline",icon:(0,d.getIconForCIIntegration)(n),text:t.name,isDisabled:e===n,onClick:()=>{this.setState({classOfIntegrationBeingCreated:n}),c.default.createFromApi(E,S,n).then((({body:e})=>{const t=_.get(e,"data.id");pm.toasts.success("Your API is connected to "+v.name),u.default.transitionTo(m.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{integrationId:t,apiId:E}),(0,h.resolveStoreInstance)(g.default).fetchIntegrationInstance("apiversion",S)})).catch((e=>{if(this.setState({classOfIntegrationBeingCreated:null}),pm.logger.error("Error occurred while one-click creating the integration",{integrationClass:n,error:e}),_.isNil(e)||!e.message)return pm.toasts.error("Something went wrong when trying to create the integration with the saved auth. Please create your integration using the form instead."),T();pm.toasts.error(e.message)}))}})})),s.createElement(p.default,{onClick:T},s.createElement(a.default,{typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-s"},color:"content-color-secondary",type:"link-default"},"View all CI providers")))}})||o;E.PropTypes={screenId:I().string,model:I().object,authenticationInstance:I().object}},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/GenericPowerUpTile.js"),d=n("./integrations/utils/PowerUpSectionUtils.js"),u=n("./integrations/services/AuthenticationInstanceService.ts"),p=n("./integrations/services/OneClickIntegrationCreateService.js"),m=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/AuthenticatedServicesView.js"),h=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),g=n("./js/stores/StoreManager.js"),f=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/LoadingPowerUpValues.js"),b=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/constants.ts"),y=n("./node_modules/lodash/lodash.js");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v.apply(this,arguments)}let I=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={authenticationInstances:[],loadingAuthInstances:!0,errorLoadingAuthInstances:null},this.fetchAuthenticationInstances=this.fetchAuthenticationInstances.bind(this),this.testAutomationStore=(0,g.resolveStoreInstance)(h.default)}componentDidMount(){const e={apiVersionId:this.props.apiVersionId};this.testAutomationStore.resetPowerUpVariables(e),this.fetchAuthenticationInstances()}fetchAuthenticationInstances(){const e={loadingAuthInstances:!1,errorLoadingAuthInstances:"Something went wrong while fetching authentication instances"};this.setState({loadingAuthInstances:!0,errorLoadingAuthInstances:null}),u.default.listAuthenticationInstancesOnApi(this.props.model.apiId).then((({body:t})=>y.isNil(t.data)?(pm.logger.error("Error loading authentication instances! Received null response!",{body:t}),this.setState(e)):this.setState({loadingAuthInstances:!1,authenticationInstances:t.data}))).catch((t=>(pm.logger.error("Error loading authentication instances!",t),this.setState(e))))}render(){const{clientCategory:e,apiVersionId:t}=this.props,{authenticationInstances:n,loadingAuthInstances:o}=this.state,s=this.testAutomationStore.getIntegrationClass(t),r=this.testAutomationStore.getIntegrationInstance(t),a=this.testAutomationStore.loadingIntegrationInstanceAndClass[t],u=(0,d.findConfiguredClassAndInstance)(e,(0,l.toJS)(s),(0,l.toJS)(r)),h=y.find(n,(e=>y.includes(p.default.SUPPORTED_SERVICES,y.get(e,"service"))));if(a||o)return i.createElement(f.default,{fields:b.CI_POWER_UP_FIELDS});if(u){const{configuredInstance:t,configuredClass:n}=u;return i.createElement(c.default,{fields:b.CI_POWER_UP_FIELDS,configuredInstance:t,configuredClass:n,clientCategory:e})}return y.isEmpty(h)?null:i.createElement(m.default,v({authenticationInstance:h},this.props))}})||o;I.PropTypes={apiId:a().string,apiVersionId:a().string,clientCategory:a().string}},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/GenericPowerUpTile.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),m=n("./js/controllers/theme/ThemeManager.js"),h=n("./integrations/constants/integrationsConstants.ts"),g=n("./api-dev/constants/PowerUpYourAPIConstants.js"),f=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),b=n("./node_modules/lodash/lodash.js");const y=f.default.div`
  display: flex;
  gap: var(--spacing-xs);
  align-items: center;
`;let v=(0,s.observer)(o=class extends a.Component{constructor(e){super(e)}getCIProjectName(e,t){const n=b.find(e,(e=>e.key===t));return b.get(n,"value")}getServicesPopoverValue(e){const t=e&&b.slice(e,1,e.length);return b.join(t,",\n")}renderDisplayServiceNameAndPopover(e,t,n){switch(e){case g.API_PERFORMANCE_INTEGRATION:const e=b.get(t,"services",[]),o=b.head(e),s=b.size(e),i=a.createElement(l.default,null,a.createElement(c.default,{color:"content-color-primary"}," +"+(s-1)));return a.createElement(l.default,{gap:"spacing-xs",grow:1,shrink:1,basis:1,minWidth:"0"},o?a.createElement(c.default,{type:"body-medium",color:"content-color-primary",isTruncated:!0},o):a.createElement(y,null,a.createElement(p.default,{color:"content-color-error"}),a.createElement(c.default,{type:"body-medium",color:"content-color-error",isTruncated:!0},"Unable to load services")),s>1?a.createElement(l.default,{alignItems:"center"},a.createElement(d.default,{trigger:i,position:"top-end",triggerEvent:"mouseenter",className:"power-up__apm-tool-tip"},a.createElement(c.default,{color:"content-color-primary"},this.getServicesPopoverValue(e)))):null);case g.CONTINUOUS_INTEGRATION:const r=this.getCIProjectName(t.inputs,h.CI_PROJECT_KEY[n.id]);return a.createElement(l.default,{gap:"spacing-xs",grow:1,shrink:1,basis:1,minWidth:"0"},r?a.createElement(c.default,{type:"body-medium",color:"content-color-primary",isTruncated:!0},r):a.createElement(y,null,a.createElement(p.default,{color:"content-color-error"}),a.createElement(c.default,{type:"body-medium",color:"content-color-error",isTruncated:!0},"Unable to load project")));default:return null}}renderTileFields(e,t,n,o){const s=b.get(o,"services[0]"),i=b.get(s,"name"),r=b.get(s,"iconUrl"),d=b.get(s,"darkIconUrl"),p=m.default.getCurrentTheme();return e===g.SOURCE||e===g.CONNECTED_WITH?a.createElement(l.default,{className:"power-up__tile-field",direction:"row",gap:"spacing-xs",width:"100%"},a.createElement(c.default,{type:"body-medium",color:"content-color-secondary",className:"power-up__tile-field__name"},e+": "),a.createElement(l.default,{gap:"spacing-xs",grow:1,shrink:1,basis:1,minWidth:"0",alignItems:"center"},a.createElement(u.default,{src:"dark"===p&&d||r,size:"xs"}),a.createElement(c.default,{type:"body-medium",color:"content-color-primary",isTruncated:!0},i))):a.createElement(l.default,{className:"power-up__tile-field",direction:"row",gap:"spacing-xs",width:"100%"},a.createElement(c.default,{type:"body-medium",color:"content-color-secondary",className:"power-up__tile-field__name"},e+": "),this.renderDisplayServiceNameAndPopover(t,n,o))}render(){const{fields:e,configuredInstance:t,configuredClass:n,clientCategory:o}=this.props;return a.createElement(l.default,{direction:"column",gap:"spacing-xs",alignItems:"flex-start",padding:{paddingTop:"spacing-s"}},b.map(e,(e=>this.renderTileFields(e,o,t,n))))}})||o;v.PropTypes={fields:r().array,configuredInstance:r().object,configuredClass:r().object,clientCategory:r().string}},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/common/LoadingPowerUpValues.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js");t.default=e=>{const{fields:t}=e;return s.createElement(o.default,{className:"power-up__tile-loading",direction:"column",gap:"spacing-m",padding:{paddingTop:"spacing-l",paddingBottom:"spacing-s"}},i.map(t,(e=>s.createElement(o.default,{direction:"row",gap:"spacing-l"},s.createElement("div",{className:"power-up__tile-loading__label"}),s.createElement("div",{className:"power-up__tile-loading__body"})))))}},"./api-dev/components/common/DeleteModal/DeleteModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("./js/stores/StoreManager.js"),h=n("./js/stores/SyncStatusStore.js"),g=n("./node_modules/lodash/lodash.js");const f=r.default.label`
  &&& {
    margin-bottom: var(--spacing-s);
  }
`;let b=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={textInputValue:"",inputValueIsValid:!1},this.handleClose=this.handleClose.bind(this),this.setTextInputValue=this.setTextInputValue.bind(this),this.getTooltipMessage=this.getTooltipMessage.bind(this),this.renderModalContent=this.renderModalContent.bind(this),this.unsetComponentState=this.unsetComponentState.bind(this)}componentDidUpdate(e){e.isOpen!==this.props.isOpen&&this.unsetComponentState()}unsetComponentState(){this.setState({textInputValue:"",inputValueIsValid:!1})}setTextInputValue(e){this.setState({textInputValue:e,inputValueIsValid:!1}),e===this.props.additionalData.apiName&&this.setState({inputValueIsValid:!0})}handleClose(){this.props.onRequestClose&&this.props.onRequestClose()}renderModalContent(){return g.isEmpty(this.props,"additionalData")||"api"!==g.get(this.props,"additionalData.type")?this.props.content:i.createElement(a.default,{direction:"column",gap:"spacing-l"},i.createElement(l.default,{status:"warning"},"You cannot restore this API once deleted."),i.createElement(i.Fragment,null,i.createElement(c.default,null,i.createElement(c.default,{type:"body-medium"},"Collections, environments and definition that are part of this API will also be deleted."))),i.createElement(f,{htmlFor:"confirm-delete-api-button"},i.createElement(c.default,{color:"content-color-secondary"},"Enter ",i.createElement(c.default,{type:"strong"},this.props.additionalData.apiName)," to proceed")),i.createElement(d.default,{id:"confirm-delete-api-button",placeholder:"",value:this.state.textInputValue,onChange:e=>this.setTextInputValue(e.target.value)}))}getTooltipMessage(){return!(0,m.resolveStoreInstance)(h.default).isSocketConnected?"Please make sure you are connected to the internet":!g.isEmpty(this.props.additionalData)&&!this.state.inputValueIsValid&&"Please enter the name of this API to confirm"}render(){const e=!(0,m.resolveStoreInstance)(h.default).isSocketConnected,t=this.getTooltipMessage(),n=e||this.props.isLoading||!g.isEmpty(this.props.additionalData)&&!this.state.inputValueIsValid;return i.createElement(u.Modal,{isOpen:this.props.isOpen,onClose:this.handleClose,size:"small"},i.createElement(u.ModalHeader,{heading:"Delete API and all API elements?"}),i.createElement(u.ModalContent,null,this.renderModalContent()),i.createElement(u.ModalFooter,null,i.createElement(a.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},i.createElement(p.default,{type:"secondary",onClick:this.handleClose,text:"Cancel"}),i.createElement(p.default,{type:"destructive",onClick:this.props.onSubmit,isDisabled:n,autoFocus:!0,tooltip:t,isLoading:this.props.isLoading,text:this.props.btnContent}))))}})||o},"./api-dev/components/common/GenerationConfigOptions/GenerationConfigOptions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("./integrations/components/ConfigurationsComponent.js"),a=n("./node_modules/lodash/lodash.js");class l extends o.Component{constructor(e){super(e),this.state={showOptions:!1},this.handleToggle=this.handleToggle.bind(this)}componentDidMount(){this.props.forceShowOptions&&this.handleToggle(null,!0)}shouldComponentUpdate(e){return e.forceShowOptions===this.props.forceShowOptions}handleToggle(e,t){this.setState((e=>({showOptions:t||!e.showOptions})),(()=>{this.props.onToggle&&this.props.onToggle(this.state.showOptions)}))}getButtonText(){return this.state.showOptions?"Hide advanced settings":"Show advanced settings"}render(){let e=this.state.showOptions?"icon-direction-down":"icon-direction-right";return a.isEmpty(this.props.options)?null:o.createElement(o.Fragment,null,o.createElement("div",{className:"generation-config-options__toggle-button",onClick:this.handleToggle},o.createElement(i.default,{name:e,color:"content-color-primary",className:"toggle-button-icon"}),o.createElement(s.default,{type:"body-small",color:"content-color-primary"},this.getButtonText())),this.state.showOptions&&o.createElement("div",{className:"generation-config-options-wrapper"},o.createElement(r.default,{optionsArray:this.props.options,optionsPreference:this.props.preferences,onSubmit:this.props.onOptionsChange})))}}},"./api-dev/constants/APIActionsConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ACTION_TYPE_ADD_COLLECTION:function(){return m},ACTION_TYPE_COMMENTS:function(){return i},ACTION_TYPE_COPY_EXISTING_COLLECTION:function(){return h},ACTION_TYPE_CREATE:function(){return u},ACTION_TYPE_CREATE_NEW_COLLECTION:function(){return g},ACTION_TYPE_CREATE_VERSION:function(){return p},ACTION_TYPE_DELETE:function(){return d},ACTION_TYPE_DUPLICATE:function(){return c},ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION:function(){return f},ACTION_TYPE_MANAGE_ROLES:function(){return a},ACTION_TYPE_MOVE:function(){return s},ACTION_TYPE_RENAME:function(){return l},ACTION_TYPE_REPORTS:function(){return r},ACTION_TYPE_SHARE:function(){return o}});const o="share",s="move",i="comment",r="reports",a="manage",l="rename",c="duplicate",d="delete",u="create",p="create-version",m="add-collection",h="copy-existing-collection",g="create-new-collection",f="generate-collection-from-definition"},"./api-dev/constants/APIEntityActionsConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{API_ENTITY_ACTIONS:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("./api-dev/components/api-version/test/test-section/RunTest/RunTest.js");const i={testActions:{buttons:[o.createElement(s.default,{key:"run-test"})]}}},"./api-dev/constants/APIEntityTableConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{getValidationHelpText:function(){return s}});const o={mock:"mock servers",documentation:"documentation",environment:"environment",integrationtest:"integration test",contracttest:"contract test",testsuite:"test suite",monitor:"monitor",test:"test"},s=e=>`For APIs using OpenAPI 3.0, we validate ${o[e]}s against the API schema.\n\nWe'll support more schema types in the future.`},"./api-dev/constants/APIRepositoryConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ACCESS_TOKEN_VALIDATION_STATUS:function(){return z},ALLOWED_ENTITIES:function(){return y},ALLOWED_ENTITIES_FOR_REPO_SYNC:function(){return u},API_DEFINITION_OPTIONS:function(){return S},API_REPO_INTEGRATION_ACTIVE_STATE:function(){return re},API_REPO_INTEGRATION_AUTHORIZATION_ERROR_MESSAGE:function(){return ae},API_REPO_INTEGRATION_ERROR_STATE:function(){return oe},API_REPO_INTEGRATION_INVALID_TOKEN_ERROR_STATE:function(){return ie},API_REPO_INTEGRATION_LOCKED_ERROR_STATE:function(){return le},API_REPO_INTEGRATION_TOKEN_EXPIRED_ERROR_STATE:function(){return se},AUTH_SOURCE_IDENTIFIER:function(){return H},BILLED_FEATURE_NAMES:function(){return V},BRANCH_SEARCH:function(){return U},COLLECTION:function(){return X},CONFLICTS:function(){return m},CONFLICT_OPTIONS:function(){return P},CREATES:function(){return h},DEBOUNCE_TIMEOUT:function(){return F},DEFAULT_DIRECTORY_OPTION:function(){return J},DESTROYS:function(){return g},DEVELOPMENT_BRANCH_ALREADY_LINKED_STATE:function(){return $},DEVELOP_BRANCH_NAME:function(){return l},DIRECTORY_DROPDOWN_DISPLAY_OPTIONS:function(){return ne},DISPLAY_TYPE:function(){return N},EMPTY_BRANCH_FILE_CONTENT_TEMPLATE:function(){return ce},EMPTY_BRANCH_FILE_PATH:function(){return de},EMPTY_STATE_MESSAGES:function(){return W},ENTITIES_TO_BE_SYNCED:function(){return Z},ENTITY_CHANGE_TYPE_FROM_CONFLICT_DESTINATION:function(){return v},ENTITY_ERROR_NAME_MAP:function(){return ee},ERROR_MESSAGES_FOR_ENTITIES:function(){return K},FAILED_TO_FETCH_ENTITIES_ERROR_MESSAGES:function(){return q},FIRST_SYNC_COMMIT_MSG:function(){return d},GIT_SERVICES_CONFIG:function(){return x},GIT_SERVICES_LIST:function(){return M},ICONS_FROM_TYPE:function(){return R},IS_API_DEFINITION_CONFLICT_CREATE:function(){return O},IS_API_DEFINITION_CREATE:function(){return w},IS_BRANCH_SEARCH_ENABLED:function(){return k},IS_RELATION_CREATE:function(){return C},IS_RELATION_UPDATE_CONFLICT:function(){return T},IS_REPO_SEARCH_ENABLED:function(){return L},IS_SCHEMA_CONFLICT_CREATE:function(){return j},IS_SCHEMA_CREATE:function(){return A},MAIN_BRANCH_NAME:function(){return c},ON_PREM_LEARN_MORE_URL:function(){return ue},POSTMAN_CHANGES:function(){return I},POSTMAN_DEFAULT_DIRECTORY_PATH:function(){return te},RELATION_TYPES:function(){return E},REPOSITORY_CHANGES:function(){return _},REPOSITORY_INTEGRATION_ACTIONS:function(){return D},REPO_ALREADY_LINKED_STATE:function(){return Y},REPO_SEARCH:function(){return B},SCHEMA:function(){return Q},TAB_STATUS_IDENTIFIER:function(){return G},TAG_TYPE_FROM_CHANGE_TYPE:function(){return b},UPDATES:function(){return p},USER_FRIENDLY_CHANGE_TYPE:function(){return f},VALIDATION_BANNER_MESSAGE:function(){return pe}});var o=n("./integrations/constants/integrationsConstants.ts"),s=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-github.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-bitbucket.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-gitlab.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-devops.js");const l="develop",c="main",d="Initial changes from Postman [auto-generated]",u=["schemas","relations","apiDefinition"],p="updates",m="conflicts",h="creates",g="destroys",f={creates:{name:"ADDED"},updates:{name:"MODIFIED"},conflicts:{name:"CONFLICT"},destroys:{name:"DELETED"},renames:{name:"RENAMED"},moves:{name:"MOVED"}},b={creates:"success",updates:"info",renames:"info",moves:"info",conflicts:"warn",destroys:"error"},y=["schemas","relations","apiDefinition"],v={destroyed:"destroys",updated:"updates",created:"creates"},I="Postman",_="Repository",E=[{name:"Use as documentation",id:"documentation"},{name:"Use as test",id:"test"}],S=[{name:"Use this file",id:"Add"},{name:"Always ignore this file",id:"Ignore"}],C=(e,t)=>"relations"===e&&"creates"===t,T=(e,t)=>"relations"===e&&"updates"===t,A=(e,t)=>"schemas"===e&&"creates"===t,j=(e,t,n)=>"schemas"===e&&"conflicts"===t&&"created"===n,w=(e,t)=>"apiDefinition"===e&&"creates"===t,O=(e,t,n)=>"apiDefinition"===e&&"conflicts"===t&&"created"===n,N={apiDefinition:"Definition File",schemas:"Schema",relations:"Collection"},R={relations:"icon-entity-collection-stroke",collections:"icon-entity-collection-stroke",schemas:"icon-entity-api-stroke",apiDefinition:"icon-entity-docs-stroke"},P=[{name:"Keep local file",id:I,tooltip:"This will keep the version of the file present in Postman."},{name:"Keep remote file",id:_,tooltip:"This will keep the version of the file present in the repository."}],D=[{name:"pull",displayName:"Pull"},{name:"commit",displayName:"Commit and push"}],M={GITHUBENTERPRISE:{serviceName:"github",isOnPrem:!0,oauthConfigs:o.SERVICE_OAUTH_CONFIG.GITHUBENTERPRISE,maskedServiceName:"githubEnterprise",dropdownOptionName:"GitHub Enterprise Server",friendlyName:"GitHub",requiredScopes:"repo",billedFeatureName:"api_repo_integration_staticip_enabled",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},customDomainDescription:"GitHub domain URL",customDomainPlaceholder:"https://subdomain.companydomain.com",icon:s.default},GITHUB:{serviceName:"github",isOnPrem:!1,oauthConfigs:o.SERVICE_OAUTH_CONFIG.GITHUB,maskedServiceName:"github",dropdownOptionName:"GitHub",friendlyName:"GitHub",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},icon:s.default},BITBUCKET:{serviceName:"bitbucket",isOnPrem:!1,oauthConfigs:o.SERVICE_OAUTH_CONFIG.BITBUCKET,maskedServiceName:"bitbucket",dropdownOptionName:"Bitbucket",friendlyName:"Bitbucket",serviceProviderTerminologies:{ORGANISATION:"workspace",REPOSITORY:"repository"},icon:i.default},GITLABENTERPRISE:{serviceName:"gitlab",isOnPrem:!0,oauthConfigs:o.SERVICE_OAUTH_CONFIG.GITLABENTERPRISE,maskedServiceName:"gitlabEnterprise",dropdownOptionName:"GitLab Self-managed",friendlyName:"GitLab Self-managed",billedFeatureName:"api_repo_integration_staticip_enabled",requiredScopes:"api, read_user, read_api & write_repository",serviceProviderTerminologies:{ORGANISATION:"group",REPOSITORY:"project"},customDomainDescription:"Gitlab Self-managed domain URL",customDomainPlaceholder:"https://gitlab.companyname.com",icon:r.default},GITLAB:{serviceName:"gitlab",isOnPrem:!1,oauthConfigs:o.SERVICE_OAUTH_CONFIG.GITLAB,maskedServiceName:"gitlab",dropdownOptionName:"GitLab SaaS",friendlyName:"GitLab SaaS",serviceProviderTerminologies:{ORGANISATION:"group",REPOSITORY:"project"},icon:r.default},AZURE:{serviceName:"azure",isOnPrem:!1,oauthConfigs:o.SERVICE_OAUTH_CONFIG.AZURE,maskedServiceName:"azure",dropdownOptionName:"Azure DevOps",friendlyName:"Azure DevOps",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},icon:a.default},AZUREENTERPRISE:{serviceName:"azure",isOnPrem:!0,oauthConfigs:o.SERVICE_OAUTH_CONFIG.AZUREENTERPRISE,maskedServiceName:"azureEnterprise",dropdownOptionName:"Azure DevOps Server",friendlyName:"Azure DevOps Server",billedFeatureName:"api_repo_integration_staticip_enabled",requiredScopes:"vso.code_write, vso.graph_manage, vso.notification_write",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},customDomainDescription:"Azure DevOps Server domain URL along with the collection",customDomainPlaceholder:"{server:port}/{collection}",displayUserAndOrg:!1,featureFlag:"azure-dev-ops-server-on-prem",icon:a.default}},x={github:{debounceTimeout:{repoSearch:1500,branchSearch:500},isRepositorySearchEnabled:!0,isBranchSearchEnabled:!0},bitbucket:{debounceTimeout:{repoSearch:500,branchSearch:500},isRepositorySearchEnabled:!0,isBranchSearchEnabled:!0},gitlab:{debounceTimeout:{repoSearch:500,branchSearch:500},isRepositorySearchEnabled:!0,isBranchSearchEnabled:!0},azure:{debounceTimeout:{repoSearch:500,branchSearch:500},isBranchSearchEnabled:!0}},L="isRepositorySearchEnabled",k="isBranchSearchEnabled",F="debounceTimeout",B="repoSearch",U="branchSearch",V=["api_repo_integration_staticip_enabled"],G={LOADING:"loading",ERROR:"error",FINISHED:"finished"},z={VALID:"valid",INVALID:"invalid",SERVER_UNREACHABLE:"serverUnreachable"},H={OAUTH:"oauth",SHARED_AUTH:"sharedAuth",PERSONAL_ACCESS_TOKEN:"pat"},W={repos:"No repositories found.",orgs:"No organizations found.",branches:"No branches found for the selected repository."},q={orgs:"Failed to fetch organizations.",repos:"Failed to fetch repositories.",branches:"Failed to fetch branches.",collectionDirectories:"Failed to fetch directories.",schemaDirectories:"Failed to fetch directories.",customRepo:"Failed to fetch repository",reposFetch:"Unable to load all the repositories. Please enter the repository name."},K={developmentBranch:{branchNotFoundError:"Branch not found. Check the branch name and try again."},collectionDirectories:{invalidParentDirectoryError:"Select a directory other than the parent of the schema directory.",invalidChildDirectoryError:"Select a directory other than the child of the schema directory."},schemaDirectories:{invalidParentDirectoryError:"Select a directory other than the parent of the collection directory.",invalidChildDirectoryError:"Select a directory other than the child of the collection directory."}},$="developmentBranchAlreadyLinked",Y="repoAlreadyLinked",J={id:"default",name:"Create a directory for me"},X="collection",Q="schema",Z=[X,Q],ee={[X]:"collectionDirectories",[Q]:"schemaDirectories"},te={[X]:"postman/collections",[Q]:"postman/schemas"},ne={previousLevelTrigger:"previousLevelTrigger",selectedItem:"selectedItem"},oe="ERROR",se="expired",ie="invalid",re="active",ae="Postman doesn't have the right permissions on the repository. This might have happened because your access token expired or was deleted. Please authenticate again to resume syncing with the repository.",le="locked",ce="id = {{API_ID}}\n\n[relations]\n\n[relations.collections]\nrootDirectory = postman/collections\n\n[relations.collections.metaData]\n\n[relations.apiDefinition]\nrootDirectory = postman/schemas\n\n[relations.apiDefinition.metaData]\n",de=".postman/api",ue="https://go.pstmn.io/v10-new-onprem-docs",pe="The domain and personal access token combination didn't work. Try again."},"./api-dev/constants/APITooltips.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ACTIVE_API_VERSION_DELETED_TEXT:function(){return s},API_ALREADY_CREATING:function(){return a},API_DELETED_TEXT:function(){return i},CANNOT_MOVE_API_RELATION_TEXT:function(){return r},IS_OFFLINE_TOOLTIP_MSG:function(){return o},NO_COLLECTIONS_IN_WORKSPACE_TO_COPY:function(){return l}});const o="You can take this action once you're back online",s="You can not perform this action as this API version is deleted",i="You can not perform this action as this API is deleted",r="You cannot move individual elements of an API. Move API to move its elements together.",a="Creating API",l="There are no collections in this workspace to copy."},"./api-dev/constants/PowerUpYourAPIConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{API_BUILDER_ANALYTICS_CATEGORY:function(){return a},API_PERFORMANCE_INTEGRATION:function(){return r},CONNECTED_WITH:function(){return i},CONNECT_INTEGRATION_ANALYTICS_ACTION:function(){return l},CONNECT_VIA_API_ANALYTICS_ACTION_CONNECT_API:function(){return c},CONTINUOUS_INTEGRATION:function(){return o},SOURCE:function(){return s}});const o="continuous-integration",s="Source",i="Connected with",r="api-performance-integrations",a="api_builder_integrations",l="connect_integration_action_",c="connect_via_api"},"./api-dev/constants/RelationValidationConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{VALIDATIONS:function(){return o}});const o={VALIDATE:{type:"validate",message:"Validate"},VALIDATING:{type:"validating",message:"Validating"},FAILED:{type:"refresh",message:"Validation failed",actions:{popup:{description:'We hit a snag while validating. Click "Validate Again" to try again',actions:[{type:"refresh",label:"Validate Again"}]}}}}},"./api-dev/registries/APITabScreens.js":function(e,t,n){"use strict";n.r(t),n.d(t,{SCREENS:function(){return u},getCurrentScreenFromQueryParams:function(){return m}});var o=n("./api-dev/components/api-version/api-version-sub-tabs/Monitoring/Monitoring.js"),s=n("./api-dev/components/api-version/api-version-sub-tabs/Test/Test.js"),i=n("./api-dev/components/api-version/api-version-sub-tabs/Deployments/Deployments.js"),r=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/index.js"),a=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/APIPerformance/index.js"),l=n("./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/APIDeployments/index.js"),c=n("./api-dev/constants/PowerUpYourAPIConstants.js"),d=n("./integrations/api-observability/constants.ts");const u={tests:{title:"Test and Automation",view:s.default,clientCategory:c.CONTINUOUS_INTEGRATION,sidebarView:r.default},performance:{title:"API Performance",view:o.default,clientCategory:c.API_PERFORMANCE_INTEGRATION,sidebarView:a.default},deployments:{title:"Deployments",view:i.default,clientCategory:d.API_OBSERVABILITY,sidebarView:l.default}},p={test:"tests",deployment:"deployments",monitoring:"performance"},m=e=>{if(null!=e&&e.view)return e.view;const t=null==e?void 0:e.tab;return t&&p[t]?p[t]:null}},"./api-dev/stores/APIEditorUIStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o,s,i,r,a,l,c,d=n("../../node_modules/mobx/lib/mobx.module.js"),u=n("./js/services/NavigationService.js"),p=n("./api-dev/registries/APITabScreens.js"),m=n("./api-dev/util/navigationHelper.js"),h=n("./node_modules/lodash/lodash.js");function g(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let b=(s=f((o=class{constructor(e,t){g(this,"activeTab",s,this),g(this,"apiId",i,this),g(this,"apiVersionId",r,this),g(this,"ctx",a,this),g(this,"isWindowShrunk",l,this),g(this,"activeScreen",c,this),this.apiId=e,this.apiVersionId=t;const n=u.default.getActiveQueryParams().get();let o=(0,p.getCurrentScreenFromQueryParams)(n),d=h.get(n,"ctx");o&&h.chain(p.SCREENS).keys().includes(o).value()||(o=null),this.setActiveScreen(o),d&&this.setContext(d)}setActiveTab(e){this.activeTab=e}setContext(e){this.ctx=e}shrinkWindow(){this.isWindowShrunk=!0}expandWindow(){this.isWindowShrunk=!1}setActiveScreen(e){if(e===this.activeScreen)return;const t=(0,m.buildQueryParams)(e);this.activeScreen=e,(0,m.transitionToAPI)({apiId:this.apiId,apiVersionId:this.apiVersionId},t)}setActiveScreenNoTransition(e){this.activeScreen=e}get noActiveScreen(){return h.isEmpty(this.activeScreen)}}).prototype,"activeTab",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=f(o.prototype,"apiId",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=f(o.prototype,"apiVersionId",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=f(o.prototype,"ctx",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=f(o.prototype,"isWindowShrunk",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=f(o.prototype,"activeScreen",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f(o.prototype,"setActiveTab",[d.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveTab"),o.prototype),f(o.prototype,"setContext",[d.action],Object.getOwnPropertyDescriptor(o.prototype,"setContext"),o.prototype),f(o.prototype,"shrinkWindow",[d.action],Object.getOwnPropertyDescriptor(o.prototype,"shrinkWindow"),o.prototype),f(o.prototype,"expandWindow",[d.action],Object.getOwnPropertyDescriptor(o.prototype,"expandWindow"),o.prototype),f(o.prototype,"setActiveScreen",[d.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveScreen"),o.prototype),f(o.prototype,"setActiveScreenNoTransition",[d.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveScreenNoTransition"),o.prototype),f(o.prototype,"noActiveScreen",[d.computed],Object.getOwnPropertyDescriptor(o.prototype,"noActiveScreen"),o.prototype),o)},"./api-dev/util/RunMonitorActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{runMonitor:function(){return r}});var o=n("./monitors/stores/domain/MonitorStore.js"),s=n("./monitors/services/MonitorService.js"),i=n("./js/modules/services/AnalyticsService.js");const r=function(e){let t=new o.default(e);t.jobs.masterMonitorStore.loadActiveWorkspaceJobTemplates(),s.default.getPermissionsForJobTemplates([e]).then((n=>{n[0].run&&(t.jobs.createJob(e),i.default.addEventV2({category:"api_builder_integrations",action:"monitor_run",label:"run_button",value:1}),pm.windowEvents.emit(`${e}-run`))})).catch((()=>{pm.toasts.error("Failed to fetch permissions for the monitor!")}))}},"./api-dev/util/RunTestActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{getRunnerTab:function(){return c}});var o=n("./js/stores/StoreManager.js"),s=n("./js/stores/CurrentUserStore.js"),i=(n("./js/stores/ActiveWorkspaceStore.js"),n("./runtime-repl/runner/_api/RunnerInterface.js")),r=n("./runtime-repl/_common/uid-helper.ts"),a=n("./runtime-repl/transient-collection/datastores/stores/TransientCollectionStore.ts"),l=n("./js/services/NavigationService.js");n("./node_modules/lodash/lodash.js");const c=function(e){var t;const n=(0,o.resolveStoreInstance)(s.default).isLoggedIn,c=l.default.getCurrentRouteParams();if(!n){const e=new URL(window.location.href);return pm.mediator.trigger("showSignInModal",{type:"runTest",origin:"api_builder_run_test_button",continueUrl:e})}if(!e)return;const d=null===(t=(0,r.decomposeUID)(e))||void 0===t?void 0:t.modelId,u=a.default.find(d),p={preview:!1,isTransient:Boolean(u),apiId:null==c?void 0:c.apiId,shouldGetParentMeta:!1};(0,i.openCollectionInRunner)(e,p)}},"./api-dev/util/TooltipText.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("./js/stores/CurrentUserStore.js"),s=n("./js/stores/StoreManager.js"),i=n("./js/stores/SyncStatusStore.js"),r=n("./api-dev/constants/APITooltips.js"),a=n("./api-dev/constants/Permissions.js");function l(e,t,n){const l=!(0,s.resolveStoreInstance)(i.default).isSocketConnected;if((0,s.resolveStoreInstance)(o.default).isLoggedIn&&e)return l?r.IS_OFFLINE_TOOLTIP_MSG:n||(t?a.API_PERMISSION_ERROR:void 0)}},"./api-dev/util/URLDomainValidation.js":function(e,t,n){"use strict";n.r(t),n.d(t,{validateLearningCntrUrlDomain:function(){return a},validateMockServerUrlDomain:function(){return l},validateUrlDomain:function(){return r}});const o=new RegExp(/https:\/\/go\.postman(?:-beta|-stage)?\.co\//),s=new RegExp(/https:\/\/(\w+|-+)+\.mock(?:-beta|-stage)?\.pstmn\.io/),i=new RegExp(/https:\/\/go\.pstmn\.io\//);function r(e){if(!e)return pm.logger.info("URLDomainValidation~validateUrlDomain: Url not found"),!1;let t=o.test(e);return t||pm.logger.info("URLDomainValidation~validateUrlDomain: Url domain does not belong to Postman"),t}function a(e){if(!e)return pm.logger.info("URLDomainValidation~validateLearningCntrUrlDomain: Url not found"),!1;let t=i.test(e);return t||pm.logger.info("URLDomainValidation~validateLearningCntrUrlDomain: Url domain does not belong to Postman"),t}function l(e){if(!e)return pm.logger.info("URLDomainValidation~validateMockServerUrlDomain: Url not found"),!1;let t=s.test(e);return t||pm.logger.info("URLDomainValidation~validateMockServerUrlDomain: Url domain does not belong to Postman"),t}},"./api-dev/util/getConfigurationOptions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{checkAndOverrideDefaultValue:function(){return i},newDefaults:function(){return s}});var o=n("./node_modules/lodash/lodash.js");const s={raml:{requestParametersResolution:"Example"},openapi3:{requestParametersResolution:"Example"},swagger:{requestParametersResolution:"Example"}};function i(e,t){let n=pm.settings.getSetting(`import.options.${e.id}`),i={},r=t.map((t=>{let n=o.get(s,[e.type,t.id]);return!n||t.availableOption&&!o.includes(t.availableOption,n)?t:(i={[t.id]:n},{...t,default:n})}));return pm.settings.setSetting(`import.options.${e.id}`,{...n,...i}),r}},"./integrations/api-observability/components/AvailableObservabilityServices.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ServiceCard:function(){return b},default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js"),i=n("./js/controllers/theme/ThemeManager.js"),r=n("./js/services/NavigationService.js"),a=n("./integrations/api-observability/constants.ts"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/api-observability/stores/APIObservabilityStore.js"),p=(n("./node_modules/classnames/index.js"),n("./integrations/constants/integrationsConstants.ts"),n("./appsdk/components/link/Link.js")),m=n("./integrations/navigation/constants.js"),h=n("./integrations/utils/CommonHelperMethods.ts"),g=n("./node_modules/lodash/lodash.js");function f(e){return g.isEmpty(e.integrationClasses)?o.createElement(s.default,{requestNewIntegration:!0}):o.createElement("div",{className:"observability-integrations-card-list"},g.compact(g.map(e.integrationClasses,(t=>{const n=g.get(t,"services.0",{});return g.isEmpty(n)?null:o.createElement(b,{key:n.id,serviceId:n.id,name:n.name,iconUrl:n.iconUrl,darkIconUrl:n.darkIconUrl,classId:g.get(t,"id"),instanceCreation:g.get(t,"instanceCreation",{}),model:e.model,promoteTab:e.promoteTab})}))))}class b extends o.Component{constructor(e){super(e),this.state={currentTheme:i.default.getCurrentTheme(),showFallbackIcon:!1,sanitizedQueryParams:{},sanitizedRouteParams:{}},this.store=(0,d.resolveStoreInstance)(u.default),this.handleThemeChange=this.handleThemeChange.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.setBaseRouteAndQueryParamsForAddIntegrationTab=this.setBaseRouteAndQueryParamsForAddIntegrationTab.bind(this)}componentDidMount(){this.setBaseRouteAndQueryParamsForAddIntegrationTab(),pm.mediator.on("themeChange",this.handleThemeChange),"dark"!==this.state.currentTheme||this.props.darkIconUrl||this.setState({showFallbackIcon:!0})}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}setBaseRouteAndQueryParamsForAddIntegrationTab(){const{model:e}=this.props,t=e.apiId,n={apiId:t,versionId:e.id},o={tab:a.DEPLOYMENT_TAB,category:a.API_OBSERVABILITY};(0,h.getSanitizedRouteAndQueryParamsForV10APIUrls)(n,o,t).then((([e,t])=>{this.setState({sanitizedRouteParams:e,sanitizedQueryParams:t})}))}handleOnClick(e,t,n){const{sanitizedRouteParams:o,sanitizedQueryParams:s}=this.state;this.store.setSelectedServiceName(t);const i={service:e,name:t,rule:n};r.default.transitionTo(m.V10_API_ADD_DEPLOYMENT_INTEGRATION_NAV_IDENTIFIER,o,g.assign({},s,i))}handleThemeChange(e){this.setState({currentTheme:e}),"dark"===e?this.props.darkIconUrl||this.setState({showFallbackIcon:!0}):this.setState({showFallbackIcon:!1})}renderAvailableServices(){const{serviceId:e,name:t,iconUrl:n,darkIconUrl:s,model:i,promoteTab:r,classId:a,instanceCreation:l}=this.props,{sanitizedRouteParams:d,sanitizedQueryParams:u}=this.state,m=g.get(i,`apiPermissionStore.permissions.${i.apiId}:UPDATE_API_META.allowed`),h=g.get(l,"enabled",!1);return m&&h?o.createElement(p.default,{className:"observability-integrations-card-list-item",onClick:n=>{n.metaKey||n.ctrlKey||(n.preventDefault(),g.isFunction(r)&&r(),this.handleOnClick(e,t,a))}},o.createElement("div",{className:"observability-integrations-card-list-item-content-wrapper"},o.createElement("div",{className:"observability-integrations-card-list-item-icon-container"},!this.state.showFallbackIcon&&o.createElement("img",{className:"observability-integrations-card-list-item-icon",src:"dark"===this.state.currentTheme?s:n,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&o.createElement("div",{className:"observability-integrations-card-list-item-fallback-icon"},o.createElement(c.default,{name:"icon-entity-api-stroke",color:"content-color-error"}))),o.createElement("div",{className:"observability-integrations-card-list-item-heading"},t))):o.createElement("div",{className:"observability-integrations-card-list-item list-item-disabled"},o.createElement("div",{className:"observability-integrations-card-list-item-content-wrapper"},o.createElement("div",{className:"observability-integrations-card-list-item-icon-container"},!this.state.showFallbackIcon&&o.createElement("img",{className:"observability-integrations-card-list-item-icon",src:"dark"===this.state.currentTheme?s:n,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&o.createElement("div",{className:"observability-integrations-card-list-item-fallback-icon"},o.createElement(c.default,{name:"icon-entity-api-stroke",color:"content-color-error"}))),o.createElement("div",{className:"observability-integrations-card-list-item-heading"},t)))}render(){const{model:e,instanceCreation:t}=this.props,n=g.get(e,`apiPermissionStore.permissions.${e.apiId}:UPDATE_API_META.allowed`),s=g.get(t,"enabled",!1),i=n&&s,r=n?g.get(t,"description"):a.PERMISSION_ERROR;return o.createElement("div",null,i?this.renderAvailableServices():o.createElement(l.default,{content:r,placement:"bottom"},this.renderAvailableServices()))}}},"./integrations/api-observability/components/PostmanSourceItem.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./js/services/NavigationService.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),c=n("./integrations/api-observability/constants.ts"),d=n("./node_modules/lodash/lodash.js");t.default=function({source:e,model:t}){return"branch"===d.get(e,"type")?o.createElement(i.default,{color:"content-color-primary"},o.createElement("div",{className:"postman-source-item-container"},o.createElement("div",{className:"postman-source-item-container__icon"},o.createElement(r.default,{color:"content-color-primary"})),o.createElement("div",{className:"postman-source-item-container__content"},e.name))):"release"===d.get(e,"type")?o.createElement("span",{onClick:()=>{return n=e.releaseId,void s.default.transitionTo("build.release",{apiId:d.get(t,"apiId"),versionId:d.get(t,"id"),releaseId:n});var n}},o.createElement(i.default,{type:"link-primary"},o.createElement("div",{className:"postman-source-item-container"},o.createElement("div",{className:"postman-source-item-container__icon"},o.createElement(a.default,{color:"content-color-link"})),o.createElement("div",{className:"postman-source-item-container__content"},(e=>{const n=d.find(d.get(t,"releases"),{id:e});return n?n.name:"-"})(e.releaseId))))):"head"===d.get(e,"type")?o.createElement(i.default,{color:"content-color-primary"},o.createElement("div",{className:"postman-source-item-container"},o.createElement("div",{className:"postman-source-item-container__icon"},o.createElement(l.default,{color:"content-color-primary"})),o.createElement("div",{className:"postman-source-item-container__content"},c.API_DEFINITION))):o.createElement(i.default,{color:"content-color-primary"},"-")}},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const s=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(o.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=s},"./integrations/api-observability/components/base/ImportSchemaActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("../../node_modules/react/index.js"),r=n("./appsdk/workbench/TabService.js"),a=n("../../packages/api-design/schema-service/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("./integrations/navigation/constants.js"),u=n("./js/services/NavigationService.js"),p=n("./api-dev/constants/APISubViews.js"),m=n("./integrations/api-observability/constants.ts"),h=n("./js/modules/services/AnalyticsService.js"),g=(n("../../packages/api-design/api-definition-service/index.js"),n("./node_modules/uuid/v4.js")),f=n.n(g),b=n("../../packages/api-design/api-definition-store/index.js"),y=(n("./js/stores/StoreManager.js"),n("./api-dev/services/APIDevService.js")),v=n("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),I=n("./api-dev/interfaces/APIInterface.js"),_=n("../../packages/api-design/api-definition-ui/index.js");class E extends i.Component{constructor(e){super(e),this.state={isImporting:!1,errorImport:!1,apiRelationId:null,fileId:null},this.handleImport=this.handleImport.bind(this),this.handleNavigation=this.handleNavigation.bind(this),this.addSchema=this.addSchema.bind(this)}handleNavigation(){const{apiId:e,versionId:t}=s().get(this.props,"payload",{}),{formSource:n}=this.props;if(r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),s().isEqual(n,m.IMPORT_FORM_SOURCES.INTEGRATION_SETUP))u.default.transitionTo(m.API_BUILDER_ROUTE_IDENTIFIERS.API_VERSION,{apiId:e,versionId:t},{tab:p.DEPLOYMENT});else{let n=s().get(u.default.getActiveQueryParams().get(),"branch");setTimeout((()=>{u.default.transitionTo("build.apiDefinitionFile",{apiId:e,apiVersionId:t,apiDefinitionId:this.state.apiRelationId,fileId:this.state.fileId},n&&{branch:n})}),3e3)}}handleCancel(){const{apiId:e}=s().get(this.props,"payload",{});r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e})}async createOrReplaceApiDefinition(e,t,n,o){try{const n=f()(),i=b.APIDefinitionTypeService.getDefinitionTypeFromSchemaType(s().get(o,"type")),r=`${n}.${s().get(o,"language","json")}`,a=[{type:v.FILE,name:r,path:r,content:s().get(o,"content")}],l=await(0,_.createOrReplaceDefinition)({apiId:e,apiVersionId:t,items:a,options:{type:i}});let c=await l.getRedirectionFileId();return Promise.resolve({id:c})}catch(e){return Promise.reject(e)}}addSchema(){const{payload:e,apiDefinition:t}=this.props,n=s().get(e,"schemaContent",{}),o=s().get(e,"apiId"),i=s().get(e,"versionId");return y.default.getRelations(o,i).then((e=>{const r=s().get(e,"apiDefinition")&&s().get(s().keys(e.apiDefinition),0),l=s().get(e,"schema")&&s().get(s().keys(e.schema),0);return this.setState({apiRelationId:null!=r?r:l}),l?(0,a.updateSchema)(l,n):this.createOrReplaceApiDefinition(o,i,s().get(t,"id",r),n)}))}async handleImport(){const{onImport:e,rule:t,formSource:n,payload:o,onCancel:i}=this.props,{apiId:r}=o,a=(await(0,I.getAPI)(r)).version.apiRepositoryStore;if(!a.canEditAPISource.allowed)return i&&i(),void a.openEditDisabledModal();this.setState({isImporting:!0,errorImport:!1},(()=>{this.addSchema().then((o=>{h.default.addEventV2({category:"gateway-integration",action:`import-schema-${n}`,label:t,value:1}),this.setState({fileId:s().get(o,"id")},(()=>{this.handleNavigation()})),pm.toasts.success("Successfully imported definition."),this.setState({isImporting:!1,errorImport:!1}),s().isFunction(e)&&e()})).catch((e=>{pm.logger.error("Import definition via gateway error ~"+e),pm.toasts.error("Error occurred while importing definition"),this.setState({isImporting:!1,errorImport:e})}))}))}render(){const{disabled:e,tooltipText:t,formSource:n,isLoading:o}=this.props,{isImporting:r}=this.state,a=s().isEqual(n,m.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),d=t||"Make sure that you have entered all the mandatory fields",u=!a&&"Maybe later";return i.createElement(l.default,{justifyContent:"flex-start",direction:a?"row-reverse":"row",grow:1,shrink:1,gap:"spacing-s"},i.createElement(c.default,{className:"deploy-form-container__segment__actions-container__deploy",type:"primary",size:"medium",text:"Import",onClick:this.handleImport,tooltip:e&&d,isDisabled:e||r||o,isLoading:r||o}),i.createElement(c.default,{className:"deploy-form-container__segment__actions-container__cancel",type:"secondary",size:"medium",text:u||"Cancel",onClick:()=>{s().isFunction(this.props.onCancel)&&this.props.onCancel(),this.handleCancel()},isDisabled:r}))}}},"./integrations/api-observability/components/base/TableEmptyState.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js");t.default=function({title:e,description:t,secondaryAction:n,illustration:i}){return o.createElement(s.default,{title:e,description:t,secondaryAction:n},i)}},"./integrations/api-observability/components/common/ErrorState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),r=n("./node_modules/lodash/lodash.js");class a extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"team-integrations-error-state"},o.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=e.illustration||o.createElement(s.default,null);return r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t=o.createElement(i.default,null)),t}(this.props.errorDetails)),o.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===r.get(e,"error.details.code","")?t="Your request timed out":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),o.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404===e.status||400===e.status?t="Looks like the page you're looking for doesn't exist.":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}},"./integrations/api-observability/components/common/ImportSchemaBanner.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=function({isSchemaPresent:e}){let t=e?"Importing a definition will replace the existing definition":"Importing a definition will create a new definition";return o.createElement(s.default,{status:"info"},o.createElement(i.default,null,t))}},"./integrations/api-observability/components/dashboard/apigee/ApigeeDashboard.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./integrations/api-observability/stores/APIObservabilityStore.js"),d=n("./api-dev/stores/APIListStore.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),_=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),E=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),S=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-openWeb-stroke.js"),C=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),T=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),A=n("./js/services/NavigationService.js"),j=n("./api-dev/constants/APISubViews.js"),w=n("./appsdk/workbench/TabService.js"),O=n("./integrations/navigation/constants.js"),N=n("./js/modules/services/AnalyticsService.js"),R=n("./js/external-navigation/ExternalNavigationService.js"),P=n("./js/components/base/LoadingIndicator.js"),D=n("./integrations/components/error-states/ErrorIntegrations.js"),M=n("./integrations/api-observability/constants.ts"),x=n("./api-dev/constants/Permissions.js"),L=n("./integrations/utils/CommonHelperMethods.ts"),k=n("../../node_modules/mobx/lib/mobx.module.js");const F=({proxyEndpoints:e})=>{const t=r.useMemo((()=>e)),n=r.useMemo((()=>[{Header:"Name",accessor:"name",Cell:e=>r.createElement(u.default,{color:"content-color-secondary"},e.value),cellWidth:"278px"},{Header:"Base Paths",accessor:"basePath",Cell:e=>r.createElement(u.default,{color:"content-color-secondary"},e.value)}]));return r.createElement(p.default,{bodyMaxHeight:"220px",data:t,columns:n})},B=({environments:e})=>{const t=r.useMemo((()=>e)),n=r.useMemo((()=>[{Header:"Environments",accessor:"name",Cell:e=>r.createElement(u.default,{color:"content-color-secondary"},e.value),cellWidth:"11.97%"},{Header:"Description",accessor:"description",Cell:e=>e.value?r.createElement(u.default,{color:"content-color-secondary"},e.value):r.createElement(u.default,{color:"content-color-secondary"},"-"),cellWidth:"24.76%"},{Header:"Last Updated",accessor:"lastModifiedAt",Cell:e=>r.createElement(u.default,{color:"content-color-secondary"},(0,L.getFormattedDate)(e.value)),cellWidth:"17.25%"},{Header:()=>r.createElement("span",{className:"apigee-dashboard-container__content__environments__table__status"},r.createElement("span",null,"Status"),r.createElement("span",{className:"apigee-dashboard-container__content__environments__table__status__icon"},r.createElement(m.default,{content:M.STATUS_INFO,placement:"bottom"},r.createElement(E.default,null)))),accessor:"state",Cell:e=>e.value?"ACTIVE"!==e.value?r.createElement(h.default,{status:"neutral",className:"apigee-dashboard-container__content__environments__table__status__badge",text:"inactive"}):r.createElement(h.default,{status:"success",className:"apigee-dashboard-container__content__environments__table__status__badge",text:"active"}):null,cellWidth:"10%"},{Header:()=>r.createElement("span",{className:"apigee-dashboard-container__content__environments__table__status"},r.createElement("span",null,"Deployed Revision"),r.createElement("span",{className:"apigee-dashboard-container__content__environments__table__status__icon"},r.createElement(m.default,{content:M.DEPLOYED_REVISION_INFO,placement:"bottom"},r.createElement(E.default,null)))),id:"Deployed Revision",accessor:e=>e.revisionLink?r.createElement("div",null,r.createElement(u.default,{type:"link-default",isExternal:!0,className:"apigee-dashboard-container__header__latest-revision__id"},r.createElement("div",{onClick:()=>(0,R.openExternalLink)(e.revisionLink||"#","_blank")},"Revision ",e.revision)),e.errors&&r.createElement(m.default,{content:i().get(e,"errors[0].message"),placement:"bottom"},r.createElement(h.default,{status:"neutral",text:"Errored"}))):r.createElement("div",{className:"apigee-dashboard-container__header__latest-revision__id"},"Not deployed"),cellWidth:e=>e.errors?"18.30%":"15.49%"},{Header:"Deployment Date",accessor:e=>i().get(e,"deployStartTime")?(0,L.getFormattedDate)(e.deployStartTime):"-",Cell:e=>r.createElement(u.default,{color:"content-color-secondary"},e.value)}]));return r.createElement(p.default,{data:t,columns:n})};let U=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.getAPIName=()=>{const{apiId:e}=this.state,t=(0,k.toJS)(this.apiListStore.members),n=i().find(t,(t=>e===i().get(t,"id")));return i().get(n,"name")},this.store=(0,l.resolveStoreInstance)(c.default),this.apiListStore=(0,l.resolveStoreInstance)(d.default),this.state={organization:i().get(this.props.configuredIntegrations[0],"variables.organization"),environments:i().get(this.props.configuredIntegrations[0],"variables.environments")||[],apiId:i().get(this.props.configuredIntegrations[0],"variables.postman_api_id"),apiVersionId:i().get(this.props.configuredIntegrations[0],"executor"),integrationId:i().get(this.props.configuredIntegrations[0],"id"),rule:i().get(this.props.configuredIntegrations[0],"rule"),canUpdateIntegration:i().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${x.UPDATE_API_META}.allowed`),showModal:!1},this.fetchApiProxyMeta=this.fetchApiProxyMeta.bind(this),this.fetchDeployments=this.fetchDeployments.bind(this),this.fetchEnvironmentsMeta=this.fetchEnvironmentsMeta.bind(this),this.fetchLatestRevisionMeta=this.fetchLatestRevisionMeta.bind(this),this.getRevisionLink=this.getRevisionLink.bind(this),this.getApiMetricsLink=this.getApiMetricsLink.bind(this),this.bootstrap=this.bootstrap.bind(this),this.handleEditIntegration=this.handleEditIntegration.bind(this),this.handleDeleteIntegration=this.handleDeleteIntegration.bind(this),this.setShowModal=this.setShowModal.bind(this),this.renderDeleteModal=this.renderDeleteModal.bind(this),this.getDeploymentDetails=this.getDeploymentDetails.bind(this),this.navigateToDeploymentsTab=this.navigateToDeploymentsTab.bind(this),this.renderHeaderFirstRow=this.renderHeaderFirstRow.bind(this),this.renderHeaderSecondRow=this.renderHeaderSecondRow.bind(this),this.renderContainerContent=this.renderContainerContent.bind(this)}componentDidMount(){this.bootstrap()}bootstrap(){this.fetchApiProxyMeta(),this.fetchDeployments()}fetchApiProxyMeta(){this.setState({isContainerLoading:!0,isProxyTableLoading:!0});let e=this.state.integrationId,t=M.FETCH_API_PROXY_META;T.default.fetchPostConfigurationGatewayActionDetails(t,e,{}).then((e=>{let t,n,o,s,r,a,l,c;t=i().get(e,"body.data"),n=i().get(t,"name"),o=i().get(t,"revision"),o=i().map(o,(e=>parseInt(e))),s=i().isArray(o)&&!i().isEmpty(o)?i().max(o):"Not available",r=i().get(t,"metaData.createdAt"),a=i().get(t,"metaData.lastModifiedAt"),l=this.getRevisionLink(this.state.organization,n,s),c=this.getApiMetricsLink(this.state.organization,n,s),this.setState({isContainerLoading:!1,apiProxyId:n,latestRevision:s,createdAt:r,lastUpdatedAt:a,latestRevisionLink:l,apiMetricsLink:c}),s&&this.fetchLatestRevisionMeta(s)})).catch((e=>{this.setState({isContainerLoading:!1,isProxyTableLoading:!1,errorObject:{title:"Something went wrong",message:"Something went wrong while fetching Apigee details."}}),pm.logger.error(e)}))}fetchDeployments(){this.setState({isEnvironmentsTableLoading:!0});let{integrationId:e,environments:t}=this.state,n=M.FETCH_DEPLOYMENTS;T.default.fetchPostConfigurationGatewayActionDetails(n,e,{}).then((e=>{let n=i().get(e,"body.data.deployments"),o=t;i().map(n,(e=>{let t=i().get(e,"environment");i().isArray(o)&&!o.includes(t)&&o.push(t),e.revisionLink=this.getRevisionLink(this.state.organization,e.apiProxy,e.revision)})),this.setState({fetchedDeployments:n,environments:o})})).catch((e=>{this.setState({isEnvironmentsTableLoading:!1}),pm.logger.error(e)})).finally((()=>{this.fetchEnvironmentsMeta()}))}getDeploymentDetails(e){let t=this.state.fetchedDeployments,n={};return i().map(t,(t=>{i().get(t,"environment")===e&&(n=t)})),n}fetchEnvironmentsMeta(){let{integrationId:e,environments:t}=this.state,n=M.FETCH_ENVIRONMENTS_META;T.default.fetchPostConfigurationGatewayActionDetails(n,e,{environments:t}).then((e=>{let t=i().get(e,"body.data");i().map(t,(e=>{let t=this.getDeploymentDetails(i().get(e,"name"));e.revisionLink=i().get(t,"revisionLink",""),e.revision=i().get(t,"revision",""),e.deployStartTime=i().get(t,"deployStartTime","")})),this.setState({fetchedEnvironmentsMeta:t,isEnvironmentsTableLoading:!1})})).catch((e=>{this.setState({isEnvironmentsTableLoading:!1}),pm.logger.error(e)}))}fetchLatestRevisionMeta(e){this.setState({isProxyTableLoading:!0});let t=this.state.integrationId,n=M.FETCH_LATEST_REVISION_META;T.default.fetchPostConfigurationGatewayActionDetails(n,t,{revision:e}).then((e=>{let t=i().get(e,"body.data"),n=[],o=t.basepaths,s=t.proxyEndpoints,r=o.length;for(let e=0;e<r;e++)n.push({name:s[e],basePath:o[e]});this.setState({fetchedProxyEndpoints:n,isProxyTableLoading:!1})})).catch((e=>{this.setState({isProxyTableLoading:!1}),pm.logger.error(e)}))}getRevisionLink(e,t,n){return`https://apigee.google.com/platform/${e}/proxies/${t}/overview/${n}`}getApiMetricsLink(e,t,n){return`https://apigee.google.com/platform/${e}/proxies/${t}/performance/${n}`}handleEditIntegration(){A.default.transitionTo(O.V10_API_EDIT_DEPLOYMENT_INTEGRATION_NAV_IDENTIFIER,{apiId:this.state.apiId,integrationId:this.state.integrationId},{tab:M.DEPLOYMENT_TAB,category:M.API_OBSERVABILITY})}handleDeleteIntegration(){let{apiId:e,apiVersionId:t,rule:n}=this.state;this.setState({isDeletingIntegration:!0}),T.default.deleteIntegration(this.state.integrationId).then((e=>{this.setShowModal(!1),this.setState({isDeletingIntegration:!1}),N.default.addEventV2({category:"integrations",action:n+"_deleted_integration",label:"team_integrations_dashboard",value:1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),this.navigateToDeploymentsTab()):pm.toasts.error("Something went wrong while deleting a new integration")})).catch((e=>{this.setState({isDeletingIntegration:!1}),pm.toasts.error("Something went wrong while deleting integration"),pm.logger.error("Something went wrong while deleting integration",e)}))}navigateToDeploymentsTab(){let{apiId:e,apiVersionId:t}=this.state,n={apiId:e,versionId:t},o={tab:j.DEPLOYMENT};w.default.closeByRoute(O.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),this.store.initializeApiObservabilityStore({apiId:e,apiVersionId:t,category:M.API_OBSERVABILITY}),A.default.transitionTo("build.apiVersion",n,o)}setShowModal(e){this.setState({showModal:e})}renderDeleteModal(){return r.createElement(g.Modal,{isOpen:this.state.showModal,onClose:()=>this.setShowModal(!1),className:"apigee-dashboard-container__header__options__delete__modal"},r.createElement(g.ModalHeader,{heading:"Delete Integration",className:"apigee-dashboard-container__header__options__delete__modal__title"}),r.createElement(g.ModalContent,{className:"apigee-dashboard-container__header__options__delete__modal__content"},"Deleting this integration will cease any actions it performs immediately. Are you sure you wish to continue?"),r.createElement(g.ModalFooter,null,r.createElement(f.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},r.createElement(b.default,{type:"secondary",text:"Cancel",onClick:()=>this.setShowModal(!1),isDisabled:this.state.isDeletingIntegration}),r.createElement(b.default,{type:"destructive",text:"Delete Integration",onClick:()=>{this.handleDeleteIntegration()},isLoading:this.state.isDeletingIntegration}))))}renderHeaderFirstRow(){return r.createElement(f.default,{direction:"row",justifyContent:"space-between"},r.createElement(f.default,{direction:"row"},r.createElement(f.default,{direction:"column",justifyContent:"center",className:"apigee-dashboard-container__header__integration-name"},r.createElement("div",null,this.getAPIName())),r.createElement(f.default,{direction:"column",justifyContent:"center",className:"apigee-dashboard-container__header__api-proxy-id"},r.createElement("div",null,"Apigee API Proxy ID: ",this.state.apiProxyId))),r.createElement(f.default,{direction:"row"},r.createElement("div",{className:"apigee-dashboard-container__header__api-metrics"},r.createElement(b.default,{onClick:()=>{(0,R.openExternalLink)(this.state.apiMetricsLink||"#","_blank")},type:"tertiary",text:"API Metrics",icon:r.createElement(S.default,null)})),r.createElement(b.default,{onClick:()=>{this.bootstrap()},type:"tertiary",icon:r.createElement(C.default,null)}),r.createElement(y.default,null,r.createElement(v.default,null,r.createElement(b.default,{icon:"icon-action-options-stroke",type:"tertiary"})),r.createElement(I.default,null,r.createElement(_.default,{onClick:this.handleEditIntegration,isDisabled:!this.state.canUpdateIntegration},r.createElement(f.default,{alignItems:"center"},this.state.canUpdateIntegration?r.createElement(u.default,null,"Edit Integration"):r.createElement(m.default,{content:M.PERMISSION_ERROR,placement:"bottom"},r.createElement("div",null,"Edit Integration")))),r.createElement(_.default,{type:"destructive",onClick:()=>{this.setShowModal(!0)},isDisabled:!this.state.canUpdateIntegration},r.createElement(f.default,{alignItems:"center"},this.state.canUpdateIntegration?r.createElement(u.default,null,"Delete Integration"):r.createElement(m.default,{content:M.PERMISSION_ERROR,placement:"bottom"},r.createElement("div",null,"Delete Integration")))))),this.renderDeleteModal()))}renderHeaderSecondRow(){return r.createElement(f.default,{direction:"row",wrap:"wrap",justifyContent:"space-between",className:"apigee-dashboard-container__header__row2"},r.createElement(f.default,{direction:"row",className:"apigee-dashboard-container__header__latest-revision"},r.createElement("div",{className:"apigee-dashboard-container__header__latest-revision__text"},"Latest Revision:"),r.createElement("div",{className:"apigee-dashboard-container__header__latest-revision__id"},r.createElement(u.default,{type:"link-default",isExternal:!0},r.createElement("div",{onClick:()=>(0,R.openExternalLink)(this.state.latestRevisionLink||"#","_blank")},"Revision ",this.state.latestRevision))),r.createElement(f.default,{direction:"row",className:"apigee-dashboard-container__header__source"},r.createElement("div",{className:"apigee-dashboard-container__header__source__text"},"Source:"),"Apigee X")),r.createElement("div",null,r.createElement(f.default,{direction:"row"},r.createElement(f.default,{direction:"row",className:"apigee-dashboard-container__header__created-at"},r.createElement("div",{className:"apigee-dashboard-container__header__created-at__text"},"Created on:"),(0,L.getFormattedDate)(this.state.createdAt)),r.createElement(f.default,{direction:"row",className:"apigee-dashboard-container__header__last-updated"},r.createElement("div",{className:"apigee-dashboard-container__header__last-updated__text"},"Last updated:"),(0,L.getFormattedDate)(this.state.lastUpdatedAt)))))}renderContainerContent(){return r.createElement(f.default,{direction:"column"},this.renderHeaderFirstRow(),this.renderHeaderSecondRow(),r.createElement(f.default,{direction:"column",className:"apigee-dashboard-container__content__proxy-endpoints"},r.createElement("div",{className:"apigee-dashboard-container__content__proxy-endpoints__heading"},"Proxy Endpoints"),this.state.fetchedProxyEndpoints&&!this.state.isProxyTableLoading?r.createElement("div",{className:"apigee-dashboard-container__content__proxy-endpoints__table"},r.createElement(F,{proxyEndpoints:this.state.fetchedProxyEndpoints})):this.state.isProxyTableLoading?r.createElement(P.default,{className:"apigee-dashboard-container__content__proxy-endpoints__loading"}):r.createElement("div",{className:"apigee-dashboard-container__content__proxy-endpoints__no-data"},"No Proxy Endpoints found.")),r.createElement(f.default,{direction:"column",className:"apigee-dashboard-container__content__environments"},r.createElement("div",{className:"apigee-dashboard-container__content__environments__heading"},"Environments on Apigee"),this.state.fetchedEnvironmentsMeta&&!this.state.isEnvironmentsTableLoading?r.createElement("div",{className:"apigee-dashboard-container__content__environments__table"},r.createElement(B,{environments:this.state.fetchedEnvironmentsMeta})):this.state.isEnvironmentsTableLoading?r.createElement(P.default,{className:"apigee-dashboard-container__content__environments__loading"}):r.createElement("div",{className:"apigee-dashboard-container__content__environments__no-data"},"No environments found.")))}render(){let e;return e=this.state.apiProxyId&&!this.state.isContainerLoading?this.renderContainerContent():this.state.isContainerLoading?r.createElement(P.default,{className:"observability-loading-indicator"}):r.createElement("div",null,this.renderHeaderFirstRow(),this.state.errorObject&&r.createElement(D.default,{error:this.state.errorObject})),r.createElement("div",{className:"apigee-dashboard-container"},e)}})||o},"./integrations/api-observability/components/dashboard/aws-gateway/AwsDashboard.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/api-observability/stores/APIObservabilityStore.js"),l=n("./js/stores/CurrentUserStore.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),f=n("./appsdk/components/link/Link.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-openWeb-stroke.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),_=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-options-stroke.js"),E=n("./integrations/api-observability/components/dashboard/aws-gateway/DeploymentsListItem.js"),S=n("./integrations/api-observability/components/dashboard/aws-gateway/StageListItem.js"),C=n("./integrations/api-observability/services/index.js"),T=n("./node_modules/lodash/lodash.js"),A=n.n(T),j=n("./js/components/base/LoadingIndicator.js"),w=n("./integrations/api-observability/components/modals/DeleteIntegrationModal.js"),O=n("./integrations/api-observability/constants.ts"),N=n("./api-dev/constants/Permissions.js"),R=n("./js/services/NavigationService.js"),P=n("./integrations/navigation/constants.js"),D=n("./integrations/components/error-states/ErrorIntegrations.js"),M=n("./js/external-navigation/ExternalNavigationService.js"),x=n("./js/modules/services/AnalyticsService.js"),L=n("./integrations/api-observability/components/dashboard/aws-gateway/PostmanExportsTable.js"),k=n("./node_modules/classnames/index.js"),F=n.n(k),B=n("./integrations/api-observability/services/Helper.js"),U=n("./integrations/api-observability/containers/ImportSchema.js"),V=n("./js/stores/ActiveWorkspaceSessionStore.js");let G=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default),this.state={modalOpen:!1,viewTable:!0,isPopOverOpen:!1,filteredDeployments:[],deployments:[],postmanExports:[],loadingPostmanExports:!1,errorPostmanExports:!1,integration:{id:"",rule:"",variables:{project_slug:""}},loadingDeployments:!1,loadingMeta:!1,loadingStages:!1,loadingMetrics:!1,errorDeployments:!1,errorDeploymentsMessage:"",selectedStage:{},AWSMeta:{},constructInvokeURL:{},isDeploymentStatusAvailable:!1,isPostmanSourceAvailable:!1,showOnboardingTooltip:!1,showCloudWatchMetrics:!1,showCloudWatchBanner:!1,isOnboardingTooltipVisible:!0},this.scrollToViewMore=(0,s.createRef)(),this.dashboardWrapper=(0,s.createRef)(),this.moreOptionsWrapper=(0,s.createRef)(),this.fetchDeployments=this.fetchDeployments.bind(this),this.fetchAPIGatewayMeta=this.fetchAPIGatewayMeta.bind(this),this.fetchCloudWatchAggregateMetrics=this.fetchCloudWatchAggregateMetrics.bind(this),this.handleStageSelection=this.handleStageSelection.bind(this),this.fetchStages=this.fetchStages.bind(this),this.fetchPostmanExports=this.fetchPostmanExports.bind(this),this.handleViewMore=this.handleViewMore.bind(this),this.constructDashboardURL=this.constructDashboardURL.bind(this),this.constructLogsURL=this.constructLogsURL.bind(this),this.constructInvokeURL=this.constructInvokeURL.bind(this),this.bootstrap=this.bootstrap.bind(this),this.smoothScrollHandler=this.smoothScrollHandler.bind(this),this.handleDeleteModalAction=this.handleDeleteModalAction.bind(this),this.handleEditIntegration=this.handleEditIntegration.bind(this),this.renderIntegrationOptions=this.renderIntegrationOptions.bind(this),this.renderStageTableHeaders=this.renderStageTableHeaders.bind(this),this.renderCloudWatchMetricsColumns=this.renderCloudWatchMetricsColumns.bind(this),this.renderStageMetaInfoColumns=this.renderStageMetaInfoColumns.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.getContextForDeployApi=this.getContextForDeployApi.bind(this),this.renderDeployAPIButton=this.renderDeployAPIButton.bind(this),this.configureOnboardingTooltip=this.configureOnboardingTooltip.bind(this),this.closeOnboardingTooltip=this.closeOnboardingTooltip.bind(this),this.currentUserStore=(0,r.resolveStoreInstance)(l.default),this.infoPopoverRef=s.createRef(),this.isDeployEnabled=this.isDeployEnabled.bind(this),this.handleDeployApiClick=this.handleDeployApiClick.bind(this),this.getStageUrl=this.getStageUrl.bind(this),this.onStageClick=this.onStageClick.bind(this),this.setShowCloudWatchOnboardingBanner=this.setShowCloudWatchOnboardingBanner.bind(this)}componentDidMount(){this.bootstrap(),this.configureOnboardingTooltip(),document.addEventListener("mouseup",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mouseup",this.handleClickOutside)}handleClickOutside(e){this.moreOptionsWrapper&&!this.moreOptionsWrapper.current.contains(e.target)&&this.setState({isPopOverOpen:!1})}configureOnboardingTooltip(){let e=pm.settings.getSetting("DeploymentOnboardingTooltip")||[];!this.currentUserStore.id||e&&e.includes(this.currentUserStore.id)||(this.setState({showOnboardingTooltip:!0}),e.push(this.currentUserStore.id),pm.settings.setSetting("DeploymentOnboardingTooltip",e))}closeOnboardingTooltip(){this.setState({isOnboardingTooltipVisible:!1,showOnboardingTooltip:!1})}bootstrap(){const e=this.props.configuredIntegrations[0];this.fetchDeployments(e.id,e.rule),this.fetchAPIGatewayMeta(e.id,e.rule),this.fetchStages(e.id,e.rule),this.fetchPostmanExports(e.id,e.rule),this.setState({integration:e})}onStageClick(e){const t=this.props.configuredIntegrations[0],{apiId:n}=this.props,{availableStages:o}=this.state,s=(0,r.resolveStoreInstance)(V.default).activeEditor;e&&t&&(R.default.transitionTo(P.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:n,integrationId:t.id},{stageName:e.label,stageId:e.value},{additionalContext:{integration:t,selectedStage:e,availableStages:o},tabOptions:{openIn:s}}),x.default.addEventV2({category:"gateway-integration",action:"click-stage",label:A().get(this.state.integration,"rule"),value:1}))}fetchCloudWatchAggregateMetrics(e,t){const{availableStages:n}=this.state;this.setState({loadingMetrics:!0,errorMetrics:!1}),Promise.all(A().map(n,(n=>C.default[t].fetchCloudWatchAggregateMetrics(e,n.label)))).then((e=>{let t=A().map(n,(t=>({...t,metrics:A().get(A().find(e,{stage:t.label}),"metrics")})));this.setState({availableStages:t,loadingMetrics:!1,errorMetrics:!1,showCloudWatchMetrics:!0,showCloudWatchBanner:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching CloudWatch metrics",e),this.setState({loadingMetrics:!1,errorMetrics:!0,showCloudWatchMetrics:!1,showCloudWatchBanner:!pm.settings.getSetting(O.CLOUDWATCH_BANNER_SETTING)})}))}smoothScrollHandler(){this.scrollToViewMore.current.scrollIntoView({behavior:"smooth"})}fetchPostmanExports(e,t){this.setState({loadingPostmanExports:!0,errorPostmanExports:!1}),C.default[t].fetchPostmanExports(e).then((e=>{this.setState({loadingPostmanExports:!1,postmanExports:e})})).catch((e=>{pm.logger.error("Error occurred while fetching postman exports",e),this.setState({loadingPostmanExports:!1,errorPostmanExports:!0,errorObject:e.error})}))}fetchDeployments(e,t){this.setState({loadingDeployments:!0,errorDeployments:!1}),C.default[t].fetchDeployments(e).then((e=>{let t=A().orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),n=A().slice(t,0,O.DEPLOYMENTS_PER_PAGE);this.setState({deployments:t,filteredDeployments:n,loadingDeployments:!1});let o=!1,s=!1;A().map(t,(e=>{(e.DeploymentStatus||e.deploymentStatus)&&(o=!0),A().isEmpty(e.schemaSource)||(s=!0)})),this.setState({isDeploymentStatusAvailable:o,isPostmanSourceAvailable:s})})).catch((e=>{this.setState({errorDeployments:!0,loadingDeployments:!1,errorObject:e.error})}))}fetchAPIGatewayMeta(e,t){this.setState({loadingMeta:!0,errorMeta:!1}),C.default[t].fetchAPIGatewayMeta(e).then((e=>{this.setState({AWSMeta:e,loadingMeta:!1,bootstrapDone:!0},(()=>{this.constructDashboardURL()}))})).catch((e=>{this.setState({errorMeta:!0,loadingMeta:!1,errorObject:e.error})}))}getStageUrl(e){let{integration:t}=this.state;return A().get(t,"variables.aws_api_type")===O.API_GATEWAY_TYPES.REST?`https://console.aws.amazon.com/apigateway/home?region=${A().get(t,"variables.aws_region")}#/apis/${A().get(t,"variables.aws_api_gateway_id")}/stages/${e}`:`https://console.aws.amazon.com/apigateway/main/deploy/stages/?api=${A().get(t,"variables.aws_api_gateway_id")}&region=${A().get(t,"variables.aws_region")}&stage=${e}`}fetchStages(e,t){this.setState({loadingStages:!0,errorStages:!1}),C.default[t].fetchStages(e).then((n=>{let o=A().orderBy(n,[e=>new Date(e.CreatedDate)],["desc"]),s=A().map(o,(e=>({label:e.StageName||e.stageName,value:e.DeploymentId||e.deploymentId,stageUrl:this.getStageUrl(e.StageName||e.stageName),...e})));A().isEmpty(s)||this.handleStageSelection(s[0]),this.setState({availableStages:s,loadingStages:!1},(()=>{this.constructInvokeURL(),this.constructLogsURL(),this.fetchCloudWatchAggregateMetrics(e,t)}))})).catch((e=>{this.setState({errorStages:!0,loadingStages:!1,errorObject:e.error})}))}constructLogsURL(){let e,t,{selectedStage:n}=this.state;if(A().get(this.state.integration,"variables.aws_api_type")===O.API_GATEWAY_TYPES.REST){if(!n.accessLogSettings)return void this.setState({showLogsButton:!1});t=A().get(n.accessLogSettings,"destinationArn").split(":")}else{if(!n.AccessLogSettings)return void this.setState({showLogsButton:!1});t=A().get(n.AccessLogSettings,"DestinationArn").split(":")}t=t[t.length-1],e=`https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#logsV2:log-groups/log-group/${t}`,this.setState({constructedLogsUrl:e,showLogsButton:!0})}constructDashboardURL(){let e,{integration:t}=this.state;e=A().get(t,"variables.aws_api_type")===O.API_GATEWAY_TYPES.REST?`https://console.aws.amazon.com/apigateway/home?region=${A().get(t,"variables.aws_region")}#/apis/${A().get(t,"variables.aws_api_gateway_id")}/dashboard`:`https://console.aws.amazon.com/apigateway/main/monitor/metrics?api=${A().get(t,"variables.aws_api_gateway_id")}&region=${A().get(t,"variables.aws_region")}`,this.setState({constructedDashboardURL:e})}constructInvokeURL(){let e,{AWSMeta:t,currentStage:n,integration:o}=this.state;e=t.ApiEndpoint?{label:`${t.ApiEndpoint}/${n}`,value:`${t.ApiEndpoint}/${n}`}:{label:`${A().get(o,"variables.aws_api_gateway_id")}.execute-api.${A().get(o,"variables.aws_region")}.amazonaws.com/${n}`,value:`https://${A().get(o,"variables.aws_api_gateway_id")}.execute-api.${A().get(o,"variables.aws_region")}.amazonaws.com/${n}`},this.setState({constructedInvokeURL:e})}constructGatewayURL(){let{integration:e}=this.state;return A().get(e,"variables.aws_api_type")===O.API_GATEWAY_TYPES.REST?`https://console.aws.amazon.com/apigateway/home?region=${A().get(e,"variables.aws_region")}#/apis/${A().get(e,"variables.aws_api_gateway_id")}/resources`:`https://console.aws.amazon.com/apigateway/main/api-detail?api=${A().get(e,"variables.aws_api_gateway_id")}&region=${A().get(e,"variables.aws_region")}`}handleViewMore(){let e=this.state.deployments;this.state.filteredDeployments.length>=this.state.deployments.length&&(e=A().slice(e,0,O.DEPLOYMENTS_PER_PAGE)),this.setState({filteredDeployments:e},(()=>{this.smoothScrollHandler()})),x.default.addEventV2({category:"gateway-integration",action:"load-more-deployments",label:A().get(this.state.integration,"rule"),value:1})}handleStageSelection(e){this.setState({selectedStage:e,currentStage:e.label.toLowerCase()},(()=>{this.constructLogsURL(),this.constructInvokeURL(),this.constructDashboardURL()}))}handleDeleteModalAction(){let{showDeleteModal:e}=this.state;A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)&&this.setState({showDeleteModal:!e,isPopOverOpen:!1})}renderIntegrationOptions(e){return e===O.EDIT_INTEGRATION.value?s.createElement("div",{className:A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)?"observability-edit-integration":"observability-edit-integration-disabled",onClick:this.handleEditIntegration},O.EDIT_INTEGRATION.label):s.createElement("div",{className:A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)?"observability-delete-integration":"observability-delete-integration-disabled",onClick:this.handleDeleteModalAction},O.DELETE_INTEGRATION.label)}handleViewDashboard(e){e&&(0,M.openExternalLink)(e,"_blank"),x.default.addEventV2({category:"gateway-integration",action:"view-dashboard",label:A().get(this.state.integration,"rule"),value:1})}handleEditIntegration(){let{model:e}=this.props,{integration:t}=this.state;A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)&&this.setState({isPopOverOpen:!1},(()=>{R.default.transitionTo(P.V10_API_EDIT_DEPLOYMENT_INTEGRATION_NAV_IDENTIFIER,{apiId:e.apiId,integrationId:t.id},{tab:O.DEPLOYMENT_TAB,category:O.API_OBSERVABILITY})}))}getContextForDeployApi(){let e=A().get(this.props,"releaseContext"),t={branch:A().get(this.props,"model.featureBranch.branchName")||null};return A().isEmpty(e)||(t={...e}),t}handleDeployApiClick(){const e=A().get(this.state,"integration",{}),t=this.getContextForDeployApi(),n=A().get(t,"releaseId",null)?O.RELEASE_VIEW:O.DEPLOYMENT_VIEW;B.default.addDeployClickAnalytics(e,n),R.default.transitionTo(P.V10_API_DEPLOY_NAV_IDENTIFIER,{apiId:A().get(e,"variables.postman_api_id"),integrationId:A().get(e,"id")},null,{additionalContext:this.getContextForDeployApi()}),this.closeOnboardingTooltip()}renderDeployAPIButton(){let{integration:e,showOnboardingTooltip:t,isOnboardingTooltipVisible:n}=this.state,o=A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`);return this.isDeployEnabled(e)?s.createElement("div",{className:"observability-gateway-deploy-cta"},s.createElement(c.default,{placement:"left",isOpen:n&&t,onClickOutside:this.closeOnboardingTooltip,appendTo:"parent",trigger:s.createElement(d.default,{type:"secondary",text:"Deploy API",onClick:this.handleDeployApiClick,tooltip:o?null:O.PERMISSION_ERROR,isDisabled:!o,className:"observability-gateway-deploy-cta__deploy-button"})},s.createElement("div",{className:"observability-onboarding-tooltip-container"},s.createElement("div",{className:"observability-onboarding-tooltip-container__title"},s.createElement("div",{className:"observability-onboarding-tooltip-container__title__heading"},s.createElement(u.default,{type:"h5",text:"Deploy or Export to AWS Gateway"})),s.createElement("div",{className:"observability-onboarding-tooltip-container__title__close-icon",onClick:this.closeOnboardingTooltip},s.createElement(b.default,{color:"content-color-primary"}))),s.createElement("div",{className:"observability-onboarding-tooltip-container__content"},s.createElement(p.default,{color:"content-color-primary"},"You can deploy or export a definition from a version or release to this AWS API Gateway.")),s.createElement("div",{className:"observability-onboarding-tooltip-container__button"},s.createElement(d.default,{type:"secondary",text:"Got it",onClick:this.closeOnboardingTooltip}))))):s.createElement("div",{className:"observability-gateway-deploy-cta"})}renderStageTableHeaders(){const{showCloudWatchMetrics:e}=this.state;return s.createElement("div",{className:"observability-deployments-table-header"},this.renderStageMetaInfoColumns(),e?this.renderCloudWatchMetricsColumns():s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(u.default,{type:"h6",text:""})))}renderStageMetaInfoColumns(){const{showCloudWatchMetrics:e}=this.state;return s.createElement(s.Fragment,null,s.createElement("div",{className:"observability-deployments-table-header-cell-dropdown"},s.createElement(u.default,{type:"h6"})),s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(u.default,{type:"h6",text:"Stage"})),s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(u.default,{type:"h6",text:"Active deployment"})),!e&&s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(u.default,{type:"h6",text:"Created on"})),s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(u.default,{type:"h6",text:"Last updated"})))}renderCloudWatchMetricsColumns(){return s.createElement(s.Fragment,null,s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(m.default,{direction:"row",alignItems:"center",gap:"spacing-xs"},s.createElement(u.default,{type:"h6",text:"Latency"}),s.createElement(h.default,{content:O.CLOUDWATCH_METRICS_INFO.LATENCY,placement:"bottom"},s.createElement(y.default,{className:"observability-deployments-table-header-cell-generic__info"})))),s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(m.default,{direction:"row",alignItems:"center",gap:"spacing-xs"},s.createElement(u.default,{type:"h6",text:"5xx error"}),s.createElement(h.default,{content:O.CLOUDWATCH_METRICS_INFO["5XX_ERROR"],placement:"bottom"},s.createElement(y.default,{className:"observability-deployments-table-header-cell-generic__info"})))),s.createElement("div",{className:"observability-deployments-table-header-cell-generic"},s.createElement(m.default,{direction:"row",alignItems:"center",gap:"spacing-xs"},s.createElement(u.default,{type:"h6",text:"4xx error"}),s.createElement(h.default,{content:O.CLOUDWATCH_METRICS_INFO["4XX_ERROR"],placement:"bottom"},s.createElement(y.default,{className:"observability-deployments-table-header-cell-generic__info"})))))}renderCloudWatchOnboardingBanner(){const e=A().get(this.state,"integration.variables.auth_type");return s.createElement("div",{className:"observability-gateway-banner"},s.createElement(g.default,{status:"info",title:O.CLOUDWATCH_METRICS_BANNER.title,onDismiss:()=>this.setShowCloudWatchOnboardingBanner(!1)},O.CLOUDWATCH_METRICS_BANNER.description,"  "," ",s.createElement(d.default,{type:"plain",text:"Learn more ↗",onClick:()=>{(0,M.openExternalLink)(O.CLOUDWATCH_METRICS_DOCS_LINK[e],"_blank")}})))}setShowCloudWatchOnboardingBanner(e){this.setState({showCloudWatchBanner:e}),pm.settings.getSetting(O.CLOUDWATCH_BANNER_SETTING)||pm.settings.setSetting(O.CLOUDWATCH_BANNER_SETTING,!0)}isDeployEnabled(){const{integration:e}=this.state;return!!(e&&C.default[e.rule]&&A().isFunction(C.default[e.rule].isDeployEnabled))&&C.default[e.rule].isDeployEnabled(e)}getDeploymentClassName(e,t){let n=e+"_short-col";return t?F()(e,n):F()(e)}render(){let{loadingDeployments:e,deployments:t,filteredDeployments:n,availableStages:o,loadingStages:i,errorStage:r,AWSMeta:a,loadingMeta:l,constructedDashboardURL:g,bootstrapDone:b,integration:y,showDeleteModal:C,showCloudWatchMetrics:T,isPopOverOpen:R,errorDeployments:P,errorMeta:M,errorObject:x,isDeploymentStatusAvailable:k,showCloudWatchBanner:F,errorPostmanExports:B,loadingPostmanExports:V,loadingMetrics:G,postmanExports:z,isPostmanSourceAvailable:H}=this.state;return P||M||r||B?s.createElement("div",{className:"observability-deployments-page-container"},F&&this.renderCloudWatchOnboardingBanner(),s.createElement(m.default,{padding:{paddingTop:"spacing-xl"},alignItems:"center",justifyContent:"space-between",wrap:"wrap",className:"observability-gateway-title-wrapper"},s.createElement(u.default,{type:"h4",text:a.Name||a.name||"AWS API Gateway"}),s.createElement(m.default,{padding:{paddingLeft:"spacing-xl"},grow:1,shrink:1,justifyContent:"flex-end",wrap:"wrap"},this.renderDeployAPIButton(),s.createElement("div",{className:"observability-gateway-import-cta"},s.createElement(U.default,{integrationId:A().get(y,"id"),rule:A().get(y,"rule"),apiId:A().get(y,"variables.postman_api_id"),versionId:A().get(y,"executor"),formSource:O.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD})),s.createElement("div",{className:"observability-gateway-dashboard-link"},s.createElement(d.default,{type:"tertiary",icon:s.createElement(v.default,null),text:"View Dashboard",onClick:()=>this.handleViewDashboard(g)})),s.createElement("div",{className:"observability-gateway-refresh-cta"},s.createElement(d.default,{onClick:this.bootstrap,type:"tertiary",icon:s.createElement(I.default,null)})),s.createElement("div",{className:"observability-gateway-more-options"},s.createElement(c.default,{maxWidth:300,isOpen:R,trigger:s.createElement("div",{className:"observability-gateway-more-options-icon-wrapper",ref:this.moreOptionsWrapper,onClick:()=>{this.setState({isPopOverOpen:!R})}},s.createElement(d.default,{onClick:()=>{},type:"tertiary",icon:s.createElement(_.default,null)}))},A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)?this.renderIntegrationOptions(O.EDIT_INTEGRATION.value):s.createElement(h.default,{content:O.PERMISSION_ERROR,placement:"bottom"},this.renderIntegrationOptions(O.EDIT_INTEGRATION.value)),A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)?this.renderIntegrationOptions(O.DELETE_INTEGRATION.value):s.createElement(h.default,{content:O.PERMISSION_ERROR,placement:"bottom"},this.renderIntegrationOptions(O.DELETE_INTEGRATION.value))),s.createElement(w.default,{model:this.props.model,size:"small",isOpen:C,handleCloseModal:this.handleDeleteModalAction,integrationId:y.id,ruleId:y.rule})))),s.createElement("div",{className:"observability-error"},s.createElement(D.default,{error:x}))):s.createElement("div",null,s.createElement("div",{className:"observability-deployments-page-container"},F&&this.renderCloudWatchOnboardingBanner(),b&&s.createElement(m.default,{padding:{paddingTop:"spacing-xl"},alignItems:"center",justifyContent:"space-between",wrap:"wrap",className:"observability-gateway-title-wrapper"},s.createElement(m.default,{alignItems:"baseline",padding:"spacing-s spacing-zero",shrink:1,wrap:"wrap"},s.createElement(u.default,{type:"h4",text:a.Name||a.name||"AWS API Gateway"}),s.createElement(p.default,{color:"content-color-tertiary"},"  ·  "),s.createElement(p.default,null,"AWS Gateway ID: "),s.createElement(f.default,{to:this.constructGatewayURL(),target:"_blank"},s.createElement(p.default,{type:"link-subtle",isExternal:!0},a.ApiId||a.id||"-"))),s.createElement(m.default,{padding:{paddingLeft:"spacing-xl"},grow:1,shrink:1,wrap:"wrap",justifyContent:"flex-end"},this.renderDeployAPIButton(),s.createElement("div",{className:"observability-gateway-import-cta"},s.createElement(U.default,{integrationId:A().get(y,"id"),rule:A().get(y,"rule"),apiId:A().get(y,"variables.postman_api_id"),versionId:A().get(y,"executor"),formSource:O.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD})),s.createElement("div",{className:"observability-gateway-dashboard-link"},s.createElement(d.default,{type:"tertiary",icon:s.createElement(v.default,null),text:"View Dashboard",onClick:()=>this.handleViewDashboard(g)})),s.createElement("div",{className:"observability-gateway-refresh-cta"},s.createElement(d.default,{onClick:this.bootstrap,type:"tertiary",icon:s.createElement(I.default,null)})),s.createElement("div",{className:"observability-gateway-more-options"},s.createElement(c.default,{maxWidth:300,isOpen:R,trigger:s.createElement("div",{className:"observability-gateway-more-options-icon-wrapper",ref:this.moreOptionsWrapper,onClick:()=>{this.setState({isPopOverOpen:!R})}},s.createElement(d.default,{onClick:()=>{},type:"tertiary",icon:s.createElement(_.default,null)}))},A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)?this.renderIntegrationOptions(O.EDIT_INTEGRATION.value):s.createElement(h.default,{content:O.PERMISSION_ERROR,placement:"bottom"},this.renderIntegrationOptions(O.EDIT_INTEGRATION.value)),A().get(this.props,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${N.UPDATE_API_META}.allowed`)?this.renderIntegrationOptions(O.DELETE_INTEGRATION.value):s.createElement(h.default,{content:O.PERMISSION_ERROR,placement:"bottom"},this.renderIntegrationOptions(O.DELETE_INTEGRATION.value))),s.createElement(w.default,{model:this.props.model,size:"small",isOpen:C,handleCloseModal:this.handleDeleteModalAction,integrationId:y.id,ruleId:y.rule})))),e||i||G||l||V?s.createElement(j.default,{className:"observability-loading-indicator"}):s.createElement("div",null,s.createElement("div",null,s.createElement(m.default,{padding:{paddingTop:"spacing-xl"}},s.createElement(u.default,{text:"Stages",type:"h5"})),A().isEmpty(o)?s.createElement("div",{className:"observability-stages-empty-state"},s.createElement(p.default,{color:"content-color-secondary"},"Stages are not available in this gateway.")):s.createElement("div",{className:"observability-deployments-table"},s.createElement("div",{className:"observability-deployments-table-success"},this.renderStageTableHeaders(),s.createElement("div",{className:"observability-deployments-table-row-wrapper"},A().map(o,(e=>s.createElement(S.default,{key:e.DeploymentId||e.id,stageDetails:e,length:o.length,AWSMeta:a,onClick:this.onStageClick,showCloudWatchMetrics:T,integration:y}))))))),this.isDeployEnabled()&&s.createElement("div",{className:"observability-gateway-postman-exports-container"},s.createElement(u.default,{text:"Exports from Postman",type:"h5"}),s.createElement("div",{className:"observability-gateway-postman-exports-container__content"},A().isEmpty(z)?s.createElement("div",{className:"observability-gateway-postman-exports-container__content__empty"},s.createElement(p.default,{color:"content-color-secondary"},"No API definition exported from Postman to AWS.")):s.createElement(L.default,{postmanExports:z,model:this.props.model}))),s.createElement("div",null,s.createElement(m.default,{padding:{paddingTop:"spacing-xxl"}},s.createElement(u.default,{text:"Deployments",type:"h5"})),A().isEmpty(t)?s.createElement("div",{className:"observability-stages-empty-state"},s.createElement(p.default,{color:"content-color-secondary"},"Deployments are not available in this gateway.")):s.createElement("div",null,s.createElement("div",{className:"observability-deployments-table observability-deployments-table-sourced"},s.createElement("div",{className:"observability-deployments-table-success"},s.createElement("div",{className:"observability-deployments-table-header"},s.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-header-cell-id",H)},s.createElement(u.default,{type:"h6",text:"ID"})),s.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-header-cell-description",H)},s.createElement(u.default,{type:"h6",text:"Deployment description"})),s.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-header-cell-date",H)},s.createElement(u.default,{type:"h6",text:"Created on"})),H&&s.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-header-cell-source",H)},s.createElement(u.default,{type:"h6",text:"Deployment source from Postman"}))),s.createElement("div",{className:"observability-deployments-table-row-wrapper"},A().map(n,(e=>s.createElement(E.default,{key:e.DeploymentId||e.id,deploymentDetails:e,length:n.length,isDeploymentStatusAvailable:k,isPostmanSourceAvailable:H,model:this.props.model})))))),t.length>O.DEPLOYMENTS_PER_PAGE&&s.createElement(m.default,{justifyContent:"center",padding:{paddingTop:"spacing-s",paddingBottom:"spacing-xxl"}},s.createElement(d.default,{type:"outline",onClick:this.handleViewMore,minWidth:"228px",text:n.length<t.length?"Show 5 More Deployments":"Show Less"}))))),s.createElement("div",{ref:this.scrollToViewMore})))}})||o},"./integrations/api-observability/components/dashboard/aws-gateway/DeploymentsListItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o,s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("../../node_modules/react/index.js"),l=n("./integrations/utils/CommonHelperMethods.ts"),c=n("./integrations/api-observability/constants.ts"),d=n("./integrations/api-observability/components/PostmanSourceItem.js"),u=n("./node_modules/classnames/index.js"),p=n.n(u),m=n("./node_modules/lodash/lodash.js");let h=(0,r.observer)(o=class extends a.Component{constructor(e){super(e)}getDeploymentClassName(e,t){let n=e+"_short-col";return t?p()(e,n):p()(e)}render(){const{deploymentDetails:e,isDeploymentStatusAvailable:t,isPostmanSourceAvailable:n,model:o}=this.props,{DeploymentId:r,Description:u,CreatedDate:p,DeploymentStatus:h,id:g,description:f,createdDate:b,deploymentStatus:y,schemaSource:v}=e;return a.createElement("div",{className:"observability-deployments-table-row is-closed"},a.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-row-cell-id",n)},r||g,t&&!m.isEmpty(c.DEPLOYMENT_TO_STATUS[h||y])&&a.createElement(s.default,{status:c.DEPLOYMENT_TO_STATUS[h||y],text:h||y||"-"})),a.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-row-cell-description",n)},a.createElement(i.default,{isTruncated:!0},u||f||"-")),a.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-row-cell-date",n)},null===p||null===b?"Just Now":(0,l.formatUtcDate)(p||b)),n&&a.createElement("div",{className:this.getDeploymentClassName("observability-deployments-table-row-cell-source",n)},a.createElement(d.default,{source:v,model:o})))}})||o},"./integrations/api-observability/components/dashboard/aws-gateway/PostmanExportsTable.js":function(e,t,n){"use strict";n.r(t),n.d(t,{PostmanExportsTable:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js"),c=n("./integrations/api-observability/components/PostmanSourceItem.js");class d extends o.Component{constructor(e){super(e),this.columns=[{Header:"",accessor:"space",Cell:e=>o.createElement("div",null),cellWidth:"32px"},{Header:"Source of Export",accessor:"source",Cell:t=>o.createElement(c.default,{source:t.value,model:e.model})},{Header:"Exported at",accessor:"time",Cell:e=>o.createElement(r.default,{color:"content-color-secondary"},e.value)}],this.data=i().map(e.postmanExports,(e=>({source:i().get(e,"data.schemaSource"),time:l.default.format(i().get(e,"createdAt"),!0),space:""})))}render(){return o.createElement(a.default,{className:"observability-gateway-postman-exports-container__content__table",columns:this.columns,data:this.data,bodyMaxHeight:"225px"})}}t.default=d},"./integrations/api-observability/components/dashboard/aws-gateway/StageListItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("../../node_modules/react/index.js"),l=n("./integrations/api-observability/constants.ts"),c=n("./js/external-navigation/ExternalNavigationService.js"),d=n("./integrations/utils/CommonHelperMethods.ts"),u=n("./node_modules/lodash/lodash.js");let p=(0,r.observer)(o=class extends a.Component{constructor(e){super(e),this.state={isInfoPanelOpen:!1,showLogsButton:!1,showCloudWatchMetrics:!0},this.constructInvokeURL=this.constructInvokeURL.bind(this),this.constructLogsURL=this.constructLogsURL.bind(this),this.handleStageOnClick=this.handleStageOnClick.bind(this),this.renderCloudWatchMetricsColumns=this.renderCloudWatchMetricsColumns.bind(this)}componentDidMount(){this.constructInvokeURL(),this.constructLogsURL()}constructLogsURL(){let e,t,{stageDetails:n}=this.props;if(u.get(this.state.integration,"variables.aws_api_type")===l.API_GATEWAY_TYPES.REST){if(!n.accessLogSettings)return void this.setState({showLogsButton:!1});t=u.get(n.accessLogSettings,"destinationArn").split(":")}else{if(!n.AccessLogSettings)return void this.setState({showLogsButton:!1});t=u.get(n.AccessLogSettings,"DestinationArn").split(":")}t=t[t.length-1],e=`https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#logsV2:log-groups/log-group/${t}`,this.setState({constructedLogsURL:e,showLogsButton:!0})}constructInvokeURL(){let e,{AWSMeta:t,stageDetails:n,integration:o}=this.props;e=t.ApiEndpoint?{label:`${t.ApiEndpoint}/${n.label}`,value:`${t.ApiEndpoint}/${n.label}`}:{label:`${u.get(o,"variables.aws_api_gateway_id")}.execute-api.${u.get(o,"variables.aws_region")}.amazonaws.com/${n.label}`,value:`https://${u.get(o,"variables.aws_api_gateway_id")}.execute-api.${u.get(o,"variables.aws_region")}.amazonaws.com/${n.label}`},this.setState({constructedInvokeURL:e})}handleStageOnClick(){const{stageDetails:e,onClick:t,showCloudWatchMetrics:n}=this.props;n&&t(e)}renderCloudWatchMetricsColumns(){const{stageDetails:e}=this.props,{metrics:t}=e;return a.createElement(a.Fragment,null,a.createElement("div",{className:"observability-deployments-table-row-cell-generic"},t&&t.latency?`${u.round(t.latency,2)}ms`:"-"),a.createElement("div",{className:"observability-deployments-table-row-cell-generic"},t&&u.get(t,"errorRate.5XX","-")),a.createElement("div",{className:"observability-deployments-table-row-cell-generic"},t&&u.get(t,"errorRate.4XX","-")))}render(){const{stageDetails:e,showCloudWatchMetrics:t}=this.props,{label:n,value:o,createdDate:r,CreatedDate:l,lastUpdatedDate:p,LastUpdatedDate:m,description:h,Description:g,stageUrl:f}=e,{isInfoPanelOpen:b,constructedLogsURL:y,constructedInvokeURL:v,showLogsButton:I}=this.state;return a.createElement("div",null,a.createElement("div",{className:b?"observability-deployments-table-row":"observability-deployments-table-row is-closed"},a.createElement("div",{className:"observability-deployments-table-row-cell-dropdown",onClick:()=>this.setState({isInfoPanelOpen:!b})},b?a.createElement(i.default,{name:"icon-direction-down-large",color:"content-color-secondary",size:"small"}):a.createElement(i.default,{name:"icon-direction-right-large",color:"content-color-secondary",size:"small"})),a.createElement("div",{className:"observability-deployments-table-row-cell-generic",onClick:this.handleStageOnClick},t?a.createElement(s.default,{type:"link-subtle"},n):n),a.createElement("div",{className:"observability-deployments-table-row-cell-generic"},a.createElement("span",{className:"observability-deployments-id"},u.isEmpty(o)?"-":o)),!t&&a.createElement("div",{className:"observability-deployments-table-row-cell-generic"},null===l||null===r?"Just Now":(0,d.formatUtcDate)(l||r)),a.createElement("div",{className:"observability-deployments-table-row-cell-generic"},null===m||null===p?"Just Now":(0,d.formatUtcDate)(m||p)),t?this.renderCloudWatchMetricsColumns():a.createElement("div",{className:"observability-deployments-table-row-cell-generic observability-deployments-table-row-cell-stage-link"},a.createElement("span",{onClick:()=>(0,c.openExternalLink)(f,"_blank")},a.createElement(s.default,{type:"link-subtle",isExternal:!0},"View stage on AWS")))),b&&a.createElement("div",{className:"observability-stage-dropdown-wrapper"},a.createElement("div",{className:"observability-collapsed-content"},a.createElement("div",{className:"observability-gateway-url"},a.createElement("div",{className:"observability-gateway-url-title"},"Invoke URL: "),a.createElement("span",{className:"observability-gateway-url__link",onClick:()=>(0,c.openExternalLink)(u.get(v,"value",""),"_blank")},u.get(v,"label"))),a.createElement("div",{className:"observability-gateway-description"},g||h||"No description to show"),a.createElement("div",{className:"observability-gateway-logs-wrapper"},I&&a.createElement("div",{className:"observability-gateway-access-logs"},a.createElement("span",{onClick:()=>(0,c.openExternalLink)(y,"_blank")},"View Cloudwatch Logs"))))))}})||o},"./integrations/api-observability/components/dashboard/azure/AzureDashboard.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/api-observability/stores/APIObservabilityStore.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),f=n("./integrations/api-observability/services/index.js"),b=n("./node_modules/lodash/lodash.js"),y=n.n(b),v=n("./integrations/api-observability/components/modals/DeleteIntegrationModal.js"),I=n("./api-dev/constants/Permissions.js"),_=n("./js/services/NavigationService.js"),E=n("./integrations/navigation/constants.js"),S=n("./integrations/components/error-states/ErrorIntegrations.js"),C=n("./integrations/api-observability/components/dashboard/azure/ServicesTable.js"),T=n("./integrations/api-observability/constants.ts"),A=n("./integrations/api-observability/containers/ImportSchema.js");let j=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default),this.state={integration:e.configuredIntegrations[0],showDeleteModal:!1,isEditEnabled:y().get(e,`model.apiPermissionStore.permissions.${this.store.selectedAPI}:${I.UPDATE_API_META}.allowed`,!1)},this.handleEditIntegration=this.handleEditIntegration.bind(this),this.handleDeleteIntegration=this.handleDeleteIntegration.bind(this),this.getContextForExportApi=this.getContextForExportApi.bind(this)}componentDidMount(){this.bootstrap()}bootstrap(){const e=this.props.configuredIntegrations[0];this.setState({integration:e})}getContextForExportApi(){let e=y().get(this.props,"releaseContext"),t={branch:y().get(this.props,"model.featureBranch.branchName",null)};return y().isEmpty(e)||(t={...e}),t}isDeployEnabled(){const{integration:e}=this.state;return!!(e&&f.default[e.rule]&&y().isFunction(f.default[e.rule].isDeployEnabled))&&f.default[e.rule].isDeployEnabled(e)}handleEditIntegration(){_.default.transitionTo(E.V10_API_EDIT_DEPLOYMENT_INTEGRATION_NAV_IDENTIFIER,{apiId:this.props.apiId,integrationId:y().get(this.state.integration,"id")},{tab:T.DEPLOYMENT_TAB,category:T.API_OBSERVABILITY})}handleDeleteIntegration(){this.setState({showDeleteModal:!0})}render(){const{errorServices:e,integration:t,isEditEnabled:n}=this.state;return e?s.createElement("div",{className:"observability-deployments-page-container"},s.createElement("div",{className:"observability-error"},s.createElement(S.default,{error:e}))):s.createElement("div",{className:"observability-azure-dashboard-container"},s.createElement(v.default,{model:this.props.model,size:"small",isOpen:this.state.showDeleteModal,handleCloseModal:()=>this.setState({showDeleteModal:!1}),integrationId:t.id,ruleId:t.rule}),s.createElement("div",{className:"observability-azure-dashboard-container__header"},s.createElement("div",{className:"observability-azure-dashboard-container__header__left-section"},s.createElement("div",{className:"observability-azure-dashboard-container__header__left-section__title"},s.createElement(l.default,{type:"h3",text:"Deployments on Gateway"})),s.createElement("div",{className:"observability-azure-dashboard-container__header__left-section__source"},s.createElement("div",{className:"observability-azure-dashboard-container__header__left-section__source__title"},s.createElement(l.default,{type:"h6",text:"Source:"})),s.createElement("div",{className:"observability-azure-dashboard-container__header__left-section__source__icon"},s.createElement(c.default,{src:"https://static.getpostman.com/assets/azure-apim.svg",size:"xs"})),s.createElement("div",{className:"observability-azure-dashboard-container__header__left-section__source__service-name"},s.createElement(d.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",lineHeight:"line-height-s",fontWeight:"text-weight-regular",fontFamily:"text-family-default"}},"Azure")))),s.createElement("div",{className:"observability-azure-dashboard-container__header__right-section"},s.createElement("div",{className:"observability-azure-dashboard-container__header__right-section__import-button"},s.createElement(A.default,{integrationId:y().get(t,"id"),rule:y().get(t,"rule"),apiId:y().get(t,"variables.postman_api_id"),versionId:y().get(t,"executor"),formSource:T.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD})),s.createElement("div",{className:"observability-azure-dashboard-container__header__right-section__options-container"},s.createElement(u.default,null,s.createElement(p.default,null,s.createElement(m.default,{icon:"icon-action-options-stroke",type:"tertiary"})),s.createElement(h.default,null,s.createElement(g.default,{onClick:this.handleEditIntegration,isDisabled:!n,tooltip:!n&&T.PERMISSION_ERROR},"Edit Integration"),s.createElement(g.default,{type:"destructive",onClick:this.handleDeleteIntegration,isDisabled:!n,tooltip:!n&&T.PERMISSION_ERROR},"Delete Integration")))))),s.createElement("div",{className:"observability-azure-dashboard-container__content"},s.createElement("div",{className:"observability-azure-dashboard-container__content__source"},s.createElement(l.default,{type:"h4",text:"Services on Azure API Management"})),s.createElement("div",{className:"observability-azure-dashboard-container__content__services"},s.createElement(C.default,{integration:t,model:this.props.model,context:this.getContextForExportApi()}))))}})||o},"./integrations/api-observability/components/dashboard/azure/ServicesTable.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ServicesTable:function(){return E}});var o=n("../../node_modules/react/index.js"),s=n("./integrations/navigation/constants.js"),i=n("./integrations/api-observability/services/AzureService.js"),r=n("./js/services/NavigationService.js"),a=n("./integrations/api-observability/components/base/TableEmptyState.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItemGroup.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),b=n("./js/stores/StoreManager.js"),y=n("./js/stores/ActiveWorkspaceSessionStore.js"),v=n("./node_modules/lodash/lodash.js");const I=({value:e})=>o.createElement("div",{className:"azure-custom-cell"},o.createElement(l.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)),_=({value:e,truncatedText:t,publicIPs:n,privateIPs:s})=>{let i=v.map(n||[],(e=>o.createElement(c.default,null,o.createElement(l.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)))),r=v.map(s||[],(e=>o.createElement(c.default,null,o.createElement(l.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e))));return o.createElement("div",{className:"azure-custom-cell"},o.createElement(l.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e+"... "),o.createElement(d.default,null,o.createElement(u.default,null,o.createElement(p.default,{onClick:()=>{},type:"monochrome-plain",text:t,className:"azure-custom-cell__ip-address"})),o.createElement(m.default,{placement:"bottom-end"},n&&o.createElement(h.default,{title:"Public IPs"},i),s&&o.createElement(h.default,{title:"Private IPs"},r))))};class E extends o.Component{constructor(e){super(e),this.state={loadingData:!1,services:{},errorData:!1,subscriptions:{},integration:v.get(e,"integration",{}),data:[],columns:[{Header:"",accessor:"dummy",cellWidth:"28px"},{Header:"Service",accessor:"service",Cell:({value:e})=>o.createElement("div",{className:"azure-custom-cell",onClick:()=>this.handleServiceClick(e)},o.createElement(l.default,{type:"link-subtle"},e.value))},{Header:"Resource Group",accessor:"resourceGroup",Cell:({value:e})=>o.createElement(I,{value:e})},{Header:"Location",accessor:"location",Cell:({value:e})=>o.createElement(I,{value:e})},{Header:"Subscription",accessor:"subscription",Cell:({value:e})=>o.createElement(I,{value:e})},{Header:"VIP",accessor:e=>{let t,n=v.get(e,"privateIPAddresses")||[],s=v.get(e,"publicIPAddresses")||[],i=n.length+s.length,r=s[0]||n[0]||"-";return i>1?(t=i-1+" more",o.createElement(_,{value:r,truncatedText:t,publicIPs:s,privateIPs:n})):o.createElement(I,{value:r})}}]},this.fetchServiceDetails=this.fetchServiceDetails.bind(this),this.fetchSubscriptionDetails=this.fetchSubscriptionDetails.bind(this),this.handleServiceClick=this.handleServiceClick.bind(this),this.bootstrap=this.bootstrap.bind(this)}componentDidMount(){this.setState({integration:this.props.integration}),this.bootstrap()}bootstrap(){let e=v.get(this.state,"integration.variables.linked_apis",[]),t=v.get(this.state,"integration.id");this.setState({loadingData:!0,errorData:!1}),Promise.all([this.fetchServiceDetails(e,t),this.fetchSubscriptionDetails(e,t)]).then((t=>{const n=t[0],o=t[1],s=v.map(e,(e=>({service:{value:e.azure_service_id,id:e.azure_api_path},resourceGroup:e.azure_resource_group_id,location:v.get(n[e.azure_service_path],"location"),subscription:v.get(o[e.azure_subscription_id],"name"),publicIPAddresses:v.get(n[e.azure_service_path],"publicIPAddresses"),privateIPAddresses:v.get(n[e.azure_service_path],"privateIPAddresses")})));this.setState({loadingData:!1,errorData:!1,data:s})})).catch((()=>{this.setState({loadingData:!1,errorData:"Error occurred while fetching services"})}))}fetchServiceDetails(e,t){return i.default.fetchServicesMeta(e,t).then((e=>(this.setState({services:e}),Promise.resolve(e)))).catch((e=>(pm.logger.error("Error occurred while fetching services meta",e),Promise.reject(e))))}fetchSubscriptionDetails(e,t){return i.default.fetchSubscriptionsMeta(e,t).then((e=>(this.setState({subscriptionsMeta:e}),Promise.resolve(e)))).catch((e=>(pm.logger.error("Error occurred while fetching subscriptions meta",e),Promise.reject(e))))}handleServiceClick(e){let{model:t,integration:n,context:o}=this.props,i=v.get(this.state,"servicesMeta"),a=v.get(this.state,"subscriptionsMeta"),l=(0,b.resolveStoreInstance)(y.default).activeEditor;r.default.transitionTo(s.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:v.get(n,"variables.postman_api_id"),integrationId:v.get(n,"id")},{azure_api_path:e.id},{additionalContext:{integration:n,services:i,subscriptions:a,...o},tabOptions:{openIn:l}})}render(){const{loadingData:e,data:t,columns:n,errorData:s}=this.state;return o.createElement(g.default,{className:"observability-azure-services-table",data:t,columns:n,loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px"},blankState:{isEmpty:s&&s.length,component:o.createElement(a.default,{title:s||"Something went wrong",description:"Please try again",secondaryAction:o.createElement(p.default,{type:"outline",text:"Refresh",onClick:this.bootstrap}),illustration:o.createElement(f.default,null)})}})}}t.default=E},"./integrations/api-observability/components/dashboard/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/api-observability/components/dashboard/aws-gateway/AwsDashboard.js"),s=n("./integrations/api-observability/components/dashboard/apigee/ApigeeDashboard.js"),i=n("./integrations/api-observability/components/dashboard/azure/AzureDashboard.js");t.default={api_gateway_aws:o.default,api_gateway_apigee:s.default,api_management_azure:i.default}},"./integrations/api-observability/components/import-schema/APIGatewayAWS.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=n("./integrations/api-observability/constants.ts"),y=n("./integrations/api-observability/services/ApiGatewayService.js"),v=n("./integrations/api-observability/services/GatewayIntegrationsService.js"),I=n("./integrations/api-observability/components/base/ImportSchemaActions.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),E=n("./integrations/api-observability/components/common/ErrorState.js"),S=n("./js/services/NavigationService.js"),C=n("./appsdk/workbench/TabService.js"),T=n("./integrations/navigation/constants.js"),A=n("./api-dev/constants/APISubViews.js"),j=n("./integrations/api-observability/components/common/ImportSchemaBanner.js"),w=n("./integrations/api-observability/services/Helper.js");let O=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={errorStages:!1,loadingStages:!1,stages:[],loadingData:!1,errorData:!1,AWSApiType:i().get(this.props,"integration.variables.aws_api_type")||b.API_GATEWAY_TYPES.HTTP,integration:i().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedStage:null,selectedAPIGateway:null,showImportModal:!1,isImportDisabled:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchStages=this.fetchStages.bind(this),this.fetchSchema=this.fetchSchema.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.handleNoSchema=this.handleNoSchema.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.bootstrap(),this.fetchRequiredPermission()}componentDidUpdate(e){i().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap()}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),w.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchStages(){this.setState({loadingStages:!0,errorStages:!1}),y.default.fetchStages(i().get(this.state,"integration.id")).then((e=>{let t=i().orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),n=i().map(t,(e=>({label:e.StageName||e.stageName,value:e.StageName||e.stageName})));this.setState({stages:n,loadingStages:!1},(()=>{this.handleNoSchema()}))})).catch((e=>{pm.logger.error("Error occurred while fetching stages",e),this.setState({errorStages:!0,loadingStages:!1,isImportDisabled:!1})}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{selectedStage:e,integration:t}=this.state;v.default.performAction(i().get(t,"id"),{stage:i().get(e,"label")},b.AWS_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200!==e.status)throw new Error("Something went wrong while fetching schema");{const t=i().get(e,"body.data.versions.0.schemas.0"),n={content:i().get(t,"schema"),language:i().get(t,"language"),type:i().get(t,"type")};this.setState({schemaContent:n,loadingSchema:!1,errorFetchingSchema:!1})}})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),pm.toasts.error("Error occurred while fetching Definition"),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return _.default.getIntegrationData(e&&e.toString()).then((e=>{const t=i().get(e,"body.data");return 200!==e.status||i().isEmpty(t)?new Error("Something went wrong while fetching integration"):Promise.resolve(t)})).catch((e=>Promise.reject("Something went wrong while fetching integration")))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),w.default.fetchAPIDetails(e),w.default.isSchemaPresent(e,t)]).then((([e,t,n])=>{i().get(t,"isGitIntegrationLinked")&&(n=!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.files"))||!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:n},(()=>{this.fetchStages()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleNoSchema(){const{formSource:e,integrationId:t,apiId:n,versionId:o}=this.props,{stages:s}=this.state;!i().isEmpty(s)?this.setState({isImportDisabled:!1}):i().isEqual(e,b.IMPORT_FORM_SOURCES.INTEGRATION_SETUP)?(pm.toasts.warn("Skipping definition import as no stages found on linked API Gateway",{title:"Import Definition"}),C.default.closeByRoute(T.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:n}),S.default.transitionTo("build.apiVersion",{apiId:n,versionId:o,integrationId:t},{tab:A.DEPLOYMENT})):this.setState({isImportDisabled:!0})}handleStageChange(e){this.setState({selectedStage:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,stages:[],selectedStage:null})}renderTooltip(){const{isImportDisabled:e,loadingPermission:t,hasPermission:n,errorPermission:o}=this.state,s=(e?"No stages found on linked API Gateway":t&&"Fetching required permission")||o&&"Error occurred while fetching required permission. Please try again."||!n&&b.PERMISSION_ERROR||"Import definition from AWS";return r.createElement(l.default,{content:s,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,loadingStages:t,errorStages:n,loadingSchema:o,errorFetchingSchema:s,selectedStage:a,loadingData:l,errorData:c,apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p}=this.state,m={apiId:i().get(e,"variables.postman_api_id"),versionId:i().get(e,"executor"),integrationId:i().get(e,"id"),schemaContent:i().get(this.state,"schemaContent")},h=a&&!o&&!s&&i().isEmpty(i().get(m,"schemaContent.content"));return l||c?r.createElement("div",null):r.createElement(I.default,{payload:m,disabled:!a||o||s||n||t||h,tooltipText:o?"Fetching Definition":h&&"No Definition found on selected stage.",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:o,rule:i().get(e,"rule"),apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{stages:e,loadingStages:t,loadingSchema:n,isSchemaPresent:o,selectedStage:s,loadingData:i,errorData:a,errorFetchingSchema:l}=this.state;return i?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):a?r.createElement(E.default,{errorDetails:a}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(j.default,{isSchemaPresent:o})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:e||[],value:s,isLoading:t,isDisabled:n,isSearchable:!0,onChange:this.handleStageChange,label:"AWS stage"})),l&&r.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(g.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(m.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(m.default,{type:"link-default"},"Retry"))))))}render(){const e=i().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{isImportDisabled:t,loadingPermission:n,hasPermission:o,errorPermission:s}=this.state;return i().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(h.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||n||s||!o,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||o},"./integrations/api-observability/components/import-schema/Azure.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=n("./integrations/api-observability/constants.ts"),y=n("./integrations/api-observability/services/AzureService.js"),v=n("./integrations/api-observability/components/base/ImportSchemaActions.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),_=n("./integrations/api-observability/components/common/ErrorState.js"),E=n("./integrations/api-observability/components/common/ImportSchemaBanner.js"),S=n("./integrations/api-observability/services/Helper.js");let C=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={loadingData:!1,services:[],schemaTypes:b.SCHEMA_TYPES,selectedSchemaType:b.SCHEMA_TYPES[0],errorData:!1,integration:i().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedService:null,showImportModal:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchSchema=this.fetchSchema.bind(this),this.fetchServices=this.fetchServices.bind(this),this.handleServiceChange=this.handleServiceChange.bind(this),this.handleSchemaTypeChange=this.handleSchemaTypeChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.fetchRequiredPermission(),this.bootstrap(),this.setState({selectedService:this.props.selectedService})}componentDidUpdate(e){i().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap(),i().isEqual(i().get(this.props,"selectedService.value.azure_api_path"),i().get(e,"selectedService.value.azure_api_path"))||this.setState({selectedService:this.props.selectedService})}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),S.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchServices(){const{integration:e}=this.state,t=i().get(e,"variables.linked_apis",[]),n=i().map(t,(e=>({label:i().get(e,"azure_service_id"),value:e})));this.setState({services:n},(()=>{i().isArray(n)&&1===n.length&&this.handleServiceChange(n[0])}))}handleSchemaTypeChange(e){this.setState({selectedSchemaType:e},(()=>{this.state.selectedService&&this.fetchSchema()}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{integration:e,selectedSchemaType:t,selectedService:n}=this.state;y.default.fetchSchema(i().get(e,"id"),n.value,t.value).then((e=>{this.setState({schemaContent:e,loadingSchema:!1,errorFetchingSchema:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return I.default.getIntegrationData(e&&e.toString()).then((e=>{const t=i().get(e,"body.data");if(200===e.status&&!i().isEmpty(t))return Promise.resolve(t);throw e})).catch((e=>Promise.reject(e)))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),S.default.fetchAPIDetails(e),S.default.isSchemaPresent(e,t)]).then((([e,t,n])=>{i().get(t,"isGitIntegrationLinked")&&(n=!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.files"))||!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:n},(()=>{this.fetchServices()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleServiceChange(e){e&&this.setState({selectedService:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,services:[],selectedService:null,selectedSchemaType:b.SCHEMA_TYPES[0]})}renderTooltip(){const{loadingPermission:e,hasPermission:t,errorPermission:n}=this.state,o=(e?"Fetching required permission":n&&"Error occurred while fetching required permission. Please try again.")||!t&&b.PERMISSION_ERROR||"Import definition from Azure";return r.createElement(l.default,{content:o,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,errorStages:t,loadingSchema:n,errorFetchingSchema:o,selectedService:s,loadingData:a,errorData:l,selectedSchemaType:c,apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p}=this.state,m={apiId:i().get(e,"variables.postman_api_id"),versionId:i().get(e,"executor"),integrationId:i().get(e,"id"),schemaContent:i().get(this.state,"schemaContent")};return a||l?r.createElement("div",null):r.createElement(v.default,{payload:m,disabled:!s||!c||n||o||t,tooltipText:n&&"Fetching Definition",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:n,rule:i().get(e,"rule"),apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{services:e,loadingSchema:t,schemaTypes:n,selectedSchemaType:o,selectedService:s,loadingData:a,errorData:l,errorFetchingSchema:c,isSchemaPresent:h}=this.state,f=i().isEmpty(this.props.selectedService);return a?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):l?r.createElement(_.default,{errorDetails:l}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(E.default,{isSchemaPresent:h})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:n,value:o,isDisabled:t,isSearchable:!0,isClearable:!1,onChange:this.handleSchemaTypeChange,label:"Definition type"})),f&&r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:e,value:s,isDisabled:t,isSearchable:!0,onChange:this.handleServiceChange,label:"Azure service"})),c&&r.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(g.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(m.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(m.default,{type:"link-default"},"Retry"))))))}render(){const e=i().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{loadingPermission:t,hasPermission:n,errorPermission:o}=this.state;return i().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(h.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.handleServiceChange(this.props.selectedService),this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||!n||o,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||o},"./integrations/api-observability/components/import-schema/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/api-observability/components/import-schema/APIGatewayAWS.js"),s=n("./integrations/api-observability/components/import-schema/Azure.js");t.default={api_gateway_aws:o.default,api_management_azure:s.default}},"./integrations/api-observability/components/import/APIGatewaySelectionPanel.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("./integrations/api-observability/components/import/GatewayServiceCard.js"),l=n("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/common/LaunchDarkly.js");let u=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.renderServices=this.renderServices.bind(this)}renderServices(){const{handleClose:e,workspaceId:t,sourceIdentifier:n,tabId:o,apiId:i,apiVersionId:c,isIntegrationCreationAllowed:u,configuredService:p,isCreateDefinitionFlow:m}=this.props;return(r().keys(l.GATEWAY_SERVICES_LIST)||[]).map((r=>{const{serviceName:h,serviceId:g,classId:f,iconUrl:b,darkIconUrl:y,featureFlag:v}=l.GATEWAY_SERVICES_LIST[r];return!!v&&!d.launchDarkly.getFlag(v,!1)?null:s.createElement(a.default,{key:g,serviceName:h,serviceId:g,classId:f,iconUrl:b,darkIconUrl:y,handleClose:e,workspaceId:t,sourceIdentifier:n,tabId:o,apiId:i,apiVersionId:c,isIntegrationCreationAllowed:u,configuredService:p,isCreateDefinitionFlow:m})}))}render(){return s.createElement("div",{className:"importers-repository-primary-screen"},s.createElement("div",{className:"entity-empty"},s.createElement("div",{className:"entity-empty__connect"},this.renderServices())))}})||o},"./integrations/api-observability/components/import/GatewayServiceCard.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),p=n("./integrations/api-observability/constants.ts"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),h=n("./api-dev/stores/APIEditorUIStore.js"),g=n("./js/controllers/theme/ThemeManager.js"),f=n("../../packages/api-design/api-design-analytics/index.js");let b=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.handleOnClick=this.handleOnClick.bind(this),this.renderCard=this.renderCard.bind(this)}handleOnClick(){const{workspaceId:e,handleClose:t,serviceId:n,classId:o,serviceName:s,sourceIdentifier:i,tabId:r,apiId:a,apiVersionId:m,configuredService:g}=this.props,b=l().get(c.default.getActiveQueryParams().get(),"branch"),y={classId:o,sourceIdentifier:i},v={openIn:r,preview:i===u.CREATE_API_MODAL};if(l().isFunction(t)&&t(),(0,f.logApiDesignAnalytics)({category:l().get(this.props,"isCreateDefinitionFlow",!1)?f.EVENT_CATEGORIES.CREATE_API_DEFINITION:f.EVENT_CATEGORIES.IMPORT,action:f.EVENT_ACTIONS.IMPORT_MODAL_CHOOSE_API_GATEWAY_CLICK,entityId:l().get(this.props,"isCreateDefinitionFlow",!1)?a:void 0,entityType:l().get(this.props,"isCreateDefinitionFlow",!1)?f.EVENT_ENTITY_TYPES.API:void 0}),b&&l().assign(y,{branch:b}),g===n){new h.default(a,m).setActiveScreen(p.DEPLOYMENTS_SCREEN)}else g||c.default.transitionTo(d.GATEWAY_IMPORT_IDENTIFIER,{serviceId:n},y,{additionalContext:{workspaceId:e,serviceName:s,apiId:a,apiVersionId:m},tabOptions:v})}renderCard(e){const{iconUrl:t,darkIconUrl:n,serviceName:o}=this.props,r=g.default.getCurrentTheme();return s.createElement("div",{onClick:()=>e&&this.handleOnClick(),className:e?"gateway-card":"gateway-card__disabled"},s.createElement("div",{className:"gateway-card-logo-wrapper"},s.createElement("div",{className:"gateway-card-logo__gateway"}),s.createElement("img",{src:"dark"===r?n:t})),s.createElement("div",{className:"gateway-card-title"},o),s.createElement("div",{className:"gateway-card-loading-wrapper"},s.createElement(i.default,{name:"icon-action-openWeb-stroke",color:"content-color-primary"})))}render(){const{isIntegrationCreationAllowed:e,sourceIdentifier:t,serviceId:n,configuredService:o}=this.props;let i=!0;return t===u.CREATE_API_MODAL&&(!e||o&&n!==o)&&(i=!1),i?this.renderCard(i):s.createElement(m.default,{content:e?p.INTEGRATION_CONFIGURED_ERROR:p.PERMISSION_ERROR,placement:"bottom"},this.renderCard(i))}})||o},"./integrations/api-observability/components/import/ImportGatewayServiceConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{API_MANAGEMENT_AZURE:function(){return s},AWS_API_GATEWAY:function(){return o},CREATE_API_MODAL:function(){return y},DEFAULT_SERVICE_NAME:function(){return r},DEFINITION:function(){return h},DISABLED_IMPORT_BUTTON_TOOLTIP_TEXT:function(){return d},FILE:function(){return g},GATEWAY_SERVICES_LIST:function(){return i},GENERIC_CREATE_INTEGRATION_ERROR:function(){return u},IMPORT_ANALYTICS_ACTION:function(){return I},IMPORT_ANALYTICS_CATEGORY:function(){return v},SERVICE_CARD_DESCRIPTION:function(){return l},SERVICE_CARD_TITLE:function(){return a},SERVICE_NOT_SUPPORTED:function(){return c},SUCCESS_IMPORT_MESSAGE:function(){return m},SUCCESS_IMPORT_SCHEMA_MESSAGE:function(){return b},SUCCESS_IMPORT_SCHEMA_TITLE:function(){return f},SUCCESS_IMPORT_TITLE:function(){return p}});const o="api_gateway_aws",s="api_management_azure",i={[o]:{serviceId:"api_gateway_aws",classId:"api_gateway_aws",serviceName:"AWS API Gateway",iconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",darkIconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",featureFlag:""},[s]:{serviceId:"api_management_azure",classId:"api_management_azure",serviceName:"Azure API Management",iconUrl:"https://static.getpostman.com/assets/azure-apim.svg",darkIconUrl:"https://static.getpostman.com/assets/azure-apim.svg",featureFlag:"land-646-azure-apim-integration",authType:"oauth2"}},r="API Gateway",a="Import from API Gateway",l="Select an API Gateway to import an API.",c="Postman has encountered an error. If you can't find what you're looking for, contact us at help@postman.com",d="Make sure that you have entered all the mandatory fields.",u="Your API is imported successfully but something went wrong while adding an integration.",p="Imported API successfully",m="Your API is imported in current workspace successfully.",h="Definition",g="file",f="Imported API definition successfully",b="Your API definition has been successfully imported in the current API.",y="build.api.new",v="import",I="import_by_api_gateway"},"./integrations/api-observability/components/modals/DeleteIntegrationModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Modals.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=(n("./js/components/base/LoadingIndicator.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts")),c=(n("./js/services/NavigationService.js"),n("./js/stores/StoreManager.js")),d=n("./integrations/api-observability/stores/APIObservabilityStore.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./integrations/api-observability/constants.ts"),m=n("./api-dev/util/navigationHelper.js"),h=n("./node_modules/lodash/lodash.js");let g=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={isDeleting:!1,apiId:this.props.model.apiId,apiVersionId:this.props.model.id},this.store=(0,c.resolveStoreInstance)(d.default),this.integrationsStore=(0,c.resolveStoreInstance)(u.default),this.handleReset=this.handleReset.bind(this)}handleReset(){let{apiId:e,apiVersionId:t}=this.state,n={apiId:e,apiVersionId:t,category:p.API_OBSERVABILITY};pm.windowEvents.emit(`${p.API_OBSERVABILITY}-integration-deleted`,{apiId:n.apiId,apiVersionId:n.apiVersionId}),(0,m.transitionToAPI)({apiId:e,apiVersionId:t},{view:p.DEPLOYMENTS_VIEW})}render(){const{integrationId:e,ruleId:t}=this.props,{isDeleting:n,apiVersionId:o}=this.state;return i.createElement("div",null,i.createElement(r.Modal,{isOpen:this.props.isOpen,onRequestClose:this.props.handleCloseModal,className:"observability-modal"},i.createElement(r.ModalHeader,null,"Delete Integration"),i.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),i.createElement(r.ModalFooter,null,i.createElement(a.default,{text:"Delete Integration",className:"observability-modal__delete-button",type:"destructive",isDisabled:n,isLoading:n,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),this.props.handleCloseModal(),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.handleReset(),this.store.removeIntegrationInstances(o),h.isFunction(this.props.onSuccessfulDelete)&&this.props.onSuccessfulDelete()):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while deleting your integration"),pm.logger.error("Error occurred while deleting integration",e)}))}}),i.createElement(a.default,{text:"Cancel",className:"observability-modal__cancel-button",isDisabled:n,type:"secondary",onClick:this.props.handleCloseModal}))))}})||o},"./integrations/api-observability/configs/Integrations.js":function(e,t,n){"use strict";n.r(t),t.default={api_management_azure:{name:"Azure API Management",icon_url:"https://static.getpostman.com/assets/azure-apim.svg",dark_icon_url:"https://static.getpostman.com/assets/azure-apim.svg"}}},"./integrations/api-observability/containers/ImportSchema.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o,s=n("../../node_modules/react/index.js"),i=(n("./node_modules/lodash/lodash.js"),n("../../node_modules/mobx-react/dist/mobx-react.module.js")),r=n("./integrations/api-observability/components/import-schema/index.js");function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}let l=(0,i.observer)(o=class extends s.Component{constructor(e){super(e)}render(){const{integrationId:e="",rule:t="",formSource:n,apiId:o,versionId:i}=this.props,l=r.default[t];return l?s.createElement("div",{className:"gateway-import-schema-tab-container"},s.createElement(l,a({},this.props,{formSource:n,integrationId:e,apiId:o,versionId:i}))):s.createElement("div",null,"Rule not found")}})||o},"./integrations/api-observability/containers/ObservabilityContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/api-observability/stores/APIObservabilityStore.js"),p=n("./integrations/api-observability/components/AvailableObservabilityServices.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/MergeConditions.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),y=n("./integrations/api-observability/constants.ts"),v=n("./integrations/utils/CommonHelperMethods.ts"),I=n("./integrations/components/error-states/ErrorIntegrations.js"),_=n("./integrations/api-observability/components/dashboard/index.js");let E=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.apiObservabilityStore=(0,c.resolveStoreInstance)(u.default),this.state={apiId:r().get(this.props.model,"apiId"),apiVersionId:r().get(this.props.model,"id"),selectedApiVersion:this.apiObservabilityStore.selectedAPIVersion,updatingApiVersion:!1,errorObject:{status:500},apiPermissions:r().get(this.props,"model.apiPermissionStore.permissions")},this.observabilityBootstrap=this.observabilityBootstrap.bind(this),this.integrationsStore=(0,c.resolveStoreInstance)(d.default)}componentDidMount(){pm.windowEvents.addListener(`${y.API_OBSERVABILITY}-integration-added`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${y.API_OBSERVABILITY}-integration-edited`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${y.API_OBSERVABILITY}-integration-deleted`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${y.API_OBSERVABILITY}-deploy-triggered`,this.onIntegrationEventCaptured.bind(this)),this.observabilityBootstrap()}observabilityBootstrap(){this.apiObservabilityStore.initializeApiObservabilityStoreV2({apiId:r().get(this.props.model,"apiId"),apiVersionId:r().get(this.props.model,"id")||this.apiObservabilityStore.selectedApiVersion,category:y.API_OBSERVABILITY})}onIntegrationEventCaptured(e){let{apiId:t,apiVersionId:n}=this.state;e.apiId===t&&e.apiVersionId===n&&this.observabilityBootstrap()}render(){let{apiId:e,apiVersionId:t,updatingApiVersion:n}=this.state,o=(0,l.toJS)(this.apiObservabilityStore.configuredIntegrations[r().get(this.props.model,"id")]),i=this.integrationsStore.getIntegrationClasses(),a=this.integrationsStore.loadingIntegrationClasses,c=(0,v.filterIntegrationClassesByClientCategory)(i,y.API_OBSERVABILITY);if(r().get(this.props.model,"id")!==t&&this.setState({apiVersionId:r().get(this.props.model,"id"),updatingApiVersion:!0},(()=>{r().isEmpty(o)&&this.apiObservabilityStore.updateSelectedAPIVersion(r().get(this.props.model,"id")),this.setState({updatingApiVersion:!1})})),a||this.apiObservabilityStore.loadingConfiguredIntegrations[r().get(this.props.model,"id")]||n)return s.createElement(m.default,{className:"observability-loading-indicator"});if(this.apiObservabilityStore.errorConfiguredIntegrations[r().get(this.props.model,"id")])return s.createElement("div",{className:"observability-error"},s.createElement(I.default,null));if(r().isEmpty(o))return s.createElement(h.default,{direction:"column",padding:"spacing-xxl spacing-l spacing-xxxl spacing-l",alignItems:"center",className:"observability-service-details-view-container-wrapper"},s.createElement(h.default,{padding:"spacing-xxl spacing-l spacing-l",alignItems:"center"},s.createElement(g.default,null)),s.createElement(f.default,{type:"h4",text:"Stay on top of your API deployments",hasBottomSpacing:!0}),s.createElement(b.default,{type:"para",className:"monitoring-illustrator-description",hasBottomSpacing:!0},"Connect your API gateway to view deployment status and deploy APIs directly from Postman."),s.createElement("div",{className:"observability-available-integrations"},s.createElement(p.default,{integrationClasses:c,model:this.props.model,promoteTab:this.props.promoteTab})));const d=r().get(o,"0.rule",null),u=d&&_.default[d];return u?s.createElement(u,{model:this.props.model,configuredIntegrations:o,releaseContext:this.props.releaseContext,apiId:e,apiVersionId:t}):s.createElement("div",{className:"observability-error"},s.createElement(I.default,null))}})||o},"./integrations/api-observability/gateway-actions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{FETCH_API_GATEWAY_META:function(){return s},FETCH_AWS_GATEWAY_APIS:function(){return o},FETCH_EXTERNAL_ID:function(){return r},FETCH_STAGES:function(){return i}});const o="fetch-aws-gateway-apis",s="fetch-api-gateway-meta",i="fetch-stages",r="fetch-external-id"},"./integrations/api-observability/services/ApiGatewayService.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n("./integrations/api-observability/services/GatewayIntegrationsService.js")),r=n("./integrations/api-observability/constants.ts"),a=n("./integrations/api-observability/gateway-actions.js");t.default={fetchApiGateways:e=>i.default.performPreConfigAction(s().get(e,"rule"),e,a.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e.body,"data.Items")||s().get(e.body,"data.items"));throw e})).catch((e=>Promise.reject(e))),fetchApiGatewaysUsingIntegrationId:e=>i.default.performAction(e,{},a.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e.body.data,"Items")||s().get(e.body.data,"items"));throw e})).catch((e=>Promise.reject(e))),fetchDeployments:e=>i.default.listDeployments(e).then((e=>{if(e.status&&200===e.status){let t=s().get(e,"body.data.items")||s().get(e,"body.data.Items")||[];return t.sort(((e,t)=>{let n=e.CreatedDate||e.createdDate,o=t.CreatedDate||t.createdDate;return new Date(o)-new Date(n)})),Promise.resolve(t.splice(0,r.AWS_TOTAL_DEPLOYMENTS))}return Promise.reject({statusCode:e.status,...e.body})})).catch((e=>Promise.reject(e))),fetchAPIGatewayMeta:e=>i.default.performAction(e,{},a.FETCH_API_GATEWAY_META).then((e=>e.status&&200===e.status?Promise.resolve(s().get(e.body,"data")):Promise.reject({statusCode:e.status,...e.body}))).catch((e=>Promise.reject(e))),fetchStages:e=>i.default.performAction(e,{},a.FETCH_STAGES).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e.body,"data.Items")||s().get(e.body,"data.item"));throw e})).catch((e=>Promise.reject(e))),fetchCloudWatchAggregateMetrics:(e,t)=>new Promise(((n,o)=>{i.default.performAction(e,{stage:t},r.FETCH_CLOUDWATCH_AGGREGATE_METRICS).then((e=>{n(s().get(e,"body.data"))})).catch((e=>{o(e)}))})),fetchCloudWatchTimeSeriesMetrics:(e,t)=>i.default.performAction(e,t,r.FETCH_CLOUDWATCH_TIMESERIES_METRICS),fetchExternalId:e=>new Promise(((t,n)=>{i.default.performPreConfigAction(s().get(e,"rule"),e,a.FETCH_EXTERNAL_ID).then((e=>{t(s().get(e,"body.data.externalId"))})).catch((e=>{n(e)}))})),deploySchema:(e,t)=>i.default.createDeployment(e,t),fetchPostmanExports:e=>i.default.listDeployments(e,!1,!0).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body.data);throw e})).catch((e=>Promise.reject(e))),isDeployEnabled:(e,t)=>s().get(e,"variables.aws_api_type")===r.API_GATEWAY_TYPES.HTTP,isOverviewEnabled:e=>!0,fetchDeployOptionString:e=>i.default.performAction(e,{},a.FETCH_API_GATEWAY_META).then((e=>{if(e.status&&200===e.status)return Promise.resolve(`Deploy Schema on ${s().get(e,"body.data.Name")||s().get(e,"body.data.name")}`);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/api-observability/services/AzureService.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=n("./integrations/api-observability/services/GatewayIntegrationsService.js"),a=n("./integrations/api-observability/constants.ts"),l=n("./integrations/utils/CommonHelperMethods.ts");t.default={fetchServicesMeta:(e=[],t)=>Promise.all(s().map(e,(e=>{const{azure_resource_group_id:n,azure_subscription_id:o,azure_service_id:s}=e,i={azure_subscription_id:o,azure_resource_group_id:n,azure_service_id:s};return r.default.performAction(t,i,a.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META)}))).then((e=>{const t={};return s().each(e,(e=>{if(200!==e.status)throw e;{const n=s().get(e,"body.data");t[s().get(e,"body.data.id")]={id:s().get(n,"id"),name:s().get(n,"name"),location:s().get(n,"location"),gatewayUrl:s().get(n,"properties.gatewayUrl"),developerPortalUrl:s().get(n,"properties.developerPortalUrl"),publicIPAddresses:s().get(n,"properties.publicIPAddresses"),privateIPAddresses:s().get(n,"properties.privateIPAddresses")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchApiMeta:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:o,azure_service_id:i,azure_api_id:l}=e,c={azure_subscription_id:o,azure_resource_group_id:n,azure_service_id:i,azure_api_id:l};return r.default.performAction(t,c,a.AZURE_GATEWAY_ACTIONS.GET_API_META).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),n={id:s().get(t,"id"),name:s().get(t,"properties.displayName"),version:s().get(t,"properties.apiVersion")};return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchServiceMeta:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:o,azure_service_id:i}=e,l={azure_subscription_id:o,azure_resource_group_id:n,azure_service_id:i};return r.default.performAction(t,l,a.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),n={id:s().get(t,"id"),name:s().get(t,"name"),location:s().get(t,"location"),gatewayUrl:s().get(t,"properties.gatewayUrl"),developerPortalUrl:s().get(t,"properties.developerPortalUrl"),publicIPAddresses:s().get(t,"properties.publicIPAddresses"),privateIPAddresses:s().get(t,"properties.privateIPAddresses")};return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionMeta:(e,t)=>{const{azure_subscription_id:n}=e,o={azure_subscription_id:n};return r.default.performAction(t,o,a.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),n={id:s().get(t,"subscriptionId"),name:s().get(t,"displayName")};return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionsMeta:(e=[],t)=>Promise.all(s().map(e,(e=>{const{azure_subscription_id:n}=e,o={azure_subscription_id:n};return r.default.performAction(t,o,a.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META)}))).then((e=>{const t={};return s().each(e,(e=>{if(200!==e.status)throw e;{const n=s().get(e,"body.data");t[s().get(e,"body.data.subscriptionId")]={id:s().get(n,"subscriptionId"),name:s().get(n,"displayName")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchChangelog:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:o,azure_service_id:i,azure_api_id:c}=e,d={azure_subscription_id:o,azure_resource_group_id:n,azure_service_id:i,azure_api_id:c};return r.default.performAction(t,d,a.AZURE_GATEWAY_ACTIONS.LIST_API_RELEASES).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),n=s().map(t.value,(e=>({createdAt:(0,l.formatUtcDate)(s().get(e,"properties.createdDateTime")),updatedAt:(0,l.formatUtcDate)(s().get(e,"properties.updatedDateTime")),description:s().get(e,"properties.notes")})));return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchExports:(e,t)=>i.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${t}/list`,query:{exportOnly:!0,internal:!0,azure_api_path:s().get(e,"azure_api_path")}}}).then((e=>{if(200==e.status&&s().get(e,"body.data")){const t=s().map(e.body.data,(e=>({createdAt:(0,l.formatUtcDate)(e.createdAt),azure_api_path:s().get(e,"data.azure_api_path"),azure_revision_id:s().get(e,"data.azure_revision_id"),schemaSource:s().get(e,"data.schemaSource")})));return Promise.resolve(t)}throw e})).catch((e=>Promise.reject(e))),fetchRevisions:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:o,azure_service_id:i,azure_api_id:c}=e,d={azure_subscription_id:o,azure_resource_group_id:n,azure_service_id:i,azure_api_id:c};return r.default.performAction(t,d,a.AZURE_GATEWAY_ACTIONS.LIST_API_REVISIONS).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),n=(s().map(t.value,(e=>({azure_revision_id:s().get(e,"apiRevision"),createdAt:(0,l.formatUtcDate)(s().get(e,"createdDateTime")),description:s().get(e,"description"),privateUrl:s().get(e,"privateUrl"),isOnline:{value:s().get(e,"isOnline"),azure_revision_id:s().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be made offline."},isCurrent:{value:s().get(e,"isCurrent"),azure_revision_id:s().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be disabled."}})))||[]).reduce(((e,t)=>t.isCurrent.value?[t,...e]:[...e,t]),[]);return Promise.resolve(n||[])}throw e})).catch((e=>Promise.reject(e)))},toggleOnlineRevision:(e,t,n=!1,o)=>{const{azure_resource_group_id:s,azure_subscription_id:i,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,u={azure_subscription_id:i,azure_resource_group_id:s,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_revision_action_type:"toggle-revision-status",azure_revision_online:n};return r.default.performAction(o,u,a.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},toggleCurrentRevision:(e,t,n,o)=>{const{azure_resource_group_id:s,azure_subscription_id:i,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,u={azure_subscription_id:i,azure_resource_group_id:s,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_release_notes:n,azure_revision_action_type:"make-revision-current"};return r.default.performAction(o,u,a.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},fetchRevisionMapping:(e,t,n)=>{const o=s().map(t,(e=>e.azure_revision_id)),{azure_api_path:i}=e,l={azure_api_path:i,azure_revisions:o,integrationId:n};return r.default.performAction(n,l,a.AZURE_GATEWAY_ACTIONS.GET_REVISION_SOURCE_MAPPING).then((e=>{if(200===e.status)return Promise.resolve(s().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e)))},isDeployEnabled:(e,t)=>t!==a.RELEASE_CONTEXTBAR,deploySchema:(e,t)=>r.default.createDeployment(e,t),fetchSubscriptions:(e,t,n)=>new Promise(((o,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));o(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Subscriptions"),pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),i(e)}))})),fetchSubscriptionsWithIntegrationId:(e,t,n)=>new Promise(((o,i)=>{r.default.performAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));o(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),i(e)}))})),fetchResourceGroups:(e,t,n)=>new Promise(((o,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().map(t,(e=>({label:e.name,value:e.name})));o(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Resource Groups"),pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),i(e)}))})),fetchResourceGroupsWithIntegrationId:(e,t,n)=>new Promise(((o,i)=>{r.default.performAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().map(t,(e=>({label:e.name,value:e.name})));o(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),i(e)}))})),fetchServices:(e,t,n)=>new Promise(((o,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().map(t,(e=>({label:e.name,value:e.name,path:e.id})));o(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Services"),pm.logger.error("Something went wrong while fetching Azure Services",e),i(e)}))})),fetchServicesWithIntegrationId:(e,t,n)=>new Promise(((o,i)=>{r.default.performAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().map(t,(e=>({label:e.name,value:e.name,path:e.id})));o(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Services",e),i(e)}))})),fetchApis:(e,t,n)=>new Promise(((o,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().filter(t,(e=>!s().get(e,"properties.type")||"http"===s().get(e,"properties.type"))),i=s().map(n,(e=>({label:e.name,value:e.name,path:e.id})));o(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure APIs"),pm.logger.error("Something went wrong while fetching Azure APIs",e),i(e)}))})),fetchApisWithIntegrationId:(e,t,n)=>new Promise(((o,i)=>{r.default.performAction(e,t,n).then((e=>{let t=s().get(e,"body.data.value",[]),n=s().filter(t,(e=>!s().get(e,"properties.type")||"http"===s().get(e,"properties.type"))),i=s().map(n,(e=>({label:e.name,value:e.name,path:e.id})));o(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure APIs",e),i(e)}))})),fetchSchema:(e,t,n)=>{const{azure_resource_group_id:o,azure_subscription_id:i,azure_service_id:l,azure_api_id:c}=t,d={azure_subscription_id:i,azure_resource_group_id:o,azure_service_id:l,azure_api_id:c,azure_export_format:n};return r.default.performAction(e,d,a.AZURE_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200===e.status){const t=s().get(e,"body.data.versions.0.schemas.0"),n={content:s().get(t,"schema",""),language:s().get(t,"language"),type:s().get(t,"type")};return Promise.resolve(n)}throw new Error("Something went wrong while fetching schema")})).catch((e=>Promise.reject(e)))}}},"./integrations/api-observability/services/GatewayIntegrationsService.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");t.default={createDeployment:(e,t)=>o.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/deploy`,body:t}}),listDeployments:(e,t=!1,n=!1)=>{const s={};return t&&(s.exportOnly=!0,s.internal=!0),n&&(s.internal=!0),o.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${e}/list`,query:{...s}}})},performAction:(e,t,n)=>o.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/actions/${n}`,body:t}}),performPreConfigAction:(e,t,n)=>o.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/actions/${n}`,body:{...t,classId:e}}})}},"./integrations/api-observability/services/Helper.js":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/api-observability/services/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),i=n("./integrations/api-observability/constants.ts"),r=n("./js/modules/services/AnalyticsService.js"),a=n("./node_modules/async/dist/async.js"),l=n.n(a),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./js/stores/CurrentUserStore.js"),p=n("./onboarding/src/common/LaunchDarkly.js"),m=n("./api-dev/constants/Permissions.js"),h=n("./api-dev/services/APIPermissionService.js"),g=n("./api-dev/interfaces/APIInterface.js"),f=n("./api-dev/services/APIDevService.js"),b=n("./node_modules/lodash/lodash.js");t.default={shouldRenderDeploy:(e,t)=>!!(e&&e.rule&&o.default[e.rule]&&b.isFunction(o.default[e.rule].isDeployEnabled))&&o.default[e.rule].isDeployEnabled(e,t),getDeployOptionContext:(e,t)=>{if(!e)return t("API version missing");l().waterfall([function(t){return s.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,[i.API_OBSERVABILITY]).then((e=>e[i.API_OBSERVABILITY].length>0?t(null,e[i.API_OBSERVABILITY][0]):t(null,null))).catch((e=>t(e)))},function(e,t){return e&&e.rule?o.default[e.rule]&&b.isFunction(o.default[e.rule].fetchDeployOptionString)?o.default[e.rule].fetchDeployOptionString(e.id).then((n=>t(null,{integration:e,deployString:n}))).catch((n=>t(null,{integration:e,deployString:"Deploy Schema"}))):t(null,{integration:e,deployString:"Deploy Schema"}):t(null,{integration:null,deployString:"Deploy Schema"})}],((e,n)=>(e&&(pm.logger.error("Error occurred while fetching configured integration",e),pm.toasts.error("Error occurred while fetching configured integration")),t(e,n))))},shouldRenderGatewayIntegration:e=>{const t=(0,c.resolveStoreInstance)(u.default).isLoggedIn||!1,n=b.get(e,"apiPermissionStore.canViewAPIIntegrations",!1),o=p.launchDarkly.getFlag("api-deployments-tab-enabled",!1);return!!(t&&n&&o)},truncate:e=>e.length>35?e.substring(0,35)+"...":e,addDeployClickAnalytics:(e,t)=>{e&&e.rule&&r.default.addEventV2({category:"gateway-integration",action:t,label:e.rule,value:1})},hasEditPermissionOnAPI:e=>e?(0,c.resolveStoreInstance)(d.default).onSyncAvailable({timeout:8e3}).then((()=>{const t=(0,c.resolveStoreInstance)(u.default).id,n=[m.UPDATE_API_META],o=h.default.getAPIPermissionQueryObject(n,[{id:e}],t);return h.default.fetchPermissions(o).then((t=>Promise.resolve(b.get(t,`${e}:UPDATE_API_META.allowed`)))).catch((e=>{throw e}))})).catch((e=>Promise.reject(e))):Promise.reject("API id is required to fetch permissions"),fetchAPIDetails:async e=>{if(!e)return{};try{let t=await(0,g.getAPI)(e),n=await(0,g.isAPIGitLinked)(e),o={apiDetails:t,isGitIntegrationLinked:n,apiDefinition:{}};if(n){const t=await(0,g.getAPILinkedEntityModel)(e,{name:"branch"},"apiDefinition","");return o=b.merge({},o,{apiDefinition:t}),o}return o}catch(e){return Promise.reject(e)}},isSchemaPresent:(e,t)=>f.default.getRelations(e,t).then((e=>{const t=b.get(e,"apiDefinition")&&b.get(b.keys(e.apiDefinition),0),n=b.get(e,"schema")&&b.get(b.keys(e.schema),0);return!b.isEmpty(t)||!b.isEmpty(n)})).catch((e=>Promise.reject(e))),addAzureServicesAnalytics:e=>{const t=b.get(e,"rule",""),n=b.get(e,"variables.linked_apis",[]),o=b.size(n)||0;r.default.addEventV2({category:i.GATEWAY_INTEGRATION_ANALYTICS_EVENT_CATEGORY,action:i.AZURE_APIM.SERVICE_ANALYTICS_ACTION,label:t,value:o})}}},"./integrations/api-observability/services/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/api-observability/services/ApiGatewayService.js"),s=n("./integrations/api-observability/services/AzureService.js");t.default={api_gateway_aws:o.default,api_management_azure:s.default}},"./integrations/api-observability/stores/APIObservabilityStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var o,s,i,r,a,l,c,d,u,p,m,h,g,f,b,y,v,I,_,E,S,C,T,A=n("../../node_modules/mobx/lib/mobx.module.js"),j=n("./node_modules/lodash/lodash.js"),w=n.n(j),O=n("./js/stores/StoreManager.js"),N=n("./js/stores/SyncStatusStore.js"),R=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),P=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),D=n("./integrations/api-observability/stores/fallbackCategoryIntegrations.js"),M=n("./integrations/api-observability/configs/Integrations.js"),x=n("./js/stores/IntegrationsStore.js"),L=n("./integrations/api-observability/constants.ts");function k(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function F(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let B=(s=F((o=class{constructor(){k(this,"isHydrating",s,this),k(this,"availableIntegrations",i,this),k(this,"configuredIntegrations",r,this),k(this,"categoryIntegrations",a,this),k(this,"builds",l,this),k(this,"activeRule",c,this),k(this,"activeService",d,this),k(this,"errorAvailableIntegrations",u,this),k(this,"errorConfiguredIntegrations",p,this),k(this,"loadingAvailableIntegrations",m,this),k(this,"loadingConfiguredIntegrations",h,this),k(this,"selectedAPI",g,this),k(this,"selectedAPIVersion",f,this),k(this,"selectedService",b,this),k(this,"selectedServiceName",y,this),k(this,"selectedIntegration",v,this),k(this,"selectedRule",I,this),k(this,"category",_,this),k(this,"isAdding",E,this),k(this,"integrationInstance",S,this),k(this,"integrationClass",C,this),k(this,"loadingIntegrationInstanceAndClass",T,this),this.integrationsStore=(0,O.resolveStoreInstance)(x.default)}initializeApiObservabilityStore(e){(0,O.resolveStoreInstance)(N.default).onSyncAvailable({timeout:L.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:o}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(o),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(n,L.categoryToEntityType[o],[L.categoryToClientCategory[o]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiObservabilityStoreV2(e){(0,O.resolveStoreInstance)(N.default).onSyncAvailable({timeout:L.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:o}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(o),this.fetchConfiguredIntegrations(n,L.categoryToEntityType[o],[L.categoryToClientCategory[o]])})).catch((e=>{pm.logger.error("APIObservabilityStore~InitializeApiObservabilityStoreV2~Error while initialising API Observability Store: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setActiveCategory(e){this.category=e}setSelectedIntegration(e){this.selectedIntegration[this.category]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,L.categoryToEntityType[this.category],[L.categoryToClientCategory[this.category]])}getAvailableIntegrations(){return(0,A.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.category]}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){w().isEmpty(e)?this.categoryIntegrations=[...D.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,A.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,A.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=L.categoryToClientCategory[this.category];w().forEach((0,A.toJS)(this.availableIntegrations),(n=>{const o={},s=n.integrations[n.id];w().forEach(s,((e,n)=>{e.client_categories.includes(t)&&(o[n]=e)})),w().isEmpty(o)||(n.integrations[n.id]={...o},e.push(n))})),this.updateCategoryIntegrations(w().map(e,(e=>e.id&&!w().isEmpty(M.default[e.id])?{...e,...M.default[e.id]}:e)))}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),R.default.getAvailableIntegrations().then((e=>{const t=w().get(e,"body.services",[]);if(200!==e.status||w().isEmpty(t))throw e;this.updateAvailableIntegrations(w().map(t,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t,n){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),R.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,n).then((e=>{this.updateConfiguredIntegrations(e[n[0]]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await P.default.getConfiguredIntegrationsForAnEntity(e,t,[L.API_OBSERVABILITY]);let o=w().get(n,"body.data",[]),s=w().map(o,"class"),i=[];if(!w().isEmpty(s)){const e=this.integrationsStore.getIntegrationClasses(),t=s[0];i=w().find(e,(e=>e.id===t))}this.updateIntegrationClass([i],t),this.updateIntegrationInstance(o,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIObservabilityStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=F(o.prototype,"availableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=F(o.prototype,"configuredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=F(o.prototype,"categoryIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.fallbackCategoryIntegrations}}),l=F(o.prototype,"builds",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=F(o.prototype,"activeRule",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=F(o.prototype,"activeService",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=F(o.prototype,"errorAvailableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=F(o.prototype,"errorConfiguredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=F(o.prototype,"loadingAvailableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=F(o.prototype,"loadingConfiguredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=F(o.prototype,"selectedAPI",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=F(o.prototype,"selectedAPIVersion",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=F(o.prototype,"selectedService",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=F(o.prototype,"selectedServiceName",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=F(o.prototype,"selectedIntegration",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),I=F(o.prototype,"selectedRule",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=F(o.prototype,"category",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=F(o.prototype,"isAdding",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=F(o.prototype,"integrationInstance",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=F(o.prototype,"integrationClass",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T=F(o.prototype,"loadingIntegrationInstanceAndClass",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F(o.prototype,"initializeApiObservabilityStore",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"initializeApiObservabilityStore"),o.prototype),F(o.prototype,"clearStore",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"clearStore"),o.prototype),F(o.prototype,"setActiveCategory",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveCategory"),o.prototype),F(o.prototype,"setSelectedIntegration",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedIntegration"),o.prototype),F(o.prototype,"setActiveService",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveService"),o.prototype),F(o.prototype,"setSelectedServiceName",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedServiceName"),o.prototype),F(o.prototype,"setActiveRule",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveRule"),o.prototype),F(o.prototype,"setSelectedAPI",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedAPI"),o.prototype),F(o.prototype,"setSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedAPIVersion"),o.prototype),F(o.prototype,"setSelectedRule",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedRule"),o.prototype),F(o.prototype,"setSelectedService",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedService"),o.prototype),F(o.prototype,"updateLoadingAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateLoadingAvailableIntegrations"),o.prototype),F(o.prototype,"updateLoadingConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateLoadingConfiguredIntegrations"),o.prototype),F(o.prototype,"updateErrorAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateErrorAvailableIntegrations"),o.prototype),F(o.prototype,"updateErrorConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateErrorConfiguredIntegrations"),o.prototype),F(o.prototype,"updateAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateAvailableIntegrations"),o.prototype),F(o.prototype,"updateSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateSelectedAPIVersion"),o.prototype),F(o.prototype,"getAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"getAvailableIntegrations"),o.prototype),F(o.prototype,"getSelectedIntegration",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"getSelectedIntegration"),o.prototype),F(o.prototype,"getSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"getSelectedAPIVersion"),o.prototype),F(o.prototype,"updateConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateConfiguredIntegrations"),o.prototype),F(o.prototype,"updateCategoryIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateCategoryIntegrations"),o.prototype),F(o.prototype,"getConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"getConfiguredIntegrations"),o.prototype),F(o.prototype,"getCategoryIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"getCategoryIntegrations"),o.prototype),F(o.prototype,"updateIsHydrating",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIsHydrating"),o.prototype),F(o.prototype,"updateIsAdding",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIsAdding"),o.prototype),F(o.prototype,"findIntegrationsByCategory",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"findIntegrationsByCategory"),o.prototype),F(o.prototype,"fetchAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchAvailableIntegrations"),o.prototype),F(o.prototype,"fetchConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchConfiguredIntegrations"),o.prototype),F(o.prototype,"fetchIntegrationInstance",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchIntegrationInstance"),o.prototype),F(o.prototype,"setLoadingIntegrationInstancesAndClass",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingIntegrationInstancesAndClass"),o.prototype),F(o.prototype,"updateIntegrationInstance",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationInstance"),o.prototype),F(o.prototype,"updateIntegrationClass",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationClass"),o.prototype),F(o.prototype,"resetPowerUpVariables",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"resetPowerUpVariables"),o.prototype),F(o.prototype,"removeIntegrationInstances",[A.action],Object.getOwnPropertyDescriptor(o.prototype,"removeIntegrationInstances"),o.prototype),o)},"./integrations/api-observability/stores/fallbackCategoryIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fallbackCategoryIntegrations:function(){return o}});const o=[{id:"api_gateway_aws",categories:["Deployment"],name:"AWS API Gateway",icon:"pm-icon-aws-api-gateway",icon_url:"https://static.getpostman.com/assets/aws_api_gateway.png",dark_icon_url:null,description:"Stay on top of your API Deployments",extended_description:"Observe deployments inside Postman",integrations:{api_gateway_aws:{api_gateway_aws:{name:"Observe API deployments",description:"Connect to AWS API Gateway to view deployments from across all stages, logs and metrics inside Postman",categories:["Deployment"],summary:"",client_categories:["api-gateway-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./integrations/ci-cd/buildUtils.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),p=n("./integrations/ci-cd/timeUtils.js"),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("./appsdk/components/link/Link.js"),g=n("./integrations/ci-cd/services/index.ts"),f=n("./integrations/ci-cd/components/CIStatusBadge.js"),b=n("./integrations/ci-cd/constants.ts"),y=n("./js/utils/PluralizeHelper.js"),v=n("./runtime-repl/runner/_api/RunnerInterface.js"),I=n("./js/modules/services/AnalyticsService.js"),_=n("./js/stores/StoreManager.js"),E=n("./js/stores/CurrentUserStore.js"),S=n("./integrations/ci-cd/helpers.js"),C=n("./runtime-repl/runner/workbench/common.js"),T=n("./node_modules/lodash/lodash.js");const A="Cancel",j=(0,m.default)(h.default)`
  display: flex;
  align-items: center;
  min-width: 0px;
`,w=(0,m.default)(s.default)`
    margin-left: 0px;
    text-transform: capitalize;
  `,O=(e,t)=>{const[n,s]=(0,o.useState)(A),[l,c]=(0,o.useState)(!1),{addToast:d}=(0,i.default)(),u=T.get(e,"outcome"),p=T.get(t,"rule"),m=T.includes(T.get(b.CANCELLABLE_OUTCOMES,p),u)&&T.isFunction(T.get(g.default,[p,"cancelBuild"]));return o.createElement(r.default,{direction:"row",gap:"spacing-s"},o.createElement(f.default,{status:u}),m&&o.createElement(a.default,{type:"monochrome-plain",text:n,isDisabled:l,onClick:()=>{s("Cancelling"),c(!0),((e,t,n)=>{const o=T.get(g.default,[e,"cancelBuild"]);return new Promise(((e,s)=>{T.isFunction(o)?o(t,n).then((t=>{e(t)})).catch((e=>{s(e)})):e(!1)}))})(t.rule,t.id,e).then((e=>{let t,n;e?(n={title:"Build Cancelled",status:"success",description:"Build successfully cancelled."},t="Cancelled"):(n={title:"Error",status:"error",description:"Something went wrong while cancelling the build! Please refresh the page"},c(!1),t=A),d(n),s(t)})).catch((e=>{pm.logger.error("CIBuild ~ cancelRunningBuild : Error occurred while cancelling builds",e),d({title:"Error",status:"error",description:"Something went wrong while cancelling the build! Please refresh the page"}),c(!1),s(A)}))}}))};t.default={getTableColumns:function(e,t){let n=t?[{Header:"",accessor:"empty",Cell:e=>o.createElement(o.Fragment,null),disableSortBy:!0,cellWidth:"32px"}]:[];return n=T.concat(n,[{Header:"Name",accessor:e=>({buildName:T.get(e,"build_num"),buildUrl:T.get(e,"build_url"),rowData:e}),Cell:({value:t})=>{const{buildName:n,buildUrl:s,rowData:i}=t;return o.createElement("div",{id:(0,S.getRowIdForBuildsTable)(i)},o.createElement(r.default,{direction:"row",alignItems:"center"},o.createElement(c.default,{color:"content-color-primary"}),o.createElement(j,{to:s,target:"_blank",onClick:()=>{var t;const n=(0,_.resolveStoreInstance)(E.default);I.default.addEventV2({action:"open-build-url",entityId:null==e||null===(t=e.variables)||void 0===t?void 0:t.api_id,entityType:"api",integrationId:null==e?void 0:e.id,rule:null==e?void 0:e.rule,userId:n.id,teamId:n.teamId,category:"postman-cli-api-builder"})}},o.createElement(l.default,{type:"link-subtle",isExternal:!0,isTruncated:!0,className:"build-row-text-with-icon"},n))))}},{Header:"Branch",accessor:"branch",Cell:e=>o.createElement(l.default,{isTruncated:!0},e.value)},{Header:"Timestamp",accessor:"start_time",Cell:e=>`${p.default.timeSince(e.value)}`},{Header:"Duration",accessor:"duration",cellWidth:"15%",Cell:e=>`${p.default.getFormattedDuration(e.value)}`},{Header:"Status",accessor:e=>e,cellWidth:"25%",Cell:({value:t})=>O(t,e)}]),n},getBuildStepsExpandColumns:function(e){return[{Header:"",accessor:"empty",Cell:e=>o.createElement(o.Fragment,null),disableSortBy:!0,cellWidth:"24px"},{Header:"Name",accessor:"name",Cell:e=>o.createElement(l.default,null,e.value),disableSortBy:!0,cellWidth:"30%"},{Header:"Duration",accessor:"duration",Cell:e=>`${p.default.getFormattedDuration(e.value)}`,disableSortBy:!0,cellWidth:"30%"},{Header:"Status",accessor:"status",Cell:e=>o.createElement(f.default,{status:T.get(e,"value")}),disableSortBy:!0},{Header:"",id:"a4042383-8033-4aad-a904-9e84c5cf7724",accessor:"empty",Cell:e=>o.createElement(l.default,null,e.value),disableSortBy:!0}]},getCollectionRunsExpandColumns:function(e){return[{id:"Collection Name",accessor:"name",Cell:e=>o.createElement(r.default,{direction:"row"},o.createElement(d.default,{color:"content-color-primary"}),o.createElement(l.default,{isTruncated:!0,className:"build-row-text-with-icon"},e.value)),disableSortBy:!0},{id:"Status",accessor:e=>{var t;const{status:n,internalLink:o,metrics:s}=e;return[n,o,null==s||null===(t=s.find((e=>"Assertions"===(null==e?void 0:e.name))))||void 0===t?void 0:t.status]},Cell:e=>{const[t,n,i]=e.value,r=(0,m.default)(s.default)`
              margin-left: 0px;
            `,{failedCount:a,totalCount:c}=i||{},d=0!==a?`${a}/${c} failed`:`${c}/${c} passed`,u=(0,C.getAPIParentMetaFromUrl)();return o.createElement("div",null,o.createElement(r,{status:t.status,text:d}),o.createElement("span",{onClick:()=>{(0,v.openRunInTab)(n.split("/").pop(),{preview:!1,activeTestTab:"all"},u)}},o.createElement(h.default,null,o.createElement(l.default,{type:"link-default"},"View Report"))))},disableSortBy:!0,cellWidth:"200px"}]},getSpecificCollectionRunDetailsColumns:function(){return[{Header:"",accessor:"empty",Cell:e=>o.createElement(o.Fragment,null),disableSortBy:!0,cellWidth:"32px"},{Header:"",accessor:"name",Cell:e=>o.createElement(l.default,{isTruncated:!0},e.value),disableSortBy:!0,cellWidth:"60%"},{Header:"",accessor:"status",Cell:e=>{let{failedCount:t,totalCount:n,failedRequests:i}=T.get(e,"value",{}),a=0!==t?"critical":"success",c=0!==t?`${t}/${n} failed`:`${n}/${n} passed`;return 0===n?o.createElement(s.default,{text:"N/A",status:"neutral"}):T.isEmpty(i)?o.createElement(s.default,{text:c,status:a}):o.createElement(r.default,{direction:"column"},o.createElement(s.default,{text:c,status:a}),T.map(i,(e=>o.createElement(h.default,{to:e.link,target:"_blank"},o.createElement(l.default,{type:"link-default",isTruncated:!0,isExternal:!0},e.link)))))},disableSortBy:!0},{Header:"",accessor:"empty3",Cell:e=>o.createElement(o.Fragment,null),disableSortBy:!0}]},getSchemaColumns:function(e){return[{Header:"Schema Name",accessor:"empty",Cell:t=>o.createElement(r.default,{direction:"row"},o.createElement(u.default,{color:"content-color-primary"}),o.createElement(l.default,{isTruncated:!0,className:"build-row-text-with-icon"},e)),disableSortBy:!0},{Header:"Status",accessor:e=>{const{warnings:t}=e;return[t]},cellWidth:"200px",Cell:e=>{const[t]=e.value,n=T.size(t),s=y.default.pluralize({count:n,singular:"Rule violation",plural:"Rule violations"});return o.createElement("div",null,n>0?o.createElement(w,{status:"warning",text:`${n} ${s}`}):o.createElement(w,{status:"success",text:"No rule violation"}))},disableSortBy:!0}]},getSpecificSchemaWarningDetailsColumns:function(){return[{Header:"",accessor:"empty",Cell:e=>o.createElement(o.Fragment,null),disableSortBy:!0,cellWidth:"24px"},{Header:"Warning Message",accessor:"message",Cell:e=>o.createElement(l.default,{isTruncated:!0,className:"build-row-text-with-icon"},e.value),disableSortBy:!0},{Header:"Type",accessor:"type",Cell:e=>o.createElement(l.default,{isTruncated:!0},T.capitalize(e.value)),cellWidth:"40%",disableSortBy:!0},{Header:"Learn more",accessor:"possibleFixUrl",Cell:e=>{if(!e.value)return null;const t=(0,m.default)(l.default)`
            padding-left: var(--spacing-s);
          `;return o.createElement(h.default,{to:e.value,target:"_blank"},o.createElement(t,{type:"link-default",isExternal:!0,isTruncated:!0},"Learn more"))},disableSortBy:!0,cellWidth:"200px"}]}}},"./integrations/ci-cd/components/AvailableCIServices.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o=n("../../node_modules/react/index.js"),s=n("./js/services/NavigationService.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("./js/modules/services/AnalyticsService.js"),l=n("./integrations/ci-cd/helpers.js"),c=n("./integrations/api-observability/constants.ts"),d=n("./node_modules/prop-types/index.js"),u=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),p=n("./js/stores/StoreManager.js"),m=n("./api-dev/stores/APIListStore.js"),h=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),g=(n("./appsdk/components/link/Link.js"),n("./integrations/services/OneClickIntegrationCreateService.js")),f=n("./integrations/navigation/constants.js"),b=n("./integrations/utils/CommonHelperMethods.ts"),y=n("./js/stores/ActiveWorkspaceSessionStore.js"),v=n("./node_modules/lodash/lodash.js");const I=(0,u.default)(i.default)`
  row-gap: var(--spacing-m);
`;function _(e,t,n,o=!1){const i={originalTabId:(0,p.resolveStoreInstance)(y.default).activeEditor};if(!o)return void s.default.transitionTo(f.V10_API_ADD_CI_INTEGRATION_NAV_IDENTIFIER,e,t,{additionalContext:i});const{model:r,ruleId:a,serviceId:l,serviceName:c,defaultIntegrationName:d,setDisableIntegrationCreateButton:u}=n,m=v.get(r,"apiId"),b=v.get(r,"id");return u(!0),g.default.createFromApi(m,b,a,d).then((({body:e})=>{const t=v.get(e,"data.id");return pm.toasts.success("Your API is connected to "+c),(0,p.resolveStoreInstance)(h.default).fetchIntegrationInstance("apiversion",b),s.default.transitionTo(f.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:m,integrationId:t})})).catch((n=>{if(pm.logger.error("Error occurred while one-click-creating integration",n),!n.message)return pm.toasts.error("Something went wrong when trying to create the integration with the saved auth. Please create the integration using the form instead."),s.default.transitionTo(f.V10_API_ADD_CI_INTEGRATION_NAV_IDENTIFIER,e,t,{additionalContext:i});pm.toasts.error(n.message)}))}function E(e){const{model:t,promoteTab:n,integrationClasses:s,oneClickFlow:i=!1}=e,[d,u]=(0,o.useState)({addIntegrationRouteParams:{},addIntegrationQueryParams:{}}),[h,g]=(0,o.useState)(!1),{addIntegrationRouteParams:f,addIntegrationQueryParams:y}=d,E=v.get(t,`apiPermissionStore.permissions.${t.apiId}:UPDATE_API_META.allowed`);return(0,o.useEffect)((()=>{const e=v.get(t,"apiId"),n={apiId:e,versionId:v.get(t,"id")};(0,b.getSanitizedRouteAndQueryParamsForV10APIUrls)(n,{},e).then((([e,t])=>{u({addIntegrationRouteParams:e,addIntegrationQueryParams:t})}))}),[]),o.createElement(I,{wrap:"wrap",alignItems:"center",justifyContent:"flex-start",gap:"spacing-m"},v.map(s,(e=>{const s=v.get(e,"services.0",{}),d=s.id,u=v.get(e,"id"),b=v.get(e,"displayName"),I=v.get(e,"instanceCreation"),S=v.get(I,"enabled",!1)&&E,C=S?"":E?v.get(I,"description"):c.PERMISSION_ERROR,T=function(e,t){const n=v.get(t,"apiId"),o=(0,p.resolveStoreInstance)(m.default)&&(0,p.resolveStoreInstance)(m.default).find(n),s=v.get(o,"name");return s?`${e}-${s}`:null}(b,t),A=v.assign({rule:u,service:d,defaultIntegrationName:T},y),j={model:t,ruleId:u,serviceName:s.name,serviceId:d,defaultIntegrationName:T,setDisableIntegrationCreateButton:g};return o.createElement(r.default,{key:u,"data-testid":"integrations-configure-ci-integartion-button",type:"outline",icon:(0,l.getIconForCIIntegration)(u),tooltip:C,text:b,isDisabled:!S||h,onClick:e=>{if(i)return e.preventDefault(),void _(f,A,j,i);e.metaKey||e.ctrlKey||(e.preventDefault(),v.isFunction(n)&&n(),a.default.addEventV2({category:"ci_integrations",action:"card-click"+(i?"-shared-auth":""),label:"api_builder_initiated",type:u,value:1}),_(f,A,j))}})})))}E.propTypes={model:d.PropTypes.object.isRequired,promoteTab:d.PropTypes.func.isRequired,integrationClasses:d.PropTypes.object.isRequired}},"./integrations/ci-cd/components/BuildsTable.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),s=n("../../node_modules/react/index.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("./integrations/ci-cd/components/CIEmptyTableView.js"),l=n("./integrations/ci-cd/buildUtils.js"),c=n("./integrations/ci-cd/components/ExpandedBuildRow.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),p=n("./integrations/ci-cd/helpers.js"),m=n("./integrations/ci-cd/customHooks/useAPIName.js"),h=n("./node_modules/lodash/lodash.js");const g=e=>{const t=(0,m.default)(h.get(e,"apiId","")),[n,i]=(0,s.useState)(!0),[r,g]=(0,s.useState)({[h.get(e,"branchAndBuildIdIdentifier")]:!0});(0,s.useEffect)((()=>{const{data:t,branchAndBuildIdIdentifier:o}=e;if(n){const e=h.find(t,(e=>o===(0,p.getRowIdForBuildsTable)(e))),n=e&&document.getElementById((0,p.getRowIdForBuildsTable)(e));n&&n.scrollIntoView({behavior:"smooth"}),i(!1),g({})}return()=>{(0,d.resolveStoreInstance)(u.default).cleanUp(h.get(e,"integration.id"))}}));const{data:f,integration:b,showConfigureNewmanButtonOnEmptyState:y,apiId:v,apiVersionId:I}=e,_=h.get(b,"rule"),E=h.get(f,"0.showCollectionRuns"),S=h.get(f,"0.showBuildSteps"),C=E||S,T={className:"table-content",data:f,blankState:{isEmpty:h.isEmpty(f),component:s.createElement(a.default,{showConfigureNewmanButton:y,integrationData:b,apiId:v,apiVersionId:I})},getRowId:p.getRowIdForBuildsTable,columns:l.default.getTableColumns(b,!C),sorting:!0},A=e=>s.createElement(c.default,{rule:_,rowData:e,integration:b,apiName:t});return C&&(T.rowExpanded={subComponent:A,initialExpansionState:r}),"gitlab_ci"===_&&(T.columns=h.reject(T.columns,{accessor:"duration"})),s.createElement(o.default,T)};g.propTypes={data:r().arrayOf(r().object).isRequired,integration:r().object.isRequired,showConfigureNewmanButtonOnEmptyState:r().bool,apiId:r().string,apiVersionId:r().string,buildId:r().string,branchAndBuildIdIdentifier:r().string},t.default=g},"./integrations/ci-cd/components/CIEmptyTableView.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),c=n("./integrations/ci-cd/constants.ts"),d=n("./js/stores/StoreManager.js"),u=n("./api-dev/stores/APIListStore.js"),p=n("./js/modules/services/AnalyticsService.js"),m=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),h=n("./node_modules/lodash/lodash.js");const g=e=>{const{entityName:t="builds",apiId:n,apiVersionId:s,integrationData:i,showConfigureNewmanButton:g,description:f,title:b}=e,y=h.get(i,"id"),v=h.get(i,"rule"),I=h.get(i,"service"),_=h.get(c.RULE_TO_SERVICE,v,"");return o.createElement(r.default,{title:b||`No ${t} found`,description:f||`There are no ${t} on ${_}. You can run your Postman Collections on ${_} by configuring Postman CLI.`,secondaryAction:g&&o.createElement(a.default,{type:"outline",text:"Configure Postman CLI","data-testid":"integrations-configure-newman-button",onClick:()=>{const e=(0,d.resolveStoreInstance)(u.default).find(n);p.default.addEventV2({category:"ci-integration",action:"configure-postman-cli",label:v,value:1}),(0,m.openConfigurePostmanCLIInTab)({isMigrated:null==e?void 0:e.isMigrated,apiId:n,versionId:s,queryParams:{integration:y,rule:v,service:I}})}})},o.createElement(l.default,null))};g.propTypes={entityName:i().string,title:i().string,description:i().string,showConfigureNewmanButton:i().bool,integrationData:i().shape({id:i().string.isRequired,rule:i().string.isRequired,service:i().string.isRequired}),apiId:i().string,apiVersionId:i().string},t.default=g},"./integrations/ci-cd/components/CIStatusBadge.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("./integrations/ci-cd/constants.ts"),l=n("./node_modules/lodash/lodash.js");const c=e=>{const{status:t}=e,n=l.lowerCase(t)||"-",i=l.get(a.BUILD_STATUS_TO_BADGE_TYPE_MAP,n,a.AETHER_BADGE_STATUS.NEUTRAL);return o.createElement(s.default,{status:i,text:n})};c.propTypes={status:r().string.isRequired},t.default=c},"./integrations/ci-cd/components/CommonCIComponents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationEditDeleteMenu:function(){return D},ProjectHeader:function(){return M},RefreshBuildsButton:function(){return R},TriggerBuild:function(){return P}});var o=n("../../node_modules/react/index.js"),s=n("./js/modules/services/AnalyticsService.js"),i=n("./js/services/NavigationService.js"),r=n("./integrations/navigation/constants.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-run-stroke.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-options-stroke.js"),y=n("./integrations/ci-cd/modals/RunBuildsModal.js"),v=n("./integrations/ci-cd/modals/DeleteIntegrationModal.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),_=n("./integrations/ci-cd/constants.ts"),E=n("./integrations/ci-cd/services/index.ts"),S=n("./node_modules/prop-types/index.js"),C=n("./integrations/api-observability/constants.ts"),T=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),A=n("./js/stores/StoreManager.js"),j=n("./js/stores/CurrentUserStore.js"),w=n("./node_modules/lodash/lodash.js");const O=T.default.div`
    display: flex;
    align-items: center;
    text-overflow: ellipsis;
  `,N=(0,T.default)(a.default)`
    padding-top: calc(var(--spacing-xs) / 2);
  `,R=e=>{const{onClick:t,iconSize:n}=e;return o.createElement(l.default,{onClick:t,icon:o.createElement(g.default,null),type:"tertiary",size:"medium",tooltip:"Refresh your build runs"})},P=e=>{const[t,n]=(0,o.useState)(!1),{iconSize:i,rule:r,integrationId:a,branches:c,refreshBuilds:d}=e,u=E.default[r];return(null==u?void 0:u.triggerBuild)?o.createElement(o.Fragment,null,o.createElement(l.default,{onClick:()=>{n(!0),s.default.addEventV2({category:"ci-integration",action:"run-build-initiated",label:r,value:1})},icon:o.createElement(f.default,null),text:"Run Build",type:"tertiary",size:"medium",tooltip:"Trigger a build manually"}),t&&o.createElement(y.default,{isOpen:t,handleCloseModal:()=>{n(!1)},integrationId:a,rule:r,branches:c,refreshBuilds:d})):o.createElement(o.Fragment,null)},D=e=>{const{integrationId:t,rule:n,menuButtonSize:a,canUpdateIntegration:m,canDeleteIntegration:h,apiId:g,apiVersionId:f,onIntegrationDelete:y}=e,[E,S]=(0,o.useState)(!1),[T,O]=(0,o.useState)(!m),[N,R]=(0,o.useState)(!h);return(0,o.useEffect)((()=>{w.every([m,h],w.isBoolean)||I.default.getIntegrationData(t).then((e=>{200===e.status?(O(!w.get(e,"body.meta.allowedActions.update",!1)),R(!w.get(e,"body.meta.allowedActions.delete",!1))):pm.logger.error("CICDIntegrationComponents~CommonCIComponents~IntegrationEditDeleteMenu ~ Error occurred while loading integration details",e,{errorContext:_.errorContext})})).catch((e=>{pm.logger.error("CICDIntegrationComponents~CommonCIComponents~IntegrationEditDeleteMenu ~ Error occurred while loading integration details",e,{errorContext:_.errorContext})}))}),[m,h]),o.createElement(o.Fragment,null,o.createElement(c.default,null,o.createElement(d.default,null,o.createElement(l.default,{icon:o.createElement(b.default,null),type:"tertiary",tooltip:"View more actions",size:a})),o.createElement(u.default,null,o.createElement(p.default,{onClick:()=>{const o=(0,A.resolveStoreInstance)(j.default);s.default.addEventV2({action:"open-edit-ci-integration"+(e.source?`-${e.source}`:""),entityId:g,entityType:"api",integrationId:t,rule:n,userId:o.id,teamId:o.teamId,category:"postman-cli-api-builder"}),i.default.transitionTo(r.V10_API_EDIT_CI_INTEGRATION_NAV_IDENTIFIER,{apiId:g,integrationId:t},{version:f})},isDisabled:T,tooltip:T&&C.PERMISSION_ERROR},"Edit Integration"),o.createElement(p.default,{type:"destructive",onClick:()=>{const o=(0,A.resolveStoreInstance)(j.default);s.default.addEventV2({action:"init-delete-ci-integration"+(e.source?`-${e.source}`:""),entityId:g,entityType:"api",integrationId:t,rule:n,userId:o.id,teamId:o.teamId,category:"postman-cli-api-builder"}),S(!0)},isDisabled:N,tooltip:N&&C.PERMISSION_ERROR},"Delete Integration"))),o.createElement(v.default,{isOpen:E,handleCloseModal:()=>{S(!1)},onDelete:()=>{const o=(0,A.resolveStoreInstance)(j.default);s.default.addEventV2({action:"delete-ci-integration"+(e.source?`-${e.source}`:""),entityId:g,entityType:"api",integrationId:t,rule:n,userId:o.id,teamId:o.teamId,category:"postman-cli-api-builder"})},integrationId:t,ruleId:n,handleBack:y,apiVersionId:f}))},M=e=>{const{projectName:t,readableServiceName:n}=e;return o.createElement(O,null,o.createElement(m.default,{type:"h4",text:t}),o.createElement(a.default,{padding:"spacing-s"},o.createElement(h.default,{color:"content-color-tertiary"},"·")),o.createElement(N,{inline:!0,justifyContent:"center",alignItems:"center"},o.createElement(h.default,null,"Source: "),o.createElement(h.default,{type:"body-medium",color:"content-color-secondary"},n)))};R.propTypes={onClick:S.PropTypes.func.isRequired,iconSize:S.PropTypes.string},R.defaultProps={iconSize:"small"},P.propTypes={rule:S.PropTypes.string.isRequired,integrationId:S.PropTypes.string.isRequired,branches:S.PropTypes.array.isRequired,refreshBuilds:S.PropTypes.func.isRequired,iconSize:S.PropTypes.string},P.defaultProps={iconSize:"small"},D.propTypes={rule:S.PropTypes.string.isRequired,integrationId:S.PropTypes.string.isRequired,onIntegrationDelete:S.PropTypes.func.isRequired,menuButtonSize:S.PropTypes.string,canUpdateIntegration:S.PropTypes.boolean,canDeleteIntegration:S.PropTypes.boolean,integrationService:S.PropTypes.string,apiId:S.PropTypes.string,apiVersionId:S.PropTypes.string},D.defaultProps={menuButtonSize:"medium"},M.propTypes={projectName:S.PropTypes.string.isRequired,readableServiceName:S.PropTypes.string.isRequired}},"./integrations/ci-cd/components/CompactBuilds.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=n("./api-dev/stores/APIListStore.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-setting-stroke.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-warning-stroke.js"),y=n("./integrations/ci-cd/services/index.ts"),v=n("./js/services/NavigationService.js"),I=n("./integrations/ci-cd/constants.ts"),_=n("./api-dev/constants/APISubViews.js"),E=n("./js/modules/services/AnalyticsService.js"),S=n("./integrations/components/error-states/IntegrationNotSupported.js"),C=n("./integrations/ci-cd/components/CommonCIComponents.js"),T=n("./integrations/components/api-builder/CompactViewContainer.js"),A=n("./integrations/ci-cd/components/BuildsTable.js"),j=n("./integrations/utils/CommonHelperMethods.ts"),w=n("./integrations/ci-cd/helpers.js"),O=n("./integrations/ci-cd/components/ErrorStates/AuthenticationExpiredBanner.js"),N=n("./integrations/navigation/constants.js"),R=n("./appsdk/components/link/Link.js"),P=n("./js/stores/CurrentUserInfoStore.js"),D=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),M=n("./js/stores/ActiveWorkspaceSessionStore.js"),x=n("./node_modules/lodash/lodash.js");r.default.div`
    margin-left: var(--spacing-xxl);
  `;const L=r.default.div`
    margin-left: var(--spacing-xl);
    border-top: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
  `;r.default.div`
    margin: var(--spacing-s) var(--spacing-xl);
    padding: var(--spacing-zero) calc(var(--spacing-l) + var(--spacing-xs));
    display: flex;
    color: var(--content-color-secondary);
    font-size: var(--text-size-m);
  `;let k=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default);const t=x.first(x.get(e,"configuredIntegrations",[{}]));this.state={builds:[],integration:t,project:(0,w.getProjectName)(t),triggerBranches:[],filteredBranches:[],branchOptions:[],loadingBuilds:!1,errorBuilds:""},this.fetchBuilds=this.fetchBuilds.bind(this),this.handleViewMoreBuilds=this.handleViewMoreBuilds.bind(this),this.populateBranches=this.populateBranches.bind(this),this.populateFilteredBranches=this.populateFilteredBranches.bind(this),this.getReAuthenticationBanner=this.getReAuthenticationBanner.bind(this),this._reauthorizationCompletedCallback=this._reauthorizationCompletedCallback.bind(this),this.currentUserInfo=(0,a.resolveStoreInstance)(P.default)}componentDidMount(){const{integration:e}=this.state,t=x.get(this.props,"model.apiId"),n=x.get(e,"id"),o=x.get(e,"rule");this.fetchBuilds(n,o),pm.windowEvents.addListener(`api-oauth-integration-re-authenticated-${t}`,this._reauthorizationCompletedCallback)}componentWillUnmount(){x.get(this.props,"model.apiId");pm.windowEvents.removeListener(`api-oauth-integration-re-authenticated-${this.apiId}`,this._reauthorizationCompletedCallback)}_reauthorizationCompletedCallback(){const{integration:e}=this.state;this.setState({authenticationExpired:!1},(()=>{this.fetchBuilds(e.id,e.rule)}))}getReAuthenticationBanner(e,t){const n=x.get(this.props,"model.apiId"),o=x.get(this.props,"model.id");return i.createElement(c.default,{padding:"spacing-s"},i.createElement(O.default,{serviceId:e,tokenId:t,reauthQueryParamData:{apiId:n,eventName:`api-oauth-integration-re-authenticated-${n}`,apiVersionId:o}}))}fetchBuilds(e,t){let n=[],o=y.default[t];this.setState({loadingBuilds:!0,errorBuilds:""}),o&&x.isFunction(o.getBuilds)?o.getBuilds({integrationId:e,offset:I.COMPACT_VIEW_DEFAULT_OFFSET,limit:I.COMPACT_VIEW_BUILDS_LIMIT}).then((e=>{x.isEmpty(e)&&this.setState({loadingBuilds:!1,errorBuilds:"",noMoreBuilds:!0}),n=x.concat(n,e),this.setState({builds:n,loadingBuilds:!1,errorBuilds:""},(()=>{this.populateBranches(n)}))})).catch((e=>{const t={loadingBuilds:!1},n=x.get(e,"error.details.statusCode",-1);e.status>=500&&e.status<600?t.errorBuilds="Unable to load builds":401===n||403===n?(t.authenticationExpired=!0,t.errorBuilds="Unable to load builds"):pm.toasts.error("Something went wrong while fetching builds, please try again"),pm.logger.error("Error occurred while fetching builds",e),this.setState(t)})):this.setState({loadingBuilds:!1,errorBuilds:!0,integrationNotFound:!0})}handleViewMoreBuilds(){const e=this.state.integration,t=e.rule,n=(0,a.resolveStoreInstance)(M.default).activeEditor;E.default.addEventV2({category:"ci-integration",action:"click-all-builds",label:t,value:1}),v.default.transitionTo(N.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:e.variables.api_id,integrationId:e.id},null,{tabOptions:{openIn:n}})}populateBranches(e){const{branchOptions:t}=this.state;let n=[...t],o=[];x.forEach(e,(e=>{let t=0;x.forEach(n,(n=>{n==e.branch&&(t=1)})),0===t&&(n.push(e.branch),o.push(e.branch))})),this.setState({branchOptions:[...n]},(()=>this.setState({triggerBranches:x.map(this.state.branchOptions,(e=>({label:e,value:e})))}))),this.populateFilteredBranches(o)}populateFilteredBranches(e){const t=[...this.state.filteredBranches];x.forEach(e,(e=>{t.push({name:e,selected:!1})})),this.setState({filteredBranches:t})}render(){const{builds:e,integration:t,errorBuilds:n,triggerBranches:o,project:s,integrationNotFound:r,loadingBuilds:l,authenticationExpired:y}=this.state,v=x.get(t,"rule"),O=x.get(I.RULE_TO_SERVICE,v),N=x.get(t,"id"),P=x.get(this.props,"model.apiId"),M=x.get(this.props,"model.id"),k=x.get(t,"service"),F=x.get(I.RULE_TO_OAUTH_SERVICE_MAPPING,v),B=i.createElement(i.Fragment,null,i.createElement(c.default,{gap:"spacing-xs",alignItems:"center",padding:{paddingLeft:"spacing-xl"},grow:0,justifyContent:"flex-start",shrink:1,wrap:"wrap"},i.createElement(C.TriggerBuild,{rule:v,integrationId:N,branches:o,refreshBuilds:()=>{this.fetchBuilds(N,v)}}),i.createElement(d.default,{type:"tertiary",text:"Run on Local Environment",icon:i.createElement(g.default,null),onClick:()=>{const e=(0,a.resolveStoreInstance)(h.default).find(P);E.default.addEventV2({action:"open-run-local-environment",entityId:P,entityType:"api",rule:"local",integrationId:N,userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,category:"postman-cli-api-builder"}),(0,D.openConfigurePostmanCLIInTab)({isMigrated:null==e?void 0:e.isMigrated,apiId:P,versionId:M,queryParams:{rule:"local"}})}}),i.createElement(d.default,{type:"tertiary",text:"CI Configuration",icon:i.createElement(f.default,null),onClick:()=>{const{model:e}=this.props,t=(0,a.resolveStoreInstance)(h.default).find(P);E.default.addEventV2({action:"open-ci-environment-config",entityId:P,entityType:"api",rule:v,integrationId:N,userId:this.currentUserInfo.id,teamId:this.currentUserInfo.teamId,category:"postman-cli-api-builder"}),(0,D.openConfigurePostmanCLIInTab)({isMigrated:null==t?void 0:t.isMigrated,apiId:P,versionId:M,queryParams:{rule:v,integration:N,service:k}})}}),i.createElement(C.RefreshBuildsButton,{onClick:()=>{this.fetchBuilds(N,v)}}),i.createElement(C.IntegrationEditDeleteMenu,{rule:v,integrationId:N,onIntegrationDelete:()=>{this.store.initializeApiIntegrationsStore({apiId:P,apiVersionId:M,category:I.CI_CD_BUILDS})},menuButtonSize:"medium",integrationService:k,apiId:P,apiVersionId:M})));let U=null;if(r)return i.createElement(S.default,{apiId:P,apiVersionId:M,tab:_.TEST});U=l?i.createElement(c.default,{justifyContent:"center",alignItems:"center",padding:"spacing-xl"},i.createElement(u.default,null)):n?i.createElement("div",null,y&&F?this.getReAuthenticationBanner(F,(0,j.getTokenIdFromIntegration)(t)):null,i.createElement("div",{className:"ci-cd-builds-table"},i.createElement("div",{className:"error-compact-builds"},i.createElement(b.default,null)," ","Couldn't load the recent build runs from ",O,". Try refreshing the page or check back in some time."))):i.createElement("div",{className:"ci-cd-builds-page-container"},i.createElement(L,null,i.createElement(A.default,{data:e,integration:t,apiId:P,apiVersionId:M,showConfigureNewmanButtonOnEmptyState:!x.size(e)})),x.size(e)>0&&i.createElement("div",{className:"ci-cd-view-all-builds"},i.createElement(R.default,{onClick:this.handleViewMoreBuilds},i.createElement(p.default,{type:"link-primary"},"View all builds →"))));const V=i.createElement(c.default,{gap:"spacing-s",alignItems:"center"},i.createElement(m.default,{type:"h4",text:this.state.project}),i.createElement(p.default,{color:"content-color-tertiary"},"·"),i.createElement(c.default,{gap:"spacing-xs",alignItems:"center"},(0,w.getIconForCIIntegration)(v),i.createElement(p.default,{type:"body-medium"},O)));return i.createElement(T.default,{containerTitle:V,containerBody:U,rightSectionComponent:B})}})||o},"./integrations/ci-cd/components/ErrorStates/AuthenticationExpiredBanner.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./js/services/NavigationService.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("./integrations/constants/integrationsConstants.ts"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./node_modules/lodash/lodash.js");const p=d.default.div`
    display: inline;
  `,m=e=>{const{serviceId:t,tokenId:n,reauthQueryParamData:l}=e,c=u.get(a.SERVICE_OAUTH_CONFIG,u.upperCase(t)),d=u.get(c,"userFriendlyServiceName");return o.createElement(i.default,{status:"error"},"Authentication for ",d," is expired, please"," ",o.createElement(p,{onClick:()=>{s.default.transitionTo("build.oauthReauthenticate",{tokenId:n,serviceId:t},l)}},o.createElement(r.default,{type:"link-default"},"reauthenticate")),".")};m.propTypes={serviceId:c().string.isRequired,tokenId:c().string.isRequired,reauthQueryParamData:c().object},t.default=m},"./integrations/ci-cd/components/ExpandedBuildRow.js":function(e,t,n){"use strict";n.r(t);var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js"),c=n.n(l),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),g=n("./integrations/ci-cd/buildUtils.js"),f=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),b=n("./integrations/ci-cd/services/index.ts"),y=n("./js/stores/StoreManager.js"),v=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),I=n("./js/modules/services/AnalyticsService.js");(0,f.default)(d.default)`
  align-items: center;
`;let _=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={isBuildStepsExpanded:!1,isCollectionRunsExpanded:!1,loadingBuildSteps:!1,loadingAPIScanResults:!0,apiScanResults:null,loadingCollectionRuns:!1,errorCollectionRuns:"",buildSteps:[]},this.toggleArrowBuilds=this.toggleArrowBuilds.bind(this),this.toggleArrowCollections=this.toggleArrowCollections.bind(this),this.getExpandedRowBuildInformation=this.getExpandedRowBuildInformation.bind(this)}componentDidMount(){const{rule:e,rowData:t,integration:n}=this.props;this.getExpandedRowBuildInformation(e,t,c().get(n,"id")),this.getAPIWarningsDetails()}getExpandedRowBuildInformation(e,t,n){const o=c().get(b.default,[e,"getBuildSteps"]),{addToast:s}=this.props;this.setState({loadingBuildSteps:!0}),c().isFunction(o)?o(n,t).then((e=>{this.setState({buildSteps:e,loadingBuildSteps:!1})})).catch((e=>{this.setState({loadingBuildSteps:!1}),s({title:"Error",description:"Something went wrong while fetching build steps, please try again",status:"error"}),pm.logger.error("Error occurred while fetching build steps",e)})):this.setState({loadingBuildSteps:!1})}getAPIWarningsDetails(){const{rowData:e,integration:t}=this.props,n=(0,y.resolveStoreInstance)(v.default);this.setState({loadingAPIScanResults:!0}),n.fetchAPISchemaScanResults(c().get(t,"id"),c().get(e,"buildIdentifier"),c().get(e,"branch")).then((e=>{this.setState({apiScanResults:c().get(e,"0.apis",[]),loadingAPIScanResults:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching api scan details",e),this.setState({loadingAPIScanResults:!1})}))}toggleArrowBuilds(){const{isBuildStepsExpanded:e}=this.state;e||I.default.addEventV2({category:"ci-integration",action:"expand-build-steps",label:this.props.rule,value:1}),this.setState((e=>({isBuildStepsExpanded:!e.isBuildStepsExpanded})))}toggleArrowCollections(){const{isCollectionRunsExpanded:e}=this.state;e||I.default.addEventV2({category:"ci-integration",action:"expand-collection-run",label:this.props.rule,value:1}),this.setState((e=>({isCollectionRunsExpanded:!e.isCollectionRunsExpanded})))}getEmptyStateMessage(){const{loadingAPIScanResults:e,apiScanResults:t}=this.state,{showCollectionRuns:n,collectionRunDetails:o}=this.props.rowData;return c().isEmpty(o)&&c().isEmpty(t)&&n&&!e?"No collection runs or API linting results for the build.":c().isEmpty(t)&&!e?"No API linting results for the build.":n&&c().isEmpty(o)?"No collection runs for the build.":""}render(){const{isBuildStepsExpanded:e,isCollectionRunsExpanded:t,loadingBuildSteps:n,loadingCollectionRuns:o,buildSteps:s}=this.state,{rule:r,rowData:a,apiName:l}=this.props,{showCollectionRuns:h,showBuildSteps:f}=this.props.rowData,b=this.getEmptyStateMessage();return i.createElement("div",{className:"build-expand-table-wrapper"},i.createElement("div",{className:"build-expand-table"},i.createElement(u.default,{data:a.collectionRunDetails,className:"table-without-head",columns:g.default.getCollectionRunsExpandColumns(r),rowExpanded:{subComponent:e=>i.createElement(u.default,{columns:g.default.getSpecificCollectionRunDetailsColumns(),data:e.metrics,className:"table-without-head",loader:{isLoading:o,skeletonRowCount:1}}),autoResetExpanded:!1}})),b?i.createElement(d.default,{direction:"row",padding:"spacing-l",justifyContent:"center"},i.createElement(p.default,{type:"para"},b)):null,c().isEmpty(this.state.apiScanResults)?this.state.loadingAPIScanResults?i.createElement(d.default,{className:"expanded_row",padding:"spacing-s spacing-l spacing-l spacing-xxxl",border:{borderBottom:"border-width-default"},justifyContent:"center"},i.createElement(m.default,{description:"Loading schema scan details"})):null:i.createElement("div",{className:"build-expand-table"},i.createElement(u.default,{className:"table-without-head",data:this.state.apiScanResults,columns:g.default.getSchemaColumns(l),rowExpanded:{subComponent:e=>i.createElement(u.default,{columns:g.default.getSpecificSchemaWarningDetailsColumns(),data:e.warnings,className:"table-without-head"}),autoResetExpanded:!1}})))}})||o;_.propTypes={rule:a().string.isRequired,rowData:a().object.isRequired,integration:a().object.isRequired,apiName:a().string.isRequired},t.default=(0,h.default)(_)},"./integrations/ci-cd/components/Jenkins/CompactBuilds.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationMetaAndActionsJenkins:function(){return Q},default:function(){return X}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),c=n("./integrations/ci-cd/helpers.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),_=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),E=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-up.js"),S=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-run-stroke.js"),C=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),T=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-setting-stroke.js"),A=n("./integrations/ci-cd/modals/DeleteIntegrationModal.js"),j=n("./integrations/ci-cd/modals/RunBuildsModal.js"),w=n("./integrations/ci-cd/components/CIEmptyTableView.js"),O=n("./integrations/ci-cd/components/CommonCIComponents.js"),N=n("./integrations/ci-cd/services/JenkinsCI.js"),R=n("./js/modules/services/AnalyticsService.js"),P=n("./js/external-navigation/ExternalNavigationService.js"),D=n("./js/services/NavigationService.js"),M=n("./api-dev/stores/APIListStore.js"),x=n("./integrations/ci-cd/stores/APIRunInfoStore.js"),L=n("./integrations/api-observability/constants.ts"),k=n("./integrations/ci-cd/constants.ts"),F=n("./integrations/ci-cd/components/Jenkins/constants.js"),B=n("./integrations/ci-cd/components/ExpandedBuildRow.js"),U=n("./integrations/navigation/constants.js"),V=n("./integrations/ci-cd/configurePostmanCLIInterfaces.js"),G=n("./integrations/ci-cd/customHooks/useAPIName.js"),z=n("./node_modules/lodash/lodash.js");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H.apply(this,arguments)}const W=(0,r.default)(d.default)`
    margin-left: var(--spacing-xs);
  `,q=(0,r.default)(u.default)`
    margin: 0 var(--spacing-s);
  `,K=e=>{const{projectType:t}=e,n=`Couldn't load ${t===F.PROJECT_TYPES.MULTI_BRANCH_PIPELINE?"branches":"recent runs"} from Jenkins. Try refreshing the page or check back in some time`;return i.createElement("div",{className:"ci-cd-builds-table"},i.createElement("div",{className:"error-compact-builds"},i.createElement(I.default,{name:"icon-state-warning-stroke"})," ",n))},$=()=>i.createElement(p.default,{padding:"spacing-xxl",justifyContent:"center",alignItems:"center"},i.createElement(m.default,null)),Y=e=>{const[t,n]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),{integration:r,triggeringBuild:d,triggerBuild:m,model:v,isTableCollapsed:I,toggleTable:w,projectBranches:N,refreshMultiBranchProjectBranches:P,getBranchSpecificBuild:x}=e,B=z.get(v,`apiPermissionStore.permissions.${v.apiId}:UPDATE_API_META.allowed`),G=z.get(r,"variables.project_type"),H=I?"Show":"Hide",K=I?i.createElement(_.default,null):i.createElement(E.default,null),$=z.map(N,(e=>({label:e.name,value:e.name}))),Y=z.get(r,"rule"),J=z.get(r,"id"),X=z.get(r,"service"),Q=z.get(k.RULE_TO_SERVICE,Y),Z=z.get(v,"apiId"),ee=z.get(v,"id");return i.createElement("div",{className:"ci-cd-configured-test-header"},i.createElement(h.default,{onClick:w,tooltip:H,icon:K,className:"drop-icon"}),i.createElement(W,{type:"h4",text:(0,c.getProjectName)(e.integration)}),i.createElement(q,{color:"content-color-tertiary"},"·"),i.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},(0,c.getIconForCIIntegration)(Y),i.createElement(u.default,{type:"body-medium"},Q)),i.createElement(p.default,{gap:"spacing-xs",alignItems:"center",padding:{paddingLeft:"spacing-xl"},grow:1,justifyContent:"flex-end"},i.createElement(h.default,{onClick:()=>{R.default.addEventV2({category:"ci-integration",action:"run-build-initiated",label:r.rule,value:1}),G===F.PROJECT_TYPES.MULTI_BRANCH_PIPELINE?s(!0):m()},className:"run-build-btn",icon:i.createElement(S.default,null),isLoading:d,text:"Run Build",type:"tertiary",size:"medium"}),i.createElement(h.default,{type:"tertiary",text:"Run on Local Environment",icon:i.createElement(C.default,null),onClick:()=>{const e=(0,a.resolveStoreInstance)(M.default).find(Z);(0,V.openConfigurePostmanCLIInTab)({isMigrated:null==e?void 0:e.isMigrated,apiId:Z,versionId:ee,queryParams:{rule:"local"}})}}),i.createElement(h.default,{type:"tertiary",text:"CI Configuration",icon:i.createElement(T.default,null),onClick:()=>{const e=(0,a.resolveStoreInstance)(M.default).find(Z);(0,V.openConfigurePostmanCLIInTab)({isMigrated:null==e?void 0:e.isMigrated,apiId:Z,versionId:ee,queryParams:{rule:Y,integration:J,service:X}})}}),i.createElement(O.RefreshBuildsButton,{onClick:()=>{x()}})),i.createElement("div",{className:"integration-more-options"},i.createElement("div",{className:"integration-options"},i.createElement(g.default,null,i.createElement(f.default,null,i.createElement(h.default,{icon:"icon-action-options-stroke",type:"tertiary",size:"small"})),i.createElement(b.default,null,i.createElement(y.default,{onClick:()=>{D.default.transitionTo(U.V10_API_EDIT_CI_INTEGRATION_NAV_IDENTIFIER,{apiId:r.variables.api_id,integrationId:r.id},{version:r.executor})},isDisabled:!B,tooltip:!B&&L.PERMISSION_ERROR},"Edit Integration"),i.createElement(y.default,{type:"destructive",onClick:()=>n(!0),isDisabled:!B,tooltip:!B&&L.PERMISSION_ERROR},"Delete Integration"))))),i.createElement(A.default,{isOpen:t,handleCloseModal:()=>n(!1),integrationId:r.id,ruleId:r.rule,apiVersionId:r.executor,handleBack:()=>{n(!1),(0,a.resolveStoreInstance)(l.default).initializeApiIntegrationsStore({apiId:z.get(r,"variables.api_id"),apiVersionId:r.executor,category:k.CI_CD_BUILDS})}}),i.createElement("div",{className:"ci-cd-run-builds-modal"},i.createElement(j.default,{isOpen:o,handleCloseModal:()=>s(!1),integrationId:r.id,rule:r.rule,branches:$,refreshBuilds:P,project:z.get(r,"variables.project")})))},J=e=>{const{integration:t,project:n,projectBranches:o,builds:s,showBranches:r,projectType:a,onViewMoreBuilds:l}=e,c=a===F.PROJECT_TYPES.MULTI_BRANCH_PIPELINE,d=(0,G.default)(z.get(t,"variables.api_id")),u=e=>i.createElement(B.default,{rule:F.RULE,rowData:e,integration:t,apiName:d});let p=s,m="runs",h=0===s.length,g=r?F.BUILDS_TABLE_COLUMNS:F.BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH,f={};return h&&(g=z.reject(g,{accessor:"url"})),c?(p=o,m="branches",h=0===o.length,g=(0,F.getMultiBranchProjectTableColumns)({integration:t})):f.rowExpanded=u,i.createElement("div",null,i.createElement("div",{className:"ci-cd-builds-table"},i.createElement("div",{className:"ci-cd-builds-table-success"},i.createElement(v.default,H({data:p,columns:g,sorting:!0,blankState:{isEmpty:h,component:i.createElement(w.default,{entityName:m,integrationData:t,showConfigureNewmanButton:!0,apiId:z.get(t,"variables.api_id"),apiVersionId:z.get(t,"executor")})}},f)))),!h&&!c&&i.createElement("div",{className:"view-more-button",onClick:l},"View Builds"))};let X=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={projectBranches:[],builds:[],showBranches:!1,errorFetchingData:!1,isTableCollapsed:!1,integration:z.get(e,"configuredIntegrations.0"),projectType:z.get(e,"configuredIntegrations.0.variables.project_type"),triggeringBuild:!1},this.getMultiBranchProjectBranches=this.getMultiBranchProjectBranches.bind(this),this.getBuilds=this.getBuilds.bind(this),this.triggerBuild=this.triggerBuild.bind(this),this.handleOpenExternalBuilds=this.handleOpenExternalBuilds.bind(this),this.handleViewMoreBuilds=this.handleViewMoreBuilds.bind(this),this.getBranchSpecificBuild=this.getBranchSpecificBuild.bind(this)}componentDidMount(){this.getBranchSpecificBuild()}getBranchSpecificBuild(){const{projectType:e}=this.state;e===F.PROJECT_TYPES.MULTI_BRANCH_PIPELINE?this.getMultiBranchProjectBranches():this.getBuilds()}getMultiBranchProjectBranches(){this.setState({loadingData:!0}),N.default.getProjectInfoByIntegrationId(this.state.integration.id).then((e=>{const t=z.map(e.jobs,(e=>({name:e.displayName,status:z.get(e,"lastBuild.result"),lastSuccess:z.get(e,"lastSuccessfulBuild.timestamp"),lastFailure:z.get(e,"lastFailedBuild.timestamp"),lastDuration:z.get(e,"lastBuild.duration"),lastTimestamp:z.get(e,"lastBuild.timestamp")})));this.setState({projectBranches:t,loadingData:!1})})).catch((e=>{this.setState({errorFetchingData:!0,loadingData:!1}),pm.toasts.error("Something went wrong while fetching branches for your Jenkins project"),pm.logger.error("CompactBuilds~getProjectBranches: Error occurred in fetching multi-branch project branches",e)}))}getBuilds(){this.setState({loadingData:!0}),N.default.getBuilds({integrationId:this.state.integration.id,offset:0,limit:5}).then((e=>{let t=!z.isEmpty(z.find(e,(e=>!z.isEmpty(e.branch))));this.setState({builds:e,showBranches:t,loadingData:!1})})).catch((e=>{this.setState({errorFetchingData:!0,loadingData:!1}),pm.toasts.error("Something went wrong while fetching builds for your project"),pm.logger.error("CompactBuilds~getBuilds: Error occurred in fetching builds",e)}))}triggerBuild(){const{integration:e}=this.state;this.setState({triggeringBuild:!0}),N.default.triggerBuild(e.id).then((t=>{this.setState({triggeringBuild:!1}),pm.toasts.success("New build triggered successfully! If you don't see the run try refreshing the page"),R.default.addEventV2({category:"ci-integration",action:"run-build-complete",label:e.rule,value:1}),this.getBuilds()})).catch((e=>{this.setState({triggeringBuild:!1}),pm.toasts.error("Something went wrong while triggering build, please try again"),pm.logger.error("Error occurred while fetching builds",e)}))}handleOpenExternalBuilds(e){const t=this.state.integration.rule;(0,P.openExternalLink)(e,"_blank"),R.default.addEventV2({category:"ci-integration",action:"click-build-details",label:t,value:1})}handleViewBranchDetails(e){const t=this.state.integration,n=t.rule;R.default.addEventV2({category:"ci-integration",action:"click-all-builds",label:n,value:1}),D.default.transitionTo(U.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:t.variables.api_id,integrationId:t.id},{},{additionalContext:e})}handleViewMoreBuilds(){const e=this.state.integration,t=e.rule;R.default.addEventV2({category:"ci-integration",action:"click-all-builds",label:t,value:1}),D.default.transitionTo(U.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:e.variables.api_id,integrationId:e.id})}componentWillUnmount(){(0,a.resolveStoreInstance)(x.default).cleanUp(z.get(this.state,"integration.id"))}render(){const{errorFetchingData:e,loadingData:t,triggeringBuild:n,isTableCollapsed:o,projectType:s,integration:r,builds:a,showBranches:l,projectBranches:c}=this.state;return i.createElement("div",null,i.createElement("div",{className:"ci-cd-builds-page-container"},t?i.createElement($,null):i.createElement(Y,{integration:r,projectBranches:c,triggerBuild:this.triggerBuild,triggeringBuild:n,getBranchSpecificBuild:this.getBranchSpecificBuild,refreshMultiBranchProjectBranches:this.getMultiBranchProjectBranches,model:this.props.model,isTableCollapsed:o,toggleTable:()=>{this.setState((e=>({isTableCollapsed:!e.isTableCollapsed})))}}),!t&&e?i.createElement(K,{projectType:s}):!t&&!o&&i.createElement(J,{integration:r,project:z.get(r,"variables.project"),projectBranches:c,builds:a,showBranches:l,projectType:s,onViewMoreBuilds:this.handleViewMoreBuilds})))}})||o;const Q=Y},"./integrations/ci-cd/components/Jenkins/constants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{BUILDS_STATUS:function(){return v},BUILDS_TABLE_COLUMNS:function(){return _},BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH:function(){return E},ON_DEMAND_TRIGGER_ACTIONS:function(){return A},PROJECT_TYPES:function(){return y},RULE:function(){return b},SERVICE_ACTIONS:function(){return C},SERVICE_ACTION_PAYLOAD:function(){return T},STATUS_BUILD_IN_PROGRESS:function(){return I},getMultiBranchProjectTableColumns:function(){return S}});var o=n("../../node_modules/react/index.js"),s=n("./appsdk/components/link/Link.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("./integrations/ci-cd/components/CIStatusBadge.js"),c=n("./integrations/ci-cd/timeUtils.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./js/services/NavigationService.js"),p=n("./integrations/navigation/constants.js"),m=n("./integrations/ci-cd/helpers.js"),h=n("./node_modules/lodash/lodash.js");const g=a.default.div`
    display: flex;
    align-items: center;
  `,f=a.default.div`
    display: flex;
    align-items: center;
    margin-right: var(--spacing-s);
  `,b="jenkins_ci",y={FREESTYLE:"FreeStyleProject",WORKFLOW:"WorkflowJob",MULTI_BRANCH_PIPELINE:"WorkflowMultiBranchProject"},v=["SUCCESS","FAILURE","BUILDING","UNSTABLE","NOT BUILT","ABORTED"],I="BUILDING",_=[{Header:"Name",accessor:e=>({buildName:h.get(e,"name"),buildUrl:h.get(e,"url"),rowData:e}),Cell:({value:e})=>{const{buildName:t,buildUrl:n,rowData:a}=e;return o.createElement("div",{id:(0,m.getRowIdForBuildsTable)(a)},o.createElement(g,null,o.createElement(f,null,o.createElement(r.default,{color:"content-color-primary"})),o.createElement(s.default,{to:n,target:"_blank"},o.createElement(i.default,{type:"link-default",isExternal:!0,isTruncated:!0},t))))}},{Header:"Branch",accessor:"branch",Cell:e=>o.createElement(i.default,{isTruncated:!0},e.value)},{Header:"Timestamp",accessor:"timestamp",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Duration",accessor:"duration",cellWidth:"100px",Cell:e=>`${c.default.getFormattedDuration(e.value)}`},{Header:"Status",accessor:"status",cellWidth:"200px",Cell:e=>o.createElement(l.default,{status:h.get(e,"value")}),align:"center"}],E=h.reject(_,{Header:"Branch"}),S=e=>[{Header:"",accessor:"empty",Cell:e=>o.createElement(o.Fragment,null),disableSortBy:!0,cellWidth:"32px"},{Header:"Branch",accessor:"name",Cell:t=>o.createElement(s.default,{onClick:()=>{const n=e.integration,o=n.rule;d.default.addEventV2({category:"ci-integration",action:"click-all-builds",label:o,value:1}),u.default.transitionTo(p.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:n.variables.api_id,integrationId:n.id},{},{additionalContext:{branch:t.value}})}},o.createElement(i.default,{type:"link-default",isExternal:!0,isTruncated:!0},t.value))},{Header:"Status",accessor:"status",Cell:e=>o.createElement(l.default,{status:h.get(e,"value")}),align:"center"},{Header:"Last runtime",accessor:"lastTimestamp",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last success",accessor:"lastSuccess",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last failure",accessor:"lastFailure",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last duration",accessor:"lastDuration",Cell:e=>`${c.default.getFormattedDuration(e.value)}`}],C={VALIDATE_USER:"validateUser",GET_PROJECTS:"getProjects",GET_PROJECT:"getProject",GET_NEWMAN_CONFIG:"getNewmanConfig"},T={type:"handleActions"},A={GET_PROJECTS:"get_projects",GET_PROJECT:"get_project",GET_BUILDS:"get_builds",TRIGGER_BUILD:"trigger_build"}},"./integrations/ci-cd/configurePostmanCLIInterfaces.js":function(e,t,n){"use strict";n.r(t),n.d(t,{openConfigurePostmanCLIInTab:function(){return a}});var o=n("./api-dev/interfaces/APIInterface.js"),s=n("./js/services/NavigationService.js"),i=n("./integrations/navigation/constants.js"),r=n("./node_modules/lodash/lodash.js");function a({isMigrated:e,apiId:t,versionId:n,queryParams:a}){e?s.default.transitionTo(i.OPEN_CONFIGURE_POSTMAN_CLI_IN_API_CONTEXT,{apiId:t},null!=a?a:{}):(0,o.migrateAPI)(t,n).catch(r.noop)}},"./integrations/ci-cd/containers/ApiIntegrationViewContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),d=n("./js/stores/IntegrationsStore.js"),u=(n("./js/components/base/LoadingIndicator.js"),n("./integrations/ci-cd/containers/ServiceDetailsViewContainer.js")),p=n("./integrations/ci-cd/containers/CompactBuildsContainer.js"),m=n("./integrations/ci-cd/constants.ts"),h=n("./integrations/utils/CommonHelperMethods.ts"),g=n("../../node_modules/mobx/lib/mobx.module.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");let y=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.apiIntegrationsStore=(0,l.resolveStoreInstance)(c.default),this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.state={apiId:r().get(this.props.model,"apiEditorUIStore.apiId"),apiVersionId:r().get(this.props.model,"id"),updatingApiVersion:!1,errorObject:{status:500}},this.initializeApiIntegrationsStore=this.initializeApiIntegrationsStore.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${m.CI_CD_BUILDS}-integration-added`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${m.CI_CD_BUILDS}-integration-edited`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${m.CI_CD_BUILDS}-integration-deleted`,this.onIntegrationEventCaptured.bind(this)),this.initializeApiIntegrationsStore()}initializeApiIntegrationsStore(){const e=r().get(this.props.model,"apiId");this.apiIntegrationsStore.initializeApiIntegrationsStoreV2({apiId:e,apiVersionId:r().get(this.props.model,"id"),category:m.CI_CD_BUILDS}),this.apiIntegrationsStore.fetchAuthenticationInstances(e)}onIntegrationEventCaptured(e){let{apiId:t,apiVersionId:n}=this.state;e.apiId===t&&e.apiVersionId===n&&this.initializeApiIntegrationsStore()}render(){const{apiVersionId:e,updatingApiVersion:t}=this.state,n=this.integrationsStore.loadingIntegrationClasses,o=this.integrationsStore.getIntegrationClasses(),i=(0,h.filterIntegrationClassesByClientCategory)(o,m.CI_CD_CLIENT_CATEGORY);return r().get(this.props.model,"id")!==e&&this.setState({apiVersionId:r().get(this.props.model,"id"),updatingApiVersion:!0},(()=>{r().isEmpty((0,g.toJS)(this.apiIntegrationsStore.configuredIntegrations[r().get(this.props.model,"id")]))&&this.apiIntegrationsStore.updateSelectedAPIVersion(r().get(this.props.model,"id")),this.setState({updatingApiVersion:!1})})),n||this.apiIntegrationsStore.loadingConfiguredIntegrations[r().get(this.props.model,"id")]||t?s.createElement(f.default,{padding:"spacing-xxl",justifyContent:"center",alignItems:"center"},s.createElement(b.default,null)):((this.integrationsStore.errorFetchingAvailableIntegrations||this.apiIntegrationsStore.errorConfiguredIntegrations[r().get(this.props.model,"id")])&&(this.apiIntegrationsStore.errorFetchingAvailableIntegrations?pm.logger.error("Error occurred while fetching available integrations",this.apiIntegrationsStore.errorAvailableIntegrations):pm.logger.error("Error occurred while fetching configured integration",this.apiIntegrationsStore.errorConfiguredIntegrations)),r().isEmpty((0,g.toJS)(this.apiIntegrationsStore.configuredIntegrations[r().get(this.props.model,"id")]))?this.apiIntegrationsStore.loadingAuthenticationInstances?s.createElement(f.default,{padding:"spacing-xxl",justifyContent:"center",alignItems:"center"},s.createElement(b.default,null)):s.createElement(u.default,{integrationClasses:i,model:this.props.model,promoteTab:this.props.promoteTab}):s.createElement(p.default,{model:this.props.model,configuredIntegrations:(0,g.toJS)(this.apiIntegrationsStore.configuredIntegrations[r().get(this.props.model,"id")])}))}})||o},"./integrations/ci-cd/containers/CompactBuildsContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./integrations/ci-cd/components/CompactBuilds.js"),a=n("./integrations/ci-cd/components/Jenkins/CompactBuilds.js"),l=n("./integrations/ci-cd/components/Jenkins/constants.js"),c=n("./node_modules/prop-types/index.js"),d=n.n(c),u=n("./node_modules/lodash/lodash.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)}const m={[l.RULE]:a.default};let h=(0,i.observer)(o=class extends s.Component{constructor(e){super(e)}render(){const e=this.props.configuredIntegrations[0],t=m[e.rule]||r.default,n=u.get(this.props,"model.apiRepositoryStore.branch");return s.createElement(t,p({selectedBranch:n},this.props))}})||o;h.propTypes={model:d().object,configuredIntegrations:d().array}},"./integrations/ci-cd/containers/ServiceDetailsViewContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s,i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),c=n("./api-dev/stores/APIListStore.js"),d=(n("./js/services/NavigationService.js"),n("./integrations/services/OneClickIntegrationCreateService.js")),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("./integrations/ci-cd/components/AvailableCIServices.js"),f=n("./integrations/components/api-builder/CompactViewContainer.js"),b=n("./integrations/utils/CommonHelperMethods.ts"),y=(n("./integrations/navigation/constants.js"),n("./api-dev/interfaces/APIInterface.js"),n("./integrations/ci-cd/configurePostmanCLIInterfaces.js")),v=n("./node_modules/lodash/lodash.js");function I(e){return i.createElement(i.Fragment,null,i.createElement(u.default,{direction:"column",padding:{paddingLeft:"spacing-xs"}},i.createElement(p.default,{type:"para",hasBottomSpacing:!0},"Connect your CI tools to view your builds"),i.createElement(g.default,{integrationClasses:e.integrationClasses,model:e.model,promoteTab:e.promoteTab,addIntegrationRouteParams:e.addIntegrationRouteParams,addIntegrationQueryParams:e.addIntegrationQueryParams})))}let _=(0,r.observer)(o=class extends i.Component{constructor(e){super(e)}render(){const{authenticationInstance:e,integrationClasses:t,model:n,promoteTab:o,addIntegrationRouteParams:s,addIntegrationQueryParams:r}=this.props,a=e.service,{oneClickSupportedIntegrations:l,nonOneClickIntegrations:c}=function(e,t){return v.reduce(e,((e,n)=>{const o=n.id;return v.includes(d.default.SUPPORTED_CLASSES,o)&&v.some(n.services,["id",t])?e.oneClickSupportedIntegrations.push(n):e.nonOneClickIntegrations.push(n),e}),{oneClickSupportedIntegrations:[],nonOneClickIntegrations:[]})}(t,a),m=v.find(v.get(l,"0.services"),["id",a]);return d.default.isOneClickCreationEnabled()&&!v.isEmpty(l)&&v.get(n,"apiRepositoryStore.apiVersionRepositoryInterface.remoteGitConfigured",!0)?i.createElement(i.Fragment,null,i.createElement(u.default,{direction:"column",padding:"spacing-xs",gap:"spacing-m"},i.createElement(p.default,{type:"para",lineLengthType:"none"},"You are authenticated with ",m.name,". Complete setup of ",l[0].name," to view builds from within Postman."),i.createElement(g.default,{integrationClasses:l,model:n,promoteTab:o,addIntegrationRouteParams:s,addIntegrationQueryParams:r,oneClickFlow:!0})),c.length&&i.createElement(i.Fragment,null,i.createElement(u.default,{direction:"column",padding:"spacing-xs",gap:"spacing-m"},i.createElement(p.default,{type:"para"},"Other CI providers:"),i.createElement(g.default,{integrationClasses:c,model:n,promoteTab:o,addIntegrationRouteParams:s,addIntegrationQueryParams:r})))):i.createElement(I,{integrationClasses:t,model:n,promoteTab:o,addIntegrationRouteParams:s,addIntegrationQueryParams:r})}})||o,E=(0,r.observer)(s=class extends i.Component{constructor(e){super(e),this.state={sanitizedRouteParams:{},sanitizedQueryParams:{}},this.store=(0,a.resolveStoreInstance)(l.default)}setBaseRouteAndQueryParamsForAddIntegration(){const{model:e}=this.props,t=v.get(e,"apiId"),n={apiId:t,versionId:v.get(e,"id")};(0,b.getSanitizedRouteAndQueryParamsForV10APIUrls)(n,{},t).then((([e,t])=>{this.setState({sanitizedRouteParams:e,sanitizedQueryParams:t})}))}render(){const e=v.get(this.store.authenticationInstances,"0"),t=v.isEmpty(e)?I:_,{sanitizedRouteParams:n,sanitizedQueryParams:o}=this.state;return i.createElement("div",{className:"service-details-view-container-wrapper"},i.createElement(f.default,{containerTitle:i.createElement(i.Fragment,null,"Automate"),containerBody:i.createElement(i.Fragment,null,i.createElement(u.default,{direction:"column",padding:"spacing-xs spacing-xl",gap:"spacing-xl"},i.createElement(u.default,{direction:"column",padding:"spacing-l spacing-l spacing-zero spacing-xs",border:{borderTop:"border-width-default"},grow:1},i.createElement(p.default,{type:"para",hasBottomSpacing:!0},"Generate a snippet to run your tests on the Postman CLI, locally or on your CI tool."),i.createElement(m.default,null,i.createElement(h.default,{type:"outline",text:"Run on Local Environment",onClick:()=>{const{model:e}=this.props,t=(0,a.resolveStoreInstance)(c.default).find(e.apiId);(0,y.openConfigurePostmanCLIInTab)({isMigrated:null==t?void 0:t.isMigrated,apiId:e.apiId,versionId:e.id,queryParams:{rule:"local"}})}}),i.createElement(h.default,{type:"outline",text:"Generate CI Configuration",onClick:()=>{const{model:e}=this.props,t=(0,a.resolveStoreInstance)(c.default).find(e.apiId);(0,y.openConfigurePostmanCLIInTab)({isMigrated:null==t?void 0:t.isMigrated,apiId:e.apiId,versionId:e.id})}}))),i.createElement(t,{integrationClasses:this.props.integrationClasses,authenticationInstance:e,model:this.props.model,promoteTab:this.props.promoteTab,addIntegrationRouteParams:n,addIntegrationQueryParams:o})))}))}})||s},"./integrations/ci-cd/customHooks/useAPIName.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("./api-dev/interfaces/APIInterface.js"),i=n("./integrations/ci-cd/constants.ts");function r(e){const[t,n]=(0,o.useState)(i.API_SCHEMA_DEFAULT_NAME);return(0,o.useEffect)((()=>{(0,s.getAPI)(e).then((({name:e})=>{n(e||i.API_SCHEMA_DEFAULT_NAME)})).catch((t=>{pm.logger.error(`BuildsTable~getAPI- Error while fetching API name for ${e} from getAPI`,t),n(i.API_SCHEMA_DEFAULT_NAME)}))}),[e]),t}},"./integrations/ci-cd/helpers.js":function(e,t,n){"use strict";n.r(t),n.d(t,{convertNewmanRunMetrics:function(){return v},getActiveBranchNameFromApiId:function(){return C},getBuildFilterStatus:function(){return f},getCollectionRunStatusSummary:function(){return y},getFilterInlineLabel:function(){return E},getFilteredBuilds:function(){return b},getIconForCIIntegration:function(){return S},getProjectName:function(){return I},getRowIdForBuildsTable:function(){return A},getSanitizedSelectedBranchName:function(){return T},getUniqueItemsFromBuilds:function(){return _}});var o=n("../../node_modules/react/index.js"),s=n("./integrations/ci-cd/constants.ts"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-bitbucket.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-travisci.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-gitlab.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-github.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-circleci.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-jenkins.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-devops.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),m=n("./js/stores/StoreManager.js"),h=n("./api-dev/stores/APIListStore.js"),g=n("./node_modules/lodash/lodash.js");function f(e){return g.get(s.BUILD_STATUS_TO_FILTER_STATUS_MAP,g.lowerCase(e),s.BUILD_FILTER_STATUS.DEFAULT)}function b(e,t,n){return g.filter(e,(e=>!(!g.isEmpty(t)&&!g.includes(t,e.branch))&&!(!g.isEmpty(n)&&!g.includes(n,e.filterStatus))))}function y(e){if(g.isEmpty(e))return{status:"neutral",text:"N/A"};let t=g.size(e),n=g(e).filter((e=>"critical"===g.get(e,"status.status"))).size();return 0===n?{status:"success",text:`${t}/${t} passed`}:{status:"critical",text:`${n}/${t} failed`}}function v(e){let t=g.get(e,"runOverview"),n=g.get(t,"totalDataReceivedInBytes",""),o=g.get(t,"averageResponseTimeInMiliseconds","")+" ms",s=g.get(t,"runDurationInMiliseconds","");n=n<=1024?"1 KB":g.round(n/1024)+" KB",s<1e3?s+=" ms":s=g.round(s/1e3)+" s";const i={name:g.get(t,"collectionName","Collection"),data:n,internalLink:g.get(t,"newmanRunUrl",""),responseTime:o,duration:s,metrics:[{name:"Iterations",status:{totalCount:g.get(t,"statistics.iterations.total",0),failedCount:g.get(t,"statistics.iterations.failed",0)}},{name:"Requests",status:{totalCount:g.get(t,"statistics.requests.total",0),failedCount:g.get(t,"statistics.requests.failed",0)}},{name:"Pre-request Scripts",status:{totalCount:g.get(t,"statistics.prerequestScripts.total",0),failedCount:g.get(t,"statistics.prerequestScripts.failed",0)}},{name:"Test Scripts",status:{totalCount:g.get(t,"statistics.testScripts.total",0),failedCount:g.get(t,"statistics.testScripts.failed",0)}},{name:"Assertions",status:{totalCount:g.get(t,"statistics.assertions.total",0),failedCount:g.get(t,"statistics.assertions.failed",0)}}]};return g.some(g.map(i.metrics,"status.failedCount"),(e=>0!==e))?i.status={status:"critical",text:"Failure"}:i.status={status:"success",text:"Success"},i}function I(e){switch(g.get(e,"rule")){case s.BITBUCKET_PIPELINES_CLASS_ID:case s.TRAVIS_CLASS_ID:return g.get(e,["variables","repository_name"]);case s.GITLAB_SELF_HOSTED_CLASS_ID:case s.GITLAB_CI_CLASS_ID:return g.get(e,["variables","project_name"]);case s.GITHUB_CI_CLASS_ID:return g.get(e,["variables","repository"]);case s.JENKINS_CLASS_ID:return g.get(e,["variables","project"]);case s.DEVOPS_CI_CLASS_ID:return g.get(e,["variables","repository_name"]);case s.CIRCLE_CI_CLASS_ID:const t=g.get(e,["variables","project_slug"]);return g.last(g.split(t,"/"))||""}}function _(e,t){return g(e).map((e=>{const n=g.get(e,t);return{label:n,value:n}})).uniqBy((e=>g.get(e,"value"))).value()}function E(e,t){const n=g.size(e);return 0===n?"":1===n?g.get(g.first(e),"value"):`${n} ${t}`}function S(e){switch(e){case s.BITBUCKET_PIPELINES_CLASS_ID:return o.createElement(i.default,null);case s.TRAVIS_CLASS_ID:return o.createElement(r.default,null);case s.GITLAB_SELF_HOSTED_CLASS_ID:case s.GITLAB_CI_CLASS_ID:return o.createElement(a.default,null);case s.GITHUB_CI_CLASS_ID:return o.createElement(l.default,null);case s.CIRCLE_CI_CLASS_ID:return o.createElement(c.default,null);case s.JENKINS_CLASS_ID:return o.createElement(d.default,null);case s.DEVOPS_CI_CLASS_ID:return o.createElement(u.default,null);default:return o.createElement(p.default,null)}}function C(e){const t=(0,m.resolveStoreInstance)(h.default).find(e),n=g.head(g.get(t,"childEntities.values"));return g.get(n,"apiRepositoryStore.branch")}function T(e,t){let n=t;return t&&g.forEach(e,(e=>{const o=g.split(e,"/");if(e===t)return!1;if(g.size(o)>1){if(g.join(g.slice(o,1),"/")===t)return n=e,!1}})),n}function A(e){return`${g.get(e,"branch")}-${g.get(e,"buildIdentifier")}`}},"./integrations/ci-cd/modals/DeleteIntegrationModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Modals.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=(n("./js/components/base/LoadingIndicator.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts")),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIIntegrationsStore.js");n("./js/stores/CurrentUserStore.js"),n("./js/modules/services/AnalyticsService.js");let p=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={isDeleting:!1},this.store=(0,d.resolveStoreInstance)(u.default),this.integrationsStore=(0,d.resolveStoreInstance)(c.default),this.handleReset=this.handleReset.bind(this)}handleReset(){this.props.handleBack()}render(){const{integrationId:e,ruleId:t,apiVersionId:n}=this.props,{isDeleting:o}=this.state;return i.createElement("div",null,i.createElement(r.Modal,{isOpen:this.props.isOpen,size:"small",onRequestClose:this.props.handleCloseModal},i.createElement(r.ModalHeader,null,"Delete Integration"),i.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),i.createElement(r.ModalFooter,null,i.createElement(a.default,{text:"Delete Integration",className:"ci-cd-modal__delete-button",type:"destructive",isDisabled:o,isLoading:o,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{var o,s;null===(o=this.props)||void 0===o||null===(s=o.onDelete)||void 0===s||s.call(o),this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration is deleted successfully."),this.integrationsStore.refetchTeamIntegrations(),this.store.removeIntegrationInstances(n),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.handleReset()):(pm.toasts.error("Something went wrong while deleting your integration."),pm.logger.error("Something went wrong while deleting your integration",e)),this.props.handleCloseModal()})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while deleting your integration"),pm.logger.error("Error occurred while deleting integration",e),this.props.handleCloseModal()}))}}),i.createElement(a.default,{text:"Cancel",className:"ci-cd-modal__cancel-button",isDisabled:o,type:"secondary",onClick:this.props.handleCloseModal}))))}})||o},"./integrations/ci-cd/modals/RunBuildsModal.js":function(e,t,n){"use strict";n.r(t);var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),d=n("./integrations/ci-cd/services/index.ts"),u=n("./js/modules/services/AnalyticsService.js"),p=n("./integrations/ci-cd/components/Jenkins/constants.js"),m=n("./node_modules/lodash/lodash.js");let h=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={showModal:!0,loadingBranches:!1,errorBranches:"",selectedBranch:null,owner_name:"",repo_name:""},this.triggerBuild=this.triggerBuild.bind(this),this.handleBranch=this.handleBranch.bind(this),this.getTriggerBuildFnAndPayload=this.getTriggerBuildFnAndPayload.bind(this)}handleBranch(e){this.setState({selectedBranch:e})}getTriggerBuildFnAndPayload(e,t,n){let o="triggerBuild",s={branch:{name:n}};return e===p.RULE&&(o="triggerMultiBranchProjectBuild",s={project:`${t}/job/${n}`}),{fn:o,payload:s}}triggerBuild(){this.setState({loadingTriggerBuild:!0,errorTriggerBuild:""});let{integrationId:e,rule:t,project:n,addToast:o}=this.props,{fn:s,payload:i}=this.getTriggerBuildFnAndPayload(t,n,this.state.selectedBranch.value);d.default[t][s](e,i).then((e=>{o({description:"New build triggered successfully! If you don't see the run try refreshing the page",status:"success"}),this.setState({loadingTriggerBuild:!1,errorTriggerBuild:""}),u.default.addEventV2({category:"ci-integration",action:"run-build-complete",label:t,value:1}),this.props.refreshBuilds(),this.props.handleCloseModal()})).catch((e=>{const t=m.get(e,"error.title",""),n=m.get(e,"error.message");o({title:t,description:n||"Something went wrong while triggering build, please try again",status:"error"}),pm.logger.error("Error occurred while fetching builds",e),this.setState({errorTriggerBuild:"Unable to load builds",loadingTriggerBuild:!1}),this.props.handleCloseModal()}))}render(){const{branches:e,loadingBranches:t,errorBranches:n,handleCloseModal:o}=this.props;return s.createElement("div",null,s.createElement(r.Modal,{isOpen:this.props.isOpen,size:"small",onClose:o,className:"rb-modal"},s.createElement(r.ModalHeader,{heading:"Run Build"}),s.createElement(r.ModalContent,{className:"rb-modal__content"},s.createElement("div",{className:"ci-cd-run-builds-modal__dropdown"},s.createElement(a.default,{isClearable:!0,allowCreateNewOption:!0,label:"Branch",placeholder:"Select option",options:e,error:n,isLoading:t,value:this.state.selectedBranch,onChange:this.handleBranch,helperText:"Build run will be triggered on the selected branch"}))),s.createElement(r.ModalFooter,{className:"rb-modal__footer"},s.createElement(l.default,{type:"secondary",size:"medium",onClick:o,className:"run-build-modal-button",text:"Cancel"}),s.createElement(l.default,{type:"primary",size:"medium",isDisabled:!this.state.selectedBranch,isLoading:this.state.loadingTriggerBuild,onClick:this.triggerBuild,className:"run-build-modal-button",text:"Run Build"}))))}})||o;t.default=(0,c.default)(h)},"./integrations/ci-cd/services/BitbucketCI.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./api-dev/services/IntegrationService.js"),i=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/lodash/lodash.js");const a="list_pipelines",l="run_pipeline",c="stop_pipeline",d="list_pipeline_steps",u="newman_template";function p(e){let t="PENDING",n=r.get(e,"name");return n?t=r.get(e,"result.name"):"IN_PROGRESS"===n&&(t="PAUSED"===r.get(e,"stage.name")?"SUCCESSFUL":r.get(e,"stage.name")),t}t.default={fetchRepositories:e=>new Promise(((t,n)=>{s.default.getRepositories(e.tokenId,e.workspaceSlug).then((e=>{if(r.get(e,"repositories")){const n=r.map(e.repositories,(e=>({label:e.name,value:{workspace_uuid:e.owner.id,repo_uuid:e.id,repo_name:e.name}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:e=>new Promise(((t,n)=>{s.default.getOrgs(e).then((e=>{if(r.get(e,"orgs")){const n=r.map(e.orgs,(e=>({label:e.name,value:{workspace_uuid:e.id,workspace_name:e.name}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchAPIRepoLinkDetails:e=>{let t={};return new Promise(((n,o)=>{s.default.getAPIRepoLinkInfo(e).then((e=>{if(e){const{repository:o,tokenId:s,tokenType:i}=e;"bitbucket"===r.get(o,"service")&&"integration_oauth"===i&&(t={project:{slug:r.get(o,"info.id"),name:r.get(o,"info.name")},workspace:{slug:r.get(o,"info.owner.id"),name:r.get(o,"info.owner.name")}}),n(t)}o()})).catch(o)}))},getBranches:e=>Promise.resolve([]),getBuilds:e=>new Promise(((t,n)=>{const s=r.assign({},{inputs:{limit:r.get(e,"limit")}});o.default.triggerIntegrationOnDemand(e.integrationId,a,s).then((e=>{if(e.status&&200===e.status){let n,o=r.get(e,"body.builds",[]),s=r.get(e,"body.showCollectionRuns",!1),a=r.get(e,"body.showBuildSteps",!1),l=r.map(o,(e=>{const t=r.get(e,"collectionRunMetrics")||r.map(r.get(e,"collectionRunData",[]),i.convertNewmanRunMetrics);let o="CREATED";return"COMPLETED"===r.get(e,"state.name")?o=r.get(e,"state.result.name"):"IN_PROGRESS"===r.get(e,"state.name")&&(o="PAUSED"===r.get(e,"state.stage.name")?"SUCCESSFUL":r.get(e,"state.stage.name")),"branch"===r.get(e,"target.ref_type")&&(n=r.get(e,"target.ref_name")),{showCollectionRuns:s,showBuildSteps:a,collectionRunSummary:(0,i.getCollectionRunStatusSummary)(t),collectionRunDetails:t,build_num:"Build "+e.build_number,start_time:e.created_on,branch:n,duration:1e3*e.duration_in_seconds,outcome:o,filterStatus:(0,i.getBuildFilterStatus)(o),pipeline_uuid:e.uuid,buildIdentifier:e.build_number,build_url:`https://bitbucket.org/${e.repository.full_name}/addon/pipelines/home#!/results/${e.build_number}`}}));return t(l)}return n(e)})).catch(n)})),triggerBuild:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{branch:r.get(t,"branch.name")}});o.default.triggerIntegrationOnDemand(e,l,i).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,u).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBuildSteps:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{pipelineUuid:r.get(t,"pipeline_uuid")}});o.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=r.get(e,"body",[]),o=r.map(t,(e=>({name:r.get(e,"name"),status:p(r.get(e,"state")),duration:1e3*r.get(e,"duration_in_seconds")})));return n(o)}return s(e)})).catch(s)})),cancelBuild:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{pipelineUuid:r.get(t,"pipeline_uuid")}});o.default.triggerIntegrationOnDemand(e,c,i).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/Circleci.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./integrations/ci-cd/helpers.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./node_modules/lodash/lodash.js");const a="list_builds",l="trigger_build",c="cancel_build",d="newman_template",u=e=>{let t=r.get(e,"subject",null),n=r.get(e,"workflows.job_name",null),o=r.get(e,"workflows.workflow_name",null),s=r.get(e,"build_num"),i=t||s;return n?i+=": "+n:o&&(i+=": "+o),i};t.default={triggerBuild:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{branchName:r.get(t,"branch.name")}});o.default.triggerIntegrationOnDemand(e,l,i).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),fetchProjects:(e,t,n)=>{const o=t.options,s=r.reduce(r.get(o,"inputs",[]),((t,n,o)=>(t[o]=r.get(e,n,""),t)),{});return new Promise(((e,a)=>{i.default.runServiceAction(o.service,o.serviceActionId,s,t.integrationClass,t.id,n||null).then((t=>{const n=r.get(t,"body",[]),o=r.map(n,(e=>{const t=r.get(e,"username"),n=r.get(e,"vcs_type"),o=r.get(e,"reponame");return{label:`${t}/${o}`,value:`${n}/${t}/${o}`}}));return e(o)})).catch((e=>(pm.logger.error("CircleCI.fetchProjects ~ Error occurred while fetching projects",e),a(e))))}))},getBuilds:e=>new Promise(((t,n)=>{const i={inputs:{offset:e.offset,limit:e.limit}};o.default.triggerIntegrationOnDemand(e.integrationId,a,i).then((e=>{if(e.status&&200===e.status){const n=r.get(e,"body.builds",[]).map((t=>{const n=r.get(t,"status",""),o=r.get(t,"build_num",""),i=r.get(t,"build_url",""),a=r.get(t,"branch",""),l=r.get(t,"start_time",""),c=r.map(r.get(t,"collectionRunData",[]),s.convertNewmanRunMetrics),d=r.get(t,"build_time_millis");return{showCollectionRuns:r.get(e,"body.showCollectionRuns",!1),showBuildSteps:r.get(e,"body.showBuildSteps",!1),collectionRunSummary:(0,s.getCollectionRunStatusSummary)(c),collectionRunDetails:c,build_num:u(t),branch:a,start_time:l,outcome:n,filterStatus:(0,s.getBuildFilterStatus)(n),duration:d,build_url:i,buildNumber:o,buildIdentifier:o}}));return t(n)}return n(e)})).catch((e=>n(e)))})),getNewmanConfig:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,d).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBranches:e=>Promise.resolve([]),cancelBuild:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{buildNumber:r.get(t,"buildNumber")}});o.default.triggerIntegrationOnDemand(e,c,i).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/GitLabCI.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./api-dev/services/IntegrationService.js"),i=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/lodash/lodash.js");const a="list_pipeline",l="run_pipeline",c="stop_pipeline",d="list_pipeline_jobs",u="newman_template";t.default={fetchRepositories:e=>new Promise(((t,n)=>{s.default.getRepositories(e.tokenId,e.workspaceId,e.domain).then((e=>{if(r.get(e,"repositories")){const n=r.map(r.get(e,"repositories"),(e=>({label:e.name,value:{workspaceId:r.toString(r.get(e,"owner.id")),repoId:r.toString(r.get(e,"id")),repoName:r.get(e,"name")}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:(e,t)=>new Promise(((n,o)=>{s.default.getOrgs(e,t).then((e=>{if(r.get(e,"orgs")){const t=r.map(e.orgs,(e=>({label:r.get(e,"name"),value:{workspaceId:r.toString(r.get(e,"id")),workspaceName:r.get(e,"name")}})));return n(t)}return o(e)})).catch((e=>o(e)))})),fetchAPIRepoLinkDetails:e=>new Promise(((t,n)=>{s.default.getAPIRepoLinkInfo(e).then((e=>{if(e){let{repository:n}=e,o=null;"gitlab"===r.get(n,"service")&&(o={project:{id:r.get(n,"info.id"),name:r.get(n,"info.name")},workspace:{id:r.get(n,"info.owner.id"),name:r.get(n,"info.owner.name")}}),t(o)}})).catch(n)})),getBranches:e=>Promise.resolve([]),getBuilds:e=>new Promise(((t,n)=>{const s=r.assign({},{inputs:{limit:r.get(e,"limit")}});o.default.triggerIntegrationOnDemand(e.integrationId,a,s).then((e=>{if(e.status&&200===e.status){let n=r.get(e,"body.builds",[]),o=r.get(e,"body.showCollectionRuns",!1),s=r.get(e,"body.showBuildSteps",!1),a=r.map(n,(e=>{const t=r.get(e,"status","created"),n=r.map(r.get(e,"collectionRunData",[]),i.convertNewmanRunMetrics);return{showCollectionRuns:o,showBuildSteps:s,collectionRunSummary:(0,i.getCollectionRunStatusSummary)(n),collectionRunDetails:n,build_num:"Build "+r.get(e,"iid"),start_time:r.get(e,"created_at"),branch:r.get(e,"ref"),duration:1e3*r.get(e,"duration",0),outcome:t,filterStatus:(0,i.getBuildFilterStatus)(t),pipelineId:r.get(e,"id"),build_url:r.get(e,"web_url"),buildIdentifier:r.get(e,"id")}}));return t(a)}return n(e)})).catch(n)})),triggerBuild:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{target_branch:r.get(t,"branch.name")}});o.default.triggerIntegrationOnDemand(e,l,i).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,u).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBuildSteps:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{pipelineId:r.get(t,"pipelineId")}});o.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=r.get(e,"body",[]),o=r.map(t,(e=>({name:r.get(e,"name"),status:r.get(e,"status"),duration:1e3*r.get(e,"duration")})));return n(o)}return s(e)})).catch(s)})),cancelBuild:(e,t)=>new Promise(((n,s)=>{const i=r.assign({},{inputs:{pipelineId:r.get(t,"pipelineId")}});o.default.triggerIntegrationOnDemand(e,c,i).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/GithubCI.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./api-dev/services/IntegrationService.js"),i=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/moment/moment.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");const c="list_workflow_runs",d="get_workflow_jobs",u="cancel_workflow_run",p="newman_template",m=e=>l.get(e,"conclusion")?l.get(e,"created_at")?a()(l.get(e,"updated_at")).diff(a()(l.get(e,"created_at"))):l.get(e,"started_at")?a()(l.get(e,"completed_at")).diff(a()(l.get(e,"started_at"))):void 0:0,h=e=>"workflow_dispatch"==l.get(e,"event")?l.get(e,"name")+" #"+l.get(e,"run_number"):l.get(e,["head_commit","message"])+" - "+l.get(e,"name")+" #"+l.get(e,"run_number");t.default={fetchRepositories:e=>new Promise(((t,n)=>{const{tokenId:o,workspace:i,domain:r}=e;s.default.getRepositories(o,i,r).then((e=>{if(l.get(e,"repositories")){const n=l.map(l.get(e,"repositories"),(e=>({label:e.name,value:e.id})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:(e,t)=>new Promise(((n,o)=>{s.default.getOrgs(e,t).then((e=>{if(l.get(e,"orgs")){const t=l.map(e.orgs,(e=>({label:l.get(e,"name"),value:l.get(e,"name")})));return n(t)}return o(e)})).catch((e=>o(e)))})),fetchAPIRepoLinkDetails:e=>new Promise(((t,n)=>{s.default.getAPIRepoLinkInfo(e).then((e=>{if(e){let{repository:n}=e,o=null;"github"===l.get(n,"service")&&(o={project:{id:l.get(n,"info.id"),name:l.get(n,"info.name")},workspace:{id:l.get(n,"info.owner.id"),name:l.get(n,"info.owner.name")}}),t(o)}})).catch(n)})),getBranches:e=>Promise.resolve([]),getBuilds:({limit:e,integrationId:t})=>new Promise(((n,s)=>{const r=l.assign({},{inputs:{limit:e}});o.default.triggerIntegrationOnDemand(t,c,r).then((e=>{if(e.status&&200===e.status){let t=l.get(e,"body.workflow_runs",[]),o=l.get(e,"body.showCollectionRuns",!1),s=l.get(e,"body.showBuildSteps",!1),r=l.map(t,(e=>{const t=l.get(e,"conclusion")||l.get(e,"status"),n=l.map(l.get(e,"collectionRunData",[]),i.convertNewmanRunMetrics);return{showCollectionRuns:o,showBuildSteps:s,collectionRunSummary:(0,i.getCollectionRunStatusSummary)(n),collectionRunDetails:n,build_num:h(e),start_time:l.get(e,"created_at"),branch:l.get(e,"head_branch"),duration:m(e),outcome:t,filterStatus:(0,i.getBuildFilterStatus)(t),runId:l.get(e,"id"),build_url:l.get(e,"html_url"),buildIdentifier:l.get(e,"run_number")}}));return n(r)}return s(e)})).catch(s)})),getBuildSteps:(e,{runId:t})=>new Promise(((n,s)=>{const i=l.assign({},{inputs:{runId:t}});o.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=l.get(e,"body.jobs",[]),o=l.map(t,(e=>({name:l.get(e,"name"),status:l.get(e,"conclusion")||l.get(e,"status"),duration:m(e)})));return n(o)}return s(e)})).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,p).then((e=>e.status&&200===e.status?t(l.get(e,"body")):n(e))).catch(n)})),cancelBuild:(e,{runId:t})=>new Promise(((n,s)=>{const i=l.assign({},{inputs:{runId:t}});o.default.triggerIntegrationOnDemand(e,u,i).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)}))}},"./integrations/ci-cd/services/JenkinsCI.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./js/modules/services/AnalyticsService.js"),a=n("./integrations/ci-cd/components/Jenkins/constants.js"),l=n("./integrations/ci-cd/helpers.js");t.default={validateUser:e=>new Promise(((t,n)=>{const o=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.VALIDATE_USER,rule:a.RULE},s().pick(e,["host_url","username","auth_token"]));i.default.fetchActionDetailsWithoutIntegration(o).then((e=>200===e.status?t():n(e))).catch(n)})),getProjects:e=>new Promise(((t,n)=>{const o=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.GET_PROJECTS,rule:a.RULE},s().pick(e,["host_url","username","auth_token"]));i.default.fetchActionDetailsWithoutIntegration(o).then((e=>{if(200===e.status&&s().get(e,"body")){const n=s().map(e.body,(e=>({label:e.name,value:e.name,type:s()(e._class).split(".").last()})));return t(n)}return r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e)})).catch((e=>(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e))))})),getProjectsByIntegrationId:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.GET_PROJECTS).then((e=>{if(200===e.status&&s().get(e,"body")){const n=s().map(e.body,(e=>({label:e.name,value:e.name,type:s()(e._class).split(".").last()})));return t(n)}return n(e)})).catch(n)})),getProjectInfo:e=>new Promise(((t,n)=>{const o=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.GET_PROJECT,rule:a.RULE},s().pick(e,["host_url","username","auth_token","project"]));i.default.fetchActionDetailsWithoutIntegration(o).then((e=>200===e.status&&s().get(e,"body")?t(s().get(e,"body")):(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e)))).catch((e=>(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e))))})),getProjectInfoByIntegrationId:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.GET_PROJECT).then((e=>e.status&&200===e.status?t(s().get(e,"body")):n(e))).catch(n)})),getBuilds:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e.integrationId,a.ON_DEMAND_TRIGGER_ACTIONS.GET_BUILDS,{inputs:s().pick(e,["offset","limit"])}).then((e=>{const o=s().get(e,"body.showCollectionRuns",!1),i=s().get(e,"body.showBuildSteps",!1);if(200===e.status&&s().get(e,"body")){const n=s().map(s().get(e,"body.builds",[]),(e=>{const t=e.result||(e.building?a.STATUS_BUILD_IN_PROGRESS:""),n=s().get(e,"collectionRunMetrics")||s().map(s().get(e,"collectionRunData",[]),l.convertNewmanRunMetrics);return s().assign({},{name:"Build "+e.id,status:t,filterStatus:(0,l.getBuildFilterStatus)(t),url:e.url+"console",collectionRunSummary:(0,l.getCollectionRunStatusSummary)(n),collectionRunDetails:n,showCollectionRuns:o,showBuildSteps:i,buildIdentifier:e.number},s().pick(e,["branch","timestamp","duration"]))}));return t(n)}return n(e)})).catch(n)})),getMultiBranchProjectBuilds:(e,t)=>new Promise(((n,o)=>{i.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.GET_BUILDS,{inputs:s().pick(t,["project","offset","limit"])}).then((e=>{const t=s().get(e,"body.showCollectionRuns",!1),i=s().get(e,"body.showBuildSteps",!1);if(200===e.status&&s().get(e,"body")){const o=s().map(s().get(e,"body.builds",[]),(e=>{const n=e.result||(e.building?a.STATUS_BUILD_IN_PROGRESS:"");return s().assign({},{name:"Build "+e.id,status:n,filterStatus:(0,l.getBuildFilterStatus)(n),url:e.url+"console",collectionRunSummary:(0,l.getCollectionRunStatusSummary)(s().get(e,"collectionRunMetrics")),collectionRunDetails:s().get(e,"collectionRunMetrics"),showCollectionRuns:t,showBuildSteps:i,buildIdentifier:e.number},s().pick(e,["branch","timestamp","duration"]))}));return n(o)}return o(e)})).catch(o)})),triggerBuild:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.TRIGGER_BUILD).then((e=>e.status&&200===e.status?t(e):n(e))).catch(n)})),triggerMultiBranchProjectBuild:(e,t)=>new Promise(((n,o)=>{i.default.triggerIntegrationOnDemand(e,a.ON_DEMAND_TRIGGER_ACTIONS.TRIGGER_BUILD,{inputs:s().pick(t,["project"])}).then((e=>e.status&&200===e.status?n(e):o(e))).catch(o)})),getNewmanConfig:e=>new Promise(((t,n)=>{const o=s().assign({},a.SERVICE_ACTION_PAYLOAD,{action:a.SERVICE_ACTIONS.GET_NEWMAN_CONFIG});i.default.fetchActionDetails(e,o).then((e=>{if(e.status&&200===e.status){let n=s().get(e,"body.data",[]);return t(n)}return n(e)})).catch(n)})),getBranches:e=>Promise.resolve([])}},"./integrations/ci-cd/services/TravisCI.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./integrations/ci-cd/helpers.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./node_modules/moment/moment.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");const c="list_builds",d="list_build_jobs",u="cancel_build",p="trigger_build",m="newman_template";t.default={triggerBuild:(e,t)=>{const n={inputs:{branchName:l.get(t,"branch.name")}};return o.default.triggerIntegrationOnDemand(e,p,n).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},getBuilds:e=>{const t={inputs:{offset:e.offset,limit:e.limit}};return o.default.triggerIntegrationOnDemand(e.integrationId,c,t).then((e=>{const t=l.get(e,"body.showBuildSteps",!1),n=l.get(e,"body.showCollectionRuns",!1);if(e.status&&200===e.status){const o=l.get(e,"body.builds",[]),i=l.map(o,(e=>{const o=l.get(e,"commit.message",""),i=l.map(l.get(e,"collectionRunData",[]),s.convertNewmanRunMetrics),r=l.get(e,"id",""),a=l.get(e,"branch.name",""),c=l.get(e,"started_at",""),d=l.get(e,"state",""),u=1e3*l.get(e,"duration",0),p=`https://app.travis-ci.com/${l.get(e,"repository.slug","")}/build/${l.get(e,"id")}`;return{buildId:r,collectionRunSummary:(0,s.getCollectionRunStatusSummary)(i),collectionRunDetails:i,build_num:o,branch:a,start_time:c,outcome:d,filterStatus:(0,s.getBuildFilterStatus)(d),duration:u,build_url:p,showBuildSteps:t,showCollectionRuns:n,buildIdentifier:l.get(e,"number","")}}));return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},getBuildSteps:(e,t)=>new Promise(((n,s)=>{const i=l.assign({},{inputs:{buildId:l.get(t,"buildId")}});o.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=l.get(e,"body.jobs",[]),o=l.map(t,(e=>{const t=l.get(e,"number",""),n=l.get(e,"started_at",""),o=l.get(e,"finished_at",""),s=n&&o?a()(o)-a()(n):null,i=l.get(e,"stage.name","");return{name:i?`${i} - ${t}`:t,status:l.get(e,"state"),duration:s}}));return n(o)}return s(e)})).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,m).then((e=>e.status&&200===e.status?t(l.get(e,"body")):n(e))).catch(n)})),cancelBuild:(e,t)=>new Promise(((n,s)=>{const i=l.assign({},{inputs:{buildId:l.get(t,"buildId")}});o.default.triggerIntegrationOnDemand(e,u,i).then((e=>e.status&&200===e.status?n(!0):s(!1))).catch(s)})),fetchProjects:(e,t,n)=>{e.travisci_domain=e.travisci_domain||"com";const o=t.options,s=l.reduce(l.get(o,"inputs",[]),((t,n,o)=>(t[o]=l.get(e,n,""),t)),{});return new Promise(((e,r)=>{i.default.runServiceAction(o.service,o.serviceActionId,s,t.integrationClass,t.id,n||null).then((t=>{const n=l.get(t,"body.repositories",[]),s=l.map(n,(e=>({label:l.get(e,l.get(o,"labelPath","")),value:l.toString(l.get(e,l.get(o,"valuePath","")))})));return e(s)})).catch((e=>(pm.logger.error("TravisCI.fetchProjects ~ Error occurred while fetching projects",e),r(e))))}))},getBranches:e=>Promise.resolve([])}},"./integrations/ci-cd/stores/APIIntegrationsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var o,s,i,r,a,l,c,d,u,p,m,h,g,f,b,y,v,I,_,E,S,C,T,A,j,w,O,N,R,P,D,M,x,L=n("../../node_modules/mobx/lib/mobx.module.js"),k=n("./node_modules/lodash/lodash.js"),F=n.n(k),B=n("./js/stores/StoreManager.js"),U=n("./js/stores/SyncStatusStore.js"),V=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),G=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),z=n("./js/stores/IntegrationsStore.js"),H=n("./integrations/ci-cd/constants.ts"),W=n("./integrations/ci-cd/services/index.ts"),q=n("./node_modules/async/dist/async.js"),K=n.n(q),$=n("./integrations/services/AuthenticationInstanceService.ts");function Y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function J(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const X={[H.CI_CD_BUILDS]:"apiversion"},Q={[H.CI_CD_BUILDS]:"continuous-integration"};let Z=(s=J((o=class{constructor(){Y(this,"isHydrating",s,this),Y(this,"availableIntegrations",i,this),Y(this,"configuredIntegrations",r,this),Y(this,"categoryIntegrations",a,this),Y(this,"activeRule",l,this),Y(this,"activeService",c,this),Y(this,"errorAvailableIntegrations",d,this),Y(this,"errorConfiguredIntegrations",u,this),Y(this,"loadingAvailableIntegrations",p,this),Y(this,"loadingConfiguredIntegrations",m,this),Y(this,"isAuthenticationError",h,this),Y(this,"selectedAPI",g,this),Y(this,"selectedAPIVersion",f,this),Y(this,"selectedService",b,this),Y(this,"selectedRule",y,this),Y(this,"category",v,this),Y(this,"isAdding",I,this),Y(this,"builds",_,this),Y(this,"loadingBuilds",E,this),Y(this,"errorBuilds",S,this),Y(this,"branches",C,this),Y(this,"loadingBranches",T,this),Y(this,"errorBranches",A,this),Y(this,"loadingBuildsPage",j,this),Y(this,"errorBuildsPage",w,this),Y(this,"isIntegrationSupported",O,this),Y(this,"authenticationInstances",N,this),Y(this,"loadingAuthenticationInstances",R,this),Y(this,"errorAuthenticationInstances",P,this),Y(this,"integrationInstance",D,this),Y(this,"integrationClass",M,this),Y(this,"loadingIntegrationInstanceAndClass",x,this),this.integrationsStore=(0,B.resolveStoreInstance)(z.default)}initializeApiIntegrationsStore(e){(0,B.resolveStoreInstance)(U.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:o}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(o),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(n,X[o],[Q[o]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiIntegrationsStoreV2(e){(0,B.resolveStoreInstance)(U.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:o}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(o),this.fetchConfiguredIntegrations(n,X[o],[Q[o]])})).catch((e=>{pm.logger.error("APIObservabilityStore~initializeApiIntegrationsStoreV2~Error while initialising APIObservabilityStore: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}setActiveCategory(e){this.category=e}setActiveService(e){this.activeService=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,X[this.category],[Q[this.category]])}getAvailableIntegrations(){return(0,L.toJS)(this.availableIntegrations)}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){this.categoryIntegrations=e}getConfiguredIntegrations(e){return(0,L.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,L.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=Q[this.category];F().forEach((0,L.toJS)(this.availableIntegrations),(n=>{const o={},s=n.integrations[n.id];F().forEach(s,((e,n)=>{e.client_categories.includes(t)&&(o[n]=e)})),F().isEmpty(o)||(n.integrations[n.id]={...o},e.push(n))})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(e){this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),V.default.getAvailableIntegrations().then((t=>{const n=F().get(t,"body.services",[]);if(200!==t.status||F().isEmpty(n))throw t;this.updateAvailableIntegrations(F().map(n,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1),F().isFunction(e)&&e(null)})).catch((t=>{this.updateErrorAvailableIntegrations((0,L.toJS)(t)),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations"),F().isFunction(e)&&e(t)}))}fetchConfiguredIntegrations(e,t,n,o){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),V.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,n).then((e=>{this.updateConfiguredIntegrations(e[n[0]]),this.updateLoadingConfiguredIntegrations(!1),F().isFunction(o)&&o(null)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations"),F().isFunction(o)&&o(e)}))}updateBuildsStatus(e,t,n,o){t&&(this.builds[e]=t),this.errorBuilds=n,this.loadingBuilds=o}updateBranchesStatus(e,t,n){e&&(this.branches=e),this.errorBuilds=t,this.loadingBuilds=n}setIsAuthenticationError(e){this.isAuthenticationError=e}fetchBuilds(e,t,n){let o=W.default[t];if(!o||!F().isFunction(o.getBuilds)){let e=new Error;return e.name="integrationNotSupported",n(e)}this.updateBuildsStatus(e,[],null,!0),o.getBuilds({integrationId:e,offset:0,limit:100}).then((t=>{this.updateBuildsStatus(e,t||[],null,!1),this.setIsAuthenticationError(!1),F().isFunction(n)&&n(null)})).catch((t=>{const o=F().get(t,"error.details.statusCode",-1);401!==o&&403!==o||this.setIsAuthenticationError(!0),this.updateBuildsStatus(e,null,t,!1),F().isFunction(n)&&n(t)}))}fetchBranches(e,t,n){let o=W.default[t];if(!o||!F().isFunction(o.getBranches)){let e=new Error;return e.name="integrationNotSupported",n(e)}this.updateBranchesStatus([],null,!0),o.getBranches(e).then((e=>{this.updateBranchesStatus(e||[],null,!1),F().isFunction(n)&&n(null)})).catch((e=>{this.updateBranchesStatus(null,e,!1),F().isFunction(n)&&n(e)}))}clearBuilds(){this.builds=[],this.errorBuilds=null}clearBranches(){this.branches=[],this.errorBranches=null}updateStatusBuildsPage(e,t,n){this.loadingBuildsPage=t,this.errorBuildsPage=e,this.isIntegrationSupported=n}initialiseBuildsPage(e,t){this.updateStatusBuildsPage(null,!0),K().series([n=>{this.fetchBuilds(e,t,n)},n=>{this.fetchBranches(e,t,n)}],(e=>{"integrationNotSupported"===F().get(e,"name")?this.updateStatusBuildsPage(null,!1,!1):this.updateStatusBuildsPage(e,!1,!0)}))}setloadingAuthenticationInstances(e){this.loadingAuthenticationInstances=e}setErrorAuthenticationInstances(e){this.errorAuthenticationInstances=e}setAuthenticationInstances(e){this.authenticationInstances=e}fetchAuthenticationInstances(e){pm.logger.info("APIIntegrationsStore~Initializing fetching auth instances: ",e),this.setloadingAuthenticationInstances(!0),this.setErrorAuthenticationInstances(null),$.default.listAuthenticationInstancesOnApi(e).then((({body:e})=>{F().isNil(e.data)?pm.logger.error("Error loading authentication instances! Received null response!",{body:e}):pm.logger.info("APIIntegrationsStore~Successfully fetched auth instances: ",e),this.setAuthenticationInstances(e.data||[]),this.setloadingAuthenticationInstances(!1)})).catch((e=>{pm.logger.error("APIIntegrationsStore~Something went wrong while fetching authentication instances: ",e),this.setloadingAuthenticationInstances(!1),this.setErrorAuthenticationInstances(e)}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await G.default.getConfiguredIntegrationsForAnEntity(e,t,[H.CI_CD_CLIENT_CATEGORY]);let o=F().get(n,"body.data",[]),s=F().map(o,"class"),i=[];if(!F().isEmpty(s)){const e=this.integrationsStore.getIntegrationClasses(),t=s[0];i=F().find(e,(e=>e.id===t))}this.updateIntegrationClass([i],t),this.updateIntegrationInstance(o,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIIntegrationsStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=J(o.prototype,"availableIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=J(o.prototype,"configuredIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=J(o.prototype,"categoryIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n("./integrations/ci-cd/stores/fixture.json")}}),l=J(o.prototype,"activeRule",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=J(o.prototype,"activeService",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=J(o.prototype,"errorAvailableIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=J(o.prototype,"errorConfiguredIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=J(o.prototype,"loadingAvailableIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=J(o.prototype,"loadingConfiguredIntegrations",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=J(o.prototype,"isAuthenticationError",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=J(o.prototype,"selectedAPI",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=J(o.prototype,"selectedAPIVersion",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=J(o.prototype,"selectedService",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=J(o.prototype,"selectedRule",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=J(o.prototype,"category",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=J(o.prototype,"isAdding",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=J(o.prototype,"builds",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=J(o.prototype,"loadingBuilds",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=J(o.prototype,"errorBuilds",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=J(o.prototype,"branches",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=J(o.prototype,"loadingBranches",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=J(o.prototype,"errorBranches",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=J(o.prototype,"loadingBuildsPage",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=J(o.prototype,"errorBuildsPage",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=J(o.prototype,"isIntegrationSupported",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=J(o.prototype,"authenticationInstances",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=J(o.prototype,"loadingAuthenticationInstances",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=J(o.prototype,"errorAuthenticationInstances",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=J(o.prototype,"integrationInstance",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),M=J(o.prototype,"integrationClass",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=J(o.prototype,"loadingIntegrationInstanceAndClass",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),J(o.prototype,"initializeApiIntegrationsStore",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"initializeApiIntegrationsStore"),o.prototype),J(o.prototype,"setActiveCategory",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveCategory"),o.prototype),J(o.prototype,"setActiveService",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveService"),o.prototype),J(o.prototype,"setActiveRule",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveRule"),o.prototype),J(o.prototype,"setSelectedAPI",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedAPI"),o.prototype),J(o.prototype,"setSelectedAPIVersion",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedAPIVersion"),o.prototype),J(o.prototype,"setSelectedRule",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedRule"),o.prototype),J(o.prototype,"setSelectedService",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedService"),o.prototype),J(o.prototype,"updateLoadingAvailableIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateLoadingAvailableIntegrations"),o.prototype),J(o.prototype,"updateLoadingConfiguredIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateLoadingConfiguredIntegrations"),o.prototype),J(o.prototype,"updateErrorAvailableIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateErrorAvailableIntegrations"),o.prototype),J(o.prototype,"updateErrorConfiguredIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateErrorConfiguredIntegrations"),o.prototype),J(o.prototype,"updateAvailableIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateAvailableIntegrations"),o.prototype),J(o.prototype,"updateSelectedAPIVersion",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateSelectedAPIVersion"),o.prototype),J(o.prototype,"updateConfiguredIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateConfiguredIntegrations"),o.prototype),J(o.prototype,"updateCategoryIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateCategoryIntegrations"),o.prototype),J(o.prototype,"getConfiguredIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"getConfiguredIntegrations"),o.prototype),J(o.prototype,"updateIsHydrating",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIsHydrating"),o.prototype),J(o.prototype,"updateIsAdding",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIsAdding"),o.prototype),J(o.prototype,"findIntegrationsByCategory",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"findIntegrationsByCategory"),o.prototype),J(o.prototype,"fetchAvailableIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchAvailableIntegrations"),o.prototype),J(o.prototype,"fetchConfiguredIntegrations",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchConfiguredIntegrations"),o.prototype),J(o.prototype,"updateBuildsStatus",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateBuildsStatus"),o.prototype),J(o.prototype,"updateBranchesStatus",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateBranchesStatus"),o.prototype),J(o.prototype,"setIsAuthenticationError",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsAuthenticationError"),o.prototype),J(o.prototype,"fetchBuilds",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchBuilds"),o.prototype),J(o.prototype,"fetchBranches",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchBranches"),o.prototype),J(o.prototype,"clearBuilds",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"clearBuilds"),o.prototype),J(o.prototype,"clearBranches",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"clearBranches"),o.prototype),J(o.prototype,"updateStatusBuildsPage",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateStatusBuildsPage"),o.prototype),J(o.prototype,"initialiseBuildsPage",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"initialiseBuildsPage"),o.prototype),J(o.prototype,"setloadingAuthenticationInstances",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setloadingAuthenticationInstances"),o.prototype),J(o.prototype,"setErrorAuthenticationInstances",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setErrorAuthenticationInstances"),o.prototype),J(o.prototype,"setAuthenticationInstances",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setAuthenticationInstances"),o.prototype),J(o.prototype,"fetchAuthenticationInstances",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchAuthenticationInstances"),o.prototype),J(o.prototype,"fetchIntegrationInstance",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchIntegrationInstance"),o.prototype),J(o.prototype,"updateIntegrationInstance",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationInstance"),o.prototype),J(o.prototype,"updateIntegrationClass",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationClass"),o.prototype),J(o.prototype,"setLoadingIntegrationInstancesAndClass",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingIntegrationInstancesAndClass"),o.prototype),J(o.prototype,"resetPowerUpVariables",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"resetPowerUpVariables"),o.prototype),J(o.prototype,"removeIntegrationInstances",[L.action],Object.getOwnPropertyDescriptor(o.prototype,"removeIntegrationInstances"),o.prototype),o)},"./integrations/ci-cd/stores/APIRunInfoStore.js":function(e,t,n){"use strict";n.r(t);n("./node_modules/lodash/lodash.js");var o,s,i=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("./js/utils/PostmanGatewayService.js");function a(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const l=pm.logger.getContext("APIRunInfoStore","api-governance");let c=(s=a((o=class{constructor(){!function(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}(this,"apiSchemaScanDetailsMap",s,this)}async fetchAPISchemaScanResults(e,t,n){try{const o=`${t}-${n}`;if(this.apiSchemaScanDetailsMap.has(e)&&this.apiSchemaScanDetailsMap.get(e).has(o))return Promise.resolve(this.apiSchemaScanDetailsMap.get(e).get(o));const s=await r.default.request("/ws/proxy",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:"/governance/ci/builds",service:"ruleset",method:"get",query:{branch:n,buildId:t,populate:"results",integrationId:e}})},{returnRawResponse:!0});if(!s.ok)return Promise.reject(await s.json());const i=await s.json();return this.apiSchemaScanDetailsMap.has(e)||this.apiSchemaScanDetailsMap.set(e,new Map),this.apiSchemaScanDetailsMap.get(e).set(o,i),i}catch(e){return pm.logger.error("APIRunInfoStore~fetchAPISchemaScanResults",e,{context:l}),[]}}cleanUp(e){e&&this.apiSchemaScanDetailsMap.delete(e)}}).prototype,"apiSchemaScanDetailsMap",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),a(o.prototype,"fetchAPISchemaScanResults",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchAPISchemaScanResults"),o.prototype),a(o.prototype,"cleanUp",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"cleanUp"),o.prototype),o);t.default=c},"./integrations/ci-cd/timeUtils.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/moment/moment.js"),s=n.n(o),i=n("./node_modules/lodash/lodash.js");t.default={timeDifference:function(e,t){var n=6e4,o=36e5,s=864e5,r=e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*n-e.getHours()*o-(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*n-t.getHours()*o);return 0==r/s?"Today":r/s==1?"Yesterday":i.round(r/s)+" days ago"},timeSince:function(e){if(!e)return"N/A";var t=new Date,n=new Date(e),o=n.getHours()%12||12,s=n.getMinutes()<10?`0${n.getMinutes()}`:n.getMinutes(),i=n.getHours()<12?"am":"pm";return`${this.timeDifference(t,n)}, ${o}:${s} ${i}`},getFormattedDuration:function(e){if(!e||"0"===e)return"N/A";e=parseInt(e);let t=s().duration(e),n=t.hours(),o=t.minutes(),i=t.seconds(),r="";return n>0&&(r+=`${n}h`),o>0&&(r+=` ${o}m`),i>0&&(r+=` ${i}s`),""===r&&(r+=e/1e3+"s"),r}}},"./integrations/components/CodeRepository/CodeRepositoryAuthenticating.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./api-dev/components/api-repo-integration/OAuthLoadingView/OAuthLoadingView.js");let a=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.oauthTimeout,this.waitingTextTimeoutInterval=4e3,this.waitingTextTimeout,this.state={waitingTextEnabled:!1},this.getServiceTitle=this.getServiceTitle.bind(this)}getServiceTitle(){let e=this.props.selectedServiceForAuthorization;switch(e){case"github":return"GitHub";case"gitlab":return"GitLab";case"azure":return"Azure DevOps";default:return e.charAt(0).toUpperCase()+e.slice(1)}}componentDidMount(){this.oauthTimeout=setTimeout((()=>{this.props.handleOauthTimeout()}),this.props.oauthTimeoutInterval),this.waitingTextTimeout=setTimeout((()=>{this.setState({waitingTextEnabled:!0},(()=>{clearTimeout(this.waitingTextTimeout)}))}),this.waitingTextTimeoutInterval)}componentWillUnmount(){clearTimeout(this.oauthTimeout)}render(){return s.createElement(r.default,{serviceName:this.props.selectedServiceForAuthorization,serviceFriendlyName:this.getServiceTitle(),handleOnClose:this.props.handleStop})}})||o},"./integrations/components/CodeRepository/CodeRepositorySelectionPanel.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./integrations/components/CodeRepository/RepositoryServiceCard.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/CurrentUserStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/modules/services/AuthHandlerService.js"),u=n("./js/modules/services/AnalyticsService.js"),p=n("./integrations/components/CodeRepository/CodeRepositoryAuthenticating.js"),m=n("./js/services/ScratchpadService.js"),h=n("./onboarding/src/common/UTMService.js"),g=n("../../packages/api-design/api-design-analytics/index.js"),f=n("./node_modules/lodash/lodash.js");let b=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.state={selectedServiceForAuthorization:""},this.oauthTimeoutInterval=3e4,this.handleSignIn=this.handleSignIn.bind(this),this.handleSignUp=this.handleSignUp.bind(this),this.handleServiceSelection=this.handleServiceSelection.bind(this),this.handleOauthTimeout=this.handleOauthTimeout.bind(this),this.handleWorkspaceSwitch=this.handleWorkspaceSwitch.bind(this)}handleSignIn(){d.default.initiateLogin(),u.default.addEvent("import","import_by_repository","sign_in",1)}handleSignUp(){const e=(0,h.getAllParams)({utm_content:"code_repository_selection_panel",utm_term:"sign_up"});d.default.initiateLogin({isSignup:!0,queryParams:e}),u.default.addEvent("import","import_by_repository","sign_up",1)}handleServiceSelection(e){(0,g.logApiDesignAnalytics)({category:f.get(this.props,"isCreateDefinitionFlow",!1)?g.EVENT_CATEGORIES.CREATE_API_DEFINITION:g.EVENT_CATEGORIES.IMPORT,action:g.EVENT_ACTIONS.IMPORT_MODAL_CHOOSE_REPOSITORY_CLICK,label:`${e}_auth_init`,entityId:f.get(this.props,"isCreateDefinitionFlow",!1)?f.get(this.props,"apiId"):void 0,entityType:f.get(this.props,"isCreateDefinitionFlow",!1)?g.EVENT_ENTITY_TYPES.API:void 0}),this.props.handleConnect(e),this.setState({selectedServiceForAuthorization:e})}getSelectedServiceName(e){return"github"===e?"GitHub":e.charAt(0).toUpperCase()+e.slice(1)}handleWorkspaceSwitch(){this.props.handleCancel(),m.default.switchToWorkspace()}handleOauthTimeout(){this.props.handleStop(),pm.toasts.error(this.getSelectedServiceName(this.state.selectedServiceForAuthorization)+" didn't respond in time. Try again.",{title:"Request Timeout"})}getContent(){return!(0,a.resolveStoreInstance)(l.default).isLoggedIn?s.createElement("div",{className:"entity-empty entity-empty__centered"},s.createElement("div",{className:"entity-empty__illustration-wrapper entity-empty__illustration-wrapper--repository"},s.createElement("div",{className:"code-repository-empty__illustration"})),s.createElement("div",{className:"entity-empty__title"},"Create an account to continue"),s.createElement("div",{className:"entity-empty__subtitle"},"You need to be signed in to import from code repositories."),s.createElement("div",{className:"entity-empty__register"},s.createElement(i.Button,{type:"primary",onClick:this.handleSignUp},s.createElement("span",null,"Create Free Account"))),s.createElement("div",{className:"entity-empty-or__import-code"},s.createElement("div",{className:"entity-empty-line__import-code"}),s.createElement("div",{className:"entity-empty-or-text__import-code"},"OR"),s.createElement("div",{className:"entity-empty-line__import-code"})),s.createElement(i.Button,{className:"entity-empty-sign-in__import-code",type:"text",onClick:this.handleSignIn},"Sign In")):s.createElement("div",null,!this.props.connecting&&s.createElement("div",{className:"entity-empty"},s.createElement("div",{className:"entity-empty__title github-import-title"},"Import from code repository"),s.createElement("div",{className:"entity-empty__subtitle reposelection-import-subtitle"},"Select a Git service to scan for files that can be imported."),s.createElement("div",{className:"entity-empty__connect"},s.createElement(r.default,{handleServiceSelection:this.handleServiceSelection,selectedService:"GitHub",connecting:this.props.connecting,selectedServiceForAuthorization:this.state.selectedServiceForAuthorization}),s.createElement(r.default,{handleServiceSelection:this.handleServiceSelection,selectedService:"Bitbucket",connecting:this.props.connecting,selectedServiceForAuthorization:this.state.selectedServiceForAuthorization}),s.createElement(r.default,{handleServiceSelection:this.handleServiceSelection,selectedService:"GitLab",connecting:this.props.connecting,selectedServiceForAuthorization:this.state.selectedServiceForAuthorization}),s.createElement(r.default,{handleServiceSelection:this.handleServiceSelection,selectedService:"Azure",connecting:this.props.connecting,selectedServiceForAuthorization:this.state.selectedServiceForAuthorization}))),this.props.connecting&&s.createElement(p.default,{connecting:this.props.connecting,selectedServiceForAuthorization:this.state.selectedServiceForAuthorization,handleStop:this.props.handleStop,handleOauthTimeout:this.handleOauthTimeout,oauthTimeoutInterval:this.oauthTimeoutInterval}))}render(){return s.createElement("div",{className:"importers-repository-primary-screen"},this.getContent())}})||o},"./integrations/components/CodeRepository/RepositoryServiceCard.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");let r=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(o=class extends s.Component{constructor(e){super(e),this.state={serviceName:this.props.selectedService.toLowerCase(),serviceLogoPath:"../../../../../assets/images/empty-state/"},this.buildServiceLogoPath=this.buildServiceLogoPath.bind(this)}buildServiceLogoPath(){return this.state.serviceLogoPath+this.state.serviceName+"_logo.png"}render(){return s.createElement("div",{onClick:()=>this.props.handleServiceSelection(this.state.serviceName),className:"repository-card"},s.createElement("div",{className:"repository-card-logo-wrapper"},s.createElement("div",{className:`repository-card-logo__${this.state.serviceName}`})),s.createElement("div",{className:"repository-card-title"},this.props.selectedService),s.createElement("div",{className:"repository-card-loading-wrapper"},s.createElement(i.default,{name:"icon-action-openWeb-stroke",color:"content-color-primary"})))}})||o},"./integrations/components/ConfigurationsComponent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("./js/components/base/ToggleSwitch.js"),a=n("./js/components/base/Inputs.js"),l=n("./js/components/base/Markdown.js"),c=n("./js/components/base/Dropdowns.js"),d=n("./js/components/base/Buttons.js"),u=n("./node_modules/classnames/index.js"),p=n.n(u),m=n("./node_modules/prop-types/index.js"),h=n.n(m);class g extends o.Component{constructor(e){super(e),this.state={},this.onSubmit=this.onSubmit.bind(this),this.onChange=this.onChange.bind(this),this.renderOptions=this.renderOptions.bind(this),this.getListItemClasses=this.getListItemClasses.bind(this),this.delayedSubmit=i().debounce(this.onSubmit,500)}componentDidMount(){var e=this.props.optionsPreference||{};(this.props.optionsArray||[]).forEach((t=>{this.setState({[t.id]:void 0!==e[t.id]?e[t.id]:t.default})}))}getListItemClasses(e){let t="item--"+e;return p()({"options-list-item":!0,[t]:!0})}onChange(e,t,n){if("positiveinteger"===t){let e=parseInt(n);n=isNaN(e)?0:e}this.setState({[e]:n}),this.delayedSubmit()}onSubmit(){this.props.onSubmit&&this.props.onSubmit(this.state)}renderOptions(){let e;return this.props.optionsArray.map((t=>{let n=t.id,s=t.name,i=t.type,u=t.description;switch(i="string"==typeof i?i.toLowerCase():i,i){case"boolean":e=o.createElement(r.default,{isActive:this.state[n],onClick:this.onChange.bind(this,n,i)});break;case"enum":e=o.createElement(c.Dropdown,{onSelect:this.onChange.bind(this,n,i)},o.createElement(c.DropdownButton,{type:"text"},o.createElement(d.Button,null,o.createElement("span",null,this.state[n]))),o.createElement(c.DropdownMenu,{"align-right":!0},t.availableOptions.map((e=>o.createElement(c.MenuItem,{refKey:e,key:e},o.createElement("span",null,e))))));break;default:e=o.createElement(a.Input,{inputStyle:"box",value:void 0!==this.state[n]?this.state[n]:t.default,onChange:this.onChange.bind(this,n,i)})}return o.createElement("div",{className:this.getListItemClasses(n),key:n},o.createElement("div",{className:"options-list-item-label-description"},o.createElement("div",{className:"options-list-item-label"},s),o.createElement("div",{className:"options-list-item-description"},o.createElement(l.default,{source:u,linkTarget:"_blank",className:"options-list-item-description-markdown"}))),o.createElement("div",{className:"options-list-item-value"},e))}))}render(){return o.createElement("div",{className:"options-wrapper"},o.createElement("div",{className:"options-list"},this.renderOptions()))}}g.propTypes={optionsArray:h().array,optionsPreference:h().object,onSubmit:h().func.isRequired},g.defaultProps={optionsArray:[],optionsPreference:{}}},"./integrations/components/DeleteIntegrationModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Modals.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),c=n("./js/services/NavigationService.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),p=n("./js/stores/IntegrationsStore.js"),m=n("./api-dev/constants/APISubViews.js"),h=n("./js/modules/services/AnalyticsService.js"),g=n("./integrations/utils/CommonHelperMethods.ts");let f=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={isDeleting:!1},this.store=this.props.store,this.integrationsStore=(0,d.resolveStoreInstance)(p.default),this.apmIntegrationStore=(0,d.resolveStoreInstance)(u.default),this.handleReset=this.handleReset.bind(this)}handleReset(){let{payload:e,integrationId:t,category:n}=this.props;pm.windowEvents.emit(`${n}-integration-deleted`,{apiId:e.api_id,apiVersionId:e.executor,integrationId:t}),c.default.transitionTo("build.apiVersion",{apiId:e.api_id,versionId:e.executor},{tab:m.MONITORING})}render(){const{integrationId:e,ruleId:t,source:n,payload:o}=this.props,{isDeleting:s}=this.state;return i.createElement("div",null,i.createElement(r.Modal,{isOpen:this.props.isOpen,onRequestClose:this.props.handleCloseModal},i.createElement(r.ModalHeader,null,"Delete Integration"),i.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),i.createElement(r.ModalFooter,null,i.createElement(a.default,{text:"Delete Integration",isLoading:this.state.isDeleting,type:"destructive",disabled:s,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),n&&h.default.addEventV2({category:"integrations",action:t+"_edited_integration",label:n,value:1}),this.props.handleCloseModal(),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.apmIntegrationStore.fetchIntegrationInstance("apiversion",o.executor),this.props.handleReset?this.props.handleReset():this.handleReset()):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error((0,g.getErrorMessage)(e,"Something went wrong while deleting your integration.")),pm.logger.error("Error occurred while deleting integration",e)}))}})," ",i.createElement(a.default,{text:"Cancel",type:"secondary",onClick:this.props.handleCloseModal}))))}})||o},"./integrations/components/api-builder/CompactViewContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js");const p=s.default.div`
    display: flex;
    cursor: pointer;
    align-items: center;
    gap: var(--spacing-xs);
  `,m=(0,s.default)(a.default)`
    padding: var(--spacing-xs);
  `;class h extends o.Component{constructor(e){super(e),this.state={isBodyExpanded:!0}}render(){const{containerTitle:e,containerBody:t,rightSectionComponent:n}=this.props,{isBodyExpanded:s}=this.state;return o.createElement(l.default,{direction:"column",grow:1,padding:"spacing-l"},o.createElement(l.default,{grow:1,justifyContent:"space-between",alignItems:"center",padding:{paddingTop:"spacing-xs",paddingBottom:"spacing-xs"},wrap:"wrap"},o.createElement(p,{onClick:()=>{this.setState({isBodyExpanded:!s})}},s?o.createElement(m,{type:"tertiary",tooltip:"Hide",size:"small",icon:o.createElement(d.default,null)}):o.createElement(m,{type:"tertiary",tooltip:"Show",size:"small",icon:o.createElement(u.default,null)}),e&&o.createElement(c.default,{type:"h4",text:e})),n),s&&t)}}h.propTypes={containerTitle:r().string,containerBody:r().element.isRequired,rightSectionComponent:r().element}},"./integrations/components/api-builder/ShowDetailedView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("./node_modules/lodash/lodash.js");const l=s.default.div`
  width:20%;
  display:flex;
  color: var(--content-color-link);
  font-size: var(--text-size-m);
  padding: var(--spacing-zero) 20px;
  margin-left: var(--spacing-xxl);
  margin-top: var(--spacing-m);
  margin-bottom: var(--spacing-m);
  cursor: pointer;
`;class c extends o.Component{constructor(e){super(e)}render(){const{label:e,onClick:t}=this.props;return o.createElement(l,{onClick:e=>{a.isFunction(t)&&t(e)}}," ",e||"View More"," ")}}c.propTypes={onClick:r().func,label:r().string}},"./integrations/components/base/EditIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./appsdk/workbench/TabService.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./integrations/monitoring/stores/APMIntegrationStore.js"),m=n("./node_modules/lodash/lodash.js");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}let g=(0,l.observer)(o=class extends s.Component{constructor(e){super(e),this.store=this.props.store,this.state={isUpdating:!1},this.apmIntegrationStore=(0,d.resolveStoreInstance)(p.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:o,service:l,route:p,client_category:g,redirect:f,alignLeft:b,generatePayload:y,...v}=this.props;return s.createElement("div",{className:"integrations-add-actions__button--container"},s.createElement(i.default,h({text:"Update",isLoading:this.state.isUpdating,type:"primary",isDisabled:e||this.state.isUpdating,tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:()=>{this.setState({isUpdating:!0},(async()=>{let e=m.assign({},t);m.isFunction(y)&&(e=await y(t)),r.default.updateIntegration(n,e).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${m.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),(0,d.resolveStoreInstance)(u.default).setRuleSpecificTeamIntegrations(o,null),this.apmIntegrationStore.fetchIntegrationInstance("apiversion",t.executor),c.default.addEventV2({category:"integrations",action:o+"_edited_integration",label:"team_integrations_edit_forms",value:1}),pm.windowEvents.emit(`${g}-integration-edited`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:n}),a.default.closeByRoute(p,{apiId:t.api_id,integrationId:n}),f&&f()):(pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.setState({isUpdating:!1}))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}))}},v)))}})||o},"./integrations/components/base/MonitorSelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx/lib/mobx.module.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=n("./js/modules/services/RemoteSyncRequestService.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=n("./monitors/services/MonitorService.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),g=n("./integrations/monitoring/constants.js"),f=n("./integrations/constants/integrationsConstants.ts"),b=n("./node_modules/lodash/lodash.js"),y=n.n(b),v=n("./node_modules/prop-types/index.js"),I=n.n(v);const _={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"};let E=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(r.default),this.fetchAndAssignConstraints=this.fetchAndAssignConstraints.bind(this),this.fetchMonitorsLinkedToAPIVersion=this.fetchMonitorsLinkedToAPIVersion.bind(this),this.performEntityChecks=this.performEntityChecks.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.customDropdownOption=this.customDropdownOption.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e&&this.fetchMonitors(e.value),(0,c.reaction)((()=>this.workspaceStore.dependencies),(()=>{this.fetchMonitors(e.value)}))}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:y().get(e,"name"),value:y().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}fetchMonitors(e){this.setState({loading:!0}),e?m.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=y().get(e,"body.data",[]),{newEntities:n,malformedResponse:o}=this.getFormattedResponse(t);if(o)throw new Error("Malformed response");return n})).then((e=>{if(!this.props.integrationClassId||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.integrationClassId,"monitor",this.props.mode)})).then((e=>y().map(e,(e=>y().omit(e,["options"]))))).then((e=>this.performEntityChecks(e))).then((e=>{this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchAndAssignPermissions(e,t,n,o){return new Promise(((o,s)=>{const i=e.map((e=>({id:y().get(e,"id")})));let r=null;f.INTEGRATION_FORM_MODE.ADD,r=p.default.fetchCreatePermissions,r(t,n,i).then((t=>(y().forEach(y().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),o(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}updateSelectedEntity(e){this.store.setSelectedEntity(y().find(e,{value:this.store.selectedEntity.value}))}fetchAndAssignConstraints(e,t,n){let o=`/apis/${t}/versions/${n}/relations/monitor/constraint-checks`,s=[];return s=y().map(e,(e=>e.id)),u.default.request(o,{method:"post",timeout:6e4,data:{entityIds:s}}).then((({body:t})=>(y().each(e,(e=>{let n=y().find(t.data,{entityId:e.id});e.disabled=!n.allowed,e.disabled&&(e.disabledMessage="This monitor is already linked to another API version.")})),Promise.resolve(e)))).catch((t=>(pm.logger.error("Error in fetching relation constraints.",t),Promise.resolve(e))))}fetchMonitorsLinkedToAPIVersion(e,t,n){let o=`/apis/${t}/versions/${n}/monitor`;return u.default.request(o,{method:"get"}).then((t=>{if(t&&200===t.status){let n=y().get(t.body,"data.monitor");return y().each(e,(e=>{y().find(n,{id:e.id})&&(e.disabled=!1)})),Promise.resolve(e)}throw t&&t.body||{error:"serverError",message:"Something went wrong while fetching the linked monitors"}})).catch((t=>(pm.logger.error("Error in fetching linked monitors",t),Promise.resolve(e))))}performEntityChecks(e){return this.fetchAndAssignConstraints(e,this.props.apiId,this.props.apiVersionId).then((e=>this.fetchMonitorsLinkedToAPIVersion(e,this.props.apiId,this.props.apiVersionId))).then((e=>(y().each(e,(e=>{e.disabled||y().find(this.props.configuredIntegrations,{executor:e.id,rule:this.props.integrationClassId})&&(e.disabled=!0,e.disabledMessage="Integration is already configured on this monitor.")})),e))).then((e=>{let t;return y().each(e,(async e=>{e.disabled||(t=await p.default.getConfiguredIntegrationsByEntityAndClientCategory(g.ENTITY,e.id,[g.API_MONITORING],!0).catch((e=>pm.logger.error("MonitorSelector~Error occurred while fetching the configured integrations",e))),t=y()(t).flatMap((e=>Object.values(e))).value(),y().find(t,{rule:this.props.integrationClassId})&&(e.disabled=!0,e.disabledMessage="Integration is already configured on this monitor."))})),Promise.resolve(e)}))}customDropdownOption(e){return s.createElement(h.default,{option:e,entityType:f.entityTypes.MONITORS,tooltipMessage:e.disabledMessage||this.props.tooltipMessage})}getEmptyStateError(){return _[f.entityTypes.MONITORS]?_[f.entityTypes.MONITORS]:""}render(){let{executor:e,onTargetSelect:t,title:n,description:o,disabled:i,optional:r,selectedWorkspace:a}=this.props,{selectedEntity:l}=this.store,{entities:c,loading:u,firstLoad:p,error:m}=this.state,h=!u&&c.length>0&&!l&&!p&&this.getEmptyStateError();return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",r?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:"integrations-add-card__label-description"},o),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(d.default,{onChange:t,options:c,value:e,isLoading:u,isDisabled:i,emptyStateMessage:"No monitors found",customOptionComponent:this.customDropdownOption,isOptionDisabled:e=>e.disabled}),h?s.createElement("span",{className:"integrations-add-card__error"},h):m?s.createElement("span",{className:"integrations-add-card__error"},m+". ",s.createElement("span",{onClick:()=>{a&&this.fetchMonitors(a.value)},className:"integrations-add-card__error__btn"},"Retry")):""))}})||o;E.propTypes={executor:I().object.isRequired,selectedWorkspace:I().object.isRequired,title:I().string.isRequired,description:I().string.isRequired,disabled:I().bool.isRequired,onTargetSelect:I().func.isRequired,apiId:I().string.isRequired,apiVersionId:I().string.isRequired,configuredIntegrations:I().array.isRequired,integrationClassId:I().string.isRequired,mode:I().string.isRequired}},"./integrations/components/error-states/ErrorIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js");let c=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={error:{}}}componentDidMount(){let{error:e}=this.props;e?this.setState({statusCode:e.statusCode,title:e.title,message:e.message}):this.setState({title:"Something went wrong",message:"Something went wrong while performing this action. Please refresh the page and try again."})}render(){let{statusCode:e,title:t,message:n}=this.state;return i.createElement("div",null,i.createElement("div",{className:"team-integrations-error-state"},i.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},(!e||e>499&&e<600)&&i.createElement(r.default,null),404===e&&i.createElement(a.default,null),e>399&&e<500&&404!==e&&i.createElement(l.default,null)),i.createElement("div",{className:"team-integrations-error-state__title"},t),i.createElement("div",{className:"team-integrations-error-state__subtitle"},n)))}})||o},"./integrations/components/error-states/IntegrationNotSupported.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),r=n("../../node_modules/react/index.js"),a=n("./integrations/utils/CommonHelperMethods.ts"),l=n("./js/services/NavigationService.js"),c=n("./js/external-navigation/ExternalNavigationService.js"),d=n("./integrations/constants/integrationsConstants.ts");function u(e){let{apiId:t,apiVersionId:n,tab:s}=e,i={apiId:t,versionId:n},u={tab:s},p=(0,a.getURLFromBasePathAndRoute)(pm.artemisUrl,l.default.getURLForRoute("build.apiVersion",i,u));return r.createElement("div",{className:"unsupported-integrations-error-cta__subtitle"},"browser"===window.SDK_PLATFORM?r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_WEB_APP):r.createElement("div",null,r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_DESKTOP),r.createElement("span",{onClick:()=>(0,c.openExternalLink)(p||"#","_blank"),className:"unsupported-integrations-error-cta__subtitle__link"},r.createElement(o.default,{type:"link-primary",isExternal:!0},"web app"))))}function p(e){let t={title:"browser"===window.SDK_PLATFORM?d.INTEGRATION_NOT_SUPPORTED_TITLE_WEB_APP:d.INTEGRATION_NOT_SUPPORTED_TITLE_DESKTOP,subtitle:u(e)};return r.createElement("div",{className:"unsupported-integrations-error-cta"},r.createElement(s.default,{direction:"column",justifyContent:"center",alignItem:"center",alignSelf:"center"},r.createElement(i.default,{errorDetails:t})))}},"./integrations/connected-integrations/components/ConnectedIntegrationsCell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-edit-stroke.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-delete-stroke.js"),g=n("./js/external-navigation/ExternalNavigationService.js"),f=n("./js/services/NavigationService.js"),b=n("./integrations/components/DeleteIntegrationModal.js"),y=n("./integrations/connected-integrations/components/base/ActionItem.js"),v=n("./integrations/connected-integrations/constants/ConnectedIntegrationConstants.js"),I=n("./integrations/monitoring/constants.js"),_=n("./js/modules/services/AnalyticsService.js"),E=n("./js/controllers/theme/ThemeManager.js"),S=n("./integrations/navigation/constants.js"),C=n("./node_modules/lodash/lodash.js");function T(e){let{manifestItem:t,configuredIntegration:n,entity:o,model:i}=e;return s.createElement("div",{className:"connected-integrations-content-row "+(t.type===v.ITEM_TYPES.LINK?"is-hyperlink":""),onClick:()=>{t.type===v.ITEM_TYPES.LINK&&(_.default.addEventV2({category:"api_builder_integrations",action:"connected_integration_action",label:n.service+"-"+t.id,value:1}),(0,g.openExternalLink)(function(e,t,n,o){let{params:s}=t;return C.each(s,(t=>{e=t.entity===v.ACTION_SOURCE.INTEGRATION?C.replace(e,`$${t.label}`,n.variables[t.key]):C.replace(e,`$${t.label}`,o[t.key])})),e}(t.href,t,n,o),"_blank"))}},t.icon&&s.createElement("div",{className:l()({"connected-integrations-content-row-icon":!0,"is-spaced":!!t.label})},s.createElement(p.default,{name:t.icon,color:"content-color-secondary",size:"small"})),t.label&&s.createElement("div",{className:"connected-integrations-content-row-label"},t.type===v.ITEM_TYPES.LINK?s.createElement(c.default,{type:"link-default",isExternal:t.type===v.ITEM_TYPES.LINK},t.label):t.label),C.compact(C.map(t.actions,(e=>s.createElement(y.default,{action:e,configuredIntegration:n,entity:o,serviceName:n.service,model:i})))))}function A(e){let{model:t,integrationRule:n,configuredIntegration:o,entity:i,handleReset:a,handleEditIntegration:l}=e,c=(0,r.toJS)(C.get(t,"manifest",{}))[n],[u,p]=(0,s.useState)(!1),g=C.get(o,["allowedActions","update"]),f=C.get(o,["allowedActions","delete"]);return s.createElement("div",{className:"connected-integrations-content-wrapper"},s.createElement("div",{className:"connected-integrations-content-title"},`Connected with ${C.get(c,"name")}`),C.compact(C.map(C.get(c,"configured_tooltip.items"),(e=>{if(!C.isFunction(e.isHidden)||!e.isHidden(o,i))return s.createElement(T,{manifestItem:e,configuredIntegration:o,entity:i,model:t})}))),s.createElement("div",{className:"connected-integrations-actions"},s.createElement("div",{className:"connected-integrations-actions-edit",onClick:()=>{g&&l(o,c)}},s.createElement(d.default,{type:"tertiary",size:"small",isDisabled:!g,icon:s.createElement(m.default,{size:"small"}),tooltip:g?"Edit":"Only the integration creator can edit its configuration."})),s.createElement("div",{className:"connected-integrations-actions-delete",onClick:()=>{f&&(p(!u),_.default.addEventV2({category:"api_builder_integrations",action:"connected_integration_action_"+o.service,label:"delete",value:1}))}},s.createElement(d.default,{type:"tertiary",size:"small",isDisabled:!f,icon:s.createElement(h.default,{size:"small"}),tooltip:f?"Delete":"Only the integration creator can delete it."})),s.createElement(b.default,{size:"small",isOpen:u,handleCloseModal:p,integrationId:o.id,ruleId:n,category:I.API_MONITORING,handleReset:a,source:v.DELETE_SOURCE})))}let j=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.entity=this.props.entity,this.state={isDeleteModalOpen:!1,currentTheme:E.default.getCurrentTheme()},this.handleEditIntegration=this.handleEditIntegration.bind(this),this.toggleDeleteModal=this.toggleDeleteModal.bind(this),this.handleThemeChange=this.handleThemeChange.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange)}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleThemeChange(e){this.setState({currentTheme:e})}handleEditIntegration(e,t){let{model:n}=this.props;_.default.addEventV2({category:"api_builder_integrations",action:"connected_integration_action_"+e.service,label:"edit",value:1}),f.default.transitionTo(S.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:C.get(n,"model.__version.apiId"),integrationId:C.get(e,"id")},{service:e.service},{additionalContext:{origin:"api_builder"}})}toggleDeleteModal(e){let{isDeleteModalOpen:t}=this.state;this.setState({isDeleteModalOpen:!t})}render(){let{entityIntegrations:e,model:t,entity:n,handleReset:o}=this.props,{currentTheme:i}=this.state,a=n.id,l=(0,r.toJS)(t.manifest);return s.createElement("div",{className:"connected-integrations-cell"},C(e[a]).flatMap(((e,r)=>C.map(e,(e=>{if(l[r])return s.createElement("div",{onMouseEnter:()=>{_.default.addEventV2({category:"api_builder_integrations",action:"hover_connected_integration",label:e.service,value:1})},onClick:()=>{_.default.addEventV2({category:"api_builder_integrations",action:"clicked_connected_integration",label:e.service,value:1})}},s.createElement(u.default,{placement:"bottom",trigger:s.createElement("div",{className:"connected-integrations-logo-wrapper"},s.createElement("img",{className:"connected-integrations-logo",src:"dark"===i&&C.get(l[r],"dark_icon_url")||C.get(l[r],"icon_url")})),appendTo:"parent",triggerEvent:"mouseenter click",className:"connected-integrations-tooltip"},s.createElement(A,{key:e.id,integrationRule:r,configuredIntegration:e,entity:n,model:t,handleEditIntegration:this.handleEditIntegration,handleReset:o})))})))).compact().value())}})||o},"./integrations/connected-integrations/components/base/ActionItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("./integrations/connected-integrations/constants/ConnectedIntegrationConstants.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("./node_modules/lodash/lodash.js");let u=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.entity=this.props.entity,this.state={isActionInvalid:!1,shouldPerformActionBootstrap:!1,actionPayloadBasedOnEntity:null,bootstrapInProgress:!1,bootstrapFailed:!1},this.validateActionItem=this.validateActionItem.bind(this),this.performActionBootstrap=this.performActionBootstrap.bind(this),this.updateActionPayload=this.updateActionPayload.bind(this)}componentDidMount(){let{action:e,configuredIntegration:t,entity:n}=this.props;this.validateActionItem(e,t,n)}updateActionPayload(e){this.setState({actionPayloadBasedOnEntity:e})}validateActionItem(e,t,n){let{model:o}=this.props;t.model=o,n.model=o,e.source===l.ACTION_SOURCE.INTEGRATION?this.setState({actionPayloadBasedOnEntity:t}):e.source===l.ACTION_SOURCE.ENTITY?this.setState({actionPayloadBasedOnEntity:n}):e.source===l.ACTION_SOURCE.HYBRID?this.setState({actionPayloadBasedOnEntity:{entity:n,configuredIntegration:t}}):(this.setState({isActionInvalid:!0}),pm.logger.error("ConnectedIntegrations~InvalidActionError",{details:"Please check if the source for the action is valid",action:e})),d.isFunction(e.getLabel)||(this.setState({isActionInvalid:!0}),pm.logger.error("ConnectedIntegrations~InvalidActionError",{details:"Function getLabel is missing for the action",action:e})),d.isEmpty(e.getLabel(undefined))&&this.setState({isActionInvalid:!0}),e.bootstrap&&d.isFunction(e.bootstrap)&&this.setState({shouldPerformActionBootstrap:!0},(()=>{this.performActionBootstrap(e)}))}performActionBootstrap(e){let{actionPayloadBasedOnEntity:t}=this.state;this.setState({bootstrapInProgress:!0},(()=>{e.bootstrap(t,((e,t)=>{e&&this.setState({bootstrapFailed:!0,bootstrapInProgress:!1}),this.setState({bootstrapInProgress:!1,actionPayloadBasedOnEntity:t})}))}))}render(){let{actionPayloadBasedOnEntity:e,bootstrapInProgress:t,bootstrapFailed:n,isActionInvalid:o}=this.state,{action:i,serviceName:u}=this.props;return t?s.createElement("div",{className:"connected-integrations-action-loading"},s.createElement(r.default,null)):n?s.createElement("div",{className:"connected-integrations-cell"},s.createElement("div",{className:"connected-integration-content-row-action"},s.createElement(a.default,{name:"icon-state-error-stroke",color:"base-color-error",size:"small"}),s.createElement("div",{className:"connected-integration-content-row-action-error "},"Unable to load"))):o?s.createElement("div",null):s.createElement("div",{className:"connected-integrations-cell"},s.createElement("div",{className:`connected-integration-content-row-action ${d.isEmpty(e)?"":l.ITEM_TYPE_CLASSNAMES[i.type]}`,onClick:()=>{d.isFunction(i.action)&&(c.default.addEventV2({category:"api_builder_integrations",action:"connected_integration_action_"+u,label:i.id,value:1}),i.action(e))}},i.getLabel(e)))}})||o},"./integrations/connected-integrations/constants/ConnectedIntegrationConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ACTION_SOURCE:function(){return s},DELETE_SOURCE:function(){return r},ITEM_TYPES:function(){return o},ITEM_TYPE_CLASSNAMES:function(){return i}});const o={LINK:"link",BUTTON:"button",DIV:"div"},s={INTEGRATION:"integration",ENTITY:"entity",HYBRID:"hybrid"},i={link:"is-action-link",button:"is-hyperlink",div:"is-div"},r="api_builder_delete_integration"},"./integrations/connected-integrations/containers/ConnectedIntegrationsContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("./integrations/connected-integrations/components/ConnectedIntegrationsCell.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./integrations/monitoring/constants.js"),d=n("./node_modules/lodash/lodash.js");let u=(0,l.observer)(o=class extends s.Component{constructor(e){super(e),this.renderType=this.props.type,this.state={isLoading:!1},this.handleReset=this.handleReset.bind(this),this.onMonitorRunTriggered=this.onMonitorRunTriggered.bind(this),this.refreshIntegrationStates=d.debounce(this.onMonitorRunTriggered,1e4)}componentDidMount(){pm.windowEvents.addListener(`${this.props.entity.id}-run`,this.refreshIntegrationStates)}onMonitorRunTriggered(){this.setState({isLoading:!0},(()=>{this.setState({isLoading:!1})}))}handleReset(){let{apiId:e,versionId:t}=this.props.model;pm.windowEvents.emit(`${c.API_MONITORING}-integration-deleted`,{apiId:e,apiVersionId:t})}render(){let{model:e,entity:t}=this.props,{isLoading:n}=this.state;return e.isLoading||n?s.createElement(i.default,null):d.isEmpty(e.configuredIntegrationsForRelation[t.id])?s.createElement("div",{className:"connected-integrations-empty-state"},"No apps configured.",s.createElement("div",{className:"connected-integrations-empty-state",onClick:()=>{pm.windowEvents.emit("add-integrations-cta-clicked")}},s.createElement("div",{className:"connected-integrations-empty-state-add-cta"},s.createElement(r.default,{type:"link-primary"},"Add")))):"cell"===this.renderType?s.createElement(a.default,{model:this.props.model,entity:this.props.entity,entityIntegrations:this.props.model.configuredIntegrationsForRelation,handleReset:this.handleReset}):void 0}})||o},"./integrations/monitoring/add/Datadog/Datadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./integrations/monitoring/stores/APMIntegrationStore.js"),d=n("./js/stores/StoreManager.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),b=n("./integrations/navigation/constants.js"),y=n("./integrations/monitoring/constants.js"),v=n("./api-dev/constants/APISubViews.js"),I=n("./js/services/NavigationService.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),E=n("./appsdk/workbench/TabService.js"),S=n("./js/modules/services/AnalyticsService.js"),C=n("./integrations/monitoring/add/Datadog/DatadogMonitorSetupForm.js"),T=n("./integrations/monitoring/add/Datadog/DatadogAPMSetupForm.js"),A=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),j=n("./integrations/utils/CommonHelperMethods.ts");let w=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={nickname:"",activeStepIndex:0,stepperStatuses:["progress","pending"],isCreatingIntegration:!1,errorNickname:"",monitor:"",dashboardGuids:[],datadogAPM:{environments:A.default.getEmptyEnvironmentsList(),datadogAuthInfo:{apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,region:"us1"},datadogDashboardGuids:[]},monitorIntegrationStates:[{nickname:y.MONITOR_RUN_DATADOG_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:!1,executor:null,region:"us1",metrics:!0,events:!0}]},this.integrationsStore=(0,d.resolveStoreInstance)(l.default),this.apmIntegrationsStore=(0,d.resolveStoreInstance)(c.default),this.setActiveStepIndex=this.setActiveStepIndex.bind(this),this.renderSkipButton=this.renderSkipButton.bind(this),this.renderConnectButton=this.renderConnectButton.bind(this),this.client_category=y.API_MONITORING,this.setDatadogAPMEnvs=this.setDatadogAPMEnvs.bind(this),this.setDatadogAPMAuthInfo=this.setDatadogAPMAuthInfo.bind(this),this.setDatadogAPMDashboardGuids=this.setDatadogAPMDashboardGuids.bind(this),this.createDatadogAPMIntegrationInstance=this.createDatadogAPMIntegrationInstance.bind(this),this.getAPMSetupForm=this.getAPMSetupForm.bind(this),this.createIntegrationInstanceBulk=this.createIntegrationInstanceBulk.bind(this),this.prepareMonitorSetupPayload=this.prepareMonitorSetupPayload.bind(this),this.getMonitorSetupForm=this.getMonitorSetupForm.bind(this)}componentDidMount(){const e=i().find(this.apmIntegrationsStore.getConfiguredIntegrations(),{rule:y.DATADOG_APM_CLASS_ID}),t=!i().isEmpty(e);this.setActiveStepIndex(t?1:0)}setActiveStepIndex(e){let{stepperStatuses:t}=this.state,n=i().find(this.apmIntegrationsStore.getConfiguredIntegrations(),{rule:y.DATADOG_APM_CLASS_ID});t=i().map(t,((t,n)=>"completed"===t?"completed":n===e?"progress":"pending")),i().isEmpty(n)||(t[0]="completed"),this.setState({stepperStatuses:t,activeStepIndex:e})}renderSkipButton(e){let{apiId:t,apiVersionId:n,controller:o}=this.props;return r.createElement(u.default,{className:"integrations-add-actions__button--cancel",type:"secondary",text:y.SKIP_BUTTON_TEXT[e],onClick:()=>{"configureAPM"===e?this.setState({stepperStatuses:["pending","progress"],activeStepIndex:1}):(E.default.closeByRoute(b.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),I.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:v.MONITORING}))}})}renderConnectButton(e,t){let n,{isCreatingIntegration:o,datadogAPM:s,monitorIntegrationStates:a}=this.state,{controller:l}=this.props,{postman_api_id:c,apiversion:d}=t.inputs,{environments:p}=s,m=A.default.areEnvironmentsValid(p),{apiKey:h,appKey:g,region:f,errorApiKey:y,errorAppKey:_}=s.datadogAuthInfo;return"configureAPM"===e?n=o||!(h&&g&&f)||!m||y||_:i().forEach(a,(e=>{(i().isEmpty(e.apiKey)||i().isEmpty(e.executor)||!e.events&&!e.metrics)&&(n=!0)})),r.createElement(u.default,{type:"primary",text:"Connect",className:"integrations-add-actions__button--proceed",isLoading:o,isDisabled:n,tooltip:n&&"Fill in the details to continue",onClick:()=>{if("configureAPM"===e)this.setState({isCreatingIntegration:!0}),this.createDatadogAPMIntegrationInstance(t).then((()=>{this.setState({stepperStatuses:["completed","progress"],activeStepIndex:1,isCreatingIntegration:!1})})).catch((()=>{this.setState({isCreatingIntegration:!1})}));else{let e=this.prepareMonitorSetupPayload();this.setState({isCreatingIntegration:!0}),this.createIntegrationInstanceBulk(e).then((()=>{this.setState({isCreatingIntegration:!1}),E.default.closeByRoute(b.V10_API_ADD_APM_INTEGRATION_URL,{apiId:c}),I.default.transitionTo("build.apiVersion",{apiId:c,versionId:d},{tab:v.MONITORING})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}}})}setDatadogAPMDashboardGuids(e){this.setState((t=>({datadogAPM:{...t.datadogAPM,datadogDashboardGuids:e}})))}setDatadogAPMAuthInfo(e,t){const n=this.state.datadogAPM.datadogAuthInfo;n[e]=t,this.setState((e=>({datadogAPM:{...e.datadogAPM,datadogAuthInfo:n}})))}setDatadogAPMEnvs(e){this.setState((t=>({datadogAPM:{...t.datadogAPM,environments:e}})))}createDatadogAPMIntegrationInstance(e){const t=(0,j.getErrorContextObject)("Datadog APM Integration");let{name:n,inputs:o}=e,{postman_api_id:s,apiversion:i}=o;return new Promise(((e,r)=>{_.default.createIntegrationInstance(y.DATADOG_APM_CLASS_ID,n,o).then((t=>{200===t.status&&t.body.model_id?(pm.toasts.success("Added a new integration"),S.default.addEventV2({category:"integrations",action:y.DATADOG_APM_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:1}),pm.windowEvents.emit(`${y.API_MONITORING}-integration-added`,{apiId:s,apiVersionId:i}),this.apmIntegrationsStore.fetchIntegrationInstance("apiversion",i),e(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),r(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Monitoring Tab Add Form ~ Something went wrong while adding a new integration",e,{context:t}),this.setState({isCreatingIntegration:!1}),r(e)}))}))}getAPMSetupForm(){return r.createElement(T.default,{apiId:this.props.apiId,apiVersionId:this.props.apiVersionId,rule:y.DATADOG_APM_CLASS_ID,datadogAPM:this.state.datadogAPM,setDatadogAPMEnvs:this.setDatadogAPMEnvs,setDatadogAPMAuthInfo:this.setDatadogAPMAuthInfo,setDatadogAPMDashboardGuids:this.setDatadogAPMDashboardGuids})}createIntegrationInstanceBulk(e){const t=(0,j.getErrorContextObject)("Datadog Monitor Integration");return new Promise(((n,o)=>{_.default.createIntegrationInstanceBulk(e).then((t=>{200===t.status?(pm.toasts.success(`Added ${e.length} new integrations.`),S.default.addEventV2({category:"integrations",action:y.DATADOG_MONITOR_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:e.length}),n(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),o(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Monitoring Tab Add Form ~ Something went wrong while adding a new integration",e,{context:t}),this.setState({isCreatingIntegration:!1}),o(e)}))}))}prepareMonitorSetupPayload(){let e,{monitorIntegrationStates:t}=this.state;return e=i().map(t,(e=>{let t=e.events,n=e.metrics;return{name:e.nickname,class:y.DATADOG_MONITOR_CLASS_ID,inputs:[{key:"api_key",value:e.apiKey},{key:"region",value:e.region},{key:"monitor",value:i().get(e,"executor.value")},{key:"new_metric",value:!0},{key:"options",value:(t&&n?"both":t&&"events")||n&&"metrics"}]}})),e}getMonitorSetupForm(){return r.createElement(C.default,{selectedWorkspace:this.props.selectedWorkspace,apiId:this.props.apiId,apiVersionId:this.props.apiVersionId,controller:this.props.controller,setMonitorIntegrationStates:e=>{this.setState({monitorIntegrationStates:e})},monitorIntegrationStates:this.state.monitorIntegrationStates})}render(){const{activeStepIndex:e,stepperStatuses:t,datadogAPM:n}=this.state,{rule:o,apiId:s,apiVersionId:a}=this.props,{environments:l,datadogDashboardGuids:c,datadogAuthInfo:d}=n,{apiKey:u,appKey:b,region:v}=d,I=t[0],_=t[1];let E={name:y.APM_DATADOG_INTEGRATION_NAME,class:y.DATADOG_APM_CLASS_ID,inputs:{api_key:u,app_key:b,region:v,environments:i().map(l,(e=>({name:e.name,services:e.services}))),postman_api_id:s,apiversion:a,dashboard_guids:c}};return r.createElement(p.default,{activeStepIndex:e,onChange:this.setActiveStepIndex},r.createElement(m.default,null,r.createElement(h.default,{label:"Monitor API performance",status:I,isDisabled:"completed"===I}),r.createElement(h.default,{label:"Post monitoring results",status:_})),r.createElement(g.default,null,r.createElement(f.default,{className:"add-integration-step-panel",heading:"Monitor API Performance from Postman",description:"View Datadog metrics and graphs directly from Postman.",primaryAction:this.renderConnectButton("configureAPM",E),secondaryAction:this.renderSkipButton("configureAPM")},this.getAPMSetupForm()),r.createElement(f.default,{className:"add-integration-step-panel",heading:"Post monitoring results",description:"Send your Postman monitor run metrics and events to Datadog.",primaryAction:this.renderConnectButton("configureMonitoring",E),secondaryAction:this.renderSkipButton("configureMonitoring")},this.getMonitorSetupForm())))}})||o},"./integrations/monitoring/add/Datadog/DatadogAPMSetupForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/monitoring/services/index.js"),u=n("./integrations/monitoring/constants.js"),p=n("./node_modules/prop-types/index.js"),m=n.n(p),h=n("./node_modules/uuid/index.js"),g=n.n(h),f=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js");const v=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Datadog APM Integration");let I=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={nickname:"",isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],errorDashboards:!1,loadingDashboards:!1,region:"us1"},this.integrationsStore=(0,l.resolveStoreInstance)(c.default),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.listDashboards=this.listDashboards.bind(this),this.resetSelectedDashboardsAndServices=this.resetSelectedDashboardsAndServices.bind(this),this.client_category=u.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this)}onServiceSelect(e){if(!i().isArray(e))return;let t=i().map(e,"value");this.setState({selectedServices:e,serviceNames:t})}onDashboardSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e},(()=>{this.props.setDatadogAPMDashboardGuids(t)}))}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return this.props.setDatadogAPMAuthInfo("region",e),this.resetForm(),{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1}}))}resetForm(){this.props.setDatadogAPMAuthInfo("apiKey",""),this.props.setDatadogAPMAuthInfo("appKey",""),this.resetSelectedDashboardsAndServices()}resetSelectedDashboardsAndServices(){this.setState({selectedDashboards:[],availableDashboards:[],errorDashboards:!1,loadingDashboards:!1},(()=>{this.props.setDatadogAPMDashboardGuids([]),this.props.setDatadogAPMEnvs(f.default.getEmptyEnvironmentsList())}))}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1};if(i().isEmpty(e.trim()))return t.errorApiKey=!0,this.setState(t),this.resetSelectedDashboardsAndServices(),void this.props.setDatadogAPMAuthInfo("apiKey",t.apiKey);t.apiKey!==i().get(this.props.datadogAPM,"datadogAuthInfo.apiKey")&&this.resetSelectedDashboardsAndServices(),this.props.setDatadogAPMAuthInfo("apiKey",t.apiKey),this.setState(t,(()=>{this.listDashboards()}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1};if(i().isEmpty(e.trim()))return t.errorAppKey=!0,this.setState(t),this.resetSelectedDashboardsAndServices(),void this.props.setDatadogAPMAuthInfo("appKey",t.appKey);t.appKey!==i().get(this.props.datadogAPM,"datadogAuthInfo.appKey")&&this.resetSelectedDashboardsAndServices(),this.props.setDatadogAPMAuthInfo("appKey",t.appKey),this.setState(t,(()=>{this.listDashboards()}))}removeEnvironmentSelector(e){const{environments:t}=this.props.datadogAPM;let n=i().cloneDeep(t);i()(n).splice(e,1).value(),this.props.setDatadogAPMEnvs(n)}async listDashboards(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(u.DATADOG_APM_CLASS_ID);const{rule:e}=this.props,{datadogDashboardGuids:t}=this.props.datadogAPM,{apiKey:n,appKey:o,region:s}=this.state,r=i().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),a=i().get(r,"options.serviceActionId"),l=i().get(r,"id");if(i().isEmpty(n)||i().isEmpty(o)||!s)return void this.setState({authenticatingApiKey:!1,authenticationFailed:!1,errorApiKey:!i().isEmpty(o),errorAppKey:!i().isEmpty(n),errorDashboards:!1,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]});this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!0,errorServices:!1,loadingDashboards:!0});const c={rule:e,api_key:n,app_key:o,region:s};d.default[e].listDashboards(c,null,a,l).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!1});let n=i().map(i().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${f.default.getDatadogHostname(s)}${e.url}`}))),o=i().filter(n,(e=>i().includes(i().map(t,"link"),e.url)));this.setState({availableDashboards:n,loadingDashboards:!1,selectedDashboards:o})})).catch((e=>{pm.logger.error("DatadogAPMSetupForm ~ Monitoring Tab Add Form ~ Error occurred while listing dashboards",e,{context:v}),this.resetSelectedDashboardsAndServices(),this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,errorAppKey:!0,errorDashboards:!1,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}render(){const{apiKey:e,appKey:t,region:n,errorApiKey:o,errorAppKey:s,loadingDashboards:a,selectedDashboards:l,availableDashboards:c,errorDashboards:d,authenticationFailed:p}=this.state,{environments:m}=this.props.datadogAPM,h=f.default.areEnvironmentsValid(m);return r.createElement(r.Fragment,null,r.createElement(b.default,{mode:u.ADD_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:o&&(p?"error":null),apiKeyValidationMessage:o&&(p?"Invalid API Key or APP key":i().isEmpty(e.trim())&&"Please enter the API key"),handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:s&&(p?"error":null),appKeyValidationMessage:s&&(p?"Invalid API Key or APP key":i().isEmpty(t.trim())&&"Please enter the Application key"),region:n,handleOnRegionChange:e=>{this.onRegionSelectorChange(e)}}),r.createElement(y.default,{mode:u.ADD_MODE,apiKey:e,appKey:t,selectedDashboards:l,availableDashboards:c,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:a,errorDashboards:d,environments:m,rule:u.DATADOG_APM_CLASS_ID,onSelectEnvironmentServices:(e,t,n)=>{let o=m;o[n]={id:i().get(m[n],"id"),name:e,services:t},this.props.setDatadogAPMEnvs(o)},region:n,removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{let e=m;m.push({name:"",services:[],id:g().v4()}),this.props.setDatadogAPMEnvs(e)},isAddEnvironmentButtonDisabled:!h}))}})||o;I.propTypes={apiId:m().string.isRequired,apiVersionId:m().string.isRequired,rule:m().string.isRequired,datadogAPM:m().object.isRequired,setDatadogAPMEnvs:m().func.isRequired,setDatadogAPMAuthInfo:m().func.isRequired,setDatadogAPMDashboardGuids:m().func.isRequired}},"./integrations/monitoring/add/Datadog/DatadogMonitorSetupForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{APIKeyInputWrapper:function(){return w},default:function(){return O}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),_=n("./integrations/monitoring/constants.js"),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),S=n("./integrations/constants/integrationsConstants.ts"),C=n("./integrations/components/base/MonitorSelector.js"),T=n("./node_modules/prop-types/index.js"),A=n.n(T),j=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js");const w=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`;let O=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",errorApiKey:!1},this.integrationsStore=(0,l.resolveStoreInstance)(c.default),this.toggle=this.toggle.bind(this),this.renderMonitorSetupForm=this.renderMonitorSetupForm.bind(this),this.addMonitorSetupForm=this.addMonitorSetupForm.bind(this),this.renderAddMonitorButton=this.renderAddMonitorButton.bind(this),this.onMonitorDataChange=this.onMonitorDataChange.bind(this),this.removeMonitorSetupForm=this.removeMonitorSetupForm.bind(this),this.getAPIKeyTextInput=this.getAPIKeyTextInput.bind(this)}toggle(e){this.setState((t=>({[e]:!t[e]})))}getAPIKeyTextInput(e,t,n,o,s,a){return r.createElement(d.default,{id:"datadog-api-key",type:"password",value:e,label:r.createElement(u.default,{text:"Datadog API Key",fieldType:"required"}),helperText:r.createElement(p.default,null,"Enter the API Key provided by Datadog or  ",r.createElement(E.default,{extUrl:`${j.default.getDatadogHostname(t)}/organization-settings/api-keys`},"generate one here.")),onChange:e=>{n[a]=i().merge(o,{apiKey:e.target.value,errorApiKey:!1}),this.props.setMonitorIntegrationStates(n)},onBlur:()=>{n[a]=i().merge(o,{apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())}),this.props.setMonitorIntegrationStates(n)},validationStatus:s?"error":null,validationMessage:s?"Please enter an API key":""})}getInitialMonitorState(){return{nickname:_.MONITOR_RUN_DATADOG_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:!1,executor:"",region:"us1",metrics:!0,events:!0}}onMonitorDataChange(e,t,n){let o=this.props.monitorIntegrationStates,s=o[e],r={};r[t]=n,o[e]=i().merge(s,r),this.props.setMonitorIntegrationStates(o)}renderMonitorSetupForm(e){let{selectedWorkspace:t,apiId:n,apiVersionId:o,controller:s}=this.props,a=this.props.monitorIntegrationStates,l=a[e],{apiKey:c,executor:d,events:I,metrics:E,region:T}=l,A=i().get(a[e],"errorApiKey");return r.createElement(r.Fragment,null,a.length>1&&r.createElement(m.default,{justifyContent:"space-between",alignItems:"center"},r.createElement(p.default,{type:"strong"}," Setup Postman monitor to send run metrics "),r.createElement(h.default,{type:"tertiary",onClick:()=>this.removeMonitorSetupForm(e),text:"Remove",icon:r.createElement(v.default,null)})),r.createElement(g.default,{name:"Select Datadog site",value:T,direction:"column",onChange:t=>{this.onMonitorDataChange(e,"region",t),a[e]=i().merge(l,{apiKey:"",errorApiKey:!1}),this.props.setMonitorIntegrationStates(a)},label:r.createElement(u.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(f.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(f.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(f.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(f.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(f.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),this.getAPIKeyTextInput(c,T,a,l,A,e),r.createElement(C.default,{executor:d,selectedWorkspace:t,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog.",disabled:!t,onTargetSelect:t=>{this.onMonitorDataChange(e,"executor",t)},apiId:n,apiVersionId:o,configuredIntegrations:s.monitorIntegrationStore.getConfiguredIntegrations(),integrationClassId:_.DATADOG_MONITOR_CLASS_ID,mode:S.INTEGRATION_FORM_MODE.ADD}),r.createElement(m.default,{direction:"column",gap:"spacing-s"},r.createElement(b.default,{label:r.createElement(u.default,{type:"primary",text:"Datadog Events and Metrics"}),helperText:"Select at least one of the following options"},r.createElement(y.default,{label:"Send events for completed runs",isChecked:I,onChange:()=>{this.toggle("events"),this.onMonitorDataChange(e,"events",!l.events)}}),r.createElement(y.default,{label:"Send metrics for each run",isChecked:E,onChange:()=>{this.onMonitorDataChange(e,"metrics",!l.metrics)}}))))}addMonitorSetupForm(){let e=this.props.monitorIntegrationStates;e.push(this.getInitialMonitorState()),this.props.setMonitorIntegrationStates(e)}removeMonitorSetupForm(e){let t=this.props.monitorIntegrationStates;i()(t).splice(e,1).value(),this.props.setMonitorIntegrationStates(t)}renderAddMonitorButton(){let e,t=this.props.monitorIntegrationStates;return i().forEach(t,(t=>{(i().isEmpty(t.nickname)||i().isEmpty(t.apiKey)||i().isEmpty(t.executor)||!t.metrics&&!t.events)&&(e=!0)})),r.createElement(m.default,{width:"fit-content"},r.createElement(h.default,{type:"tertiary",onClick:()=>this.addMonitorSetupForm(),text:"Configure for another monitor",icon:r.createElement(I.default,null),isDisabled:e,tooltip:e&&"Fill in the details to add a new monitor",fullWidth:!1}))}render(){const e=this.props.monitorIntegrationStates;return r.createElement(r.Fragment,null,i().map(e,((e,t)=>this.renderMonitorSetupForm(t))),this.renderAddMonitorButton())}})||o;O.propTypes={controller:A().object.isRequired,apiId:A().string.isRequired,apiVersionId:A().string.isRequired,selectedWorkspace:A().string.isRequired,monitorIntegrationStates:A().array.isRequired,setMonitorIntegrationStates:A().func.isRequired}},"./integrations/monitoring/add/NewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./integrations/monitoring/stores/APMIntegrationStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./integrations/components/base/MonitorSelector.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),_=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),E=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),C=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),T=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),A=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),j=n("./integrations/monitoring/services/index.js"),w=n("./integrations/navigation/constants.js"),O=n("./integrations/monitoring/constants.js"),N=n("./api-dev/constants/APISubViews.js"),R=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),P=n("./js/services/NavigationService.js"),D=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),M=n("./appsdk/workbench/TabService.js"),x=n("./js/modules/services/AnalyticsService.js"),L=n("./integrations/constants/integrationsConstants.ts"),k=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),F=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),B=n("./integrations/services/AuthenticationInstanceService.ts"),U=n("./js/stores/CurrentUserStore.js"),V=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),G=n("./js/services/CurrentUserDetailsService.js");const z=pm.logger.getContext("NewRelicAdd","integrations");let H=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",activeStepIndex:0,stepperStatuses:["progress","pending"],isCreatingIntegration:!1,authenticationFailed:!1,addNewRelicToTeam:!1,errorNickname:"",errorApiKey:"",monitor:"",region:O.NEW_RELIC_REGIONS.US,dashboardGuids:[],monitorIntegrationStates:[{nickname:O.MONITOR_RUN_NR_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:"",executor:""}],monitorIntegrationsToBeCreated:[],authenticationInstances:[],loadingAuthenticationInstances:!0,isUsingApiKeyInput:!1,installedAppFeatureFlag:!1},this.store=(0,c.resolveStoreInstance)(d.default),this.integrationsStore=(0,c.resolveStoreInstance)(l.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.setActiveStepIndex=this.setActiveStepIndex.bind(this),this.authenticateApiKey=this.authenticateApiKey.bind(this),this.renderSkipButton=this.renderSkipButton.bind(this),this.authenticateApiKeyDebounced=i().debounce(this.authenticateApiKey,1e3),this.renderMonitorSetupForm=this.renderMonitorSetupForm.bind(this),this.addMonitorSetupForm=this.addMonitorSetupForm.bind(this),this.prepareMonitorSetupPayload=this.prepareMonitorSetupPayload.bind(this),this.renderAddMonitorButton=this.renderAddMonitorButton.bind(this),this.onMonitorSelect=this.onMonitorSelect.bind(this),this.createNewRelicAPMIntegrationInstance=this.createNewRelicAPMIntegrationInstance.bind(this),this.removeMonitorSetupForm=this.removeMonitorSetupForm.bind(this),this.fetchAuthenticationInstances=this.fetchAuthenticationInstances.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.client_category=O.API_MONITORING,this.createAuthenticationInstance=this.createAuthenticationInstance.bind(this)}componentDidMount(){let{stepperStatuses:e}=this.state,t=i().find(this.store.getConfiguredIntegrations(),{rule:O.NEW_RELIC_APM_CLASS_ID}),n=(0,O.isFeatureFlagEnabled)(O.NEW_RELIC_APM_CLASS_ID);i().isEmpty(t)||(e[1]="progress",e[0]="completed",this.setState({stepperStatuses:e,activeStepIndex:1,isCreatingIntegration:!1,configuredAPMIntegration:t,hasAPMIntegrationConfigured:!0,region:i().get(t,"variables.region","us")})),n?(this.setState({installedAppFeatureFlag:n}),this.fetchAuthenticationInstances()):this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1})}fetchAuthenticationInstances(){const e=(0,c.resolveStoreInstance)(U.default);this.setState({loadingAuthenticationInstances:!0}),B.default.listAuthenticationInstances({scope:[{type:O.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[O.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[O.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(i().isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:z}),this.setState({loadingAuthenticationInstances:!1});if(i().isEmpty(e.data))return this.setState({isUsingApiKeyInput:!0,authenticationInstances:[],loadingAuthenticationInstances:!1});const t=i().head(e.data);V.default.fetchUserInfo(t.createdBy,((n,o)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=i().get(o,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,isUsingApiKeyInput:!1,loadingAuthenticationInstances:!1},(()=>{this.listServices(),this.listDashboards()})))))})).catch((e=>(pm.logger.error("APIBuilder-AddNewRelic~Error loading authentication instances!",e,{context:z}),this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1}))))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onServiceSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}listServices(){const{rule:e}=this.props,{apiKey:t,region:n,isUsingApiKeyInput:o,authenticationInstances:s}=this.state,r={rule:e,type:"listServices"};o?(r.api_key=t,r.region=n):r.serviceAuth=i().head(s).id,this.setState({loadingServices:!0,errorServices:!1}),j.default[e].listServices(r).then((e=>{const t=i().map(i().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedService:[]})}))}listDashboards(){const{rule:e}=this.props,{apiKey:t,region:n,isUsingApiKeyInput:o,authenticationInstances:s}=this.state,r={rule:e,type:"listDashboards"};o?(r.api_key=t,r.region=n):r.serviceAuth=i().head(s).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),j.default[e].listServices(r).then((e=>{let t=i().map(i().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableDashboards:t,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,availableDashboards:[],selectedDashboard:[]})}))}createAuthenticationInstance(){const{apiKey:e,region:t}=this.state,n=[{type:O.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:G.default.teamId}],o={user_key:e,region:t},s=O.AUTHENTICATION_CLASSES.NEW_RELIC_USER;return new Promise(((e,t)=>{B.default.createAuthenticationInstance(s,n,o).then((n=>{const o=i().get(n,"body.data[0].id");o?e(o):t(n&&n.body)})).catch((e=>{t(e)}))}))}authenticateApiKey(){const{rule:e}=this.props,{apiKey:t,region:n}=this.state;this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,loadingServices:!0,errorServices:!1}),j.default[e].authenticateApiKey({rule:e,type:"getUserInfo",api_key:t,region:n}).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,loadingServices:!1},(()=>{this.listServices(),this.listDashboards()}))})).catch((e=>{this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,loadingServices:!1}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}setActiveStepIndex(e){let{apmSetupStatus:t,monitorSetupStatus:n,hasAPMIntegrationConfigured:o}=this.state,s=[t,n];s=i().map(s,((t,n)=>"completed"===t?"completed":n===e?"progress":"pending")),o&&(s[0]="completed"),this.setState({stepperStatuses:s,activeStepIndex:e})}renderSkipButton(e){let{apiId:t,apiVersionId:n}=this.props;return r.createElement(m.default,{className:"integrations-add-actions__button--cancel",type:"secondary",text:O.SKIP_BUTTON_TEXT[e],onClick:()=>{"configureAPM"===e?this.setState({stepperStatuses:["pending","progress"],activeStepIndex:1}):(M.default.closeByRoute(w.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),P.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:N.MONITORING}))}})}createNewRelicAPMIntegrationInstance(e){let{name:t,inputs:n}=e,{postman_api_id:o,apiversion:s}=n;return new Promise(((e,i)=>{D.default.createIntegrationInstance(O.NEW_RELIC_APM_CLASS_ID,t,n).then((t=>{200===t.status&&t.body.model_id?(pm.toasts.success("Added a new integration"),x.default.addEventV2({category:"integrations",action:O.NEW_RELIC_APM_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:1}),pm.windowEvents.emit(`${O.API_MONITORING}-integration-added`,{apiId:o,apiVersionId:s}),this.store.fetchIntegrationInstance("apiversion",s),e(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),i(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.setState({isCreatingIntegration:!1}),i(e)}))}))}createIntegrationInstanceBulk(e){return new Promise(((t,n)=>{D.default.createIntegrationInstanceBulk(e).then((o=>{200===o.status?(pm.toasts.success(`Added ${e.length} new integrations.`),x.default.addEventV2({category:"integrations",action:O.NEW_RELIC_MONITOR_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:e.length}),t(o.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),n(o&&o.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.setState({isCreatingIntegration:!1}),n(e)}))}))}async handleConnectAPMClick(e,t){let n;if(this.setState({isCreatingIntegration:!0}),t)try{n=await this.createAuthenticationInstance(),e.inputs.auth=n,delete e.inputs.api_key,delete e.inputs.region}catch(e){return this.setState({isCreatingIntegration:!1}),e.name===O.TEAM_AUTH_FORBIDDEN_ERROR?pm.toasts.error(O.ADD_NEW_RELIC_TO_TEAM_FORBIDDEN):pm.toasts.error(O.ERROR_ADDING_NEW_RELIC_TO_TEAM),void pm.logger.error("Error while adding authentication instance for New Relic",e,z)}this.createNewRelicAPMIntegrationInstance(e).then((()=>{this.setState({stepperStatuses:["completed","progress"],activeStepIndex:1,isCreatingIntegration:!1})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}handleConnectMonitoringClick(e){const{postman_api_id:t,apiversion:n}=e.inputs;let o=this.prepareMonitorSetupPayload();this.setState({isCreatingIntegration:!0}),this.createIntegrationInstanceBulk(o).then((()=>{this.setState({isCreatingIntegration:!1}),M.default.closeByRoute(w.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),P.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:N.MONITORING})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}renderConnectButton(e,t){let n,{apiKey:o,region:s,isCreatingIntegration:a,serviceGuids:l,monitorIntegrationStates:c,addNewRelicToTeam:d}=this.state,{auth:u}=t.inputs,p=!1;return(u||!i().isEmpty(o)&&s)&&(p=!0),"configureAPM"===e?n=a||!p||i().isEmpty(l):i().forEach(c,(e=>{(i().isEmpty(e.apiKey)||i().isEmpty(e.executor))&&(n=!0)})),r.createElement(m.default,{type:"primary",text:"Connect",className:"integrations-add-actions__button--proceed",isLoading:a,isDisabled:n,tooltip:n&&"Fill in the details to continue",onClick:async()=>{"configureAPM"===e?await this.handleConnectAPMClick(t,d):"configureMonitoring"===e&&this.handleConnectMonitoringClick(t)}})}renderMonitorSetupForm(e){let{monitorIntegrationStates:t}=this.state,{selectedWorkspace:n,apiId:o,apiVersionId:s,controller:a}=this.props,l=t[e],{nickname:c,errorNickname:d,apiKey:h,errorApiKey:g,executor:f}=l;return r.createElement(r.Fragment,null,e>0&&r.createElement(r.Fragment,null,r.createElement(k.MonitorSetupSectionSeparator,null),r.createElement(k.MonitoringSetupFormTitleContainer,null,r.createElement(k.MonitoringSetupFormTitle,null,`Monitor (${e+1}) Setup`),r.createElement(k.RemoveButtonContainer,null,r.createElement(m.default,{type:"tertiary",onClick:()=>this.removeMonitorSetupForm(e),text:"Remove",icon:r.createElement(T.default,null)})))),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:n}),r.createElement(u.SensitiveFieldSegmentV2,{title:"New Relic API Key",description:"Enter the Ingest-Licence Key provided by New Relic or ",customLink:r.createElement(R.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:h,error:i().get(t[e],"errorApiKey"),onChange:n=>{t[e]=i().merge(l,{apiKey:n.target.value,errorApiKey:""}),this.setState({monitorIntegrationStates:t})},onBlur:()=>{t[e]=i().merge(l,{apiKey:h.trim(),errorApiKey:i().isEmpty(h.trim())?"Please enter an API key":""}),this.setState({monitorIntegrationStates:t})}}),r.createElement(p.default,{executor:f,selectedWorkspace:n,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",disabled:!n,onTargetSelect:t=>{this.onMonitorSelect(e,t)},apiId:o,apiVersionId:s,configuredIntegrations:a.monitorIntegrationStore.getConfiguredIntegrations(),integrationClassId:O.NEW_RELIC_MONITOR_CLASS_ID,mode:L.INTEGRATION_FORM_MODE.ADD}))}addMonitorSetupForm(){this.setState((e=>{let{monitorIntegrationStates:t}=e;return t.push({nickname:O.MONITOR_RUN_NR_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:"",executor:""}),{monitorIntegrationStates:t}}))}removeMonitorSetupForm(e){this.setState((t=>{let{monitorIntegrationStates:n}=t;return i()(n).splice(e,1).value(),{monitorIntegrationStates:n}}))}prepareMonitorSetupPayload(){let e,{monitorIntegrationStates:t,region:n}=this.state;return e=i().map(t,(e=>({name:e.nickname,class:O.NEW_RELIC_MONITOR_CLASS_ID,inputs:[{key:"api_key",value:e.apiKey},{key:"region",value:n},{key:"monitor",value:i().get(e,"executor.value")}]}))),e}onMonitorSelect(e,t){this.setState((n=>{let{monitorIntegrationStates:o}=n,s=o[e];return o[e]=i().merge(s,{executor:t}),{monitorIntegrationStates:o}}))}renderAddMonitorButton(){let e,{monitorIntegrationStates:t}=this.state;return i().forEach(t,(t=>{(i().isEmpty(t.nickname)||i().isEmpty(t.apiKey)||i().isEmpty(t.executor))&&(e=!0)})),r.createElement(r.Fragment,null,r.createElement(k.MonitorSetupSectionSeparator,null),r.createElement(k.AddMonitorButtonContainer,null,r.createElement(m.default,{type:"tertiary",onClick:()=>this.addMonitorSetupForm(),text:"Add Monitor",icon:r.createElement(A.default,null),isDisabled:e,tooltip:e&&"Fill in the details to add a new monitor"})))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,availableDashboards:[],loadingDashboards:!1,availableServices:[],loadingServices:!1,selectedService:[],selectedDashboard:[]})}render(){const{apiKey:e,region:t,errorApiKey:n,availableServices:o,selectedService:s,loadingServices:a,loadingDashboards:l,selectedDashboard:c,availableDashboards:d,serviceGuids:p,dashboardGuids:m,errorServices:T,errorDashboards:A,activeStepIndex:j,stepperStatuses:w,authenticationFailed:N,monitorIntegrationStates:P,authenticationInstances:D,loadingAuthenticationInstances:M,isUsingApiKeyInput:x,addNewRelicToTeam:L,installedAppFeatureFlag:k}=this.state,{rule:B,apiId:U,apiVersionId:V}=this.props,G=w[0],z=w[1];let H={name:O.APM_NR_INTEGRATION_NAME,class:B,inputs:{...x?{api_key:e,region:t}:{auth:D.length>0?i().head(D).id:""},postman_api_id:U,apiversion:V,service_guids:p,dashboard_guids:m}};return r.createElement(h.default,{activeStepIndex:j,onChange:this.setActiveStepIndex},r.createElement(g.default,null,r.createElement(f.default,{label:"Monitor API performance",status:G,isDisabled:"completed"===G}),r.createElement(f.default,{label:"Post monitoring results",status:z})),r.createElement(b.default,null,r.createElement(y.default,{className:"add-integration-step-panel",heading:"Monitor API Performance from Postman",description:"View New Relic metrics and statuses directly from Postman",primaryAction:this.renderConnectButton("configureAPM",H),secondaryAction:this.renderSkipButton("configureAPM")},x?r.createElement(u.SensitiveFieldSegmentV2,{title:"New Relic API Key",description:"Enter the User Key provided by New Relic or ",customLink:r.createElement(R.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n&&(N?"Invalid API Key":i().isEmpty(e.trim())&&"Please enter the API key"),onChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1},(()=>this.authenticateApiKeyDebounced()))},onBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:!!i().isEmpty(e.trim()),authenticationFailed:!i().isEmpty(e.trim())})}}):r.createElement(F.default,{connectedAccount:i().head(D),isLoading:M,isUsingPersonalCredentials:x,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+i().get(i().head(D),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account"}),r.createElement(v.default,{menuMaxHeight:"36vh",value:s,options:o,placeholder:"Select New Relic Services",label:r.createElement(I.default,{text:"Services",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:T&&"Unable to load services",emptyStateMessage:"No services found"}),r.createElement(v.default,{menuMaxHeight:"28vh",value:c,options:d,placeholder:"Select Dashboards",label:r.createElement(I.default,{text:"Link Dashboards (Optional)"}),onChange:this.onDashboardSelect,isLoading:l,error:A&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}),x?r.createElement(r.Fragment,null,r.createElement("div",{className:"push-double--bottom__add-to-team"},r.createElement(I.default,{text:"New Relic region",type:"primary"}),r.createElement(_.default,{type:"para"},"This helps us know what New Relic region to use"),r.createElement(E.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},r.createElement(S.default,{label:"US (.com)",value:"us"}),r.createElement(S.default,{label:"EU (.eu)",value:"eu"}))),k&&!M&&i().isEmpty(D)?r.createElement("div",null,r.createElement(C.default,{isChecked:L,label:O.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:O.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!L})}})):null):null),r.createElement(y.default,{className:"add-integration-step-panel",heading:"Post monitoring results",description:"Send your monitor run metrics to New Relic.",primaryAction:this.renderConnectButton("configureMonitoring",H),secondaryAction:this.renderSkipButton("configureMonitoring")},i().map(P,((e,t)=>this.renderMonitorSetupForm(t))),this.renderAddMonitorButton())))}})||o},"./integrations/monitoring/components/AvailableMonitoringServices.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ServiceCard:function(){return R},default:function(){return N}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js"),l=n("./js/controllers/theme/ThemeManager.js"),c=n("./js/services/NavigationService.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-newrelic.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-datadog.js"),f=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),b=n("./integrations/api-observability/constants.ts"),y=n("./integrations/monitoring/constants.js"),v=n("./js/stores/StoreManager.js"),I=n("./integrations/monitoring/stores/APMIntegrationStore.js"),_=n("./js/modules/services/AnalyticsService.js"),E=n("./integrations/navigation/constants.js"),S=n("./integrations/monitoring/customComponents.js"),C=n("./integrations/monitoring/sentry/constants.js"),T=n("./integrations/utils/CommonHelperMethods.ts"),A=n("./node_modules/lodash/lodash.js");const j=(0,T.getErrorContextObject)("APM Integration"),w=(0,f.default)(d.default)`
    margin:var(--spacing-s) var(--spacing-xxl);
    padding: 0 var(--spacing-m);
    row-gap: var(--spacing-m);
    column-gap: var(--spacing-m);
    justify-content: center;
    flex-wrap: wrap;
    align-items: center;
  `,O=(0,f.default)(d.default)`
  margin: var(--spacing-s) 0;
  row-gap: var(--spacing-m);
  column-gap: var(--spacing-m);
  flex-wrap: wrap;
  align-items: center;
  `;function N(e){const{addToast:t}=(0,u.default)(),n=(0,s.useCallback)(A.throttle((()=>{t({status:"error",description:"Something went wrong while setting up the integration. Try again.",onDismiss:()=>{n.cancel()}})}),5e3,{leading:!0,trailing:!1}),[]),o=A.isEmpty(e.configuredIntegrations)?w:O;return A.isEmpty(e.integrationClasses)?s.createElement(a.default,{requestNewIntegration:!0}):s.createElement(o,null,A.compact(A.map(e.integrationClasses,(t=>{const o=A.get(t,"services.0",{});return s.createElement(R,{key:o.id,serviceId:o.id,name:o.name,iconUrl:o.iconUrl,darkIconUrl:o.darkIconUrl,classId:A.get(t,"id"),description:A.get(t,"description"),instanceCreation:A.get(t,"instanceCreation",{}),model:e.model,promoteTab:e.promoteTab,throttledShowToast:n})}))))}let R=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={currentTheme:l.default.getCurrentTheme(),showFallbackIcon:!1},this.aPMIntegrationStore=(0,v.resolveStoreInstance)(I.default),this.handleThemeChange=this.handleThemeChange.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.isSentryIntegrationConfigured=this.isSentryIntegrationConfigured.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange),(0,i.reaction)((()=>this.aPMIntegrationStore.loadingAvailableIntegrations[A.get(this.props.model,"id")]),(()=>{this.setState({hasConfiguredAPMIntegrations:!0})}))}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleOnClick(e,t,n,o){const s=n.apiId,i={apiId:s,versionId:n.id},r={service:e,name:t,rule:o},a={apiVersionItemStore:n};(0,T.getSanitizedRouteAndQueryParamsForV10APIUrls)(i,r,s).then((([e,n])=>{_.default.addEventV2({category:"api_builder_integrations",action:"connect_via_api",label:t,value:1}),c.default.transitionTo(E.V10_API_ADD_APM_INTEGRATION_NAV_IDENTIFIER,e,n,a)})).catch((e=>{const{throttledShowToast:t}=this.props;A.isFunction(t)&&t(),pm.logger.error("AddAPMIntegration ~ Error while navigating to create form for APM Integration",e,{context:j,routeParams:JSON.stringify(i),queryParams:JSON.stringify(r),apiId:s})}))}handleThemeChange(e){this.setState({currentTheme:e})}isSentryIntegrationConfigured(){return!A(this.aPMIntegrationStore.getConfiguredIntegrations()).flatMap("rule").filter((e=>e===C.INTEGRATION_CLASS_NAME)).isEmpty()}isDisabled(e,t,n){return!(A.get(e,`apiPermissionStore.permissions.${e.apiId}:UPDATE_API_META.allowed`)&&t)||n===C.SERVICE_ID&&this.isSentryIntegrationConfigured()||!A.has(S.serviceBasedCustomComponents,n)}getIcons(e){switch(e){case y.NEW_RELIC_APM_CLASS_ID:return s.createElement(h.default,null);case y.DATADOG_APM_CLASS_ID:return s.createElement(g.default,null);default:return s.createElement(IconEntityApiStroke,null)}}renderAvailableServices(){const{serviceId:e,name:t,model:n,promoteTab:o,instanceCreation:i,classId:r}=this.props,a=A.get(i,"enabled",!1),l=this.isDisabled(n,a,e);return s.createElement(p.default,{key:r,type:"outline",icon:this.getIcons(r),text:t,isDisabled:l,onClick:s=>{s.metaKey||s.ctrlKey||(s.preventDefault(),A.isFunction(o)&&o(),this.handleOnClick(e,t,n,r))}})}render(){const{serviceId:e,model:t,instanceCreation:n}=this.props,o=A.get(n,"enabled",!1);let i;return i=A.get(t,`apiPermissionStore.permissions.${t.apiId}:UPDATE_API_META.allowed`)?e===C.SERVICE_ID&&this.isSentryIntegrationConfigured()?C.ERROR_MESSAGES.ONLY_ONE_SENTRY_INTEGRATION_ALLOWED:A.has(S.serviceBasedCustomComponents,e)?A.get(n,"description"):y.SERVICE_NOT_SUPPORTED_ON_OLD_APP_ERROR:b.PERMISSION_ERROR,s.createElement(s.Fragment,null,this.isDisabled(t,o,e)?s.createElement(m.default,{content:i,placement:"bottom"},this.renderAvailableServices()):this.renderAvailableServices())}})||o},"./integrations/monitoring/components/DatadogMonitorStatus.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=(n("./js/external-navigation/ExternalNavigationService.js"),n("./integrations/monitoring/constants.js")),l=n("./node_modules/prop-types/index.js"),c=n.n(l);const{ALERT:d,WARN:u,NO_DATA:p,OK:m,NO_MONITORS:h,UNAVAILABLE:g}=a.DATADOG_MONITOR_STATUSES;function f(e){const t=e.numMonitors?`${e.numMonitors} `:"",n={[u]:o.createElement(s.default,{status:"warning",text:`${t+u}`,className:"health-status-badge"}),[d]:o.createElement(s.default,{status:"critical",text:`${t+d}`,className:"health-status-badge"}),[m]:o.createElement(s.default,{status:"success",text:`${t+m}`,className:"health-status-badge"}),[p]:o.createElement(s.default,{status:"neutral",text:`${t+p}`,className:"health-status-badge"}),[h]:o.createElement(i.default,{type:"para"},"No Monitors"),[g]:o.createElement(r.default,{size:"small"})};return n[e.alertSeverity]||n[h]}f.defaultProps={alertSeverity:h,numMonitors:0},f.propTypes={alertSeverity:c().string,numMonitors:c().number}},"./integrations/monitoring/components/HealthStatus.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./appsdk/components/link/Link.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js");const d={CRITICAL:o.createElement(s.default,{status:"critical",text:"Critical",className:"health-status-badge"}),WARNING:o.createElement(s.default,{status:"warning",text:"Warning",className:"health-status-badge"}),NOT_ALERTING:o.createElement(s.default,{status:"success",text:"Healthy",className:"health-status-badge"}),NOT_CONFIGURED:o.createElement(i.default,{triggerEvent:"click",placement:"bottom-start",padding:"spacing-s",trigger:o.createElement(r.default,{type:"muted-plain",text:"Alerts not configured",icon:o.createElement(c.default,null)})},o.createElement("div",{className:"alert-config-info-popover"},o.createElement(a.default,{type:"para",color:"content-color-primary"},"Learn how to configure ",o.createElement(l.default,{to:"https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-policies/create-edit-or-find-alert-policy/",target:"_blank"},o.createElement(a.default,{type:"link-default",isExternal:!0},"alert policy")))))};function u(e){return d[e.alertSeverity]||d.NOT_CONFIGURED}},"./integrations/monitoring/components/NewRelic/AddComponents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AddMonitorButtonContainer:function(){return a},MonitorSetupSectionSeparator:function(){return r},MonitoringSetupFormTitle:function(){return i},MonitoringSetupFormTitleContainer:function(){return s},MultiSelectContainer:function(){return d},MultiSelectDiv:function(){return u},MultiSelectWrapper:function(){return c},RadioButtonDiv:function(){return p},RemoveButtonContainer:function(){return l}});var o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const s=o.default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`,i=o.default.div`
  color: var(--content-color-primary);
  font-weight: var(--text-weight-medium);
  font-size: var(--text-size-m);
  line-height: var(--line-height-m);
`,r=o.default.div`
  border-top: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
`,a=o.default.div`width: fit-content;`,l=o.default.div`width: fit-content; float: right; margin-left: auto;`,c=o.default.div`display: flex; flex-direction: column; padding-right: 10px; padding-top: 16px`,d=o.default.div`display: flex; flex-direction: column`,u=o.default.div`padding: 10px`,p=o.default.div`margin-bottom: var(--spacing-l); padding-top: var(--spacing-l)`},"./integrations/monitoring/components/ServicesTableDatadog.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=(n("./appsdk/components/link/Link.js"),n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"));n("./js/components/base/LoadingIndicator.js");const u=d.default.div`
    display: flex;
    aligh-items: center;
    width: 100%;
    `;t.default=(0,c.observer)((e=>{const[t,n]=(0,o.useState)(l().isEmpty(e.data)&&!e.loadingServiceMetrics);(0,o.useEffect)((()=>{n(l().isEmpty(e.data)&&!e.loadingServiceMetrics)}),[e.data,e.loadingServiceMetrics]);const a=[{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong",isTruncated:!0},"Services")),cellWidth:"30%",id:"serviceName",accessor:e=>[l().get(e,"serviceName"),e],Cell:({value:t})=>{const[n,s]=t;return o.createElement(u,{onClick:t=>{t.preventDefault(),e.onServiceClick(s)}},o.createElement(i.default,{type:"link-subtle",isTruncated:!0},n))},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong",isTruncated:!0},"Environment")),cellWidth:"15%",id:"environment",accessor:e=>[l().get(e,"environment","none"),e],Cell:({value:e})=>{const[t,n]=e;return o.createElement(i.default,{isTruncated:!0},t)},align:"left"},{Header:()=>o.createElement(i.default,{type:"strong",isTruncated:!0},"Latency"),cellWidth:"10%",id:"latency",accessor:e=>[l().get(e,["metrics","latency"])],Cell:({value:e})=>{const[t]=e;return o.createElement(i.default,{isTruncated:!0},t)},align:"left"},{Header:()=>o.createElement(i.default,{type:"strong",isTruncated:!0},"Throughput"),cellWidth:"10%",id:"throughput",accessor:e=>[l().get(e,["metrics","throughput"])],Cell:({value:e})=>{const[t]=e;return o.createElement(i.default,{isTruncated:!0},t)},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong",isTruncated:!0},"Error rate")),cellWidth:"10%",id:"errorRate",accessor:e=>[l().get(e,["metrics","errorRate"])],Cell:({value:e})=>{let[t]=e;return o.createElement(i.default,{isTruncated:!0},t)},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong",isTruncated:!0},"Apdex")),cellWidth:"10%",id:"apdex",accessor:e=>[l().get(e,["metrics","apdexScore"])],Cell:({value:e})=>{const[t]=e;return o.createElement(i.default,{isTruncated:!0},t)},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong",isTruncated:!0},"Datadog Monitor")),cellWidth:"15%",id:"healthStatus",accessor:e=>[e],Cell:({value:e})=>{const[t]=e;return t.healthStatus.component},align:"left"}];return o.createElement(o.Fragment,null,o.createElement(s.default,{className:"apm-services-table",width:"100%",direction:"column",gap:"spacing-m"},o.createElement(r.default,{data:e.data,columns:a,blankState:{isEmpty:t,component:o.createElement("div",{className:"api-monitoring-stats-empty-state"},"No services found.")},loader:{isLoading:e.loadingServiceMetrics,skeletonRowCount:3}})))}))},"./integrations/monitoring/components/ServicesTableNewRelic.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=(n("./appsdk/components/link/Link.js"),n("../../node_modules/styled-components/dist/styled-components.browser.esm.js")),u=(n("./js/components/base/LoadingIndicator.js"),n("./integrations/monitoring/components/HealthStatus.js"));const p=d.default.div`
    display: flex;
    aligh-items: center;
    width: 100%;
    `;t.default=(0,c.observer)((e=>{const[t,n]=(0,o.useState)(l().isEmpty(e.data)&&!e.loadingServiceMetrics);(0,o.useEffect)((()=>{n(l().isEmpty(e.data)&&!e.loadingServiceMetrics)}),[e.data,e.loadingServiceMetrics]);const a=[{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong"},"Services")),cellWidth:"50px",id:"serviceName",accessor:e=>[l().get(e,"serviceName"),e],Cell:({value:t})=>{const[n,s]=t;return o.createElement(p,{onClick:t=>{t.preventDefault(),e.onServiceClick(s)}},o.createElement(i.default,{type:"link-subtle",isTruncated:!0},n))},align:"left"},{Header:()=>o.createElement(i.default,{type:"strong"},"Latency"),cellWidth:"35px",id:"latency",accessor:e=>[l().get(e,"latency")],Cell:({value:e})=>{let[t]=e;return"NaN ms"==t&&(t="-"),t},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong"},"Error rate")),cellWidth:"35px",id:"errorRate",accessor:e=>[l().get(e,"errorRate")],Cell:({value:e})=>{let[t]=e;return"NaN%"===t&&(t="-"),t},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong"},"Apdex")),cellWidth:"35px",id:"apdex",accessor:e=>[l().get(e,"apdex")],Cell:({value:e})=>{const[t]=e;return t||"-"},align:"left"},{Header:()=>o.createElement(s.default,{inline:!0,gap:"spacing-xs"},o.createElement(i.default,{type:"strong"},"Health status")),cellWidth:"45px",id:"healthStatus",accessor:e=>[e],Cell:({value:e})=>{const[t]=e;return o.createElement(u.default,{alertSeverity:t.alertSeverity})},align:"left"}];return o.createElement(o.Fragment,null,o.createElement(s.default,{className:"apm-services-table",width:"100%",direction:"column",gap:"spacing-m"},o.createElement(r.default,{data:e.data,columns:a,blankState:{isEmpty:t,component:o.createElement("div",{className:"api-monitoring-stats-empty-state"},"Unable to load services.")},loader:{isLoading:e.loadingServiceMetrics,skeletonRowCount:3}})))}))},"./integrations/monitoring/components/helpers/DashboardsQuickLinks.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=n("./node_modules/prop-types/index.js"),p=n.n(u),m=n("./node_modules/lodash/lodash.js"),h=n.n(m),g=n("./js/external-navigation/ExternalNavigationService.js"),f=n("./js/modules/services/AnalyticsService.js");let b=(0,i.observer)(o=class extends s.PureComponent{constructor(e){super(e),this.state={isPopOverOpen:!1},this.handleViewDashboard=this.handleViewDashboard.bind(this)}handleViewDashboard(e){e&&(0,g.openExternalLink)(e,"_blank"),f.default.addEventV2({category:"apm-integration",action:"view-dashboard",label:h().get(this.state.integration,"rule"),value:1})}render(){const{isPopOverOpen:e}=this.state,{loadingDashboards:t,linkedDashboards:n}=this.props;return s.createElement("div",{className:"monitoring-dashboard-links"},s.createElement(r.default,null,s.createElement(a.default,{text:"Dashboard Quick Links",type:"tertiary",onClick:()=>{this.setState({isPopOverOpen:!e})}}),t?s.createElement(l.default,null,s.createElement(c.default,null,s.createElement(d.default,null))):s.createElement(l.default,null,n.length>0?h().map(n,(e=>s.createElement(c.default,{className:"monitoring-dashboard-links__menu__item",onClick:()=>this.handleViewDashboard(e.link)},e.label," ↗"))):s.createElement(c.default,null,"No dashboards configured"))))}})||o;b.propTypes={loadingDashboards:p().bool.isRequired,linkedDashboards:p().array.isRequired}},"./integrations/monitoring/components/helpers/MoreOptions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-options-stroke.js"),p=n("./node_modules/prop-types/index.js"),m=n.n(p),h=n("./integrations/monitoring/constants.js"),g=n("./integrations/api-observability/constants.ts"),f=n("./integrations/components/DeleteIntegrationModal.js"),b=n("./js/stores/StoreManager.js"),y=n("./integrations/monitoring/stores/APMIntegrationStore.js"),v=n("./js/services/NavigationService.js"),I=n("./integrations/navigation/constants.js"),_=n("./node_modules/lodash/lodash.js");let E=(0,i.observer)(o=class extends s.PureComponent{constructor(e){super(e),this.store=(0,b.resolveStoreInstance)(y.default),this.state={isPopOverOpen:!1,showDeleteModal:!1},this.handleDeleteModalAction=this.handleDeleteModalAction.bind(this),this.handleEditIntegration=this.handleEditIntegration.bind(this)}handleDeleteModalAction(){let e=!this.state.showDeleteModal;this.setState({showDeleteModal:e,isPopOverOpen:!1})}handleEditIntegration(){let{integration:e,selectedAPI:t}=this.props;this.setState({isPopOverOpen:!1},(()=>{v.default.transitionTo(I.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:t,integrationId:_.get(e,"id")},{service:e.service||e.rule},{additionalContext:{origin:"services_container"}})}))}render(){const{isPopOverOpen:e,showDeleteModal:t}=this.state,{payload:n,integration:o}=this.props;return s.createElement("div",{className:"api-monitoring-more-options"},s.createElement(r.default,null,s.createElement(a.default,null,s.createElement(l.default,{className:"api-monitoring-more-options-icon-wrapper",type:"tertiary",onClick:()=>{this.setState({isPopOverOpen:!e})},icon:s.createElement(u.default,null)})),this.props.canEditIntegration?s.createElement(c.default,null,s.createElement(d.default,{onClick:this.handleEditIntegration},"Edit Integration"),s.createElement(d.default,{onClick:this.handleDeleteModalAction,type:"destructive"},"Delete Integration")):s.createElement(c.default,null,s.createElement(d.default,{isDisabled:!0,tooltip:g.PERMISSION_ERROR},"Edit Integration"),s.createElement(d.default,{isDisabled:!0,tooltip:g.PERMISSION_ERROR,type:"destructive"},"Delete Integration"))),s.createElement(f.default,{size:"small",store:this.store,category:h.API_PERFORMANCE_INTEGRATION,payload:n,isOpen:t,handleCloseModal:this.handleDeleteModalAction,integrationId:_.get(o,"id"),ruleId:_.get(o,"rule")}))}})||o;E.propTypes={showDeleteModal:m().bool,payload:m().object.isRequired,canEditIntegration:m().bool.isRequired,integration:m().object.isRequired,apiVersionId:m().string.isRequired,selectedAPI:m().string.isRequired}},"./integrations/monitoring/containers/APMContainerDropdown.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./integrations/monitoring/stores/APMIntegrationStore.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./integrations/monitoring/constants.js"),m=n("./integrations/monitoring/containers/APMServicesContainer.js"),h=n("./integrations/monitoring/sentry/CompactView.js"),g=n("./integrations/monitoring/sentry/constants.js");let f=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,c.resolveStoreInstance)(d.default),this.state={apiId:r().get(this.props.model,"apiId"),apiVersionId:r().get(this.props.model,"id"),selectedApiVersion:this.store.selectedAPIVersion,updatingApiVersion:!1,errorObject:{status:500}},this.monitoringBootstrap=this.monitoringBootstrap.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${p.API_MONITORING}-integration-added`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${p.API_MONITORING}-integration-edited`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${p.API_MONITORING}-integration-deleted`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${p.API_MONITORING}-monitor-linked`,this.onIntegrationEventCaptured.bind(this)),pm.windowEvents.addListener(`${p.API_MONITORING}-monitor-unlinked`,this.onIntegrationEventCaptured.bind(this)),this.monitoringBootstrap()}monitoringBootstrap(){this.store.initializeApmIntegrationStoreV2({apiId:r().get(this.props.model,"apiId"),apiVersionId:r().get(this.props.model,"id"),category:p.API_PERFORMANCE_INTEGRATION})}onIntegrationEventCaptured(e){let{apiId:t,apiVersionId:n}=this.state;e.apiId===t&&e.apiVersionId===n&&this.monitoringBootstrap()}render(){const{apiId:e,apiVersionId:t,updatingApiVersion:n}=this.state,o=(0,l.toJS)(this.store.configuredIntegrations[r().get(this.props.model,"id")]),i=r().first(r().remove(o,{rule:g.INTEGRATION_CLASS_NAME}));return r().get(this.props.model,"id")!==t&&this.setState({apiVersionId:r().get(this.props.model,"id"),updatingApiVersion:!0},(()=>{r().isEmpty((0,l.toJS)(this.store.configuredIntegrations[r().get(this.props.model,"id")]))&&this.store.updateSelectedAPIVersion(r().get(this.props.model,"id")),this.setState({updatingApiVersion:!1})})),n?s.createElement(u.default,{className:"monitoring-loading-indicator"}):s.createElement(s.Fragment,null,n?s.createElement(u.default,{className:"monitoring-loading-indicator"}):r()(o).groupBy("rule").map(((e,t)=>s.createElement(m.default,{key:t,model:this.props.model,configuredAPMIntegrations:e,updatingApiVersion:n,apmClassID:t}))).value(),!r().isEmpty(i)&&s.createElement(h.default,{model:this.props.model,apiId:e,apiVersionId:t,integration:i}))}})||o},"./integrations/monitoring/containers/APMServicesContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("./integrations/monitoring/containers/ServicesContainerNewRelic.js"),i=n("./integrations/monitoring/containers/ServicesContainerDatadog.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("./api-dev/constants/APISubViews.js"),c=n("./integrations/components/error-states/IntegrationNotSupported.js"),d=n("./node_modules/lodash/lodash.js");const u={apm_datadog:i.default,apm_new_relic:s.default};class p extends o.Component{constructor(e){super(e),this.state={isIntegrationSupported:d.has(u,this.props.apmClassID)},this.renderServicesContainer=this.renderServicesContainer.bind(this)}renderServicesContainer(){const e=d.get(this.props.model,"id"),t=d.get(this.props.model,"apiId");if(d.isEmpty(this.props.configuredAPMIntegrations))return o.createElement(o.Fragment,null);if(this.state.isIntegrationSupported){const e=u[this.props.apmClassID];return o.createElement(e,{model:this.props.model,configuredIntegrations:this.props.configuredAPMIntegrations,updatingApiVersion:this.props.updatingApiVersion})}return o.createElement("div",null,o.createElement(c.default,{apiId:t,apiVersionId:e,tab:l.MONITORING}))}render(){return o.createElement(o.Fragment,null,this.renderServicesContainer())}}p.propTypes={model:a().object.isRequired,configuredAPMIntegrations:a().array.isRequired,updatingApiVersion:a().bool.isRequired,apmClassID:a().string.isRequired}},"./integrations/monitoring/containers/MonitoringContainerWrap.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./integrations/monitoring/containers/ServiceCardListDropdown.js"),i=n("./integrations/monitoring/containers/APMContainerDropdown.js");const r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  display: flex;
  flex-direction: column;
`;class a extends o.Component{render(){return o.createElement(r,null,o.createElement(i.default,{model:this.props.model,promoteTab:this.props.promoteTab}),o.createElement(s.default,{model:this.props.model,promoteTab:this.props.promoteTab}))}}},"./integrations/monitoring/containers/ServiceCardListDropdown.js":function(e,t,n){"use strict";n.r(t);var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./integrations/monitoring/stores/APMIntegrationStore.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoMonitor.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),b=n("./integrations/monitoring/components/AvailableMonitoringServices.js"),y=n("./integrations/utils/CommonHelperMethods.ts"),v=n("./integrations/monitoring/constants.js"),I=n("./js/stores/CurrentUserStore.js"),_=(n("./integrations/models/IntegrationClass.ts"),n("./integrations/utils/PowerUpSectionUtils.js"));function E(e){return s.createElement(s.Fragment,null,s.createElement(u.default,{type:"para",className:"monitoring-illustrator-description",hasBottomSpacing:!0},"Monitor API performance and send monitoring results to your APM provider."),s.createElement(b.default,{integrationClasses:e.integrationClasses,model:e.model,promoteTab:e.promoteTab}))}function S(e){const t=(0,c.resolveStoreInstance)(d.default),n=r().head(t.authenticationInstances).service,o=(0,_.filterAuthenticatedAPMClasses)(e.integrationClasses,n),i=(0,_.getAPMServiceData)(o,n),a=r().filter(o,(e=>r().includes(v.AUTH_SUPPORTED_CLASSES,e.id))),l=r().map(a,"id"),m=r().filter(e.integrationClasses,(e=>!r().includes(l,e.id)));return r().isEmpty(a)?s.createElement(MonitoringServicesView,{integrationClasses:e.integrationClasses,model:e.model,promoteTab:e.promoteTab}):s.createElement(s.Fragment,null,s.createElement(p.default,{direction:"column",alignItems:"center",padding:{paddingTop:"spacing-l",paddingBottom:"spacing-s"}},s.createElement(u.default,{type:"para",className:"monitoring-illustrator-description"},"Your team is authorized to ",i.name,"."),s.createElement(u.default,{type:"para",className:"monitoring-illustrator-description"},"Complete setup to view ",i.name," metric in Postman"),s.createElement(b.default,{integrationClasses:a,model:e.model,promoteTab:e.promoteTab})),s.createElement(u.default,{type:"para",className:"monitoring-illustrator-description"},"Other providers:"),s.createElement(b.default,{integrationClasses:m,model:e.model,promoteTab:e.promoteTab}))}let C=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.integrationsStore=(0,c.resolveStoreInstance)(l.default),this.apmIntegrationStore=(0,c.resolveStoreInstance)(d.default),this.state={isDropdownOpen:!0,errorObject:{status:500}},this.addIntegrationsTooltip=(0,s.createRef)(),this.handleAddIntegrationsClicked=this.handleAddIntegrationsClicked.bind(this),this.openAddIntegrationsPopover=this.openAddIntegrationsPopover.bind(this),this.closeAddIntegrationsPopover=this.closeAddIntegrationsPopover.bind(this)}componentDidMount(){pm.windowEvents.addListener("add-integrations-cta-clicked",this.handleAddIntegrationsClicked),(0,v.isFeatureFlagEnabled)(v.NEW_RELIC_APM_CLASS_ID)&&this.apmIntegrationStore.fetchAuthenticationInstances(v.AUTHENTICATION_INSTANCE_SCOPES.TEAM,(0,c.resolveStoreInstance)(I.default).teamId,v.AUTHENTICATION_CLASSES.NEW_RELIC_USER,v.NEW_RELIC_APM_CLASS_ID)}componentWillUnmount(){pm.windowEvents.removeListener("add-integrations-cta-clicked",this.handleAddIntegrationsClicked)}handleAddIntegrationsClicked(e){this.openAddIntegrationsPopover(),setTimeout(this.closeAddIntegrationsPopover,5e3),this.addIntegrationsTooltip&&this.addIntegrationsTooltip.current.scrollIntoView()}openAddIntegrationsPopover(){this.setState({isAddIntegrationsPopoverOpen:!0,isDropdownOpen:!0})}closeAddIntegrationsPopover(){this.setState({isAddIntegrationsPopoverOpen:!1})}render(){const{isDropdownOpen:e,isAddIntegrationsPopoverOpen:t}=this.state,n=this.integrationsStore.loadingIntegrationClasses,o=this.integrationsStore.getIntegrationClasses(),i=(0,y.filterIntegrationClassesByClientCategory)(o,v.API_PERFORMANCE_INTEGRATION),a=this.apmIntegrationStore.getConfiguredIntegrations(this.props.model.id),l=this.apmIntegrationStore.loadingConfiguredIntegrations[this.props.model.id],c=this.apmIntegrationStore.loadingAuthenticationInstances,d=r().get(this.apmIntegrationStore.authenticationInstances,"0"),u=r().isEmpty(d)?E:S;return n||c||l?s.createElement(m.default,{className:"observability-loading-indicator"}):l||r().isEmpty(a)?r().isEmpty(a)?s.createElement(p.default,{direction:"column",padding:"spacing-xxl spacing-l spacing-xxxl spacing-l",alignItems:"center"},s.createElement(p.default,{padding:"spacing-xxl spacing-l spacing-l",alignItems:"center"},s.createElement(g.default,null)),s.createElement(h.default,{type:"h4",text:"Connect Postman to your monitoring workflows",hasBottomSpacing:!0}),s.createElement(u,{integrationClasses:i,model:this.props.model,promoteTab:this.props.promoteTab})):null:s.createElement(p.default,{direction:"column",padding:"spacing-xxl spacing-l spacing-xxxl spacing-xxxl"},s.createElement(h.default,{type:"h4",text:"Connect Postman to your monitoring workflows",hasBottomSpacing:!0}),s.createElement(b.default,{integrationClasses:i,model:this.props.model,promoteTab:this.props.promoteTab,configuredIntegrations:a}))}})||o;t.default=(0,f.default)(C)},"./integrations/monitoring/containers/ServicesContainerDatadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/monitoring/stores/APMIntegrationStore.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),d=n("./integrations/monitoring/services/index.js"),u=n("./node_modules/lodash/lodash.js"),p=n.n(u),m=n("./integrations/monitoring/constants.js"),h=n("./integrations/monitoring/components/ServicesTableDatadog.js"),g=n("./integrations/monitoring/components/helpers/DashboardsQuickLinks.js"),f=n("./integrations/monitoring/components/helpers/MoreOptions.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),y=n("./js/services/NavigationService.js"),v=n("./integrations/navigation/constants.js"),I=n("./js/modules/services/AnalyticsService.js"),_=n("./node_modules/moment/moment.js"),E=n.n(_),S=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),C=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),T=n("./integrations/utils/CommonHelperMethods.ts"),A=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),j=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),w=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),O=n("./js/stores/ActiveWorkspaceSessionStore.js");const N=(0,T.getErrorContextObject)("Datadog APM Integration");let R=(0,i.observer)(o=class extends s.Component{constructor(e){if(super(e),this.apmIntegrationsStore=(0,r.resolveStoreInstance)(a.default),this.datadogStore=this.apmIntegrationsStore.find(m.DATADOG_APM_CLASS_ID),this.state={integration:{},loadingServiceMetrics:!1,loadingDashboards:!1,isDropdownOpen:!0,apiVersionId:p().get(this.props.model,"id"),selectedAPI:p().get(this.props.model,"apiId"),canEditIntegration:!1,linkedDashboards:[]},this.bootstrap=this.bootstrap.bind(this),this.fetchServiceMetrics=this.fetchServiceMetrics.bind(this),this.onServiceClick=this.onServiceClick.bind(this),!this.datadogStore){let e={},t={};e[this.state.apiVersionId]=[],t[this.state.apiVersionId]={},this.apmIntegrationsStore.add({id:m.DATADOG_APM_CLASS_ID,availableAPMServices:e,selectedAPMService:t}),this.datadogStore=this.apmIntegrationsStore.find(m.DATADOG_APM_CLASS_ID)}}componentDidMount(){this.bootstrap(),pm.windowEvents.addListener(`${m.API_MONITORING}-integration-edited`,this.bootstrap)}bootstrap(){const e=this.props.configuredIntegrations[0];this.setState({integration:e,linkedDashboards:p().get(e,"variables.dashboard_guids",[]),loadingServiceMetrics:!0}),b.default.getIntegrationData(e.id).then((t=>{if(200===t.status){let n=p().get(t.body,"data.executor"),o=p().get(t.body,"data.variables"),s=p().get(t.body,"data.rule");this.setState({executor:n,variables:o,rule:s,canEditIntegration:p().get(t,"body.meta.allowedActions.update"),linkedDashboards:o.dashboard_guids||[]},(()=>{this.fetchServiceMetrics(e.id,e.rule)}))}else pm.logger.error("ServicesContainerDatadog ~ Error occurred while loading integration details",p().get(t,"body"),{context:N})})).catch((e=>{pm.logger.error("ServicesContainerDatadog ~ Error occurred while loading integration details",e,{context:N})}))}fetchServiceMetrics(e,t){t===m.DATADOG_APM_CLASS_ID&&(this.setState({loadingServiceMetrics:!0}),d.default[t].fetchMetricsForLinkedServices(e).then((n=>{const{apiVersionId:o}=this.state;let i=[];p().forEach(n.servicesMetrics,((e,t)=>{const n=p().reduce(e,((e,n,o)=>{let i=`${Math.ceil(p().get(n,"rpm_score"))}`,r=`${parseFloat(p().get(n,"apdex_score")).toFixed(2)}`,a=`${(1e3*parseFloat(p().get(n,"latency"))).toFixed(2)}`,l=p().get(n,"error_rate_score");return e.push({label:o,value:o+t,environment:t,serviceName:o,metrics:{throughput:"NaN"===i?"-":`${i} hits/m`,errorRate:"NaN"===l?"-":`${l}%`,apdexScore:"NaN"===r?"-":r,latency:"NaN"===a?"-":`${a} ms`},embedGraphs:{apdex_graphs:{},error_rate_graphs:{},latency_graphs:{},throughput_graphs:{}},healthStatus:{status:"Unavailable",component:s.createElement(S.default,{alertSeverity:"Unavailable"})},link:`${C.default.getDatadogHostname(p().get(this.state,"variables.region"))}/apm/service/${o}/http.request?env=${t}&topGraphs=latency%3Alatency_by_version%2CbreakdownAs%3Apercentage%2Cerrors%3Acount%2Chits%3Acount&paused=false`}),e}),[]);i=p().concat(i,n)})),this.datadogStore.setAvailableAPMServices(o,i),this.datadogStore.setSelectedAPMService(o,i[0]),this.fetchServiceMonitorsStatus(e,t),this.setState({loadingServiceMetrics:!1})})).catch((e=>{pm.logger.error("ServicesContainerDatadog ~ Error while fetching metrics from datadog",e,{context:N}),this.setState({loadingServiceMetrics:!1})})))}fetchServiceMonitorsStatus(e,t){if(t!==m.DATADOG_APM_CLASS_ID)return;const{apiVersionId:n}=this.state,o=this.datadogStore.getAvailableAPMServices(n);p().forEach(o,(s=>{d.default[t].fetchServiceMonitorsStatus(e,s.label,s.environment).then((e=>{p().reduce(e.data.monitors,((e,t)=>("OK"!==t.status&&e.push({...t,timestamp:E()(p().get(t,"last_triggered_ts")).format(m.TIMESTAMP)}),e)),[]);const t=p().reduce(e.data.counts.status,((e,{name:t,count:n})=>(e[t]=n,e)),{}),i=C.default.getDatadogMonitorHealthStatusObject(t),r=p().map(o,(e=>{if(e.value===s.value){let o=e;return o.healthStatus=i,o.serviceStatuses=t,this.datadogStore.setSelectedAPMService(n,o),o}return e}));this.datadogStore.setAvailableAPMServices(n,r),this.setState({loadingServiceMetrics:!1})})).catch((e=>{this.setState({loadingServiceMetrics:!1}),pm.logger.error("ServicesContainerDatadog ~ Error while fetching monitor statuses from datadog",e,{context:N})}))}))}onServiceClick(e){const{integration:t,apiVersionId:n,selectedAPI:o}=this.state,s=(0,r.resolveStoreInstance)(O.default).activeEditor;pm.windowEvents.emit(`${m.API_MONITORING}-service-selected`,{selectedService:e,apiVersionId:n}),this.datadogStore.setSelectedAPMService(n,e),y.default.transitionTo(v.V10_API_APM_DATADOG_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:o,integrationId:t.id},null,{tabOptions:{openIn:s}}),I.default.addEventV2({category:"apm-integration",action:"view-service",label:p().get(this.state.integration,"rule"),value:1})}render(){let{integration:e,isDropdownOpen:t,linkedDashboards:n,loadingDashboards:o,loadingServiceMetrics:i,selectedAPI:r,apiVersionId:a,canEditIntegration:d}=this.state,u={api_id:r,executor:a},b=this.datadogStore.getAvailableAPMServices(a)||[];return n=p().map(n,(e=>({...e,link:`${C.default.getDatadogHostname(p().get(this.state,"variables.region"))}${e.link}`}))),s.createElement(A.default,{direction:"column",padding:"spacing-l"},s.createElement(A.default,{width:"100%",className:"api-entity-dropdown"},s.createElement(A.default,{alignItems:"center",justifyContent:"space-between",className:"api-entity-dropdown-trigger",grow:1,padding:{paddingRight:"spacing-xl"}},s.createElement(A.default,{gap:"spacing-xs",alignItems:"center"},s.createElement(j.default,{className:"api-entity-dropdown-icon-wrapper",type:"tertiary",size:"small",onClick:()=>this.setState({isDropdownOpen:!t}),icon:t?s.createElement(l.default,null):s.createElement(c.default,null)}),s.createElement("div",{onClick:()=>this.setState({isDropdownOpen:!t})},s.createElement(w.default,{type:"h4",text:m.RULE_TO_TITLE[m.DATADOG_APM_CLASS_ID]}))),s.createElement(A.default,{gap:"spacing-xs"},s.createElement(g.default,{linkedDashboards:n,loadingDashboards:o}),s.createElement(f.default,{integration:e,payload:u,canEditIntegration:d,apiVersionId:a,selectedAPI:r})))),t&&s.createElement("div",{className:"monitoring-services-table"},s.createElement("div",{className:"monitoring-services-table-success"},s.createElement("div",{className:"apm-services-table"},s.createElement(h.default,{loadingServiceMetrics:i,data:b,onServiceClick:this.onServiceClick})))))}})||o},"./integrations/monitoring/containers/ServicesContainerNewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),a=n("./integrations/monitoring/stores/APMIntegrationStore.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),d=n("./integrations/monitoring/services/index.js"),u=(n("./js/utils/NavigationUtil.js"),n("./integrations/monitoring/constants.js")),p=n("./js/services/NavigationService.js"),m=n("./api-dev/constants/APISubViews.js"),h=n("./js/modules/services/AnalyticsService.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),f=n("./integrations/components/error-states/IntegrationNotSupported.js"),b=n("./integrations/monitoring/components/helpers/DashboardsQuickLinks.js"),y=n("./integrations/monitoring/components/helpers/MoreOptions.js"),v=n("./integrations/monitoring/components/ServicesTableNewRelic.js"),I=n("./integrations/utils/CommonHelperMethods.ts"),_=n("./integrations/navigation/constants.js"),E=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),C=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),T=n("./js/stores/ActiveWorkspaceSessionStore.js"),A=n("./node_modules/lodash/lodash.js");const j=(0,I.getErrorContextObject)("New Relic APM Integration");let w=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(a.default),this.state={loadingServiceMetrics:!1,isPopOverOpen:!1,isDropdownOpen:!0,showDeleteModal:!1,isMoreOptionsOpen:!1,formattedServiceMetrics:[],apiVersionId:A.get(this.props.model,"id"),selectedAPI:A.get(this.props.model,"apiId"),canEditIntegration:!1,linkedDashboards:[]},this.bootstrap=this.bootstrap.bind(this),this.fetchServiceMetrics=this.fetchServiceMetrics.bind(this),this.fetchLinkedDashboards=this.fetchLinkedDashboards.bind(this),this.onServiceClick=this.onServiceClick.bind(this)}componentDidMount(){this.bootstrap(),pm.windowEvents.addListener(`${u.API_MONITORING}-integration-edited`,this.onIntegrationUpdate.bind(this))}bootstrap(){const e=this.props.configuredIntegrations[0];this.setState({integration:e}),g.default.getIntegrationData(e.id).then((e=>{200===e.status?this.setState({canEditIntegration:A.get(e,"body.meta.allowedActions.update")}):pm.logger.error("Error occurred while loading integration details",A.get(e,"body"))})).catch((e=>{pm.logger.error("Error occurred while loading integration details",e)})),this.fetchServiceMetrics(e.id,e.rule),this.fetchLinkedDashboards(e.id,e.rule)}onServiceClick(e){const{integration:t,apiVersionId:n,selectedAPI:o}=this.state,s=(0,r.resolveStoreInstance)(T.default).activeEditor;pm.windowEvents.emit(`${u.API_MONITORING}-service-selected`,{selectedService:e,apiVersionId:n}),this.store.setSelectedAPMService(e),p.default.transitionTo(_.V10_API_APM_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:o,integrationId:t.id},null,{tabOptions:{openIn:s}}),h.default.addEventV2({category:"apm-integration",action:"view-service",label:A.get(this.state.integration,"rule"),value:1})}fetchServiceMetrics(e,t){this.setState({loadingServiceMetrics:!0}),d.default[t].fetchMetricsForLinkedServices(e).then((e=>{let t=A.map(A.get(e,"data.data.actor.entities"),(e=>({label:e.name,value:e.guid,serviceName:e.name,serviceGuid:e.guid,latency:`${A.round(1e3*A.get(e,"apmSummary.responseTimeAverage"),2)} ms`,errorRate:`${A.round(100*A.get(e,"apmSummary.errorRate"),2)}%`,apdex:A.get(e,"apmSummary.apdexScore"),link:A.get(e,"permalink"),alertSeverity:A.get(e,"alertSeverity")})));this.store.setAvailableAPMServices(t),this.setState({formattedServiceMetrics:t,loadingServiceMetrics:!1})})).catch((e=>{pm.logger.error("ServicesContainerNewRelic ~ error occurred while fetching metrics for linked services",e,{context:j}),this.setState({loadingServiceMetrics:!1})}))}fetchLinkedDashboards(e,t){this.setState({loadingDashboards:!0}),d.default[t].fetchLinkedDashboards(e).then((e=>{let t=A.map(A.get(e,"data.data.actor.entities"),(e=>({label:e.name,value:e.guid,link:e.permalink})));this.setState({linkedDashboards:t,loadingDashboards:!1})})).catch((e=>{pm.logger.error("ServicesContainerNewRelic ~ error occurred while fetching linked dashboards",e,{context:j}),this.setState({loadingDashboards:!1})}))}onIntegrationUpdate(){this.bootstrap()}render(){let{loadingServiceMetrics:e,formattedServiceMetrics:t,integration:n,loadingDashboards:o,linkedDashboards:i,isDropdownOpen:r,selectedAPI:a,apiVersionId:p,canEditIntegration:h}=this.state,g={api_id:a,executor:p};return A.has(d.default,A.get(n,"rule"))?s.createElement(E.default,{direction:"column",padding:"spacing-l"},s.createElement(E.default,{width:"100%",className:"api-entity-dropdown"},s.createElement(E.default,{alignItems:"center",justifyContent:"space-between",className:"api-entity-dropdown-trigger",grow:1,padding:{paddingRight:"spacing-xl"}},s.createElement(E.default,{gap:"spacing-xs",alignItems:"center"},s.createElement(S.default,{className:"api-entity-dropdown-icon-wrapper",type:"tertiary",size:"small",onClick:()=>this.setState({isDropdownOpen:!r}),icon:r?s.createElement(l.default,null):s.createElement(c.default,null)}),s.createElement("div",{onClick:()=>this.setState({isDropdownOpen:!r})},s.createElement(C.default,{type:"h4",text:u.RULE_TO_TITLE[A.get(n,"rule")]}))),s.createElement(E.default,{gap:"spacing-xs"},s.createElement(b.default,{linkedDashboards:i,loadingDashboards:o}),s.createElement(y.default,{integration:n,apiVersionId:p,selectedAPI:a,payload:g,canEditIntegration:h})))),r&&s.createElement("div",{className:"monitoring-services-table"},s.createElement("div",{className:"monitoring-services-table-success"},r&&s.createElement("div",{className:"apm-services-table"},s.createElement(v.default,{data:t,loadingServiceMetrics:e,onServiceClick:this.onServiceClick}))))):s.createElement("div",null,s.createElement(f.default,{apiId:a,apiVersionId:p,tab:m.MONITORING}))}})||o},"./integrations/monitoring/containers/helpers/DatadogAPMUtils.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),i=n("./integrations/monitoring/constants.js"),r=n("./node_modules/uuid/index.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");t.default={getDatadogMonitorHealthStatusObject:function(e){const{ALERT:t,WARN:n,NO_DATA:r,OK:a,NO_MONITORS:c}=i.DATADOG_MONITOR_STATUSES;let d={status:c,component:o.createElement(s.default,{alertSeverity:c})};return l.get(e,t)>0?d={status:t,component:o.createElement(s.default,{numMonitors:l.get(e,t),alertSeverity:t})}:l.get(e,n)>0?d={status:n,component:o.createElement(s.default,{numMonitors:l.get(e,n),alertSeverity:n})}:l.get(e,r)>0?d={status:r,component:o.createElement(s.default,{numMonitors:l.get(e,r),alertSeverity:r})}:l.get(e,a)>0&&(d={status:a,component:o.createElement(s.default,{numMonitors:l.get(e,a),alertSeverity:a})}),d},getDatadogHostname:function(e){return"https://app.datadoghq"+("eu"===e?".eu":".com")},areEnvironmentsValid:function(e){const t=l.some(e,(e=>l.isEmpty(e.name)||l.isEmpty(e.services))),n=l(e).map("name").uniq().value().length!==e.length;return!t&&!n},getEmptyEnvironmentsList:function(){return[{name:"none",services:[],id:a().v4()}]}}},"./integrations/monitoring/customComponents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{serviceBasedCustomComponents:function(){return a}});var o=n("./integrations/monitoring/add/Datadog/Datadog.js"),s=n("./integrations/monitoring/add/NewRelic.js"),i=n("./integrations/monitoring/edit/Datadog.js"),r=n("./integrations/monitoring/edit/NewRelic.js");const a={datadog:{customCreateComponent:o.default,customEditComponent:i.default,useLegacyDataFormat:!0},apm_datadog:{customCreateComponent:o.default,customEditComponent:i.default,useLegacyDataFormat:!0},apm_new_relic:{customCreateComponent:s.default,customEditComponent:r.default,useLegacyDataFormat:!0}}},"./integrations/monitoring/edit/Datadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DatadogAPM:function(){return N},default:function(){return R}});var o,s,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./js/stores/StoreManager.js"),p=n("./integrations/monitoring/stores/APMIntegrationStore.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),h=n("./integrations/components/base/EditIntegration.js"),g=n("./integrations/monitoring/services/index.js"),f=n("./integrations/navigation/constants.js"),b=n("./integrations/monitoring/constants.js"),y=n("./js/components/base/Buttons.js"),v=n("./js/services/NavigationService.js"),I=n("./appsdk/workbench/TabService.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js"),E=n("./node_modules/uuid/index.js"),S=n.n(E),C=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),T=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js"),j=n("./integrations/utils/CommonHelperMethods.ts"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const O=(0,j.getErrorContextObject)("Datadog APM Integration");let N=(0,c.observer)(o=class extends a.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=async e=>{this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(b.DATADOG_APM_CLASS_ID);const{rule:t}=this.props,{apiKey:n,appKey:o,region:s,dashboardGuids:i}=this.state,a=r().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),l=r().get(a,"options.serviceActionId"),c=r().get(a,"id");this.setState({loadingDashboards:!0,errorDashboards:!1});const d={rule:t,type:"listDashboards",...n?{api_key:n}:{},...o?{app_key:o}:{},region:s};g.default[t].listDashboardsWithIntegrationId(d,e,l,c).then((e=>{let t=r().map(r().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${C.default.getDatadogHostname(s)}${e.url}`}))),n=r().filter(t,(e=>r().includes(r().map(i,"link"),e.url)));this.setState({errorDashboards:!1,availableDashboards:t,selectedDashboards:n,loadingDashboards:!1,errorApiKey:!1,errorAppKey:!1})})).catch((e=>{pm.logger.error("Monitoring Tab Edit Form ~ Error occurred while listing dashboards",e,{context:O}),this.setState({errorDashboards:!0,loadingDashboards:!1,errorApiKey:!0,errorAppKey:!0,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],environments:C.default.getEmptyEnvironmentsList()})}))},this.state={nickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,errorNickname:"",dashboardGuids:[],selectedDashboards:[],availableDashboards:[],loadingDashboards:!1,errorDashboards:!1,environments:C.default.getEmptyEnvironmentsList(),region:"us1"},this.store=(0,u.resolveStoreInstance)(p.default),this.integrationsStore=(0,u.resolveStoreInstance)(d.default),this.toggle=this.toggle.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.listDashboardsWithIntegrationId=this.listDashboardsWithIntegrationId.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.client_category=b.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this),this.getInitialData=this.getInitialData.bind(this)}componentDidMount(){let{variables:e,origin:t,nickname:n}=this.props;this.setState({apiKey:e.api_key,appKey:e.app_key,region:"us"==e.region?"us1":"eu"==e.region?"eu1":e.region,apiId:e.postman_api_id,dashboardGuids:e.dashboard_guids,environments:r().map(e.environments,(e=>({...e,id:S().v4()}))),errorApiKey:!1,errorAppKey:!1,nickname:n,origin:t},(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}getInitialData(){const{variables:e,name:t,rule:n}=this.props.controller.integrationData;return{name:t,rule:n,variables:r().pick(e,["api_key","app_key","region","environments","dashboard_guids"])}}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],loadingDashboards:!1,errorDashboards:!1,environments:C.default.getEmptyEnvironmentsList()}}))}removeEnvironmentSelector(e){this.setState((t=>{let{environments:n}=t;return r()(n).splice(e,1).value(),{environments:n}}))}onDashboardSelect(e){if(!r().isArray(e))return;let t=r().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e,dashboardGuids:t})}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1,dashboardGuids:[],environments:C.default.getEmptyEnvironmentsList()};r().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)})):this.setState((n=>n.apiKey!==e.trim()?t:{apiKey:e.trim(),errorApiKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1,dashboardGuids:[],environments:C.default.getEmptyEnvironmentsList()};r().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)})):this.setState((n=>n.appKey!==e.trim()?t:{appKey:e.trim(),errorAppKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{apiKey:e,appKey:t,region:n,errorNickname:o,environments:s,loadingDashboards:i,selectedDashboards:c,availableDashboards:d,dashboardGuids:u,errorDashboards:p,nickname:g,errorApiKey:_,errorAppKey:E}=this.state,{rule:j,apiId:O,apiVersionId:N,integrationId:R,variables:P}=this.props,D=C.default.areEnvironmentsValid(s);let M={name:g,rule:j,api_id:O,entity:"apiversion",executor:N,variables:{...e?{api_key:e}:{},...t?{app_key:t}:{},region:n,dashboard_guids:u,environments:r().map(s,(e=>({name:e.name,services:e.services})))}};return a.createElement("div",null,a.createElement(m.NicknameFieldSegment,{id:"datadog-nickname",value:g,error:o,onBlur:()=>{this.setState({nickname:g.trim(),errorNickname:r().isEmpty(g.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),a.createElement(l.default,{direction:"column",gap:"spacing-l",padding:{paddingTop:"spacing-l"}},a.createElement(T.default,{mode:b.EDIT_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:_?"error":null,apiKeyValidationMessage:_?"Invalid API Key or APP key":null,handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value,errorAppKey:!1})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:E?"error":null,appKeyValidationMessage:E?"Invalid API Key or APP key":null,region:n,handleOnRegionChange:this.onRegionSelectorChange}),a.createElement(A.default,{mode:b.EDIT_MODE,apiKey:e,appKey:t,integrationId:R,selectedDashboards:c,availableDashboards:d,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:i,errorDashboards:p,environments:s,region:n,rule:j,onSelectEnvironmentServices:(e,t,n)=>{this.setState((o=>(o.environments[n]={id:r().get(o.environments[n],"id"),name:e,services:t},o)))},removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{this.setState((e=>(e.environments.push({name:"",services:[],id:S().v4()}),e)))},isAddEnvironmentButtonDisabled:!D})),a.createElement(h.default,{type:"primary",disabled:r().isEmpty(g.trim())||_||E||!D||o||i||!(0,w.isFormUpdated)(this.getInitialData(),M),payload:M,store:this.store,rule:j,client_category:this.client_category,route:f.V10_API_EDIT_APM_INTEGRATION_URL,integrationId:R,redirect:()=>{v.default.transitionTo(f.V10_API_APM_DATADOG_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:O,integrationId:R})}},"Update"),a.createElement("div",{className:"integrations-add-actions__button--container"},a.createElement(y.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{I.default.closeByRoute(f.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:O,integrationId:R})}},"Cancel")))}})||o,R=(0,c.observer)(s=class extends a.Component{render(){let{rule:e}=this.props;return e===b.DATADOG_APM_CLASS_ID?a.createElement(N,this.props):e===b.DATADOG_MONITOR_CLASS_ID?a.createElement(_.default,this.props):void 0}})||s},"./integrations/monitoring/edit/NewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{NewRelicAPM:function(){return x},default:function(){return L}});var o,s,i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./integrations/components/base/EditIntegration.js"),u=n("./integrations/monitoring/services/index.js"),p=n("./integrations/monitoring/constants.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/utils.js"),g=n("./js/components/base/Buttons.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),_=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),E=n("./js/services/NavigationService.js"),S=n("./appsdk/workbench/TabService.js"),C=n("./api-dev/constants/APISubViews.js"),T=n("./integrations/navigation/constants.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js"),j=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),O=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),N=n("./js/stores/CurrentUserStore.js"),R=n("./integrations/services/AuthenticationInstanceService.ts"),P=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),D=n("./node_modules/lodash/lodash.js");const M=pm.logger.getContext("NewRelicEdit","integrations");let x=(0,r.observer)(o=class extends i.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=e=>{const{rule:t}=this.props,{dashboardGuids:n}=this.state;this.setState({loadingDashboards:!0,errorDashboards:!1}),u.default[t].listDashboardsWithIntegrationId(e).then((e=>{let t=D.map(D.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),o=D.map(t,(e=>{if(D.includes(n,e.value))return e}));o=D.compact(o),this.setState({availableDashboards:t,selectedDashboard:o,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))},this.listServiesWithIntegrationId=e=>{const{rule:t}=this.props,{serviceGuids:n}=this.state;this.setState({loadingServices:!0,errorServices:!1}),u.default[t].listSevicesWithIntegrationId(e).then((e=>{let t=D.map(D.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),o=D.map(t,(e=>{if(D.includes(n,e.value))return e}));o=D.compact(o),this.setState({availableServices:t,selectedService:o,loadingServices:!1})})).catch((e=>{var t,n;this.setState({orphaned:403===(null===(t=e.error)||void 0===t?void 0:t.statusCode)&&"newRelicError"===(null===(n=e.error)||void 0===n?void 0:n.name),errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))},this.state={nickname:"",apiKey:"",errorNickname:"",errorApiKey:"",monitor:"",region:p.NEW_RELIC_REGIONS.US,isUsingApiKeyInput:!0,loadingAuthenticationInstances:!0,authenticationInstances:[],addNewRelicToTeam:!1,installedAppFeatureFlag:!1,orphaned:!1,authToBeUsed:""},this.store=(0,a.resolveStoreInstance)(l.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.client_category=p.API_MONITORING,this.getInitialState=this.getInitialState.bind(this),this.changeAuthenticationCallback=this.changeAuthenticationCallback.bind(this)}componentDidMount(){const{origin:e,variables:t}=this.props,n=(0,p.isFeatureFlagEnabled)(p.NEW_RELIC_APM_CLASS_ID);this.setState({...this.getInitialState(),isUsingApiKeyInput:!t.auth,installedAppFeatureFlag:n,origin:e},(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId),this.listServiesWithIntegrationId(this.props.integrationId),n&&this.fetchAuthenticationInstance()}))}fetchAuthenticationInstance(){const e=(0,a.resolveStoreInstance)(N.default);this.setState({loadingAuthenticationInstances:!0}),R.default.listAuthenticationInstances({scope:[{type:p.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[p.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[p.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(D.isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:M}),this.setState({loadingAuthenticationInstances:!1});if(D.isEmpty(e.data))return this.setState({authenticationInstances:[],loadingAuthenticationInstances:!1});const t=D.head(e.data);P.default.fetchUserInfo(t.createdBy,((n,o)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=D.get(o,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,loadingAuthenticationInstances:!1}))))})).catch((e=>(pm.logger.error("APIBuilder-EditNewRelic~Error loading authentication instances!",e,{context:M}),this.setState({loadingAuthenticationInstances:!1}))))}getInitialState(){const{variables:e,nickname:t}=this.props;return{apiKey:e.api_key,region:e.region?e.region:p.NEW_RELIC_REGIONS.US,apiId:e.postman_api_id,serviceGuids:e.service_guids,dashboardGuids:e.dashboard_guids,nickname:t,addNewRelicToTeam:!1,authToBeUsed:e.auth}}toggle(e){this.setState((t=>({[e]:!t[e]})))}onServiceSelect(e){if(!D.isArray(e))return;let t=D.map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!D.isArray(e))return;let t=D.map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:D.isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}listServices(){const{rule:e}=this.props,{apiKey:t,region:n,serviceGuids:o,isUsingApiKeyInput:s,authenticationInstances:i}=this.state,r={rule:e,type:"listServices"};s?(r.api_key=t,r.region=n):r.serviceAuth=D.head(i).id,this.setState({loadingServices:!0,errorServices:!1}),u.default[e].listServices(r).then((e=>{const t=D.map(D.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));let n=D.map(t,(e=>{if(D.includes(o,e.value))return e}));n=D.compact(n),this.setState({availableServices:t,selectedService:n,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))}listDashboards(){const{rule:e}=this.props,{apiKey:t,region:n,dashboardGuids:o,isUsingApiKeyInput:s,authenticationInstances:i}=this.state,r={rule:e,type:"listDashboards"};s?(r.api_key=t,r.region=n):r.serviceAuth=D.head(i).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),u.default[e].listServices(r).then((e=>{let t=D.map(D.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),n=D.map(t,(e=>{if(D.includes(o,e.value))return e}));n=D.compact(n),this.setState({availableDashboards:t,selectedDashboard:n,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,authToBeUsed:null})}changeAuthenticationCallback(){const{authenticationInstances:e}=this.state;this.setState({orphaned:!1,authToBeUsed:D.head(e).id},(()=>{this.listServices(),this.listDashboards()}))}render(){const{apiKey:e,region:t,errorApiKey:n,errorNickname:o,availableServices:s,selectedService:r,loadingServices:a,loadingDashboards:l,selectedDashboard:u,availableDashboards:A,serviceGuids:N,dashboardGuids:R,errorServices:P,errorDashboards:M,origin:x,nickname:L,orphaned:k,authToBeUsed:F,isUsingApiKeyInput:B,authenticationInstances:U,loadingAuthenticationInstances:V,addNewRelicToTeam:G,installedAppFeatureFlag:z}=this.state,{rule:H,apiId:W,apiVersionId:q,integrationId:K,variables:$}=this.props,Y=!V&&D.isEmpty(U)&&k,J=z&&!V&&D.isEmpty(U),X=!D.isEmpty(U)&&F!==D.head(U).id,Q=e||F;let Z={name:L,rule:H,api_id:W,entity:"apiversion",executor:q,variables:{...e&&B?{api_key:e}:{},...B?{region:t,auth:""}:{auth:F},postman_api_id:W,service_guids:N,dashboard_guids:R}};return i.createElement("div",null,i.createElement(c.NicknameFieldSegment,{id:"new-relic-nickname",value:L,error:o,onBlur:()=>{this.setState({nickname:L.trim(),errorNickname:D.isEmpty(L.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),B?i.createElement(c.SensitiveFieldSegment,{title:i.createElement(f.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:i.createElement(m.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):i.createElement(i.Fragment,null,i.createElement(O.default,{connectedAccount:D.head(U),isLoading:V,isUsingPersonalCredentials:B,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+D.get(D.head(U),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account",orphaned:Y,reauthenticateWithAnotherAccount:X,primaryChangeAuthenticationText:"Connected New Relic account is changed by "+D.get(D.head(U),"createdByDetails.name","your team member"),changeAuthenticationText:"Setup services using this authenticated account",changeAuthenticationCallback:this.changeAuthenticationCallback}),X?i.createElement(c.SensitiveFieldSegment,{title:i.createElement(f.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:i.createElement(m.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):null),i.createElement(j.MultiSelectWrapper,null,i.createElement(b.default,{menuMaxHeight:"36vh",value:r,options:s,placeholder:"Select New Relic Services",label:i.createElement(f.default,{text:"Services",type:"secondary",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:P&&"Unable to load services",emptyStateMessage:"No services found"})),i.createElement(j.MultiSelectWrapper,null,i.createElement(b.default,{menuMaxHeight:"24vh",value:u,options:A,placeholder:"Select Dashboards",label:i.createElement(f.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:this.onDashboardSelect,isLoading:l,error:M&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"})),B||X?i.createElement(i.Fragment,null,i.createElement(j.RadioButtonDiv,null,i.createElement(f.default,{text:"New Relic region",type:"primary"}),i.createElement(y.default,{type:"para"},"This helps us know what New Relic region to use"),i.createElement(v.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},i.createElement(I.default,{label:"US (.com)",value:"us"}),i.createElement(I.default,{label:"EU (.eu)",value:"eu"}))),J?i.createElement("div",null,i.createElement(_.default,{isChecked:G,label:p.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:p.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!G})}})):null):null,i.createElement(d.default,{type:"primary",disabled:D.isEmpty(L.trim())||!Q||D.isEmpty(N)||!(0,w.isFormUpdated)(this.getInitialState(),this.state),payload:Z,generatePayload:G?h.default.createAndPopulateNewRelicAuthenticationInstance:null,store:this.store,rule:H,client_category:this.client_category,redirect:()=>{x===p.SERVICES_CONTAINER?E.default.transitionTo("build.apiVersion",{apiId:W,versionId:q},{tab:C.MONITORING}):E.default.transitionTo(T.V10_API_APM_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:W,integrationId:K})},route:T.V10_API_EDIT_APM_INTEGRATION_URL,integrationId:K},"Update"),i.createElement("div",{className:"integrations-add-actions__button--container"},i.createElement(g.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{S.default.closeByRoute(T.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:W,integrationId:K})}},"Cancel")))}})||o,L=(0,r.observer)(s=class extends i.Component{render(){let{rule:e}=this.props;return e===p.NEW_RELIC_APM_CLASS_ID?i.createElement(x,this.props):e===p.NEW_RELIC_MONITOR_CLASS_ID?i.createElement(A.default,this.props):void 0}})||s},"./integrations/monitoring/sentry/CompactView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("./integrations/components/api-builder/ShowDetailedView.js"),l=n("./js/services/NavigationService.js"),c=n("./node_modules/prop-types/index.js"),d=n.n(c),u=n("./integrations/components/api-builder/CompactViewContainer.js"),p=n("./integrations/monitoring/sentry/components/MetaDetails.js"),m=n("./integrations/monitoring/sentry/constants.js"),h=n("./integrations/monitoring/sentry/components/IntegrationActionsMenu.js"),g=n("./integrations/monitoring/sentry/components/RefreshIssuesButton.js"),f=n("./integrations/monitoring/sentry/components/IssuesTable.js"),b=n("./js/modules/services/AnalyticsService.js"),y=n("./node_modules/lodash/lodash.js");let v=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.onEnvironmentChange=e=>{const t=y.get(e,"value","");this.setState({selectedEnvironment:t},(()=>{b.default.addEventV2({category:m.ANALYTICS_EVENT_CATEGORY,action:"update-environment",value:t,label:m.SOURCE.MONITORING_TAB})}))},this.onDurationChange=e=>{const t=y.get(e,"value","");this.setState({selectedDuration:t},(()=>{b.default.addEventV2({category:m.ANALYTICS_EVENT_CATEGORY,action:"update-duration",value:t,label:m.SOURCE.MONITORING_TAB})}))},this.state={selectedEnvironment:m.ALL_ENVIRONEMENT_OPTION_VALUE,selectedDuration:y.get(y.nth(m.DURATION_OPTIONS,m.DEFAULT_DURATION_INDEX),"value")},this.integrationId=y.get(this.props,["integration","id"]),this.openDetailedIssuesView=this.openDetailedIssuesView.bind(this),this.onEnvironmentChange=this.onEnvironmentChange.bind(this),this.onDurationChange=this.onDurationChange.bind(this),this.issuesTableRef=i.createRef()}openDetailedIssuesView(){const{apiId:e,apiVersionId:t}=this.props;b.default.addEventV2({category:m.ANALYTICS_EVENT_CATEGORY,action:"open-detailed-issues-page",label:m.SOURCE.MONITORING_TAB}),l.default.transitionTo(m.DETAILED_ISSUES_ROUTE_IDENTIFIER,{apiId:e,versionId:t,integrationId:this.integrationId})}render(){const{selectedEnvironment:e,selectedDuration:t}=this.state,{apiId:n,apiVersionId:o}=this.props,s=i.createElement(r.default,{direction:"row"},i.createElement(g.default,{onClick:()=>{b.default.addEventV2({category:m.ANALYTICS_EVENT_CATEGORY,action:"refresh-issues",label:m.SOURCE.MONITORING_TAB}),y.invoke(this.issuesTableRef,["current","refreshIssues"])}}),i.createElement(h.default,{integrationId:this.integrationId,apiId:n,apiVersionId:o})),l=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(p.default,{integrationId:this.integrationId,onEnvironmentChange:this.onEnvironmentChange,onDurationChange:this.onDurationChange}),i.createElement(f.default,{ref:this.issuesTableRef,source:m.SOURCE.MONITORING_TAB,integrationId:this.integrationId,selectedEnvironment:e,selectedDuration:t,hideLoadmoreButton:!0,issuesLimit:5})),i.createElement(a.default,{label:"View all issues",onClick:this.openDetailedIssuesView}));return i.createElement(u.default,{containerTitle:"Sentry",containerBody:l,rightSectionComponent:s})}})||o;v.propTypes={integration:d().object.isRequired,apiId:d().string.isRequired,apiVersionId:d().string.isRequired}},"./integrations/monitoring/sentry/components/IntegrationActionsMenu.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),p=n("./js/stores/SyncStatusStore.js"),m=n("./js/stores/StoreManager.js"),h=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./js/services/NavigationService.js"),f=n("./integrations/api-observability/constants.ts"),b=n("./integrations/monitoring/constants.js"),y=n("./integrations/components/DeleteIntegrationModal.js"),v=n("./integrations/utils/CommonHelperMethods.ts"),I=n("./integrations/monitoring/sentry/constants.js"),_=n("./integrations/navigation/constants.js");class E extends o.Component{constructor(e){super(e),this.state={showDeleteModal:!1,canEditDeleteIntegration:!1},this.store=(0,m.resolveStoreInstance)(h.default)}componentDidMount(){const{apiId:e}=this.props;(0,m.resolveStoreInstance)(p.default).onSyncAvailable({timeout:I.SYNC_STATUS_TIMEOUT}).then((()=>(0,v.fetchApiPermissions)(e))).then((e=>{this.setState({canEditDeleteIntegration:e})}))}render(){const{showDeleteModal:e,canEditDeleteIntegration:t}=this.state,{apiId:n,apiVersionId:s,integrationId:i,menuButtonSize:p}=this.props,m=!t&&f.PERMISSION_ERROR;return o.createElement(r.default,{justifyContent:"center",alignItems:"center"},o.createElement(a.default,null,o.createElement(l.default,null,o.createElement(c.default,{icon:"icon-action-options-stroke",type:"tertiary",size:p||"small"})),o.createElement(d.default,null,o.createElement(u.default,{onClick:()=>{g.default.transitionTo(_.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:n,integrationId:i},{service:I.SERVICE_ID,rule:I.INTEGRATION_CLASS_NAME})},isDisabled:!t,tooltip:m},"Edit Integration"),o.createElement(u.default,{type:"destructive",onClick:()=>{this.setState({showDeleteModal:!0})},isDisabled:!t,tooltip:m},"Delete Integration"))),o.createElement(y.default,{size:"small",store:this.store,category:b.API_MONITORING,payload:{api_id:n,executor:s},isOpen:e,handleCloseModal:()=>{this.setState({showDeleteModal:!1})},integrationId:i,ruleId:I.INTEGRATION_CLASS_NAME}))}}E.propTypes={integrationId:i().string.isRequired,apiId:i().string.isRequired,apiVersionId:i().string.isRequired,menuButtonSize:i().string}},"./integrations/monitoring/sentry/components/IssueDetails.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),u=n("./integrations/monitoring/sentry/service.js"),p=n("./node_modules/prop-types/index.js"),m=n.n(p),h=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("./integrations/monitoring/sentry/components/StackTraceItem.js"),f=n("./integrations/monitoring/sentry/constants.js"),b=n("./appsdk/components/link/Link.js"),y=n("./node_modules/lodash/lodash.js");const v=(0,h.default)(r.default)`
    background-color: var(--background-color-secondary);
    padding: var(--spacing-m) var(--spacing-m) var(--spacing-m) calc(var(--spacing-xxl) + var(--spacing-s));
  `,I=(0,h.default)(r.default)`
    row-gap: var(--spacing-xs);
  `;let _=(0,s.observer)(o=class extends i.Component{constructor(e){super(e),this.state={issueDetails:{},loadingDetails:!0},this.fetchIssueDetails=this.fetchIssueDetails.bind(this)}fetchIssueDetails(){this.setState({loadingDetails:!0});const{integrationId:e,issueId:t,sentryEnvironment:n}=this.props,o={inputs:{issue_id:t,sentryEnvironment:n}};u.default.fetchIssueDetails(e,o).then((e=>{this.setState({loadingDetails:!1,issueDetails:e})})).catch((e=>{pm.logger.error("Sentry.IssueDetails ~ Error in fetching issue details",e),this.setState({loadingDetails:!1})}))}componentDidMount(){this.fetchIssueDetails()}render(){const{issueDetails:e,loadingDetails:t}=this.state,n=y.get(e,["metadata","type"],""),o=y.get(e,["metadata","value"],""),s=y.get(e,"entries",[]),u=y.first(y.filter(s,{type:"exception"})),p=y.get(u,"data.values[0].stacktrace.frames",[]);return t?i.createElement(v,{justifyContent:"center",alignItems:"center"},i.createElement(a.default,{size:"small",description:f.LOADING_ISSUE_DETAILS})):y.isEmpty(e)?i.createElement(v,{justifyContent:"center",alignItems:"end"},i.createElement(l.default,null,f.ERROR_MESSAGES.UNABLE_TO_FETCH_ISSUES_DETAILS," "),i.createElement(b.default,{onClick:e=>{e.preventDefault(),this.fetchIssueDetails()}},i.createElement(l.default,{type:"link-default"},i.createElement(l.default,null,"Try again")))):i.createElement(v,{direction:"column"},i.createElement(r.default,{direction:"row"},i.createElement(r.default,{justifyContent:"center",alignItems:"flex-start"},i.createElement(c.default,{type:"h5",text:"Tags: "})),i.createElement(I,{justifyContent:"flex-start",alignItems:"center",wrap:"wrap",width:"100%"},y.map(e.tags,(e=>i.createElement(d.default,{type:"neutral",text:`${y.lowerCase(e.key)}: ${e.value}`}))))),(n||o)&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement(c.default,{type:"h5",text:n}),i.createElement(l.default,null,o)),!y.isEmpty(p)&&i.createElement(i.Fragment,null,i.createElement("br",null),y.map(p,(e=>i.createElement(g.default,{traceFrameData:e})))),i.createElement("br",null))}})||o;_.propTypes={integrationId:m().string.isRequired,issueId:m().string.isRequired,sentryEnvironment:m().string}},"./integrations/monitoring/sentry/components/IssueFilters.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),u=n("./integrations/monitoring/sentry/service.js"),p=n("./integrations/monitoring/sentry/constants.js"),m=n("./node_modules/lodash/lodash.js");const h=(0,r.default)(a.default)`
    & .aether-dropdown__control {
      border: none;
    }
    & .aether-dropdown__control--is-focused, &:hover {
      border: none;
      box-shadow: none;
    }
  `;class g extends o.Component{constructor(e){super(e),this.handleEnvironmentChange=e=>{this.setState({selectedEnvironment:e},(()=>{this.props.onEnvironmentChange(e)}))},this.handleDurationChange=e=>{this.setState({selectedDuration:e},(()=>{this.props.onDurationChange(e)}))},this.state={environments:[],selectedDuration:m.nth(p.DURATION_OPTIONS,p.DEFAULT_DURATION_INDEX),selectedEnvironment:m.first(p.ENVIRONMENT_DEFAULT_OPTION),loadingEnvironments:!0},this.addToast=this.props.addToast,this.handleEnvironmentChange=this.handleEnvironmentChange.bind(this),this.handleDurationChange=this.handleDurationChange.bind(this)}componentDidMount(){const{integrationId:e}=this.props;u.default.fetchEnvironments(e).then((e=>{const t=m.map(e,(e=>({value:e.value,label:e.name})))||[];this.setState({loadingEnvironments:!1,environments:[...p.ENVIRONMENT_DEFAULT_OPTION,...t]})})).catch((e=>{pm.logger.error("sentry.IssueFilters ~ Error fetching environments",e),this.addToast({title:p.ENVIROMENT_LOADING_FAILED_TOAST.title,status:"error",description:p.ENVIROMENT_LOADING_FAILED_TOAST.description}),this.setState({loadingEnvironments:!1})}))}render(){const{loadingEnvironments:e,environments:t,selectedEnvironment:n,selectedDuration:s}=this.state;return o.createElement(l.default,{direction:"row"},o.createElement(l.default,{justifyContent:"center",alignItems:"center"},o.createElement(c.default,{color:"content-color-secondary"},"Environments:")),o.createElement(h,{triggerWidth:"auto",menuWidth:"auto",isClearable:!1,isLoading:e,onChange:this.handleEnvironmentChange,placeholder:"Select Environment",value:n,options:t}),o.createElement(l.default,{justifyContent:"center",alignItems:"center"},o.createElement(c.default,{color:"content-color-secondary"},"Duration:")),o.createElement(h,{triggerWidth:"auto",menuWidth:"auto",isClearable:!1,options:p.DURATION_OPTIONS,onChange:this.handleDurationChange,value:s,placeholder:"Select duration"}))}}g.propTypes={onEnvironmentChange:i().func.isRequired,onDurationChange:i().func.isRequired,integrationId:i().string.isRequired},t.default=(0,d.default)(g)},"./integrations/monitoring/sentry/components/IssuesTable.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/TestPass.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),g=n("./integrations/utils/CommonHelperMethods.ts"),f=n("./integrations/monitoring/sentry/constants.js"),b=n("./integrations/monitoring/sentry/service.js"),y=n("./integrations/monitoring/sentry/components/IssueDetails.js"),v=n("./js/external-navigation/ExternalNavigationService.js"),I=n("./js/modules/services/AnalyticsService.js"),_=n("./node_modules/lodash/lodash.js");const E=r.default.div`
    display: flex;
    aligh-items: center;
    width: 100%;
  `,S=r.default.div`
    margin: var(--spacing-m);
    overflow:hidden;
  `;class C extends o.Component{constructor(e){super(e),this.state={issuesList:[],loadingIssues:!0,nextCursor:"",errorFetchingIssues:!1},this.refreshIssues=this.refreshIssues.bind(this),this.issueRowSubComponent=this.issueRowSubComponent.bind(this),this.getEmptyTableComponent=this.getEmptyTableComponent.bind(this),this.getSentryTableColumns=this.getSentryTableColumns.bind(this)}componentDidMount(){this.refreshIssues()}componentDidUpdate(e){const{selectedEnvironment:t,selectedDuration:n}=this.props;e.selectedEnvironment===t&&e.selectedDuration===n||this.refreshIssues()}issueRowSubComponent(e){const{integrationId:t,selectedEnvironment:n}=this.props;return o.createElement(y.default,{integrationId:t,issueId:e.id,sentryEnvironment:n})}getSentryTableColumns(){const{source:e}=this.props;return[{Header:"Issues",accessor:e=>[_.get(e,"title"),_.get(e,"permalink")],Cell:({value:t})=>{const[n,s]=t;return o.createElement(E,{onClick:t=>{t.preventDefault(),I.default.addEventV2({category:f.ANALYTICS_EVENT_CATEGORY,action:"open-issue-on-sentry",label:e}),(0,v.openExternalLink)(s,"_blank")}},o.createElement(a.default,{type:"link-default",isExternal:!0,isTruncated:!0},n))}},{Header:"Level",accessor:"level",Cell:({value:e})=>(e||(e="N/A"),o.createElement(l.default,{alignItems:"center"},o.createElement(c.default,{status:_.get(f.LEVEL_TO_BADGE_STATUS_MAPPING,e,f.LEVEL_TO_BADGE_STATUS_MAPPING.default),text:e}))),cellWidth:"100px"},{Header:"Handled",accessor:"isUnhandled",Cell:({value:e})=>{const t=e?"No":"Yes";return o.createElement(l.default,{alignItems:"center"},o.createElement(c.default,{status:"neutral",text:t}))},cellWidth:"90px"},{Header:"First Seen",accessor:"firstSeen",Cell:e=>o.createElement(l.default,{alignItems:"center"},o.createElement(a.default,{isTruncated:!0},(0,g.getRelativeTime)(e.value))),cellWidth:"120px"},{Header:"Last Seen",accessor:"lastSeen",Cell:e=>o.createElement(l.default,{alignItems:"center"},o.createElement(a.default,{isTruncated:!0},(0,g.getRelativeTime)(e.value))),cellWidth:"120px"},{Header:"Events",accessor:"count",Cell:e=>o.createElement(l.default,{alignItems:"center"},o.createElement(a.default,{isTruncated:!0},_.toString(e.value))),cellWidth:"80px"},{Header:"Users",accessor:"userCount",Cell:e=>o.createElement(l.default,{alignItems:"center"},o.createElement(a.default,{isTruncated:!0},_.toString(e.value))),cellWidth:"80px"}]}getEmptyTableComponent(){const{errorFetchingIssues:e}=this.state;return e?o.createElement(d.default,{description:"Unable to load issues.",secondaryAction:o.createElement(u.default,{type:"outline",text:"Try Again",onClick:this.refreshIssues})},o.createElement(p.default,null)):o.createElement(d.default,{title:"Things look good!",description:"We couldn’t find any issues.",secondaryAction:o.createElement(u.default,{type:"outline",text:"Refresh",onClick:this.refreshIssues})},o.createElement(m.default,null))}refreshIssues(e){const{integrationId:t,selectedEnvironment:n,selectedDuration:o,issuesLimit:s}=this.props,{cursor:i}=this.state;e?this.setState({loadingIssues:!0}):this.setState({loadingIssues:!0,issuesList:[]}),b.default.fetchIssues(t,{inputs:{sentryEnvironment:n,sentryDuration:o,cursor:i,limit:s||f.SINGLE_API_CALL_ISSUE_LIMIT}}).then((t=>{const n=_.get(t,"issues",[]),o=_.get(t,"nextCursor");let s=[];s=e?[...this.state.issuesList,...n]:n,this.setState({loadingIssues:!1,errorFetchingIssues:!1,issuesList:s,cursor:o})})).catch((e=>{pm.logger.error("Sentry.IssuesTable ~ Error fetching issues",e),this.setState({loadingIssues:!1,errorFetchingIssues:!0})}))}render(){const{issuesList:e,loadingIssues:t,cursor:n}=this.state,{hideLoadmoreButton:s}=this.props;return o.createElement(S,null,o.createElement(h.default,{data:e,columns:this.getSentryTableColumns(),sorting:!0,rowExpanded:this.issueRowSubComponent,loader:{isLoading:t,showLoadMoreButton:!s&&n,onLoadMore:()=>{this.refreshIssues(!0)}},blankState:{isEmpty:_.isEmpty(e)&&!t,component:this.getEmptyTableComponent()}}))}}C.propTypes={integrationId:i().string.isRequired,selectedEnvironment:i().string,selectedDuration:i().string,hideLoadmoreButton:i().bool,source:i().string,issuesLimit:i().number}},"./integrations/monitoring/sentry/components/MetaDetails.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./integrations/monitoring/sentry/components/IssueFilters.js"),d=n("./integrations/monitoring/sentry/components/ProjectName.js");const u=l.default.div`
    margin-bottom: var(--spacing-xs) var(--spacing-s);
    padding: var(--spacing-zero) var(--spacing-l);
    height: var(--size-m);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: var(--border-radius-default);
  `;let p=(0,s.observer)(o=class extends i.Component{constructor(e){super(e)}render(){const{onEnvironmentChange:e,onDurationChange:t,integrationId:n}=this.props;return i.createElement(u,null,i.createElement(d.default,{integrationId:n}),i.createElement(c.default,{onEnvironmentChange:e,onDurationChange:t,integrationId:n}))}})||o;p.propTypes={integrationId:a().string.isRequired,onEnvironmentChange:a().func.isRequired,onDurationChange:a().func.isRequired}},"./integrations/monitoring/sentry/components/ProjectName.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("./integrations/monitoring/sentry/service.js"),d=n("./integrations/monitoring/sentry/constants.js"),u=n("./node_modules/lodash/lodash.js");class p extends o.Component{constructor(e){super(e),this.state={projectName:"",loadingProjectName:!0}}componentDidMount(){const{integrationId:e}=this.props;c.default.fetchProjectDetails(e).then((e=>{this.setState({loadingProjectName:!1,projectName:u.get(e,"name")})})).catch((e=>{pm.logger.error("Sentry.ProjectName ~ Error in fetching project details",e),this.setState({loadingProjectName:!1,errorIssues:e})}))}render(){const{projectName:e,loadingProjectName:t}=this.state;return o.createElement(o.Fragment,null,t?o.createElement(r.default,{size:"small",description:d.LOADING_PROJECT_NAME_MESSAGE}):o.createElement(a.default,{direction:"row"},o.createElement(l.default,{color:"content-color-secondary"}," Project:  ",e)))}}p.propTypes={integrationId:i().string.isRequired}},"./integrations/monitoring/sentry/components/RefreshIssuesButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js");class l extends o.Component{constructor(e){super(e)}render(){const{onClick:e}=this.props;return o.createElement(r.default,{onClick:e,icon:o.createElement(a.default,null),text:"Refresh",type:"tertiary",size:"medium"})}}l.propTypes={onClick:i().func.isRequired}},"./integrations/monitoring/sentry/components/StackTraceItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-subtract-stroke-small.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),u=n("./node_modules/lodash/lodash.js");const p=(0,r.default)(a.default)`
    border-radius: var(--border-radius-default);
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
  `,m=r.default.div`
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-strong);
    background-color: var(--background-color-primary);
    padding: var(--spacing-xs) var(--spacing-m);
  `,h=r.default.div`
    background-color: var(--background-color-primary);
  `,g=r.default.pre`
    font-size: var(--text-size-m);
    padding: var(--spacing-xs) var(--spacing-m);
    margin: var(--spacing-zero);
  `,f=r.default.pre`
    font-size: var(--text-size-m);
    padding: var(--spacing-xs) var(--spacing-m);
    margin: var(--spacing-zero) var(--spacing-zero) var(--spacing-zero) var(--spacing-xs) !important;
    overflow: hidden;
    text-overflow: ellipsis;
  `,b=(0,r.default)(a.default)`
    background-color: var(--background-color-info);
  `;class y extends o.Component{constructor(e){super(e),this.state={showDetails:!1},this.getTraceTitle=this.getTraceTitle.bind(this),this.getTitleIcon=this.getTitleIcon.bind(this)}getTitleIcon(){const{showDetails:e}=this.state;return e?o.createElement(c.default,null):o.createElement(d.default,null)}getTraceTitle(e){const{filename:t,absPath:n,lineNo:s}=e,i=u.get(e,"function");return o.createElement(a.default,{direction:"row"},o.createElement(l.default,null,n||t,i&&o.createElement(o.Fragment,null,o.createElement(l.default,{color:"content-color-secondary"}," in "),i),s&&o.createElement(o.Fragment,null,o.createElement(l.default,{color:"content-color-secondary"}," at line "),s)))}render(){const{showDetails:e}=this.state,{traceFrameData:t}=this.props,n=u.get(t,"lineNo"),s=u.get(t,"context",[]);return o.createElement(p,{direction:"column"},o.createElement(m,{onClick:()=>{this.setState({showDetails:!e})}},this.getTraceTitle(t),this.getTitleIcon()),e&&o.createElement(h,null,u.map(s,(e=>{const t=u.nth(e,0),s=u.nth(e,1),i=o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement(g,null,t)),o.createElement(f,null,s));return t===n?o.createElement(b,{direction:"row"},i):o.createElement(a.default,{direction:"row"},i)}))))}}y.propTypes={traceFrameData:i().object.isRequired}},"./integrations/monitoring/sentry/service.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=n("./integrations/monitoring/sentry/constants.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),a=n("./node_modules/lodash/lodash.js");function l(e){return a.get(e,["inputs","sentryEnvironment"],"")===s.ALL_ENVIRONEMENT_OPTION_VALUE&&(e.inputs.sentryEnvironment=""),e}t.default={fetchIssues:(e,t)=>(t=l(t),new Promise(((n,i)=>{o.default.triggerIntegrationOnDemand(e,s.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUES,t).then((e=>e.status>=200&&e.status<300?n(a.get(e,"body",{})):i(e))).catch(i)}))),fetchIssueDetails:(e,t)=>(t=l(t),new Promise(((n,i)=>{o.default.triggerIntegrationOnDemand(e,s.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUE_DETAILS,t).then((e=>e.status>=200&&e.status<300?n(a.get(e,"body",{})):i(e))).catch(i)}))),fetchEnvironments:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,s.SENTRY_ONDEMAND_TRIGGERS.FETCH_ENVIRONMENTS,{}).then((e=>e.status>=200&&e.status<300?t(a.get(e,"body",[])):n(e))).catch(n)})),fetchProjectDetails:e=>new Promise(((t,n)=>{o.default.triggerIntegrationOnDemand(e,s.SENTRY_ONDEMAND_TRIGGERS.FETCH_PROJECT_DETAILS,{}).then((e=>e.status>=200&&e.status<300?t(a.get(e,"body",{})):n(e))).catch(n)})),fetchProjects:(e,t,n)=>{if(!t)return new Promise;const o=t.options,s=a.reduce(a.get(o,"inputs",[]),((t,n,o)=>(t[o]=a.get(e,n,""),t)),{});return new Promise(((e,l)=>{i.default.runServiceAction(o.service,o.serviceActionId,s,t.integrationClass,t.id,n||null).then((t=>{const n=a.get(t,"body",[]),s=a.get(o,"labelPath"),i=a.get(o,"valuePath"),l=(0,r.convertObjectListToOptions)(n,s,i);return e(l)})).catch((e=>(pm.logger.error("Sentry.service.fetchProjects ~ Error occurred while fetching projects",e),l(e))))}))}}},"./integrations/monitoring/services/DatadogService.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),a=n("./integrations/monitoring/constants.js"),l=n("./node_modules/async/dist/async.js"),c=n.n(l);function d(e,t,n,o){return new Promise(((i,l)=>{r.default.runServiceAction("datadog",n,e,a.DATADOG_APM_CLASS_ID,o,t).then((e=>{if(e.status&&200===e.status)return i(s().get(e,"body"));throw s().get(e,"body")})).catch((e=>l(e)))}))}function u(e,t,n,o){return new Promise(((i,l)=>{r.default.runServiceAction("datadog",n,e,a.DATADOG_APM_CLASS_ID,o,t).then((e=>{if(e.status&&200===e.status)return i(s().get(e,"body"));throw s().get(e,"body")})).catch((e=>l(e)))}))}t.default={listServices:e=>u(e,null),listDashboards:(e,t,n,o)=>d(e,t,n,o),listDashboardsWithIntegrationId:(e,t,n,o)=>d(e,t,n,o),listServicesWithIntegrationId:(e,t,n,o)=>u(e,t,n,o),authenticateApiKey:(e,t,n,o)=>d(e,t,n,o),fetchMetricsForLinkedServices:e=>{const t=Date.now()/1e3,n=t-1800;return i.default.triggerIntegrationOnDemand(e,"fetch_metrics_for_added_services",{inputs:{startTime:n,endTime:t}}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))},fetchGraphURLs:(e,t,n,o,r)=>{let a={};const l=(r,l,c)=>{i.default.triggerIntegrationOnDemand(e,l,{inputs:{timeFrame:t,service:n,environment:o}}).then((e=>{if(e.status&&200===e.status)return a[c]=s().get(e.body,"data"),r();throw e.body})).catch((e=>r(e)))};c().parallel([function(e){l(e,"fetch_apdex_graph_url","apdex_graphs")},function(e){l(e,"fetch_error_rate_graph_url","error_rate_graphs")},function(e){l(e,"fetch_latency_graph_url","latency_graphs")},function(e){l(e,"fetch_throughput_graph_url","throughput_graphs")}],(e=>e?r(e):r(null,a)))},fetchServiceMonitorsStatus:(e,t,n)=>i.default.triggerIntegrationOnDemand(e,"get_violations",{inputs:{service:t,environment:n}}).then((e=>{if(e&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/NewRelicService.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./node_modules/moment/moment.js"),r=n.n(i),a=n("./node_modules/async/dist/async.js"),l=n.n(a),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./integrations/monitoring/constants.js");t.default={listServices:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listDashboards:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchChartUrls:(e,t,n,o)=>{let i={};l().parallel([function(o){c.default.fetchActionDetails(e,{type:"fetchWebTransactionsChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.webTransactionsChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchApdexScoreChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.apdexScoreChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchErrorRateChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.errorRateChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchThroughputChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.throughputChartUrl=s().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),o();throw e})).catch((e=>o(e)))}],(e=>e?o(e):o(null,i)))},fetchStatistics:(e,t,n,o)=>{let i={};l().parallel([function(n){c.default.fetchActionDetails(e,{type:"fetchDeployments",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=s().map(s().get(e.body,"data.data.actor.entity.deployments"),(e=>({...e,timestamp:r()(s().get(e,"timestamp")).format("MMM DD h:mm A")})));return i.deployments=t,n()}throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchViolationEvents",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=s().map(s().get(e.body,"data.data.actor.entities[0].recentAlertViolations"),(e=>({...e,openedAt:r()(s().get(e,"openedAt")).format("MMM DD h:mm A"),closedAt:s().get(e,"closedAt")?r()(s().get(e,"closedAt")).format("MMM DD h:mm A"):"-"})));return i.violationEvents=t,n()}throw e})).catch((e=>n(e)))},function(o){c.default.fetchActionDetails(e,{type:"fetchSlowestWebTransactions",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status){let t=s().map(s().get(e.body,"data.data.actor.entity.nrdbQuery.results"),(e=>({name:s().replace(e.name,"WebTransaction/Custom/",""),avg_time:`${s().round(e.avg_time,2)} ms`,error_rate:`${s().round(e.error_rate,1)}%`})));return i.slowestTransactions=t,o()}throw e})).catch((e=>o(e)))}],(e=>e?o(e):o(null,i)))},fetchMetricsForLinkedServices:e=>c.default.fetchActionDetails(e,{type:"fetchMetricsForLinkedServices"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchLinkedDashboards:e=>c.default.fetchActionDetails(e,{type:"fetchLinkedDashboards"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listSevicesWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_SERVICES,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),listDashboardsWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_DASHBOARDS,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),authenticateApiKey:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/monitoring/services/NewRelicService.js"),s=n("./integrations/monitoring/services/DatadogService.js");t.default={apm_new_relic:o.default,apm_datadog:s.default}},"./integrations/monitoring/stores/APMIntegrationStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var o,s,i,r,a,l,c,d,u,p,m,h,g,f,b,y,v,I,_,E,S,C,T,A,j,w,O,N,R,P,D,M=n("../../node_modules/mobx/lib/mobx.module.js"),x=n("./node_modules/lodash/lodash.js"),L=n.n(x),k=n("./js/stores/StoreManager.js"),F=n("./js/stores/SyncStatusStore.js"),B=n("./js/stores/IntegrationsStore.js"),U=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),V=n("./integrations/monitoring/stores/fallbackCategoryIntegrations.js"),G=n("./js/stores/BaseListStore.js"),z=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),H=n("./integrations/monitoring/constants.js"),W=n("./integrations/monitoring/services/NewRelicService.js"),q=n("./integrations/services/AuthenticationInstanceService.ts"),K=n("./integrations/utils/CommonHelperMethods.ts");function $(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Y(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const J="apiversion",X=(0,K.getErrorContextObject)("APMIntegrationStore","integrations");let Q=(s=Y((o=class{constructor(e){this.id="",$(this,"availableAPMServices",s,this),$(this,"selectedAPMService",i,this),this.id=e.id,this.availableAPMServices=e.availableAPMServices||{},this.selectedAPMService=e.selectedAPMService||{},this.integrationsStore=(0,k.resolveStoreInstance)(B.default)}update(e){L().has(e,"id")&&(this.id=e.id),L().has(e,"availableAPMServices")&&(this.availableAPMServices=e.availableAPMServices),L().has(e,"selectedAPMService")&&(this.selectedAPMService=e.selectedAPMService)}setAvailableAPMServices(e,t){this.availableAPMServices[e]=t}getAvailableAPMServices(e){return(0,M.toJS)(this.availableAPMServices[e])}setSelectedAPMService(e,t){this.selectedAPMService[e]=t}getSelectedAPMService(e){return(0,M.toJS)(this.selectedAPMService[e])}}).prototype,"availableAPMServices",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=Y(o.prototype,"selectedAPMService",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Y(o.prototype,"update",[M.action],Object.getOwnPropertyDescriptor(o.prototype,"update"),o.prototype),Y(o.prototype,"setAvailableAPMServices",[M.action],Object.getOwnPropertyDescriptor(o.prototype,"setAvailableAPMServices"),o.prototype),Y(o.prototype,"setSelectedAPMService",[M.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedAPMService"),o.prototype),Y(o.prototype,"getSelectedAPMService",[M.action],Object.getOwnPropertyDescriptor(o.prototype,"getSelectedAPMService"),o.prototype),o),Z=(r=class extends G.default{constructor(){super(Q),this.id="",$(this,"isHydrating",a,this),$(this,"availableIntegrations",l,this),$(this,"configuredIntegrations",c,this),$(this,"categoryIntegrations",d,this),$(this,"builds",u,this),$(this,"activeRule",p,this),$(this,"activeService",m,this),$(this,"errorAvailableIntegrations",h,this),$(this,"errorConfiguredIntegrations",g,this),$(this,"loadingAvailableIntegrations",f,this),$(this,"loadingConfiguredIntegrations",b,this),$(this,"availableAPMServices",y,this),$(this,"selectedAPMService",v,this),$(this,"selectedAPI",I,this),$(this,"selectedAPIVersion",_,this),$(this,"selectedService",E,this),$(this,"selectedServiceName",S,this),$(this,"selectedIntegration",C,this),$(this,"selectedRule",T,this),$(this,"clientCategory",A,this),$(this,"isAdding",j,this),$(this,"integrationInstance",w,this),$(this,"loadingIntegrationInstanceAndClass",O,this),$(this,"integrationClass",N,this),$(this,"authenticationInstances",R,this),$(this,"loadingAuthenticationInstances",P,this),$(this,"errorAuthenticationInstances",D,this),this.integrationsStore=(0,k.resolveStoreInstance)(B.default)}initializeApmIntegrationStore(e){return new Promise(((t,n)=>{(0,k.resolveStoreInstance)(F.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:o,category:s}=e;this.setClientCategory(s||H.API_MONITORING),this.setSelectedAPI(n),this.setSelectedAPIVersion(o),this.fetchConfiguredIntegrations(o,J).then((()=>{this.fetchAvailableIntegrations(),t()}))})).catch((e=>{this.updateLoadingAvailableIntegrations(!1),n(e)})).finally((()=>{this.updateIsHydrating(!1)}))}))}initializeApmIntegrationStoreV2(e){return new Promise(((t,n)=>{(0,k.resolveStoreInstance)(F.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:o,category:s}=e;this.setClientCategory(s||H.API_MONITORING),this.setSelectedAPI(n),this.setSelectedAPIVersion(o),this.fetchConfiguredIntegrations(o,J).then(t)})).catch(n).finally((()=>{this.updateIsHydrating(!1)}))}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setAvailableAPMServices(e){this.availableAPMServices[this.selectedAPIVersion]=e}setClientCategory(e){this.clientCategory=e}getAvailableAPMServices(){return(0,M.toJS)(this.availableAPMServices[this.selectedAPIVersion])}clearAvailableAPMServices(){this.availableAPMServices[this.selectedAPIVersion]=void 0}setSelectedAPMService(e){this.selectedAPMService[this.selectedAPIVersion]=e}getSelectedAPMService(){return(0,M.toJS)(this.selectedAPMService[this.selectedAPIVersion])}clearSelectedAPMService(){this.selectedAPMService[this.selectedAPIVersion]=void 0}setSelectedIntegration(e){this.selectedIntegration[this.clientCategory]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,J)}getAvailableIntegrations(){return(0,M.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.clientCategory]}getSelectedAPI(){return this.selectedAPI}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){L().isEmpty(e)?this.categoryIntegrations=[...V.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,M.toJS)(this.configuredIntegrations[e||this.selectedAPIVersion])}getCategoryIntegrations(){return(0,M.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByClientCategory(){const e=[];L().forEach((0,M.toJS)(this.availableIntegrations),(t=>{const n={},o=t.integrations[t.id];L().forEach(o,((e,t)=>{e.client_categories.includes(this.clientCategory)&&(n[t]=e)})),L().isEmpty(n)||(t.integrations[t.id]={...n},e.push(t))})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),U.default.getAvailableIntegrations().then((e=>{const t=L().get(e,"body.services",[]);if(200!==e.status||L().isEmpty(t))throw e;this.updateAvailableIntegrations(L().map(t,((e,t)=>({id:t,...e})))),this.findIntegrationsByClientCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t){return this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),U.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,[this.clientCategory]).then((e=>{this.updateConfiguredIntegrations(e[this.clientCategory]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await z.default.getConfiguredIntegrationsForAnEntity(e,t,[H.API_PERFORMANCE_INTEGRATION]);let o=L().get(n,"body.data",[]),s=[];if(s=L().map(o,"class"),s.includes(H.NEW_RELIC_APM_CLASS_ID)&&s.includes(H.DATADOG_APM_CLASS_ID)){const e=s.indexOf(H.NEW_RELIC_APM_CLASS_ID),t=s.indexOf(H.DATADOG_APM_CLASS_ID);s.splice(e<t?t:e,1)}let i=[];if(!L().isEmpty(s)){const e=this.integrationsStore.getIntegrationClasses(),t=s[0];i=L().find(e,(e=>e.id===t))}if(s.includes(H.NEW_RELIC_APM_CLASS_ID)){const e=L().find(o,(e=>e.class===H.NEW_RELIC_APM_CLASS_ID)),t=await this.updateNewRelicInstance(e);o=t?[t]:[]}this.updateIntegrationClass([i],t),this.updateIntegrationInstance(o,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APMIntegrationStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}async updateNewRelicInstance(e){try{const t=await W.default.fetchMetricsForLinkedServices(e.id),n=L().map(L().get(t,"data.data.actor.entities"),(e=>e.name));e.services=n}catch(e){pm.logger.error("NewRelicService ~ error occurred while fetching metrics for linked services",e)}return e}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}setAuthenticationInstances(e){this.authenticationInstances=e}setErrorAuthenticationInstances(e){this.errorAuthenticationInstances=e}setLoadingAuthenticationInstances(e){this.loadingAuthenticationInstances=e}fetchAuthenticationInstances(e,t,n,o){pm.logger.info("APMIntegrationsStore~Initializing fetching auth instances: ",n),this.setLoadingAuthenticationInstances(!0),this.setErrorAuthenticationInstances(null),q.default.listAuthenticationInstances({scope:[{type:e,id:t}],authenticationClass:[n],service:[o]}).then((({body:e})=>{L().isNil(e.data)&&pm.logger.error("APMIntegrationsStore~fetchAuthenticationInstances: Error loading authentication instances! Received null response!",{body:e},X),this.setAuthenticationInstances(e.data||[]),this.setLoadingAuthenticationInstances(!1)})).catch((e=>{pm.logger.error("APMIntegrationsStored~fetchAuthenticationInstances: Something went wrong while fetching authentication instances: ",e,X),this.setLoadingAuthenticationInstances(!1),this.setErrorAuthenticationInstances(e)}))}},a=Y(r.prototype,"isHydrating",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=Y(r.prototype,"availableIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Y(r.prototype,"configuredIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=Y(r.prototype,"categoryIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.fallbackCategoryIntegrations}}),u=Y(r.prototype,"builds",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=Y(r.prototype,"activeRule",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=Y(r.prototype,"activeService",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=Y(r.prototype,"errorAvailableIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=Y(r.prototype,"errorConfiguredIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=Y(r.prototype,"loadingAvailableIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),b=Y(r.prototype,"loadingConfiguredIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),y=Y(r.prototype,"availableAPMServices",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=Y(r.prototype,"selectedAPMService",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),I=Y(r.prototype,"selectedAPI",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=Y(r.prototype,"selectedAPIVersion",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=Y(r.prototype,"selectedService",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=Y(r.prototype,"selectedServiceName",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=Y(r.prototype,"selectedIntegration",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T=Y(r.prototype,"selectedRule",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Y(r.prototype,"clientCategory",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.API_MONITORING}}),j=Y(r.prototype,"isAdding",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Y(r.prototype,"integrationInstance",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),O=Y(r.prototype,"loadingIntegrationInstanceAndClass",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),N=Y(r.prototype,"integrationClass",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),R=Y(r.prototype,"authenticationInstances",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=Y(r.prototype,"loadingAuthenticationInstances",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Y(r.prototype,"errorAuthenticationInstances",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y(r.prototype,"initializeApmIntegrationStore",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"initializeApmIntegrationStore"),r.prototype),Y(r.prototype,"clearStore",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"clearStore"),r.prototype),Y(r.prototype,"setAvailableAPMServices",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setAvailableAPMServices"),r.prototype),Y(r.prototype,"setClientCategory",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setClientCategory"),r.prototype),Y(r.prototype,"getAvailableAPMServices",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getAvailableAPMServices"),r.prototype),Y(r.prototype,"clearAvailableAPMServices",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"clearAvailableAPMServices"),r.prototype),Y(r.prototype,"setSelectedAPMService",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedAPMService"),r.prototype),Y(r.prototype,"getSelectedAPMService",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedAPMService"),r.prototype),Y(r.prototype,"clearSelectedAPMService",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"clearSelectedAPMService"),r.prototype),Y(r.prototype,"setSelectedIntegration",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedIntegration"),r.prototype),Y(r.prototype,"setActiveService",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setActiveService"),r.prototype),Y(r.prototype,"setSelectedServiceName",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedServiceName"),r.prototype),Y(r.prototype,"setActiveRule",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setActiveRule"),r.prototype),Y(r.prototype,"setSelectedAPI",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedAPI"),r.prototype),Y(r.prototype,"setSelectedAPIVersion",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedAPIVersion"),r.prototype),Y(r.prototype,"setSelectedRule",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedRule"),r.prototype),Y(r.prototype,"setSelectedService",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedService"),r.prototype),Y(r.prototype,"updateLoadingAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateLoadingAvailableIntegrations"),r.prototype),Y(r.prototype,"updateLoadingConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateLoadingConfiguredIntegrations"),r.prototype),Y(r.prototype,"updateErrorAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateErrorAvailableIntegrations"),r.prototype),Y(r.prototype,"updateErrorConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateErrorConfiguredIntegrations"),r.prototype),Y(r.prototype,"updateAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateAvailableIntegrations"),r.prototype),Y(r.prototype,"updateSelectedAPIVersion",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateSelectedAPIVersion"),r.prototype),Y(r.prototype,"getAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getAvailableIntegrations"),r.prototype),Y(r.prototype,"getSelectedIntegration",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedIntegration"),r.prototype),Y(r.prototype,"getSelectedAPI",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedAPI"),r.prototype),Y(r.prototype,"getSelectedAPIVersion",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedAPIVersion"),r.prototype),Y(r.prototype,"updateConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateConfiguredIntegrations"),r.prototype),Y(r.prototype,"updateCategoryIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCategoryIntegrations"),r.prototype),Y(r.prototype,"getConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getConfiguredIntegrations"),r.prototype),Y(r.prototype,"getCategoryIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"getCategoryIntegrations"),r.prototype),Y(r.prototype,"updateIsHydrating",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIsHydrating"),r.prototype),Y(r.prototype,"updateIsAdding",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIsAdding"),r.prototype),Y(r.prototype,"findIntegrationsByClientCategory",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"findIntegrationsByClientCategory"),r.prototype),Y(r.prototype,"fetchAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchAvailableIntegrations"),r.prototype),Y(r.prototype,"fetchConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchConfiguredIntegrations"),r.prototype),Y(r.prototype,"fetchIntegrationInstance",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchIntegrationInstance"),r.prototype),Y(r.prototype,"updateIntegrationInstance",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIntegrationInstance"),r.prototype),Y(r.prototype,"updateIntegrationClass",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIntegrationClass"),r.prototype),Y(r.prototype,"setLoadingIntegrationInstancesAndClass",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setLoadingIntegrationInstancesAndClass"),r.prototype),Y(r.prototype,"resetPowerUpVariables",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"resetPowerUpVariables"),r.prototype),Y(r.prototype,"setAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setAuthenticationInstances"),r.prototype),Y(r.prototype,"setErrorAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setErrorAuthenticationInstances"),r.prototype),Y(r.prototype,"setLoadingAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setLoadingAuthenticationInstances"),r.prototype),Y(r.prototype,"fetchAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchAuthenticationInstances"),r.prototype),r)},"./integrations/monitoring/stores/fallbackCategoryIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fallbackCategoryIntegrations:function(){return o}});const o=[{id:"apm_new_relic",name:"New Relic",icon:"pm-icon-newrelic",description:"View New Relic metrics and statuses directly from Postman.",featureFlag:"apm-integrations-in-api-platform",icon_url:"https://static.getpostman.com/assets/newrelic-light.svg",dark_icon_url:"https://static.getpostman.com/assets/newrelic-dark.svg",extended_description:"New Relic provides a connected, real-time view of all your operational data in one place. This integration allows you to view New Relic data into Postman",categories:["Analytics"],integrations:{apm_new_relic:{apm_new_relic:{name:"Monitor API performance",description:"View New Relic metrics and statuses directly from Postman.",categories:["Analytics"],summary:"",client_categories:["apm_api-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./integrations/monitors/runs/components/RunItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./integrations/monitors/runs/constants/MonitorRunConstants.js"),l=n("./node_modules/moment/moment.js"),c=n.n(l),d=n("./node_modules/classnames/index.js"),u=n.n(d),p=n("./node_modules/lodash/lodash.js");let m=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={formattedRunsList:[]},this.renderPopoverContent=this.renderPopoverContent.bind(this)}renderMetricsTable(e,t){return s.createElement("div",{className:"linked-monitors-tooltip-metrics-row"},s.createElement("div",{className:"linked-monitors-tooltip-metrics-row-name"},a.METRIC_TITLES[e]),s.createElement("div",{className:"linked-monitors-tooltip-metrics-row-separator"}),s.createElement("div",{className:"linked-monitors-tooltip-metrics-row-value"},t))}getRunItemColor(e){if(e.status!==a.RUN_STATUS.RUNNING){let t=p.get(e,"results");return t.failedTests||t.errors?t.failedTests?{"run-item-failed":!0}:{"run-item-errored":!0}:{"run-item-successful":!0}}}renderPopoverContent(){let{runDetails:e}=this.props;switch(e.status){case a.RUN_STATUS.TRIGGERED:return s.createElement("div",{className:"linked-monitors-tooltip-wrapper"},s.createElement("div",{className:"linked-monitors-tooltip-date-wrapper"},s.createElement("div",{className:"linked-monitors-tooltip-date"},"Preparing run...")));case a.RUN_STATUS.RUNNING:return s.createElement("div",{className:"linked-monitors-tooltip-wrapper"},s.createElement("div",{className:"linked-monitors-tooltip-date-wrapper"},s.createElement("div",{className:"linked-monitors-tooltip-date"},"Running...")));default:return s.createElement("div",{className:"linked-monitors-tooltip-wrapper"},s.createElement("div",{className:"linked-monitors-tooltip-date-wrapper"},e.finishedAt&&s.createElement("div",{className:"linked-monitors-tooltip-date"},c()(e.finishedAt).format("h:mm A, DD MMM YYYY"),","),e.trigger===a.RUN_TRIGGER.SCHEDULE?s.createElement("div",{className:"linked-monitors-tooltip-trigger"},"Scheduled run"):s.createElement("div",{className:"linked-monitors-tooltip-trigger"},"Manual run")),s.createElement("div",{className:"linked-monitors-tooltip-metrics-wrapper"},p.map(p.keys(e.results),(t=>this.renderMetricsTable(t,e.results[t])))))}}render(){let{runDetails:e}=this.props;return s.createElement("div",{className:"linked-monitor-runs-item"},s.createElement(i.default,{placement:"bottom",trigger:s.createElement("div",{className:u()(p.merge({"linked-monitor-runs-item-run-candle":!0,[e.status]:!0},this.getRunItemColor(e)))}),appendTo:"parent",triggerEvent:"mouseenter click",className:"linked-monitor-runs-item-tooltip"},this.renderPopoverContent()))}})||o},"./integrations/monitors/runs/components/base/RunMonitorButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),r=n("./js/components/base/Buttons.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=(n("../../node_modules/mobx/lib/mobx.module.js"),n("./monitors/stores/domain/MonitorStore.js")),c=(n("./monitors/stores/domain/MonitorPermissionStore.js"),n("./monitors/services/MonitorService.js")),d=n("./js/modules/services/AnalyticsService.js");let u=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.state={permissions:{}},this.store=new l.default(this.props.entity.id),this.handleMonitorRun=this.handleMonitorRun.bind(this)}componentDidMount(){this.store.jobs.masterMonitorStore.loadActiveWorkspaceJobTemplates(),c.default.getPermissionsForJobTemplates([this.props.entity.id]).then((e=>{this.setState({permissions:{...e[0]}})})).catch((()=>{this.setState({permissions:{run:!1}})}))}handleMonitorRun(){let{entity:e}=this.props;this.store.jobs.createJob(e.id),d.default.addEventV2({category:"api_builder_integrations",action:"monitor_run",label:"run_button",value:1}),pm.windowEvents.emit(`${e.id}-run`,{monitorId:e.id})}render(){let{permissions:e}=this.state;return s.createElement("div",{className:"monitor-run-button"},s.createElement(r.Button,{type:"secondary",size:"small",onClick:()=>{this.handleMonitorRun()},tooltip:e.run?"Run monitor":"You don't have permission to take this action",disabled:!e.run},this.store.jobs.creating?s.createElement(i.default,null):"Run"))}})||o},"./integrations/monitors/runs/constants/MonitorRunConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MAX_RUN_CANDLES:function(){return i},METRIC_TITLES:function(){return u},RUNS_PAGINATION_LIMIT:function(){return p},RUN_STATUS:function(){return a},RUN_STATUS_LABEL:function(){return d},RUN_TRIGGER:function(){return l},SHRUNK_RUN_CANDLES:function(){return r},STATE_TO_RUN_STATUS:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js");const i=20,r=10,a={NEUTRAL:"run-neutral",SUCCESS:"run-success",FAILED:"run-failed",RUNNING:"run-running",TRIGGERED:"run-running"},l={SCHEDULE:"schedule"},c={starting:a.RUNNING,"finished:success":a.SUCCESS,"finished:error":a.FAILED,"triggered:schedule":a.TRIGGERED,"triggered:api":a.TRIGGERED,running:a.RUNNING,waiting:a.TRIGGERED,queued:a.TRIGGERED,started:a.RUNNING,finishing:a.RUNNING,"finished:failure":a.FAILED,"finished:abort":a.FAILED,retrying:a.RUNNING,"discontinued:error":a.FAILED,"discontinued:failure":a.FAILED,"discontinued:abort":a.FAILED},d={"run-neutral":o.createElement(s.default,{status:"neutral",text:"NA"}),"run-success":o.createElement(s.default,{status:"success",text:"successful"}),"run-failed":o.createElement(s.default,{status:"critical",text:"failed"}),"run-running":o.createElement(s.default,{status:"warning",text:"running"})},u={runs:"Regions",errors:"Errors",failedTests:"Failed Tests",passedTests:"Passed Tests",responseLatency:"Total Response Time",responseSize:"Total Response Size"},p=25},"./integrations/monitors/runs/containers/RunsContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./integrations/monitors/runs/services/MonitorRunsService.ts"),l=n("./integrations/monitors/runs/components/RunItem.js"),c=n("./integrations/monitors/runs/constants/MonitorRunConstants.js"),d=n("./monitors/stores/domain/MonitorStore.js"),u=n("../../node_modules/mobx/lib/mobx.module.js"),p=n("./node_modules/lodash/lodash.js");let m=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={errorFetchingRuns:!1,isLoadingRuns:!1,runResults:[],formattedRunsList:[]},this.store=new d.default(this.props.entity.id),this.fetchRunsForMonitor=this.fetchRunsForMonitor.bind(this),this.formatMonitorRuns=this.formatMonitorRuns.bind(this),this.subscribeToMonitoringEvents=this.subscribeToMonitoringEvents.bind(this)}componentDidMount(){let{entity:e}=this.props;this.setState({monitor:e,isLoadingRuns:!0,runs:this.fetchRunsForMonitor(e)})}subscribeToMonitoringEvents(){(0,u.reaction)((()=>this.store.jobs.values),(()=>{this.formatMonitorRuns(this.store.jobs.values)}))}constructRunsArray(e,t){return e.length>t?p.drop(e,e.length-t):e}formatMonitorRuns(e){if(p.isEmpty(e))return;let t=p.compact(p.map(e,(e=>(e.results=(0,u.toJS)(e.results),e.status=(0,u.toJS)(e.status),{collection:{id:e.collection,url:e.collectionUrl},finishedAt:e.finishedAt,createdAt:e.startedAt,name:e.name,__status:e.state,status:c.STATE_TO_RUN_STATUS[p.get(e,"state")],trigger:e.trigger,results:{runs:p.get(e,"results.runCount"),errors:p.get(e,"results.errorCount"),failedTests:p.get(e,"results.failedTestCount"),passedTests:p.get(e,"results.passedTestCount"),responseLatency:`${p.round(p.get(e,"results.responseLatency")/1e3,2)} seconds`,responseSize:`${p.round(p.get(e,"results.responseSize")/1e3,2)} kB`}}))));t=p.orderBy(t,["createdAt"],["asc"]),this.setState({formattedRunsList:t,runResults:this.constructRunsArray(t,c.MAX_RUN_CANDLES)})}fetchRunsForMonitor(e){let t;a.default.getMonitorRuns(e.id).then((e=>{t=p.map(e.data,(e=>({collection:{id:e.collection,url:e.collectionUrl},finishedAt:e.finishedAt,createdAt:e.startedAt,name:e.name,__status:e.status,status:c.STATE_TO_RUN_STATUS[p.get(e,"status.state")],trigger:e.trigger,results:{runs:p.get(e,"results.runCount"),errors:p.get(e,"results.errorCount"),failedTests:p.get(e,"results.failedTestCount"),passedTests:p.get(e,"results.passedTestCount"),responseLatency:`${p.round(p.get(e,"results.responseLatency")/1e3,2)} seconds`,responseSize:`${p.round(p.get(e,"results.responseSize")/1e3,2)} kB`}}))),t=p.orderBy(t,["createdAt"],["asc"]),this.setState({formattedRunsList:t,runResults:this.constructRunsArray(t,c.MAX_RUN_CANDLES),isLoadingRuns:!1},(()=>{this.subscribeToMonitoringEvents()}))})).catch((e=>{e&&this.setState({errorFetchingRuns:!0,isLoadingRuns:!1})}))}render(){let{isLoadingRuns:e,errorFetchingRuns:t,runResults:n,formattedRunsList:o}=this.state,r=p.isEmpty(p.filter(n,(e=>!e.__empty)));return t?s.createElement("div",{className:"linked-monitor-runs-wrapper"},s.createElement("div",{className:"linked-monitor-runs-error"},"No runs to show")):e?s.createElement(i.default,null):r?s.createElement("div",{className:"linked-monitor-runs-wrapper"},s.createElement("div",{className:"linked-monitor-runs-error"},"No runs yet")):this.props.isWindowShrunk?s.createElement("div",{className:"linked-monitor-runs-wrapper linked-monitor-runs"},p.map(p.drop(n,n.length-c.SHRUNK_RUN_CANDLES),(e=>s.createElement(l.default,{runDetails:e})))):s.createElement("div",{className:"linked-monitor-runs-wrapper"},p.map(n,(e=>s.createElement(l.default,{runDetails:e}))))}})||o},"./integrations/services/AzureService.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/utils/HttpService.js"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s);n("./node_modules/async/dist/async.js");const r=o.default.request.bind(o.default),a="https://dev.azure.com",l="https://static.getpostman.com/assets/azure.png",c={blob:"file",tree:"directory",commit:"commit",ref:"branch"},d={method:"GET",headers:{},credentials:"omit"},u={getBaseApiUrl:e=>i().get(e,"customDomain")||`${a}/${i().get(e,"owner")}`,getBaseApiUrlRepo:(e,t)=>i().get(e,"customDomain")||`${a}/${t}`,getUser:(e,t)=>(d.headers.Authorization="Bearer "+i().get(e,"accessToken"),r("https://app.vssps.visualstudio.com/_apis/profile/profiles/me?api-version=6.0",d).then((e=>{let n=e.body;return t(null,{id:i().get(n,"id"),name:i().get(n,"displayName"),username:i().get(n,"displayName"),nickname:i().get(n,"displayName"),avatar:l})})).catch((e=>t(e)))),getUserOrgs:(e,t)=>{let n=`https://app.vssps.visualstudio.com/_apis/accounts?api-version=6.0&memberId=${i().get(e,"memberId")}`,o=[];return d.headers.Authorization="Bearer "+i().get(e,"accessToken"),r(n,d).then((e=>{let n=i().get(e,"body.value");return o=i().map(n,(e=>({id:i().get(e,"accountName"),name:i().get(e,"accountName"),avatar:l}))),t(null,o)})).catch((e=>t(e)))},getRepositories:(e,t)=>{let n=i().get(e,"orgId"),o=u.getBaseApiUrlRepo(e,n)+"/_apis/git/repositories?api-version=6.0",s=[];return d.headers.Authorization="Bearer "+i().get(e,"accessToken"),r(o,d).then((e=>(s=i().map(i().get(e,"body.value",[]),(e=>({id:i().get(e,"id"),name:i().get(e,"name"),full_name:`${i().get(e,"project.name")}/${i().get(e,"name")}`,owner:{id:`${n}/${i().get(e,"project.name")}`,name:i().get(e,"project.name")}}))),t(null,s)))).catch((e=>t(e)))},getRepositoryBranches:(e,t)=>{let n=u.getBaseApiUrl(e)+`/_apis/git/repositories/${i().get(e,"repoId")}/stats/branches?api-version=6.0`;return d.headers.Authorization="Bearer "+i().get(e,"accessToken"),r(n,d).then((n=>{let o=i().map(i().get(n,"body.value",[]),(t=>({name:i().get(t,"name",""),commit:i().get(t,"commit.commitId",""),link:u.getBaseApiUrl(e)+`/_git/${i().get(e,"id")}`+`?path=%2F&version=GB${i().get(t,"name","")}&_a=contents`})));return t(null,o)})).catch((e=>t(e)))},getRepositoryTree:(e,t)=>{let n=u.getBaseApiUrl(e)+`/_apis/git/repositories/${i().get(e,"repoId")}/items?api-version=6.0&recursionLevel=Full&versionDescriptor.version=${i().get(e,"branchName")}`,o=[];return d.headers.Authorization="Bearer "+i().get(e,"accessToken"),r(n,d).then((e=>{let n=e.body;return o=i().map(i().get(n,"value",[]),(e=>{let t=i().get(e,"path",""),n=i().toString(t).split("/");return{name:n[n.length-1],type:c[i().get(e,"gitObjectType")],path:i().get(e,"path","").replace(/^\//,""),blobId:i().get(e,"objectId")}})),t(null,o)})).catch((e=>t(e)))},getFileContent:e=>{let t=i().get(e,"blobId"),n=u.getBaseApiUrl(e)+`/_apis/git/repositories/${i().get(e,"repoId")}/blobs/${t}?api-version=6.0`;return d.headers.Authorization="Bearer "+i().get(e,"accessToken"),r(n,d).then((e=>Promise.resolve(e.body))).catch((e=>Promise.reject(e)))}};t.default=u},"./integrations/services/BitbucketService.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/utils/HttpService.js");const s="https://api.bitbucket.org/2.0",i="100",r=o.default.request.bind(o.default),a={fetchUserInfo:function(e,t){const n=e.token;r("https://api.bitbucket.org/2.0/user",{method:"GET",headers:{Authorization:"Bearer "+n},credentials:"omit"}).then((e=>t(null,e.body))).catch((e=>t(e)))},fetchWorkspaces:function(e,t){const n=e.token;r("https://api.bitbucket.org/2.0/workspaces?pagelen=100",{method:"GET",headers:{Authorization:"Bearer "+n},credentials:"omit"}).then((e=>t(null,e.body))).catch((e=>t(e)))},fetchRepoList:function(e,t){const n=s+"/repositories/"+e.workspace_slug+"?pagelen="+i,o=e.token;var a,l=1,c=(e,n)=>{r(e,n).then((e=>{if(a?a.values=a.values.concat(e.body.values):a=e.body,!(e.body.hasOwnProperty("next")&&l<1))return t(null,a);l+=1,c(e.body.next,n)})).catch((e=>t(e)))};c(n,{method:"GET",headers:{Authorization:"Bearer "+o},credentials:"omit"})},fetchBranchForRepository:function(e,t){const n=s+"/repositories/"+e.workspace_slug+"/"+e.repo_slug+"/refs/branches?pagelen="+i,o=e.token;var a,l=1,c=(e,n)=>{r(e,n).then((e=>{if(a?a.values=a.values.concat(e.body.values):a=e.body,!(e.body.hasOwnProperty("next")&&l<1))return t(null,a);l+=1,c(e.body.next,n)})).catch((e=>t(e)))};c(n,{method:"GET",headers:{Authorization:"Bearer "+o},credentials:"omit"})},fetchRepoTree:function(e,t){const n="https://api.bitbucket.org/2.0/repositories/"+e.workspace_slug+"/"+e.repo_slug+"/src/"+e.branch_name+"/?max_depth=1000&q=type%3D%22commit_file%22&pagelen=100",o=e.token;var s,i=(e,n)=>{r(e,n).then((e=>{if(s?s.values=s.values.concat(e.body.values):s=e.body,!e.body.hasOwnProperty("next"))return t(null,s);i(e.body.next,n)})).catch((e=>t(e)))};i(n,{method:"GET",headers:{Authorization:"Bearer "+o},credentials:"omit"})},getFileContent:function(e){return new Promise(((t,n)=>{const o=e.url,s=e.token;r(o,{method:"GET",headers:{Authorization:"Bearer "+s},credentials:"omit"}).then((e=>{var n=e.body;t(n)})).catch((e=>{pm.logger.warn("Bitbucket~getFileContent: Error while getting file content.",e),t("")}))}))}};t.default=a},"./integrations/services/FilesFilterService.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./js/services/conversion/convertData.js"),r=n("./integrations/constants/formats_metadata.ts");const a=s().uniq(s().reduce(r.FORMATS,((e,t)=>s().concat(e,t.extension)),[])),l=s().reduce(r.FORMATS,((e,t)=>s().concat(e,t.recommended_filename)),[]);function c(e){let t=s().isString(e.path)?e.path.split("/").pop():"",n=0;return s().forEach(l,(e=>{-1!=t.indexOf(e)&&(n=1)})),n}var d={getFormat:function(e){return(0,i.determineDataFormat)(e)},processFiles:function(e){var t=[];return s().forEach(e,(e=>{(function(e){let t=(e.path||"").split(".").pop();return t&&s().includes(a,t)})(e)&&t.push(s().assign(e,{score:c(e)}))})),s().orderBy(t,["score"],["desc"])}};t.default=d},"./integrations/services/GitlabService.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/utils/HttpService.js"),s=n("url"),i=n("./node_modules/async/dist/async.js"),r=n.n(i),a=n("./node_modules/lodash/lodash.js");const l=o.default.request.bind(o.default),c="https://gitlab.com/api/v4",d="user",u={method:"GET",headers:{},credentials:"omit"},p={getBaseApiUrl:e=>{if(e)try{return new s.URL(e).origin+"/api/v4"}catch(e){return c}return c},getUser:(e,t)=>{const n=a.get(e,"customDomain"),o=p.getBaseApiUrl(n)+"/user";return u.headers.Authorization="Bearer "+a.get(e,"accessToken"),l(o,u).then((e=>t(null,e.body))).catch((e=>t(e)))},getUserOrgs:(e,t)=>{let n,o,s=1,i=a.get(e,"customDomain"),c=[];u.headers.Authorization="Bearer "+a.get(e,"accessToken"),r().doUntil((function(e){n=p.getBaseApiUrl(i)+`/namespaces?per_page=100&page=${s}`,l(n,u).then((t=>(o=t.body,c=a.concat(c,o),s+=1,e()))).catch((t=>e(t)))}),(function(){return a.isEmpty(o)||s>=10}),(e=>e?t(e):t(null,c)))},getRepositories:(e,t)=>{let n,o,s=1,i=a.get(e,"customDomain"),c=a.get(e,"orgId"),m=a.get(e,"orgType"),h=a.get(e,"orgName"),g=a.get(e,"fetchedOrgs"),f=[];u.headers.Authorization="Bearer "+a.get(e,"accessToken"),r().doUntil((function(e){n=m===d?p.getBaseApiUrl(i)+"/projects?membership=true&per_page=100":p.getBaseApiUrl(i)+`/groups/${c}/projects?membership=true&per_page=100`,n+=`&page=${s}`,l(n,u).then((t=>{o=t.body;let n=a.map(t.body,(e=>({id:e.id,name:e.name,namespace:e.namespace,shared_with_groups:e.shared_with_groups})));return f=a.concat(f,n),s+=1,e()})).catch((t=>e(t)))}),(function(){return a.isEmpty(o)||s>=1}),(function(e){if(e)return t(e);if(m===d){let e=a.compact(a.map(g,(e=>{if(e.id!==c)return e.id})));f=a.filter(f,(t=>!a.includes(a.toString(e),a.get(t,"namespace.id")))),f=a.filter(f,(t=>{let n=a.get(t,"shared_with_groups"),o=a.map(n,((e={})=>e.group_id));return a.isEmpty(a.intersection(e,o))||a.get(t,"namespace.full_path")===h}))}return t(null,f)}))},getRepositoryBranches:(e,t)=>{let n,o,s=1,i=[];const c=a.get(e,"customDomain");u.headers.Authorization="Bearer "+a.get(e,"accessToken"),r().doUntil((function(t){o=p.getBaseApiUrl(c)+`/projects/${a.get(e,"projectId")}/repository/branches?per_page=100&page=${s}`,l(o,u).then((e=>(n=a.map(e.body,(e=>({name:e.name,commit:a.get(e,"commit.id"),link:a.get(e,"web_url")}))),i=a.concat(i,n),s+=1,t()))).catch((e=>t(e)))}),(function(){return a.isEmpty(n)||s>=10}),(function(e){return e?t(e):t(null,i)}))},getRepositoryTree:(e,t)=>{let n,o,s=[],i=1,c=a.get(e,"customDomain"),d=a.get(e,"projectId"),m=a.get(e,"branchName");u.headers.Authorization="Bearer "+a.get(e,"accessToken"),r().doUntil((function(e){o=p.getBaseApiUrl(c)+`/projects/${d}/repository/tree?recursive=true&per_page=100&ref=${m}&page=${i}`,l(o,u).then((t=>(n=t.body,s=s.concat(n),i+=1,e()))).catch((t=>e(t)))}),(function(){return a.isEmpty(n)}),(function(e){return e?t(e):t(null,s)}))},base64DecodeFileContent:e=>decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),getFileContent:e=>{let t=a.get(e,"filePath"),n=a.get(e,"projectId"),o=a.get(e,"branchName"),s=a.get(e,"customDomain"),i=p.getBaseApiUrl(s)+`/projects/${n}/repository/files/${encodeURIComponent(t)}?ref=${o}`;return u.headers.Authorization="Bearer "+a.get(e,"accessToken"),l(i,u).then((e=>{let t=p.base64DecodeFileContent(e.body.content);return Promise.resolve(t)})).catch((e=>Promise.reject(e)))}};t.default=p},"./integrations/services/OneClickIntegrationCreateService.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),s=n("./integrations/git/services/RemoteGitService.ts"),i=n("./integrations/services/AuthenticationInstanceService.ts"),r=n("./onboarding/src/common/LaunchDarkly.js"),a=n("./api-dev/constants/APIRepositoryConstants.js"),l=n("./integrations/ci-cd/constants.ts"),c=n("./node_modules/lodash/lodash.js");const d="apirepo",u="continuous-integration",p="api",m="api",h="apiVersion",g="repository.info.id",f="repository.info.name",b="repository.info.owner.id",y="repository.info.owner.name",v="tokenId",I={[l.BITBUCKET_PIPELINES_CLASS_ID]:{classId:l.BITBUCKET_PIPELINES_CLASS_ID,baseIntegrationType:d,service:a.GIT_SERVICES_LIST.BITBUCKET.serviceName,inputs:{api_id:m,apiversion:h,repo_slug:g,workspace_slug:b,repository_name:f,workspace_name:y,oauth_token_id:v},uniqueConstraint:{check:!0,clientCategories:[u],entityType:p}},[l.GITLAB_CI_CLASS_ID]:{classId:l.GITLAB_CI_CLASS_ID,clientCategories:[u],baseIntegrationType:d,service:a.GIT_SERVICES_LIST.GITLAB.serviceName,inputs:{api_id:m,apiversion:h,project_id:{path:g,sanitiseValue:e=>c.toString(e)},project_name:f,workspace_id:{path:b,sanitiseValue:e=>c.toString(e)},workspace_name:y,oauth_token_id:v},uniqueConstraint:{check:!0,clientCategories:[u],entityType:p}},[l.GITHUB_CI_CLASS_ID]:{classId:l.GITHUB_CI_CLASS_ID,clientCategories:[u],baseIntegrationType:d,service:a.GIT_SERVICES_LIST.GITHUB.serviceName,inputs:{api_id:m,apiversion:h,repository:{path:g,sanitiseValue:e=>c.toString(e)},workspace:{path:b,sanitiseValue:e=>c.toString(e)},oauth_token_id:v},uniqueConstraint:{check:!0,clientCategories:[u],entityType:p}},[l.DEVOPS_CI_CLASS_ID]:{classId:l.DEVOPS_CI_CLASS_ID,clientCategories:[u],baseIntegrationType:d,service:a.GIT_SERVICES_LIST.AZURE.serviceName,inputs:{api_id:m,apiversion:h,repository_id:{path:g,sanitiseValue:e=>c.toString(e)},repository_name:{path:f,sanitiseValue:e=>c.toString(e)},organization:{path:b,sanitiseValue:e=>e.split("/")[0]},project_name:{path:b,sanitiseValue:e=>e.split("/")[1]},oauth_token_id:v},uniqueConstraint:{check:!0,clientCategories:[u],entityType:p}}};function _(e){return c.get(I,e)&&I[e].baseIntegrationType===d}function E(e){return{name:"unsupportedClass",message:"One click creation is not supported for this integration class",context:e}}t.default={SUPPORTED_CLASSES:Object.keys(I),SUPPORTED_SERVICES:c.uniq(c.map(c.values(I),"service")),createFromApiAndServiceId(e,t,n,o=""){const s=c.find(I,["service",n]);return s&&s.baseIntegrationType===d?this.createFromApi(e,t,s.classId,o):Promise.reject({name:"unsupportedService",message:"One click creation is not supported for this service",context:{serviceId:n,apiId:e,apiVersionId:t}})},createFromApi(e,t,n,o=""){return _(n)?i.default.listAuthenticationInstancesOnApi(e).then((({body:i})=>{const r=i.data;return r.length?s.default.getAPIRepoLinkInfo(t).then((s=>{const i=c.find(r,["id",s.tokenId]);return c.isEmpty(i)?Promise.reject({name:"authInstanceMismatch",message:"We did not find a suitable saved auth for this integration class.",context:{integrationClassId:n,apiId:e,apiVersionId:t}}):this.createFromAPIRepoIntegration(s,n,o)})):Promise.reject({name:"authInstanceNotFound",message:"We did not find a saved auth for this integration class.",context:{integrationClassId:n,apiId:e,apiVersionId:t}})})):Promise.reject(E({integrationClassId:n,apiId:e,apiVersionId:t}))},createFromAPIRepoIntegration(e,t,n=""){if(!_(t))return Promise.reject(E({integrationClassId:t}));const s=I[t],i=c.reduce(s.inputs,((t,n,o)=>{const s=c.isString(n)?n:n.path,i=c.get(e,s);return c.isFunction(n.sanitiseValue)?t[o]=n.sanitiseValue(i):t[o]=i,t}),{}),r=c.get(e,f),a=n||(r?"CI/CD integration for "+r:c.capitalize(s.service)+" CI/CD integration");return c.get(e,"repository.service")!==s.service?Promise.reject({name:"serviceMismatch",message:"The linked repository is of a different service.",context:{integrationClassId:t,apiRepoIntegrationData:e}}):c.get(s,"uniqueConstraint.check")&&s.uniqueConstraint.entityType===p?o.default.getConfiguredIntegrationsForAnEntity(s.uniqueConstraint.entityType,e.api,s.uniqueConstraint.clientCategories).then((({body:n})=>{const o=n&&n.data;return!o||o.length>0?Promise.reject({name:"integrationExists",message:"This integration cannot be created due to there already being one of this kind.",context:{integrationClassId:t,apiRepoIntegrationData:e}}):Promise.resolve(!0)})).then((()=>o.default.createIntegrationInstance(t,a,i))):o.default.createIntegrationInstance(t,a,i)},isOneClickCreationEnabled:()=>r.launchDarkly.getFlag("IS-3640_shared_auth_UI",true)}},"./integrations/services/RepositoryService.js":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/services/GithubService.js"),s=n("./integrations/services/FilesFilterService.js"),i=n("./integrations/services/BitbucketService.js"),r=n("./integrations/services/GitlabService.js"),a=n("./integrations/services/AzureService.js"),l={getRelevantFiles:function(e,t){o.default.getFiles(e,((e,n)=>e?t(e):t(null,s.default.processFiles(n))))},getRelevantFilesBitbucket:function(e,t){i.default.fetchRepoTree(e,((e,n)=>{if(e)return t(e);var o=[];return n.values.forEach((e=>{o.push({path:e.path,link:e.links.self.href,name:e.path.split("/").pop()})})),t(null,s.default.processFiles(o))}))},getRelevantFilesForGitlab:(e,t)=>{r.default.getRepositoryTree(e,((e,n)=>e?t(e):t(null,s.default.processFiles(n))))},getRelevantFilesForAzure:(e,t)=>{a.default.getRepositoryTree(e,((e,n)=>e?t(e):t(null,s.default.processFiles(n))))}};t.default=l},"./integrations/utils/PowerUpSectionUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{filterAuthenticatedAPMClasses:function(){return l},findConfiguredClassAndInstance:function(){return r},getAPMServiceData:function(){return c},getNavigationParams:function(){return a}});var o=n("./integrations/monitoring/constants.js"),s=n("./api-dev/util/navigationHelper.js"),i=(n("./integrations/models/LinkToProps.ts"),n("./node_modules/lodash/lodash.js"));const r=(e,t,n)=>{const s=i.find(t,(t=>i.find(i.get(t,"clientCategories"),(t=>t.key===e)))),r=i.find(n,(e=>i.get(e,"class")===i.get(s,"id")));if(s&&r){if(i.get(r,"class")===o.DATADOG_APM_CLASS_ID){const e=i.find(i.get(r,"inputs"),(e=>"environments"===i.get(e,"key"))),t=i.get(e,"value",[]);i.isEmpty(t)||(r.services=i.get(t[0],"services",[]))}return{configuredClass:s,configuredInstance:r}}return null},a=(e,t,n)=>{const o=(0,s.buildQueryParams)(e);return(0,s.hasOnlyOneAPIVersion)(t)?{routeIdentifier:"build.api",routeParams:{apiId:t},queryParams:o}:{routeIdentifier:"build.apiVersion",routeParams:{apiId:t,versionId:n},queryParams:o}},l=(e,t)=>i.filter(e,(e=>i.find(e.services,["id",t])&&i.find(e.clientCategories,["key",o.API_PERFORMANCE_INTEGRATION]))),c=(e,t)=>i.find(i.get(e,"0.services"),["id",t])},"./js/components/base/Icons/MenuIcon.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Icons/Icon.js");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}const r=o.createElement("svg",{width:"16",height:"13",viewBox:"0 0 16 16"},o.createElement("defs",null,o.createElement("path",{id:"menu",d:"M1.182 12.636h13.636a1.182 1.182 0 0 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364zm0-5.318h13.636a1.182 1.182 0 1 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364zm0-5.318h13.636a1.182 1.182 0 1 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364z"})),o.createElement("use",{fill:"#A9A9A9",fillRule:"evenodd",xlinkHref:"#menu"}));function a(e){return o.createElement(s.default,i({},e,{icon:r}))}},"./js/components/base/Icons/WarningIcon.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Icons/Icon.js");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}const r=o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("defs",null,o.createElement("path",{id:"pm-icon-warning",d:"M8.89487 1.78887C8.52635 1.05182 7.47454 1.05182 7.10602 1.78887L0.724051 14.5528C0.3916 15.2177 0.875095 16 1.61848 16H14.3824C15.1258 16 15.6093 15.2177 15.2768 14.5528L8.89487 1.78887ZM9.00044 7.00976C9.00044 7.00976 9.01601 6.00002 8.00044 6.00002C6.98488 6.00002 7.00044 7.00976 7.00044 7.00976V10C7.00044 10 6.98787 11 8.00044 11C9.01302 11 9.00044 10 9.00044 10V7.00976ZM8.00064 13.9996C8.55254 13.9996 9.00044 13.5517 9.00044 12.9998C9.00044 12.4479 8.55254 12 8.00064 12C7.44873 12 7.00083 12.4479 7.00083 12.9998C7.00083 13.5517 7.44873 13.9996 8.00064 13.9996Z"})),o.createElement("use",{fill:"#ED4B48",fillRule:"evenodd",clipRule:"evenodd",xlinkHref:"#pm-icon-warning"}));function a(e){return o.createElement(s.default,i({},e,{icon:r}))}},"./js/components/base/PasswordInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s),r=n("./js/components/base/Inputs.js"),a=n("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=n("./js/components/base/Buttons.js"),c=n("./node_modules/prop-types/index.js"),d=n.n(c),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)}class m extends o.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:n}=e;if(t){let o,s;for(let i=0;i<t.length;i++){const{validator:r,message:a,type:l}=t[i]||{};if("function"==typeof r&&!r(n,e)){o=l,s=a;break}}if(o)return this.state[o]!==s&&this.setState({[o]:s})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?o.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},o.createElement(u.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?o.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},o.createElement(u.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?o.createElement(r.Input,p({},e,{type:"password"})):o.createElement(a.AutoSuggestInput,p({},e,{enableVariableSuggestions:!0,type:"text"})):o.createElement(r.Input,p({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return o.createElement("div",{className:i()("password-input",e)},this.getPasswordInput(t),o.createElement("div",{className:"password-input-message"},this.getValidationIcon()),o.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?o.createElement(u.default,{name:"icon-action-hide-stroke",title:"Show"}):o.createElement(u.default,{name:"icon-action-view-stroke",title:"Hide"})))}}m.propTypes={className:d().string,inputStyle:d().oneOf(["box","line"]),size:d().oneOf(["huge"]),enableVariableSuggestions:d().bool,validation:d().arrayOf(d().shape({validator:d().func.isRequired,message:d().string,type:d().oneOf(["error","warning"])}))},m.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,n){"use strict";n.r(t),n.d(t,{LoadingLabel:function(){return c},default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s),r=n("./node_modules/react-select-v1/dist/react-select.es.js"),a=n("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function c(e){return o.createElement(o.Fragment,null,e.loadingLabel||"Loading...",o.createElement("span",{className:"pm-select-loader"},o.createElement(a.default,null)))}class d extends o.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:n,className:s,label:a,isClearable:d,isCreatable:u,autoBlur:p=!0}=this.props;return u?o.createElement(r.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:i()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,s),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?o.createElement(c,this.props):a,scrollMenuIntoView:!1})):o.createElement(r.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:i()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,s),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?o.createElement(c,this.props):a,scrollMenuIntoView:!1}))}}d.defaultProps={size:"sm"},d.displayName="SelectDropdown"},"./js/components/base/ToggleSwitch.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s),r=n("./node_modules/prop-types/index.js"),a=n.n(r);class l extends o.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){!this.props.disabled&&this.props.onClick&&this.props.onClick(!this.props.isActive)}getClasses(){return i()({"toggle-switch":!0,"is-active":this.props.isActive})}getWrapperClasses(){return i()({"toggle-switch-container":!0,"is-disabled":this.props.disabled},this.props.className)}render(){return o.createElement("div",{className:this.getWrapperClasses(),onClick:this.handleClick},o.createElement("div",{className:this.getClasses()}),!this.props.hideLabel&&o.createElement("div",{className:"toggle-switch-text"},this.props.isActive?o.createElement("span",{className:"toggle-switch-text-on"},this.props.activeLabel):o.createElement("span",{className:"toggle-switch-text-off"},this.props.inactiveLabel)))}}l.defaultProps={activeLabel:"ON",inactiveLabel:"OFF",isActive:!1,disabled:!1},l.propTypes={isActive:a().bool,disabled:a().bool,hideLabel:a().bool,activeLabel:a().node,inactiveLabel:a().node,onClick:a().func}},"./js/components/base/WarningButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Tooltips.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");class l extends o.Component{constructor(e){super(e),this.state={isTooltipVisible:!1},this.showTooltip=this.showTooltip.bind(this),this.handleTooltipClose=this.handleTooltipClose.bind(this)}showTooltip(){this.setState({isTooltipVisible:!0})}handleTooltipClose(){this.state.isTooltipVisible&&this.setState({isTooltipVisible:!1})}render(){return o.createElement(o.Fragment,null,o.createElement("div",{ref:"tooltipTarget",onClick:this.showTooltip,className:"warning-button",onMouseOver:this.props.showTooltipOnHover&&this.showTooltip,onMouseLeave:this.props.showTooltipOnHover&&this.handleTooltipClose},o.createElement(a.default,{name:"icon-state-warning-stroke",size:"small",className:"warning-icon"})),o.createElement(s.Tooltip,{show:this.state.isTooltipVisible,target:this.refs.tooltipTarget,placement:this.props.tooltipPlacement,onClose:this.handleTooltipClose,closeOnClickOutside:!0,immediate:!0},o.createElement(s.TooltipBody,null,this.props.tooltip)))}}l.propTypes={tooltip:r().node,showTooltipOnHover:r().bool},l.defaultProps={tooltip:"Here is warning",tooltipPlacement:"right",showTooltipOnHover:!1}},"./js/components/base/data-editor/RowRenderer.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/react-dnd/lib/index.js"),i=n("../../node_modules/react-dom/index.js"),r=n("./node_modules/classnames/index.js"),a=n.n(r),l=n("./js/components/base/Icons/CloseIcon.js"),c=n("./js/components/base/Icons/MenuIcon.js"),d=n("./node_modules/prop-types/index.js"),u=n.n(d),p=n("./js/components/base/XPaths/XPath.js"),m=n("./node_modules/lodash/lodash.js");const h={beginDrag:e=>({index:e.index})},g=e=>{const t=(0,i.findDOMNode)(e).getBoundingClientRect();return t.top+t.height/2},f={hover(e,t,n){t.getItem().index!==e.index&&(t.getClientOffset().y>g(n)?n.setDropHoverBottom():n.setDropHoverTop())},drop(e,t,n){const o=t.getItem().index,s=e.index;o!==s&&(t.getClientOffset().y>g(n)?n.handleReorder&&n.handleReorder(o,s,"after"):n.handleReorder&&n.handleReorder(o,s,"before"))}};class b extends o.PureComponent{constructor(e){super(e),this.state={dropHoverBottom:!1,dropHoverTop:!1,isFocused:!1},this.handleFocus=this.handleFocus.bind(this),this.handleReorder=this.handleReorder.bind(this),this.handleDelete=this.handleDelete.bind(this)}componentDidMount(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}componentWillUnmount(){this.subscription.remove()}getClasses(){return a()({"data-editor__custom-row":!0,"is-focused":this.state.isFocused,"hover-top":this.state.dropHoverTop&&this.props.isDragOver,"hover-bottom":this.state.dropHoverBottom&&this.props.isDragOver})}handleFocus({node:e}){e!==this.props.nodeId||this.state.isFocused?this.state.isFocused&&e!==this.props.nodeId&&this.setState({isFocused:!1}):this.setState({isFocused:!0})}setDropHoverTop(){this.setState({dropHoverBottom:!1,dropHoverTop:!0})}setDropHoverBottom(){this.setState({dropHoverBottom:!0,dropHoverTop:!1})}handleReorder(e,t,n){this.props.onAction&&this.props.onAction("move",{sourceIndex:e,destinationIndex:t,position:n})}handleDelete(){this.props.onAction&&this.props.onAction("delete")}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:n}=this.props;return n(t(o.createElement("div",{className:this.getClasses(),"data-index":this.props.index,style:this.props.style},e(o.createElement("div",{className:"data-editor__reorder"},o.createElement(c.default,{className:"data-editor__reorder__icon",size:"xs"}))),o.createElement(p.default,{identifier:this.props.index},o.createElement("div",{className:"data-editor__cells"},this.props.children)),o.createElement("div",{className:"data-editor__row__actions"},o.createElement(l.default,{className:"data-editor__row__action--delete",onClick:this.handleDelete,size:"xs"})))))}}b.contextTypes={events:u().object},t.default=m.flow((0,s.DropTarget)("grid-renderer-row",f,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})}))),(0,s.DragSource)("grid-renderer-row",h,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}))))(b)},"./js/components/base/data-editor/components/DEInputs.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/react-dom/index.js"),i=n("./js/components/base/keymaps/KeyMaps.js"),r=n("./js/components/base/AutoSuggest/AutoSuggestInput.js"),a=(n("./js/components/base/Inputs.js"),n("./node_modules/@postman/data-editor/lib/lib.js")),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("./node_modules/lodash/lodash.js");class u extends o.Component{constructor(e){super(e),this.handleFocus=this.handleFocus.bind(this),this.handleLeft=this.handleLeft.bind(this),this.handleRight=this.handleRight.bind(this),this.handleUp=this.handleUp.bind(this),this.handleDown=this.handleDown.bind(this),this.handleTab=this.handleTab.bind(this),this.handleShiftTab=this.handleShiftTab.bind(this)}componentDidMount(){this.subscription=this.context.events.addListener("focusCell",this.handleFocus)}componentWillUnmount(){this.subscription.remove()}shallowCompare(e,t){for(let n in e)if(e[n]!==t[n])return!1;return!0}shouldComponentUpdate(e,t){return this.props.value!==e.value||!this.shallowCompare(this.props.cellInfo,e.cellInfo)}getKeyMapHandlers(){return{left:pm.shortcuts.handle("left",this.handleLeft),right:pm.shortcuts.handle("right",this.handleRight),up:pm.shortcuts.handle("up",this.handleUp),down:pm.shortcuts.handle("down",this.handleDown),tab:pm.shortcuts.handle("tab",this.handleTab),shiftTabCell:pm.shortcuts.handle("shiftTabCell",this.handleShiftTab)}}handleFocus({node:e,column:t,direction:n}){e===this.props.cellInfo.node&&t===this.props.cellInfo.column&&(this.refs.input&&this.refs.input.focus(),"left"===n?this.setCursorPosition(1,1):"right"===n?this.setCursorPosition(0,0):"tab"!==n&&"shiftTab"!==n||this.setCursorPosition(0,1))}getCursorPosition(e,t){let n,o,s=d.isFunction(window.getSelection)&&window.getSelection(),i=null,r=null;return s&&s.rangeCount>0?(i=s.rangeCount&&s.getRangeAt(0),r=i&&i.cloneRange(),r.selectNodeContents(e),r.setEnd(i.startContainer,i.startOffset),n=r.toString().length,r.setEnd(i.endContainer,i.endOffset),o=r.toString().length,t?n:o):0}setCursorPosition(e,t){try{let n=(0,s.findDOMNode)(this).getElementsByClassName("public-DraftEditor-content")[0],o=document.createRange(),i=window.getSelection();i.removeAllRanges(),o.setStart(n,e),o.setEnd(n,t),i.addRange(o)}catch(e){}}handleLeft(e){0===this.getCursorPosition(e.target,"start")&&window.getSelection().isCollapsed&&(e&&e.preventDefault(),e&&e.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"left"}))}handleRight(e){let t=this.getCursorPosition(e.target,"end");e.target.textContent.length===t&&window.getSelection().isCollapsed&&(e&&e.preventDefault(),e&&e.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"right"}))}handleUp(e){if(this.props.suggestions&&!d.isEmpty(e.target.closest(".suggestions-expanded")))return;let t=this.getCursorPosition(e.target,"start");e.target.textContent.length;(e.target.offsetHeight<20||0===t)&&(e.preventDefault(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"up"}))}handleDown(e){if(this.props.suggestions&&!d.isEmpty(e.target.closest(".suggestions-expanded")))return;let t=this.getCursorPosition(e.target,"end"),n=e.target.textContent.length;(e.target.offsetHeight<20||n===t)&&(e.preventDefault(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"down"}))}handleTab(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"tab"})}handleShiftTab(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.context.events.emit("moveToCell",{node:this.props.cellInfo.node,column:this.props.cellInfo.column,direction:"shiftTab"})}render(){return o.createElement(i.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers()},o.createElement("div",{className:"data-editor__cell__content"},o.createElement(r.AutoSuggestInput,{type:this.props.type,ref:"input",inputStyle:"cell",value:a.utils.getImmutablePathValue(this.props.value,["value"]),onChange:this.props.onAction,placeholder:this.props.placeholder,suggestions:this.props.suggestions,isReadOnly:this.props.isReadOnly})))}}u.contextTypes={events:c().object}},"./js/components/base/data-editor/components/HeaderActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/@postman/react-click-outside/dist/index.js"),r=n.n(i),a=n("./js/components/base/Buttons.js"),l=n("./js/components/base/Icons/MoreIcon.js"),c=n("./js/components/base/Inputs.js"),d=n("./js/constants/MoreButtonTooltipConstant.js"),u=n("./node_modules/lodash/lodash.js");let p=r()(o=class extends s.Component{constructor(e){super(e),this.state={isOpen:!1},this.toggleColumn=this.toggleColumn.bind(this),this.handleToggle=this.handleToggle.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this)}toggleColumn(e,t){u.findIndex(this.props.config.columns,(t=>t.name===e));let n=u.filter(this.props.config.columns,(e=>!e.hidden));if(1===u.size(n)&&t)return;let o=u.find(this.props.config.columns,(t=>t.name===e)),s=o?o.width:0,i={...this.props.config,columns:u.map(this.props.config.columns,(o=>t?{...o,hidden:o.name===e||o.hidden,width:o.width+s/(u.size(n)-1)}:{...o,hidden:o.name!==e&&o.hidden,width:o.width-s/(u.size(n)+1)}))};this.handleToggle(),this.props.onColumnToggle&&this.props.onColumnToggle(i)}handleToggle(){this.setState({isOpen:!this.state.isOpen})}handleClickOutside(){this.state.isOpen&&this.setState({isOpen:!1})}render(){return s.createElement("div",{className:"data-editor-column-toggle"},s.createElement(a.Button,{className:"data-editor-column-toggle__button",type:"text",onClick:this.handleToggle,tooltip:d.ACTION_TYPE_VIEW_MORE_ACTIONS_TOOLTIP}," ",s.createElement(l.default,{className:"data-editor-column-toggle__button__icon"})),this.state.isOpen&&!this.props.columnGroups&&s.createElement("div",{className:"data-editor-column-toggle__menu"},s.createElement("div",{className:"data-editor-column-toggle__header"},"Show columns"),u.map(this.props.config.columns,((e,t)=>s.createElement("div",{key:t,className:`data-editor-column-toggle__column data-editor-column-toggle__column--${e.name}`,onClick:this.toggleColumn.bind(this,e.name,!e.hidden)},s.createElement(c.Checkbox,{checked:!e.hidden}),s.createElement("span",null,e.label||u.capitalize(e.name)))))),this.state.isOpen&&this.props.columnGroups&&s.createElement("div",{className:"data-editor-column-toggle__menu"},u.map(this.props.columnGroups,((e,t)=>s.createElement("div",{className:"data-editor-column-toggle__group",key:t},s.createElement("div",{className:"data-editor-column-toggle__header"},e.label),u.map(e.columns,((e,t)=>{let n=u.find(this.props.config.columns,(t=>t.name===e));return s.createElement("div",{key:t,className:`data-editor-column-toggle__column data-editor-column-toggle__column--${n.name}`,onClick:this.toggleColumn.bind(this,n.name,!n.hidden)},s.createElement(c.Checkbox,{checked:!n.hidden}),s.createElement("span",null,n.label||u.capitalize(n.name)))})))))))}})||o},"./js/components/import/CustomRowRenderer.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s);class r extends o.PureComponent{constructor(e){super(e)}getClasses(){return i()({"data-editor__custom-row":!0,"is-disabled":this.props.isDisabled})}render(){return o.createElement("div",{className:this.getClasses(),"data-index":this.props.index,style:this.props.style},o.createElement("div",{className:"data-editor__cells"},this.props.children))}}t.default=r},"./js/components/import/DataEditorCheckbox.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js");class i extends o.Component{constructor(e){super(e),this.state={checked:!this.props.disabled},this.handleToggleChecked=this.handleToggleChecked.bind(this)}componentDidMount(){this.setState({checked:this.props.checked})}handleToggleChecked(){this.props.disabled||this.setState((e=>({checked:!e.checked})),(()=>{this.props.onChange&&this.props.onChange(this.state.checked)}))}render(){return o.createElement(s.default,{isDisabled:this.props.disabled,isChecked:this.state.checked,onChange:this.handleToggleChecked,className:"import-file-list__enabled-checkbox"})}}},"./js/components/import/DataEditorImportAsFormats.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./js/components/base/Tooltips.js"),l=n("./js/stores/CurrentUserStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./node_modules/lodash/lodash.js");let p=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={selectedFormat:"",isHovered:!1},this.getDisplayText=this.getDisplayText.bind(this),this.handleHover=this.handleHover.bind(this)}componentDidMount(){this.handleFormatChange(),this.formatChangeReactionDisposer=(0,i.reaction)((()=>(0,c.resolveStoreInstance)(d.default).isSocketConnected),(e=>{if(u.includes(this.props.availableFormats,"API")){let e="";e=this.isImportAsAPIEnabled()?"API":"Collection",this.setState({selectedFormat:e}),this.props.onChange&&this.props.onChange(e)}}))}componentWillUnmount(){this.formatChangeReactionDisposer&&this.formatChangeReactionDisposer()}handleHover(){this.setState((e=>({isHovered:!e.isHovered})))}handleFormatChange(){let e="";if(u.includes(this.props.availableFormats,"API")){e=this.isImportAsAPIEnabled()?"API":"Collection"}else e=u.head(this.props.availableFormats);this.setState({selectedFormat:e}),this.props.onChange&&this.props.onChange(e)}getToolTipForImportAsAPI(){let e=(0,c.resolveStoreInstance)(l.default).isLoggedIn,t=(0,c.resolveStoreInstance)(d.default).isSocketConnected;return e?t?"":"Connect to the internet to import as an API":"Sign in to Postman to import this file as an API"}getDisplayText(){let e=this.state.selectedFormat,{availableFormats:t}=this.props,n=this.isImportAsAPIEnabled();return n&&"API"===e?s.createElement("span",null,"API"):u.includes(t,"API")&&!n?s.createElement("span",null,s.createElement("span",{className:"import-file-list__import-as-format--disabled-api-text"},"API")," Collection"):s.createElement("span",null,e)}isImportAsAPIEnabled(){let e=(0,c.resolveStoreInstance)(l.default).isLoggedIn,t=(0,c.resolveStoreInstance)(d.default).isSocketConnected;return e&&t}render(){let e=this.state.isHovered&&u.includes(this.props.availableFormats,"API")&&!this.isImportAsAPIEnabled();return s.createElement(s.Fragment,null,s.createElement("div",{className:"import-file-list__import-as-format",ref:e=>this.importAsFormatText=e,onMouseLeave:this.handleHover,onMouseEnter:this.handleHover},this.getDisplayText()),s.createElement(a.Tooltip,{show:e,target:this.importAsFormatText,placement:"bottom",immediate:!0},s.createElement(a.TooltipBody,null,this.getToolTipForImportAsAPI())))}})||o},"./js/components/import/ImportByFile.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("./js/components/base/DropZone.js"),r=n("../../packages/api-design/api-design-analytics/index.js"),a=n("./node_modules/lodash/lodash.js");class l extends o.Component{constructor(e){super(e)}render(){return o.createElement(i.DropZone,{type:"file",onDropFile:this.props.onDropFile,className:"drop-files-dropzone-container"},o.createElement("div",{className:"drop-files-dropzone"},o.createElement("div",{className:"drop-files-inner-container"},o.createElement(s.default,{type:"secondary",size:"medium",text:"Choose Files",onClick:()=>{(0,r.logApiDesignAnalytics)({category:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_CATEGORIES.CREATE_API_DEFINITION:r.EVENT_CATEGORIES.IMPORT,action:r.EVENT_ACTIONS.IMPORT_MODAL_CHOOSE_FILES_CLICK,entityId:a.get(this.props,"isCreateDefinitionFlow",!1)?a.get(this.props,"apiId"):void 0,entityType:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_ENTITY_TYPES.API:void 0})}}))))}}},"./js/components/import/ImportByFolder.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=(n("./node_modules/classnames/index.js"),n("./js/components/base/DropZone.js")),r=n("../../packages/api-design/api-design-analytics/index.js"),a=n("./node_modules/lodash/lodash.js");class l extends o.Component{constructor(e){super(e)}render(){return o.createElement(i.DropZone,{type:"directory",onDropFile:this.props.onDropFolder,onlyDirectory:"true",className:"drop-files-dropzone-container"},o.createElement("div",{className:"drop-files-dropzone"},o.createElement("div",{className:"drop-files-inner-container"},o.createElement(s.default,{type:"secondary",text:"Choose folder from your computer",onClick:()=>{(0,r.logApiDesignAnalytics)({category:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_CATEGORIES.CREATE_API_DEFINITION:r.EVENT_CATEGORIES.IMPORT,action:r.EVENT_ACTIONS.IMPORT_MODAL_CHOOSE_FOLDERS_CLICK,entityId:a.get(this.props,"isCreateDefinitionFlow",!1)?a.get(this.props,"apiId"):void 0,entityType:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_ENTITY_TYPES.API:void 0})}}))))}}},"./js/components/import/ImportByRawText.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/TextArea.js");n("./js/components/base/Buttons.js");class i extends o.Component{constructor(e){super(e),this.handleTextChange=this.handleTextChange.bind(this)}handleTextChange(e){this.props.onTextChange&&this.props.onTextChange(e)}render(){return o.createElement("div",null,o.createElement("div",{className:"import-by-raw-text-label"},"Paste raw text"),o.createElement(s.default,{className:"import-by-raw-text-input",onChange:this.handleTextChange,placeholder:'e.g. curl --location --request GET "https://postman-echo.com/get"',rows:"14"}))}}},"./js/components/import/ImportByUrl.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Inputs.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("../../packages/api-design/api-design-analytics/index.js"),a=n("./node_modules/lodash/lodash.js");class l extends o.Component{constructor(e){super(e),this.state={isContinueButtonEnabled:!1},this.handleUrlChange=this.handleUrlChange.bind(this),this.handleContinue=this.handleContinue.bind(this)}handleUrlChange(e){this.setState({isContinueButtonEnabled:!a.isEmpty(e)}),this.props.onUrlChange&&this.props.onUrlChange(e)}handleContinue(){(0,r.logApiDesignAnalytics)({category:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_CATEGORIES.CREATE_API_DEFINITION:r.EVENT_CATEGORIES.IMPORT,action:r.EVENT_ACTIONS.IMPORT_MODAL_CONTINUE_WITH_RAW_LINK_CLICK,entityId:a.get(this.props,"isCreateDefinitionFlow",!1)?a.get(this.props,"apiId"):void 0,entityType:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_ENTITY_TYPES.API:void 0}),this.props.onContinue&&this.props.onContinue()}render(){return o.createElement("div",null,o.createElement("div",{className:"import-by-url-label"},"Enter a URL"),o.createElement(s.Input,{placeholder:"e.g. https://petstore.swagger.io/v2/swagger.json",inputStyle:"box",type:"text",className:"import-by-url-input",onChange:this.handleUrlChange,onEnter:this.handleContinue}),o.createElement("div",{className:"import-by-url-button-wrapper"},o.createElement(i.default,{className:"import-by-url-button",type:"primary",disabled:!this.state.isContinueButtonEnabled,onClick:this.handleContinue,text:"Continue"})))}}},"./js/components/import/ImportFileList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/import/DataEditorImportAsFormats.js"),i=n("./js/components/import/DataEditorCheckbox.js"),r=n("./js/components/base/Icons/FolderIcon.js"),a=n("./js/components/base/Buttons.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),c=n("./node_modules/@postman/data-editor/lib/lib.js"),d=n("./js/components/import/CustomRowRenderer.js"),u=n("./node_modules/lodash/lodash.js");const p=[34,33,33],m=[5,35,30,30],h=[50,50],g=[10,45,45];class f extends o.Component{constructor(e){super(e);let t={columns:[{name:"enabled",type:"boolean",label:"",width:m[0],renderer:(e,t,{isCollapsed:n,subColumnIndex:s},r,a)=>{let l=c.utils.getImmutablePathValue(e,["value"]);return o.createElement("div",{className:"import-file-list__column-enabled-cell"},o.createElement(i.default,{disabled:this.state.errorArray[l],checked:this.state.enabledArray[l],onChange:e=>{let t=[...this.state.enabledArray];t[l]=e,this.setState({enabledArray:t}),this.props.onChangeEnabled&&this.props.onChangeEnabled(e,l)}}))}},{name:"name",type:"string",label:"NAME",resize:!0,default:"",width:m[1],renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,l)=>o.createElement("div",{className:"import-file-list__column-name-cell"},o.createElement("div",{className:"import-file-list__column-name-cell-content"},c.utils.getImmutablePathValue(e,["value"])),this.state.isFolder&&o.createElement("div",{className:"import-file-list__column-name-cell-folder-icon"},o.createElement(a.Button,{type:"text",tooltip:"The contents of this folder will be merged into a single file on import"},o.createElement(r.default,null))))},{name:"importFormat",type:"string",label:"FORMAT",resize:!0,default:"",width:m[2],renderer:(e,t,{isCollapsed:n,subColumnIndex:s},i,r)=>{let a=c.utils.getImmutablePathValue(e,["value"]);return o.createElement("div",{className:"import-file-list__column-format-cell"},o.createElement("div",{className:"import-file-list__column-format-cell-content"},a,"Protobuf 2"===a||"Protobuf 3"===a?o.createElement(l.default,{status:"info",text:"Beta"}):""))}},{name:"importAsFormats",type:"string",label:"IMPORT AS",resize:!0,default:"",width:m[3],renderer:(e,t,{isCollapsed:n,subColumnIndex:i},r,a)=>{let l=c.utils.getImmutablePathValue(e,["value"]),d=this.state.availableFormatsImportAs[l],u=this.state.selectedFormatsImportAs[l];return o.createElement(s.default,{availableFormats:d,selectedFormats:u,onChange:e=>{let t=[...this.state.selectedFormatsImportAs];t[l]&&(t[l]=e,this.setState({selectedFormatsImportAs:t}),this.props.onChangeImportAsFormats&&this.props.onChangeImportAsFormats(e,l))}})}}],renderers:{row:({children:e,index:t,nodeId:n},s,{isCollapsed:i,subColumnIndex:r},a)=>{const l=this.state.errorArray[t];return o.createElement(d.default,{index:t,style:a,nodeId:n,isDisabled:l},e)},header:e=>o.createElement("div",{className:"data-editor__custom-header"},e)},height:300},n=[],f={},b=[],y=[],v=[],I=[],_=this.props.files,E=_.length>1||1===_.length&&_[0].error,S=!1;this.props.removeFormatSelectionColumn&&(t.columns.splice(t.columns.length-1,1),u.forEach(t.columns,((e,t)=>{e.width=g[t]}))),E||(t.columns.splice(0,1),u.forEach(t.columns,((e,t)=>{e.width=this.props.removeFormatSelectionColumn?h[t]:p[t]}))),u.forEach(_,((e,t)=>{let o=e.name||`Imported from ${e.format.name}`,s=e.format.name,i=e.importAsFormats,r=e.enabled;S=e.isFolder,b.push(i),y.push(i),f={name:o,importFormat:s,importAsFormats:t},E&&(v.push(!e.error&&r),I.push(!!e.error&&e.error),f.enabled=t),n.push(f)})),this.state={DEConfig:t,DEConfigValues:n,enabledArray:v,errorArray:I,availableFormatsImportAs:b,selectedFormatsImportAs:y,isFolder:!0===S}}render(){return o.createElement("div",{className:"import-file-list"},o.createElement(c.DataEditor,{input:this.state.DEConfigValues,config:this.state.DEConfig}))}}},"./js/components/import/ImportFilesAndOptions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./node_modules/classnames/index.js"),r=n.n(i),a=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),p=n("./js/components/base/Icons/InformationIcon.js"),m=n("./js/components/import/ImportFileList.js"),h=n("./js/components/import/ConfigurationsComponent.js"),g=n("../../packages/api-design/schema-editor/index.js"),f=n("./node_modules/lodash/lodash.js");const b=[{value:"documentation",label:"Documentation"},{value:"test",label:"Test Suite"}],y={openapi3_1:"OpenAPI/Swagger",openapi3:"OpenAPI/Swagger",swagger:"OpenAPI/Swagger",graphql:"GraphQL",raml:"RAML",har:"HAR"},v=s.default.div`
  width: 272px;
  margin-left: 28px;
  margin-bottom: 10px;
`;class I extends o.Component{constructor(e){super(e),this.state={visibleOptions:{},preferences:{},showOptions:!1,isGenerateCollectionEnabled:!0},this.selectDefaultAPIElement=this.selectDefaultAPIElement.bind(this),this.handleGenerateCollectionCheckboxChange=this.handleGenerateCollectionCheckboxChange.bind(this),this.handleAPIElementChange=this.handleAPIElementChange.bind(this),this.handleShowOptionsToggle=this.handleShowOptionsToggle.bind(this),this.handleChangeImportAsFormats=this.handleChangeImportAsFormats.bind(this),this.handleSubmitOptions=this.handleSubmitOptions.bind(this),this.handleChangeEnabled=this.handleChangeEnabled.bind(this)}componentDidMount(){let{files:e,configurationOptions:t}=this.props,n={};f.forEach(e,(e=>{e.enabled&&(n[e.format.type]=e.optionsPreference)})),this.setState({visibleOptions:t,preferences:n}),this.selectDefaultAPIElement()}selectDefaultAPIElement(){let e=f.head(b);this.setState({selectedAPIElement:e}),this.props.onAPIElementChange&&this.props.onAPIElementChange(e.value)}handleGenerateCollectionCheckboxChange(e){if(e){let t=f.head(b);this.setState({isGenerateCollectionEnabled:e,selectedAPIElement:t},(()=>{this.props.onAPIElementChange&&this.props.onAPIElementChange(t.value)}))}else this.setState({isGenerateCollectionEnabled:e,selectedAPIElement:null,showOptions:this.state.showOptions&&!1},(()=>{this.props.onAPIElementChange&&this.props.onAPIElementChange(null)}))}handleAPIElementChange(e){this.setState({selectedAPIElement:e}),this.props.onAPIElementChange&&this.props.onAPIElementChange(e.value)}handleShowOptionsToggle(){this.state.isGenerateCollectionEnabled&&this.setState((e=>({showOptions:!e.showOptions})))}handleChangeImportAsFormats(e,t){let{files:n}=this.props;n[t]&&(n[t].importAsFormats=e,this.props.onChangeFiles&&this.props.onChangeFiles(n))}handleSubmitOptions(e,t){this.setState({preferences:{...this.state.preferences,[e]:t}});let n=f.map(this.props.files,(n=>((n.format.type===e||"swagger"===n.format.type&&"openapi3"===e)&&(n.optionsPreference=t,pm.settings.setSetting(`import.options.${n.format.id}`,t)),n)));this.props.onChangeFiles&&this.props.onChangeFiles(n)}handleChangeEnabled(e,t){let{files:n}=this.props,o=n[t],s=f.get(o,"format.type");if(o){if(o.enabled=e,o.enabled)this.props.configurationOptions[s]&&!this.state.visibleOptions[s]&&this.setState({visibleOptions:{...this.state.visibleOptions,[s]:f.get(this.props.configurationOptions,s)}});else{let e=!0;f.forEach(n,(t=>{t.format.type===s&&t.enabled&&(e=!1)})),e&&this.state.visibleOptions[s]&&this.setState({visibleOptions:f.omit(this.state.visibleOptions,s)})}this.setState({files:n}),this.props.onChangeFiles&&this.props.onChangeFiles(n)}}renderConfigurationsOptions(){let e=this.state.showOptions?"Hide advanced options":"Show advanced settings",t=r()({"import-options-container":!0,"generation-disabled":!this.showImportAPISettings()});if(!f.isEmpty(this.state.visibleOptions))return o.createElement("div",{className:t},o.createElement("div",{className:this.getGenerateSectionDisableClasses("import-options-header"),onClick:this.handleShowOptionsToggle},this.state.showOptions?o.createElement(d.default,{color:"content-color-primary"}):o.createElement(u.default,{color:"content-color-primary"}),o.createElement("span",null,e)),this.state.showOptions&&o.createElement("div",{className:"import-options-content-wrapper"},f.map(this.state.visibleOptions,((e,t)=>o.createElement("div",{className:`import-options-content content--${t}`},o.createElement("div",{className:"import-options-content-header"},o.createElement("span",null,`Settings for collections generated from ${y[t]} files`)),o.createElement(h.default,{key:t,optionsArray:e,optionsPreference:this.state.preferences[t],onSubmit:e=>this.handleSubmitOptions(t,e)}))))))}showImportAPISettings(){let e=f.find(this.props.files,(e=>e.enabled&&f.includes(e.importAsFormats,"API")&&!f.includes(g.GENERATE_COLLECTION_DISABLED_FORMATS,e.format.id)));return this.props.isImportAPIEnabled&&e}showConfigsSettingsWhenOffline(){return!this.props.isImportAPIEnabled&&!f.isEmpty(this.state.visibleOptions)}getGenerateSectionDisableClasses(e){return r()({[e]:!0,"is-disabled":!this.state.isGenerateCollectionEnabled})}render(){let{files:e,hideAPIElementOptions:t=!1}=this.props,n=this.showImportAPISettings(),s=!1;return f.forEach(this.state.visibleOptions,(e=>{f.isEmpty(e)||(s=!0)})),Array.isArray(e)&&0===e.length?o.createElement("div",null):o.createElement(o.Fragment,null,o.createElement("div",{className:"import-file-list-container"+(n?" import-file-list-combined":"")},o.createElement(m.default,{files:e,onChangeImportAsFormats:this.handleChangeImportAsFormats,onChangeEnabled:this.handleChangeEnabled})),n&&o.createElement("div",{className:"import-generate-collection-container"},o.createElement("div",{className:"import-generate-collection-checkbox"},o.createElement(a.default,{isChecked:this.state.isGenerateCollectionEnabled,onChange:this.handleGenerateCollectionCheckboxChange}),o.createElement("span",{className:"import-generate-collection-checkbox-label",onClick:this.handleGenerateCollectionCheckboxChange},"Generate collection from imported APIs"),o.createElement(l.default,{type:"text",tooltip:"Use the collection to send requests, create test suites, write documentation, and more.",tooltipPlacement:"right"},o.createElement(p.default,{size:"xs"}))),!t&&o.createElement(o.Fragment,null,o.createElement("div",{className:this.getGenerateSectionDisableClasses("import-select-api-element-dropdown-header")},o.createElement("span",null,"Link this collection as")),o.createElement(v,null,o.createElement(c.default,{className:"import-select-api-element-dropdown",onChange:this.handleAPIElementChange,isClearable:!1,isSearchable:!1,isDisabled:!this.state.isGenerateCollectionEnabled,value:this.state.selectedAPIElement||f.head(b),options:b})))),s&&this.renderConfigurationsOptions())}}},"./js/components/import/ImportFilesBanner.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=n("./js/constants/AppUrlConstants.js"),d=n("./js/constants/ImportErrorConstants.js"),u=n("./appsdk/components/link/Link.js"),p=n("./node_modules/lodash/lodash.js");class m extends o.Component{getErrors(e){return e?p.chain(e).map((e=>e.error)).compact().reduce(((e,t)=>(e[t]||(e[t]=0),e[t]++,e)),{}).value():{}}renderError(e,t){if(e===d.IMPORT_ERROR_NOT_SUPPORTED)return o.createElement("div",{className:"error",key:e},o.createElement("div",{className:"error__content-left"},o.createElement(l.default,{name:"icon-state-error-stroke",color:"content-color-error"})),o.createElement("div",{className:"error__content-right"},o.createElement("div",{className:"error__header"},o.createElement(r.default,{type:"h5",text:p.isFinite(t)?`${t} invalid import format(s)`:"Format not supported",color:"content-color-primary"})),o.createElement("div",{className:"error__message"},o.createElement(a.default,{type:"body-medium",color:"content-color-primary"},"Postman Collection Format v1 is no longer supported and can not be imported directly. You may "),o.createElement(u.default,{to:c.CONVERT_COLLECTION_FORMAT_DOCS,target:"_blank"},o.createElement(a.default,{type:"link-default",color:"content-color-primary",isExternal:!0},"convert your collection to Format v2")),o.createElement(a.default,{type:"body-medium",color:"content-color-primary"}," and try importing again."))))}render(){const e=this.getErrors(this.props.files);return p.isEmpty(e)?null:o.createElement("div",{className:"import-files-banner"},Object.keys(e).map((t=>this.renderError(t,e[t]))))}}m.propTypes={files:i().array.isRequired}},"./js/components/import/ImportSensitiveVariableBanner.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("./node_modules/lodash/lodash.js");class c extends o.Component{getShowWarning(){let e=!1,t=!1,n=!1,o=!1;return l.forEach(this.props.files,(s=>{"Environment"!==s.importAsFormats&&"Globals"!==s.importAsFormats||(!e&&(e=s.showPurgeSensitiveValueWarning),!t&&(t=s.showPurgeAllValueWarning),"Environment"===s.importAsFormats?n=!0:o=!0)})),{showSensitiveWarning:e,showAllVariableWarning:t,environmentPresent:n,globalsPresent:o}}getEntity(e,t){return e&&t?"environment and globals":e?"environment":"globals"}renderBanner(){const{showSensitiveWarning:e,showAllVariableWarning:t,environmentPresent:n,globalsPresent:s}=this.getShowWarning();return t?o.createElement(r.default,{title:`None of the variable values in ${this.getEntity(n,s)} will be imported`,status:"warning"},"None of the variable values in ",this.getEntity(n,s)," will be imported as team admin has blocked the use of initial values to disable syncing with your team and Postman’s database."):e?o.createElement(r.default,{title:`Values of secret variables in ${this.getEntity(n,s)} will not be imported`,status:"warning"},"Values of secret variables in ",this.getEntity(n,s)," will not be imported as team admin has blocked the use of initial values to disable syncing with your team and Postman’s database."):void 0}render(){return o.createElement(a.default,{padding:{paddingTop:"spacing-m"}},this.renderBanner())}}c.propTypes={files:i().array.isRequired}},"./js/components/import/ImportTabContent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s);class r extends o.Component{constructor(e){super(e)}getClasses(){return i()("import-tab-content",{"is-hidden":!this.props.active},this.props.className)}render(){let e=this.getClasses();return o.createElement("div",{className:e},this.props.children)}}},"./js/components/import/ImportTabContents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n("../../node_modules/react/index.js");class s extends o.Component{constructor(e){super(e)}render(){let e=o.Children.map(this.props.children,(e=>o.cloneElement(e,{active:this.props.activeKey===e.key})));return o.createElement("div",{className:"import-tab-contents "+(this.props.isOffline?"disable-import-cta":"")},e)}}},"./js/components/import/ImportTabs.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Tabs.js"),i=n("./js/constants/ImportTypeConstants.js"),r=n("../../packages/api-design/api-design-analytics/index.js"),a=n("./node_modules/lodash/lodash.js");class l extends o.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this)}handleSelect(e){if((0,r.logApiDesignAnalytics)({category:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_CATEGORIES.CREATE_API_DEFINITION:r.EVENT_CATEGORIES.IMPORT,action:r.EVENT_ACTIONS.IMPORT_MODAL_TAB_CLICK,label:e,entityId:a.get(this.props,"isCreateDefinitionFlow",!1)?a.get(this.props,"apiId"):void 0,entityType:a.get(this.props,"isCreateDefinitionFlow",!1)?r.EVENT_ENTITY_TYPES.API:void 0}),e===i.IMPORT_CODE_REPOSITORY){let e=pm.settings.getSetting("import.codeRepositoryOpened")||0;e<=1&&pm.settings.setSetting("import.codeRepositoryOpened",++e)}if(e===i.IMPORT_API_GATEWAY){let e=pm.settings.getSetting("import.apiGatewayOpened")||0;e<=1&&pm.settings.setSetting("import.apiGatewayOpened",++e)}this.props.onSelect&&this.props.onSelect(e)}render(){return o.createElement("div",{className:"import-tabs-header"},o.createElement(s.Tabs,{type:"primary",defaultActive:i.IMPORT_FILE,activeRef:this.props.activeTab,onChange:this.handleSelect},o.createElement(s.Tab,{refKey:i.IMPORT_FILE,className:"import-tabs-header--file"},"File"),o.createElement(s.Tab,{refKey:i.IMPORT_FOLDER,className:"import-tabs-header--folder"},"Folder"),o.createElement(s.Tab,{refKey:i.IMPORT_URL,className:"import-tabs-header--link"},"Link"),o.createElement(s.Tab,{refKey:i.IMPORT_TEXT,className:"import-tabs-header--text"},"Raw text"),o.createElement(s.Tab,{refKey:i.IMPORT_CODE_REPOSITORY,className:"import-tabs-header--code-repository"},o.createElement("div",{className:"import-code-repository-tab"},o.createElement("span",{className:"import-tab-header--repository-text"},"Code repository"),this.props.newBadgeForCodeRepository&&o.createElement("div",{className:"import-tabs-header--code-repository-new"},"New"))),o.createElement(s.Tab,{refKey:i.IMPORT_API_GATEWAY,className:"import-tabs-header--api-gateway"},o.createElement("div",{className:"import-api-gateway-tab"},o.createElement("span",{className:"import-tab-header--gateway-text"}," API Gateway"),this.props.newBadgeForApiGateway&&o.createElement("div",{className:"import-tabs-header--api-gateway-new"},"New")))))}}},"./js/components/new-button/CreationError.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Buttons.js");class i extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"creation-error"},this.props.blankState?o.createElement("div",{className:"creation-error__blank-state"},this.props.blankState):o.createElement("div",{className:"creation-error__icon"}),o.createElement("div",{className:"creation-error__title"},this.props.title||"Something went wrong"),o.createElement("div",{className:"creation-error__subtitle"},this.props.subtitle),this.props.onRetry&&o.createElement("div",{className:"creation-error__actions"},o.createElement(s.Button,{type:"primary",onClick:this.props.onRetry},this.props.actionName||"Retry Now")))}}},"./js/components/new-button/DataEditorRequestMethods.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/@postman/data-editor/lib/lib.js"),a=n("./js/stores/StoreManager.js"),l=n("./runtime-repl/request-http/datastores/RequestMethodsStore.js"),c=n("./js/components/base/XPaths/XPath.js"),d=n("./js/components/base/Dropdowns.js"),u=n("./js/components/base/Buttons.js"),p=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange&&this.props.onChange(e)}render(){let e=(0,a.resolveStoreInstance)(l.default).methods;return s.createElement(c.default,{identifier:"method",key:"method"},s.createElement(d.Dropdown,{allowScroll:this.props.allowScroll,fullWidth:!0,onSelect:this.handleChange},s.createElement(d.DropdownButton,{size:"small",type:"secondary"},s.createElement(u.Button,null,s.createElement("span",null,r.utils.getImmutablePathValue(this.props.value,["value"])))),s.createElement(d.DropdownMenu,{fluid:!0},p.map(e,(e=>s.createElement(d.MenuItem,{key:e,refKey:e},s.createElement("span",null,e)))))))}})||o},"./js/constants/ImportFlowConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DEFAULT_SELECTED_STATE:function(){return s},IMPORT_SERVICES:function(){return o},REPOSITORY_SERVICE_MAP:function(){return i}});const o={GITHUB:"github",GITLAB:"gitlab",AZURE:"azure",BITBUCKET:"bitbucket"},s={id:"",name:""},i={github:"getRelevantFiles",bitbucket:"getRelevantFilesBitbucket",gitlab:"getRelevantFilesForGitlab",azure:"getRelevantFilesForAzure"}},"./js/constants/ImportTypeConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IMPORT_API_GATEWAY:function(){return l},IMPORT_CODE_REPOSITORY:function(){return a},IMPORT_FILE:function(){return o},IMPORT_FOLDER:function(){return s},IMPORT_TEXT:function(){return i},IMPORT_URL:function(){return r}});const o="File",s="Folder",i="Text",r="Url",a="CodeRepository",l="ApiGateway"},"./js/constants/MonitorScheduleConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{TimeList:function(){return i},TimeOption:function(){return s},TimeType:function(){return o}});const o=[{name:"Minute timer",id:"minute-timer"},{name:"Hour timer",id:"hour-timer"},{name:"Week timer",id:"week-timer"}],s={"minute-timer":[{name:"Every 5 minutes",id:"*/5"},{name:"Every 10 minutes",id:"*/10"},{name:"Every 15 minutes",id:"*/15"},{name:"Every 20 minutes",id:"*/20"},{name:"Every 30 minutes",id:"*/30"}],"hour-timer":[{name:"Every hour",id:"*"},{name:"Every 2 hours",id:"*/2"},{name:"Every 3 hours",id:"*/3"},{name:"Every 4 hours",id:"*/4"},{name:"Every 6 hours",id:"*/6"},{name:"Every 12 hours",id:"*/12"}],"week-timer":[{name:"Every day",id:"*"},{name:"Every weekday (Monday-Friday)",id:"MON-FRI"},{name:"Every Monday",id:"MON"},{name:"Every Tuesday",id:"TUE"},{name:"Every Wednesday",id:"WED"},{name:"Every Thursday",id:"THU"},{name:"Every Friday",id:"FRI"},{name:"Every Saturday",id:"SAT"},{name:"Every Sunday",id:"SUN"}]},i=[{name:"12:00 AM",id:"0"},{name:"1:00 AM",id:"1"},{name:"2:00 AM",id:"2"},{name:"3:00 AM",id:"3"},{name:"4:00 AM",id:"4"},{name:"5:00 AM",id:"5"},{name:"6:00 AM",id:"6"},{name:"7:00 AM",id:"7"},{name:"8:00 AM",id:"8"},{name:"9:00 AM",id:"9"},{name:"10:00 AM",id:"10"},{name:"11:00 AM",id:"11"},{name:"12:00 PM",id:"12"},{name:"1:00 PM",id:"13"},{name:"2:00 PM",id:"14"},{name:"3:00 PM",id:"15"},{name:"4:00 PM",id:"16"},{name:"5:00 PM",id:"17"},{name:"6:00 PM",id:"18"},{name:"7:00 PM",id:"19"},{name:"8:00 PM",id:"20"},{name:"9:00 PM",id:"21"},{name:"10:00 PM",id:"22"},{name:"11:00 PM",id:"23"}]},"./js/containers/import/ImportByApiGatewayContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),r=n("./integrations/api-observability/components/import/APIGatewaySelectionPanel.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("./api-dev/interfaces/APIInterface.js"),d=n("./integrations/utils/CommonHelperMethods.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./integrations/api-observability/constants.ts");class m extends o.Component{constructor(e){super(e),this.state={apiId:l().get(this.props,"apiInfo.apiId")}}async componentDidMount(){if(this.props.isCreateDefinitionFlow){const e=this.state.apiId,t=await(0,c.getAPI)(e),n=l().get(t,"version.id"),o=await(0,d.fetchApiPermissions)(e,["CAN_OPERATE_API_WRITE_INTEGRATION"]);let s;this.setState({isFetchingGatewayImportChecks:!0}),u.default.getConfiguredIntegrationsByEntityAndClientCategory(p.categoryToEntityType[p.API_OBSERVABILITY],n,[p.categoryToClientCategory[p.API_OBSERVABILITY]]).then((e=>{l().isEmpty(e[p.API_OBSERVABILITY])||(s=l().get(e,[p.API_OBSERVABILITY,"0","service"]))})).catch((e=>{pm.logger.error("Error occurred while fetching the configured integrations"),this.setState({isFetchingGatewayImportChecks:!1})})).finally((()=>{this.setState({configuredService:s,isIntegrationCreationAllowed:o,isFetchingGatewayImportChecks:!1,apiVersionId:n})}))}}render(){const{handleClose:e,workspaceId:t,sourceIdentifier:n,tabId:a,isCreateDefinitionFlow:l}=this.props,{isIntegrationCreationAllowed:c,configuredService:d,isFetchingGatewayImportChecks:u,apiId:p,apiVersionId:m}=this.state;return u?o.createElement(s.default,{justifyContent:"center",alignItems:"center",grow:"1"},o.createElement(i.default,null)):o.createElement("div",{className:"import-via-code-repository-container"},o.createElement("div",null,o.createElement(r.default,{handleClose:e,workspaceId:t,sourceIdentifier:n,tabId:a,apiId:p,apiVersionId:m,isIntegrationCreationAllowed:c,configuredService:d,isCreateDefinitionFlow:l})))}}},"./js/containers/import/ImportByAzure.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/async/dist/async.js"),i=n.n(s),r=n("./js/components/base/Icons/WarningIcon.js"),a=n("./js/components/base/Avatar.js"),l=n("./integrations/constants/repository_actions.ts"),c=n("./api-dev/components/api-repo-integration/EntitySelectDropdown/EntitySelectDropdown.js"),d=n("./js/constants/ImportFlowConstants.js"),u=n("./integrations/services/AzureService.js"),p=n("./integrations/git/services/RemoteGitService.ts"),m=n("./node_modules/lodash/lodash.js");class h extends o.Component{constructor(e){super(e),this.manualBranchInput=(0,o.createRef)(),this.state={authorizing:!1,showBranches:!1,showRepos:!1,showRetry:!0,disableRepoDropdown:!1,showManualInputDialogue:!0,loadingOrg:!1,loadingRepo:!1,loadingBranch:!1,orgs:[],branches:[],repos:[],user:{username:"",links:{avatar:{href:""}}},showOrgs:!1,selectedTargetOrg:d.DEFAULT_SELECTED_STATE,selectedTargetRepo:d.DEFAULT_SELECTED_STATE,selectedTargetBranch:d.DEFAULT_SELECTED_STATE},this.scrollToBottom=(0,o.createRef)(),this.bootstrapCallToAzure=this.bootstrapCallToAzure.bind(this),this.handleOrgSelection=this.handleOrgSelection.bind(this),this.handleRepoSelection=this.handleRepoSelection.bind(this),this.handleBranchSelection=this.handleBranchSelection.bind(this),this.getUserAvatar=this.getUserAvatar.bind(this),this.smoothScrollHandler=this.smoothScrollHandler.bind(this),this.searchBranches=this.searchBranches.bind(this),this.debouncedSearchBranches=m.debounce(this.searchBranches,500)}componentDidMount(){this.props.activeState&&this.props.store?this.setState(this.props.store):this.props.accessToken&&this.bootstrapCallToAzure()}smoothScrollHandler(){this.scrollToBottom.current.scrollIntoView({behavior:"smooth"})}bootstrapCallToAzure(){this.setState({showOrgs:!0,loadingOrg:!0,showBranches:!1,showRepos:!1}),i().waterfall([e=>{const t={accessToken:this.props.accessToken};u.default.getUser(t,((t,n)=>{if(t)return e(t);this.setState({user:n});let o=m.get(n,"id");return e(null,o)}))},(e,t)=>{const n={accessToken:this.props.accessToken,memberId:e};u.default.getUserOrgs(n,((e,n)=>{if(e)return this.setState({loadingOrg:!1,errorOrg:!0,showRepos:!1,showBranches:!1}),t(e);let o=[];return m.each(n,(e=>{o.push({id:e.id,name:e.name})})),this.setState({orgs:o,loadingOrg:!1,errorOrg:!1}),t()}))}],(e=>{e&&this.setState({showOrgs:!0,loadingOrg:!1,errorOrg:!0})}))}getUserAvatar(){return m.get(this.state,"user.avatar",null)}handleOrgSelection(e={}){e.id||e.name||(e=this.state.selectedTargetOrg),this.setState({selectedTargetOrg:e,showRepos:!0,loadingRepo:!0,showBranches:!1,errorBranch:!1,showManualInput:!1,errorRepo:!1,selectedTargetRepo:d.DEFAULT_SELECTED_STATE,repos:[]},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.props.handleAction(l.STOP_VERIFYING)}));const t={accessToken:this.props.accessToken,orgId:m.get(e,"id")};u.default.getRepositories(t,((t,n)=>{if(t)return this.setState({loadingRepo:!1,errorRepo:!0,showManualInputDialogue:!1,showBranches:!1,disableRepoDropdown:!0}),void pm.logger.warn("RepositoryContainer~handleOrgSelection: Error while getting repositories.",t||"No repositories found");let o=[];m.each(n,(e=>{o.push({id:e.id,name:e.name})})),this.setState({repos:o,loadingRepo:!1,selectedTargetOrg:e,showManualInputDialogue:!0,disableRepoDropdown:!1,showRetry:!0,errorRepo:!1})}))}handleRepoSelection(e={},t){this.props.handleAction(l.DISABLE_WARNING,this.state),e.id||e.name||(e=this.state.selectedTargetRepo),this.setState({showBranches:!0,loadingBranch:!0,errorBranch:!1,selectedTargetBranch:d.DEFAULT_SELECTED_STATE,branches:[]}),t||this.setState({selectedTargetRepo:e,showManualInput:!1},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.props.handleAction(l.STOP_VERIFYING)}));const n={accessToken:this.props.accessToken,owner:m.get(this.state,"selectedTargetOrg.id"),repoId:m.get(e,"id")};u.default.getRepositoryBranches(n,((e,t)=>{if(e)return this.setState({errorBranch:!0,loadingBranch:!1,branches:[],disableBranchDropdown:!0}),void pm.logger.warn("RepositoryContainer~handleRepoSelection: Error while getting branches.",e||"Empty branch list");let n=[];m.each(t,(e=>{let t={name:m.get(e,"name"),id:m.get(e,"name"),hash:m.get(e,"commit")};n.push(t)})),this.setState({loadingBranch:!1,branches:n,showManualBranchInputDialogue:!0,disableBranchDropdown:!1,errorBranch:!1})}))}handleBranchSelection(e){this.props.handleAction(l.DISABLE_WARNING,this.state),this.props.handleAction(l.STOP_VERIFYING),this.setState({selectedTargetBranch:e},(()=>{this.props.handleAction(l.BRANCH_SELECTED,this.state)}))}handleChangeManualBranchInput(e){this.setState({branchName:e},(()=>{this.props.handleAction(l.DISABLE_CONTINUE)}))}filterList(e,t,{firstRender:n}={}){let o=this.state[e];if(!t||n)return o;return m.filter(o,(e=>e.name&&m.includes(e.name.toLowerCase(),t.toLowerCase())))}async searchBranches(e){let{branchSearchCache:t,branches:n,selectedTargetOrg:o,selectedTargetRepo:s}=this.state,i=m.get(t,[o.id,s.id,e]);if(!m.isEmpty(e)&&m.isEmpty(i)){this.setState({loadingBranch:!0});try{const{tokenId:o}=this.props,{selectedTargetOrg:i}=this.state,{branches:r}=await p.default.searchBranches(o,i.id,s.id,e),a=m.map(r,(e=>({id:e.name,name:e.name,hash:e.commit})));m.set(t,[i.id,s.id,e],a),n=m.unionBy(n,a,"id"),this.setState({branches:n,branchSearchCache:t})}finally{this.setState({loadingBranch:!1})}}}render(){let e=this.getUserAvatar();return o.createElement("div",{className:"import-via-code-repository-container"},o.createElement("div",null,o.createElement("div",{className:"import-via-code-repository"},o.createElement("div",{className:"import-via-code-repository__content"},o.createElement("div",{className:"import-via-code-repository__content-title"},o.createElement("div",{className:"import-via-code-repository-user-info"},o.createElement("div",{className:"import-via-code-repository-user-info__username_title"}," Authenticated on Azure DevOps as "),o.createElement(a.default,{className:"import-via-code-repository-user-info__avatar",size:"small",customPic:e}),o.createElement("div",{className:"import-via-code-repository-user-info__username"},m.get(this.state,"user.name")||m.get(this.state,"user.username")))),o.createElement("div",{className:"import-via-code-repository__line"}),this.props.showWarning&&o.createElement("div",{className:"import-via-code-repository__banner"},o.createElement("div",{className:"import-via-code-repository__banner__icon"},o.createElement(r.default,{size:"sm"})),o.createElement("div",{className:"import-via-code-repository__banner__message"},o.createElement("span",null,"Unable to find any files to import. Double check your repository and branch."))),o.createElement("div",{className:"import-via-code-repository__content-dropdown"},this.state.showOrgs&&o.createElement("div",{className:"integrations-add-card__segment"},o.createElement(c.default,{parentClassName:"api-repo-integration-configuration__select-org",title:"Organization",selectedItem:this.state.selectedTargetOrg,filterList:this.filterList.bind(this,"orgs"),handleSelect:this.handleOrgSelection,errorMessage:this.state.errorOrg&&"Unable to load organizations",isLoading:this.state.loadingOrg,retryHandler:this.bootstrapCallToAzure})),this.state.showRepos&&o.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},o.createElement(c.default,{parentClassName:"api-repo-integration-configuration__select-repo",title:"Repository",selectedItem:this.state.selectedTargetRepo,disabled:this.state.disableRepoDropdown,filterList:this.filterList.bind(this,"repos"),handleSelect:this.handleRepoSelection,errorMessage:this.state.errorRepo&&"Unable to load repositories",isLoading:this.state.loadingRepo,retryHandler:this.handleOrgSelection,tooltip:this.state.disableRepoDropdown&&"Please select an organisation",placeholder:"Search for repository"})),this.state.showBranches&&o.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},o.createElement(c.default,{title:"Branch",selectedItem:this.state.selectedTargetBranch,disabled:this.state.disableBranchDropdown,filterList:this.filterList.bind(this,"branches"),handleSelect:this.handleBranchSelection,errorMessage:this.state.errorBranch&&"Unable to load branch list",isLoading:this.state.loadingBranch,retryHandler:this.handleRepoSelection,tooltip:this.state.disableBranchDropdown&&(this.state.errorBranch?"Unable to load branch list":"Please select a repository"),onChange:this.debouncedSearchBranches,onClear:this.debouncedSearchBranches,onBlur:m.isEmpty(this.state.repos)&&this.debouncedSearchBranches,placeholder:"Search for branch"})),o.createElement("div",{ref:this.scrollToBottom}))))))}}},"./js/containers/import/ImportByBitbucket.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/async/dist/async.js"),i=n.n(s),r=n("./js/components/base/Icons/WarningIcon.js"),a=n("./js/components/base/Avatar.js"),l=n("./integrations/constants/repository_actions.ts"),c=n("./api-dev/components/api-repo-integration/EntitySelectDropdown/EntitySelectDropdown.js"),d=n("./integrations/services/BitbucketService.js"),u=n("./integrations/git/services/RemoteGitService.ts"),p=n("./node_modules/lodash/lodash.js");class m extends o.Component{constructor(e){super(e),this.manualBranchInput=(0,o.createRef)(),this.state={authorizing:!1,buttonClicked:!0,showBranches:!1,showRepos:!1,errorMessage:void 0,showRetry:!0,disableRepoDropdown:!1,showManualInputDialogue:!0,loadingOrg:!1,loadingRepo:!1,loadingBranch:!1,workspaces:[],branches:[],repos:[],user:{username:"",links:{avatar:{href:""}}},showWorkspaces:!1,selectedTargetWorkspace:{id:"",name:""},selectedTargetRepo:{id:"",name:""},selectedTargetBranch:{id:"",name:""},repoSearchCache:{},branchSearchCache:{},searchedRepos:[]},this.scrollToBottom=(0,o.createRef)(),this.bootstrapCallToBitbucket=this.bootstrapCallToBitbucket.bind(this),this.handleButtonClick=this.handleButtonClick.bind(this),this.handleWorkspaceSelection=this.handleWorkspaceSelection.bind(this),this.handleRepoSelection=this.handleRepoSelection.bind(this),this.handleBranchSelection=this.handleBranchSelection.bind(this),this.getUserAvatar=this.getUserAvatar.bind(this),this.smoothScrollHandler=this.smoothScrollHandler.bind(this),this.searchRepositories=this.searchRepositories.bind(this),this.searchBranches=this.searchBranches.bind(this),this.debouncedSearchRepositories=p.debounce(this.searchRepositories,500),this.debouncedSearchBranches=p.debounce(this.searchBranches,500)}componentDidMount(){this.props.activeState&&this.props.store?this.setState(this.props.store):this.props.accessToken&&this.bootstrapCallToBitbucket()}smoothScrollHandler(){this.scrollToBottom.current.scrollIntoView({behavior:"smooth"})}handleButtonClick(){this.setState({buttonClicked:!0})}bootstrapCallToBitbucket(){this.setState({showOrgs:!0,loadingOrg:!0,showBranches:!1,showRepos:!1}),i().waterfall([e=>{d.default.fetchUserInfo({token:this.props.accessToken},((t,n)=>t||!n?e(t):(this.setState({user:n}),e(null))))},e=>{d.default.fetchWorkspaces({token:this.props.accessToken},((t,n)=>{if(t)return this.setState({loadingOrg:!1,errorOrg:!0,showRepos:!1,showBranches:!1}),e(t);try{var o=[];n.values.forEach((e=>{o.push({id:e.slug,name:e.name})})),this.setState({workspaces:o,loadingOrg:!1,errorWorkspaces:!1})}catch(e){this.setState({loadingOrg:!1,errorWorkspaces:!0})}}))}])}getUserAvatar(){let e=this.state.user;return e?e.links.avatar.href:null}handleWorkspaceSelection(e){e.id||e.name||(e=this.state.selectedTargetWorkspace),this.setState({selectedTargetWorkspace:e,showRepos:!0,loadingRepo:!0,showBranches:!1,errorBranch:!1,showManualInput:!1,errorRepo:!1,selectedTargetRepo:{name:"",id:""},repos:[]},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.props.handleAction(l.STOP_VERIFYING)})),d.default.fetchRepoList({token:this.props.accessToken,workspace_slug:e.id},((t,n)=>{if(t||p.isEmpty(n.values))return this.setState({loadingRepo:!1,errorRepo:!0,showRetry:!0,errorMessage:void 0,showManualInputDialogue:!1,disableRepoDropdown:!0,showBranches:!1}),p.isEmpty(n.values)&&!t&&this.setState({repoErrorMessage:"No repositories found under selected workspace.",showRetry:!1,disableRepoDropdown:!0}),pm.logger.warn("RepositoryContainer~handleOrgSelection: Error while getting repos.",t||"No repositories found"),null;var o=[];n.values.forEach((e=>{o.push({id:e.slug,name:e.name})})),this.setState({repos:o,loadingRepo:!1,selectedTargetWorkspace:e,errorMessage:void 0,showManualInputDialogue:!0,disableRepoDropdown:!1,showRetry:!0,errorRepo:!1})}))}handleRepoSelection(e,t){this.props.handleAction(l.DISABLE_WARNING,this.state),e.id||e.name||(e=this.state.selectedTargetRepo),this.setState({showBranches:!0,loadingBranch:!0,errorBranch:!1,selectedTargetBranch:{id:"",name:""},branches:[]}),t||this.setState({selectedTargetRepo:e,showManualInput:!1},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.props.handleAction(l.STOP_VERIFYING)})),d.default.fetchBranchForRepository({token:this.props.accessToken,workspace_slug:this.state.selectedTargetWorkspace.id,repo_slug:e.id},((e,t)=>{if(e||p.isEmpty(t.values))return this.setState({errorBranch:!0,loadingBranch:!1,disableBranchDropdown:!0,branches:[]}),pm.logger.warn("RepositoryContainer~handleRepoSelection: Error while getting branches.",e||"Empty branch list"),p.isEmpty(t.values)&&!e&&this.setState({branchErrorMessage:"No branches found.",disableBranchDropdown:!0}),null;try{let e=[];t.values.forEach((t=>{let n={name:t.name,id:t.name,hash:t.target.hash};e.push(n)})),this.setState({loadingBranch:!1,branches:e,showManualBranchInputDialogue:!0,disableBranchDropdown:!1,errorBranch:!1})}catch(t){return void pm.logger.warn("RepositoryContainer~handleRepoSelection: Error while getting branches.",e)}}))}handleBranchSelection(e){this.props.handleAction(l.DISABLE_WARNING,this.state),this.props.handleAction(l.STOP_VERIFYING),this.setState({selectedTargetBranch:e},(()=>{this.props.handleAction(l.BRANCH_SELECTED,this.state)}))}handleChangeManualBranchInput(e){this.setState({branchName:e},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.handleBranchSelectionDebounced({id:e,name:e},!0)}))}async searchRepositories(e){let{repoSearchCache:t,repos:n,selectedTargetWorkspace:o}=this.state,s=p.get(t,[o.id,e]);if(!p.isEmpty(e)&&p.isNil(s)){this.setState({loadingRepo:!0});try{const{tokenId:o}=this.props,{selectedTargetWorkspace:s}=this.state,{repositories:i}=await u.default.searchRepositories(o,s.id,e),r=p.map(i,(e=>p.pick(e,["id","name"])));p.set(t,[s.id,e],r),n=p.unionBy(n,r,"id"),this.setState({repos:n,repoSearchCache:t})}finally{this.setState({loadingRepo:!1})}}}async searchBranches(e){let{branchSearchCache:t,branches:n,selectedTargetWorkspace:o,selectedTargetRepo:s}=this.state,i=p.get(t,[o.id,s.id,e]);if(!p.isEmpty(e)&&p.isEmpty(i)){this.setState({loadingBranch:!0});try{const{tokenId:o}=this.props,{selectedTargetWorkspace:i}=this.state,{branches:r}=await u.default.searchBranches(o,i.id,s.id,e),a=p.map(r,(e=>({id:e.name,name:e.name,hash:e.commit})));p.set(t,[i.id,s.id,e],a),n=p.unionBy(n,a,"id"),this.setState({branches:n,branchSearchCache:t})}finally{this.setState({loadingBranch:!1})}}}filterList(e,t,{firstRender:n}={}){let o=this.state[e];if(!t||n)return o;return p.filter(o,(e=>e.name&&p.includes(e.name.toLowerCase(),t.toLowerCase())))}render(){var e=this.getUserAvatar();return o.createElement("div",{className:"import-via-code-repository-container"},o.createElement("div",null,!0===this.state.buttonClicked&&o.createElement("div",{className:"import-via-code-repository"},o.createElement("div",{className:"import-via-code-repository__content"},o.createElement("div",{className:"import-via-code-repository__content-title"},o.createElement("div",{className:"import-via-code-repository-user-info"},o.createElement("div",{className:"import-via-code-repository-user-info__username_title"}," Authenticated on Bitbucket as "),o.createElement(a.default,{className:"import-via-code-repository-user-info__avatar",size:"small",customPic:e}),o.createElement("div",{className:"import-via-code-repository-user-info__username"},this.state.user.display_name?this.state.user.display_name:this.state.user.username))),o.createElement("div",{className:"import-via-code-repository__line"}),this.props.showWarning&&o.createElement("div",{className:"import-via-code-repository__banner"},o.createElement("div",{className:"import-via-code-repository__banner__icon"},o.createElement(r.default,{size:"sm"})),o.createElement("div",{className:"import-via-code-repository__banner__message"},o.createElement("span",null,"Unable to find any files to import. Double check your repository and branch."))),o.createElement("div",{className:"import-via-code-repository__content-dropdown"},o.createElement("div",{className:"integrations-add-card__segment"},o.createElement(c.default,{parentClassName:"api-repo-integration-configuration__select-org",title:"Workspace",selectedItem:this.state.selectedTargetWorkspace,filterList:this.filterList.bind(this,"workspaces"),handleSelect:this.handleWorkspaceSelection,errorMessage:this.state.errorOrg&&"Unable to load workspaces",isLoading:this.state.loadingOrg,retryHandler:this.bootstrapCallToBitbucket})),this.state.showRepos&&o.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},o.createElement(c.default,{parentClassName:"api-repo-integration-configuration__select-repo",title:"Repository",selectedItem:this.state.selectedTargetRepo,disabled:this.state.disableRepoDropdown,filterList:this.filterList.bind(this,"repos"),handleSelect:this.handleRepoSelection,errorMessage:this.state.errorRepo&&(this.state.repoErrorMessage||"Unable to load repositories"),isLoading:this.state.loadingRepo,retryHandler:this.handleWorkspaceSelection,tooltip:this.state.disableRepoDropdown&&"Please select a workspace",onChange:this.debouncedSearchRepositories,onClear:this.debouncedSearchRepositories,onBlur:p.isEmpty(this.state.repos)&&this.debouncedSearchRepositories,placeholder:"Search for repository"})),this.state.showBranches&&o.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},o.createElement(c.default,{title:"Branch",selectedItem:this.state.selectedTargetBranch,disabled:this.state.disableBranchDropdown,filterList:this.filterList.bind(this,"branches"),handleSelect:this.handleBranchSelection,errorMessage:this.state.errorBranch&&(this.state.branchErrorMessage||"Unable to load branch list"),isLoading:this.state.loadingBranch,retryHandler:this.handleRepoSelection,onChange:this.debouncedSearchBranches,onClear:this.debouncedSearchBranches,onBlur:p.isEmpty(this.state.repos)&&this.debouncedSearchBranches,tooltip:this.state.disableBranchDropdown&&(this.state.errorBranch?this.state.branchErrorMessage||"Unable to load branch list":"Please select a repository"),placeholder:"Search for branch"})),o.createElement("div",{ref:this.scrollToBottom}))))))}}},"./js/containers/import/ImportByCodeRepositoryComponent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("./js/containers/import/ImportByBitbucket.js"),i=n("./js/containers/import/ImportByGithub.js"),r=n("./js/containers/import/ImportByGitlab.js"),a=n("./js/containers/import/ImportByAzure.js"),l=n("./js/constants/ImportFlowConstants.js");class c extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"import-via-code-repository-container"},this.props.selectedCodeRepoService===l.IMPORT_SERVICES.BITBUCKET&&o.createElement(s.default,{activeState:this.props.activeState,accessToken:this.props.accessToken,tokenId:this.props.tokenId,store:this.props.store,setAccessToken:this.props.setAccessToken,handleAction:this.props.handleAction,showWarning:this.props.showWarning}),this.props.selectedCodeRepoService===l.IMPORT_SERVICES.GITHUB&&o.createElement(i.default,{accessToken:this.props.accessToken,activeState:this.props.activeState,tokenId:this.props.tokenId,store:this.props.store,handleAction:this.props.handleAction,showWarning:this.props.showWarning}),this.props.selectedCodeRepoService===l.IMPORT_SERVICES.GITLAB&&o.createElement(r.default,{accessToken:this.props.accessToken,activeState:this.props.activeState,tokenId:this.props.tokenId,store:this.props.store,handleAction:this.props.handleAction,showWarning:this.props.showWarning}),this.props.selectedCodeRepoService===l.IMPORT_SERVICES.AZURE&&o.createElement(a.default,{accessToken:this.props.accessToken,activeState:this.props.activeState,tokenId:this.props.tokenId,store:this.props.store,handleAction:this.props.handleAction,showWarning:this.props.showWarning}))}}},"./js/containers/import/ImportByCodeRepositoryContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./integrations/components/CodeRepository/CodeRepositorySelectionPanel.js"),i=n("./js/services/NavigationService.js"),r=n("./integrations/services/OAuthService.js"),a=n("./js/modules/services/AnalyticsService.js"),l=n("../../packages/api-design/api-design-analytics/index.js"),c=n("./node_modules/lodash/lodash.js");class d extends o.Component{constructor(e){super(e),this.state={authorizing:!1,sessionId:null,stopConnection:!1,selectedService:""},this.handleAuthorization=this.handleAuthorization.bind(this),this.pollForToken=this.pollForToken.bind(this),this.handleStopConnection=this.handleStopConnection.bind(this)}handleStopConnection(){(0,l.logApiDesignAnalytics)({category:c.get(this.props,"isCreateDefinitionFlow",!1)?l.EVENT_CATEGORIES.CREATE_API_DEFINITION:l.EVENT_CATEGORIES.IMPORT,action:l.EVENT_ACTIONS.IMPORT_MODAL_STOP_REPO_AUTH_CLICK,entityId:c.get(this.props,"isCreateDefinitionFlow",!1)?c.get(this.props,"apiId"):void 0,entityType:c.get(this.props,"isCreateDefinitionFlow",!1)?l.EVENT_ENTITY_TYPES.API:void 0}),this.setState({stopConnection:!0,authorizing:!1},(()=>{this.props.onAuthorization&&this.props.onAuthorization(this.state.authorizing)}))}handleAuthorization(e){this.props.disableCodeRepoSelection?pm.toasts.error("You can take this action once you’re back online.",{noIcon:!0}):("new_api"===this.props.origin&&a.default.addEventV2({category:"api",action:"init_import",label:"import_from_code_repo",value:1}),this.setState({authorizing:!0,selectedService:e},(()=>{this.props.onAuthorization&&this.props.onAuthorization(this.state.authorizing)})),"import"===this.props.origin&&a.default.addEvent("import","import_by_repository",e+"_auth_init",1),r.default.initiateAuthorization(e).then((t=>{let n,o=t.body;200!==t.status?(this.setState({authorizing:!1},(()=>{this.props.onAuthorization&&this.props.onAuthorization(this.state.authorizing)})),pm.logger.warn("ImportByCodeRepositoryContainer~handleAuthorization: Something went wrong while opening authorization")):(n=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${o.sessionId}`,i.default.openURL(n,{target:"_blank"}),this.setState({sessionId:o.sessionId},(()=>{this.pollForToken(e)})))})).catch((e=>{pm.logger.warn("ImportByCodeRepositoryContainer~handleAuthorization: Something went wrong while opening authorization"),this.setState({authorizing:!1},(()=>{this.props.onAuthorization&&this.props.onAuthorization(this.state.authorizing)}))})))}pollForToken(e){let t=0,n=this.state.sessionId;if(!n)return void pm.logger.warn("ImportByCodeRepositoryContainer~pollForToken: sessionId is required.");const o=async(s,i)=>(t++,this.state.sessionId?this.state.stopConnection?(this.setState({stopConnection:!1}),s("Connection stopped")):void r.default.getSession(n).then((n=>{let r=n.body;if(!r.token||c.isEmpty(r.token))setTimeout(o,2e3,s,i);else{if(r.error)return pm.logger.warn("ImportByCodeRepositoryContainer: Error while getting a session for the user",r.error),i(new Error("Error while getting a session for the user"));if(50===t)return this.setState({authorizing:!1},(()=>{this.props.onAuthorization&&this.props.onAuthorization(this.state.authorizing)})),i(new Error("Exceeded max attempts"));if(r.token)return this.props.handleToken(r.token,e),"import"===this.props.origin&&a.default.addEvent("import","import_by_repository",e+"_auth_complete",1),s(e+" session.")}})).catch((e=>{if(e.error)return pm.logger.warn("ImportByCodeRepositoryContainer: Error while getting a session for the user"),i(e.error)})):i());return new Promise(o)}componentDidMount(){this.props.codeRepoSelected&&this.props.codeRepoSelected()}render(){return o.createElement("div",{className:"import-via-code-repository-container"},o.createElement("div",null,o.createElement(s.default,{connecting:this.state.authorizing,handleConnect:this.handleAuthorization,handleStop:this.handleStopConnection,handleCancel:this.props.handleCancel,selectedService:this.state.selectedService,isCreateDefinitionFlow:this.props.isCreateDefinitionFlow,apiId:this.props.apiId})))}}d.defaultProps={origin:"import"}},"./js/containers/import/ImportByFileContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/import/ImportByFile.js"),i=n("./js/modules/services/AnalyticsService.js"),r=n("./appsdk/components/link/Link.js"),a=(n("./js/services/conversion/promisifiedConverter.js"),n("../../packages/api-design/api-design-analytics/index.js")),l=n("./node_modules/lodash/lodash.js");const c="https://go.pstmn.io/supported-import-formats";class d extends o.Component{constructor(e){super(e),this.handleOnDropFiles=this.handleOnDropFiles.bind(this)}handleOnDropFiles(e){this.props.onDropFiles&&this.props.onDropFiles(e,{origin:"import/file"})}render(){const e=l.get(this.props,"isCreateDefinitionFlow",!1),t=l.get(this.props,"apiId");return o.createElement("div",{className:"import-by-file-container"},o.createElement(s.default,{onDropFile:this.handleOnDropFiles,isCreateDefinitionFlow:e,apiId:t}),o.createElement("div",{className:"import-by-file-text"},o.createElement(r.default,{to:c,target:"_blank",onClick:()=>{i.default.addEventV2({category:"import",action:"learn_more",label:"docs",value:1}),(0,a.logApiDesignAnalytics)({category:e?a.EVENT_CATEGORIES.CREATE_API_DEFINITION:a.EVENT_CATEGORIES.IMPORT,action:a.EVENT_ACTIONS.LEARN_MORE_DOCS,label:`file_tab||${c}`,entityId:e?t:void 0,entityType:e?a.EVENT_ENTITY_TYPES.API:void 0})}},o.createElement("span",{className:"import-by-file-text-link"},"Learn more"))," about the different import formats supported"))}}},"./js/containers/import/ImportByFolderContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/import/ImportByFolder.js"),i=(n("./js/services/conversion/promisifiedConverter.js"),n("./js/modules/services/AnalyticsService.js"),n("../../node_modules/console-browserify/index.js")),r=n("./node_modules/lodash/lodash.js"),a=n("fs");class l extends o.Component{constructor(e){super(e),this.handleDropFolder=this.handleDropFolder.bind(this)}isHidden(e){return/^\..*|^\/\.|.*\/\..*/g.test(e)}simpleElectronFileProcessor(e){return{content:n("fs").readFileSync(e,"utf8"),name:e}}processFolderRecursivelyForElectron(e){var t=[],o=n("fs"),s=n("path");try{return o.readdirSync(e).map((n=>{let i=s.join(e,n),r=o.statSync(i);r&&r.isDirectory()?t=t.concat(this.processFolderRecursivelyForElectron(i)):this.isHidden(i)||t.push(this.simpleElectronFileProcessor(i))})),t}catch(e){return i.log(e),[]}}handleDropFolder(e){let t=[];if("browser"===window.SDK_PLATFORM)this.props.onDropFolder&&this.props.onDropFolder(e);else{if(e[0].getAsFile)t=this.processFolderRecursivelyForElectron(e[0].getAsFile().path);else try{a.statSync(e[0].path).isFile()?r.forEach(e,(e=>{this.isHidden(e.path)||t.push(this.simpleElectronFileProcessor(e.path))})):t=this.processFolderRecursivelyForElectron(e[0].path)}catch(e){i.log(e),t=[]}this.props.onDropFolder&&this.props.onDropFolder(t)}}render(){const e=r.get(this.props,"isCreateDefinitionFlow",!1),t=r.get(this.props,"apiId");return o.createElement("div",{className:"import-by-folder-container"},o.createElement(s.default,{onDropFolder:this.handleDropFolder,isCreateDefinitionFlow:e,apiId:t}))}}},"./js/containers/import/ImportByGithub.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("./node_modules/async/dist/async.js"),s=n.n(o),i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Icons/WarningIcon.js"),a=n("./js/components/base/Avatar.js"),l=n("./api-dev/components/api-repo-integration/EntitySelectDropdown/EntitySelectDropdown.js"),c=n("./integrations/constants/repository_actions.ts"),d=n("./integrations/services/GithubService.js"),u=n("./integrations/git/services/RemoteGitService.ts"),p=n("./node_modules/lodash/lodash.js");class m extends i.Component{constructor(e){super(e),this.manualBranchInput=(0,i.createRef)(),this.state={authorizing:!1,accessToken:null,showBranches:!1,showRepos:!1,showFiles:!0,userOrgs:[],errorMessage:void 0,showRetry:!0,disableRepoDropdown:!1,showManualInputDialogue:!0,loadingOrg:!1,loadingRepo:!1,loadingBranch:!1,user:{username:""},showOrgs:!1,selectedTargetOrg:{id:"",name:""},githubFiles:[],selectedTargetRepo:{id:"",name:""},selectedTargetBranch:{id:"",name:""},branches:[],repos:[],repoSearchCache:{},branchSearchCache:{},searchedRepos:[],sessionId:null},this.scrollToBottom=(0,i.createRef)(),this.bootstrapCallToGithub=this.bootstrapCallToGithub.bind(this),this.handleBranchSelection=this.handleBranchSelection.bind(this),this.handleRepoSelection=this.handleRepoSelection.bind(this),this.handleOrgSelection=this.handleOrgSelection.bind(this),this.smoothScrollHandler=this.smoothScrollHandler.bind(this),this.searchRepositories=this.searchRepositories.bind(this),this.searchBranches=this.searchBranches.bind(this),this.debouncedSearchRepositories=p.debounce(this.searchRepositories,500),this.debouncedSearchBranches=p.debounce(this.searchBranches,500)}componentDidMount(){this.props.activeState&&this.props.store?this.setState(this.props.store):this.props.accessToken&&this.bootstrapCallToGithub()}smoothScrollHandler(){this.scrollToBottom.current.scrollIntoView({behavior:"smooth"})}bootstrapCallToGithub(){s().waterfall([e=>{d.default.getUserInfo({token:this.props.accessToken},((t,n)=>t||!n?e(t||"No user found"):(this.setState({user:n}),e(null))))},e=>{this.setState({showOrgs:!0,loadingOrg:!0}),d.default.getOrgs({owner:this.state.user.username,token:this.props.accessToken},((t,n)=>{if(t)return this.setState({showOrgs:!0,errorOrg:!0,showRepos:!1,showBranches:!1}),e(t||"Empty response received");try{var o=[];return n.forEach((e=>{o.push({id:e.login,name:e.login})})),o.push({id:this.state.user.username,name:this.state.user.username}),this.setState({userOrgs:o,loadingOrg:!1,errorOrg:!1}),e(null)}catch(t){return this.setState({showOrgs:!0,loadingOrg:!1,errorOrg:!0}),e(t)}}))}],(e=>{e&&(this.setState({showOrgs:!0,loadingOrg:!1,errorOrg:!0}),pm.toasts.error("Error occurred while fetching user info from GitHub"))}))}handleOrgSelection(e){e.id||e.name||(e=this.state.selectedTargetOrg),this.setState({selectedTargetOrg:e,showRepos:!0,errorRepo:!1,showBranches:!1,loadingRepo:!0,selectedTargetRepo:{id:"",name:""},repos:[]},(()=>{this.props.handleAction(c.DISABLE_CONTINUE),this.props.handleAction(c.STOP_VERIFYING)})),e.id===this.state.user.username?d.default.getReposForUser({owner:e.id,token:this.props.accessToken},((t,n)=>{if(t||p.isEmpty(n))return this.setState({errorRepo:!0,showRetry:!0,loadingRepo:!1,showBranches:!1,errorMessage:void 0,showManualInputDialogue:!1,disableRepoDropdown:!0}),pm.logger.warn("RepositoryContainer~handleOrgSelection: Error while getting repos.",t||"No repositories found"),p.isEmpty(n)&&!t&&this.setState({repoErrorMessage:"No repositories found under selected organization.",showRetry:!1,disableRepoDropdown:!0}),null;var o=[];n.forEach((e=>{o.push({id:e.name,name:e.name})})),this.setState({repos:o,loadingRepo:!1,selectedTargetOrg:e,errorMessage:void 0,errorRepo:!1,showBranches:!1,errorBranch:!1,showManualInput:!1,showManualInputDialogue:!0,disableRepoDropdown:!1,showRetry:!0})})):d.default.getReposForOrg({org:e.id,token:this.props.accessToken},((t,n)=>{var o=[];if(t||p.isEmpty(n))return this.setState({loadingRepo:!1,errorRepo:!0,showRetry:!0,showManualInputDialogue:!1,errorMessage:void 0,disableRepoDropdown:!0,showBranches:!1,repos:o}),pm.logger.warn("RepositoryContainer~handleOrgSelection: Error while getting repos.",t||"No repositories found"),p.isEmpty(n)&&!t&&this.setState({repoErrorMessage:"No repositories found under selected organization.",showRetry:!1,disableRepoDropdown:!0}),null;n.forEach((e=>{o.push({id:e.name,name:e.name})})),this.setState({repos:o,loadingRepo:!1,errorRepo:!1,showRetry:!0,showManualInputDialogue:!0,errorMessage:void 0,disableRepoDropdown:!1,selectedTargetOrg:e})}))}handleRepoSelection(e,t){this.props.handleAction(c.DISABLE_WARNING,this.state),e.id||e.name||(e=this.state.selectedTargetRepo),this.setState({showBranches:!0,loadingBranch:!0,errorBranch:!1,selectedTargetBranch:{id:"",name:""}}),t||this.setState({selectedTargetRepo:e,showManualInput:!1},(()=>{this.props.handleAction(c.DISABLE_CONTINUE),this.props.handleAction(c.STOP_VERIFYING)})),d.default.getBranches({owner:this.state.selectedTargetOrg.id,repo:e.id,token:this.props.accessToken},((e,t)=>{if(e||p.isEmpty(t))return this.setState({errorBranch:!0,loadingBranch:!1,disableBranchDropdown:!0,branches:[]}),pm.logger.warn("RepositoryContainer~handleRepoSelection: Error while getting branches.",e||"Empty branch list"),p.isEmpty(t)&&!e&&this.setState({branchErrorMessage:"No branches found.",disableBranchDropdown:!0}),null;try{var n=[];t.forEach((e=>{let t={id:p.get(e,"name",""),name:p.get(e,"name","")};n.push(t)})),this.setState({loadingBranch:!1,branches:n,errorBranch:!1,showManualBranchInputDialogue:!0,disableBranchDropdown:!1})}catch(e){return void pm.logger.warn("RepositoryContainer~handleRepoSelection: Error while getting branches.",e)}}))}handleBranchSelection(e,t){t||this.setState({selectedTargetBranch:e,showManualBranchInput:!1}),this.props.handleAction(c.DISABLE_WARNING,this.state),this.props.handleAction(c.STOP_VERIFYING),this.setState({selectedTargetBranch:e},(()=>{this.props.handleAction(c.BRANCH_SELECTED,this.state)}))}getUserAvatar(){let e=this.state.user;return e?e.avatar:null}async searchRepositories(e){let{repoSearchCache:t,repos:n,selectedTargetOrg:o}=this.state,s=p.get(t,[o.id,e]);if(!p.isEmpty(e)&&p.isNil(s)){this.setState({loadingRepo:!0});try{const{tokenId:o}=this.props,{selectedTargetOrg:s}=this.state,{repositories:i}=await u.default.searchRepositories(o,s.id,e),r=p.map(i,(e=>p.pick(e,["id","name"])));p.set(t,[s.id,e],r),n=p.unionBy(n,r,"id"),this.setState({repos:n,repoSearchCache:t})}finally{this.setState({loadingRepo:!1})}}}async searchBranches(e){let{branchSearchCache:t,branches:n,selectedTargetOrg:o,selectedTargetRepo:s}=this.state,i=p.get(t,[o.id,s.id,e]);if(!p.isEmpty(e)&&p.isEmpty(i)){this.setState({loadingBranch:!0});try{const{tokenId:o}=this.props,{selectedTargetOrg:i}=this.state,{branches:r}=await u.default.searchBranches(o,i.id,s.id,e),a=p.map(r,(e=>({id:e.name,name:e.name})));p.set(t,[i.id,s.id,e],a),n=p.unionBy(n,a,"id"),this.setState({branches:n,branchSearchCache:t})}finally{this.setState({loadingBranch:!1})}}}filterList(e,t,{firstRender:n}={}){let o=this.state[e];if(!t||n)return o;return p.filter(o,(e=>e.name&&p.includes(e.name.toLowerCase(),t.toLowerCase())))}render(){var e=this.getUserAvatar();return i.createElement("div",{className:"import-via-code-repository-container"},i.createElement("div",{className:"import-via-code-repository"},i.createElement("div",{className:"import-via-code-repository__content"},i.createElement("div",{className:"import-via-code-repository__content-title"},i.createElement("div",{className:"import-via-code-repository-user-info"},i.createElement("div",{className:"import-via-code-repository-user-info__username_title"}," Authenticated on GitHub as "),i.createElement(a.default,{className:"import-via-code-repository-user-info__avatar",size:"small",customPic:e}),i.createElement("div",{className:"import-via-code-repository-user-info__username"},this.state.user.display_name?this.state.user.display_name:this.state.user.username))),i.createElement("div",{className:"import-via-code-repository__line"}),this.props.showWarning&&i.createElement("div",{className:"import-via-code-repository__banner"},i.createElement("div",{className:"import-via-code-repository__banner__icon"},i.createElement(r.default,{size:"sm"})),i.createElement("div",{className:"import-via-code-repository__banner__message"},i.createElement("span",null,"Unable to find any files to import. Double check your repository and branch."))),i.createElement("div",{className:"import-via-code-repository__content-dropdown"},i.createElement("div",{className:"integrations-add-card__segment"},i.createElement(l.default,{parentClassName:"api-repo-integration-configuration__select-org",title:"Organization",selectedItem:this.state.selectedTargetOrg,filterList:this.filterList.bind(this,"userOrgs"),handleSelect:this.handleOrgSelection,errorMessage:this.state.errorOrg&&"Unable to load organizations",isLoading:this.state.loadingOrg,retryHandler:this.bootstrapCallToGithub})),this.state.showRepos&&i.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},i.createElement(l.default,{parentClassName:"api-repo-integration-configuration__select-repo",title:"Repository",selectedItem:this.state.selectedTargetRepo,disabled:this.state.disableRepoDropdown,filterList:this.filterList.bind(this,"repos"),handleSelect:this.handleRepoSelection,errorMessage:this.state.errorRepo&&(this.state.repoErrorMessage||"Unable to load repositories"),isLoading:this.state.loadingRepo,retryHandler:this.handleOrgSelection,tooltip:this.state.disableRepoDropdown&&"Please select an organisation",onChange:this.debouncedSearchRepositories,onClear:this.debouncedSearchRepositories,onBlur:p.isEmpty(this.state.repos)&&this.debouncedSearchRepositories,placeholder:"Search for repository"})),this.state.showBranches&&i.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},i.createElement(l.default,{title:"Branch",selectedItem:this.state.selectedTargetBranch,disabled:this.state.disableBranchDropdown,filterList:this.filterList.bind(this,"branches"),handleSelect:this.handleBranchSelection,errorMessage:this.state.errorBranch&&(this.state.branchErrorMessage||"Unable to load branch list"),isLoading:this.state.loadingBranch,retryHandler:this.handleRepoSelection,onChange:this.debouncedSearchBranches,onClear:this.debouncedSearchBranches,onBlur:p.isEmpty(this.state.repos)&&this.debouncedSearchBranches,tooltip:this.state.disableBranchDropdown&&(this.state.errorBranch?this.state.branchErrorMessage||"Unable to load branch list":"Please select a repository"),placeholder:"Search for branch"})),i.createElement("div",{ref:this.scrollToBottom})))))}}},"./js/containers/import/ImportByGitlab.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/async/dist/async.js"),i=n.n(s),r=n("./js/components/base/Icons/WarningIcon.js"),a=n("./js/components/base/Avatar.js"),l=n("./integrations/constants/repository_actions.ts"),c=n("./api-dev/components/api-repo-integration/EntitySelectDropdown/EntitySelectDropdown.js"),d=n("./js/constants/ImportFlowConstants.js"),u=n("./integrations/services/GitlabService.js"),p=n("./integrations/git/services/RemoteGitService.ts"),m=n("./node_modules/lodash/lodash.js");class h extends o.Component{constructor(e){super(e),this.manualBranchInput=(0,o.createRef)(),this.state={showBranches:!1,showProjects:!1,disableProjectDropdown:!1,loadingGroup:!1,loadingProject:!1,loadingBranch:!1,groups:[],branches:[],projects:[],user:{username:"",links:{avatar:{href:""}}},showGroups:!1,selectedTargetGroup:d.DEFAULT_SELECTED_STATE,selectedTargetProject:d.DEFAULT_SELECTED_STATE,selectedTargetBranch:d.DEFAULT_SELECTED_STATE,projectSearchCache:{},branchSearchCache:{}},this.scrollToBottom=(0,o.createRef)(),this.bootstrapCallToGitlab=this.bootstrapCallToGitlab.bind(this),this.handleGroupSelection=this.handleGroupSelection.bind(this),this.handleProjectSelection=this.handleProjectSelection.bind(this),this.handleBranchSelection=this.handleBranchSelection.bind(this),this.getUserAvatar=this.getUserAvatar.bind(this),this.smoothScrollHandler=this.smoothScrollHandler.bind(this),this.searchProjects=this.searchProjects.bind(this),this.searchBranches=this.searchBranches.bind(this),this.debouncedSearchProjects=m.debounce(this.searchProjects,500),this.debouncedSearchBranches=m.debounce(this.searchBranches,500)}componentDidMount(){this.props.activeState&&this.props.store?this.setState(this.props.store):this.props.accessToken&&this.bootstrapCallToGitlab()}smoothScrollHandler(){this.scrollToBottom.current.scrollIntoView({behavior:"smooth"})}bootstrapCallToGitlab(){this.setState({showGroups:!0,loadingGroup:!0,showBranches:!1,showProjects:!1}),i().waterfall([e=>{const t={accessToken:this.props.accessToken};u.default.getUser(t,((t,n)=>t?e(t):(this.setState({user:n}),e(null,n))))},(e,t)=>{const n={accessToken:this.props.accessToken,userId:m.get(e,"id"),userName:m.get(e,"name")};u.default.getUserOrgs(n,((n,o)=>{if(n)return this.setState({loadingGroup:!1,errorGroup:!0,showProjects:!1,showBranches:!1}),t(n);let s=[];return m.each(o,(e=>{s.push({id:e.id,name:e.name})})),this.setState({fetchedOrgs:o,username:m.get(e,"username"),groups:s,loadingGroup:!1,errorGroups:!1}),t()}))}],(e=>{e&&this.setState({showGroups:!0,loadingGroup:!1,errorGroup:!0})}))}getUserAvatar(){return m.get(this.state,"user.avatar_url",null)}handleGroupSelection(e={}){e.id||e.name||(e=this.state.selectedTargetGroup);const{fetchedOrgs:t}=this.state;let n;m.each(t,(t=>{if(m.get(t,"id")===m.get(e,"id"))return n=m.get(t,"kind"),!1})),this.setState({selectedTargetGroup:e,showProjects:!0,loadingProject:!0,showBranches:!1,errorBranch:!1,showManualInput:!1,errorProject:!1,selectedTargetProject:d.DEFAULT_SELECTED_STATE,projects:[],orgType:n},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.props.handleAction(l.STOP_VERIFYING)}));const o={accessToken:this.props.accessToken,orgId:m.get(e,"id"),orgName:this.state.username,orgType:n,fetchedOrgs:this.state.fetchedOrgs};u.default.getRepositories(o,((t,n)=>{if(t)return this.setState({loadingProject:!1,errorProject:!0,disableProjectDropdown:!0,showManualInputDialogue:!1,showBranches:!1}),void pm.logger.warn("RepositoryContainer~handleOrgSelection: Error while getting projects.",t||"No projects found");let o=[];m.each(n,(e=>{o.push({id:e.id,name:e.name})})),this.setState({projects:o,loadingProject:!1,selectedTargetGroup:e,showManualInputDialogue:!0,disableProjectDropdown:!1,showRetry:!0,errorProject:!1})}))}handleProjectSelection(e={},t){e.id||e.name||(e=this.state.selectedTargetProject),this.props.handleAction(l.DISABLE_WARNING,this.state),this.setState({showBranches:!0,loadingBranch:!0,errorBranch:!1,selectedTargetBranch:d.DEFAULT_SELECTED_STATE,branches:[]}),t||this.setState({selectedTargetProject:e,showManualInput:!1},(()=>{this.props.handleAction(l.DISABLE_CONTINUE),this.props.handleAction(l.STOP_VERIFYING)}));const n={accessToken:this.props.accessToken,projectId:m.get(e,"id")};u.default.getRepositoryBranches(n,((e,t)=>{if(e)return this.setState({errorBranch:!0,loadingBranch:!1,branches:[],disableBranchDropdown:!0}),void pm.logger.warn("RepositoryContainer~handleRepoSelection: Error while getting branches.",e||"Empty branch list");let n=[];m.each(t,(e=>{let t={name:m.get(e,"name"),id:m.get(e,"name"),hash:m.get(e,"commit")};n.push(t)})),this.setState({loadingBranch:!1,branches:n,showManualBranchInputDialogue:!0,disableBranchDropdown:!1,errorBranch:!1})}))}handleBranchSelection(e){this.props.handleAction(l.DISABLE_WARNING,this.state),this.props.handleAction(l.STOP_VERIFYING),this.setState({selectedTargetBranch:e},(()=>{this.props.handleAction(l.BRANCH_SELECTED,this.state)}))}handleChangeManualBranchInput(e){this.setState({branchName:e},(()=>{this.props.handleAction(l.DISABLE_CONTINUE)}))}async searchProjects(e){let{projectSearchCache:t,projects:n,selectedTargetGroup:o}=this.state,s=m.get(t,[o.id,e]);if(!m.isEmpty(e)&&m.isNil(s)){this.setState({loadingProject:!0});try{const{tokenId:o}=this.props,{selectedTargetGroup:s}=this.state,{repositories:i}=await p.default.searchRepositories(o,s.id,e),r=m.map(i,(e=>m.pick(e,["id","name"])));m.set(t,[s.id,e],r),n=m.unionBy(n,r,"id"),this.setState({projects:n,projectSearchCache:t})}finally{this.setState({loadingProject:!1})}}}async searchBranches(e){let{branchSearchCache:t,branches:n,selectedTargetGroup:o,selectedTargetProject:s}=this.state,i=m.get(t,[o.id,s.id,e]);if(!m.isEmpty(e)&&m.isEmpty(i)){this.setState({loadingBranch:!0});try{const{tokenId:o}=this.props,{selectedTargetGroup:i}=this.state,{branches:r}=await p.default.searchBranches(o,i.id,s.id,e),a=m.map(r,(e=>({id:e.name,name:e.name,hash:e.commit})));m.set(t,[i.id,s.id,e],a),n=m.unionBy(n,a,"id"),this.setState({branches:n,branchSearchCache:t})}finally{this.setState({loadingBranch:!1})}}}filterList(e,t,{firstRender:n}={}){let o=this.state[e];if(!t||n)return o;return m.filter(o,(e=>e.name&&m.includes(e.name.toLowerCase(),t.toLowerCase())))}render(){let e=this.getUserAvatar();return o.createElement("div",{className:"import-via-code-repository-container"},o.createElement("div",null,o.createElement("div",{className:"import-via-code-repository"},o.createElement("div",{className:"import-via-code-repository__content"},o.createElement("div",{className:"import-via-code-repository__content-title"},o.createElement("div",{className:"import-via-code-repository-user-info"},o.createElement("div",{className:"import-via-code-repository-user-info__username_title"}," Authenticated on GitLab as "),o.createElement(a.default,{className:"import-via-code-repository-user-info__avatar",size:"small",customPic:e}),o.createElement("div",{className:"import-via-code-repository-user-info__username"},this.state.user.name?this.state.user.name:this.state.user.username))),o.createElement("div",{className:"import-via-code-repository__line"}),this.props.showWarning&&o.createElement("div",{className:"import-via-code-repository__banner"},o.createElement("div",{className:"import-via-code-repository__banner__icon"},o.createElement(r.default,{size:"sm"})),o.createElement("div",{className:"import-via-code-repository__banner__message"},o.createElement("span",null,"Unable to find any files to import. Double check your repository and branch."))),o.createElement("div",{className:"import-via-code-repository__content-dropdown"},this.state.showGroups&&o.createElement("div",{className:"integrations-add-card__segment"},o.createElement(c.default,{parentClassName:"api-repo-integration-configuration__select-org",title:"Organization",selectedItem:this.state.selectedTargetGroup,filterList:this.filterList.bind(this,"groups"),handleSelect:this.handleGroupSelection,errorMessage:this.state.errorGroup&&"Unable to load groups.",isLoading:this.state.loadingGroup,retryHandler:this.bootstrapCallToGitlab})),this.state.showProjects&&o.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},o.createElement(c.default,{parentClassName:"api-repo-integration-configuration__select-repo",title:"Project",selectedItem:this.state.selectedTargetProject,disabled:this.state.disableProjectDropdown,filterList:this.filterList.bind(this,"projects"),handleSelect:this.handleProjectSelection,errorMessage:this.state.errorProject&&"Unable to load projects",isLoading:this.state.loadingProject,retryHandler:this.handleGroupSelection,tooltip:this.state.disableProjectDropdown&&"Please select a group",onChange:this.debouncedSearchProjects,onClear:this.debouncedSearchProjects,onBlur:m.isEmpty(this.state.projects)&&this.debouncedSearchProjects,placeholder:"Search for project"})),this.state.showBranches&&o.createElement("div",{className:"integrations-add-card__segment",onClick:this.smoothScrollHandler},o.createElement(c.default,{title:"Branch",selectedItem:this.state.selectedTargetBranch,disabled:this.state.disableBranchDropdown,filterList:this.filterList.bind(this,"branches"),handleSelect:this.handleBranchSelection,errorMessage:this.state.errorBranch&&"Unable to load branches",isLoading:this.state.loadingBranch,retryHandler:this.handleProjectSelection,onChange:this.debouncedSearchBranches,onClear:this.debouncedSearchBranches,onBlur:m.isEmpty(this.state.repos)&&this.debouncedSearchBranches,tooltip:this.state.disableBranchDropdown&&(this.state.errorBranch?"Unable to load branch list":"Please select a repository"),placeholder:"Search for branch"}))),o.createElement("div",{ref:this.scrollToBottom})))))}}},"./js/containers/import/ImportByRawTextContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/import/ImportByRawText.js");class i extends o.Component{constructor(e){super(e),this.handleTextChange=this.handleTextChange.bind(this)}handleTextChange(e){this.props.onTextChange&&this.props.onTextChange(e)}render(){return o.createElement("div",{className:"import-by-text-container"},o.createElement(s.default,{onTextChange:this.handleTextChange}))}}},"./js/containers/import/ImportByUrlContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/import/ImportByUrl.js"),i=n("./js/services/conversion/promisifiedConverter.js"),r=n("./node_modules/lodash/lodash.js");class a extends o.Component{constructor(e){super(e),this.state={url:""},this.handleUrlChange=this.handleUrlChange.bind(this),this.handleContinue=this.handleContinue.bind(this)}handleUrlChange(e){this.setState({url:e})}handleContinue(){this.props.showLoader()&&this.props.showLoader();let e=this.state.url;r.isString(e)&&(e.startsWith("http://")||e.startsWith("https://")||(e="http://"+e)),(0,i.default)().then((t=>{t.parseUrlData(e).then((t=>{this.props.onContinue&&this.props.onContinue(t,{origin:"import/link",link:e})}))})).catch((e=>{pm.logger.warn("Error while loading converter",e),pm.toasts.error("Error while fetching data from link."),this.props.onContinue&&this.props.onContinue(null,{})}))}render(){const e=r.get(this.props,"isCreateDefinitionFlow",!1),t=r.get(this.props,"apiId");return o.createElement("div",{className:"import-by-url-container"},o.createElement(s.default,{onUrlChange:this.handleUrlChange,onContinue:this.handleContinue,isCreateDefinitionFlow:e,apiId:t}))}}},"./js/containers/import/ImportContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ce}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/import/ImportTabs.js"),r=n("./js/components/import/ImportTabContents.js"),a=n("./js/components/import/ImportTabContent.js"),l=n("./js/containers/import/ImportByFileContainer.js"),c=n("./js/containers/import/ImportByFolderContainer.js"),d=n("./js/containers/import/ImportByRawTextContainer.js"),u=n("./js/containers/import/ImportByUrlContainer.js"),p=n("./js/containers/import/ImportByCodeRepositoryContainer.js"),m=n("./js/containers/import/ImportByApiGatewayContainer.js"),h=n("./js/containers/import/ImportByCodeRepositoryComponent.js"),g=n("./node_modules/async/dist/async.js"),f=n.n(g),b=n("./node_modules/uuid/v4.js"),y=n.n(b),v=n("./js/modules/services/AnalyticsService.js"),I=n("./api-dev/services/APIDevService.js"),_=n("./js/services/NavigationService.js"),E=n("./js/components/import/ImportFilesAndOptions.js"),S=n("./js/components/import/ImportFilesBanner.js"),C=n("./js/components/import/ImportSensitiveVariableBanner.js"),T=n("./js/constants/ImportTypeConstants.js"),A=n("./js/components/base/Buttons.js"),j=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),w=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),O=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),N=n("./js/components/base/LoadingIndicator.js"),R=n("./js/controllers/Importer.js"),P=n("./js/services/conversion/convertData.js"),D=n("./js/services/conversion/importFolder.js"),M=n("./js/services/conversion/formats/parse.js"),x=n("./js/stores/ActiveWorkspaceStore.js"),L=n("./js/stores/SyncStatusStore.js"),k=n("./js/stores/StoreManager.js"),F=n("./js/stores/CurrentUserStore.js"),B=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),U=n("./integrations/constants/repository_actions.ts"),V=n("./js/modules/controllers/CurrentUserController.js"),G=n("./js/components/base/Icons/WarningIcon.js"),z=n("./api-dev/util/getConfigurationOptions.js"),H=n("../../packages/api-design/import/index.js"),W=n("../../packages/api-design/api-definition-store/index.js"),q=n("./growth/foundation/public/amplitude/AmplitudeService.js"),K=n("./integrations/services/AzureService.js"),$=n("./integrations/services/GithubService.js"),Y=n("./integrations/services/GitlabService.js"),J=n("./integrations/services/BitbucketService.js"),X=n("./integrations/services/RepositoryService.js"),Q=n("../../packages/api-design/schema-editor/index.js"),Z=n("./integrations/navigation/constants.js"),ee=n("./js/constants/ImportFlowConstants.js"),te=n("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),ne=n("../../packages/api-design/api-design-analytics/index.js"),oe=n("./node_modules/lodash/lodash.js");const se={openapi3_1:"openapi3_1",openapi3:"openapi3",raml:"raml",swagger1:"openapi1",swagger2:"openapi2",graphql:"graphql","raml1.0":"raml1",wsdl2:"wsdl2",wsdl1:"wsdl1",proto3:"proto3",proto2:"proto2"},ie="selectInput",re="filesAndOptions",ae="repositoryDetails",le={type:"primary",text:"Import"};let ce=(0,B.observer)(o=class extends s.Component{constructor(e){super(e),this.shouldSilentToasts=e=>!!oe.find(e,(e=>e.enabled&&"API"===e.importAsFormats)),this.state={activeTab:T.IMPORT_FILE,activeStep:ie,files:[],configurationOptions:{},importFolderFiles:[],importFolder:!1,importTextValue:"",isBitbucket:!1,selectedCodeRepoService:null,isCodeRepositoryContainer:!1,isImportButtonEnabled:!0,codeRepositoryFiles:!1,codeRepoStore:{},relevantFiles:[],disableContinueButton:!0,accessToken:null,showWarning:!1,selectedAPIElement:null,silentToasts:!1,newBadgeForCodeRepository:!1,newBadgeForApiGateway:!1},this.getSchemaLanguage=this.getSchemaLanguage.bind(this),this.handleTabSelect=this.handleTabSelect.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleContinue=this.handleContinue.bind(this),this.showLoadingScreen=this.showLoadingScreen.bind(this),this.handleDropFiles=this.handleDropFiles.bind(this),this.handleDropFolder=this.handleDropFolder.bind(this),this.handleChangeFiles=this.handleChangeFiles.bind(this),this.handleAPIElementChange=this.handleAPIElementChange.bind(this),this.handleImport=this.handleImport.bind(this),this.handleImportTextChange=this.handleImportTextChange.bind(this),this.handleAction=this.handleAction.bind(this),this.handleBack=this.handleBack.bind(this),this.handleRepositoryContinue=this.handleRepositoryContinue.bind(this),this.handleToken=this.handleToken.bind(this),this.handleFormat=this.handleFormat.bind(this),this.handleDropFolderBrowser=this.handleDropFolderBrowser.bind(this),this.handlerBitbucket=this.handlerBitbucket.bind(this),this.setAccessToken=this.setAccessToken.bind(this),this.codeRepoSelected=this.codeRepoSelected.bind(this),this.downloadShortlistedFiles=this.downloadShortlistedFiles.bind(this),this.analyticsEventsForCodeRepository=this.analyticsEventsForCodeRepository.bind(this),this.hideNewBadgeForCodeRepository=this.hideNewBadgeForCodeRepository.bind(this),this.hideNewBadgeForApiGateway=this.hideNewBadgeForApiGateway.bind(this),this.shouldWarningBannerShow=this.shouldWarningBannerShow.bind(this),this.handleFilesDownloadAndEvents=this.handleFilesDownloadAndEvents.bind(this)}componentDidUpdate(e){this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.initializeState()}initializeState(){this.setState({activeTab:T.IMPORT_FILE,activeStep:ie,isBitbucket:!1,files:[],configurationOptions:{},importFolderFiles:[],importFolder:!1,importTextValue:"",isImportButtonEnabled:!0,codeRepositoryFiles:!1,relevantFiles:[],isVerifyingFiles:!1,activeState:!1,disableContinueButton:!0,accessToken:null,accessTokenBitbucket:null,showWarning:!1,isImporting:!1,silentToasts:!1})}readFile(e){let t=new FileReader;return new Promise(((n,o)=>{t.onload=()=>{n(t.result)},t.onerror=()=>{t.abort(),o("Could not read the file")},t.readAsText(e)}))}getSchemaLanguage(e,t){let n;try{M.default.asJSON(e)&&(n="json")}catch(o){try{"wsdl2"===t.id||"wsdl1"===t.id?n="xml":"proto3"===t.id||"proto2"===t.id?n="proto":M.default.asYAML(e)&&(n="yaml")}catch(e){"graphql"===t.id?n="graphql":pm.logger.warn("Could not parse")}}return n}handleTabSelect(e){e!==this.state.activeTab&&this.setState({activeTab:e},(()=>{e===T.IMPORT_CODE_REPOSITORY&&this.state.newBadgeForCodeRepository&&this.hideNewBadgeForCodeRepository(),e===T.IMPORT_API_GATEWAY&&this.state.newBadgeForApiGateway&&this.hideNewBadgeForApiGateway()}))}handleCancel(){this.setState({accessToken:null,showWarning:!1}),this.state.isCodeRepositoryContainer?this.setState({activeStep:ie,isBitbucket:!1}):this.props.onRequestClose&&this.props.onRequestClose()}handleImportTextChange(e){this.setState({importTextValue:e})}async handleContinue(e,{origin:t,link:n,referrer:o}){if(!e)return void this.setState({activeStep:ie});const s={type:"file",list:[{name:"origin",content:(0,P.stringify)(e)}]};return this.handleDropFiles(s,{origin:t})}showLoadingScreen(){this.setState({activeStep:"loading"})}async handleDropFiles(e,{origin:t,link:n,referrer:o}){this.setState({activeStep:"loading"});const s=await(0,H.processUploadedFiles)(e),i={"import/link":ne.EVENT_ACTIONS.IMPORT_BY_LINK,"import/raw":ne.EVENT_ACTIONS.IMPORT_BY_TEXT,"import/folder":ne.EVENT_ACTIONS.IMPORT_BY_FOLDER_MULTIPLE_FORMATS},r=(0,k.resolveStoreInstance)(x.default),a=null==r?void 0:r.id;if(0===s.length)return(0,j.toast)({status:"error",description:"Error while importing: format not recognized"}),void this.setState({activeStep:ie});if("import/link"===t||"import/raw"===t)for(const e of s){const n=this.getSchemaLanguage(e.content,e.format),o=W.APIDefinitionTypeService.determineFileExtension(oe.get(e,"format.apiDefinitionType"),n);o&&(e.path=`index.${o}`),(0,ne.logApiDesignAnalytics)({category:this.props.isCreateDefinitionFlow?ne.EVENT_CATEGORIES.CREATE_API_DEFINITION:ne.EVENT_CATEGORIES.IMPORT,action:i[t],label:e.format.id,entityType:this.props.isCreateDefinitionFlow?ne.EVENT_ENTITY_TYPES.API:ne.EVENT_ENTITY_TYPES.WORKSPACE,entityId:this.props.isCreateDefinitionFlow?this.props.apiInfo.apiId:a})}if("import/folder"===t?(0,ne.logApiDesignAnalytics)({category:this.props.isCreateDefinitionFlow?ne.EVENT_CATEGORIES.CREATE_API_DEFINITION:ne.EVENT_CATEGORIES.IMPORT,action:i[t],entityType:this.props.isCreateDefinitionFlow?ne.EVENT_ENTITY_TYPES.API:ne.EVENT_ENTITY_TYPES.WORKSPACE,entityId:this.props.isCreateDefinitionFlow?this.props.apiInfo.apiId:a}):"import/file"===t&&(0,ne.logApiDesignAnalytics)({category:this.props.isCreateDefinitionFlow?ne.EVENT_CATEGORIES.CREATE_API_DEFINITION:ne.EVENT_CATEGORIES.IMPORT,action:1===s.length?ne.EVENT_ACTIONS.IMPORT_BY_FILE_SINGLE:ne.EVENT_ACTIONS.IMPORT_BY_FILE_MULTIPLE,label:1===s.length?s[0].format.id:void 0,entityType:this.props.isCreateDefinitionFlow?ne.EVENT_ENTITY_TYPES.API:ne.EVENT_ENTITY_TYPES.WORKSPACE,entityId:this.props.isCreateDefinitionFlow?this.props.apiInfo.apiId:a}),this.props.isCreateDefinitionFlow){let e=!1;for(let t of s)if(oe.includes(t.importAsFormats,"API")){e=!0;break}if(e){const e={id:y()()},t=oe.get(_.default.getActiveQueryParams().get(),"branch");t&&(e.branch=t),this.props.onRequestClose&&this.props.onRequestClose({routeIdentifier:"build.importDefinitionEntities",routeParams:{apiId:this.props.apiInfo.apiId},queryParams:e,options:{tabOptions:{openIn:this.props.apiInfo.originalTabId},additionalContext:{files:s,apiName:this.props.apiInfo.apiName,fileStore:this.props.apiInfo.fileStore,apiVersionId:this.props.apiInfo.apiVersionId}}})}else pm.logger.error("ImportContainer ~ Could not import. No definition files found."),(0,j.toast)({status:"error",description:"Could not import. No definition files found."}),this.setState({activeStep:ie});return}const l={id:y()(),..._.default.getActiveQueryParams().get()};this.props.retries&&(l.retry=this.props.retries),this.props.onRequestClose&&this.props.onRequestClose({routeIdentifier:"build.importEntities",routeParams:{},queryParams:l,options:{additionalContext:{files:s}}})}handleFormat(e,t,n){var o=[],s={},i=(0,k.resolveStoreInstance)(x.default),r=null==i?void 0:i.id;t.format=e,t.optionsPreference=pm.settings.getSetting(`import.options.${e.id}`)||{},t.isFolder=!0,t.enabled=!0,s[e.type]||e.getOptions().then((n=>{n=oe.filter(n,"external"),s[e.type]=(0,z.checkAndOverrideDefaultValue)(e,n),t.optionsPreference=pm.settings.getSetting(`import.options.${e.id}`)||{},s.swagger&&s.openapi3&&oe.remove(s,"swagger")})),o.push(t),this.setState({files:o,configurationOptions:s,importFolder:!0,importFolderFiles:n,activeStep:re,silentToasts:this.shouldSilentToasts(o)}),(0,ne.logApiDesignAnalytics)({category:this.props.isCreateDefinitionFlow?ne.EVENT_CATEGORIES.CREATE_API_DEFINITION:ne.EVENT_CATEGORIES.IMPORT,action:ne.EVENT_ACTIONS.IMPORT_BY_FOLDER_SINGLE_FORMAT,label:e.id,entityType:this.props.isCreateDefinitionFlow?ne.EVENT_ENTITY_TYPES.API:ne.EVENT_ENTITY_TYPES.WORKSPACE,entityId:this.props.isCreateDefinitionFlow?this.props.apiInfo.apiId:r})}async handleDropFolderBrowser(e){let t=[];await f().eachSeries(e,(async e=>{var n={name:e.webkitRelativePath?e.webkitRelativePath:""};n.name&&(n.name=n.name.split("/").splice(1).join("/")),n.name&&!n.name.includes(".DS_Store")&&(n.content=await this.readFile(e),t.push(n))}),(async()=>{this.handleDropFiles(t,{origin:"import/folder"})}))}async handleDropFolder(e){this.setState({activeStep:"loading"}),"browser"===window.SDK_PLATFORM?this.handleDropFolderBrowser(e):this.handleDropFiles(e,{origin:"import/folder"})}handleChangeFiles(e){let t=!1;e.forEach((e=>{t=t||e.enabled&&!e.error&&0!==e.importAsFormats.length})),this.setState({files:e,isImportButtonEnabled:t,silentToasts:this.shouldSilentToasts(e)})}handleAPIElementChange(e){this.setState({selectedAPIElement:e})}handleImportAsAPI(e){if(oe.isEmpty(e))return Promise.reject(new Error("Import~handleImportAsAPI: API data missing from the argument"));let{name:t,versions:n}=e;return V.default.get().then((e=>e&&0!==e.id?I.default.createAPI(t,n,null,"import_button").then((e=>Promise.resolve(e))).catch((e=>(pm.logger.warn("Import~handleImportAsAPI: Failed to import API",e),Promise.reject(e)))):Promise.reject(new Error("Import~handleImportAsAPI: User not found"))))}async handleImport(){if(q.Ampli.importModalImportClicked((0,q.getAmpliCTAProperties)(le)),this.state.importFolder){let e=this.state.importFolderFiles,t=this.state.files[0].optionsPreference;return await(0,D.default)(e,null,null,t),void(this.props.onRequestClose&&this.props.onRequestClose())}let e=this.state.files,t=[],n=[],o={};this.setState({isImporting:!0}),f().eachSeries(e,((e,s)=>{if(!e.enabled||e.error)return s();let i="",r=e.format,a=!0;if(e.parsedData&&(i=e.parsedData),"API"===e.importAsFormats){n.push(e);let o=(0,k.resolveStoreInstance)(F.default).isLoggedIn,l=(0,k.resolveStoreInstance)(L.default).isSocketConnected;if(!(o&&l))return s();oe.includes(Q.GENERATE_COLLECTION_DISABLED_FORMATS,r.id)&&(a=!1);let c={name:e.name,versions:[{name:"draft",schemas:[{type:se[r.id],language:this.getSchemaLanguage(i,r),schema:i}],relations:this.state.selectedAPIElement&&a?{[this.state.selectedAPIElement]:{collectionGenerationConfig:{converter:{...e.optionsPreference},collection:{name:e.name}}}}:{}}]};this.handleImportAsAPI(c).then((e=>(e&&(e.file={format:r},t.push(e)),s()))).catch((()=>s()))}else R.default.importData(i,{options:e.optionsPreference,silentToasts:this.state.silentToasts,preventForceCloseImportModal:this.state.silentToasts,exporterId:e.exporterId},((e,t,n)=>(this.addToImportedEntities(o,n),s())))}),(e=>{let s=0,i=this.state.silentToasts,r=0;if(s+=n.length,r+=t.length,oe.forEach(o,(e=>{s+=e.total,r+=e.imported})),this.setState({isImporting:!1}),s>0&&0===r&&i)(0,j.toast)({title:"Import Failed",status:"error",description:"There was an unexpected error. Please try again."});else{if(this.setState({accessToken:null}),!(s.length>0&&0===n.length))return n.length>0?(this.props.onRequestClose&&this.props.onRequestClose(),void this.handleOpenAfterImportModal(n,t,o,r)):void 0;this.props.onRequestClose&&this.props.onRequestClose()}}))}addToImportedEntities(e,t){t&&oe.forEach(t,((t,n)=>{e[n]={total:oe.get(e,[n,"total"],0)+t.total,imported:oe.get(e,[n,"imported"],0)+t.imported,failed:oe.get(e,[n,"failed"],0)+t.failed}}))}isImportAPIEnabled(){let e=(0,k.resolveStoreInstance)(F.default).isLoggedIn,t=(0,k.resolveStoreInstance)(L.default).isSocketConnected;return e&&t}handleAction(e,t){e===U.BRANCH_SELECTED&&(pm.settings.setSetting("stopFetchingGithubFiles",!1),this.setState({codeRepoStore:t,disableContinueButton:!1})),e===U.FILES_FOUND&&this.setState({relevantFiles:t,disableContinueButton:!1}),e===U.DISABLE_CONTINUE&&this.setState({disableContinueButton:!0}),e===U.DISABLE_WARNING&&this.setState({showWarning:!1}),e===U.STOP_VERIFYING&&this.state.isVerifyingFiles&&this.setState({stopVerifying:!0,isVerifyingFiles:!1})}handleBack(){this.setState({activeState:!0,activeStep:ae})}handleToken(e={},t){const{accessToken:n,id:o}=e;"bitbucket"===t?this.setState({accessToken:n,tokenId:o,activeStep:ae,codeRepoStore:{},activeState:!1,isBitbucket:!0,selectedCodeRepoService:t}):this.setState({accessToken:n,tokenId:o,codeRepoStore:{},activeState:!1,activeStep:ae,selectedCodeRepoService:t})}downloadShortlistedFiles(e,t){const{selectedCodeRepoService:n}=this.state;let o=[],s={};if(e.length){var i,r=e,a=this.state.accessToken,l=this.state.codeRepoStore,c=oe.get(l,"selectedTargetOrg.id","");i=l.showManualInput?l.repositoryName:oe.get(l,"selectedTargetRepo.id",""),f().mapLimit(r,10,(async e=>{let t;this.state.stopVerifying||(n===ee.IMPORT_SERVICES.BITBUCKET?t=await J.default.getFileContent({url:e.link,token:this.state.accessToken}):n===ee.IMPORT_SERVICES.GITHUB?t=await $.default.getFileContent({blobSha:e.sha,owner:c,repo:i,token:a}):n===ee.IMPORT_SERVICES.GITLAB?(s={accessToken:this.state.accessToken,projectId:oe.get(l,"selectedTargetProject.id",""),branchName:oe.get(l,"selectedTargetBranch.id",""),filePath:oe.get(e,"path")},t=await Y.default.getFileContent(s)):n===ee.IMPORT_SERVICES.AZURE&&(s={accessToken:this.state.accessToken,repoId:oe.get(l,"selectedTargetRepo.id",""),owner:oe.get(l,"selectedTargetOrg.id",""),blobId:oe.get(e,"blobId")},t=await K.default.getFileContent(s)),o.push({name:e.path,content:t}))}),(()=>{this.state.stopVerifying?this.setState({stopVerifying:!1}):(this.setState({isVerifyingFiles:!1}),o&&o.length?this.handleDropFiles(o,{origin:"import/git"}):this.setState({showWarning:!0}))}))}else this.setState({isVerifyingFiles:!1,showWarning:!0})}analyticsEventsForCodeRepository(e,t){e&&(1===e?v.default.addEvent("import","import_by_repository",t+"_relevant_single",1):e<=4?v.default.addEvent("import","import_by_repository",t+"_relevant_low",1):e<=10?v.default.addEvent("import","import_by_repository",t+"_relevant_medium",1):e>10&&e<=30?v.default.addEvent("import","import_by_repository",t+"_relevant_high",1):e>30&&v.default.addEvent("import","import_by_repository",t+"_relevant_very_high",1)),v.default.addEvent("import","import_by_repository",t+"_relevant_files",e)}handleRepositoryContinue(){const{selectedCodeRepoService:e,accessToken:t,codeRepoStore:n}=this.state,o=oe.get(n,"showManualInput"),s=oe.get(n,"repositoryName"),i=oe.get(n,"selectedTargetRepo.id"),r=oe.get(n,"selectedTargetBranch.hash"),a=oe.get(n,"selectedTargetBranch.id"),l=oe.get(n,"selectedTargetWorkspace.id"),c=oe.get(n,"selectedTargetOrg.id"),d=oe.get(n,"projectName"),u=oe.get(n,"selectedTargetProject.id");let p={};if(this.setState({isVerifyingFiles:!0}),e===ee.IMPORT_SERVICES.BITBUCKET){p={workspace_slug:l,repo_slug:o?s:i,branch_name:r||a,token:t}}else if(e===ee.IMPORT_SERVICES.GITHUB){p={branch:a,repo:o?s:i,owner:c,token:t}}else e===ee.IMPORT_SERVICES.GITLAB?p={accessToken:t,branchName:a,projectId:o?d:u}:e===ee.IMPORT_SERVICES.AZURE&&(p={accessToken:t,owner:c,branchName:a,repoId:o?oe.get(this.state.codeRepoStore,"repoName"):i});let m=X.default[ee.REPOSITORY_SERVICE_MAP[e]];oe.isFunction(m)&&m(p,this.handleFilesDownloadAndEvents)}handleFilesDownloadAndEvents(e,t){const{selectedCodeRepoService:n}=this.state;let o;o=e||oe.isEmpty(t)?[]:t;let s=oe.isArray(t)?t.length:0;this.setState({isVerifyingFiles:!0,showWarning:!1},(()=>{this.downloadShortlistedFiles(o,n),this.analyticsEventsForCodeRepository(s,n)}))}getNewBadgeSetting(e){const t=pm.settings.getSetting(e);return!t||t<1}hideNewBadgeForCodeRepository(){this.setState({newBadgeForCodeRepository:!1})}hideNewBadgeForApiGateway(){this.setState({newBadgeForApiGateway:!1})}codeRepoSelected(){this.setState({isCodeRepositoryContainer:!0})}setAccessToken(e){this.setState({accessTokenBitbucket:e})}handlerBitbucket(){this.setState({activeStep:ae,isBitbucket:!0})}componentDidMount(){this.setState({newBadgeForCodeRepository:this.getNewBadgeSetting("import.codeRepositoryOpened"),newBadgeForApiGateway:this.getNewBadgeSetting("import.apiGatewayOpened")})}shouldWarningBannerShow(){let e=!1;return oe.forEach(this.state.files,(t=>{(t.importAsFormats.includes("API")||t.importAsFormats.includes("Collection")&&"postman_collection"!==t.format.type)&&(e=!0)})),!(!e||this.isImportAPIEnabled())}render(){var e,t,n,o,g;let f=this.isImportAPIEnabled(),b=!(0,k.resolveStoreInstance)(L.default).isSocketConnected,{apiInfo:y,isCreateDefinitionFlow:v}=this.props,I=v?te.CREATE_API_MODAL:Z.OPEN_IMPORT_IDENTIFIER,_=(0,k.resolveStoreInstance)(x.default)&&(0,k.resolveStoreInstance)(x.default).id;return s.createElement(w.Modal,{className:"import-modal",size:"large",isOpen:this.props.isOpen,onClose:()=>this.props.onRequestClose(),customStyles:this.props.customStyles},b&&s.createElement(O.default,{width:"95%",status:"warning",className:"import-offline-banner"},"You can import once you're back online"),s.createElement(w.ModalHeader,{heading:"Import",className:"import-modal-header"}),s.createElement(w.ModalContent,{className:"import-modal-content"},s.createElement("div",{className:"import-container"},this.state.activeStep===ie&&s.createElement("div",{className:"import-input-tabs-container"},s.createElement(i.default,{onSelect:this.handleTabSelect,activeTab:this.state.activeTab,newBadgeForCodeRepository:this.state.newBadgeForCodeRepository,newBadgeForApiGateway:this.state.newBadgeForApiGateway,isCreateDefinitionFlow:v,apiId:null===(e=this.props.apiInfo)||void 0===e?void 0:e.apiId}),s.createElement(r.default,{activeKey:this.state.activeTab,isOffline:b},s.createElement(a.default,{key:T.IMPORT_FILE},s.createElement(l.default,{onDropFiles:this.handleDropFiles,isCreateDefinitionFlow:v,apiId:null===(t=this.props.apiInfo)||void 0===t?void 0:t.apiId})),s.createElement(a.default,{key:T.IMPORT_FOLDER},s.createElement(c.default,{onDropFolder:this.handleDropFolder,isCreateDefinitionFlow:v,apiId:null===(n=this.props.apiInfo)||void 0===n?void 0:n.apiId})),s.createElement(a.default,{key:T.IMPORT_TEXT},s.createElement(d.default,{onTextChange:this.handleImportTextChange})),s.createElement(a.default,{key:T.IMPORT_URL},s.createElement(u.default,{onContinue:this.handleContinue,showLoader:this.showLoadingScreen,isCreateDefinitionFlow:v,apiId:null===(o=this.props.apiInfo)||void 0===o?void 0:o.apiId})),s.createElement(a.default,{key:T.IMPORT_CODE_REPOSITORY},s.createElement(p.default,{handleToken:this.handleToken,handleCancel:this.handleCancel,codeRepoSelected:this.codeRepoSelected,isCreateDefinitionFlow:v,apiId:null===(g=this.props.apiInfo)||void 0===g?void 0:g.apiId})),s.createElement(a.default,{key:T.IMPORT_API_GATEWAY},s.createElement(m.default,{handleClose:this.props.onRequestClose,workspaceId:_,sourceIdentifier:I,apiInfo:y,isCreateDefinitionFlow:v})))),this.state.activeStep===ae&&s.createElement(h.default,{isBitbucket:this.state.isBitbucket,accessToken:this.state.accessToken,tokenId:this.state.tokenId,activeState:this.state.activeState,store:this.state.codeRepoStore,setAccessToken:this.setAccessToken,selectedCodeRepoService:this.state.selectedCodeRepoService,handleAction:this.handleAction,showWarning:this.state.showWarning}),"loading"===this.state.activeStep&&s.createElement("div",{className:"import-loading-indicator"},s.createElement(N.default,null)),this.state.activeStep===re&&s.createElement(s.Fragment,null,this.shouldWarningBannerShow()&&s.createElement("div",{className:"import-container__offline-banner"},s.createElement("div",{className:"import-container__offline-banner__icon"},s.createElement(G.default,{size:"sm"})),s.createElement("div",{className:"import-container__offline-banner__message"},s.createElement("span",null,"You need to be signed in and online to save this as an API. It will be imported as a collection instead."))),s.createElement("div",{className:"import-files-options-container"},s.createElement("div",{className:"import-files-options-header"},s.createElement("div",{className:"import-files-options-header__content"},s.createElement("div",{className:"import-files-options-header__content-title"},"Select files to import"),s.createElement("span",null,"·"),s.createElement("div",{className:"import-files-options-header__content-selected-files"},oe.filter(this.state.files,"enabled").length,"/",this.state.files.length," selected")),s.createElement(S.default,{files:this.state.files})),s.createElement("div",{className:"import-files-options"},s.createElement(E.default,{isImportAPIEnabled:f,files:this.state.files,configurationOptions:this.state.configurationOptions,onChangeFiles:this.handleChangeFiles,onAPIElementChange:this.handleAPIElementChange}),s.createElement(C.default,{files:this.state.files})))))),this.state.activeStep===ie&&this.state.activeTab===T.IMPORT_TEXT&&s.createElement(w.ModalFooter,{className:"import-modal-footer"},s.createElement(A.Button,{className:"import-by-raw-text-button",type:"primary",onClick:()=>{var e;this.handleContinue(this.state.importTextValue,{origin:"import/raw"}),(0,ne.logApiDesignAnalytics)({category:ne.EVENT_CATEGORIES.IMPORT,action:ne.EVENT_ACTIONS.IMPORT_MODAL_CONTINUE_WITH_RAW_TEXT_CLICK,value:this.state.importTextValue.length,entityType:v?ne.EVENT_ENTITY_TYPES.API:void 0,entityId:v?null===(e=this.props.apiInfo)||void 0===e?void 0:e.apiId:void 0})},disabled:""===this.state.importTextValue||b},"Continue")),this.state.activeStep===re&&s.createElement(w.ModalFooter,{className:"import-modal-footer"},s.createElement(A.Button,{className:"import-modal__import-button",type:"primary",onClick:this.handleImport,disabled:!this.state.isImportButtonEnabled||this.state.isWorkspacesLoading||this.state.isImporting||b},this.state.isImporting?s.createElement(N.default,null):"Import"),this.state.codeRepositoryFiles?s.createElement(A.Button,{className:"import-modal__cancel-button",type:"secondary",disabled:this.state.isImporting,onClick:this.handleBack},"Back"):s.createElement(A.Button,{className:"import-modal__cancel-button",type:"secondary",onClick:this.handleCancel},"Cancel")),this.state.activeStep===ae&&s.createElement(w.ModalFooter,{className:"import-modal-footer"},s.createElement(A.Button,{className:"import-modal__import-button",type:"primary",onClick:this.handleRepositoryContinue,disabled:this.state.disableContinueButton||this.state.isVerifyingFiles||b},this.state.isVerifyingFiles?s.createElement(N.default,null):"Continue"),s.createElement(A.Button,{className:"import-modal__cancel-button",type:"secondary",onClick:this.handleCancel},"Cancel")))}})||o},"./js/containers/import/ImportModalContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o,s=n("../../node_modules/react/index.js"),i=n("./node_modules/pure-render-decorator/index.js"),r=n.n(i),a=n("./js/containers/import/ImportContainer.js"),l=n("../../packages/api-design/api-design-analytics/index.js"),c=n("./node_modules/lodash/lodash.js");let d=r()(o=class extends s.Component{constructor(e){super(e),this.openModal=this.openModal.bind(this),this.handleClose=this.handleClose.bind(this)}UNSAFE_componentWillMount(){this.attachModelListeners()}componentWillUnmount(){this.detachModelListeners()}componentDidMount(){let e=this.props.controller;if(!e)return;const t=c.get(e,"isCreateDefinitionFlow"),n=c.get(e,"originalTabId");if(t&&!n){let t={};c.get(e,"branch")&&(t.branch=c.get(e,"branch")),this.handleClose({routeIdentifier:"build.createDefinition",routeParams:{apiId:c.get(e,"apiId")},queryParams:t})}else c.get(e,"isAllowedToOpen")?this.openModal():this.handleClose()}attachModelListeners(){pm.mediator.on("closeImportModal",this.handleClose)}detachModelListeners(){pm.mediator.off("closeImportModal",this.handleClose)}openModal(){this.setState({isOpen:!0}),(0,l.logApiDesignAnalytics)({category:c.get(this.props,"controller.isCreateDefinitionFlow",!1)?l.EVENT_CATEGORIES.CREATE_API_DEFINITION:l.EVENT_CATEGORIES.IMPORT,action:l.EVENT_ACTIONS.IMPORT_MODAL_OPEN,entityId:c.get(this.props,"controller.isCreateDefinitionFlow",!1)?c.get(this.props,"apiId"):void 0,entityType:c.get(this.props,"controller.isCreateDefinitionFlow",!1)?l.EVENT_ENTITY_TYPES.API:void 0})}handleClose(e){(0,l.logApiDesignAnalytics)({category:c.get(this.props,"controller.isCreateDefinitionFlow",!1)?l.EVENT_CATEGORIES.CREATE_API_DEFINITION:l.EVENT_CATEGORIES.IMPORT,action:l.EVENT_ACTIONS.IMPORT_MODAL_X,entityId:c.get(this.props,"controller.isCreateDefinitionFlow",!1)?c.get(this.props,"apiId"):void 0,entityType:c.get(this.props,"controller.isCreateDefinitionFlow",!1)?l.EVENT_ENTITY_TYPES.API:void 0}),this.props.close&&this.props.close(e)}getCustomStyles(){return{marginTop:"15vh",height:"65vh",minWidth:"450px",maxHeight:"700px",width:"55vw"}}render(){return s.createElement(a.default,{className:"import-modal",isOpen:this.props.isOpen,onRequestClose:this.handleClose,customStyles:this.getCustomStyles(),isCreateDefinitionFlow:c.get(this.props.controller,"isCreateDefinitionFlow"),apiInfo:{apiId:c.get(this.props.controller,"apiId"),originalTabId:c.get(this.props.controller,"originalTabId")},retries:c.get(this.props.controller,"retries")})}})||o},"./js/containers/import/ImportModalController.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("./appsdk/modals/BaseModalController.js"),s=n("./js/stores/PermissionStore.js"),i=n("./js/stores/ActiveWorkspaceStore.js"),r=n("./js/stores/StoreManager.js"),a=n("./js/stores/CurrentUserStore.js"),l=n("./node_modules/lodash/lodash.js");class c extends o.default{didCreate(e){let t=(0,r.resolveStoreInstance)(a.default).isLoggedIn,n=(0,r.resolveStoreInstance)(i.default),o=n.isMember,c=(0,r.resolveStoreInstance)(s.default).can("join","workspace",n.id),d=l.get(e,"routeParams.apiId"),u=l.get(e,"additionalContext.originalTabId"),p=l.get(e,"additionalContext.retry"),m=l.get(e,"queryParams.branch");this.isAllowedToOpen=o||t&&c,this.retries=p,d&&(this.isCreateDefinitionFlow=!0,this.apiId=d,this.originalTabId=u,this.branch=m)}}},"./js/containers/new-button/services/MonitorRegionsService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchAvailableRegions:function(){return i}});var o=n("./js/modules/services/RemoteSyncRequestService.js"),s=n("./node_modules/lodash/lodash.js");function i(){return o.default.request("/ws/proxy",{method:"post",data:{service:"monitors",method:"get",body:{},path:"/agents"}}).then((e=>s.get(e,"body.data")))}},"./js/containers/new-button/services/VersionTagService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchAllTags:function(){return a}});var o=n("./js/modules/services/RemoteSyncRequestService.js"),s=n("./js/stores/StoreManager.js"),i=n("./js/stores/CurrentUserStore.js"),r=n("./node_modules/lodash/lodash.js");async function a(e){if(!e.collectionUid)return Promise.reject(new Error("VersionTagService~fetchAllTags: collectionUid not found"));const t=(0,s.resolveStoreInstance)(i.default).id;let n=`/collections/${e.collectionUid}/tags?count=100&user_id=${t}`,a=[],l=null;do{try{const e=l?`${n}&pageId=${l}`:n,t=await o.default.request(e,{method:"get"}),s=r.get(t,"body.tags",[]);l=r.get(t,"body.nextPageId",null),a=a.concat(r.map(s,(e=>({id:r.get(e,"id"),name:r.get(e,"message")}))))}catch(e){return Promise.reject(e)}}while(l);return Promise.resolve(a)}},"./js/models/Cron.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});class o{constructor(e){this.update(e)}update(e){return e?(this.empty=!1,"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&e.length<6&&e.unshift("0"),this.second=e.second||e[0]||this.second||"0",this.minute=e.minute||e[1]||this.minute||"0",this.hour=e.hour||e[2]||this.hour||"*",this.date=e.date||e[3]||this.date||"*",this.month=e.month||e[4]||this.month||"*",this.weekday=e.weekday||e[5]||this.weekday||"*",this):(this.empty=!0,this)}reset(){return this.second="0",this.minute="0",this.hour="*",this.date="*",this.month="*",this.weekday="*",this}fromForm(e){let{schedule:t,minute:n,hour:o,weekday:s,time:i="0"}=e;return"minute-timer"===t?("0"===n&&(n="*/5"),o="*"):n="0","hour-timer"===t&&"*"!==o[0]&&(o="*"),"week-timer"===t?o=i:s="*",this.reset(),this.update({minute:n,hour:o,weekday:s}),this}toForm(){let e,{minute:t,hour:n,weekday:o}=this,s=""+((new Date).getHours()+1)%24;return"0"!==t?e="minute-timer":"*"===n[0]?e="hour-timer":(e="week-timer",s=n),{minute:"0"!==t?t:"*/5",hour:n,weekday:o,schedule:e,time:s}}toString(){return this.empty?"":[this.second,this.minute,this.hour,this.date,this.month,this.weekday].join(" ")}}},"./js/services/conversion/importFolder.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u},determineDataFormats:function(){return p}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),i=n("./js/controllers/Importer.js"),r=n("./js/modules/services/AnalyticsService.js"),a=n("./node_modules/async/dist/async.js"),l=n.n(a),c=n("./js/services/conversion/formats/index.js"),d=n("../../node_modules/console-browserify/index.js");async function u(e,t,n,o){var a,c=s().zipObject(s().map(e,"fileName"),s().map(e,"content")),u=s().map(e,(e=>s().pick(e,"fileName"))),m={},h=[];if(a="browser"===window.SDK_PLATFORM?await p(e):await p(u))try{var g;g="browser"===window.SDK_PLATFORM?await a.convertFolder(e,o):await a.convertFolder(u,o),r.default.addEventV2({category:"collection",action:"create",label:a.id}),l().each(g,((e,t)=>{i.default.importData(e.data,{origin:"import/folder"},t)}))}catch(e){pm.toasts.error(`Error while importing ${a.name}: ${e.message}`),pm.mediator.trigger("failedCollectionImport",`Error importing ${a.name} API: ${e.message}`)}else l().eachOfSeries(c,((e,t,n)=>{i.default.importData(e,{origin:"import/folder"},((e,o)=>(s().isEmpty(s().get(o,"format.id"))?h.push(t):m[t]=o,n())))}),(()=>{s().isEmpty(m)?pm.toasts.error("Error while importing: Could not determine format"):h.length>0&&(pm.toasts.warn("Warning while importing: Some of files could not be imported. Check Developer Tools to get more info."),d.log("failedImport: Here are the files that were not imported ",h))}))}async function p(e,t){var n=s().chain(c.default).filter(["multiFileSupport",!0]).value();for(let t of n)try{if(await t.validateFolder(e))return t}catch(e){}}},"./js/stores/IntegrationsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ye}});var o,s,i,r,a,l,c,d,u,p,m,h,g,f,b,y,v,I,_,E,S,C,T,A,j,w,O,N,R,P,D,M,x,L,k,F,B,U,V,G,z,H,W,q,K,$,Y,J,X,Q,Z,ee,te,ne,oe,se,ie=n("../../node_modules/mobx/lib/mobx.module.js"),re=n("./integrations/constants/integrationsConstants.ts"),ae=n("./js/stores/StoreManager.js"),le=n("./js/stores/SyncStatusStore.js"),ce=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),de=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),ue=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),pe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),me=(n("./integrations/monitoring/services/NewRelicService.js"),n("./integrations/monitoring/constants.js"),n("./node_modules/lodash/lodash.js"));function he(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function ge(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const fe=3e5,be=8e3;let ye=(s=ge((o=class{constructor(){he(this,"activeIntegrationsView",s,this),he(this,"serviceId",i,this),he(this,"activeServiceDetailsId",r,this),he(this,"ruleId",a,this),he(this,"teamIntegrations",l,this),he(this,"availableIntegrations",c,this),he(this,"loadingAvailableIntegrations",d,this),he(this,"loadingIntegrationClasses",u,this),he(this,"loadingIntegrationServices",p,this),he(this,"errorFetchingAvailableIntegrations",m,this),he(this,"availableIntegrationsErrorDetails",h,this),he(this,"filteredAvailableIntegrations",g,this),he(this,"filterByCategoryAvailableIntegrations",f,this),he(this,"integrationCategories",b,this),he(this,"noTeamIntegrations",y,this),he(this,"loadingTeamIntegrations",v,this),he(this,"errorInFetchingTeamIntegrations",I,this),he(this,"errorDetails",_,this),he(this,"ruleSpecificTeamIntegrations",E,this),he(this,"ruleSpecificTeamIntegrationErrors",S,this),he(this,"serviceDetails",C,this),he(this,"ruleDetails",T,this),he(this,"noRuleSpecificTeamIntegrations",A,this),he(this,"isHydrating",j,this),he(this,"isAdding",w,this),he(this,"categoryFilter",O,this),he(this,"createFormActiveRuleId",N,this),he(this,"createFormActiveServiceId",R,this),he(this,"workspaces",P,this),he(this,"entities",D,this),he(this,"selectedWorkspace",M,this),he(this,"selectedEntity",x,this),he(this,"selectedEntityVersion",L,this),he(this,"authDetails",k,this),he(this,"errorFetchingAuthDetails",F,this),he(this,"authDetailsError",B,this),he(this,"runLogPageData",U,this),he(this,"loadingRunLogPage",V,this),he(this,"errorInFetchingRunLogPageData",G,this),he(this,"runLogPageErrorDetails",z,this),he(this,"sourceConflicting",H,this),he(this,"refreshingRunLog",W,this),he(this,"authType",q,this),he(this,"availableIntegrationClasses",K,this),he(this,"integrationCategories",$,this),he(this,"availableIntegrationServices",Y,this),he(this,"availableIntegrationServicesByCategory",J,this),he(this,"filteredIntegrationServices",X,this),he(this,"preferredEntities",Q,this),he(this,"integrationClass",Z,this),he(this,"loadingIntegrationClass",ee,this),he(this,"errorFetchingIntegrationClass",te,this),he(this,"integrationInstance",ne,this),he(this,"loadingIntegrationInstance",oe,this),he(this,"errorFetchingIntegrationInstance",se,this),this.initializeFetchingTeamIntegrations=me.debounce(this.initializeFetchingTeamIntegrations.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationClasses=me.debounce(this.getAvailableIntegrationClasses.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationServices=me.debounce(this.getAvailableIntegrationServices.bind(this),fe,{leading:!0,trailing:!1}),this.initializeRuleSpecificTeamIntegrations=((e,t,n)=>{const o={};return(...s)=>{const[i,r]=s;return"function"==typeof o[r]||(o[r]=me.debounce(e,t,{...n,leading:!0})),o[r](...s)}})(this.initializeRuleSpecificTeamIntegrations.bind(this),3e5,{leading:!0,trailing:!1})}setActiveIntegrationsView(e){this.activeIntegrationsView=e}readRuleSpecificTeamIntegrations(e){return(0,ie.toJS)(this.ruleSpecificTeamIntegrations[e])}readServiceDetails(e){return(0,ie.toJS)(this.serviceDetails[e])}readRuleDetails(e){return(0,ie.toJS)(this.ruleDetails[e])}setAuthType(e){this.authType=e}setRuleSpecificTeamIntegrations(e,t){this.ruleSpecificTeamIntegrations[e]=t}resetRuleSpecificTeamIntegrations(e){delete this.ruleSpecificTeamIntegrations[e]}setServiceDetails(e,t){this.serviceDetails[e]=t}setRuleDetails(e,t){this.ruleDetails[e]=t}resetServiceDetails(e){delete this.serviceDetails[e]}setActiveIntegrationRule(e,t){this.serviceId=e,this.ruleId=t}updateCategoryfilter(e){this.categoryFilter=e,this.updateIntegrationServicesPerCategory(e)}updateRuleSpecificTeamIntegrationsDataStatus(e,t,n,o){this.ruleSpecificTeamIntegrationErrors[o]={loading:e,error:t,errorDetails:n}}readRuleSpecificTeamIntegrationsDataStatus(e){return{loading:!0,...(0,ie.toJS)(this.ruleSpecificTeamIntegrationErrors[e])}}getRuleSpecificTeamIntegrationData(e,t){return this.updateRuleSpecificTeamIntegrationsDataStatus(!0,!1,"",t),Promise.all([de.default.fetchIntegrationClassDetails(t),de.default.fetchIntegrationServiceDetails(e),ce.default.getTeamIntegrationInstances(t)]).then((([n,o,s])=>{const i=me.get(s,"body.data",[]),r=me.get(n,"body.data",{}),a=me.get(o,"body.data",{});if(200!==n.status||200!==s.status||200!==o.status||me.isEmpty(r)||me.isEmpty(a)){let e={};(200!==n.status||me.isEmpty(r))&&(e.errorFetchingClassDetails=n),(200!==o.status||me.isEmpty(a))&&(e.errorFetchingServiceDetatils=o),200!==s.status&&(e.errorFetchingTeamIntegrations=s),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}else{if(me.isEmpty(i))this.setRuleSpecificTeamIntegrations(t,[]);else{let e=me.map(i,(e=>({id:e.id,name:e.name,userId:e.createdBy.id,userName:me.get(e,"createdBy.name")||me.get(e,"createdBy.username")||me.get(e,"createdBy.email")||"A user",isUserNameClickable:Boolean(me.get(e,"createdBy.name")||me.get(e,"createdBy.username")||me.get(e,"createdBy.email")),userProfileUrl:e.createdBy.profilePicUrl,status:e.status,apiDetails:e.entity.api,entityType:e.entity.type,entityId:e.entity.id,entityName:e.entity.name,lastRunAt:e.lastRunAt,clientCategories:e.clientCategories})));this.setRuleSpecificTeamIntegrations(t,e)}this.setServiceDetails(e,a),this.setRuleDetails(t,r),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!1,"",t)}})).catch((n=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,n,t),this.resetRuleSpecificTeamIntegrations(t),this.resetServiceDetails(e)}))}getTeamIntegrationsData(){return this.setLoadingIntegrationClasses(!0),this.setLoadingIntegrationServices(!0),Promise.all([de.default.fetchAvailableClasses(),de.default.fetchAvailableServices(),ce.default.getTeamIntegrations()]).then((([e,t,n])=>{const o=me.get(t,"body.data",[]),s=me.get(e,"body.data",[]),i=me.get(n,"body.data",[]);if(200!==e.status||200!==n.status||200!==t.status||me.isEmpty(o)||me.isEmpty(s)){let i={};(200!==t.status||me.isEmpty(o))&&(i.errorFetchingServices=t),(200!==e.status||me.isEmpty(s))&&(i.errorFetchingClasses=e),200!==n.status&&(i.errorFetchingTeamIntegrations=n),this.updateData(!1,[]),this.updateState(!1,!0,i)}else{if(me.isEmpty(i))this.updateData(!0,[]),this.updateState(!1,!1,"");else{const e=me.groupBy(i,"rule"),t=me.map(e,((e,t)=>{const n=e[0].service,i=me.find(s,(e=>e.id===t)),r=me.find(o,(e=>e.id===n));return{ruleName:me.get(i,"name"),ruleId:t,serviceId:n,serviceName:me.get(r,"name",""),serviceIconURL:me.get(r,"iconUrl",""),serviceDarkIconURL:me.get(r,"darkIconUrl",""),statusCount:me.countBy(e,(e=>e.status)),totalIntegrations:e.length}})),n=this.defaultSortTeamIntegrations(t);this.updateData(!1,n),this.updateState(!1,!1,"")}const e=this.addDisplayNameToIntegrationClasses(s);this.setAvailableIntegrationClasses(e),this.setAvailableIntegrationServices(o),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory)}this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!1,"")})).catch((e=>{pm.logger.error("Error in fetching team integrations",e),this.updateData(!1,[]),this.updateState(!1,!0,e),this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!0,e)}))}setIsHydrating(e){this.isHydrating=e}updateState(e,t,n){this.loadingTeamIntegrations=e,this.errorInFetchingTeamIntegrations=t,this.errorDetails=n}updateData(e,t){this.noTeamIntegrations=e,this.teamIntegrations=t}updateAvailableIntegrations(e){this.availableIntegrations=e}updateIntegrationCategories(){this.integrationCategories=ue.default.getAllCategories(this.availableIntegrations)}setAvailableIntegrationServices(e){this.availableIntegrationServices=e}addDisplayNameToIntegrationClasses(e){const t={};return me.forEach(e,(e=>{const n=me.get(e,"services",[]);me.forEach(n,(n=>{me.get(t,n.id)?t[n.id].push(e.id):t[n.id]=[e.id]}))})),me.forEach(e,(e=>{const n=me.get(e,"services.0",{});e.displayName=me.size(t[n.id])>1?e.name:n.name})),e}setAvailableIntegrationClasses(e){this.availableIntegrationClasses=e}getIntegrationCategoriesFromServices(){this.integrationCategories=ue.default.getAllIntegrationCategories(this.availableIntegrationServices)}updateIntegrationServicesPerCategory(e){let t=ue.default.filterByCategory(e,(0,ie.toJS)(this.availableIntegrationServices));me.isEmpty(t)&&!me.isEmpty((0,ie.toJS)(this.availableIntegrationServices))&&(this.updateCategoryfilter("all"),t=(0,ie.toJS)(this.availableIntegrationServices)),this.availableIntegrationServicesByCategory=t}updateFilteredIntegrationServices(e){this.filteredIntegrationServices=e}updateAvailableIntegrationsStatus(e,t,n){this.loadingAvailableIntegrations=e,this.errorFetchingAvailableIntegrations=t,this.availableIntegrationsErrorDetails=n}setLoadingIntegrationServices(e){this.loadingIntegrationServices=e}setLoadingIntegrationClasses(e){this.loadingIntegrationClasses=e}updateFilteredAvailableIntegrations(e){this.filteredAvailableIntegrations=e}updateFilterByCategoryAvailableIntegrations(e){let t=ue.default.filterByCategory(e,(0,ie.toJS)(this.availableIntegrations));me.isEmpty(t)&&!me.isEmpty((0,ie.toJS)(this.availableIntegrations))&&(this.updateCategoryfilter("all"),t=(0,ie.toJS)(this.availableIntegrations)),this.filterByCategoryAvailableIntegrations=t}initializeFetchingTeamIntegrations(){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}initializeRuleSpecificTeamIntegrations(e,t){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchRuleSpecificTeamIntegrations(e,t){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchTeamIntegrations(){(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}getAvailableIntegrationClasses(){return this.setLoadingIntegrationClasses(!0),de.default.fetchAvailableClasses().then((e=>{const t=this.addDisplayNameToIntegrationClasses(me.get(e,"body.data",[]));this.setAvailableIntegrationClasses(t),this.updateAvailableIntegrationsStatus(!1,!1,""),this.setLoadingIntegrationClasses(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationClasses(!1),pm.logger.error("Error occurred while fetching available integration classes",e)}))}getAvailableIntegrationServices(){return this.setLoadingIntegrationServices(!0),de.default.fetchAvailableServices().then((e=>{this.setAvailableIntegrationServices(me.get(e,"body.data",[])),this.updateAvailableIntegrationsStatus(!1,!1,""),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory),this.setLoadingIntegrationServices(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationServices(!1),pm.logger.error("Error occurred while fetching available integration services",e)}))}populateIntegrationClasses(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationClasses()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}populateIntegrationServices(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,ae.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationServices()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}setActiveIntegrationService(e){this.activeServiceDetailsId=e}setActiveIntegrationCreateForm(e,t){this.createFormActiveServiceId=e,this.createFormActiveRuleId=t}setSelectedWorkspace(e){this.selectedWorkspace=e}setSelectedEntity(e){this.selectedEntity=e}setSelectedEntityVersion(e){this.selectedEntityVersion=e}resetSelectedWorkspace(){this.selectedWorkspace=null}resetSelectedEntity(){this.selectedEntity=null}resetSelectedEntityVersion(){this.selectedEntityVersion=null}resetAddIntegrationDependencies(){this.resetSelectedEntityVersion(),this.resetSelectedEntity(),this.resetSelectedWorkspace()}updateIsAdding(e){this.isAdding=e}updateSourceConflicting(e){this.sourceConflicting=e}readTeamIntegrations(){return(0,ie.toJS)(this.teamIntegrations)}updateIdentityResponse(e){this.authDetails=me.get(e,"body.handover")}updateIdentityResponseStatus(e,t){this.errorFetchingAuthDetails=e,this.authDetailsError=t}setAuthDetails(e){this.authDetails=e}readAuthDetails(){return(0,ie.toJS)(this.authDetails)}defaultSortTeamIntegrations(e){const t=me.filter(e,(e=>!!e.statusCount.failed)),n=me.sortBy(t,(e=>me.toLower(e.ruleName))),o=me.sortBy(me.difference(e,n),(e=>me.toLower(e.ruleName)));return me.concat(n,o)}updateRunsPageResponseStatus(e,t,n){this.loadingRunLogPage=e,this.errorInFetchingRunLogPageData=t,this.runLogPageErrorDetails=n}updateRunsPageResponse(e){this.runLogPageData=e}readIntegrationRunLogData(){return(0,ie.toJS)(this.runLogPageData)}updateRefreshingRunLog(e){this.refreshingRunLog=e}addPreferredEntity(e,t){const n={entityType:e,entityId:t};me.some(this.preferredEntities,n)||this.preferredEntities.push(n)}getIntegrationClassDetails(e){return this.loadingIntegrationClass=!0,new Promise(((t,n)=>{de.default.fetchIntegrationClassDetails(e).then((e=>{const n=me.get(e,"body.data");200!==e.status||me.isEmpty(n)?this.errorFetchingIntegrationClass=e:(this.integrationClass=n,this.errorFetchingIntegrationClass=!1),this.loadingIntegrationClass=!1,t()})).catch((t=>{pm.logger.error("Error in fetching integration class details",e,t),this.errorFetchingIntegrationClass=t,this.loadingIntegrationClass=!1,n(t)}))}))}getIntegrationInstanceDetails(e){this.loadingIntegrationInstance=!0,pe.default.fetchIntegrationInstanceDetails(e).then((e=>{const t=me.get(e,"body.data");200!==e.status||me.isEmpty(t)?this.errorFetchingIntegrationInstance=e:(t.allowedActions=me.get(e,"body.meta.allowedActions"),this.integrationInstance=t,this.errorFetchingIntegrationInstance=!1),this.loadingIntegrationInstance=!1})).catch((t=>{pm.logger.error("Error in fetching integration instance details",e,t),this.errorFetchingIntegrationInstance=t,this.loadingIntegrationInstance=!1}))}getIntegrationClasses(){return me.isEmpty(this.availableIntegrationClasses)&&this.populateIntegrationClasses(),this.availableIntegrationClasses}getIntegrationServices(){return me.isEmpty(this.availableIntegrationServices)&&this.populateIntegrationServices(),this.availableIntegrationServices}}).prototype,"activeIntegrationsView",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.INTEGRATIONS_VIEW.TEAM}}),i=ge(o.prototype,"serviceId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r=ge(o.prototype,"activeServiceDetailsId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=ge(o.prototype,"ruleId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=ge(o.prototype,"teamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=ge(o.prototype,"availableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=ge(o.prototype,"loadingAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=ge(o.prototype,"loadingIntegrationClasses",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=ge(o.prototype,"loadingIntegrationServices",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=ge(o.prototype,"errorFetchingAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=ge(o.prototype,"availableIntegrationsErrorDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=ge(o.prototype,"filteredAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=ge(o.prototype,"filterByCategoryAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=ge(o.prototype,"integrationCategories",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=ge(o.prototype,"noTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=ge(o.prototype,"loadingTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),I=ge(o.prototype,"errorInFetchingTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=ge(o.prototype,"errorDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=ge(o.prototype,"ruleSpecificTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),S=ge(o.prototype,"ruleSpecificTeamIntegrationErrors",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=ge(o.prototype,"serviceDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T=ge(o.prototype,"ruleDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=ge(o.prototype,"noRuleSpecificTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=ge(o.prototype,"isHydrating",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=ge(o.prototype,"isAdding",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=ge(o.prototype,"categoryFilter",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),N=ge(o.prototype,"createFormActiveRuleId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=ge(o.prototype,"createFormActiveServiceId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=ge(o.prototype,"workspaces",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=ge(o.prototype,"entities",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=ge(o.prototype,"selectedWorkspace",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=ge(o.prototype,"selectedEntity",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=ge(o.prototype,"selectedEntityVersion",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=ge(o.prototype,"authDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F=ge(o.prototype,"errorFetchingAuthDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=ge(o.prototype,"authDetailsError",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=ge(o.prototype,"runLogPageData",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=ge(o.prototype,"loadingRunLogPage",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=ge(o.prototype,"errorInFetchingRunLogPageData",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=ge(o.prototype,"runLogPageErrorDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=ge(o.prototype,"sourceConflicting",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=ge(o.prototype,"refreshingRunLog",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=ge(o.prototype,"authType",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=ge(o.prototype,"availableIntegrationClasses",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=ge(o.prototype,"integrationCategories",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=ge(o.prototype,"availableIntegrationServices",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=ge(o.prototype,"availableIntegrationServicesByCategory",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=ge(o.prototype,"filteredIntegrationServices",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=ge(o.prototype,"preferredEntities",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=ge(o.prototype,"integrationClass",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=ge(o.prototype,"loadingIntegrationClass",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=ge(o.prototype,"errorFetchingIntegrationClass",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=ge(o.prototype,"integrationInstance",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=ge(o.prototype,"loadingIntegrationInstance",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=ge(o.prototype,"errorFetchingIntegrationInstance",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge(o.prototype,"setActiveIntegrationsView",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationsView"),o.prototype),ge(o.prototype,"setAuthType",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setAuthType"),o.prototype),ge(o.prototype,"setRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setRuleSpecificTeamIntegrations"),o.prototype),ge(o.prototype,"resetRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"resetRuleSpecificTeamIntegrations"),o.prototype),ge(o.prototype,"setServiceDetails",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setServiceDetails"),o.prototype),ge(o.prototype,"setRuleDetails",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setRuleDetails"),o.prototype),ge(o.prototype,"resetServiceDetails",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"resetServiceDetails"),o.prototype),ge(o.prototype,"setActiveIntegrationRule",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationRule"),o.prototype),ge(o.prototype,"updateCategoryfilter",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateCategoryfilter"),o.prototype),ge(o.prototype,"updateRuleSpecificTeamIntegrationsDataStatus",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRuleSpecificTeamIntegrationsDataStatus"),o.prototype),ge(o.prototype,"getRuleSpecificTeamIntegrationData",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getRuleSpecificTeamIntegrationData"),o.prototype),ge(o.prototype,"getTeamIntegrationsData",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getTeamIntegrationsData"),o.prototype),ge(o.prototype,"setIsHydrating",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsHydrating"),o.prototype),ge(o.prototype,"updateState",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateState"),o.prototype),ge(o.prototype,"updateData",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateData"),o.prototype),ge(o.prototype,"updateAvailableIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateAvailableIntegrations"),o.prototype),ge(o.prototype,"updateIntegrationCategories",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationCategories"),o.prototype),ge(o.prototype,"setAvailableIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setAvailableIntegrationServices"),o.prototype),ge(o.prototype,"setAvailableIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setAvailableIntegrationClasses"),o.prototype),ge(o.prototype,"getIntegrationCategoriesFromServices",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getIntegrationCategoriesFromServices"),o.prototype),ge(o.prototype,"updateIntegrationServicesPerCategory",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIntegrationServicesPerCategory"),o.prototype),ge(o.prototype,"updateFilteredIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFilteredIntegrationServices"),o.prototype),ge(o.prototype,"updateAvailableIntegrationsStatus",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateAvailableIntegrationsStatus"),o.prototype),ge(o.prototype,"setLoadingIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingIntegrationServices"),o.prototype),ge(o.prototype,"setLoadingIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingIntegrationClasses"),o.prototype),ge(o.prototype,"updateFilteredAvailableIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFilteredAvailableIntegrations"),o.prototype),ge(o.prototype,"updateFilterByCategoryAvailableIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFilterByCategoryAvailableIntegrations"),o.prototype),ge(o.prototype,"initializeFetchingTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"initializeFetchingTeamIntegrations"),o.prototype),ge(o.prototype,"initializeRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"initializeRuleSpecificTeamIntegrations"),o.prototype),ge(o.prototype,"refetchRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"refetchRuleSpecificTeamIntegrations"),o.prototype),ge(o.prototype,"refetchTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"refetchTeamIntegrations"),o.prototype),ge(o.prototype,"getAvailableIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getAvailableIntegrationClasses"),o.prototype),ge(o.prototype,"getAvailableIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getAvailableIntegrationServices"),o.prototype),ge(o.prototype,"populateIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"populateIntegrationClasses"),o.prototype),ge(o.prototype,"populateIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"populateIntegrationServices"),o.prototype),ge(o.prototype,"setActiveIntegrationService",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationService"),o.prototype),ge(o.prototype,"setActiveIntegrationCreateForm",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setActiveIntegrationCreateForm"),o.prototype),ge(o.prototype,"setSelectedWorkspace",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedWorkspace"),o.prototype),ge(o.prototype,"setSelectedEntity",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedEntity"),o.prototype),ge(o.prototype,"setSelectedEntityVersion",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setSelectedEntityVersion"),o.prototype),ge(o.prototype,"resetSelectedWorkspace",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"resetSelectedWorkspace"),o.prototype),ge(o.prototype,"resetSelectedEntity",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"resetSelectedEntity"),o.prototype),ge(o.prototype,"resetSelectedEntityVersion",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"resetSelectedEntityVersion"),o.prototype),ge(o.prototype,"resetAddIntegrationDependencies",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"resetAddIntegrationDependencies"),o.prototype),ge(o.prototype,"updateIsAdding",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIsAdding"),o.prototype),ge(o.prototype,"updateSourceConflicting",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateSourceConflicting"),o.prototype),ge(o.prototype,"updateIdentityResponse",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIdentityResponse"),o.prototype),ge(o.prototype,"updateIdentityResponseStatus",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateIdentityResponseStatus"),o.prototype),ge(o.prototype,"setAuthDetails",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"setAuthDetails"),o.prototype),ge(o.prototype,"updateRunsPageResponseStatus",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRunsPageResponseStatus"),o.prototype),ge(o.prototype,"updateRunsPageResponse",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRunsPageResponse"),o.prototype),ge(o.prototype,"updateRefreshingRunLog",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRefreshingRunLog"),o.prototype),ge(o.prototype,"addPreferredEntity",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"addPreferredEntity"),o.prototype),ge(o.prototype,"getIntegrationClassDetails",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getIntegrationClassDetails"),o.prototype),ge(o.prototype,"getIntegrationInstanceDetails",[ie.action],Object.getOwnPropertyDescriptor(o.prototype,"getIntegrationInstanceDetails"),o.prototype),o)},"./monitors/components/common/EmptyState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),i=n.n(s);function r(e){const{imageSrc:t,title:n,body:s,action:r,subText:a,className:l,imageClass:c,illustration:d}=e;return o.createElement("div",{className:i()("empty-state",l)},d&&d,t&&o.createElement("img",{className:"empty-state__image",src:t}),c&&o.createElement("div",{className:i()("empty-state__image",c)}),n&&o.createElement("h3",{className:"pm-h3 empty-state__title"},n),s&&o.createElement("div",{className:"empty-state__body"},s),r&&o.createElement("div",{className:"empty-state__action"},r),a&&o.createElement("div",{className:"empty-state__subtext"},a))}},"./monitors/components/common/FileUploader.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");const u=s.default.input.attrs({type:"file"})`
  height: 0.1px;
  opacity: 0;
  width: 0.1px;
  z-index: -1;
  &:focus + label {
    box-shadow: ${e=>e.theme["shadow-focus"]};
    outline: none;
  }
`,p=s.default.label`
  user-select: none;
  color: ${e=>e.isDisabled?e.theme["content-color-tertiary"]:e.theme["content-color-primary"]};
  font-size: ${e=>e.theme["text-size-m"]};
  width: max-content;
  height: ${e=>e.theme["size-m"]};
  vertical-align: middle;
  line-height: ${e=>`calc(${e.theme["line-height-xxl"]} - 2px)`};
  display: inline-block;
  padding: ${e=>`${e.theme["spacing-zero"]} ${e.theme["spacing-m"]}`};
  border: ${e=>e.theme["button-outline-border"]};
  border-color: ${e=>e.theme["button-outline-border-color"]};
  box-sizing: border-box;
  border-radius: ${e=>e.theme["border-radius-default"]};
  margin-top: ${e=>e.theme["spacing-s"]};
  &:hover {
    cursor: ${e=>e.isDisabled?"not-allowed":"pointer"};
    border-color: ${e=>!e.isDisabled&&e.theme["button-outline-hover-border-color"]};
  }
`,m=s.default.div`
  width: 320px;
  height: 32px;
  border-radius: ${e=>e.theme["border-radius-default"]};
  padding-left: ${e=>e.theme["spacing-m"]};
  display: flex;
  justify-content: space-between;
  align-items: 'center';
  background-color: ${e=>e.theme["background-color-secondary"]};
  & .aether-remove-uploaded-file-btn {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }
  color: ${e=>e.theme["content-color-primary"]};
`,h=s.default.div`
  display: flex;
  align-items: center;
  width: 258px;
`,g=o.forwardRef((function(e,t){const{label:n,infoText:s,helperText:i,actionLabel:r,id:g,name:f,className:b,isDisabled:y,multiple:v,onChange:I,accept:_,autoFocus:E,prevFileDetails:S,"data-testid":C,"data-click":T}=e,[A,j]=(0,o.useState)([]);let w=(0,o.useRef)(null);w=t||w;const O=(0,o.useRef)(null),N=e=>o.createElement(m,{className:"aether-file-list-wrapper","data-aether-id":"aether-fileUploader",key:e.name},o.createElement(h,null,o.createElement(a.default,{type:"body-medium",isTruncated:!0},e.name)),o.createElement(l.default,{className:"aether-remove-uploaded-file-btn",onClick:()=>{(e=>{const t=w.current&&w.current.files,n=new DataTransfer;for(let o=0;o<t.length;o+=1){const s=t[o];e!==s.name&&n.items.add(s)}j(A.filter((t=>e!==t.name))),w.current.files=n.files,I&&!y&&I(w.current.files)})(e.name)},type:"tertiary",icon:"icon-action-close-stroke"}));return o.createElement(c.default,{direction:"column"},o.createElement(d.default,{size:"medium",infoText:s},n),i&&o.createElement(a.default,{type:"body-small",color:"content-color-secondary",lineLengthType:"none"},i),o.createElement(u,{id:g,ref:w,onChange:e=>{const t=e.target,n=t&&t.files;0!==n.length?(j(Object.values(n).map((e=>({name:e.name})))),O.current=n,I&&!y&&I(n)):w.current.files=O.current},multiple:v,disabled:y,accept:_,name:f,className:b,"data-testid":C,"data-click":T,autoFocus:E}),o.createElement(p,{"data-aether-id":"aether-label",htmlFor:g,isDisabled:y},r),S&&!A.length&&o.createElement(c.default,{direction:"column",padding:{paddingTop:"spacing-l"},gap:"spacing-xs"},S.map(N)),A.length>0&&o.createElement(c.default,{direction:"column",padding:{paddingTop:"spacing-l"},gap:"spacing-xs"},A.map(N)))}));g.defaultProps={helperText:"",infoText:"",actionLabel:"Add Files",isDisabled:!1,multiple:!1,accept:"*",name:"",className:"",autoFocus:!1,"data-testid":"aether-file-uploader","data-click":""},g.propTypes={label:r().string.isRequired,infoText:r().string,onChange:r().func.isRequired,helperText:r().string,actionLabel:r().node,id:r().string.isRequired,name:r().string,className:r().string,isDisabled:r().bool,multiple:r().bool,accept:r().string,autoFocus:r().bool,prevFileDetails:r().array,"data-testid":r().string,"data-click":r().string},g.displayName="FileUploader",t.default=g},"./monitors/components/common/MonitorDependencyListItem.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./version-control/common/ForkLabel.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a);const c=(0,r.observer)((({item:e,className:t,type:n,hideForkLabelTooltip:r=!0})=>{if(!e)return null;if(typeof e!=typeof{}||!e.name||!e.type)return pm.logger.error("MonitorDependencyListItem:Invalid Item Type",e),null;const{type:a,name:c,isForked:d,id:u,forkLabel:p}=e,m="create-monitor-collection-item",h={id:u,forkLabel:p,model:a},g={id:"environment"===a?e.baseEnvironmentUid:e.baseCollectionUid,model:a};return o.createElement("div",{className:l()({[t]:!!t,[m]:!0})},o.createElement("div",{className:`${m}__name`,title:c},"link"===n?o.createElement(i.default,{type:"link-subtle",className:`${m}__link`},c):c),d?o.createElement("div",{className:`${m}__qualifiers`},o.createElement(s.default,{hideForkLabelTooltip:r,className:`${m}__fork-label`,label:e.forkLabel,forkedEntity:h,baseEntity:g})):null)}));t.default=c},"./monitors/components/create-edit-form/MonitorForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./onboarding/src/common/LaunchDarkly.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),v=n("./js/components/base/XPaths/XPath.js"),I=n("./js/utils/GetUniqueIdHelper.js"),_=n("./monitors/components/common/MonitorDependencyListItem.js"),E=n("./monitors/components/create-edit-form/MonitorScheduleSelector.js"),S=n("./js/components/base/Tooltips.js"),C=n("./js/components/base/Buttons.js"),T=n("./js/components/base/InfoButton.js"),A=n("./appsdk/components/link/Link.js"),j=n("./js/constants/AppUrlConstants.js"),w=n("./monitors/utils/messages/index.js"),O=n("./monitors/constants.js"),N=n("./monitors/components/create-edit-form/MonitorFormHelperFunctions.js"),R=n("./monitors/components/uptime/UptimeBanner.js"),P=n("./monitors/utils/messages/UptimeMessages.js"),D=n("./js/modules/services/AnalyticsService.js"),M=n("./monitors/components/common/FileUploader.js"),x=n("./node_modules/lodash/lodash.js");const L=i.default.div`
  width: ${e=>"tab"===e.type?"300px":"480px"};
  color: var(--content-color-secondary);
  font-size: 11px;
  line-height: var(--spacing-l);
  font-weight: 400;
`;const k=i.default.span`
  font-size: 11px;
`;let F=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.RenderHelperText=(e,t,n)=>s.createElement(k,null,s.createElement(l.default,{type:"body-small"},e),s.createElement(l.default,{type:"link-subtle"},s.createElement(A.default,{to:n,target:"_blank"},t))),this.RenderCollection=e=>"create"===e?this.props.disableCollectionSelection?s.createElement(c.default,{isDisabled:!0,label:s.createElement(d.default,{text:w.MONITOR_FORM.collection}),className:"tab-disabled-input",value:this.props.getSelectedOptionName(this.props.ownCollections,this.props.selectedOptions.collectionId,w.MONITOR_FORM.collectionSelect,"id",!1)}):this.renderWithTooltip(this.props.isOffline,this.renderCollectionSelect()):s.createElement(c.default,{isDisabled:!0,label:s.createElement(d.default,{text:w.MONITOR_FORM.collection}),className:"tab-disabled-input",value:this.props.getSelectedOptionName(this.props.allWorkspaceCollections,this.props.selectedOptions.collectionId,"Select a collection","id",!1)}),this.ConfirmFormAction=e=>"create"===e?s.createElement(v.default,{identifier:"create"},s.createElement(C.Button,{type:"primary",className:"tab-button_cta--primary",onClick:this.props.createMonitor,disabled:this.props.invalidInput||this.props.isOffline||this.props.isSaving,tooltip:this.props.isOffline&&w.TOOLTIP_TEXT.isOffline},w.MONITOR_FORM.labels.button.create)):s.createElement(v.default,{identifier:"edit"},s.createElement(C.Button,{type:"primary",className:"tab-button_cta--primary",onClick:this.props.updateMonitor,disabled:this.props.invalidInput||this.props.isOffline,tooltip:this.props.isOffline&&w.TOOLTIP_TEXT.isOffline},w.MONITOR_FORM.labels.button.edit)),this.AdvancedSection=e=>s.createElement(u.default,{label:w.MONITOR_FORM.setDelay,isChecked:this.props.requestDelay.enabled,onChange:"create"===e?()=>this.props.onRequestDelayChange(!this.props.requestDelay.enabled):e=>this.props.onRequestDelayChange(e)}),this.RenderHeader=()=>"modal"===this.props.type?void 0:s.createElement(p.default,{type:"h1",text:this.props.isEditable?w.MONITOR_FORM.editMonitor:w.MONITOR_FORM.header,color:"content-color-primary",hasBottomSpacing:!0}),this.renderWithTooltip=(e,t,n=w.TOOLTIP_TEXT.isOffline)=>e?s.createElement(m.default,{placement:"bottom",content:n},s.createElement("div",null,t)):t,this.renderEnvironmentSelect=()=>{const{selectedOptions:{environmentId:e},ownEnvironments:t,collectionAndEnvironmentLoading:n,onSelectEnvironment:o,isOffline:i,isEditable:r}=this.props,a=x.find(t,[r?"uid":"id",e]);return s.createElement(h.default,{className:"create-new-monitor__body__field__dropdown",menuMaxHeight:w.MAX_DROPDOWN_SIZE,label:s.createElement(d.default,{text:w.MONITOR_FORM.environment}),isClearable:!0,isDisabled:i,placeholder:w.MONITOR_FORM.noEnvironment,isLoading:n,emptyStateMessage:w.MONITOR_FORM.warnings.noEnvironmentFound,options:x.map(t,(e=>({label:e.name,value:r?e.uid:e.id,environment:e}))),customOptionComponent:({environment:e})=>s.createElement("div",{className:"create-new-monitor__body__field__dropdown__collection-item-container"},s.createElement(_.default,{item:e})),value:e&&{label:a&&a.name?s.createElement(_.default,{item:a}):w.MONITOR_FORM.noEnvironment,value:e},onChange:e=>o(e&&e.value?e.value:null),helperText:this.RenderHelperText(w.MONITOR_FORM.environmentPlaceholder,w.MONITOR_FORM.learnMore,j.ENVIRONMENT_DOCS)})},this.renderCollectionSelect=()=>{const{selectedOptions:{collectionId:e},ownCollections:t,collectionAndEnvironmentLoading:n,onSelectCollection:o,isOffline:i}=this.props,r=x.find(t,["id",e]);return s.createElement(h.default,{label:s.createElement(d.default,{text:w.MONITOR_FORM.collection}),className:"create-new-monitor__body__field__dropdown",customOptionComponent:({collection:e})=>s.createElement("div",{className:"create-new-monitor__body__field__dropdown__collection-item-container"},s.createElement(_.default,{item:e})),menuMaxHeight:w.MAX_DROPDOWN_SIZE,isClearable:!1,isDisabled:i,isSearchable:!0,placeholder:w.MONITOR_FORM.collectionSelect,isLoading:n,emptyStateMessage:w.MONITOR_FORM.noCollections,options:x.map(this.props.ownCollections,(e=>({label:e.name,value:e.id,collection:e}))),value:r&&{label:s.createElement("div",{className:"create-new-monitor__body__field__dropdown__collection-item-container-selected"},s.createElement(_.default,{item:N.default.getSelectedOption(this.props.ownCollections,x.get(this.props,"selectedOptions.collectionId"))})),value:e},onChange:({collection:e})=>o(e)})},this.renderVersionSelect=()=>{const{onSelectVersion:e,getSelectedOptionName:t,ownVersions:n,selectedOptions:o}=this.props,i=t(n,x.get(o,"versionTag"),null,"id",!1),r=x.get(o,"versionTag");return s.createElement(h.default,{label:s.createElement(d.default,{text:w.MONITOR_FORM.collectionVersionTag}),className:"create-new-monitor__body__field__dropdown",isClearable:!1,onChange:({value:t})=>e(t),placeholder:w.MONITOR_FORM.selectVersionTag,options:x.map(this.props.ownVersions,(({id:e,name:t})=>({value:e,label:t}))),value:i?{label:i,value:r}:void 0,helperText:this.props.fetchVersionText(this.props.ownVersions.length)})},this.enterKeyHandler=(e,t)=>{"Enter"===t.key&&e()},this.validate=e=>{let t;const{invalidMonitorName:n,type:o,selectedOptions:s,isEditable:i,editFormLoading:r}=this.props;if("monitorName"===e)n&&s.nameValidationFailed?(t=!0,this.validationMessage=this.props.errors.name):("modal"===o&&n||x.isEmpty(s.name)&&i&&!r)&&(t=!0,this.validationMessage=w.MONITOR_FORM.noEmptyName);else t=!1;return t},this.isUptimeEnabled=e=>a.launchDarkly.getFlag(e,!1),this.state={uniqueName:I.default.generateUniqueId(),showRegionTooltip:!1,target:null}}componentDidMount(){D.default.addEventV2({category:O.MONITOR_ANALYTICS_CATEGORY,action:"view_create",label:this.props.type})}render(){const{isEditable:e,isOffline:t,selectedOptions:n,onMonitorNameChange:o,onMonitorScheduleChange:i,invalidInput:r}=this.props;return s.createElement("div",{className:N.default.getFormShellClass(this.props.type)},s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--name",id:"monitor-form-name-section"},s.createElement("div",{id:"monitor-form-header"},this.RenderHeader()),s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form"},s.createElement(v.default,{identifier:"monitorName"},e||this.props.hideCollection?s.createElement(c.default,{label:s.createElement(d.default,{text:w.MONITOR_FORM.name}),onKeyDown:this.enterKeyHandler.bind(this,(()=>!r&&this.props.updateMonitor())),onChange:({target:{value:e}})=>{o(e)},value:n.name,validationStatus:this.validate("monitorName")&&"error",validationMessage:this.validationMessage,ref:"monitorName"}):s.createElement(c.default,{label:s.createElement(d.default,{text:w.MONITOR_FORM.name}),ref:"monitorName",value:n.name,validationStatus:this.validate("monitorName")&&"error",validationMessage:this.validationMessage,onChange:({target:{value:e}})=>o(e),onKeyDown:this.enterKeyHandler.bind(this,(()=>!r&&this.props.onCreateMonitor()))}))),"tab"===this.props.type&&!e&&this.isUptimeEnabled("monitor_2577_uptime_monitoring_beta")&&s.createElement("div",{className:"create-new-monitor__body__input__helptext monitor-form-help-text monitor-uptime-banner"},s.createElement(R.default,{text:P.BANNER_CARD_UPTIME.text,subText:P.BANNER_CARD_UPTIME.subText,badgeText:P.BANNER_CARD_UPTIME.badgeText,buttonText:P.BANNER_CARD_UPTIME.buttonText,isOffline:t,linkText:P.BANNER_CARD_UPTIME.linkText})))),!this.props.hideCollection&&s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--environment",id:"monitor-form-collection-section"},s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form"},s.createElement(v.default,{identifier:"collection"},e?this.RenderCollection("edit"):this.RenderCollection("create"))))),"history_single"!==this.props.from&&"history_date_group"!==this.props.from&&(x.get(n,"collectionId")||x.get(n,"collectionUid"))&&s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--version-select",id:"monitor-form-version-section"},s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form"},s.createElement(v.default,{identifier:"version"},this.renderWithTooltip(t,this.renderVersionSelect()))))),s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--environment",id:"monitor-form-environment-section"},s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form"},s.createElement(v.default,{identifier:"environment"},this.renderWithTooltip(t,this.renderEnvironmentSelect()))))),s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--fileUpload"},s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form monitor-file-upload"},s.createElement(M.default,{label:w.MONITOR_FORM.dataFile.selectLabel,infoText:w.MONITOR_FORM.dataFile.infoText,helperText:this.RenderHelperText(w.MONITOR_FORM.dataFile.helperText,w.MONITOR_FORM.learnMore,j.MONITORING_DATA_FILE_DOCS),id:"modal"===this.props.type?"monitor-form-file-uploader-in-modal":"monitor-form-file-uploader",accept:w.MONITOR_FORM.dataFile.acceptedFormats,onChange:this.props.handleFileUpload,actionLabel:this.props.existingDataFile?w.MONITOR_FORM.dataFile.updateLabel:w.MONITOR_FORM.dataFile.actionLabel,prevFileDetails:this.props.existingDataFile||this.props.selectedOptions.dataFile}),n.fileValidationFailed&&s.createElement("div",{className:"monitor-file-upload__error"},s.createElement(y.default,{className:"error-icon",color:"content-color-error"})," ",this.props.errors.dataFile&&this.props.errors.dataFile.message)))),s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--frequency",id:"monitor-form-scheduler-section"},s.createElement("div",{className:"create-new-monitor__body__label--schedule-selector"},s.createElement(d.default,{text:w.MONITOR_FORM.runMonitor,infoText:w.MONITOR_FORM.frequentRunsInfo}),s.createElement(L,{type:this.props.type},this.RenderHelperText(w.MONITOR_FORM.frequentRunsWarn,w.MONITOR_FORM.usageLimits,`${pm.appUrl}/dpxy/dashboard/usage`))),s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form"},s.createElement(v.default,{identifier:"scheduler"},s.createElement(E.default,{interval:x.get(this.props.config,"interval","*"),intervalType:x.get(this.props.config,"intervalType","week-timer"),time:x.get(this.props.config,"time",String((new Date).getHours())),minuteTimerDisabled:!this.props.enableMinuteSelection,onChange:i,isOffline:t}))))),s.createElement("div",{className:"create-new-monitor__body__input-group create-new-monitor__body__input-group--regions",id:"monitor-form-advanced-section-with-regions"},s.createElement("div",{className:"create-new-monitor__body__input"},s.createElement("div",{className:"create-new-monitor__body__field tab-form modal-vertical"},s.createElement("div",{className:"create-new-monitor__body__select-group--regions"},s.createElement(v.default,{identifier:"auto"},s.createElement(g.default,{label:w.MONITOR_FORM.regions,name:this.state.uniqueName,direction:"column",value:this.props.selectedRegionMode,onChange:this.props.onRegionSelectorChange,helperText:this.RenderHelperText(w.MONITOR_FORM.regionSelect,w.MONITOR_FORM.learnMore,j.MONITORING_REGION_DOCS)},s.createElement(f.default,{label:w.MONITOR_FORM.regionAutoSelect,value:"auto"})))),s.createElement("div",{ref:"manualListing",onMouseOver:this.props.onShowTooltip,onMouseOut:this.props.onHideTooltip,className:"create-new-monitor__body__select-group--regions-manual"},s.createElement(v.default,{identifier:"manual"},s.createElement(g.default,{direction:"column",value:this.props.selectedRegionMode,onChange:this.props.onRegionSelectorChange},s.createElement(f.default,{label:w.MONITOR_FORM.regionManualSelect,value:"manual",isDisabled:!this.props.enableRegionSelection||x.isEmpty(this.props.regions)||this.props.isOffline})))))),!this.props.enableRegionSelection&&s.createElement(S.Tooltip,{show:this.props.showTooltip,target:this.refs.manualListing,placement:"right"},s.createElement(S.TooltipBody,null,w.MONITOR_FORM.upgrade)),s.createElement("div",{className:`create-new-monitor__body__input create-new-monitor__body__input--regions create-new-monitor__body__input-regions--${this.props.selectedRegionMode}`},s.createElement(v.default,{identifier:"regions"},s.createElement("div",{className:"create-new-monitor__body__field tab-form"},x.map(this.props.regions,(e=>s.createElement("div",{className:"create-new-monitor__body__input__checkbox tab-region-listing",key:e.id},s.createElement(u.default,{isDisabled:!e.enabled,onMouseEnter:()=>this.props.handleMouseOver(e),onMouseLeave:this.handleMouseOut,isChecked:x.includes(this.props.selectedOptions.regions,e.id),onChange:this.props.onRegionChange.bind(this,e.id),label:e.name}),s.createElement("div",null,e.ip?s.createElement("span",{onClick:e.enabled&&this.props.onRegionChange.bind(this,e.id)},": "+e.ip,s.createElement("span",{className:"create-new-monitor__body__input__checkbox-icon"},s.createElement(T.default,{tooltipPlacement:"right",tooltip:w.MONITOR_FORM.allowListIp}))):"")))),s.createElement(S.Tooltip,{show:this.state.showRegionTooltip,target:x.get(this.refs,this.state.target),placement:"right"},s.createElement(S.TooltipBody,null,w.MONITOR_FORM.upgradeStaticIp))))),s.createElement("div",{className:"create-new-monitor__body__show-more"},s.createElement("div",{className:"advanced-section"},s.createElement("div",{className:"advanced-section advanced-section--notifications"},s.createElement("div",{className:"advanced-section__checkbox"},s.createElement(u.default,{isChecked:this.props.notifications.enabled,onChange:()=>this.props.onNotificationChange(!this.props.notifications.enabled),label:w.MONITOR_FORM.email})),this.props.notifications.enabled&&s.createElement("div",{className:"advanced-section__field advanced-section__field--notifications"},x.map(x.size(this.props.notifications.recipients)<5?this.props.notifications.recipients.concat([""]):this.props.notifications.recipients,((e,t)=>{const n=x.get(this.props.errors,`recipients.${t}`);return s.createElement("div",{key:"recipient-text-box-div-"+t},!x.size(e)&&x.size(this.props.notifications.recipients)<5&&s.createElement("div",{className:"advanced-section__field__meta advanced-section__field--email-limit"},s.createElement(d.default,{type:"secondary",text:w.MONITOR_FORM.emailAdd,infoText:w.MONITOR_FORM.notification})),s.createElement(c.default,{className:"advanced-section__field__input",ref:"recipient-"+t,value:e,validationStatus:n&&"error",onChange:({target:{value:e}})=>this.props.onNotificationChange(!0,t,e)}),n&&s.createElement("div",{className:"create-new-monitor__body__input-error advanced-section__field__meta"},n.message))})),s.createElement("div",{className:"advanced-section__field__meta advanced-section__field--notification-limit"},s.createElement(b.default,{alignItems:"center"},s.createElement("span",null,w.MONITOR_FORM.stopNotification),s.createElement("div",{className:"monitor-notification-limit__input"},s.createElement(c.default,{validationStatus:!this.props.notificationLimit.isValid&&"error",value:this.props.notificationLimit.value,type:"number",min:0,max:this.props.maxNotificationLimit+1,onChange:({target:{value:e}})=>this.props.onNotificationLimitChange(e)})),s.createElement("span",null,w.MONITOR_FORM.consecutiveFailures)),!this.props.notificationLimit.isValid&&s.createElement("div",{className:"advanced-section__field-error"},w.MONITOR_FORM.consecutiveFailureInvalidRange," ",this.props.maxNotificationLimit+1)))),s.createElement("div",{className:"advanced-section advanced-section--retry"},s.createElement("div",{className:"advanced-section__checkbox"},s.createElement(u.default,{label:w.MONITOR_FORM.retryFail,isChecked:this.props.retry.enabled,onChange:()=>this.props.onRetryChange(!this.props.retry.enabled)}),s.createElement("span",{className:"advanced-section__checkbox__label advanced-section__checkbox-label-helper"},w.MONITOR_FORM.retryWarn)),this.props.retry.enabled&&s.createElement("div",{className:"advanced-section__select advanced-section__select--retry"},s.createElement("span",null,w.MONITOR_FORM.retry),this.renderWithTooltip(t,s.createElement(h.default,{className:"advanced-section__select__dropdown--retry",isClearable:!1,isSearchable:!1,isDisabled:t,onChange:({value:e})=>this.props.onRetryChange(!0,e),options:[...new Array(this.props.maxRetryAttempts)].map(((e,t)=>({value:t+1,label:t+1}))),value:{value:this.props.retry.attempts,label:this.props.retry.attempts}})),s.createElement("span",null,this.props.retry.attempts>1?"times":"time"),s.createElement(T.default,{tooltipPlacement:"right-top",tooltip:w.MONITOR_FORM.retryMonitorRun,disabled:this.props.isOffline}))),s.createElement("div",{className:"advanced-section advanced-section--timeout"},s.createElement("div",{className:"advanced-section__checkbox"},s.createElement(u.default,{label:w.MONITOR_FORM.setReqTimeout,isChecked:this.props.requestTimeout.enabled,onChange:this.props.onRequestTimeoutChange.bind(this,!this.props.requestTimeout.enabled,void 0)}),s.createElement(d.default,{type:"secondary",infoText:this.props.enablePremiumCluster?w.MONITOR_FORM.requestTimeoutInfo.paid:w.MONITOR_FORM.requestTimeoutInfo.free})),this.props.requestTimeout.enabled&&s.createElement("div",null,s.createElement("div",{className:"advanced-section__field advanced-section__field--timeout"},s.createElement("div",{className:"advanced-section__field__input"},this.renderWithTooltip(t,s.createElement(c.default,{type:"number",value:this.props.requestTimeout.timeout,validationStatus:(this.props.requestTimeout.timeout<1||this.props.requestTimeout.timeout>(this.props.enablePremiumCluster?w.MONITORING_CONSTANTS.requestTimeoutMaxValue.paid:w.MONITORING_CONSTANTS.requestTimeoutMaxValue.free))&&"error",isDisabled:this.props.isOffline,onChange:({target:{value:e}})=>this.props.onRequestTimeoutChange(!0,e)}))),s.createElement("span",null,"ms")),(this.props.requestTimeout.timeout<1||this.props.requestTimeout.timeout>(this.props.enablePremiumCluster?w.MONITORING_CONSTANTS.requestTimeoutMaxValue.paid:w.MONITORING_CONSTANTS.requestTimeoutMaxValue.free))&&s.createElement("div",{className:"advanced-section__field-error"},this.props.enablePremiumCluster?w.MONITOR_FORM.requestTimeoutValueRange.paid:w.MONITOR_FORM.requestTimeoutValueRange.free))),s.createElement("div",{className:"advanced-section advanced-section--delay"},s.createElement("div",{className:"advanced-section__checkbox"},e?this.AdvancedSection("edit"):this.AdvancedSection("create")),this.props.requestDelay.enabled&&s.createElement("div",null,s.createElement("div",{className:"advanced-section__field advanced-section__field--delay"},s.createElement("div",{className:"advanced-section__field__input"},this.renderWithTooltip(t,s.createElement(c.default,{type:"number",value:this.props.requestDelay.delay,isDisabled:this.props.isOffline,validationStatus:(this.props.requestDelay.delay<1||this.props.requestDelay.delay>(this.props.enablePremiumCluster?w.MONITORING_CONSTANTS.requestDelayMaxValue.paid:w.MONITORING_CONSTANTS.requestDelayMaxValue.free))&&"error",onChange:({target:{value:e}})=>this.props.onRequestDelayChange(!0,e)}))),s.createElement("span",null,"ms")),(this.props.requestDelay.delay<1||this.props.requestDelay.delay>(this.props.enablePremiumCluster?w.MONITORING_CONSTANTS.requestDelayMaxValue.paid:w.MONITORING_CONSTANTS.requestDelayMaxValue.free))&&s.createElement("div",{className:"advanced-section__field-error"},this.props.enablePremiumCluster?w.MONITOR_FORM.requestDelayValueRange.paid:w.MONITOR_FORM.requestDelayValueRange.free))),s.createElement("div",{className:"advanced-section advanced-section--redirects"},s.createElement("div",{className:"advanced-section__checkbox"},s.createElement(u.default,{label:w.MONITOR_FORM.redirects,isChecked:this.props.followRedirects,onChange:this.props.onFollowRedirectsChange.bind(this,this.props.followRedirects)}))),s.createElement("div",{className:"advanced-section advanced-section--ssl"},s.createElement("div",{className:"advanced-section__checkbox"},s.createElement(u.default,{label:w.MONITOR_FORM.sslValidation,isChecked:this.props.strictSSL,onChange:this.props.onStrictSSLChange.bind(this,this.props.strictSSL)})))))),this.props.showFormControls&&s.createElement("div",{className:"tab-footer"},s.createElement("div",{className:"tab-button_cta create-new-monitor__body"},s.createElement(C.Button,{type:"secondary",onClick:this.props.isEditable?this.props.cancelEditMonitor:this.props.cancelCreateMonitor,disabled:this.props.isOffline,tooltip:this.props.isOffline&&w.TOOLTIP_TEXT.isOffline},"Cancel"),e?this.ConfirmFormAction("edit"):this.ConfirmFormAction("create"))))}})||o},"./monitors/components/create-edit-form/MonitorFormComponent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var o,s,i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./node_modules/moment-timezone/index.js"),d=n.n(c),u=n("../../node_modules/mobx/lib/mobx.module.js"),p=n("./node_modules/postman-collection/index.js"),m=n("./js/components/base/LoadingIndicator.js"),h=n("./js/components/new-button/CreationError.js"),g=n("./monitors/components/common/EmptyState.js"),f=n("./js/utils/util.js"),b=n("./js/utils/GetUniqueIdHelper.js"),y=n("./js/modules/controllers/UserController.js"),v=n("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),I=n("./js/stores/TeamStore.js"),_=n("./js/stores/SyncStatusStore.js"),E=n("./js/stores/StoreManager.js"),S=n("./js/stores/ActiveWorkspaceStore.js"),C=n("./js/models/Cron.js"),T=n("./js/modules/services/AnalyticsService.js"),A=n("./appsdk/workbench/TabService.js"),j=n("./monitors/services/UrlService.js"),w=n("./js/services/NavigationService.js"),O=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoMonitor.js"),N=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),R=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),P=n("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),D=n("./collaboration/workspace/interface/ActiveWorkspacePermissionInterface.ts"),M=n("./monitors/utils/messages/index.js"),x=n("./js/constants/MonitoringErrors.js"),L=n("./monitors/constants.js"),k=n("./monitors/components/create-edit-form/MonitorForm.js"),F=n("./monitors/components/create-edit-form/MonitorFormHelperFunctions.js"),B=n("./monitors/stores/domain/MasterMonitorStore.js"),U=n("./monitors/stores/domain/MonitorPermissionStore.js"),V=n("./node_modules/lodash/lodash.js");const G=/^[^@]+@[^.]+\..+$/,z=["history_single","history_multiple","history_date_group"];let H=(0,r.observer)(((s=class extends i.Component{constructor(e){super(e),this.loadWorkspaceCollectionsAndEnvironments=async()=>{let e,t;this.setState({collectionAndEnvironmentLoading:!0});try{[e,t]=await Promise.all([(0,N.subscribeMeta)(this.activeWorkspaceId,{permissions:this.constructor.collectionPermissions,parent:["workspace"]}),(0,R.subscribeMeta)(this.activeWorkspaceId,{parent:["workspace"]})])}catch(e){pm.logger.error("MonitorForm: Error loading collection and environments meta list",e),pm.toasts.error(M.LOADING_ERROR.collectionsAndEnvironments)}finally{this.setState({collections:e,environments:t,collectionAndEnvironmentLoading:!1})}},this.loadForm=e=>i.createElement("div",{className:l()({[`create-new-monitor-${e}__content`]:!0,[`step${this.props.activeStep}`]:!0})},this.renderForm()),this.loadOwnEnvironments=()=>{let e=this.state.environments.list,t=V.sortBy(e,(e=>e.name.toLowerCase())),n=V.concat({id:null,name:"No Environment"},t);this.setState({ownEnvironments:n})},this.handleCollectionFromContainer=()=>{switch(this.props.activeSourceFromContainer){case"new":this.setState({...this.state,selectedOptions:{...this.state.selectedOptions,collectionId:""}});break;case"workspace":const e=this.props.selectedOptions.collectionId,t=V.find(this.state.collections.list,{id:e}),n=V.get(this.props,"collectionFromContainer.name")||V.get(t,"name");this.setState({...this.state,selectedOptions:{...this.state.selectedOptions,name:V.isEmpty(n)?"":n,collectionId:e}})}y.default.get().then((e=>{this.setState({notifications:{enabled:!0,recipients:[e.email]}})})),this.setState({isLoadingRegions:!0}),this.loadRegions(),this.loadOwnEnvironments(),z.includes(this.props.from)||"workspace"!==this.props.activeSourceFromContainer||this.handleVersionFetchRetry(this.props.collectionId)},this.handleCollectionFromAPIContainer=()=>{switch(this.props.activeSourceFromContainer){case"generate-new":this.setState({...this.state,selectedOptions:{...this.state.selectedOptions}});break;case"use-existing":this.setState({...this.state,selectedOptions:{...this.state.selectedOptions,collectionName:"",collectionId:this.props.collectionFromContainer.collectionUid}}),this.handleVersionFetchRetry(this.props.collectionFromContainer.collectionUid)}y.default.get().then((e=>{this.setState({notifications:{enabled:!0,recipients:[e.email]}})})),this.setState({isLoadingRegions:!0}),this.loadRegions(),this.loadOwnEnvironments()},this.handleVersionFetchRetry=e=>{this.setState({isLoadingVersions:!0,errorFetchingVersions:!1},(()=>{F.default.loadOwnVersions({collectionUid:e||V.get(this.state,"selectedOptions.collectionId")}).then((e=>{this.setState({ownVersions:e,isLoadingVersions:!1,selectedOptions:{...this.state.selectedOptions,versionTag:V.get(e,"0.id")}})})).catch((e=>{this.setState({isLoadingVersions:!1,errorFetchingVersions:!0}),pm.logger.warn(M.VERSION_TAGS_ERROR.warn,e),pm.toasts.error(V.get(e,"message")||M.VERSION_TAGS_ERROR.error)}))}))},this.loadMonitorInfo=()=>{const e=this.props.store.data.collection,t=this.props.store.data.environment,n=this.props.store.data.files,o=this.props.store.data.versionTag;this.setState({editFormLoading:!0});let s=V.compact(this.props.store.data.notifications.map((e=>{if(e.userId){let t=(0,E.resolveStoreInstance)(I.default).allTeamMembers.reduce(((e,t)=>(e[t.id]=t,e)),{}),n=V.get(t,e.userId,{});if(n&&n.email)return n.email}if(e.address)return e.address}))),i=V.cloneDeep(this.props.store.data.options),r=[],a="auto";const l=V.get(this.props.store.data,"schedule.cronPattern",""),c=l?new C.default(l).toString():"0 0 * * * *";0!==this.props.store.data.distribution.length&&(r=this.props.store.data.distribution.map((e=>e)),a="manual"),(0,E.resolveStoreInstance)(_.default).onSyncAvailable().then((()=>{F.default.loadOwnVersions({collectionUid:this.props.store.data.collection}).then((l=>{this.setState((d=>({selectedRegionMode:a,notifications:{enabled:s.length>0,recipients:s},strictSSL:i.strictSSL,followRedirects:i.followRedirects,requestTimeout:{enabled:this.props.store.data.timeoutEnabled,timeout:isNaN(parseInt(i.requestTimeout))?0:parseInt(i.requestTimeout)},requestDelay:{enabled:this.props.store.data.delayEnabled,delay:isNaN(parseInt(i.requestDelay))?0:parseInt(i.requestDelay)},retry:{enabled:this.props.store.data.retriesEnabled,attempts:this.props.store.data.retry.attempts>0?this.props.store.data.retry.attempts:2},notificationLimit:{...d.notificationLimit,value:this.props.store.data.notificationLimit||this.state.notificationLimit.value},existingDataFile:n&&n.data,selectedOptions:{...d.selectedOptions,versionTag:o,collectionId:e,environmentId:t,name:this.props.store.data.name,regions:r,schedule:c},isLoadingVersions:!1,ownVersions:l,editFormLoading:!1})))})).catch((e=>{this.setState({isLoadingVersions:!1,errorFetchingVersions:!0}),pm.logger.warn(M.VERSION_TAGS_ERROR.warn,e),pm.toasts.error(V.get(e,"message")||M.VERSION_TAGS_ERROR.error)}))}))},this.handleRetry=async()=>{if(!(0,E.resolveStoreInstance)(_.default).isSocketConnected)return;let e=this.state.monitorStatus.error,t=this.state.collectionStatus.error,n=e||t;this.setState({collectionStatus:{error:t,loading:!0},monitorStatus:{error:e,loading:!0}});try{t&&await this.constructCollection(),t=!1,n&&await this.constructMonitor(),e=!1}catch(e){pm.logger.error("MonitorForm:Error creating monitor",e),this.setState({collectionStatus:{error:!0,loading:!1},monitorStatus:{error:!0,loading:!1}})}finally{this.setState({collectionStatus:{error:t,loading:!1},monitorStatus:{error:e,loading:!1}})}},this.handleCreate=async()=>{if(!(0,E.resolveStoreInstance)(_.default).isSocketConnected)return pm.toasts.error(M.MONITOR_ACTION_ERROR.create),void this.setState({isOffline:!0});if(!("modal"===this.props.monitorFormConfig.type&&(V.isEmpty(this.state.selectedOptions.name)&&this.setState({invalidMonitorName:!0}),this.validateFormFields())||V.isEmpty(this.state.selectedOptions.name)||V.isEmpty(this.state.selectedOptions.regions)||this.props.monitorFormConfig.preserveContext))if(this.props.monitorFormConfig.hideCollection){this.setState({loading:!0});try{V.isEmpty(this.state.selectedOptions.collectionId)&&await this.constructCollection(),await this.constructContainerMonitor()}catch(e){pm.logger.error("MonitorForm: Error creating monitor",e)}finally{this.setState({loading:!1})}}else V.isEmpty(this.state.selectedOptions.collectionId)&&pm.toasts.error(M.MONITOR_FORM.collectionSelect),await this.constructMonitor()},this.constructContainerMonitor=async()=>{let e=this.state.selectedOptions;this.setState({isSaving:!0});const t=this.state.notifications.enabled?V.map(this.state.notifications.recipients,(e=>({type:"email",address:e}))):[];let n={name:e.name.trim(),collection:e.collectionId,schedule:{cronPattern:e.schedule,timeZone:d().tz.guess()},options:{strictSSL:this.state.strictSSL,followRedirects:this.state.followRedirects,requestTimeout:this.state.requestTimeout.enabled?parseInt(this.state.requestTimeout.timeout):null,requestDelay:this.state.requestDelay.enabled?parseInt(this.state.requestDelay.delay):0},notifications:{onFailure:t,onError:t},retry:this.state.retry.enabled?{attempts:parseInt(this.state.retry.attempts)}:{}};"manual"===this.state.selectedRegionMode&&(n.distribution=V.map(e.regions,(e=>({region:e,runCount:1})))),n.versionTag=e.versionTag,(e.dataFile||null===e.dataFile)&&(n.files={data:e.dataFile}),this.state.notifications.enabled&&(n.notificationLimit=parseInt(this.state.notificationLimit.value)),V.isEmpty(e.environmentId)||(n.environment=e.environmentId),this.masterMonitorStore.saveMonitorConfiguration({data:n,workspaceId:(0,E.resolveStoreInstance)(S.default).id}).then((t=>{this.setState((e=>({isSaving:!1,monitorId:t&&t.id,monitorStatus:{...e.monitorStatus,loading:!1,error:!1},saveToActivity:!0})),(()=>{T.default.addEvent("monitor","confirm_create",this.state.from),t.action="monitorAdded",pm.eventBus.channel("monitor-updates").publish(t),j.default.gotoMonitorUrl({monitorId:this.state.monitorId,monitorName:e.name}),this.props.onClose&&this.props.onClose(),pm.toasts.success(M.MONITOR_ACTION_SUCCESS.create)}))})).catch((e=>(this.setState({loading:!1}),V.get(e,"name")===x.CREATION_CEILING_HIT_ERROR?pm.toasts.error(V.get(e,"message",M.MONITOR_ACTION_ERROR.ceilingError),{timeout:1e4}):V.get(e.error,"name")===x.VALIDATION_ERROR?this.handleValidationError(e.error.message):void this.setState((e=>({isSaving:!1,monitorStatus:{...e.monitorStatus,loading:!1,error:!0}}))))))},this.handleValidationError=e=>e.includes(255)||e.includes("name")?void this.setState({isSaving:!1,invalidMonitorName:!0,selectedOptions:{...this.state.selectedOptions,nameValidationFailed:!0},errors:{...this.state.errors,name:e}}):(this.setState({isSaving:!1,existingDataFile:void 0}),pm.toasts.error(e,{timeout:1e4})),this.handleCreationSelf=()=>{if(!(0,E.resolveStoreInstance)(_.default).isSocketConnected)return pm.toasts.error(M.MONITOR_ACTION_ERROR.create),void this.setState({isOffline:!0});"modal"===this.props.monitorFormConfig.type&&(V.isEmpty(this.state.selectedOptions.name)&&this.setState({invalidMonitorName:!0}),this.validateFormFields())||this.constructSelfCreationMonitor()},this.constructSelfCreationMonitor=()=>{let e=this.state.selectedOptions;this.setState({isSaving:!0});let t=this.state.selectedOptions.collectionId,n=this.state.notifications.enabled?V.map(this.state.notifications.recipients,(e=>({type:"email",address:e}))):[],o={monitorName:e.name.trim(),collectionUid:t,schedule:{cronPattern:e.schedule,timeZone:d().tz.guess()},options:{strictSSL:this.state.strictSSL,followRedirects:this.state.followRedirects,requestTimeout:this.state.requestTimeout.enabled?parseInt(this.state.requestTimeout.timeout):null,requestDelay:this.state.requestDelay.enabled?parseInt(this.state.requestDelay.delay):0},notifications:{onFailure:n,onError:n},retry:this.state.retry.enabled?{attempts:parseInt(this.state.retry.attempts)}:{}};"manual"===this.state.selectedRegionMode&&(o.distribution=V.map(e.regions,(e=>({region:e,runCount:1})))),o.versionTag=e.versionTag,(e.dataFile||null===e.dataFile)&&(o.files={data:e.dataFile}),this.state.notifications.enabled&&(o.notificationLimit=parseInt(this.state.notificationLimit.value)),V.isEmpty(e.environmentId)||(o.environment=e.environmentId),this.props.onCreateMonitor(o,e,this.state.notifications,this.state.selectedRegionMode,this.state.retry)},this.renderForm=()=>{let e=V.filter(this.state.collections&&this.state.collections.list,"isEditable"),t=this.state.collections&&this.state.collections.list,n=this.state.environments&&this.state.environments.list,o=V.sortBy(n,(e=>e.name.toLowerCase())),s=this.state.disableCollectionSelection&&!F.default.getSelectedOptionName(e,this.props.selectedOptions.collectionId,"","id"),r="tab"===this.props.monitorFormConfig.type,a=this.props.monitorFormConfig.isEditable,l=this.monitorPermissionStore.isUserLoggedIn(),c=(0,E.resolveStoreInstance)(v.default),d=c.permissions,u=c.workspaceLifecycle===D.ACTIVE_WORKSPACE_PERMISSIONS_LIFECYCLE.loading,p=d&&d.ADD_MONITOR_TO_WORKSPACE,h=r&&!a&&!p,f=r&&a&&l&&!this.monitorPermissionStore.can("edit",this.props.monitorId);if(a){if(!F.default.getSelectedOptionName(t,this.props.selectedOptions.collectionId,"","id",!1)||V.get(this.state,"isUpdating",!1))return i.createElement("div",{className:"edit-monitor-loader"},i.createElement(m.default,null))}else{if(this.props.monitorFormConfig.preserveContext&&(s||V.get(this.state,"isSaving",!1)||this.state.isLoadingVersions))return i.createElement("div",{className:"preserve-context-loader"},i.createElement(m.default,null));if(s||V.get(this.state,"isSaving",!1)||this.state.loading||r&&u)return i.createElement("div",{className:r?"edit-monitor-loader":"create-monitor-modal-loader"},i.createElement(m.default,null))}return h||f?i.createElement(g.default,{body:M.PERMISSION_TEXT.DEFAULT_DISABLED_MSG,className:"monitor-form__empty-state",illustration:i.createElement(O.default,null),title:a?M.EMPTY_STATE.editError:M.EMPTY_STATE.createError}):i.createElement(k.default,{ref:"content",onMonitorNameChange:this.handleMonitorNameChange,isOffline:this.masterMonitorStore.isOffline,disableCollectionSelection:this.state.disableCollection,selectedOptions:this.state.selectedOptions,existingDataFile:this.state.existingDataFile,onSelectCollection:this.handleSelectCollection,onSelectVersion:this.handleSelectVersion,ownVersions:this.state.ownVersions,onSelectEnvironment:this.handleSelectEnvironment,handleFileUpload:this.handleFileUpload,enableMinuteSelection:this.state.enableMinuteSelection,onMonitorScheduleChange:this.handleMonitorScheduleChange,selectedRegionMode:this.state.selectedRegionMode,onRegionSelectorChange:this.handleRegionSelectorChange,onShowTooltip:this.handleShowTooltip,onHideTooltip:this.handleHideTooltip,enableRegionSelection:this.state.enableRegionSelection,regions:this.state.availableRegions,showTooltip:this.state.showTooltip,onRegionChange:this.handleRegionChange,notifications:this.state.notifications,onNotificationChange:this.handleNotificationChange,errors:this.state.errors,notificationLimit:this.state.notificationLimit,onNotificationLimitChange:this.handleNotificationLimitChange,maxNotificationLimit:99,retry:this.state.retry,onRetryChange:this.handleRetryConfigChange,maxRetryAttempts:2,enablePremiumCluster:this.state.enablePremiumCluster,requestTimeout:this.state.requestTimeout,onRequestTimeoutChange:this.handleTimeoutChange,requestDelay:this.state.requestDelay,onRequestDelayChange:this.handleDelayChange,followRedirects:this.state.followRedirects,onFollowRedirectsChange:this.handleRedirectChange,strictSSL:this.state.strictSSL,onStrictSSLChange:this.handleStrictSSLChange,cancelCreateMonitor:this.handleCancelCreateMonitor,cancelEditMonitor:this.handleCancelEditMonitor,invalidInput:this.isInvalidInput(),isSaving:this.state.isSaving,ownEnvironments:o,fetchVersionText:F.default.fetchVersionText,getSelectedOptionName:this.props.monitorFormConfig.hideCollection?this.props.getSelectedOptionName:F.default.getSelectedOptionName,handleMouseOver:this.handleMouseOver,isEditable:a,onCreateMonitor:"modal"===this.props.monitorFormConfig.type?this.props.onCreateMonitor:this.handleCreate,createMonitor:this.handleCreate,collectionAndEnvironmentLoading:this.state.collectionAndEnvironmentLoading,ownCollections:e,allWorkspaceCollections:t,config:this.props.config,updateMonitor:this.handleUpdate,showFormControls:this.props.monitorFormConfig.showFormControls,hideCollection:this.props.monitorFormConfig.hideCollection,type:this.props.monitorFormConfig.type,from:this.props.from,invalidMonitorName:this.state.invalidMonitorName,editFormLoading:this.state.editFormLoading,onClose:this.props.onClose})},this.masterMonitorStore=new B.default,this.monitorPermissionStore=new U.default,this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.loadRegions=this.loadRegions.bind(this),this.handleCollectionQueryParam=this.handleCollectionQueryParam.bind(this),this.enableFeatures=this.enableFeatures.bind(this),this.resetCollection=this.resetCollection.bind(this),this.handleSelectCollection=this.handleSelectCollection.bind(this),this.handleOfflineRetry=this.handleOfflineRetry.bind(this),this.constructMonitor=this.constructMonitor.bind(this),this.constructCollection=this.constructCollection.bind(this),this.isInvalidInput=this.isInvalidInput.bind(this),this.handleCancelEditMonitor=this.handleCancelEditMonitor.bind(this),this.handleCancelCreateMonitor=this.handleCancelCreateMonitor.bind(this),this.handleShowTooltip=this.handleToggleTooltip.bind(this,!0),this.handleHideTooltip=this.handleToggleTooltip.bind(this,!1),this.handleRegionChange=this.handleRegionChange.bind(this),this.handleNotificationChange=this.handleNotificationChange.bind(this),this.handleNotificationLimitChange=this.handleNotificationLimitChange.bind(this),this.handleRegionSelectorChange=this.handleRegionSelectorChange.bind(this),this.handleSelectEnvironment=this.handleSelectEnvironment.bind(this),this.handleFileUpload=this.handleFileUpload.bind(this),this.handleSelectVersion=this.handleSelectVersion.bind(this),this.handleMonitorNameChange=this.handleMonitorNameChange.bind(this),this.handleMonitorScheduleChange=this.handleMonitorScheduleChange.bind(this),this.handleRetryConfigChange=this.handleRetryConfigChange.bind(this),this.handleTimeoutChange=this.handleTimeoutChange.bind(this),this.handleDelayChange=this.handleDelayChange.bind(this),this.handleStrictSSLChange=this.handleStrictSSLChange.bind(this),this.handleRedirectChange=this.handleRedirectChange.bind(this),this.validateNotificationRecipients=this.validateNotificationRecipients.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.validateFormFields=this.validateFormFields.bind(this),this.state={monitorId:"",values:[],ownEnvironments:[],availableRegions:[],isOffline:!1,selectedRegionMode:"auto",existingDataFile:void 0,selectedOptions:{name:"",nameValidationFailed:!1,requests:[],tests:[{name:"Check Response code",code:"pm.response.to.have.status({{variable}});",enabled:!0,suggestions:F.default.getAllStatusList(),type:"number",placeholder:"Enter response code"},{name:"Check Response time",code:"pm.expect(pm.response.responseTime).to.be.below({{variable}});",enabled:!0,postfix:"ms",type:"number",placeholder:"Enter response time"}],collectionId:"",ownerId:"",environmentId:"",dataFile:void 0,fileValidationFailed:!1,versionTag:null,schedule:"0 0 0 * * *",regions:[]},from:"create_new_x",monitorStatus:{loading:!0,error:!1},collectionStatus:{loading:!0,error:!1},saveToActivity:!1,userStatus:{isSyncEnabled:!1,isLoggedIn:!1},notifications:{enabled:!1,recipients:[]},notificationLimit:{isValid:!0,value:3},followRedirects:!0,strictSSL:!0,requestTimeout:{enabled:!1,timeout:5e3},requestDelay:{enabled:!1,delay:1},retry:{enabled:!1,attempts:2},isLoadingRegions:!1,errorFetchingRegions:!1,isLoadingVersions:!1,errorFetchingVersions:!1,ownVersions:[],disableCollection:!1,enableMinuteSelection:!1,enableRegionSelection:!1,enablePremiumCluster:!1,isSaving:!1,errors:{},uniqueName:b.default.generateUniqueId(),showRegionTooltip:!1,target:null,isUpdating:!1,invalidMonitorName:!1,editFormLoading:!1,collections:[],environments:[]},this.activeWorkspaceId=(0,E.resolveStoreInstance)(S.default).id,this.isSocketConnected=(0,E.resolveStoreInstance)(_.default).isSocketConnected}async componentDidMount(){if("tab"===this.props.monitorFormConfig.type){this.props.collectionUid&&this.setState({disableCollection:!0}),y.default.get().then((e=>{let t=e.email;this.setState({notifications:{enabled:!0,recipients:[t]}})}))}"modal"===this.props.monitorFormConfig.type&&this.props.monitorFormConfig.hideCollection&&(0,u.when)((()=>this.state.collections&&this.state.collections.list),(()=>this.props.monitorFormConfig.preserveContext?this.handleCollectionFromAPIContainer():this.handleCollectionFromContainer())),!this.props.monitorFormConfig.isEditable&&this.loadRegions(),this.props.monitorFormConfig.isEditable&&((0,u.when)((()=>this.props.store.data.collection&&this.state.availableRegions.length),(()=>this.loadMonitorInfo())),this.loadRegions()),(0,u.when)((()=>pm.billing),(()=>this.enableFeatures())),this.handleCollectionQueryParam(),await this.loadWorkspaceCollectionsAndEnvironments()}componentWillUnmount(){V.invoke(this.state.collections,"unsubscribe"),V.invoke(this.state.environments,"unsubscribe"),this.collectionQueryParamReaction&&this.collectionQueryParamReaction()}handleMouseOver(e){e.enabled||this.setState({target:e.id,showRegionTooltip:!0})}handleMouseOut(){this.setState({target:null,showRegionTooltip:!1})}handleToggleTooltip(e){this.setState({showTooltip:e})}handleNotificationChange(e,t,n){if(V.isUndefined(t))return void this.setState({notifications:{enabled:e,recipients:this.state.notifications.recipients}});let o=[...V.slice(this.state.notifications.recipients,0,t),n,...V.slice(this.state.notifications.recipients,t+1)];o=V.compact(o),this.validateNotificationRecipients(o),this.setState({notifications:{enabled:e,recipients:o}})}handleNotificationLimitChange(e){this.setState({notificationLimit:{isValid:e>0&&e<=99,value:e}})}validateNotificationRecipients(e){const t={};e.forEach(((n,o)=>{let s=V.size(n)&&!G.test(n)?"invalid":e.indexOf(n)!==o&&"duplicate";t[o]=s&&{message:M.MONITOR_EMAIL_VALIDATION_ERROR[s],error:s}})),this.setState({errors:{...this.state.errors,recipients:t}})}isInvalidInput(){return this.state.requestTimeout.enabled&&(this.state.requestTimeout.timeout<1||this.state.requestTimeout.timeout>M.MONITORING_CONSTANTS.requestTimeoutMaxValue)||this.state.requestDelay.enabled&&(this.state.requestDelay.delay<1||this.state.requestDelay.delay>M.MONITORING_CONSTANTS.requestTimeoutMaxValue)||this.state.notifications.enabled&&V.some(this.state.errors.recipients)||V.isEmpty(this.state.selectedOptions.name)||V.isEmpty(this.state.selectedOptions.collectionId)||"manual"===this.state.selectedRegionMode&&V.isEmpty(this.state.selectedOptions.regions)||this.state.notifications.enabled&&!this.state.notificationLimit.isValid||this.state.selectedOptions.fileValidationFailed}validateFormFields(){return this.state.requestTimeout.enabled&&(this.state.requestTimeout.timeout<1||this.state.requestTimeout.timeout>M.MONITORING_CONSTANTS.requestTimeoutMaxValue)||this.state.requestDelay.enabled&&(this.state.requestDelay.delay<1||this.state.requestDelay.delay>M.MONITORING_CONSTANTS.requestTimeoutMaxValue)||this.state.notifications.enabled&&V.some(this.state.errors.recipients)||V.isEmpty(this.state.selectedOptions.name)||"manual"===this.state.selectedRegionMode&&V.isEmpty(this.state.selectedOptions.regions)||this.state.notifications.enabled&&!this.state.notificationLimit.isValid}handleMonitorNameChange(e){this.setState({invalidMonitorName:!1}),this.setState((t=>({selectedOptions:{...t.selectedOptions,name:e}})))}handleSelectVersion(e){this.setState((t=>({selectedOptions:{...t.selectedOptions,versionTag:e}})))}handleMonitorScheduleChange(e){this.setState((t=>({selectedOptions:{...t.selectedOptions,schedule:e}})))}handleRegionChange(e){let t=this.state.selectedOptions.regions;V.includes(t,e)?V.remove(t,(t=>t===e)):t.push(e),this.setState((e=>({selectedOptions:{...e.selectedOptions,regions:t}})))}handleRegionSelectorChange(e){this.setState({selectedRegionMode:e})}handleSelectEnvironment(e){this.setState((t=>({selectedOptions:{...t.selectedOptions,environmentId:e}})))}handleFileUpload(e){if(e&&e.length){const t=V.first(e),n=V.first(e).type?V.last(V.first(e).type.split("/")):V.last(V.first(e).name.split("."));if(!L.ACCEPTED_FILE_FORMATS.includes(n))return void this.setState({selectedOptions:{...this.state.selectedOptions,fileValidationFailed:!0},errors:{...this.state.errors,dataFile:{message:M.MONITOR_FORM.dataFile.incorrectFormat}}});if(t.size/1024/1024>1)return void this.setState({selectedOptions:{...this.state.selectedOptions,fileValidationFailed:!0},errors:{...this.state.errors,dataFile:{message:M.MONITOR_FORM.dataFile.incorrectSize}}});const o=new FileReader;o.readAsText(e[0],"UTF-8"),o.onload=e=>{this.setState((o=>({selectedOptions:{...o.selectedOptions,fileValidationFailed:!1,dataFile:[{name:V.get(t,"name",""),format:n,contents:e.target.result}]}})))}}else this.setState((e=>({selectedOptions:{...e.selectedOptions,fileValidationFailed:!1,dataFile:null},existingDataFile:void 0})))}handleRetryConfigChange(e,t=this.state.retry.attempts){this.setState({retry:{enabled:e,attempts:t}})}handleTimeoutChange(e,t=this.state.requestTimeout.timeout){!this.state.requestTimeout.enabled&&e&&t<1&&(t=5e3),t<0||this.setState({requestTimeout:{enabled:e,timeout:t}})}handleDelayChange(e,t=this.state.requestDelay.delay){!this.state.requestDelay.enabled&&e&&t<1&&(t=1),t<0||this.setState({requestDelay:{enabled:e,delay:t}})}handleStrictSSLChange(e){this.setState({strictSSL:!e})}handleRedirectChange(e){this.setState({followRedirects:!e})}loadRegions(){let e=[];return(0,E.resolveStoreInstance)(_.default).onSyncAvailable().then((()=>{this.masterMonitorStore.loadAgents().then((t=>{e.push(V.get(V.find(t,{default:!0}),"id")),this.setState({...this.state,availableRegions:t,selectedOptions:{...this.state.selectedOptions,regions:e},isLoadingRegions:!1})})).catch((e=>{this.setState({errorFetchingRegions:!0}),pm.logger.warn(M.REGION_FETCH_ERROR.warn,e),pm.toasts.error(V.get(e,"message")||M.REGION_FETCH_ERROR.error)}))}))}enableFeatures(){pm.billing.onPlanFeaturesLoad().then((()=>{this.setState({...this.state,enablePremiumCluster:V.get(pm.billing.plan.features,"monitor_premium_cluster_enabled.value",!1),enableMinuteSelection:V.get(pm.billing.plan.features,"monitor_resolution_enabled.value",!1),enableRegionSelection:V.get(pm.billing.plan.features,"monitor_region_selection_enabled.value",!1)})})).catch((()=>{pm.logger.warn(M.PLAN_FETCH_ERROR.warn),pm.toasts.error(M.PLAN_FETCH_ERROR.error)}))}handleSelectCollection(e){e.id?F.default.loadOwnVersions({collectionUid:e.id}).then((t=>{this.setState({selectedOptions:{...this.state.selectedOptions,collectionId:e.id,ownerId:e.owner,versionTag:V.get(t,"0.id")},isLoadingVersions:!1,ownVersions:t},(()=>{this.refs.content&&this.refs.content.onCollectionSelect&&this.refs.content.onCollectionSelect()}))})).catch((e=>{this.setState({isLoadingVersions:!1,errorFetchingVersions:!0}),pm.logger.warn(M.VERSION_TAGS_ERROR.warn,e),pm.toasts.error(V.get(e,"message")||M.VERSION_TAGS_ERROR.error)})):this.setState({isLoadingVersions:!1,selectedOptions:{...this.state.selectedOptions,collectionId:e.id,ownerId:e.owner}},(()=>{this.refs.content&&this.refs.content.onCollectionSelect&&this.refs.content.onCollectionSelect()}))}resetCollection(){this.setState({disableCollection:!1,selectedOptions:{...this.state.selectedOptions,collectionId:""}})}handleCollectionQueryParam(){this.collectionQueryParamReaction=(0,u.reaction)((()=>!this.props.monitorFormConfig.isEditable&&"tab"===this.props.monitorFormConfig.type&&this.state.collections&&this.state.collections.list&&""!==this.props.collectionUid&&this.state.selectedOptions.collectionId!==this.props.collectionUid),(()=>{const e=V.find(this.state.collections.list,{id:this.props.collectionUid});V.isEmpty(e)?this.resetCollection():(""===this.state.selectedOptions.name&&this.handleMonitorNameChange(e.name),this.handleSelectCollection(e))}))}async handleUpdate(){if(!(0,E.resolveStoreInstance)(_.default).isSocketConnected)return pm.toasts.error(M.MONITOR_ACTION_ERROR.update),void this.setState({isOffline:!0});if(this.state.requestTimeout.enabled&&0===parseInt(this.state.requestTimeout.timeout))return void pm.toasts.error(M.MONITOR_FORM.requestTimeout);if(this.state.requestDelay.enabled&&0===parseInt(this.state.requestDelay.delay))return void pm.toasts.error(M.MONITOR_FORM.requestDelay);this.setState({isUpdating:!0});let e=this.state.notifications.enabled?V.map(this.state.notifications.recipients,(e=>({type:"email",address:e}))):[],t=this.state.selectedOptions,n={name:t.name.trim(),environment:t.environmentId,versionTag:t.versionTag,options:{strictSSL:this.state.strictSSL,followRedirects:this.state.followRedirects,requestTimeout:this.state.requestTimeout.enabled?parseInt(this.state.requestTimeout.timeout):null,requestDelay:this.state.requestDelay.enabled?parseInt(this.state.requestDelay.delay):0},notifications:{onFailure:e,onError:e},retry:this.state.retry.enabled?{attempts:parseInt(this.state.retry.attempts)}:{},schedule:{cronPattern:t.schedule,timeZone:d().tz.guess()}};(t.dataFile||null===t.dataFile)&&(n.files={data:t.dataFile}),this.state.notifications.enabled&&(n.notificationLimit=parseInt(this.state.notificationLimit.value)),n.distribution="manual"===this.state.selectedRegionMode?V.map(t.regions,(e=>({region:e,runCount:1}))):null;const o=await this.props.store.updateMonitorConfiguration(this.props.monitorId,n);200===o.status?(w.default.transitionTo("build.monitor",{},{},{tabOptions:{openIn:this.props.getTabId}}),pm.toasts.success(M.MONITOR_ACTION_SUCCESS.updated)):(this.setState({isUpdating:!1}),o.error&&o.error.name===x.VALIDATION_ERROR&&this.handleValidationError(o.error.message))}handleOfflineRetry(){(0,E.resolveStoreInstance)(_.default).isSocketConnected&&this.handleCreate()}handleCancelCreateMonitor(){A.default.closeByRoute("monitor/create",{})}handleCancelEditMonitor(){w.default.transitionTo("build.monitor",{},{},{tabOptions:{openIn:this.props.getTabId}})}async constructMonitor(){let e=this.state.selectedOptions;this.setState({isSaving:!0});let t=this.state.notifications.enabled?V.map(this.state.notifications.recipients,(e=>({type:"email",address:e}))):[],n={name:e.name.trim(),collection:e.collectionId,schedule:{cronPattern:e.schedule,timeZone:d().tz.guess()},options:{strictSSL:this.state.strictSSL,followRedirects:this.state.followRedirects,requestTimeout:this.state.requestTimeout.enabled?parseInt(this.state.requestTimeout.timeout):null,requestDelay:this.state.requestDelay.enabled?parseInt(this.state.requestDelay.delay):0},notifications:{onFailure:t,onError:t},retry:this.state.retry.enabled?{attempts:parseInt(this.state.retry.attempts)}:{}};"manual"===this.state.selectedRegionMode&&(n.distribution=V.map(e.regions,(e=>({region:e,runCount:1})))),n.versionTag=e.versionTag,(e.dataFile||null===e.dataFile)&&(n.files={data:e.dataFile}),this.state.notifications.enabled&&(n.notificationLimit=parseInt(this.state.notificationLimit.value)),V.isEmpty(e.environmentId)||(n.environment=e.environmentId),this.masterMonitorStore.saveMonitorConfiguration({data:n,workspaceId:(0,E.resolveStoreInstance)(S.default).id}).then((t=>{this.setState((e=>({isSaving:!1,monitorId:t&&t.id,monitorStatus:{...e.monitorStatus,loading:!1,error:!1},saveToActivity:!0})),(()=>{T.default.addEvent("monitor","confirm_create",this.state.from),j.default.gotoMonitorUrl({monitorId:this.state.monitorId,monitorName:e.name},{tabOptions:{openIn:this.props.tabId}}),pm.toasts.success(M.MONITOR_ACTION_SUCCESS.create)}))})).catch((e=>V.get(e,"name")===x.CREATION_CEILING_HIT_ERROR?pm.toasts.error(V.get(e,"message",M.MONITOR_ACTION_ERROR.ceilingError),{timeout:1e4}):V.get(e.error,"name")===x.VALIDATION_ERROR?this.handleValidationError(e.error.message):void this.setState((e=>({isSaving:!1,monitorStatus:{...e.monitorStatus,loading:!1,error:!0}})))))}async constructCollection(){let e={name:this.state.selectedOptions.name},t=V.map(this.props.selectedOptions.requests,(t=>{let n=V.reduce(t.tests,((e,t,n)=>(this.props.selectedOptions.tests[n].enabled&&e.push("\t"+V.replace(this.props.selectedOptions.tests[n].code,"{{variable}}",parseInt(t))),e)),[]),o=V.join(["pm.test('Some test name', function () {",...n,"})"],"\n");return{id:f.default.guid(),url:t.url,method:t.method,data:t.body,dataMode:"raw",collection:e.id,name:t.url,description:t.description,time:(new Date).getTime(),events:new p.EventList({},[{listen:"test",script:o||""}]).toJSON()}})),n=V.map(t,"id");V.assign(e,{requests:t,order:n});try{const t=await(0,P.createCollection)(e,this.activeWorkspaceId,{analyticsOptions:{origin:(o=this.state.from,o.startsWith("history")?"history/monitor":"create_new_x"===o?"cnx":o)}});if(!V.isEmpty(V.get(t,"error")))return void pm.logger.error(M.MONITOR_ACTION_ERROR.creationError,t.error);this.setState((e=>({selectedOptions:{...e.selectedOptions,collectionId:t.uid,ownerId:t.owner},collectionStatus:{...e.collectionStatus,loading:!1,error:!1}})))}catch(e){pm.logger.error(M.MONITOR_ACTION_ERROR.pipelineError,e)}var o}render(){return this.props.monitorFormConfig.hideCollection?this.state.errorFetchingVersions?i.createElement("div",{className:"create-new-monitor__error"},i.createElement(h.default,{subtitle:"Please check your internet connection and try again.",onRetry:this.handleVersionFetchRetry})):this.loadForm(this.props.monitorFormConfig.type):this.props.monitorFormConfig.isEditable?this.state.errorFetchingVersions?i.createElement("div",{className:"create-new-monitor__error"},i.createElement(h.default,{subtitle:M.MONITOR_ACTION_ERROR.checkInternet,onRetry:this.handleVersionFetchRetry})):this.loadForm():this.state.collectionStatus.error||this.state.monitorStatus.error?i.createElement("div",{className:"create-new-monitor__error"},i.createElement(h.default,{subtitle:M.MONITOR_ACTION_ERROR.somethingWentWrong,onRetry:this.handleRetry})):this.state.errorFetchingVersions?i.createElement("div",{className:"create-new-monitor__error"},i.createElement(h.default,{subtitle:M.MONITOR_ACTION_ERROR.checkInternet,onRetry:this.handleVersionFetchRetry})):this.loadForm()}}).collectionPermissions=["edit"],s.defaultProps={isEditable:!1},o=s))||o},"./monitors/components/create-edit-form/MonitorFormHelperFunctions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchVersionText:function(){return d},getAllStatusList:function(){return p},getFormShellClass:function(){return a},getSelectedOption:function(){return c},getSelectedOptionName:function(){return l},getSelectedOptionNameNoCollection:function(){return u},loadOwnVersions:function(){return m}});var o=n("./monitors/utils/messages/index.js"),s=n("./runtime-repl/request-http/httpstatuscodes.js"),i=n("./js/containers/new-button/services/VersionTagService.js"),r=n("./node_modules/lodash/lodash.js");function a(e){return"modal"===e?"create-new-monitor-modal__body step2":"create-new-monitor-form__body step2"}function l(e,t,n,o,s=!1){let i=r.find(e,[o,t]);if(!i)return n;let a=i.name;return s&&a.length>43&&(a=a.slice(0,40)+"..."),a}function c(e,t){return r.find(e,["id",t])||{}}function d(e){return 1==e?o.MONITOR_FORM.versionTagCurrentVersion:o.MONITOR_FORM.versionTagSelect}function u(e,t,n){let o=r.find(e,["id",t]);return o?o.name:n}function p(){return r.reduce(s.default,((e,t,n)=>(e.push({value:`${n} ${t.name}`}),e)),[])}function m(e){return(0,i.fetchAllTags)(e).then((e=>(r.set(r.find(e,{id:"latest"}),"id",null),e)))}const h={getSelectedOptionName:l,getSelectedOption:c,fetchVersionText:d,getFormShellClass:a,getSelectedOptionNameNoCollection:u,getAllStatusList:p,loadOwnVersions:m};t.default=h},"./monitors/components/create-edit-form/MonitorScheduleSelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o=n("../../node_modules/react/index.js"),s=n("./js/models/Cron.js"),i=n("./js/constants/MonitorScheduleConstants.js"),r=n("./monitors/utils/messages/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),p=n("./node_modules/lodash/lodash.js");function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.apply(this,arguments)}const h=u.default.div`
  flex-grow: 1;
  min-width: fit-content;
`,g=(0,u.default)(a.default)`
  min-width: fit-content;
  justify-content: flex-start;
  width: inherit;
  align-items: center;
  gap: var(--spacing-xs);

  .aether-dropdown__control {
    width: inherit;
  }
`;function f({isInline:e,children:t}){return e?o.createElement(g,{direction:"row",width:"inherit"},t[0],2===t.length&&t[1]&&o.createElement(o.Fragment,null,o.createElement(l.default,null,r.SCHEDULE_SELECTOR.at),t[1])):t}class b extends o.Component{constructor(e){super(e),this.renderWithTooltip=(e,t,n)=>e?o.createElement(c.default,{placement:"auto",content:t},o.createElement("div",{className:"monitor-form-option-disabled-with-tooltip"},n)):n,this.state={time:"",timeType:"",timeOption:"",noChange:!0},this.getSelectedOptionName=this.getSelectedOptionName.bind(this),this.getSchedule=this.getSchedule.bind(this),this.handleTimeTypeChange=this.handleTimeTypeChange.bind(this),this.handleTimeOptionChange=this.handleTimeOptionChange.bind(this),this.handleTimeChange=this.handleTimeChange.bind(this)}static getDerivedStateFromProps(e,t){return t.timeType&&!0!==t.noChange?null:{timeType:e.intervalType,timeOption:e.interval,time:"week-timer"===e.intervalType?e.time:""}}getSelectedOptionName(e,t,n){let o=p.find(e,["id",t]);return o?o.name:n}getSchedule(){let e={schedule:this.state.timeType,minute:"*/5",hour:"*",weekday:"*",time:""+((new Date).getHours()+1)%24},t={};switch(this.state.timeType){case"minute-timer":t={minute:this.state.timeOption};break;case"hour-timer":t={hour:this.state.timeOption};break;case"week-timer":t={weekday:this.state.timeOption,time:this.state.time}}return p.merge(e,t)}handleTimeTypeChange(e){let t="",n="";"week-timer"===e?(t="0",n="*"):"minute-timer"===e?n="*/5":"hour-timer"===e&&(n="*"),this.setState({timeType:e,timeOption:n,time:t,noChange:!1},(()=>{this.props.onChange&&this.props.onChange((new s.default).fromForm(this.getSchedule()).toString())}))}handleTimeOptionChange(e){""==this.state.timeType&&this.setState({timeType:this.props.intervalType}),""==this.state.time&&"week-timer"==this.state.timeType&&this.setState({time:this.props.time}),this.setState({timeOption:e,noChange:!1},(()=>{this.props.onChange&&this.props.onChange((new s.default).fromForm(this.getSchedule()).toString())}))}handleTimeChange(e){""==this.state.timeOption&&this.setState({timeOption:this.props.interval}),""==this.state.timeType&&this.setState({timeType:this.props.intervalType}),this.setState({time:e,noChange:!1},(()=>{this.props.onChange&&this.props.onChange((new s.default).fromForm(this.getSchedule()).toString())}))}render(){let e=this.state.timeType||this.props.intervalType||"week-timer",t=this.state.timeOption||this.props.interval||"*",n=this.state.time||this.props.time||("week-timer"===e?String((new Date).getHours()):"");const s={isClearable:!1,isSearchable:!1,menuMaxHeight:r.MAX_DROPDOWN_SIZE,isOptionDisabled:({isDisabled:e})=>e,isDisabled:this.props.isOffline||this.props.isDisabled,className:"monitor-schedule-selector-dropdown"},a=p.find(i.TimeType,["id",e]),l=p.find(i.TimeOption[e],["id",t]),c=p.find(i.TimeList,["id",n]),{minuteTimerDisabled:u,isOffline:g}=this.props;return o.createElement("div",{className:"monitor-schedule-selector-tab tab-form"},this.renderWithTooltip(g,r.TOOLTIP_TEXT.isOffline,o.createElement(d.default,m({},s,{onChange:({value:e})=>{this.handleTimeTypeChange(e)},customOptionComponent:e=>this.renderWithTooltip(e.isDisabled,r.MONITOR_FORM.upgradeGeneric,e.label),value:{value:p.get(a,"id"),label:p.get(a,"name")},options:p.map(i.TimeType,(({id:e,name:t})=>({value:e,label:t,isDisabled:"minute-timer"===e&&u})))}))),o.createElement(f,{isInline:this.props.isInline},this.renderWithTooltip(g,r.TOOLTIP_TEXT.isOffline,o.createElement(h,null,o.createElement(d.default,m({},s,{onChange:({value:e})=>this.handleTimeOptionChange(e),value:{value:p.get(l,"id"),label:p.get(l,"name")},options:p.map(i.TimeOption[e],(({id:e,name:t})=>({value:e,label:t})))})))),!p.isEmpty(this.state.time)&&this.renderWithTooltip(g,r.TOOLTIP_TEXT.isOffline,o.createElement(h,null,o.createElement(d.default,m({},s,{onChange:({value:e})=>this.handleTimeChange(e),value:{value:p.get(c,"id"),label:p.get(c,"name")},options:p.map(i.TimeList,(({id:e,name:t})=>({value:e,label:t})))}))))))}}},"./monitors/components/uptime/Timeline/TimeSeriesPlot.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./monitors/utils/uptimeHelpers.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),c=n("./node_modules/moment/moment.js"),d=n.n(c),u=n("./node_modules/lodash/lodash.js");const p="down",m=r.default.div`
  width: 100%;
  position: relative;
  align-items: stretch;
  min-height: ${({height:e})=>e}px;
  height: ${({height:e})=>e}px;
  border-radius: var(--border-radius-s);
  overflow: hidden;
`,h=r.css`
  position: absolute;
  width: ${({span:e})=>100*e}%;
  left: ${({leftPadding:e})=>100*e}%;
`,g=r.css`
  ${h};
  cursor: pointer;
  height: inherit;
  -webkit-transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
  transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);

  :hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
`,f=r.css`
  ${h};
  height: inherit;
`,b=r.default.div`
  ${f};
  min-width:1px;
  background-color: #A4EEC4;
`,y=r.default.div`
  --block-fill-color: #EB2013;
  /*
  // Disable the click action till we have interactive states for error in the timeline
  ${g};
  :hover {
    // We are using transform: translate instead of scale because scale can grow large blocks outside viewport
    // Ideally we should have used transform: scale(1.125, 1.125); for better animation and visuals
    border-top: 2px solid var(--block-fill-color);
    border-bottom: 2px solid var(--block-fill-color);
  }
  */
  ${f};
  background-color: var(--block-fill-color);
  min-width:1px;
`,v=r.default.div`
  ${f};
  background-color: #A6A6A6;
`;function I(e,t){return u.get(e,"nodes.length")===u.get(t,"nodes.length")&&e.height===t.height&&e.viewStart===t.viewStart&&e.viewEnd===t.viewEnd}const _=(0,o.memo)((function({nodes:e,height:t,viewStart:n,viewEnd:s,getNodeSpanStartTimeStamp:i,getNodeSpanEndTimeStamp:r,getNodeState:c,showTooltip:u}){const h=s-n;let g=[],f=n;for(const t of e){const e=i(t),o=r(t);o&&e?e>=o||o>s||e<n?pm.logger.error("UptimeMonitor~TimeSeriesPlot: Encountered invalid data for state. Reference state API object: ",t):f>e?pm.logger.error("UptimeMonitor~TimeSeriesPlot: Encountered invalid data trying to render node before current pointer. ",t):(g.push({state:c(t),start:e,end:o}),f=o):pm.logger.error("UptimeMonitor~TimeSeriesPlot: Encountered NaN for state - endedAt or startedAt while rendering timeline. Reference state API object: ",t)}function I(e,t,n,s,i){let r,c;const m=(t-e)/i,h=(e-s)/i;switch(n){case"up":[c,r]=["Uptime",b];break;case p:[c,r]=["Downtime",y];break;default:[c,r]=["Unknown",v]}if(u){const n=o.useRef(),s=a.default.getDateAndTimeDifference(e,t,!0);return o.createElement(o.Fragment,{key:`frag-${e}`},o.createElement(r,{key:`state-block-${e}`,span:m,leftPadding:h,ref:n}),o.createElement(l.default,{pointer:!0,key:`popover-${e}`,triggerEvent:"mouseenter click",placement:"bottom",padding:"spacing-l",triggerRef:n},o.createElement("div",{className:"linked-monitors-tooltip-wrapper"},o.createElement("div",{className:"linked-monitors-tooltip-metrics-wrapper"},o.createElement("div",{className:"linked-monitors-tooltip-metrics-row uptime-monitors-tooltip-row"},o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-name"},c),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-separator"}),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-value"},s)),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row uptime-monitors-tooltip-row"},o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-name"},"Start time"),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-separator"}),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-value"},d()(e).format("h:mm A, DD MMM YYYY"))),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row uptime-monitors-tooltip-row"},o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-name"},"End time"),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-separator"}),o.createElement("div",{className:"linked-monitors-tooltip-metrics-row-value"},d()(t).format("h:mm A, DD MMM YYYY")))))))}return o.createElement(o.Fragment,{key:`frag-${e}`},o.createElement(r,{key:`state-block-${e}`,span:m,leftPadding:h}))}return f<s&&g.push({state:c(),start:f,end:s}),o.createElement(m,{height:t},o.createElement(l.default,{pointer:!0,triggerEvent:"mouseenter click",placement:"bottom",padding:"spacing-l",trigger:o.createElement(v,{key:n,span:1,leftPadding:0})},o.createElement("div",{className:"linked-monitors-tooltip-wrapper"},o.createElement("div",null,"Unknown - The monitor is non-existent, paused or ",o.createElement("br",null),"our monitoring service had an exception."))),g.filter((e=>"up"===e.state)).map((({start:e,end:t,state:o})=>I(e,t,o,n,h))),g.filter((e=>e.state===p)).map((({start:e,end:t,state:o})=>I(e,t,p,n,h))))}),I);_.propTypes={nodes:i().array.isRequired,height:i().number.isRequired,viewStart:i().number.isRequired,viewEnd:i().number.isRequired,getNodeSpanStartTimeStamp:i().func.isRequired,getNodeSpanEndTimeStamp:i().func.isRequired,getNodeState:i().func.isRequired,showTooltip:i().bool},t.default=_},"./monitors/components/uptime/UptimeBanner.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoMonitor.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./appsdk/components/link/Link.js"),p=n("../../packages/monitoring/monitoring-actions/index.js"),m=n("./monitors/utils/messages/index.js"),h=n("./monitors/constants.js");const g=s.default.div`
  display: flex;
  box-sizing: border-box;
  padding: 16px;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 326px;
  height: 298px;
  border: 1px solid var(--background-color-tertiary);
  border-radius: 3px;
`,f=s.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 294px;
  pointer-events: auto;
`,b=s.default.div`
  display: flex;
  width: 300px;
  flex-direction: row;
  justify-content: flex-end;
  align-items: center;
`,y=s.default.div`
  height: ${({height:e})=>e}
`;function v({text:e,subText:t,badgeText:n,buttonText:s,isOffline:v,linkText:I}){return(0,o.useEffect)((()=>{d.default.addEventV2({category:h.MONITOR_ANALYTICS_CATEGORY,action:"discover_create",label:"uptime_beta_onramp"})}),[]),o.createElement(g,null,o.createElement(b,null,o.createElement(i.default,{status:"info",text:n})),o.createElement(r.default,null),o.createElement(y,{height:"32px"}),o.createElement(a.default,{type:"h4",text:e,hasBottomSpacing:!0}),o.createElement(f,null,o.createElement(l.default,{type:"body-medium",color:"content-color-secondary"},t),o.createElement(y,{height:"16px"}),o.createElement(c.default,{type:"secondary",onClick:()=>{p.default.openMonitorForm({type:h.UPTIME_MONITOR_TYPE,source:"UptimeBetaOnramp",previewMode:!1})},text:s,isDisabled:v,tooltip:v&&m.TOOLTIP_TEXT.isOffline}),o.createElement(y,{height:"12px"}),o.createElement(u.default,{to:h.UPTIME_MONITOR_DOCUMENTATION_LEARN_MORE,target:"_blank"},o.createElement(c.default,{type:"plain",text:I}))))}},"./monitors/stores/domain/MonitorAgentsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o,s,i,r,a=n("../../node_modules/mobx/lib/mobx.module.js"),l=n("./monitors/stores/domain/MasterMonitorStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./node_modules/lodash/lodash.js");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let h=(s=m((o=class{constructor(e){p(this,"loading",s,this),p(this,"loaded",i,this),p(this,"error",r,this),this.monitorStore=e,this.masterMonitorStore=new l.default,this.hydrate()}get values(){return this.masterMonitorStore.getAgents().map((e=>({label:u.get(e,"name"),value:u.get(e,"id"),enabled:u.get(e,"enabled"),ip:u.get(e,"ip"),default:u.get(e,"default")})))}async getAgents(){this.update({loading:!0,loaded:!1});try{await this.masterMonitorStore.loadAgents(),this.update({loading:!1,loaded:!0})}catch(e){this.update({loading:!1,loaded:!1,error:e})}}getAgentById(e){return this.values.find((t=>t.value===e))}hydrate(){return(0,c.resolveStoreInstance)(d.default).onSyncAvailable().then((()=>this.getAgents()))}update(e){u.has(e,"loading")&&(this.loading=e.loading),u.has(e,"loaded")&&(this.loaded=e.loaded),u.has(e,"error")&&(this.error=e.error)}}).prototype,"loading",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=m(o.prototype,"loaded",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r=m(o.prototype,"error",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m(o.prototype,"values",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"values"),o.prototype),m(o.prototype,"getAgents",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"getAgents"),o.prototype),m(o.prototype,"hydrate",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"hydrate"),o.prototype),m(o.prototype,"update",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"update"),o.prototype),o)},"./monitors/stores/domain/MonitorConfigurationStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o,s,i,r,a=n("../../node_modules/mobx/lib/mobx.module.js"),l=n("./js/models/Cron.js"),c=n("./monitors/stores/domain/MasterMonitorStore.js"),d=n("./monitors/constants.js"),u=n("./node_modules/lodash/lodash.js");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let h=(s=m((o=class{constructor(e){p(this,"loading",s,this),p(this,"updating",i,this),p(this,"error",r,this),this.nonDerivedProperties=["id","name","active","schedule","notificationLimit","createdBy","createdAt","team","collection","options","files"],this.uptimeProperties=["status","targetURL","location"],this.monitorStore=e,this.masterMonitorStore=new c.default}get isOffline(){return this.masterMonitorStore.isOffline}get type(){return this.masterMonitorStore.getJobTemplateType(this.monitorStore.monitorId)||""}get monitorType(){return this.masterMonitorStore.fetchMonitorType(this.monitorStore.monitorId)}get data(){const e=this.masterMonitorStore.getJobTemplateConfiguration(this.monitorStore.monitorId);if(!e)return{};const t={type:e.type||this.type};return e.type===d.UPTIME_MONITOR_TYPE?Object.assign(t,u.pick(e,this.uptimeProperties)):Object.assign(t,{distribution:(e.distribution||[]).map((e=>e.region)),notifications:u.get(e,"notifications.onFailure",[]),versionTag:u.get(e,"versionTag",null),isHealthy:e._healthy,environment:e.environment?e.environment:null,retry:e.retry||{},retriesEnabled:u.get(e,"retry.attempts")>0,timeoutEnabled:Boolean(u.get(e,"options.requestTimeout")),delayEnabled:Boolean(u.get(e,"options.requestDelay"))}),Object.assign(t,u.pick(e,this.nonDerivedProperties)),e.type!==d.UPTIME_MONITOR_TYPE&&this.setIntervalProperties(t,e),t}get metadata(){return this.masterMonitorStore.getJobTemplateMetadata(this.monitorStore.monitorId)||{}}get isMonitorDeleted(){return!1===this.loading&&!this.updating&&!this.error&&!this.masterMonitorStore._configuration.has(this.monitorStore.monitorId)}setIntervalProperties(e,t){const n=u.get(t,"schedule.cronPattern","");if(u.isEmpty(n))e.intervalType="hour-timer",e.interval="*";else{const t=new l.default(n),o=t.hour,s=t.minute,i=t.weekday;"*"!==o[0]?(e.intervalType="week-timer",e.interval=i,e.time=o):"0"===s&&"*"===o[0]?(e.intervalType="hour-timer",e.interval=o):(e.intervalType="minute-timer",e.interval=s)}}updateMeta(e){u.has(e,"loading")&&(this.loading=e.loading),u.has(e,"updating")&&(this.updating=e.updating),u.has(e,"error")&&(this.error=e.error)}async getMonitorConfiguration(e,t=!0,n=[]){t&&this.updateMeta({loading:!0}),this.updateMeta({error:null});try{await this.masterMonitorStore.loadMonitorConfiguration(e,n),this.updateMeta({loading:!1})}catch(e){this.updateMeta({loading:!1,error:e})}}async updateMonitorConfiguration(e,t){this.updateMeta({updating:!0});const n=await this.masterMonitorStore.updateMonitorConfiguration({monitorId:e,body:t});return this.updateMeta({updating:!1}),n}}).prototype,"loading",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=m(o.prototype,"updating",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r=m(o.prototype,"error",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m(o.prototype,"isOffline",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"isOffline"),o.prototype),m(o.prototype,"type",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"type"),o.prototype),m(o.prototype,"data",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"data"),o.prototype),m(o.prototype,"metadata",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"metadata"),o.prototype),m(o.prototype,"isMonitorDeleted",[a.computed],Object.getOwnPropertyDescriptor(o.prototype,"isMonitorDeleted"),o.prototype),m(o.prototype,"updateMeta",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"updateMeta"),o.prototype),m(o.prototype,"getMonitorConfiguration",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"getMonitorConfiguration"),o.prototype),m(o.prototype,"updateMonitorConfiguration",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"updateMonitorConfiguration"),o.prototype),o)},"./monitors/stores/domain/MonitorJobsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o,s,i,r,a,l,c,d,u,p,m=n("../../node_modules/mobx/lib/mobx.module.js"),h=n("./monitors/stores/domain/MasterMonitorStore.js"),g=n("./monitors/utils/selectors.js"),f=n("./js/stores/StoreManager.js"),b=n("./js/stores/SyncStatusStore.js"),y=n("./monitors/constants.js"),v=n("./node_modules/lodash/lodash.js");function I(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let E=(o=m.action.bound,s=m.action.bound,r=_((i=class{constructor(e){I(this,"loading",r,this),I(this,"creating",a,this),I(this,"loaded",l,this),I(this,"error",c,this),I(this,"nextPage",d,this),I(this,"prevPage",u,this),I(this,"selectedJobId",p,this),this.masterMonitorStore=new h.default,this.monitorStore=e,this.monitorId=e.monitorId,this.hydrate(),this.offlineObserver=(0,m.reaction)((()=>(0,f.resolveStoreInstance)(b.default).isSocketConnected),(e=>{if(e&&(!1!==this.loaded||void 0!==this.loading)){const e=(0,g.getJobFiltersObject)(this.monitorStore.url.query,y.MONITOR_ENTITY);this.getJobs({monitorId:this.monitorId,clearPrevious:!0,...e})}}))}get selectedJob(){return this.selectedJobId&&this.find(this.selectedJobId)}get regionRunMap(){return this.selectedJob&&(0,g.getRegionRunMap)(this.selectedJob.runs)}get values(){return Object.values(this.masterMonitorStore.getJobsForMonitor(this.monitorId)).map(this.transformJob)}findRaw(e){return this.masterMonitorStore.getJobsForMonitor(this.monitorId)[e]}find(e){return this.transformJob(this.findRaw(e))}has(e){return Boolean(this.findRaw(e))}update(e){v.has(e,"loading")&&(this.loading=e.loading),v.has(e,"loaded")&&(this.loaded=e.loaded),v.has(e,"creating")&&(this.creating=e.creating),v.has(e,"error")&&(this.error=e.error),v.has(e,"nextPage")&&(this.nextPage=e.nextPage),v.has(e,"prevPage")&&(this.prevPage=e.prevPage)}async getJob(e){this.update({loading:!0,loaded:!1,error:null});try{await this.masterMonitorStore.loadJob(e),this.update({loading:!1,loaded:!0})}catch(e){this.update({loading:!1,error:e})}}get regions(){let e=[];return this.selectedJob&&this.selectedJob.runs&&this.selectedJob.runs.forEach((t=>{let n=!1;this.monitorStore.agents.values.forEach((o=>{t.region!==o.value&&t.agent!==o.value||(e.push({value:o.value,label:o.label}),n=!0)})),n||e.push({value:t.agent,label:""})})),e=v.uniqBy(e,"value"),e}get selectedRegion(){const e=this.monitorStore.runs.selectedRun;if(e){const t=e.region||e.agent;return v.find(this.regions,(e=>e.value===t))}return v.first(this.regions)}async getJobs({monitorId:e,goto:t,page:n,clearPrevious:o=!1,pageType:s,...i}){this.update({loading:!0,loaded:!1,error:null});try{const r=(0,g.getJobFiltersObject)(i,y.MONITOR_ENTITY),a=await this.masterMonitorStore.loadJobs({monitorId:e,goto:t,page:n,jobFilters:r,clearPrevious:o}),l=v.get(a,"body.meta",{}),c=(0,g.getJobTimeframe)(v.get(a,"body.data",{}));if(c&&this.monitorStore.metrics.values.length&&this.monitorStore.metrics.getMetrics(e,c),"prev"!==s&&this.update({nextPage:l.nextUrl?parseInt(l.nextUrl.split("page=")[1],10):null}),"next"!==s&&this.update({prevPage:l.prevUrl?parseInt(l.prevUrl.split("page=")[1],10):null}),this.update({loading:!1,loaded:!0}),t){const e=this.getGotoClosestJobId({goto:t,response:a});e&&(this.monitorStore.url.setQuery({job:e,goto:t,...r}),this.setSelectedJobId(e))}}catch(e){this.update({loading:!1,error:e})}}hydrate(){return(0,f.resolveStoreInstance)(b.default).onSyncAvailable().then((()=>this.getJobs({monitorId:this.monitorId})))}async createJob(e,t){this.update({creating:!0});try{const n=await this.masterMonitorStore.createJob(e),o=v.get(n,"body.data",{});t||(this.monitorStore.url.setQuery({...this.monitorStore.url.query,job:o.id}),this.setSelectedJobId(o.id)),this.update({creating:!1})}catch(e){this.update({creating:!1})}}transformJob(e){if(!e)return;const t=v.get(e,"results",{});return{id:e.id,name:e.name,jobTemplate:e.jobTemplate,options:e.options,trigger:e.trigger,createdAt:e.createdAt,startedAt:e.startedAt&&new Date(e.startedAt),finishedAt:e.finishedAt&&new Date(e.finishedAt),state:e.status&&e.status.state,results:t,failedTests:t.failedTestCount,passedTests:t.passedTestCount,responseTime:t.responseLatency,errors:t.errorCount,aborted:Boolean(t.abortedCount),runs:(e.runs||[]).map((e=>(e.agent&&!e.region&&(e.region=e.agent),e)))}}getGotoClosestJobId({goto:e,response:t}){let n,o=new Date(e),s=Number.MAX_SAFE_INTEGER;return v.get(t,"body.data",[]).forEach((e=>{const t=new Date(e.finishedAt),i=t-o;t>=o&&i<s&&(s=i,n=e.id)})),n}setSelectedJobId(e){this.selectedJobId=e,this.monitorStore.runs.setSelectedRunId(this.regionRunMap[v.get(this.selectedRegion,"value","")])}}).prototype,"loading",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=_(i.prototype,"creating",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=_(i.prototype,"loaded",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=_(i.prototype,"error",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_(i.prototype,"nextPage",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=_(i.prototype,"prevPage",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_(i.prototype,"selectedJobId",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_(i.prototype,"selectedJob",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"selectedJob"),i.prototype),_(i.prototype,"regionRunMap",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"regionRunMap"),i.prototype),_(i.prototype,"values",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"values"),i.prototype),_(i.prototype,"update",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"update"),i.prototype),_(i.prototype,"getJob",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"getJob"),i.prototype),_(i.prototype,"regions",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"regions"),i.prototype),_(i.prototype,"selectedRegion",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"selectedRegion"),i.prototype),_(i.prototype,"getJobs",[o],Object.getOwnPropertyDescriptor(i.prototype,"getJobs"),i.prototype),_(i.prototype,"hydrate",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"hydrate"),i.prototype),_(i.prototype,"createJob",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"createJob"),i.prototype),_(i.prototype,"setSelectedJobId",[s],Object.getOwnPropertyDescriptor(i.prototype,"setSelectedJobId"),i.prototype),i)},"./monitors/stores/domain/MonitorMetricsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o,s,i,r,a,l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./monitors/stores/domain/MasterMonitorStore.js"),d=n("./monitors/constants.js"),u=n("./node_modules/lodash/lodash.js");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let h=(o=l.action.bound,i=m((s=class{constructor(e){p(this,"loading",i,this),p(this,"loaded",r,this),p(this,"error",a,this),this.masterMonitorStore=new c.default,this.monitorStore=e}static async getMonitorMetricsForTeam(e){return(new c.default).getOrFetchMonitorsMetricsForTeam(e)}update(e){u.has(e,"loading")&&(this.loading=e.loading),u.has(e,"loaded")&&(this.loaded=e.loaded),u.has(e,"error")&&(this.error=e.error)}get values(){const e=this.masterMonitorStore.getJobTemplateType(this.monitorStore.monitorId),t=this.masterMonitorStore.getMetricsForMonitor(this.monitorStore.monitorId);if(e!==d.UPTIME_MONITOR_TYPE||u.isEmpty(t))return Object.values(t);{const e={};for(const n of Object.keys(t))e[n]=u.get(t,[n,"results","values","auto"],null);let n=u.get(e,"responseTime"),o=u.get(e,"uptime"),s=u.get(e,"incidents");return n=null===n?null:Number(n),e.responseTime=isNaN(n)||u.isNull(n)?n:n.toFixed(0),e.incidents=null===s?s:Number(s),e.uptime=null===o?o:parseFloat(o),e}}get metadata(){return this.masterMonitorStore.getJobTemplateType(this.monitorStore.monitorId)===d.UPTIME_MONITOR_TYPE?this.masterMonitorStore.getMetricsMetadataForMonitor(this.monitorStore.monitorId):{}}getMetrics(e,t){return this.update({loading:!0,loaded:!1}),this.masterMonitorStore.loadMetrics({monitorId:e,timeframe:t}).then((()=>{this.update({loading:!1,loaded:!0,error:null})})).catch((e=>{this.update({loading:!1,loaded:!1,error:e})}))}}).prototype,"loading",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r=m(s.prototype,"loaded",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=m(s.prototype,"error",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m(s.prototype,"update",[l.action],Object.getOwnPropertyDescriptor(s.prototype,"update"),s.prototype),m(s.prototype,"values",[l.computed],Object.getOwnPropertyDescriptor(s.prototype,"values"),s.prototype),m(s.prototype,"metadata",[l.computed],Object.getOwnPropertyDescriptor(s.prototype,"metadata"),s.prototype),m(s.prototype,"getMetrics",[o],Object.getOwnPropertyDescriptor(s.prototype,"getMetrics"),s.prototype),s)},"./monitors/stores/domain/MonitorPermissionStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("./js/stores/StoreManager.js"),s=n("./js/stores/CurrentUserStore.js"),i=n("./monitors/stores/domain/MasterMonitorStore.js"),r=(n("./monitors/constants.js"),n("./node_modules/lodash/lodash.js"));class a{constructor(){return a.instance||(this.masterMonitorStore=new i.default,a.instance=this),a.instance}isUserLoggedIn(){return(0,o.resolveStoreInstance)(s.default).isLoggedIn}can(e,t){const n=this.masterMonitorStore.getJobTemplateMetadata(t);return!(!n||!n.permissions)&&r.get(n.permissions,e,!1)}}},"./monitors/stores/domain/MonitorRunsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o,s,i,r,a,l,c,d,u,p,m,h,g,f,b,y=n("../../node_modules/mobx/lib/mobx.module.js"),v=n("./monitors/stores/domain/MasterMonitorStore.js"),I=n("./monitors/stores/domain/MonitorPermissionStore.js"),_=n("./node_modules/lodash/lodash.js");function E(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function S(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let C=(o=y.action.bound,s=y.action.bound,i=y.action.bound,r=y.action.bound,a=y.action.bound,l=y.action.bound,c=y.action.bound,u=S((d=class{constructor(e){E(this,"loading",u,this),E(this,"creating",p,this),E(this,"loaded",m,this),E(this,"error",h,this),E(this,"selectedRunId",g,this),E(this,"selectedRunIdLoading",f,this),E(this,"selectedRunIdLoaded",b,this),this.monitorStore=e,this.monitorPermissionStore=new I.default,this.masterMonitorStore=new v.default}get selectedRun(){return this.masterMonitorStore.getRun(this.selectedRunId)}updateLoadingStatus(){this.selectedRunIdLoading=this.loading.includes(this.selectedRunId),this.selectedRunIdLoaded=this.loaded.includes(this.selectedRunId)}startLoading(e){this.loading.push(e),this.loaded=this.loaded.filter((t=>t!==e)),this.updateLoadingStatus()}finishLoading(e){this.loaded.push(e),this.loading=this.loading.filter((t=>t!==e)),this.updateLoadingStatus()}update(e){_.has(e,"loading")&&(this.loading=e.loading),_.has(e,"loaded")&&(this.loaded=e.loaded),_.has(e,"error")&&(this.error=e.error)}async getRun(e,t){if(this.monitorPermissionStore.can("viewTestResults",this.monitorStore.monitorId)){this.startLoading(t),this.update({error:null});try{let n=await this.masterMonitorStore.loadRun(e,t),o=_.get(n,"body._embedded.run.0.id");this.finishLoading(o)}catch(e){this.update({loading:[],error:e})}}}async getRunAttempt(e,{runId:t,retryId:n}){this.startLoading(t),this.update({error:null});try{let o=await this.masterMonitorStore.loadRunAttempt({monitorId:e,runId:t,retryId:n}),s=_.get(o,"body._embedded.run.0.id");this.finishLoading(s)}catch(e){this.update({loading:[],error:e})}}setSelectedRunId(e){if(this.selectedRunId=e,!this.masterMonitorStore.isOffline){var t;const n=null===(t=this.monitorStore)||void 0===t?void 0:t.monitorId;this.getRun(n,e)}}}).prototype,"loading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(d.prototype,"creating",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=S(d.prototype,"loaded",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=S(d.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S(d.prototype,"selectedRunId",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S(d.prototype,"selectedRunIdLoading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S(d.prototype,"selectedRunIdLoaded",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S(d.prototype,"selectedRun",[y.computed],Object.getOwnPropertyDescriptor(d.prototype,"selectedRun"),d.prototype),S(d.prototype,"updateLoadingStatus",[o],Object.getOwnPropertyDescriptor(d.prototype,"updateLoadingStatus"),d.prototype),S(d.prototype,"startLoading",[s],Object.getOwnPropertyDescriptor(d.prototype,"startLoading"),d.prototype),S(d.prototype,"finishLoading",[i],Object.getOwnPropertyDescriptor(d.prototype,"finishLoading"),d.prototype),S(d.prototype,"update",[r],Object.getOwnPropertyDescriptor(d.prototype,"update"),d.prototype),S(d.prototype,"getRun",[a],Object.getOwnPropertyDescriptor(d.prototype,"getRun"),d.prototype),S(d.prototype,"getRunAttempt",[l],Object.getOwnPropertyDescriptor(d.prototype,"getRunAttempt"),d.prototype),S(d.prototype,"setSelectedRunId",[c],Object.getOwnPropertyDescriptor(d.prototype,"setSelectedRunId"),d.prototype),d)},"./monitors/stores/domain/MonitorStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n("./monitors/stores/domain/MonitorAgentsStore.js"),s=n("./monitors/stores/domain/MonitorConfigurationStore.js"),i=n("./monitors/stores/domain/MonitorJobsStore.js"),r=n("./monitors/stores/domain/MonitorMetricsStore.js"),a=n("./monitors/stores/domain/MonitorRunsStore.js"),l=n("./monitors/stores/ui/MonitorUrlStore.js"),c=n("./monitors/stores/domain/MonitorUptimeIncidentStore.js"),d=n("./monitors/stores/domain/MasterMonitorStore.js");class u{constructor(e){this.monitorId=e,this.configuration=new s.default(this),this.jobs=new i.default(this),this.metrics=new r.default(this),this.runs=new a.default(this),this.agents=new o.default(this),this.url=new l.default(this),this.incidents=new c.default(this),this.masterMonitorStore=new d.default}async refreshIncidentsAndMetrics(){this.incidents.update({loading:!0});try{this.configuration.getMonitorConfiguration(this.monitorId,!1),await this.masterMonitorStore._loadAllIncidentsAndMetrics({monitorId:this.monitorId,timeInterval:this.url.timeInterval}),this.incidents.update({error:null}),this.metrics.update({error:null})}catch(e){}finally{this.incidents.update({loading:!1}),this.metrics.update({loading:!1})}}}},"./monitors/stores/domain/MonitorUptimeIncidentStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var o,s,i,r,a,l,c,d,u,p=n("../../node_modules/mobx/lib/mobx.module.js"),m=n("./monitors/stores/domain/MasterMonitorStore.js"),h=n("./js/stores/StoreManager.js"),g=n("./js/stores/SyncStatusStore.js"),f=n("./monitors/utils/uptimeHelpers.js"),b=n("./node_modules/moment/moment.js"),y=n.n(b),v=n("./monitors/constants.js"),I=n("./runtime-repl/request-http/httpstatuscodes.js"),_=n("./node_modules/lodash/lodash.js");function E(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function S(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const C="regional",T="summarized";let A=(o=p.action.bound,i=S((s=class{constructor(e){E(this,"loading",i,this),E(this,"selectedIncident",r,this),E(this,"nextPageCursor",a,this),E(this,"error",l,this),E(this,"since",c,this),E(this,"until",d,this),E(this,"loaded",u,this),this.masterMonitorStore=new m.default,this.monitorStore=e,this.monitorId=e.monitorId,this.updateTimeFrame()}subscribeStateChanges(){this.offlineObserver=(0,p.reaction)((()=>(0,h.resolveStoreInstance)(g.default).isConsistentlyOffline),(e=>{e||(this.update({loading:!0}),this.clearIncidentsForMonitor(),this.hydrate())})),this.stateChangeDisposer=(0,p.reaction)((()=>this.sortedIncidents.last.value),(e=>{e&&!this.loading&&(this.updateTimeFrame(),this.monitorStore.metrics.getMetrics(this.monitorId,this.monitorStore.url.timeInterval))}))}unsubscribeStateChanges(){_.invoke(this.offlineObserver),_.invoke(this.stateChangeDisposer)}updateTimeFrame(){const e=this.monitorStore.url.timeInterval;this.since=e.since,this.until=e.until}get isOffline(){return this.masterMonitorStore.isOffline}*hydrate(){yield(0,h.resolveStoreInstance)(g.default).onSyncAvailable(),yield this.getMonitorStatesWithContexts({since:this.since.toISOString()})}update({loading:e,error:t,loaded:n}){void 0!==e&&(this.loading=e),void 0!==t&&(this.error=t),void 0!==n&&(this.loaded=n)}*getMonitorStatesWithContexts({since:e}){!this.loading&&this.update({loading:!0,error:null});try{yield this.getSummarizedIncidents({since:e})}catch(e){this.update({error:e})}finally{this.update({loaded:!0}),this.loading&&this.update({loading:!1})}}*getSummarizedIncidents({nextCursor:e,since:t}){const n=(yield this.masterMonitorStore.loadSummarizedIncidentsForMonitor({monitorId:this.monitorId,since:t,nextCursor:e})).body.meta.nextCursor;n?(this.nextPageCursor.set(T,n),yield this.getSummarizedIncidents({nextCursor:n,since:t})):this.nextPageCursor.set(T,null)}get values(){return{[T]:j(this.summarizedIncidents.data,this.since,this.until),[C]:w(this.regionalIncidents,this.since,this.until)}}clearIncidentsForMonitor(){return this.nextPageCursor.set(C,null),this.nextPageCursor.set(T,null),this.masterMonitorStore.clearIncidentsForMonitor(this.monitorId)}get summarizedIncidents(){const e=this.masterMonitorStore.getSummarizedIncidentsForMonitor(this.monitorId);return{data:j(_.mapValues(e,(e=>({startedAt:e.window.start,endedAt:e.window.end,value:_.get(e,"name",v.UNKNOWN_STATE_NAME),summary:e.summary}))),this.since,this.until),metadata:this.masterMonitorStore.getSummarizedIncidentsMetadataForMonitor(this.monitorId)}}get tabularViewForSummarizedIncidents(){let e=[];function t(e){return e.isResponseReceived?e.isResponseTimeLimitExceeded?"Response Time Limit Exceeded":e.responseCode>299||e.responseCode<200?I.default[e.responseCode]?`${e.responseCode} ${I.default[e.responseCode].name}`:e.responseCode:"":"No Response Received"}const n=_.pickBy(this.values.summarized,(e=>e.value===v.DOWN_STATE_NAME));return Object.keys(n).map((o=>{let s=[],i=[];for(const e of _.get(n,`[${o}].summary`,[])){const t=Object.keys(e.byLocation);for(const n of t)s.includes(n)||_.get(e,`byLocation[${n}].state`)!==v.DOWN_STATE_NAME||s.push(n),i.push(_.get(e,`byLocation[${n}].context`,{}))}i=i.map(t).filter(Boolean),i=[...new Set(i)],e.push({startedAt:f.default.getDate(this.values.summarized[o].startedAt),duration:f.default.getDateDifference(this.values.summarized[o].startedAt,this.values.summarized[o].endedAt),error:i.join(", "),regions:s})})),e=e.sort((function(e,t){return new Date(t.startedAt)-new Date(e.startedAt)})),e}get sortedIncidents(){const e=Object.values(this.summarizedIncidents.data).sort((function(e,t){return new Date(e.startedAt)-new Date(t.startedAt)})),t=this.regionalIncidents;for(const e of Object.keys(t))t[e].nodes=t[e].nodes.sort((function(e,t){return new Date(e.startedAt)-new Date(t.startedAt)}));if(!Object.keys(t).length){const e=_.get(this,"monitorStore.configuration.data.location",[]);for(const{region:n}of e){const e=this.monitorStore.agents.getAgentById(n);t[n]={name:_.get(e,"label"),nodes:[]}}}const n=O(e,this.since,this.until),o=_.last(n),s=_.find(n,(({endedAt:e})=>_.isEmpty(e)));return{[T]:n,[C]:w(t,this.since,this.until),last:o,ongoing:s,isOngoing:o&&s&&o.id===s.id}}get regionalIncidents(){const e=this.masterMonitorStore.getSummarizedIncidentsForMonitor(this.monitorId),t={};for(const n of Object.values(e))for(const e of n.summary){if(y()(e.window.end).isBefore(this.since))continue;const n=Object.keys(_.get(e,"byLocation",{}));for(const o of n){if(!(o in t)){const e=this.monitorStore.agents.getAgentById(o);t[o]={name:_.get(e,"label"),nodes:[]}}t[o].nodes.push({startedAt:e.window.start,endedAt:e.window.end,value:e.byLocation[o].state})}}return w(t,this.since,this.until)}get statesForTimePeriod(){return{[T]:O(this.sortedIncidents.summarized,this.since,this.until),[C]:w(this.sortedIncidents.regional,this.since,this.until)}}}).prototype,"loading",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=S(s.prototype,"selectedIncident",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=S(s.prototype,"nextPageCursor",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.observable.map({})}}),l=S(s.prototype,"error",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=S(s.prototype,"since",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=S(s.prototype,"until",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=S(s.prototype,"loaded",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S(s.prototype,"updateTimeFrame",[o],Object.getOwnPropertyDescriptor(s.prototype,"updateTimeFrame"),s.prototype),S(s.prototype,"isOffline",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"isOffline"),s.prototype),S(s.prototype,"hydrate",[N],Object.getOwnPropertyDescriptor(s.prototype,"hydrate"),s.prototype),S(s.prototype,"update",[p.action],Object.getOwnPropertyDescriptor(s.prototype,"update"),s.prototype),S(s.prototype,"getMonitorStatesWithContexts",[N],Object.getOwnPropertyDescriptor(s.prototype,"getMonitorStatesWithContexts"),s.prototype),S(s.prototype,"getSummarizedIncidents",[N],Object.getOwnPropertyDescriptor(s.prototype,"getSummarizedIncidents"),s.prototype),S(s.prototype,"values",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"values"),s.prototype),S(s.prototype,"clearIncidentsForMonitor",[p.action],Object.getOwnPropertyDescriptor(s.prototype,"clearIncidentsForMonitor"),s.prototype),S(s.prototype,"summarizedIncidents",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"summarizedIncidents"),s.prototype),S(s.prototype,"tabularViewForSummarizedIncidents",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"tabularViewForSummarizedIncidents"),s.prototype),S(s.prototype,"sortedIncidents",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"sortedIncidents"),s.prototype),S(s.prototype,"regionalIncidents",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"regionalIncidents"),s.prototype),S(s.prototype,"statesForTimePeriod",[p.computed],Object.getOwnPropertyDescriptor(s.prototype,"statesForTimePeriod"),s.prototype),s);function j(e,t,n){const o={};return Object.keys(e).map((s=>{O([e[s]],t,n).length&&(o[s]=e[s])})),o}function w(e,t,n){const o={};return Object.keys(e).forEach((s=>{o[s]={...e[s],nodes:O(e[s].nodes,t,n)}})),o}function O(e,t,n){return e&&e.filter((e=>{const o=new Date(e.startedAt).valueOf(),s=new Date(e.endedAt).valueOf();return s>=t&&s<=n||o>=t&&o<=n||o<=t&&(!s||s>=n)}))}function N(e,t,n){n.value&&(n.value=(0,p.flow)(n.value))}},"./monitors/stores/ui/MonitorUrlStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s,i,r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/services/NavigationService.js"),l=n("./monitors/constants.js"),c=n("./node_modules/moment/moment.js"),d=n.n(c),u=n("./node_modules/lodash/lodash.js");function p(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let m=(o=r.action.bound,i=p((s=class{constructor(e){var t,n,o,s;t=this,n="query",s=this,(o=i)&&Object.defineProperty(t,n,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(s):void 0}),this.monitorStore=e,this.urlChangeReaction=(0,r.reaction)((()=>this.query),(e=>{!e.job&&this.monitorStore.jobs.getJobs({monitorId:this.monitorStore.monitorId,clearPrevious:!0,page:e.goto?null:1,...e})}))}get location(){return{pathname:`/monitors/${this.monitorStore.monitorId}`,query:this.query}}get params(){return{monitorId:this.monitorStore.monitorId}}setQuery(e){this.query=e}get viewFilters(){return a.default.getActiveQueryParams().get()}computeTimeFrame(e){let t=Number(e),n=u.find(l.UPTIME_MONITOR_FREQUENCY_OPTIONS,["value",e]);return u.isFinite(t)&&n||(t=l.DEFAULT_TIME_FRAME),{since:d()().utc().subtract(t,"minutes"),until:d().utc()}}get timeInterval(){const e=this.viewFilters[l.TIME_FRAME_PARAM];return{timePeriod:e,...this.computeTimeFrame(e)}}}).prototype,"query",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p(s.prototype,"location",[r.computed],Object.getOwnPropertyDescriptor(s.prototype,"location"),s.prototype),p(s.prototype,"params",[r.computed],Object.getOwnPropertyDescriptor(s.prototype,"params"),s.prototype),p(s.prototype,"setQuery",[o],Object.getOwnPropertyDescriptor(s.prototype,"setQuery"),s.prototype),s)},"./monitors/utils/messages/UptimeMessages.js":function(e,t,n){"use strict";n.r(t),n.d(t,{BANNER_CARD_UPTIME:function(){return l},EMPTY_STATE:function(){return s},ERROR_STATE:function(){return i},LOADING_STATE:function(){return r},TIMELINE:function(){return a},UPTIME_MONITOR:function(){return o}});const o={runPlaceholderPerMinute:"Runs every minute",runPlaceholderPerHour:"Runs every hour",runPlaceholder:"Runs every",more_actions:"View more actions",feedback_msg:"Share your feedback",incidentsTitle:"Incidents",viewIncident:"View Incident",minutes:"minutes"},s={noDowntime:"Looking good!",noDowntimeText:"No incidents in the selected time period.",noDowntimeSubText:"Select a longer period to view past incidents."},i={blanketErrorText:"Couldn't load this monitor",blanketErrorSubText:"Try refreshing this tab or check back in some time.",noDowntime:"Couldn't load downtime incidents",noDowntimePlaceHolder:"Try refreshing the page or check back in sometime.",details:"Couldn’t load monitor details",metrics:"Failed to load metrics."},r={metrics:"Loading metrics...",loading:"Loading..."},a={toggle:{summary:"Summary",regional:"Region"},header:{title:"Uptime",states:{up:"Up",down:"Down",unknown:"Unknown"},tooltip:{unknownState:"The monitor is non-existent, paused, or our monitoring service had an exception."}}},l={text:"Know when your service is down",subText:"Monitor uptime for a URL across regions and setup timely alerts without having to create a collection.",badgeText:"Beta",buttonText:"Create an Uptime Monitor",link:"#",linkText:"Learn more about uptime monitors"}},"./monitors/utils/uptimeHelpers.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/moment/moment.js"),s=n.n(o);let i={getDate:e=>e?s()(e).format("DD MMM YYYY, hh:mm A"):"N/A",getDateDifference:(e,t)=>{if(!t)return"Ongoing";const n=s()(e),o=s()(t);return function(e){let t=e/60,n=Math.floor(t),o=60*(t-n),s=Math.round(o);return n<1?s+"m":n>=1&&0==s?n+"h":n+"h "+s+"m"}(Math.max(o.diff(n,"minutes"),1))},getDateAndTimeDifference(e,t,n=!1){let o;const i=s().duration(s()(t).diff(s()(e))),r=Math.floor(i.asDays()),a=r?`${r}d`:"",l=i.hours(),c=`${l}h`,d=`${i.minutes()}m`;if(n){o=`${i.seconds()}s`}return!n||r||l?[a,c,d].join(" "):[d,o].join(" ")}};t.default=i},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-success-stroke.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),u=n("./node_modules/lodash/lodash.js"),p=n.n(u);class m extends o.Component{componentDidMount(){const e=(0,d.getPreferredEntityId)(this.props.preferredEntities,"connectedAccount");e&&p().isFunction(this.props.onSelection)&&this.props.onSelection(e)}render(){const{connectedAccount:e,isLoading:t,isUsingPersonalCredentials:n,orphaned:d,reauthenticateCallback:u,primarySuccessText:p,primaryOrphanedText:m,reauthenticateText:h,reauthenticateWithAnotherAccount:g,primaryChangeAuthenticationText:f,changeAuthenticationText:b,changeAuthenticationCallback:y}=this.props;return t?o.createElement(s.default,null):g?o.createElement("div",{className:"integrations-connected-account__form__header"},o.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},o.createElement(l.default,{color:"content-color-primary"}),o.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},f,o.createElement("div",{className:"integrations-connected-account__form__header__helper"},o.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>y()}," ",b," "))))):d?o.createElement("div",{className:"integrations-connected-account__form__header"},o.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},o.createElement(l.default,{color:"base-color-error"}),o.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},m,o.createElement("div",{className:"integrations-connected-account__form__header__helper"},"To continue using this integration,",o.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>u()}," ",h," "))))):n||!e?null:o.createElement(o.Fragment,null,o.createElement("div",{className:"integrations-connected-account__form__header"},o.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},o.createElement(c.default,{color:"base-color-success"}),o.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},o.createElement(r.default,{styleAs:"h6",type:"h6",text:p,color:"content-color-secondary"}),o.createElement(a.default,{onClick:()=>u(),type:"plain",text:h})))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{convertEntityListToOptions:function(){return i},convertObjectListToOptions:function(){return r},getInputError:function(){return p},getPreferredEntity:function(){return d},getPreferredEntityId:function(){return u},getServiceActionInputsMap:function(){return l},isBlockedOnAnotherInput:function(){return c},isEntityInputInEditFlow:function(){return m},isValidSetOfOptions:function(){return a}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o);function i(e){return r(e,"name","id")}function r(e,t="name",n="id"){return e?e.map((e=>({label:s().get(e,t),value:s().get(e,n)}))):[]}function a(e){return s().isArray(e)&&s().some(e,(e=>s().has(e,"label")&&s().has(e,"value")))}function l(e,t){return s().reduce(s().get(e,"inputs"),((e,n,o)=>(e[o]=s().get(s().find(t,["key",n]),"value"),e)),{})}function c(e,t){return s().some(e,(e=>{const n=s().find(t,["key",e]);return s().isEmpty(n)||s().isNil(n.value)||(s().isObject(n.value)||s().isString(n.value))&&s().isEmpty(n.value)||n.error}))}function d(e,t){return s().find(e,["entityType",t])||null}function u(e,t){return s().get(d(e,t),"entityId")}function p(e,t){const n=s().isNil(t)||(s().isObject(t)||s().isString(t))&&s().isEmpty(t);return e.mandatory&&n&&"This field is mandatory"}function m(e){return e.currentValue&&e.disabled}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});n("./node_modules/lodash/lodash.js");var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),m=n("./node_modules/prop-types/index.js"),h=n.n(m),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),f=n("./integrations/monitoring/constants.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}let y=(0,i.observer)(o=class extends s.Component{constructor(e){super(e)}render(){const{handleOnApiKeyChange:e,handleOnApiKeyBlur:t,apiKey:n,handleOnAppKeyChange:o,handleOnAppKeyBlur:i,appKey:m,region:h,handleOnRegionChange:y,mode:v,apiKeyValidationStatus:I,apiKeyValidationMessage:_,appKeyValidationStatus:E,appKeyValidationMessage:S}=this.props,C=v===f.ADD_MODE?{fieldType:"required"}:{};return s.createElement(s.Fragment,null,s.createElement(r.default,{direction:"column",gap:"spacing-l"},s.createElement(a.default,{name:"Select Datadog site",value:h,direction:"column",onChange:y,label:s.createElement(l.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},s.createElement(c.default,{label:"US1 (datadoghq.com)",value:"us1"}),s.createElement(c.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),s.createElement(c.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),s.createElement(c.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),s.createElement(c.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),s.createElement(d.default,{id:"datadog-api-key",type:"password",label:s.createElement(l.default,b({text:"Datadog API Key"},C)),helperText:s.createElement(u.default,null,"Enter the API Key provided by Datadog or ",s.createElement(g.default,{extUrl:`${p.default.getDatadogHostname(h)}/organization-settings/api-keys`},"generate one here.")),onChange:e,onBlur:t,value:n,validationStatus:I,validationMessage:_,placeholder:v===f.EDIT_MODE?"****************************":null}),s.createElement(d.default,{id:"datadog-app-key",type:"password",label:s.createElement(l.default,b({text:"Datadog Application Key"},C)),helperText:s.createElement(u.default,null,"Enter the Application Key provided by Datadog or ",s.createElement(g.default,{extUrl:`${p.default.getDatadogHostname(h)}/organization-settings/application-keys`},"generate one here.")),value:m,onChange:o,onBlur:i,validationStatus:E,validationMessage:S,placeholder:v===f.EDIT_MODE?"****************************":null})))}})||o;y.propTypes={handleOnApiKeyChange:h().func.isRequired,handleOnApiKeyBlur:h().func.isRequired,apiKey:h().string.isRequired,apiKeyValidationStatus:h().string.isRequired,apiKeyValidationMessage:h().string.isRequired,handleOnAppKeyChange:h().func.isRequired,handleOnAppKeyBlur:h().func.isRequired,appKey:h().string.isRequired,appKeyValidationStatus:h().string.isRequired,appKeyValidationMessage:h().string.isRequired,region:h().string.isRequired,handleOnRegionChange:h().func.isRequired,mode:h().string.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});n("./node_modules/lodash/lodash.js");var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js"),p=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("./node_modules/prop-types/index.js"),h=n.n(m);const g=p.default.div`
  width: fit-content;
`;let f=(0,i.observer)(o=class extends s.Component{constructor(e){super(e)}render(){const{apiKey:e,appKey:t,selectedDashboards:n,availableDashboards:o,handleDashboardsChange:i,isLoadingDashboards:p,errorDashboards:m,region:h,environments:f,rule:b,onSelectEnvironmentServices:y,removeEnvironmentSelector:v,handleAddEnvironmentButtonClick:I,isAddEnvironmentButtonDisabled:_,integrationId:E}=this.props;return s.createElement(r.default,{direction:"column",gap:"spacing-l",width:"100%"},s.createElement(u.default,{integrationId:E,mode:this.props.mode,apiKey:e,appKey:t,environments:f,region:h,rule:b,onSelectEnvironmentServices:y,removeEnvironmentSelector:v}),s.createElement(g,null,s.createElement(a.default,{type:"tertiary",onClick:I,text:"Add Environment",icon:s.createElement(d.default,null),isDisabled:_,tooltip:!_&&"Fill in the details to add a new environment."})),s.createElement(l.default,{value:n,options:o,placeholder:"Select Dashboards",label:s.createElement(c.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:i,isLoading:p,error:m&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}))}})||o;f.propTypes={mode:h().string.isRequired,apiKey:h().string.isRequired,appKey:h().string.isRequired,selectedDashboards:h().array.isRequired,availableDashboards:h().array.isRequired,handleDashboardsChange:h().func.isRequired,isLoadingDashboards:h().bool.isRequired,errorDashboards:h().bool.isRequired,region:h().string.isRequired,environments:h().array.isRequired,rule:h().string.isRequired,onSelectEnvironmentServices:h().func.isRequired,removeEnvironmentSelector:h().func.isRequired,handleAddEnvironmentButtonClick:h().func.isRequired,isAddEnvironmentButtonDisabled:h().bool.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DatadogEnvironmentSelector:function(){return _},default:function(){return I}});var o,s,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/monitoring/constants.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),v=n("./integrations/monitoring/services/index.js");let I=(0,l.observer)(s=class extends a.Component{constructor(e){super(e)}render(){let{environments:e,apiKey:t,appKey:n,region:o,rule:s,integrationId:i}=this.props;return a.createElement(a.Fragment,null,r().map(e,((l,c)=>a.createElement(a.Fragment,null,a.createElement(p.default,{direction:"column",gap:"spacing-l"},a.createElement(p.default,{justifyContent:"space-between",alignItems:"center"},a.createElement(m.default,{type:"h4",text:"Select services for Environment",color:"content-color-primary"}),r().size(e)>1&&a.createElement(h.default,{type:"tertiary",onClick:()=>this.props.removeEnvironmentSelector(c),text:"Remove",icon:a.createElement(y.default,null)})),a.createElement(_,{integrationId:i,mode:this.props.mode,apiKey:t,appKey:n,environments:e,environment:l,key:l.id,region:o,rule:s,onSelectEnvironmentServices:this.props.onSelectEnvironmentServices,index:c}))))))}})||s,_=(0,l.observer)(o=class extends a.Component{constructor(e){super(e),this.state={environmentName:e.environment.name,selectedServices:r().map(e.environment.services,(e=>({label:e,value:e}))),availableServices:[],loadingServices:!1,errorServices:"",errorName:""},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.onServiceSelect=this.onServiceSelect.bind(this),this.listServicesDebounce=r().debounce(this.listServices.bind(this),1e3)}componentDidMount(){this.listServices()}onServiceSelect(e){r().isArray(e)&&this.setState({selectedServices:e},(()=>{this.props.onSelectEnvironmentServices(this.state.environmentName,r().map(e,"value"),this.props.index)}))}async listServices(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(u.DATADOG_APM_CLASS_ID);const{rule:e,apiKey:t,appKey:n,region:o,integrationId:s,mode:i}=this.props,{environmentName:a}=this.state,l=r().find(this.integrationsStore.integrationClass.inputs,{key:"environments"}),c=r().get(l,"options.serviceActionId"),d=r().get(l,"id");if((r().isEmpty(t)||r().isEmpty(n))&&i===u.ADD_MODE)return;this.setState({loadingServices:!0,errorServices:!1});let p={};p=i&&i===u.EDIT_MODE?{rule:e,...t?{api_key:t}:{},...n?{app_key:n}:{},environment:a,region:o}:{rule:e,api_key:t,app_key:n,environment:a,region:o},v.default[e].listServicesWithIntegrationId(p,s||null,c,d).then((e=>{let t=r().map(r().keys(e),(e=>({label:e,value:e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedServices:[]})}))}render(){const{selectedServices:e,availableServices:t,loadingServices:n,errorServices:o,environmentName:s,errorName:i}=this.state;let{environments:l}=this.props;return a.createElement(p.default,{direction:"column",gap:"spacing-l"},a.createElement(g.default,{id:"apm-datadog-environment",label:a.createElement(f.default,{text:"Datadog Environment",infoText:"Enter the Datadog environment for the services."}),helperText:"This will be used as a filter on the environment tag on datadog.",value:s,isDisabled:r().size(e)>0,onChange:e=>{const t=e.target.value,n=r().find(l,(e=>e.name===t&&r().size(e.services)>0));n&&r().size(n.services)?this.setState({environmentName:t,errorName:"You cannot input multiple environments with the same name.",validationStatus:"error",selectedServices:[]}):this.setState({environmentName:t,errorName:"",validationStatus:null,selectedServices:[]},(()=>{this.listServicesDebounce()}))},validationStatus:this.state.validationStatus,validationMessage:"error"===this.state.validationStatus?i:null}),a.createElement(b.default,{value:e,options:t,placeholder:"Select Datadog APM Services",label:a.createElement(f.default,{text:"Services",type:"secondary",infoText:"Datadog Metric Graphs will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:n,error:o&&"Unable to load services",isDisabled:!r().isEmpty(i)}))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),r=n("./js/stores/StoreManager.js"),a=n("./js/stores/IntegrationsStore.js"),l=n("../../node_modules/mobx/lib/mobx.module.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}function d(e){let{disabled:t,workspaceId:n,payload:d,integrationFormActions:u,source:p,showDivider:m,...h}=e,g="basic_auth"!==(f=(0,l.toJS)((0,r.resolveStoreInstance)(a.default).authType))&&"token"!==f;var f;return p||(p="team_integrations_create_forms"),o.createElement("div",null,m&&o.createElement("hr",{className:"integration-add-actions-separator"}),o.createElement(i.default,c({disabled:t,workspaceId:n,payload:d},h,{redirect:e.redirect,integrationFormActions:u,source:p,alignLeft:g})),o.createElement(s.default,c({alignLeft:g,integrationFormActions:u,payload:d,source:p},h)))}d.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n("../../node_modules/react/index.js");function s(e){const{imageSrc:t,displayField:n}=e;return o.createElement("div",{className:"integrations-add-card__authed-user"},o.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&o.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),o.createElement("span",{className:"integrations-add-card__authed-user__name"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n("../../node_modules/react/index.js");function s(e){const{className:t,extUrl:n,target:s}=e;return o.createElement("a",{className:t,href:n,rel:"_blank"===s?"noopener noreferrer":"",target:s,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var o,s=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),r=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./monitors/services/MonitorService.js"),d=n("./js/services/NavigationService.js"),u=n("./api-dev/services/APIDevService.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),h=(n("./js/modules/services/RemoteSyncRequestService.js"),n("./integrations/constants/integrationsConstants.ts")),g=n("./runtime-repl/collection/_api/CollectionInterface.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),y=n("./js/external-navigation/ExternalNavigationService.js"),v=n("./api-dev/interfaces/APIInterface.js"),I=n("../../node_modules/mobx/lib/mobx.module.js"),_=n("./node_modules/lodash/lodash.js"),E=n.n(_);const S="Malformed response",C={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},T={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let A=(0,p.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===h.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===h.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,I.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:E().get(e,"name"),value:E().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(E().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===h.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===h.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===h.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===h.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===h.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return C[this.props.entity]?C[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,o){return new Promise(((o,s)=>{const i=e.map((e=>({id:E().get(e,"apiversion"===n?"api":"id")})));let r=null;h.INTEGRATION_FORM_MODE.ADD,r=m.default.fetchCreatePermissions,r(t,n,i).then((t=>(E().forEach(E().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),o(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}fetchCollections(e){e?(0,g.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(S);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?c.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:o}=this.getFormattedResponse(t);if(o)throw new Error(S);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===h.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?c.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:o}=this.getFormattedResponse(t);if(o)throw new Error(S);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===h.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?u.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(S);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await u.default.getVersions(e);let{newEntities:n,malformedResponse:o}=this.getFormattedResponse(t);if(o)throw new Error(S);if(this.props.rule&&this.props.mode){const e="apiversion";n=await this.fetchAndAssignPermissions(n,this.props.rule,e,this.props.mode)}this.props.entity===h.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(E().find(n,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:n,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){E().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==h.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===h.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return s.createElement(f.default,{alignItems:"center",direction:"column"},s.createElement("div",null,"This workspace doesn't have any monitors."),s.createElement("div",{onClick:()=>{"workspace"===E().split(d.default.getCurrentURL(),"/",1)[0]?d.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,y.openExternalLink)(d.default.getBaseURL()+"/"+d.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},s.createElement(b.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===h.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:n}=this.state;if(e===h.entityTypes.API_VERSIONS){const e=await(0,v.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(n[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:n,entityVersions:o,firstLoad:r,shouldHideDropdown:a}=this.state,{selectedEntity:l,selectedEntityVersion:c}=this.store;return a?null:s.createElement(i.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===h.entityTypes.API_VERSIONS?o:n,value:this.props.value||(this.props.entity===h.entityTypes.API_VERSIONS?c:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||E().get(T,this.props.entity),emptyStateError:!e&&(this.props.entity===h.entityTypes.API_VERSIONS?o.length>0&&!c:n.length>0&&!l)&&!r&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./monitors/services/MonitorService.js"),l=n("./api-dev/services/APIDevService.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./runtime-repl/collection/_api/CollectionInterface.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=n("./js/components/base/LoadingIndicator.js"),g=n("./integrations/api-observability/components/base/CustomDropdown.js"),f=n("./node_modules/lodash/lodash.js");const b="Malformed response",y={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},v={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let I=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===u.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:f.get(e,"name"),value:f.get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(f.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===u.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===u.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===u.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return y[this.props.entity]?y[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,o){return new Promise(((o,s)=>{const i=e.map((e=>({id:f.get(e,"apiversion"===n?"api":"id")})));let r=null;u.INTEGRATION_FORM_MODE.ADD,r=d.default.fetchCreatePermissions,r(t,n,i).then((t=>(f.forEach(f.zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),o(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}fetchCollections(e){e?(0,p.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?a.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:n,malformedResponse:o}=this.getFormattedResponse(t);if(o)throw new Error(b);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?a.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:n,malformedResponse:o}=this.getFormattedResponse(t);if(o)throw new Error(b);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(f.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){f.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==u.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===u.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:n,entityVersions:o,firstLoad:i}=this.state,{selectedEntity:r,selectedEntityVersion:a}=this.store;return t||!e&&(this.props.entity===u.entityTypes.API_VERSIONS?o.length>0&&!f.get(a,"value"):n.length>0&&!f.get(r,"value"))&&!i?{status:"error",message:t?s.createElement("div",null,t,s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return s.createElement(m.default,{justifyContent:"space-between"},s.createElement("div",null,"Loading..."),s.createElement(h.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return v[this.props.entity]?v[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:n}=this.state,{selectedEntity:o,selectedEntityVersion:i}=this.store;return s.createElement(g.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===u.entityTypes.API_VERSIONS?n:t,value:this.props.entity===u.entityTypes.API_VERSIONS?i:o,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:i,optionalText:l,id:c,disabled:d,error:u,...p}=e;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title"},n," ",i?o.createElement("span",null,"(",l||"optional",")"):""),o.createElement("div",{className:"integrations-add-card__label-description"},t),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(s.Input,a({inputStyle:"box",type:"text",disabled:d,error:r().isEmpty(u)?"":"This is a mandatory field"},p)),r().isEmpty(u)?"":o.createElement("div",{className:"integrations-add-card__error"},u)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}function l(e){const{id:t,error:n,...i}=e;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),o.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(s.Input,a({id:t,inputStyle:"box",type:"text",error:r().isEmpty(n)?"":"This is a mandatory field"},i)),r().isEmpty(n)?"":o.createElement("div",{className:"integrations-add-card__error"},n)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=(n("./js/components/base/Inputs.js"),n("./node_modules/lodash/lodash.js")),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function c(e){const{id:t,error:n,...s}=e;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement(r.default,l({id:t,label:o.createElement(a.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:i().isEmpty(n)?"":"error",validationMessage:i().isEmpty(n)?"":"This is a mandatory field"},s)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/InputSelectV2.js"),i=n("./js/components/base/SearchHighlighter.js"),r=n("./node_modules/lodash/lodash.js");class a extends o.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,n={}){return!t||n.firstRender?e:r.filter(e,(e=>e.id&&r.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,n=r.find(e,(e=>e.id===t.id));return n||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,n={}){const s=e.name,r=e.id;return t&&!n.firstRender?o.createElement("div",{className:"input-select-item",key:r},o.createElement(i.default,{source:s,query:t})):o.createElement("div",{className:"input-select-item",key:r},s)}render(){var{title:e,description:t,customLabel:n,showCustomLabel:i,filterItems:r}=this.props;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title"},e),o.createElement("div",{className:"integrations-add-card__label-description"},t),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(s.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,r),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),i?n:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/SelectDropdown.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./version-control/common/ForkLabel.js"),c=n("./node_modules/lodash/lodash.js");class d extends o.Component{constructor(e){super(e),this.optionRenderer=e=>o.createElement(i.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!c.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,n=null;if(t&&(n=c.find(e,(e=>c.isEqual(e.value,t.value)))),n){let e,t;var s,i,d,u,p;return n.isForked?(e={id:null===(s=n)||void 0===s?void 0:s.id,forkLabel:null===(i=n)||void 0===i?void 0:i.forkLabel,model:null===(d=n)||void 0===d?void 0:d.type},t={id:null===(u=n)||void 0===u?void 0:u.baseCollectionUid,model:null===(p=n)||void 0===p?void 0:p.type},n={...n,label:o.createElement(r.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},o.createElement(a.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},n.label),o.createElement(l.default,{forkedEntity:e,baseEntity:t,label:n.forkLabel}))}):n}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:n,error:i,isCreatable:r,isClearable:a,noResultsForSearch:l,optional:d,noOptionsForDropdown:u,loading:p,disabled:m,handleRetry:h,checkForValidInput:g,customInputMessage:f,emptyStateError:b,label:y}=this.props;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title"},e," ",d?o.createElement("span",null,"(optional)"):""),o.createElement("div",{className:"integrations-add-card__label-description"},t),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(s.default,{isCreatable:r,isClearable:a,multi:this.props.multi,label:y,optionRenderer:this.optionRenderer,loading:p,className:(b||i)&&"is-error",disabled:m,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:n&&0!==n.length?l:u,options:n,isValidNewOption:g||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,f),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),b?o.createElement("span",{className:"integrations-add-card__error"},b):i?o.createElement("span",{className:"integrations-add-card__error"},i+". ",c.isFunction(h)&&o.createElement("span",{onClick:h,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/PasswordInput.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}const p=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function m(e){const{isInlineSaveVisible:t,inlineSaveButtonData:n,onSave:i,value:a}=e,{isSaveDisabled:l,integrationId:m,payload:h}=n||{};return o.createElement(d.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},o.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:n,optional:i,id:a,customLink:l,error:c,descriptionClass:d,maskedPlaceholderWhenEmpty:m,...h}=e;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title"},n," ",i?o.createElement("span",null,"(optional)"):""),o.createElement("div",{className:d||"integrations-add-card__label-description"},t," ",l),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(s.default,u({inputStyle:"box",type:"text",error:r().isEmpty(c)?"":"This is a mandatory field",placeholder:m?"************":""},h,{className:p(e.className,e.error)})),r().isEmpty(c)?"":o.createElement("div",{className:"integrations-add-card__error"},c)))})(e)),t&&o.createElement(c.default,{isSaveDisabled:l,integrationId:m,payload:h,onSave:i,value:a}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=(n("./node_modules/classnames/index.js"),n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:s,id:l,customLink:c,error:d,descriptionClass:u,maskedPlaceholderWhenEmpty:p,...m}=e;return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",s?o.createElement("span",null,"(optional)"):""),o.createElement("div",{className:u||"integrations-add-card__label-description"},t," ",c),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(r.default,a({type:"password",placeholder:p?"************":""},m)),i().isEmpty(d)?"":o.createElement("div",{className:"integrations-add-card__error"},d)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./node_modules/lodash/lodash.js");let m=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{i.default.findAll({limit:50,...e&&{cursor:e}}).then((o=>(e=p.get(o,"meta.nextCursor"),t=p.unionBy(t,o.data,"id"),n()))).catch((e=>n(e)))}),(()=>p.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const o=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:o,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),p.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:n,firstLoad:o,shouldDisableDropdown:i}=this.state,{selectedWorkspace:a}=this.store;return!i&&s.createElement(r.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||i,error:t,entityType:u.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&n.length>0&&!a&&!o&&"Please select a workspace",options:n,value:a,onTargetSelect:this.onTargetSelect})}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o,s=n("../../node_modules/react/index.js"),i=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./integrations/api-observability/components/base/CustomDropdown.js"),m=n("./node_modules/lodash/lodash.js");let h=(0,c.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{i.default.findAll({limit:50,...e&&{cursor:e}}).then((o=>(e=m.get(o,"meta.nextCursor"),t=m.unionBy(t,o.data,"id"),n()))).catch((e=>n(e)))}),(()=>m.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const o=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:o,loading:!1})}}))}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),m.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1}))}renderLoadingState(){return s.createElement(r.default,{justifyContent:"space-between"},s.createElement("div",null,"Loading..."),s.createElement(u.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(){let{error:e,firstLoad:t,loading:n,workspaces:o}=this.state,{selectedWorkspace:i}=this.store;return e||!n&&o.length>0&&!m.get(i,"value")&&!t?{status:"error",message:e?s.createElement("div",null,"Unable to load workspaces.",s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchAllWorkspaces()}},"Retry")):"Please select a workspace."}:{}}render(){const{loading:e,workspaces:t,shouldDisableDropdown:n}=this.state,{selectedWorkspace:o}=this.store;return!n&&s.createElement(p.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||n,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,validationState:this.getValidationState(),options:t||[],value:o,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found"})}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./js/modules/services/AnalyticsService.js"),m=n("./node_modules/classnames/index.js"),h=n.n(m),g=n("./js/components/base/LoadingIndicator.js"),f=n("./node_modules/lodash/lodash.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}let y=(0,u.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:n,rule:o,service:a,alignLeft:l,integrationFormActions:u,source:m,labels:y,...v}=this.props,I=(null==y?void 0:y.add)||"Add Integration";let _=m||"team_integrations_create_forms";return s.createElement("div",{"data-testid":"add-integration-button",className:h()("integrations-add-actions__button--container",{"align-left":l})},s.createElement(i.Button,b({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():r.default.createIntegration(n||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&f.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),p.default.addEventV2({category:"integrations",action:o+"_created_integration",label:_,value:1}),u)u(t);else{if("api_github"===o&&"github"===a)c.default.transitionTo(d.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:f.get(e,"body.data.id")},{apiId:t.executor,workspaceId:n});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;c.default.transitionTo(e,t,n)}else c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:o});this.store.refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies(),this.store.setRuleSpecificTeamIntegrations(o,null)}else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(f.get(e,"error.details.message")||f.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},v)," ",this.store.isAdding?s.createElement(g.default,null):I))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/services/NavigationService.js"),d=n("./node_modules/classnames/index.js"),u=n.n(d);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)}let m=(0,l.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,integrationFormActions:o,payload:i,labels:r,...l}=this.props,d=(null==r?void 0:r.cancel)||"Cancel";return s.createElement("div",{"data-testid":"cancel-integration-addition-button",className:u()("integrations-add-actions__button--container",{"align-left":n})},s.createElement(a.Button,p({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{o?o(i,"cancel"):(c.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",d," "))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Tooltips.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=n("./integrations/constants/integrationsConstants.ts"),h=n("./collaboration/utils/util.js"),g=n("./version-control/common/ForkLabel.js"),f=n("./node_modules/lodash/lodash.js");class b extends o.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:n,workspaceId:b}=this.props;let y,v;return e.isForked&&(y={id:e.id,forkLabel:e.forkLabel,model:e.type},v={id:e.baseCollectionUid,model:e.type}),o.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!f.isEmpty(t)&&e.disabled&&o.createElement(s.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},o.createElement(s.TooltipBody,null,t)),o.createElement(i.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let n=e.disabled?"content-color-tertiary":"",s={[m.entityTypes.COLLECTIONS]:o.createElement(a.default,{color:n}),[m.entityTypes.COLLECTIONS_FORKED]:o.createElement(l.default,{color:n}),[m.entityTypes.APIS]:o.createElement(c.default,{color:n}),[m.entityTypes.MONITORS]:o.createElement(d.default,{color:n}),[m.entityTypes.API_VERSIONS]:o.createElement(u.default,{color:n})};return t===m.entityTypes.WORKSPACES?o.createElement(p.default,{name:h.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===m.entityTypes.COLLECTIONS&&e&&e.forkLabel?s[m.entityTypes.COLLECTIONS_FORKED]:s[t]})(e,n),o.createElement(i.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},o.createElement(r.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&o.createElement(g.default,{workspaceId:b,forkedEntity:y,baseEntity:v,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("./js/external-navigation/ExternalNavigationService.js");function r(e){const{extUrl:t}=e;return o.createElement("span",{onClick:()=>(0,i.openExternalLink)(t,"_blank")},o.createElement(s.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AddIntegrationActions:function(){return m.default},AuthUserSegment:function(){return g.default},CustomLink:function(){return h.default},EntitySelector:function(){return u.default},EntitySelectorV2:function(){return p.default},FieldSegment:function(){return o.default},NicknameFieldSegment:function(){return s.default},NicknameFieldSegmentV2:function(){return i.default},SelectSegment:function(){return a.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return r.default},SensitiveFieldSegmentV2:function(){return f.default},WorkspaceSelector:function(){return c.default},WorkspaceSelectorV2:function(){return d.default}});var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o,s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),d=n("./js/components/base/Inputs.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let I=(0,a.observer)(o=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:"",advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:o,serviceId:s,variables:i}=this.props.controller.integrationData,r={name:e,serviceId:s,executor:t,variables:i,ruleId:o,events:"both"===i.options||"events"==i.options,metrics:"both"===i.options||"metrics"==i.options,integrationId:n};return"us"===r.variables.region?r.variables.region="us1":"eu"===r.variables.region&&(r.variables.region="eu1"),r}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),f.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}render(){const{advanced:e,name:t,metrics:n,region:o,events:s,configuredOn:a,variables:f,executor:I,integrationId:_,ruleId:E,serviceId:S,errorMonitorMeta:C,loadingMonitorMeta:T}=this.state,{integrationFormActions:A,source:j}=this.props;let w={name:t,executor:I,variables:{region:f.region,options:(s&&n?"both":s&&"events")||n&&"metrics"||"none",...f.api_key?{api_key:f.api_key}:{}}};return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"datadog-nickname",value:t,error:i().isEmpty(t)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:t.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog",value:a,options:a?[a]:[],error:C,loading:T,handleRetry:()=>this.fetchMonitorMeta(I)}),r.createElement(u.default,{padding:{paddingTop:"spacing-l"}},r.createElement(p.default,{name:"Select Datadog site",value:f.region,direction:"column",onChange:e=>{this.setState({variables:{...f,region:e,api_key:""}})},label:r.createElement(m.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(h.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(h.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(h.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(h.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(h.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"}))),r.createElement(l.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Datadog API Key",description:"Enter the API Key provided by Datadog or",customLink:r.createElement(y.default,{extUrl:`${c.default.getDatadogHostname(f.region)}/organization-settings/api-keys`},"generate one here"),id:"datadog-key",value:f.api_key||"",onChange:e=>{this.setState({variables:{...f,api_key:e}})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options",r.createElement(g.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),e&&r.createElement("div",{className:"push-double--bottom"},r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(d.Checkbox,{checked:s,onChange:()=>{this.toggle("events")}}),r.createElement("span",null,"Send events for completed runs")),r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(d.Checkbox,{checked:n,onChange:()=>{this.toggle("metrics")}}),r.createElement("span",null,"Send metrics for each run"))),r.createElement(b.default,{disabled:!(a&&t&&f.region&&(s||n)&&(0,v.isFormUpdated)(this.getInitialState(),this.state)),integrationId:_,payload:w,rule:E,service:S,integrationFormActions:A,source:j}))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=(n("../../node_modules/mobx/lib/mobx.module.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js")),a=n("./node_modules/react-radio-group/lib/index.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),p=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(o=class extends s.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:o,serviceId:s,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:s,executor:t,variables:i,ruleId:o,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,configuredOn:t,variables:n,executor:o,integrationId:i,ruleId:l,serviceId:m,errorMonitorMeta:h,loadingMonitorMeta:g,region:f}=this.state,{integrationFormActions:b,source:y}=this.props;let v={name:e,executor:o,variables:{region:n.region,...n.api_key?{api_key:n.api_key}:{}}};return s.createElement("div",null,s.createElement(r.NicknameFieldSegment,{id:"new-relic-nickname",value:e,error:p.isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),s.createElement(r.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",value:t,options:t?[t]:[],error:h,loading:g,handleRetry:()=>this.fetchMonitorMeta(o)}),s.createElement(r.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"New Relic API Key",description:"Enter the API Key provided by New Relic or ",customLink:s.createElement(d.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:n.api_key||"",onChange:e=>{this.setState({variables:{...n,api_key:e}})}}),s.createElement("div",{className:"push-double--bottom"},s.createElement("label",null,s.createElement("h4",{className:"integrations-add-card__label-title"},"Select New Relic region"),s.createElement("p",{className:"integrations-add-card__label-description"},"This helps us know what New Relic region to use")),s.createElement(a.RadioGroup,{name:"Select New Relic site",selectedValue:n.region,onChange:e=>{this.setState({variables:{...n,region:e}})}},s.createElement("div",{className:"integrations-radio-button__select-group--regions"},s.createElement("label",null,s.createElement(a.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),s.createElement("span",null,"US (.com)"))),s.createElement("div",{className:"integrations-radio-button__select-group--regions"},s.createElement("label",null,s.createElement(a.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),s.createElement("span",null,"EU (.eu)"))))),s.createElement(c.default,{disabled:!(t&&e&&n.region&&(0,u.isFormUpdated)(this.getInitialState(),this.state)),integrationId:i,payload:v,rule:l,service:m,integrationFormActions:b,source:y}))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("./js/services/NavigationService.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}let d=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{integrationId:e,integrationFormActions:t}=this.props;return s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(a.Button,c({className:"integrations-edit-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{t?t(e,"cancel"):(l.default.back(),this.store.resetAddIntegrationDependencies())}},this.props)," Cancel "))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=(n("./node_modules/lodash/lodash.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js")),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}function a(e){let{disabled:t,integrationId:n,payload:a,integrationFormActions:l,source:c,showDivider:d,...u}=e;return c||(c="team_integrations_edit_forms"),o.createElement("div",null,d&&o.createElement("hr",{className:"integration-edit-actions__separator"}),o.createElement("div",{className:"integration-edit-actions__button"},o.createElement(i.default,r({disabled:t,integrationId:n,payload:a,integrationFormActions:l,source:c},u)),o.createElement(s.default,r({integrationId:n,payload:a,integrationFormActions:l,source:c},u))))}a.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:n,payload:l,value:c}=e,[d,u]=(0,o.useState)(!1);return o.createElement(s.default,{className:"integrations-edit-actions__button--container-inline"},o.createElement(i.default,{type:"secondary",text:"Cancel",isDisabled:d,onClick:()=>{e.onSave("",a.RESET)}}),o.createElement(i.default,{type:"primary",text:"Save",isDisabled:t,isLoading:d,onClick:()=>{u(!0),r.default.updateIntegration(n,l).then((t=>{e.onSave(c)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{u(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o,s=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("./integrations/monitoring/constants.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),m=n("./js/components/base/LoadingIndicator.js"),h=n("./js/modules/services/AnalyticsService.js"),g=n("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f.apply(this,arguments)}let b=(0,p.observer)(o=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:o,service:a,source:l,integrationFormActions:p,generatePayload:b,...y}=this.props,v=l||"team_integrations_edit_forms";return s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(i.Button,f({type:"primary",className:"integrations-edit-actions__button--save-changes",disabled:e||this.store.isAdding,size:"small",tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:async()=>{this.store.updateIsAdding(!0);let e=g.assign({},t);if(g.isFunction(b))try{e=await b(t)}catch(e){return this.store.updateIsAdding(!1),void pm.toasts.error(u.ERROR_ADDING_NEW_RELIC_TO_TEAM)}r.default.updateIntegration(n,e).then((e=>{this.store.updateIsAdding(!1),200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${g.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),h.default.addEventV2({category:"integrations",action:o+"_edited_integration",label:v,value:1}),p&&g.isFunction(p)?p(n):(c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:o}),this.store.setRuleSpecificTeamIntegrations(o,null),this.store.resetAddIntegrationDependencies())):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"})})).catch((e=>{this.store.updateIsAdding(!1),this.store.resetAddIntegrationDependencies(),pm.toasts.error(g.get(e,"error.details.message")||g.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}},y)," ",this.store.isAdding?s.createElement(m.default,null):"Save Changes"))}})||o},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationDescription:function(){return a},default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function r(e){return o.createElement("a",{className:"pm-link",href:"https://go.pstmn.io/new-integration-request",rel:"noopener noreferrer",target:"_blank"},e.children)}function a(){return o.createElement("span",{className:"team-integrations-no-search-results__subtext--body"},"If you can't find what you're looking for, head to GitHub and tell us what integrations you'd like to see. ",o.createElement(r,null,"Request an Integration"),o.createElement(i.default,{name:"icon-action-openWeb-stroke",className:"external-link__icon"}))}class l extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"team-integrations-no-search-results"},o.createElement("div",{className:"team-integrations-no-search-results__illustration-wrapper"},o.createElement(s.default,null)),o.createElement("div",{className:"team-integrations-no-search-results__label"},"No results found"),o.createElement("div",{className:"team-integrations-no-search-results__subtext"},this.props.requestNewIntegration?o.createElement(a,null):"We couldn't find anything matching that. Check the spelling or try using a different query."))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),i=n.n(s),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("./node_modules/lodash/lodash.js");class c extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"team-integrations-error-state"},o.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=o.createElement(r.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=o.createElement(a.default,null)),t}(this.props.errorDetails)),o.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),o.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}c.propTypes={errorDetails:i().object,origin:i().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js":function(e,t,n){"use strict";function o(e,t,n){if("string"==typeof e&&e.length<t){let o="",s=t-e.length;for(;o.length<s;)o+=n;return o+e}return e}n.r(t),t.default={format:function(e,t,n={}){const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(e),r=n.padDate?o(i.getDate().toString(),2,"0"):i.getDate(),a=i.getMonth(),l=i.getFullYear(),c=i.getHours()%12||12,d=o(i.getMinutes().toString(),2,"0"),u=i.getHours()<12?"AM":"PM",p=t?`${c}:${d} ${u}, ${r} ${s[a]} ${l}`:`${r} ${s[a]}, ${l}`;return"NaN"===r.toString()?"string"==typeof e&&e.indexOf(" ")>-1?this.format(e.replace(" ","T"),t):"":p}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{RESET:function(){return o}});const o="reset"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");const s="integrations";t.default={fetchIntegrationClassDetails(e,t){const n=`/integration-classes/${e}`;return o.HTTPGatewayService.request({data:{service:s,method:"get",path:n,query:t}})},fetchAvailableClasses:()=>o.HTTPGatewayService.request({data:{service:s,method:"get",path:"/integration-classes"}}),fetchAvailableServices:()=>o.HTTPGatewayService.request({data:{service:s,method:"get",path:"/services"}}),fetchIntegrationServiceDetails(e,t){const n=`/services/${e}`;return o.HTTPGatewayService.request({data:{service:s,method:"get",path:n,query:t}})}}},"./runtime-repl/request-http/datastores/RequestMethodsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o,s,i=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("./runtime-repl/request-http/datastores/controllers/RequestMethodsController.js"),a=n("./node_modules/lodash/lodash.js");function l(e,t,n,o,s){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const c="requestmethod";let d=(s=l((o=class{constructor(){var e,t,n,o;this.modelEvents={namespace:c},e=this,t="methods",o=this,(n=s)&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0}),this.defaultEventListeners={added(e){const t=a.get(e,c);this.update(t)},removed(e){const t=a.get(e,c);this.update(t)}},this.hydrate()}update(e){a.isArray(e)&&(this.methods=e)}hydrate(){r.default.getAllMethods().then((e=>{this.update(e)}))}getModelEventListeners(){if(this.modelEvents)return this.modelEvents.namespace?{[this.modelEvents.namespace]:this.defaultEventListeners}:void 0}}).prototype,"methods",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l(o.prototype,"update",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"update"),o.prototype),l(o.prototype,"hydrate",[i.action],Object.getOwnPropertyDescriptor(o.prototype,"hydrate"),o.prototype),o)},"./node_modules/combokeys/Combokeys/index.js":function(e,t,n){"use strict";e.exports=function(e,t){var n=this,o=n.constructor;return n.options=Object.assign({storeInstancesGlobally:!0},t||{}),n.callbacks={},n.directMap={},n.sequenceLevels={},n.resetTimer=null,n.ignoreNextKeyup=!1,n.ignoreNextKeypress=!1,n.nextExpectedAction=!1,n.element=e,n.addEvents(),n.options.storeInstancesGlobally&&o.instances.push(n),n},e.exports.prototype.bind=n("./node_modules/combokeys/Combokeys/prototype/bind.js"),e.exports.prototype.bindMultiple=n("./node_modules/combokeys/Combokeys/prototype/bindMultiple.js"),e.exports.prototype.unbind=n("./node_modules/combokeys/Combokeys/prototype/unbind.js"),e.exports.prototype.trigger=n("./node_modules/combokeys/Combokeys/prototype/trigger.js"),e.exports.prototype.reset=n("./node_modules/combokeys/Combokeys/prototype/reset.js"),e.exports.prototype.stopCallback=n("./node_modules/combokeys/Combokeys/prototype/stopCallback.js"),e.exports.prototype.handleKey=n("./node_modules/combokeys/Combokeys/prototype/handleKey.js"),e.exports.prototype.addEvents=n("./node_modules/combokeys/Combokeys/prototype/addEvents.js"),e.exports.prototype.bindSingle=n("./node_modules/combokeys/Combokeys/prototype/bindSingle.js"),e.exports.prototype.getKeyInfo=n("./node_modules/combokeys/Combokeys/prototype/getKeyInfo.js"),e.exports.prototype.pickBestAction=n("./node_modules/combokeys/Combokeys/prototype/pickBestAction.js"),e.exports.prototype.getReverseMap=n("./node_modules/combokeys/Combokeys/prototype/getReverseMap.js"),e.exports.prototype.getMatches=n("./node_modules/combokeys/Combokeys/prototype/getMatches.js"),e.exports.prototype.resetSequences=n("./node_modules/combokeys/Combokeys/prototype/resetSequences.js"),e.exports.prototype.fireCallback=n("./node_modules/combokeys/Combokeys/prototype/fireCallback.js"),e.exports.prototype.bindSequence=n("./node_modules/combokeys/Combokeys/prototype/bindSequence.js"),e.exports.prototype.resetSequenceTimer=n("./node_modules/combokeys/Combokeys/prototype/resetSequenceTimer.js"),e.exports.prototype.detach=n("./node_modules/combokeys/Combokeys/prototype/detach.js"),e.exports.instances=[],e.exports.reset=n("./node_modules/combokeys/Combokeys/reset.js"),e.exports.REVERSE_MAP=null},"./node_modules/combokeys/Combokeys/prototype/addEvents.js":function(e,t,n){"use strict";e.exports=function(){var e=this,t=n("./node_modules/combokeys/Combokeys/prototype/dom-event.js"),o=e.element;e.eventHandler=n("./node_modules/combokeys/Combokeys/prototype/handleKeyEvent.js").bind(e),t(o,"keypress",e.eventHandler),t(o,"keydown",e.eventHandler),t(o,"keyup",e.eventHandler)}},"./node_modules/combokeys/Combokeys/prototype/bind.js":function(e){"use strict";e.exports=function(e,t,n){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,n),this}},"./node_modules/combokeys/Combokeys/prototype/bindMultiple.js":function(e){"use strict";e.exports=function(e,t,n){for(var o=0;o<e.length;++o)this.bindSingle(e[o],t,n)}},"./node_modules/combokeys/Combokeys/prototype/bindSequence.js":function(e,t,n){"use strict";e.exports=function(e,t,o,s){var i=this;function r(t){return function(){i.nextExpectedAction=t,++i.sequenceLevels[e],i.resetSequenceTimer()}}function a(t){var r;i.fireCallback(o,t,e),"keyup"!==s&&(r=n("./node_modules/combokeys/helpers/characterFromEvent.js"),i.ignoreNextKeyup=r(t)),setTimeout((function(){i.resetSequences()}),10)}i.sequenceLevels[e]=0;for(var l=0;l<t.length;++l){var c=l+1===t.length?a:r(s||i.getKeyInfo(t[l+1]).action);i.bindSingle(t[l],c,s,e,l)}}},"./node_modules/combokeys/Combokeys/prototype/bindSingle.js":function(e){"use strict";e.exports=function(e,t,n,o,s){var i=this;i.directMap[e+":"+n]=t;var r,a=(e=e.replace(/\s+/g," ")).split(" ");a.length>1?i.bindSequence(e,a,t,n):(r=i.getKeyInfo(e,n),i.callbacks[r.key]=i.callbacks[r.key]||[],i.getMatches(r.key,r.modifiers,{type:r.action},o,e,s),i.callbacks[r.key][o?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:o,level:s,combo:e}))}},"./node_modules/combokeys/Combokeys/prototype/detach.js":function(e,t,n){var o=n("./node_modules/combokeys/Combokeys/prototype/dom-event.js").off;e.exports=function(){var e=this,t=e.element;o(t,"keypress",e.eventHandler),o(t,"keydown",e.eventHandler),o(t,"keyup",e.eventHandler)}},"./node_modules/combokeys/Combokeys/prototype/dom-event.js":function(e){function t(e,t,n,o){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,n,o),n}e.exports=t,e.exports.on=t,e.exports.off=function(e,t,n,o){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,n,o),n}},"./node_modules/combokeys/Combokeys/prototype/fireCallback.js":function(e,t,n){"use strict";e.exports=function(e,t,o,s){this.stopCallback(t,t.target||t.srcElement,o,s)||!1===e(t,o)&&(n("./node_modules/combokeys/helpers/preventDefault.js")(t),n("./node_modules/combokeys/helpers/stopPropagation.js")(t))}},"./node_modules/combokeys/Combokeys/prototype/getKeyInfo.js":function(e,t,n){"use strict";e.exports=function(e,t){var o,s,i,r,a,l,c=[];for(o=n("./node_modules/combokeys/helpers/keysFromString.js")(e),r=n("./node_modules/combokeys/helpers/special-aliases.js"),a=n("./node_modules/combokeys/helpers/shift-map.js"),l=n("./node_modules/combokeys/helpers/isModifier.js"),i=0;i<o.length;++i)r[s=o[i]]&&(s=r[s]),t&&"keypress"!==t&&a[s]&&(s=a[s],c.push("shift")),l(s)&&c.push(s);return{key:s,modifiers:c,action:t=this.pickBestAction(s,c,t)}}},"./node_modules/combokeys/Combokeys/prototype/getMatches.js":function(e,t,n){"use strict";e.exports=function(e,t,o,s,i,r){var a,l,c,d,u=this,p=[],m=o.type;"keypress"!==m||o.code&&"Arrow"===o.code.slice(0,5)||(u.callbacks["any-character"]||[]).forEach((function(e){p.push(e)}));if(!u.callbacks[e])return p;for(c=n("./node_modules/combokeys/helpers/isModifier.js"),"keyup"===m&&c(e)&&(t=[e]),a=0;a<u.callbacks[e].length;++a)if(l=u.callbacks[e][a],(s||!l.seq||u.sequenceLevels[l.seq]===l.level)&&m===l.action&&(d=n("./node_modules/combokeys/Combokeys/prototype/modifiersMatch.js"),"keypress"===m&&!o.metaKey&&!o.ctrlKey||d(t,l.modifiers))){var h=!s&&l.combo===i,g=s&&l.seq===s&&l.level===r;(h||g)&&u.callbacks[e].splice(a,1),p.push(l)}return p}},"./node_modules/combokeys/Combokeys/prototype/getReverseMap.js":function(e,t,n){"use strict";e.exports=function(){var e,t=this.constructor;if(!t.REVERSE_MAP)for(var o in t.REVERSE_MAP={},e=n("./node_modules/combokeys/helpers/special-keys-map.js"))o>95&&o<112||e.hasOwnProperty(o)&&(t.REVERSE_MAP[e[o]]=o);return t.REVERSE_MAP}},"./node_modules/combokeys/Combokeys/prototype/handleKey.js":function(e,t,n){"use strict";e.exports=function(e,t,o){var s,i,r,a,l=this,c={},d=0,u=!1;for(s=l.getMatches(e,t,o),i=0;i<s.length;++i)s[i].seq&&(d=Math.max(d,s[i].level));for(i=0;i<s.length;++i)if(s[i].seq){if(s[i].level!==d)continue;u=!0,c[s[i].seq]=1,l.fireCallback(s[i].callback,o,s[i].combo,s[i].seq)}else u||l.fireCallback(s[i].callback,o,s[i].combo);a="keypress"===o.type&&l.ignoreNextKeypress,r=n("./node_modules/combokeys/helpers/isModifier.js"),o.type!==l.nextExpectedAction||r(e)||a||l.resetSequences(c),l.ignoreNextKeypress=u&&"keydown"===o.type}},"./node_modules/combokeys/Combokeys/prototype/handleKeyEvent.js":function(e,t,n){"use strict";e.exports=function(e){var t,o=this;"number"!=typeof e.which&&(e.which=e.keyCode);var s=n("./node_modules/combokeys/helpers/characterFromEvent.js")(e);void 0!==s&&("keyup"!==e.type||o.ignoreNextKeyup!==s?(t=n("./node_modules/combokeys/helpers/eventModifiers.js"),o.handleKey(s,t(e),e)):o.ignoreNextKeyup=!1)}},"./node_modules/combokeys/Combokeys/prototype/modifiersMatch.js":function(e){"use strict";e.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},"./node_modules/combokeys/Combokeys/prototype/pickBestAction.js":function(e){"use strict";e.exports=function(e,t,n){return n||(n=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===n&&t.length&&(n="keydown"),n}},"./node_modules/combokeys/Combokeys/prototype/reset.js":function(e){"use strict";e.exports=function(){return this.callbacks={},this.directMap={},this}},"./node_modules/combokeys/Combokeys/prototype/resetSequenceTimer.js":function(e){"use strict";e.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout((function(){e.resetSequences()}),1e3)}},"./node_modules/combokeys/Combokeys/prototype/resetSequences.js":function(e){"use strict";e.exports=function(e){var t=this;e=e||{};var n,o=!1;for(n in t.sequenceLevels)e[n]?o=!0:t.sequenceLevels[n]=0;o||(t.nextExpectedAction=!1)}},"./node_modules/combokeys/Combokeys/prototype/stopCallback.js":function(e){"use strict";e.exports=function(e,t){if((" "+t.className+" ").indexOf(" combokeys ")>-1)return!1;var n=t.tagName.toLowerCase();return"input"===n||"select"===n||"textarea"===n||t.isContentEditable}},"./node_modules/combokeys/Combokeys/prototype/trigger.js":function(e){"use strict";e.exports=function(e,t){return this.directMap[e+":"+t]&&this.directMap[e+":"+t]({},e),this}},"./node_modules/combokeys/Combokeys/prototype/unbind.js":function(e){"use strict";e.exports=function(e,t){return this.bind(e,(function(){}),t)}},"./node_modules/combokeys/Combokeys/reset.js":function(e){"use strict";e.exports=function(){this.instances.forEach((function(e){e.reset()}))}},"./node_modules/combokeys/helpers/characterFromEvent.js":function(e,t,n){"use strict";e.exports=function(e){var t,o;if(t=n("./node_modules/combokeys/helpers/special-keys-map.js"),o=n("./node_modules/combokeys/helpers/special-characters-map.js"),"keypress"===e.type){var s=String.fromCharCode(e.which);return e.shiftKey||(s=s.toLowerCase()),s}return void 0!==t[e.which]?t[e.which]:void 0!==o[e.which]?o[e.which]:String.fromCharCode(e.which).toLowerCase()}},"./node_modules/combokeys/helpers/eventModifiers.js":function(e){"use strict";e.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},"./node_modules/combokeys/helpers/isModifier.js":function(e){"use strict";e.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},"./node_modules/combokeys/helpers/keysFromString.js":function(e){"use strict";e.exports=function(e){return"+"===e?["+"]:e.split("+")}},"./node_modules/combokeys/helpers/preventDefault.js":function(e){"use strict";e.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},"./node_modules/combokeys/helpers/shift-map.js":function(e){"use strict";e.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},"./node_modules/combokeys/helpers/special-aliases.js":function(e){"use strict";e.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},"./node_modules/combokeys/helpers/special-characters-map.js":function(e){"use strict";e.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},"./node_modules/combokeys/helpers/special-keys-map.js":function(e){"use strict";e.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var t=1;t<20;++t)e.exports[111+t]="f"+t;for(t=0;t<=9;++t)e.exports[t+96]=t},"./node_modules/combokeys/helpers/stopPropagation.js":function(e){"use strict";e.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},"./node_modules/date-fns/esm/_lib/requiredArgs/index.js":function(e,t,n){"use strict";function o(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.r(t),n.d(t,{default:function(){return o}})},"./node_modules/date-fns/esm/_lib/toInteger/index.js":function(e,t,n){"use strict";function o(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.r(t),n.d(t,{default:function(){return o}})},"./node_modules/date-fns/esm/constants/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{daysInWeek:function(){return o},maxTime:function(){return s},millisecondsInHour:function(){return r},millisecondsInMinute:function(){return i},millisecondsInSecond:function(){return a},minTime:function(){return l},minutesInHour:function(){return c},monthsInQuarter:function(){return d},monthsInYear:function(){return u},quartersInYear:function(){return p},secondsInHour:function(){return m},secondsInMinute:function(){return h}});var o=7,s=24*Math.pow(10,8)*60*60*1e3,i=6e4,r=36e5,a=1e3,l=-s,c=60,d=3,u=12,p=4,m=3600,h=60},"./node_modules/date-fns/esm/differenceInMilliseconds/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("./node_modules/date-fns/esm/toDate/index.js"),s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function i(e,t){return(0,s.default)(2,arguments),(0,o.default)(e).getTime()-(0,o.default)(t).getTime()}},"./node_modules/date-fns/esm/parseISO/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("./node_modules/date-fns/esm/constants/index.js"),s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),i=n("./node_modules/date-fns/esm/_lib/toInteger/index.js");function r(e,t){(0,s.default)(1,arguments);var n=t||{},o=null==n.additionalDigits?2:(0,i.default)(n.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,a=u(e);if(a.date){var l=p(a.date,o);r=m(l.restDateString,l.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var c,d=r.getTime(),h=0;if(a.time&&(h=g(a.time),isNaN(h)))return new Date(NaN);if(!a.timezone){var f=new Date(d+h),y=new Date(0);return y.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),y.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),y}return c=b(a.timezone),isNaN(c)?new Date(NaN):new Date(d+h+c)}var a={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){var t,n={},o=e.split(a.dateTimeDelimiter);if(o.length>2)return n;if(/:/.test(o[0])?t=o[0]:(n.date=o[0],t=o[1],a.timeZoneDelimiter.test(n.date)&&(n.date=e.split(a.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var s=a.timezone.exec(t);s?(n.time=t.replace(s[1],""),n.timezone=s[1]):n.time=t}return n}function p(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:NaN,restDateString:""};var s=o[1]?parseInt(o[1]):null,i=o[2]?parseInt(o[2]):null;return{year:null===i?s:100*i,restDateString:e.slice((o[1]||o[2]).length)}}function m(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var o=!!n[4],s=h(n[1]),i=h(n[2])-1,r=h(n[3]),a=h(n[4]),c=h(n[5])-1;if(o)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,a,c)?function(e,t,n){var o=new Date(0);o.setUTCFullYear(e,0,4);var s=o.getUTCDay()||7,i=7*(t-1)+n+1-s;return o.setUTCDate(o.getUTCDate()+i),o}(t,a,c):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(y[t]||(v(e)?29:28))}(t,i,r)&&function(e,t){return t>=1&&t<=(v(e)?366:365)}(t,s)?(d.setUTCFullYear(t,i,Math.max(s,r)),d):new Date(NaN)}function h(e){return e?parseInt(e):1}function g(e){var t=e.match(c);if(!t)return NaN;var n=f(t[1]),s=f(t[2]),i=f(t[3]);return function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,s,i)?n*o.millisecondsInHour+s*o.millisecondsInMinute+1e3*i:NaN}function f(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(d);if(!t)return 0;var n="+"===t[1]?-1:1,s=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(s*o.millisecondsInHour+i*o.millisecondsInMinute):NaN}var y=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100!=0}},"./node_modules/date-fns/esm/toDate/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),s=n("../../node_modules/console-browserify/index.js");function i(e){(0,o.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||void 0===s||(s.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),s.warn((new Error).stack)),new Date(NaN))}},"./node_modules/fbemitter/index.js":function(e,t,n){var o={EventEmitter:n("./node_modules/fbemitter/lib/BaseEventEmitter.js"),EmitterSubscription:n("./node_modules/fbemitter/lib/EmitterSubscription.js")};e.exports=o},"./node_modules/fbemitter/lib/BaseEventEmitter.js":function(e,t,n){"use strict";var o=n("./node_modules/fbemitter/lib/EmitterSubscription.js"),s=n("./node_modules/fbemitter/lib/EventSubscriptionVendor.js"),i=n("./node_modules/fbjs/lib/emptyFunction.js"),r=n("./node_modules/fbjs/lib/invariant.js"),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriber=new s,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new o(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var o=this;return this.addListener(e,(function(){o.removeCurrentListener(),t.apply(n,arguments)}))},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription||r(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(i.thatReturnsTrue).map((function(e){return e.listener})):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),o=0;o<n.length;o++){var s=n[o],i=t[s];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=a},"./node_modules/fbemitter/lib/EmitterSubscription.js":function(e,t,n){"use strict";var o=function(e){function t(n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.listener=o,this.context=s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n("./node_modules/fbemitter/lib/EventSubscription.js"));e.exports=o},"./node_modules/fbemitter/lib/EventSubscription.js":function(e){"use strict";var t=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=t},"./node_modules/fbemitter/lib/EventSubscriptionVendor.js":function(e,t,n){"use strict";var o=n("./node_modules/fbjs/lib/invariant.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this&&o(!1),this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,o=this._subscriptionsForType[t];o&&delete o[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=s},"./node_modules/just-reduce-object/index.js":function(e){e.exports=function(e,t){var n=[s],o=2 in arguments;function s(n,s,i,r){return o||(n=e[r[0]],o=!0),t(n,s,e[s],i,r)}return o&&n.push(arguments[2]),Array.prototype.reduce.apply(Object.keys(e),n)}},"./node_modules/lodash/_DataView.js":function(e,t,n){var o=n("./node_modules/lodash/_getNative.js")(n("./node_modules/lodash/_root.js"),"DataView");e.exports=o},"./node_modules/lodash/_Promise.js":function(e,t,n){var o=n("./node_modules/lodash/_getNative.js")(n("./node_modules/lodash/_root.js"),"Promise");e.exports=o},"./node_modules/lodash/_Stack.js":function(e,t,n){var o=n("./node_modules/lodash/_ListCache.js"),s=n("./node_modules/lodash/_stackClear.js"),i=n("./node_modules/lodash/_stackDelete.js"),r=n("./node_modules/lodash/_stackGet.js"),a=n("./node_modules/lodash/_stackHas.js"),l=n("./node_modules/lodash/_stackSet.js");function c(e){var t=this.__data__=new o(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=i,c.prototype.get=r,c.prototype.has=a,c.prototype.set=l,e.exports=c},"./node_modules/lodash/_Uint8Array.js":function(e,t,n){var o=n("./node_modules/lodash/_root.js").Uint8Array;e.exports=o},"./node_modules/lodash/_WeakMap.js":function(e,t,n){var o=n("./node_modules/lodash/_getNative.js")(n("./node_modules/lodash/_root.js"),"WeakMap");e.exports=o},"./node_modules/lodash/_arrayEach.js":function(e){e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}},"./node_modules/lodash/_arrayReduce.js":function(e){e.exports=function(e,t,n,o){var s=-1,i=null==e?0:e.length;for(o&&i&&(n=e[++s]);++s<i;)n=t(n,e[s],s,e);return n}},"./node_modules/lodash/_arraySome.js":function(e){e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}},"./node_modules/lodash/_asciiSize.js":function(e,t,n){var o=n("./node_modules/lodash/_baseProperty.js")("length");e.exports=o},"./node_modules/lodash/_assignValue.js":function(e,t,n){var o=n("./node_modules/lodash/_baseAssignValue.js"),s=n("./node_modules/lodash/eq.js"),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var r=e[t];i.call(e,t)&&s(r,n)&&(void 0!==n||t in e)||o(e,t,n)}},"./node_modules/lodash/_baseAssign.js":function(e,t,n){var o=n("./node_modules/lodash/_copyObject.js"),s=n("./node_modules/lodash/keys.js");e.exports=function(e,t){return e&&o(t,s(t),e)}},"./node_modules/lodash/_baseAssignIn.js":function(e,t,n){var o=n("./node_modules/lodash/_copyObject.js"),s=n("./node_modules/lodash/keysIn.js");e.exports=function(e,t){return e&&o(t,s(t),e)}},"./node_modules/lodash/_baseAssignValue.js":function(e,t,n){var o=n("./node_modules/lodash/_defineProperty.js");e.exports=function(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},"./node_modules/lodash/_baseClone.js":function(e,t,n){var o=n("./node_modules/lodash/_Stack.js"),s=n("./node_modules/lodash/_arrayEach.js"),i=n("./node_modules/lodash/_assignValue.js"),r=n("./node_modules/lodash/_baseAssign.js"),a=n("./node_modules/lodash/_baseAssignIn.js"),l=n("./node_modules/lodash/_cloneBuffer.js"),c=n("./node_modules/lodash/_copyArray.js"),d=n("./node_modules/lodash/_copySymbols.js"),u=n("./node_modules/lodash/_copySymbolsIn.js"),p=n("./node_modules/lodash/_getAllKeys.js"),m=n("./node_modules/lodash/_getAllKeysIn.js"),h=n("./node_modules/lodash/_getTag.js"),g=n("./node_modules/lodash/_initCloneArray.js"),f=n("./node_modules/lodash/_initCloneByTag.js"),b=n("./node_modules/lodash/_initCloneObject.js"),y=n("./node_modules/lodash/isArray.js"),v=n("./node_modules/lodash/isBuffer.js"),I=n("./node_modules/lodash/isMap.js"),_=n("./node_modules/lodash/isObject.js"),E=n("./node_modules/lodash/isSet.js"),S=n("./node_modules/lodash/keys.js"),C=n("./node_modules/lodash/keysIn.js"),T="[object Arguments]",A="[object Function]",j="[object Object]",w={};w[T]=w["[object Array]"]=w["[object ArrayBuffer]"]=w["[object DataView]"]=w["[object Boolean]"]=w["[object Date]"]=w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Map]"]=w["[object Number]"]=w[j]=w["[object RegExp]"]=w["[object Set]"]=w["[object String]"]=w["[object Symbol]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w["[object Error]"]=w[A]=w["[object WeakMap]"]=!1,e.exports=function e(t,n,O,N,R,P){var D,M=1&n,x=2&n,L=4&n;if(O&&(D=R?O(t,N,R,P):O(t)),void 0!==D)return D;if(!_(t))return t;var k=y(t);if(k){if(D=g(t),!M)return c(t,D)}else{var F=h(t),B=F==A||"[object GeneratorFunction]"==F;if(v(t))return l(t,M);if(F==j||F==T||B&&!R){if(D=x||B?{}:b(t),!M)return x?u(t,a(D,t)):d(t,r(D,t))}else{if(!w[F])return R?t:{};D=f(t,F,M)}}P||(P=new o);var U=P.get(t);if(U)return U;P.set(t,D),E(t)?t.forEach((function(o){D.add(e(o,n,O,o,t,P))})):I(t)&&t.forEach((function(o,s){D.set(s,e(o,n,O,s,t,P))}));var V=k?void 0:(L?x?m:p:x?C:S)(t);return s(V||t,(function(o,s){V&&(o=t[s=o]),i(D,s,e(o,n,O,s,t,P))})),D}},"./node_modules/lodash/_baseCreate.js":function(e,t,n){var o=n("./node_modules/lodash/isObject.js"),s=Object.create,i=function(){function e(){}return function(t){if(!o(t))return{};if(s)return s(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},"./node_modules/lodash/_baseEach.js":function(e,t,n){var o=n("./node_modules/lodash/_baseForOwn.js"),s=n("./node_modules/lodash/_createBaseEach.js")(o);e.exports=s},"./node_modules/lodash/_baseFilter.js":function(e,t,n){var o=n("./node_modules/lodash/_baseEach.js");e.exports=function(e,t){var n=[];return o(e,(function(e,o,s){t(e,o,s)&&n.push(e)})),n}},"./node_modules/lodash/_baseFor.js":function(e,t,n){var o=n("./node_modules/lodash/_createBaseFor.js")();e.exports=o},"./node_modules/lodash/_baseForOwn.js":function(e,t,n){var o=n("./node_modules/lodash/_baseFor.js"),s=n("./node_modules/lodash/keys.js");e.exports=function(e,t){return e&&o(e,t,s)}},"./node_modules/lodash/_baseGet.js":function(e,t,n){var o=n("./node_modules/lodash/_castPath.js"),s=n("./node_modules/lodash/_toKey.js");e.exports=function(e,t){for(var n=0,i=(t=o(t,e)).length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}},"./node_modules/lodash/_baseGetAllKeys.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayPush.js"),s=n("./node_modules/lodash/isArray.js");e.exports=function(e,t,n){var i=t(e);return s(e)?i:o(i,n(e))}},"./node_modules/lodash/_baseHasIn.js":function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},"./node_modules/lodash/_baseIsEqual.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsEqualDeep.js"),s=n("./node_modules/lodash/isObjectLike.js");e.exports=function e(t,n,i,r,a){return t===n||(null==t||null==n||!s(t)&&!s(n)?t!=t&&n!=n:o(t,n,i,r,e,a))}},"./node_modules/lodash/_baseIsEqualDeep.js":function(e,t,n){var o=n("./node_modules/lodash/_Stack.js"),s=n("./node_modules/lodash/_equalArrays.js"),i=n("./node_modules/lodash/_equalByTag.js"),r=n("./node_modules/lodash/_equalObjects.js"),a=n("./node_modules/lodash/_getTag.js"),l=n("./node_modules/lodash/isArray.js"),c=n("./node_modules/lodash/isBuffer.js"),d=n("./node_modules/lodash/isTypedArray.js"),u="[object Arguments]",p="[object Array]",m="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,f,b){var y=l(e),v=l(t),I=y?p:a(e),_=v?p:a(t),E=(I=I==u?m:I)==m,S=(_=_==u?m:_)==m,C=I==_;if(C&&c(e)){if(!c(t))return!1;y=!0,E=!1}if(C&&!E)return b||(b=new o),y||d(e)?s(e,t,n,g,f,b):i(e,t,I,n,g,f,b);if(!(1&n)){var T=E&&h.call(e,"__wrapped__"),A=S&&h.call(t,"__wrapped__");if(T||A){var j=T?e.value():e,w=A?t.value():t;return b||(b=new o),f(j,w,n,g,b)}}return!!C&&(b||(b=new o),r(e,t,n,g,f,b))}},"./node_modules/lodash/_baseIsMap.js":function(e,t,n){var o=n("./node_modules/lodash/_getTag.js"),s=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return s(e)&&"[object Map]"==o(e)}},"./node_modules/lodash/_baseIsMatch.js":function(e,t,n){var o=n("./node_modules/lodash/_Stack.js"),s=n("./node_modules/lodash/_baseIsEqual.js");e.exports=function(e,t,n,i){var r=n.length,a=r,l=!i;if(null==e)return!a;for(e=Object(e);r--;){var c=n[r];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<a;){var d=(c=n[r])[0],u=e[d],p=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var m=new o;if(i)var h=i(u,p,d,e,t,m);if(!(void 0===h?s(p,u,3,i,m):h))return!1}}return!0}},"./node_modules/lodash/_baseIsSet.js":function(e,t,n){var o=n("./node_modules/lodash/_getTag.js"),s=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return s(e)&&"[object Set]"==o(e)}},"./node_modules/lodash/_baseIteratee.js":function(e,t,n){var o=n("./node_modules/lodash/_baseMatches.js"),s=n("./node_modules/lodash/_baseMatchesProperty.js"),i=n("./node_modules/lodash/identity.js"),r=n("./node_modules/lodash/isArray.js"),a=n("./node_modules/lodash/property.js");e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?r(e)?s(e[0],e[1]):o(e):a(e)}},"./node_modules/lodash/_baseMap.js":function(e,t,n){var o=n("./node_modules/lodash/_baseEach.js"),s=n("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){var n=-1,i=s(e)?Array(e.length):[];return o(e,(function(e,o,s){i[++n]=t(e,o,s)})),i}},"./node_modules/lodash/_baseMatches.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsMatch.js"),s=n("./node_modules/lodash/_getMatchData.js"),i=n("./node_modules/lodash/_matchesStrictComparable.js");e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}},"./node_modules/lodash/_baseMatchesProperty.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsEqual.js"),s=n("./node_modules/lodash/get.js"),i=n("./node_modules/lodash/hasIn.js"),r=n("./node_modules/lodash/_isKey.js"),a=n("./node_modules/lodash/_isStrictComparable.js"),l=n("./node_modules/lodash/_matchesStrictComparable.js"),c=n("./node_modules/lodash/_toKey.js");e.exports=function(e,t){return r(e)&&a(t)?l(c(e),t):function(n){var r=s(n,e);return void 0===r&&r===t?i(n,e):o(t,r,3)}}},"./node_modules/lodash/_baseProperty.js":function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"./node_modules/lodash/_basePropertyDeep.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGet.js");e.exports=function(e){return function(t){return o(t,e)}}},"./node_modules/lodash/_baseReduce.js":function(e){e.exports=function(e,t,n,o,s){return s(e,(function(e,s,i){n=o?(o=!1,e):t(n,e,s,i)})),n}},"./node_modules/lodash/_baseToString.js":function(e,t,n){var o=n("./node_modules/lodash/_Symbol.js"),s=n("./node_modules/lodash/_arrayMap.js"),i=n("./node_modules/lodash/isArray.js"),r=n("./node_modules/lodash/isSymbol.js"),a=o?o.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return s(t,e)+"";if(r(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},"./node_modules/lodash/_baseTrim.js":function(e,t,n){var o=n("./node_modules/lodash/_trimmedEndIndex.js"),s=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(s,""):e}},"./node_modules/lodash/_castFunction.js":function(e,t,n){var o=n("./node_modules/lodash/identity.js");e.exports=function(e){return"function"==typeof e?e:o}},"./node_modules/lodash/_castPath.js":function(e,t,n){var o=n("./node_modules/lodash/isArray.js"),s=n("./node_modules/lodash/_isKey.js"),i=n("./node_modules/lodash/_stringToPath.js"),r=n("./node_modules/lodash/toString.js");e.exports=function(e,t){return o(e)?e:s(e,t)?[e]:i(r(e))}},"./node_modules/lodash/_cloneArrayBuffer.js":function(e,t,n){var o=n("./node_modules/lodash/_Uint8Array.js");e.exports=function(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}},"./node_modules/lodash/_cloneBuffer.js":function(e,t,n){e=n.nmd(e);var o=n("./node_modules/lodash/_root.js"),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,r=i&&i.exports===s?o.Buffer:void 0,a=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,o=a?a(n):new e.constructor(n);return e.copy(o),o}},"./node_modules/lodash/_cloneDataView.js":function(e,t,n){var o=n("./node_modules/lodash/_cloneArrayBuffer.js");e.exports=function(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},"./node_modules/lodash/_cloneRegExp.js":function(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},"./node_modules/lodash/_cloneSymbol.js":function(e,t,n){var o=n("./node_modules/lodash/_Symbol.js"),s=o?o.prototype:void 0,i=s?s.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},"./node_modules/lodash/_cloneTypedArray.js":function(e,t,n){var o=n("./node_modules/lodash/_cloneArrayBuffer.js");e.exports=function(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},"./node_modules/lodash/_copyArray.js":function(e){e.exports=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}},"./node_modules/lodash/_copyObject.js":function(e,t,n){var o=n("./node_modules/lodash/_assignValue.js"),s=n("./node_modules/lodash/_baseAssignValue.js");e.exports=function(e,t,n,i){var r=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var c=t[a],d=i?i(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),r?s(n,c,d):o(n,c,d)}return n}},"./node_modules/lodash/_copySymbols.js":function(e,t,n){var o=n("./node_modules/lodash/_copyObject.js"),s=n("./node_modules/lodash/_getSymbols.js");e.exports=function(e,t){return o(e,s(e),t)}},"./node_modules/lodash/_copySymbolsIn.js":function(e,t,n){var o=n("./node_modules/lodash/_copyObject.js"),s=n("./node_modules/lodash/_getSymbolsIn.js");e.exports=function(e,t){return o(e,s(e),t)}},"./node_modules/lodash/_createAssigner.js":function(e,t,n){var o=n("./node_modules/lodash/_baseRest.js"),s=n("./node_modules/lodash/_isIterateeCall.js");e.exports=function(e){return o((function(t,n){var o=-1,i=n.length,r=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(i--,r):void 0,a&&s(n[0],n[1],a)&&(r=i<3?void 0:r,i=1),t=Object(t);++o<i;){var l=n[o];l&&e(t,l,o,r)}return t}))}},"./node_modules/lodash/_createBaseEach.js":function(e,t,n){var o=n("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){return function(n,s){if(null==n)return n;if(!o(n))return e(n,s);for(var i=n.length,r=t?i:-1,a=Object(n);(t?r--:++r<i)&&!1!==s(a[r],r,a););return n}}},"./node_modules/lodash/_createBaseFor.js":function(e){e.exports=function(e){return function(t,n,o){for(var s=-1,i=Object(t),r=o(t),a=r.length;a--;){var l=r[e?a:++s];if(!1===n(i[l],l,i))break}return t}}},"./node_modules/lodash/_equalArrays.js":function(e,t,n){var o=n("./node_modules/lodash/_SetCache.js"),s=n("./node_modules/lodash/_arraySome.js"),i=n("./node_modules/lodash/_cacheHas.js");e.exports=function(e,t,n,r,a,l){var c=1&n,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var p=l.get(e),m=l.get(t);if(p&&m)return p==t&&m==e;var h=-1,g=!0,f=2&n?new o:void 0;for(l.set(e,t),l.set(t,e);++h<d;){var b=e[h],y=t[h];if(r)var v=c?r(y,b,h,t,e,l):r(b,y,h,e,t,l);if(void 0!==v){if(v)continue;g=!1;break}if(f){if(!s(t,(function(e,t){if(!i(f,t)&&(b===e||a(b,e,n,r,l)))return f.push(t)}))){g=!1;break}}else if(b!==y&&!a(b,y,n,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},"./node_modules/lodash/_equalByTag.js":function(e,t,n){var o=n("./node_modules/lodash/_Symbol.js"),s=n("./node_modules/lodash/_Uint8Array.js"),i=n("./node_modules/lodash/eq.js"),r=n("./node_modules/lodash/_equalArrays.js"),a=n("./node_modules/lodash/_mapToArray.js"),l=n("./node_modules/lodash/_setToArray.js"),c=o?o.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,n,o,c,u,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=a;case"[object Set]":var h=1&o;if(m||(m=l),e.size!=t.size&&!h)return!1;var g=p.get(e);if(g)return g==t;o|=2,p.set(e,t);var f=r(m(e),m(t),o,c,u,p);return p.delete(e),f;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},"./node_modules/lodash/_equalObjects.js":function(e,t,n){var o=n("./node_modules/lodash/_getAllKeys.js"),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,r,a){var l=1&n,c=o(e),d=c.length;if(d!=o(t).length&&!l)return!1;for(var u=d;u--;){var p=c[u];if(!(l?p in t:s.call(t,p)))return!1}var m=a.get(e),h=a.get(t);if(m&&h)return m==t&&h==e;var g=!0;a.set(e,t),a.set(t,e);for(var f=l;++u<d;){var b=e[p=c[u]],y=t[p];if(i)var v=l?i(y,b,p,t,e,a):i(b,y,p,e,t,a);if(!(void 0===v?b===y||r(b,y,n,i,a):v)){g=!1;break}f||(f="constructor"==p)}if(g&&!f){var I=e.constructor,_=t.constructor;I==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof I&&I instanceof I&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(e),a.delete(t),g}},"./node_modules/lodash/_getAllKeys.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetAllKeys.js"),s=n("./node_modules/lodash/_getSymbols.js"),i=n("./node_modules/lodash/keys.js");e.exports=function(e){return o(e,i,s)}},"./node_modules/lodash/_getAllKeysIn.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetAllKeys.js"),s=n("./node_modules/lodash/_getSymbolsIn.js"),i=n("./node_modules/lodash/keysIn.js");e.exports=function(e){return o(e,i,s)}},"./node_modules/lodash/_getMatchData.js":function(e,t,n){var o=n("./node_modules/lodash/_isStrictComparable.js"),s=n("./node_modules/lodash/keys.js");e.exports=function(e){for(var t=s(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,o(r)]}return t}},"./node_modules/lodash/_getSymbols.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayFilter.js"),s=n("./node_modules/lodash/stubArray.js"),i=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(e){return null==e?[]:(e=Object(e),o(r(e),(function(t){return i.call(e,t)})))}:s;e.exports=a},"./node_modules/lodash/_getSymbolsIn.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayPush.js"),s=n("./node_modules/lodash/_getPrototype.js"),i=n("./node_modules/lodash/_getSymbols.js"),r=n("./node_modules/lodash/stubArray.js"),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)o(t,i(e)),e=s(e);return t}:r;e.exports=a},"./node_modules/lodash/_getTag.js":function(e,t,n){var o=n("./node_modules/lodash/_DataView.js"),s=n("./node_modules/lodash/_Map.js"),i=n("./node_modules/lodash/_Promise.js"),r=n("./node_modules/lodash/_Set.js"),a=n("./node_modules/lodash/_WeakMap.js"),l=n("./node_modules/lodash/_baseGetTag.js"),c=n("./node_modules/lodash/_toSource.js"),d="[object Map]",u="[object Promise]",p="[object Set]",m="[object WeakMap]",h="[object DataView]",g=c(o),f=c(s),b=c(i),y=c(r),v=c(a),I=l;(o&&I(new o(new ArrayBuffer(1)))!=h||s&&I(new s)!=d||i&&I(i.resolve())!=u||r&&I(new r)!=p||a&&I(new a)!=m)&&(I=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,o=n?c(n):"";if(o)switch(o){case g:return h;case f:return d;case b:return u;case y:return p;case v:return m}return t}),e.exports=I},"./node_modules/lodash/_hasPath.js":function(e,t,n){var o=n("./node_modules/lodash/_castPath.js"),s=n("./node_modules/lodash/isArguments.js"),i=n("./node_modules/lodash/isArray.js"),r=n("./node_modules/lodash/_isIndex.js"),a=n("./node_modules/lodash/isLength.js"),l=n("./node_modules/lodash/_toKey.js");e.exports=function(e,t,n){for(var c=-1,d=(t=o(t,e)).length,u=!1;++c<d;){var p=l(t[c]);if(!(u=null!=e&&n(e,p)))break;e=e[p]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&a(d)&&r(p,d)&&(i(e)||s(e))}},"./node_modules/lodash/_hasUnicode.js":function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},"./node_modules/lodash/_initCloneArray.js":function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,o=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(o.index=e.index,o.input=e.input),o}},"./node_modules/lodash/_initCloneByTag.js":function(e,t,n){var o=n("./node_modules/lodash/_cloneArrayBuffer.js"),s=n("./node_modules/lodash/_cloneDataView.js"),i=n("./node_modules/lodash/_cloneRegExp.js"),r=n("./node_modules/lodash/_cloneSymbol.js"),a=n("./node_modules/lodash/_cloneTypedArray.js");e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return o(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return s(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return i(e);case"[object Symbol]":return r(e)}}},"./node_modules/lodash/_initCloneObject.js":function(e,t,n){var o=n("./node_modules/lodash/_baseCreate.js"),s=n("./node_modules/lodash/_getPrototype.js"),i=n("./node_modules/lodash/_isPrototype.js");e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:o(s(e))}},"./node_modules/lodash/_isKey.js":function(e,t,n){var o=n("./node_modules/lodash/isArray.js"),s=n("./node_modules/lodash/isSymbol.js"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;e.exports=function(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||(r.test(e)||!i.test(e)||null!=t&&e in Object(t))}},"./node_modules/lodash/_isStrictComparable.js":function(e,t,n){var o=n("./node_modules/lodash/isObject.js");e.exports=function(e){return e==e&&!o(e)}},"./node_modules/lodash/_mapToArray.js":function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}},"./node_modules/lodash/_matchesStrictComparable.js":function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},"./node_modules/lodash/_memoizeCapped.js":function(e,t,n){var o=n("./node_modules/lodash/memoize.js");e.exports=function(e){var t=o(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},"./node_modules/lodash/_stackClear.js":function(e,t,n){var o=n("./node_modules/lodash/_ListCache.js");e.exports=function(){this.__data__=new o,this.size=0}},"./node_modules/lodash/_stackDelete.js":function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},"./node_modules/lodash/_stackGet.js":function(e){e.exports=function(e){return this.__data__.get(e)}},"./node_modules/lodash/_stackHas.js":function(e){e.exports=function(e){return this.__data__.has(e)}},"./node_modules/lodash/_stackSet.js":function(e,t,n){var o=n("./node_modules/lodash/_ListCache.js"),s=n("./node_modules/lodash/_Map.js"),i=n("./node_modules/lodash/_MapCache.js");e.exports=function(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!s||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(r)}return n.set(e,t),this.size=n.size,this}},"./node_modules/lodash/_stringSize.js":function(e,t,n){var o=n("./node_modules/lodash/_asciiSize.js"),s=n("./node_modules/lodash/_hasUnicode.js"),i=n("./node_modules/lodash/_unicodeSize.js");e.exports=function(e){return s(e)?i(e):o(e)}},"./node_modules/lodash/_stringToPath.js":function(e,t,n){var o=n("./node_modules/lodash/_memoizeCapped.js"),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,r=o((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,(function(e,n,o,s){t.push(o?s.replace(i,"$1"):n||e)})),t}));e.exports=r},"./node_modules/lodash/_toKey.js":function(e,t,n){var o=n("./node_modules/lodash/isSymbol.js");e.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},"./node_modules/lodash/_trimmedEndIndex.js":function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},"./node_modules/lodash/_unicodeSize.js":function(e){var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",s="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+n+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+a+("(?:\\u200d(?:"+[s,i,r].join("|")+")"+l+a+")*"),d="(?:"+[s+n+"?",n,i,r,t].join("|")+")",u=RegExp(o+"(?="+o+")|"+d+c,"g");e.exports=function(e){for(var t=u.lastIndex=0;u.test(e);)++t;return t}},"./node_modules/lodash/assign.js":function(e,t,n){var o=n("./node_modules/lodash/_assignValue.js"),s=n("./node_modules/lodash/_copyObject.js"),i=n("./node_modules/lodash/_createAssigner.js"),r=n("./node_modules/lodash/isArrayLike.js"),a=n("./node_modules/lodash/_isPrototype.js"),l=n("./node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,d=i((function(e,t){if(a(t)||r(t))s(t,l(t),e);else for(var n in t)c.call(t,n)&&o(e,n,t[n])}));e.exports=d},"./node_modules/lodash/clone.js":function(e,t,n){var o=n("./node_modules/lodash/_baseClone.js");e.exports=function(e){return o(e,4)}},"./node_modules/lodash/concat.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayPush.js"),s=n("./node_modules/lodash/_baseFlatten.js"),i=n("./node_modules/lodash/_copyArray.js"),r=n("./node_modules/lodash/isArray.js");e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return o(r(n)?i(n):[n],s(t,1))}},"./node_modules/lodash/filter.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayFilter.js"),s=n("./node_modules/lodash/_baseFilter.js"),i=n("./node_modules/lodash/_baseIteratee.js"),r=n("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(r(e)?o:s)(e,i(t,3))}},"./node_modules/lodash/findIndex.js":function(e,t,n){var o=n("./node_modules/lodash/_baseFindIndex.js"),s=n("./node_modules/lodash/_baseIteratee.js"),i=n("./node_modules/lodash/toInteger.js"),r=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var l=null==n?0:i(n);return l<0&&(l=r(a+l,0)),o(e,s(t,3),l)}},"./node_modules/lodash/forEach.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayEach.js"),s=n("./node_modules/lodash/_baseEach.js"),i=n("./node_modules/lodash/_castFunction.js"),r=n("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(r(e)?o:s)(e,i(t))}},"./node_modules/lodash/forOwn.js":function(e,t,n){var o=n("./node_modules/lodash/_baseForOwn.js"),s=n("./node_modules/lodash/_castFunction.js");e.exports=function(e,t){return e&&o(e,s(t))}},"./node_modules/lodash/get.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGet.js");e.exports=function(e,t,n){var s=null==e?void 0:o(e,t);return void 0===s?n:s}},"./node_modules/lodash/hasIn.js":function(e,t,n){var o=n("./node_modules/lodash/_baseHasIn.js"),s=n("./node_modules/lodash/_hasPath.js");e.exports=function(e,t){return null!=e&&s(e,t,o)}},"./node_modules/lodash/isBoolean.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetTag.js"),s=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return!0===e||!1===e||s(e)&&"[object Boolean]"==o(e)}},"./node_modules/lodash/isEmpty.js":function(e,t,n){var o=n("./node_modules/lodash/_baseKeys.js"),s=n("./node_modules/lodash/_getTag.js"),i=n("./node_modules/lodash/isArguments.js"),r=n("./node_modules/lodash/isArray.js"),a=n("./node_modules/lodash/isArrayLike.js"),l=n("./node_modules/lodash/isBuffer.js"),c=n("./node_modules/lodash/_isPrototype.js"),d=n("./node_modules/lodash/isTypedArray.js"),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(r(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||i(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!o(e).length;for(var n in e)if(u.call(e,n))return!1;return!0}},"./node_modules/lodash/isEqual.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsEqual.js");e.exports=function(e,t){return o(e,t)}},"./node_modules/lodash/isMap.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsMap.js"),s=n("./node_modules/lodash/_baseUnary.js"),i=n("./node_modules/lodash/_nodeUtil.js"),r=i&&i.isMap,a=r?s(r):o;e.exports=a},"./node_modules/lodash/isNumber.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetTag.js"),s=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"number"==typeof e||s(e)&&"[object Number]"==o(e)}},"./node_modules/lodash/isSet.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsSet.js"),s=n("./node_modules/lodash/_baseUnary.js"),i=n("./node_modules/lodash/_nodeUtil.js"),r=i&&i.isSet,a=r?s(r):o;e.exports=a},"./node_modules/lodash/isString.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetTag.js"),s=n("./node_modules/lodash/isArray.js"),i=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"string"==typeof e||!s(e)&&i(e)&&"[object String]"==o(e)}},"./node_modules/lodash/isSymbol.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetTag.js"),s=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==o(e)}},"./node_modules/lodash/map.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayMap.js"),s=n("./node_modules/lodash/_baseIteratee.js"),i=n("./node_modules/lodash/_baseMap.js"),r=n("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(r(e)?o:i)(e,s(t,3))}},"./node_modules/lodash/negate.js":function(e){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"./node_modules/lodash/property.js":function(e,t,n){var o=n("./node_modules/lodash/_baseProperty.js"),s=n("./node_modules/lodash/_basePropertyDeep.js"),i=n("./node_modules/lodash/_isKey.js"),r=n("./node_modules/lodash/_toKey.js");e.exports=function(e){return i(e)?o(r(e)):s(e)}},"./node_modules/lodash/reduce.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayReduce.js"),s=n("./node_modules/lodash/_baseEach.js"),i=n("./node_modules/lodash/_baseIteratee.js"),r=n("./node_modules/lodash/_baseReduce.js"),a=n("./node_modules/lodash/isArray.js");e.exports=function(e,t,n){var l=a(e)?o:r,c=arguments.length<3;return l(e,i(t,4),n,c,s)}},"./node_modules/lodash/reject.js":function(e,t,n){var o=n("./node_modules/lodash/_arrayFilter.js"),s=n("./node_modules/lodash/_baseFilter.js"),i=n("./node_modules/lodash/_baseIteratee.js"),r=n("./node_modules/lodash/isArray.js"),a=n("./node_modules/lodash/negate.js");e.exports=function(e,t){return(r(e)?o:s)(e,a(i(t,3)))}},"./node_modules/lodash/size.js":function(e,t,n){var o=n("./node_modules/lodash/_baseKeys.js"),s=n("./node_modules/lodash/_getTag.js"),i=n("./node_modules/lodash/isArrayLike.js"),r=n("./node_modules/lodash/isString.js"),a=n("./node_modules/lodash/_stringSize.js");e.exports=function(e){if(null==e)return 0;if(i(e))return r(e)?a(e):e.length;var t=s(e);return"[object Map]"==t||"[object Set]"==t?e.size:o(e).length}},"./node_modules/lodash/stubArray.js":function(e){e.exports=function(){return[]}},"./node_modules/lodash/times.js":function(e,t,n){var o=n("./node_modules/lodash/_baseTimes.js"),s=n("./node_modules/lodash/_castFunction.js"),i=n("./node_modules/lodash/toInteger.js"),r=4294967295,a=Math.min;e.exports=function(e,t){if((e=i(e))<1||e>9007199254740991)return[];var n=r,l=a(e,r);t=s(t),e-=r;for(var c=o(l,t);++n<e;)t(n);return c}},"./node_modules/lodash/toFinite.js":function(e,t,n){var o=n("./node_modules/lodash/toNumber.js"),s=1/0;e.exports=function(e){return e?(e=o(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},"./node_modules/lodash/toInteger.js":function(e,t,n){var o=n("./node_modules/lodash/toFinite.js");e.exports=function(e){var t=o(e),n=t%1;return t==t?n?t-n:t:0}},"./node_modules/lodash/toNumber.js":function(e,t,n){var o=n("./node_modules/lodash/_baseTrim.js"),s=n("./node_modules/lodash/isObject.js"),i=n("./node_modules/lodash/isSymbol.js"),r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):r.test(e)?NaN:+e}},"./node_modules/lodash/toString.js":function(e,t,n){var o=n("./node_modules/lodash/_baseToString.js");e.exports=function(e){return null==e?"":o(e)}},"./node_modules/platform/platform.js":function(e,t,n){var o;e=n.nmd(e),function(){"use strict";var s={function:!0,object:!0},i=s[typeof window]&&window||this,r=s[typeof t]&&t,a=s.object&&e&&!e.nodeType&&e,l=r&&a&&"object"==typeof n.g&&n.g;!l||l.global!==l&&l.window!==l&&l.self!==l||(i=l);var c=Math.pow(2,53)-1,d=/\bOpera/,u=Object.prototype,p=u.hasOwnProperty,m=u.toString;function h(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=I(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:h(e)}function f(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function b(e){return null==e?h(e):m.call(e).slice(8,-1)}function y(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var n=null;return function(e,t){var n=-1,o=e?e.length:0;if("number"==typeof o&&o>-1&&o<=c)for(;++n<o;)t(e[n],n,e);else f(e,t)}(e,(function(o,s){n=t(n,o,s,e)})),n}function I(e){return String(e).replace(/^ +| +$/g,"")}var _=function e(t){var n=i,o=t&&"object"==typeof t&&"String"!=b(t);o&&(n=t,t=null);var s=n.navigator||{},r=s.userAgent||"";t||(t=r);var a,l,c,u,p,h=o?!!s.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(m.toString()),_="Object",E=o?_:"ScriptBridgingProxyObject",S=o?_:"Environment",C=o&&n.java?"JavaPackage":b(n.java),T=o?_:"RuntimeObject",A=/\bJava/.test(C)&&n.java,j=A&&b(n.environment)==S,w=A?"a":"α",O=A?"b":"β",N=n.document||{},R=n.operamini||n.opera,P=d.test(P=o&&R?R["[[Class]]"]:b(R))?P:R=null,D=t,M=[],x=null,L=t==r,k=L&&R&&"function"==typeof R.version&&R.version(),F=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(t)&&(n.label||n)})),B=function(e){return v(e,(function(e,n){return e||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(t)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),U=z([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),V=function(e){return v(e,(function(e,n,o){return e||(n[U]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+y(o)+"(?:\\b|\\w*\\d)","i").exec(t))&&o}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),G=function(e){return v(e,(function(e,n){var o=n.pattern||y(n);return!e&&(e=RegExp("\\b"+o+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var o={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(o=o[/[\d.]+$/.exec(e)])&&(e="Windows "+o),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,o,n.label||n)),e}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function z(e){return v(e,(function(e,n){var o=n.pattern||y(n);return!e&&(e=RegExp("\\b"+o+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+o+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+o+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(o,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=g(e[0].replace(RegExp(o,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function H(e){return v(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(F&&(F=[F]),/\bAndroid\b/.test(G)&&!U&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(U=I(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),V&&!U?U=z([V]):V&&U&&(U=U.replace(RegExp("^("+y(V)+")[-_.\\s]","i"),V+" ").replace(RegExp("^("+y(V)+")[-_.]?(\\w)","i"),V+" $2")),(a=/\bGoogle TV\b/.exec(U))&&(U=a[0]),/\bSimulator\b/i.test(t)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==B&&/\bOPiOS\b/.test(t)&&M.push("running in Turbo/Uncompressed mode"),"IE"==B&&/\blike iPhone OS\b/.test(t)?(V=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,U=a.product):/^iP/.test(U)?(B||(B="Safari"),G="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==B&&/^Linux\b/i.test(G)?G="Kubuntu":V&&"Google"!=V&&(/Chrome/.test(B)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(U))||/\bAndroid\b/.test(G)&&/^Chrome/.test(B)&&/\bVersion\//i.test(t)?(B="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==B?(/\bMobi/i.test(t)||(G="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&M.unshift("accelerated")):"UC Browser"==B&&/\bUCWEB\b/.test(t)?M.push("speed mode"):"PaleMoon"==B&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?M.push("identifying as Firefox "+a[1]):"Firefox"==B&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),U||(U=a[1])):!B||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(B))?(B&&!U&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(B=null),(a=U||V||G)&&(U||V||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(B=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:a)+" Browser")):"Electron"==B&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&M.push("Chromium "+a),k||(k=H(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(B),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==F&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(B)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(B)&&"NetFront")&&(F=[a]),"IE"==B&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(B+=" Mobile",G="Windows Phone "+(/\+$/.test(a)?a:a+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(B="IE Mobile",G="Windows Phone 8.x",M.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=B&&"Trident"==F&&(a=/\brv:([\d.]+)/.exec(t))&&(B&&M.push("identifying as "+B+(k?" "+k:"")),B="IE",k=a[1]),L){if(u="global",p=null!=(c=n)?typeof c[u]:"number",/^(?:boolean|number|string|undefined)$/.test(p)||"object"==p&&!c[u])b(a=n.runtime)==E?(B="Adobe AIR",G=a.flash.system.Capabilities.os):b(a=n.phantom)==T?(B="PhantomJS",k=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof N.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?(k=[k,N.documentMode],(a=+a[1]+4)!=k[1]&&(M.push("IE "+k[1]+" mode"),F&&(F[1]=""),k[1]=a),k="IE"==B?String(k[1].toFixed(1)):k[0]):"number"==typeof N.documentMode&&/^(?:Chrome|Firefox)\b/.test(B)&&(M.push("masking as "+B+" "+k),B="IE",k="11.0",F=["Trident"],G="Windows");else if(A&&(D=(a=A.lang.System).getProperty("os.arch"),G=G||a.getProperty("os.name")+" "+a.getProperty("os.version")),j){try{k=n.require("ringo/engine").version.join("."),B="RingoJS"}catch(e){(a=n.system)&&a.global.system==n.system&&(B="Narwhal",G||(G=a[0].os||null))}B||(B="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(M.push("Node "+a.versions.node),B="Electron",k=a.versions.electron):"string"==typeof a.versions.nw&&(M.push("Chromium "+k,"Node "+a.versions.node),B="NW.js",k=a.versions.nw)),B||(B="Node.js",D=a.arch,G=a.platform,k=(k=/[\d.]+/.exec(a.version))?k[0]:null));G=G&&g(G)}if(k&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(L&&s.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(x=/b/i.test(a)?"beta":"alpha",k=k.replace(RegExp(a+"\\+?$"),"")+("beta"==x?O:w)+(/\d+\+?/.exec(a)||"")),"Fennec"==B||"Firefox"==B&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(G))B="Firefox Mobile";else if("Maxthon"==B&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(G=null),"Xbox 360"==U&&/\bIEMobile\b/.test(t)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(B)&&(!B||U||/Browser|Mobi/.test(B))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==B&&L)try{null===n.external&&M.unshift("platform preview")}catch(e){M.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(t))&&(a=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||k)?(G=((a=[a,/BB10/.test(t)])[1]?(U=null,V="BlackBerry"):"Device Software")+" "+a[0],k=null):this!=f&&"Wii"!=U&&(L&&R||/Opera/.test(B)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==B&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==B&&(G&&!/^Win/.test(G)&&k>5.5||/\bWindows XP\b/.test(G)&&k>8||8==k&&!/\bTrident\b/.test(t)))&&!d.test(a=e.call(f,t.replace(d,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),d.test(B)?(/\bIE\b/.test(a)&&"Mac OS"==G&&(G=null),a="identify"+a):(a="mask"+a,B=P?g(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(G=null),L||(k=null)),F=["Presto"],M.push(a));else B+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==B&&"+"==a[1].slice(-1)?(B="WebKit Nightly",x="alpha",k=a[1].slice(0,-1)):k!=a[1]&&k!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(k=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==F&&(F=["Blink"]),L&&(h||a[1])?(F&&(F[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),F&&(F[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==B&&(!k||parseInt(k)>45)?k=a:"Chrome"==B&&/\bHeadlessChrome/i.test(t)&&M.unshift("headless")),"Opera"==B&&(a=/\bzbov|zvav$/.exec(G))?(B+=" ",M.unshift("desktop mode"),"zvav"==a?(B+="Mini",k=null):B+="Mobile",G=G.replace(RegExp(" *"+a+"$"),"")):"Safari"==B&&/\bChrome\b/.exec(F&&F[1])?(M.unshift("desktop mode"),B="Chrome Mobile",k=null,/\bOS X\b/.test(G)?(V="Apple",G="iOS 4.3+"):G=null):/\bSRWare Iron\b/.test(B)&&!k&&(k=H("Chrome")),k&&0==k.indexOf(a=/[\d.]+$/.exec(G))&&t.indexOf("/"+a+"-")>-1&&(G=I(G.replace(a,""))),G&&-1!=G.indexOf(B)&&!RegExp(B+" OS").test(G)&&(G=G.replace(RegExp(" *"+y(B)+" *"),"")),F&&!/\b(?:Avant|Nook)\b/.test(B)&&(/Browser|Lunascape|Maxthon/.test(B)||"Safari"!=B&&/^iOS/.test(G)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(B)&&F[1])&&(a=F[F.length-1])&&M.push(a),M.length&&(M=["("+M.join("; ")+")"]),V&&U&&U.indexOf(V)<0&&M.push("on "+V),U&&M.push((/^on /.test(M[M.length-1])?"":"on ")+U),G&&(a=/ ([\d.+]+)$/.exec(G),l=a&&"/"==G.charAt(G.length-a[0].length-1),G={architecture:32,family:a&&!l?G.replace(a[0],""):G,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D))&&!/\bi686\b/i.test(D)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+a),"")),B&&(/\bWOW64\b/i.test(t)||L&&/\w(?:86|32)$/.test(s.cpuClass||s.platform)&&!/\bWin64; x64\b/i.test(t))&&M.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==B&&parseFloat(k)>=39&&(G.architecture=64),t||(t=null);var W={};return W.description=t,W.layout=F&&F[0],W.manufacturer=V,W.name=B,W.prerelease=x,W.product=U,W.ua=t,W.version=B&&k,W.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=e,W.toString=function(){return this.description||""},W.version&&M.unshift(k),W.name&&M.unshift(B),G&&B&&(G!=String(G).split(" ")[0]||G!=B.split(" ")[0]&&!U)&&M.push(U?"("+G+")":"on "+G),M.length&&(W.description=M.join(" ")),W}();i.platform=_,void 0===(o=function(){return _}.call(t,n,t,e))||(e.exports=o)}.call(this)},"./node_modules/react-radio-group/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t,n){for(var o=!0;o;){var s=e,i=t,r=n;o=!1,null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,i);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(r)}var c=Object.getPrototypeOf(s);if(null===c)return;e=c,t=i,n=r,o=!0,a=c=void 0}};function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r(n("./node_modules/prop-types/index.js")),d=r(n("../../node_modules/react/index.js")),u=function(e){function t(){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),s(t,[{key:"render",value:function(){var e=this.context.radioGroup,t=e.name,n=e.selectedValue,s=e.onChange,i={};return void 0!==n&&(i.checked=this.props.value===n),"function"==typeof s&&(i.onChange=s.bind(null,this.props.value)),d.default.createElement("input",o({},this.props,{type:"radio",name:t},i))}}]),t}(d.default.Component);t.Radio=u,u.contextTypes={radioGroup:c.default.object};var p=function(e){function t(){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),s(t,[{key:"getChildContext",value:function(){var e=this.props;return{radioGroup:{name:e.name,selectedValue:e.selectedValue,onChange:e.onChange}}}},{key:"render",value:function(){var e=this.props,t=e.Component,n=(e.name,e.selectedValue,e.onChange,e.children),o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["Component","name","selectedValue","onChange","children"]);return d.default.createElement(t,o,n)}}]),t}(d.default.Component);t.RadioGroup=p,p.defaultProps={Component:"div"},p.propTypes={name:c.default.string,selectedValue:c.default.oneOfType([c.default.string,c.default.number,c.default.bool]),onChange:c.default.func,children:c.default.node.isRequired,Component:c.default.oneOfType([c.default.string,c.default.func,c.default.object])},p.childContextTypes={radioGroup:c.default.object}},"./node_modules/react-shortcuts/lib/component/index.js":function(e,t,n){"use strict";e.exports=n("./node_modules/react-shortcuts/lib/component/shortcuts.js")},"./node_modules/react-shortcuts/lib/component/shortcuts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=c(n("../../node_modules/react/index.js")),i=c(n("./node_modules/invariant/browser.js")),r=c(n("./node_modules/combokeys/Combokeys/index.js")),a=c(n("./node_modules/prop-types/index.js")),l=c(n("./node_modules/react-shortcuts/lib/helpers.js"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,o;d(this,t);for(var s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o._combokeys=null,o._lastEvent=null,o._bindShortcuts=function(e){var t=o._getElementToBind();t.setAttribute("tabindex",o.props.tabIndex),o._combokeys=new r.default(t,{storeInstancesGlobally:!1}),o._decorateCombokeys(),o._combokeys.bind(e,o._handleShortcuts,o.props.eventType),o.props.global&&t.addEventListener("shortcuts:global",o._customGlobalHandler)},o._customGlobalHandler=function(e){var t=e.detail,n=t.character,s=t.modifiers,i=t.event,r=null;o.props.targetNodeSelector&&(r=document.querySelector(o.props.targetNodeSelector)),e.target!==o._domNode&&e.target!==r&&o._combokeys.handleKey(n,s,i,!0)},o._decorateCombokeys=function(){var e=o._getElementToBind(),t=o._combokeys.handleKey.bind(o._combokeys);o._combokeys.stopCallback=function(e,t,n){var s="INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.contentEditable&&"true"===t.contentEditable,i=void 0;return i=e.key?1===e.key.length:Boolean(l.default.getCharacter(e)),!(!s||!i||o.props.alwaysFireHandler)},o._combokeys.handleKey=function(n,s,i,r){if(!o._lastEvent||i.timeStamp!==o._lastEvent.timeStamp||i.type!==o._lastEvent.type){o._lastEvent=i;var a=!1;if(o.props.isolate&&!i.__isolateShortcuts&&(i.__isolateShortcuts=!0,a=!0),r||e.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:n,modifiers:s,event:i},bubbles:!0,cancelable:!0})),!i.__isolateShortcuts)return o.props.preventDefault&&i.preventDefault(),o.props.stopPropagation&&!r&&i.stopPropagation(),void t(n,s,i);(o.props.global||a)&&t(n,s,i)}}},o._getElementToBind=function(){var e=null;return o.props.targetNodeSelector?(e=document.querySelector(o.props.targetNodeSelector),(0,i.default)(e,"Node selector '"+o.props.targetNodeSelector+"'  was not found.")):e=o._domNode,e},o._unbindShortcuts=function(){o._combokeys&&(o._combokeys.detach(),o._combokeys.reset())},o._onUpdate=function(){var e=o.props.name&&o.context.shortcuts.getShortcuts(o.props.name);o._unbindShortcuts(),o._bindShortcuts(e||[])},o._handleShortcuts=function(e,t){if(o.props.name){var n=o.context.shortcuts.findShortcutName(t,o.props.name);o.props.handler&&o.props.handler(n,e)}},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this._onUpdate(),this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function(){(this._unbindShortcuts(),this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate),this.props.global)&&this._getElementToBind().removeEventListener("shortcuts:global",this._customGlobalHandler)}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{ref:function(t){e._domNode=t},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]),t}(s.default.Component);p.displayName="Shortcuts",p.contextTypes={shortcuts:a.default.object.isRequired},p.propTypes={children:a.default.node,handler:a.default.func,name:a.default.string,tabIndex:a.default.number,className:a.default.string,eventType:a.default.string,stopPropagation:a.default.bool,preventDefault:a.default.bool,targetNodeSelector:a.default.string,global:a.default.bool,isolate:a.default.bool,alwaysFireHandler:a.default.bool},p.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:!0,preventDefault:!1,targetNodeSelector:null,global:!1,isolate:!1,alwaysFireHandler:!1},t.default=p,e.exports=t.default},"./node_modules/react-shortcuts/lib/helpers.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=n("./node_modules/platform/platform.js"),i=(o=s)&&o.__esModule?o:{default:o};t.default={getPlatformName:function(){var e=i.default.os.family||"";return e=e.toLowerCase().replace(/ /g,""),e=/\bwin/.test(e)?"windows":/darwin|osx/.test(e)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(e)?"linux":"other"},getCharacter:function(e){return null==e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):null}},e.exports=t.default},"./node_modules/react-shortcuts/lib/index.js":function(e,t,n){"use strict";e.exports={ShortcutManager:n("./node_modules/react-shortcuts/lib/shortcut-manager.js"),Shortcuts:n("./node_modules/react-shortcuts/lib/component/index.js")}},"./node_modules/react-shortcuts/lib/shortcut-manager.js":function(e,t,n){"use strict";n("../../node_modules/process/browser.js");Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=c(n("./node_modules/just-reduce-object/index.js")),i=c(n("./node_modules/invariant/browser.js")),r=n("./node_modules/events/events.js"),a=c(n("./node_modules/react-shortcuts/lib/helpers.js")),l=n("./node_modules/react-shortcuts/lib/utils.js");function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._platformName=a.default.getPlatformName(),n._parseShortcutDescriptor=function(e){return(0,l.isPlainObject)(e)?e[n._platformName]:e},n._keymap=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addUpdateListener",value:function(e){(0,i.default)(e,"addUpdateListener: callback argument is not defined or falsy"),this.on(t.CHANGE_EVENT,e)}},{key:"removeUpdateListener",value:function(e){this.removeListener(t.CHANGE_EVENT,e)}},{key:"setKeymap",value:function(e){(0,i.default)(e,"setKeymap: keymap argument is not defined or falsy."),this._keymap=e,this.emit(t.CHANGE_EVENT)}},{key:"extendKeymap",value:function(e){(0,i.default)(e,"extendKeymap: keymap argument is not defined or falsy."),this._keymap=Object.assign({},this._keymap,e),this.emit(t.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function(e){return function t(n){return(0,s.default)(n,(function(n,o,s){if((0,l.isPlainObject)(s)){if(!s[e])return n[o]=t(s),n;s=s[e]}return n[o]=s,n}),{})}(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function(e){(0,i.default)(e,"getShortcuts: name argument is not defined or falsy.");var t=this._keymap[e];if(t)return(0,l.compact)((0,l.flatten)((0,l.map)(t,this._parseShortcutDescriptor)))}},{key:"_parseShortcutKeyName",value:function(e,t){var n=this;return(0,l.findKey)(e,(function(e){if((0,l.isPlainObject)(e)&&(e=e[n._platformName]),(0,l.isArray)(e)){var o=e.indexOf(t);o>=0&&(e=e[o])}return e===t}))}},{key:"findShortcutName",value:function(e,t){(0,i.default)(e,"findShortcutName: keyName argument is not defined or falsy."),(0,i.default)(t,"findShortcutName: componentName argument is not defined or falsy.");var n=this._keymap[t];return this._parseShortcutKeyName(n,e)}}]),t}(r.EventEmitter);p.CHANGE_EVENT="shortcuts:update",t.default=p,e.exports=t.default},"./node_modules/react-shortcuts/lib/utils.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t.isArray=function(e){return Array.isArray(e)},s=t.isPlainObject=function(e){if(!("object"===(void 0===e?"undefined":n(e))&&null!==e&&!o(e))||e.toString&&"[object Object]"!==e.toString())return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var s=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&Function.prototype.toString.call(s)===Function.prototype.toString.call(Object)},i=(t.findKey=function(e,t){if(s(e)||o(e))return Object.keys(e).find((function(n){return t(e[n])}))},t.compact=function(e){return e.filter(Boolean)},function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.reduce((function(t,s){return o(s)&&n?t.concat(e(s,!1)):(t.push(s),t)}),[])});t.flatten=function(e){if(!o(e))throw new Error("flatten expects an array");return i(e)},t.map=function(e,t){if(o(e))return e.map(t);for(var n=[],s=Object.keys(e),i=s.length,r=0;r<i;r+=1){var a=s[r];n.push(t(e[a],a))}return n}},"./api-dev/components/api-repo-integration/APIRepoIntegrationConfigurationBranchCreateModal/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),u=n("./node_modules/lodash/lodash.js"),p=n.n(u),m=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};function h(e){const[t,n]=(0,o.useState)(""),[u,h]=(0,o.useState)(!0),[g,f]=(0,o.useState)(!0),b=(y=e.selectedBranch)?Object.assign(Object.assign({},y),{label:y.name,value:y.name}):{};var y;const v=e.branches&&e.branches.length>0,I=e.isLoading||v&&!p().get(b,"name"),_=!t||u||g||I,E=(0,o.useCallback)(p().debounce((t=>m(this,void 0,void 0,(function*(){if(f(!0),!e.doesBranchExist||!t)return h(!1),void f(!1);const n=yield e.doesBranchExist(t);h(n),f(!1)}))),1e3),[e.doesBranchExist]);return(0,o.useEffect)((()=>{f(!0),E(t)}),[t]),o.createElement(s.Modal,{isOpen:e.isOpen,onClose:e.onCancel,size:"small"},o.createElement(s.ModalHeader,{heading:"Create a new branch"}),o.createElement(s.ModalContent,{direction:"column",padding:{paddingTop:"spacing-xs",paddingBottom:"spacing-xxl",paddingLeft:"spacing-xl",paddingRight:"spacing-xl"},alignItems:"center",gap:"spacing-xl"},o.createElement("div",null,o.createElement(i.default,{color:"content-color-secondary",typographyStyle:{fontWeight:"text-weight-medium"}},"Source branch"),e.branchSelectorDropdown),o.createElement("div",null,o.createElement(r.default,{id:"api-repo-integration__branch-create-form__branch-input",placeholder:I?"Select a source branch..":"Name new branch..",label:o.createElement(a.default,{text:"Branch name",fieldType:"required"}),value:t,onChange:e=>{n(p().get(e,"target.value","").replace(" ","-"))},isDisabled:I}),u&&t&&o.createElement("div",{className:`${e.parentClassName}__error__alt ${e.parentClassName}__error`},o.createElement(d.default,{className:`${e.parentClassName}__error__icon`,color:"content-color-error"}),o.createElement("span",{className:`${e.parentClassName}__error__message`},"Branch name already exists. Choose another branch name.")))),o.createElement(s.ModalFooter,null,o.createElement(l.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s",padding:{paddingTop:"spacing-xl"}},o.createElement(c.default,{type:"secondary",text:"Cancel",isDisabled:e.isLoading,onClick:e.onCancel}),o.createElement(c.default,{type:"primary",text:"Confirm",isDisabled:_,isLoading:e.isLoading,onClick:()=>e.onSubmit({id:t,name:t},b)}))))}},"./api-dev/components/api-version/common/RemoveEntity/RemoveEntity.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-delete-stroke-small.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/CurrentUserStore.js"),d=n("./api-dev/util/TooltipText.js"),u=n("./js/stores/SyncStatusStore.js"),p=n("./api-dev/constants/Permissions.js"),m=n("./node_modules/lodash/lodash.js"),h=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};let g=class extends o.Component{constructor(e){super(e),this.onRemove=this.onRemove.bind(this)}onRemove(){if(!(0,l.resolveStoreInstance)(c.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"removeEntity",origin:"api_builder_remove_entity_button",continueUrl:new URL(window.location.href)});m.isFunction(this.props.onRemoveEntity)&&this.props.onRemoveEntity(this.props.entity)}render(){const e=!(0,l.resolveStoreInstance)(u.default).isSocketConnected,t=this.props.isAPIDeleted,n=e||t,s=t&&p.DELETED_API_DISABLED_TEXT,c=this.props.isSmall?"small":"medium",h=this.props.canRemoveEntity,g=m.get(this.props,"tooltipPosition","right"),f=(0,d.default)(n,!this.props.canRemoveEntity,s)||"Delete";return h?o.createElement(i.default,{type:"tertiary",className:`api-dev-table-row__delete ${c}`,size:c,onClick:this.onRemove,isDisabled:n,tooltip:o.createElement(r.default,{content:f,placement:g}),icon:o.createElement(a.default,null)}):null}};g=h([s.observer],g),t.default=g},"./api-dev/components/api/api-tab/tiles/PowerUpYourAPI/TestAndAutomation/constants.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{CI_POWER_UP_FIELDS:function(){return o}});const o=["CI Project","Source"]},"./api-dev/components/common/DeleteModalContent/DeleteModalContent.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),a=n("./api-dev/util/EntityHelper.ts"),l=n("./node_modules/lodash/lodash.js"),c=n.n(l);class d extends o.Component{constructor(){super(...arguments),this.getContent=e=>{switch(e){case"api":return{body:"This will delete the API and all the versions and linked elements - documentation, environments, tests, mock servers and monitors added to this API.",banner:"You cannot restore this API once deleted. Only test and documentation collections can be restored from trash."};case"version":return{body:"This will delete the API version and all the elements - documentation, environments, tests, mock servers and monitors added to this API.",banner:"You cannot restore this API version once deleted. Only test and documentation collections can be restored from trash."};case"relation":const{relation:e}=this.props;if(!e)break;const t=(0,a.getUserFriendlyNameFromType)(e.type);return{body:[`This will only remove ${e.name} ${t} from this API version.`,`Once removed from API, people will no longer inherit roles on this ${t} from the API.`],banner:""}}return{body:"",banner:""}}}render(){const{banner:e,body:t}=this.getContent(this.props.type);return o.createElement(s.default,{direction:"column",gap:"spacing-l"},c().isString(t)&&o.createElement(i.default,null,t),c().isArray(t)&&t.map((e=>o.createElement(i.default,{key:e},e))),e&&o.createElement(r.default,{status:"error"},e))}}t.default=d},"./api-dev/util/EntityHelper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{getUserFriendlyNameFromType:function(){return s}});const o={environment:"environment",mock:"mock server",monitor:"monitor",uptimemonitor:"uptime monitor",collection:"collection",documentation:"documentation",test:"test",schema:"schema",apiDefinition:"definition",unclassified:"unclassified"},s=e=>e?o[e]:""},"./integrations/ci-cd/constants.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{AETHER_BADGE_STATUS:function(){return N},ALL_CI_INTEGRATION_CLASSES:function(){return b},ALL_TESTS:function(){return r},API_SCHEMA_DEFAULT_NAME:function(){return L},BITBUCKET_PIPELINES_CLASS_ID:function(){return p},BUILD_FILTER_STATUS:function(){return P},BUILD_STATUS_TO_BADGE_TYPE_MAP:function(){return R},BUILD_STATUS_TO_FILTER_STATUS_MAP:function(){return D},CANCELLABLE_OUTCOMES:function(){return M},CIRCLE_CI_CLASS_ID:function(){return d},CI_CD_BUILDS:function(){return a},CI_CD_CLIENT_CATEGORY:function(){return l},COMPACT_VIEW_BUILDS_LIMIT:function(){return s},COMPACT_VIEW_DEFAULT_OFFSET:function(){return i},DEVOPS_CI_CLASS_ID:function(){return g},ERRORS:function(){return A},ERROR_INTEGRATION_NOT_FOUND:function(){return S},ERROR_UNABLE_TO_GET_INTEGRATION_DATA:function(){return C},GENERATE_API_KEY_URL:function(){return I},GITHUB_CI_CLASS_ID:function(){return f},GITLAB_CI_CLASS_ID:function(){return h},GITLAB_SELF_HOSTED_CLASS_ID:function(){return m},INITIALS_TO_EXPANDED:function(){return x},JENKINS_CLASS_ID:function(){return u},NEWMAN_TOOLTIP_URL:function(){return _},NEWMAN_URL:function(){return y},NOT_AN_API_EDITOR:function(){return T},POSTMAN_CLI_TOOLTIP_URL:function(){return E},POSTMAN_CLOUD_REPORTER_LINK:function(){return v},RULE_TO_OAUTH_SERVICE_MAPPING:function(){return w},RULE_TO_SERVICE:function(){return j},RULE_TO_TEMPLATE:function(){return O},TEST_AND_AUTOMATION_VIEW:function(){return k},TRAVIS_CLASS_ID:function(){return c},errorContext:function(){return o}});const o=pm.logger.getContext("CI CD Integration","integrations"),s=5,i=0,r="all",a="ci-builds",l="continuous-integration",c="travis_ci",d="circle_ci",u="jenkins_ci",p="bitbucket_pipelines",m="gitlab_selfhosted_ci",h="gitlab_ci",g="devops_pipelines",f="github_ci",b=[c,d,u,p,m,h,g,f],y="https://go.pstmn.io/newman-config-for-ci-cd",v="https://go.pstmn.io/newman-reporter-postman-cloud",I="https://go.pstmn.io/docs-postman-api-key",_="https://go.pstmn.io/newman-config-tooltip",E="https://go.pstmn.io/postman-cli-config-tooltip",S={TITLE:"CI Integration not found",DESCRIPTION:"The integration you are looking for might have been deleted."},C={TITLE:"Unable to get integration details",DESCRIPTION:"Something went wrong while fetching details for your integration."},T={TITLE:"",DESCRIPTION:"You do not have permission to view this page."},A={UNABLE_TO_FETCH_PROJECTS:"Error occurred while fetching projects",FETCH_PROJECTS_AUTHENTICATION_ERROR:"Unable to fetch projects, invalid access token supplied",UNABLE_TO_FETCH_CLASS_DATA:"Something went wrong while fetching integration details, please try again"},j={devops_pipelines:"Azure Pipelines",travis_ci:"Travis CI",circle_ci:"CircleCI",jenkins_ci:"Jenkins",bitbucket_pipelines:"Bitbucket Pipelines",gitlab_ci:"GitLab SaaS",gitlab_selfhosted_ci:"GitLab Self-managed",github_ci:"GitHub Actions"},w={[p]:"bitbucket",[h]:"gitlab",[m]:"gitlabenterprise",[f]:"github",[g]:"azure"},O={[p]:"bitbucket-pipelines",[u]:"jenkins",[c]:"travis",[d]:"circleci",[h]:"gitlab",[g]:"azure-pipelines",[f]:"github-actions",local:"local-env"},N={NEUTRAL:"neutral",SUCCESS:"success",INFO:"info",WARNING:"warning",CRITICAL:"critical",NEW:"new",COUNT:"count"},R={passed:N.SUCCESS,success:N.SUCCESS,successful:N.SUCCESS,succeeded:N.SUCCESS,stopped:N.WARNING,partiallySucceeded:N.WARNING,failed:N.CRITICAL,failure:N.CRITICAL,"not running":N.CRITICAL,canceled:N.NEUTRAL,cancelled:N.NEUTRAL,unstable:N.CRITICAL,"not built":N.CRITICAL,aborted:N.NEUTRAL,errored:N.CRITICAL,building:N.NEUTRAL,queued:N.NEUTRAL,created:N.NEUTRAL,running:N.NEUTRAL,in_progress:N.NEUTRAL,pending:N.NEUTRAL,"waiting for resource":N.NEUTRAL,preparing:N.NEUTRAL,skipped:N.NEUTRAL,manual:N.NEUTRAL,scheduled:N.NEUTRAL,started:N.NEUTRAL,inProgress:N.NEUTRAL,notStarted:N.NEUTRAL,received:N.NEUTRAL,none:N.NEUTRAL},P={SUCCESS:"Success",FAILED:"Failed",DEFAULT:"Other"},D={passed:P.SUCCESS,success:P.SUCCESS,successful:P.SUCCESS,succeeded:P.SUCCESS,completed:P.SUCCESS,failed:P.FAILED,failure:P.FAILED},M={[p]:["RUNNING","CREATED"],[h]:["running","created","pending","preparing","scheduled"],[m]:["running","created","pending","preparing","scheduled"],[c]:["created","received","started"],[d]:["running","queued","on_hold"],[g]:["notStarted","inProgress","postponed"],[f]:["queued","in_progress"]},x={bb:"bitbucket.com",gh:"github.com"},L="Postman API Schema",k="tests"},"./integrations/ci-cd/services/DevOps.ts":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/date-fns/esm/differenceInMilliseconds/index.js"),s=n("./node_modules/date-fns/esm/parseISO/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const{getRepositories:a,getOrgs:l}=n("./api-dev/services/IntegrationService.js").default,{getBuildFilterStatus:c,getCollectionRunStatusSummary:d,convertNewmanRunMetrics:u}=n("./integrations/ci-cd/helpers.js"),p="list_builds",m="cancel_build",h="newman_template",g=pm.logger.getContext("DevOps","Integrations"),f=(e,t)=>{if(!e||!t)return null;const n=(0,s.default)(e),i=(0,s.default)(t);return(0,o.default)(i,n)};t.default={fetchOrganizations:e=>r(void 0,void 0,void 0,(function*(){const{orgs:t}=yield l(e,null);return t})),fetchRepositories:(e,t)=>r(void 0,void 0,void 0,(function*(){const{repositories:n}=yield a(e,t,null);return n.map((e=>{return{id:e.id,name:e.name,projectName:(t=e.full_name,t.split("/")[0])};var t}))})),getBuilds:({limit:e,offset:t,integrationId:n})=>r(void 0,void 0,void 0,(function*(){var o;try{const{body:s}=yield i.default.triggerIntegrationOnDemand(n,p,{inputs:{limit:e,offset:t}}),r=s?s.devOpsBuilds:null,a=s?s.newmanRuns:null,l=!0,m=(null!==(o=null==r?void 0:r.value)&&void 0!==o?o:[]).map((e=>{var t,n,o;const s=(i=e,(null!=a?a:[]).filter((e=>e.build===i.id.toString())).map(u));var i,r,p,m;return{id:e.id,branch:(m=e.sourceBranch,m.replace(/^\/?(refs\/)?(heads)?\/?/g,"")),build_url:e._links.web.href,buildNumber:e.buildNumber,build_num:(r=e.buildNumber,p=null===(t=e.definition)||void 0===t?void 0:t.name,p?`${p}: ${r}`:r),showCollectionRuns:l,showBuildSteps:!1,collectionRunSummary:d(s),collectionRunDetails:s,duration:f(e.startTime,e.finishTime),buildIdentifier:e.id,filterStatus:c(e.result),outcome:null!==(n=e.result)&&void 0!==n?n:e.status,start_time:null!==(o=e.startTime)&&void 0!==o?o:null}}));return m}catch(e){throw pm.logger.error("DevOps.getBuilds ~ Error occurred while fetching projects",e,{context:g}),e}})),triggerBuild:void 0,cancelBuild:(e,t)=>r(void 0,void 0,void 0,(function*(){return yield i.default.triggerIntegrationOnDemand(e,m,{inputs:{build_id:t.id}}),!0})),getBuildSteps:void 0,getNewmanConfig:e=>r(void 0,void 0,void 0,(function*(){try{const{body:t}=yield i.default.triggerIntegrationOnDemand(e,h);return t}catch(e){throw pm.logger.error("DevOps.getNewmanConfig ~ Error occurred while fetching newman config",e,{context:g}),e}})),getAddIntegrationPayload:(e,t,n,o,s,i,r,a,l)=>({classId:null==l?void 0:l.id,name:e,inputs:{api_id:o,organization:t,apiversion:s,oauth_token_id:n,project_name:i,repository_id:r,repository_name:a}}),getBranches:()=>Promise.resolve([])}},"./integrations/ci-cd/services/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("./integrations/ci-cd/constants.ts"),s=n("./integrations/ci-cd/services/Circleci.js"),i=n("./integrations/ci-cd/services/DevOps.ts"),r=n("./integrations/ci-cd/services/TravisCI.js"),a=n("./integrations/ci-cd/services/JenkinsCI.js"),l=n("./integrations/ci-cd/services/BitbucketCI.js"),c=n("./integrations/ci-cd/services/GitLabCI.js"),d=n("./integrations/ci-cd/services/GithubCI.js");t.default={[o.CIRCLE_CI_CLASS_ID]:s.default,[o.TRAVIS_CLASS_ID]:r.default,[o.JENKINS_CLASS_ID]:a.default,[o.BITBUCKET_PIPELINES_CLASS_ID]:l.default,[o.GITLAB_CI_CLASS_ID]:c.default,[o.GITLAB_SELF_HOSTED_CLASS_ID]:c.default,[o.DEVOPS_CI_CLASS_ID]:i.default,[o.GITHUB_CI_CLASS_ID]:d.default}},"./integrations/constants/formats_metadata.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{FORMATS:function(){return o}});const o=[{format:"openapi3_1",query:"openapi+paths+info+title+version",extension:["json","yaml","yml"],recommended_filename:["openapi"]},{format:"openapi3",query:"openapi+paths+info+title+version",extension:["json","yaml","yml"],recommended_filename:["openapi"]},{format:"swagger2",query:"swagger+paths+info+title+version",extension:["json","yaml","yml"],recommended_filename:["swagger"]},{format:"swagger1",query:"swaggerVersion",extension:["json"],recommended_filename:[]},{format:"raml1",query:"'#%25RAML 1.0'+title",extension:["raml"],recommended_filename:[]},{format:"raml",query:"'#%25RAML 0.8'",extension:["raml","yaml","yml"],recommended_filename:[]},{format:"graphql",query:"type",extension:["graphql","gql"],recommended_filename:[]},{format:"curl",query:"curl",extension:["sh"],recommended_filename:[]},{format:"wadl",query:"%3Capplication",extension:["wadl"],recommended_filename:[]},{format:"wadlNamespaced",query:"%3Cwadl+application",extension:["wadl"],recommended_filename:[]},{format:"wadlNamespacedNS2",query:"%3Cns2+application",extension:["wadl"],recommended_filename:[]},{format:"wsdl",query:"definitions> OR description>",extension:["wsdl"],recommended_filename:[]},{format:"proto3",query:"proto3",extension:["proto"],recommended_filename:[]},{format:"proto2",query:"proto2",extension:["proto"],recommended_filename:[]},{format:"runscopeRadar",query:"steps+trigger_url",extension:["wadl"],recommended_filename:[]},{format:"postmanCollection2_1",query:"info+schema+https://schema.getpostman.com/json/collection/v2.1.0",extension:["json"],recommended_filename:[".postman_collection"]},{format:"postmanCollection2",query:"info+schema+https://schema.getpostman.com/json/collection/v2.0",extension:["json"],recommended_filename:[".postman_collection"]},{format:"postmanCollection1",query:"folders OR requests OR order",extension:["json"],recommended_filename:[".postman_collection"]},{format:"postmanCollection2CloudApi",query:"collection+info+schema+https://schema.getpostman.com",extension:["json"],recommended_filename:[".postman_collection"]},{format:"postmanGlobals2",query:"values+name+_postman_variable_scope+globals",extension:["json"],recommended_filename:[".postman_globals"]},{format:"postmanGlobals1",query:"key+value",extension:["json"],recommended_filename:[".postman_globals"]},{format:"postmanEnvironment",query:"values+name",extension:["json"],recommended_filename:[".postman_environment"]},{format:"postmanEnvironmentCloudApi",query:"environment+values+name",extension:["json"],recommended_filename:[".postman_environment"]},{format:"dataDump",query:"version+collections",extension:["json"],recommended_filename:[".postman_dump"]},{format:"har",query:"log",extension:["har"],recommended_filename:[]}]},"./integrations/constants/repository_actions.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{BRANCH_SELECTED:function(){return o},DISABLE_CONTINUE:function(){return i},DISABLE_WARNING:function(){return r},FILES_FOUND:function(){return s},STOP_VERIFYING:function(){return a}});const o="branchSelected",s="filesFound",i="disableContinue",r="disableWarning",a="stopVerifying"},"./integrations/models/IntegrationClass.ts":function(e,t,n){"use strict";n.r(t)},"./integrations/models/LinkToProps.ts":function(e,t,n){"use strict";n.r(t)},"./integrations/monitors/runs/services/MonitorRunsService.ts":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");t.default={getMonitorRuns:e=>{let t=`/jobTemplates/${e}/jobs`;return new Promise(((e,n)=>{o.HTTPGatewayService.request({data:{service:"monitors",method:"get",path:t}}).then((t=>{if(!t.status||200!==t.status)throw t;e(t.body)})).catch((e=>{n(e)}))}))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{isFormUpdated:function(){return i}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o);function i(e,t){const n=s().pick(t,s().keys(e));return!s().isEqual(e,n)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s);const r="integrations",a="/integration-instances",l="/bulk";t.default={fetchIntegrationInstanceDetails(e,t){const n=`/integration-instances/${e}`;return o.HTTPGatewayService.request({data:{service:r,method:"get",path:n,query:t}})},getConfiguredIntegrationsForAnEntity(e,t,n){const s=i().join(n,",");return o.HTTPGatewayService.request({data:{service:r,method:"get",path:"/integration-instances",query:{entityType:e,entityId:t,clientCategory:s}}})},createIntegrationInstance(e,t,n){const s=i().map(n,((e,t)=>({key:t,value:e})));return o.HTTPGatewayService.request({data:{service:r,method:"post",path:"/integration-instances",body:{class:e,name:t,inputs:s}}})},createIntegrationInstanceBulk(e){const t=a+l;return o.HTTPGatewayService.request({data:{service:r,method:"post",path:t,body:e}})},updateIntegrationInstance(e,t,n){const s=`/integration-instances/${e}`,a=i().map(n,((e,t)=>({key:t,value:e}))),l={};return i().isNil(t)||(l.name=t),i().isEmpty(a)||(l.inputs=a),o.HTTPGatewayService.request({data:{service:r,method:"put",path:s,body:l}})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts":function(e,t,n){"use strict";n.r(t);var o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),s=n("./node_modules/lodash/lodash.js"),i=n.n(s),r=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};t.default={runServiceAction(e,t,n,s,i,a){return r(this,void 0,void 0,(function*(){const r=`/services/${e}/actions/${t}/run`;return yield o.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:r,body:{integration:{instanceId:a||void 0,classId:s,classInputId:i},inputs:n}}})}))},getValidationError(e,t,n){return r(this,void 0,void 0,(function*(){if(i().isEmpty(e.validator)||this.state.inputErrors[e.key])return Promise.resolve();const o=e.validator,s=i().map(n,(n=>n.key===e.key?Object.assign(Object.assign({},n),{value:t}):n)),r=yield this.runServiceAction(o.service,o.serviceActionId,s,e.integrationClass,e.id,null),a=i().get(r,"body",!0);if("boolean"==typeof a&&a||i().isObject(a)&&(i().isEmpty(a)||i().isEqual(i().keys(a),["error"]))||i().isString(a)&&(i().isEmpty(a)||"true"===a.toLowerCase()))return Promise.resolve();let l="This field isn't valid";return i().isString(a)?l="false"===a.toLowerCase()?l:a:i().isObject(a)&&(l=a.message||a.msg||l),Promise.resolve(l)}))}}},"./integrations/ci-cd/stores/fixture.json":function(e){"use strict";e.exports=JSON.parse('[{"id":"circleci","name":"Circle CI","icon":"pm-icon-circle-ci","description":"Bring your pipeline builds to Postman","icon_url":"https://static.getpostman.com/assets/circleci-light.png","dark_icon_url":"https://static.getpostman.com/assets/circleci-dark.png","extended_description":"Bring your pipeline builds in Postman and also trigger your build pipleines right from Postman","categories":["CI"],"integrations":{"circleci":{"circle_ci":{"name":"Create CI with Circle CI","description":"Bring circle ci builds inside Postman","categories":["CI"],"summary":"","client_categories":["continuous-integration"],"type":"multiple","entity":"apiversion","scope":"user","sync_data":[],"variables":[],"auth_type":"token","canCreateIntegration":true}}},"setup_details":"","service_data":[],"summary":"","misc":"","oauth_initiator_host":null},{"id":"travisci","name":"TravisCI","icon":"pm-icon-travisci","description":"Bring your pipeline builds to Postman","icon_url":"https://static.getpostman.com/assets/travisci-light.png","dark_icon_url":"https://static.getpostman.com/assets/travisci-dark.png","extended_description":"Bring your pipeline builds in Postman and also trigger your build pipleines right from Postman","categories":["CI"],"integrations":{"travisci":{"travis_ci":{"name":"Trigger builds from Postman with TravisCI","description":"Bring TravisCI builds inside Postman","categories":["CI"],"summary":"","client_categories":["continuous-integration"],"type":"multiple","entity":"apiversion","scope":"user","sync_data":[],"variables":[],"auth_type":"token","canCreateIntegration":true}}},"setup_details":"","service_data":[],"summary":"","misc":"","oauth_initiator_host":null}]')}}]);