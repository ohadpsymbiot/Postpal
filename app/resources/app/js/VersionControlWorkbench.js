(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[72,3],{"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/Wondering.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function r(){return o.createElement(s.default,{name:"illustration-wondering"})}},"../../node_modules/node-polyfill-webpack-plugin/node_modules/timers-browserify/main.js":function(e,t,n){var o=void 0!==n.g&&n.g||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(s.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new r(s.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("../../node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==n.g&&n.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==n.g&&n.g.clearImmediate||this&&this.clearImmediate},"../../node_modules/setimmediate/setImmediate.js":function(e,t,n){var o=n("../../node_modules/process/browser.js");!function(e,t){"use strict";if(!e.setImmediate){var n,s,r,i,a,l=1,c={},d=!1,u=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){o.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){r.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(s=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):n=function(e){setTimeout(h,0,e)}:(i="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(i+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var s={callback:e,args:t};return c[l]=s,n(l),l++},p.clearImmediate=m}function m(e){delete c[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{m(e),d=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)},"./api-dev/components/api-version/context-bar/api-source-control/APISourceControlContextBarView/APISourceControlContextBarIcon.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),r=n.n(s),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./api-dev/navigation/constants.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=n("./api-dev/stores/api-repository/PollingRemoteHeadDetailsStore.js"),p=n("./js/stores/StoreManager.js"),m=n("./js/services/NavigationService.js"),h=n("./api-dev/interfaces/APIInterface.js"),f=n("./node_modules/lodash/lodash.js");const g="contextBar",v=o.forwardRef((({handleShowTooltip:e,handleHideTooltip:t,apiRepositoryStore:n},s)=>{var r;const i=f.get(n,"sourceControlStore"),a=f.get(i,"shouldShowContextBarIconIndicator",!1),v=m.default.getCurrentURL(),y=null===m.default||void 0===m.default||null===(r=m.default.getCurrentRouteParams())||void 0===r?void 0:r.apiId;return(0,o.useEffect)((()=>{const e=(0,p.resolveStoreInstance)(u.default);return async function(){const t=y&&await(0,h.isAPIGitLinked)(y),n=y&&await(0,h.hasAPIMigrated)(y);y&&t&&n&&e.startPolling(y,g)}(),()=>{e.stopPolling(y,g)}}),[v]),o.createElement("div",{className:`tabs__${c.SOURCE_CONTROL_NAV} icon-container`,ref:s,onMouseEnter:e,onMouseLeave:t},o.createElement(d.default,{name:"icon-descriptive-branch-stroke",className:(b=a,l()({"api-source-control__context-bar-icon--unread":b}))}));var b}));v.propTypes={handleShowTooltip:r().func.isRequired,handleHideTooltip:r().func.isRequired,apiRepositoryStore:r().object.isRequired},t.default=(0,i.observer)(v)},"./api-dev/stores/api-repository/PollingRemoteHeadDetailsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o,s,r,i,a,l=n("./js/stores/StoreManager.js"),c=n("./api-dev/stores/APIListStore.js"),d=n("../../node_modules/node-polyfill-webpack-plugin/node_modules/timers-browserify/main.js"),u=n("./onboarding/src/common/LaunchDarkly.js"),p=n("../../node_modules/mobx/lib/mobx.module.js"),m=n("./node_modules/lodash/lodash.js");function h(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const g="store";let v=(s=f((o=class{constructor(){h(this,"activePollingAPI",s,this),h(this,"timerObject",r,this),h(this,"apiSourceMap",i,this),h(this,"startPollingForAPI",a,this)}setActivePollingAPI(e){this.activePollingAPI=e}setTimerObject(e){this.timerObject=e}setSource(e,t){const n=this.apiSourceMap[e]||[];m.includes(n,t)||(n.push(t),this.apiSourceMap[e]=n)}clearSource(e,t){const n=this.apiSourceMap[e]||[];-1!==n.indexOf(t)&&(this.apiSourceMap[e]=m.filter(n,(e=>e!==t)))}clearAPIAndSources(e){delete this.apiSourceMap[e]}clear(){this.setTimerObject(null),this.setActivePollingAPI(null)}stopPolling(e,t){if(e&&t)if(this.activePollingAPI===e){const n=this.apiSourceMap[e];t===g||m.isEmpty(n)||1===m.size(n)&&n[0]===t?((0,d.clearInterval)(this.timerObject),this.clear(),this.clearAPIAndSources(e),pm.logger.info(`APIPollingStore~stopPolling: Stopped Polling for ${e}`)):this.clearSource(e,t)}else this.clearSource(e,t)}startPolling(e,t){e&&t&&(this.setSource(e,t),e!==this.activePollingAPI&&this.startPollingForAPI(e,t))}}).prototype,"activePollingAPI",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=f(o.prototype,"timerObject",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=f(o.prototype,"apiSourceMap",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f(o.prototype,"setActivePollingAPI",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setActivePollingAPI"),o.prototype),f(o.prototype,"setTimerObject",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setTimerObject"),o.prototype),f(o.prototype,"setSource",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setSource"),o.prototype),f(o.prototype,"clearSource",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"clearSource"),o.prototype),f(o.prototype,"clearAPIAndSources",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"clearAPIAndSources"),o.prototype),f(o.prototype,"clear",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"clear"),o.prototype),f(o.prototype,"stopPolling",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"stopPolling"),o.prototype),a=f(o.prototype,"startPollingForAPI",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.debounce((e=>{this.activePollingAPI&&this.stopPolling(this.activePollingAPI,g);const t=u.launchDarkly.getFlag("api-git-sync-status-pull-delay",0);if(0!==t){var n;this.setActivePollingAPI(e);const o=(0,l.resolveStoreInstance)(c.default).find(this.activePollingAPI),s=null===(n=m.head(o.childEntities.values))||void 0===n?void 0:n.id,r=o.childEntities.find(s);this.apiRepositoryStore=m.get(r,"apiRepositoryStore"),pm.logger.info(`APIPollingStore~startPolling: Started Polling for ${e}`),this.apiRepositoryStore.sourceControlStore.init();const i=(0,d.setInterval)((()=>{m.isFunction(this.apiRepositoryStore.sourceControlStore.getLatestRemoteHead)&&this.apiRepositoryStore.sourceControlStore.getLatestRemoteHead()}),t);this.setTimerObject(i)}}),2e3)}}),f(o.prototype,"startPolling",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"startPolling"),o.prototype),o)},"./appsdk/contextbar/ContextBar.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ContextBarPane:function(){return C}});var o,s=n("../../node_modules/react/index.js"),r=n("./appsdk/contextbar/ContextBarService.js"),i=n("./appsdk/contextbar/ContextBarHeader.js"),a=n("./js/constants/Panes.js"),l=n("./js/components/base/Panes.js"),c=n("./node_modules/classnames/index.js"),d=n.n(c),u=n("./js/components/empty-states/AetherCrashHandler.js"),p=n("./js/components/base/XPaths/XPath.js"),m=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=n("./js/constants/AppSettingsDefaults.js"),f=n("../../node_modules/mobx/lib/mobx.module.js"),g=n("./appsdk/contextbar/ContextBarUtil.js"),v=n("./js/stores/StoreManager.js"),y=n("./js/stores/ActiveWorkspaceSessionStore.js"),b=n("./node_modules/lodash/lodash.js");const E="auto";let C=(0,m.observer)(o=class extends l.Pane{constructor(e){super(e),this.contextBarService=new r.ContextBarService,this.handleSelect=this.handleSelect.bind(this),this.handleContextChange=this.handleContextChange.bind(this),this.handleClose=this.handleClose.bind(this),this.state={...this.state,collapsedX:!0},this.isOpen=!1}getContextForUrlIdentifier(e){return this.props.allowedContexts.find((t=>this.contextBarService.getConfig(t).urlIdentifier===e))}getUrlIdentifierForContext(e){return this.contextBarService.getConfig(e).urlIdentifier}getDimensions(e){return super.getDimensions({...e,width:{collapsedByDefault:true,shouldResistResize:true,default:440,collapsed:48,uncollapsed:440,min:h.default.ui.CONTEXT_BAR_MIN_WIDTH,max:E}})}componentDidMount(){let e=this.getContextForUrlIdentifier(this.contextBarService.activeContextUrlIdentifier)||this.props.allowedContexts&&this.props.allowedContexts[0];this.lastActive=e;let t=b.get(this.props,"collapsedByDefault",!0),n=(0,v.resolveStoreInstance)(y.default).activeEditor;!t&&this.props.editorId===n&&(0,g.updateContextQueryParams)(this.getUrlIdentifierForContext(e)),this.activeContextAutoRun=(0,f.autorun)((()=>{const e=this.contextBarService.getContextBarQueryParam(this.props.editorId);let t=this.getContextForUrlIdentifier(e);t!==this.state.activeContext&&this.setContext(t,!!t)}))}componentWillUnmount(){this.props.allowedContexts.forEach((e=>{this.contextBarService.willDestroy(e)})),this.activeContextAutoRun&&this.activeContextAutoRun()}componentDidUpdate(){this.contextBarService.pruneControllers(this.props.allowedContexts),this.isOpen&&this.state.collapsedX?(this.isOpen=!this.state.collapsedX,(0,g.removeContextQueryParams)()):this.isOpen||this.state.collapsedX||(this.isOpen=!this.state.collapsedX,this.state.activeContext||(0,g.updateContextQueryParams)(this.getUrlIdentifierForContext(this.lastActive)))}handleSelect(e){this.setContext(e,!0)}handleContextChange(e){(0,g.updateContextQueryParams)(this.getUrlIdentifierForContext(e))}setContext(e,t=!1){let n=this.state.activeContext;return new Promise((o=>{this.setState({activeContext:e},(()=>Promise.all([this.contextBarService.getControllerFor(e,this.props.contextData),this.contextBarService.getViewFor(e)]).then((([t,s])=>{e===this.state.activeContext&&this.setState({activeController:t,ActiveView:s},(()=>(this.contextBarService.didDeactivate(n),this.contextBarService.didActivate(this.state.activeContext),o())))})).then((()=>{this.state.activeContext&&(this.lastActive=this.state.activeContext),t?this.unCollapse("x"):this.collapse("x")}))))}))}handleClose(){this.collapse("x"),this.props.onClose&&this.props.onClose()}render(){let e=this.state.ActiveView,t=this.props.allowedContexts||this.props.visibleContexts,n=this.contextBarService.getConfig(this.state.activeContext),o=this.state.activeController;const r=d()({pane:!0,resizableX:this.isResizable("x"),resizableY:this.isResizable("y"),collapsedX:this.state.collapsedX,collapsedY:this.state.collapsedY},"right-context-bar"),c={height:this.state.height,width:this.state.width,...this.props.style||{}};return s.createElement(p.default,{identifier:"contextBar"},s.createElement("div",{className:r,style:c},s.createElement(u.default,null,s.createElement(l.PaneHeader,{defaultLayout:a.PANE_LAYOUT_VERTICAL,verticalComponent:s.createElement(i.ContextBarHeader,{visibleContexts:t,onSelect:this.handleContextChange,contextBarService:this.contextBarService,activeContext:this.state.activeContext,width:this.state.width,contextData:this.props.contextData}),isCollapsedX:this.state.collapsedX,isCollapsedY:this.state.collapsedY,onCollapseToggle:this.handleCollapseToggle}),s.createElement(l.PaneContent,{isCollapsedX:this.state.collapsedX,isCollapsedY:this.state.collapsedY},this.state.width?s.createElement("div",{className:"right-context-bar-content-container"},e&&n&&s.createElement(u.default,{onClose:this.handleClose},s.createElement(e,{contextData:this.props.contextData,title:n.title,onClose:this.handleClose,controller:o,editorId:this.props.editorId}))):null))))}})||o;C.defaultProps={width:{collapsedByDefault:true,shouldResistResize:true,default:440,collapsed:48,uncollapsed:440,min:350,max:E}}},"./appsdk/contextbar/ContextBarHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ContextBarHeader:function(){return f}});var o,s=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./js/components/base/Tooltips.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./node_modules/classnames/index.js"),c=n.n(l),d=n("./js/components/base/XPaths/XPath.js"),u=n("./growth/foundation/public/amplitude/AmplitudeService.js"),p=n("./api-dev/navigation/constants.js"),m=n("./api-dev/components/api-version/context-bar/api-source-control/APISourceControlContextBarView/APISourceControlContextBarIcon.js"),h=n("./node_modules/lodash/lodash.js");let f=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.state={},this.tooltipTargets={},this.handleShowTooltip=this.handleShowTooltip.bind(this),this.handleHideTooltip=this.handleHideTooltip.bind(this)}componentWillUnmount(){clearTimeout(this.titleTooltip)}handleShowTooltip(e){this.titleTooltip=setTimeout((()=>{this.setState({[e]:!0})}),500)}handleHideTooltip(e){clearTimeout(this.titleTooltip),this.state[e]&&this.setState({[e]:!1})}render(){let e=this.props.visibleContexts;const t=e=>e.name===p.SOURCE_CONTROL_NAV?s.createElement(m.default,{ref:t=>{this.tooltipTargets[e.name]=t},apiRepositoryStore:h.get(this.props,"contextData.apiRepositoryStore")||h.get(this.props,"contextData.model.apiRepositoryStore"),handleShowTooltip:this.handleShowTooltip.bind(null,e.name),handleHideTooltip:this.handleHideTooltip.bind(null,e.name)}):s.createElement("div",{className:`tabs__${e.name} icon-container`,ref:t=>{this.tooltipTargets[e.name]=t},onMouseEnter:this.handleShowTooltip.bind(null,e.name),onMouseLeave:this.handleHideTooltip.bind(null,e.name)},s.createElement(r.default,{name:e.icon}));return s.createElement("div",{className:"right-context-bar-options"},s.createElement("ul",null,e.map((e=>{let n=this.props.contextBarService.getConfig(e);return n?s.createElement(d.default,{key:n.name,identifier:n.name},s.createElement("li",{key:n.name,onClick:()=>{this.props.onSelect(n.name),u.Ampli.contextBarListItemClicked({item_name:n.name,...(0,u.getAmpliCTAProperties)({ctaType:"other"})})},className:c()({active:n.name===this.props.activeContext&&this.props.width>300})},s.createElement(s.Fragment,{key:n.name},t(n),s.createElement(i.Tooltip,{show:n&&this.state[n.name],target:n&&this.tooltipTargets[n.name],placement:"left",immediate:!0},s.createElement(i.TooltipBody,null,n&&n.title))))):null}))))}})||o},"./appsdk/contextbar/ContextBarService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ContextBarService:function(){return p}});var o,s=n("./appsdk/contextbar/ContextBarRegistry.js"),r=n("./js/services/NavigationService.js"),i=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/utils/NavigationUtil.js"),l=n("./appsdk/contextbar/ContextBarUtil.js"),c=(n("./js/containers/scratchpad/ContextBarScratchPadSignInPromptContainer.js"),n("./appsdk/workbench/WorkbenchService.js")),d=n("./node_modules/lodash/lodash.js"),u=n("../../node_modules/console-browserify/index.js");let p=(m=(o=class{constructor(){this._contextBarRegistry=s.default,this._controllerCache=new Map}get activeContextUrlIdentifier(){let e=r.default.currentURL.get(),{queryString:t}=(0,a.getUrlParts)(e);const n=(0,a._getQueryStringParams)(t);return n&&n[l.CONTEXT_BAR_QUERY_STRING_KEY]?n[l.CONTEXT_BAR_QUERY_STRING_KEY]:null}getContextBarQueryParam(e){return c.default.getTabController(e).contextBarQueryParam}pruneControllers(e){let t=new Set(e);for(let e of this._controllerCache.keys())t.has(e)||(this.willDestroy(e),this._controllerCache.delete(e))}getConfig(e){return this._contextBarRegistry._store.get(e)}getControllerFor(e,t){if(this._controllerCache.has(e))return this._controllerCache.get(e);let n=this.getConfig(e);if(!n)return;let o=n.getController;return o&&d.isFunction(o)?o().then((n=>{let o=new(0,n.default);this._controllerCache.set(e,o);try{o.didCreate&&o.didCreate(t)}catch(t){u.warn("ContextBarService: There was an error in the didCreate lifecycle of "+e)}return o})):void 0}getViewFor(e){let t=this.getConfig(e);return t&&t.getView().then((e=>e.default))}didActivate(e){this._triggerLifecycleMethod("didActivate",e)}didDeactivate(e){this._triggerLifecycleMethod("didDeactivate",e)}willDestroy(e){this._triggerLifecycleMethod("willDestroy",e)}_triggerLifecycleMethod(e,t){let n=this._controllerCache.get(t);if(n)try{n[e]&&n[e]()}catch(n){u.warn(`ContextBarService: There was an error in the ${e} lifecycle of ${t}`)}}}).prototype,h="activeContextUrlIdentifier",f=[i.computed],g=Object.getOwnPropertyDescriptor(o.prototype,"activeContextUrlIdentifier"),v=o.prototype,y={},Object.keys(g).forEach((function(e){y[e]=g[e]})),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=f.slice().reverse().reduce((function(e,t){return t(m,h,e)||e}),y),v&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(v):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(m,h,y),y=null),o);var m,h,f,g,v,y},"./collaboration/containers/comments/commentPopover/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var o,s=n("../../node_modules/react/index.js"),r=n("./node_modules/prop-types/index.js"),i=n.n(r),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=(n("./js/stores/TeamUserStore.js"),n("./js/stores/SyncStatusStore.js")),u=n("./js/stores/CommentStore.js"),p=n("./js/stores/CurrentUserStore.js"),m=n("./js/stores/StoreManager.js"),h=n("./js/stores/AnnotationStore.js"),f=n("./js/models/services/DashboardService.js"),g=n("./js/components/comments/CommentContainer.js"),v=n("./js/components/base/Icons/UpSolidIcon.js"),y=n("./js/utils/PluralizeHelper.js"),b=n("./collaboration/services/ContextBarCommentService.js"),E=n("./js/modules/model-event.js"),C=n("./js/modules/pipelines/user-action.js"),_=n("./js/modules/services/PermissionsService.js"),S=n("./collaboration/containers/comments/permissions.js"),w=n("./js/utils/UserHelper.js"),I=n("./collaboration/utils/commentUtils.js"),T=n("./node_modules/lodash/lodash.js");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x.apply(this,arguments)}let j=(0,a.observer)(o=class extends s.Component{constructor(e){super(e),this.state={updating:[],creating:!1,hasError:!1,deleting:[],isCommentInputClose:!0,areCommentsLoading:!1,commentsLoadingError:null,permissions:{}},this.cachedComments=[],this.annotationStore=(0,m.resolveStoreInstance)(h.default),this.onResolve=this.onResolve.bind(this),this.synchronizeComments=this.synchronizeComments.bind(this),this.handleResolveComment=this.handleResolveComment.bind(this),this.handleCreate=this.handleCreate.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.handleDelete=this.handleDelete.bind(this),this.userClick=this.userClick.bind(this),this.handleCommentClose=this.handleCommentClose.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.setListRef=this.setListRef.bind(this),this.scrollToEnd=this.scrollToEnd.bind(this),this.setCommentWrapperRef=this.setCommentWrapperRef.bind(this),this.handleRetry=this.handleRetry.bind(this)}componentDidUpdate(e){this.props.isOpen&&requestIdleCallback((()=>this.scrollToEnd())),this.props.isOpen&&!e.isOpen&&T.isEmpty(this.state.permissions)&&this.getPermissions()}getAnnotation(){const e=T.filter(this.annotationStore.values,(e=>e.anchor===this.props.anchor&&e.model===this.props.model&&e.modelId===this.props.modelId&&!(e.status.orphaned||e.status.resolved)));if(1===e.length)return e[0]}async getPermissions(){try{const e=this.props.permissionService||this.defaultPermissionFetchService,t=await e({modelId:this.props.modelId,model:this.props.model});this.setState({permissions:t})}catch(e){pm.toasts.error(this.parseError(e)||"An error occurred while fetching permissions.")}}async defaultPermsissionFetchService({model:e,modelId:t}){if(!S.default[this.model])return{addComment:!1,deleteComment:!1,resolveComment:!1};try{const e=S.default[this.model],t=await(0,_.fetchPermissions)(Object.values(e),this.modelId);return{addComment:t[e.add],deleteComment:t[e.remove],resolveComment:t[e.resolve]}}catch(e){return Promise.reject(e)}}userClick(e){(0,f.openTeamUserProfile)(e,"_blank")}filterComments(e,t){return T.isEmpty(e)||T.isEmpty(t)?[]:T.filter(e,(e=>e.annotationId===t.id))}synchronizeComments(e,t=!1){const n=e[e.length-1];return e[0]===n?(this.cachedComments=e,this.cachedComments):this.props.isOpen?t?(this.cachedComments=e,this.forceUpdate(),this.cachedComments):(T.isEmpty(this.cachedComments)||n&&n.createdBy===(0,m.resolveStoreInstance)(p.default).id?this.cachedComments=e:this.cachedComments=this.cachedComments.filter((e=>(0,m.resolveStoreInstance)(u.default).find(e.id))),this.cachedComments):(this.cachedComments=e,this.cachedComments)}handleCommentClose(){this.props.onClose()}handleClickOutside(e){this.inlineCommentPopoverRef&&!this.inlineCommentPopoverRef.contains(e.target)&&this.props.onClose()}parseError(e){return e.isFriendly?e.message:""}scrollToEnd(){if(!this.listRef)return;if(this.state.hasError||this.state.updating.length>0)return;const e=this.listRef.scrollHeight-this.listRef.clientHeight;this.listRef.scrollTop=e>0?e:0}setListRef(e){this.listRef=e}setCommentWrapperRef(e){this.inlineCommentPopoverRef=e,this.forceUpdate()}onResolve(){pm.mediator.trigger("showResolveCommentThreadModal",(()=>this.handleResolveComment()))}handleResolveComment(){return b.default.resolveAnnotation({id:T.get(this.annotation,"id")}).then((e=>(this.props.onClose(),(0,C.default)((0,E.createEvent)("updateIfExists","annotation",{...T.get(e,"response.events[0].annotation")}))))).catch((e=>{pm.toasts.error("An error occurred while resolve the thread.",{title:"Unable to resolve thread"})}))}handleCreate(e,t){if(!(0,m.resolveStoreInstance)(d.default).isSocketConnected)return void pm.toasts.error("You need to be online to comment.");this.setState({creating:!0});const n={model:this.props.model,modelId:this.props.modelId,body:e,tags:t,version:"1.0.0",annotationId:T.get(this,"annotation.id"),anchor:this.props.anchor};return b.default.createComment(n).then((()=>{this.setState({creating:!1,hasError:!1});let e=setTimeout((()=>{this.scrollToEnd(),clearTimeout(e)}),300)})).catch((e=>{pm.toasts.error(this.parseError(e)||"An error occurred while creating a comment.",{title:"Unable to save comment"}),this.setState({creating:!1,hasError:!0})}))}handleUpdate({id:e,body:t,tags:n}){if((0,m.resolveStoreInstance)(d.default).isSocketConnected)return this.setState((t=>({updating:T.union(t.updating,[e])}))),b.default.updateComment({id:e,body:t,tags:n}).then((()=>{this.setState((t=>({updating:T.remove(t.updating,e),hasError:!1})))})).catch((t=>{pm.toasts.error(this.parseError(t)||"An error occurred while updating the comment.",{title:"Unable to save comment"}),this.setState((t=>({updating:T.remove(t.updating,e),hasError:!0})))}));pm.toasts.error("You need to be online to update a comment.")}handleDelete(e){if((0,m.resolveStoreInstance)(d.default).isSocketConnected)return this.setState((t=>({deleting:T.union(t.deleting,[e])}))),b.default.deleteComment({id:e}).then((()=>{this.setState((t=>({deleting:T.remove(t.deleting,e)})))})).catch((t=>{pm.toasts.error(this.parseError(t)||"An error occurred while deleting the comment."),this.setState((t=>({deleting:T.remove(t.deleting,e)})))}));pm.toasts.error("You need to be online to delete a comment.")}handleRetry(){this.setState({areCommentsLoading:!0,commentsLoadingError:!1}),b.default.getComments({model:this.props.model,anchor:this.props.anchor,modelId:this.props.modelId}).then((e=>(this.setState({areCommentsLoading:!1}),e))).catch((()=>{this.setState({areCommentsLoading:!1,commentsLoadingError:!0})}))}getComments(){return T.filter((0,m.resolveStoreInstance)(u.default).values,(e=>e.anchor===this.props.anchor&&e.model===this.props.model&&e.modelId===this.props.modelId))}getTeamUsers(){const e=(0,I.getUsersToTag)();return T.reduce(e,((e,t)=>(e[t.id]={name:t.name,id:t.id,username:t.username,email:t.email,profilePicUrl:t.profilePicUrl,roles:t.roles},e)),{})}render(){const e=this.getAnnotation(),t=this.filterComments(this.getComments(),e),n=T.sortBy(t,"createdAt"),o=T.isEmpty(n)?n:this.synchronizeComments(n),r=n.length-o.length,i=(0,m.resolveStoreInstance)(p.default)||{},a=this.getTeamUsers(),u=Object.values(a),h=!(0,m.resolveStoreInstance)(d.default).isSocketConnected,f=(0,w.isUserAdmin)(i);return this.annotation=e,s.createElement(s.Fragment,null,s.createElement(l.default,{className:"inline-comment comment",placement:this.props.placement||"right-top",triggerRef:this.props.target,appendTo:this.props.appendPopoverTo,isOpen:this.props.isOpen},s.createElement("div",{className:"inline-comment-wrapper",ref:this.setCommentWrapperRef},this.props.isOpen&&s.createElement("div",null,e&&s.createElement("div",{className:"inline-comment__header"},s.createElement("div",{className:"inline-comment__header-comment"},"Comments"," ",s.createElement("span",{className:"comment-badge"},o.length)),r>0&&s.createElement("div",{className:"inline-comment__update-badge",onClick:()=>this.synchronizeComments(n,!0)},s.createElement(v.default,{style:"primary"}),s.createElement("span",null,r," new"," ",y.default.pluralize({count:r,singular:"comment",plural:"comments"}))),s.createElement("div",{className:"inline-comment__header-resolve"},s.createElement(c.default,{type:"muted-plain",size:"small",tooltip:!this.state.permissions.resolveComment&&"You don't have permission to resolve.",isDisabled:!this.state.permissions.resolveComment,onClick:this.onResolve,text:"Resolve"}))),s.createElement(g.Comments,x({},T.pick(this.state,["updating","creating","deleting"]),{inlineComment:!0,data:o,isAdmin:f,isOffline:h,loading:this.state.areCommentsLoading,loadError:this.state.commentsLoadingError,teamUsers:u,teamUsersMap:a,user:i,setListRef:this.setListRef,commentRef:this.inlineCommentPopoverRef,onClickOutside:this.handleClickOutside,onClose:this.handleCommentClose,addCommentPermission:this.state.permissions.addComment,deleteCommentPermission:this.state.permissions.deleteComment,onCommentCreate:this.handleCreate,onCommentDelete:this.handleDelete,onCommentUpdate:this.handleUpdate,onUserClick:this.userClick,hasError:this.state.hasError,onRetry:this.handleRetry,showCopyCommentLink:!0}))))))}})||o;j.propTypes={isOpen:i().bool.isRequired,onClose:i().func.isRequired,model:i().string.isRequired,modelId:i().string.isRequired,anchor:i().string.isRequired,target:i().any.isRequired,placement:i().string,permissionService:i().func,appendPopoverTo:i().oneOfType([i().object,"parent"])}},"./collaboration/containers/comments/hooks/useComments.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d},useAnnotationIDs:function(){return l},useCommentsOfAnnotations:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("./js/stores/CommentStore.js"),i=n("./js/stores/StoreManager.js"),a=n("./js/stores/AnnotationStore.js");function l(e={}){const[t,n]=(0,o.useState)();return(0,o.useEffect)((()=>(0,s.reaction)((()=>(0,s.computed)((()=>(0,i.resolveStoreInstance)(a.default).values.filter((t=>{return!(n=t,o=e,o.model&&n.model!==o.model||o.modelId&&n.modelId!==o.modelId||o.anchorRegExp&&!o.anchorRegExp.test(n.anchor)||"open"===o.status&&n.status.resolved||"resolved"===o.status&&!n.status.resolved||t.status.orphaned);var n,o})).map((e=>e.id))),{equals:s.comparer.structural}).get()),(e=>n(e||[])),{fireImmediately:!0})),[]),t}function c(e){const[t,n]=(0,o.useState)([]);return(0,o.useEffect)((()=>(0,s.reaction)((()=>(0,s.computed)((()=>{const t=new Set(e);return(0,i.resolveStoreInstance)(r.default).values.filter((e=>t.has(e.annotationId)))}),{equals:s.comparer.structural}).get()),(e=>n(e||[])),{fireImmediately:!0})),[e]),t}function d(e){return c(l(e))}},"./js/containers/scratchpad/ContextBarScratchPadSignInPromptContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("./appsdk/contextbar/ContextBarViewHeader.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./js/components/base/Text.js"),a=n("./js/components/base/Buttons.js"),l=n("./js/services/ScratchpadService.js");class c extends o.Component{handleWorkspaceSwitch(){l.default.switchToWorkspace()}render(){return o.createElement("div",null,o.createElement(s.ContextBarViewHeader,{title:this.props.title,onClose:this.props.onClose}),o.createElement("div",{className:"contextbar-signin-prompt-state"},o.createElement("div",{className:"contextbar-signin-prompt-state__icon-container"},o.createElement(r.default,{className:"contextbar-signin-prompt-state__icon",size:"large",color:"content-color-tertiary",name:this.props.icon})),o.createElement("div",{className:"contextbar-signin-prompt-state__title"},o.createElement("h4",null,"Switch to a workspace to use this feature")),o.createElement("div",{className:"contextbar-signin-prompt-state__body"},o.createElement(i.default,{type:"body-medium",value:"This is an online feature and is only available in workspaces."})),o.createElement(a.Button,{className:"contextbar-signin-prompt-state__switch-action",size:"large",onClick:this.handleWorkspaceSwitch,type:"primary"},"Switch to Workspaces")))}}},"./js/modules/services/share-entities/ShareEntitiesService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{canEntityBeShared:function(){return _},canManageRolesOnEntity:function(){return S},createTeamAndShareCollection:function(){return b},createTeamAndShareEnvironment:function(){return E},fetchEntityMeta:function(){return y},isEntityShared:function(){return C}});n("./js/modules/pipelines/user-action.js"),n("./js/modules/model-event.js");var o=n("./js/modules/controllers/UserController.js"),s=n("./js/modules/services/UserInvitationService.js"),r=n("./js/modules/services/SyncRemoteFetcherService.js"),i=n("./js/modules/services/PermissionRemoteFetchService.js"),a=n("./js/modules/services/RemoteSyncRequestService.js"),l=n("./monitors/services/MonitorService.js"),c=n("./mocks/services/FetchMockService.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/ActiveWorkspaceStore.js"),p=n("./js/constants/WorkspaceVisibilityConstants.js"),m=n("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),h=n("./runtime-repl/extensible-collection/types/ExtensibleCollectionTypes.ts"),f=n("./node_modules/lodash/lodash.js");async function g(e){return new Promise(((t,n)=>{(0,s.shareEntitiesToStartTeam)(e,((e,o)=>{e?n(e):t(o)}))}))}async function v(e,t){let n=`/${e}/${t}?meta=true`;return a.default.request(n,{method:"get"}).then((({body:e})=>e.data)).catch((e=>Promise.reject(e)))}async function y(e,t){switch(e){case"environment":case"collection":return v(e,t);case h.EXTENSIBLE_COLLECTION:const n=await m.default.get(t);return{id:n.id,name:n.title};case"api":return v("apis",t);case"monitor":return f.get(await l.default.getMonitorConfiguration({monitorId:t}),"body.data",{});case"mock":return(0,c.fetchMock)(t)}}async function b(e,t){return g({dependencies:{collections:{$diff:!0,$add:[e]}},invitations:t})}async function E(e,t){return g({dependencies:{environments:{$diff:!0,$add:[e]}},invitations:t})}async function C(e,t){if(!e||!t)return Promise.reject(new Error(`ShareEntitiesService~isEntityShared: Unsupported entity of type ${e} provided with ID: ${t}`));switch(e){case"collection":return async function(e){let t=await o.default.get(),n=f.get(t,"organizations[0].id");return!!n&&r.default.remoteFetch("share","collection",{model:"collection",id:e}).then((e=>f.get(e,"data.team")===n))}(t);case h.EXTENSIBLE_COLLECTION:return async function(e){return(0,d.resolveStoreInstance)(u.default).visibilityStatus!==p.VISIBILITY.onlyMe}();case"api":return async function(e){let t=await o.default.get(),n=f.get(t,"organizations[0].id");return!!n&&r.default.remoteFetch("share","api",{model:"apis",id:e}).then((e=>f.get(e,"data.team")===n))}(t);case"monitor":return async function(e){let t=await o.default.get(),n=f.get(t,"organizations[0].id");if(!n)return!1;const s=(0,d.resolveStoreInstance)(u.default),r=await l.default.getMonitorConfiguration({monitorId:e}),i=f.get(r,"body.data",{});return s.visibilityStatus!==p.VISIBILITY.onlyMe&&i.team===Number(n)}(t);case"environment":return async function(e){let t=await o.default.get(),n=f.get(t,"organizations[0].id");return!!n&&r.default.remoteFetch("share","environment",{model:"environment",id:e}).then((e=>f.get(e,"data.team")===n))}(t);case"mock":return async function(e){let t=await o.default.get(),n=f.get(t,"organizations[0].id");return!!n&&a.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"get",body:{},path:`/mocks/${e}/team`}}).then((({body:e})=>f.get(e,"team")===n)).catch((e=>Promise.reject(e.error||{})))}(t);default:return Promise.reject(new Error(`ShareEntitiesService~isEntityShared: Unsupported entity of type ${e} provided with ID: ${t}`))}}async function _(e,t){if(!e||!t)return Promise.reject(new Error(`ShareEntitiesService~canEntityBeShared: Unsupported entity of type ${e} provided with ID: ${t}`));switch(e){case"collection":return f.get(await(0,i.fetchCollectionShare)(t),`${t}.allowed`,!1);case"api":return f.get(await(0,i.fetchAPIShare)(t),`${t}.allowed`,!1);case"environment":return f.get(await(0,i.fetchEnvironmentShare)(t),`${t}.allowed`,!1);case"mock":return f.get(await(0,i.fetchMockMove)(t),`${t}.allowed`,!1);default:return Promise.reject(new Error(`ShareEntitiesService~canEntityBeShared: Unsupported entity of type ${e} provided with ID: ${t}`))}}async function S(e,t){if(!e||!t)return Promise.reject(new Error(`ShareEntitiesService~canManageRolesOnEntity: Unsupported entity of type ${e} provided with ID: ${t}`));switch(e){case"collection":return f.get(await(0,i.fetchCollectionManageRole)(t),`${t}.allowed`,!1);case h.EXTENSIBLE_COLLECTION:return f.get(await(0,i.fetchExtensibleCollectionManageRole)(t),`${t}.allowed`,!1);case"api":return f.get(await(0,i.fetchAPIManageRole)(t),`${t}.allowed`,!1);case"monitor":return f.get(await(0,i.fetchMonitorManageRole)(t),`${t}.allowed`,!1);case"environment":return f.get(await(0,i.fetchEnvironmentManageRole)(t),`${t}.allowed`,!1);case"mock":return f.get(await(0,i.fetchMockManageRole)(t),`${t}.allowed`,!1);default:return Promise.reject(new Error(`ShareEntitiesService~canManageRolesOnEntity: Unsupported entity of type ${e} provided with ID: ${t}`))}}},"./mocks/services/FetchMockService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchMock:function(){return s}});var o=n("./js/modules/services/RemoteSyncRequestService.js");function s(e,t={}){let n=`/mocks/${e}?returnObject=true`;return t&&t.populate&&(n+="&populate=true"),o.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"get",body:{},path:n}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}},"./version-control/Watch/components/WatchButton/WatchButton.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),r=n.n(s),i=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/CounterButton.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-view-fill.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-view-stroke.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("./version-control/Watch/components/WatchersList.js"),f=n("./version-control/Watch/components/WatchPreferences.js"),g=n("./version-control/common/ControlledComboButton/index.js"),v=n("./version-control/common/OutsideClick/index.js"),y=n("./version-control/utils/number.ts");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}const E=m.createGlobalStyle`
  .watch-button__watch-preferences-popover {
    background-color: ${({theme:e})=>e["background-color-primary"]};
    width: 320px;
    border: none;
    padding: 0;
  }

  .watch-button__watch-preferences-popover .tooltip-wrapper {
    background-color: ${({theme:e})=>e["background-color-primary"]};
  }

  .watch-button__watch-preferences-popover.bs-tooltip-bottom {
    padding-bottom: 0;
  }

  .watch-button__watchers-popover {
    background-color: ${({theme:e})=>e["background-color-primary"]};
    width: 256px;
    border: none;
    padding: 0;
  }

  .watch-button__watchers-popover .tooltip-wrapper {
    background-color: ${({theme:e})=>e["background-color-primary"]};
    padding-bottom: 0;
  }

  .watch-button-wrapper {
    button {
      color: ${({theme:e})=>e["content-color-secondary"]};
      background-color: unset;
      min-width: unset;

      &:hover {
        color: ${({theme:e})=>e["content-color-primary"]};
        background-color: ${({theme:e})=>e["highlight-background-color-primary"]};
      }
    }

    &:hover {
      .controlled-combo-button__separator {
        border-left-color: transparent;
      }
    }
  }
`,C=m.default.div`
  display: flex;

  .model-watch-button {
    display: inline-flex;
    justify-content: space-between;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    border-right: ${({theme:e})=>e["border-width-default"]}
      ${({theme:e})=>e["border-style-solid"]}
      ${({theme:e})=>e["border-color-strong"]};
    font-size: ${({theme:e})=>e["text-size-m"]};
    font-weight: ${({theme:e})=>e["text-weight-regular"]};
    color: ${({theme:e})=>e["content-color-primary"]};
    /**
     * Hacky fix to make button look like aether button.Replace with aether button
     * when it supports icon on the right and left together.
     */
    background-color: ${({theme:e})=>e["button-secondary-background-color"]};
  }

  .model-watch-button.is-active {
    background-color: ${({theme:e})=>e["button-secondary-background-color"]};
  }

  .watch-label {
    margin-left: ${({theme:e})=>e["spacing-s"]};
    font-size: ${({theme:e})=>e["text-size-m"]};
    font-weight: ${({theme:e})=>e["text-weight-regular"]};
  }

  .count-btn {
    min-width: ${({theme:e})=>e["size-m"]};
    padding: ${({theme:e})=>e["spacing-s"]};
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    font-size: ${({theme:e})=>e["text-size-m"]};
    font-weight: ${({theme:e})=>e["text-weight-regular"]};
    color: ${({theme:e})=>e["content-color-primary"]};
    /**
     * Hacky fix to make button look like aether button.Replace with aether button
     * when it supports icon on the right and left together.
     */
  }

  .count-btn.is-active {
    color: ${({theme:e})=>e["content-color-primary"]};
  }

  .caret {
    margin-left: ${({theme:e})=>e["spacing-s"]};
  }

  && svg > path[fill] {
    fill: ${({theme:e})=>e["content-color-secondary"]};
  }

  .is-disabled.is-disabled:hover {
    opacity: 0.4;
    color: ${({theme:e})=>e["content-color-primary"]};
  }
`;function _(e){const{className:t,style:n,model:s,isWatching:r,isFetchingWatchers:m,isFetchingMoreWatchers:_,isFetchingPreferences:S,disableCount:w,restrictPreferencesChange:I,isWatchToggleDisabled:T,isPreferencesEnabled:x,watchersCount:j,privateWatchersCount:k,watchersList:R,lastWatcherElementRef:M,preferences:P,watchPreferencesPopoverDescription:D,countBtnTooltip:A,watchersListFetchErr:L,watchToggleTooltip:O,currentUserId:N,hideLabel:q,onWatchersListOpen:B,onOpenPreferences:F,onClickWatchStateChangeTrigger:$,onPreferenceChange:U,reloadWatchers:W,resetPageId:G,renderWatchPreferencesTitle:V,toggleWatch:z,isProcessingWatchToggle:H,isFetchingModelWatchStatus:Y}=e,[K,X]=o.useState(!1),[Q,J]=o.useState(!1),[Z,ee]=o.useState(!1),[te,ne]=o.useState("watch-button__watchers-popover"),oe=o.useRef();(0,o.useEffect)((()=>{X(Z),Z?(F(),$()):Q&&B()}),[Z,Q]),(0,v.useOutsideClick)(oe,(()=>{J(!1),G&&G()}));const se=o.createElement(o.Fragment,null,r?o.createElement(d.default,{size:"small",color:"content-color-secondary"}):o.createElement(u.default,{color:"content-color-secondary",size:"small"}),!e.hideLabel&&o.createElement("div",{className:"watch-label"},r?"Watching":"Watch"),(K&&!I||r)&&o.createElement(p.default,{name:"icon-direction-down",className:"caret",color:"content-color-secondary"}));return o.createElement(o.Fragment,null,o.createElement(C,{className:t,style:n},x?(()=>{const e={primaryButtonText:se,primaryButtonIcon:r?"icon-action-view-fill":"icon-action-view-stroke",primaryButtonTextHide:q,onPrimaryButtonClick:Z?null:()=>{ee(!0),ne("watch-button__watch-preferences-popover")},isPrimaryButtonLoading:H,isPrimaryButtonDisabled:T,primaryButtonTooltip:T&&O,useCustomButton:!0,primaryButtonMinWidth:"88px",buttonIconSize:"small"},t={menuButtonText:j||0,isMenuButtonDisabled:w,menuButtonTooltip:w&&A,onMenuButtonClick:Q?null:()=>{J(!0),ne("watch-button__watchers-popover")}},n={isMenuOpen:Q||Z,renderMenuContent:()=>o.createElement(o.Fragment,null,Q&&o.createElement(h.default,{list:R,isLoading:m,isLoadingMore:_,count:j,error:L,reload:W,currentUserId:N,model:s}),!I&&Z&&o.createElement(f.default,{isLoading:S,preferences:P,onPreferenceChange:U,description:D,renderTitle:V})),onMenuClose:()=>{Q&&J(!1),Z&&ee(!1),G&&G()}};return o.createElement(g.default,b({},e,t,n,{className:"watch-button-wrapper",popoverClassName:te}))})():(()=>{const e={primaryButtonIcon:r?"icon-action-view-fill":"icon-action-view-stroke",primaryButtonTextHide:q,onPrimaryButtonClick:()=>z(!r),isPrimaryButtonLoading:H||Y,isPrimaryButtonDisabled:T,primaryButtonTooltip:T&&o.createElement(i.default,{placement:"bottom",content:O,openDelay:2e3}),primaryButtonMinWidth:"88px",buttonIconSize:"small"};q||(e.primaryButtonText=r?"Unwatch":"Watch"),!T&&q&&(e.primaryButtonTooltip=r?"Unwatch":"Watch");return o.createElement(a.default,{type:"primary",text:e.primaryButtonText,onClick:e=>{e.preventDefault(),e.stopPropagation(),z(!r)},count:(0,y.default)(j)||0,isDisabled:T,isLoading:e.isPrimaryButtonLoading,tooltip:e.primaryButtonTooltip,icon:r?"icon-action-view-fill":"icon-action-view-stroke",secondaryButton:o.createElement(l.default,{isDisabled:w,tooltip:A,ref:oe,onClick:e=>{e.preventDefault(),e.stopPropagation(),Q?(J(!1),G&&G()):J(!0)}})},o.createElement(c.default,{isOpen:Q,maxWidth:300,placement:"top",padding:"spacing-m",triggerRef:oe},o.createElement(h.default,{list:R,lastWatcherElementRef:M,isLoading:m,isLoadingMore:_,count:j,privateWatchersCount:k,error:L,reload:W,currentUserId:N,model:s})))})()),o.createElement(E,null))}_.propTypes={style:r().object,className:r().string,isWatching:r().bool.isRequired,watchersCount:r().number,privateWatchersCount:r().number,onWatchersListOpen:r().func.isRequired,watchersList:r().arrayOf(r().shape({name:r().string.isRequired,profileUrl:r().string.isRequired,profilePicUrl:r().string.isRequired,userId:r().string.isRequired})),isFetchingWatchers:r().bool,isFetchingMoreWatchers:r().bool,onOpenPreferences:r().func,onClickWatchStateChangeTrigger:r().func.isRequired,isFetchingPreferences:r().bool,preferences:r().object,onPreferencesChange:r().func,restrictPreferencesChange:r().bool,watchersListFetchErr:r().oneOfType([r().bool,r().object]),reloadWatchers:r().func,disableCount:r().bool,countBtnTooltip:r().string,isWatchToggleDisabled:r().bool,watchToggleTooltip:r().string,renderWatchPreferencesTitle:r().func,currentUserId:r().string,isPreferencesEnabled:r().bool,isProcessingWatchToggle:r().bool,isFetchingModelWatchStatus:r().bool,toggleWatch:r().func,watchPreferencesPopoverDescription:r().string},t.default=_},"./version-control/Watch/components/WatchContainer/Watch.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var o,s,r,i,a=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("../../node_modules/mobx/lib/mobx.module.js"),d=n("./node_modules/prop-types/index.js"),u=n.n(d),p=n("./js/stores/CurrentUserInfoStore.js"),m=n("./js/stores/StoreManager.js"),h=n("./js/services/UIEventService.js"),f=n("./growth/foundation/public/features/Checklist/constants/UIEventConstants.js"),g=n("./version-control/Watch/WatchService.js"),v=n("./version-control/Watch/components/WatchButton/WatchButton.js"),y=n("./version-control/Watch/config.js"),b=n("./js/modules/services/AnalyticsService.js"),E=n("./node_modules/lodash/lodash.js");function C(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let S=(0,l.observer)((s=class extends a.Component{constructor(e){super(e),C(this,"watcherPreferences",r,this),this.setComponentOnline=E.debounce((()=>{this.setOffline(!1)}),2e3,{leading:!0,trailing:!1}),this.setComponentOffline=E.debounce((()=>{this.setOffline(!0)}),2e3,{leading:!0,trailing:!1}),this.fetchWatchConfig=()=>{(0,g.getWatchConfig)(this.props.model,this.props.modelId,this.props.subEntityType).then((e=>{this.setState({isPreferencesEnabled:e.enabled})})).catch((e=>{this.setState({isPreferencesEnabled:!1})}))},this.fetchPermissions=()=>{this.setState({isFetchingPermissions:!0,permissionFetchErr:null}),(0,g.checkWatchAccess)(this.props.model,this.props.modelId).then((({isPublic:e})=>{this.setState({isPublicModel:e,isFetchingPermissions:!1})})).catch((e=>{this.setState({isFetchingPermissions:!1,permissionFetchErr:e.error})}))},this.toggleWatch=(e=!this.state.isWatchingModel)=>("collection"===this.props.model&&e&&h.default.publish(f.COLLECTION_WATCH_TOGGLE_EVENT),new Promise(((t,n)=>{const o=y.default[this.props.model].signInOptions,{isPublicModel:s}=this.state,r=(0,m.resolveStoreInstance)(p.default);r.isLoggedIn?e&&s&&!r.hasPublicProfile?(this.setState({restrictPreferencesChange:!0}),pm.mediator.trigger("showUpdateUserProfileModalV2",{onComplete:()=>{this.setWatchStatus(!0).then((()=>{this.setState({restrictPreferencesChange:!1}),t()}))},onCancel:()=>{this.setState({restrictPreferencesChange:!1}),n()}})):this.setWatchStatus(e).then((()=>{t()})):(this.setState({restrictPreferencesChange:!0}),this.props.redirectLogin?this.props.redirectLogin():pm.mediator.trigger("showSignInModal",{type:o.type,origin:o.origin,continueUrl:o.getContinueURL()}),n())}))),this.fetchWatchingState=()=>{const{model:e,modelId:t}=this.props;this.setState({isFetchingModelWatchStatus:!0,modelWatchStatusFetchError:null}),(0,g.isWatchingModel)(e,t).then((e=>{this.setState({isWatchingModel:e,isFetchingModelWatchStatus:!1})})).catch((e=>{this.setState({isFetchingModelWatchStatus:!1,modelWatchStatusFetchError:e.error})}))},this.fetchWatchersCount=()=>{const{model:e,modelId:t}=this.props;this.setState({isFetchingWatchersCount:!0,watchersCountFetchingErr:void 0}),(0,g.getModelWatchersCount)(e,t).then((e=>{this.setState({watchersCount:e,isFetchingWatchersCount:!1})})).catch((e=>{this.setState({isFetchingWatchersCount:!1,watchersCountFetchingErr:e.error})}))},this.onOpenWatchersList=()=>{this.fetchWatchersList()},this.fetchWatchersList=()=>{const{model:e,modelId:t}=this.props,{pageId:n}=this.state;0!==this.state.watchersCount?(this.setState({isFetchingWatchers:!0}),(0,g.getModelWatchersPaginated)(e,t,n,20).then((({list:e,privateWatchersCount:t,nextPageId:n})=>{this.setState({watchersList:e,privateWatchersCount:t,isFetchingWatchers:!1,pageId:n})})).catch((e=>{this.setState({isFetchingWatchers:!1,watchersListFetchErr:e})}))):this.setState({watchersList:[],isFetchingWatchers:!1})},this.loadMoreWatchers=()=>{const{model:e,modelId:t}=this.props,{pageId:n}=this.state;n&&(this.setState({isFetchingMoreWatchers:!0}),(0,g.getModelWatchersPaginated)(e,t,n).then((({list:e,nextPageId:t})=>{this.setState({watchersList:E.concat(this.state.watchersList,e),pageId:t,isFetchingMoreWatchers:!1})})).catch((e=>{this.setState({isFetchingMoreWatchers:!1,watchersListFetchErr:e})})))},this.lastWatcherElementRef=e=>{this.state.isFetchingMoreWatchers||(this.observer.current&&this.observer.current.disconnect(),this.observer.current=new IntersectionObserver((e=>{e[0].isIntersecting&&this.state.pageId&&this.loadMoreWatchers()})),e&&this.observer.current.observe(e))},this.resetPageId=()=>{this.setState({pageId:""})},this.fetchPreferences=()=>{const{model:e,modelId:t}=this.props;this.state.isWatchingModel&&(this.setState({isFetchingPreferences:!0}),(0,g.getWatcherPreferences)(e,t,this.props.subEntityType).then((({preferences:e,description:t})=>{this.setWatcherPreference(e),this.preferencesDescription=t,this.setState({isFetchingPreferences:!1})})).catch((e=>{this.setState({isFetchingPreferences:!1,preferenceFetchErr:e})})))},this.onWatchStateChangeTrigger=async()=>{this.setState({restrictPreferencesChange:!1});try{if(this.state.isWatchingModel)return;this.setState({isFetchingPreferences:!0}),await this.toggleWatch(!0),this.fetchPreferences()}catch(e){this.setState({isFetchingPreferences:!1,restrictPreferencesChange:!0})}},this.onPreferenceChange=e=>{e.some((e=>e.enabled))?!this.state.isWatchingModel&&this.toggleWatch(!0):this.state.isWatchingModel&&this.toggleWatch(!1),this.updatePreferences(e)},this.updatePreferences=e=>{const t=e.reduce(((e,t)=>(e[t.key]=t.enabled,e)),{});this.setPreferences(t)},this.setPreferences=e=>{const{model:t,modelId:n}=this.props;(0,g.updateWatcherPreferences)(t,n,e)},C(this,"isOffline",i,this),this.observer=a.createRef(),this.state={isFetchingModelWatchStatus:!1,isWatchingModel:!1,isProcessingWatchToggle:!1,isFetchingWatchersCount:!1,isFetchingWatchers:!0,isFetchingMoreWatchers:!1,isFetchingPreferences:!0,pageId:"",isPublicModel:!1,isFetchingPermissions:!0,isPreferencesEnabled:!1},this.preferencesDescription=""}componentDidMount(){this.fetchInitialData(),this.addOnlineListeners()}fetchInitialData(){(0,m.resolveStoreInstance)(p.default).isLoggedIn?(this.fetchPermissions(),this.fetchWatchingState(),this.fetchWatchConfig()):this.setState({isPublicModel:!0,isWatchingModel:!1,isFetchingPermissions:!1}),this.fetchWatchersCount()}addOnlineListeners(){window.addEventListener("online",this.setComponentOnline),window.addEventListener("offline",this.setComponentOffline)}componentWillUnmount(){window.removeEventListener("online",this.setComponentOnline),window.removeEventListener("offline",this.setComponentOffline)}handleAnalytics(e,t,n){b.default.addEventV2({category:t,entityId:this.props.modelId,entityType:this.props.model,action:e,label:n,value:1})}setWatchStatus(e){const{modelId:t,model:n}=this.props,o=e?g.watchModel:g.unWatchModel;return this.setState({isProcessingWatchToggle:!0}),o(n,t).then((()=>{this.setState((e=>({isProcessingWatchToggle:!1,isWatchingModel:!e.isWatchingModel})));const t=e?"watch":"unwatch";this.handleAnalytics(t,E.get(this.props,"analyticsOptions.category"),E.get(this.props,"analyticsOptions.label")),this.fetchWatchersCount()})).catch((()=>{this.setState({isProcessingWatchToggle:!1}),pm.toasts.error("Just a faulty wire. Try performing the action again.",{noIcon:!0,title:"Something went wrong. Try again."})}))}setWatcherPreference(e){this.watcherPreferences=e}get preferences(){if(this.watcherPreferences)return Object.entries((0,c.toJS)(this.watcherPreferences)).map((([e,t])=>({...t,key:e})))}setOffline(e){this.isOffline=e}get countBtnTooltip(){const{watchersCountFetchingErr:e,permissionFetchErr:t,watchersCount:n}=this.state;return this.isOffline?"You can take this action once you're back online.":t?t.message:e?e.message:""}get watchToggleButtonTooltip(){const{isProcessingWatchToggle:e,modelWatchStatusFetchError:t,permissionFetchErr:n}=this.state;return this.isOffline?"You can take this action once you're back online.":e?"Please wait while your request is being processed.":n?n.message:t?t.message:void 0}get isWatchToggleDisabled(){const{isProcessingWatchToggle:e,isFetchingModelWatchStatus:t,modelWatchStatusFetchError:n,isFetchingPermissions:o,permissionFetchErr:s}=this.state;return e||t||n||this.isOffline||o||s}get isWatchersCountButtonDisabled(){const{watchersCountFetchingErr:e,isFetchingPermissions:t,permissionFetchErr:n}=this.state;return e||n||t||this.isOffline}render(){const{className:e}=this.props,t=(0,m.resolveStoreInstance)(p.default);return a.createElement(v.default,{isWatching:this.state.isWatchingModel,className:e,watchersCount:this.state.watchersCount,privateWatchersCount:this.state.privateWatchersCount,onWatchersListOpen:this.onOpenWatchersList,isFetchingWatchers:this.state.isFetchingWatchers,isFetchingMoreWatchers:this.state.isFetchingMoreWatchers,watchersList:this.state.watchersList,lastWatcherElementRef:this.lastWatcherElementRef,onOpenPreferences:this.fetchPreferences,onClickWatchStateChangeTrigger:this.onWatchStateChangeTrigger,isFetchingPreferences:this.state.isFetchingPreferences,preferences:this.preferences,isPreferencesEnabled:this.state.isPreferencesEnabled,toggleWatch:this.toggleWatch,hideLabel:this.props.hideLabel,isProcessingWatchToggle:this.state.isProcessingWatchToggle,onPreferenceChange:this.onPreferenceChange,watchPreferencesPopoverDescription:this.preferencesDescription,restrictPreferencesChange:this.state.restrictPreferencesChange,watchersListFetchErr:this.state.watchersListFetchErr,reloadWatchers:this.fetchWatchersList,resetPageId:this.resetPageId,disableCount:this.isWatchersCountButtonDisabled,countBtnTooltip:this.countBtnTooltip,isWatchToggleDisabled:this.isWatchToggleDisabled,watchToggleTooltip:this.watchToggleButtonTooltip,renderWatchPreferencesTitle:y.default[this.props.model].renderWatchPreferencesTitle,currentUserId:t.id,model:this.props.model,isFetchingModelWatchStatus:this.state.isFetchingModelWatchStatus})}},r=_(s.prototype,"watcherPreferences",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_(s.prototype,"setWatcherPreference",[c.action],Object.getOwnPropertyDescriptor(s.prototype,"setWatcherPreference"),s.prototype),_(s.prototype,"preferences",[c.computed],Object.getOwnPropertyDescriptor(s.prototype,"preferences"),s.prototype),i=_(s.prototype,"isOffline",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!navigator.onLine}}),_(s.prototype,"setOffline",[c.action],Object.getOwnPropertyDescriptor(s.prototype,"setOffline"),s.prototype),o=s))||o;S.propTypes={modelId:u().string.isRequired,model:u().oneOf(["collection","pullRequest","api"]).isRequired,className:u().string,hideLabel:u().bool,analyticsOptions:u().object}},"./version-control/Watch/components/WatchPreferences.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),r=n.n(s),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("./js/components/base/LoadingIndicator.js"),d=n("./js/components/base/Inputs.js");const u=i.default.div`
  display: flex;
  justify-content: center;
  padding: ${({theme:e})=>e["spacing-l"]};

  .entity {
    margin-top: ${({theme:e})=>e["spacing-l"]};
  }

  .entity-top-row {
    display: flex;
    align-items: center;
  }

  .entity-description {
    margin-left: ${({theme:e})=>e["spacing-xl"]};
  }

  .entity-title {
    margin-left: ${({theme:e})=>e["spacing-s"]};
    display: inline-flex;
  }

  .preference-checkbox {
    height: 14px;
    width: 14px;
    min-width: unset;
  }

  .preference-checkbox svg {
    width: 14px;
  }

  .preference-checkbox.is-selected {
    background-color: ${({theme:e})=>e["base-color-brand"]};
    border: none;
    height: 16px;
    width: 16px;
  }

  .preference-checkbox.is-selected svg {
    width: 16px;
  }
`;function p(e){const{isLoading:t,preferences:n,onPreferenceChange:s,description:r,renderTitle:i}=e,[p,m]=o.useState(n);o.useEffect((()=>{m(n)}),[n]);return o.createElement(u,null,t&&o.createElement(c.default,null),!t&&p&&o.createElement("div",null,o.createElement(a.default,{text:i?i(p):"",type:"h4",hasBottomSpacing:!0}),o.createElement(l.default,{text:r,type:"body-medium",color:"content-color-secondary"}),p.map((e=>o.createElement("div",{className:"entity",key:e.key},o.createElement("div",{className:"entity-top-row"},o.createElement(d.Checkbox,{checked:e.enabled,size:"md",className:"preference-checkbox",onChange:()=>(e=>{const t=p.findIndex((t=>t.key===e));t>-1&&(p[t]={...p[t],enabled:!p[t].enabled},m(p.slice()),s(p))})(e.key)}),o.createElement("div",{className:"entity-title"},o.createElement(l.default,{text:e.title,hasBottomSpacing:!0,color:"content-color-primary"}))),o.createElement("div",{className:"entity-description"},o.createElement(l.default,{text:e.description,color:"content-color-secondary",type:"body-small"})))))))}p.propTypes={isLoading:r().bool,preferences:r().arrayOf(r().shape({enabled:r().bool.isRequired,title:r().string.isRequired,description:r().string.isRequired,key:r().string.isRequired})),onPreferenceChange:r().func.isRequired,renderTitle:r().func,description:r().string}},"./version-control/Watch/components/WatchersList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),r=n.n(s),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-user-stroke.js"),g=n("./js/utils/PluralizeHelper.js"),v=n("./version-control/Watch/config.js"),y=n("./appsdk/components/link/Link.js"),b=n("./node_modules/lodash/lodash.js");const E=i.default.div`
  cursor: pointer;
  padding: ${({theme:e})=>e["spacing-s"]}
    ${({theme:e})=>e["spacing-xs"]};

  .watcher-item {
    width: 100%;
    .link:hover {
      text-decoration: underline;
    }
  }

  &:hover {
    .link {
      color: ${({theme:e})=>e["content-color-info"]};
    }
  }
`,C=i.createGlobalStyle`
  .user-list-item__tooltip-body.user-list-item__tooltip-body {
    z-index: 10000;
    margin-left: ${({theme:e})=>e["spacing-s"]};
  }
`,_=i.default.div`
  display: flex;
  justify-content: center;
  box-sizing: border-box;

  .watcher-list-container {
    max-height: 50vh;
    overflow-y: auto;
    overflow-x: hidden;

    .watchers-list {
      flex: 1;
      overflow-y: auto;

      .anonymous-watchers {
        cursor: pointer;
        .anonymous-watcher-icon {
          width: ${({theme:e})=>e["size-s"]};
          height: ${({theme:e})=>e["size-s"]};
          border-radius: ${({theme:e})=>e["border-radius-max"]};
          background-color: ${({theme:e})=>e["background-color-secondary"]};
        }
      }
    }
  }

  .title {
    font-size: ${({theme:e})=>e["text-size-m"]};
    font-weight: ${({theme:e})=>e["text-weight-medium"]};
    line-height: ${({theme:e})=>e["line-height-m"]};
    color: ${({theme:e})=>e["content-color-secondary"]};
    padding: ${({theme:e})=>e["spacing-xs"]};
  }

  .list-container {
    width: 100%;
  }

  .list-container.loading {
    height: 117px;
  }

  .error-container {
    width: 100%;
    padding: ${({theme:e})=>e["spacing-s"]};
  }

  ul {
    padding: 0;
    margin: 0;
  }

  .loading-indicator {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .title.loading {
    padding-bottom: ${({theme:e})=>e["spacing-xl"]};
  }

  .title--error {
    padding: 0;
    margin-bottom: ${({theme:e})=>e["spacing-s"]};
  }

  .reload-button {
    margin-top: ${({theme:e})=>e["spacing-s"]};
  }

  .watchers-empty-state {
    padding: ${({theme:e})=>e["spacing-s"]};
    display: block;
    padding-top: ${({theme:e})=>e["spacing-s"]};
  }
`;function S(e){const{list:t,count:n,privateWatchersCount:s,reload:r,error:i,isLoading:a,isLoadingMore:S,currentUserId:w,model:I,lastWatcherElementRef:T}=e;return i&&!a?o.createElement(_,null,o.createElement("div",{className:"error-container"},o.createElement("div",{className:"title title--error"},"Couldn't load watchers"),o.createElement("div",null,o.createElement(c.default,{text:"Just a faulty wire. Try reloading the watchers.",hasBottomSpacing:!0})),o.createElement(d.default,{text:"Reload Watchers",onClick:r,className:"reload-button"}))):o.createElement(_,null,o.createElement("div",{className:l()("list-container",{loading:a})},o.createElement("div",{className:l()("title",{loading:a})},`${n||"No"} ${g.default.pluralize({count:n,singular:"watcher",plural:"watchers"})}`),a&&o.createElement(u.default,{className:"loading-indicator"}),!a&&!b.get(t,"length")&&o.createElement(c.default,{text:`People who watch this ${b.get(v.default,[I,"displayName"],"")} will show up here.`,className:"watchers-empty-state",color:"content-color-primary"}),o.createElement(p.default,{direction:"column",className:"watcher-list-container"},!a&&!!b.get(t,"length")&&o.createElement("ul",{className:"watchers-list"},t.map(((e,n)=>o.createElement(E,{ref:t.length===n+1?T:null,key:b.get(e,"userId")},o.createElement(y.default,{to:b.get(e,"profileUrl","")},o.createElement(p.default,{"data-testid":"watcher-list-item",className:"watcher-item",paddingTop:"spacing-xs",paddingBottom:"spacing-xs",gap:"spacing-s",alignItems:"center",justifyContent:"start"},o.createElement(m.default,{size:"s",userId:b.get(e,"userId",0),src:b.get(e,"profilePicUrl")}),o.createElement(c.default,{isTruncated:!0,className:"link",color:"content-color-primary"},b.get(e,"name")||b.get(e,"username"),w===b.get(e,"userId").toString()&&" (You)")))))),s>0&&o.createElement(c.default,{color:"content-color-primary"},o.createElement(p.default,{padding:"spacing-s",className:"anonymous-watchers",alignItems:"center",gap:"spacing-s"},o.createElement(p.default,{className:"anonymous-watcher-icon",alignItems:"center",justifyContent:"center"},o.createElement(f.default,null)),o.createElement(h.default,{placement:"bottom",content:"Watchers with accounts set to private are kept anonymous."},o.createElement("div",null,s," anonymous"," ",g.default.pluralize({count:s,singular:"watcher",plural:"watchers"})))))),S&&o.createElement(p.default,{justifyContent:"center",padding:"spacing-s"},o.createElement(u.default,{className:"loading-indicator"}))),o.createElement(C,null)))}S.propTypes={isLoading:r().bool,isLoadingMore:r().bool,count:r().number.isRequired,privateWatchersCount:r().number,list:r().arrayOf(r().shape({name:r().string.isRequired,userId:r().string.isRequired,profileUrl:r().string.isRequired,ProfilePicUrl:r().string})),error:r().oneOfType([r().object,r().bool]),reload:r().func.isRequired,currentUserId:r().string}},"./version-control/changelog/components/ChangelogExpandedDiff.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),s=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),r=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),i=n("../../packages/version-control/change-recording/index.ts"),a=n("./node_modules/lodash/lodash.js");const l={collection:s.getOne,environment:r.getOne};class c extends o.Component{constructor(e){super(e),this.state={modelName:this.props.controller.model,errorLoadingCollectionData:!1}}componentDidMount(){l[this.props.controller.model](this.props.controller.modelId).then((e=>{this.setState({modelName:e.name}),a.invoke(this.props,"controller.setTitle",e.name)})).catch((e=>{pm.logger.error(e),this.setState({errorLoadingCollectionData:!0})}))}render(){return o.createElement(i.ExpandedDiffRenderer,{model:this.props.controller.model,modelId:this.props.controller.modelId,changelogId:this.props.controller.changelogId,modelName:this.state.modelName,forceDisplayErrorState:this.state.errorLoadingCollectionData})}}},"./version-control/changelog/controllers/ChangelogExpandedDiffController.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n("./appsdk/workbench/BaseWorkbenchController.js");class s extends o.default{didCreate(){const e=this.getRouteParams();this.model=e.model,this.modelId=e.modelId,this.changelogId=e.changelogId?atob(decodeURIComponent(e.changelogId)):""}}},"./version-control/common/ControlledComboButton/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./js/components/base/Buttons.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("./js/components/base/Tooltips.js");const c=s.default.div`
  display: inline-flex;

  .controlled-combo-button__primary-button {
    min-width: ${e=>e.hideLabel&&"0"};
    pointer-events: ${e=>e.isPrimaryButtonDisabled&&"none"};
  }

  /** TODO: remove this aether button supports small size icons on medium buttons. */
  .controlled-combo-button__primary-button svg {
    height: ${({theme:e,iconSize:t})=>e["small"===t?"text-size-m":"text-size-xl"]};
    width: ${({theme:e,iconSize:t})=>e["small"===t?"text-size-m":"text-size-xl"]};
  }

  .controlled-combo-button__primary-button i {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    opacity: ${e=>e.isPrimaryButtonDisabled&&"0.5"};
  }

  .controlled-combo-button__menu-button {
    padding: ${({theme:e})=>e["spacing-s"]};
    min-width: ${({theme:e})=>e["size-m"]};
    background-color: ${e=>e.isPrimaryButtonDisabled&&"transparent"};
    pointer-events: ${e=>e.isPrimaryButtonDisabled&&"none"};
    box-shadow: ${e=>e.isPrimaryButtonDisabled&&"none"};
  }

  .controlled-combo-button__separator {
    border-left: ${({theme:e,isPrimaryButtonDisabled:t})=>t?"transparent":`${e["border-width-default"]} ${e["border-style-solid"]} ${e["splitbutton-tertiary-splitter-color"]}`};
    height: 20px;
    margin-top: 6px;
  }
`;function d(e){const{className:t,popoverClassName:n,useCustomButton:s,isMenuOpen:d,isPrimaryButtonLoading:u,isMenuButtonLoading:p,isPrimaryButtonDisabled:m,comboButtonSize:h,isMenuButtonDisabled:f,primaryButtonText:g,primaryButtonTextHide:v,primaryButtonIcon:y,menuButtonText:b,renderMenuContent:E,primaryButtonTooltip:C,menuButtonTooltip:_,buttonIconSize:S,primaryButtonMinWidth:w,onPrimaryButtonClick:I,onMenuButtonClick:T,onMenuClose:x}=e,j=(0,o.useRef)(),k={text:g,icon:y,type:"secondary",size:h||"medium",tooltip:C&&o.createElement(i.default,{content:C,placement:"bottom"}),isDisabled:m,isLoading:u,onClick:I,className:"controlled-combo-button__primary-button",minWidth:w};s&&(k.tooltip=C);const R={text:b,type:"secondary",size:h||"medium",tooltip:_&&o.createElement(i.default,{content:_,placement:"bottom"}),isDisabled:f,isLoading:p,onClick:T,className:"controlled-combo-button__menu-button"},M={show:d,target:j.current,placement:"bottom-right",onClose:x,closeOnClickOutside:!0,immediate:!0,hideArrow:!0,className:n};return o.createElement(o.Fragment,null,o.createElement(c,{ref:j,className:t,iconSize:S,hideLabel:v,isPrimaryButtonDisabled:m},s?o.createElement(r.Button,{type:k.type,disabled:k.isDisabled,size:h||"small",tooltip:k.tooltip,className:k.className,onClick:k.onClick},k.text):o.createElement(a.default,k),o.createElement("div",{className:"controlled-combo-button__separator"}),o.createElement(a.default,R)),o.createElement(l.Tooltip,M,o.createElement(l.TooltipBody,null,E&&E())))}},"./version-control/common/CreateWorkspaceModal/CreateNewWorkspace.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=(n("./node_modules/lodash/lodash.js"),n("../../node_modules/styled-components/dist/styled-components.browser.esm.js")),h=n("./collaboration/workspace/types/WorkspaceTypes.ts"),f=n("./version-control/hooks/useConnectionStatus.ts");const g=(0,m.default)(s.default)`
  margin-bottom: ${e=>e.theme["spacing-l"]};
`,v=(0,m.default)(r.default)`
  margin-bottom: ${e=>e.theme["spacing-l"]}; !important;
`,y=(0,m.default)(i.default)`
  margin-bottom: 0 !important;
`;function b(e){const[t,n]=(0,o.useState)(""),s=e.defaultVisibility,r={name:t,visibilityStatus:s,summary:""},i=(0,f.default)();return o.createElement(o.Fragment,null,o.createElement(v,{type:"h4",text:"Create Workspace",color:"content-color-secondary",styleAs:"h4"}),o.createElement(g,{value:t,onClear:()=>n(""),onChange:e=>{n(e.target.value)},label:o.createElement(a.default,{text:"Name"})}),o.createElement(y,{typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-medium",lineHeight:"line-height-xs"},color:"content-color-secondary"},"Visibility"),o.createElement(y,{type:"body-medium",color:"content-color-secondary"},"Determines who can access this workspace."),o.createElement(l.default,{name:"custom-name-for-radio",value:s,direction:"column"},o.createElement(c.default,{value:"personal",label:"Personal",helperText:"Only you can access",isDisabled:s!==h.VISIBILITY_STATUS.personal}),o.createElement(c.default,{value:"private",label:"Private",helperText:"Only invited team members can access",isDisabled:s!==h.VISIBILITY_STATUS.private}),o.createElement(c.default,{value:"team",label:"Team",helperText:"All team members can access",isDisabled:s!==h.VISIBILITY_STATUS.team}),o.createElement(c.default,{value:"public",label:"Public",helperText:"Everyone can view",isDisabled:s!==h.VISIBILITY_STATUS.public})),s===h.VISIBILITY_STATUS.public&&o.createElement(d.default,{status:"info"},"All data in this workspace will be made public."),o.createElement(u.default,{grow:1,shrink:1,justifyContent:"flex-end",gap:"spacing-s",alignItems:"flex-end"},o.createElement(p.default,{type:"secondary",onClick:()=>e.setMode("move"),text:"Cancel"}),o.createElement(p.default,{type:"primary",isLoading:e.isCreating,isDisabled:!t||!i,onClick:()=>e.handleCreateWorkspace(r),tooltip:!i&&"You can perform this action once you're back online.",text:"Create Workspace"})))}},"./version-control/common/ExpansibleMarkdownOutput/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./js/components/base/Markdown.js"),a=n("./version-control/hooks/useResize.js");const l=r.default.div`
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: ${({lines:e})=>e};
  -webkit-box-orient: vertical;
  color: ${({theme:e})=>e["content-color-primary"]};
`,c=r.default.div`
  .markdown--line-clamped p {
    margin: 0;
    font-size: ${({theme:e})=>e["text-size-m"]};
    line-height: ${({theme:e})=>e["line-height-m"]};
    color: ${({theme:e})=>e["content-color-primary"]};
  }

  .markdown--line-clamped a {
    color: var(--content-color-link);
    &:hover {
      text-decoration: underline;
    }
  }

  .lineclamp__show-more {
    display: flex;
    margin-top: ${({theme:e})=>e["spacing-xs"]};
  }
`;function d(e){const{lineClamp:t,className:n,markdown:r}=e,[d,u]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!1),h=(0,o.useRef)(),f=(0,o.useRef)(t),g=(0,a.default)({onResize:()=>{v()},debounceTime:150});function v(){if(h.current){h.current.style.webkitLineClamp=t;const e=h.current.offsetHeight;h.current.style.webkitLineClamp="initial";const n=h.current.offsetHeight;h.current.style.webkitLineClamp=f.current,m(e<n)}}return(0,o.useEffect)((()=>{v()}),[r]),(0,o.useEffect)((()=>{h.current&&g(h.current)}),[]),o.createElement(c,{className:n},o.createElement(l,{lines:t,ref:h},o.createElement(i.default,{className:"pm-markdown markdown--line-clamped",source:r})),p&&o.createElement("div",{className:"lineclamp__show-more"},o.createElement(s.default,{onClick:()=>{var e;(e=!d)?(f.current="initial",h.current.style.webkitLineClamp="initial"):(f.current=t,h.current.style.webkitLineClamp=t),u(e)},type:"muted-plain",text:d?"Show less":"Show more"})))}},"./version-control/common/ResizeObserver/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});n("../../node_modules/react/index.js");var o=n("./version-control/hooks/useResize.js");function s({onResize:e,debounceTime:t,children:n}){return n((0,o.default)({onResize:e,debounceTime:t}))}},"./version-control/common/TabEmptyState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");const i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  display: flex;
  flex-direction: column;
  align-items: center;

  .empty-state__title {
    margin-top: ${({theme:e})=>e["spacing-l"]};
  }

  .empty-state__description {
    margin-top: ${({theme:e})=>e["spacing-xs"]};
    margin-bottom: ${({theme:e})=>e["spacing-l"]};
  }
`;function a(e){return o.createElement(i,{className:e.className},e.illustration,o.createElement(s.default,{type:"h4",text:e.title,hasBottomSpacing:!0,className:"empty-state__title"}),o.createElement(r.default,{type:"body-medium",color:"content-color-secondary",className:"empty-state__description"},e.message),e.showAction&&e.action)}},"./version-control/common/UserListItem/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/classnames/index.js"),i=n.n(r),a=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),l=n("./version-control/common/CustomTooltip/index.js"),c=n("./js/models/services/DashboardService.js"),d=n("./js/services/NavigationService.js"),u=n("./node_modules/lodash/lodash.js");const p=s.default.button.attrs((()=>({role:"listitem"})))`
  all: unset;
  padding: ${({theme:e})=>e["spacing-s"]}
    ${({theme:e})=>e["spacing-s"]};
  display: flex;
  width: 100%;
  box-sizing: border-box;
  cursor: pointer;
  align-items: center;
  .user-list-item__tooltip {
    margin-left: ${({theme:e})=>e["spacing-s"]};
    display: flex;
  }
  .username {
    font-size: ${({theme:e})=>e["text-size-m"]};
    font-weight: ${({theme:e})=>e["text-weight-regular"]};
    line-height: ${({theme:e})=>e["line-height-m"]};
    color: ${({theme:e})=>e["content-color-primary"]};
  }
  &:hover .link {
    color: ${({theme:e})=>e["content-color-info"]};
  }
  .link:hover {
    text-decoration: underline;
  }
`;function m(e){const t=u.get(e,"user.name")||u.get(e,"user.username"),n=u.get(e,"privateWatchersCount",0)>1,s=()=>u.get(e,"user.isAccessible")||u.get(e,"user.isPublic")||e.isCurrentUser;return o.createElement(p,{onClick:t=>{t&&t.stopPropagation(),s()&&(()=>{if(u.get(e,"user.profileUrl"))return d.default.openURL(e.user.profileUrl);u.get(e,"user.id")&&(0,c.openTeamUserProfile)(e.user.id)})()}},o.createElement(a.default,{size:"s",userId:u.get(e,"user.id",0),src:u.get(e,"user.profilePicUrl")}),o.createElement(l.CustomTooltip,{align:"right",body:s()?"":n?"These users' profiles are not public":"This user's profile is not public",className:"user-list-item__tooltip",tooltipClassName:"user-list-item__tooltip-body"},o.createElement("span",{className:i()("username",{link:s()}),title:s()&&t},t,e.isCurrentUser&&" (You)")))}},"./version-control/common/workbench-items.js":function(e,t,n){"use strict";n.r(t),n.d(t,{WorkbenchEmptyStateContainer:function(){return o}});const o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  position: relative;
  top: 30%;
  display: flex;
  flex-direction: column;
  align-items: center;

  p {
    font-size: var(--text-size-m);
    color: var(--content-color-secondary);
    margin: 0;
  }
`},"./version-control/diff/components/Body.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DiffItemLabel:function(){return v},DiffItemProperty:function(){return E},DiffItemSection:function(){return _},DiffItemTitle:function(){return b},NestedDiff:function(){return S},NestedDiffItemSection:function(){return C},default:function(){return T}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),r=n.n(s),i=n("./node_modules/lodash/lodash.js"),a=n.n(i),l=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=n("./js/components/base/Buttons.js"),d=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./version-control/common/CustomTooltip/index.js"),p=n("./onboarding/src/common/LaunchDarkly.js"),m=n("./version-control/common/index.js"),h=n("./runtime-repl/request-http/RequestIcon.js");const f="large-collection-diff-optimisation",g={ldName:"off",enabled:!1};function v(e){const t=`icon-entity-${e.itemType}-stroke`;return"request"===e.itemType?o.createElement(h.default,{className:"collection-diff__request",methodClassname:r()({"collection-diff__request-method--small":"small"===e.size,"collection-diff__request-method":"small"!==e.size}),method:a().get(e.itemMeta,"method")}):o.createElement(l.default,{className:"pm-diff__label-icon",name:t,size:e.size||"large"})}const y=(0,d.default)(u.CustomTooltip)`
  margin-left: var(--spacing-s);
  vertical-align: middle;
`;function b(e){let t="secondary";return"added"===e.diffType?t="success":"deleted"===e.diffType?t="error":"conflict"===e.diffType?t="warning":"moved"===e.diffType&&(t="info"),o.createElement("h3",{className:`collection-diff-body__heading ${e.className}`,id:e.itemId,onClick:e.onClick},o.createElement(v,{itemMeta:e.itemMeta,itemType:"response"===e.itemType?"example":e.itemType}),o.createElement("span",{className:"collection-diff__element-title",title:e.itemName},e.itemName),o.createElement(m.Badge,{pmStyle:t,size:"small",text:e.diffType}),"moved"===e.diffType&&o.createElement(y,{align:"right",body:`This ${e.itemType} has been moved to\n            ${a().get(e,"to.model")} ${a().get(e,"to.name")}`},o.createElement(l.default,{name:"icon-state-warning-stroke",color:"content-color-secondary"})))}function E(e){return o.createElement("div",{className:"collection-diff-body__title"},e.propertyName,e.conflict&&o.createElement(m.Badge,{className:"push-half--left",pmStyle:"warning",size:"small"},"Conflict"))}function C(e){return o.createElement("div",{className:`pm-conflict collection-diff-body__nested-section pm-conflict--${e.conflictType}`},o.createElement(I,{diffItem:e.diff,disableConflictResolution:e.disableConflictResolution,itemId:e.itemId}),e.conflictType&&o.createElement(m.ConflictResolutionActions,{disableConflictResolution:e.disableConflictResolution,type:e.conflictType,onResolveConflicts:()=>{e.onResolveConflicts(e.conflictType)}}))}function _(e){const{diff:t}=e;return t&&"function"!=typeof t.getDiff?null:o.createElement("div",{className:"collection-diff-body__section",id:`${t.itemId}`},o.createElement(E,{conflict:t.conflict,disableConflictResolution:e.disableConflictResolution,propertyName:t.propertyName}),"words"===t.type&&o.createElement(m.WordsDiff,{diff:t,disableConflictResolution:e.disableConflictResolution,updateConflictCount:e.updateConflictCount}),"code"===t.type&&o.createElement(m.CodeDiff,{diff:t,disableConflictResolution:e.disableConflictResolution,updateConflictCount:e.updateConflictCount}),"table"===t.type&&o.createElement(m.TableDiff,{diff:t,disableConflictResolution:e.disableConflictResolution,showDescriptionColumn:"variables"!==t.propertyName||"response headers"!==t.propertyName,showEnabledColumn:"variables"!==t.propertyName||"response headers"!==t.propertyName,updateConflictCount:e.updateConflictCount}),"sentences"===t.type&&o.createElement(m.SentencesDiff,{diff:t,disableConflictResolution:e.disableConflictResolution,updateConflictCount:e.updateConflictCount}))}function S(e){const t=e.diffItem,[n,s]=(0,o.useState)(t.diff),r=(n||[]).map(((n,r)=>{if(a().get(n,"isSection"))return o.createElement(C,{conflictType:n.conflictType,diff:n,disableConflictResolution:e.disableConflictResolution,itemId:t.itemId,key:r,onResolveConflicts:n=>{s(t.resolveConflicts(n)),e.updateConflictCount()}})}));return o.createElement(o.Fragment,null,r)}const w=d.default.div`
  padding-right: var(--spacing-s);
  display: inline;
`,I=(0,m.Collapsible)((({itemId:e,diffItem:t,updateConflictCount:n,disableConflictResolution:s,entityCount:i,expanded:a,toggleExpanded:d,enableComments:u,loadingComments:m,comments:h,commentComponent:v,commentModelObject:y})=>{if(!t)return null;let E=p.launchDarkly.getFlag(f,g)?!a:a;const C=v,I=t.isNestedDiff,T=(t.diff||[]).length>0;return o.createElement("div",{className:"collection-diff-body__collapsible "+(E?"":"collapsed"),id:`${t.itemType}-${t.id}`},o.createElement(w,null,o.createElement(c.Button,{className:"collection-sidebar-list-item__toggle-btn",onClick:d,type:"icon"},o.createElement(l.default,{name:"icon-direction-"+(E?"down":"right")}))),o.createElement(b,{className:r()({"is-visible":E&&T}),diffType:t.type,itemId:e,itemMeta:t.meta,itemName:t.name,itemType:t.itemType,to:t.to,onClick:d}),u&&o.createElement(C,{entityComments:!0,anchor:`${t.itemType}/${e}`,loading:m,commentClassName:"pull-request-entity-comments__list",commentType:"inline",className:"pull-request-entity-comments",model:"pullRequest",modelId:y.id,comments:h}),E&&I&&o.createElement(S,{diffItem:t,disableConflictResolution:s,updateConflictCount:n}),E&&!I&&(t.diff||[]).map(((e,r)=>o.createElement(_,{diff:e,disableConflictResolution:s,itemId:t.itemId,itemType:t.itemType,key:r,updateConflictCount:n}))))}));function T(e){const t=Object.values(e.diff||{});return o.createElement("div",{className:r()("collection-diff-body",e.className,{"collection-diff__nav-item":!e.centered}),ref:e.diffRef},t.map(((n,s)=>o.createElement(I,{commentComponent:e.commentComponent,commentModelObject:e.commentModelObject,comments:e.entityComments,loadingComments:e.loadingComments,diffItem:n,disableConflictResolution:e.disableConflictResolution,enableComments:e.enableComments,itemId:n.id,key:n.id,entityCount:t.length,updateConflictCount:e.updateConflictCount}))))}},"./version-control/diff/components/Diff.js":function(e,t,n){"use strict";n.r(t),n.d(t,{OutOfSyncAlert:function(){return de},default:function(){return ue},findResolvedConflicts:function(){return le},resolveAuthConflicts:function(){return ne},resolveDataOptionsConflicts:function(){return ae},resolveEventsConflicts:function(){return te},resolveGraphqlBodyConflicts:function(){return ie},resolveHeaderConflicts:function(){return Z},resolvePathVariablesConflicts:function(){return ee},resolveStatusCodeConflicts:function(){return oe},resolveTransferDestroyConflcits:function(){return re},resolveUpdateDestroyConflicts:function(){return se}});var o,s,r,i,a,l=n("../../node_modules/react/index.js"),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("../../node_modules/mobx/lib/mobx.module.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./node_modules/lodash/lodash.js"),m=n.n(p),h=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),E=n("../../packages/version-control/change-management/index.ts"),C=n("./js/components/base/LoadingIndicator.js"),_=n("./js/components/base/Buttons.js"),S=n("./version-control/diff/components/Body.js"),w=n("./version-control/common/index.js"),I=n("./version-control/diff/components/MergeCollectionModal.js"),T=n("./version-control/utils/diff.js"),x=n("./js/services/NavigationService.js"),j=n("./version-control/diff/services/DiffService.js"),k=n("./js/components/base/Infobar.js"),R=n("./version-control/diff/components/Topbar.js"),M=n("./appsdk/workbench/TabService.js"),P=n("./js/modules/services/AnalyticsService.js"),D=n("./version-control/constants.js"),A=n("./js/services/PerformanceTelemetryService/index.js"),L=n("./version-control/diff/services/ChangeManagementDiffService.ts"),O=n("./onboarding/src/common/LaunchDarkly.js"),N=n("./version-control/diff/constants.ts"),q=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),B=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),F=n("./version-control/pull-request/services/PullRequestService.js"),$=n("./js/stores/SyncStatusStore.js"),U=n("./js/stores/ActiveWorkspaceStore.js"),W=n("./js/stores/StoreManager.js"),G=n("./js/stores/CurrentUserStore.js");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},V.apply(this,arguments)}function z(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function H(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Y=(0,E.getLogger)("merge"),K={collection:q.getOne,environment:B.getOne},X={collection:e=>x.default.transitionTo("build.collection",{cid:e},{ctx:"changelog"}),environment:e=>x.default.transitionTo("build.environment",{eid:e})},Q={collection:"baseCollectionUid",environment:"baseEnvironmentUid"},J="ESOCKETTIMEDOUT";function Z(e,t,n){const o=t.getResolvedConflict()||[],s=o.map((e=>e?`${e.key}: ${e.value}`:"")).join("\n");m().set(e,[t.itemType,"update",n,"headers","to"],s),m().set(e,[t.itemType,"update",n,t.property,"to"],o)}function ee(e,t,n){const o=t.getResolvedConflict()||[],s=o.reduce(((e,t)=>t?(e[t.key]=t.value,e):e),{});m().set(e,[t.itemType,"update",n,"pathVariables","to"],s),m().set(e,[t.itemType,"update",n,t.property,"to"],o)}function te(e,t,n,o){Array.isArray(m().get(e,[t.itemType,"update",n,"events","to"]))||m().set(e,[t.itemType,"update",n,"events","to"],[]);const s="prerequest"===o?"preRequestScript":"tests",r=t.getResolvedConflict()||"";e[t.itemType].update[n].events.to.push({listen:o,script:{id:t.scriptId,exec:r.split("\n"),type:t.scriptType}}),"request"===t.itemType&&m().set(e,[t.itemType,"update",n,s,"to"],r)}function ne(e,t,n){const o=t.getResolvedConflict()||"",s=(t.base||"").split("\n"),r=m().get(m().get(s,"0","").split(":"),"1","").trim(),i=o.split("\n"),a=m().get(m().get(i,"0","").split(":"),"1","").trim(),l=i.slice(1).map((e=>{const t=e.split(":");return{key:(m().get(t,"0")||"").trim(),value:(m().get(t,"1")||"").trim(),type:"string"}}));m().set(e,[t.itemType,"update",n,t.property,"to"],{type:a,[a]:l}),r!==a&&m().set(e,[t.itemType,"update",n,"currentHelper","to"],a),m().set(e,[t.itemType,"update",n,"helperAttributes","to"],o)}function oe(e,t,n){const o=t.getResolvedConflict()||"",s=o.split(" ");let r,i;s.length>0?isNaN(parseInt(s[0]))?(r=parseInt(s[0]),i=s.slice(1).join(" ")):i=o:i="",m().set(e,[t.itemType,"update",n,t.property,"to"],{code:r,name:i})}function se(e,t,n){let o;"deleted"===t.type?(o={deleted:!0},m().set(e,[t.itemType,"update_destroy",n],o)):"modified"===t.type&&(o=(m().get(t,"diff")||[]).reduce(((e,t)=>(e[t.property]={from:t.base,to:t.source},e)),{}),m().set(e,[t.itemType,"update_destroy",n,"diff"],o))}function re(e,t,n){let o;"deleted"===t.type?(o={deleted:!0},m().set(e,[t.itemType,"transfer_destroy",n],o)):"moved"===t.type&&(o=m().get(t,"to"),m().set(e,[t.itemType,"transfer_destroy",n,"to"],o))}function ie(e,t,n,o){const s=t.getResolvedConflict()||[];m().set(e,[t.itemType,"update",n,"graphqlModeData",o,"to"],s)}function ae(e,t,n,o){const s=t.getResolvedConflict()||[];m().set(e,[t.itemType,"update",n,o,"to",t.optionsKey],s)}function le(e){let t={};return Object.keys(e).forEach((n=>{const o=e[n];o.diff.forEach((e=>{e.conflict&&("headerData"===e.property?Z(t,e,n):"prerequest"===e.property?te(t,e,n,"prerequest"):"test"===e.property?te(t,e,n,"test"):"auth"===e.property?ne(t,e,n):"pathVariableData"===e.property?ee(t,e,n):"responseCode"===e.property?oe(t,e,n):"graphql_query"===e.property?ie(t,e,n,"query"):"graphql_variables"===e.property?ie(t,e,n,"variables"):"dataOptions"===e.property?ae(t,e,n,"dataOptions"):m().set(t,[e.itemType,"update",n,e.property,"to"],e.getResolvedConflict()))})),"conflict"===o.type&&("update_destroy"===o.conflictType?se(t,m().get(o,"diff.0"),n):"transfer_destroy"===o.conflictType?re(t,m().get(o,"diff.0"),n):"transfer"===o.conflictType&&m().set(t,[o.itemType,"transfer",n,"to"],m().get(o,"diff.0.to")))})),t}const ce=c.default.div`
  padding: ${({theme:e})=>e["spacing-l"]};
  overflow: auto;
`;function de(e){return l.createElement(k.default,{isDismissable:!0,message:"The destination has been modified since you last updated the fork. We’d recommend pulling changes.",type:"warn",renderIcon:()=>l.createElement(b.default,{name:"icon-state-warning-stroke",className:"collection-diff__infobar-icon"}),secondaryAction:{label:"Pull Changes",disabled:e.disabled,onClick:()=>{P.default.addEventV2({category:e.entityType,action:"initiate_pull",label:"diff_view",entityType:e.entityType,entityId:m().get(e,"sourceEntity.uid"),meta:{hasConflicts:e.hasConflicts}}),x.default.transitionTo("build.merge",{toId:m().get(e,"sourceEntity.uid"),entityType:e.entityType},{"pull-changes":!0,source:m().get(e,"destinationEntity.uid")})}},onDismiss:e.onDismiss})}let ue=(0,u.observer)((s=class extends l.Component{constructor(e){super(e),z(this,"activeMergeStatusForAsyncMerge",r,this),z(this,"asyncMergeError",i,this),z(this,"isMerging",a,this),this.pullChanges=()=>{const e=this.state.conflicts||m().get(this.state,"diffManager.conflictCount",0)>0;P.default.addEventV2({category:this.props.controller.entityType,action:"initiate_pull",label:"diff_view",entityType:this.props.controller.entityType,entityId:m().get(this.state.source,"uid"),meta:{hasConflicts:e}}),x.default.transitionTo("build.merge",{entityType:this.props.controller.entityType,toId:m().get(this.state.source,"uid")},{"pull-changes":!0,source:m().get(this.state.destination,"uid")})},this.processMergeUpdate=e=>{const t=m().get(e,"mergeDetails.destinationUID"),n=m().get(e,"mergeDetails.sourceUID"),o=m().get(e,"mergeDetails.entityType"),s=m().get(e,"mergeDetails.mergeInitiatedBy"),r=m().get(e,"status"),i=(0,W.resolveStoreInstance)(G.default).id,a=Object.values(E.MergeStatuses),l=m().get(e,"mergeDetails.isPullRequestMerge"),c=m().get(e,"mergeDetails.error");t!==this.props.controller.toId||n!==this.props.controller.fromId||o!==this.props.controller.entityType||m().get(s,"id")!=i||l||(a.includes(r)?(this.setAsyncMergeStatus(r),this.setAsyncMergeError(c),r===E.MergeStatuses.SUCCESSFUL&&(P.default.addEventV2({category:this.props.controller.entityType,action:this.props.controller.pullChanges?"successful_pull_changes":"successful_merge_changes",label:this.props.controller.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:this.props.controller.toId}),"default"!==this.mergeStrategy&&this.setState({showInfobar:!1}),this.realTimeMergeUpdatesSubscription&&this.realTimeMergeUpdatesSubscription.unsubscribe(),this.mergeUpdatesReconnectionReactionDispose&&this.mergeUpdatesReconnectionReactionDispose()),r===E.MergeStatuses.FAILED&&(Y.logError("Diff~processMergeUpdate",c,{errorName:"AsyncMergeFailed",details:{receivedUpdateStatus:r,destinationUID:this.props.controller.toId,sourceUID:this.props.controller.fromId,entityType:this.props.controller.entityType,workflowId:this.asyncMergeWorkflowId}}),P.default.addEventV2({category:this.props.controller.entityType,action:this.props.controller.pullChanges?"failed_pull_changes":"failed_merge_changes",label:this.props.controller.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:this.props.controller.fromId}))):Y.logError("Diff~processMergeUpdate",{},{errorName:"InvalidMergeUpdateStatusReceived",details:{receivedUpdateStatus:r,destinationUID:this.props.controller.toId,sourceUID:this.props.controller.fromId,entityType:this.props.controller.entityType,workflowId:this.asyncMergeWorkflowId}}))},this.subscribeRealtimeMergeEvents=()=>{this.props.controller.fromId&&this.props.controller.toId&&this.props.controller.entityType&&(this.realTimeMergeUpdatesSubscription=(0,E.getMergeEvents)({sourceUID:this.props.controller.fromId,destinationUID:this.props.controller.toId,entityType:this.props.controller.entityType}).subscribe((e=>{"merge"===m().get(e,"meta.model")&&"update"===m().get(e,"meta.action")&&this.processMergeUpdate(e.data)}),(e=>{throw Y.logError("Diff~subscribeRealtimeMergeEvents",e,{errorName:"RealtimeMergeUpdatesSubscriptionError",details:{sourceUID:this.props.controller.fromId,destinationUID:this.props.controller.toId,entityType:this.props.controller.entityType}}),e}),(()=>{Y.logError("Diff~subscribeRealtimeMergeEvents",err,{errorName:"RealtimeMergeUpdatesSubscriptionCompleted",details:{sourceUID:this.props.controller.fromId,destinationUID:this.props.controller.toId,entityType:this.props.controller.entityType}})})))};let t=!0;"collection"===this.props.controller.entityType&&(t=O.launchDarkly.getFlag(N.ENABLE_DIFF_MERGE_V2_FLAG.key,N.ENABLE_DIFF_MERGE_V2_FLAG.defaultValue)),this.state={loading:!0,errorLoading:null,diff:{},conflicts:0,showMergeModal:!1,showInfobar:!0,pullChanges:!1,merging:!1,source:{},destination:{},isOffline:!1,isDiffV2:t,isDestinationGitLinked:!1,isAsyncMergeEnabled:t&&!this.props.controller.pullChanges&&O.launchDarkly.getFlag(N.ENABLE_ASYNC_MERGE.key,N.ENABLE_ASYNC_MERGE.defaultValue)},this.onMerge=this.onMerge.bind(this),this.handleFetchDiff=this.handleFetchDiff.bind(this),this.handleMerge=this.handleMerge.bind(this),this.toggleMergeModal=this.toggleMergeModal.bind(this),this.handleInfobarDismiss=this.handleInfobarDismiss.bind(this),this.handleTabClose=this.handleTabClose.bind(this),this.handleConflictUpdate=this.handleConflictUpdate.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleFetchEntities=this.handleFetchEntities.bind(this),this.initiateFetch=this.initiateFetch.bind(this)}get activeMergeStatus(){const{isAsyncMergeEnabled:e}=this.state;return e?this.activeMergeStatusForAsyncMerge:this.isMerging?E.MergeStatuses.IN_PROGRESS:E.MergeStatuses.INACTIVE}get isMergeEnabled(){const e=this.state.conflicts||m().get(this.state,"diffManager.conflictCount",0)>0,t=m().get(this.state,"destination.permissions.edit",!1),n=!(0,W.resolveStoreInstance)($.default).isSocketConnected,o=this.activeMergeStatus===E.MergeStatuses.IN_PROGRESS;return!(e||n||o)&t}setAsyncMergeStatus(e){this.activeMergeStatusForAsyncMerge=e}setSyncMergeStatus(e){this.isMerging=e}setAsyncMergeError(e){this.asyncMergeError=e}get disabledMergeButtonTooltip(){const e=this.state.conflicts||m().get(this.state,"diffManager.conflictCount",0)>0,t=m().get(this.state,"destination.permissions.edit",!1),n=!(0,W.resolveStoreInstance)($.default).isSocketConnected;return this.activeMergeStatus===E.MergeStatuses.IN_PROGRESS?"We're currently merging the changes.":t?e?`Please resolve all the conflicts before merging the ${this.props.controller.entityType}.`:n?"You can perform this action once you're back online.":void 0:"You need to have editor permissions on the destination to merge the changes."}componentDidMount(){this.initiateFetch()}componentWillUnmount(){this.realTimeMergeUpdatesSubscription&&this.realTimeMergeUpdatesSubscription.unsubscribe(),this.mergeUpdatesReconnectionReactionDispose&&this.mergeUpdatesReconnectionReactionDispose()}componentDidUpdate(e){if(this.props.controller.pullChanges!==e.controller.pullChanges){const e=this.state.isDiffV2,t=this.props.controller.pullChanges,n=O.launchDarkly.getFlag(N.ENABLE_ASYNC_MERGE.key,N.ENABLE_ASYNC_MERGE.defaultValue);this.setState({isAsyncMergeEnabled:e&&!t&&n})}e.controller.toId===this.props.controller.toId&&e.controller.fromId===this.props.controller.fromId||(0,W.resolveStoreInstance)($.default).isSocketConnected&&this.initiateFetch(),this.props.controller.pullChanges&&(m().invoke(this.props,"controller.setTitle","Pull Changes"),m().invoke(this.props,"controller.setIcon","icon-action-pull-stroke"))}initiateFetch(){const e="collection"===this.props.controller.entityType;this.setState({loading:!0,errorLoading:null}),(0,W.resolveStoreInstance)($.default).onSyncAvailable({timeout:5e3}).then((()=>{Promise.all([this.handleFetchEntities(),this.handleFetchDiff(),this.state.isAsyncMergeEnabled&&this.subscribeRealtimeMergeEvents(),this.state.isAsyncMergeEnabled&&this.setupRealtimeEventsResubscriptionReaction()]).then((()=>e&&m().get(this.state,"destination.id")&&(0,F.isCollectionParentAPIGitLinked)(this.state.destination.id))).then((e=>{e&&this.setState({isDestinationGitLinked:!0})})).catch((e=>this.setState({errorLoading:e}))).finally((()=>{this.setState({loading:!1})}))})).then((()=>this.setState({isOffline:!1}))).catch((e=>this.setState({isOffline:!0,loading:!1})))}handleConflictUpdate(){this.setState({conflicts:(0,T.getNumberOfConflicts)(m().get(this.state.diff,"collectionDiff"))})}handleInfobarDismiss(){this.setState({showInfobar:!1})}handleCancel(){(!this.props.controller||!this.props.controller.pulRequestEdit&&!this.props.controller.pullRequestCreate&&!this.props.controller.pullRequest)&&this.handleTabClose()}handleTabClose(){this.state.showMergeModal&&this.toggleMergeModal(),M.default.closeByRoute(":entityType/:toId/merge",{toId:this.props.controller.toId,entityType:this.props.controller.entityType})}toggleMergeModal(){this.setState((e=>({showMergeModal:!e.showMergeModal})))}handleFetchEntities(){return new Promise(((e,t)=>{const n=K[this.props.controller.entityType],o={permissions:["merge"]};Promise.all([n(this.props.controller.toId,o),n(this.props.controller.fromId,o)]).then((([t,n])=>(this.setState({source:n,destination:t}),e()))).catch((e=>(pm.logger.error(`Diff~handleFetchEntities: Unable to fetch ${this.props.controller.entityType} info for Diff`,e),t())))}))}handleFetchDiff(){const e=this.props.controller.toId,t=this.props.controller.fromId,n=this.props.controller.entityType,o=this.props.controller.pullChanges;return new Promise(((s,r)=>{if(!(0,W.resolveStoreInstance)($.default).isSocketConnected){const o=new Error("Get online to view the diff.");return Y.logError("Diff~handleFetchDiff",o,{destination:e,source:t,entityType:n,isDiffV2:this.state.isDiffV2,isAsyncMerge:this.state.isAsyncMergeEnabled,errorName:"DiffFetchFailed",reason:"noConnection"}),r(o)}let i;this.state.isDiffV2?L.fetchDiff({modelType:this.props.controller.entityType,destinationId:e,sourceId:t}).then((e=>{const t=new E.DiffManager(e);return this.setState({diffManager:t}),i=m().get(t,"conflictCount",0)>0,P.default.addEventV2({category:this.props.controller.entityType,action:"view_diff",label:o?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:this.props.controller.fromId,meta:{hasConflicts:Boolean(i)}}),s()})).catch((o=>(Y.logError("Diff~handleFetchDiff",error,{destination:e,source:t,entityType:n,isDiffV2:!0,isAsyncMerge:this.state.isAsyncMergeEnabled,errorName:"DiffFetchFailed"}),this.setState({errorLoading:o}),r(o)))).finally((()=>A.default.endSpan(D.events.DIFF_LOAD_TIME))):(0,j.fetchDiff)(e,t).then((e=>{const t={collectionDiff:{diff:m().get(e,"data.diff"),conflicts:m().get(e,"data.conflicts"),navigation:m().get(e,"data.navigation"),outOfSync:!m().isEmpty(m().get(e,"data.conflicts"))||m().get(e,"data.metaInfo.outOfSync")}},n=(0,T.processServerDiff)(t);return this.setState({diff:t,parsedDiff:n.parsedDiff,conflicts:n.conflicts}),i=n.conflicts,P.default.addEventV2({category:this.props.controller.entityType,action:"view_diff",label:o?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:this.props.controller.fromId,meta:{hasConflicts:Boolean(i)}}),s()})).catch((o=>(Y.logError("Diff~handleFetchDiff",error,{destination:e,source:t,entityType:n,isDiffV2:!1,isAsyncMerge:!1,errorName:"DiffFetchFailed"}),this.setState({errorLoading:o}),r(o)))).finally((()=>A.default.endSpan(D.events.DIFF_LOAD_TIME)))}))}handleMerge(e,t={}){this.mergeStrategy=t.mergeStrategy||"default",this.state.isAsyncMergeEnabled?this.setAsyncMergeStatus(E.MergeStatuses.IN_PROGRESS):this.setSyncMergeStatus(!0),this.state.isDiffV2&&this.state.isAsyncMergeEnabled?this.asyncMerge(t.mergeStrategy,e.resolved_conflicts):this.state.isDiffV2?this.mergeWithDiffV2(e,t):this.mergeWithDiffV1(e,t)}mergeWithDiffV1(e,t){A.default.startSpan(D.events.MERGE_TIME),(0,j.mergeChanges)(e,t.mergeStrategy).then((t=>{if(m().get(t,"error.details")===J&&(0,h.toast)({title:"Merging is in progress",status:"info",description:`${this.props.controller.entityType} is being merged in the background. Please check again later to view merged changes.`,duration:5e3}),this.setSyncMergeStatus(!1),P.default.addEventV2({category:this.props.controller.entityType,action:e.pullChanges?"successful_pull_changes":"successful_merge_changes",label:e.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:e.destinationId}),e.pullChanges&&!e.isSyncFlow)e.pullRequestEdit?x.default.transitionTo("build.pullRequestEdit",{id:e.pullRequestId},{workspace:(0,W.resolveStoreInstance)(U.default).id}):e.pullRequestCreate?x.default.transitionTo("build.pullRequestCreate",{},{source:e.destinationId,destination:e.sourceId,entityType:this.props.controller.entityType,workspace:(0,W.resolveStoreInstance)(U.default).id}):e.pullRequestId?x.default.transitionTo("build.pullRequestView",{id:e.pullRequestId},{workspace:(0,W.resolveStoreInstance)(U.default).id}):x.default.transitionTo("build.merge",{toId:e.sourceId,entityType:this.props.controller.entityType},{source:e.destinationId}),pm.toasts.success("Changes pulled",{noIcon:!0}),this.handleTabClose();else if(e.pullChanges&&e.isSyncFlow){const t=this.props.controller.entityType;pm.toasts.success(`Source ${t} is now up to date with the destination ${this.props.controller.entityType}.`,{title:"Changes pulled."}),this.handleTabClose();(0,X[t])(e.destinationId)}else pm.toasts.success("Changes merged",{noIcon:!0}),this.handleTabClose();this.state.showMergeModal&&this.toggleMergeModal()})).catch((t=>{m().get(t,"error.details")===J?((0,h.toast)({title:"Merging is in progress",status:"info",description:`${m().capitalize(this.props.controller.entityType)} is being merged in the background. Please check again later to view merged changes.`,duration:5e3}),P.default.addEventV2({category:this.props.controller.entityType,action:"merge_socket_timeout",label:e.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:e.sourceId})):((0,W.resolveStoreInstance)($.default).isSocketConnected?pm.toasts.error(t.message,{noIcon:!0,title:t.title||"Unable to merge changes"}):pm.toasts.error("You'll be able to merge changes once you're online.",{title:"You are offline"}),P.default.addEventV2({category:this.props.controller.entityType,action:e.pullChanges?"failed_pull_changes":"failed_merge_changes",label:e.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:e.sourceId})),this.setSyncMergeStatus(!1)})).finally((()=>A.default.endSpan(D.events.MERGE_TIME)))}mergeWithDiffV2(e,t){A.default.startSpan(D.events.MERGE_TIME),L.merge({strategy:t.mergeStrategy||"default",sourceId:e.sourceId,destinationId:e.destinationId,entityType:this.props.controller.entityType,resolutions:e.resolved_conflicts}).then((t=>{if(m().get(t,"error.details")===J&&(0,h.toast)({title:"Merging is in progress",status:"info",description:`${this.props.controller.entityType} is being merged in the background. Please check again later to view merged changes.`,duration:5e3}),this.setSyncMergeStatus(!1),P.default.addEventV2({category:this.props.controller.entityType,action:e.pullChanges?"successful_pull_changes":"successful_merge_changes",label:e.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:e.destinationId}),e.pullChanges){(0,W.resolveStoreInstance)(E.ForkDivergenceStore).setDivergence(this.props.controller.entityType,e.destinationId,{isParenAhead:!1})}if(e.pullChanges&&!e.isSyncFlow)e.pullRequestEdit?x.default.transitionTo("build.pullRequestEdit",{id:e.pullRequestId},{workspace:(0,W.resolveStoreInstance)(U.default).id}):e.pullRequestCreate?x.default.transitionTo("build.pullRequestCreate",{},{source:e.destinationId,destination:e.sourceId,entityType:this.props.controller.entityType,workspace:(0,W.resolveStoreInstance)(U.default).id}):e.pullRequestId?x.default.transitionTo("build.pullRequestView",{id:e.pullRequestId},{workspace:(0,W.resolveStoreInstance)(U.default).id}):x.default.transitionTo("build.merge",{toId:e.sourceId,entityType:this.props.controller.entityType},{source:e.destinationId}),pm.toasts.success("Changes pulled",{noIcon:!0}),this.handleTabClose();else if(e.pullChanges&&e.isSyncFlow){const t=this.props.controller.entityType;pm.toasts.success(`Source ${t} is now up to date with the destination ${this.props.controller.entityType}.`,{title:"Changes pulled."}),this.handleTabClose();(0,X[t])(e.destinationId)}else pm.toasts.success("Changes merged",{noIcon:!0}),this.handleTabClose();this.state.showMergeModal&&this.toggleMergeModal()})).catch((t=>{m().get(t,"error.details")===J?((0,h.toast)({title:"Merging is in progress",status:"info",description:`${m().capitalize(this.props.controller.entityType)} is being merged in the background. Please check again later to view merged changes.`,duration:5e3}),P.default.addEventV2({category:this.props.controller.entityType,action:"merge_socket_timeout",label:e.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:e.sourceId})):((0,W.resolveStoreInstance)($.default).isSocketConnected?pm.toasts.error(t.message,{noIcon:!0,title:t.title||"Unable to merge changes"}):pm.toasts.error("You'll be able to merge changes once you're online.",{title:"You are offline"}),P.default.addEventV2({category:this.props.controller.entityType,action:e.pullChanges?"failed_pull_changes":"failed_merge_changes",label:e.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:e.sourceId})),this.setSyncMergeStatus(!1)})).finally((()=>A.default.endSpan(D.events.MERGE_TIME)))}asyncMerge(e="default",t={}){if(!(0,W.resolveStoreInstance)($.default).isSocketConnected)return void pm.toasts.error("You'll be able to merge changes once you're online.",{title:"You are offline"});const{fromId:n,toId:o,entityType:s,pullChanges:r}=this.props.controller;A.default.startSpan(D.events.MERGE_TIME),this.setAsyncMergeStatus(E.MergeStatuses.IN_PROGRESS),this.state.showMergeModal&&this.toggleMergeModal(),L.mergeAsync({strategy:e||"default",sourceId:n,destinationId:o,entityType:s,resolutions:t||{}}).then((e=>{this.asyncMergeWorkflowId=m().get(e,"body.workflowId"),Y.logInfo(`Async merge started with workflow id: ${this.asyncMergeWorkflowId}`),this.setAsyncMergeStatus(E.MergeStatuses.IN_PROGRESS)})).catch((i=>{pm.toasts.error(i.message,{noIcon:!0,title:i.title||"Unable to merge changes"}),Y.logError("Diff~asyncMerge",i,{strategy:e||"default",sourceId:n,destinationId:o,entityType:s,resolutions:t}),P.default.addEventV2({category:s,action:r?"failed_pull_changes":"failed_merge_changes",label:r?"pull_view":"diff_view",entityType:s,entityId:n}),this.setAsyncMergeStatus(E.MergeStatuses.INACTIVE)})).finally((()=>A.default.endSpan(D.events.MERGE_TIME)))}onMerge(e,t){const n={destinationId:m().get(this.props.controller,"toId"),sourceId:m().get(this.props.controller,"fromId"),workspace:(0,W.resolveStoreInstance)(U.default).id,resolved_conflicts:this.state.isDiffV2?this.state.diffManager.getResolutions():le(this.state.parsedDiff),pullChanges:this.props.controller.pullChanges,pullRequestId:this.props.controller.pullRequest,pullRequestCreate:this.props.controller.pullRequestCreate,pullRequestEdit:this.props.controller.pullRequestEdit,isSyncFlow:this.props.controller.isSyncFlow,entityType:this.props.controller.entityType},o=this.state.conflicts||m().get(this.state,"diffManager.conflictCount",0)>0;let s="initiate_merge_changes";this.props.controller.pullChanges?s="initiate_pull_changes":"updateSourceWithDestination"===(t||{}).mergeStrategy?s="initiate_merge_changes_update":"deleteSource"===(t||{}).mergeStrategy&&(s="initiate_merge_changes_delete"),P.default.addEventV2({category:this.props.controller.entityType,action:s,label:this.props.controller.pullChanges?"pull_view":"diff_view",entityType:this.props.controller.entityType,entityId:m().get(this.props.controller,"fromId"),meta:{hasConflicts:o}}),this.handleMerge(n,t)}_getTopbarCancelNavigationProps(){let e={};return this.props.controller.pullRequestEdit?e.to={routeIdentifier:"build.pullRequestEdit",routeParams:{id:this.props.controller.pullRequest},queryParams:{workspace:(0,W.resolveStoreInstance)(U.default).id}}:this.props.controller.pullRequestCreate?e.to={routeIdentifier:"build.pullRequestCreate",routeParams:{},queryParams:{source:m().get(this.props.controller,"toId"),destination:m().get(this.props.controller,"fromId"),entityType:this.props.controller.entityType,workspace:(0,W.resolveStoreInstance)(U.default).id}}:this.props.controller.pullRequest?e.to={routeIdentifier:"build.pullRequestView",routeParams:{id:this.props.controller.pullRequest},queryParams:{workspace:(0,W.resolveStoreInstance)(U.default).id}}:e=null,e}setupRealtimeEventsResubscriptionReaction(){const e=(0,W.resolveStoreInstance)($.default);this.mergeUpdatesReconnectionReactionDispose=(0,d.reaction)((()=>e.isSocketConnected),(e=>{e&&this.subscribeRealtimeMergeEvents()}))}render(){const e={name:m().get(this.state.destination,"name"),uid:m().get(this.state.destination,"uid"),id:m().get(this.state.destination,"id"),forkInfo:{id:m().get(this.state.destination,Q[this.props.controller.entityType]),forkLabel:m().get(this.state.destination,"forkLabel")},exists:!!m().get(this.state.destination,"id")},t={name:m().get(this.state.source,"name"),uid:m().get(this.state.source,"uid"),id:m().get(this.state.source,"id"),forkInfo:{id:m().get(this.state.source,Q[this.props.controller.entityType]),forkLabel:m().get(this.state.source,"forkLabel")},exists:!!m().get(this.state.source,"id")},n=this.state.isDiffV2?{}:(0,T.processServerDiff)(this.state.diff),o=m().get(this.state.destination,"permissions.edit"),s=this._getTopbarCancelNavigationProps(),r=!(0,W.resolveStoreInstance)($.default).isSocketConnected,i=this.state.conflicts||m().get(this.state,"diffManager.conflictCount",0)>0;let a;if(a=this.state.isDiffV2?!this.state.loading&&m().get(this.state,"diffManager.isDiffEmpty"):!this.state.loading&&m().isEmpty(n.parsedDiff),this.state.loading)return l.createElement("div",{className:"collection-diff__loading"},l.createElement(C.default,null));if(this.state.isOffline)return l.createElement(w.EmptyState,{className:"collection-diff-offline",title:"You are offline",body:"Unable to connect to the servers. Please check your network settings.",illustration:l.createElement(f.default,null),action:l.createElement(_.Button,{type:"primary",size:"small",onClick:this.initiateFetch},"Retry")});if(this.state.errorLoading){const e=403===this.state.errorLoading.status||403===this.state.errorLoading.code?"You do not have access to perform this action":"There was an error fetching diff";return l.createElement(w.EmptyState,{body:m().get(this.state.errorLoading,"message"),className:"collection-diff__error-state",title:e,illustration:l.createElement(g.default,null)})}if(this.state.isDestinationGitLinked)return l.createElement(v.default,{description:"Can't merge changes to a collection that's part of a Git-connected API."},l.createElement(y.default,null));if(a){_.Button,this.handleTabClose;return l.createElement(l.Fragment,null,this.state.showInfobar&&(n.outOfSync||m().get(this.state,"diffManager.isOutOfSync"))&&!this.props.controller.pullChanges&&l.createElement(de,V({},this.state,{disabled:r,sourceEntity:t,hasConflicts:i,destinationEntity:e,onDismiss:this.handleInfobarDismiss,onTabClose:this.handleTabClose,entityType:this.props.controller.entityType})),l.createElement(E.EmptyDiffState,{isPullChanges:this.props.controller.pullChanges,entityType:this.props.controller.entityType}))}return l.createElement(l.Fragment,null,this.state.showInfobar&&(n.outOfSync||m().get(this.state,"diffManager.isOutOfSync"))&&!this.props.controller.pullChanges&&l.createElement(de,V({},this.props,{disabled:r,sourceEntity:t,hasConflicts:i,destinationEntity:e,onDismiss:this.handleInfobarDismiss,onTabClose:this.handleTabClose,entityType:this.props.controller.entityType})),l.createElement(R.default,{activeWorkspace:(0,W.resolveStoreInstance)(U.default).id,baseEntity:e,canMergeEntity:o,forkedEntity:t,hasConflicts:i,merging:this.activeMergeStatus===E.MergeStatuses.IN_PROGRESS,title:this.props.controller&&this.props.controller.getTitle(),isOffline:r,pullChanges:this.props.controller.pullChanges,toggleMergeModal:this.toggleMergeModal,onTabClose:this.handleTabClose,onCancel:this.handleCancel,handleMerge:this.onMerge,handleFetchDiff:this.initiateFetch,topbarCancelNavigationProps:s,entityType:this.props.controller.entityType,isMergeEnabled:this.isMergeEnabled,disabledMergeButtonTooltip:this.disabledMergeButtonTooltip,hideActions:this.state.isAsyncMergeEnabled&&this.activeMergeStatus===E.MergeStatuses.SUCCESSFUL}),this.state.isAsyncMergeEnabled&&l.createElement(E.MergeStatusBanner,{status:this.activeMergeStatus,suggestRefreshOnFailure:"BadRequestError"===m().get(this.asyncMergeError,"applicationFailureInfo.type")}),this.state.isAsyncMergeEnabled&&this.activeMergeStatus===E.MergeStatuses.SUCCESSFUL&&l.createElement(E.EmptyDiffState,{entityType:this.props.controller.entityType}),this.state.isAsyncMergeEnabled&&this.activeMergeStatus===E.MergeStatuses.SUCCESSFUL?null:this.state.isDiffV2?l.createElement(ce,null,this.state.diffManager&&l.createElement(E.DiffRenderer,{diffManager:this.state.diffManager,onPullChanges:this.pullChanges,isResolutionEnabled:this.props.controller.pullChanges})):l.createElement("div",{className:"collection-diff__wrapper"},l.createElement(S.default,{diff:this.state.parsedDiff,updateConflictCount:this.handleConflictUpdate})),l.createElement(I.default,{isOpen:this.state.showMergeModal,changes:n.allChanges||m().get(this.state,"diffManager.changeCount"),toggleMergeModal:this.toggleMergeModal,entity:e,loading:this.isMerging,onConfirm:this.onMerge,entityType:this.props.controller.entityType}))}},r=H(s.prototype,"activeMergeStatusForAsyncMerge",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.MergeStatuses.INACTIVE}}),i=H(s.prototype,"asyncMergeError",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=H(s.prototype,"isMerging",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H(s.prototype,"activeMergeStatus",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"activeMergeStatus"),s.prototype),H(s.prototype,"isMergeEnabled",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"isMergeEnabled"),s.prototype),H(s.prototype,"setAsyncMergeStatus",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"setAsyncMergeStatus"),s.prototype),H(s.prototype,"setSyncMergeStatus",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"setSyncMergeStatus"),s.prototype),H(s.prototype,"setAsyncMergeError",[d.action],Object.getOwnPropertyDescriptor(s.prototype,"setAsyncMergeError"),s.prototype),H(s.prototype,"disabledMergeButtonTooltip",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"disabledMergeButtonTooltip"),s.prototype),o=s))||o},"./version-control/diff/components/MergeCollectionModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("./node_modules/classnames/index.js"),a=n.n(i),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("./js/components/base/Buttons.js"),m=n("./js/components/base/Modals.js"),h=n("./version-control/common/CustomTooltip/index.js");const f="Changes cannot be merged.",g={collection:{default:f,updateSourceWithDestination:"You need Editor role on the source collection.",deleteSource:"You need Editor role on the source collection."},environment:{default:f,updateSourceWithDestination:"You need Editor role on the source environment.",deleteSource:"You need Editor role on the source environment."}},v=[{displayName:"Merge changes",name:"default",description:"The destination will be updated with the changes",allowed:!0},{displayName:"Merge changes and update source",name:"updateSourceWithDestination",description:"Both the source and destination will be updated",allowed:!0},{displayName:"Merge changes and delete source",name:"deleteSource",description:"The destination will be updated and the source will be deleted",allowed:!0}];function y(e){const{mergeStrategy:t,isSelected:n,onChange:s,entityType:i}=e;return o.createElement(h.CustomTooltip,{body:!t.allowed&&r().get(g,[i,t.name]),tooltipClassName:"collection-merge__option-tooltip",className:"collection-merge__option-tooltip-anchor",align:"right"},o.createElement("div",{className:a()("collection-merge__option",{"collection-merge__option--active":n},{"collection-merge__option--disabled":!t.allowed})},o.createElement("label",null,o.createElement(l.default,null,o.createElement(c.default,{value:n&&t.name,onChange:s},o.createElement(d.default,{checked:n&&t.allowed,className:"collection-merge__radio",isDisabled:!t.allowed,name:"merge-strategy",size:"md",value:t.name})),o.createElement("div",null,o.createElement("strong",null,r().get(t,"displayName")),o.createElement("p",{className:"collection-merge__strategy-description"},r().get(t,"description")))))))}class b extends o.Component{constructor(e){super(e),this.state={selectedMergeStrategy:"default"},this.handleMergeStrategyChange=this.handleMergeStrategyChange.bind(this),this.handleConfirm=this.handleConfirm.bind(this)}handleMergeStrategyChange(e){this.setState({selectedMergeStrategy:e})}handleConfirm(){const e="default"===this.state.selectedMergeStrategy?null:this.state.selectedMergeStrategy;this.props.onConfirm("merge",{mergeStrategy:e})}render(){const e=this.props.mergeStrategies&&this.props.mergeStrategies.length?this.props.mergeStrategies:v;return o.createElement(m.Modal,{isOpen:this.props.isOpen,onRequestClose:this.handleClose,className:""},o.createElement(m.ModalHeader,null,"Confirm merge"),o.createElement(m.ModalContent,null,o.createElement("div",null,o.createElement("label",{className:"collection-merge__label"},"Choose how you want to proceed",this.props.changes&&o.createElement("p",{className:"collection-merge__label-summary"},"You're merging ",this.props.changes,' changes into "',r().get(this.props,"entity.name"),'"')),e.map(((e,t)=>o.createElement(y,{key:t,mergeStrategy:e,isSelected:e.name===this.state.selectedMergeStrategy,onChange:this.handleMergeStrategyChange,entityType:this.props.entityType}))),o.createElement("div",{className:"collection-merge__actions"},o.createElement(p.Button,{className:"collection-merge__actions-cancel",type:"secondary",size:"small",onClick:()=>this.props.toggleMergeModal()},"Cancel"),o.createElement("div",{style:{flex:"auto"}},o.createElement(u.default,{type:"primary",size:"medium",onClick:this.handleConfirm,isDisabled:!this.state.selectedMergeStrategy||this.props.loading,className:"collection-merge__actions-merge",isLoading:this.props.loading,fullWidth:!0,text:"Merge"}))))))}}},"./version-control/diff/components/Topbar.js":function(e,t,n){"use strict";n.r(t),n.d(t,{TopbarActions:function(){return m},TopbarDescription:function(){return f},default:function(){return v}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=n("./js/components/base/Buttons.js"),d=n("./version-control/common/index.js"),u=n("./appsdk/components/link/Link.js");const p=s.default.div`
  margin-right: ${({theme:e})=>e["spacing-l"]};
`;function m(e){const t=e.pullChanges?"Pull Changes":"Merge All Changes";return o.createElement(p,null,o.createElement(r.default,{isDisabled:!e.isMergeEnabled,type:"primary",size:"medium",tooltip:e.disabledMergeButtonTooltip,className:"collection-diff-topbar__actions-merge",onClick:()=>{e.pullChanges?e.handleMerge():e.toggleMergeModal()},text:t}),o.createElement(c.Button,{type:"secondary",size:"small",className:"collection-diff-topbar__actions-cancel",onClick:()=>e.onCancel()},e.topbarCancelNavigationProps?o.createElement(u.default,e.topbarCancelNavigationProps,e.merging?"Close Tab":"Cancel"):e.merging?"Close Tab":"Cancel"),o.createElement(c.Button,{className:"collection-diff-topbar__actions-refresh",type:"secondary",disabled:e.isOffline,tooltip:e.isOffline&&"You can perform this action once you're back online",size:"small",onClick:e.handleFetchDiff},o.createElement(l.default,{name:"icon-action-refresh-stroke",className:"collection-diff-topbar__actions-refresh-icon",size:"large"}),"Refresh"))}const h=(0,s.default)(i.default)`
  margin-left: ${({theme:e})=>e["spacing-l"]};
`;function f(e){return o.createElement(a.default,{width:"100%",alignItems:"center",className:"merge-topbar-root"},o.createElement(h,{color:"content-color-primary",type:"h4",text:e.title||"Merge Changes"}),o.createElement("span",{style:{flex:"auto"}}),!e.hideActions&&o.createElement(m,{activeWorkspace:e.activeWorkspace,canMergeEntity:e.canMergeEntity,hasConflicts:e.hasConflicts,merging:e.merging,isOffline:e.isOffline,pullChanges:e.pullChanges,toggleMergeModal:e.toggleMergeModal,onTabClose:e.onTabClose,onCancel:e.onCancel,handleMerge:e.handleMerge,handleFetchDiff:e.handleFetchDiff,topbarCancelNavigationProps:e.topbarCancelNavigationProps,entityType:e.entityType,isMergeEnabled:e.isMergeEnabled,disabledMergeButtonTooltip:e.disabledMergeButtonTooltip}))}const g=s.default.div`
  display: inline-block;
  margin-bottom: ${({theme:e})=>e["spacing-xs"]};
  margin-top: ${({theme:e})=>e["spacing-s"]};
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e["size-m"]};
`;function v(e){return o.createElement(o.Fragment,null,o.createElement(g,null,o.createElement(f,{profilePicUrl:e.profilePicUrl,userId:e.userId,isOffline:e.isOffline,userName:e.userName,canMergeEntity:e.canMergeEntity,hasConflicts:e.hasConflicts,merging:e.merging,pullChanges:e.pullChanges,toggleMergeModal:e.toggleMergeModal,title:e.title,onTabClose:e.onTabClose,onCancel:e.onCancel,handleMerge:e.handleMerge,handleFetchDiff:e.handleFetchDiff,topbarCancelNavigationProps:e.topbarCancelNavigationProps,entityType:e.entityType,isMergeEnabled:e.isMergeEnabled,disabledMergeButtonTooltip:e.disabledMergeButtonTooltip,hideActions:e.hideActions})),o.createElement("div",{className:"collection-diff-header collection-diff-header-label"},o.createElement(d.SourceDestinationLabel,{source:e.forkedEntity,destination:e.baseEntity,className:"collection-diff__source-destination-label",modelDisplayName:e.entityType,modelType:e.entityType})))}},"./version-control/diff/controllers/DiffController.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("./appsdk/workbench/BaseWorkbenchController.js"),s=n("./js/stores/CurrentUserStore.js"),r=n("./js/stores/StoreManager.js"),i=n("./js/services/PerformanceTelemetryService/index.js"),a=n("./version-control/constants.js");class l extends o.default{didCreate({routeParams:e,queryParams:t}){const n=this.getRouteParams();this.toId=n.toId,this.fromId=t&&t.source,this.userStore=(0,r.resolveStoreInstance)(s.default),this.pullChanges=t&&t["pull-changes"],this.entityType=n.entityType,this.isSyncFlow=t&&"sync"===t.workflow,this.pullRequest=t&&t["pull-request"],this.pullRequestCreate=t&&t.create,this.pullRequestEdit=t&&t.edit,this.userData={id:this.userStore.id,name:this.userStore.name,email:this.userStore.username_email,username:this.userStore.username_email,profilePicUrl:this.userStore.profile_pic_url}}didActivate(){i.default.startSpan(a.events.DIFF_LOAD_TIME)}beforeDestroy(){this.toId=null,this.fromId=null,this.userStore=null,this.pullChanges=null,this.pullRequest=null,this.isSyncFlow=null,this.entityType=null}}},"./version-control/diff/services/DiffService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchCollection:function(){return c},fetchDiff:function(){return a},mergeChanges:function(){return l}});n("./node_modules/lodash/lodash.js");var o=n("./node_modules/querystring-browser/querystring.js"),s=n.n(o),r=n("./js/modules/services/RemoteSyncRequestService.js"),i=n("./version-control/pull-request/services/PullRequestService.js");function a(e,t){return r.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"get",path:`/collection/diff/${e}?source=${t}`}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}function l(e,t){const n={source:e.sourceId,merge_strategy:t};return Promise.resolve(e.destinationId&&"collection"===e.entityType&&(0,i.isCollectionParentAPIGitLinked)(e.destinationId)).then((t=>t?Promise.reject(new Error("Cannot merge changes into a collection that's part of a Git-connected API.")):r.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"put",path:`/collection/merge/${e.destinationId}?${s().stringify(n)}`,body:{resolved_conflicts:e.resolved_conflicts}}}))).then((({body:e})=>Promise.resolve(e))).catch((e=>Promise.reject(e.error||e)))}function c(e){return r.default.request(`/collection/${e}`,{method:"get"}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}},"./version-control/fork/ForkController.js":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-management/index.ts");t.default=o.ForkWorkbenchController},"./version-control/fork/ForkListController.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o,s,r=n("./appsdk/workbench/BaseWorkbenchController.js"),i=n("./js/modules/services/RemoteSyncRequestService.js"),a=n("../../node_modules/mobx/lib/mobx.module.js"),l=n("./js/stores/SyncStatusStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./node_modules/lodash/lodash.js");function u(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let p=(o=class extends r.default{constructor(...e){var t,n,o,r;super(...e),this.modelName="",t=this,n="loading",r=this,(o=s)&&Object.defineProperty(t,n,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}async didCreate(){this.setLoading(!0);const e=this.getRouteParams();this.modelId=e.id,this.model=e.model,(0,c.resolveStoreInstance)(l.default).onSyncAvailable({timeout:1e4}).then((()=>this.modelMeta(this.model,this.modelId))).then((e=>{this.setModelName(d.get(e,"data.name")),this.setTitle(`Forks (${d.get(e,"data.name")})`),this.setLoading(!1)})).catch((({error:e})=>{this.setLoading(!1),pm.logger.error("ForkListController~Error fetching model info",e)}))}setLoading(e){this.loading=e}setModelName(e){this.modelName=e}modelMeta(e,t){return i.default.request(`/${e}/${t}`,{method:"get"}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}},s=u(o.prototype,"loading",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u(o.prototype,"setLoading",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"setLoading"),o.prototype),u(o.prototype,"setModelName",[a.action],Object.getOwnPropertyDescriptor(o.prototype,"setModelName"),o.prototype),o)},"./version-control/fork/ForkListPagination.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./version-control/common/index.js"),a=n("./node_modules/lodash/lodash.js");const l=r.default.div`
  display: inline-block;
  color: var(--content-color-secondary);
  border-radius: var(--border-radius-default);
  font-size: var(--text-size-m);
  padding: var(--spacing-s) var(--spacing-m);
  margin-right: var(--spacing-s);
  background-color: ${e=>e.active&&"var(--highlight-background-color-primary)"};

  &:hover {
    cursor: pointer;
    background-color: var(--highlight-background-color-primary);
  }
`,c=r.default.span`
  position: relative;
  bottom: 3px;

  div:last-child {
    margin-right: 0;
  }
`,d=r.default.div`
  margin: var(--spacing-l) var(--spacing-xs);
  min-width: 250px;
`,u=r.default.span`
  cursor: ${e=>e.active?"pointer":"not-allowed"};
  margin-left: var(--spacing-s);
  margin-right: var(--spacing-s);
`,p=Math.floor(2.5);function m(e){const t=a.get(e,"pageInfo.pages"),n=a.get(e,"pageInfo.currentPage"),[r,m]=(0,o.useState)([]),h=a.range(1,t+1);return(0,o.useEffect)((()=>{const t=((e,t,n)=>{let o=[];if(t.pages<=5)return o=a.range(1,t.pages+1),o;{const s=n.indexOf(e);let r=s-p,i=s+p;return r<0&&(r=0,i=4),i>=t.pages&&(i=t.pages-1,r=i-4),o=n.slice(r,i+1),o}})(n,e&&e.pageInfo,h);m(t)}),[]),o.createElement(d,null,o.createElement(i.CustomTooltip,{align:"right",body:n<=1&&"No more pages to load"},o.createElement(u,{active:n>1,onClick:()=>n>1&&e.onPageClick({pageNumber:n-1,pageId:a.get(e,"pageInfo.pageId")})},o.createElement(s.default,{name:"icon-direction-left",size:"large",color:n>1?"content-color-primary":"content-color-tertiary"}))),o.createElement(c,null,(r||[]).map((t=>o.createElement(l,{key:t,id:t,active:t===n,onClick:()=>e.onPageClick({pageNumber:t,pageId:a.get(e,"pageInfo.pageId")})},t)))),o.createElement(i.CustomTooltip,{align:"right",body:n>=t&&"No more pages to load"},o.createElement(u,{active:n<t,onClick:()=>n<t&&e.onPageClick({pageNumber:n+1,pageId:a.get(e,"pageInfo.pageId")})},o.createElement(s.default,{name:"icon-direction-right",size:"large",color:n<t?"content-color-primary":"content-color-tertiary"}))))}},"./version-control/fork/ForkListWorkbench.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/querystring-browser/querystring.js"),i=n.n(r),a=n("./js/stores/SyncStatusStore.js"),l=n("./js/stores/StoreManager.js"),c=n("./version-control/fork/ForkTableBody.js"),d=n("./js/modules/services/RemoteSyncRequestService.js"),u=n("./node_modules/lodash/lodash.js");const p=s.default.div`
  overflow-y: auto;
  height: 100%;
  margin-top: var(--spacing-m);
`,m=20,h="createdAt",f="desc";function g(e){const[t,n]=(0,o.useState)([]),[s,r]=(0,o.useState)({}),[g,v]=(0,o.useState)(!0),[y,b]=(0,o.useState)(!1),[E,C]=(0,o.useState)(null),_=(0,l.resolveStoreInstance)(a.default),S=e.controller.modelId,w=!(0,l.resolveStoreInstance)(a.default).isSocketConnected;(0,o.useEffect)((()=>{I()}),[]);const I=(t={})=>{v(!0),C(null);const o={populateUsers:!0,pageSize:m,sortBy:h,sortType:f,pageNumber:t.pageNumber,previousPageId:t.pageId};_.onSyncAvailable({timeout:5e3}).then((()=>d.default.request(`/${e.controller.model}/${S}/fork-list?${i().stringify(o)}`))).then((e=>{n(u.get(e,"body.data.forks")),b(!(u.get(e,"body.data.forks")||[]).length),r({pages:u.get(e,"body.data.availablePages"),pageId:u.get(e,"body.data.pageId"),currentPage:u.get(e,"body.data.pageNumber"),publicForks:u.get(e,"body.data.publicForkCount"),privateForks:u.get(e,"body.data.privateForkCount"),hiddenForks:u.get(e,"body.data.hiddenForkCount"),totalForks:u.get(e,"body.data.totalForkCount")}),v(!1)})).catch((e=>{C(e),v(!1),pm.logger.error("Unable to fetch fork list",e)}))};return o.createElement(p,null,o.createElement(c.default,{loading:g||e.controller.loading,isOffline:w,isEmpty:y,error:E,modelName:u.get(e,"controller.modelName"),model:u.get(e,"controller.model"),pageInfo:s,forks:t,fetchForkListPage:I}))}},"./version-control/fork/ForkTableBody.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-openWeb-stroke.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoFork.js"),p=n("./node_modules/moment-timezone/index.js"),m=n.n(p),h=n("./version-control/common/TabLoader.js"),f=n("./version-control/common/index.js"),g=n("./js/components/base/Avatar.js"),v=n("./version-control/common/TabEmptyState.js"),y=n("./version-control/fork/ForkListPagination.js"),b=n("./appsdk/components/link/Link.js"),E=n("./js/components/base/Buttons.js"),C=n("./js/utils/PluralizeHelper.js"),_=n("./version-control/common/workbench-items.js"),S=n("./version-control/common/ItemLink.js"),w=n("./node_modules/lodash/lodash.js");const I=s.default.div`
  margin-left: var(--spacing-l);
  margin-right: var(--spacing-l);
`,T=s.default.div`
  padding-bottom: var(--spacing-xl);
`,x=s.default.div`
  font-size: var(--text-size-m);
  color: var(--content-color-secondary);
  font-weight: var(--text-weight-regular);
  display: flex;
`,j=s.default.div`
  .fork-list {
    font-size: var(--text-size-m);
    line-height: var(--line-height-s);
    width: 100%;

    thead {
      font-weight: var(--text-weight-medium);
      border-bottom: var(--border-width-default) var(--border-style-solid)
        var(--border-color-default);
      color: var(--content-color-secondary);

      td {
        padding: var(--spacing-l);
      }
    }

    tbody {
      font-size: var(--font-size-m);
      color: var(--content-color-primary);

      td {
        padding: var(--spacing-m) var(--spacing-m);

        &:first-child {
          min-width: 200px;
        }
      }

      tr {
        border-bottom: 1px solid var(--border-color-default);

        &:hover {
          background: var(--background-color-secondary);
          border-radius: var(--border-radius-default);
        }
      }
    }

    &__label {
      white-space: nowrap;
      max-width: 240px;
      text-overflow: ellipsis;
      overflow: hidden;
      display: inline-block;
      color: var(--content-color-primary);

      &:hover {
        text-decoration: underline;
        cursor: pointer;
      }
    }

    &__creator {
      display: flex;
      align-items: center;
      min-width: 320px;
      max-width: 360px;

      i {
        margin-right: var(--spacing-m);
      }

      &-name {
        white-space: nowrap;
        max-width: 240px;
        text-overflow: ellipsis;
        overflow: hidden;
        display: inline-block;
        margin-left: var(--spacing-s);
        margin-top: var(--spacing-xs);
        color: var(--content-color-primary);

        &:hover {
          color: var(--content-color-secondary);
        }
      }
    }

    &__time {
      min-width: 120px;
      color: var(--content-color-secondary);
      font-size: var(--text-size-m);
    }
  }
`,k=s.default.div`
  display: flex;
  margin-bottom: var(--spacing-l);
  border-bottom: 1px solid var(--border-color-default);

  span {
    color: var(--content-color-primary);
    font-size: var(--text-size-l);
    font-weight: var(--text-weight-medium);
    margin-left: var(--spacing-l);
    margin-bottom: var(--spacing-m);
  }

  div {
    cursor: pointer;
  }
`;function R(e){var t;const n=o.createElement("p",null,o.createElement("span",null,"Learn more about "),o.createElement(i.default,{inline:!0,alignItems:"center"},o.createElement(a.default,{type:"link-default"},o.createElement(b.default,{to:"https://learning.postman.com/docs/collaborating-in-postman/using-version-control/forking-entities/",target:"_blank"},"forks")),o.createElement(r.default,null))),s=o.createElement(E.Button,{type:"primary",size:"small",onClick:e.fetchForkListPage},"Retry"),p=C.default.pluralize({count:w.get(e,"pageInfo.totalForks"),singular:"fork",plural:"forks"});if(e.loading)return o.createElement(h.default,null);if(e.isOffline)return o.createElement(_.WorkbenchEmptyStateContainer,null,o.createElement(v.default,{showAction:!0,illustration:o.createElement(l.default,null),title:"Check your connection",message:"Get online to view your list of forks.",action:s}));if(e.error){const t="object"==typeof e.error&&"forbiddenError"===e.error.name;return o.createElement(_.WorkbenchEmptyStateContainer,null,o.createElement(v.default,{illustration:t?o.createElement(c.default,null):o.createElement(d.default,null),title:t?"Cannot view forks":"Unable to load list of forks",message:t?`You don't have permission to view the forks of this ${e.model}.`:w.get(e,"error.error.message")||"Try refetching forks"}))}if(e.isEmpty){const t=Boolean(w.get(e,"pageInfo.hiddenForks"));return o.createElement(_.WorkbenchEmptyStateContainer,null,o.createElement(v.default,{showAction:!0,illustration:o.createElement(u.default,null),title:t?`${w.get(e,"pageInfo.totalForks")} ${p} of ${e.modelName}`:"There are no forks",message:t?"They aren't visible because they're in workspaces you don't have access to.":`All forks created from this ${e.model} will appear here.`,action:n}))}return o.createElement(o.Fragment,null,o.createElement(k,null,o.createElement("span",null,"Forks (",e.modelName,")")),o.createElement(I,null,o.createElement(x,null,w.get(e,"pageInfo.totalForks")," ",p," of ",e.modelName,".",w.get(e,"pageInfo.hiddenForks")>0?` ${w.get(e,"pageInfo.hiddenForks")} of those aren't in this list because they're in workspaces you don't have access to.`:""),o.createElement(T,null,o.createElement(j,null,o.createElement("table",{className:"fork-list"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("td",null,"Fork label"),o.createElement("td",null,"Created by"),o.createElement("td",null,"Created on"))),o.createElement("tbody",null,(e.forks||[]).map((t=>o.createElement("tr",{key:t.modelId},o.createElement("td",null,o.createElement(b.default,{to:t.modelId?`${pm.artemisUrl}/${e.model}/${t.modelId}`:"",disabled:!t.modelId},o.createElement("span",{className:"fork-list__label",title:t.forkName},o.createElement(S.default,{text:t.forkName})))),o.createElement("td",null,o.createElement("div",{className:"fork-list__creator"},o.createElement(g.default,{size:"medium",userId:w.get(t,"createdBy.id"),customPic:w.get(t,"createdBy.profilePicUrl")}),o.createElement(f.Username,{className:"fork-list__creator-name",currentUserId:w.get(t,"createdBy.id"),id:w.get(t,"createdBy.id"),user:t.createdBy}))),o.createElement("td",null,o.createElement("div",{className:"fork-list__time"},m()(t.createdAt).format("DD MMM, YYYY"))))))))),(null===(t=e.pageInfo)||void 0===t?void 0:t.pages)>1&&o.createElement(y.default,{pageInfo:e.pageInfo,onPageClick:e.fetchForkListPage}))))}},"./version-control/fork/ForkWorkbench.js":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-management/index.ts");t.default=o.ForkWorkbench},"./version-control/hooks/useResize.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js");function r({onResize:e,debounceTime:t}){const n=(0,o.useRef)(),[r,i]=(0,o.useState)(),a=t=>{e(t[0])},l=t?s.debounce(a,t):a;return(0,o.useEffect)((()=>{n.current&&n.current.disconnect(),r&&(n.current=n.current||new window.ResizeObserver(l),n.current.observe(r))}),[r]),(0,o.useEffect)((()=>()=>{n.current&&n.current.disconnect()}),[]),i}},"./version-control/pull-request/components/DeclineConfirmationModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./version-control/common/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function a(e){const t=o.createElement("p",null,"This action cannot be undone. To request edits or leave feedback, add a comment instead."),[n,a]=(0,o.useState)();return o.createElement(s.ConfirmationModal,{preventFocusReset:!0,title:"Decline pull request?",primaryAction:"Decline Pull Request",secondaryAction:"Cancel",isDisabled:e.declining,message:t,isOpen:e.open,onConfirm:function(){e.onConfirm({comment:n})},onClose:e.onClose,isOffline:e.isOffline},o.createElement(r.default,{value:n,onChange:e=>{a(e.target.value)},label:o.createElement(i.default,{text:"Add a note",fieldType:"optional"}),helperText:"Help others understand why the pull request is declined",fieldType:"optional"}))}},"./version-control/pull-request/components/DiffNavigation.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./js/components/base/Buttons.js"),a=n("./version-control/common/Badge.js"),l=n("./version-control/constants.js"),c=n("./node_modules/lodash/lodash.js");const d={collection:"icon-entity-collection-stroke",response:"icon-entity-example-stroke",folder:"icon-entity-folder-stroke",request:"icon-entity-request-stroke"},u={GET:"GET",DELETE:"DEL",PATCH:"PATCH",POST:"POST",PUT:"PUT"},p=s.default.div`
  font-size: 8px;
  line-height: var(--line-height-xs);
  text-align: right;
  color: ${e=>{switch(e.method){case"GET":return"var(--base-color-success)";case"POST":return"var(--base-color-warning)";case"PUT":return"var(--base-color-info)";case"DELETE":return"var(--base-color-error)";default:return"var(--content-color-secondary)"}}};
  margin-right: var(--spacing-xs);
  width: 24px;
  letter-spacing: -0.2px;
  overflow: hidden;
`;function m(e){return"request"===e.type?o.createElement(p,{method:e.method},u[e.method]||e.method):d[e.type]?o.createElement(r.default,{className:"diff-nav-item__icon",name:d[e.type],color:"content-color-secondary"}):null}const h=s.default.div`
  height: 28px;
  font-size: var(--text-size-m);
  line-height: var(--line-height-m);
  display: flex;
  align-items: center;
  position: relative;
  color: ${({theme:e})=>e["content-color-primary"]};

  .arrow-btn {
    padding: 0;
    min-width: auto;
    height: 16px;

    &.hidden {
      visibility: hidden;
    }
  }

  .diff-nav-item__icon {
    margin-right: var(--spacing-xs);
    flex: 0 0 24px;
    justify-content: flex-end;
  }

  .diff-nav-item__name {
    cursor: pointer;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding-right: 84px;
  }

  .diff-nav-item__name:hover {
    text-decoration: underline;
  }

  .diff-nav-item__name--errored > span {
    opacity: 0.5;
  }

  .diff-nav-item__name > i {
    vertical-align: middle;
    margin-left: ${({theme:e})=>e["spacing-xs"]};
  }

  .pm-badge {
    position: absolute;
    right: 0;
  }
`,f=s.default.div`
  padding-left: var(--spacing-s);
`;function g(e){const[t,n]=(0,o.useState)(!1),s=c.get(e,"conflictActions.length")?"conflict":c.get(e,"diffActions.length")&&l.DIFF_ACTION_MAP[e.diffActions[0]];return o.createElement(o.Fragment,null,o.createElement(h,{className:"diff-nav-item"},!e.noCaret&&o.createElement(i.Button,{className:`arrow-btn ${!e.children&&"hidden"}`,type:"tertiary",size:"small",onClick:()=>n((e=>!e))},o.createElement(r.default,{name:t?"icon-direction-right":"icon-direction-down",color:"content-color-secondary"})),o.createElement(m,{method:e.method,type:e.type}),o.createElement("div",{className:"diff-nav-item__name",title:e.name,onClick:()=>e.anchor?e.onClick(e.anchor):e.onClick(`${e.type}-${e.id}`)},o.createElement("span",null,e.name)),!!s&&o.createElement(a.Badge,{pmStyle:l.DIFF_ACTION_STYLE_MAP[s]||"secondary",size:"small",text:s})),e.children&&!t&&o.createElement(f,null,e.children))}function v(e={},t){if(c.isEmpty(e))return null;const n={...e,onClick:t};return e.items&&e.items.length?o.createElement(g,n,e.items.map((e=>v(e,t)))):o.createElement(g,n)}const y=s.default.h4`
  font-size: var(--text-size-m);
  font-weight: var(--text-weight-medium);
  margin: 0 0 var(--spacing-l) 0;
  color: ${({theme:e})=>e["content-color-primary"]};
`,b=s.default.div`
  margin-left: ${e=>e.itemCount?0:"-16px"};
`;function E(e){return o.createElement("div",null,o.createElement(y,null,"Jump to"),o.createElement(b,{itemCount:c.get(e,"nodes.length")},o.createElement(o.Fragment,null,e.nodes.map((t=>v(t,e.onClick))))))}},"./version-control/pull-request/components/DiffNavigation/floatingDiffNavigation.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./version-control/pull-request/components/DiffNavigation.js"),a=n("./version-control/pull-request/components/DiffNavigation/popover.js");const l=s.default.div`
  position: absolute;
  bottom: ${({theme:e})=>e["spacing-xxl"]};
  right: ${({theme:e})=>e["spacing-xxl"]};

  .floating-diff-nav__anchor {
    margin-bottom: ${({theme:e})=>e["spacing-s"]};
  }
`,c=s.default.button`
  /** non standard size used in design. */
  height: 36px;
  width: 36px;
  border-radius: 50%;
  background: ${({theme:e})=>e["background-color-primary"]};
  box-shadow: ${({theme:e})=>e["shadow-default"]};
  border: none;
  display: flex;
  justify-content: center;
  align-items: center;
`;function d(e){const[t,n]=(0,o.useState)(!1),[s,d]=(0,o.useState)(),u=(0,o.useRef)();return o.createElement(o.Fragment,null,o.createElement(l,null,o.createElement("div",{ref:d,className:"floating-diff-nav__anchor"}),o.createElement(c,{onClick:()=>{n(!t)},ref:u},o.createElement(r.default,{name:t?"icon-action-close-stroke":"icon-descriptive-menu-stroke",color:"content-color-primary"}))),o.createElement(a.default,{isOpen:t,container:s,onClose:()=>n(!1)},o.createElement(i.default,{nodes:e.nodes,onClick:e.onClick,error:e.error})))}},"./version-control/pull-request/components/DiffNavigation/popover.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/react-dom/index.js");const r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  background-color: ${({theme:e})=>e["background-color-primary"]};
  transform: translateY(-100%);
  box-shadow: ${({theme:e})=>e["shadow-default"]};
  border-radius: ${({theme:e})=>e["border-radius-default"]};
  padding: ${({theme:e})=>e["spacing-l"]};
  position: absolute;
  right: 0;
  /** as per designs. without this the popover will keep collapsing in size as we collapse entities within. */
  width: 264px;
  max-height: 75vh;
  overflow-y: auto;
  z-index: 1000;
  box-sizing: border-box;
`,i=document.createElement("div");function a(e){const{container:t,children:n,isOpen:a,onClose:l}=e,c=(0,o.useRef)();return(0,o.useEffect)((()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&a&&l()};return window.addEventListener("click",e,!0),()=>{window.removeEventListener("click",e,!0)}}),[a]),(0,o.useEffect)((()=>{if(c.current&&t){const e=t.getBoundingClientRect(),n=264,o=36;c.current.style.top=e.top+"px",c.current.style.left=e.left-n+o+"px"}})),t&&a?s.createPortal(o.createElement(r,{ref:c},n),i):null}i.id="floating-diff-navigation-container",document.body.appendChild(i)},"./version-control/pull-request/components/PullRequestAction/Approve/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/CounterButton.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),d=n("./version-control/common/UserListItem/index.js"),u=n("./js/utils/PluralizeHelper.js"),p=n("./js/stores/CurrentUserStore.js"),m=n("./js/stores/StoreManager.js"),h=n("./version-control/common/OutsideClick/index.js"),f=n("./node_modules/lodash/lodash.js");const g=s.createGlobalStyle`
  .approve-button {
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }

  .approvers-list__popover {
    padding: 0;
    width: 235px;
  }

  .approvers-list__popover .tooltip-wrapper {
    padding: 0;
    padding-bottom: ${({theme:e})=>e["spacing-m"]};
    background-color: ${({theme:e})=>e["background-color-primary"]};
    /** width of the popover as per design.*/
    width: 256px;
    box-sizing: border-box;
  }

  .approvers-list__popover-title {
    padding: ${({theme:e})=>e["spacing-xs"]};
    padding-bottom: ${({theme:e})=>e["spacing-s"]};
  }

  .approvers-list__empty {
    padding:  ${({theme:e})=>e["spacing-s"]} ${({theme:e})=>e["spacing-l"]} ${({theme:e})=>e["spacing-xs"]} ${({theme:e})=>e["spacing-l"]};
  }

  .approvers-list__list {
    all: unset;
    padding-left: 0;
  }

  .user-list-item__tooltip {
    /** Any lesser elevation does not work. */
    z-index: 1010;
    margin-left: ${({theme:e})=>e["spacing-xs"]};
  }

  .user-list-item__tooltip-body.user-list-item__tooltip-body {
    z-index: 10000;
  }
`;function v(e){const[t,n]=(0,o.useState)(!1),s=(0,m.resolveStoreInstance)(p.default).id,v=o.useRef();(0,h.useOutsideClick)(v,(()=>{n(!1)}));const y={primaryButtonText:"approve"===e.action?"Approve":"Unapprove",primaryButtonIcon:"approve"===e.action?"icon-state-pass":"icon-state-disable-stroke",onPrimaryButtonClick:"approve"===e.action?e.onApprove:e.onUnapprove,isPrimaryButtonLoading:e.isLoading,isPrimaryButtonDisabled:e.disabled,primaryButtonTooltip:e.disabled&&e.disabledTooltip,primaryButtonMinWidth:"88px",buttonIconSize:"approve"===e.action?"large":"small"};e.hideLabel&&(y.primaryButtonText="");const b={menuButtonText:f.get(e,"approvers.length",0),isMenuButtonDisabled:e.disabled,menuButtonTooltip:e.disabled&&e.disabledTooltip,onMenuButtonClick(){n(!0)}};return o.createElement(o.Fragment,null,o.createElement(a.default,{className:"approve-button",type:"primary","data-testid":("approve"===e.action?"Approve":"Unapprove")+"-button-wrapper",text:y.primaryButtonText,onClick:y.onPrimaryButtonClick,count:f.get(e,"approvers.length",0),isDisabled:y.isPrimaryButtonDisabled,isLoading:y.isPrimaryButtonLoading,tooltip:y.primaryButtonTooltip,icon:y.primaryButtonIcon,secondaryButton:o.createElement(l.default,{isDisabled:e.disabled,tooltip:b.menuButtonTooltip,ref:v,onClick:()=>{n(!t)}})},o.createElement(c.default,{isOpen:t,placement:"top",maxWidth:300,padding:"spacing-m",className:"approvers-list__popover",triggerRef:v},(()=>{const t=f.get(e,"approvers.length",0),n=`${t} ${u.default.pluralize({count:t,singular:"approver",plural:"approvers"})}`;return o.createElement("div",null,o.createElement("div",{className:"approvers-list__popover-title"},o.createElement(r.default,{text:n,type:"primary"})),o.createElement("ul",{className:"approvers-list__list"},(e.approvers||[]).map((e=>o.createElement(d.default,{key:e.id,user:e,isCurrentUser:s==e.id})))),!f.get(e,"approvers.length")&&o.createElement("div",{className:"approvers-list__empty"},o.createElement(i.default,{type:"body-medium",color:"content-color-primary"},"People who approve this pull request will show up here.")))})())),o.createElement(g,null))}},"./version-control/pull-request/components/PullRequestActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MorePRActions:function(){return R},default:function(){return A}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./js/components/base/Dropdowns.js"),d=n("./js/components/base/Buttons.js"),u=n("./js/services/NavigationService.js"),p=n("./version-control/common/index.js"),m=n("./js/stores/CurrentUserStore.js"),h=(n("./js/stores/SyncStatusStore.js"),n("./js/stores/StoreManager.js")),f=n("./version-control/pull-request/services/PullRequestService.js"),g=(n("./version-control/pull-request/components/PullRequestApprovers.js"),n("./version-control/diff/components/MergeCollectionModal.js")),v=n("./version-control/utils/pullRequest.js"),y=n("./version-control/pull-request/components/DeclineConfirmationModal.js"),b=(n("./js/modules/services/AnalyticsService.js"),n("./appsdk/components/link/Link.js"),n("./version-control/Watch/components/WatchContainer/Watch.js")),E=n("./version-control/constants.js"),C=n("./version-control/pull-request/components/PullRequestAction/Approve/index.js"),_=(n("./js/services/PerformanceTelemetryService/index.js"),n("./version-control/diff/constants.ts")),S=n("./growth/foundation/public/amplitude/AmplitudeService.js"),w=n("../../packages/version-control/change-management/index.ts");const I="refresh",T="edit",x="decline",j="You can perform this action once you're back online";function k(e){return o.createElement(i.default,{type:"primary",isDisabled:e.disabled,tooltip:e.tooltip,onClick:e.onMerge,text:"Merge",className:"pull-request__actions--merge"})}(0,l.default)(a.default)`
  margin-right: var(--spacing-s);
`;class R extends o.Component{constructor(e){super(e),this.getEditOptionDisableText=()=>this.props.isMerging?"We're currently merging the pull request.":this.props.isOffline?j:"Sign in to edit pull requests.",this.getDeclineOptionDisableText=()=>this.props.isMerging?"We're currently merging the pull request.":this.props.isOffline?j:"Sign in to decline pull requests.",this.handleActionSelect=this.handleActionSelect.bind(this)}handleActionSelect(e,...t){const n=(0,h.resolveStoreInstance)(m.default).isLoggedIn;switch(e){case I:!this.props.isOffline&&this.props.onRefresh();break;case T:!this.props.isOffline&&n&&u.default.transitionTo("build.pullRequestEdit",{id:this.props.pullRequestId});break;case x:!this.props.isOffline&&n&&this.props.onDecline()}}render(){return o.createElement(c.Dropdown,{ref:"menu",onSelect:this.handleActionSelect,className:"variable-row-actions-dropdown pull-request__actions-dropdown"},o.createElement(c.DropdownButton,{dropdownStyle:"nocaret",type:"custom",disabled:this.props.isOffline},o.createElement(d.Button,{tooltip:this.props.isOffline&&j},o.createElement(a.default,{name:"icon-action-options-stroke",className:"dropdown-action-button"}))),o.createElement(c.DropdownMenu,{"align-right":!0},o.createElement(c.MenuItem,{key:I,refKey:I,disabled:this.props.isOffline,disabledText:j},o.createElement("div",{className:"dropdown-menu-item-label"},"Refresh")),o.createElement(c.MenuItem,{key:T,refKey:T,disabled:!(0,h.resolveStoreInstance)(m.default).isLoggedIn||this.props.isOffline||this.props.isMerging,disabledText:this.getEditOptionDisableText()},o.createElement("div",{className:"dropdown-menu-item-label"},"Edit")),o.createElement(c.MenuItem,{key:x,refKey:x,disabled:!(0,h.resolveStoreInstance)(m.default).isLoggedIn||this.props.isOffline||this.props.isMerging,disabledText:this.getDeclineOptionDisableText(),className:"pull-request__action--decline"},o.createElement("div",{className:"dropdown-menu-item-label"},"Decline"))))}}const M=l.default.div`
  padding: var(--spacing-s);

  div {
    font-weight: var(--text-weight-bold);
    font-size: var(--text-size-m);
    padding: var(--spacing-s);
  }

  p {
    margin: 0 var(--spacing-s) 0 var(--spacing-s);
  }
`;function P(e){return e.isMergeDisabled?o.createElement(M,null,e.title&&o.createElement("div",null,e.title),e.message&&o.createElement("p",null,e.message||"Something went wrong. Please refresh.")):null}const D=l.default.div`
  display: flex;
  align-items: center;
  justify-content: flex-end;

  .approve-button {
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }
`;function A(e){const[t,n]=(0,o.useState)(!1),[s,i]=(0,o.useState)(!1),[a,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)({}),[I,T]=(0,o.useState)(!1),x=e.reviewers.find((t=>`${t.id}`==`${e.currentUser.id}`)),M=e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS||t||!c.allowMerge||!e.changeCount||!(0,h.resolveStoreInstance)(m.default).isLoggedIn,A=!e.isOffline&&M&&o.createElement(P,{message:(e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS?"We're currently merging this pull request.":!c.allConditionsSatisfied&&"collection"===e.entityType&&"Make sure this Pull Request meets all the merge conditions before trying to merge it.")||!c.allowMerge&&c.reason||!e.changeCount&&"No changes made. Nothing to merge.",title:!c.allConditionsSatisfied&&"collection"===e.entityType&&"Merge conditions not met",isMergeDisabled:M}),L=[E.PR_STATES.OPEN,E.PR_STATES.APPROVED].includes(e.status);(0,o.useEffect)((()=>{O()}),[e.pullRequestId]);const O=()=>{d({mergeStrategies:e.mergeSettings.mergeStrategies,allowMerge:e.mergeSettings.allowMerge,mergeChecks:r().get(e.mergeSettings,"mergeChecks.checks"),allConditionsSatisfied:r().get(e.mergeSettings,"mergeChecks.allConditionsSatisfied"),reason:e.mergeSettings.reason})};return o.createElement(D,{className:"pull-request-actions"},L&&o.createElement(p.CustomTooltip,{body:A,actionTitle:"View Merge Conditions",handleAction:c.allConditionsSatisfied||"collection"!==e.entityType?null:()=>{u.default.transitionTo("build.pullRequestView",{id:e.pullRequestId},{ctx:"merge-checks"})}},o.createElement(k,{disabled:M||e.isOffline,mergeStrategies:c.mergeStrategies,pullRequestId:e.pullRequestId,onMerge:()=>{e.setMergeModalOpen(!0),S.Ampli.pullRequestActionsMergeClicked((0,S.getAmpliCTAProperties)({ctaType:"button",text:"Merge"}))},tooltip:e.isOffline&&j,isMerging:e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS})),L&&o.createElement(C.default,{action:x&&"open"!==x.status?"unapprove":"approve",approvers:e.approvers,isLoading:s||a,disabled:!(0,h.resolveStoreInstance)(m.default).isLoggedIn||e.isOffline||e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS,disabledTooltip:e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS?"We're currently merging this pull request.":e.isOffline&&j,onApprove:()=>{i(!0),S.Ampli.pullRequestActionsApproveClicked((0,S.getAmpliCTAProperties)({ctaType:"button",text:"Approve"})),(0,f.approvePullRequest)(e.pullRequestId).then((t=>{"function"==typeof e.afterApprove&&e.afterApprove(t),pm.toasts.success("You approved this pull request",{noIcon:!0,title:"Success!"}),O();const n=(0,v.isCurrentUserEditor)(e.permissions)&&(0,v.approvedOnce)(e.reviewers||[],c.mergeChecks)&&(0,v.hasEditorApproved)(e.reviewers,e.permissions,c.mergeChecks);d({...c,allowMerge:n})})).catch((e=>{pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to approve pull request"})})).finally((()=>i(!1)))},onUnapprove:()=>{l(!0),S.Ampli.pullRequestActionsApproveClicked((0,S.getAmpliCTAProperties)({ctaType:"button",text:"Unapprove"})),(0,f.unapprovePullRequest)(e.pullRequestId).then((t=>{"function"==typeof e.afterUnapprove&&e.afterUnapprove(t),pm.toasts.success("You unapproved this pull request",{noIcon:!0,title:"Unapproved"}),O();const n=(0,v.isCurrentUserEditor)(e.permissions)&&(0,v.approvedOnce)(e.reviewers||[],c.mergeChecks)&&(0,v.hasEditorApproved)(e.reviewers,e.permissions,c.mergeChecks);d({...c,allowMerge:n})})).catch((e=>{pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to unapprove pull request"})})).finally((()=>l(!1)))},className:"approve-button",hideLabel:e.hideLabels}),o.createElement(b.default,{className:"watch",model:"pullRequest",modelId:e.pullRequestId,subEntityType:e.entityType,hideLabel:e.hideLabels}),L&&o.createElement(R,{pullRequestId:e.pullRequestId,destination:e.destination,onDecline:()=>T(!0),isOffline:e.isOffline,onRefresh:e.onRefresh,isMerging:e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS}),o.createElement(y.default,{open:I,declining:t,isOffline:e.isOffline,onConfirm:t=>{S.Ampli.pullRequestActionsDeclineClicked((0,S.getAmpliCTAProperties)({ctaType:"button",text:"Decline"})),n(!0),(0,f.declinePullRequest)(e.pullRequestId,e.diffVersion===_.DiffVersion.V1?"1.0.0":"2.0.0",t.comment).then((n=>{"function"==typeof e.afterDecline&&e.afterDecline({...n,comment:t.comment}),T(!1),pm.toasts.success("Declined Pull Requests cannot be reopened",{noIcon:!0,title:"Pull Request declined"})})).catch((e=>{pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to decline pull request"})})).finally((()=>n(!1)))},onClose:()=>T(!1)}),o.createElement(g.default,{changes:e.changeCount,entity:e.destination,isOpen:e.isMergeModalOpen,loading:e.activeMergeStatus===w.MergeStatuses.IN_PROGRESS,mergePullRequest:!0,mergeStrategies:c.mergeStrategies,toggleMergeModal:()=>e.setMergeModalOpen(!e.isMergeModalOpen),onConfirm:(t,n)=>{e.merge(n.mergeStrategy)},entityType:e.entityType}))}},"./version-control/pull-request/components/PullRequestApprovers.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=(n("./node_modules/lodash/lodash.js"),n("./js/components/base/Avatar.js")),r=n("./version-control/common/index.js");function i(e){return o.createElement("div",{className:"pull-request-topbar__approver-list"},o.createElement("h4",null,"Approved By"),e.approvers.map((e=>o.createElement("div",{className:"pull-request-user__label",key:e.id},o.createElement(s.default,{size:"medium",userId:e.id,customPic:e.profilePicUrl}),o.createElement(r.Username,{className:"pull-request-user__name",currentUserId:e.id,id:e.id,user:e})))))}},"./version-control/pull-request/components/PullRequestBody/index.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/lodash/lodash.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("./node_modules/react-sticky-box/dist/es/index.js"),l=n("./node_modules/classnames/index.js"),c=n.n(l),d=n("./version-control/pull-request/components/PullRequestEndStateBanner.js"),u=n("./version-control/pull-request/components/PullRequestOverview.js"),p=n("./version-control/pull-request/components/PullRequestDiff.js"),m=n("./version-control/pull-request/components/DiffNavigation.js"),h=n("./version-control/pull-request/components/DiffNavigation/floatingDiffNavigation.js"),f=n("./version-control/hooks/useResize.js"),g=n("./version-control/diff/constants.ts"),v=n("./node_modules/lodash/lodash.js");const y=s.default.div`
  padding: 0 ${({theme:e})=>e["spacing-l"]};
  display: flex;
  flex-direction: column;
  flex: auto;
  overflow-y: auto;
  overflow-x: hidden;

  .pr-body__main-sections {
    margin-top: ${({theme:e})=>e["spacing-l"]};
    width: 65%;
    min-height: calc(100% - ${({theme:e})=>e["spacing-l"]});
  }

  .pr-body__main-sections section {
    margin-top: ${({theme:e})=>e["spacing-l"]};
  }

  .pr-body__main-sections section:first-of-type {
    margin-top: 0;
  }

  .pr_body__main-section-fullwidth {
    width: 100%;
  }

  .pr-body__navigation {
    overflow-x: auto;
    margin-top: ${({theme:e})=>e["spacing-l"]};
    flex: auto;
  }

  /** removing horizontal scroll on diff elements. */
  .pr-diff {
    overflow-x: unset;
  }

  .pr-diff__navigation-wrapper {
    border-left: ${({theme:e})=>`${e["border-width-default"]} ${e["border-style-solid"]} ${e["border-color-default"]}`};
    padding-left: ${({theme:e})=>e["spacing-l"]};
  }
`,b=(0,o.forwardRef)(((e,t)=>{const n=(0,o.useRef)(),[s,l]=(0,o.useState)(!1),b=(0,o.useRef)(),E=(0,f.default)({onResize:t=>{e.onWidthChange(t.contentRect.width),v.get(e,"diffManager.version")!==g.DiffVersion.V2&&(t.contentRect.width>=890?l(!0):l(!1))},debounceTime:100}),C=(0,r.debounce)((t=>{0===t.target.scrollTop?e.onScrolledToTop():e.onScrolledFromTop()}),250);(0,o.useEffect)((()=>(E(b.current),b.current&&b.current.addEventListener("scroll",C),()=>{b.current&&b.current.removeEventListener("scroll",C)})),[]);const _=(0,o.useMemo)((()=>{if(v.get(e,"diffManager.version")===g.DiffVersion.V2)return[];return[{name:"Description",anchor:"pr-description",noCaret:!0},{name:"Changes",anchor:"pr-changes",items:v.get(e,"diffManager.navigation")&&Object.keys(v.get(e,"diffManager.parsedDiff",{})).length&&!e.errorLoadingDiff?[v.get(e,"diffManager.navigation")]:[],noCaret:!0}]}),[v.get(e,"diffManager"),e.errorLoadingDiff]);function S(e){["pr-description","pr-changes"].includes(e)&&b.current.querySelector(`#${e}`).scrollIntoView(),n.current&&n.current.scrollIntoView(e)}return(0,o.useImperativeHandle)(t,(()=>({scrollIntoView:S}))),o.createElement(y,{ref:b},o.createElement(i.default,{gap:"spacing-xl",alignItems:"flex-start",grow:1,shrink:1},o.createElement(i.default,{className:c()("pr-body__main-sections",{"pr_body__main-section-fullwidth":!s||v.get(e,"diffManager.version")===g.DiffVersion.V2}),shrink:0,direction:"column",grow:"auto"},e.isBannerVisible&&o.createElement(d.default,{status:v.get(e,"pullRequest.status"),comment:v.get(e,"pullRequest.comment"),updatedBy:v.get(e,"pullRequest.updatedBy"),updatedAt:v.get(e,"pullRequest.updatedAt")}),o.createElement(u.default,{pullRequest:e.pullRequest}),o.createElement(p.default,{baseEntity:e.baseEntity,currentUser:e.currentUser,diffManager:e.diffManager,errorLoadingDiff:e.errorLoadingDiff,forkedEntity:e.forkedEntity,loadingDiff:e.loadingDiff,pullRequest:e.pullRequest,pullRequestId:e.pullRequest.id,isOffline:e.isOffline,ref:n,validAnchors:e.validAnchors,entityType:e.entityType,scrollDescriptionIntoView:function(){b.current.querySelector("#pr-description").scrollIntoView()}})),(v.get(e,"diffManager.version")===g.DiffVersion.V1&&!v.isEmpty(v.get(e,"diffManager.navigation"))||e.errorLoadingDiff)&&(s?o.createElement(a.default,{className:"pr-body__navigation",offsetTop:parseFloat(e.theme["spacing-l"])},o.createElement("div",{className:"pr-diff__navigation-wrapper"},o.createElement(m.default,{nodes:_,onClick:S}))):o.createElement(h.default,{nodes:_,onClick:S,error:e.errorLoadingDiff}))))}));t.default=(0,s.withTheme)(b)},"./version-control/pull-request/components/PullRequestDiff.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../packages/version-control/change-management/index.ts"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),d=n("./js/components/base/LoadingIndicator.js"),u=n("./version-control/diff/components/Body.js"),p=n("./version-control/pull-request/services/CommentsService.js"),m=n("./js/stores/SyncStatusStore.js"),h=n("./js/stores/StoreManager.js"),f=n("./js/modules/services/AnalyticsService.js"),g=n("./version-control/pull-request/components/PullRequestDiff/pullRequestDiffHeader.js"),v=n("./version-control/common/EmptyState/index.js"),y=n("./version-control/pull-request/components/PullRequestDiff/pullChangesBanner.js"),b=n("./version-control/pull-request/components/PullRequestInlineComment/index.js"),E=n("./version-control/utils/error.js"),C=n("./js/services/NavigationService.js"),_=n("./version-control/diff/constants.ts");function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S.apply(this,arguments)}const w="open",I="merged",T="approved",x="declined",j=i.default.section.attrs((()=>({id:"pr-changes"})))`
  display: flex;
  flex-direction: column;
  flex: auto;
`,k=i.default.div`
  margin: ${({theme:e,noMargin:t})=>e[t?"spacing-zero":"spacing-xl"]}
    0;

  .pr-diff-renderer {
    margin-top: ${({theme:e})=>e["spacing-l"]};
  }
`,R=(0,o.forwardRef)(((e,t)=>{const n=(0,o.useRef)(null),[s,i]=(0,o.useState)([]),[R,M]=(0,o.useState)(!1),P=(0,h.resolveStoreInstance)(m.default).isSocketConnected;let D,A,L,O,N,q,B,F,$;if(r().get(e,"diffManager.version")===_.DiffVersion.V2?(N=!!e.diffManager.isOutOfSync,q=e.diffManager.conflictCount,B=!!q,F=e.diffManager.isDiffEmpty):(D=r().get(e,"diffManager.parsedDiff"),A=r().get(e,"diffManager.parsedOrderedDiff"),L=r().get(e,"diffManager.allChanges"),O=r().get(e,"diffManager.changes"),N=r().get(e,"diffManager.outOfSync"),q=r().get(e,"diffManager.conflicts"),B=r().get(e,"diffManager.conflictsExist"),F=!Object.keys(D||{}).length),(0,o.useImperativeHandle)(t,(()=>({scrollIntoView:e=>{n.current&&n.current.querySelector(`#${e}`).scrollIntoView()}}))),(0,o.useEffect)((()=>{!e.modifyState&&P&&(M(!0),(0,h.resolveStoreInstance)(m.default).onSyncAvailable({timeout:1e4}).then((()=>p.default.getComments("pullRequest",e.pullRequestId))).then((e=>{i(e)})).catch((e=>{pm.toasts.error("Unable to fetch comments on pull-request's diff")})).finally((()=>M(!1))))}),[]),(0,o.useEffect)((()=>{(e.diffManager||e.errorLoadingDiff)&&f.default.addEventV2({category:e.entityType,action:"view_diff",label:"pr_view",entityType:e.entityType,entityId:r().get(e,"forkedEntity.uid"),meta:{hasConflicts:B}})}),[e.errorLoadingDiff,e.diffManager]),e.loadingDiff)return o.createElement("div",{className:"pull-request__loading"},o.createElement(d.default,null));if(!r().get(e,"baseEntity.exists"))return o.createElement(j,null,o.createElement(l.default,{text:"Changes",type:"h4",hasBottomSpacing:!0}),o.createElement(v.EmptyState,{body:`We were unable to fetch the destination ${e.entityType}. You may not have access on it or it may have been deleted.`,className:"pull-request__error-state",title:"Unable to show changes",illustration:o.createElement(c.default,null)}));if(e.errorLoadingDiff)return[T,w].includes(r().get(e,"pullRequest.status"))?o.createElement(j,null,o.createElement(l.default,{text:"Changes",type:"h4",hasBottomSpacing:!0}),o.createElement(v.EmptyState,{body:r().get(e,"forkedEntity.id")?e.errorLoadingDiff.message:`We were unable to fetch the source ${e.entityType}. You may not have access on it or it may have been deleted.`,className:"pull-request__error-state",title:"Unable to show changes",illustration:o.createElement(c.default,null)})):o.createElement(j,null,o.createElement(l.default,{text:"Changes",type:"h4",hasBottomSpacing:!0}),o.createElement(v.EmptyState,{body:e.errorLoadingDiff.message||"",className:"pull-request__error-state",title:"Unable to show changes",illustration:(0,E.getErrorIllustration)(r().get(e,"errorLoadingDiff.code",400))}));if($=e.editPullRequest?"edit"===e.modifyState?{"pull-request":e.pullRequestId,edit:!0,"pull-changes":!0,source:r().get(e,"baseEntity.uid")}:{create:!0,"pull-changes":!0,source:r().get(e,"baseEntity.uid")}:e.pullRequestId&&{"pull-request":e.pullRequestId,"pull-changes":!0,source:r().get(e,"baseEntity.uid")},e.pullRequest&&F)return o.createElement(j,null,o.createElement(l.default,{text:"Changes",type:"h4"}),(N||B)&&[w,T].includes(r().get(e,"pullRequest.status"))&&o.createElement(y.default,{state:e.conflictsExist?y.default.STATES.CONFLICTED:y.default.STATES.OUT_OF_SYNC,navigationOptions:{route:"build.merge",routeParams:{toId:r().get(e,"forkedEntity.uid"),entityType:e.entityType},queryParams:$},relevance:e.conflictsExist&&e.isPullChangesMandatory?y.default.RELEVANCES.HIGH:y.default.RELEVANCES.LOW}),o.createElement(v.EmptyState,{body:"Changes you make to the source will appear here. You can merge them afterwards.",className:"pull-request__error-state",title:"No changes to show",illustration:o.createElement(c.default,null)}));if(!e.pullRequest&&F)return o.createElement(j,null,(N||B)&&o.createElement(y.default,{state:e.conflictsExist?y.default.STATES.CONFLICTED:y.default.STATES.OUT_OF_SYNC,navigationOptions:{route:"build.merge",routeParams:{toId:r().get(e,"forkedEntity.uid"),entityType:e.entityType},queryParams:$},relevance:e.conflictsExist?y.default.RELEVANCES.HIGH:y.default.RELEVANCES.LOW}),o.createElement(v.EmptyState,{body:"Changes you make to the source will appear here. You can merge them afterwards.",className:"pull-request__error-state",title:"No changes to show",illustration:o.createElement(c.default,null)}));const U={centered:!0,disableConflictResolution:!0,diff:A||D,diffRef:n,entityComments:s,loadingComments:R,className:"pull-request__diff-body"};e.editPullRequest||(U.enableComments=!0,U.commentComponent=b.default,U.commentModelObject=e.pullRequest);return o.createElement(o.Fragment,null,o.createElement(g.default,{conflicts:q,changes:O,outOfSync:N,conflictsExist:B,isOffline:e.isOffline,onPullChanges:()=>{f.default.addEventV2({category:e.entityType,action:"initiate_pull",label:"pr_view",entityType:e.entityType,entityId:r().get(e,"forkedEntity.uid"),meta:{hasConflicts:B}})},pullChangesNavigationProps:{route:"build.merge",routeParams:{toId:r().get(e,"forkedEntity.uid"),entityType:e.entityType},queryParams:$},hidePullChangesBanner:[I,x].includes(r().get(e,"pullRequest.status")),hideTitle:e.hideTitle||e.diffManager.version===_.DiffVersion.V2,isPullChangesMandatory:e.isPullChangesMandatory,prId:r().get(e,"pullRequest.id"),validAnchors:e.validAnchors,displaySummary:e.diffManager.version===_.DiffVersion.V1}),e.diffManager.version===_.DiffVersion.V1&&o.createElement(u.default,S({},U,{className:"diff-body-container pr-diff"})),e.diffManager.version===_.DiffVersion.V2&&o.createElement(k,{noMargin:e.hideSectionTitle},!e.hideSectionTitle&&o.createElement(l.default,{text:"Changes",type:"h4",hasBottomSpacing:!0}),o.createElement(a.DiffRenderer,{className:"pr-diff-renderer",diffManager:e.diffManager,onPullChanges:()=>{C.default.transitionTo("build.merge",{toId:r().get(e,"forkedEntity.uid"),entityType:e.entityType},$)},enableCommenting:!["edit","create"].includes(e.modifyState)&&"collection"===e.entityType,renderCommentComponent:t=>o.createElement(b.default,{model:"pullRequest",modelId:e.pullRequestId,anchor:`${t.type}/${t.id}`}),additionalNavigationSections:["edit","create"].includes(e.modifyState)?[]:[{label:"Description",onClick:e.scrollDescriptionIntoView}]})))}));R.defaultProps={isPullChangesMandatory:!0},t.default=R},"./version-control/pull-request/components/PullRequestDiff/pullChangesBanner.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/prop-types/index.js"),i=n.n(r),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),d=n("./js/services/NavigationService.js"),u=n("./node_modules/lodash/lodash.js");const p={CONFLICTED:"conflicted",OUT_OF_SYNC:"outOfSync"},m={HIGH:"high",LOW:"low"},h=s.default.div`
  margin-top: ${({theme:e,marginTop:t})=>e[t||"spacing-m"]};
  background-color: ${({theme:e,colorTheme:t})=>e["warning"===t?"background-color-warning":"background-color-secondary"]};
  padding: ${({theme:e})=>e["spacing-l"]};
  display: flex;
  border-radius: ${({theme:e})=>e["border-radius-default"]};
`,f=s.default.div`
  margin-right: ${({theme:e})=>e["spacing-s"]};

  // Icon size makes it mis-aligned. correcting alignment with minor hacky css.
  & > i {
    position: relative;
    top: 2px;
  }
`,g=s.default.div`
  flex: auto;

  .pullchanges-banner__message {
    margin-bottom: ${({theme:e})=>e["spacing-s"]};
  }
`;function v(e){const{state:t,marginTop:n,relevance:s}=e,[r,i]=(0,o.useState)(!0);return r&&o.createElement(h,{marginTop:n,colorTheme:s===m.HIGH?"warning":"neutral"},o.createElement(f,null,o.createElement(c.default,{name:s===m.HIGH?"icon-state-warning-stroke":"icon-action-pull-stroke",color:s===m.HIGH?"content-color-warning":"content-color-secondary"})),o.createElement(g,null,o.createElement("div",{className:"pullchanges-banner__message"},o.createElement(a.default,{type:"body-medium",color:"content-color-primary"},t===p.CONFLICTED?"The destination has been modified since the fork was last updated resulting in conflicts. Pull the changes and resolve the conflicts before merging the changes.":"The destination was recently updated. We recommend pulling the changes.")),o.createElement(l.default,{type:"outline",onClick:()=>{d.default.transitionTo(u.get(e,"navigationOptions.route"),u.get(e,"navigationOptions.routeParams"),u.get(e,"navigationOptions.queryParams"))},text:t===p.CONFLICTED?"Resolve Conflicts":"Pull Changes",className:"pullchanges-banner__button"})),s===m.LOW&&o.createElement("div",null,o.createElement(l.default,{onClick:()=>i(!1),type:"tertiary",icon:"icon-action-close-stroke"})))}v.propTypes={state:i().oneOf(Object.values(p)).isRequired,relevance:i().oneOf(Object.values(m)),marginTop:i().string,navigationOptions:i().exact({route:i().string,routeParams:i().object,queryParams:i().object}).isRequired},v.defaultProps={relevance:m.HIGH},v.RELEVANCES=m,v.STATES=p},"./version-control/pull-request/components/PullRequestDiff/pullRequestDiffHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("./version-control/pull-request/components/PullRequestDiff/pullChangesBanner.js"),u=n("./js/utils/PluralizeHelper.js"),p=n("./collaboration/containers/comments/hooks/useComments.js"),m=n("./js/services/NavigationService.js");const h=s.default.section`
  margin-top: ${({theme:e})=>e["spacing-m"]};
`;function f(e){const t=(0,p.default)({model:"pullRequest",modelId:e.prId,anchorRegExp:new RegExp(`^(?!pullRequest/${e.prId}).*`),status:"open"}),n=(0,o.useMemo)((()=>{const n=new Set(e.validAnchors);return t.filter((e=>n.has(e.anchor))).length}),[e.validAnchors,t]);return o.createElement(h,{id:"pr-changes"},!e.hideTitle&&o.createElement(r.default,{text:"Changes",type:"h4",hasBottomSpacing:!0}),(e.outOfSync||e.conflictsExist)&&!e.hidePullChangesBanner&&o.createElement(d.default,{state:e.conflictsExist?d.default.STATES.CONFLICTED:d.default.STATES.OUT_OF_SYNC,navigationOptions:e.pullChangesNavigationProps,relevance:e.conflictsExist&&e.isPullChangesMandatory?d.default.RELEVANCES.HIGH:d.default.RELEVANCES.LOW}),e.displaySummary&&o.createElement("div",{className:"pull-request__diff-items"},o.createElement(i.default,{gap:"spacing-l"},e.changes>0&&o.createElement("span",{className:"pull-request__diff-info"},o.createElement(a.default,{type:"body-medium",color:"content-color-primary"},"Updates"),o.createElement(l.default,{status:"neutral",text:e.changes})),e.conflictsExist&&o.createElement("span",{className:"pull-request__diff-info"},o.createElement(a.default,{type:" body-medium",color:"content-color-primary"},"Conflicts"),o.createElement(l.default,{status:"warning",text:e.conflicts}))),o.createElement("span",{style:{flex:"auto"}}),!!n&&o.createElement(c.default,{type:"muted-plain",onClick:()=>{m.default.transitionTo("build.pullRequestView",{cid:e.prId},{ctx:"comments"})},text:`${n} open ${u.default.pluralize({count:n,singular:"comment",plural:"comments"})}`})))}f.defaultProps={isPullChangesMandatory:!0}},"./version-control/pull-request/components/PullRequestEndStateBanner.js":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/moment/moment.js"),i=n.n(r),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),d=n("./version-control/constants.js");const u=s.default.div`
  padding: ${({theme:e})=>e["spacing-l"]};
  background-color: ${({theme:e})=>e["background-color-secondary"]};
  display: flex;

  .texts {
    margin-left: ${({theme:e})=>e["spacing-s"]};
  }

  && {
    margin-bottom: ${({theme:e})=>e["spacing-m"]};
  }

  .pr-decline-comment {
    margin-bottom: ${({theme:e})=>e["spacing-xs"]};
  }
`;t.default=function({status:e,style:t,className:n,updatedAt:s,updatedBy:r,comment:p}){return o.createElement(u,{style:t,className:n},o.createElement(c.default,{name:e===d.PR_STATES.DECLINED?"icon-state-disable-stroke":"icon-state-pass",color:"content-color-secondary"}),o.createElement("div",{className:"texts"},o.createElement(a.default,{type:"h5",text:`${e===d.PR_STATES.DECLINED?"Declined":"Merged"} on ${i()(s).format("DD MMM YYYY")}`,hasBottomSpacing:!0}),e===d.PR_STATES.DECLINED&&p&&o.createElement("div",{className:"pr-decline-comment"},o.createElement(l.default,null,o.createElement(l.default,{type:"body-medium",color:"content-color-secondary"}," ",r.name," "),":"," ",o.createElement(l.default,{type:"body-medium",color:"content-color-primary"},p))),o.createElement("div",null,o.createElement(l.default,{type:"body-medium",color:"content-color-primary",hasBottomSpacing:!0},(e===d.PR_STATES.DECLINED?"Declined":"Merged")+" pull requests can't be reopened."))))}},"./version-control/pull-request/components/PullRequestForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("./js/components/base/Buttons.js"),d=n("./js/components/base/Inputs.js"),u=n("./version-control/pull-request/components/PullRequestReviewerForm.js"),p=n("./js/stores/ActiveWorkspaceStore.js"),m=n("./js/stores/StoreManager.js"),h=n("./appsdk/components/link/Link.js");const f=s.default.p`
  color: var(--content-color-secondary);
`,g=s.default.div`
  background-color: var(--background-color-secondary);
  padding: var(--spacing-l);
  margin-bottom: var(--spacing-l);

  span {
    position: relative;
    bottom: var(--spacing-xs);
    color: var(--content-color-primary);
    font-size: var(--text-size-m);
    margin-left: var(--spacing-s);
    font-weight: var(--text-weight-medium);
  }

  p {
    color: var(--content-color-primary);
    margin: 0 0 var(--spacing-s) var(--spacing-xl);
    font-size: var(--text-size-m);
  }

  .pull-request-edit__actions-share {
    margin-left: var(--spacing-xl);
  }
`;function v(e){const t=e.isOffline||e.loading||!e.title||!e.title.trim(),n=function(e){let t=[];return t=l().get(e,"users.merge",[]).map((e=>({...e,roleClassName:"pull-request-reviewers__option-permission"}))),t=t.concat(l().get(e,"users.view",[]).map((e=>({...e,roleName:"can't merge",roleClassName:"pull-request-reviewers__option-permission"})))),t}(e.fetchedReviewers),s=function(e,t,n){let o=[];return o=(t||[]).map((t=>{return l().get(e,"users.merge",[]).find((e=>l().toNumber(e.id)===l().toNumber(t.id)))?t:{...t,showWarn:!0,warningTooltipContent:(o=n,`To merge your request, this user will have to request Editor access for the destination ${o}.`),roleName:"can't merge",roleClassName:"pull-request-reviewers__selected-permission"};var o})),o}(e.fetchedReviewers,e.reviewers,e.entityType);return o.createElement("div",{className:"pull-request-edit__form"},e.showMoveModal&&o.createElement(g,null,o.createElement(i.default,{name:"icon-state-warning-stroke",color:"content-color-secondary"}),o.createElement("span",null,"Reviewers can't access the source ",e.entityType),o.createElement("p",null,`The source ${e.entityType} is not in a ${e.publicSharing?"public":"team"} workspace. Move it to a ${e.publicSharing?"public":"team"} workspace so that reviewers can access it to review your pull request.`),o.createElement(c.Button,{className:"pull-request-edit__actions-share",type:"secondary",size:"small",onClick:e.onMoveEntity},"Move ",l().capitalize(e.entityType))),o.createElement("div",null,o.createElement("label",{className:"pull-request-edit__title"},"Title"),o.createElement(d.Input,{autoFocus:!0,inputStyle:"box",type:"text",size:"md",value:e.title||"",className:"api-section__input",placeholder:"string"!=typeof e.title||e.title.trim()?null:"Please enter a title",onChange:t=>{e.onTitleChange(t)},error:"string"!=typeof e.title||e.title.trim()?null:"error"}),o.createElement("label",{className:"pull-request-edit__description"},"Description"),o.createElement("p",null,"Give a brief summary of the major changes – your reviewers will thank you for it."),o.createElement(r.default,{placeholder:"Descriptions support Markdown",rows:"3",value:e.description||"",onChange:t=>{e.onDescriptionChange(t.target.value)},className:"input-box"}),o.createElement("label",{className:"pull-request-edit__reviewers"},"Reviewers"),o.createElement("p",null,"Select up to 50."),e.showEditorNote&&o.createElement(f,null,"Note: To merge this Pull Request, an editor of destination"," ",e.entityType," must approve it. Be sure to select one as a reviewer."),o.createElement(u.default,{icon:"icon-action-search-stroke",placeholder:"Find a reviewer",reviewers:s,showEmptyText:"No reviewers yet",users:n,onChange:e.onReviewersChange}),s.length>50&&o.createElement("small",{className:"pull-request-edit__max-reviewers"},"You can only add upto 50 reviewers."),o.createElement("div",{className:"pull-request-edit__actions"},o.createElement(c.Button,{className:"pull-request-edit__actions-save",disabled:t,tooltip:e.isOffline&&"You can perform this action once you're back online",loading:e.loading,type:"primary",size:"small",onClick:e.onConfirm},"create"===e.modifyState?"Create Pull Request":"Save Changes"),o.createElement(c.Button,{className:"pull-request-edit__actions-cancel",type:"secondary",size:"small",onClick:()=>{"create"===e.modifyState&&e.onTabClose()}},"edit"===e.modifyState?o.createElement(h.default,{to:{routeIdentifier:"build.pullRequestView",routeParams:{id:e.pullRequestId},queryParams:{workspace:(0,m.resolveStoreInstance)(p.default).id}}},"Cancel"):"Cancel"))))}},"./version-control/pull-request/components/PullRequestInlineComment/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./collaboration/containers/comments/commentPopover/index.js"),a=n("./collaboration/containers/comments/hooks/useComments.js"),l=n("./version-control/pull-request/components/PullRequestInlineComment/prCommentContext.js");const c=r.default.div`
  & > button i {
    position: relative;
  }
`;function d(e){const{modelId:t,className:n,model:r,anchor:d}=e,[u,p]=o.useState(),m=o.useRef(),[h,f]=o.useState(),{getCommentingPermissions:g}=o.useContext(l.default),v=(0,a.default)({model:r,modelId:t,anchorRegExp:new RegExp(`^${e.anchor}$`),status:"open"});return o.createElement(c,{className:n},o.createElement("span",{ref:m}),o.createElement(s.default,{onClick:()=>{f(!0)},type:"tertiary",icon:"icon-action-comments-stroke",ref:p,"data-testid":"diff-entity-comment",showIndicator:v.length}),u&&o.createElement(i.default,{anchor:d,model:r,modelId:t,permissionService:g,isOpen:h,onClose:()=>f(!1),target:u,appendPopoverTo:"parent",placement:"bottom-end"}))}},"./version-control/pull-request/components/PullRequestInlineComment/prCommentContext.js":function(e,t,n){"use strict";n.r(t),n.d(t,{InlineCommentProvider:function(){return s}});const o=(0,n("../../node_modules/react/index.js").createContext)(),s=o.Provider;t.default=o},"./version-control/pull-request/components/PullRequestOverview.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("./version-control/common/ExpansibleMarkdownOutput/index.js");const d=s.default.section`
  .pr-overview__description {
    margin-top: ${({theme:e})=>e["spacing-s"]};
  }
`;function u(e){return o.createElement(d,{id:"pr-description"},o.createElement(r.default,{text:"Description",type:"h4",hasBottomSpacing:!0}),l().get(e,"pullRequest.description","").trim()?o.createElement(c.default,{markdown:l().get(e,"pullRequest.description","").trim(),lineClamp:3,className:"pr-overview__description"}):o.createElement(i.default,{type:"body-medium",color:"content-color-secondary"},"No description provided."))}},"./version-control/pull-request/components/PullRequestReviewerForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{UserDropdown:function(){return p},UserDropdownOption:function(){return u},default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("./version-control/pull-request/components/ReviewerListForm.js"),a=n("./js/components/base/Avatar.js"),l=n("./version-control/utils/index.js"),c=n("./version-control/common/index.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function u(e){const t=e.name||e.username||e.email;o.Fragment;return o.createElement("div",{className:"pull-request-reviewers__option"},o.createElement(a.default,{size:"medium",userId:e.id,customPic:e.profilePicUrl}),o.createElement("span",{className:"pull-request-reviewers__option-username",title:t},t),o.createElement("span",{className:e.roleClassName},e.roleName))}function p(e){return o.createElement("div",{className:"pull-request-reviewers__input",ref:()=>{e.setInputRef()}},o.createElement(c.SelectDropdown,{block:!0,searchable:!0,autosize:!1,filterOption:l.user.userFilter,label:e.placeholder||"Enter name or email",labelKey:"name",noResultsText:"No users found",optionRenderer:u,options:e.options,size:"md",value:e.value,valueKey:"id",onBlurResetsInput:!1,onChange:e.onAdd}),o.createElement(d.default,{className:"pm-icon pm-icon-search",name:"icon-action-search-stroke",size:"large"}))}class m extends o.Component{constructor(e){super(e),this.state=this.getState(e),this.state.showToolTip=!1,this.handleAdd=this.handleAdd.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.setInputRef=this.setInputRef.bind(this),this.showToolTip=this.showToolTip.bind(this),this.hideToolTip=this.hideToolTip.bind(this)}UNSAFE_componentWillReceiveProps(e){const t=r().get(this.props,"users.length")!==r().get(e,"users.length");(!r().isEqual(this.props.reviewers,e.reviewers)||t)&&this.setState(this.getState(e))}hideToolTip(){this.dismissTooltipTimeout&&clearTimeout(this.dismissTooltipTimeout),this.dismissTooltipTimeout=setTimeout((()=>{this.setState({showTooltip:!1})}),100)}showToolTip(){this.dismissTooltipTimeout&&clearTimeout(this.dismissTooltipTimeout),this.dismissTooltipTimeout=setTimeout((()=>{this.setState({showTooltip:!0})}),100)}getState(e){const t=e.reviewers||[],n=e.users||[],o=t.map((e=>`${e.id}`));return{users:n.filter((e=>o.indexOf(`${e.id}`)<0)),reviewers:t,value:null}}handleAdd(e){return this.setState((t=>({users:t.users.filter((t=>t.id!==e.id)),reviewers:[...t.reviewers,e],value:""})),(()=>{this.props.onChange(this.state.reviewers)}))}handleRemove(e){this.setState((t=>{const n=t.reviewers[e];return{users:[...t.users,r().omit(n,"selectedOption")],reviewers:t.reviewers.filter(((t,n)=>n!==e))}}),(()=>{this.props.onChange(this.state.reviewers)}))}handleUpdate(e,t){this.setState((n=>({reviewers:n.reviewers.map(((n,o)=>o===e?{...n,selectedOption:t}:n))})),(()=>{this.props.onChange(this.state.reviewers)}))}setInputRef(e){return this.inputRef=e,this.inputRef}render(){return o.createElement(i.default,{className:"pull-request-reviewers",inputComponent:o.createElement(p,{options:this.state.users,placeholder:this.props.placeholder,setInputRef:this.setInputRef,value:this.state.value,onAdd:this.handleAdd,onMouseEnter:this.showToolTip,onMouseLeave:this.hideToolTip}),list:this.state.reviewers||[],showEmptyText:this.props.showEmptyText,onRemove:this.handleRemove,onUpdate:this.handleUpdate})}}},"./version-control/pull-request/components/ReviewerListForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/classnames/index.js"),r=n.n(s),i=n("./node_modules/lodash/lodash.js"),a=n.n(i),l=n("./version-control/pull-request/components/UserList.js"),c=n("./version-control/utils/index.js");n("./js/components/base/Inputs.js");class d extends o.Component{constructor(e){super(e),this.state={input:"",list:[],showToolTip:!1},this.bindHandlers(this)}bindHandlers(e){["handleChange","handleKeyPress","handleAdd","handleRemove","hideToolTip","showToolTip","setInputRef"].forEach((t=>{e[t]=e[t].bind(e)}))}hideToolTip(){this.dismissTooltipTimeout&&clearTimeout(this.dismissTooltipTimeout),this.dismissTooltipTimeout=setTimeout((()=>{this.setState({showTooltip:!1})}),100)}showToolTip(){this.dismissTooltipTimeout&&clearTimeout(this.dismissTooltipTimeout),this.dismissTooltipTimeout=setTimeout((()=>{this.setState({showTooltip:!0})}),100)}handleChange(e){this.setState({input:e.target.value})}handleKeyPress(e){13===e.charCode&&this.handleAdd()}handleAdd(){const{input:e,list:t}=this.state,{maxInputs:n}=this.props;!c.string.isEmail(e)||a().includes(t,e)||n&&t.length<n&&this.setState((t=>({list:[...t.list,e],input:""})),(()=>{this.props.onChange(this.state.list)}))}handleRemove(e){this.setState((t=>({list:t.list.filter(((t,n)=>n!==e))})),(()=>{this.props.onChange(this.state.list)}))}setInputRef(e){this.inputRef=e}render(){return o.createElement("div",{className:r()("pm-invite-form",this.props.className)},this.props.inputComponent,o.createElement(l.default,{list:this.props.list||this.state.list,options:this.props.options,setInputRef:this.setInputRef,showEmptyText:this.props.showEmptyText,onRemove:this.props.onRemove||this.handleRemove,onUpdate:this.props.onUpdate,onMouseEnter:this.showToolTip,onMouseLeave:this.hideToolTip}))}}},"./version-control/pull-request/components/UserList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{UserListItem:function(){return c},default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("./version-control/common/index.js"),i=n("./js/components/base/Buttons.js"),a=n("./js/components/base/Avatar.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function c(e){const t=e.user||{},n=t.name||t.email;return o.createElement("li",{className:"pm-invite-list__item"},o.createElement(a.default,{size:"medium",userId:t.id,customPic:t.profilePicUrl}),o.createElement("p",{className:"pm-invite-list__email",title:n},n),e.showWarn&&o.createElement(o.Fragment,null,o.createElement(r.CustomTooltip,{align:"bottom",body:e.warningTooltipContent},o.createElement(s.default,{name:"icon-state-warning-stroke",color:"content-color-warning",className:"pull-request-reviewers__selected-warning"}),t.roleName&&t.roleClassName&&o.createElement("span",{className:t.roleClassName},t.roleName))),!e.hideRemove&&o.createElement(i.Button,{className:"pm-invite-list__remove",size:"small",onClick:()=>{e.onRemove(e.index)}},o.createElement(s.default,{className:"pm-invite-list__remove-icon",name:"icon-action-close-stroke",size:"large"})))}function d(e){return Array.isArray(e.list)?!e.list.length&&e.showEmptyText?o.createElement("div",{className:"pm-invite-list pm-invite-list__empty"},o.createElement("span",{className:"pm-invite-list__empty-text"},e.showEmptyText)):o.createElement("ul",{className:"pm-invite-list"},e.list.map(((t,n)=>"string"==typeof t?o.createElement(c,{email:t,hideRemove:t.hideRemove,index:n,key:n,onRemove:e.onRemove}):o.createElement(c,l({},e,{disableOptions:t.disableOptions,hideRemove:t.hideRemove,index:n,infoTooltipContent:t.infoTooltipContent,key:n,multiSelectOption:e.multiSelectOption,options:!t.hideOptions&&e.options,showInfo:t.showInfo,showWarn:t.showWarn,user:t,warningTooltipContent:t.warningTooltipContent,onRemove:e.onRemove,onUpdate:t=>{e.onUpdate(n,t.value)}}))))):null}},"./version-control/pull-request/services/CommentsService.js":function(e,t,n){"use strict";n.r(t);var o=n("./js/utils/PostmanGatewayService.js"),s=n("./js/modules/services/RemoteSyncRequestService.js"),r=n("./node_modules/querystring-browser/querystring.js"),i=n.n(r),a={getComments(e,t,n){if(!t||!e)return pm.logger.error("CommentsService~getComments: modelId is a mandatory parameter"),Promise.reject(new Error("Something went wrong while fetching comments."));const s={populate:"createdBy",model:e,modelId:t,anchor:n};return o.default.request("/ws/proxy",{method:"post",body:{service:"annotation",method:"get",body:{},path:`/comments?${i().stringify(s)}`}},{parsedResponse:!0,transformRequestJson:!0}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))},createComment(e,t,n,o,r){if(!e||!t)return pm.logger.error("CommentsService~createComments: modelId is a mandatory parameter"),Promise.reject(new Error("Something went wrong while creating comments."));let i={model:e,modelId:t,body:n,tags:o,version:"1.0.0"};return r&&(i.anchor=r),s.default.request("/ws/proxy",{method:"post",data:{service:"annotation",method:"post",body:i,path:"/comments"}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))},updateComment:(e,t,n)=>e?s.default.request("/ws/proxy",{method:"post",data:{service:"annotation",method:"put",body:{body:t,tags:n},path:`/comments/${e}`}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e))):(pm.logger.error("CommentsService~updateComments: commentId is a mandatory parameter"),Promise.reject(new Error("Something went wrong while updating comments."))),deleteComment:e=>e?s.default.request("/ws/proxy",{method:"post",data:{service:"annotation",method:"delete",path:`/comments/${e}`}}).then((({body:e})=>Promise.resolve(e.data))).catch((({error:e})=>Promise.reject(e))):(pm.logger.error("CommentsService~deleteComments: commentId is a mandatory parameter"),Promise.reject(new Error("Something went wrong while deleting comments.")))};t.default=a},"./version-control/utils/diff.js":function(e,t,n){"use strict";n.r(t),n.d(t,{countChanges:function(){return f},extractDiff:function(){return d},getNumberOfConflicts:function(){return p},handleEntityLevelDiff:function(){return u},parseCollectionConflict:function(){return h},parseCollectionDiff:function(){return m},processServerDiff:function(){return v}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("./version-control/utils/pmDiff/index.js");const i=["collection","folder","request","response"],a="deleted",l="moved",c=[a,l];function d(e,t,n,o,s,i){e[n]||(e[n]={name:t.name||o,diff:[],id:n,meta:{method:t.method},type:s,itemType:o}),e[n].diff=e[n].diff.concat((0,r.default)(o,s,t.diff||t,i))}function u(e,t,n){const o=function(t,n){let o=e[t].diff||[];return o=o.filter((e=>!e.conflictType||e.conflictType===n)),s().unset(o,"0.conflictType"),e[t].diff=o,o};["transfer","update_destroy","transfer_destroy"].forEach((i=>{Object.keys(s().get(t,[n,i],{})).forEach((c=>{const d=s().get(t,[n,i,c],{});let u={},p={},m={name:d.name||n,id:c,meta:{method:d.method},conflictType:"source",isSection:!0,itemType:n},h={name:d.name||n,id:c,meta:{method:d.method},conflictType:"dest",isSection:!0,itemType:n};"transfer"===i?(u={to:s().get(d,"to.source")||{}},p={to:s().get(d,"to.dest")||{}}):(u=s().get(d,"source")||{},p=s().get(d,"dest")||{}),e[c]={name:d.name||n,meta:{method:d.method},diff:[],id:c,type:"conflict",isNestedDiff:!0,itemType:n,conflictType:i,resolveConflicts:o.bind(null,c)},u.deleted&&(m.type=a),p.deleted&&(h.type=a),u.to&&(m.type=l,m.to=u.to),p.to&&(h.type=l,h.to=p.to),u.diff&&(m.type="modified",m.diff=(0,r.default)(n,"modified",u.diff,!1)),p.diff&&(h.type="modified",h.diff=(0,r.default)(n,"modified",p.diff,!1)),e[c].diff.push(m),e[c].diff.push(h)}))}))}function p(e){const t=e.diff||{};let n=0;return Object.keys(t).forEach((e=>{const o=s().get(t,[e,"diff"],[]);if(n+=o.filter((e=>e.conflict||e.numberOfConflicts>0)).length,s().get(t,[e,"isNestedDiff"])){const o=(t[e].diff||[]).filter((e=>"source"===e.conflictType)).length;n+=o}})),n}function m(e,t){const n=s().get(t,"data.diff");let o=e.diff||{};return i.forEach((e=>{Object.keys(s().get(n,[e,"create","objs"],{})).forEach((t=>{const r=s().get(n,[e,"create","objs",t],{});d(o,r,t,e,"added")})),Object.keys(s().get(n,[e,"update","objs"],{})).forEach((t=>{const r=s().get(n,[e,"update","objs",t],{});d(o,r,t,e,"modified")})),Object.keys(s().get(n,[e,"destroy","objs"],{})).forEach((t=>{const r=s().get(n,[e,"destroy","objs",t],{});o[t]={name:r.name||e,diff:[],id:t,meta:{method:r.method},type:a,itemType:e}})),Object.keys(s().get(n,[e,"transfer","objs"],{})).forEach((t=>{const r=s().get(n,[e,"transfer","objs",t],{});o[t]={name:r.name||e,meta:{method:r.method},diff:[],id:t,to:s().get(r,"to",{}),type:l,itemType:e}}))})),o}function h(e,t){const n=s().get(t,"data.conflicts");let o=e.diff||{};return i.forEach((e=>{Object.keys(s().get(n,[e,"update"],{})).forEach((t=>{const r=s().get(n,[e,"update",t],{});d(o,r,t,e,"conflict",!0)})),u(o,n,e)})),o}function f(e){let t=0,n=0;return Object.values(e).map((e=>{t+=c.includes(s().get(e,"type"))?1:s().get(e,"diff",[]).length,n+=c.includes(s().get(e,"type"))?1:s()(e).get("diff",[]).filter((e=>!1===e.conflict)).length})),{allChanges:t,changes:n,conflicts:p({diff:e})}}function g(e={},t=[]){return s().isEmpty(e)?t:e.items&&e.items.length?(t.push({type:e.type,id:e.id}),e.items.forEach((e=>{g(e,t)})),t):(t.push({type:e.type,id:e.id}),t)}function v(e){const t={data:s().get(e,"collectionDiff")},n=m({diff:h({},t)},t),o=f(n),r=o.allChanges,i=o.changes,a=o.conflicts,l=t.data&&t.data.conflicts,c=s().get(e,"collectionDiff.navigation")||{},d=(g(c)||[]).reduce(((e,t)=>(n[t.id]&&e.push({...n[t.id],id:t.id}),e)),[]);return{parsedDiff:n,...s().isEmpty(c)?{}:{parsedOrderedDiff:d},allChanges:r,changes:i,outOfSync:t.data&&t.data.outOfSync,conflicts:a,conflictsExist:l,navigation:s().get(e,"collectionDiff.navigation")||{}}}},"./version-control/utils/error.js":function(e,t,n){"use strict";n.r(t),n.d(t,{getErrorIllustration:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js");function a(e){return e?403===e?o.createElement(r.default,null):e>=400&&e<500?o.createElement(i.default,null):o.createElement(s.default,null):o.createElement(s.default,null)}},"./version-control/utils/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{pmDiff:function(){return r.default},string:function(){return o},user:function(){return s}});var o=n("./version-control/utils/string.js"),s=n("./version-control/utils/user.js"),r=n("./version-control/utils/pmDiff/index.js")},"./version-control/utils/pmDiff/algorithmUtil.js":function(e,t,n){"use strict";n.r(t),n.d(t,{attachLines:function(){return l},collectConflict:function(){return r},collectDiff:function(){return i},flattenDiff:function(){return s},threeWaylineDiff:function(){return a}});n("./node_modules/diff/dist/diff.js");var o=n("./version-control/utils/pmDiff/lineDiffHelper.js");function s(e){if(!Array.isArray(e))return[];let t=[],n=0,o=0;return e.forEach((e=>{let s=[];"string"==typeof e.value?(s=e.value.split("\n"),s.length>1&&""===s[s.length-1]&&(s=s.slice(0,-1))):Array.isArray(e.value)&&(s=e.value),s.forEach((s=>{t.push({added:e.added,removed:e.removed,value:s,sourceIndex:e.added?++o:e.removed?" ":++o,baseIndex:e.removed?++n:e.added?" ":++n})}))})),t}function r(e,t,n,o){for(;e<t.length||e<n.length||e<o.length;){if(n[e]===o[e])break;e++}return e!==t.length&&e!==n.length&&e!==o.length||(e=Math.max(t.length,n.length,o.length)),e}function i(e,t,n,o){for(;e<t.length||e<n.length||e<o.length;){const s=t[e],r=n[e],i=o[e];if(s===r||r!==i&&i!==s)break;e++}return e}function a(e="",t="",n=""){let a=0,l=0,c=[],d=e.split("\n"),u=t.split("\n"),p=n.split("\n"),m=Math.max(d.length,u.length,p.length);for(;a<m;){const e=d[a],t=u[a];if(t!==p[a]){const e=r(a,d,u,p),t=d.slice(a,e).join("\n"),n=u.slice(a,e).join("\n"),i=p.slice(a,e).join("\n");c.push({conflict:!0,type:"source",index:l,value:s((0,o.parseLineDiff)(t,n))}),c.push({conflict:!0,type:"dest",index:l,value:s((0,o.parseLineDiff)(t,i))}),a=a===e?a+1:e,l++}else if(e!==t){const e=i(a,d,u,p),t=d.slice(a,e).join("\n"),n=u.slice(a,e).join("\n");c.push({value:s((0,o.parseLineDiff)(t,n))}),a=a===e?a+1:e}else c.push({value:(0,o.parseLineDiff)(e,e)}),a++}return{diff:c,numberOfConflicts:l}}function l(e){if(Array.isArray(e)){var t=0,n=0,o=0,s=0;e.forEach((e=>{if(e)if(e.conflict){let r=e.value,i=e.type;r.forEach((e=>{"source"===i?(e.baseIndex=e.added?" ":(e.removed,++t),e.sourceIndex=e.added?++o:e.removed?" ":++o,e.destIndex=""):"dest"===i&&(e.baseIndex=e.added?" ":(e.removed,++n),e.destIndex=e.added?++s:e.removed?" ":++s,e.sourceIndex="")}))}else if(Array.isArray(e.value)){e.value.forEach((e=>{e.baseIndex=e.added?" ":(e.removed,++t),e.sourceIndex=e.added?++o:e.removed?" ":++o,e.destIndex="",++s,++n}))}}))}}},"./version-control/utils/pmDiff/baseDiff.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("./node_modules/diff/dist/diff.js"),i=n("./version-control/utils/pmDiff/lineDiffHelper.js"),a=n("./version-control/utils/pmDiff/algorithmUtil.js");function l(e){return{enabled:"boolean"!=typeof s().get(e,"enabled")||e.enabled,key:"string"==typeof s().get(e,"key")?e.key:"",value:"string"==typeof s().get(e,"value")?e.value:"",description:"string"==typeof s().get(e,"description")?e.description:""}}class c{constructor(e,t){const n="table"===t?[]:"";this.type=t,e.conflict?(this.conflict=!0,this.numberOfConflicts=0,this.base=s().get(e,["conflict","base","value"])||n,this.source=s().get(e,["conflict","source","value"])||n,this.dest=s().get(e,["conflict","dest","value"])||n):e.diff&&(this.conflict=!1,s().get(e,"diff.from")||s().get(e,"diff.to")?(this.base=s().get(e,["diff","from"])||n,this.source=s().get(e,["diff","to"])||n):(this.base=n,this.source=s().get(e,"diff",n)))}getStringDiff(){return this.base&&"string"!=typeof this.base||this.source&&"string"!=typeof this.source?{diff:[]}:{diff:(0,i.parseDiff)(this.base||"",this.source||"")}}getStringConflict(){if(this.base&&"string"!=typeof this.base||this.source&&"string"!=typeof this.source||this.dest&&"string"!=typeof this.dest)return{diff:[]};if(this.dest===this.source)return this.getStringDiff(this.base,this.source);this.numberOfConflicts=1;const e=this.base||" ",t=this.source||" ",n=this.dest||" ";return[{conflict:!0,diff:(0,i.parseDiff)(e||"",t||""),type:"source"},{conflict:!0,diff:(0,i.parseDiff)(e||"",n||""),type:"dest"}]}getTableDiff(){const e=this.base||[],t=this.source||[];if(!Array.isArray(e)||!Array.isArray(t))return[];let n,o,s=0,i=[];for(;s<e.length||s<t.length;)o=l(e[s]),n=l(t[s]),i.push({index:s,value:{enabled:n.enabled,key:r.diffWords(o.key,n.key),value:r.diffWords(o.value,n.value),description:r.diffWords(o.description,n.description)}}),s++;return i}getTableConflict(){const e=this.base||[],t=this.source||[],n=this.dest||[];if(!Array.isArray(e)||!Array.isArray(t)||!Array.isArray(n))return[];let o,i,a,c=0,d=[],u=0;for(;c<e.length||c<t.length||c<n.length;)i=l(e[c]),o=l(t[c]),a=l(n[c]),s().isEqual(s().get(e,[c]),s().get(t,[c]))&&s().isEqual(s().get(e,[c]),s().get(n,[c]))?d.push({index:c,value:{enabled:i.enabled,key:[i.key],value:[i.value],description:[i.description]}}):s().isEqual(s().get(t,[c]),s().get(n,[c]))||s().isEqual(s().get(e,[c]),s().get(n,[c]))?d.push({index:c,value:{enabled:o.enabled,key:r.diffWords(i.key,o.key),value:r.diffWords(i.value,o.value),description:r.diffWords(i.description,o.description)}}):s().isEqual(s().get(e,[c]),s().get(t,[c]))&&s().get(n,[c])?(d.push({index:c,value:{enabled:a.enabled,key:[a.key],value:[a.value],description:[a.description]}}),s().set(this.source,[c],s().get(this.dest,[c])),s().set(this.base,[c],s().get(this.dest,[c]))):(d.push({index:c,conflict:!0,type:"source",value:{enabled:o.enabled,key:r.diffWords(i.key,o.key),value:r.diffWords(i.value,o.value),description:r.diffWords(i.description,o.description)}}),d.push({index:c,conflict:!0,type:"dest",value:{enabled:a.enabled,key:r.diffWords(i.key,a.key),value:r.diffWords(i.value,a.value),description:r.diffWords(i.description,a.description)}}),u++),c++;return this.numberOfConflicts=u,d}getSentencesDiff(){return this.base&&"string"!=typeof this.base||this.source&&"string"!=typeof this.source?{diff:[]}:{diff:r.diffSentences(this.base||"",this.source||"")}}getSentencesConfict(){if(this.base&&"string"!=typeof this.base||this.source&&"string"!=typeof this.source||this.dest&&"string"!=typeof this.dest)return{diff:[]};if(this.source===this.dest)return this.getSentencesDiff(this.base,this.source);this.numberOfConflicts=1;return[{conflict:!0,diff:r.diffSentences(this.base,this.source),type:"source"},{conflict:!0,diff:r.diffSentences(this.base,this.dest),type:"dest"}]}getCodeDiff(){let e,t,n="string"==typeof this.base?this.base:"",o="string"==typeof this.source?this.source:"";return n&&o?(e=(0,i.parseLineDiff)(n,o),t=(0,a.flattenDiff)(e)):t=(0,a.flattenDiff)([{added:!!o,removed:!!n,value:o||n}]),t}getCodeConflict(){if(this.base&&"string"!=typeof this.base||this.source&&"string"!=typeof this.source||this.dest&&"string"!=typeof this.dest)return{diff:[]};const e=this.source||"",t=this.dest||"",n=this.base||"",o=(0,a.threeWaylineDiff)(n,e,t);return(0,a.attachLines)(o.diff),this.numberOfConflicts=o.numberOfConflicts,o.diff}}},"./version-control/utils/pmDiff/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("./version-control/utils/pmDiff/itemDiff.js");function i(e,t,n,o){const i=Object.keys(n).map((e=>s().isEmpty(s().get(n,[e]))?null:{property:e,[o?"conflict":"diff"]:n[e]}));return new r.default(e,t,i).getPropertyWiseDiff()}},"./version-control/utils/pmDiff/itemDiff.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ItemArrayDiff:function(){return a},ItemScriptDiff:function(){return d},ItemSentenceDiff:function(){return c},ItemStringDiff:function(){return l},default:function(){return u}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("./version-control/utils/pmDiff/baseDiff.js"),i=n("./version-control/utils/pmDiff/algorithmUtil.js");class a extends r.default{constructor(e,t,n,o,s){super(e,"table"),this.property=n,this.itemType=t,this.propertyName=o,this.diffType=s}getDiff(){return this.conflict?this.getTableConflict():this.getTableDiff()}resolveConflict(e,t){return"source"===e?(this.dest[t]=this.source[t],this.numberOfConflicts=this.numberOfConflicts-1):"dest"===e&&(this.source[t]=this.dest[t],this.numberOfConflicts=this.numberOfConflicts-1),this}getResolvedConflict(){return(this.source||[]).filter(Boolean)}}class l extends r.default{constructor(e,t,n,o,s,r={}){if(super(e,"words"),this.property=n,this.itemType=t,this.propertyName=o,this.diffType=s,this.options=r,this.optionsKey="","function"==typeof this.options.parsingFunction)if(this.conflict){const e=r.parsingFunction(this.base);this.base=e.value,this.optionsKey=e.optionsKey,this.source=r.parsingFunction(this.source).value,this.dest=r.parsingFunction(this.dest).value}else this.base=r.parsingFunction(this.base).value,this.source=r.parsingFunction(this.source).value}getDiff(){return this.conflict?this.getStringConflict():this.getStringDiff()}resolveConflict(e){return"source"===e&&(this.dest=this.source,this.numberOfConflicts=this.numberOfConflicts-1),"dest"===e&&(this.source=this.dest,this.numberOfConflicts=this.numberOfConflicts-1),this}getResolvedConflict(){return this.source}}class c extends r.default{constructor(e,t,n,o,s,r={}){super(e,"sentences"),this.property=n,this.itemType=t,this.propertyName=o,this.diffType=s,this.options=r,"function"==typeof r.parsingFunction&&(this.conflict?(this.base=r.parsingFunction(this.base),this.source=r.parsingFunction(this.source),this.dest=r.parsingFunction(this.dest)):(this.base=r.parsingFunction(this.base),this.source=r.parsingFunction(this.source)))}getDiff(){return this.conflict?this.getSentencesConfict():this.getSentencesDiff()}resolveConflict(e){return"source"===e&&(this.dest=this.source,this.numberOfConflicts=this.numberOfConflicts-1),"dest"===e&&(this.source=this.dest,this.numberOfConflicts=this.numberOfConflicts-1),this}getResolvedConflict(){return!this.options.idToNameMap||"order"!==this.property&&"folders_order"!==this.property&&"responses_order"!==this.property?this.source:"string"==typeof this.source&&this.source?this.source.split("\n").map((e=>Object.keys(this.options.idToNameMap).find((t=>this.options.idToNameMap[t]===e)))):[]}}class d extends r.default{constructor(e,t,n,o,r,i){super(e,"code"),this.property=n,this.itemType=t,this.propertyName=o,this.diffType=r,this.scriptType=s().get(i,"type"),this.scriptId=s().get(i,"id"),this.diff=null}getDiff(){return this.diff?this.diff:this.conflict?(this.diff=this.getCodeConflict(),this.resolveConflict(null,null,this.diff),this.diff):(this.diff=this.getCodeDiff(),this.diff)}resolveConflict(e,t,n){if(!Array.isArray(n))return this;let o=[];return this.diff.forEach(((n,s)=>{n&&(n.index===e&&("source"===t?("source"===n.type&&(n.conflict=!1),"dest"===n.type&&(this.diff[s]=null),this.numberOfConflicts=this.numberOfConflicts-1):"dest"===t&&("dest"===n.type&&(n.conflict=!1),"source"===n.type&&(this.diff[s]=null),!n.singleConflict&&(this.numberOfConflicts=this.numberOfConflicts-1))),n.conflict||(n.value||[]).forEach((e=>{e.removed||o.push(e.value)})))})),this.source=o.join("\n"),(0,i.attachLines)(this.diff),this}getResolvedConflict(){return this.source}}class u{constructor(e,t,n){this.itemType=e,this.diffType=t,this.diff=n}parseScripts(e,t,n){const o=["test","prerequest"];let r=[];if(e.conflict){const i=Array.isArray(s().get(e,"conflict.base.value"))?e.conflict.base.value:[],a=Array.isArray(s().get(e,"conflict.source.value"))?e.conflict.source.value:[],l=Array.isArray(s().get(e,"conflict.dest.value"))?e.conflict.dest.value:[];o.forEach((e=>{const o=i.find((t=>t.listen===e))||[],c=a.find((t=>t.listen===e))||[],u=l.find((t=>t.listen===e))||[],p={conflict:{base:{value:(s().get(o,["script","exec"])||[]).join("\n")},source:{value:(s().get(c,["script","exec"])||[]).join("\n")},dest:{value:(s().get(u,["script","exec"])||[]).join("\n")}}},m="prerequest"===s().get(c,"listen")?"pre request script":"tests",h={id:s().get(c,"script.id"),type:s().get(c,"script.type")};p.conflict.base.value===p.conflict.dest.value&&p.conflict.base.value===p.conflict.source.value||r.push(new d(p,t,e,m,n,h))}))}else{let i=s().has(e,"diff.to")?s().get(e,"diff.to"):s().get(e,"diff"),a=s().get(e,"diff.from");Array.isArray(i)||(i=[]),Array.isArray(a)||(a=[]),o.forEach((e=>{const o=a.find((t=>t.listen===e))||[],l=i.find((t=>t.listen===e))||[],c={diff:{from:(s().get(o,["script","exec"])||[]).join("\n"),to:(s().get(l,["script","exec"])||[]).join("\n")}},u="prerequest"===s().get(l,"listen")?"pre request script":"tests",p={id:s().get(l,"script.id"),type:s().get(l,"script.type")};c.diff.from!==c.diff.to&&r.push(new d(c,t,e,u,n,p))}))}return r}parseGraphqlBody(e,t,n){let o=[];if(e.conflict){const r={conflict:{base:{value:s().get(e,["conflict","base","value","query"])||""},source:{value:s().get(e,["conflict","source","value","query"])||""},dest:{value:s().get(e,["conflict","dest","value","query"])||""}}},i={conflict:{base:{value:s().get(e,["conflict","base","value","variables"])||""},source:{value:s().get(e,["conflict","source","value","variables"])||""},dest:{value:s().get(e,["conflict","dest","value","variables"])||""}}};i.conflict.base.value===i.conflict.source.value&&i.conflict.base.value===i.conflict.dest.value||o.push(new d(i,t,"graphql_variables","Graphql Variables",n,null)),r.conflict.base.value===r.conflict.source.value&&r.conflict.base.value===r.conflict.dest.value||o.push(new d(r,t,"graphql_query","Graphql Query",n,null))}else{const r=s().get(e,["diff","to","variables"])||"",i=s().get(e,["diff","to","query"])||"",a={diff:{from:s().get(e,["diff","from","variables"])||"",to:r||(s().get(e,["diff","variables"])||"")}},l={diff:{from:s().get(e,["diff","from","query"])||"",to:i||(s().get(e,["diff","query"])||"")}};a.diff.from!==a.diff.to&&o.push(new d(a,t,"variables","Graphql Variables",n,null)),l.diff.from!==l.diff.to&&o.push(new d(l,t,"query","Graphql Query",n,null))}return o}parseOrder(e,t,n,o,r){if(e.conflict){const i=(s().get(e,"conflict.base.value")||[]).map((t=>s().get(e,["conflict","base","name",t]))).join("\n"),a=(s().get(e,"conflict.source.value")||[]).map((t=>s().get(e,["conflict","source","name",t]))).join("\n"),l=(s().get(e,"conflict.dest.value")||[]).map((t=>s().get(e,["conflict","dest","name",t]))).join("\n"),d={conflict:{base:{value:i},source:{value:a},dest:{value:l}}},u=Object.assign({},s().get(e,"conflict.base.name",{}),s().get(e,"conflict.source.name",{}),s().get(e,"conflict.dest.name",{}));return i||a||l?new c(d,t,o,r,n,{idToNameMap:u}):[]}const i=(s().get(e,"diff.from")||[]).map((t=>s().get(e,["diff","name",t]))).join("\n"),a=(s().get(e,"diff.to")||[]).map((t=>s().get(e,["diff","name",t]))).join("\n");return i||a?new c({diff:{from:i,to:a}},t,o,r,n):[]}parseResponseCode(e){return e?{value:`${e.code||""} ${e.name||""}`}:""}parseRequestObject(e){let t;try{t=JSON.stringify(JSON.parse(e),null,2)}catch(e){t=""}return t}parseAuthObject(e){if(!e||""===e)return"";const t=s().get(e,"type");let n=[];return n.push(`type: ${t}`),s()(e).get([t],[]).forEach((e=>{n.push(`${e.key}: ${e.value}`)})),n.join("\n")}parseDataOptions(e){if(!e||""===e||s().isEmpty(e)||0===s().compact(Object.values(e)).length||!e[Object.keys(e)[0]])return"";const t=Object.keys(e)[0];return{value:JSON.stringify(t&&e[t])||"",optionsKey:t}}getPropertyWiseDiff(){return Array.isArray(this.diff)?this.diff.reduce(((e,t)=>{const n=t&&t.property;if("response"!==this.itemType)switch(n){case"queryParams":return e.concat(new a(t,this.itemType,"queryParams","query params",this.diffType));case"variables":return e.concat(new a(t,this.itemType,"variables","variables",this.diffType));case"headerData":return e.concat(new a(t,this.itemType,"headerData","headers",this.diffType));case"pathVariableData":return e.concat(new a(t,this.itemType,"pathVariableData","path variables",this.diffType));case"description":return e.concat(new l(t,this.itemType,"description","description",this.diffType));case"url":return e.concat(new l(t,this.itemType,"url","url",this.diffType));case"name":return e.concat(new l(t,this.itemType,"name","name",this.diffType));case"dataOptions":return e.concat(new l(t,this.itemType,"dataOptions","language",this.diffType,{parsingFunction:this.parseDataOptions}));case"dataMode":return e.concat(new l(t,this.itemType,"dataMode","Body Type",this.diffType));case"data":return e.concat(new a(t,this.itemType,"data","Body (urlencoded)",this.diffType));case"method":return e.concat(new l(t,this.itemType,"method","method",this.diffType));case"events":return e.concat(this.parseScripts(t,this.itemType,this.diffType));case"rawModeData":return e.concat(new d(t,this.itemType,"rawModeData","Body (raw)",this.diffType));case"graphqlModeData":return e.concat(this.parseGraphqlBody(t,this.itemType,this.diffType)||[])||[];case"auth":return e.concat(new c(t,this.itemType,"auth","authorization",this.diffType,{parsingFunction:this.parseAuthObject}));case"order":return e.concat(this.parseOrder(t,this.itemType,this.diffType,"order","order"));case"folders_order":return e.concat(this.parseOrder(t,this.itemType,this.diffType,"folders_order","folder order"));case"responses_order":return e.concat(this.parseOrder(t,this.itemType,this.diffType,"responses_order","responses order"));default:return e}else switch(n){case"headers":return e.concat(new a(t,this.itemType,"headers","response headers",this.diffType));case"language":return e.concat(new l(t,this.itemType,"language","language",this.diffType));case"responseCode":return e.concat(new l(t,this.itemType,"responseCode","response code",this.diffType,{parsingFunction:this.parseResponseCode}));case"text":return e.concat(new d(t,this.itemType,"text","response body",this.diffType));case"name":return e.concat(new l(t,this.itemType,"name","name",this.diffType));case"requestObject":return e.concat(new c(t,this.itemType,"requestObject","Example Request",this.diffType,{parsingFunction:this.parseRequestObject}));default:return e}}),[]):[]}}},"./version-control/utils/pmDiff/lineDiffHelper.js":function(e,t,n){"use strict";n.r(t),n.d(t,{parseDiff:function(){return a},parseLineDiff:function(){return c}});var o=n("./node_modules/lodash/lodash.js");const s=n("./node_modules/diff-match-patch/index.js"),r=/\W/;function i(e){if(!e||!Array.isArray(e))return[];let t=[];for(let n=0;n<e.length;n++){const o=e[n];t.push({value:o[1],count:o[1].split("\n").length,added:1===o[0],removed:-1===o[0]})}return t}function a(e,t){return i(function(e,t){const n=new s;let o=function(e,t){let n=[],o={};n[0]="";const s=function(e){let t="",s=n.length;return function(e,t){let n=0,o=-1;for(;o<e.length-1;){if(o=l(e,n),-1===o){t(e.substring(n,e.length)),o=e.length;break}if(n!==o){t(e.substring(n,o))}t(e[o]),n=o+1}}(e,(function(e){(o.hasOwnProperty?o.hasOwnProperty(e):void 0!==o[e])?t+=String.fromCharCode(o[e]):(t+=String.fromCharCode(s),o[e]=s,n[s++]=e)})),t},r=s(e),i=s(t);return{chars1:r,chars2:i,lineArray:n}}(e,t),r=o.chars1,i=o.chars2,a=o.lineArray,c=n.diff_main(r,i,!1);return n.diff_charsToLines_(c,a),c}(e||"",t||""))}function l(e,t){const n=e.length;for(let o=t;o<n;o++)if(r.test(e[o]))return o;return-1}function c(e,t,n){o.get(n,"context");let r=function(e,t,n){const o=n&&n.timeout||3,r=new s;let i,a;return r.Diff_Timeout=o,i=r.diff_linesToChars_(e,t),a=r.diff_main(i.chars1,i.chars2),r.diff_charsToLines_(a,i.lineArray),a}(e||"",t||"");return i(r)}},"./version-control/utils/pullRequest.js":function(e,t,n){"use strict";n.r(t),n.d(t,{approvals:function(){return u},approvedOnce:function(){return h},approversList:function(){return d},getDestinationCollectionEditors:function(){return a},hasEditorApproved:function(){return p},isCurrentUserEditor:function(){return m},isEditor:function(){return c},reviewerCriteriaSatisfied:function(){return l}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("./js/stores/CurrentUserStore.js"),i=n("./js/stores/StoreManager.js");function a(e){let t=[];return e.users.forEach((e=>{(e.roles||[]).find((e=>"COLLECTION_EDITOR"===e.name))&&t.push(e.id)})),t}function l(e,t,n){let o=a(t);return!!(e.find((e=>"editorApprovalRequired"===e.id&&e.enabled))&&n&&n.length&&c(n,t,o))}function c(e,t,n){return!("COLLECTION_EDITOR"!==s().get(t,"team.roles[0].name")&&!(e||[]).find((e=>n.includes(e.id))))}function d(e){const t=[];return e.forEach((e=>{"approved"===e.status&&e.id&&t.push(e.id.toString())})),t}function u(e){return d(e).length||0}function p(e,t,n){if((n||[]).find((e=>"editorApprovalRequired"===e.id))){const n=s().cloneDeep(t),o=d(e),a=(n.edit.users||[]).map((e=>e.entityId)),l=(n.edit.teams||[]).map((e=>e.entityId)),c=(0,i.resolveStoreInstance)(r.default).teamId;return l.includes(c)&&a.push((0,i.resolveStoreInstance)(r.default).id),s().intersection(o,a).length>0}return!0}function m(e){const t=(e.edit.users||[]).map((e=>e.entityId)),n=(e.edit.teams||[]).map((e=>e.entityId)),o=(0,i.resolveStoreInstance)(r.default);return t.includes(o.id)||n.includes(o.teamId)}function h(e,t){return!(t||[]).find((e=>"approvalRequired"===e.id))||u(e)>0}},"./version-control/utils/string.js":function(e,t,n){"use strict";function o(e,t,n,o){return(o?t+" ":"")+(1!==t&&"1"!==t?e+n:e)}function s(e,t,n){if("string"==typeof e&&e.length<t){let o="",s=t-e.length;for(;o.length<s;)o+=n;return o+e}return e}n.r(t),n.d(t,{padStart:function(){return s},pluralize:function(){return o}})},"./version-control/utils/user.js":function(e,t,n){"use strict";function o(e,t){let n=t||"",o=e.name||"",s=e.username||"",r=e.email||"";return n=n.replace(/\s/g,"").toLowerCase(),o=o.replace(/\s/g,"").toLowerCase(),s=s.replace(/\s/g,"").toLowerCase(),r=r.replace(/\s/g,"").toLowerCase(),n&&o.indexOf(n)>-1||s.indexOf(n)>-1||r.indexOf(n)>-1}n.r(t),n.d(t,{userFilter:function(){return o}})},"./node_modules/diff-match-patch/index.js":function(e){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1;t.Diff,t.prototype.diff_main=function(e,t,n,o){void 0===o&&(o=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var s=o;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var r=n,i=this.diff_commonPrefix(e,t),a=e.substring(0,i);e=e.substring(i),t=t.substring(i),i=this.diff_commonSuffix(e,t);var l=e.substring(e.length-i);e=e.substring(0,e.length-i),t=t.substring(0,t.length-i);var c=this.diff_compute_(e,t,r,s);return a&&c.unshift([0,a]),l&&c.push([0,l]),this.diff_cleanupMerge(c),c},t.prototype.diff_compute_=function(e,t,o,s){var r;if(!e)return[[1,t]];if(!t)return[[n,e]];var i=e.length>t.length?e:t,a=e.length>t.length?t:e,l=i.indexOf(a);if(-1!=l)return r=[[1,i.substring(0,l)],[0,a],[1,i.substring(l+a.length)]],e.length>t.length&&(r[0][0]=r[2][0]=n),r;if(1==a.length)return[[n,e],[1,t]];var c=this.diff_halfMatch_(e,t);if(c){var d=c[0],u=c[1],p=c[2],m=c[3],h=c[4],f=this.diff_main(d,p,o,s),g=this.diff_main(u,m,o,s);return f.concat([[0,h]],g)}return o&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,s):this.diff_bisect_(e,t,s)},t.prototype.diff_lineMode_=function(e,t,o){e=(u=this.diff_linesToChars_(e,t)).chars1,t=u.chars2;var s=u.lineArray,r=this.diff_main(e,t,!1,o);this.diff_charsToLines_(r,s),this.diff_cleanupSemantic(r),r.push([0,""]);for(var i=0,a=0,l=0,c="",d="";i<r.length;){switch(r[i][0]){case 1:l++,d+=r[i][1];break;case n:a++,c+=r[i][1];break;case 0:if(a>=1&&l>=1){r.splice(i-a-l,a+l),i=i-a-l;for(var u,p=(u=this.diff_main(c,d,!1,o)).length-1;p>=0;p--)r.splice(i,0,u[p]);i+=u.length}l=0,a=0,c="",d=""}i++}return r.pop(),r},t.prototype.diff_bisect_=function(e,t,o){for(var s=e.length,r=t.length,i=Math.ceil((s+r)/2),a=i,l=2*i,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[a+1]=0,d[a+1]=0;for(var p=s-r,m=p%2!=0,h=0,f=0,g=0,v=0,y=0;y<i&&!((new Date).getTime()>o);y++){for(var b=-y+h;b<=y-f;b+=2){for(var E=a+b,C=(T=b==-y||b!=y&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-b;T<s&&C<r&&e.charAt(T)==t.charAt(C);)T++,C++;if(c[E]=T,T>s)f+=2;else if(C>r)h+=2;else if(m){if((w=a+p-b)>=0&&w<l&&-1!=d[w])if(T>=(S=s-d[w]))return this.diff_bisectSplit_(e,t,T,C,o)}}for(var _=-y+g;_<=y-v;_+=2){for(var S,w=a+_,I=(S=_==-y||_!=y&&d[w-1]<d[w+1]?d[w+1]:d[w-1]+1)-_;S<s&&I<r&&e.charAt(s-S-1)==t.charAt(r-I-1);)S++,I++;if(d[w]=S,S>s)v+=2;else if(I>r)g+=2;else if(!m){if((E=a+p-_)>=0&&E<l&&-1!=c[E]){var T;C=a+(T=c[E])-E;if(T>=(S=s-S))return this.diff_bisectSplit_(e,t,T,C,o)}}}}return[[n,e],[1,t]]},t.prototype.diff_bisectSplit_=function(e,t,n,o,s){var r=e.substring(0,n),i=t.substring(0,o),a=e.substring(n),l=t.substring(o),c=this.diff_main(r,i,!1,s),d=this.diff_main(a,l,!1,s);return c.concat(d)},t.prototype.diff_linesToChars_=function(e,t){var n=[],o={};function s(e){for(var t="",s=0,r=-1,i=n.length;r<e.length-1;){-1==(r=e.indexOf("\n",s))&&(r=e.length-1);var a=e.substring(s,r+1);s=r+1,(o.hasOwnProperty?o.hasOwnProperty(a):void 0!==o[a])?t+=String.fromCharCode(o[a]):(t+=String.fromCharCode(i),o[a]=i,n[i++]=a)}return t}return n[0]="",{chars1:s(e),chars2:s(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var o=e[n][1],s=[],r=0;r<o.length;r++)s[r]=t[o.charCodeAt(r)];e[n][1]=s.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,o=Math.min(e.length,t.length),s=o,r=0;n<s;)e.substring(r,s)==t.substring(r,s)?r=n=s:o=s,s=Math.floor((o-n)/2+n);return s},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,o=Math.min(e.length,t.length),s=o,r=0;n<s;)e.substring(e.length-s,e.length-r)==t.substring(t.length-s,t.length-r)?r=n=s:o=s,s=Math.floor((o-n)/2+n);return s},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,o=t.length;if(0==n||0==o)return 0;n>o?e=e.substring(n-o):n<o&&(t=t.substring(0,n));var s=Math.min(n,o);if(e==t)return s;for(var r=0,i=1;;){var a=e.substring(s-i),l=t.indexOf(a);if(-1==l)return r;i+=l,0!=l&&e.substring(s-i)!=t.substring(0,i)||(r=i,i++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,o=e.length>t.length?t:e;if(n.length<4||2*o.length<n.length)return null;var s=this;function r(e,t,n){for(var o,r,i,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,d="";-1!=(c=t.indexOf(l,c+1));){var u=s.diff_commonPrefix(e.substring(n),t.substring(c)),p=s.diff_commonSuffix(e.substring(0,n),t.substring(0,c));d.length<p+u&&(d=t.substring(c-p,c)+t.substring(c,c+u),o=e.substring(0,n-p),r=e.substring(n+u),i=t.substring(0,c-p),a=t.substring(c+u))}return 2*d.length>=e.length?[o,r,i,a,d]:null}var i,a,l,c,d,u=r(n,o,Math.ceil(n.length/4)),p=r(n,o,Math.ceil(n.length/2));return u||p?(i=p?u&&u[4].length>p[4].length?u:p:u,e.length>t.length?(a=i[0],l=i[1],c=i[2],d=i[3]):(c=i[0],d=i[1],a=i[2],l=i[3]),[a,l,c,d,i[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var t=!1,o=[],s=0,r=null,i=0,a=0,l=0,c=0,d=0;i<e.length;)0==e[i][0]?(o[s++]=i,a=c,l=d,c=0,d=0,r=e[i][1]):(1==e[i][0]?c+=e[i][1].length:d+=e[i][1].length,r&&r.length<=Math.max(a,l)&&r.length<=Math.max(c,d)&&(e.splice(o[s-1],0,[n,r]),e[o[s-1]+1][0]=1,s--,i=--s>0?o[s-1]:-1,a=0,l=0,c=0,d=0,r=null,t=!0)),i++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),i=1;i<e.length;){if(e[i-1][0]==n&&1==e[i][0]){var u=e[i-1][1],p=e[i][1],m=this.diff_commonOverlap_(u,p),h=this.diff_commonOverlap_(p,u);m>=h?(m>=u.length/2||m>=p.length/2)&&(e.splice(i,0,[0,p.substring(0,m)]),e[i-1][1]=u.substring(0,u.length-m),e[i+1][1]=p.substring(m),i++):(h>=u.length/2||h>=p.length/2)&&(e.splice(i,0,[0,u.substring(0,h)]),e[i-1][0]=1,e[i-1][1]=p.substring(0,p.length-h),e[i+1][0]=n,e[i+1][1]=u.substring(h),i++),i++}i++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var o=e.charAt(e.length-1),s=n.charAt(0),r=o.match(t.nonAlphaNumericRegex_),i=s.match(t.nonAlphaNumericRegex_),a=r&&o.match(t.whitespaceRegex_),l=i&&s.match(t.whitespaceRegex_),c=a&&o.match(t.linebreakRegex_),d=l&&s.match(t.linebreakRegex_),u=c&&e.match(t.blanklineEndRegex_),p=d&&n.match(t.blanklineStartRegex_);return u||p?5:c||d?4:r&&!a&&l?3:a||l?2:r||i?1:0}for(var o=1;o<e.length-1;){if(0==e[o-1][0]&&0==e[o+1][0]){var s=e[o-1][1],r=e[o][1],i=e[o+1][1],a=this.diff_commonSuffix(s,r);if(a){var l=r.substring(r.length-a);s=s.substring(0,s.length-a),r=l+r.substring(0,r.length-a),i=l+i}for(var c=s,d=r,u=i,p=n(s,r)+n(r,i);r.charAt(0)===i.charAt(0);){s+=r.charAt(0),r=r.substring(1)+i.charAt(0),i=i.substring(1);var m=n(s,r)+n(r,i);m>=p&&(p=m,c=s,d=r,u=i)}e[o-1][1]!=c&&(c?e[o-1][1]=c:(e.splice(o-1,1),o--),e[o][1]=d,u?e[o+1][1]=u:(e.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,o=[],s=0,r=null,i=0,a=!1,l=!1,c=!1,d=!1;i<e.length;)0==e[i][0]?(e[i][1].length<this.Diff_EditCost&&(c||d)?(o[s++]=i,a=c,l=d,r=e[i][1]):(s=0,r=null),c=d=!1):(e[i][0]==n?d=!0:c=!0,r&&(a&&l&&c&&d||r.length<this.Diff_EditCost/2&&a+l+c+d==3)&&(e.splice(o[s-1],0,[n,r]),e[o[s-1]+1][0]=1,s--,r=null,a&&l?(c=d=!0,s=0):(i=--s>0?o[s-1]:-1,c=d=!1),t=!0)),i++;t&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,o=0,s=0,r=0,i="",a="";o<e.length;)switch(e[o][0]){case 1:r++,a+=e[o][1],o++;break;case n:s++,i+=e[o][1],o++;break;case 0:s+r>1?(0!==s&&0!==r&&(0!==(t=this.diff_commonPrefix(a,i))&&(o-s-r>0&&0==e[o-s-r-1][0]?e[o-s-r-1][1]+=a.substring(0,t):(e.splice(0,0,[0,a.substring(0,t)]),o++),a=a.substring(t),i=i.substring(t)),0!==(t=this.diff_commonSuffix(a,i))&&(e[o][1]=a.substring(a.length-t)+e[o][1],a=a.substring(0,a.length-t),i=i.substring(0,i.length-t))),0===s?e.splice(o-r,s+r,[1,a]):0===r?e.splice(o-s,s+r,[n,i]):e.splice(o-s-r,s+r,[n,i],[1,a]),o=o-s-r+(s?1:0)+(r?1:0)+1):0!==o&&0==e[o-1][0]?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,r=0,s=0,i="",a=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(o=1;o<e.length-1;)0==e[o-1][0]&&0==e[o+1][0]&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),l=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),l=!0)),o++;l&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var o,s=0,r=0,i=0,a=0;for(o=0;o<e.length&&(1!==e[o][0]&&(s+=e[o][1].length),e[o][0]!==n&&(r+=e[o][1].length),!(s>t));o++)i=s,a=r;return e.length!=o&&e[o][0]===n?a:a+(t-i)},t.prototype.diff_prettyHtml=function(e){for(var t=[],o=/&/g,s=/</g,r=/>/g,i=/\n/g,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1].replace(o,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(i,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],o=0;o<e.length;o++)e[o][0]!==n&&(t[o]=e[o][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,o=0,s=0,r=0;r<e.length;r++){var i=e[r][0],a=e[r][1];switch(i){case 1:o+=a.length;break;case n:s+=a.length;break;case 0:t+=Math.max(o,s),o=0,s=0}}return t+=Math.max(o,s)},t.prototype.diff_toDelta=function(e){for(var t=[],o=0;o<e.length;o++)switch(e[o][0]){case 1:t[o]="+"+encodeURI(e[o][1]);break;case n:t[o]="-"+e[o][1].length;break;case 0:t[o]="="+e[o][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,t){for(var o=[],s=0,r=0,i=t.split(/\t/g),a=0;a<i.length;a++){var l=i[a].substring(1);switch(i[a].charAt(0)){case"+":try{o[s++]=[1,decodeURI(l)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var c=parseInt(l,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+l);var d=e.substring(r,r+=c);"="==i[a].charAt(0)?o[s++]=[0,d]:o[s++]=[n,d];break;default:if(i[a])throw new Error("Invalid diff operation in diff_fromDelta: "+i[a])}}if(r!=e.length)throw new Error("Delta length ("+r+") does not equal source text length ("+e.length+").");return o},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var o=this.match_alphabet_(t),s=this;function r(e,o){var r=e/t.length,i=Math.abs(n-o);return s.Match_Distance?r+i/s.Match_Distance:i?1:r}var i=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(i=Math.min(r(0,a),i),-1!=(a=e.lastIndexOf(t,n+t.length))&&(i=Math.min(r(0,a),i)));var l,c,d=1<<t.length-1;a=-1;for(var u,p=t.length+e.length,m=0;m<t.length;m++){for(l=0,c=p;l<c;)r(m,n+c)<=i?l=c:p=c,c=Math.floor((p-l)/2+l);p=c;var h=Math.max(1,n-c+1),f=Math.min(n+c,e.length)+t.length,g=Array(f+2);g[f+1]=(1<<m)-1;for(var v=f;v>=h;v--){var y=o[e.charAt(v-1)];if(g[v]=0===m?(g[v+1]<<1|1)&y:(g[v+1]<<1|1)&y|(u[v+1]|u[v])<<1|1|u[v+1],g[v]&d){var b=r(m,v-1);if(b<=i){if(i=b,!((a=v-1)>n))break;h=Math.max(1,2*n-a)}}}if(r(m+1,n)>i)break;u=g}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),o=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,n=t.substring(e.start2-o,e.start2+e.length1+o);o+=this.Patch_Margin;var s=t.substring(e.start2-o,e.start2);s&&e.diffs.unshift([0,s]);var r=t.substring(e.start2+e.length1,e.start2+e.length1+o);r&&e.diffs.push([0,r]),e.start1-=s.length,e.start2-=s.length,e.length1+=s.length+r.length,e.length2+=s.length+r.length}},t.prototype.patch_make=function(e,o,s){var r,i;if("string"==typeof e&&"string"==typeof o&&void 0===s)r=e,(i=this.diff_main(r,o,!0)).length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==typeof e&&void 0===o&&void 0===s)i=e,r=this.diff_text1(i);else if("string"==typeof e&&o&&"object"==typeof o&&void 0===s)r=e,i=o;else{if("string"!=typeof e||"string"!=typeof o||!s||"object"!=typeof s)throw new Error("Unknown call format to patch_make.");r=e,i=s}if(0===i.length)return[];for(var a=[],l=new t.patch_obj,c=0,d=0,u=0,p=r,m=r,h=0;h<i.length;h++){var f=i[h][0],g=i[h][1];switch(c||0===f||(l.start1=d,l.start2=u),f){case 1:l.diffs[c++]=i[h],l.length2+=g.length,m=m.substring(0,u)+g+m.substring(u);break;case n:l.length1+=g.length,l.diffs[c++]=i[h],m=m.substring(0,u)+m.substring(u+g.length);break;case 0:g.length<=2*this.Patch_Margin&&c&&i.length!=h+1?(l.diffs[c++]=i[h],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,p),a.push(l),l=new t.patch_obj,c=0,p=m,d=u)}1!==f&&(d+=g.length),f!==n&&(u+=g.length)}return c&&(this.patch_addContext_(l,p),a.push(l)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],o=0;o<e.length;o++){var s=e[o],r=new t.patch_obj;r.diffs=[];for(var i=0;i<s.diffs.length;i++)r.diffs[i]=s.diffs[i].slice();r.start1=s.start1,r.start2=s.start2,r.length1=s.length1,r.length2=s.length2,n[o]=r}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var o=this.patch_addPadding(e);t=o+t+o,this.patch_splitMax(e);for(var s=0,r=[],i=0;i<e.length;i++){var a,l,c=e[i].start2+s,d=this.diff_text1(e[i].diffs),u=-1;if(d.length>this.Match_MaxBits?-1!=(a=this.match_main(t,d.substring(0,this.Match_MaxBits),c))&&(-1==(u=this.match_main(t,d.substring(d.length-this.Match_MaxBits),c+d.length-this.Match_MaxBits))||a>=u)&&(a=-1):a=this.match_main(t,d,c),-1==a)r[i]=!1,s-=e[i].length2-e[i].length1;else if(r[i]=!0,s=a-c,d==(l=-1==u?t.substring(a,a+d.length):t.substring(a,u+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[i].diffs)+t.substring(a+d.length);else{var p=this.diff_main(d,l,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(p)/d.length>this.Patch_DeleteThreshold)r[i]=!1;else{this.diff_cleanupSemanticLossless(p);for(var m,h=0,f=0;f<e[i].diffs.length;f++){var g=e[i].diffs[f];0!==g[0]&&(m=this.diff_xIndex(p,h)),1===g[0]?t=t.substring(0,a+m)+g[1]+t.substring(a+m):g[0]===n&&(t=t.substring(0,a+m)+t.substring(a+this.diff_xIndex(p,h+g[1].length))),g[0]!==n&&(h+=g[1].length)}}}}return[t=t.substring(o.length,t.length-o.length),r]},t.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",o=1;o<=t;o++)n+=String.fromCharCode(o);for(o=0;o<e.length;o++)e[o].start1+=t,e[o].start2+=t;var s=e[0],r=s.diffs;if(0==r.length||0!=r[0][0])r.unshift([0,n]),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>r[0][1].length){var i=t-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],s.start1-=i,s.start2-=i,s.length1+=i,s.length2+=i}if(0==(r=(s=e[e.length-1]).diffs).length||0!=r[r.length-1][0])r.push([0,n]),s.length1+=t,s.length2+=t;else if(t>r[r.length-1][1].length){i=t-r[r.length-1][1].length;r[r.length-1][1]+=n.substring(0,i),s.length1+=i,s.length2+=i}return n},t.prototype.patch_splitMax=function(e){for(var o=this.Match_MaxBits,s=0;s<e.length;s++)if(!(e[s].length1<=o)){var r=e[s];e.splice(s--,1);for(var i=r.start1,a=r.start2,l="";0!==r.diffs.length;){var c=new t.patch_obj,d=!0;for(c.start1=i-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push([0,l]));0!==r.diffs.length&&c.length1<o-this.Patch_Margin;){var u=r.diffs[0][0],p=r.diffs[0][1];1===u?(c.length2+=p.length,a+=p.length,c.diffs.push(r.diffs.shift()),d=!1):u===n&&1==c.diffs.length&&0==c.diffs[0][0]&&p.length>2*o?(c.length1+=p.length,i+=p.length,d=!1,c.diffs.push([u,p]),r.diffs.shift()):(p=p.substring(0,o-c.length1-this.Patch_Margin),c.length1+=p.length,i+=p.length,0===u?(c.length2+=p.length,a+=p.length):d=!1,c.diffs.push([u,p]),p==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(p.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var m=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==m&&(c.length1+=m.length,c.length2+=m.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=m:c.diffs.push([0,m])),d||e.splice(++s,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var o=[];if(!e)return o;for(var s=e.split("\n"),r=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<s.length;){var a=s[r].match(i);if(!a)throw new Error("Invalid patch string: "+s[r]);var l=new t.patch_obj;for(o.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),r++;r<s.length;){var c=s[r].charAt(0);try{var d=decodeURI(s[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==c)l.diffs.push([n,d]);else if("+"==c)l.diffs.push([1,d]);else if(" "==c)l.diffs.push([0,d]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+d)}r++}}return o},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[o+1]=e+encodeURI(this.diffs[o][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},"./node_modules/react-sticky-box/dist/es/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),s=n("../../node_modules/react/index.js"),r=n("./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js"),i=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?i="sticky":CSS.supports("position","-webkit-sticky")&&(i="-webkit-sticky"));var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a={passive:!0}}});window.addEventListener("testPassive",null,l),window.removeEventListener("testPassive",null,l)}catch(e){}var c=function(e){function t(t){var n=e.call(this,t)||this;return n.addListener=function(e,t,o,s){e.addEventListener(t,o,s),n.unsubscribes.push((function(){return e.removeEventListener(t,o)}))},n.addResizeObserver=function(e,t){var o=new r.default(t);o.observe(e),n.unsubscribes.push((function(){return o.disconnect()}))},n.registerContainerRef=function(e){i&&(n.node=e,e?(n.scrollPane=function(e){for(var t=e;t=t.parentElement;){var n=getComputedStyle(t,null).getPropertyValue("overflow-y");if(t===document.body)return window;if("auto"===n||"scroll"===n)return t}return window}(n.node),n.latestScrollY=n.scrollPane===window?window.scrollY:n.scrollPane.scrollTop,n.addListener(n.scrollPane,"scroll",n.handleScroll,a),n.addListener(n.scrollPane,"mousewheel",n.handleScroll,a),n.scrollPane===window?(n.addListener(window,"resize",n.handleWindowResize),n.handleWindowResize()):(n.addResizeObserver(n.scrollPane,n.handleScrollPaneResize),n.handleScrollPaneResize()),n.addResizeObserver(n.node.parentNode,n.handleParentNodeResize),n.handleParentNodeResize(),n.addResizeObserver(n.node,n.handleNodeResize),n.handleNodeResize({initial:!0}),n.initial()):(n.unsubscribes.forEach((function(e){return e()})),n.unsubscribes=[],n.scrollPane=null))},n.getCurrentOffset=function(){if("relative"===n.mode)return n.offset;var e=n.props,t=e.offsetTop,o=e.offsetBottom;return"stickyTop"===n.mode?Math.max(0,n.scrollPaneOffset+n.latestScrollY-n.naturalTop+t):"stickyBottom"===n.mode?Math.max(0,n.scrollPaneOffset+n.latestScrollY+n.viewPortHeight-(n.naturalTop+n.nodeHeight+o)):void 0},n.handleWindowResize=function(){n.viewPortHeight=window.innerHeight,n.scrollPaneOffset=0,n.handleScroll()},n.handleScrollPaneResize=function(){n.viewPortHeight=n.scrollPane.offsetHeight,n.scrollPane.firstChild.offsetParent===n.scrollPane?n.scrollPaneOffset=n.scrollPane.getBoundingClientRect().top:n.scrollPaneOffset=0,n.handleScroll()},n.handleParentNodeResize=function(){var e=n.node.parentNode,t=getComputedStyle(e,null),o=parseInt(t.getPropertyValue("padding-top"),10),s=parseInt(t.getPropertyValue("padding-bottom"),10);n.naturalTop=function(e,t){var n=e,o=0;t.firstChild&&t.firstChild.offsetParent!==t&&(o+=e.offsetTop-t.offsetTop,t=e.offsetParent,o+=-e.offsetTop);do{o+=n.offsetTop,n=n.offsetParent}while(n&&n!==t);return o}(e,n.scrollPane)+o+n.scrollPaneOffset;var r=n.parentHeight;n.parentHeight=e.getBoundingClientRect().height-(o+s),"relative"===n.mode&&(n.props.bottom?n.changeMode("relative"):r>n.parentHeight&&n.changeToStickyBottomIfBoxTooLow(n.latestScrollY)),r!==n.parentHeight&&"relative"===n.mode&&(n.latestScrollY=Number.POSITIVE_INFINITY,n.handleScroll())},n.handleNodeResize=function(e){var t=(void 0===e?{}:e).initial,o=n.nodeHeight;if(n.nodeHeight=n.node.getBoundingClientRect().height,!t&&o!==n.nodeHeight){var s=n.props,r=s.offsetTop,i=s.offsetBottom,a=s.bottom;if(n.nodeHeight+r+i<=n.viewPortHeight)n.mode=void 0,n.initial();else{var l=o-n.nodeHeight,c=n.parentHeight-n.nodeHeight,d=Math.min(c,n.getCurrentOffset()+(a?l:0));n.offset=Math.max(0,d),a&&"stickyBottom"===n.mode||n.changeMode("relative")}}},n.handleScroll=function(){var e=n.props,t=e.offsetTop,o=e.offsetBottom,s=n.scrollPane===window?window.scrollY:n.scrollPane.scrollTop;if(s!==n.latestScrollY){if(n.nodeHeight+t+o<=n.viewPortHeight)return n.initial(),void(n.latestScrollY=s);var r=s-n.latestScrollY;n.offset=n.getCurrentOffset(),r>0?"stickyTop"===n.mode?s+n.scrollPaneOffset+t>n.naturalTop&&(s+n.scrollPaneOffset+n.viewPortHeight<=n.naturalTop+n.nodeHeight+n.offset+o?n.changeMode("relative"):n.changeMode("stickyBottom")):"relative"===n.mode&&n.changeToStickyBottomIfBoxTooLow(s):"stickyBottom"===n.mode?n.scrollPaneOffset+s+n.viewPortHeight<n.naturalTop+n.parentHeight+o&&(n.scrollPaneOffset+s+t>=n.naturalTop+n.offset?n.changeMode("relative"):n.changeMode("stickyTop")):"relative"===n.mode&&n.scrollPaneOffset+s+t<n.naturalTop+n.offset&&n.changeMode("stickyTop"),n.latestScrollY=s}},t.offset,n.unsubscribes=[],n}(0,o.default)(t,e);var n=t.prototype;return n.changeMode=function(e){var t=this.props,n=t.onChangeMode,o=t.offsetTop,s=t.offsetBottom,r=t.bottom;if(this.mode!==e&&n(this.mode,e),this.mode=e,"relative"===e)if(this.node.style.position="relative",r){var a=Math.max(0,this.parentHeight-this.nodeHeight-this.offset);this.node.style.bottom=a+"px"}else this.node.style.top=this.offset+"px";else this.node.style.position=i,"stickyBottom"===e?r?this.node.style.bottom=s+"px":this.node.style.top=this.viewPortHeight-this.nodeHeight-s+"px":r?this.node.style.bottom=this.viewPortHeight-this.nodeHeight-s+"px":this.node.style.top=o+"px";this.offset=this.getCurrentOffset()},n.initial=function(){this.props.bottom?"stickyBottom"!==this.mode&&this.changeMode("stickyBottom"):"stickyTop"!==this.mode&&this.changeMode("stickyTop")},n.changeToStickyBottomIfBoxTooLow=function(e){var t=this.props.offsetBottom;e+this.scrollPaneOffset+this.viewPortHeight>=this.naturalTop+this.nodeHeight+this.offset+t&&this.changeMode("stickyBottom")},n.render=function(){var e=this.props,t=e.children,n=e.className,o=e.style;return s.createElement("div",{className:n,style:o,ref:this.registerContainerRef},t)},t}(s.Component);c.defaultProps={onChangeMode:function(){},offsetTop:0,offsetBottom:0}},"./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js":function(e,t,n){"use strict";n.r(t);var o=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,o){return e[0]===t&&(n=o,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(t,n){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,o=e(n,t);~o&&n.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,o=this.__entries__;n<o.length;n++){var s=o[n];e.call(t,s[1],s[0])}},t}()}(),s="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,o=!1,s=0;function r(){n&&(n=!1,e()),o&&l()}function a(){i(r)}function l(){var e=Date.now();if(n){if(e-s<2)return;o=!0}else n=!0,o=!1,setTimeout(a,t);s=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){s&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){s&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),d=function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},p=y(0,0,0,0);function m(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+m(e["border-"+n+"-width"])}),0)}function f(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return p;var o=u(e).getComputedStyle(e),s=function(e){for(var t={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var s=o[n],r=e["padding-"+s];t[s]=m(r)}return t}(o),r=s.left+s.right,i=s.top+s.bottom,a=m(o.width),l=m(o.height);if("border-box"===o.boxSizing&&(Math.round(a+r)!==t&&(a-=h(o,"left","right")+r),Math.round(l+i)!==n&&(l-=h(o,"top","bottom")+i)),!function(e){return e===u(e).document.documentElement}(e)){var c=Math.round(a+r)-t,d=Math.round(l+i)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(d)&&(l-=d)}return y(s.left,s.top,a,l)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return s?g(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):f(e):p}function y(e,t,n,o){return{x:e,y:t,width:n,height:o}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),E=function(e,t){var n,o,s,r,i,a,l,c=(o=(n=t).x,s=n.y,r=n.width,i=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),d(l,{x:o,y:s,width:r,height:i,top:s,right:o+r,bottom:i+s,left:o}),l);d(this,{target:e,contentRect:c})},C=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new o,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new E(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),_="undefined"!=typeof WeakMap?new WeakMap:new o,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),o=new C(t,n,this);_.set(this,o)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=_.get(this))[e].apply(t,arguments)}}));var w=void 0!==r.ResizeObserver?r.ResizeObserver:S;t.default=w},"../../packages/version-control/change-recording/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{ChangelogRenderer:function(){return o.ChangelogRenderer},ExpandedDiffRenderer:function(){return o.ExpandedDiffRenderer}});var o=n("../../packages/version-control/change-recording/src/index.tsx")},"../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts":function(e,t,n){"use strict";function o(e){return!1!==e.group.showChildLogs&&!0===e.group.isMaster}function s(e){return e.actors?e.actors:e.actor?[e.actor]:[]}n.r(t),n.d(t,{getChangelogActors:function(){return s},isChangelogExpandable:function(){return o}})},"../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/ChangelogDateGroup.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/index.ts"),c=n("../../packages/version-control/change-recording/src/hooks/index.ts"),d=n("../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts"),u=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/index.ts");const p=a.default.li`
  &:last-of-type {
    .changelog-timeline {
      display: ${e=>e.isExpanded?"block":"none"};
    }
  }

  .changelog-dategroup-container {
    position: relative;
    padding-left: ${e=>e.theme["spacing-xxl"]};
    padding-top: ${e=>e.theme["spacing-m"]};
    padding-bottom: ${e=>e.theme["spacing-m"]};

    &:hover {
      background-color: ${e=>e.theme["highlight-background-color-primary"]};

      .entry-header-icon {
        background-color: ${e=>e.theme["highlight-background-color-primary"]};
      }
    }
  }

  .changelog-dategroup-children {
    .changelog-entry-container:last-of-type,
    .changelog-group-container:last-of-type {
      overflow-y: hidden;
    }
  }
`,m=a.default.div`
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  position: absolute;
  background-color: ${e=>e.theme["background-color-primary"]};
  left: ${e=>e.theme["spacing-xs"]};
  top: ${e=>e.theme["spacing-m"]};
  height: ${e=>e.theme["spacing-xl"]};
  width: ${e=>e.theme["spacing-xl"]};
`,h=a.default.div`
  position: absolute;
  border-left-width: ${e=>e.theme["border-width-default"]};
  border-left-color: ${e=>e.theme["border-color-default"]};
  border-left-style: solid;
  top: ${e=>e.theme["spacing-xxl"]};
  left: ${e=>e.theme["spacing-l"]};
  height: 50%;
  width: ${e=>e.theme["spacing-zero"]};
`;function f(e){var t;const[n,a]=(0,c.useToggle)(e.isExpanded||!1);return o.createElement(p,{isExpanded:n},o.createElement("div",{className:"changelog-dategroup-container",tabIndex:0,role:"button",onClick:a,onKeyDown:a},o.createElement(h,{className:"changelog-timeline"}),o.createElement(m,{className:"entry-header-icon"},n?o.createElement(r.default,null):o.createElement(i.default,null)),o.createElement(s.default,{type:"h4",color:"content-color-primary",hasBottomSpacing:!0,text:e.dateString})),n&&o.createElement("div",{className:"changelog-dategroup-children"},null===(t=e.logs)||void 0===t?void 0:t.map((t=>(0,d.isChangelogExpandable)(t)?o.createElement(l.default,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,createdAt:t.createdAt,updatedAt:t.updatedAt,nestLevel:1,users:(0,d.getChangelogActors)(t),description:t.description,isGroup:!0,key:t.id,generatedDescription:t.generatedDescription,diff:t.diff,groupId:t.group.groupId,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline}):o.createElement(u.default,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,timestamp:t.createdAt,nestLevel:1,users:(0,d.getChangelogActors)(t),description:t.description,key:t.id,groupId:t.group.groupId,generatedDescription:t.generatedDescription,diff:t.diff,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline})))))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/ChangelogDateGroup.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/ChangelogEntry.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke-small.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),f=n("../../node_modules/lodash/lodash.js"),g=n.n(f),v=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),y=n("./js/services/NavigationService.js"),b=n("./js/components/base/Markdown.js"),E=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),C=n("../../packages/version-control/change-recording/src/hooks/index.ts"),_=n("../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/index.ts"),S=n("../../packages/version-control/change-recording/src/components/common/Modal/index.ts"),w=n("../../packages/version-control/change-recording/src/components/common/StyledText/index.ts"),I=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/index.ts"),T=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/index.ts"),x=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/index.ts"),j=n("../../packages/version-control/change-recording/src/config/index.ts"),k=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/index.ts"),R=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),M=n("../../packages/version-control/change-recording/src/utils/index.ts"),P=n("../../packages/version-control/change-recording/src/context/ChangelogContext.tsx"),D=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),A=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts"),L=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const O=v.default.div`
  position: relative;
  padding: ${e=>`${e.theme["spacing-m"]} ${e.theme["spacing-s"]}`};

  cursor: ${e=>e.isExpandable?"pointer":"default"};

  // Necessary to maintain nesting heirarchy. Unable to make do with tokens
  padding-left: ${e=>{const t=e.theme["spacing-l"],n=parseInt(t.substr(0,t.length-2),10);return`${n+n*e.nestLevel}px`}};

  .changelog-entry-description-heading {
    margin-top: ${e=>e.theme["spacing-s"]};
    font-family: ${e=>e.theme["text-family-default"]};
    font-size: ${e=>e.theme["text-size-m"]};
    font-weight: ${e=>e.theme["text-weight-regular"]};
    line-height: ${e=>e.theme["line-height-s"]};
    color: ${e=>e.theme["content-color-primary"]};

    // Only needed for flexing div
    .markdown-html-root > div > div {
      display: inline-flex;
      flex-wrap: wrap;
      align-items: center;
    }

    // Only needed for flexing div
    .markdown-html-root > div {
      display: inline-flex;
      flex-wrap: wrap;
      align-items: center;
    }

    // Only needed for fork label
    .markdown-html-root > div > div > p {
      color: ${e=>e.theme["content-color-secondary"]};
      font-weight: ${e=>e.theme["text-weight-regular"]};
      font-size: ${e=>e.theme["text-size-s"]};
      margin-right: ${e=>e.theme["spacing-xs"]};
      max-width: 150px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    // Only needed for fork label icon
    .markdown-html-root > div > div > img {
      margin-right: 2px;
    }

    // Only needed for fork name
    .markdown-html-root > div > div > strong {
      margin-left: ${e=>e.theme["spacing-xs"]};
      margin-right: 2px;
    }

    // Only needed for fork parent name
    .markdown-html-root > div > strong {
      margin-right: 2px;
    }

    // Only needed for fork parent name
    .markdown-html-root > div > div > div > p {
      margin-right: ${e=>e.theme["spacing-xs"]};
    }

    p {
      margin: 0;
    }

    strong {
      font-weight: ${e=>e.theme["text-weight-medium"]};
    }

    a {
      text-decoration: underline;
    }

    a:hover {
      color: ${e=>e.theme["content-color-link"]};
      text-decoration: underline;
    }
  }

  &:hover {
    .changelog-timeline {
      border-left-color: ${e=>e.isExpandable?e.theme["blue-30"]:e.theme["border-color-default"]};
    }

    background-color: ${e=>e.isExpandable?e.theme["highlight-background-color-primary"]:"inherit"};

    .entry-header-icon {
      background-color: ${e=>e.theme[e.isExpandable?"highlight-background-color-primary":"background-color-primary"]};
    }

    .changelog-entry-diff-wrapper {
      .changelog-entry-diff-body {
        background-color: ${e=>e.theme[e.isExpandable?"background-color-secondary":"background-color-primary"]};
      }

      .changelog-entry-diff-header {
        background-color: ${e=>e.theme[e.isExpandable?"background-color-tertiary":"background-color-secondary"]};
      }
    }
  }

  .changelog-entry-diff-text {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;

    margin-top: ${e=>e.theme["spacing-m"]};

    & > span:first-of-type {
      margin-right: ${e=>e.theme["spacing-s"]};
    }
  }

  .changelog-diff-hidden-indicator {
    margin-top: ${e=>e.theme["spacing-l"]};
  }
`,N=v.default.div`
  width: ${e=>e.theme["spacing-zero"]};
  position: absolute;
  border-left-width: ${e=>e.theme["border-width-default"]};
  border-left-color: ${e=>e.theme["border-color-default"]};
  border-left-style: solid;
  top: ${e=>e.theme["spacing-xxl"]};
  left: ${e=>e.theme["spacing-l"]};
  height: 100%;
`,q=(0,E.observer)((e=>{var t,n,f;const[v,E]=(0,o.useState)(!1),[q,B]=(0,o.useState)(null),[F,$]=(0,C.useToggle)(!1),[U,W]=(0,o.useState)(!1),[G,V]=(0,o.useState)(!1),[z,H]=(0,o.useState)((()=>e.note||"")),[Y,K]=(0,o.useState)(!1),[X,Q]=(0,o.useState)((()=>e.tag||"")),{model:J,modelId:Z,reloadChangelog:ee,store:te}=(0,o.useContext)(P.default),{isChangelogHideDiffEnabled:ne}=te,{addToast:oe}=(0,s.default)(),se=(0,o.useMemo)((()=>function(e){let t=e.template;return Object.keys(e.placeholders).forEach((n=>{const o=e.placeholders[n].value;if(o&&"string"==typeof o){let e=o;o.length>30&&(e=`${o.slice(0,28)}...`),t=t.split(n).join(e)}else t=t.split(`**${n}**`).join(""),t=t.split(n).join("")})),t}(e.generatedDescription)),[e.generatedDescription]),re=(null===(t=e.diff)||void 0===t?void 0:t.isHidden)||!1,ie=t=>te.updateChangelogDiffHidden(e.id,t,e.groupId,!0===e.isGroup),ae=e.diff&&0===Object.keys((null===(n=e.diff)||void 0===n?void 0:n.fetched)||{}).filter((t=>{var n;return!g().isEmpty(null===(n=e.diff)||void 0===n?void 0:n.fetched[t])})).length,le=!te.disableRestore&&(null===(f=e.allowedActions)||void 0===f?void 0:f.restore),ce=ne&&e.allowedActions.hideDiff&&!ae&&!re,de=ne&&e.allowedActions.hideDiff&&!ae&&re,ue=le||ce||de,pe={deleteTag:{content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"This will delete the tag added to the change permanently"),header:"Delete tag?",isDestructive:!0,modalSize:"small",onConfirm:function(){Y&&K(!1),E(!1),Q("")},confirmButtonText:"Delete",confirmButtonLoadingText:"Deleting..."},deleteNote:{content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"This will delete the note added to the change permanently"),header:"Delete note?",isDestructive:!0,modalSize:"small",onConfirm:function(){G&&V(!1),E(!1),H("")},confirmButtonText:"Delete",confirmButtonLoadingText:"Deleting..."},restoreChanges:{header:"Restore changes",content:o.createElement(_.default,{createdAt:e.timestamp,model:e.changeModel,modelId:Z||"",toRevision:e.id}),isDestructive:!1,modalSize:"small",onConfirm:function(){return L(this,void 0,void 0,(function*(){W(!0),D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.INITIATE_CHANGELOG_RESTORE,J),(0,R.restoreModelToChange)(J,Z,e.restoreKey,e.id).then((()=>{oe({title:`Successfully restored ${J}`,status:"success",description:`Your ${J} was successfully restored to the change at ${(0,M.formatTimeAndDate)(e.timestamp)}.`,isDismissible:!0})})).catch((e=>{A.default.logError(`ChangelogEntry~restoreModelToChange: Failed to restore ${J}`,e),D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.FAILED_CHANGELOG_RESTORE,J),oe({title:`Failed to restore ${J}`,status:"error",description:"Something went wrong. Please try again later.",isDismissible:!0})})).finally((()=>{E(!1),W(!1),setTimeout((()=>ee()),2e3)}))}))},confirmButtonText:"Restore",disableButtons:U,confirmButtonLoadingText:"Restoring..."},hideChangeDiff:{header:"Hide diff for this change?",content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"All users with access to this workspace will be able to see the change but the diff will be hidden. Only editors of this ",J," ","will be able to view diff."),isDestructive:!1,modalSize:"small",onConfirm:function(){W(!0),D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.INITIATE_CHANGELOG_HIDE_DIFF,J),(0,R.hideChangelogDiff)(J,Z,e.id).then((()=>{ie(!0),oe({title:"Diff hidden from viewers for this change",status:"success",isDismissible:!0})})).catch((e=>{A.default.logError(`ChangelogEntry~hideDiff: Failed to hide diff for ${J}`,e),D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.FAILED_CHANGELOG_HIDE_DIFF,J),oe({title:"Failed to hide diff for changelog",status:"error",description:"Something went wrong. Please try again later.",isDismissible:!0})})).finally((()=>{E(!1),W(!1)}))},confirmButtonText:"Hide Diff",disableButtons:U,confirmButtonLoadingText:"Hiding..."},unhideChangeDiff:{header:"Show diff to all users?",content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"All users with access to this workspace will be able to view diff for this change."),isDestructive:!1,modalSize:"small",onConfirm:function(){W(!0),D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.INITIATE_CHANGELOG_UNHIDE_DIFF,J),(0,R.unhideChangelogDiff)(J,Z,e.id).then((()=>{ie(!1),oe({title:"All users with access to this workspace can now see this diff",status:"success",isDismissible:!0})})).catch((e=>{A.default.logError(`ChangelogEntry~unhideDiff: Failed to unhide diff for ${J}`,e),D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.FAILED_CHANGELOG_UNHIDE_DIFF,J),oe({title:"Failed to unhide diff for changelog",status:"error",description:"Something went wrong. Please try again later.",isDismissible:!0})})).finally((()=>{E(!1),W(!1)}))},confirmButtonText:"Show Diff",disableButtons:U,confirmButtonLoadingText:"Unhiding..."}};function me(){F||D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_DIFF,J),$()}function he(){D.default.addEvent(j.CHANGELOG_ANALYTICS_EVENTS.VIEW_EXPANDED_DIFF,J),y.default.transitionTo("build.changelogExpandedDiff",{model:J,modelId:Z,changelogId:btoa(e.id)},{})}function fe(){V(!0)}function ge(){K(!0)}function ve(e){let t;switch(e){case"restoreChanges":t=j.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_RESTORE;break;case"hideChangeDiff":t=j.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_HIDE_DIFF;break;case"unhideChangeDiff":t=j.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_UNHIDE_DIFF;break;default:return}D.default.addEvent(t,J),B(e),E(!0)}return o.createElement(O,{nestLevel:e.nestLevel,isExpandable:e.isGroup,className:"changelog-entry-container",onClick:e.onClick},o.createElement(N,{nestLevel:e.nestLevel,className:"changelog-timeline"}),o.createElement(x.default,{isExpanded:e.isExpanded,isCollapsible:e.isGroup,createdAt:e.timestamp,users:e.users,isDiffHidden:ne&&!0===e.allowedActions.hideDiff&&re},ue&&o.createElement("div",{role:"button",tabIndex:0,onKeyDown:t=>e.isGroup&&t.stopPropagation(),onClick:t=>{e.isGroup&&t.stopPropagation()}},o.createElement(d.default,{closeOnSelect:!0},o.createElement(u.default,null,o.createElement(p.default,{icon:"icon-action-options-stroke",type:"tertiary",size:"small"})),o.createElement(i.default,null,le&&o.createElement(a.default,{isDisabled:e.isOffline,tooltip:e.isOffline&&"You must be online to perform this action",onClick:()=>ve("restoreChanges")},"Restore to this change"),j.ENABLE_CHANGELOG_TAG&&X&&!Y&&o.createElement(a.default,{onClick:ge},"Edit tag"),j.ENABLE_CHANGELOG_TAG&&X&&!Y&&o.createElement(a.default,{onClick:()=>ve("deleteTag")},"Delete tag"),j.ENABLE_CHANGELOG_TAG&&!X&&!Y&&o.createElement(a.default,{onClick:ge},"Add a tag"),j.ENABLE_CHANGELOG_NOTE&&z&&!G&&o.createElement(a.default,{onClick:fe},"Edit Note"),j.ENABLE_CHANGELOG_NOTE&&z&&!G&&o.createElement(a.default,{onClick:()=>ve("deleteNote")},"Delete Note"),j.ENABLE_CHANGELOG_NOTE&&!z&&!G&&o.createElement(a.default,{onClick:fe},"Add Note"),ce&&o.createElement(a.default,{isDisabled:e.isOffline,tooltip:e.isOffline&&"You must be online to perform this action",onClick:()=>ve("hideChangeDiff")},"Hide diff for this change"),de&&o.createElement(a.default,{isDisabled:e.isOffline,tooltip:e.isOffline&&"You must be online to perform this action",onClick:()=>ve("unhideChangeDiff")},"Show diff to all users"))))),o.createElement("div",{className:"changelog-entry-description-heading"},o.createElement(b.default,{source:e.description||se})),j.ENABLE_CHANGELOG_NOTE&&o.createElement(T.default,{tag:X,isEditingTag:Y,onCancelTag:function(){K(!1)},onSaveTag:function(e){Q(e),K(!1)}}),j.ENABLE_CHANGELOG_TAG&&o.createElement(I.default,{note:z,isEditingNote:G,onCancelNote:function(){V(!1)},onSaveNote:function(e){H(e),V(!1)}}),!e.isGroup&&(ne&&!e.allowedActions.hideDiff&&re?o.createElement(l.default,{content:"Only users with edit permission can view this diff",placement:"bottom"},o.createElement(c.default,{className:"changelog-diff-hidden-indicator",justifyContent:"flex-start",gap:"spacing-xs",alignItems:"center"},o.createElement(m.default,null),o.createElement(r.default,{color:"content-color-secondary"},"Diff Hidden"))):ae?null:o.createElement(o.Fragment,null,F&&e.diff&&o.createElement("div",null,Object.keys(e.diff.fetched).map((t=>{var n;return g().isEmpty(null===(n=e.diff)||void 0===n?void 0:n.fetched[t])?null:o.createElement(k.default,{key:t,shouldClipLargerDiffs:!0,diff:e.diff.fetched[t],onClickExpand:he,changeModelName:e.changeModelName,isOffline:e.isOffline})}))),o.createElement("div",{className:"changelog-entry-diff-text",role:"button",tabIndex:0,onKeyDown:t=>e.isGroup&&t.stopPropagation(),onClick:t=>e.isGroup&&t.stopPropagation()},o.createElement(w.SubtleLink,{onClick:e.isGroup?he:me},o.createElement(r.default,{type:"normal"},F?"Close":"View"," diff")),ne&&re&&e.allowedActions.hideDiff&&o.createElement(l.default,{content:`Only editors of this ${J} can view diff. It is hidden for other users.`,placement:"bottom"},o.createElement(h.default,null))))),v&&function(){if(!q)return;const t=pe[q];return t?o.createElement(S.default,{header:t.header,content:t.content,isDestructive:t.isDestructive,isOpen:v,onConfirm:t.onConfirm,onCancel:()=>E(!1),confirmButtonText:U?t.confirmButtonLoadingText:t.confirmButtonText,isOffline:e.isOffline,disableButtons:U}):null}())}));t.default=q},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/ChangelogEntry.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/ChangelogEntryHeader.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke.js"),c=n("../../packages/version-control/change-recording/src/components/common/Time/index.ts"),d=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/index.ts");const u=s.default.div`
  border-radius: ${e=>e.theme["border-radius-max"]};
  border-width: ${e=>e.theme["border-width-default"]};
  border-style: solid;
  border-color: ${e=>e.theme["content-color-secondary"]};

  width: ${e=>e.theme["spacing-xs"]};
  height: ${e=>e.theme["spacing-xs"]};
`,p=s.default.div`
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;

  position: absolute;
  background-color: ${e=>e.theme["background-color-primary"]};
  left: ${e=>e.theme["spacing-xs"]};
  top: ${e=>e.theme["spacing-m"]};

  height: ${e=>e.theme["spacing-xl"]};
  width: ${e=>e.theme["spacing-xl"]};
`,m=s.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  min-height: ${e=>e.theme["spacing-xl"]};
`;function h(e){return o.createElement(r.default,{justifyContent:"space-between"},o.createElement(p,{className:"entry-header-icon"},e.isCollapsible&&(e.isExpanded?o.createElement(i.default,null):o.createElement(a.default,null)),!e.isDiffHidden&&!e.isCollapsible&&o.createElement(u,null),e.isDiffHidden&&!e.isCollapsible&&o.createElement(l.default,null)),o.createElement(m,null,o.createElement(c.default,{timeString:e.createdAt}),o.createElement("span",{role:"button",tabIndex:0,onKeyDown:t=>e.isCollapsible&&t.stopPropagation(),onClick:t=>e.isCollapsible&&t.stopPropagation()},o.createElement(d.default,{users:e.users}))),e.children)}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/ChangelogEntryHeader.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/ChangelogEntryNote.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/index.ts");const a=r.default.div`
  margin-top: ${e=>e.theme["spacing-m"]};
`;function l(e){return o.createElement(a,null,e.note&&!e.isEditingNote&&o.createElement("div",null,o.createElement(s.default,{type:"body-medium",color:"content-color-primary"},e.note)),e.isEditingNote&&o.createElement("div",{role:"button",tabIndex:0,onKeyDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation()},o.createElement(i.InlineTextArea,{placeholder:"Add a note to explain this change",value:e.note,labelText:"Note",onSave:e.onSaveNote,onCancel:e.onCancelNote})))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/ChangelogEntryNote.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/ChangelogEntryTag.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../packages/version-control/change-recording/src/components/common/Tag/Tag.tsx"),i=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/index.ts");const a=s.default.div`
  .changelog-tag-content-container {
    display: flex;
    flex-direction row;
    margin-top: ${e=>e.theme["spacing-s"]};
  }

  .changelog-tag-editor-container {
    margin-top: ${e=>e.theme["spacing-m"]};
  }
`;function l(e){const{tag:t,isEditingTag:n}=e;return o.createElement(a,null,t&&!n&&o.createElement("div",{className:"changelog-tag-content-container"},o.createElement(r.default,{text:t})),n&&o.createElement("div",{className:"changelog-tag-editor-container",role:"button",tabIndex:0,onKeyDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation()},o.createElement(i.InlineTextInput,{placeholder:"Add a tag",value:t,labelText:"Tag",helperText:"A tag creates a named reference to this change",onCancel:e.onCancelTag,onSave:e.onSaveTag})))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/ChangelogEntryTag.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/ChangelogEntryUsers.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./version-control/common/UserListItem/index.js"),l=n("./js/modules/services/APIService.js"),c=n("./js/models/services/DashboardService.js"),d=n("../../packages/version-control/change-recording/src/components/common/UserAvatars/index.ts"),u=n("../../packages/version-control/change-recording/src/components/common/StyledText/index.ts"),p=n("./appsdk/components/link/Link.js");const m=i.default.div`
  .changelog-entry-users-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: auto;
  }
`,h=i.default.div`
  .avatar {
    height: ${({theme:e})=>e["size-xs"]};
    width: ${({theme:e})=>e["size-xs"]};
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }
`;function f({user:e}){const t=(e.name||e.username||"").trim();return e.isAccessible?o.createElement(p.default,{onKeyDown:e=>e.stopPropagation(),onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),function(e){e.isAccessible&&(e.isPublic?(0,l.openAuthenticatedRoute)(e.publicHandle):(0,c.openTeamUserProfile)(e.id))}(e))},to:e.publicHandle},o.createElement(u.SubtleLink,null,t)):o.createElement(s.default,{type:"body-small"},t)}function g(e){if(!e.users)return null;function t(){return o.createElement("div",{className:"changelog-entry-users-container"},o.createElement(d.default,{users:e.users,avatarsStackingCount:2}),o.createElement(s.default,{type:"body-small",color:"content-color-secondary"},function(){if(e.users.length<1)return"";if(e.users.length<=2)return e.users.map((e=>o.createElement(f,{user:e}))).reduce(((e,t)=>o.createElement(o.Fragment,null,e," and ",t)));const t=(e.users[0].name||e.users[0].username||"").trim();return o.createElement(u.SubtleLink,null,t," and ",e.users.length-1," others")}()))}return o.createElement(m,null,e.users.length<=2?t():o.createElement(r.default,{placement:"bottom",triggerEvent:"mouseenter",trigger:t()},o.createElement(h,null,e.users.map((e=>o.createElement(a.default,{user:e}))))))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/ChangelogEntryUsers.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/ChangelogGroup.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("../../packages/version-control/change-recording/src/hooks/index.ts"),d=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),u=n("../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts"),p=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/index.ts"),m=n("../../packages/version-control/change-recording/src/context/ChangelogContext.tsx"),h=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),f=n("../../packages/version-control/change-recording/src/config/index.ts"),g=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts"),v=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const y=s.default.div`
  &:hover {
    .changelog-timeline {
      border-left-color: ${e=>e.theme["blue-30"]};
    }
  }

  .changelog-group-load-more-container {
    position: relative;
  }

  .changelog-group-load-more-timeline {
    width: ${e=>e.theme["spacing-zero"]};
    position: absolute;
    border-left-width: ${e=>e.theme["border-width-default"]};
    border-left-color: ${e=>e.theme["border-color-default"]};
    border-left-style: solid;
    left: ${e=>e.theme["spacing-l"]};
    height: 120%;
  }
`,b=e=>o.createElement(o.Fragment,null,o.createElement("div",{className:"changelog-group-children-container"},e.logs.map((t=>(0,u.isChangelogExpandable)(t)?o.createElement(E,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,createdAt:t.createdAt,updatedAt:t.updatedAt,nestLevel:e.nestLevel,users:(0,u.getChangelogActors)(t),description:t.description,isGroup:!0,key:t.id,generatedDescription:t.generatedDescription,diff:t.diff,groupId:t.group.groupId,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline}):o.createElement(p.default,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,timestamp:t.createdAt,nestLevel:e.nestLevel,users:(0,u.getChangelogActors)(t),description:t.description,key:t.id,generatedDescription:t.generatedDescription,diff:t.diff,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline,groupId:e.groupId})))),(e.isOffline||e.isLoading||e.hasMoreLogs)&&o.createElement("div",{className:"changelog-group-load-more-container"},o.createElement("div",{className:"changelog-timeline changelog-group-load-more-timeline"}),o.createElement(r.default,{justifyContent:"center",alignItems:"center",padding:"spacing-l"},e.isLoading&&o.createElement(i.default,{size:"small"}),!e.isLoading&&e.hasMoreLogs&&o.createElement(a.default,{type:"outline",text:"Load more",size:"small",isDisabled:e.isOffline,tooltip:e.isOffline?"You must be online to load more changes":"Load more changes",onClick:()=>e.onLoadMore&&e.onLoadMore()}))));function E(e){const{model:t,modelId:n,store:s}=(0,o.useContext)(m.default),{getGroupLogsNextPageId:r,setGroupLogsNextPageId:i,appendGroupLogs:a,getGroupLogs:l}=s,[u,E]=(0,c.useToggle)(!1),[C,_]=(0,o.useState)(!1),[S,w]=(0,o.useState)(!1),I=l(e.groupId);function T(){return v(this,void 0,void 0,(function*(){u&&(h.default.addEvent(f.CHANGELOG_ANALYTICS_EVENTS.INITIATE_VIEW_SESSION_GROUP,t),_(!0),w(!1),(0,d.fetchModelChangelog)(t,n,r(e.groupId),e.groupId,20).then((({data:t})=>{i(e.groupId,t.nextPageId||null),a(e.groupId,t.logs)})).catch((e=>{g.default.logError("ChangelogGroup~fetchModelChangelog: Failed to fetch changelogs",e),h.default.addEvent(f.CHANGELOG_ANALYTICS_EVENTS.FAILED_VIEW_SESSION_GROUP,t),w(!0)})).finally((()=>{_(!1)})))}))}return(0,o.useEffect)((()=>{0===I.length&&T()}),[u]),o.createElement(y,{className:"changelog-group-container"},o.createElement(p.default,{id:e.id,timestamp:e.updatedAt||e.createdAt,users:e.users,description:e.description,isGroup:!0,isExpanded:u,onClick:function(){u||h.default.addEvent(f.CHANGELOG_ANALYTICS_EVENTS.EXPAND_SESSION_GROUP,t),E()},nestLevel:e.nestLevel,changeModel:e.changeModel,changeModelId:e.changeModelId,changeModelName:e.changeModelName,generatedDescription:e.generatedDescription,changeAction:e.changeAction,changeTrigger:e.changeTrigger,key:e.id,groupId:e.groupId,restoreKey:e.restoreKey,allowedActions:e.allowedActions,isOffline:e.isOffline}),u&&o.createElement(b,{nestLevel:e.nestLevel+1,isLoading:C,logs:I,groupId:e.groupId,hasMoreLogs:null!==r(e.groupId),onLoadMore:T,isOffline:e.isOffline}))}t.default=(0,l.observer)(E)},"../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/ChangelogGroup.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/ChangelogRenderer.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),m=n("./appsdk/contextbar/ContextBarViewHeader.js"),h=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),f=n("./js/stores/SyncStatusStore.js"),g=n("./js/stores/StoreManager.js"),v=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/index.ts"),y=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),b=n("../../packages/version-control/change-recording/src/components/common/ErrorBoundary/index.ts"),E=n("../../packages/version-control/change-recording/src/context/ChangelogContext.tsx"),C=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),_=n("../../packages/version-control/change-recording/src/config/index.ts"),S=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts"),w=n("../../packages/version-control/change-recording/src/models/ChangelogModel.ts"),I=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const T="You can perform this action once you're back online",x=s.default.ul`
  overflow-y: auto;
  list-style-type: none;
  padding: ${e=>e.theme["spacing-zero"]};
  margin: ${e=>e.theme["spacing-zero"]};
`,j=(0,h.observer)((e=>{const t=(0,o.useRef)(null),[n,s]=(0,o.useState)(!1),[h,w]=(0,o.useState)(!1),{resetChangelog:j,nextPageId:k,setNextPageId:R,appendDateGroupLogs:M,dateGroups:P,areChangelogsLoaded:D}=e.store,A=!(0,g.resolveStoreInstance)(f.default).isSocketConnected;function L(){j(),O(25,!0)}function O(t=10,n=!1){return I(this,void 0,void 0,(function*(){C.default.addEvent(""===k?_.CHANGELOG_ANALYTICS_EVENTS.INITIATE_VIEW_CHANGELOG:_.CHANGELOG_ANALYTICS_EVENTS.INITIATE_PAGINATE_CHANGELOG,e.model),w(!1),s(!0),(0,y.fetchModelChangelog)(e.model,e.modelId,n?null:k,null,t).then((({data:t})=>{""===k&&C.default.addEvent(_.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_V2,e.model),R(t.nextPageId||null),M(t.logs,n)})).catch((t=>{S.default.logError("ChangelogRenderer~fetchChangelogData: Failed to fetch changelogs",t),C.default.addEvent(""===k?_.CHANGELOG_ANALYTICS_EVENTS.FAILED_VIEW_CHANGELOG_V2:_.CHANGELOG_ANALYTICS_EVENTS.FAILED_PAGINATE_CHANGELOG,e.model),w(!0)})).finally((()=>{s(!1)}))}))}function N(){if(t.current){const{scrollTop:e,scrollHeight:o,offsetHeight:s}=t.current;o-(e+s)<=500&&!n&&k&&O()}}(0,o.useEffect)((()=>{A||n||D||O(25)}),[A]);const q=L;return o.createElement(b.default,{onErrorRender:o.createElement(i.default,{title:`Unable to load the ${e.model} changelog`,description:"Something went wrong when loading the changelog.",primaryAction:o.createElement(a.default,{type:"outline",text:"Try again",onClick:()=>O(25,!0),isDisabled:A,tooltip:A&&T})},o.createElement(l.default,null))},o.createElement(o.Fragment,null,o.createElement(m.ContextBarViewHeader,{title:"Changelog",onClose:e.onClose},o.createElement(a.default,{type:"tertiary",onClick:q,isDisabled:n||A,className:"changelog-renderer-reload-changelog-button",tooltip:A?"You can perform this action once you're back online":"Reload Changelog",icon:o.createElement(p.default,null)})),o.createElement(E.default.Provider,{value:{model:e.model,modelId:e.modelId,reloadChangelog:L,store:e.store}},o.createElement(x,{className:"changelog-renderer-dategroups-container",onScroll:N,ref:t},Object.keys(P).map((e=>o.createElement(v.default,{isExpanded:!0,isOffline:A||!1,key:e,dateString:e,logs:P[e]}))),o.createElement(r.default,{justifyContent:"center",alignItems:"center",padding:"spacing-l"},n&&o.createElement(u.default,{size:"small"}),!n&&k&&o.createElement(a.default,{type:"outline",text:"Load more",onClick:()=>O()})),h||A?o.createElement(r.default,{justifyContent:"center",alignItems:"center"},!D&&!A&&h&&o.createElement(i.default,{title:`Unable to load the ${e.model} changelog`,description:"Something went wrong when loading the changelog.",primaryAction:o.createElement(a.default,{type:"outline",text:"Try again",onClick:()=>O(25,!0),isDisabled:A,tooltip:A&&T})},o.createElement(l.default,null)),!D&&A&&o.createElement(i.default,{title:"Check your connection",description:"Get online to view the changelog"},o.createElement(c.default,null)),!D&&!A&&!h&&o.createElement(i.default,{title:"No logs found",description:`Make some changes to the ${e.model} to see the change logs`},o.createElement(d.default,null))):null))))}));t.default=e=>{const[t]=(0,o.useState)(new w.default(e.disableRestore));return o.createElement(j,Object.assign({},e,{store:t}))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/ChangelogRenderer.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffAttributeRenderer.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("../../packages/version-control/diff-components/index.ts"),a=n("../../node_modules/lodash/lodash.js"),l=n.n(a),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./js/utils/ColorUtils.js");const u=c.default.div`
  position: relative;
  max-height: ${e=>e.shouldClipLargerDiffs?"150px":"100%"};
  overflow: hidden;
  margin-top: ${e=>e.theme["spacing-s"]};

  border-bottom-style: ${e=>e.theme["border-style-solid"]};
  border-bottom-color: ${e=>e.theme["border-color-default"]};
  border-bottom-width: ${e=>e.isOverlayVisible?e.theme["border-width-default"]:0};

  .changelog-entry-diff-attribute-expand-internal-container {
    display: table;
    width: 100%;
  }

  .changelog-entry-diff-attribute-expand-overlay {
    position: absolute;
    top: 0;
    left: 0;
    display: flex;
    height: 100%;
    width: 100%;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    pointer-events: none;
    background: linear-gradient(
        to bottom,
        ${e=>(0,d.convertToRGBA)(e.theme["background-color-primary"],0)}
          75%,
        ${e=>e.theme["background-color-primary"]} 100%
      ),
      linear-gradient(
        to right,
        ${e=>(0,d.convertToRGBA)(e.theme["background-color-primary"],0)}
          95%,
        ${e=>e.theme["background-color-primary"]} 100%
      );

    button {
      pointer-events: auto;
      bottom: -${e=>e.theme["spacing-xl"]};
      transition: bottom 0.25s ease;
      border-radius: ${e=>e.theme["spacing-xl"]};
    }
  }

  &:hover button {
    bottom: ${e=>e.theme["spacing-l"]};
  }
`;function p(e){const t=(0,o.useRef)(null),n=(0,o.useRef)(null),[a,c]=(0,o.useState)(!1);return(0,o.useLayoutEffect)((()=>{if(!e.shouldClipLargerDiffs)return;function o(){if(t.current&&n.current){const e=t.current.getBoundingClientRect(),o=n.current.getBoundingClientRect();e.height<o.height||e.width<o.width?c(!0):c(!1)}}o();const s=new ResizeObserver((()=>o()));return t.current&&s.observe(t.current),()=>{s&&s.disconnect()}}),[e.shouldClipLargerDiffs]),o.createElement(o.Fragment,null,o.createElement(s.default,{color:"content-color-secondary",type:"normal"},o.createElement(s.default,{type:"strong"},e.label)),o.createElement(u,{shouldClipLargerDiffs:e.shouldClipLargerDiffs,isOverlayVisible:a,ref:t},e.shouldClipLargerDiffs&&a&&o.createElement("div",{className:"changelog-entry-diff-attribute-expand-overlay"},o.createElement(r.default,{size:"small",type:"secondary",text:"View more",isDisabled:e.isOffline,onClick:e.onClickExpand,tooltip:e.isOffline&&"You must be online to view detailed diff"})),o.createElement("div",{className:"changelog-entry-diff-attribute-expand-internal-container",ref:n},function(){switch(e.diffType){case"json":return o.createElement(i.JSONDiff,{diff:e.diff});case"line":return o.createElement(i.LineDiff,{diff:e.diff,onExpand:l().noop});case"selection":return o.createElement(i.SelectionDiff,{diff:e.diff});case"selection-and-config":return o.createElement(i.SelectionAndConfigDiff,{diff:e.diff});case"table":return o.createElement(i.TruncatedTableDiff,{diff:e.diff});case"text":return o.createElement(i.TextDiff,{diff:e.diff});case"list":return o.createElement(i.ListDiff,{diff:e.diff});default:return null}}())))}},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffRenderer.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/lodash/lodash.js"),i=n.n(r),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),p=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffAttributeRenderer.tsx"),m=n("../../packages/version-control/change-recording/src/hooks/index.ts");const h=s.default.div`
  border-radius: ${e=>e.theme["border-radius-default"]};
  border-style: ${e=>e.theme["border-style-solid"]};
  border-color: ${e=>e.theme["border-color-strong"]};
  border-width: ${e=>e.theme["border-width-default"]};
  margin-top: ${e=>`${e.theme["spacing-m"]}`};

  .changelog-entry-diff-header {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: start;
    cursor: default;
    background-color: ${e=>e.theme["background-color-secondary"]};
    padding: ${e=>`${e.theme["spacing-s"]} ${e.theme["spacing-m"]}`};

    *:not(:first-child) {
      margin-left: ${e=>e.theme["spacing-xs"]};
    }

    &:hover {
      background-color: ${e=>e.theme[e.isCollapsible?"background-color-tertiary":"background-color-secondary"]};
    }
  }

  .changelog-entry-diff-body {
    padding: ${e=>`${e.theme["spacing-m"]} ${e.theme["spacing-l"]}`};
  }

  .changelog-entry-diff-body
    > .changelog-entry-diff-attribute-wrapper:not(:last-child) {
    margin-bottom: ${e=>e.theme["spacing-l"]};
  }
`;function f(e){var t,n;const[s,r]=(0,m.useToggle)(!0);return o.createElement(h,{isCollapsible:e.isCollapsible,className:"changelog-entry-diff-wrapper"},o.createElement("div",{className:"changelog-entry-diff-header",onClick:()=>e.isCollapsible&&r(),onKeyDown:()=>e.isCollapsible&&r(),role:"button",tabIndex:0},e.isCollapsible&&(s?o.createElement(d.default,null):o.createElement(u.default,null)),function(){if("string"==typeof e.diff.icon||"object"==typeof e.diff.icon)return o.createElement(c.default,{className:"entity-icon",name:e.diff.icon,color:"content-color-secondary"})}(),o.createElement(a.default,{type:"h6",color:"content-color-primary",isTruncated:!0,text:e.diff.label||e.changeModelName||(f=e.diff.entity,f?f.charAt(0).toUpperCase()+f.slice(1):"")}),null===(t=e.diff.operations)||void 0===t?void 0:t.map(((e,t)=>o.createElement(l.default,{text:e,type:"light",key:t})))),s&&o.createElement("div",{className:"changelog-entry-diff-body"},null===(n=e.diff.changedAttributes)||void 0===n?void 0:n.map(((t,n)=>function(e){return!(!i().isEmpty(e)&&!i().isEmpty(e.diff))||"line"===e.diffType&&0===e.diff.totalBits}(t)?null:o.createElement("div",{key:n,className:"changelog-entry-diff-attribute-wrapper"},o.createElement(p.default,Object.assign({isOffline:e.isOffline,onClickExpand:e.onClickExpand,shouldClipLargerDiffs:e.shouldClipLargerDiffs},t)))))));var f}},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{IDiffAttributeRendererProps:function(){return s.IDiffAttributeRendererProps},default:function(){return o.default}});var o=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffRenderer.tsx"),s=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/types.ts")},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/types.ts":function(e,t,n){"use strict";n.r(t)},"../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/ExpandedDiffRenderer.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),p=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("../../node_modules/lodash/lodash.js"),h=n.n(m),f=n("./js/stores/SyncStatusStore.js"),g=n("./js/stores/StoreManager.js"),v=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),y=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffRenderer.tsx"),b=n("../../packages/version-control/change-recording/src/utils/index.ts"),E=n("../../packages/version-control/change-recording/src/components/common/ErrorBoundary/index.ts"),C=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),_=n("../../packages/version-control/change-recording/src/config/index.ts"),S=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts");const w=p.default.div`
  padding: ${e=>e.theme["spacing-l"]};
  overflow-y: auto;

  .changelog-expanded-diff-renderer-title {
    margin-top: ${e=>e.theme["spacing-m"]};
    margin-bottom: ${e=>e.theme["spacing-m"]};
  }

  .changelog-expanded-diff-back-navigation {
    cursor: pointer;
    display: inline-flex;
    padding: 0;
    align-items: center;
    background-color: ${e=>e.theme["background-color-primary"]};
    outline: none;
    border: none;

    span {
      margin-left: ${e=>e.theme["spacing-xs"]};
    }
  }

  .changelog-expanded-diff-renderer-divider {
    border-top-style: ${e=>e.theme["border-style-solid"]};
    border-top-color: ${e=>e.theme["border-color-strong"]};
    border-top-width: ${e=>e.theme["border-width-default"]};
    width: 100%;
    margin-bottom: ${e=>e.theme["spacing-l"]};
    margin-top: ${e=>e.theme["spacing-m"]};
  }

  .changelog-expanded-diff-changes-container {
    margin-top: ${e=>e.theme["spacing-l"]};
  }

  .changelog-diff-renderer-view-truncated-model-name {
    display: inline-flex;
    align-items: center;
    max-width: 200px;
  }
`;function I(e){const[t,n]=(0,o.useState)(null),[p,m]=(0,o.useState)(!0),[I,T]=(0,o.useState)(!1),x=!(0,g.resolveStoreInstance)(f.default).isSocketConnected;function j(){b.ModelNavigator[e.model](e.modelId)}function k(){m(!0),T(!1),C.default.addEvent(_.CHANGELOG_ANALYTICS_EVENTS.INITIATE_VIEW_EXPANDED_DIFF,e.model),(0,v.fetchModelChangelogForChangelogId)(e.model,e.modelId,e.changelogId).then((e=>{if(!e)throw new Error(`Fetched invalid changelog data ${e}`);n(e)})).catch((t=>{S.default.logError("ExpandedDiffRenderer~fetchModelChangelogForChangelogId: Failed to fetch changelog",t),C.default.addEvent(_.CHANGELOG_ANALYTICS_EVENTS.FAILED_VIEW_EXPANDED_DIFF,e.model),T(!0)})).finally((()=>m(!1)))}return(0,o.useEffect)((()=>{k()}),[]),o.createElement(E.default,{onErrorRender:o.createElement(a.default,{title:`Unable to load the ${e.model} changelog`,description:"Something went wrong when loading the changelog.",primaryAction:o.createElement(l.default,{type:"outline",text:"Back to changelog",onClick:j,tooltip:"Back to changeloge"})},o.createElement(c.default,null))},o.createElement(w,null,!e.forceDisplayErrorState&&p&&o.createElement(r.default,{justifyContent:"center",alignItems:"center",padding:"spacing-xxl"},p&&o.createElement(i.default,{size:"small"})),!e.forceDisplayErrorState&&!p&&!I&&t&&o.createElement(o.Fragment,null,o.createElement("button",{type:"button",className:"changelog-expanded-diff-back-navigation",onClick:j,tabIndex:0},o.createElement(u.default,{color:"content-color-secondary"}),o.createElement("span",{className:"changelog-diff-renderer-view-truncated-model-name"},o.createElement(s.default,{color:"content-color-secondary",type:"body-medium",isTruncated:!0},e.modelName))),o.createElement("div",{className:"changelog-expanded-diff-renderer-title"},o.createElement(s.default,{type:"body-large",color:"content-color-primary",isTruncated:!0},o.createElement(s.default,{type:"strong"},"Changes on ",e.modelName))),t?t.group.isMaster?o.createElement(s.default,{type:"body-normal",color:"content-color-primary"},"Changes made by ",t.actors[0].name," and"," ",t.actors.length," others between"," ",o.createElement(s.default,{type:"strong"},(0,b.formatTimeAndDate)(t.createdAt))," ","and"," ",o.createElement(s.default,{type:"strong"},(0,b.formatTimeAndDate)(t.createdAt))):o.createElement(s.default,{type:"body-normal",color:"content-color-primary"},"Changes made by ",o.createElement(s.default,{type:"strong"},t.actor.name)," on"," ",o.createElement(s.default,{type:"strong"},(0,b.formatTimeAndDate)(t.createdAt))):null,o.createElement("div",{className:"changelog-expanded-diff-renderer-divider"}),t&&o.createElement("div",{className:"changelog-expanded-diff-changes-container"},Object.keys(t.diff.fetched).map(((e,n)=>h().isEmpty(t.diff.fetched[e])?null:o.createElement(y.default,{isCollapsible:!0,key:n,isOffline:x,changeModelName:t.name,diff:t.diff.fetched[e]}))))),e.forceDisplayErrorState||!p&&!x&&!t&&I&&o.createElement(a.default,{title:"Unable to load changelog diff",description:`Something went wrong fetching the diff for the ${e.model} changelog.`,primaryAction:o.createElement(l.default,{type:"outline",text:"Try again",isDisabled:x,tooltip:x&&"You can perform this action once you're back online",onClick:k})},o.createElement(c.default,null)),!e.forceDisplayErrorState&&!p&&x&&!t&&o.createElement(a.default,{title:"Check your connection",description:"Get online to view the changelog"},o.createElement(d.default,null))))}},"../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/ExpandedDiffRenderer.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/RestoreChangesModalContent.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../packages/version-control/change-recording/src/utils/index.ts");function a(e){return o.createElement(s.default,{type:"normal"},o.createElement(r.default,{direction:"column",gap:"spacing-m"},o.createElement(s.default,{type:"body-medium",color:"content-color-primary"},"This ",e.model," will revert to changes from"," ",(0,i.formatTimeAndDate)(e.createdAt),". Are you sure you want to restore?")))}},"../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/RestoreChangesModalContent.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/ErrorBoundary/ErrorBoundary.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),i=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts");class a extends o.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){i.default.logError("ChangeRecordingModule~UncaughtError",e,t)}render(){return this.state.hasError?this.props.onErrorRender||o.createElement(s.default,{title:this.props.title||"Something went wrong",description:this.props.description||"Please try again later.",primaryAction:this.props.errorStateAction||null},o.createElement(r.default,null)):this.props.children}}t.default=a},"../../packages/version-control/change-recording/src/components/common/ErrorBoundary/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/ErrorBoundary/ErrorBoundary.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextArea.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function l(e){const[t,n]=(0,o.useState)((()=>e.value));return o.createElement(s.default,{direction:"column",gap:"spacing-l"},o.createElement(r.default,{placeholder:e.placeholder,value:t,onChange:e=>n(e.target.value),label:o.createElement(i.default,{text:e.labelText})}),o.createElement(s.default,{direction:"row",gap:"spacing-s"},o.createElement(a.default,{type:"primary",size:"small",text:"Save",onClick:()=>e.onSave(t)}),o.createElement(a.default,{type:"secondary",size:"small",text:"Cancel",onClick:e.onCancel})))}},"../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextInput.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function l(e){const[t,n]=(0,o.useState)((()=>e.value));return o.createElement(s.default,{direction:"column",gap:"spacing-l"},o.createElement(r.default,{placeholder:e.placeholder,value:t,onChange:e=>n(e.target.value),label:o.createElement(i.default,{text:e.labelText}),helperText:e.helperText}),o.createElement(s.default,{direction:"row",gap:"spacing-s"},o.createElement(a.default,{type:"primary",size:"small",text:"Save",onClick:()=>e.onSave(t)}),o.createElement(a.default,{type:"secondary",size:"small",text:"Cancel",onClick:e.onCancel})))}},"../../packages/version-control/change-recording/src/components/common/InlineEditor/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{InlineTextArea:function(){return o.default},InlineTextInput:function(){return s.default}});var o=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextArea.tsx"),s=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextInput.tsx")},"../../packages/version-control/change-recording/src/components/common/Modal/Modal.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function a(e){return o.createElement(s.Modal,{isOpen:e.isOpen,onClose:e.onCancel,size:e.modalSize||"small"},o.createElement(s.ModalHeader,{heading:e.header}),o.createElement(s.ModalContent,null,e.content),o.createElement(s.ModalFooter,null,e.modalFooter||o.createElement(r.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},o.createElement(i.default,{type:"secondary",text:e.cancelButtonText?e.cancelButtonText:"Cancel",onClick:e.onCancel,isDisabled:e.disableButtons}),o.createElement(i.default,{type:e.isDestructive?"destructive":"primary",text:e.confirmButtonText?e.confirmButtonText:"Submit",onClick:e.onConfirm,isDisabled:e.isOffline||e.disableButtons,tooltip:e.isOffline&&"You must be online to perform this action"}))))}},"../../packages/version-control/change-recording/src/components/common/Modal/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/Modal/Modal.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/StyledText/SubtleLink.tsx":function(e,t,n){"use strict";n.r(t);const o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.span`
  color: ${e=>e.color?e.color:e.theme["content-color-secondary"]};
  cursor: pointer;

  &:hover {
    text-decoration: underline;
  }
`;t.default=o},"../../packages/version-control/change-recording/src/components/common/StyledText/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{SubtleLink:function(){return o.default}});var o=n("../../packages/version-control/change-recording/src/components/common/StyledText/SubtleLink.tsx")},"../../packages/version-control/change-recording/src/components/common/Tag/Tag.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js");function r(e){e.color&&e.color;return o.createElement(s.default,{text:e.text})}},"../../packages/version-control/change-recording/src/components/common/Time/Time.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("../../packages/version-control/change-recording/src/utils/date.ts");const c=a.default.span`
  cursor: default;
`;function d(e){return o.createElement(c,null,o.createElement(s.default,{trigger:o.createElement(r.default,{alignItems:"center"},o.createElement(i.default,{type:"body-small",color:"content-color-secondary"},(0,l.formatTime)(e.timeString))),placement:"top",triggerEvent:"mouseenter"},o.createElement(i.default,{type:"body-small",color:"content-color-primary"},(0,l.formatTimeAndDate)(e.timeString))))}},"../../packages/version-control/change-recording/src/components/common/Time/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/Time/Time.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/UserAvatars/UserAvatars.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../../node_modules/lodash/lodash.js"),a=n.n(i),l=n("./js/services/CurrentUserDetailsService.js"),c=n("./iam/src/common/utils/index.js");const d=r.default.div`
  position: relative;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-right: ${e=>e.hasMultipleAvatars?e.theme["spacing-m"]:e.theme["spacing-xs"]};
  margin-left: ${e=>e.theme["spacing-l"]};

  & > * + * {
    position: absolute;
    left: ${e=>e.theme["spacing-s"]};
  }
`;function u(e){const t=l.default.getCurrentUserDetails().organizations;if(a().size(t)>0&&e.id){const n=a().find(t[0].team_users,(t=>t.id.toString()===e.id.toString()));if(n)return n.profile_pic_url}return null}function p({users:e,avatarsStackingCount:t}){const n=e.length,r={size:"xs",userId:Math.floor(10*Math.random()+1)};if(n<1)return null;if(n<=t)return o.createElement(d,{hasMultipleAvatars:1!==n},e.map((e=>{const t=Object.assign({},r);t.userId=parseInt(e.id,10);const n=e.profilePicUrl||u(e);return n&&(t.src=n,t.alt=e.username),o.createElement(s.default,Object.assign({key:e.id},t,{isPartner:(0,c.isUserPartner)({id:parseInt(e.id,10)})}))})));const i=Object.assign({},r);i.userId=parseInt(e[0].id,10);const a=e[0].profilePicUrl||u(e[0]);return a&&(i.src=a,i.alt=e[0].username),o.createElement(d,{hasMultipleAvatars:!0},o.createElement(s.default,Object.assign({},i,{isPartner:(0,c.isUserPartner)({id:parseInt(e[0].id,10)})})),o.createElement(s.default,{type:"count",alt:n-1,size:"xs",value:n-1}))}},"../../packages/version-control/change-recording/src/components/common/UserAvatars/index.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/UserAvatars/UserAvatars.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/config/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{CHANGELOG_ANALYTICS_EVENTS:function(){return r},ENABLE_CHANGELOG_NOTE:function(){return o},ENABLE_CHANGELOG_TAG:function(){return s}});const o=!1,s=!1,r=Object.freeze({VIEW_CHANGELOG_V2:"view_changelog_v2",INITIATE_VIEW_CHANGELOG:"initiate_view_changelog",INITIATE_PAGINATE_CHANGELOG:"initiate_paginate_changelog",FAILED_VIEW_CHANGELOG_V2:"failed_view_changelog",FAILED_PAGINATE_CHANGELOG:"failed_paginate_changelog",EXPAND_SESSION_GROUP:"expand_session_group",INITIATE_VIEW_SESSION_GROUP:"initiate_view_session_group",FAILED_VIEW_SESSION_GROUP:"failed_view_session_group",VIEW_CHANGELOG_DIFF:"view_changelog_diff",VIEW_EXPANDED_DIFF:"view_expanded_diff",INITIATE_VIEW_EXPANDED_DIFF:"initiate_view_expanded_diff",FAILED_VIEW_EXPANDED_DIFF:"failed_view_expanded_diff",INITIATE_CHANGELOG_RESTORE:"initiate_changelog_restore",FAILED_CHANGELOG_RESTORE:"failed_changelog_restore",INITIATE_CHANGELOG_HIDE_DIFF:"initiate_changelog_hide_diff",FAILED_CHANGELOG_HIDE_DIFF:"failed_changelog_hide_diff",INITIATE_CHANGELOG_UNHIDE_DIFF:"initiate_changelog_unhide_diff",FAILED_CHANGELOG_UNHIDE_DIFF:"failed_changelog_unhide_diff",VIEW_CHANGELOG_RESTORE:"view_changelog_restore",VIEW_CHANGELOG_HIDE_DIFF:"view_changelog_hide_diff",VIEW_CHANGELOG_UNHIDE_DIFF:"view_changelog_unhide_diff"})},"../../packages/version-control/change-recording/src/context/ChangelogContext.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/lodash/lodash.js"),s=n.n(o),r=n("../../node_modules/react/index.js"),i=n("../../packages/version-control/change-recording/src/models/ChangelogModel.ts");t.default=(0,r.createContext)({reloadChangelog:s().noop,modelId:"",model:"",store:new i.default})},"../../packages/version-control/change-recording/src/hooks/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{useToggle:function(){return o.default}});var o=n("../../packages/version-control/change-recording/src/hooks/useToggle.tsx")},"../../packages/version-control/change-recording/src/hooks/useToggle.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n("../../node_modules/react/index.js");function s(e){const[t,n]=(0,o.useState)(e);return[t,function(){n(!t)}]}},"../../packages/version-control/change-recording/src/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{ChangelogRenderer:function(){return o.default},ExpandedDiffRenderer:function(){return s.default}});var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/index.ts"),s=n("../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/index.ts")},"../../packages/version-control/change-recording/src/models/ChangelogModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/lodash/lodash.js"),s=n.n(o),r=n("../../node_modules/mobx/lib/mobx.module.js"),i=n("./onboarding/src/common/LaunchDarkly.js"),a=n("../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts"),l=n("../../packages/version-control/change-recording/src/utils/date.ts"),c=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};const d="changelog-enable-diff-hide",u=!1;class p{constructor(e=!1){this.dateGroups={},this.nextPageId="",this.groupLogsObject={},this.changelogIdDateGroupMapping={},this.isChangelogHideDiffEnabled=!1,this.disableRestore=!1,this.getGroupLogs=e=>e in this.groupLogsObject?this.groupLogsObject[e].logs:[],this.getGroupLogsNextPageId=e=>e in this.groupLogsObject?this.groupLogsObject[e].nextPageId:null,this.setNextPageId=e=>{this.nextPageId=e},this.setGroupLogsNextPageId=(e,t)=>{e in this.groupLogsObject||(this.groupLogsObject[e]={logs:[],nextPageId:""}),this.groupLogsObject[e].nextPageId=t},this.clearDateGroups=()=>{this.dateGroups={}},this.resetChangelog=()=>{this.dateGroups={},this.nextPageId="",this.groupLogsObject={},this.changelogIdDateGroupMapping={}},this.appendDateGroupLogs=(e,t=!1)=>{t&&(this.dateGroups={}),e.forEach((e=>{const t=(n=e,(0,l.formatDate)(n.createdAt));var n;t in this.dateGroups||(this.dateGroups[t]=[]),this.dateGroups[t].push(e),this.changelogIdDateGroupMapping[e.id]=t,(0,a.isChangelogExpandable)(e)&&e.group.groupId&&(this.groupLogsObject[e.group.groupId]={logs:[],nextPageId:""})}))},this.appendGroupLogs=(e,t)=>{e in this.groupLogsObject||(this.groupLogsObject[e]={logs:[],nextPageId:""}),this.groupLogsObject[e].logs.push(...t)},this.updateChangelogDiffHidden=(e,t,n="",o=!0)=>{if(o||!o&&!n){const n=this.changelogIdDateGroupMapping[e];n&&this.dateGroups[n].forEach((n=>{n.id===e&&(n.diff.isHidden=t)}))}else n&&this.groupLogsObject[n]&&this.groupLogsObject[n].logs.forEach((n=>{n.id===e&&(n.diff.isHidden=t)}))},this.isChangelogHideDiffEnabled=i.launchDarkly.getFlag(d,u),this.disableRestore=Boolean(e)}get areChangelogsLoaded(){return!s().isEmpty(this.dateGroups)}}c([r.observable],p.prototype,"dateGroups",void 0),c([r.observable],p.prototype,"nextPageId",void 0),c([r.observable],p.prototype,"groupLogsObject",void 0),c([r.computed],p.prototype,"areChangelogsLoaded",null),c([r.action],p.prototype,"setNextPageId",void 0),c([r.action],p.prototype,"setGroupLogsNextPageId",void 0),c([r.action],p.prototype,"clearDateGroups",void 0),c([r.action],p.prototype,"resetChangelog",void 0),c([r.action],p.prototype,"appendDateGroupLogs",void 0),c([r.action],p.prototype,"appendGroupLogs",void 0),c([r.action],p.prototype,"updateChangelogDiffHidden",void 0)},"../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts":function(e,t,n){"use strict";n.r(t);var o=n("./js/services/CurrentUserDetailsService.js"),s=n("./js/modules/services/AnalyticsService.js"),r=n("./js/services/NavigationService.js"),i=n("../../node_modules/lodash/lodash.js"),a=n.n(i);t.default=new class{addEvent(e,t,n="",r=""){const i=o.default.getCurrentUserDetails(),l=this._getUTMParamsFromURL();s.default.addEventV2(Object.assign({category:r||t,action:e,label:n||`${t}_changelog`,value:1,entityType:t,userId:a().get(i,"userId"),teamId:a().get(i,"teamId")},l))}_getValidUTMProperties(){return["utm_source","utm_medium","utm_campaign","utm_content","utm_term"]}_getUTMParamsFromURL(){const e=r.default.getActiveQueryParams().get();return a().pick(e,this._getValidUTMProperties())}}},"../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/lodash/lodash.js"),s=n.n(o),r=n("./js/services/CurrentUserDetailsService.js");const i=pm.logger.getContext("change-recording","version-control");t.default=new class{constructor(){this.logError=(...e)=>{pm.logger.error(...e,Object.assign({context:i},this.coreLogData))},this.logErrorWithData=(e,...t)=>{pm.logger.error(...t,Object.assign(Object.assign({context:i},this.coreLogData),e))};const e=r.default.getCurrentUserDetails();this.coreLogData={userId:s().get(e,"userId"),teamId:s().get(e,"teamId")}}}},"../../packages/version-control/change-recording/src/services/ChangelogService.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchModelChangelog:function(){return l},fetchModelChangelogForChangelogId:function(){return c},hideChangelogDiff:function(){return u},restoreModelToChange:function(){return d},unhideChangelogDiff:function(){return p}});var o=n("./js/utils/HttpService.js"),s=n("./js/modules/services/RemoteSyncRequestService.js"),r=n("../../node_modules/lodash/lodash.js"),i=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};function a(e){return e instanceof Error?e:new Error(JSON.stringify(e.error||e))}function l(e,t,n=null,r=null,l=10){return i(this,void 0,void 0,(function*(){const i={pageSize:l.toString()};n&&(i.pageId=n),r&&(i.groupId=r);const c=o.default.urlSearchParams(i),d=`/${e}/${t}/changelog/?${c}`;try{const e=yield s.default.request(d,{method:"get"});if(!e.body.data||e.body.error)throw new Error(e.body.error||"ChangelogService~fetchModelChangelog: Failed to fetch changelogs");return e.body}catch(e){throw a(e)}}))}function c(e,t,n){return i(this,void 0,void 0,(function*(){const i={changelogId:n},l=o.default.urlSearchParams(i),c=`/${e}/${t}/changelog/?${l}`;try{const e=yield s.default.request(c,{method:"get"});if(!r.get(e,"body.data.logs.0")||e.body.error)throw new Error(e.body.error||"ChangelogService~fetchModelChangelogForChangelogId: Failed to fetch changelog");return e.body.data.logs[0]}catch(e){throw a(e)}}))}function d(e,t,n,r){return i(this,void 0,void 0,(function*(){const i={max_id:n,changelogId:r},l=o.default.urlSearchParams(i),c=`/${e}/restore/${t}/?${l}`;try{yield s.default.request(c,{method:"put"})}catch(e){throw a(e)}}))}function u(e,t,n){return i(this,void 0,void 0,(function*(){try{return(yield s.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"post",path:"/v1/changelog/hide-diff",body:{changelogs:[{model:e,modelId:t,changelogIds:[n]}]}}})).body}catch(e){throw a(e)}}))}function p(e,t,n){return i(this,void 0,void 0,(function*(){try{return(yield s.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"post",path:"/v1/changelog/unhide-diff",body:{changelogs:[{model:e,modelId:t,changelogIds:[n]}]}}})).body}catch(e){throw a(e)}}))}},"../../packages/version-control/change-recording/src/utils/date.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{formatDate:function(){return a},formatTime:function(){return r},formatTimeAndDate:function(){return i}});var o=n("../../node_modules/moment/moment.js"),s=n.n(o);function r(e){return s()(e).format("hh:mm A")}function i(e){return s()(e).format("hh:mm A, MMMM DD, YYYY")}function a(e){return s()(e).format("DD MMMM, YYYY")}},"../../packages/version-control/change-recording/src/utils/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{ModelNavigator:function(){return s.default},formatTime:function(){return o.formatTime},formatTimeAndDate:function(){return o.formatTimeAndDate}});var o=n("../../packages/version-control/change-recording/src/utils/date.ts"),s=n("../../packages/version-control/change-recording/src/utils/modelNavigator.ts")},"../../packages/version-control/change-recording/src/utils/modelNavigator.ts":function(e,t,n){"use strict";n.r(t);var o=n("./js/stores/ActiveWorkspaceStore.js"),s=n("./js/stores/StoreManager.js"),r=n("./js/services/NavigationService.js");const i={collection:e=>{const t=(0,s.resolveStoreInstance)(o.default).id;r.default.transitionTo("build.collection",{cid:e,wid:t},{ctx:"changelog"})}};t.default=i},"./collaboration/workspace/components/move/MoveEntityModalSkeleton.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("./collaboration/workspace/components/common/SkeletonUnit.tsx");t.default=()=>o.createElement(s.default,{direction:"column",grow:1,justifyContent:"space-between"},o.createElement(s.default,{direction:"column"},o.createElement(s.default,{gap:"spacing-m",padding:"spacing-l spacing-zero spacing-s"},o.createElement(r.default,{height:"32px",width:"100%"}),o.createElement(r.default,{height:"32px",width:"10%"})),o.createElement(s.default,{gap:"spacing-m",padding:"spacing-m"},o.createElement(r.default,{height:"8px",width:"8px"}),o.createElement(r.default,{height:"8px",width:"120px"})),o.createElement(s.default,{gap:"spacing-m",padding:"spacing-m"},o.createElement(r.default,{height:"8px",width:"8px"}),o.createElement(r.default,{height:"8px",width:"120px"})),o.createElement(s.default,{gap:"spacing-m",padding:"spacing-m"},o.createElement(r.default,{height:"8px",width:"8px"}),o.createElement(r.default,{height:"8px",width:"120px"})),o.createElement(s.default,{gap:"spacing-m",padding:"spacing-m"},o.createElement(r.default,{height:"8px",width:"8px"}),o.createElement(r.default,{height:"8px",width:"120px"}))),o.createElement(s.default,{gap:"spacing-m",justifyContent:"flex-end"},o.createElement(r.default,{height:"32px",width:"64px"}),o.createElement(r.default,{height:"32px",width:"120px"})))},"./version-control/common/Move/MoveEntityModal.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/Search.js"),c=n("./node_modules/lodash/lodash.js"),d=n.n(c),u=n("./node_modules/classnames/index.js"),p=n.n(u),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("./js/stores/CurrentUserStore.js"),f=n("./js/stores/FeatureFlagsStore.js"),g=n("./js/stores/StoreManager.js"),v=n("./collaboration/workspace/types/WorkspaceTypes.ts"),y=n("./collaboration/workspace/components/common/WorkspaceList/WorkspaceList.tsx"),b=n("./collaboration/workspace/components/move/MoveEntityModalSkeleton.tsx"),E=n("./collaboration/workspace/constants/move.ts"),C=n("./version-control/common/CreateWorkspaceModal/CreateNewWorkspace.js"),_=n("./collaboration/services/PermissionService.js"),S=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const w=(0,m.default)(s.default)`
  margin-left: ${e=>e.theme["spacing-m"]};
  width: ${e=>e.isDisabled?"max-content":"50%"};
`;t.default=e=>{const t=d().get(E.MOVE_ENTITY_TYPE,e.entityType),{isFiltering:n,setIsFiltering:c}=e,[u,m]=(0,o.useState)(null),[I,T]=(0,o.useState)(""),[x,j]=(0,o.useState)(v.VISIBILITY_STATUS[e.filterWs===v.VISIBILITY_STATUS.public?v.VISIBILITY_STATUS.public:v.VISIBILITY_STATUS.team]),[k,R]=(0,o.useState)({workspaces:e.workspaces,cursor:""}),[M,P]=(0,o.useState)(!1),D=(0,o.useMemo)((()=>{const t=Boolean(k.cursor),o=Boolean(I)||Boolean(x);return!u&&(n||o&&t||!o&&e.hasMoreWorkspaces&&!e.error)}),[n,I,x,k,u,e.error,e.hasMoreWorkspaces]),A=({searchQuery:t,visibilityStatusFilter:n,filterResults:r})=>S(void 0,void 0,void 0,(function*(){const i={};if(m(null),t||n){c(!0),t&&(i.name=t),r.cursor&&(i.cursor=r.cursor),n&&(i.visibilityStatus=n);try{const t=yield e.getWorkspaces(i);R({workspaces:d().unionBy(r.workspaces,t.data,"id"),cursor:t.meta.nextCursor})}catch(e){pm.logger.error("MoveEntityModal~handleNetworkSearch: Error while trying to get filtered workspaces",e),m({title:"Couldn’t load the workspaces",subtitle:"Just a faulty wire. Try reloading.",retry:()=>o.createElement(s.default,{type:"outline",onClick:()=>A({searchQuery:t,visibilityStatusFilter:n,filterResults:r}),text:"Reload"})})}finally{c(!1)}}})),L=(0,o.useCallback)(d().debounce(A,500,{leading:!1,trailing:!0}),[]),O=e=>{const t=e.target.value;c(!0),R({workspaces:[],cursor:""}),T(t)},N=()=>{const e={workspaces:[],cursor:""};T(""),R(e),A({filterResults:e,searchQuery:"",visibilityStatusFilter:x})},q=()=>{const t=Boolean(k.cursor),n=Boolean(I)||Boolean(x);n&&t?A({filterResults:k,searchQuery:I,visibilityStatusFilter:x}):n||e.fetchMoreWorkspaces()},B=()=>{const t=Boolean(I)||Boolean(x);return u||(e.error&&!t?e.error:null)},F=(0,o.useMemo)((()=>{if(I||x){const t=k.workspaces||[],n=d().differenceBy(e.workspaces,t,"id")[0]||{};return n.id&&t.unshift(n),t}return e.workspaces}),[k.workspaces,e.workspaces,I,x]);(0,o.useEffect)((()=>{L({searchQuery:I,visibilityStatusFilter:x,filterResults:k})}),[I]),(0,o.useEffect)((()=>{A({searchQuery:I,visibilityStatusFilter:x,filterResults:k})}),[x,e.mode]);if((0,o.useEffect)((()=>{S(void 0,void 0,void 0,(function*(){const{teamId:e}=(0,g.resolveStoreInstance)(h.default),t=(0,g.resolveStoreInstance)(f.default).get("workspace:isCommunityManagerEnabled");if(!e||!t)return P(!0);{const{manageWorkspaceVisibilityRequests:t}=yield(0,_.fetchPermissions)(["manageWorkspaceVisibilityRequests"],e);P(t)}}))}),[]),"move"===e.mode){const s=e.filterWs===v.VISIBILITY_STATUS.public&&!M;return o.createElement("div",{className:"move-entity-modal"},o.createElement(r.default,{type:"para"},d().get(E.MOVE_INFO_TEXT,e.entityType,"")),e.isLoading?o.createElement(b.default,null):o.createElement(o.Fragment,null,o.createElement("div",{className:"move-entity-modal__filters"},o.createElement(i.default,{type:"search",placeholder:"Search workspace",value:I,onChange:O,onClear:N,isDisabled:!1,className:"move-entity-modal__filters__search"}),o.createElement(w,{type:"secondary",text:"Create Workspace",isDisabled:s,className:p()({"workspace-switcher__action workspace-switcher__action--create":!0}),tooltip:s&&"Public workspaces can only be created by community managers",onClick:()=>{var t;null===(t=e.setMode)||void 0===t||t.call(e,"create")}})),!d().isEmpty(F)||x||n||u||e.isLoading?o.createElement(y.default,{workspaces:F,disabledWorkspaces:e.disabledWorkspaces,friendlyEntityType:t,isSpinnerVisible:D,selectedWorkspace:e.selectedWorkspace,fetchMoreListItems:q,onSelect:e.handleWorkspaceSelect,error:B()}):o.createElement(a.default,{className:"move-entity-modal__empty-state",title:"No workspaces found",description:"Check your spelling, try a different search term, or adjust the filters."},o.createElement(l.default,null))))}return o.createElement(C.default,{setMode:e.setMode,defaultVisibility:e.filterWs,handleCreateWorkspace:e.handleCreateWorkspace,isCreating:e.isCreating})}},"./version-control/common/Move/MoveEntityModalContainer.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),u=n("./node_modules/lodash/lodash.js"),p=n.n(u),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("../../node_modules/mobx/lib/mobx.module.js"),f=n("./js/stores/CurrentUserStore.js"),g=n("./js/stores/SyncStatusStore.js"),v=n("./js/stores/ActiveWorkspaceStore.js"),y=n("./js/stores/StoreManager.js"),b=n("./js/services/NavigationService.js"),E=n("./js/services/CurrentUserDetailsService.js"),C=n("./js/modules/services/share-entities/ShareEntitiesService.js"),_=n("./collaboration/navigation/constants.js"),S=n("./collaboration/workspace/controller/WorkspaceController.ts"),w=n("./version-control/common/Move/MoveEntityModal.tsx"),I=n("./collaboration/workspace/controller/ActiveWorkspaceElementController.ts"),T=n("./collaboration/workspace/types/WorkspaceTypes.ts"),x=n("./collaboration/workspace/constants/move.ts"),j=n("./collaboration/workspace/controller/ActiveWorkspaceController.ts"),k=n("./collaboration/workspace/controller/WorkspaceRoleController.ts"),R=n("./js/services/WorkspaceSwitchService.js"),M=n("./collaboration/workspace/types/PermissionTypes.ts"),P=n("./collaboration/workspace/service/PermissionService.ts"),D=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const A="move",L=(0,m.default)(s.ModalContent)`
  justify-content: space-between;
`;t.default=e=>{const{addToast:t}=(0,r.default)(),{close:n,isOpen:u,controller:m}=e,O=p().get(x.MOVE_ENTITY_TYPE,m.entityType),[N,q]=(0,o.useState)({workspaces:[],cursor:""}),[B,F]=(0,o.useState)(!0),[$,U]=(0,o.useState)(!1),[W,G]=(0,o.useState)(!1),[V,z]=(0,o.useState)(!1),[H,Y]=(0,o.useState)(null),[K,X]=(0,o.useState)(!0),[Q,J]=(0,o.useState)(!1),[Z,ee]=(0,o.useState)(null),[te,ne]=(0,o.useState)(!0),[oe,se]=(0,o.useState)({}),[re,ie]=(0,o.useState)({}),[ae,le]=(0,o.useState)(A),ce=((0,o.useRef)(""),(0,o.useRef)("")),de=((0,o.useRef)(!1),(0,o.useRef)(!1)),ue=t=>D(void 0,void 0,void 0,(function*(){var n;const o=yield S.default.findAll(t),s=m.entityType,r=p().map(o.data,"id"),i=E.default.userId,a=null===(n=j.default.get())||void 0===n?void 0:n.id,l=p().get(e,"controller.destinationWorkspace"),c={};let d={};re[a]||(c[a]={entityType:M.ENTITY_TYPE.USER,entityId:i,objectType:M.OBJECT_TYPE.WORKSPACE,objectId:a,permission:x.MOVE_REMOVE_PERMISSIONS[s]});for(const e of r)re[e]||e===a||(c[e]={entityType:M.ENTITY_TYPE.USER,entityId:i,objectType:M.OBJECT_TYPE.WORKSPACE,objectId:e,permission:x.MOVE_ADD_PERMISSIONS[s]});re[l.id]||(c[l.id]={entityType:M.ENTITY_TYPE.USER,entityId:i,objectType:M.OBJECT_TYPE.WORKSPACE,objectId:l.id,permission:x.MOVE_ADD_PERMISSIONS[s]});try{p().isEmpty(c)||(d=yield P.default.fetchPermissions(c))}catch(e){pm.logger.error("MoveEntityModalContainer~fetchWorkspaces: Error occurred while fetching permissions",e)}return p().get(d,[a],!0)||X(!1),ie((e=>p().reduce(r,((t,n)=>(e[n]||(t[n]=p().get(d,n,!0)),t)),e))),se((e=>{var t;const n=j.default.get(),s=n.visibilityStatus===T.VISIBILITY_STATUS.personal;return(null==o?void 0:o.data)?null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.reduce(((e,t)=>(t.id===n.id?e[t.id]={title:"Can't move here",description:`The ${O} already exists in this workspace.`}:p().get(re,[t.id],!0)&&p().get(d,t.id,!0)?s||t.visibilityStatus!==T.VISIBILITY_STATUS.personal||(e[t.id]={title:"Can't move here",description:`Can't move ${O}s from team, private, and public workspaces to a personal workspace.`}):e[t.id]={title:"Can't move here",description:`You don't have access to move ${O}s to this workspace.`},e)),Object.assign({},e)):e})),(p().get(re,[l.id],!1)||p().get(d,l.id,!1))&&o.data.unshift(l),o})),pe=()=>D(void 0,void 0,void 0,(function*(){const{cursor:t,workspaces:n}=N;J(!1),ee(null);try{const o={limit:10,cursor:"",visibilityStatus:T.VISIBILITY_STATUS[e.controller.filterWs===T.VISIBILITY_STATUS.public?T.VISIBILITY_STATUS.public:T.VISIBILITY_STATUS.team]};t&&(o.cursor=t);const s=yield ue(o);q({workspaces:p().unionBy(p().concat(n,s.data),"id"),cursor:s.meta.nextCursor})}catch(e){pm.logger.error("MoveEntityModalContainer~fetchAndSetWorkspaces - Error while trying to fetch workspaces",e),t?ee({title:"Couldn’t load more workspaces",subtitle:"Just a faulty wire. Try reloading.",retry:()=>o.createElement(i.default,{type:"outline",onClick:pe,text:"Reload"})}):J(!0)}finally{F(!1)}})),me=()=>{n()},he=e=>{e&&oe[e.id]||Y(e||null)};return(0,o.useEffect)((()=>{D(void 0,void 0,void 0,(function*(){const{entityId:e,entityType:t,entityName:n}=m,o=!p().includes(p().values(T.WORKSPACE_ELEMENTS_TYPE),t);e&&t&&n||(pm.logger.error("MoveEntityModalContainer~handleOpen: Missing mandatory parameters entityId or entityType or entityName"),me()),o&&(pm.logger.error("MoveEntityModalContainer~handleOpen: Unsupported entity type"),me());try{yield(0,y.resolveStoreInstance)(g.default).onSyncAvailable({timeout:1e4})}catch(e){pm.logger.warn("MoveEntityModalContainer~handleOpen: Not able to connect to sync",e),me()}try{if(!(yield(0,C.canManageRolesOnEntity)(t,e)))return void ne(!1);pe()}catch(e){pm.logger.error("MoveEntityModalContainer~handleOpen: Access check request failed",e)}}))}),[]),o.createElement(s.Modal,{size:"small",className:"move-entity-modal-container",isOpen:u,onClose:me},o.createElement(s.ModalHeader,{heading:`Move ${m.entityName}`}),o.createElement(a.default,{direction:"column",className:"move-entity-modal-container__modal-content"},te&&K?o.createElement(o.Fragment,null,o.createElement(L,null,Q?o.createElement(l.default,{title:"Couldn't load the workspaces",description:"Just a faulty wire. Try reloading.",className:"move-entity-modal-container__modal-content__initial-error",illustration:"unable-to-load",secondaryAction:o.createElement(i.default,{type:"outline",text:"Reload",onClick:()=>{F(!0),pe()}})},o.createElement(c.default,null)):o.createElement(w.default,{entityType:m.entityType,hasMoreWorkspaces:Boolean(N.cursor),workspaces:N.workspaces,disabledWorkspaces:oe,selectedWorkspace:H,isLoading:B,error:Z,isFiltering:V,setIsFiltering:z,getWorkspaces:ue,fetchMoreWorkspaces:pe,handleWorkspaceSelect:he,filterWs:m.filterWs,handleModalClose:me,mode:ae,setMode:le,isCreating:$,handleCreateWorkspace:e=>D(void 0,void 0,void 0,(function*(){var t;try{const n=yield k.default.populateDefaultRoles(),o=(0,y.resolveStoreInstance)(f.default),s=e;s.roles={team:{[o.teamId]:[null===(t=n.defaultRoles)||void 0===t?void 0:t.team]}},U(!0);const r=yield S.default.create(s),i=N;i.workspaces.unshift(r),q(i),he(r),pm.toasts.success("Successfully created workspace",{title:"Workspace Created"}),le(A)}catch(e){pm.toasts.error(e,{title:"Unable to create workspace"})}finally{U(!1)}})),onFiltersChange:()=>{ce.current="",de.current=!1}})),!B&&ae===A&&o.createElement(s.ModalFooter,null,o.createElement(a.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},o.createElement(i.default,{type:"secondary",text:"Cancel",isDisabled:W,onClick:me}),o.createElement(i.default,{type:"primary",text:`Move ${p().startCase(O)}`,isDisabled:!H||B||V,isLoading:W,onClick:()=>D(void 0,void 0,void 0,(function*(){var n;if(!H)return;G(!0);const{entityType:s,entityId:r,entityName:i}=m,a=null===(n=m.opts)||void 0===n?void 0:n.onPostMove;try{yield(0,y.resolveStoreInstance)(g.default).onSyncAvailable({timeout:1e4}),yield I.default.move(H.id,s,r,i),p().isFunction(a)&&a(),(t=>{R.default.switchWorkspace(t.id).then((()=>{const n=(0,h.reaction)((()=>(0,y.resolveStoreInstance)(v.default).id),(o=>{var s,r;if(o===t.id)return"team"===(null===(s=e.controller)||void 0===s?void 0:s.filterWs)&&b.default.transitionTo("build.pullRequestCreate",{},{source:e.controller.entityId,destination:null===(r=e.controller)||void 0===r?void 0:r.destinationId,entityType:m.entityType,workspace:o}),n&&n()}),{fireImmediately:!0})})).catch((()=>{pm.logger.error("WorkspaceSwitcherContainer~handleSwitchWorkspace: Switch could not happen.")}))})(H),me();b.default.getURLForRoute("build.pullRequestCreate",{wid:H.id});t({title:`${p().startCase(O)} moved`,status:"success",description:o.createElement(o.Fragment,null,i," is now in ",H.name,"."," ")})}catch(e){pm.logger.error(`MoveEntityModalContainer~handleMove: Error while trying moving ${s}:${r}`,e),t({title:"Just a faulty wire. Try again.",status:"error",description:`Couldn't move the ${O}`})}finally{G(!1)}}))})))):o.createElement(l.default,{className:"move-entity-modal-container__no-access",title:"Looks like you don't have access",description:`Get editor access to move this ${p().startCase(O)}.`,primaryAction:o.createElement(i.default,{type:"primary",text:"Request Access",onClick:()=>{const{entityType:e,entityId:t,entityName:n}=m;me(),b.default.transitionTo(_.ACCESS_REQUEST_CREATE_BUILD_IDENTIFIER,null,{entityType:e,entityId:t,entityName:n,type:"grant_role"})}})},o.createElement(d.default,null))))}},"./version-control/diff/services/ChangeManagementDiffService.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchDiff:function(){return i},merge:function(){return a},mergeAsync:function(){return l}});var o=n("./js/modules/services/RemoteSyncRequestService.js"),s=n("./version-control/pull-request/services/PullRequestService.js"),r=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};function i(e){return r(this,void 0,void 0,(function*(){return o.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"get",path:`/v1/diff/${e.modelType}?destination=${e.destinationId}&source=${e.sourceId}`}}).then((e=>e.body.data))}))}function a(e){return r(this,void 0,void 0,(function*(){if("collection"===e.entityType){if(yield(0,s.isCollectionParentAPIGitLinked)(e.destinationId))throw new Error("Cannot merge changes into a collection that's part of a Git-connected API.")}return o.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"put",path:"/v1/merge",body:{entities:{type:e.entityType,sourceId:e.sourceId,destinationId:e.destinationId},mergeStrategy:e.strategy,resolvedConflicts:e.resolutions}}})}))}function l(e){return r(this,void 0,void 0,(function*(){if("collection"===e.entityType){if(yield(0,s.isCollectionParentAPIGitLinked)(e.destinationId))throw new Error("Cannot merge changes into a collection that's part of a Git-connected API.")}return o.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"put",path:"/v2/merge",body:{entities:{type:e.entityType,sourceId:e.sourceId,destinationId:e.destinationId},mergeStrategy:e.strategy,resolvedConflicts:e.resolutions}}})}))}},"./version-control/pull-request/components/PullRequest/helpers.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{getInlineCommentThreadHeaderAnchorMap:function(){return l},getInlineCommentThreadHeaderAnchorMapFromDiffV1:function(){return a},processMergeChecksUpdate:function(){return i}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("./version-control/utils/pullRequest.js");function i(e,t,n){const o=(0,r.hasEditorApproved)(e,t,n),s=(0,r.approvedOnce)(e,n),i=(n||[]).findIndex((e=>"approvalRequired"===e.id)),a=(n||[]).findIndex((e=>"editorApprovalRequired"===e.id)),l=n;return l[i]=Object.assign(Object.assign({},l[i]),{satisfied:s}),l[a]=Object.assign(Object.assign({},l[a]),{satisfied:o}),l}function a(e={}){return Object.keys(e).reduce(((t,n)=>{const o=e[n];return t[`${o.itemType}/${n}`]={name:o.name,type:o.itemType,method:s().get(o,"meta.method")},t}),{})}function l(e={}){return Object.keys(e).reduce(((t,n)=>{const o=e[n];return t[`${o.type}/${n}`]={name:o.label,type:o.type,method:s().get(o,"meta.method")},t}),{})}},"./version-control/pull-request/components/PullRequest/index.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../packages/version-control/change-management/index.ts"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),a=n("./node_modules/lodash/lodash.js"),l=n.n(a),c=n("../../node_modules/mobx/lib/mobx.module.js"),d=n("./js/stores/CurrentUserStore.js"),u=n("./js/stores/StoreManager.js"),p=n("./growth/foundation/public/amplitude/AmplitudeService.js"),m=n("./version-control/diff/constants.ts"),h=n("./version-control/common/index.js"),f=n("./js/components/base/LoadingIndicator.js"),g=n("./js/components/base/Buttons.js"),v=n("./version-control/pull-request/services/PullRequestService.js"),y=n("./version-control/pull-request/components/PullRequestHeader/index.tsx"),b=n("./js/utils/uid-helper.js"),E=n("./appsdk/contextbar/ContextBar.js"),C=n("./js/components/base/Panes.js"),_=n("./js/constants/Panes.js"),S=n("./js/constants/AppSettingsDefaults.js"),w=n("./version-control/constants.js"),I=n("./js/modules/services/AnalyticsService.js"),T=n("./version-control/pull-request/components/PullRequestBody/index.js"),x=n("./collaboration/constants/comments.js"),j=n("./version-control/diff/components/Body.js"),k=n("./version-control/pull-request/components/PullRequestInlineComment/prCommentContext.js"),R=n("./version-control/utils/error.js"),M=n("./version-control/pull-request/types.ts"),P=n("./version-control/pull-request/components/PullRequest/helpers.ts"),D=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};let A=class extends o.Component{constructor(){super(...arguments),this.prBodyRef=(0,o.createRef)(),this.state={isPRBodyScrolled:!1,prHeaderSize:y.PRHeaderSize.LARGE},this.processApprove=e=>{var t,n;const{pullRequest:o}=this.props.controller;if(!o)return;o.reviewers||(o.reviewers=[]);const s=o.reviewers.findIndex((t=>t.id===e.updatedBy.id));s<0?o.reviewers.push(Object.assign(Object.assign({},e.updatedBy),{status:"approved"})):o.reviewers[s].status=M.PullRequestStatuses.APPROVED;const r=l().get(o,"mergeSettings.mergeChecks.checks.length")?(0,P.processMergeChecksUpdate)(o.reviewers,o.destinationModelPermission,l().get(o,"mergeSettings.mergeChecks.checks")):l().get(o,"mergeSettings.mergeChecks.checks");(null===(n=null===(t=o.mergeSettings)||void 0===t?void 0:t.mergeChecks)||void 0===n?void 0:n.checks)&&(r.every((e=>e.satisfied))&&(o.mergeSettings.mergeChecks.allConditionsSatisfied=!0),o.mergeSettings.mergeChecks.checks=r)},this.processUnapprove=e=>{var t,n;const{pullRequest:o}=this.props.controller;if(!o)return;const s=o.reviewers.findIndex((t=>`${t.id}`==`${l().get(e,"updatedBy.id")}`));o.reviewers[s].status=M.PullRequestStatuses.OPEN,o.status=e.status,o.updatedBy=e.updatedBy;const r=l().get(o,"mergeSettings.mergeChecks.checks.length")?(0,P.processMergeChecksUpdate)(o.reviewers,o.destinationModelPermission,l().get(o,"mergeSettings.mergeChecks.checks")):l().get(o,"mergeSettings.mergeChecks.checks");(null===(n=null===(t=o.mergeSettings)||void 0===t?void 0:t.mergeChecks)||void 0===n?void 0:n.checks)&&(o.mergeSettings.mergeChecks.checks=r,r.some((e=>!e.satisfied))&&(o.mergeSettings.mergeChecks.allConditionsSatisfied=!1))},this.processDecline=e=>{const{pullRequest:t}=this.props.controller;t.status=e.status,t.updatedBy=e.updatedBy,t.updatedAt=e.updatedAt,t.comment=e.comment;const n=t.reviewers.findIndex((t=>`${t.id}`==`${l().get(e,"updatedBy.id")}`));n>=0&&(t.reviewers[n].status=M.PullRequestStatuses.DECLINED)},this.fetchCommentingPermissions=()=>{if(this.commentingPermissions)return Promise.resolve(this.commentingPermissions);const e=l().get(this.props,"controller.prId"),t=(0,u.resolveStoreInstance)(d.default).id,n=l().get(this.props.controller.pullRequest,"destination.id");return(0,v.getPullRequestCommentingPermissions)({prId:e,userId:t,destinationId:n}).then((e=>(this.commentingPermissions=e,e)))},this.getValidAnnotationAnchors=e=>Object.keys(e).concat([`pullRequest/${this.props.controller.prId}`]),this.handlePRBodyWidthChange=e=>{let t;t=e<=720?y.PRHeaderSize.SMALL:e>720&&e<=1054?y.PRHeaderSize.MEDIUM:y.PRHeaderSize.LARGE,this.setState({prHeaderSize:t})},this.onInlineCommentThreadHeaderClick=({anchor:e})=>{var t,n;if(e&&(null===(n=null===(t=this.props.controller.pullRequest)||void 0===t?void 0:t.diffManager)||void 0===n?void 0:n.version)===m.DiffVersion.V2){const t=e.replace(/\//g,"-"),n=document.querySelector(`#${t}`);n&&n.scrollIntoView()}else if(e&&this.prBodyRef.current){const t=e.replace(/\//g,"-");this.prBodyRef.current.scrollIntoView(t)}},this.renderInlineCommentThreadHeader=({anchor:e})=>{if(!this.inlineCommentThreadHeaders)return null;const t=this.inlineCommentThreadHeaders[e];return o.createElement("div",{className:"pull-request__inline-comment-header"},o.createElement(j.DiffItemLabel,{itemType:"response"===t.type?"example":t.type,itemMeta:{method:t.method},size:"small"})," ",t.name)},this.rootLevelAnnotationsFilter=e=>e.anchor===`pullRequest/${this.props.controller.prId}`,this.inlineAnnotationsFilter=e=>"pullRequest"===e.model&&e.modelId===this.props.controller.prId&&e.anchor!==`pullRequest/${this.props.controller.prId}`}componentDidMount(){I.default.addEventV2({category:"pullrequest",action:"view_pr",label:this.props.controller.origin,entityType:"pullrequest",entityId:this.props.controller.prId}),p.Ampli.pullRequestPageViewed((0,p.getAmpliPageViewedProperties)())}getModel(e){const t=l().get(this.props,`controller.pullRequest.${e}`)||{};return{name:t.name,uid:t.id,id:t.id&&(0,b.decomposeUID)(t.id).modelId,forkInfo:{id:l().get(t,"forkedFrom.id"),forkLabel:l().get(t,"forkedFrom.forkName")},exists:t.exists}}get inlineCommentThreadHeaders(){var e;const t=null===(e=this.props.controller.pullRequest)||void 0===e?void 0:e.diffManager;return t&&t.version===m.DiffVersion.V1?(0,P.getInlineCommentThreadHeaderAnchorMapFromDiffV1)(t.parsedDiff):t&&t.version===m.DiffVersion.V2?(0,P.getInlineCommentThreadHeaderAnchorMap)(t.normalizedMergeDiff.entities.entities):void 0}get validAnchors(){if(this.inlineCommentThreadHeaders)return this.getValidAnnotationAnchors(this.inlineCommentThreadHeaders)}get isEndStatePR(){var e;return[w.PR_STATES.MERGED,w.PR_STATES.DECLINED].includes(null===(e=this.props.controller.pullRequest)||void 0===e?void 0:e.status)}get changeCount(){const{diffManager:e}=this.props.controller.pullRequest||{};return e?e.version===m.DiffVersion.V2?e.changeCount:e.allChanges:0}render(){var e,t,n,s,a,c,p;const m=this.getModel("destination"),v=this.getModel("source"),b=(0,u.resolveStoreInstance)(d.default),I={id:b.id,name:b.name,email:b.email,username:b.username,profilePicUrl:b.profile_pic_url},j=(null===(e=this.props.controller.pullRequest)||void 0===e?void 0:e.reviewers)||[],P=j.filter((e=>e.status===M.PullRequestStatuses.APPROVED))||[];if(this.props.controller.isLoadingRenderBlockingData)return o.createElement("div",{className:"pull-request__loading"},o.createElement(f.default,null));if(this.props.controller.pageDataFetchFailedDueToConnectionUnAvailability)return o.createElement(h.EmptyState,{illustration:o.createElement(i.default,null),title:"You are offline",body:"Unable to connect to the servers. Please check your network settings.",srcClass:"pull-request-offline-image",action:o.createElement(g.Button,{type:"primary",size:"small",onClick:this.props.controller.fetchPageData},"Retry")});const D=this.props.controller.pullRequestLoadingError||this.props.controller.mergeSettingsLoadingError;return D?o.createElement(h.EmptyState,{subText:(null==D?void 0:D.message)||"",className:"collection-diff__empty-state",title:"Unable to fetch pull request",illustration:(0,R.getErrorIllustration)(null==D?void 0:D.code)}):this.props.controller.pullRequest?o.createElement(k.InlineCommentProvider,{value:{getCommentingPermissions:this.fetchCommentingPermissions}},o.createElement("div",{className:"pull-request"},o.createElement(C.PaneGroup,{defaultLayout:_.PANE_LAYOUT_HORIZONTAL,className:"pull-request__pane-group"},o.createElement(C.Pane,{width:{min:S.default.ui.WORKBENCH_MIN_WIDTH},className:"pull-request__pane"},o.createElement(C.PaneContent,{defaultLayout:_.PANE_LAYOUT_HORIZONTAL,className:"pull-request__pane-content"},o.createElement(y.default,{approvers:P,changeCount:(null===(t=this.props.controller.pullRequest.diffManager)||void 0===t?void 0:t.allChanges)||(null===(n=this.props.controller.pullRequest.diffManager)||void 0===n?void 0:n.changeCount),currentUser:I,destination:m,pullRequestId:this.props.controller.pullRequest.id,mergeSettings:this.props.controller.pullRequest.mergeSettings,refreshing:this.props.controller.isLoadingPullRequestDiff||this.props.controller.isLoadingPullRequest,permissions:this.props.controller.pullRequest.destinationModelPermission,reviewers:j,isOffline:!this.props.controller.isConnectionAvailable,source:v,status:this.props.controller.pullRequest.status,title:this.props.controller.pullRequest.title,afterApprove:this.processApprove,afterUnapprove:this.processUnapprove,afterDecline:this.processDecline,onRefresh:this.props.controller.fetchPageData,isArchived:this.props.controller.pullRequest.archived,entityType:this.props.controller.pullRequest.entity,isScrolled:this.state.isPRBodyScrolled,size:this.state.prHeaderSize,diffVersion:l().get(this.props.controller.pullRequest,"diffManager.version"),merge:this.props.controller.mergePullRequest,activeMergeStatus:this.props.controller.activeMergeStatus,isMergeModalOpen:this.props.controller.isMergeModalOpen,setMergeModalOpen:this.props.controller.setMergeModalOpen}),this.props.controller.isAsyncMergeEnabled&&o.createElement(r.MergeStatusBanner,{status:this.props.controller.activeMergeStatus,suggestRefreshOnFailure:"BadRequestError"===l().get(this.props.controller,"mergeError.applicationFailureInfo.type"),isPullRequest:!0}),o.createElement(T.default,{isBannerVisible:this.isEndStatePR,baseEntity:m,currentUser:I,diffManager:this.props.controller.pullRequest.diffManager,errorLoadingDiff:this.props.controller.pullRequestDiffLoadingError,forkedEntity:v,loadingDiff:this.props.controller.isLoadingPullRequestDiff,pullRequest:this.props.controller.pullRequest,isOffline:!this.props.controller.isConnectionAvailable,ref:this.prBodyRef,validAnchors:this.validAnchors,entityType:this.props.controller.pullRequest.entity,onScrolledToTop:()=>this.setState({isPRBodyScrolled:!1}),onScrolledFromTop:()=>this.setState({isPRBodyScrolled:!0}),onWidthChange:this.handlePRBodyWidthChange}))),o.createElement(E.ContextBarPane,{contextData:{contextBarView:!0,pullRequest:this.props.controller.pullRequest,model:"pullRequest",modelId:this.props.controller.prId,anchor:`pullRequest/${this.props.controller.prId}`,user:I,className:"pull-request-comments",type:"pullRequest",mergeChecks:null===(c=null===(a=null===(s=this.props.controller.pullRequest)||void 0===s?void 0:s.mergeSettings)||void 0===a?void 0:a.mergeChecks)||void 0===c?void 0:c.checks,errorActionHandler:this.props.controller.fetchMergeSettings,errorLoadingMergeChecks:this.props.controller.mergeSettingsLoadingError,showComments:!!m.id,fetchPermissions:this.fetchCommentingPermissions,onInlineCommentThreadHeaderClick:this.onInlineCommentThreadHeaderClick,validAnchors:this.validAnchors,renderInlineCommentThreadHeader:this.renderInlineCommentThreadHeader,rootLevelAnnotationsFilter:this.rootLevelAnnotationsFilter,inlineAnnotationsFilter:this.inlineAnnotationsFilter},allowedContexts:[x.COMMENTS_CONTEXT_IDENTIFIER,"collection"===(null===(p=this.props.controller.pullRequest)||void 0===p?void 0:p.entity)&&w.MERGE_CONDITIONS,w.PULL_REQUEST_META].filter(Boolean),editorId:l().get(this.props,"editor.id")})))):null}};D([c.action],A.prototype,"processApprove",void 0),D([c.action],A.prototype,"processUnapprove",void 0),D([c.action],A.prototype,"processDecline",void 0),D([c.computed],A.prototype,"inlineCommentThreadHeaders",null),D([c.computed],A.prototype,"validAnchors",null),D([c.computed],A.prototype,"isEndStatePR",null),A=D([s.observer],A),t.default=A},"./version-control/pull-request/components/PullRequestCreateAndEdit/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{StyledPullRequestHeading:function(){return Q}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/Wondering.js"),u=n("../../packages/version-control/change-management/index.ts"),p=n("./node_modules/react-sticky-box/dist/es/index.js"),m=n("./node_modules/lodash/lodash.js"),h=n.n(m),f=n("./node_modules/classnames/index.js"),g=n.n(f),v=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),y=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),b=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),E=n("./js/modules/services/AnalyticsService.js"),C=n("./js/stores/CurrentUserStore.js"),_=n("./js/stores/SyncStatusStore.js"),S=n("./js/stores/ActiveWorkspaceStore.js"),w=n("./js/stores/TeamUserStore.js"),I=n("./js/stores/ActiveWorkspaceSessionStore.js"),T=n("./growth/foundation/public/amplitude/AmplitudeService.js"),x=n("./js/stores/StoreManager.js"),j=n("./version-control/common/index.js"),k=n("./version-control/utils/diff.js"),R=n("./js/components/base/Tabs.js"),M=n("./js/components/base/LoadingIndicator.js"),P=n("./js/components/base/Buttons.js"),D=n("./version-control/pull-request/services/PullRequestService.js"),A=n("./version-control/pull-request/components/PullRequestForm.js"),L=n("./version-control/pull-request/components/PullRequestDiff.js"),O=n("./js/services/NavigationService.js"),N=n("./appsdk/workbench/TabService.js"),q=n("./version-control/pull-request/components/DiffNavigation.js"),B=n("./version-control/common/ResizeObserver/index.js"),F=n("./version-control/pull-request/components/DiffNavigation/floatingDiffNavigation.js"),$=n("./version-control/common/Move/MoveEntityModalContainer.tsx"),U=n("./js/services/WorkspaceDependencyService.js"),W=n("./collaboration/workspace/types/WorkspaceTypes.ts"),G=n("./js/services/EditorService.js"),V=n("./version-control/diff/services/ChangeManagementDiffService.ts"),z=n("./onboarding/src/common/LaunchDarkly.js"),H=n("./version-control/diff/constants.ts"),Y=n("./version-control/pull-request/utils/filterOpenPullRequest.ts"),K=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},X=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const Q=(0,v.default)(r.default)`
  padding-top: ${({theme:e})=>e["spacing-m"]};
  display: inline-block;
  padding-left: ${({theme:e})=>e["spacing-l"]};
`;const J={collection:y.getOne,environment:b.getOne},Z={collection:"baseCollectionUid",environment:"baseEnvironmentUid"},ee={collection:{enablePullRequestDiff:!0,enablePullRequestSettings:!0},environment:{enablePullRequestDiff:!0,enablePullRequestSettings:!1}};let te=class extends o.Component{constructor(e){super(e),this.diffRef=(0,o.createRef)(),this.shouldEnablePullRequestDiffForModel=e=>e in ee?ee[e].enablePullRequestDiff:(pm.logger.error("PullRequestCreateAndEdit~Invalid model received",{model:e,origin:this.props.controller.origin,mode:this.props.controller.mode},{context:pm.logger.getContext("change-management","version-control")}),!1),this.shouldEnablePullRequestSettingsForModel=e=>e in ee?ee[e].enablePullRequestSettings:(pm.logger.error("PullRequestCreateAndEdit~Invalid model received",{model:e,origin:this.props.controller.origin,mode:this.props.controller.mode},{context:pm.logger.getContext("change-management","version-control")}),!1),this.fetchData=()=>{const{prId:e,toId:t,fromId:n}=this.props.controller;Promise.all([e&&this.fetchPullRequestAndDetails(e),t&&n&&this.fetchDependencies(t,n)])},this.fetchDependencies=(e,t)=>Promise.all([this.checkVisibilityOfEntities(e),this.fetchSuggestedReviewers(t,e),this.shouldEnablePullRequestDiffForModel(this.props.controller.entityType)&&this.handleFetchDiff(e,t),this.fetchSourceAndDestinationModels(e,t),this.shouldEnablePullRequestSettingsForModel(this.props.controller.entityType)&&this.handleFetchPullRequestSettings(e)]),this.handleTabChange=e=>{this.setState({activeTab:e})},this.handleTabClose=()=>{this.props.controller.prId?N.default.closeByRoute("pull-request/:id/edit",{id:this.props.controller.prId}):N.default.closeByRoute("pull-request/create")},this.onSuccessfulSourceEntityMove=()=>{this.setState({teamSharing:!1,publicSharing:!1})},this.onToggleMoveModal=()=>{this.setState((e=>({openShareModal:!e.openShareModal})))},this.fetchSourceAndDestinationModels=(e,t)=>X(this,void 0,void 0,(function*(){try{const n=J[this.props.controller.entityType],[o,s]=yield Promise.all([n(e),n(t)]);this.setState({source:s,destination:o})}catch(e){this.setState({errorLoading:e}),pm.logger.error(`PullRequestCreateAndEdit~fetchModels: unable to fetch ${this.props.controller.entityType}s`,e)}})),this.initiateFetch=()=>{const{toId:e,fromId:t}=this.props.controller,n="collection"===this.props.controller.entityType;this.setState({loading:!0,errorLoading:null}),(0,x.resolveStoreInstance)(_.default).onSyncAvailable({timeout:5e3}).then((()=>{Promise.all([e&&t&&(0,D.fetchPullRequests)(this.props.controller.entityType,e,t),this.fetchData(),n&&e&&(0,D.isCollectionParentAPIGitLinked)(e)]).then((e=>{var t;const n=e[2],o=null===(t=e[0])||void 0===t?void 0:t.pullRequests.find((e=>(0,Y.default)(e)));n&&this.setState({isDestinationGitLinked:!0}),(null==o?void 0:o.id)&&this.setState({existingPullRequestId:o.id})})).catch((e=>{this.setState({errorLoading:e}),pm.logger.error("PullRequestCreateAndEdit~fetchData: could not fetch required data.",e)})).finally((()=>this.setState({loading:!1})))})).then((()=>this.setState({isOffline:!1}))).catch((()=>this.setState({isOffline:!0,loading:!1})))},this.checkForAnyExistingPR=()=>{const{toId:e,fromId:t,prId:n}=this.props.controller;this.setState({loading:!0,errorLoading:null}),(0,x.resolveStoreInstance)(_.default).onSyncAvailable({timeout:5e3}).then((()=>{Promise.all([e&&t&&(0,D.fetchPullRequests)(this.props.controller.entityType,e,t),this.fetchData()]).then((e=>{var t;const n=null===(t=e[0])||void 0===t?void 0:t.pullRequests.find((e=>(0,Y.default)(e)));(null==n?void 0:n.id)&&this.setState({existingPullRequestId:n.id})})).catch((e=>{this.setState({errorLoading:e}),pm.logger.error("PullRequestCreateAndEdit~fetchData: could not fetch required data.",e)})).finally((()=>this.setState({loading:!1})))})).then((()=>this.setState({isOffline:!1}))).catch((()=>this.setState({isOffline:!0,loading:!1})))},this.filterInaccessibleReviewers=e=>{const t=h().get(e,"reviewers.pullRequest.users.merge",[]),n=h().get(e,"reviewers.pullRequest.users.view",[]),o=t.filter((e=>e.isAccessible)),s=n.filter((e=>e.isAccessible));return(o.length>0||s.length>0)&&(h().set(e,"reviewers.pullRequest.users.merge",o),h().set(e,"reviewers.pullRequest.users.view",s)),e},this.fetchSuggestedReviewers=(e,t)=>X(this,void 0,void 0,(function*(){try{this.setState({fetchingReviewers:!0});const[n,o]=yield Promise.all([(0,D.fetchSuggestedReviewers)(this.props.controller.entityType,e),(0,D.fetchSuggestedReviewers)(this.props.controller.entityType,t)]),s=this.filterInaccessibleReviewers(n),r=this.filterInaccessibleReviewers(o),i=h().get(s,"reviewers.pullRequest",[]),a=h().get(r,"reviewers.pullRequest",[]),l=h().get(i,"users.merge",[]).concat(h().get(i,"users.view",[]))||[],c=h().get(a,"users.merge",[]).concat(h().get(a,"users.view",[]))||[],d=l.length>0&&c.length>0?h().intersectionWith(l,c,((e,t)=>e.id===t.id)):[];this.setState({suggestedReviewers:r}),c.length>1&&d.length<=1&&this.setState({showMoveModal:!0}),this.setState({fetchingReviewers:!1})}catch(e){this.setState({errorLoading:e,fetchingReviewers:!1}),pm.logger.error("PullRequestCreateAndEdit~fetchSuggestedReviewers: Unable to fetch suggested reviewers",e)}})),this.checkVisibilityOfEntities=e=>X(this,void 0,void 0,(function*(){try{const t=yield this.getDestinationVisibility(this.props.controller.entityType,e),n=W.VISIBILITY_STATUS.public===t,o=W.VISIBILITY_STATUS.team===t;this.setState({publicSharing:n,teamSharing:o})}catch(e){pm.logger.error(`PullRequestCreateAndEdit~checkVisibilityOfEntities: Unable to check ${this.props.controller.entityType}'s visibility`,e)}})),this.getDestinationVisibility=(e,t)=>X(this,void 0,void 0,(function*(){const n=yield U.default.getWorkspaces({id:t,type:e});return this.destinationWorkspace=n&&n.body[0],h().get(n,"body.0.visibilityStatus")})),this.navigateToPullRequest=()=>{O.default.transitionTo("build.pullRequestView",{id:this.state.existingPullRequestId},{workspace:(0,x.resolveStoreInstance)(S.default).id})},this.handleFetchDiff=(e,t)=>new Promise(((n,o)=>{this.setState({loadingDiff:!0,errorLoadingDiff:null});(this.state.isDiffV2?V.fetchDiff({modelType:this.props.controller.entityType,sourceId:t,destinationId:e}):(0,D.fetchDiff)(e,t)).then((e=>{if(this.state.isDiffV2)this.setState({diffManager:new u.DiffManager(e),loadingDiff:!1});else{const t={collectionDiff:{diff:h().get(e,"data.diff"),conflicts:h().get(e,"data.conflicts"),navigation:h().get(e,"data.navigation"),outOfSync:h().get(e,"data.metaInfo.outOfSync")}};this.setState({diffManager:Object.assign(Object.assign({},(0,k.processServerDiff)(t)),{version:H.DiffVersion.V1}),loadingDiff:!1})}return n()})).catch((e=>(this.setState({loadingDiff:!1,errorLoadingDiff:e}),o())))})),this.handleFetchPullRequestSettings=e=>{this.setState({fetchingPullRequestSettings:!0}),(0,D.fetchPullRequestSettings)(e).then((e=>{this.setState({pullRequestSettings:e.settings||[]})})).catch((()=>{this.setState({fetchingPullRequestSettings:!1})}))},this.handleDescriptionChange=e=>{this.setState({description:e})},this.handleTitleChange=e=>{this.setState({title:e})},this.handleReviewersChange=e=>{this.setState({reviewers:e})},this.fetchPullRequestAndDetails=e=>new Promise(((t,n)=>{this.setState({errorLoading:null}),(0,D.fetchPullRequest)(e,!0).then((e=>(this.setState((t=>({pullRequest:e,reviewers:e.reviewers,title:e.title,description:e.description,isDiffV2:"collection"!==e.entity||t.isDiffV2}))),this.props.controller.setEntityType(e.entity),this.fetchDependencies(e.toId,e.fromId),t()))).catch((t=>(this.setState({errorLoading:t}),pm.logger.error(`PullRequestCreateAndEdit~fetchPullRequestAndDetails: Unable to fetch PR details for ${e}`,t),n())))})),this.handleConfirm=()=>{T.Ampli.pullRequestFormPrimaryActionClicked(Object.assign({mode:this.state.pullRequest.id?"edit":"create"},(0,T.getAmpliCTAProperties)({ctaType:"button",text:"Confirm"}))),this.state.pullRequest.id?this.saveEditsToPullRequest():this.createPullRequest()},this.saveEditsToPullRequest=()=>{const e={title:this.state.title,description:this.state.description,reviewers:(this.state.reviewers||[]).map((e=>e.id))};this.setState({updating:!0,errorUpdating:null}),E.default.addEventV2({category:"pullrequest",action:"initiate_edit",entityType:"pullrequest",entityId:h().get(this.state,"pullRequest.id")}),(0,D.updatePullRequest)(h().get(this.state,"pullRequest.id"),e).then((e=>{this.setState({updating:!1}),O.default.transitionTo("build.pullRequestView",{id:e.id},{workspace:(0,x.resolveStoreInstance)(S.default).id})})).catch((e=>{this.setState({updating:!1,errorUpdating:e}),E.default.addEventV2({category:"pullrequest",action:"failed_edit",entityType:"pullrequest",entityId:h().get(this.state,"pullRequest.id")}),(0,x.resolveStoreInstance)(_.default).isSocketConnected?pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to save changes"}):pm.toasts.error("You'll be able to edit pull request once you're online.",{title:"You are offline"})}))},this.createPullRequest=()=>{const e={entity:this.props.controller.entityType,fromId:this.props.controller.fromId,toId:this.props.controller.toId,title:this.state.title,description:this.state.description,reviewers:(this.state.reviewers||[]).map((e=>e.id)),identifier:this.props.controller.fromId},t=(0,x.resolveStoreInstance)(I.default).activeEditor;this.setState({creating:!0,errorCreating:null}),E.default.addEventV2({category:"pullrequest",action:"initiate_create",entityType:this.props.controller.entityType,entityId:this.props.controller.fromId}),(0,D.createPullRequest)(e).then((e=>(this.setState({creating:!1}),O.default.transitionTo("build.pullRequestView",{id:e.id},{workspace:(0,x.resolveStoreInstance)(S.default).id})))).then((()=>{G.default.close({id:t},{force:!0})})).catch((e=>{this.setState({creating:!1,errorCreating:e}),E.default.addEventV2({category:"pullrequest",action:"failed_create",entityType:this.props.controller.entityType,entityId:this.props.controller.fromId}),(0,x.resolveStoreInstance)(_.default).isSocketConnected?pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to create pull request"}):pm.toasts.error("You'll be able to create pull request once you're online.",{title:"You are offline"})}))},this.scrollDiffIntoView=e=>{this.diffRef.current&&this.diffRef.current.scrollIntoView(e)},this.onResizeChangesWindow=e=>{e.contentRect.width>=890?this.setState({showNavOnSide:!0}):this.setState({showNavOnSide:!1})},this.isDiffV2=e=>(null==e?void 0:e.version)===H.DiffVersion.V2;let t=!0;this.destinationWorkspace={},"collection"===this.props.controller.entityType&&(t=z.launchDarkly.getFlag(H.ENABLE_DIFF_MERGE_V2_FLAG.key,H.ENABLE_DIFF_MERGE_V2_FLAG.defaultValue)),this.state={pullRequest:{},activeTab:"overview",title:null,reviewers:[],description:"",updating:!1,creating:!1,loadingDiff:this.shouldEnablePullRequestDiffForModel(this.props.controller.entityType),errorLoadingDiff:null,errorLoading:null,errorUpdating:null,errorCreating:null,fetchingReviewers:!0,source:{},destination:{},publicSharing:!1,loading:!0,pullRequestSettings:[],fetchingPullRequestSettings:!1,isOffline:!1,teamSharing:!1,suggestedReviewers:{},openShareModal:!1,showNavOnSide:!0,isDiffV2:t,isDestinationGitLinked:!1,showMoveModal:!1}}componentDidMount(){E.default.addEventV2({category:"pullrequest",action:this.props.controller.prId?"view_edit_form":"view_create_form",label:this.props.controller.origin,entityType:"pullrequest",entityId:this.props.controller.prId,modelType:this.props.controller.entityType}),T.Ampli.pullRequestFormPageViewed((0,T.getAmpliPageViewedProperties)()),this.initiateFetch()}componentDidUpdate(e){const t=this.props.controller.prId?this.state.title:"Create Pull Request";h().invoke(this.props,"controller.setTitle",t),e.controller.toId===this.props.controller.toId&&e.controller.fromId===this.props.controller.fromId||(0,x.resolveStoreInstance)(_.default).isSocketConnected&&this.initiateFetch()}render(){var e;const{prId:t}=this.props.controller,n=(0,x.resolveStoreInstance)(C.default),s={id:n.id,name:n.name,email:n.username_email,username:n.username_email,profilePicUrl:n.profilePicUrl,roles:["user"]},r=(0,x.resolveStoreInstance)(C.default).id,u=h().get((0,x.resolveStoreInstance)(C.default),"team.id"),m={name:h().get(this.state.destination,"name"),uid:h().get(this.state.destination,"uid"),id:h().get(this.state.destination,"data.id"),forkInfo:{id:h().get(this.state.destination,Z[this.props.controller.entityType]),forkLabel:h().get(this.state.destination,"forkLabel")},exists:!!h().get(this.state.destination,"id")},f={name:h().get(this.state.source,"name"),uid:h().get(this.state.source,"uid"),id:h().get(this.state.source,"id"),forkInfo:{id:h().get(this.state.source,Z[this.props.controller.entityType]),forkLabel:h().get(this.state.source,"forkLabel")},exists:!!h().get(this.state.source,"id")},v="Overview";let y=(0,x.resolveStoreInstance)(w.default).values||[];y=h().uniqBy(y.concat(h().get(this.state,"suggestedReviewers.reviewers.suggested",[])),"id");const b=y.length&&y.reduce(((e,t)=>(e[t.id]={id:t.id,name:t.name,email:t.email,username:t.username,profilePicUrl:t.profilePicUrl,roles:Object.values(Object.assign({},t.roles))},e)),{}),E=h().get(this.state,"suggestedReviewers.reviewers.pullRequest",[]);if("object"!=typeof b||u||(b[r]=s),this.state.loading||this.state.loadingDiff||this.state.fetchingReviewers)return o.createElement("div",{className:"pull-request__loading"},o.createElement(M.default,null));if(this.state.isOffline)return o.createElement(j.EmptyState,{className:"pull-request-offline",title:"You are offline",body:"Unable to connect to the servers. Please check your network settings.",srcClass:"pull-request-offline-image",action:o.createElement(P.Button,{type:"primary",size:"small",onClick:this.fetchData},"Retry")});if(this.state.errorLoading){const e=403===this.state.errorLoading.status||403===this.state.errorLoading.code?"You do not have access to perform this action":"Something went wrong",t=this.state.errorLoading.message&&"string"==typeof this.state.errorLoading.message?this.state.errorLoading.message:"There was an error fetching information required to create a pull request";return o.createElement(i.default,{justifyContent:"center",alignItems:"center",height:"100%",grow:"0"},o.createElement(a.default,{title:e,description:t},o.createElement(l.default,null)))}return this.state.isDestinationGitLinked?o.createElement(a.default,{description:"Can't create pull request to a collection that's part of a Git-connected API."},o.createElement(c.default,null)):this.state.existingPullRequestId?o.createElement(a.default,{title:"There is already an open pull request for this fork",description:"At a given time, there can only be 1 open pull request for a fork.",primaryAction:o.createElement("div",{"data-testid":"view-existing-pull-requets-btn"},o.createElement(P.Button,{type:"primary",size:"small",onClick:this.navigateToPullRequest},"View Open Pull Request"))},o.createElement(d.default,null)):o.createElement("div",{className:"pull-request-edit"},o.createElement(Q,{type:"h4",color:"content-color-primary",text:(t?"Edit":"Create")+" Pull Request"}),o.createElement("div",{className:"pull-request-edit__header"},o.createElement(j.SourceDestinationLabel,{destination:m,source:f,className:"pull-request-edit__source-destination-label",modelDisplayName:this.props.controller.entityType,modelType:this.props.controller.entityType})),o.createElement("div",{className:"pull-request-edit__body"},o.createElement(R.Tabs,{className:"pull-request-tabs",type:"primary",defaultActive:v.toString(),activeRef:this.state.activeTab||v.toString(),onChange:this.handleTabChange},o.createElement(R.Tab,{className:"pull-request-tab",refKey:"overview",key:"overview"},o.createElement("span",{className:"pull-request-tab__overview"},"Overview")),this.shouldEnablePullRequestDiffForModel(this.props.controller.entityType)&&o.createElement(R.Tab,{className:"pull-request-tab",refKey:"changes",key:"changes"},o.createElement("span",{className:"pull-request-tab__changes-text"},"Changes"),o.createElement(P.Button,{className:"pull-request-tab__changes-count",size:"small",focusable:!0},this.isDiffV2(this.state.diffManager)?this.state.diffManager.changeCount:null===(e=this.state.diffManager)||void 0===e?void 0:e.allChanges))),"overview"===this.state.activeTab&&o.createElement(A.default,{publicSharing:this.state.publicSharing,teamSharing:this.state.teamSharing,showMoveModal:this.state.showMoveModal,description:this.state.description,loading:this.state.creating||this.state.updating,modifyState:t?"edit":"create",showEditorNote:(this.state.pullRequestSettings||[]).some((e=>"editorApprovalRequired"===e.id&&e.enabled)),reviewers:this.state.reviewers,fetchedReviewers:E,teamId:u,isOffline:!(0,x.resolveStoreInstance)(_.default).isSocketConnected,pullRequestId:t,teamUsers:b,title:this.state.title,onConfirm:this.handleConfirm,onDescriptionChange:this.handleDescriptionChange,onReviewersChange:this.handleReviewersChange,onTitleChange:this.handleTitleChange,onTabClose:this.handleTabClose,onMoveEntity:this.onToggleMoveModal,entityType:this.props.controller.entityType}),"changes"===this.state.activeTab&&this.shouldEnablePullRequestDiffForModel(this.props.controller.entityType)&&o.createElement(B.default,{onResize:this.onResizeChangesWindow,debounceTime:100},(e=>o.createElement("div",{ref:e,className:"pull-request-edit__changes_container"},o.createElement(i.default,{shrink:0,direction:"column",grow:"auto",className:g()("pull-request-edit__changes",{"pull-request-edit__changes--full-width":!this.state.showNavOnSide||this.state.isDiffV2})},o.createElement(L.default,{editPullRequest:!0,baseEntity:m,forkedEntity:f,modifyState:t?"edit":"create",pullRequestId:t,diffManager:this.state.diffManager,loadingDiff:this.state.loadingDiff,hideTitle:!0,isPullChangesMandatory:!1,hideSectionTitle:!0,ref:this.diffRef,entityType:this.props.controller.entityType})),!this.state.isDiffV2&&!h().isEmpty(h().get(this.state.diffManager,"navigation"))&&(this.state.showNavOnSide?o.createElement(p.default,{className:"pull-request-edit__nav",offsetTop:16},o.createElement("div",{className:"pull-request-edit__diff-nav-wrapper"},o.createElement(q.default,{nodes:[h().get(this.state,"diffManager.navigation")],onClick:this.scrollDiffIntoView}))):o.createElement(F.default,{nodes:[h().get(this.state,"diffManager.navigation")],onClick:this.scrollDiffIntoView}))))),this.state.openShareModal&&o.createElement($.default,{isOpen:this.state.openShareModal,controller:{entityId:this.props.controller.fromId,entityType:this.props.controller.entityType,entityName:h().get(this.state.source,"name"),filterWs:(this.state.teamSharing,S=this.state.publicSharing,S?W.VISIBILITY_STATUS.public:W.VISIBILITY_STATUS.team),destinationId:this.props.controller.toId,destinationWorkspace:this.destinationWorkspace,opts:{onPostMove:()=>{this.onSuccessfulSourceEntityMove()}}},close:this.onToggleMoveModal})));var S}};te=K([s.observer],te),t.default=te},"./version-control/pull-request/components/PullRequestHeader/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{PRHeaderSize:function(){return o},default:function(){return m}});var o,s=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),l=n("./apinetwork/common/CopyLinkButton.js"),c=n("./version-control/common/index.js"),d=n("./version-control/constants.js"),u=n("./version-control/pull-request/components/PullRequestActions.js"),p=n("./version-control/pull-request/components/PullRequestHeader/styled.tsx");function m(e){return s.createElement(p.PRHeaderRoot,{size:e.size,isScrolled:e.isScrolled},!e.isScrolled&&s.createElement(p.PRTitleWrapper,null,s.createElement(p.PRTitle,null,s.createElement(r.default,{text:e.title,type:"h4",color:"content-color-primary"}),s.createElement(l.default,{className:"copy-link-btn",entityId:e.pullRequestId,entityType:"pullRequest",size:"small"}),s.createElement(i.default,{padding:{paddingLeft:"spacing-xs"}},s.createElement(a.default,{className:"pull-request__status",status:d.PR_STATUS_STYLE_MAP_AETHER[e.status]||"neutral",text:e.status})))),s.createElement(p.PREntities,null,s.createElement(c.SourceDestinationLabel,{destination:e.destination,source:e.source,modelDisplayName:e.entityType,modelType:e.entityType,className:"pull-request-edit__source-destination-label",sourceInfoUnavailableTooltipMessage:e.status===d.PR_STATES.DECLINED&&e.isArchived&&`The source ${e.entityType} was either deleted or removed from\n             the workspace before the pull request was declined`})),s.createElement(p.PRActions,null,s.createElement(u.default,Object.assign({},e,{hideLabels:e.size===o.MEDIUM}))))}!function(e){e.SMALL="small",e.LARGE="large",e.MEDIUM="medium"}(o||(o={}))},"./version-control/pull-request/components/PullRequestHeader/styled.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{PRActions:function(){return a},PREntities:function(){return i},PRHeaderRoot:function(){return u},PRTitle:function(){return r},PRTitleWrapper:function(){return s}});var o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const s=o.default.div`
  grid-area: title;
`,r=o.default.div`
  margin-bottom: ${({theme:e})=>e["spacing-xs"]};
  margin: 0;

  .copy-link-btn {
    display: none;
    height: ${({theme:e})=>e["size-xs"]};
  }

  &:hover .copy-link-btn {
    display: inline-flex;
  }

  & > * {
    display: inline;
  }
`,i=o.default.div`
  grid-area: entities;
  margin-top: ${({theme:e})=>e["spacing-xs"]};
`,a=o.default.div`
  grid-area: actions;
  justify-self: end;

  .watch {
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }

  .watch .controlled-combo-button__primary-button {
    background-color: ${({theme:e})=>e["background-color-primary"]};

    &:hover {
      background-color: ${({theme:e})=>e["highlight-background-color-primary"]};
    }
  }
`,l=o.css`
  display: flex;

  ${i} {
    flex: auto;
    margin-right: ${({theme:e})=>e["spacing-xxl"]};
    display: flex;
    align-items: center;
  }

  ${a} {
    flex-basis: 400px;
    flex-shrink: 0;
    flex-grow: 0;
  }
`,c=o.css`
  display: grid;
  grid-column-gap: ${({theme:e})=>e["spacing-xxl"]};
  grid-template-columns: auto 400px;
  grid-template-areas:
    'title actions'
    'entities entities';

  ${s} {
    align-items: center;
    align-self: center;
  }
`,d=o.css`
  display: flex;
  flex-direction: column;

  ${s} {
    margin-bottom: ${({theme:e})=>e["spacing-s"]};
    align-items: flex-start;
  }

  ${a} {
    justify-content: flex-start;
    margin-top: ${({theme:e})=>e["spacing-s"]};
  }

  .pull-request-actions {
    justify-content: flex-start;
  }
`,u=(o.css`
  display: flex;
  flex-direction: column;

  ${s} {
    display: none;
  }

  ${a} {
    justify-content: flex-start;
    margin-top: ${({theme:e})=>e["spacing-s"]};
  }

  .pull-request-actions {
    justify-content: flex-start;
  }
`,o.default.div`
  border-bottom: ${({theme:e})=>e["border-width-default"]}
    ${({theme:e})=>e["border-style-solid"]}
    ${({theme:e})=>e["border-color-strong"]};
  margin-right: ${({theme:e})=>e["spacing-s"]};
  padding-left: ${({theme:e})=>e["spacing-l"]};
  padding-bottom: ${({theme:e})=>e["spacing-m"]};
  margin-top: ${({theme:e})=>e["spacing-s"]};

  ${({size:e,isScrolled:t})=>["large","medium"].includes(e)&&!t?c:""}

  ${({size:e,isScrolled:t})=>["large","medium"].includes(e)&&t?l:""}

  ${({size:e})=>"small"===e?d:""}
`)},"./version-control/pull-request/controllers/PullRequestController.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/mobx/lib/mobx.module.js"),s=n("./appsdk/workbench/BaseWorkbenchController.js"),r=n("./version-control/constants.js"),i=n("./js/services/PerformanceTelemetryService/index.js"),a=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};class l extends s.default{constructor(){super(...arguments),this.fromId=""}setFromId(e){this.fromId=e}didCreate({queryParams:e}){const t=this.getRouteParams();this.toId=e&&e.destination,this.fromId=e&&e.source,this.entityType=e&&e.entityType||"collection",this.prId=t.id,this.mode=e&&e.view,this.mode=this.prId?"Edit":"Create",this.origin=e&&e.origin}didActivate(){i.default.startSpan(r.events.PULL_REQUEST_LOAD_TIME),i.default.startSpan(r.events.PULL_REQUEST_DIFF_LOAD_TIME)}didQueryParamsChange(e){this.setFromId(e&&e.source)}setEntityType(e){this.entityType=e}}a([o.observable],l.prototype,"fromId",void 0),a([o.action],l.prototype,"setFromId",null)},"./version-control/pull-request/controllers/PullRequestViewController.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o=n("./node_modules/lodash/lodash.js"),s=n.n(o),r=n("../../node_modules/mobx/lib/mobx.module.js"),i=n("../../packages/version-control/change-management/index.ts"),a=n("./js/stores/SyncStatusStore.js"),l=n("./js/stores/StoreManager.js"),c=n("./growth/foundation/public/amplitude/AmplitudeService.js"),d=n("./collaboration/services/CollaborationNavigationService.js"),u=n("./appsdk/workbench/BaseWorkbenchController.js"),p=n("./collaboration/services/ContextBarCommentService.js"),m=n("./version-control/constants.js"),h=n("./js/services/PerformanceTelemetryService/index.js"),f=n("./js/modules/services/AnalyticsService.js"),g=n("./version-control/pull-request/services/PullRequestService.js"),v=n("./version-control/pull-request/models/PullRequestModel.ts"),y=n("./version-control/pull-request/services/PullRequestDiffService.ts"),b=n("./onboarding/src/common/UTMService.js"),E=n("./onboarding/src/common/LaunchDarkly.js"),C=n("./version-control/diff/constants.ts"),_=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},S=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const w="ESOCKETTIMEDOUT";class I extends u.default{constructor(){super(...arguments),this.isLoadingPullRequest=!1,this.pullRequestLoadingError=null,this.isLoadingPullRequestDiff=!1,this.pullRequestDiffLoadingError=null,this.isLoadingMergeSettings=!1,this.mergeSettingsLoadingError=null,this.pageDataFetchFailedDueToConnectionUnAvailability=!1,this.isCheckingConnection=!0,this.activeSyncMergeStatus=i.MergeStatuses.INACTIVE,this.isDiffV2Enabled=E.launchDarkly.getFlag(C.ENABLE_DIFF_MERGE_V2_FLAG.key,C.ENABLE_DIFF_MERGE_V2_FLAG.defaultValue),this.isAsyncMergeEnabled=E.launchDarkly.getFlag(C.ENABLE_ASYNC_MERGE.key,C.ENABLE_ASYNC_MERGE.defaultValue)&&E.launchDarkly.getFlag(C.ENABLE_DIFF_MERGE_V2_FLAG.key,C.ENABLE_DIFF_MERGE_V2_FLAG.defaultValue),this.isMergeModalOpen=!1,this.setMergeModalOpen=e=>{this.setProperties({isMergeModalOpen:e})},this.handleMergeSettingsUpdateMessage=e=>{var t;const{entityId:n,prSettingsUpdate:o}=e;n===(null===(t=this.pullRequest)||void 0===t?void 0:t.destination.id)&&o&&this.fetchMergeSettings()},this.setProperties=e=>{Object.keys(e).forEach((t=>{(0,r.runInAction)((()=>{this[t]=e[t]}))}))},this.fetchPageData=()=>S(this,void 0,void 0,(function*(){try{this.setProperties({pageDataFetchFailedDueToConnectionUnAvailability:!1,isCheckingConnection:!0}),this.pullRequest&&this.isAsyncMergeEnabled&&this.pullRequest.clearSubscriptions(),yield(0,l.resolveStoreInstance)(a.default).onSyncAvailable({timeout:2e3})}catch(e){return void this.setProperties({pageDataFetchFailedDueToConnectionUnAvailability:!0,isCheckingConnection:!1})}this.setProperties({isCheckingConnection:!1}),yield Promise.all([this.fetchPullRequestAndPermissions(),this.fetchPullRequestDiff(),this.fetchMergeSettings()]),h.default.endSpan(m.events.PULL_REQUEST_LOAD_TIME)})),this.fetchMergeSettings=()=>S(this,void 0,void 0,(function*(){try{this.setProperties({isLoadingMergeSettings:!0,mergeSettingsLoadingError:null});const e=yield(0,g.fetchMergeStrategies)(this.prId);this.pullRequest&&this.pullRequest.setMergeSettings(e),this._mergeSettings=e}catch(e){this.setProperties({mergeSettingsLoadingError:e})}finally{this.setProperties({isLoadingMergeSettings:!1})}})),this.mergePullRequest=e=>S(this,void 0,void 0,(function*(){var t,n,o;if(!this.pullRequest)return;let r;this.setProperties({activeSyncMergeStatus:i.MergeStatuses.IN_PROGRESS}),h.default.startSpan(m.events.PULL_REQUEST_MERGE_TIME),c.Ampli.pullRequestActionsMergeConfirmClicked(Object.assign({merge_strategy:e},(0,c.getAmpliCTAProperties)({ctaType:"button",text:"Merge Confirm"}))),"updateSourceWithDestination"===e?r="initiate_merge_changes_update":"deleteSource"===e&&(r="initiate_merge_changes_delete"),f.default.addEventV2({category:null===(t=this.pullRequest)||void 0===t?void 0:t.entity,action:r,label:"pr_view",entityType:null===(n=this.pullRequest)||void 0===n?void 0:n.entity,entityId:null===(o=this.pullRequest)||void 0===o?void 0:o.fromId}),this.isAsyncMergeEnabled?(this.setMergeModalOpen(!1),this.pullRequest.mergeAsync(e).catch((e=>{var t,n,o;f.default.addEventV2({category:null===(t=this.pullRequest)||void 0===t?void 0:t.entity,action:"failed_merge_changes",label:"pr_view",entityType:null===(n=this.pullRequest)||void 0===n?void 0:n.entity,entityId:null===(o=this.pullRequest)||void 0===o?void 0:o.fromId}),(0,l.resolveStoreInstance)(a.default).isSocketConnected?pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to merge pull request"}):pm.toasts.error("You'll be able to merge pull request once you're online.",{title:"You are offline"})}))):this.pullRequest.merge(e,this.isDiffV2Enabled).then((e=>{var t,n,o,r;s().get(e,"error.details")===w&&(toast({title:"Merging is in progress",status:"info",description:"Pull Request is being merged in the background. Please check again later to view merged changes.",duration:5e3}),f.default.addEventV2({category:"collection",action:"pr_merge_socket_timeout",label:"pr_view",entityType:"collection",entityId:null===(t=this.pullRequest)||void 0===t?void 0:t.fromId})),f.default.addEventV2({category:null===(n=this.pullRequest)||void 0===n?void 0:n.entity,action:"successful_merge_changes",label:"pr_view",entityType:null===(o=this.pullRequest)||void 0===o?void 0:o.entity,entityId:null===(r=this.pullRequest)||void 0===r?void 0:r.fromId}),this.setMergeModalOpen(!1),pm.toasts.success("Changes merged",{noIcon:!0})})).catch((e=>{var t,n,o,r,i;s().get(e,"details")===w?(toast({title:"Merging is in progress",status:"info",description:"Pull Request is being merged in the background. Please check again later to view merged changes.",duration:5e3}),f.default.addEventV2({category:"collection",action:"pr_merge_socket_timeout",label:"pr_view",entityType:null===(t=this.pullRequest)||void 0===t?void 0:t.entity,entityId:null===(n=this.pullRequest)||void 0===n?void 0:n.fromId}),this.setMergeModalOpen(!1)):(f.default.addEventV2({category:null===(o=this.pullRequest)||void 0===o?void 0:o.entity,action:"failed_merge_changes",label:"pr_view",entityType:null===(r=this.pullRequest)||void 0===r?void 0:r.entity,entityId:null===(i=this.pullRequest)||void 0===i?void 0:i.fromId}),(0,l.resolveStoreInstance)(a.default).isSocketConnected?pm.toasts.error(e.message,{noIcon:!0,title:e.title||"Unable to merge pull request"}):pm.toasts.error("You'll be able to merge pull request once you're online.",{title:"You are offline"}))})).finally((()=>{h.default.endSpan(m.events.PULL_REQUEST_MERGE_TIME),this.setProperties({activeSyncMergeStatus:i.MergeStatuses.INACTIVE})}))}))}get activeMergeStatus(){var e;return this.isAsyncMergeEnabled?(null===(e=this.pullRequest)||void 0===e?void 0:e.activeMergeStatus)||i.MergeStatuses.INACTIVE:this.activeSyncMergeStatus}get mergeError(){var e;return null===(e=this.pullRequest)||void 0===e?void 0:e.asyncMergeError}get isConnectionAvailable(){return(0,l.resolveStoreInstance)(a.default).isSocketConnected}get isLoadingRenderBlockingData(){var e;return!(null===(e=this.pullRequest)||void 0===e?void 0:e.mergeSettings)&&this.isLoadingMergeSettings||this.isLoadingPullRequest||this.isCheckingConnection}didCreate({queryParams:e,routeParams:t}){const n=(0,b.getUTMParamsFromURL)(e);this.prId=t.id,this.origin=e&&e.origin,f.default.addEventV2(Object.assign({category:"pull-request",action:"view",entityId:this.prId},n)),p.default.getComments({model:"pullRequest",modelId:this.prId}),this.handleCommentParamChange(e),this.unSubscribeFromMergeSettingsUpdatesChannel=pm.eventBus.channel("manage-roles-updates").subscribe(this.handleMergeSettingsUpdateMessage),this.fetchPageData(),this.disposePageDataFetchReaction=(0,r.reaction)((()=>this.isConnectionAvailable),(()=>{!this.pageDataFetchFailedDueToConnectionUnAvailability||this.pullRequest||this.isLoadingRenderBlockingData||this.fetchPageData()}),{fireImmediately:!0})}didActivate(){h.default.startSpan(m.events.PULL_REQUEST_LOAD_TIME),h.default.startSpan(m.events.PULL_REQUEST_DIFF_LOAD_TIME)}didQueryParamsChange(e){this.handleCommentParamChange(e)}beforeDestroy(){this.disposePageDataFetchReaction&&this.disposePageDataFetchReaction(),this.pullRequest&&this.pullRequest.clearSubscriptions()}openComment(e){d.default.handleOpenComment(this.prId,e)}handleCommentParamChange(e){const t=s().get(e,"comment");t&&this.activeCommentId!==t&&this.openComment(t),this.activeCommentId=t}fetchPullRequestAndPermissions(){return S(this,void 0,void 0,(function*(){yield this.fetchPullRequest(),this.pullRequest&&this.pullRequest.fetchPermissionsOnDestination()}))}fetchPullRequest(){return S(this,void 0,void 0,(function*(){try{this.setProperties({isLoadingPullRequest:!0,pullRequestLoadingError:null});const e=yield v.default.get(this.prId,this.isAsyncMergeEnabled);this.setProperties({pullRequest:e}),this._pullRequestDiffManager&&this.pullRequest.setDiffManager(this._pullRequestDiffManager),this._mergeSettings&&this.pullRequest.setMergeSettings(this._mergeSettings),s().invoke(this,"setTitle",null==e?void 0:e.title)}catch(e){this.setProperties({pullRequestLoadingError:e}),f.default.addEventV2({category:"pullrequest",action:"failed_view",entityType:"pullrequest",entityId:this.prId})}finally{this.setProperties({isLoadingPullRequest:!1})}}))}fetchPullRequestDiff(){return S(this,void 0,void 0,(function*(){try{this.setProperties({isLoadingPullRequestDiff:!0,pullRequestDiffLoadingError:null});const e=yield(0,y.getPullRequestDiffManager)(this.prId);this.pullRequest&&e&&this.pullRequest.setDiffManager(e),this._pullRequestDiffManager=e,h.default.endSpan(m.events.PULL_REQUEST_DIFF_LOAD_TIME)}catch(e){this.setProperties({pullRequestDiffLoadingError:e})}finally{this.setProperties({isLoadingPullRequestDiff:!1})}}))}}_([r.observable],I.prototype,"pullRequest",void 0),_([r.observable],I.prototype,"isLoadingPullRequest",void 0),_([r.observable],I.prototype,"pullRequestLoadingError",void 0),_([r.observable],I.prototype,"isLoadingPullRequestDiff",void 0),_([r.observable],I.prototype,"pullRequestDiffLoadingError",void 0),_([r.observable],I.prototype,"isLoadingMergeSettings",void 0),_([r.observable],I.prototype,"mergeSettingsLoadingError",void 0),_([r.observable],I.prototype,"pageDataFetchFailedDueToConnectionUnAvailability",void 0),_([r.observable],I.prototype,"isCheckingConnection",void 0),_([r.observable],I.prototype,"activeSyncMergeStatus",void 0),_([r.computed],I.prototype,"activeMergeStatus",null),_([r.computed],I.prototype,"mergeError",null),_([r.observable],I.prototype,"isMergeModalOpen",void 0),_([r.computed],I.prototype,"isConnectionAvailable",null),_([r.computed],I.prototype,"isLoadingRenderBlockingData",null)},"./version-control/pull-request/models/PullRequestModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n("../../node_modules/mobx/lib/mobx.module.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("../../packages/version-control/change-management/index.ts"),a=n("./js/modules/services/AnalyticsService.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/SyncStatusStore.js"),d=n("./version-control/pull-request/types.ts"),u=n("./version-control/pull-request/services/PullRequestService.js"),p=n("./version-control/pull-request/config/index.ts"),m=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},h=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const f=(0,i.getLogger)("pull-request");class g{constructor(e){this.activeMergeStatus=i.MergeStatuses.INACTIVE,this.setProperties=e=>{Object.keys(e).forEach((t=>{(0,o.runInAction)((()=>{this[t]=e[t]}))}))},this.subscribeToMergeEvents=()=>{this.realtimePRMergeUpdatesSubscription=(0,i.getMergeEvents)({sourceUID:this.fromId,destinationUID:this.toId,entityType:this.entity}).subscribe((e=>{"merge"===r().get(e,"meta.model")&&"update"===r().get(e,"meta.action")&&this.processMergeUpdate(e.data)}),(e=>{throw f.logError("PullRequestModel~subscribeRealtimeMergeEvents",e,{errorName:"RealtimePRMergeUpdatesSubscriptionError",sourceUID:this.fromId,destinationUID:this.toId,entityType:this.entity}),e}),(()=>{f.logError("PullRequestModel~subscribeRealtimeMergeEvents",new Error("subscription completed"),{errorName:"RealtimePRMergeUpdatesSubscriptionCompleted",sourceUID:this.fromId,destinationUID:this.toId,entityType:this.entity})}))},this.hydratePullRequestDetails(e)}static get(e,t){return h(this,void 0,void 0,(function*(){let n;const o=yield(0,u.fetchPullRequest)(e,!0);if(o)return[d.PullRequestStatuses.MERGED,d.PullRequestStatuses.DECLINED].includes(o.status)&&(o.activeMergeStatus=i.MergeStatuses.INACTIVE),n=new g(o),t&&(yield n.subscribeToMergeEvents(),n.reconnectToMergeEventsOnConnectionChange()),n}))}setDiffManager(e){this.diffManager=e}setMergeSettings(e){this.mergeSettings=e}hydratePullRequestDetails(e){this.setProperties(e)}getDetails(){return(0,o.toJS)({archived:this.archived,createdAt:this.createdAt,createdBy:this.createdBy,updatedAt:this.updatedAt,updatedBy:this.updatedBy,comment:this.comment,description:this.description,title:this.title,entity:this.entity,toId:this.toId,fromId:this.fromId,source:this.source,destination:this.destination,status:this.status,id:this.id,reviewers:this.reviewers,activeMergeStatus:this.activeMergeStatus})}fetchPermissionsOnDestination(){return h(this,void 0,void 0,(function*(){if(this.destination){const[e,t]=yield Promise.all([(0,u.fetchModelPermissions)(this.destination.model,this.destination.id,r().get(p.default,[this.destination.model,"permissions","viewModel"])),(0,u.fetchModelPermissions)(this.destination.model,this.destination.id,r().get(p.default,[this.destination.model,"permissions","editModel"]))]),n={view:{users:r().filter(e,(e=>"user"===e.entityType))||[],teams:r().filter(e,(e=>"team"===e.entityType))||[],groups:r().filter(e,(e=>"group"===e.entityType))||[]},edit:{users:r().filter(t,(e=>"user"===e.entityType))||[],teams:r().filter(t,(e=>"team"===e.entityType))||[],groups:r().filter(t,(e=>"group"===e.entityType))||[]}};return this.setProperties({destinationModelPermission:n}),n}}))}merge(e,t){return h(this,void 0,void 0,(function*(){const n=yield(0,u.mergePullRequest)(this.id,e,{entityType:this.entity,destinationId:this.toId},t);this.setProperties({status:n.status,updatedBy:n.updatedBy,updatedAt:n.updatedAt}),"deleteSource"===e&&(0,o.runInAction)((()=>{this.source.exists=!1}));const s=this.reviewers.findIndex((e=>`${e.id}`==`${r().get(n,"updatedBy.id")}`));return s>=0&&(0,o.runInAction)((()=>{this.reviewers[s].status=d.PullRequestStatuses.MERGED})),n}))}mergeAsync(e){return h(this,void 0,void 0,(function*(){this.setProperties({activeMergeStatus:i.MergeStatuses.IN_PROGRESS});try{const t=yield(0,u.mergePullRequestAsync)(this.id,e,{entityType:this.entity,destinationId:this.toId});return this.asyncMergeWorkflowId=r().get(t,"body.workflowId"),f.logInfo(`PR async merge started with workflow id: ${this.asyncMergeWorkflowId}`),t}catch(e){throw this.setProperties({activeMergeStatus:i.MergeStatuses.INACTIVE}),e}}))}processMergeUpdate(e){const t=r().get(e,"mergeDetails.destinationUID"),n=r().get(e,"mergeDetails.sourceUID"),s=r().get(e,"mergeDetails.entityType"),l=r().get(e,"mergeDetails.mergeInitiatedBy"),c=r().get(e,"mergeDetails.mergedAt")||(new Date).toISOString(),u=r().get(e,"mergeDetails.mergeStrategy")||"default",p=r().get(e,"status"),m=Object.values(i.MergeStatuses),h=r().get(e,"mergeDetails.isPullRequestMerge",!0),g=r().get(e,"mergeDetails.error");if(t===this.toId&&n===this.fromId&&s===this.entity&&h)if(m.includes(p)){if(this.setProperties({activeMergeStatus:p,asyncMergeError:g}),p===i.MergeStatuses.SUCCESSFUL){a.default.addEventV2({category:this.entity,action:"successful_merge_changes",label:"pr_view",entityType:this.entity,entityId:this.toId}),this.setProperties({status:d.PullRequestStatuses.MERGED,updatedBy:l,updatedAt:c}),"deleteSource"===u&&(0,o.runInAction)((()=>{this.source.exists=!1}));const e=this.reviewers.findIndex((e=>`${e.id}`==`${l}`));e>=0&&(0,o.runInAction)((()=>{this.reviewers[e].status=d.PullRequestStatuses.MERGED})),this.realtimePRMergeUpdatesSubscription&&this.realtimePRMergeUpdatesSubscription.unsubscribe(),this.mergeUpdatesReconnectionReactionDispose&&this.mergeUpdatesReconnectionReactionDispose()}p===i.MergeStatuses.FAILED&&(f.logError("PullRequestModel~processMergeUpdate",g,{errorName:"AsyncPRMergeFailed",destinationUID:this.toId,sourceUID:this.fromId,entityType:this.entity,workflowId:this.asyncMergeWorkflowId}),a.default.addEventV2({category:this.entity,action:"failed_merge_changes",label:"pr_view",entityType:this.entity,entityId:this.toId}))}else f.logError("PullRequest~processMergeUpdate",new Error("invalid merge udpate status"),{errorName:"InvalidMergeUpdateStatusReceived",receivedUpdateStatus:p,destinationUID:this.toId,sourceUID:this.fromId,entityType:this.entity})}reconnectToMergeEventsOnConnectionChange(){const e=(0,l.resolveStoreInstance)(c.default);this.mergeUpdatesReconnectionReactionDispose=(0,o.reaction)((()=>e.isSocketConnected),(e=>{e&&this.subscribeToMergeEvents()}))}clearSubscriptions(){this.realtimePRMergeUpdatesSubscription&&this.realtimePRMergeUpdatesSubscription.unsubscribe(),this.mergeUpdatesReconnectionReactionDispose&&this.mergeUpdatesReconnectionReactionDispose()}}m([o.observable],g.prototype,"description",void 0),m([o.observable],g.prototype,"title",void 0),m([o.observable],g.prototype,"reviewers",void 0),m([o.observable],g.prototype,"updatedAt",void 0),m([o.observable],g.prototype,"updatedBy",void 0),m([o.observable],g.prototype,"comment",void 0),m([o.observable],g.prototype,"status",void 0),m([o.observable],g.prototype,"source",void 0),m([o.observable],g.prototype,"destinationModelPermission",void 0),m([o.observable],g.prototype,"diffManager",void 0),m([o.observable],g.prototype,"mergeSettings",void 0),m([o.observable],g.prototype,"asyncMergeError",void 0),m([o.observable],g.prototype,"activeMergeStatus",void 0),m([o.action],g.prototype,"setDiffManager",null),m([o.action],g.prototype,"setMergeSettings",null)},"./version-control/pull-request/services/PullRequestDiffService.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{getPullRequestDiffManager:function(){return d}});var o=n("./node_modules/lodash/lodash.js"),s=n("../../packages/version-control/change-management/index.ts"),r=n("./js/modules/services/RemoteSyncRequestService.js"),i=n("./version-control/utils/diff.js"),a=n("./onboarding/src/common/LaunchDarkly.js"),l=n("./version-control/diff/constants.ts"),c=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};function d(e){return c(this,void 0,void 0,(function*(){const t=yield function(e){const t=a.launchDarkly.getFlag(l.ENABLE_DIFF_MERGE_V2_FLAG.key,l.ENABLE_DIFF_MERGE_V2_FLAG.defaultValue);return r.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"get",path:`/v1/pull-requests/${e}/diff?navigation=true&diffVersion=${t?"2.0.0":"1.0.0"}`}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}(e);if("2.0.0"===t.version)return new s.DiffManager(t.diff);const n=(0,i.processServerDiff)({collectionDiff:{diff:(0,o.get)(t,"diff.diff"),conflicts:(0,o.get)(t,"diff.conflicts"),navigation:(0,o.get)(t,"diff.navigation"),outOfSync:(0,o.get)(t,"diff.metaInfo.outOfSync")}});return Object.assign({version:l.DiffVersion.V1},n)}))}},"./version-control/pull-request/types.ts":function(e,t,n){"use strict";var o;n.r(t),n.d(t,{PullRequestStatuses:function(){return o}}),function(e){e.OPEN="open",e.APPROVED="approved",e.MERGED="merged",e.DECLINED="declined"}(o||(o={}))},"./version-control/pull-request/utils/filterOpenPullRequest.ts":function(e,t,n){"use strict";n.r(t);t.default=function(e){return"open"===e.status||"approved"===e.status}}}]);