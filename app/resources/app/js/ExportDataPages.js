"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[30],{"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoExportRequest.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var a=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function r(){return a.createElement(o.default,{name:"illustration-no-export-request"})}},"./billing/utils/date.js":function(e,t,n){n.r(t),n.d(t,{format:function(){return o},getRenewalDate:function(){return s},isDateAfterToday:function(){return r}});var a=n("./billing/utils/string.js");function o(e,t,n={}){const r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),l=n.padDate?(0,a.padStart)(s.getDate().toString(),2,"0"):s.getDate(),i=s.getMonth(),u=s.getFullYear(),d=s.getHours()%12||12,c=(0,a.padStart)(s.getMinutes().toString(),2,"0"),m=s.getHours()<12?"AM":"PM",p=t?`${d}:${c} ${m}, ${l} ${r[i]} ${u}`:`${l} ${r[i]}, ${u}`;return"NaN"===l.toString()?"string"==typeof e&&e.indexOf(" ")>-1?o(e.replace(" ","T"),t):"":p}function r(e){return new Date(e).valueOf()>(new Date).valueOf()}function s(){return o(new Date((new Date).setFullYear((new Date).getFullYear()+1)))}},"./billing/utils/string.js":function(e,t,n){function a(e,t,n,a){return(a?t+" ":"")+(1!==t&&"1"!==t?e+n:e)}function o(e){return/^[^@]+@[^.]+\..+$/.test(e)}function r(e,t,n){if("string"==typeof e&&e.length<t){let a="",o=t-e.length;for(;a.length<o;)a+=n;return a+e}return e}n.r(t),n.d(t,{isEmail:function(){return o},padStart:function(){return r},pluralize:function(){return a}})},"./runtime-repl/export-data/pages/ExportData.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("./runtime-repl/export-data/services/ExportAPIService.js"),p=n("./node_modules/lodash/lodash.js"),f=n.n(p),h=n("./runtime-repl/export-data/pages/ExportTable.js");const g=(0,c.default)(o.default)`
  padding: 2rem;
  height: 95%;
`,x=(0,c.default)(o.default)`
  margin-top: 1rem;
  margin-bottom: 2rem !important;
`,y=(0,c.default)(r.default)`
  max-width: inherit;
  flex-grow: 1;
`;t.default=()=>{const{addToast:e}=(0,s.default)(),[t,n]=(0,a.useState)(!1),[c,p]=(0,a.useState)(!0),[E,w]=(0,a.useState)(!0),[b,v]=(0,a.useState)(!0),[j,S]=(0,a.useState)([]),[k,_]=(0,a.useState)(!1),[C,D]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),q=async()=>{p(!0),_(!1),await(0,m.fetchExports)().then((e=>{S(f().get(e,"body.archive"))})).catch((e=>{_(!0)})).finally((()=>{p(!1)}))};(0,a.useEffect)((()=>{q(),R(!1)}),[T]);return a.createElement(g,{direction:"column"},a.createElement(l.default,{type:"h1",text:"Export Data"}),a.createElement(x,{justifyContent:"space-around",alignItems:"center"},a.createElement(y,{type:"lead",typographyStyle:{fontSize:"text-size-l",lineHeight:"line-height-l",fontWeight:"text-weight-regular"}},"Take offline backups of your collections and environments as JSON files. You can import them into Postman workspaces."),a.createElement(i.default,{type:"primary",size:"medium",text:"Export Data",onClick:()=>n(!0),minWidth:"150px"})),a.createElement(h.default,{isRecordsLoading:c,data:j,isRetry:k,onRefresh:()=>R(!0)}),a.createElement(u.Modal,{isOpen:t,size:"small",onClose:()=>n(!1)},a.createElement(u.ModalHeader,{heading:"Request data export"}),a.createElement(u.ModalContent,null,a.createElement(r.default,{color:"content-color-secondary"},"Select the data you want to export. Youâ€˜ll be notified via email once the data is ready to download."),a.createElement(o.default,{direction:"column",gap:"spacing-s"},a.createElement(d.default,{isChecked:E,label:"Collection",onChange:()=>{w(!E)}}),a.createElement(d.default,{isChecked:b,label:"Environment",onChange:()=>{v(!b)}}))),a.createElement(u.ModalFooter,null,a.createElement(o.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},a.createElement(i.default,{type:"secondary",text:"Cancel",onClick:()=>n(!1)}),a.createElement(i.default,{type:"primary",text:"Request Data Export",onClick:()=>(async()=>{const t=[];let a=!1;E&&t.push("collection"),b&&t.push("environment"),D(!0),await(0,m.exportData)({elements:t}).then((t=>{e({title:"Data export requested",status:"success",description:"You will be notified via email when the export is ready for download."}),a=!0})).catch((t=>{e({title:"Something went wrong",status:"error",description:f().get(t,"error.message","There was an error while requesting the export. Please try again.")})})).finally((()=>{D(!1),n(!1),a&&q()}))})(),isDisabled:!E&&!b,isLoading:C})))))}},"./runtime-repl/export-data/pages/ExportTable.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoExportRequest.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),u=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./runtime-repl/export-data/services/ExportAPIService.js"),c=n("./billing/utils/date.js"),m=n("./node_modules/lodash/lodash.js"),p=n.n(m);const f=(0,u.default)(o.default)`
  margin-top: 1rem;
  margin-bottom: 1rem !important;
`,h=u.default.div`
  overflow: auto;
`;t.default=({isRecordsLoading:e,data:t,isRetry:n,onRefresh:o})=>{const[u,m]=(0,a.useState)(0),g=()=>a.createElement(r.default,{title:"No exports requested",description:"Requested exports appear here."},a.createElement(s.default,null)),x=()=>a.createElement(r.default,{title:"Something went wrong",description:"There was an error while requesting the export. Please try again.",secondaryAction:a.createElement(l.default,{type:"outline",text:"Refresh",onClick:()=>o()})},a.createElement(s.default,null)),y=[{Header:"Request date",accessor:"createdAt",Cell:({value:e})=>c.format(e)},{Header:"File size",accessor:"size",align:"right",Cell:({value:e})=>e?(e=>{const t=["Bytes","kB","MB","GB","TB"];if(!e)return"0";const n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return 0===n?`${e} ${t[n]}`:`${(e/Math.pow(1024,n)).toFixed(2)} ${t[n]}`})(e):"-"},{Header:"Request ID",accessor:"checksum",align:"right",cellWidth:"300px",Cell:({value:e})=>e||"-"},{Header:"Expiry date",accessor:"expiresOn",align:"right",Cell:({value:e})=>e?c.format(e,!0):"-"},{Header:"Status",accessor:e=>p().pick(e,["expired","completed","stage","id","status"]),Cell:({value:e})=>e.expired?"Expired":"completed"===e.status?a.createElement(l.default,{type:"primary",size:"small",text:"Download",icon:"icon-action-download-stroke",onClick:()=>(async e=>{m(e),await(0,d.downloadExportData)(e).then((e=>{const t=p().get(e,"body.archive.link");window.location.href=t})),m(0)})(e.id),isDisabled:e.id===u}):e.stage||e.status,align:"right"}];return a.createElement(a.Fragment,null,a.createElement(f,{type:"h4",text:"Request history"}),a.createElement(h,null,a.createElement(i.default,{data:t,columns:y,blankState:{isEmpty:0===t.length&&!e,component:n?a.createElement(x,null):a.createElement(g,null)},loader:{isLoading:e,skeletonRowCount:4}})))}},"./runtime-repl/export-data/services/ExportAPIService.js":function(e,t,n){n.r(t),n.d(t,{downloadExportData:function(){return s},exportData:function(){return r},fetchExports:function(){return o}});var a=n("./runtime-repl/export-data/services/HTTPGatewayService.js");function o(){return a.default.request({data:{service:"export",method:"GET",path:"/v1/archive"}})}function r(e){return a.default.request({data:{service:"export",method:"POST",path:"/v1/archive",body:e}})}function s(e){return a.default.request({data:{service:"export",method:"GET",path:`/v1/archive/${e}/link`}})}},"./runtime-repl/export-data/services/HTTPGatewayService.js":function(e,t,n){n.r(t);var a=n("./js/utils/PostmanGatewayService.js");const o={async request(e){const t=e.url||"/ws/proxy",n=e.method||"POST",o=await a.default.request(t,{method:n,body:JSON.stringify(e.data),headers:{"Content-Type":"application/json"}},{returnRawResponse:!0});return o.ok?{body:await o.json(),status:o.status}:Promise.reject(await o.json())}};t.default=o}}]);