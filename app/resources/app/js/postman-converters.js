"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[138],{"./js/modules/export/index.js":function(e,r,o){o.r(r);var t=o("./js/modules/export/export-single.js");r.default={exportSingle:t.default}},"./js/services/conversion/checkImportEnvironmentFromUrl.js":function(e,r,o){o.r(r),o.d(r,{default:function(){return d}});var t=o("./js/utils/util.js"),n=o("./js/utils/PostmanUrlUtils.js"),s=o("./js/stores/StoreManager.js"),i=o("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),l=o("./runtime-repl/environment/_api/EnvironmentInterfaceV2.ts"),a=o("./node_modules/lodash/lodash.js"),c=o("../../node_modules/console-browserify/index.js");function d(e){e=decodeURIComponent(e);var r,o=n.default.getHashVars(e);a.each(o,(function(e){var o=decodeURIComponent(e.key);if(0==o.indexOf("env[")&&"]"==o[o.length-1])try{var n="";try{n=atob(e.value)}catch(r){if(!a.endsWith(e.value,'"'))throw r;e.value=e.value.substring(0,e.value.length-1),n=atob(e.value)}var d=o.substring(4,o.length-1),u=JSON.parse(n),m=[];if(u instanceof Array){var p=u.length;for(r=0;r<p;r++)m.push(a.assign({type:"text",enabled:!0},u[r]))}else a.forOwn(u,(function(e,r){m.push({key:r,value:e,type:"text",enabled:!0})}));let c={id:t.default.guid(),name:d,values:m};(0,l.createEnvironment)(c,(0,s.resolveStoreInstance)(i.default).id).then((()=>pm.toasts.success("Environment "+d+" imported"))).catch((e=>pm.logger.error("Error in creating evironment",e)))}catch(e){c.log("Could not import environment")}}))}},"./js/services/conversion/importCollectionAndEnvironment.js":function(e,r,o){o.r(r),o.d(r,{default:function(){return a}});var t=o("./js/services/conversion/index.js"),n=o("./js/modules/services/AnalyticsService.js"),s=o("./js/utils/util.js"),i=o("./js/utils/PostmanUrlUtils.js"),l=o("./node_modules/lodash/lodash.js");function a(e){t.default.importFileFromUrl(e,((r,o)=>{if(r)return pm.logger.error(r);t.default.checkImportEnvironmentFromUrl(e);var a=i.default.getUrlVars(e),c=l.find(a,(function(e){return"referrer"===e.key})),d=c?decodeURIComponent(c.value):"";n.default.addEvent("collection","create","run_button",null,{referrer:d,collection_id:o.id,collection_link_id:s.default.getCollectionLinkId(e)})}))}},"./js/services/conversion/importFileFromUrl.js":function(e,r,o){o.r(r),o.d(r,{default:function(){return c},parseUrlData:function(){return d}});var t=o("./node_modules/lodash/lodash.js"),n=o.n(t),s=o("./js/controllers/Importer.js"),i=(o("./js/utils/util.js"),o("./js/utils/HttpService.js")),l=o("./js/modules/services/RemoteSyncRequestService.js"),a=o("../../node_modules/console-browserify/index.js");function c(e,r){i.default.request(e).then((({body:o})=>{try{s.default.importData(o,{origin:"import/link",link:e}).then((()=>{n().isFunction(r)&&r(null,o)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),n().isFunction(r)&&r("format not recognized")):(pm.mediator.trigger("failedCollectionImport","Could not import: "+e),n().isFunction(r)&&r("Could not import: "+e))}})).catch((({error:e})=>{a.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","Error response received from URL. Check the console for more."),n().isFunction(r)&&r("Error response received from URL. Check the console for more.")}))}function d(e,r=!0){let o=new URL(e),t="localhost"===o.hostname||"127.0.0.1"===o.hostname;return"browser"!==window.SDK_PLATFORM&&"http:"!==o.protocol||t?i.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),r&&pm.toasts.error("Error while fetching data from link."),null))):l.default.request("/ws/proxy",{method:"post",data:{path:"/api/v1/download",service:"importer",method:"post",body:{url:e}}}).then((({body:e})=>e.data)).catch((e=>{let o=n().get(e,"error.message")||"Error while fetching data from link.";return pm.logger.warn("Error while parsing url data: ",e),r&&pm.toasts.error(o),null}))}},"./js/services/conversion/importFiles.js":function(e,r,o){o.r(r),o.d(r,{default:function(){return i}});o("./node_modules/lodash/lodash.js");var t=o("./js/controllers/Importer.js"),n=o("./node_modules/async/dist/async.js"),s=o.n(n);function i(e,r,o){s().eachSeries(e,((n,s)=>{let i=new FileReader;i.onload=function(n){var i=n.currentTarget.result;if("importByFileContainer"===r&&o&&1===e.length)return o(i,{origin:"import/file"});t.default.importData(i,{origin:"import/file"},s)},i.readAsText(n)}))}},"./js/services/conversion/importFolder.js":function(e,r,o){o.r(r),o.d(r,{default:function(){return u},determineDataFormats:function(){return m}});var t=o("./node_modules/lodash/lodash.js"),n=o.n(t),s=o("./js/controllers/Importer.js"),i=o("./js/modules/services/AnalyticsService.js"),l=o("./node_modules/async/dist/async.js"),a=o.n(l),c=o("./js/services/conversion/formats/index.js"),d=o("../../node_modules/console-browserify/index.js");async function u(e,r,o,t){var l,c=n().zipObject(n().map(e,"fileName"),n().map(e,"content")),u=n().map(e,(e=>n().pick(e,"fileName"))),p={},f=[];if(l="browser"===window.SDK_PLATFORM?await m(e):await m(u))try{var v;v="browser"===window.SDK_PLATFORM?await l.convertFolder(e,t):await l.convertFolder(u,t),i.default.addEventV2({category:"collection",action:"create",label:l.id}),a().each(v,((e,r)=>{s.default.importData(e.data,{origin:"import/folder"},r)}))}catch(e){pm.toasts.error(`Error while importing ${l.name}: ${e.message}`),pm.mediator.trigger("failedCollectionImport",`Error importing ${l.name} API: ${e.message}`)}else a().eachOfSeries(c,((e,r,o)=>{s.default.importData(e,{origin:"import/folder"},((e,t)=>(n().isEmpty(n().get(t,"format.id"))?f.push(r):p[r]=t,o())))}),(()=>{n().isEmpty(p)?pm.toasts.error("Error while importing: Could not determine format"):f.length>0&&(pm.toasts.warn("Warning while importing: Some of files could not be imported. Check Developer Tools to get more info."),d.log("failedImport: Here are the files that were not imported ",f))}))}async function m(e,r){var o=n().chain(c.default).filter(["multiFileSupport",!0]).value();for(let r of o)try{if(await r.validateFolder(e))return r}catch(e){}}},"./js/services/conversion/index.js":function(e,r,o){o.r(r);var t=o("./js/services/conversion/checkImportEnvironmentFromUrl.js"),n=o("./js/services/conversion/importCollectionAndEnvironment.js"),s=o("./js/services/conversion/convertData.js"),i=o("./js/services/conversion/importFileFromUrl.js"),l=o("./js/services/conversion/importFiles.js"),a=o("./js/services/conversion/importFolder.js"),c=o("./js/services/conversion/saveEntity.js"),d=o("./js/services/conversion/importers/index.js"),u=o("./node_modules/async/dist/async.js"),m=o.n(u),p=o("./runtime-repl/runner/RunnerHelper.js"),f=o("./js/services/UIEventService.js"),v=o("./onboarding/src/common/components/InviteMembersNudge/InviteMembersNudgeConstants.js"),j=o("./node_modules/lodash/lodash.js");function h(e,r){e?e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("Failed to import collection "+r.name,{dedupeId:"failed-collection-import"}):(pm.toasts.success("Collection "+r.name+" imported"),setTimeout((()=>{f.default.publish(v.OPEN_INVITE_MEMBERS_NUDGE_EVENT,{exporter:r.exporter,name:r.name,exportedCollectionId:r.originalCollectionId})}),3e3))}r.default={checkImportEnvironmentFromUrl:t.default,importCollectionAndEnvironment:n.default,importData:async function(e,r,o){if(j.isEmpty(e))return j.isFunction(o)&&o();m().series([o=>{d.default.importCollections(e.collections,r,h,(e=>{o(null,e)}))},o=>{d.default.importGlobals(e.globals,j.pick(r,["activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{d.default.importHeaderPresets(e.headerPresets,j.pick(r,["currentUserID","activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{d.default.importEnvironments(e.environments,j.pick(r,["currentUserID","silentToasts","activeWorkspace"]),(e=>{o(null,e)}))},r=>{d.default.importRequests(e.requests,(e=>{r(null,e)}))},o=>{d.default.importCollectionRuns(e.runsInfo,e.events,r,p.handleCollectionRunImportStatus,(e=>{o(null,e)}))}],((e,r)=>{let t={};j.forEach(j.compact(r),(e=>{t[e.type]=j.pick(e,["total","imported","failed"])})),j.isFunction(o)&&o(t)}))},convertRawData:s.default,importDataAs:s.importDataAs,stringify:s.stringify,importFileFromUrl:i.default,parseUrlData:i.parseUrlData,importFiles:l.default,importFolder:a.default,saveEntity:c.default}},"./js/services/conversion/saveEntity.js":function(e,r,o){o.r(r),o.d(r,{default:function(){return u}});var t=o("./js/models/services/filesystem.js"),n=o("./js/modules/export/index.js"),s=o("./js/modules/services/AnalyticsService.js"),i=o("./js/services/conversion/export-all.js"),l=o("./node_modules/lodash/lodash.js"),a=o("../../node_modules/console-browserify/index.js");const c={json:"application/json"},d="collection";function u(e,r={}){let o,u,m,p=r.type,f=l.get(r,"outputVersion","2.1.0");if(p)return n.default.exportSingle(p,e,r).then((e=>{if(!(e&&c[e.type]&&e[e.type]))throw a.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((e=>{o=e,u=c[o.type],m=l.get(o,"meta.fileName",p+".json")})).then((()=>JSON.stringify(o.json,null,"\t"))).then((e=>new Promise(((r,o)=>{(0,t.saveAndOpenFile)(m,e,u,((e,t)=>{if(e)return a.warn("Error while saving the exported entity",e),void o(e);r(t)}))})))).then((r=>{if(r!==i.EXPORT_STATE.SUCCESS)return;let o="browser"!==window.SDK_PLATFORM;switch(p){case d:s.default.addEvent(d,"download",f,null,{collection_id:e.id}),o&&pm.toasts.success("Your collection was exported successfully.");break;case"environment":s.default.addEvent(p,"download"),o&&pm.toasts.success("Your environment was exported successfully.");break;case"globals":s.default.addEvent(p,"download"),o&&pm.toasts.success("Your globals were exported successfully.")}})).catch((o=>{pm.toasts.error("Unable to export this entity. Please check the DevTools."),a.warn("Error while exporting an entity",e,r,o)}));a.warn(`Unsupported type '${p}' for exporting`)}},"./onboarding/src/common/components/InviteMembersNudge/InviteMembersNudgeConstants.js":function(e,r,o){o.r(r),o.d(r,{INTERACTED_EVENT_DETAIL:function(){return s},INTERACTION_EVENTS_DEFAULT_QUERY:function(){return n},OPEN_INVITE_MEMBERS_NUDGE_EVENT:function(){return t}});const t="OPEN_INVITE_MEMBERS_NUDGE",n={entityType:"user",resourceId:"skip-import-popover",resourceType:"growth"},s={isDismissed:!0}}}]);