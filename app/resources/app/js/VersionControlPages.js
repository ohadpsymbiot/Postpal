"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[71,142],{"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/EmptyTrash.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return a}});var s=o("../../node_modules/react/index.js"),n=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function a(){return s.createElement(n.default,{name:"illustration-empty-trash"})}},"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/MergeConditions.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return a}});var s=o("../../node_modules/react/index.js"),n=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function a(){return s.createElement(n.default,{name:"illustration-merge-conditions"})}},"./js/components/base/Icons/CollectionIcon2.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return l}});var s=o("../../node_modules/react/index.js"),n=o("./js/components/base/Icons/Icon.js");function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},a.apply(this,arguments)}const r=s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16"},s.createElement("defs",null,s.createElement("path",{id:"pm-icon-collection-2",d:"M15 13.5C15 14.3284 14.3284 15 13.5 15H2.5C1.67157 15 1 14.3284 1 13.5V2.5C1 1.67157 1.67157 1 2.5 1H13.5C14.3284 1 15 1.67157 15 2.5V13.5ZM2 2.5C2 2.22386 2.22386 2 2.5 2H5.04623C5.19041 2 5.32758 2.06224 5.42252 2.17075L8.62371 5.82925C8.71866 5.93776 8.85582 6 9 6H13.5C13.7761 6 14 6.22386 14 6.5V13.5C14 13.7761 13.7761 14 13.5 14H2.5C2.22386 14 2 13.7761 2 13.5V2.5ZM14 5.08535V2.5C14 2.22386 13.7761 2 13.5 2H6.60188L9.22688 5H13.5C13.6753 5 13.8436 5.03008 14 5.08535Z"})),s.createElement("use",{fill:"#282828",fillRule:"evenodd",xlinkHref:"#pm-icon-collection-2"}));function l(e){return s.createElement(n.default,a({},e,{icon:r}))}},"./js/components/collections/DeleteConfirmationModal.js":function(e,t,o){o.r(t),o.d(t,{CollectionSizeStatus:function(){return S},default:function(){return C}});var s=o("../../node_modules/react/index.js"),n=o("./node_modules/classnames/index.js"),a=o.n(n),r=o("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=o("./js/utils/PluralizeHelper.js"),i=o("./js/components/base/keymaps/KeyMaps.js"),c=o("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke.js"),d=o("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-warning-stroke.js"),u=o("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedEnvironment-stroke.js"),m=o("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),p=o("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=o("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),f=o("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),g=o("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),y=o("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),b=o("./monitors/utils/messages/index.js"),E=o("./version-control/common/ForkLabel.js"),v=o("./node_modules/lodash/lodash.js");const k=(0,r.default)(p.default)`
  max-width: 30%;
`;function S(e){let t="Couldn't calculate the collection's size. It can't be restored if happens to be greater than 30 MB.",o="Checking if this collection is recoverable...",n="This collection can't be restored as it's greater than 30 MB.",a="This collection can be restored from trash.";return e.isMultipleSelected&&(t="Couldn't calculate the collection sizes. Any collection greater than 30 MB can't be restored from trash.",o="Checking if selected collections are recoverable...",n="Some of the selected collections can't be restored as they are greater than 30 MB.",a="Deleting collections can be restored from trash."),null===e.exceedsMaxSize&&(e.isOffline||e.error)?s.createElement(h.default,{gap:"spacing-s",padding:{paddingTop:"spacing-l"}},s.createElement(c.default,{className:"delete-collection__status-icon"}),s.createElement(p.default,{type:"para"},t)):s.createElement(s.Fragment,null,e.loading&&s.createElement(h.default,{gap:"spacing-s",padding:{paddingTop:"spacing-l"}},s.createElement(f.default,null),s.createElement(p.default,{type:"para",color:"content-color-primary"},o)),!e.loading&&e.exceedsMaxSize&&s.createElement(h.default,{gap:"spacing-s",padding:{paddingTop:"spacing-l"}},s.createElement(d.default,{className:"delete-collection__status-icon"}),s.createElement(p.default,{type:"para",color:"content-color-primary"},n)),!e.loading&&!e.exceedsMaxSize&&s.createElement(h.default,{gap:"spacing-s",padding:{paddingTop:"spacing-l"}},s.createElement(c.default,{className:"delete-collection__status-icon"}),s.createElement(p.default,{type:"para",color:"content-color-primary"},a)))}class C extends s.Component{constructor(e){super(e),this.state={isDeleteFocused:!0},this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this),this.handleFocusClick=this.handleFocusClick.bind(this),this.handleFocusSwitch=this.handleFocusSwitch.bind(this)}getKeyMapHandlers(){return{quit:pm.shortcuts.handle("quit",this.handleClose),select:pm.shortcuts.handle("select",this.handleFocusClick),submit:pm.shortcuts.handle("submit",this.handleFocusClick),space:pm.shortcuts.handle("space",this.handleFocusClick),focusNext:pm.shortcuts.handle("focusNext",this.handleFocusSwitch)}}handleClose(){this.props.onRequestClose&&this.props.onRequestClose(),this.setState({isDeleteFocused:!0})}handleSubmit(){this.props.onConfirm&&this.props.onConfirm()}handleFocusSwitch(){this.setState({isDeleteFocused:!this.state.isDeleteFocused})}handleFocusClick(){this.state.isDeleteFocused?this.handleSubmit():this.handleClose()}getCustomStyles(){return{marginTop:"35vh"}}getClasses(){return a()({"delete-confirmation-modal":!0},this.props.className)}getMessage(){return s.createElement(p.default,{type:"para",color:"content-color-primary"},"This will delete the monitors, scheduled runs and integrations and deactivate the mock servers associated with this collection.")}renderForkInfo(){var e,t,o,n,a,r;const l={id:null===(e=this.props)||void 0===e?void 0:e.id,forkLabel:null===(t=this.props)||void 0===t?void 0:t.forkLabel,model:null===(o=this.props)||void 0===o?void 0:o.forkModel},i={id:null===(n=this.props)||void 0===n?void 0:n.baseModelUid,model:null===(a=this.props)||void 0===a?void 0:a.forkModel},c={ENVIRONMENT:s.createElement(u.default,null),COLLECTION:s.createElement(m.default,null)};return s.createElement(h.default,{alignItems:"center",gap:"spacing-s",padding:{paddingBottom:"spacing-l"},width:"100%"},c[this.props.entity],s.createElement(k,{isTruncated:!0},v.get(this.props,"meta.name")),s.createElement(p.default,{color:"content-color-tertiary"}," · "),s.createElement(E.default,{forkedEntity:l,baseEntity:i,label:null===(r=this.props)||void 0===r?void 0:r.forkLabel,size:"large"}),s.createElement(p.default,null,"will be deleted."))}renderCollectionMessage(){v.get(this.props.meta,"name");return s.createElement(s.Fragment,null,s.createElement(p.default,{type:"para",color:"content-color-primary"},this.props.isAPIExclusive?this.renderDefaultMessage():this.getMessage(),this.props.isLoggedIn&&s.createElement("div",{className:"delete-collection-text"},s.createElement(S,{isOffline:this.props.isOffline,loading:this.props.loadingCollectionSize,exceedsMaxSize:this.props.exceedsMaxSize,error:this.props.errorFetchingCollectionSize}))))}renderMultiSelectionMessage(){return s.createElement(s.Fragment,null,s.createElement(p.default,{type:"para",color:"content-color-primary",hasBottomSpacing:!0},this.props.message),this.props.isCollectionPartOfMultiSelect&&s.createElement(p.default,{type:"para",color:"content-color-primary"},"This will delete the monitors, scheduled runs and integrations and deactivate the mock servers associated with the collections."),this.props.isCollectionPartOfMultiSelect&&this.props.isLoggedIn&&s.createElement("div",{className:"delete-collection-text"},s.createElement(S,{isOffline:this.props.isOffline,loading:this.props.loadingCollectionSize,exceedsMaxSize:this.props.exceedsMaxSize,error:this.props.errorFetchingCollectionSize,isMultipleSelected:!0})))}renderTabMessage(){return s.createElement(p.default,{type:"para",color:"content-color-primary"},v.get(this.props,"meta.count"),l.default.pluralize({count:this.props.meta.count,singular:" tab has ",plural:" tabs have "}),"unsaved changes. Your changes will be lost if you force close",l.default.pluralize({count:this.props.meta.count,singular:" this tab",plural:" these tabs"}),". Are you sure you want to force close?")}renderDefaultMessage(){const e="MONITOR"===this.props.entity&&"collection-based"===this.props.meta.type;return this.props.message?s.createElement(p.default,{type:"para",color:"content-color-primary"},this.props.message):s.createElement(s.Fragment,null,s.createElement(p.default,{type:"para",color:"content-color-primary",hasBottomSpacing:!0},"Are you sure you want to delete ","MONITOR"===this.props.entity?v.get(this.props,"meta.name"):s.createElement("b",null,v.get(this.props,"meta.name")),"? ",e&&this.props.meta.showFeedbackBlock&&b.DELETE_HELPER_TEXT),e&&this.props.meta.showFeedbackBlock&&this.props.feedbackOptions&&this.props.feedbackOptions())}renderMessage(){return this.props.isBetaCollection||this.props.isMultipleSelected||this.props.disableSizeCalculations||"COLLECTION"!==this.props.entity?"COLLECTION_SIDEBAR_MULTI_SElECT"===this.props.entity?this.renderMultiSelectionMessage():"TAB"===this.props.entity?this.renderTabMessage():this.renderDefaultMessage():this.renderCollectionMessage()}render(){var e;return s.createElement(g.Modal,{isOpen:this.props.isOpen,onClose:this.handleClose,className:this.getClasses(),customOverlayStyles:this.props.customOverlayStyles,customStyles:this.getCustomStyles(),size:"small"},s.createElement(g.ModalHeader,{heading:this.props.title||("TAB"===this.props.entity?"Confirm force close":`Delete ${this.props.entity}?`)}),s.createElement(g.ModalContent,null,s.createElement("div",null,(null===(e=this.props)||void 0===e?void 0:e.isForked)&&this.renderForkInfo(),this.renderMessage())),s.createElement(g.ModalFooter,null,s.createElement(i.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers(),ref:this.props.keymapRef},s.createElement(h.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-m"},s.createElement(y.default,{type:"secondary",onClick:this.handleClose,onFocus:!this.state.isDeleteFocused,text:"Cancel"}),s.createElement(y.default,{type:"destructive",onClick:this.handleSubmit,isDisabled:this.props.isDisabled||this.props.isDeleting,autoFocus:this.state.isDeleteFocused,isLoading:this.props.isDeleting,tooltip:this.props.tooltip,text:v.get(this.props,"primaryAction","Delete")})))))}}C.defaultProps={isDeleting:!1,customOverlayStyles:{}}},"./version-control/pull-request/components/MergeConditions.js":function(e,t,o){o.r(t),o.d(t,{EmptyState:function(){return w},default:function(){return _}});var s=o("../../node_modules/react/index.js"),n=o("./node_modules/lodash/lodash.js"),a=o.n(n),r=o("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=o("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),c=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/MergeConditions.js"),d=o("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=o("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),m=(o("./version-control/pull-request/services/PullRequestService.js"),o("./appsdk/contextbar/ContextBarViewHeader.js")),p=(o("./js/components/base/LoadingIndicator.js"),o("./js/components/base/Text.js"),o("./js/components/base/Buttons.js")),h=o("./appsdk/components/link/Link.js"),f=o("./js/stores/SyncStatusStore.js"),g=o("./js/stores/StoreManager.js"),y=o("./version-control/common/index.js"),b=o("./version-control/pull-request/hooks/usePullRequestMergeSettingsViewPermission.js");const E="You can perform this action once you're back online",v=u.default.span`
  font-size: var(--text-size-m);
  font-weight: var(--text-weight-medium);
  color: var(--content-color-brand);
  cursor: ${e=>e.disabled?"not-allowed":"pointer"};
  opacity: ${e=>e.disabled&&"0.5"};
  pointer-events: ${e=>e.disabled&&"not-allowed"};
`,k=u.default.div`
  margin: var(--spacing-l) 0;
`,S=u.default.div`
  height: 56px;
  width: 56px;
  background-color: var(--background-color-tertiary);
  border-radius: var(--border-radius-max);
  display: flex;
  align-items: center;
  justify-content: space-around;

  & svg,
  & i {
    height: ${({theme:e})=>e["size-m"]};
    width: ${({theme:e})=>e["size-m"]};
  }
`,C=u.default.div`
  margin-top: ${({theme:e})=>e["spacing-l"]};
  maring-bottom: ${({theme:e})=>e["spacing-l"]};
`,j=u.default.div`
  margin-top: ${({theme:e})=>e["spacing-xs"]};
  margin-bottom: ${({theme:e})=>e["spacing-l"]};
  text-align: center;
`;function w(e){return s.createElement("div",{className:"pull-request-container__empty-state"},e.icon&&s.createElement(S,{className:"sidebar-empty-state__icon-container"},s.createElement(d.default,{className:"sidebar-empty-state__icon",size:"large",color:"content-color-tertiary",name:e.icon})),e.illustration&&e.illustration,s.createElement(C,null,s.createElement(r.default,{text:e.title,type:"h4",hasBottomSpacing:!0})),s.createElement(j,null,s.createElement(l.default,{type:"body-medium",text:e.message,color:"content-color-secondary"})),e.showAction&&s.createElement(p.Button,{type:"primary",onClick:()=>e.actionHandler&&e.actionHandler(),size:"small",disabled:e.isOffline||e.disableNavigation,tooltip:e.primaryActionTooltip||e.isOffline&&E,tooltipPlacement:"bottom"},e.navigationParams?s.createElement(h.default,e.navigationParams,e.actionTitle):e.actionTitle),e.showSecondaryAction&&s.createElement(k,null,s.createElement(y.CustomTooltip,{align:"bottom",body:e.isOffline&&E},s.createElement(v,{onClick:()=>e.secondaryActionHandler&&e.secondaryActionHandler(),disabled:e.isOffline},e.secondaryActionTitle))))}function _(e){const t=e.contextData.mergeChecks||[],o=e.contextData.errorLoadingMergeChecks,n=!(0,g.resolveStoreInstance)(f.default).isSocketConnected,r=a().get(e,"contextData.pullRequest.destination.id"),l=a().get(e,"contextData.pullRequest.entity"),{permission:u,error:p}=(0,b.default)(l,r);return s.createElement(s.Fragment,null,s.createElement(m.ContextBarViewHeader,{title:e.title,onClose:e.onClose}),s.createElement("section",{className:"pull-request-meta__section pull-request-merge-check__section"},o&&s.createElement(w,{showAction:!0,actionHandler:()=>e.contextData.errorActionHandler(a().get(e.contextData,"pullRequest.id")),actionTitle:"Retry",illustration:s.createElement(i.default,null),title:"Unable to load merge settings",message:o&&o.message||"We were unable to fetch merge settings. Please try again later.",isOffline:n}),!o&&!t.length&&s.createElement(w,{showAction:!0,illustration:s.createElement(c.default,null),actionTitle:"Open Merge Settings",title:"Set merge conditions for this collection",message:"Maintain version control with clear, simple rules for when a pull request can be merged.",navigationParams:u&&!n&&{to:{routeIdentifier:"build.roles.manage",queryParams:{collection:a().get(e.contextData,"pullRequest.toId")}}},disableNavigation:!u,primaryActionTooltip:n?E:"boolean"==typeof u&&!u||p?"You cannot view merge settings for this pull request.":void 0,id:a().get(e.contextData,"pullRequest.toId"),isOffline:n}),!o&&!!t.length&&s.createElement(s.Fragment,null,s.createElement("span",{className:"pull-request__merge-checks-header"},"This pull request:"),s.createElement("ul",{className:"pull-request-settings-list"},t.map((e=>s.createElement("div",{className:"pull-request-merge-check",key:e.id},e.satisfied?s.createElement(d.default,{name:"icon-state-success-stroke",color:"base-color-success",size:"large"}):s.createElement(d.default,{name:"icon-state-error-stroke",color:"base-color-warning",size:"large"}),s.createElement("span",{className:"pull-request-merge-check__description"},e.description))))))))}},"./version-control/pull-request/hooks/usePullRequestMergeSettingsViewPermission.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return l}});var s=o("../../node_modules/react/index.js"),n=o("./version-control/pull-request/services/PullRequestService.js"),a=o("./js/stores/CurrentUserStore.js"),r=o("./js/stores/StoreManager.js");function l(e,t){const[o,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)(),[d,u]=(0,s.useState)(),m=(0,s.useRef)(),p=(0,r.resolveStoreInstance)(a.default).id;return(0,s.useEffect)((()=>(m.current=!0,(async()=>{try{m.current&&l(!0);const o=await(0,n.checkPullRequestMergeSettingViewPermission)({model:e,modelId:t,userId:p});m.current&&c(o)}catch(e){m.current&&u(e.error||e)}finally{m.current&&l(!1)}})(),()=>{m.current=!1})),[]),{isLoading:o,permission:i,error:d}}},"./version-control/trash/components/CollectionRecoveryModal.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return C}});var s=o("../../node_modules/react/index.js"),n=o("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=o("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),r=o("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=o("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),i=o("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),d=o("./collaboration/workspace/controller/WorkspaceController.ts"),u=o("./js/components/base/Modals.js"),m=o("./js/components/base/Buttons.js"),p=o("./js/stores/SyncStatusStore.js"),h=o("./js/stores/StoreManager.js"),f=o("./js/components/base/LoadingIndicator.js"),g=o("./version-control/trash/components/WorkspaceList.tsx"),y=o("./js/services/CurrentUserDetailsService.js"),b=o("./collaboration/workspace/controller/ActiveWorkspaceController.ts"),E=o("./collaboration/workspace/service/PermissionService.ts"),v=o("./collaboration/workspace/constants/move.ts"),k=o("./collaboration/workspace/types/PermissionTypes.ts"),S=(o("./collaboration/workspace/types/WorkspaceTypes.ts"),o("./node_modules/lodash/lodash.js"));function C(e){const[t,o]=(0,s.useState)(),[C,j]=(0,s.useState)({workspaces:[],cursor:""}),[w,_]=(0,s.useState)(!0),[x,I]=(0,s.useState)(!1),[M,T]=(0,s.useState)(null),[L,N]=(0,s.useState)(!0),[O,z]=(0,s.useState)(!0),[F,R]=(0,s.useState)(),[B,D]=(0,s.useState)({}),W=S.get(v.MOVE_ENTITY_TYPE,"collection"),$=async e=>{const t=await d.default.findAll(e),o=S.map(t.data,"id"),s=y.default.userId,n=S.get(b.default.get(),"id"),a={};let r={};for(const e of o)B[e]||e===n||(a[e]={entityType:k.ENTITY_TYPE.USER,entityId:s,objectType:k.OBJECT_TYPE.WORKSPACE,objectId:e,permission:v.MOVE_ADD_PERMISSIONS.collection});try{S.isEmpty(a)||(r=await E.default.fetchPermissions(a))}catch(e){pm.logger.error("CollectionRecoveryModal~fetchWorkspaces: Error occurred while fetching permissions",e)}return S.get(r,[n],!0)||N(!1),D((e=>S.reduce(o,((t,o)=>(e[o]||(t[o]=S.get(r,o,!0)),t)),e))),R((e=>{const o=b.default.get();return t&&t.data?t.data.reduce(((e,t)=>(t.id===o.id?e[t.id]={title:"Can't restore here",description:`The ${W} already exists in this workspace.`}:S.get(B,[t.id],!0)&&S.get(r,t.id,!0)||(e[t.id]={title:"Can't restore here",description:`You don't have access to move ${W}s to this workspace.`}),e)),{...e}):e})),t},P=async()=>{const{cursor:e,workspaces:t}=C;I(!1),T(null);try{const o=e?{cursor:e}:{},s=await $(o)||{};j({workspaces:S.unionBy(S.concat(t,s.data),"id"),cursor:S.get(s,"meta.nextCursor")})}catch(t){pm.logger.error("CollectionRecoveryModal~fetchAndSetWorkspaces - Error while trying to fetch workspaces",t),e?T({title:"Couldn’t load more workspaces",subtitle:"Just a faulty wire. Try reloading.",retry:()=>s.createElement(m.Button,{type:"outline",onClick:P,text:"Reload"})}):I(!0)}finally{_(!1)}};return(0,s.useEffect)((()=>{_(!0),(0,h.resolveStoreInstance)(p.default).onSyncAvailable({timeout:1e4}).then((()=>P())).catch((e=>I(e))).finally((()=>_(!1)))}),[]),s.createElement(u.Modal,{isOpen:e.open,onRequestClose:e.onClose,className:"trash-modal__restore"},s.createElement(u.ModalHeader,null,s.createElement(a.default,{type:"h2",text:`Restore ${e.name}`,color:"content-color-primary",styleAs:"h2"})),s.createElement(u.ModalContent,null,s.createElement(r.default,{type:"body-medium",color:"content-color-secondary"},"Select a workspace for the collection"),x?s.createElement(l.default,{title:"Couldn't load the workspaces",description:"Just a faulty wire. Try reloading.",className:"move-entity-modal-container__modal-content__initial-error",illustration:"unable-to-load",secondaryAction:s.createElement(i.default,{type:"outline",text:"Reload",onClick:()=>{_(!0),P()}})},s.createElement(c.default,null)):s.createElement(g.default,{entityType:"collection",hasMoreWorkspaces:Boolean(C.cursor),workspaces:C.workspaces,selectedWorkspace:t,isLoading:w,disabledWorkspaces:F,error:M,getWorkspaces:$,fetchMoreWorkspaces:P,handleWorkspaceSelect:e=>{e&&F[e.id]||o(e)}})),s.createElement(u.ModalFooter,null,s.createElement("div",{className:"trash-modal-actions"},s.createElement(m.Button,{className:"trash-modal-actions__cancel",type:"secondary",size:"small",onClick:e.onClose},"Cancel"),s.createElement(n.Observer,null,(()=>s.createElement(m.Button,{className:"trash-modal-actions__confirm",disabled:e.restoring||!t||S.isEmpty(t)||!(0,h.resolveStoreInstance)(p.default).isSocketConnected,type:"primary",size:"small",onClick:()=>e.onConfirm(e.id,t),tooltip:!(0,h.resolveStoreInstance)(p.default).isSocketConnected&&"You can take this action once you're back online"},e.restoring?s.createElement(f.default,null):"Restore Collection"))))))}},"./version-control/trash/components/PermanentDeleteConfirmationModal.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return r}});var s=o("../../node_modules/react/index.js"),n=o("./js/components/base/LoadingIndicator.js"),a=o("./js/components/collections/DeleteConfirmationModal.js");function r(e){const t=s.createElement("p",null,"Are you sure you want to delete ",s.createElement("strong",null,e.name)," permanently? You cannot undo this action.");return s.createElement(a.default,{preventFocusReset:!0,className:"delete-collection-confirmation-modal",title:"Permanently delete collection",primaryAction:e.loading?s.createElement(n.default,null):"Delete",isDisabled:e.loading,message:t,isOpen:e.open,onConfirm:e.onConfirm,onRequestClose:e.onClose})}},"./version-control/trash/components/TrashWorkbench.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return A}});var s,n=o("../../node_modules/react/index.js"),a=o("./node_modules/moment-timezone/index.js"),r=o.n(a),l=o("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=o("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=o("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/EmptyTrash.js"),u=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),m=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),p=o("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=o("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),f=o("./js/components/base/Buttons.js"),g=(o("./js/components/base/Icons/CloseIcon.js"),o("./js/components/base/Icons/CollectionIcon2.js"),o("./js/components/base/Icons/designSystemIcons/Icon.js")),y=o("./js/modules/services/RemoteSyncRequestService.js"),b=o("./js/stores/CurrentUserStore.js"),E=o("./js/stores/SyncStatusStore.js"),v=o("./js/stores/StoreManager.js"),k=o("./js/utils/PluralizeHelper.js"),S=o("./js/components/collections/CollectionForkLabel.js"),C=o("./version-control/trash/components/PermanentDeleteConfirmationModal.js"),j=o("./version-control/trash/components/CollectionRecoveryModal.js"),w=o("./version-control/common/index.js"),_=o("./js/utils/uid-helper.js"),x=o("./js/services/WorkspaceSwitchService.js"),I=o("./js/modules/services/AnalyticsService.js"),M=o("./version-control/pull-request/components/MergeConditions.js"),T=o("./version-control/constants.js"),L=o("./js/services/PerformanceTelemetryService/index.js"),N=o("./js/components/base/LoadingIndicator.js"),O=o("./node_modules/lodash/lodash.js");const z=h.default.div`
  padding-left: ${({theme:e})=>e["spacing-l"]};
  padding-right: ${({theme:e})=>e["spacing-l"]};
  display: flex;
  align-items: center;
  height: 40px;
  background-color: ${({theme:e})=>e["background-color-warning"]};

  .warning-icon {
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }
`;function F(e){return n.createElement(z,null,n.createElement(p.default,{name:"icon-state-warning-stroke",size:"large",className:"warning-icon",color:"content-color-warning"}),n.createElement(i.default,{text:"You are offline. Your data may not be up to date until you're back online."}))}function R(e){const[t,o]=(0,n.useState)({}),[s,a]=(0,n.useState)(!0),[r,l]=(0,n.useState)(null),i=(0,v.resolveStoreInstance)(b.default);(0,n.useEffect)((()=>{(0,v.resolveStoreInstance)(E.default).onSyncAvailable({timeout:1e4}).then((()=>y.default.request(`/user/settings/${i.id}`))).then((e=>o(e.body.data))).catch((e=>l(e))).finally((()=>a(!1)))}),[]);const c=O.get(t,"trash.retention_days");return n.createElement("div",{className:"trash-banner"},n.createElement(g.default,{icon:"icon-state-info-stroke",style:"secondary",size:"large",className:"trash-banner__icon"}),n.createElement("div",{className:"trash-banner__text"},"Resources will be removed from the trash automatically after"," ",s&&n.createElement(N.default,null),!s&&!c&&"a fixed number of days based on your plan.",!s&&c&&c+" "+k.default.pluralize({count:c,singular:"day.",plural:"days."})))}const B=h.default.div`
  .back-navigation {
    margin: ${e=>e.theme["spacing-s"]} auto 0 auto;
    width: 85%;
  }

  .navigation-text {
    color: ${e=>e.theme["content-color-secondary"]};
    font-size: ${e=>e.theme["text-size-m"]};
    line-height: ${e=>e.theme["line-height-s"]};
    font-weight: ${e=>e.theme["text-weight-medium"]};
  }

  .page-title {
    width: 85%;
    margin: ${e=>e.theme["spacing-m"]} auto 0 auto;
  }

  .page-description {
    width: 85%;
    margin-top: ${e=>e.theme["spacing-s"]};
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

  .back-link {
    padding: 0;
  }
`;function D(e){return n.createElement(B,null,n.createElement(R,null),n.createElement("div",{className:"back-navigation"},n.createElement(f.Button,{size:"small",className:"back-link",disabled:!e.sourceWorkspace,onClick:()=>{x.default.switchWorkspace(e.sourceWorkspace).catch((e=>{pm.logger.error("WorkspaceSwitcherContainer~handleSwitchWorkspace: Switch could not happen",e)}))}},n.createElement(g.default,{icon:"icon-direction-back",size:"md"}),n.createElement("span",{className:"navigation-text"},"  Back to workspace"))),n.createElement(c.default,{text:"Trash",type:"h1",className:"page-title",hasBottomSpacing:!0}),!e.hideDescription&&n.createElement(i.default,{type:"body-large",hasBottomSpacing:!0,color:"content-color-secondary",className:"page-description"},"Collections you delete will show up here. You can restore or permanently delete them."))}const W=h.default.div`
  width: 480px;
  height: 248px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: ${e=>e.theme["spacing-xxl"]} 0px;
  margin: 90px auto 0 auto;

  & > svg {
    margin-bottom: ${e=>e.theme["spacing-l"]};
  }

  .description {
    font-size: ${e=>e.theme["text-size-m"]};
    font-weight: ${e=>e.theme["text-weight-regular"]};
    line-height: ${e=>e.theme["line-height-m"]};
    color: ${e=>e.theme["content-color-secondary"]};
    margin-top: ${e=>e.theme["spacing-xs"]};
  }
`;function $(){return n.createElement(W,null,n.createElement(d.default,{className:"illustration"}),n.createElement(c.default,{text:"Your trash is empty",type:"h4",hasBottomSpacing:!0,color:"content-color-primary"}),n.createElement("div",{className:"description"},"Collections you delete will show up here."))}function P(e){return e.items.length?n.createElement(n.Fragment,null,n.createElement("table",{className:"trash-list"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("td",null,"Name"),n.createElement("td",null,"Deleted"),n.createElement("td",null,""))),n.createElement("tbody",null,e.items.map((t=>n.createElement("tr",{key:t.id},n.createElement("td",null,n.createElement("div",{className:"trash-list__name"},n.createElement("span",{className:"trash-list__name-text",title:t.name,style:O.get(t,"forkedFrom.forkName")&&{maxWidth:"60%"}},t.name),t.forkedFrom&&n.createElement(S.default,{forkInfo:{forkLabel:t.forkedFrom.forkName}}))),n.createElement("td",null,n.createElement("span",null,r()(t.deletedAt).fromNow())),n.createElement("td",null,n.createElement("div",{className:"options"},n.createElement(g.default,{icon:"icon-action-options-stroke",size:"large"})),n.createElement("div",{className:"actions"},n.createElement(f.Button,{type:"icon",size:"small",disabled:e.isOffline,className:"trash-list__restore-btn",tooltipPlacement:"bottom",tooltip:e.isOffline?"You can perform this action once you're back online":"Restore",onClick:()=>e.onRestore(`${t.owner}-${t.id}`)},n.createElement(g.default,{icon:"icon-action-refresh-stroke",size:"large"})),n.createElement(f.Button,{type:"icon",size:"small",disabled:e.isOffline,tooltip:e.isOffline?"You can perform this action once you're back online":"Delete permanently",tooltipPlacement:"bottom",onClick:()=>e.onDelete(`${t.owner}-${t.id}`)},n.createElement(g.default,{icon:"icon-action-delete-stroke",size:"large"})))))))))):n.createElement($,null)}let A=(0,l.observer)(s=class extends n.Component{constructor(e){super(e),this.state={data:[],loading:!0,error:null,showBanner:!0,eraseCollectionId:null,restoreCollectionId:null,restoring:!1,erasing:!1,isOffline:!1},this.handleCollectionErase=this.handleCollectionErase.bind(this),this.handleRecoverCollection=this.handleRecoverCollection.bind(this),this.initiateFetch=this.initiateFetch.bind(this)}componentDidMount(){this.initiateFetch(),I.default.addEventV2({category:"trash",action:"view_trash",label:"trash_page"})}initiateFetch(){this.setState({loading:!0});(0,v.resolveStoreInstance)(E.default).onSyncAvailable({timeout:5e3}).then((()=>{y.default.request("/collection/trash").then((e=>this.setState({data:e.body.map((e=>e.data)),error:null}))).catch((e=>this.setState({error:!0}))).finally((()=>{L.default.endSpan(T.events.TRASH_LOAD_TIME),this.setState({loading:!1})}))})).then((()=>this.setState({isOffline:!1}))).catch((e=>this.setState({isOffline:!0,loading:!1})))}handleCollectionErase(){const e=(this.state.data||[]).find((e=>e.id===(0,_.decomposeUID)(this.state.eraseCollectionId).modelId));I.default.addEventV2({category:"trash",action:"initiate_permanent_delete",label:"trash_page",entityId:this.state.eraseCollectionId}),this.setState({erasing:!0}),y.default.request(`/collection/trash/${this.state.eraseCollectionId}`,{method:"DELETE"}).then((t=>{this.setState({data:(this.state.data||[]).filter((e=>`${e.owner}-${e.id}`!==this.state.eraseCollectionId)),eraseCollectionId:null,erasing:!1}),I.default.addEventV2({category:"trash",action:"successful_permanent_delete",label:"trash_page",entityId:this.state.eraseCollectionId}),pm.toasts.success(`The collection ${e.name} was successfully deleted.`,{noIcon:!0,title:"Collection deleted permanently"})})).catch((e=>{this.setState({erasing:!1}),I.default.addEventV2({category:"trash",action:"failed_permanent_delete",label:"trash_page",entityId:this.state.eraseCollectionId}),(0,v.resolveStoreInstance)(E.default).isSocketConnected?pm.toasts.error("Unable to delete collection."):pm.toasts.error("You'll be able to manage the trash once you're online.",{title:"You are offline"})}))}handleRecoverCollection(e,t){this.setState({restoring:!0}),I.default.addEventV2({category:"trash",action:"initiate_recover",label:"trash_page",entityId:e}),y.default.request(`/collection/recover/${e}`,{method:"POST",data:{workspaces:[t.id]}}).then((o=>{200!==o.statusCode&&200!==o.status?(pm.toasts.error("Just a faulty wire. Try again.",{title:" Couldn't recover collection",iconName:"icon-state-error-stroke",iconColor:"content-color-error",iconSize:"large"}),this.setState({restoreCollectionId:null,restoring:!1}),I.default.addEventV2({category:"trash",action:"failed_recover",label:"trash_page",entityId:e})):(this.setState({data:(this.state.data||[]).filter((e=>`${e.owner}-${e.id}`!==this.state.restoreCollectionId)),restoreCollectionId:null,restoring:!1}),I.default.addEventV2({category:"trash",action:"successful_recover",label:"trash_page",entityId:e}),pm.toasts.success(`${O.get(o,"body.data.name")} is now in ${t.name}.`,{title:" Collection restored",iconName:"icon-state-success-stroke",iconColor:"content-color-success",iconSize:"large"}))})).catch((t=>{this.setState({restoring:!1}),I.default.addEventV2({category:"trash",action:"failed_recover",label:"trash_page",entityId:e}),(0,v.resolveStoreInstance)(E.default).isSocketConnected?pm.toasts.error("Just a faulty wire. Try again.",{title:" Couldn't recover collection",iconName:"icon-state-error-stroke",iconColor:"content-color-error",iconSize:"large"}):pm.toasts.error("You'll be able to manage the trash once you're online.",{title:"You are offline"})}))}render(){const{controller:e}=this.props,t=e&&e.sourceWorkspace;return this.state.loading?n.createElement("div",{className:"trash-loading"},n.createElement(N.default,null)):this.state.isOffline?n.createElement(w.EmptyState,{className:"trash-offline",title:"You are offline",body:"Unable to connect to the servers. Please check your network settings.",illustration:n.createElement(u.default,null),action:n.createElement(f.Button,{type:"primary",size:"small",onClick:this.initiateFetch},"Retry")}):this.state.error?n.createElement(M.EmptyState,{title:"Unable to load trash",showAction:!0,actionTitle:"Refresh",message:"Just a faulty wire. Refresh or try later.",actionHandler:this.initiateFetch,showSecondaryAction:!0,secondaryActionTitle:"Go Back to Workspace",showSecondaryAction:!!t,secondaryActionHandler:()=>{x.default.switchWorkspace(t).catch((e=>{pm.logger.error("WorkspaceSwitcherContainer~handleSwitchWorkspace: Switch could not happen",e)}))},isOffline:!(0,v.resolveStoreInstance)(E.default).isSocketConnected,illustration:n.createElement(m.default,null)}):n.createElement("div",{className:"trash"},!(0,v.resolveStoreInstance)(E.default).isSocketConnected&&n.createElement(F,null),n.createElement(D,{hideDescription:!this.state.data.length,sourceWorkspace:t}),n.createElement(P,{items:this.state.data,isOffline:!(0,v.resolveStoreInstance)(E.default).isSocketConnected,onDelete:e=>this.setState({eraseCollectionId:e}),onRestore:e=>this.setState({restoreCollectionId:e})}),n.createElement(C.default,{loading:this.state.erasing,open:!!this.state.eraseCollectionId,name:((this.state.data||[]).find((e=>e.id===this.state.eraseCollectionId))||{}).name,id:this.state.eraseCollectionId,onClose:()=>this.setState({eraseCollectionId:null}),onConfirm:this.handleCollectionErase}),this.state.restoreCollectionId&&n.createElement(j.default,{id:this.state.restoreCollectionId,open:!!this.state.restoreCollectionId,restoring:this.state.restoring,name:((this.state.data||[]).find((e=>`${e.owner}-${e.id}`===this.state.restoreCollectionId))||{}).name,onClose:()=>this.setState({restoreCollectionId:null}),onConfirm:this.handleRecoverCollection}))}})||s},"./version-control/trash/controllers/TrashController.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var s,n,a=o("./appsdk/pages/BasePageController.js"),r=o("./js/services/PerformanceTelemetryService/index.js"),l=o("./version-control/constants.js"),i=o("../../node_modules/mobx/lib/mobx.module.js");function c(e,t,o,s,n){var a={};return Object.keys(s).forEach((function(e){a[e]=s[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=o.slice().reverse().reduce((function(o,s){return s(e,t,o)||o}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}let d=(s=class extends a.default{constructor(...e){var t,o,s,a;super(...e),t=this,o="sourceWorkspace",a=this,(s=n)&&Object.defineProperty(t,o,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(a):void 0})}setSourceWorkspace(e){this.sourceWorkspace=e}didCreate(){}didActivate(e={}){const{additionalContext:t}=e;t&&t.sourceWorkspace&&this.setSourceWorkspace(t.sourceWorkspace),r.default.startSpan(l.events.TRASH_LOAD_TIME)}didDeactivate(){}beforeDestroy(){}},n=c(s.prototype,"sourceWorkspace",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c(s.prototype,"setSourceWorkspace",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"setSourceWorkspace"),s.prototype),s)},"./version-control/trash/components/WorkspaceList.tsx":function(e,t,o){o.r(t);var s=o("../../node_modules/react/index.js"),n=o("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=o("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),r=o("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=o("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/Search.js"),i=o("./node_modules/lodash/lodash.js"),c=o.n(i),d=o("./collaboration/workspace/components/common/WorkspaceList/WorkspaceList.tsx"),u=o("./version-control/trash/components/WorkspaceListSkeleton.tsx"),m=o("./collaboration/workspace/constants/move.ts"),p=function(e,t,o,s){return new(o||(o=Promise))((function(n,a){function r(e){try{i(s.next(e))}catch(e){a(e)}}function l(e){try{i(s.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}i((s=s.apply(e,t||[])).next())}))};t.default=e=>{const t=c().get(m.MOVE_ENTITY_TYPE,e.entityType),[o,i]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),[g,y]=(0,s.useState)(""),[b,E]=(0,s.useState)(null),[v,k]=(0,s.useState)({workspaces:[],cursor:""}),S=(0,s.useMemo)((()=>{const t=Boolean(v.cursor),s=Boolean(g)||Boolean(b);return!h&&(o||s&&t||!s&&e.hasMoreWorkspaces&&!e.error)}),[o,g,b,v,h,e.error,e.hasMoreWorkspaces]),C=({searchQuery:t,visibilityStatusFilter:o,filterResults:a})=>p(void 0,void 0,void 0,(function*(){const r={};if(f(null),t||o){i(!0),t&&(r.name=t),a.cursor&&(r.cursor=a.cursor),o&&(r.visibilityStatus=o);try{const t=(yield e.getWorkspaces(r))||[];k({workspaces:c().unionBy(a.workspaces||[],t.data||[],"id"),cursor:t.meta.nextCursor})}catch(e){pm.logger.error("CollectionRecoveryModal~handleNetworkSearch: Error while trying to get filtered workspaces",e),f({title:"Couldn’t load the workspaces",subtitle:"Just a faulty wire. Try reloading.",retry:()=>s.createElement(n.default,{type:"outline",onClick:()=>C({searchQuery:t,visibilityStatusFilter:o,filterResults:a}),text:"Reload"})})}finally{i(!1)}}})),j=(0,s.useCallback)(c().debounce(C,500,{leading:!1,trailing:!0}),[]),w=((0,s.useCallback)((e=>{b!==e&&(E(e),k({workspaces:[],cursor:""}))}),[k,E,b]),(0,s.useMemo)((()=>g||b?v.workspaces:e.workspaces),[v.workspaces,e.workspaces,g,b]));return(0,s.useEffect)((()=>{j({searchQuery:g,visibilityStatusFilter:b,filterResults:v})}),[g]),(0,s.useEffect)((()=>{C({searchQuery:g,visibilityStatusFilter:b,filterResults:v})}),[b]),s.createElement("div",{className:"move-entity-modal"},e.isLoading?s.createElement(u.default,null):s.createElement(s.Fragment,null,s.createElement("div",{className:"move-entity-modal__filters"},s.createElement(a.default,{type:"search",placeholder:"Search workspaces",value:g,onChange:e=>{const t=e.target.value;i(!0),k({workspaces:[],cursor:""}),y(t)},onClear:()=>{const e={workspaces:[],cursor:""};y(""),k(e),C({filterResults:e,searchQuery:"",visibilityStatusFilter:b})},isDisabled:!1,className:"move-entity-modal__filters__search"})),!c().isEmpty(w)||b||o||h||e.isLoading?s.createElement(d.default,{workspaces:w,disabledWorkspaces:e.disabledWorkspaces,friendlyEntityType:t,isSpinnerVisible:S,selectedWorkspace:e.selectedWorkspace,fetchMoreListItems:()=>{const t=Boolean(v.cursor),o=Boolean(g)||Boolean(b);o&&t?C({filterResults:v,searchQuery:g,visibilityStatusFilter:b}):o||e.fetchMoreWorkspaces()},onSelect:e.handleWorkspaceSelect,error:(()=>{const t=Boolean(g)||Boolean(b);return h||(e.error&&!t?e.error:null)})()}):s.createElement(r.default,{className:"workspace-empty-state",title:"No workspaces found",description:"Check your spelling, try a different search term."},s.createElement(l.default,null))))}},"./version-control/trash/components/WorkspaceListSkeleton.tsx":function(e,t,o){o.r(t);var s=o("../../node_modules/react/index.js"),n=o("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=o("./collaboration/workspace/components/common/SkeletonUnit.tsx");t.default=()=>s.createElement(n.default,{direction:"column",grow:1,justifyContent:"space-between"},s.createElement(n.default,{direction:"column"},s.createElement(n.default,{gap:"spacing-m",padding:"spacing-l spacing-zero spacing-s"},s.createElement(a.default,{height:"32px",width:"100%"})),s.createElement(n.default,{gap:"spacing-m",padding:"spacing-m"},s.createElement(a.default,{height:"8px",width:"8px"}),s.createElement(a.default,{height:"8px",width:"120px"})),s.createElement(n.default,{gap:"spacing-m",padding:"spacing-m"},s.createElement(a.default,{height:"8px",width:"8px"}),s.createElement(a.default,{height:"8px",width:"120px"})),s.createElement(n.default,{gap:"spacing-m",padding:"spacing-m"},s.createElement(a.default,{height:"8px",width:"8px"}),s.createElement(a.default,{height:"8px",width:"120px"})),s.createElement(n.default,{gap:"spacing-m",padding:"spacing-m"},s.createElement(a.default,{height:"8px",width:"8px"}),s.createElement(a.default,{height:"8px",width:"120px"}))))}}]);