"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[1],{"./onboarding/src/features/FeatureOverview/TeamFeatureOverviewHelper.js":function(e,t,a){a.r(t),a.d(t,{teamFeatureOverviewHelper:function(){return m}});var i,r,s,n=a("../../node_modules/mobx/lib/mobx.module.js"),o=a("./js/services/CurrentUserDetailsService.js");function l(e,t,a,i,r){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=a.slice().reverse().reduce((function(a,i){return i(e,t,a)||a}),s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}const m=new(i=n.action.bound,s=l((r=class{constructor(){var e,t,a,i;e=this,t="isTeamFeatureOverviewModalOpen",i=this,(a=s)&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(i):void 0})}update(e,t){this[e]=t}get isTeamCreated(){const e=o.default.teamId;return e&&"0"!==e}}).prototype,"isTeamFeatureOverviewModalOpen",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l(r.prototype,"update",[i],Object.getOwnPropertyDescriptor(r.prototype,"update"),r.prototype),l(r.prototype,"isTeamCreated",[n.computed],Object.getOwnPropertyDescriptor(r.prototype,"isTeamCreated"),r.prototype),r)},"./onboarding/src/features/TeamOnboarding/pages/CreatingTeam/index.js":function(e,t,a){a.r(t),a.d(t,{CreatingTeamModal:function(){return W},FLOW:function(){return D},createTeam:function(){return y.createTeam},initiateTeamCreation:function(){return y.initiateTeamCreation}});var i,r=a("../../node_modules/react/index.js"),s=a("../../node_modules/mobx-react/dist/mobx-react.module.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=a("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=a("./js/components/base/Markdown.js"),c=a("./js/components/base/Modals.js"),u=a("./js/modules/services/AnalyticsService.js"),d=a("./js/utils/PluralizeHelper.js"),p=a("./js/stores/StoreManager.js"),h=a("./js/stores/CurrentUserStore.js"),b=a("./js/electron/ElectronService.js"),w=a("./js/services/NavigationService.js"),g=a("./js/external-navigation/ExternalNavigationService.js"),f=a("./js/services/UIEventService.js"),v=a("./onboarding/navigation/constants.js"),T=a("./onboarding/src/common/ExternalLinkService.js"),y=a("./onboarding/public/TeamCreation.js"),E=a("./onboarding/src/features/FeatureOverview/TeamFeatureOverviewHelper.js"),S=a("./growth/foundation/public/amplitude/AmplitudeService.js"),k=a("./onboarding/src/common/LaunchDarkly.js"),j=a("./js/services/CurrentUserDetailsService.js"),A=a("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_=a("./node_modules/lodash/lodash.js");const D={TEAM_CREATION:"teamCreation",INVITE_MEMBERS:"inviteMember",CREATE_TEAM_WORKSPACE:"createTeamWorkspace",ADD_NEW_TEAM:"addNewTeam"},O={isOpen:!1,teamDomain:"",flow:D.TEAM_CREATION,member:0,teamWorkspaceData:{wid:"",collectionCount:0},isSetupTeamButtonLoading:!1},C="Customize your team’s profile to make it easy for your future team members to find.",P="Set Up Team",I=(0,A.default)(n.default)`
  width: fit-content !important;
`;function M(e){u.default.addEventV2AndPublish({category:"team_create_source",action:"create",label:{teamCreation:"homepage",inviteMember:"invite_member",createTeamWorkspace:"new_team_workspace"}[e]})}const N=_.once((()=>{S.Ampli.createTeamSuccessPageViewed((0,S.getAmpliPageViewedProperties)())}));let W=(0,s.observer)(i=class extends r.Component{constructor(e){super(e),this.state={isOpen:!1,flow:D.TEAM_CREATION,members:0,isLoading:!1,teamWorkspaceData:{wid:"",collectionCount:0},teamDomain:"",isSetupTeamButtonLoading:!1},this.handleToggle=this.handleToggle.bind(this),this.handleEditTeamProfile=this.handleEditTeamProfile.bind(this),this.handleSetUpTeamProfile=this.handleSetUpTeamProfile.bind(this),this.handleUpgradePlan=this.handleUpgradePlan.bind(this),this.handleMaybeLater=this.handleMaybeLater.bind(this),this.handleWorkspaceSwitch=this.handleWorkspaceSwitch.bind(this),this.resetIntailState=this.resetIntailState.bind(this)}componentDidMount(){this.unsubscribeHandler=f.default.subscribe(v.CREATING_TEAM_LOADER,this.handleToggle)}componentWillUnmount(){this.unsubscribeHandler&&this.unsubscribeHandler()}componentDidUpdate(){(0,p.resolveStoreInstance)(h.default).teamId&&this.state.teamWorkspaceData.wid&&N()}handleToggle({isOpen:e=!0,flow:t=D.TEAM_CREATION,members:a=0,teamWorkspaceData:i={},teamDomain:r=""}){if(!_.isEmpty(i))return this.setState({teamWorkspaceData:i,teamDomain:r});this.setState({isOpen:e,flow:t,members:a,teamDomain:r})}resetIntailState(){this.setState(O)}async handleWorkspaceSwitch(){if("browser"===window.SDK_PLATFORM)return(0,b.openURL)(`${pm.artemisUrl}/workspace/${this.state.teamWorkspaceData.wid}/overview?isNewTeam=${0===this.state.teamWorkspaceData.collectionCount?1:0}${E.teamFeatureOverviewHelper.isTeamCreated?"&feature_overview=show":""}`);w.default.transitionTo("build.overview",{wid:this.state.teamWorkspaceData.wid},_.assign({},{isNewTeam:0===this.state.teamWorkspaceData.collectionCount?1:0},E.teamFeatureOverviewHelper.isTeamCreated&&{feature_overview:"show"})),this.resetIntailState()}handleMaybeLater(){if("browser"===window.SDK_PLATFORM)return(0,b.openURL)(`${pm.artemisUrl}/home`);this.resetIntailState()}handleUpgradePlan(){return"browser"!==window.SDK_PLATFORM&&this.resetIntailState(),(0,T.openUpgradePlanPage)({source:"app",label:"team_creation_page"})}handleEditTeamProfile(){if(this.setState({isSetupTeamButtonLoading:!0}),M(this.state.flow),"browser"===window.SDK_PLATFORM){let e=`${pm.artemisUrl}/onboarding/team`,t=[];return this.state.members&&t.push("invited=user"),this.state.teamWorkspaceData.wid&&(t.push(`wid=${this.state.teamWorkspaceData.wid}`),t.push("isNewTeam="+(0===this.state.teamWorkspaceData.collectionCount?1:0))),t.length>0&&(e+=`?${t.join("&")}`),void(0,b.openURL)(e)}w.default.transitionTo(v.TEAM_ONBOARDING_IDENTIFIER,null,_.assign({},this.state.members&&{invited:"user"},this.state.teamWorkspaceData.wid&&{wid:this.state.teamWorkspaceData.wid,isNewTeam:0===this.state.teamWorkspaceData.collectionCount?1:0})),this.resetIntailState()}handleSetUpTeamProfile(){this.setState({isSetupTeamButtonLoading:!0}),M(this.state.flow);let e=`${pm.artemisUrl}/onboarding/team`,t=`${pm.identityUrl}/teams/${this.state.teamDomain}?newteam=true&continue=${e}`;return"desktop"===window.SDK_PLATFORM&&(w.default.transitionTo(v.HOME_IDENTIFIER,null,{}),this.resetIntailState()),(0,g.openExternalLink)(t)}render(){let e=(0,p.resolveStoreInstance)(h.default),t=this.state.members,a=_.get(e.team,"account.user_addition.limit"),i=(_.get(e,"team.name","Home"),t-a),s=i>0,u="ENABLED"===k.launchDarkly.getFlag("iam_2684_multi_teams","DISABLED"),b=_.get(j.default.fetchUserFlags(),"flags.multi_team.enabled",!1)&&u,w=d.default.pluralize({count:i,singular:"person",plural:"people"}),g=d.default.pluralize({count:this.state.members,singular:"person",plural:"people"}),f=d.default.pluralize({count:this.state.members,singular:"user",plural:"users"}),v=d.default.pluralize({count:this.state.members,singular:"member",plural:"members"}),T=d.default.pluralize({count:this.state.members,singular:"invite",plural:"invites"});if(e.teamId&&this.state.teamWorkspaceData.wid){let e={teamCreation:{title:"Bravo! You’ve created a team",subtitle:b?"Your existing personal workspaces will be moved to this team. You can invite team members once you are ready to collaborate.":C,primaryActionText:b?P:"Edit Team Profile",primaryAction:this.handleEditTeamProfile},addNewTeam:{title:"Bravo! You’ve created your team",subtitle:C,primaryActionText:P,primaryAction:this.handleSetUpTeamProfile},inviteMember:{title:`Invited ${this.state.members} ${g} to your team`,subtitle:s?`You’ve invited ${i} ${w} beyond your team’s capacity.\n            Upgrade your plan to let them join and collaborate in this workspace.`:C,primaryActionText:s?"Upgrade Plan":"Edit Team profile",primaryAction:s?this.handleUpgradePlan:this.handleEditTeamProfile,secondaryActionText:"Go to Workspace",secondaryAction:this.handleWorkspaceSwitch},createTeamWorkspace:{title:"Team workspace created",subtitle:s?`You’ve invited ${i} ${w} beyond your team’s capacity.\n            Upgrade your plan to let them join and collaborate in this workspace.`:C,primaryActionText:s?"Upgrade Plan":"Edit Team profile",primaryAction:s?this.handleUpgradePlan:this.handleEditTeamProfile,secondaryActionText:"Go to Workspace",secondaryAction:this.handleWorkspaceSwitch}};return r.createElement(c.Modal,{isOpen:this.state.isOpen,fullscreen:!0,customStyles:{background:"var(--background-color-primary)"}},r.createElement("div",{className:"creating-team"},r.createElement("div",{className:"creating-team-icon"},r.createElement(l.default,{name:"icon-state-success-stroke",color:"content-color-success"})),r.createElement("h4",{className:"creating-team-title"},e[this.state.flow].title),r.createElement(m.default,{className:"creating-team-subtext",source:e[this.state.flow].subtitle}),r.createElement(I,{type:"primary",size:"medium",className:"creating-team-action",isDisabled:this.state.isSetupTeamButtonLoading,isLoading:this.state.isSetupTeamButtonLoading,text:e[this.state.flow].primaryActionText,onClick:e[this.state.flow].primaryAction}),e[this.state.flow].secondaryAction&&r.createElement(n.default,{type:"outline",size:"medium",className:"creating-team-action-outline",isDisabled:this.state.isLoading,text:e[this.state.flow].secondaryActionText,onClick:e[this.state.flow].secondaryAction})))}let y={teamCreation:{title:"Setting up your team"},addNewTeam:{title:"Setting up your team"},inviteMember:{title:`Inviting ${this.state.members} ${f} to your team`,subtitle:`Hang on while we send out ${T} to your future team ${v}.`},createTeamWorkspace:{title:"Creating your team workspace",subtitle:"Hang on while we set up your team and invite people."}};return r.createElement(c.Modal,{isOpen:this.state.isOpen,fullscreen:!0,customStyles:{background:"var(--background-color-primary)"}},r.createElement("div",{className:"creating-team"},r.createElement(o.default,null),r.createElement("h4",{className:"creating-team-title"},y[this.state.flow].title),r.createElement("div",{className:"creating-team-subtitle"},y[this.state.flow].subtitle),r.createElement("div",{className:"creating-team-info"},"Please don’t close or refresh this tab.")))}})||i}}]);