(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[61],{"../../node_modules/node-polyfill-webpack-plugin/node_modules/timers-browserify/main.js":function(e,t,s){var o=void 0!==s.g&&s.g||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(n.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new r(n.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},s("../../node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==s.g&&s.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==s.g&&s.g.clearImmediate||this&&this.clearImmediate},"../../node_modules/setimmediate/setImmediate.js":function(e,t,s){var o=s("../../node_modules/process/browser.js");!function(e,t){"use strict";if(!e.setImmediate){var s,n,r,a,i,l=1,c={},d=!1,u=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?s=function(e){o.nextTick((function(){m(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,s=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=s,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){m(e.data)},s=function(e){r.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,s=function(e){var t=u.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):s=function(e){setTimeout(m,0,e)}:(a="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&m(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),s=function(t){e.postMessage(a+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var n={callback:e,args:t};return c[l]=n,s(l),l++},p.clearImmediate=h}function h(e){delete c[e]}function m(e){if(d)setTimeout(m,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,s=e.args;switch(s.length){case 0:t();break;case 1:t(s[0]);break;case 2:t(s[0],s[1]);break;case 3:t(s[0],s[1],s[2]);break;default:t.apply(void 0,s)}}(t)}finally{h(e),d=!1}}}}}("undefined"==typeof self?void 0===s.g?this:s.g:self)},"./api-dev/components/api-version/context-bar/api-source-control/APISourceControlContextBarView/APISourceControlContextBarIcon.js":function(e,t,s){"use strict";s.r(t);var o=s("../../node_modules/react/index.js"),n=s("./node_modules/prop-types/index.js"),r=s.n(n),a=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=s("./node_modules/classnames/index.js"),l=s.n(i),c=s("./api-dev/navigation/constants.js"),d=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=s("./api-dev/stores/api-repository/PollingRemoteHeadDetailsStore.js"),p=s("./js/stores/StoreManager.js"),h=s("./js/services/NavigationService.js"),m=s("./api-dev/interfaces/APIInterface.js"),b=s("./node_modules/lodash/lodash.js");const g="contextBar",f=o.forwardRef((({handleShowTooltip:e,handleHideTooltip:t,apiRepositoryStore:s},n)=>{var r;const a=b.get(s,"sourceControlStore"),i=b.get(a,"shouldShowContextBarIconIndicator",!1),f=h.default.getCurrentURL(),y=null===h.default||void 0===h.default||null===(r=h.default.getCurrentRouteParams())||void 0===r?void 0:r.apiId;return(0,o.useEffect)((()=>{const e=(0,p.resolveStoreInstance)(u.default);return async function(){const t=y&&await(0,m.isAPIGitLinked)(y),s=y&&await(0,m.hasAPIMigrated)(y);y&&t&&s&&e.startPolling(y,g)}(),()=>{e.stopPolling(y,g)}}),[f]),o.createElement("div",{className:`tabs__${c.SOURCE_CONTROL_NAV} icon-container`,ref:n,onMouseEnter:e,onMouseLeave:t},o.createElement(d.default,{name:"icon-descriptive-branch-stroke",className:(v=i,l()({"api-source-control__context-bar-icon--unread":v}))}));var v}));f.propTypes={handleShowTooltip:r().func.isRequired,handleHideTooltip:r().func.isRequired,apiRepositoryStore:r().object.isRequired},t.default=(0,a.observer)(f)},"./api-dev/stores/api-repository/PollingRemoteHeadDetailsStore.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var o,n,r,a,i,l=s("./js/stores/StoreManager.js"),c=s("./api-dev/stores/APIListStore.js"),d=s("../../node_modules/node-polyfill-webpack-plugin/node_modules/timers-browserify/main.js"),u=s("./onboarding/src/common/LaunchDarkly.js"),p=s("../../node_modules/mobx/lib/mobx.module.js"),h=s("./node_modules/lodash/lodash.js");function m(e,t,s,o){s&&Object.defineProperty(e,t,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(o):void 0})}function b(e,t,s,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce((function(s,o){return o(e,t,s)||s}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const g="store";let f=(n=b((o=class{constructor(){m(this,"activePollingAPI",n,this),m(this,"timerObject",r,this),m(this,"apiSourceMap",a,this),m(this,"startPollingForAPI",i,this)}setActivePollingAPI(e){this.activePollingAPI=e}setTimerObject(e){this.timerObject=e}setSource(e,t){const s=this.apiSourceMap[e]||[];h.includes(s,t)||(s.push(t),this.apiSourceMap[e]=s)}clearSource(e,t){const s=this.apiSourceMap[e]||[];-1!==s.indexOf(t)&&(this.apiSourceMap[e]=h.filter(s,(e=>e!==t)))}clearAPIAndSources(e){delete this.apiSourceMap[e]}clear(){this.setTimerObject(null),this.setActivePollingAPI(null)}stopPolling(e,t){if(e&&t)if(this.activePollingAPI===e){const s=this.apiSourceMap[e];t===g||h.isEmpty(s)||1===h.size(s)&&s[0]===t?((0,d.clearInterval)(this.timerObject),this.clear(),this.clearAPIAndSources(e),pm.logger.info(`APIPollingStore~stopPolling: Stopped Polling for ${e}`)):this.clearSource(e,t)}else this.clearSource(e,t)}startPolling(e,t){e&&t&&(this.setSource(e,t),e!==this.activePollingAPI&&this.startPollingForAPI(e,t))}}).prototype,"activePollingAPI",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=b(o.prototype,"timerObject",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=b(o.prototype,"apiSourceMap",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),b(o.prototype,"setActivePollingAPI",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setActivePollingAPI"),o.prototype),b(o.prototype,"setTimerObject",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setTimerObject"),o.prototype),b(o.prototype,"setSource",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"setSource"),o.prototype),b(o.prototype,"clearSource",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"clearSource"),o.prototype),b(o.prototype,"clearAPIAndSources",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"clearAPIAndSources"),o.prototype),b(o.prototype,"clear",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"clear"),o.prototype),b(o.prototype,"stopPolling",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"stopPolling"),o.prototype),i=b(o.prototype,"startPollingForAPI",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.debounce((e=>{this.activePollingAPI&&this.stopPolling(this.activePollingAPI,g);const t=u.launchDarkly.getFlag("api-git-sync-status-pull-delay",0);if(0!==t){var s;this.setActivePollingAPI(e);const o=(0,l.resolveStoreInstance)(c.default).find(this.activePollingAPI),n=null===(s=h.head(o.childEntities.values))||void 0===s?void 0:s.id,r=o.childEntities.find(n);this.apiRepositoryStore=h.get(r,"apiRepositoryStore"),pm.logger.info(`APIPollingStore~startPolling: Started Polling for ${e}`),this.apiRepositoryStore.sourceControlStore.init();const a=(0,d.setInterval)((()=>{h.isFunction(this.apiRepositoryStore.sourceControlStore.getLatestRemoteHead)&&this.apiRepositoryStore.sourceControlStore.getLatestRemoteHead()}),t);this.setTimerObject(a)}}),2e3)}}),b(o.prototype,"startPolling",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"startPolling"),o.prototype),o)},"./appsdk/contextbar/ContextBar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ContextBarPane:function(){return j}});var o,n=s("../../node_modules/react/index.js"),r=s("./appsdk/contextbar/ContextBarService.js"),a=s("./appsdk/contextbar/ContextBarHeader.js"),i=s("./js/constants/Panes.js"),l=s("./js/components/base/Panes.js"),c=s("./node_modules/classnames/index.js"),d=s.n(c),u=s("./js/components/empty-states/AetherCrashHandler.js"),p=s("./js/components/base/XPaths/XPath.js"),h=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),m=s("./js/constants/AppSettingsDefaults.js"),b=s("../../node_modules/mobx/lib/mobx.module.js"),g=s("./appsdk/contextbar/ContextBarUtil.js"),f=s("./js/stores/StoreManager.js"),y=s("./js/stores/ActiveWorkspaceSessionStore.js"),v=s("./node_modules/lodash/lodash.js");const S="auto";let j=(0,h.observer)(o=class extends l.Pane{constructor(e){super(e),this.contextBarService=new r.ContextBarService,this.handleSelect=this.handleSelect.bind(this),this.handleContextChange=this.handleContextChange.bind(this),this.handleClose=this.handleClose.bind(this),this.state={...this.state,collapsedX:!0},this.isOpen=!1}getContextForUrlIdentifier(e){return this.props.allowedContexts.find((t=>this.contextBarService.getConfig(t).urlIdentifier===e))}getUrlIdentifierForContext(e){return this.contextBarService.getConfig(e).urlIdentifier}getDimensions(e){return super.getDimensions({...e,width:{collapsedByDefault:true,shouldResistResize:true,default:440,collapsed:48,uncollapsed:440,min:m.default.ui.CONTEXT_BAR_MIN_WIDTH,max:S}})}componentDidMount(){let e=this.getContextForUrlIdentifier(this.contextBarService.activeContextUrlIdentifier)||this.props.allowedContexts&&this.props.allowedContexts[0];this.lastActive=e;let t=v.get(this.props,"collapsedByDefault",!0),s=(0,f.resolveStoreInstance)(y.default).activeEditor;!t&&this.props.editorId===s&&(0,g.updateContextQueryParams)(this.getUrlIdentifierForContext(e)),this.activeContextAutoRun=(0,b.autorun)((()=>{const e=this.contextBarService.getContextBarQueryParam(this.props.editorId);let t=this.getContextForUrlIdentifier(e);t!==this.state.activeContext&&this.setContext(t,!!t)}))}componentWillUnmount(){this.props.allowedContexts.forEach((e=>{this.contextBarService.willDestroy(e)})),this.activeContextAutoRun&&this.activeContextAutoRun()}componentDidUpdate(){this.contextBarService.pruneControllers(this.props.allowedContexts),this.isOpen&&this.state.collapsedX?(this.isOpen=!this.state.collapsedX,(0,g.removeContextQueryParams)()):this.isOpen||this.state.collapsedX||(this.isOpen=!this.state.collapsedX,this.state.activeContext||(0,g.updateContextQueryParams)(this.getUrlIdentifierForContext(this.lastActive)))}handleSelect(e){this.setContext(e,!0)}handleContextChange(e){(0,g.updateContextQueryParams)(this.getUrlIdentifierForContext(e))}setContext(e,t=!1){let s=this.state.activeContext;return new Promise((o=>{this.setState({activeContext:e},(()=>Promise.all([this.contextBarService.getControllerFor(e,this.props.contextData),this.contextBarService.getViewFor(e)]).then((([t,n])=>{e===this.state.activeContext&&this.setState({activeController:t,ActiveView:n},(()=>(this.contextBarService.didDeactivate(s),this.contextBarService.didActivate(this.state.activeContext),o())))})).then((()=>{this.state.activeContext&&(this.lastActive=this.state.activeContext),t?this.unCollapse("x"):this.collapse("x")}))))}))}handleClose(){this.collapse("x"),this.props.onClose&&this.props.onClose()}render(){let e=this.state.ActiveView,t=this.props.allowedContexts||this.props.visibleContexts,s=this.contextBarService.getConfig(this.state.activeContext),o=this.state.activeController;const r=d()({pane:!0,resizableX:this.isResizable("x"),resizableY:this.isResizable("y"),collapsedX:this.state.collapsedX,collapsedY:this.state.collapsedY},"right-context-bar"),c={height:this.state.height,width:this.state.width,...this.props.style||{}};return n.createElement(p.default,{identifier:"contextBar"},n.createElement("div",{className:r,style:c},n.createElement(u.default,null,n.createElement(l.PaneHeader,{defaultLayout:i.PANE_LAYOUT_VERTICAL,verticalComponent:n.createElement(a.ContextBarHeader,{visibleContexts:t,onSelect:this.handleContextChange,contextBarService:this.contextBarService,activeContext:this.state.activeContext,width:this.state.width,contextData:this.props.contextData}),isCollapsedX:this.state.collapsedX,isCollapsedY:this.state.collapsedY,onCollapseToggle:this.handleCollapseToggle}),n.createElement(l.PaneContent,{isCollapsedX:this.state.collapsedX,isCollapsedY:this.state.collapsedY},this.state.width?n.createElement("div",{className:"right-context-bar-content-container"},e&&s&&n.createElement(u.default,{onClose:this.handleClose},n.createElement(e,{contextData:this.props.contextData,title:s.title,onClose:this.handleClose,controller:o,editorId:this.props.editorId}))):null))))}})||o;j.defaultProps={width:{collapsedByDefault:true,shouldResistResize:true,default:440,collapsed:48,uncollapsed:440,min:350,max:S}}},"./appsdk/contextbar/ContextBarHeader.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ContextBarHeader:function(){return b}});var o,n=s("../../node_modules/react/index.js"),r=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=s("./js/components/base/Tooltips.js"),i=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=s("./node_modules/classnames/index.js"),c=s.n(l),d=s("./js/components/base/XPaths/XPath.js"),u=s("./growth/foundation/public/amplitude/AmplitudeService.js"),p=s("./api-dev/navigation/constants.js"),h=s("./api-dev/components/api-version/context-bar/api-source-control/APISourceControlContextBarView/APISourceControlContextBarIcon.js"),m=s("./node_modules/lodash/lodash.js");let b=(0,i.observer)(o=class extends n.Component{constructor(e){super(e),this.state={},this.tooltipTargets={},this.handleShowTooltip=this.handleShowTooltip.bind(this),this.handleHideTooltip=this.handleHideTooltip.bind(this)}componentWillUnmount(){clearTimeout(this.titleTooltip)}handleShowTooltip(e){this.titleTooltip=setTimeout((()=>{this.setState({[e]:!0})}),500)}handleHideTooltip(e){clearTimeout(this.titleTooltip),this.state[e]&&this.setState({[e]:!1})}render(){let e=this.props.visibleContexts;const t=e=>e.name===p.SOURCE_CONTROL_NAV?n.createElement(h.default,{ref:t=>{this.tooltipTargets[e.name]=t},apiRepositoryStore:m.get(this.props,"contextData.apiRepositoryStore")||m.get(this.props,"contextData.model.apiRepositoryStore"),handleShowTooltip:this.handleShowTooltip.bind(null,e.name),handleHideTooltip:this.handleHideTooltip.bind(null,e.name)}):n.createElement("div",{className:`tabs__${e.name} icon-container`,ref:t=>{this.tooltipTargets[e.name]=t},onMouseEnter:this.handleShowTooltip.bind(null,e.name),onMouseLeave:this.handleHideTooltip.bind(null,e.name)},n.createElement(r.default,{name:e.icon}));return n.createElement("div",{className:"right-context-bar-options"},n.createElement("ul",null,e.map((e=>{let s=this.props.contextBarService.getConfig(e);return s?n.createElement(d.default,{key:s.name,identifier:s.name},n.createElement("li",{key:s.name,onClick:()=>{this.props.onSelect(s.name),u.Ampli.contextBarListItemClicked({item_name:s.name,...(0,u.getAmpliCTAProperties)({ctaType:"other"})})},className:c()({active:s.name===this.props.activeContext&&this.props.width>300})},n.createElement(n.Fragment,{key:s.name},t(s),n.createElement(a.Tooltip,{show:s&&this.state[s.name],target:s&&this.tooltipTargets[s.name],placement:"left",immediate:!0},n.createElement(a.TooltipBody,null,s&&s.title))))):null}))))}})||o},"./appsdk/contextbar/ContextBarService.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ContextBarService:function(){return p}});var o,n=s("./appsdk/contextbar/ContextBarRegistry.js"),r=s("./js/services/NavigationService.js"),a=s("../../node_modules/mobx/lib/mobx.module.js"),i=s("./js/utils/NavigationUtil.js"),l=s("./appsdk/contextbar/ContextBarUtil.js"),c=(s("./js/containers/scratchpad/ContextBarScratchPadSignInPromptContainer.js"),s("./appsdk/workbench/WorkbenchService.js")),d=s("./node_modules/lodash/lodash.js"),u=s("../../node_modules/console-browserify/index.js");let p=(h=(o=class{constructor(){this._contextBarRegistry=n.default,this._controllerCache=new Map}get activeContextUrlIdentifier(){let e=r.default.currentURL.get(),{queryString:t}=(0,i.getUrlParts)(e);const s=(0,i._getQueryStringParams)(t);return s&&s[l.CONTEXT_BAR_QUERY_STRING_KEY]?s[l.CONTEXT_BAR_QUERY_STRING_KEY]:null}getContextBarQueryParam(e){return c.default.getTabController(e).contextBarQueryParam}pruneControllers(e){let t=new Set(e);for(let e of this._controllerCache.keys())t.has(e)||(this.willDestroy(e),this._controllerCache.delete(e))}getConfig(e){return this._contextBarRegistry._store.get(e)}getControllerFor(e,t){if(this._controllerCache.has(e))return this._controllerCache.get(e);let s=this.getConfig(e);if(!s)return;let o=s.getController;return o&&d.isFunction(o)?o().then((s=>{let o=new(0,s.default);this._controllerCache.set(e,o);try{o.didCreate&&o.didCreate(t)}catch(t){u.warn("ContextBarService: There was an error in the didCreate lifecycle of "+e)}return o})):void 0}getViewFor(e){let t=this.getConfig(e);return t&&t.getView().then((e=>e.default))}didActivate(e){this._triggerLifecycleMethod("didActivate",e)}didDeactivate(e){this._triggerLifecycleMethod("didDeactivate",e)}willDestroy(e){this._triggerLifecycleMethod("willDestroy",e)}_triggerLifecycleMethod(e,t){let s=this._controllerCache.get(t);if(s)try{s[e]&&s[e]()}catch(s){u.warn(`ContextBarService: There was an error in the ${e} lifecycle of ${t}`)}}}).prototype,m="activeContextUrlIdentifier",b=[a.computed],g=Object.getOwnPropertyDescriptor(o.prototype,"activeContextUrlIdentifier"),f=o.prototype,y={},Object.keys(g).forEach((function(e){y[e]=g[e]})),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=b.slice().reverse().reduce((function(e,t){return t(h,m,e)||e}),y),f&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(f):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(h,m,y),y=null),o);var h,m,b,g,f,y},"./js/containers/scratchpad/ContextBarScratchPadSignInPromptContainer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var o=s("../../node_modules/react/index.js"),n=s("./appsdk/contextbar/ContextBarViewHeader.js"),r=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=s("./js/components/base/Text.js"),i=s("./js/components/base/Buttons.js"),l=s("./js/services/ScratchpadService.js");class c extends o.Component{handleWorkspaceSwitch(){l.default.switchToWorkspace()}render(){return o.createElement("div",null,o.createElement(n.ContextBarViewHeader,{title:this.props.title,onClose:this.props.onClose}),o.createElement("div",{className:"contextbar-signin-prompt-state"},o.createElement("div",{className:"contextbar-signin-prompt-state__icon-container"},o.createElement(r.default,{className:"contextbar-signin-prompt-state__icon",size:"large",color:"content-color-tertiary",name:this.props.icon})),o.createElement("div",{className:"contextbar-signin-prompt-state__title"},o.createElement("h4",null,"Switch to a workspace to use this feature")),o.createElement("div",{className:"contextbar-signin-prompt-state__body"},o.createElement(a.default,{type:"body-medium",value:"This is an online feature and is only available in workspaces."})),o.createElement(i.Button,{className:"contextbar-signin-prompt-state__switch-action",size:"large",onClick:this.handleWorkspaceSwitch,type:"primary"},"Switch to Workspaces")))}}},"./runtime-repl/_common/ConflictResolutionHelper.js":function(e,t,s){var o=s("./node_modules/lodash/lodash.js");e.exports={detectConflict:function(e={},t={},s,n){if(!o.isFunction(n))return pm.logger.warn("ConflictResolutionHelper~detectConflict: Callback to process conflict state is required");if(!s||o.isEmpty(e)||o.isEmpty(t))return n(!1);const r=o([]).concat(o.keys(e)).concat(o.keys(t)).uniq().value();let a;for(a of r)if(o.has(e,a)&&o.has(t,a)&&!o.isEqual(e[a],t[a]))return n(!0);return n(!1)},getUpdates:function(e={},t={}){const s={},n=o([]).concat(o.keys(e)).concat(o.keys(t)).uniq().value();return o.forEach(n,(n=>{o.isEqual(e[n],t[n])||(s[n]=t[n])})),s}}},"./runtime-repl/_common/SyncEntityWithTimelineFetcher.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var o=s("./node_modules/rxjs/_esm5/internal/operators/take.js"),n=s("./node_modules/rxjs/_esm5/internal/operators/find.js"),r=s("../../node_modules/mobx/lib/mobx.module.js"),a=s("./js/stores/StoreManager.js"),i=s("./js/stores/SyncStatusStore.js"),l=s("./js/utils/uid-helper.js"),c=s("./js/modules/sync-timeline-helpers/index.js"),d=s("./js/constants/SyncStatusConstants.js"),u=s("./js/models/sync/services/SyncOfflineElementsService.js"),p=s("./runtime-repl/_common/SyncEntityFetcher.js"),h=s("./runtime-repl/_common/Errors.ts"),m=s("./node_modules/lodash/lodash.js");class b extends p.default{async _isEntityPresentInActiveWorkspace(e,t){throw new Error(`${this.constructor.name}~_isEntityPresentInActiveWorkspace: Method not implemented`)}async _getTimelineId(e,t){throw new Error(`${this.constructor.name}~_getTimelineId: Method not implemented`)}get _store(){throw new Error(`${this.constructor.name}~_store getter: Method not implemented`)}async _onEntityAvailable(e,t,s){return"browser"===window.SDK_PLATFORM||s.noWorkspace?Promise.any([this._onEntityTimelineInSync(e,t),this._onEntityAvailableInStore(e)]):this._onEntityAvailableInStore(e)}async _onEntityTimelineInSync(e,t){const s=await this._getTimelineId(e,t);if(await(0,c.syncAndSubscribeTimeline)(s,!0),await async function(e){return(0,c.getTimelineStatusObservable)(e).pipe((0,o.take)(1)).toPromise()}(s)!==d.SYNC_STATUS_IN_SYNC)return(0,c.getTimelineStatusObservable)(s).pipe((0,n.find)((e=>e===d.SYNC_STATUS_ERROR||e===d.SYNC_STATUS_IN_SYNC))).toPromise().then((e=>{if(e===d.SYNC_STATUS_ERROR)throw new h.EntitySyncError(`${this.constructor.name}~_onEntityTimelineInSync: Error in syncing`)}))}async _onEntityAvailableInStore(e){const{modelId:t}=(0,l.decomposeUID)(e);if(!this._store)throw new Error(`${this.constructor.name}~_onEntityAvailableInStore: ${this.type} store not found`);await(0,r.when)((()=>this._store.find(t)),{timeout:15e3})}async _isEntityPresentInWorkspace(e,t,s){if(!e||"string"!=typeof e)throw new TypeError(`${this.constructor.name}~_isEntityPresentInWorkspace: Invalid ${this.type} uid`);if(!s||"string"!=typeof s)throw new TypeError(`${this.constructor.name}~_isEntityPresentInWorkspace: Invalid workspace ID`);const o=u.default.getUnsyncedCollectionsForWorkspace(s),n=u.default.getUnsyncedEnvironmentsForWorkspace(s);if(o&&m.isFunction(o.has)&&o.has(e)||n&&m.isFunction(n.has)&&n.has(e))return!0;try{await(0,a.resolveStoreInstance)(i.default).onSyncAvailable({timeout:3e3})}catch(e){return pm.logger.warn(`${this.constructor.name}~_isEntityPresentInWorkspace: Error waiting for sync socket: ${e&&e.message?e.message:e}`),!1}return this._isEntityPresentInActiveWorkspace(e,t)}}},"./runtime-repl/_common/WorkbenchStatusConstants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{API_NO_PERMISSION:function(){return c},API_REDIRECT_CONSUMER_ENTITY:function(){return d},DELETED:function(){return a},ERROR:function(){return r},LOADING:function(){return n},NO_TAB_MODE:function(){return i},READY:function(){return o},TAB_MODE:function(){return l}});const o="ready",n="loading",r="error",a="deleted",i="no-tab-mode",l="tab-mode",c="api-no-permission",d="api-redirect"},"./runtime-repl/_common/components/EntityTabEmptyShell/EntityTabEmptyShell.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var o=s("../../node_modules/react/index.js");function n(){return o.createElement("div",{className:"entity-tab-empty-shell"},o.createElement("div",{className:"entity-tab-empty-shell__left_editor"},o.createElement("div",{className:"entity-tab-empty-shell__header-wrapper"},o.createElement("div",{className:"entity-tab-empty-shell__header-wrapper__content"},o.createElement("div",{className:"entity-tab-empty-shell__header-wrapper__content__name-strip block"}),o.createElement("div",{className:"entity-tab-empty-shell__header-wrapper__content__actions"},o.createElement("div",{className:"box block"}),o.createElement("div",{className:"box block"}),o.createElement("div",{className:"box block"})))),o.createElement("div",{className:"entity-tab-empty-shell__body-wrapper"},o.createElement("div",{className:"entity-tab-empty-shell__body-wrapper__content"},o.createElement("div",{className:"tab-strip"},o.createElement("div",{className:"tab xl block"}),o.createElement("div",{className:"tab s block"}),o.createElement("div",{className:"tab xs block"}),o.createElement("div",{className:"tab md block"})),o.createElement("div",{className:"entity-tab-empty-shell__body-wrapper__content__primary block"}),o.createElement("div",{className:"entity-tab-empty-shell__body-wrapper__content__secondary block"})))),o.createElement("div",{className:"entity-tab-empty-shell__right-context-bar"},o.createElement("div",{className:"context-bar-options"},o.createElement("div",{className:"box block"}),o.createElement("div",{className:"box block"}),o.createElement("div",{className:"box block"}),o.createElement("div",{className:"box block"}),o.createElement("div",{className:"box block"})),o.createElement("div",{className:"context-bar-body"},o.createElement("div",{className:"context-bar-header"}),o.createElement("div",{className:"context-bar-close-icon"}))))}},"./runtime-repl/globals/GlobalsFetcher.js":function(e,t,s){"use strict";s.r(t);var o=s("./js/stores/StoreManager.js"),n=s("./js/stores/SyncStatusStore.js"),r=s("./js/services/WorkspaceService.js"),a=s("./js/modules/model-event.js"),i=s("./js/modules/pipelines/sync-action.js"),l=s("./runtime-repl/globals/datastores/controllers/GlobalsController.js"),c=s("./runtime-repl/_common/Errors.ts"),d=s("./runtime-repl/_common/ActiveWorkspaceHelpers.js"),u=s("./runtime-repl/_common/SyncEntityWithTimelineFetcher.js"),p=s("./node_modules/lodash/lodash.js");class h extends u.default{constructor(...e){super(...e),this.type="globals"}async _fetchFromDB(e){return l.default.get({workspace:e})}async _getTimelineId(e){return{modelId:e,model:"workspace"}}async fetchOne(e){const t=e||await(0,d.getActiveWorkspaceId)();let s=await this._fetchFromDB(t);if(s)return s;if(await(0,o.resolveStoreInstance)(n.default).onSyncAvailable(),await this._onEntityTimelineInSync(t),s=await this._fetchFromDB(t),s||(s=await r.default.fetchGlobals(t),(0,i.default)((0,a.createEvent)("createOrUpdate","globals",p.cloneDeep(s)))),!s)throw new c.EntityNotFoundError;return s}}t.default=new h},"./runtime-repl/globals/workbench/GlobalsEditor/GlobalsEditor.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var o,n=s("../../node_modules/react/index.js"),r=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=s("./node_modules/prop-types/index.js"),i=s.n(a),l=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=s("./js/components/base/Panes.js"),d=s("./js/components/base/XPaths/XPath.js"),u=s("./js/stores/PermissionStore.js"),p=s("./js/stores/ActiveWorkspaceStore.js"),h=s("./js/stores/OnlineStatusStore.js"),m=s("./js/stores/CurrentUserStore.js"),b=s("./js/stores/StoreManager.js"),g=s("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),f=s("./js/services/conversion/promisifiedConverter.js"),y=s("./js/constants/AppSettingsDefaults.js"),v=s("./js/constants/AppUrlConstants.js"),S=s("./js/constants/Panes.js"),j=s("./js/components/base/Buttons.js"),_=s("./runtime-repl/_common/variable-sync-settings/Store/VariableSyncSettingsStore.js"),C=s("./runtime-repl/_common/ContextBarIdentifiers.js"),E=s("./runtime-repl/_common/DisabledTooltipConstants.js"),I=s("./runtime-repl/globals/workbench/GlobalsWorkbenchModel.js"),x=s("./appsdk/contextbar/ContextBar.js"),k=s("./runtime-repl/_common/components/compound.js"),w=s("./runtime-repl/_common/components/molecule.js"),P=s("./node_modules/lodash/lodash.js");let T=(0,r.observer)(o=class extends n.Component{constructor(e){super(e),this.handleSave=this.handleSave.bind(this),this.handleExport=this.handleExport.bind(this),this.renderActions=this.renderActions.bind(this),this.handleValuesChange=this.handleValuesChange.bind(this),this.handleMaskingChange=this.handleMaskingChange.bind(this)}getTooltipForSave(e,t){return e?t?E.DISABLED_TOOLTIP_IS_OFFLINE:"Save globals":"No new changes to save."}getTooltipForExport(e){return e?"Sign in to take this action":"Export globals"}handleValuesChange(e,t){this.props.model.set("values",e),e.length>this.props.model.maskValuesMap.length&&this.props.model.pushMaskValue(),P.isFunction(t)&&t()}handleMaskingChange(e){this.props.model.toggleMaskValue(e)}handleSave(){this.props.model.requestSave&&this.props.model.requestSave()}handleExport(){(0,f.default)().then((e=>{const t={workspace:(0,b.resolveStoreInstance)(g.default).id};e.saveEntity(t,{type:"globals"})}))}renderActions(){const e=(0,b.resolveStoreInstance)(m.default),{userCanSave:t}=(0,b.resolveStoreInstance)(h.default),s=e&&e.isLoggedIn;return n.createElement(n.Fragment,null,n.createElement(d.default,{identifier:"globalsEditorSaveAction"},n.createElement(j.Button,{type:"tertiary",className:"globals-editor__action environment-editor__action-save",disabled:!t||!this.props.model.isDirty,tooltip:this.getTooltipForSave(this.props.model.isDirty,!t),onClick:this.handleSave},n.createElement(l.default,{name:"icon-action-save-stroke"}),"Save")),n.createElement(j.Button,{type:"tertiary",className:"globals-editor__action",onClick:this.handleExport,tooltip:this.getTooltipForExport(!s),disabled:"browser"===window.SDK_PLATFORM&&!s},n.createElement(l.default,{name:"icon-action-export-stroke"}),"Export"))}render(){const{model:e}=this.props,t=(0,b.resolveStoreInstance)(p.default).isMember&&(0,b.resolveStoreInstance)(u.default).can("edit","globals",e.globalsId);return n.createElement(c.PaneGroup,{defaultLayout:S.PANE_LAYOUT_HORIZONTAL},n.createElement(c.Pane,{width:{min:y.default.ui.WORKBENCH_MIN_WIDTH}},n.createElement(c.PaneContent,{className:"globals-editor"},n.createElement(w.EntityTabHeader,{name:e.name,disableNameEdit:!0,isEntityEditable:t,renderActions:this.renderActions,entityType:"globals",entityUID:e.globalsId}),n.createElement(k.VariablesEditor,{entityType:"globals",enableSensitiveVariableCreation:t,values:e.values,maskStatesMap:e.maskValuesMap,reorderMaskValue:e.reorderMaskValue,deleteMaskValues:e.deleteMaskValues,toggleMaskValue:this.handleMaskingChange,isEntityEditable:t,canRequestAccess:!1,onChange:this.handleValuesChange,disableVariableAlert:!0,meta:{text:"Global variables for a workspace are a set of variables that are always available within the scope of that workspace. They can be viewed and edited by anyone in that workspace.",linkText:"Learn more about globals",link:v.GLOBAL_VARIABLE_DOCS},bleed:!0,className:"globals-editor__variables-editor",disableSecretVariablesSync:t&&_.default.disableSecretVariablesSync,disableAllVariablesSync:t&&_.default.disableAllVariablesSync,disablePersistActionTooltip:t&&(_.default.disableAllVariablesSync||_.default.disableSecretVariablesSync)&&"Current values can’t persist as sync is disabled by admin.",disableResetActionTooltip:t&&(_.default.disableAllVariablesSync||_.default.disableSecretVariablesSync)&&"Current values can’t be reset as initial value is disabled.",enableFiltering:!0,enableVirtualization:!0,isDirty:e.isDirty,showAddNewRowOption:!0}))),n.createElement(x.ContextBarPane,{allowedContexts:[C.GLOBALS_INFO],contextData:{id:e.globalsId},width:y.default.ui.CONTEXT_BAR_WIDTH_CONFIG,editorId:this.props.editorId}))}})||o;T.propTypes={model:i().instanceOf(I.default).isRequired,editorId:i().string.isRequired}},"./runtime-repl/globals/workbench/GlobalsWorkbenchController.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var o,n,r=s("../../node_modules/mobx/lib/mobx.module.js"),a=s("./runtime-repl/globals/datastores/ActiveGlobalsStore.js"),i=s("./js/stores/StoreManager.js"),l=s("./js/stores/ActiveWorkspaceStore.js"),c=s("./js/modules/services/DBResourceWatcher.js"),d=s("./runtime-repl/_common/VariableSessionHelper.js"),u=s("./runtime-repl/_common/VariableSessionService.js"),p=s("./runtime-repl/globals/datastores/controllers/GlobalsController.js"),h=s("./runtime-repl/_common/variable-sync-settings/Store/VariableSyncSettingsStore.js"),m=s("./runtime-repl/globals/workbench/GlobalsWorkbenchModel.js"),b=s("./appsdk/workbench/BaseWorkbenchController.js"),g=s("./runtime-repl/_common/ConflictResolutionHelper.js"),f=s("./runtime-repl/globals/GlobalsFetcher.js"),y=s("./runtime-repl/_common/ModelConstant.js"),v=s("./runtime-repl/_common/WorkbenchStatusConstants.js"),S=s("./node_modules/lodash/lodash.js");function j(e,t,s,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce((function(s,o){return o(e,t,s)||s}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const _="Conflict",C="Global variables has been modified since you last opened the tab.";let E=(o=class extends b.default{constructor(){var e,t,s,o;super(),this.model=null,this.globalsId=null,this.sessionId=null,this.globalsWatcherId=null,this.sessionWatcherId=null,e=this,t="status",o=this,(s=n)&&Object.defineProperty(e,t,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(o):void 0}),this.handleResourceChangedDebounced=S.debounce(this.handleResourceChanged,100)}setWorkbenchStatus(e){this.status=e}handleResourceChanged(e,t){const s=this.model.transform&&this.model.transform(e,t),o=(0,g.getUpdates)(this.model.initialState,s),n=this.model.updates;(0,g.detectConflict)(o,n,this.model.isDirty,(s=>{s?this.setStatus(_,C):(this.clearStatus(),this.model.handleIncomingUpdates(e,t))}))}restoreGlobalsState(){const e=this.getPersistedTrackedState();e&&e.isDirty&&this.model&&(this.model._trackedGlobals.set((0,r.toJS)(e.updates)),(0,g.detectConflict)(this.model.initialState,e.initialState,this.model.isDirty,(t=>{t&&(this.model._trackedGlobals.setInitialState((0,r.toJS)(e.initialState)),this.setStatus(_,C))})))}handleGlobalsChanged(e){this.model&&this.sessionId?(0,u.getSessionFor)(this.sessionId,e).then((t=>this.handleResourceChangedDebounced(e,t))).catch((e=>pm.logger.error("GlobalsWorkbenchController~handleGlobalsChanged: Error in fetching the session",e))):pm.logger.warn("GlobalsWorkbenchController~handleGlobalsChanged: Model or Session not found")}handleSessionChanged(e){this.model?p.default.get({id:this.globalsId}).then((t=>this.handleResourceChangedDebounced(t,e))).catch((e=>pm.logger.error("GlobalsWorkbenchController~handleSessionChanged: Error in fetching the globals",e))):pm.logger.warn("GlobalsWorkbenchController~handleSessionChanged: Model not found")}startWatching(){!this.globalsWatcherId&&(this.globalsWatcherId=c.default.watch({model:y.GLOBALS,modelId:this.globalsId},{onChanged:this.handleGlobalsChanged.bind(this)})),!this.sessionWatcherId&&(this.sessionWatcherId=c.default.watch({model:y.SESSION,modelId:this.sessionId},{onChanged:this.handleSessionChanged.bind(this)}))}stopWatching(){this.globalsWatcherId&&c.default.unwatch({model:y.GLOBALS,modelId:this.globalsId},this.globalsWatcherId),this.sessionWatcherId&&c.default.unwatch({model:y.SESSION,modelId:this.session},this.sessionWatcherId),this.globalsWatcherId=null,this.sessionWatcherId=null}didCreate(){this.setWorkbenchStatus(v.LOADING),f.default.fetchOne().then((e=>h.default.getSettings().then((()=>e)).catch((e=>(pm.logger.error(e),Promise.reject(new Error("GlobalsWorkbenchController~didCreate: Could not fetch Variable Sync Settings"))))))).then((e=>e?(this.globalsId=e.id,this.sessionId=(0,d.getSessionId)(y.GLOBALS,this.globalsId,(0,i.resolveStoreInstance)(l.default).id),(0,i.resolveStoreInstance)(a.default).session?(0,u.getSessionFor)(this.sessionId,e).then((t=>({globals:e,session:t}))):new Promise(((t,s)=>{const o=(0,r.reaction)((()=>(0,i.resolveStoreInstance)(a.default).session),(n=>{n&&(o&&o(),(0,u.getSessionFor)(this.sessionId,e).then((s=>t({globals:e,session:s}))).catch((e=>s(e))))}))}))):Promise.reject(new Error("GlobalsWorkbenchController~didCreate: Globals not found")))).then((({globals:e,session:t})=>{this.model=new m.default(e,t),this.attachTrackedState(this.model._trackedGlobals,this.model.save.bind(this.model),{persist:!0}),this.setConflictOptions({entityType:"globals"}),this.restoreGlobalsState(),this.startWatching(),this.setWorkbenchStatus(v.READY)})).catch((e=>{pm.logger.error("GlobalsWorkbenchController~didCreate: Error in loading globals or its session",e),this.setWorkbenchStatus(v.ERROR)}))}didDeactivate(){this.model.setMaskedValuesDefaults()}beforeDestroy(){this.stopWatching(),this.detachTrackedState(),this.model=null}},n=j(o.prototype,"status",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.LOADING}}),j(o.prototype,"setWorkbenchStatus",[r.action],Object.getOwnPropertyDescriptor(o.prototype,"setWorkbenchStatus"),o.prototype),o)},"./runtime-repl/globals/workbench/GlobalsWorkbenchModel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var o,n,r,a,i,l,c=s("../../node_modules/mobx/lib/mobx.module.js"),d=s("./js/stores/ActiveWorkspaceStore.js"),u=s("./js/stores/OnlineStatusStore.js"),p=s("./js/stores/ActiveWorkspaceSessionStore.js"),h=s("./js/stores/StoreManager.js"),m=s("./js/stores/PermissionStore.js"),b=s("./js/modules/model-event.js"),g=s("./js/modules/pipelines/user-action.js"),f=s("./runtime-repl/_common/VariableSessionHelper.js"),y=s("./js/services/EditorService.js"),v=s("./runtime-repl/_common/constants/sensitiveDataConstants.js"),S=s("./runtime-repl/_common/variable-sync-settings/Store/VariableSyncSettingsStore.js"),j=s("./appsdk/tracked-state/ObservableTrackedState.js"),_=s("./runtime-repl/_common/ToastHelpers.js"),C=s("./runtime-repl/_common/ModelConstant.js"),E=s("./node_modules/lodash/lodash.js");function I(e,t,s,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce((function(s,o){return o(e,t,s)||s}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let x=(o=c.action.bound,n=c.action.bound,r=c.action.bound,(l=class{constructor(e,t){var s,o,n,r;this.globalsId=null,this._trackedGlobals=null,this.name="Globals",s=this,o="maskedValuesMap",r=this,(n=i)&&Object.defineProperty(s,o,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0}),this.globalsId=e.id,this._trackedGlobals=new j.ObservableTrackedState(this.transform(e,t)),this.setMaskedValuesDefaults()}set values(e){this._trackedGlobals.set({values:e})}get values(){return this._trackedGlobals.get("values")}get isDirty(){return this._trackedGlobals.isDirty}get initialState(){return this._trackedGlobals.initialState}get updates(){return this._trackedGlobals.updates}get maskValuesMap(){return this.maskedValuesMap}get actionMenuContext(){return{canEditEntity:(0,h.resolveStoreInstance)(m.default).can("edit",C.GLOBALS,this.globalsId)}}toggleMaskValue(e){const t=this.maskedValuesMap[e];this.maskedValuesMap[e]=!t}pushMaskValue(){this.maskedValuesMap.push(E.last(this.values).type===v.SECRET)}setMaskedValuesDefaults(){E.forEach(this.values,((e,t)=>{this.maskedValuesMap[t]=e.type===v.SECRET}))}reorderMaskValue(e,t,s){const o=this.maskedValuesMap[e];this.maskedValuesMap.splice(e,1),this.maskedValuesMap.splice(t+("after"===s),0,o)}deleteMaskValues(e){this.maskedValuesMap=E.filter(this.maskedValuesMap,((t,s)=>-1===e.indexOf(s)))}handleIncomingUpdates(e,t){e&&t&&(this._trackedGlobals.setInitialState(this.transform(e,t)),this.setMaskedValuesDefaults())}resetTracking(){this._trackedGlobals.reset({values:this.values})}transform(e,t){if(e&&t)return{values:(0,f.zipVariables)(e.values,t.values)};pm.logger.warn("GlobalsWorkbenchModel~transform: Globals or its Session not found")}get globals(){return E.pick(this,this.constructor.editableKeys)}set(e,t){this[e]=t}sanitizeForDisabledSync(){const{disableSecretVariablesSync:e,disableAllVariablesSync:t}=S.default.getSettingsSync();(t||e)&&(this.values=t?E.map(this.values,(e=>({...e,value:""}))):E.map(this.values,(e=>e.type===v.SECRET?{...e,value:""}:e)))}requestSave(){y.default.requestSave({id:(0,h.resolveStoreInstance)(p.default).activeEditor})}save(){if(!this.isDirty)return Promise.resolve();if(!(0,h.resolveStoreInstance)(u.default).userCanSave)return(0,_.showOfflineActionDisabledToast)();if(!this.globalsId)return pm.logger.error("GlobalsWorkbenchController~save: Globals id not found"),Promise.reject(new Error("Globals id not found"));this.sanitizeForDisabledSync();const{variables:e,sessionVariables:t}=(0,f.unzipVariables)(this.values);return Promise.resolve().then((()=>(0,h.resolveStoreInstance)(m.default).can("edit",C.GLOBALS,this.globalsId)?(0,g.default)((0,b.createEvent)("update",C.GLOBALS,{id:this.globalsId,values:e})):Promise.resolve())).then((()=>{const e=(0,h.resolveStoreInstance)(d.default).id,s=(0,b.createEvent)("update",C.SESSION,{id:(0,f.getSessionId)(C.GLOBALS,this.globalsId,e),model:C.GLOBALS,modelId:this.globalsId,workspace:e,values:t});return(0,g.default)(s)})).then((()=>this.resetTracking())).catch((e=>(pm.logger.error("Error while updating globals or it's session",e),pm.toasts.error("Something went wrong while saving the globals.",{dedupeId:"globals-tab-save"}),Promise.reject(new Error("Error while updating globals or it's session")))))}}).editableKeys=["values"],i=I((a=l).prototype,"maskedValuesMap",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I(a.prototype,"values",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"values"),a.prototype),I(a.prototype,"isDirty",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"isDirty"),a.prototype),I(a.prototype,"initialState",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"initialState"),a.prototype),I(a.prototype,"updates",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"updates"),a.prototype),I(a.prototype,"maskValuesMap",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"maskValuesMap"),a.prototype),I(a.prototype,"actionMenuContext",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"actionMenuContext"),a.prototype),I(a.prototype,"toggleMaskValue",[o],Object.getOwnPropertyDescriptor(a.prototype,"toggleMaskValue"),a.prototype),I(a.prototype,"pushMaskValue",[c.action],Object.getOwnPropertyDescriptor(a.prototype,"pushMaskValue"),a.prototype),I(a.prototype,"setMaskedValuesDefaults",[c.action],Object.getOwnPropertyDescriptor(a.prototype,"setMaskedValuesDefaults"),a.prototype),I(a.prototype,"reorderMaskValue",[n],Object.getOwnPropertyDescriptor(a.prototype,"reorderMaskValue"),a.prototype),I(a.prototype,"deleteMaskValues",[r],Object.getOwnPropertyDescriptor(a.prototype,"deleteMaskValues"),a.prototype),I(a.prototype,"globals",[c.computed],Object.getOwnPropertyDescriptor(a.prototype,"globals"),a.prototype),I(a.prototype,"set",[c.action],Object.getOwnPropertyDescriptor(a.prototype,"set"),a.prototype),I(a.prototype,"sanitizeForDisabledSync",[c.action],Object.getOwnPropertyDescriptor(a.prototype,"sanitizeForDisabledSync"),a.prototype),a)},"./runtime-repl/globals/workbench/GlobalsWorkbenchView.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var o,n=s("../../node_modules/react/index.js"),r=s("./node_modules/prop-types/index.js"),a=s.n(r),i=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=s("./js/stores/StoreManager.js"),c=s("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),d=s("../../packages/universe/universe-common/index.js"),u=s("./runtime-repl/_common/components/molecule.js"),p=s("./runtime-repl/globals/workbench/GlobalsEditor/GlobalsEditor.js"),h=s("./runtime-repl/globals/workbench/GlobalsWorkbenchModel.js"),m=s("./runtime-repl/_common/WorkbenchStatusConstants.js"),b=s("./runtime-repl/_common/components/EntityTabEmptyShell/EntityTabEmptyShell.js"),g=s("./node_modules/lodash/lodash.js");let f=(0,i.observer)(o=class extends n.Component{componentDidMount(){const e=(0,l.resolveStoreInstance)(c.default);"public"===e.visibilityStatus&&(0,d.getIndexStatus)("workspace",e.id).then((e=>{g.get(e,"index",!0)||g.invoke(this,"props.controller.setPublicEntityMetaData",{content:"noindex,nofollow"})}))}render(){const{model:e,status:t}=this.props.controller,s=this.props.id;return t===m.ERROR?n.createElement(u.EntityTabLoadingError,{type:"error",userFriendlyEntityName:"globals"}):t===m.READY?n.createElement(p.default,{editorId:s,model:e}):n.createElement(b.default,null)}})||o;f.propTypes={controller:a().shape({model:a().instanceOf(h.default),status:a().oneOf([m.ERROR,m.READY,m.LOADING])}).isRequired,id:a().string.isRequired}}}]);