/*! For license information please see ObservabilityIntegrationWorkbench.js.LICENSE.txt */
"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[46],{"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js":function(e,t,i){i.r(t),i.d(t,{DefaultMultiSelectMenuList:function(){return y},MultiSelectChip:function(){return m},MultiSelectChipCloseIcon:function(){return h},MultiSelectChipLabel:function(){return f},MultiSelectOption:function(){return u}});var n=i("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=i("../../node_modules/react/index.js"),s=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=i("../../node_modules/@postman/aether/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke-small.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=["isDisabled","isFocused","children"],d=s.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectOption",componentId:"sc-1e7h8n3-0"})(["display:flex;align-items:center;cursor:pointer;font-size:",";line-height:",";padding:",";border-radius:",";color:",";"," ",""],(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["line-height-m"]}),(function(e){return"".concat(e.theme["spacing-xs"]," ").concat(e.theme["spacing-m"],";")}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.isFocused&&!e.isDisabled&&"background-color: ".concat(e.theme["highlight-background-color-primary"],";")}),(function(e){return e.isDisabled&&"\n      cursor: not-allowed;\n      color: ".concat(e.theme["content-color-tertiary"],";\n    ")}));function u(e){var t=e.isDisabled,i=e.isFocused,s=e.children,o=(0,n.default)(e,c);return a.createElement(r.c.Option,o,a.createElement(d,{isDisabled:t,isFocused:i},s))}var p=s.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChipCloseIcon",componentId:"sc-1e7h8n3-1"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";margin-left:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:",";svg path{fill:",";}&:hover{background-color:",";svg path{fill:",";}}"],(function(e){return e.theme["size-s"]}),(function(e){return e.theme["size-s"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-primary"]}));function h(e){return a.createElement(r.c.MultiValueRemove,e,a.createElement(p,{className:"aether-multiselect-dropdown__multi-value-chip--remove-icon"},a.createElement(o.default,null)))}var g=s.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChip",componentId:"sc-1e7h8n3-2"})(["box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;height:",";padding:",";margin-bottom:",";margin-right:",";color:",";background-color:",";border-radius:",";"],(function(e){return e.theme["size-s"]}),(function(e){return"2px ".concat(e.theme["spacing-zero"]," 2px ").concat(e.theme["spacing-s"])}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["border-radius-default"]}));function m(e){var t=e.children;return a.createElement(g,{className:"aether-multiselect-dropdown__multi-select-chip"},t)}function f(e){var t=e.children;return a.createElement(l.default,{type:"body-medium"},t)}var b=(0,s.default)(r.c.MenuList).withConfig({displayName:"CustomMultiSelectComponents__StyledMenuList",componentId:"sc-1e7h8n3-3"})(["padding:8px;& .aether-multiselect-dropdown__group:not(:last-child){margin-bottom:12px;}& .aether-multiselect-dropdown__group:first-child{padding-top:4px;}"]);function y(e){var t=e.children;return a.createElement(b,e,t)}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js":function(e,t,i){i.r(t),i.d(t,{customBaseStyles:function(){return o},postmanSpecificStyles:function(){return r}});var n=i("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){(0,n.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var r=(0,i("../../node_modules/styled-components/dist/styled-components.browser.esm.js").css)(["& .aether-multiselect-dropdown__single-value{color:",";left:",";right:",";}& .aether-multiselect-dropdown__control{box-sizing:border-box;height:auto;min-height:32px;max-height:72px;overflow-x:hidden;overflow-y:auto;border:",";transition:border-color 0.2s ease-in-out,box-shadow 0.2s ease-in-out;background-color:",";& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:none;}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__value-container,& .aether-multiselect-dropdown__single-value{color:",";}&:hover{border-color:",";}&--is-focused{outline:none;border:",";box-shadow:",";&:hover{border:",";}& .aether-multiselect-dropdown__single-value{right:",";}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:inline-flex;}}&--is-disabled{user-select:none;cursor:not-allowed;background:",";border:",";color:",";& .aether-multiselect-dropdown__dropdown-indicator svg path{fill:",";}& .aether-multiselect-dropdown__multi-select-chip{color:",";}&:hover{border-color:",";}}","}& .aether-multiselect-dropdown__input{color:"," !important;caret-color:",";height:16px;}& .aether-multiselect-dropdown__placeholder{color:",";}& .aether-multiselect-dropdown__dropdown-indicator{svg path{fill:",";}padding:",";}& .aether-multiselect-dropdown__clear-indicator{padding:",";}"],(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["spacing-xl"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-default"],";")}),(function(e){return e.theme["background-color-primary"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["input-border-color-default"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return"0 0 0 2px ".concat(e.theme["input-shadow-focus"],";")}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return e.theme["spacing-xxxl"]}),(function(e){return e.theme["spacing-zero"]}),(function(e){return e.theme["input-background-color-disabled"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"],";")}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["border-color-strong"]}),(function(e){var t=e.validationState;return t.status?"\n          border-color: ".concat(e.theme["input-border-color-".concat(t.status)],";\n\n          &:hover {\n            border-color: ").concat(e.theme["input-border-color-".concat(t.status)],";\n          }\n\n          &--is-focused,\n          &--is-focused:hover {\n            border-color: ").concat(e.theme["input-border-color-focus"],";;\n          }\n        "):""}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-s"],";")}),(function(e){return e.theme["spacing-zero"]})),o={container:function(e){return s(s({},e),{},{pointerEvents:"auto"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}}}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js":function(e,t,i){i.r(t),i.d(t,{StyledCreatableReactSelect:function(){return b},StyledReactSelect:function(){return f},default:function(){return y}});var n=i("../../node_modules/@babel/runtime/helpers/esm/extends.js"),a=i("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../../node_modules/react/index.js"),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/node_modules/react-select/dist/react-select.esm.js"),l=i("../../node_modules/@postman/aether/node_modules/react-select/creatable/dist/react-select.esm.js"),c=i("../../node_modules/prop-types/index.js"),d=i.n(c),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/CustomComponents.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f=(0,r.default)(o.default).withConfig({displayName:"DefaultMultiSelect__StyledReactSelect",componentId:"sc-14ka43a-0"})(["",""],h.postmanSpecificStyles),b=(0,r.default)(l.default).withConfig({displayName:"DefaultMultiSelect__StyledCreatableReactSelect",componentId:"sc-14ka43a-1"})(["",""],h.postmanSpecificStyles);function y(e){var t=e["aria-label"],i=e["aria-labelledby"],a=e.id,r=e.isOpen,o=e.onChange,l=e.onCreateNewOption,c=e.onClose,d=e.onOpen,h=e.options,g=e.value,y=e.placeholder,v=e.emptyStateMessage,_=e.isDisabled,S=e.isLoading,I=e.isOptionDisabled,w=e.viaPortal,E=e.closeMenuOnSelect,x=e.validationState,A=e.allowCreateNewOption,P=e.customOptionComponent,T=e.menuMaxHeight,C=e.triggerWidth,D=e.containerWidth,j=e.className;function O(e,t){var i=t.action,n=t.option;"create-option"===i&&l&&l(n),o(e,{action:i,option:n})}return s.createElement(s.Fragment,null,A?s.createElement(b,(0,n.default)({isMulti:!0,inputId:a,menuIsOpen:r},w&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:O,onMenuClose:c,onMenuOpen:d},g&&{value:g},{options:h,placeholder:y,isDisabled:_,closeMenuOnSelect:E,"aria-label":t,"aria-labelledby":i},I&&{isOptionDisabled:I},{emptyStateMessage:v,formatOptionLabel:!S&&P,validationState:x,classNamePrefix:"aether-multiselect-dropdown",className:j,maxMenuHeight:T,styles:{container:function(e){return m(m({},e),{},{pointerEvents:"auto"})},control:function(e){return m(m({},e),{},{width:C})},input:function(e){return m(m({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return m(m({},e),{},{padding:0,margin:0})},groupHeading:function(e){return m(m({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return m(m({},e),{},{width:D,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return m(m({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return m(m({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return m(m({},e),{},{padding:"0"})},option:function(e){return m(m({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return m(m({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return m(m({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:u.EmptyState,Option:p.MultiSelectOption,Menu:u.Menu,MenuList:S?u.StaticLoader:p.DefaultMultiSelectMenuList,MultiValueContainer:p.MultiSelectChip,MultiValueLabel:p.MultiSelectChipLabel,MultiValueRemove:p.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:u.GroupHeading}})):s.createElement(f,(0,n.default)({isMulti:!0,inputId:a,menuIsOpen:r},w&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:O,onMenuClose:c,onMenuOpen:d},g&&{value:g},{options:h,placeholder:y,isDisabled:_,closeMenuOnSelect:E,"aria-label":t,"aria-labelledby":i},I&&{isOptionDisabled:I},{emptyStateMessage:v,formatOptionLabel:!S&&P,validationState:x,classNamePrefix:"aether-multiselect-dropdown",className:j,maxMenuHeight:T,styles:{container:function(e){return m(m({},e),{},{pointerEvents:"auto"})},control:function(e){return m(m({},e),{},{width:C})},input:function(e){return m(m({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return m(m({},e),{},{padding:0,margin:0})},groupHeading:function(e){return m(m({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return m(m({},e),{},{width:D,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return m(m({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return m(m({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return m(m({},e),{},{padding:"0"})},option:function(e){return m(m({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return m(m({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return m(m({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:u.EmptyState,Option:p.MultiSelectOption,Menu:u.Menu,MenuList:S?u.StaticLoader:p.DefaultMultiSelectMenuList,MultiValueContainer:p.MultiSelectChip,MultiValueLabel:p.MultiSelectChipLabel,MultiValueRemove:p.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:u.GroupHeading}})))}y.defaultProps={isOpen:void 0,onClose:null,onCreateNewOption:null,onOpen:null,value:null,"aria-label":void 0,"aria-labelledby":void 0,placeholder:"Select option",emptyStateMessage:"No options found",menuMaxHeight:"auto",triggerWidth:"auto",containerWidth:"auto",className:"",isDisabled:!1,isLoading:!1,viaPortal:!1,isOptionDisabled:function(){},closeMenuOnSelect:!1,allowCreateNewOption:!1,customOptionComponent:null,validationState:{status:"",message:""}},y.propTypes={onChange:d().func.isRequired,options:d().arrayOf(d().shape({label:d().string,value:d().oneOfType([d().string,d().number])})).isRequired,id:d().string.isRequired,"aria-label":d().string,"aria-labelledby":d().string,value:d().array,isOpen:d().bool,onClose:d().func,onCreateNewOption:function(e){var t=e.allowCreateNewOption,i=e.onCreateNewOption;return!t&&i?new Error("MultiSelect: onCreateNewOption is only allowed to be used when the prop allowCreateNewOption is passed as true."):i&&"function"!=typeof i?new Error("MultiSelect: Expected the type of the onCreateNewOption to be a function."):null},onOpen:d().func,placeholder:d().string,emptyStateMessage:d().string,menuMaxHeight:d().oneOfType([d().number,d().string]),triggerWidth:d().oneOfType([d().number,d().string]),containerWidth:d().oneOfType([d().string,d().number]),className:d().string,isDisabled:d().bool,isLoading:d().bool,viaPortal:d().bool,isOptionDisabled:d().func,closeMenuOnSelect:d().bool,allowCreateNewOption:d().bool,customOptionComponent:d().func,validationState:d().shape({status:d().oneOf(["","success","error","warning"]),message:d().string})}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var n=i("../../node_modules/@babel/runtime/helpers/esm/extends.js"),a=i("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=i("../../node_modules/react/index.js"),r=i("../../node_modules/prop-types/index.js"),o=i.n(r),l=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownContainer.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownLabel.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownValidationMessage.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js");function g(e){var t=(0,s.useRef)(null),i=(0,s.useState)(""),r=(0,a.default)(i,2),o=r[0],l=r[1],g=e.type,m=e.label,f=e.helperText,b=e.id,y=e.validationState,v=e["data-testid"],_=e["data-click"];return(0,s.useEffect)((function(){t.current&&(t.current.offsetWidth?l(t.current.offsetWidth):l("auto"))}),[]),"compact"===g?s.createElement(h.default,e):s.createElement(c.default,{ref:t,"data-aether-id":"aether-multiSelect","data-testid":v,"data-click":_},s.createElement(d.default,{id:b,label:m,helperText:f}),s.createElement(p.default,(0,n.default)({containerWidth:o},e)),s.createElement(u.default,{validationState:y}))}g.defaultProps={type:"default",id:"",label:"",helperText:"",validationState:{status:"",message:""},"data-testid":"aether-multi-select","data-click":""},g.propTypes={type:o().oneOf(["default","compact"]),id:o().string,label:function(e){var t=e.label;return t&&t.type!==l.default&&"string"!=typeof t?new Error("MultiSelect: label prop only accepts string or the Aether's Label component as valid value."):null},helperText:o().string,validationState:o().shape({status:o().oneOf(["","success","error","warning"]),message:o().string}),"data-testid":o().string,"data-click":o().string}},"../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js":function(e,t,i){i.r(t);var n=i("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=i("../../node_modules/react/index.js"),s=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=i("../../node_modules/prop-types/index.js"),o=i.n(r),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=s.default.input.attrs({type:"file"}).withConfig({displayName:"FileUploader__StyledInputFile",componentId:"yxf6ba-0"})(["height:0.1px;opacity:0;width:0.1px;z-index:-1;&:focus + label{box-shadow:",";outline:none;}"],(function(e){return e.theme["shadow-focus"]})),h=s.default.label.withConfig({displayName:"FileUploader__StyledFileUploaderLabel",componentId:"yxf6ba-1"})(["user-select:none;color:",";font-size:",";width:max-content;height:",";vertical-align:middle;line-height:",";display:inline-block;padding:",";border:",";border-color:",";box-sizing:border-box;border-radius:",";margin-top:",";&:hover{cursor:",";border-color:",";}"],(function(e){return e.isDisabled?e.theme["content-color-tertiary"]:e.theme["content-color-primary"]}),(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["size-m"]}),(function(e){return"calc(".concat(e.theme["line-height-xxl"]," - 2px)")}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-m"])}),(function(e){return e.theme["button-outline-border"]}),(function(e){return e.theme["button-outline-border-color"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.isDisabled?"not-allowed":"pointer"}),(function(e){return!e.isDisabled&&e.theme["button-outline-hover-border-color"]})),g=s.default.div.withConfig({displayName:"FileUploader__StyleFileListWrapper",componentId:"yxf6ba-2"})(["width:320px;height:32px;border-radius:",";padding-left:",";display:flex;justify-content:space-between;align-items:'center';background-color:",";& .aether-remove-uploaded-file-btn{border-top-left-radius:0;border-bottom-left-radius:0;}color:",";"],(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["background-color-secondary"]}),(function(e){return e.theme["content-color-primary"]})),m=s.default.div.withConfig({displayName:"FileUploader__StyledFileNameContainer",componentId:"yxf6ba-3"})(["display:flex;align-items:center;width:258px;"]),f=a.forwardRef((function(e,t){var i=e.initialList,s=e.label,r=e.helperText,o=e.actionLabel,f=e.id,b=e.name,y=e.className,v=e.isDisabled,_=e.multiple,S=e.onChange,I=e.accept,w=e.autoFocus,E=e["data-testid"],x=e["data-click"],A=(0,a.useState)(!_&&Array.isArray(i)?i:[]),P=(0,n.default)(A,2),T=P[0],C=P[1],D=(0,a.useRef)(null);D=t||D;var j=(0,a.useRef)(null);return a.createElement(l.default,{direction:"column"},a.createElement(c.default,{size:"medium"},s),r&&a.createElement(d.default,{type:"_input-meta-text",color:"content-color-secondary",lineLengthType:"none"},r),a.createElement(p,{id:f,ref:D,onChange:function(e){var t=e.target,i=t&&t.files;0!==i.length?(C(Object.values(i).map((function(e){return{name:e.name}}))),j.current=i,S&&!v&&S(i)):D.current.files=j.current},multiple:_,disabled:v,accept:I,name:b,className:y,"data-testid":E,"data-click":x,autoFocus:w}),a.createElement(h,{"data-aether-id":"aether-label",htmlFor:f,isDisabled:v},o),T.length>0&&a.createElement(l.default,{direction:"column",padding:{paddingTop:"spacing-l"},gap:"spacing-xs"},T.map((function(e){return a.createElement(g,{className:"aether-file-list-wrapper","data-aether-id":"aether-fileUploader",key:e.name},a.createElement(m,null,a.createElement(d.default,{type:"body-medium",isTruncated:!0},e.name)),a.createElement(u.default,{className:"aether-remove-uploaded-file-btn",onClick:function(){!function(e){for(var t=D.current&&D.current.files,i=new DataTransfer,n=0;n<t.length;n+=1){var a=t[n];e!==a.name&&i.items.add(a)}C(T.filter((function(t){return e!==t.name}))),D.current.files=i.files,S&&!v&&S(D.current.files)}(e.name)},type:"tertiary",icon:"icon-action-close-stroke"}))}))))}));f.defaultProps={initialList:void 0,helperText:"",actionLabel:"Add Files",isDisabled:!1,multiple:!1,accept:"*",name:"",className:"",autoFocus:!1,"data-testid":"aether-file-uploader","data-click":""},f.propTypes={initialList:o().arrayOf(o().object),label:o().string.isRequired,onChange:o().func.isRequired,helperText:o().string,actionLabel:o().node,id:o().string.isRequired,name:o().string,className:o().string,isDisabled:o().bool,multiple:o().bool,accept:o().string,autoFocus:o().bool,"data-testid":o().string,"data-click":o().string},f.displayName="FileUploader",t.default=f},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/prop-types/index.js"),s=i.n(a),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=r.default.span.withConfig({displayName:"Step__StyledStatusIndicator",componentId:"hb80lw-0"})(["width:12px;height:12px;box-sizing:border-box;border-radius:",";border:",";background-color:",";"],(function(e){return e.theme["border-radius-max"]}),(function(e){return"progress"!==e.status?"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["grey-40"]):""}),(function(e){return"progress"===e.status?e.theme["base-color-brand"]:e.theme["background-color-primary"]})),p=r.default.div.withConfig({displayName:"Step__StyledStepWrapper",componentId:"hb80lw-1"})(["display:inline;padding-left:",";& > .aether-step__label{& > .aether-button__text{color:",";&:hover{color:",";}}}"],(function(e){return e.theme["spacing-xs"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-primary"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-link"]})),h=(0,r.default)(d.default).withConfig({displayName:"Step__StyledCustomCurrentStepText",componentId:"hb80lw-2"})(["line-height:1.334;"]);function g(e){var t=e.label,i=e.status,a=e.isDisabled,s=e._stepIndex,r=e._onChange,d=e._isActive,g=e.className;return n.createElement(l.default,{basis:"0px",grow:1,shrink:1,alignItems:"center",className:g,padding:{paddingRight:"spacing-l"}},"completed"===i?n.createElement(o.default,{name:"icon-state-success-stroke-small",color:"content-color-primary",size:"small"}):n.createElement(u,{status:i}),n.createElement(p,{isDisabled:a},d?n.createElement(h,{color:"content-color-primary"},t):n.createElement(c.default,{className:"aether-step__label",isDisabled:a,text:t,type:"plain",onClick:function(){!a&&r&&r(s)}})))}g.defaultProps={className:"",status:"pending",isDisabled:!1,_isActive:!1,_stepIndex:0,_onChange:null},g.propTypes={label:s().string.isRequired,isDisabled:s().bool,_isActive:s().bool,status:s().oneOf(["pending","progress","completed"]),_stepIndex:s().number,_onChange:s().func,className:s().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/prop-types/index.js"),s=i.n(a),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=r.default.div.withConfig({displayName:"StepHeader__StyledProgressLine",componentId:"sc-1xnw5na-0"})(["position:relative;width:100%;height:2px;background-color:",";&:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:2px;width:",";max-width:100%;background-color:",";}"],(function(e){return e.theme["border-color-strong"]}),(function(e){return"".concat((e.activeStepIndex+1)/e.totalSteps*100,"%")}),(function(e){return e.theme["stepper-progress-line-background-color"]}));function d(e){var t=0,i=e._activeStepIndex,a=e._onChange,s=e.className,r=e.children,d=n.Children.map(r,(function(e){var s=e;return(0,n.isValidElement)(e)&&[o.default].includes(e.type)?(s=(0,n.cloneElement)(e,{_isActive:t===i,_stepIndex:t,_onChange:a}),t+=1,s):null}));return n.createElement(l.default,{gap:"spacing-s",className:s,direction:"column"},n.createElement(c,{activeStepIndex:i,totalSteps:d.length}),n.createElement(l.default,null,d))}d.defaultProps={className:"",_activeStepIndex:0,_onChange:null},d.propTypes={_activeStepIndex:s().number,_onChange:s().func,className:s().string,children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/prop-types/index.js"),s=i.n(a),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=r.default.div.withConfig({displayName:"StepPanel__StyledStepPanelElement",componentId:"sc-7pb8oz-0"})(["display:",";color:",";"],(function(e){return e._isActive?"block":"none"}),(function(e){return e.theme["content-color-primary"]}));function p(e){var t=e._isActive,i=e._index,a=e.heading,s=e.description,r=e.primaryAction,p=e.secondaryAction,h=e.className,g=e.children;return n.createElement(u,{_isActive:t,className:h,key:"STEP_CONTENT ".concat(i)},n.createElement(d.default,{direction:"column",gap:"spacing-xxl"},n.createElement(d.default,{direction:"column",gap:"spacing-l"},a||s?n.createElement(d.default,{direction:"column",gap:"spacing-s"},a?n.createElement(o.default,{type:"h3",text:a}):"",s?n.createElement(c.default,{type:"para"},s):""):"",g),n.createElement(d.default,{gap:"spacing-s",grow:1,shrink:1,justifyContent:"flex-end"},function(e){if(e&&e.type===l.default&&"secondary"===(e.props&&e.props.type))return e;return null}(p),function(e){if(e&&e.type===l.default&&"primary"===(e.props&&e.props.type))return e;return null}(r))))}p.defaultProps={_isActive:!1,heading:"",description:"",primaryAction:null,secondaryAction:null,className:"",_index:null},p.propTypes={_isActive:s().bool,_index:s().number,heading:s().string,description:s().string,primaryAction:function(e){var t=e.primaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: primaryAction prop only accepts Aether button component.");if("primary"!==(t.props&&t.props.type))return new Error("StepPanel: primaryAction prop only accepts button type primary.")}return null},secondaryAction:function(e){var t=e.secondaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: secondaryAction prop only accepts Aether button component.");if("secondary"!==(t.props&&t.props.type))return new Error("StepPanel: secondaryAction prop only accepts button type secondary.")}return null},className:s().string,children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/prop-types/index.js"),s=i.n(a),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),l=r.default.div.withConfig({displayName:"StepPanels__StyledStepPanelContainer",componentId:"sc-1bky6oo-0"})(["padding-top:",";padding-bottom:",";"],(function(e){return e.theme["spacing-xl"]}),(function(e){return e.theme["spacing-xl"]}));function c(e){var t=0,i=e._activeStepIndex,a=e.className,s=e.children,r=n.Children.map(s,(function(e){var a=e;return(0,n.isValidElement)(e)&&[o.default].includes(e.type)?(a=(0,n.cloneElement)(e,{_isActive:t===i,_index:t}),t+=1,a):null}));return n.createElement(l,{className:a},r)}c.defaultProps={_activeStepIndex:0,className:""},c.propTypes={_activeStepIndex:s().number,className:s().string,children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/prop-types/index.js"),s=i.n(a),r=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function c(e){var t=e.activeStepIndex,i=e.onChange,a=e.className,s=e.children,c=e["data-testid"],d=e["data-click"],u=n.Children.map(s,(function(e){if((0,n.isValidElement)(e)){if([r.default].includes(e.type))return(0,n.cloneElement)(e,{_activeStepIndex:t,_onChange:i});if([o.default].includes(e.type))return(0,n.cloneElement)(e,{_activeStepIndex:t})}return null}));return n.createElement(l.default,{className:a,direction:"column","data-aether-id":"aether-stepper","data-testid":c,"data-click":d,width:"100%"},u)}c.defaultProps={className:"",onChange:null,"data-testid":"aether-stepper","data-click":""},c.propTypes={activeStepIndex:s().number.isRequired,onChange:s().func,className:s().string,children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired,"data-testid":s().string,"data-click":s().string}},"./integrations/api-observability/AzureFormHelper.js":function(e,t,i){i.r(t),i.d(t,{generateApiList:function(){return s},isFormUpdated:function(){return a}});var n=i("./node_modules/lodash/lodash.js");function a(e,t){const i=s(n.get(e,"variables.linked_apis")),{linkedApis:a}=t,r=s(a);return!n.isEqual(i,r)}function s(e){return n.map(e,(e=>n.assign({},n.pick(e,["azure_subscription_id","azure_resource_group_id","azure_service_id","azure_service_path","azure_api_id","azure_api_path"]))))}},"./integrations/api-observability/components/add/ApiGateway.js":function(e,t,i){i.r(t),i.d(t,{ApiGatewayDefault:function(){return x},ApiGatewayIam:function(){return A},default:function(){return P}});var n,a,s=i("./node_modules/lodash/lodash.js"),r=i.n(s),o=i("../../node_modules/react/index.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./js/stores/StoreManager.js"),d=i("./js/stores/IntegrationsStore.js"),u=i("./js/stores/CurrentUserStore.js"),p=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),h=i("./js/components/base/Buttons.js"),g=i("./integrations/api-observability/services/index.js"),m=i("./js/services/NavigationService.js"),f=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),b=i("./integrations/api-observability/components/base/AddIntegration.js"),y=i("./integrations/api-observability/constants.ts"),v=i("./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js"),_=i("./appsdk/workbench/TabService.js"),S=i("./integrations/navigation/constants.js"),I=i("./integrations/api-observability/services/ApiGatewayService.js"),w=i("./api-dev/constants/APISubViews.js");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},E.apply(this,arguments)}let x=(0,l.observer)(n=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",auth_type:y.AWS_IAM_ROLE,aws_api_type:"http",consentProvided:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:"",nickname:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],custom_api_gateway:"",isCustomApiGatewayMandatory:!1,showApiGatewayInputField:!1,isAddingIntegration:!1,errorGateway:!1,loadingGateway:!1,errorNickname:"",availableApiGatewayTypes:y.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:y.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:y.AVAILABLE_AUTH_TYPES,selectedAuthType:y.AVAILABLE_AUTH_TYPES[0],currentAuthType:y.AWS_IAM_ROLE,integration_name:""},this.store=(0,c.resolveStoreInstance)(d.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.handleAwsAccessKeyInput=this.handleAwsAccessKeyInput.bind(this),this.handleAwsKeyIdInput=this.handleAwsKeyIdInput.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAuthTypeChange=this.handleAuthTypeChange.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.updateIsAddingIntegration=this.updateIsAddingIntegration.bind(this),this.fetchApiGatewaysDebounced=r().debounce(this.fetchApiGateways,1e3)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){let{aws_access_key:t,aws_region:i,aws_key_id:n}=this.state;this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{t&&i&&n&&this.fetchApiGateways()}))}handleAwsKeyIdInput(e){this.setState({aws_key_id:e,errorAwsKeyId:r().isEmpty(e.trim())?"Please enter an Access Key ID":""},(()=>{e&&this.state.aws_access_key&&this.state.aws_region&&this.fetchApiGatewaysDebounced()}))}handleAwsAccessKeyInput(e){this.setState({aws_access_key:e,errorAwsAccessKey:r().isEmpty(e.trim())?"Please enter a Secret Access Key":""},(()=>{e&&this.state.aws_key_id&&this.state.aws_region&&this.fetchApiGatewaysDebounced()}))}handleAwsRegionInput(e){this.setState({aws_region:e,errorAwsRegion:r().isEmpty(e.trim())?"Please enter the AWS region":""},(()=>{e&&this.state.aws_key_id&&this.state.aws_key_id&&this.fetchApiGatewaysDebounced()}))}handleAuthTypeChange(e){this.setState({currentAuthType:e.value,selectedAuthType:e,auth_type:e.value})}handleNameChange(e){this.setState({integration_name:e,errorNickname:r().isEmpty(e.trim())?"Please enter the Integration name":e.trim().length>255?"Name field can't have more than 255 characters":""})}fetchApiGateways(){let{aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:a}=this.state,{rule:s}=this.props;r().isEmpty(i)||r().isEmpty(t)||r().isEmpty(e)||(this.setState({verifying:!0,errorApiGateways:!1}),g.default[s].fetchApiGateways({aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:a,rule:s,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e})));this.setState({verifying:!1,availableApiGateways:t})})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))})))}updateIsAddingIntegration(e){this.setState({isAddingIntegration:e})}render(){let{rule:e,apiId:t,apiVersionId:i}=this.props,{aws_key_id:n,aws_access_key:a,aws_region:s,verifying:l,errorAwsKeyId:c,auth_type:d,aws_api_type:u,errorAwsAccessKey:g,errorAwsRegion:v,nickname:I,selectedAPIGateway:x,aws_api_gateway_id:P,aws_api_gateway_name:T,isCustomApiGatewayMandatory:C,errorGateway:D,availableApiGateways:j,availableApiGatewayTypes:O,selectedAPIGatewayType:R,currentAuthType:k,selectedAuthType:M,availableAuthTypes:L,integration_name:N,errorNickname:z,errorApiGateways:F,isAddingIntegration:V}=this.state,B={rule:e,name:N,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:d,aws_api_type:u,postman_api_id:t,aws_key_id:n,aws_access_key:a,aws_region:s,aws_api_gateway_id:P}},W=null;if(r().get(this.props,"additionalContext.releaseId")){const e=r().get(this.props,"additionalContext.releaseId");W={identifier:"build.release",routeParams:{apiId:B.api_id,versionId:B.executor,releaseId:e},queryParams:{tab:w.DEPLOYMENT}}}return o.createElement("div",null,o.createElement(p.SelectSegmentV2,{title:"AWS Authentication Method",placeholder:"Select AWS Authentication Type",options:L,value:M,onTargetSelect:this.handleAuthTypeChange}),o.createElement(p.FieldSegment,{mandatory:!0,id:"integration-name",placeholder:"Give a nickname to your integration.",title:"Nickname",value:N,error:z,onBlur:()=>{this.handleNameChange(N.trim())},onChange:e=>{this.handleNameChange(e)}}),k===y.AWS_IAM_ROLE?o.createElement(A,E({authType:d,integration_name:N},this.props)):o.createElement("div",null,o.createElement(p.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:O,value:R,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(p.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",description:"You can find the credentials in your AWS console. ",customLink:o.createElement(f.default,{extUrl:"https://go.pstmn.io/docs-aws-api-gateway-keys"},"Learn more"),placeholder:"Enter the AWS access key id",value:n,error:c,onChange:this.handleAwsKeyIdInput}),o.createElement(p.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",placeholder:"Enter the AWS access key",value:a,error:g,onChange:this.handleAwsAccessKeyInput}),o.createElement(p.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:s,error:v,onChange:this.handleAwsRegionInput}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(p.SelectSegmentV2,{title:"AWS Gateway",disabled:!!C,label:"Select AWS Gateway",options:j,value:x,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:F?"Unable to load API Gateways":"",loading:l,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(b.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!a||!n||!s||l||!j||r().isEmpty(P)||r().isEmpty(N),updateIsAddingIntegration:this.updateIsAddingIntegration,payload:B,redirect:W},"Connect"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",disabled:V,onClick:()=>{r().get(this.props,"additionalContext.releaseId")?m.default.transitionTo("build.release",{apiId:B.api_id,versionId:B.executor,releaseId:r().get(this.props,"additionalContext.releaseId")},{tab:w.DEPLOYMENT}):m.default.transitionTo("build.apiVersion",{apiId:B.api_id,versionId:B.executor},{tab:w.DEPLOYMENT}),_.default.closeByRoute(S.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:B.api_id})}},"Cancel")))))}})||n,A=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={aws_account_id:y.AWS_ACCOUNT_ID,external_id:"",role_arn:"",aws_region:"",consentProvided:!1,verifying:!1,verification:"",errorAwsRegion:"",aws_api_type:"http",errorRoleArn:"",showInfoBanner:!0,availableApiGatewayTypes:[{label:"HTTP",value:"http"},{label:"REST",value:"rest"}],selectedAPIGatewayType:{label:"HTTP",value:"http"}},this.store=(0,c.resolveStoreInstance)(d.default),this.currentUserStore=(0,c.resolveStoreInstance)(u.default),this.handleBannerClose=this.handleBannerClose.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.handleRoleArnInput=this.handleRoleArnInput.bind(this),this.fetchApiGatewaysDebounced=r().debounce(this.fetchApiGateways,1e3),this.updateIsAddingIntegration=this.updateIsAddingIntegration.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{this.state.role_arn&&!r().isEmpty(this.state.role_arn)&&this.state.aws_region&&!r().isEmpty(this.state.aws_region)&&this.fetchApiGateways()}))}fetchApiGateways(){let{aws_region:e,aws_api_type:t,role_arn:i,external_id:n}=this.state,{rule:a,authType:s}=this.props;r().isEmpty(e)||r().isEmpty(i)||(this.setState({verifying:!0,errorApiGateways:!1}),g.default[a].fetchApiGateways({role_arn:i,external_id:n,aws_region:e,auth_type:s,aws_api_type:t,rule:a,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e})));this.setState({verifying:!1,availableApiGateways:t})})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))})))}handleBannerClose(){this.setState({showInfoBanner:!1})}handleRoleArnInput(e){this.setState({role_arn:e,errorRoleArn:r().isEmpty(e)?"Please enter the role ARN":""},(()=>{!this.state.aws_region||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.role_arn)||this.fetchApiGatewaysDebounced()}))}handleAwsRegionInput(e){this.setState({aws_region:e.trim(),errorAwsRegion:r().isEmpty(e.trim())?"Please enter a AWS region":""},(()=>{!this.state.role_arn||r().isEmpty(this.state.role_arn)||r().isEmpty(this.state.aws_region)||this.fetchApiGatewaysDebounced()}))}setExternalId(){let e={rule:this.props.rule,type:"fetchExternalId"};I.default.fetchExternalId(e).then((e=>{this.setState({external_id:e})})).catch((e=>{pm.toasts.error("Something went wrong, please try again."),pm.logger.error("Something went wrong while fetching External ID",e)}))}updateIsAddingIntegration(e){this.setState({isAddingIntegration:e})}componentDidMount(){this.setExternalId()}render(){let{rule:e,apiId:t,apiVersionId:i,authType:n,integration_name:a}=this.props,{role_arn:s,aws_region:l,verifying:c,errorAwsRegion:d,errorRoleArn:u,external_id:g,showInfoBanner:y,aws_api_type:I,aws_api_gateway_id:E,availableApiGateways:x,selectedAPIGateway:A,errorGateway:P,availableApiGatewayTypes:T,selectedAPIGatewayType:C,errorApiGateways:D,isAddingIntegration:j}=this.state,O={rule:e,name:a,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:n,aws_api_type:I,role_arn:s,external_id:g,postman_api_id:t,aws_region:l,aws_api_gateway_id:E}},R=a.length<256,k=null;if(r().get(this.props,"additionalContext.releaseId")){const e=r().get(this.props,"additionalContext.releaseId");k={identifier:"build.release",routeParams:{apiId:O.api_id,versionId:O.executor,releaseId:e},queryParams:{tab:w.DEPLOYMENT}}}return o.createElement("div",null,o.createElement(p.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:T,value:C,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement("div",{className:"integrations-add-step"},o.createElement("div",{className:"integrations-add-step__title"},"Step 1: Create an IAM role"),o.createElement("div",{className:"integrations-add-step__text"},"Use the following credentials to create an IAM role for Postman in AWS. Learn how to ",o.createElement(f.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-iam"},"create an IAM role"))),o.createElement("div",{className:"integrations-info-segment--account-id"},o.createElement(v.default,{title:"AWS account ID",value:this.state.aws_account_id,description:"This assigns the IAM role to Postman."})),o.createElement(v.default,{title:"External ID",value:this.state.external_id,description:"This adds an extra level of security against malicious attacks."},o.createElement(f.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-confused-duty-problem"},"Learn more")),o.createElement("div",{className:"integrations-add-step"},o.createElement("div",{className:"integrations-add-step__title"},"Step 2: Enter role ARN and region")),o.createElement("div",{className:"integrations-field-segment__role-arn"},o.createElement(p.FieldSegment,{mandatory:!0,id:"role-arn",placeholder:"arn:aws:iam::79840258006:role/PostmanIntegration",title:"Role ARN",description:"Provided by AWS once the IAM role is created. It allows Postman to assume the IAM role.",value:s,error:u,onChange:this.handleRoleArnInput})),o.createElement(p.FieldSegment,{mandatory:!0,id:"aws-region",title:"AWS Region",placeholder:"Enter AWS Region",value:l,error:d,onChange:this.handleAwsRegionInput}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(p.SelectSegmentV2,{title:"AWS Gateway",label:"Select AWS Gateway",options:x,value:A,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:D?"Unable to load API Gateways":"",loading:c,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(b.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!s||!l||c||!x||r().isEmpty(E)||r().isEmpty(a)||!R,updateIsAddingIntegration:this.updateIsAddingIntegration,payload:O,redirect:k},"Connect"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",disabled:j,size:"small",onClick:()=>{r().get(this.props,"additionalContext.releaseId")?m.default.transitionTo("build.release",{apiId:O.api_id,versionId:O.executor,releaseId:r().get(this.props,"additionalContext.releaseId")},{tab:w.DEPLOYMENT}):m.default.transitionTo("build.apiVersion",{apiId:O.api_id,versionId:O.executor},{tab:w.DEPLOYMENT}),_.default.closeByRoute(S.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:O.api_id})}},"Cancel"))))}})||a;function P(e){const{rule:t}=e;return"api_gateway_aws"===t?o.createElement(x,e):o.createElement("div",null)}},"./integrations/api-observability/components/add/ApigeeAPIGateway.js":function(e,t,i){i.r(t),i.d(t,{APIGatewayApigeeSetup:function(){return B},ApigeeAuthenticationPanel:function(){return V},ApigeeConfigurationPanel:function(){return F},default:function(){return W}});var n,a,s,r=i("./node_modules/lodash/lodash.js"),o=i.n(r),l=i("../../node_modules/react/index.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./js/stores/StoreManager.js"),u=i("./integrations/api-observability/stores/APIObservabilityStore.js"),p=i("./api-dev/stores/APIListStore.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js"),b=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),y=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),v=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),_=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),S=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),I=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),w=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),E=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),x=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),A=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),P=i("./js/services/NavigationService.js"),T=i("./api-dev/constants/APISubViews.js"),C=i("./appsdk/workbench/TabService.js"),D=i("./integrations/navigation/constants.js"),j=i("./js/modules/services/AnalyticsService.js"),O=i("./js/components/base/LoadingIndicator.js"),R=i("./integrations/api-observability/constants.ts"),k=i("./js/external-navigation/ExternalNavigationService.js"),M=i("../../node_modules/mobx/lib/mobx.module.js"),L=i("./integrations/api-observability/components/base/CustomMultiSelect.js"),N=i("./integrations/api-observability/components/base/CustomDropdown.js");function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},z.apply(this,arguments)}let F=(0,c.observer)(n=class extends l.Component{constructor(e){super(e),this.state={fetchedOrganizations:[],selectedOrganization:null,integrationName:"",errorIntegrationName:"",fetchedApiProxies:[],selectedApiProxy:null,fetchedEnvironments:[],selectedEnvironments:null},this.store=(0,d.resolveStoreInstance)(u.default),this.apiListStore=(0,d.resolveStoreInstance)(p.default),this.handleSelectOrganization=this.handleSelectOrganization.bind(this),this.handleSelectApiProxy=this.handleSelectApiProxy.bind(this),this.handleSelectEnvironments=this.handleSelectEnvironments.bind(this),this.handleConnect=this.handleConnect.bind(this),this.navigateToDeploymentsTab=this.navigateToDeploymentsTab.bind(this),this.fetchOrganizations=o().debounce(this.fetchOrganizations.bind(this),1e3),this.fetchApiProxies=this.fetchApiProxies.bind(this),this.fetchEnvironments=this.fetchEnvironments.bind(this),this.addIntegration=this.addIntegration.bind(this),this.renderLoadingState=this.renderLoadingState.bind(this),this.getValidationState=this.getValidationState.bind(this)}componentDidUpdate(e){e.stepStatus[0]!==this.props.stepStatus[0]&&this.fetchOrganizations()}fetchOrganizations(){let{serviceAccountEmail:e,privateKey:t}=this.props;this.setState({isFetchingOrganization:!0});let i={service_account_email:e,private_key:t,classId:this.props.rule},n=R.FETCH_ORGANIZATIONS;A.default.fetchPreConfigurationGatewayActionDetails(n,i).then((e=>{let t=o().get(e,"body.data.organizations",[]),i=o().map(t,(e=>({label:e.organization,value:e.organization})));this.setState({fetchedOrganizations:i,isFetchingOrganization:!1,fetchErrorOrganizations:!1})})).catch((e=>{this.setState({fetchErrorOrganizations:!0,isFetchingOrganization:!1}),pm.toasts.error("Something went wrong while fetching Apigee organizations"),pm.logger.error("Something went wrong while fetching Apigee organizations",e)}))}fetchApiProxies(){let{serviceAccountEmail:e,privateKey:t}=this.props,{selectedOrganization:i}=this.state;this.setState({isFetchingApiProxies:!0});let n={service_account_email:e,private_key:t,organization:o().get(i,"value"),classId:this.props.rule},a=R.FETCH_API_PROXIES;A.default.fetchPreConfigurationGatewayActionDetails(a,n).then((e=>{let t=o().get(e,"body.data.proxies",[]),i=o().map(t,(e=>({label:e.name,value:e.name})));this.setState({fetchedApiProxies:i,isFetchingApiProxies:!1,fetchErrorApiProxies:!1})})).catch((e=>{this.setState({fetchErrorApiProxies:!0,isFetchingApiProxies:!1}),pm.toasts.error("Something went wrong while fetching Apigee API Proxies"),pm.logger.error("Something went wrong while fetching Apigee API Proxies",e)}))}fetchEnvironments(){let{serviceAccountEmail:e,privateKey:t}=this.props,{selectedOrganization:i}=this.state;this.setState({isFetchingEnvironments:!0});let n={service_account_email:e,private_key:t,organization:o().get(i,"value"),classId:this.props.rule},a=R.FETCH_ENVIRONMENTS;A.default.fetchPreConfigurationGatewayActionDetails(a,n).then((e=>{let t=o().map(o().get(e,"body.data",[]),(e=>({label:e,value:e})));this.setState({fetchedEnvironments:t,isFetchingEnvironments:!1,fetchErrorEnvironments:!1})})).catch((e=>{this.setState({fetchErrorEnvironments:!0,isFetchingEnvironments:!1}),pm.toasts.error("Something went wrong while fetching Apigee environments"),pm.logger.error("Something went wrong while fetching Apigee environments",e)}))}handleSelectOrganization(e){this.setState({selectedOrganization:e,errorOrganization:o().isEmpty(e),fetchedApiProxies:[],selectedApiProxy:[],selectedEnvironments:[],fetchedEnvironments:[]},(()=>{o().get(e,"value")&&(this.fetchApiProxies(R.PRE_CONFIG),this.fetchEnvironments(R.PRE_CONFIG))}))}handleSelectEnvironments(e){this.setState({selectedEnvironments:e,errorEnvironments:o().isEmpty(e)})}handleSelectApiProxy(e){this.setState({selectedApiProxy:e,errorApiProxy:o().isEmpty(e)})}navigateToDeploymentsTab(){let{apiId:e,apiVersionId:t}=this.props,i={apiId:e,versionId:t};C.default.closeByRoute(D.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),this.store.initializeApiObservabilityStore({apiId:e,apiVersionId:t,category:R.API_OBSERVABILITY}),P.default.transitionTo("build.apiVersion",i,{tab:T.DEPLOYMENT})}handleConnect(){let e,t,i,n,a,s,{selectedOrganization:r,selectedApiProxy:l,selectedEnvironments:c}=this.state,{apiVersionId:d,apiId:u,serviceAccountEmail:p,privateKey:h,rule:g}=this.props,m=(0,M.toJS)(this.apiListStore.members);n=o().find(m,(e=>u===o().get(e,"id"))),t=o().get(n,"name"),s=(0,M.toJS)(o().get(n,"childEntities.members")),a=o().find(s,(e=>d===o().get(e,"id"))),i=o().get(a,"name"),e={name:t+"-"+i+"-apigee",rule:g,entity:"apiversion",executor:d,variables:{postman_api_id:u,service_account_email:p,private_key:h,organization:o().get(r,"value"),api_proxy:o().get(l,"value"),environments:o().isArray(c)?c.map((e=>o().get(e,"value"))):[]}},this.setState({isAddingIntegration:!0}),t&&i?this.addIntegration(e,g):pm.toasts.error("Something went wrong while adding a new integration. Please try again")}addIntegration(e,t){A.default.createIntegration(null,e).then((e=>{this.setState({isAddingIntegration:!1}),200===o().get(e,"status")&&o().get(e,"body.model_id")?(pm.toasts.success("Added a new integration"),j.default.addEventV2({category:"integrations",action:t+"_created_integration",label:"team_integrations_create_forms",value:1}),this.navigateToDeploymentsTab()):pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.setState({isAddingIntegration:!1}),"integrationFoundError"===o().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while adding a new integration. Please try again."),pm.logger.error("Something went wrong while adding a new integration",e)}))}renderLoadingState(){return l.createElement(h.default,{justifyContent:"space-between"},l.createElement("div",null,"Loading..."),l.createElement(O.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(e){let{errorOrganization:t,fetchErrorOrganizations:i,errorApiProxy:n,fetchErrorApiProxies:a,errorEnvironments:s,fetchErrorEnvironments:r}=this.state;return"organization"===e?t||i?{status:"error",message:i?l.createElement("div",null,"Unable to load organizations.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchOrganizations()}},"Retry")):"Please select an organization."}:{}:"apiProxy"===e?n||a?{status:"error",message:a?l.createElement("div",null,"Unable to load API Proxies.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchApiProxies()}},"Retry")):"Please select an API Proxy."}:{}:s||r?{status:"error",message:r?l.createElement("div",null,"Unable to load environments.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEnvironments()}},"Retry")):"Please select one or more environments."}:{}}render(){const{fetchedOrganizations:e,selectedOrganization:t,fetchedApiProxies:i,selectedApiProxy:n,fetchedEnvironments:a,selectedEnvironments:s,isAddingIntegration:r,isFetchingOrganization:c,isFetchingApiProxies:d,isFetchingEnvironments:u}=this.state,{serviceAccountEmail:p,privateKey:h}=this.props,f=o().isEmpty(t)||o().isEmpty(n)||o().isEmpty(s)||!p||!h;return l.createElement("div",{className:"connect-apigee-gateway__form"},l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(N.default,{onChange:this.handleSelectOrganization,options:e||[],value:t,label:"Organization",placeholder:c?this.renderLoadingState():"Select Organization",className:c?"dropdown-icon-remove":"",emptyStateMessage:"No organizations found",isDisabled:c,validationState:this.getValidationState("organization"),menuWidth:R.DROPDOWN_WIDTH})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(N.default,{onChange:this.handleSelectApiProxy,options:i||[],value:n,label:"API Proxy",helperText:"Connection between Proxy and Postman API",placeholder:d?this.renderLoadingState():"Select API Proxy",className:d?"dropdown-icon-remove":"",isDisabled:!o().get(t,"value")||d,emptyStateMessage:"No API Proxies found",validationState:this.getValidationState("apiProxy"),menuWidth:R.DROPDOWN_WIDTH})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(L.default,{onChange:this.handleSelectEnvironments,options:a,value:s,label:"Environments",helperText:"Environments configured on Apigee X over which APIs are deployed",placeholder:u?this.renderLoadingState():"Select one or more environments",isDisabled:!o().get(t,"value")||u,emptyStateMessage:"No environments found",validationState:this.getValidationState("environments")})),l.createElement("div",{className:"connect-apigee-gateway__form--buttons"},l.createElement(g.default,null,l.createElement(m.default,{type:"secondary",size:"small",onClick:()=>{this.navigateToDeploymentsTab()},text:"Cancel",isDisabled:r}),l.createElement(m.default,{type:"primary",size:"small",onClick:()=>{this.handleConnect()},isDisabled:f,text:"Complete Setup",isLoading:r}))))}})||n,V=(0,c.observer)(a=class extends l.Component{constructor(e){super(e),this.setUploadedFile=e=>{let t=o().isObject(e)?e[0]:"";if(t){let e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=function(e){try{let t=JSON.parse(e.target.result),i=Object.keys(t),n=o().get(t,"client_email"),a=o().get(t,"private_key");if(this.setState({isFileUploaded:!0,serviceAccountEmail:n,privateKey:a}),!i.includes("client_email","private_key")){let e=new Error;throw e.name="invalidFileContent",e}this.props.handleServiceAccountEmail(n),this.props.handlePrivateKey(a)}catch(e){this.setState({isFileUploaded:!1}),"invalidFileContent"===e.name?(pm.toasts.error("Invalid file content. Please try selecting different file."),pm.logger.error("Something went wrong while parsing JSON file",e)):(pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Something went wrong while parsing JSON file",e))}}.bind(this)}else this.setState({isFileUploaded:!1,serviceAccountEmail:"",privateKey:""}),this.props.handleServiceAccountEmail(""),this.props.handlePrivateKey("")},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e,errorServiceAccountEmail:!e}),this.props.handleServiceAccountEmail(e)},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n"),errorPrivateKey:!e}),this.props.handlePrivateKey(e)},this.state={serviceAccountEmail:"",privateKey:""}}render(){const{serviceAccountEmail:e,privateKey:t,errorServiceAccountEmail:i,errorPrivateKey:n,isFileUploaded:a}=this.state;return l.createElement("div",null,l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__input"},l.createElement(f.default,{label:"Upload private key file (Optional)",helperText:l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__text"},l.createElement("div",null,"Upload private key file or manually enter the values below. "),l.createElement("div",null,"Only JSON file format is supported.")),id:"file-uploader",accept:".json",onChange:this.setUploadedFile,actionLabel:"Select File"})),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__service-account"},l.createElement(b.default,{placeholder:"Enter service account email",helperText:"Service Account Email associated with Google Cloud Project",value:e,onChange:e=>this.handleServiceAccountEmail(e.target.value),label:l.createElement(y.default,{text:"Service Account Email"}),validationStatus:i?"error":"",validationMessage:"Please enter service account email",isDisabled:a})),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__private-key"},l.createElement(v.default,{placeholder:"Enter private key",helperText:"Private key associated with the Service Account",value:t,onChange:e=>this.handlePrivateKey(e.target.value),label:l.createElement(y.default,{text:"Private Key"}),validationStatus:n?"error":"",validationMessage:"Please enter private key",isDisabled:a,isResizable:!1})))}})||a,B=(0,c.observer)(s=class extends l.Component{constructor(e){super(e),this.setActiveStepIndex=e=>{this.setState({activeStepIndex:e})},this.setStepStatus=e=>{this.setState({stepStatus:e})},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e})},this.handlePrivateKey=e=>{this.setState({privateKey:e})},this.renderDescription=()=>l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__text"},R.AUTHENTICATE_STEP_DESCRIPTION_1,l.createElement("div",null,"Follow these",l.createElement(_.default,{className:"connect-apigee-gateway__stepper__authorize__description",type:"link-default"},l.createElement("span",{onClick:()=>{(0,k.openExternalLink)("https://go.pstmn.io/apigee-setup-instructions","_blank")}},"instructions")),R.AUTHENTICATE_STEP_DESCRIPTION_2)),this.navigateToDeploymentsTab=()=>{let{apiId:e,apiVersionId:t}=this.props,i={apiId:e,versionId:t};C.default.closeByRoute(D.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),P.default.transitionTo("build.apiVersion",i,{tab:T.DEPLOYMENT})},this.authenticate=()=>{const{serviceAccountEmail:e,privateKey:t}=this.state;let i={service_account_email:e,private_key:t,classId:this.props.rule};A.default.fetchPreConfigurationGatewayActionDetails(R.FETCH_ORGANIZATIONS,i).then((e=>{200===e.status?(this.setState({isAuthenticated:!0,isLoading:!1}),this.setActiveStepIndex(1),this.setStepStatus(["completed","progress"])):this.setState({isAuthenticated:!1,isLoading:!1})})).catch((e=>{this.setState({isLoading:!1}),pm.toasts.error("Could not authorize. Please try again."),pm.logger.error("Could not get authorized.",e)}))},this.state={activeStepIndex:0,stepStatus:["progress","pending"],serviceAccountEmail:"",privateKey:""}}render(){const{activeStepIndex:e,stepStatus:t,serviceAccountEmail:i,privateKey:n,isLoading:a}=this.state;return l.createElement("div",{className:"connect-apigee-gateway__stepper"},l.createElement("div",null,l.createElement("div",{className:"connect-apigee-gateway__form--title"},"Connect to Apigee X"),l.createElement("div",{className:"connect-apigee-gateway__form--description"},"View deployment status of your API directly from Postman.")),l.createElement(S.default,{activeStepIndex:e,onChange:this.setActiveStepIndex},l.createElement(I.default,null,l.createElement(w.default,{status:t[0],label:"Authenticate",isDisabled:"pending"===t[0]||"completed"===t[0]}),l.createElement(w.default,{status:t[1],label:"Setup",isDisabled:"pending"===t[1]})),l.createElement(E.default,null,l.createElement(x.default,{heading:R.AUTHENTICATE_STEP_HEADING,description:this.renderDescription(),secondaryAction:l.createElement(m.default,{type:"secondary",size:"medium",text:"Cancel",onClick:()=>{this.navigateToDeploymentsTab()},isDisabled:a}),primaryAction:l.createElement(m.default,{type:"primary",size:"medium",text:"Connect",onClick:()=>{this.setState({isLoading:!0},(()=>this.authenticate()))},isDisabled:!i||!n,isLoading:a})},l.createElement(V,{handleServiceAccountEmail:this.handleServiceAccountEmail,handlePrivateKey:this.handlePrivateKey})),l.createElement(x.default,{heading:"Setup Apigee X"},l.createElement(F,z({},this.props,{serviceAccountEmail:i,privateKey:n,stepStatus:t}))))))}})||s;function W(e){const{rule:t}=e;return"api_gateway_apigee"===t?l.createElement(B,e):l.createElement("div",null)}},"./integrations/api-observability/components/add/Azure.js":function(e,t,i){i.r(t),i.d(t,{AzureSetup:function(){return E},default:function(){return x}});var n,a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("../../node_modules/react/index.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),u=i("./api-dev/constants/APISubViews.js"),p=i("./integrations/api-observability/components/base/AzureServiceConfig.js"),h=i("./integrations/api-observability/components/base/CancelButton.js"),g=i("./integrations/api-observability/components/base/AddIntegrationV2.js"),m=i("./node_modules/uuid/v4.js"),f=i.n(m),b=i("./integrations/navigation/constants.js"),y=i("./js/stores/StoreManager.js"),v=i("./integrations/api-observability/stores/APIObservabilityStore.js"),_=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),S=i("./integrations/api-observability/constants.ts"),I=i("./integrations/api-observability/services/Helper.js");function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},w.apply(this,arguments)}let E=(0,l.observer)(n=class extends r.Component{constructor(e){super(e),this.fetchConnectedApiMeta=()=>{_.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({selectedApiName:s().get(e,"name"),isFetchingApiMeta:!1})})).catch((e=>{this.setState({isFetchingApiMeta:!1,errorApiMeta:!0}),pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Error occurred while fetching APIs",e)})),_.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({selectedApiVersionName:s().get(e,"name"),isFetchingApiVersionMeta:!1})})).catch((e=>{this.setState({errorApiVersionMeta:!0,isFetchingApiVersionMeta:!1}),pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Error occurred while fetching API versions",e)}))},this.handleLinkedApis=(e,t)=>{let{linkedApis:i}=this.state,n=!1;e&&(i[t]=e),s().each(i,(e=>{if(!(s().get(e,"azure_subscription_id")&&s().get(e,"azure_resource_group_id")&&s().get(e,"azure_service_id")&&s().get(e,"azure_api_id")))return n=!0,!1})),this.setState({linkedApis:i,isDisabled:n})},this.generatePayload=()=>{const{apiId:e,apiVersionId:t,rule:i,accessToken:n,refreshToken:a}=this.props,{linkedApis:r,selectedApiName:o,selectedApiVersionName:l}=this.state;return new Promise(((c,d)=>{o&&l||(this.fetchConnectedApiMeta(),pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Error occurred while fetching API meta"),d());let u={entity:"apiversion",executor:t,name:o+"-"+l+"-azure",rule:i,variables:{linked_apis:[],azure_access_token:n,azure_refresh_token:a,postman_api_id:e,use_refresh_token:!0}};return s().each(r,(e=>{e=s().pick(e,["azure_subscription_id","azure_resource_group_id","azure_service_id","azure_service_path","azure_api_id","azure_api_path"]),u.variables.linked_apis.push(e)})),this.setState({payload:u},(()=>c(u)))}))},this.handleFetchedSubscriptions=e=>{this.setState({fetchedSubscriptions:e})},this.addSection=()=>{let{linkedApis:e}=this.state;const t=f()();e[t]={},s().each(e,(e=>{e.isCollapsed=!0})),e[t].isCollapsed=!1,this.setState({linkedApis:e})},this.removeSection=e=>{let{linkedApis:t}=this.state;t[e]&&delete t[e],this.setState({linkedApis:t})},this.handleCollapse=(e,t)=>{let{linkedApis:i}=this.state;i[e]&&(i[e].isCollapsed=t),this.setState({linkedApis:i})},this.renderSections=()=>{let{fetchedSubscriptions:e,linkedApis:t}=this.state,i=[],n=1,a=[];return s().isObject(t)&&s().each(Object.keys(t),(e=>{t[e].azure_api_path&&a.push(t[e].azure_api_path)})),s().isObject(t)&&s().each(t,((s,o)=>{let l=t[o].isCollapsed;i.push(r.createElement(p.default,w({},this.props,{key:o,index:o,handleLinkedApis:this.handleLinkedApis,selectedApiPaths:a,fetchedSubscriptions:e,handleFetchedSubscriptions:this.handleFetchedSubscriptions,handleRemoveSection:this.removeSection,handleCollapse:this.handleCollapse,isCollapsed:l,isRemoveHidden:1===Object.keys(t).length,formType:S.ADD,serialNumber:n}))),n++})),i},this.state={linkedApis:{},fetchedSubscriptions:[]},this.store=(0,y.resolveStoreInstance)(v.default)}componentDidMount(){this.fetchConnectedApiMeta();const{linkedApis:e}=this.state;e[f()()]={isCollapsed:!1},this.setState({linkedApis:e})}render(){const{payload:e,isDisabled:t}=this.state,{apiId:i,apiVersionId:n,rule:a}=this.props;return r.createElement("div",null,r.createElement("div",{className:"observability-azure-add-integration__service"},S.SETUP_AZURE_API_MANAGEMENT_SERVICES),this.renderSections(),r.createElement("div",{className:"observability-azure-add-integration__buttons__add-service"},r.createElement(c.default,{onClick:()=>{this.addSection()},type:"tertiary",size:"small",text:"Add Service",icon:r.createElement(d.default,null),isDisabled:t||this.store.isAdding})),r.createElement("div",{className:"observability-azure-add-integration__buttons"},r.createElement(g.default,{text:"Connect",payload:e,rule:a,apiId:i,apiVersionId:n,isDisabled:t,customAddIntegrationHandler:this.generatePayload,onSuccessfulIntegrationCreate:I.default.addAzureServicesAnalytics}),r.createElement("span",{className:"observability-azure-add-integration__buttons__cancel"},r.createElement(h.default,{text:"Cancel",apiId:i,apiVersionId:n,redirectUrl:b.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL}))))}})||n;function x(e){const{rule:t,apiId:i,apiVersionId:n}=e;return"api_management_azure"===t?r.createElement(E,e):r.createElement(o.default,{apiId:i,apiVersionId:n,tab:u.DEPLOYMENT})}},"./integrations/api-observability/components/add/index.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),a=i("./integrations/api-observability/components/add/ApiGateway.js"),s=i("./integrations/api-observability/components/add/ApigeeAPIGateway.js"),r=i("./integrations/api-observability/components/add/Azure.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("./api-dev/constants/APISubViews.js");const c={api_gateway_aws:a.default,api_gateway_apigee:s.default,api_management_azure:r.default};function d(e){const{service:t,apiId:i,apiVersionId:a}=e,s=c[t];return s?n.createElement(s,e):n.createElement(o.default,{apiId:i,apiVersionId:a,tab:l.DEPLOYMENT})}},"./integrations/api-observability/components/base/AddIntegration.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var n,a=i("../../node_modules/react/index.js"),s=i("./js/components/base/Buttons.js"),r=i("./js/components/base/LoadingIndicator.js"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=i("./js/stores/StoreManager.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("./js/stores/IntegrationsStore.js"),u=i("./js/services/NavigationService.js"),p=i("./appsdk/workbench/TabService.js"),h=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=i("./js/modules/services/AnalyticsService.js"),m=i("./integrations/navigation/constants.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./node_modules/classnames/index.js"),y=i.n(b),v=i("./api-dev/constants/APISubViews.js"),_=i("./integrations/api-observability/components/import-schema/index.js"),S=i("./node_modules/lodash/lodash.js");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},I.apply(this,arguments)}let w=(0,h.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.state={isAddingIntegration:!1}}render(){const{disabled:e,payload:t,workspaceId:i,service:n,alignLeft:l,updateIsAddingIntegration:c,...d}=this.props,{rule:h}=t,{isAddingIntegration:b}=this.state;return a.createElement("div",{className:y()("integrations-add-actions__button--container",{"align-left":l})},a.createElement(s.Button,I({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.setState({isAddingIntegration:!0}),c(!0),o.default.createIntegration(i||null,t).then((e=>{if(200===e.status&&e.body.model_id){if(pm.toasts.success("Added a new integration"),g.default.addEventV2({category:"integrations",action:h+"_created_integration",label:"team_integrations_create_forms",value:1}),this.setState({isAddingIntegration:!1}),c(!1),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(h,null),this.store.fetchIntegrationInstance("apiversion",t.executor),!_.default[h]){if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:i}=this.props.redirect;u.default.transitionTo(e,t,i)}else u.default.transitionTo(f.API_BUILDER_ROUTE_IDENTIFIERS.API_VERSION,{apiId:t.api_id,versionId:t.executor},{tab:v.DEPLOYMENT});p.default.closeByRoute(m.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:t.api_id})}pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-added`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:S.get(e,"body.model_id")})}else pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isAddingIntegration:!1}),c(!1)})).catch((e=>{this.setState({isAddingIntegration:!1}),c(!1),pm.toasts.error(S.get(e,"error.details")&&S.get(e,"error.details.message")||S.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},d),b?a.createElement(r.default,null):this.props.children))}})||n},"./integrations/api-observability/components/base/AddIntegrationV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),s=i("./appsdk/workbench/TabService.js"),r=i("./integrations/navigation/constants.js"),o=i("./js/services/NavigationService.js"),l=i("./api-dev/constants/APISubViews.js"),c=i("./node_modules/lodash/lodash.js"),d=i.n(c),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=i("./js/modules/services/AnalyticsService.js"),h=i("./js/stores/StoreManager.js"),g=i("./integrations/api-observability/stores/APIObservabilityStore.js"),m=i("./js/stores/IntegrationsStore.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./integrations/api-observability/components/import-schema/index.js");function y(e){let t=(0,h.resolveStoreInstance)(g.default),i=(0,h.resolveStoreInstance)(m.default);const c=(0,n.useCallback)((e=>{let{apiId:i,apiVersionId:n}=e,a={apiId:i,versionId:n};s.default.closeByRoute(r.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:i}),t.initializeApiObservabilityStore({apiId:i,apiVersionId:n,category:f.API_OBSERVABILITY}),o.default.transitionTo("build.apiVersion",a,{tab:l.DEPLOYMENT})}),[]),y=(0,n.useCallback)((e=>{let{service:t,rule:i}=e;o.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:i})}),[]),v=(0,n.useCallback)(((e,n)=>{const{rule:a,isBrowseIntegrationFlow:s,onSuccessfulIntegrationCreate:r}=e;n||(n=d().get(e,"payload")),t.updateIsAdding(!0),u.default.createIntegration(null,n).then((n=>{t.updateIsAdding(!1),200===d().get(n,"status")&&d().get(n,"body.model_id")?(pm.toasts.success("Added a new integration"),p.default.addEventV2({category:"integrations",action:a+"_created_integration",label:"team_integrations_create_forms",value:1}),d().isFunction(r)&&r(d().get(n,"body.data",{})),t.fetchIntegrationInstance("apiversion",e.apiVersionId),s?(i.setRuleSpecificTeamIntegrations(a,null),i.refetchTeamIntegrations(),i.resetAddIntegrationDependencies(),y(e)):b.default[e.rule]||c(e),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-added`,{apiId:e.apiId,apiVersionId:e.apiVersionId,integrationId:d().get(n,"body.model_id")})):pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{t.updateIsAdding(!1),"integrationFoundError"===d().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while adding a new integration. Please try again."),pm.logger.error("Something went wrong while adding a new integration",e)}))}),[]);return n.createElement(a.default,{type:"primary",size:"medium",onClick:()=>{d().isFunction(e.customAddIntegrationHandler)?e.customAddIntegrationHandler().then((t=>{v(e,t)})):v(e)},isDisabled:e.isDisabled||t.isAdding,text:e.text,isLoading:e.isLoading||t.isAdding})}},"./integrations/api-observability/components/base/AzureServiceConfig.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-up.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),d=i("./node_modules/lodash/lodash.js"),u=i.n(d),p=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=i("./js/components/base/LoadingIndicator.js"),g=i("./integrations/api-observability/services/AzureService.js"),m=i("./integrations/api-observability/constants.ts"),f=i("./integrations/api-observability/components/base/CustomDropdown.js"),b=i("./js/components/base/SearchHighlighter.js");let y=(0,p.observer)(n=class extends a.Component{constructor(e){super(e),this.filterApis=e=>{const{selectedApiPaths:t=[]}=this.props;let i=u().filter(e||[],(e=>!t.includes(u().get(e,"path"))||this.state.azureApiPath===u().get(e,"path")));this.setState({filteredApis:i})},this.renderLoadingState=()=>a.createElement(s.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading..."),a.createElement(h.default,{className:"loading-indicator-aether__dropdown"})),this.getSubscriptionValidationState=()=>{let{errorSubscription:e,fetchErrorSubscriptions:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load subscriptions.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchSubscriptionsWithIntegrationId():this.fetchSubscriptions()}},"Retry")):"Please select a subscription."}},this.getResourceGroupValidationState=()=>{let{errorResourceGroup:e,fetchErrorResourceGroups:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load resource groups.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchResourceGroupsWithIntegrationId():this.fetchResourceGroups()}},"Retry")):"Please select a resource group."}},this.getServiceValidationState=()=>{let{errorService:e,fetchErrorServices:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load services.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchServicesWithIntegrationId():this.fetchServices()}},"Retry")):"Please select a service."}},this.getApiValidationState=()=>{let{errorApi:e,fetchErrorApis:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load Apis.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchApisWithIntegrationId():this.fetchApis()}},"Retry")):"Please select an API."}},this.handleLinkedApiConfig=()=>{const{selectedSubscription:e,selectedResourceGroup:t,selectedService:i,selectedApi:n}=this.state;let{index:a}=this.props,s={azure_subscription_id:u().get(e,"value"),azure_resource_group_id:u().get(t,"value"),azure_service_id:u().get(i,"value"),azure_service_path:u().get(i,"path"),azure_api_id:u().get(n,"value"),azure_api_path:u().get(n,"path"),isCollapsed:!1};this.props.handleLinkedApis(s,a)},this.handleSelectSubscription=e=>{this.setState({selectedSubscription:e,azureSubscriptionId:u().get(e,"value"),errorSubscription:u().isEmpty(e),fetchedResourceGroups:[],selectedResourceGroup:[],fetchedServices:[],selectedService:[],fetchedApis:[],selectedApi:[],azureResourceGroupId:"",azureServiceId:"",azureApiId:""},(()=>{u().get(e,"value")&&(this.props.formType===m.EDIT?this.fetchResourceGroupsWithIntegrationId():this.fetchResourceGroups()),this.handleLinkedApiConfig()}))},this.handleSelectResourceGroup=e=>{this.setState({selectedResourceGroup:e,azureResourceGroupId:u().get(e,"value"),errorResourceGroup:u().isEmpty(e),fetchedServices:[],azureServiceId:"",azureApiId:"",selectedService:[],fetchedApis:[],selectedApi:[]},(()=>{u().get(e,"value")&&(this.props.formType===m.EDIT?this.fetchServicesWithIntegrationId():this.fetchServices()),this.handleLinkedApiConfig()}))},this.handleSelectService=e=>{this.setState({selectedService:e,errorService:u().isEmpty(e),azureServiceId:u().get(e,"value"),azureApiId:"",fetchedApis:[],selectedApi:[]},(()=>{u().get(e,"value")&&(this.props.formType===m.EDIT?this.fetchApisWithIntegrationId():this.fetchApis()),this.handleLinkedApiConfig()}))},this.handleSelectApi=e=>{this.setState({selectedApi:e,azureApiId:u().get(e,"value"),azureApiPath:u().get(e,"path"),errorApi:u().isEmpty(e)},(()=>{this.handleLinkedApiConfig()}))},this.fetchSubscriptionsWithIntegrationId=()=>{this.setState({isFetchingSubscriptions:!0});let e=[];g.default.fetchSubscriptionsWithIntegrationId(this.props.integrationId,{},m.LIST_SUBSCRIPTIONS).then((t=>{u().map(t,(t=>{u().get(t,"value")===this.state.azureSubscriptionId&&(e={label:u().get(t,"label"),value:u().get(t,"value")})})),this.setState({selectedSubscription:e,fetchedSubscriptions:t||[],isFetchingSubscriptions:!1,fetchErrorSubscriptions:!1}),this.props.handleFetchedSubscriptions(t)})).catch((e=>{this.setState({fetchErrorSubscriptions:!0,isFetchingSubscriptions:!1})}))},this.fetchSubscriptions=()=>{this.setState({isFetchingSubscriptions:!0});let{rule:e,accessToken:t}=this.props,i={azure_access_token:t};g.default.fetchSubscriptions(e,i,m.LIST_SUBSCRIPTIONS).then((e=>{this.setState({fetchedSubscriptions:e||[],isFetchingSubscriptions:!1,fetchErrorSubscriptions:!1}),this.props.handleFetchedSubscriptions(e)})).catch((e=>{this.setState({fetchErrorSubscriptions:!0,isFetchingSubscriptions:!1})}))},this.fetchResourceGroupsWithIntegrationId=()=>{this.setState({isFetchingResourceGroups:!0});let{selectedSubscription:e}=this.state,t=[],i={azure_subscription_id:this.state.azureSubscriptionId||u().get(e,"value")};g.default.fetchResourceGroupsWithIntegrationId(this.props.integrationId,i,m.LIST_RESOURCE_GROUPS).then((e=>{u().map(e,(e=>{u().get(e,"value")===this.state.azureResourceGroupId&&(t={label:u().get(e,"label"),value:u().get(e,"value")})})),this.setState({selectedResourceGroup:t,fetchedResourceGroups:e||[],isFetchingResourceGroups:!1,fetchErrorResourceGroups:!1})})).catch((e=>{this.setState({fetchErrorResourceGroups:!0,isFetchingResourceGroups:!1})}))},this.fetchResourceGroups=()=>{this.setState({isFetchingResourceGroups:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:i}=this.state,n={azure_access_token:t,azure_subscription_id:u().get(i,"value")};g.default.fetchResourceGroups(e,n,m.LIST_RESOURCE_GROUPS).then((e=>{this.setState({fetchedResourceGroups:e||[],isFetchingResourceGroups:!1,fetchErrorResourceGroups:!1})})).catch((e=>{this.setState({fetchErrorResourceGroups:!0,isFetchingResourceGroups:!1})}))},this.fetchServicesWithIntegrationId=()=>{this.setState({isFetchingServices:!0});let{selectedSubscription:e,selectedResourceGroup:t}=this.state,i=[],n={azure_subscription_id:this.state.azureSubscriptionId||u().get(e,"value"),azure_resource_group_id:this.state.azureResourceGroupId||u().get(t,"value")};g.default.fetchServicesWithIntegrationId(this.props.integrationId,n,m.LIST_SERVICES).then((e=>{u().map(e,(e=>{u().get(e,"value")===this.state.azureServiceId&&(i={label:u().get(e,"label"),value:u().get(e,"value"),path:u().get(e,"path")})})),this.setState({selectedService:i,fetchedServices:e||[],isFetchingServices:!1,fetchErrorServices:!1})})).catch((e=>{this.setState({fetchErrorServices:!0,isFetchingServices:!1})}))},this.fetchServices=()=>{this.setState({isFetchingServices:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:i,selectedResourceGroup:n}=this.state,a={azure_access_token:t,azure_subscription_id:u().get(i,"value"),azure_resource_group_id:u().get(n,"value")};g.default.fetchServices(e,a,m.LIST_SERVICES).then((e=>{this.setState({fetchedServices:e||[],isFetchingServices:!1,fetchErrorServices:!1})})).catch((e=>{this.setState({fetchErrorServices:!0,isFetchingServices:!1})}))},this.fetchApisWithIntegrationId=async()=>{this.setState({isFetchingApis:!0});let{selectedSubscription:e,selectedResourceGroup:t,selectedService:i}=this.state,n=[],a={azure_subscription_id:this.state.azureSubscriptionId||u().get(e,"value"),azure_resource_group_id:this.state.azureResourceGroupId||u().get(t,"value"),azure_service_id:this.state.azureServiceId||u().get(i,"value")};try{const e=await g.default.fetchApisWithIntegrationId(this.props.integrationId,a,m.LIST_APIS);let t=e;if(n=u().find(t,(e=>(null==e?void 0:e.value)===this.state.azureApiId)),u().isEmpty(n)){a.azureApiSearchQuery=this.state.azureApiId;const i=await g.default.fetchApisWithIntegrationId(this.props.integrationId,a,m.LIST_APIS);t=u().unionBy(i,e,"path"),n=u().find(t,(e=>(null==e?void 0:e.value)===this.state.azureApiId))}this.filterApis(t),this.setState({selectedApi:n,fetchedApis:t||[],isFetchingApis:!1,fetchErrorApis:!1})}catch(e){this.setState({fetchErrorApis:!0,isFetchingApis:!1})}},this.fetchApis=()=>{this.setState({isFetchingApis:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:i,selectedResourceGroup:n,selectedService:a}=this.state,s={azure_access_token:t,azure_subscription_id:u().get(i,"value"),azure_resource_group_id:u().get(n,"value"),azure_service_id:u().get(a,"value")};g.default.fetchApis(e,s,m.LIST_APIS).then((e=>{this.filterApis(e),this.setState({fetchedApis:e||[],isFetchingApis:!1,fetchErrorApis:!1})})).catch((e=>{this.setState({fetchErrorApis:!0,isFetchingApis:!1})}))},this.fetchApisWithSearchQuery=e=>{const{rule:t,accessToken:i,integrationId:n,formType:a}=this.props,{selectedSubscription:s,selectedResourceGroup:r,selectedService:o,azureSubscriptionId:l,azureResourceGroupId:c,fetchedApis:d,azureServiceId:p}=this.state,h={azure_access_token:i,azure_subscription_id:l||u().get(s,"value"),azure_resource_group_id:c||u().get(r,"value"),azure_service_id:p||u().get(o,"value"),azureApiSearchQuery:e};return(a===m.EDIT?g.default.fetchApisWithIntegrationId:g.default.fetchApis)(a===m.EDIT?n:t,h,m.LIST_APIS).then((e=>{const t=u().unionBy(e,d,"path");return this.setState({fetchedApis:t}),this.shouldSetFetchedApis&&this.filterApis(e),Promise.resolve()})).catch((e=>(pm.logger.error("Something went wrong while fetching APIs",e),Promise.reject(e))))},this.toggleSection=()=>{const{isCollapsed:e,index:t}=this.props;this.props.handleCollapse(t,!e)},this.hideContainer=()=>{let{isContainerVisible:e}=this.state,{index:t}=this.props;this.setState({isContainerVisible:!e}),this.props.handleRemoveSection(t),this.props.handleLinkedApis(null,t)},this.getApiDropdownOption=e=>{const{azureApiSearchQuery:t}=this.state,i=null==e?void 0:e.label;return a.createElement(b.default,{source:i,query:t,highlightClassName:"highlight-dropdown-options"})},this.state={fetchedSubscriptions:this.props.fetchedSubscriptions||[],fetchedResourceGroups:[],fetchedServices:[],isSectionVisible:!0,isContainerVisible:!0,azureSubscriptionId:u().get(this.props,"config.azure_subscription_id"),azureResourceGroupId:u().get(this.props,"config.azure_resource_group_id"),azureServiceId:u().get(this.props,"config.azure_service_id"),azureApiId:u().get(this.props,"config.azure_api_id"),azureApiPath:u().get(this.props,"config.azure_api_path"),filteredApis:[],fetchedApis:[],azureApiSearchQuery:""}}componentDidMount(){const{config:e,formType:t}=this.props;t===m.EDIT?u().isEmpty(e)?(this.props.handleLinkedApis({isCollapsed:!1},this.props.index),u().isEmpty(this.props.fetchedSubscriptions)&&this.fetchSubscriptions()):(this.props.handleLinkedApis(e,this.props.index),u().isEmpty(this.props.fetchedSubscriptions)&&(this.fetchSubscriptionsWithIntegrationId(),this.fetchResourceGroupsWithIntegrationId(),this.fetchServicesWithIntegrationId(),this.fetchApisWithIntegrationId())):(this.props.handleLinkedApis({isCollapsed:!1},this.props.index),u().isEmpty(this.props.fetchedSubscriptions)&&this.fetchSubscriptions())}componentDidUpdate(e,t,i){u().isEqual(e.selectedApiPaths,this.props.selectedApiPaths)||this.filterApis(this.state.fetchedApis)}render(){const{fetchedSubscriptions:e,selectedSubscription:t,isFetchingSubscriptions:i,fetchedResourceGroups:n,selectedResourceGroup:d,isFetchingResourceGroups:p,fetchedServices:h,selectedService:g,isFetchingServices:m,fetchedApis:b,filteredApis:y,selectedApi:v,isFetchingApis:_,isSectionVisible:S,isContainerVisible:I}=this.state,{isCollapsed:w}=this.props;return I?a.createElement(s.default,{direction:"column",className:"observability-azure-add-integration__service__section__container"},a.createElement("div",{className:w?"observability-azure-add-integration__service__section__setup-service":""},a.createElement(s.default,{justifyContent:"space-between"},a.createElement(s.default,{alignItems:"center"},a.createElement("div",{onClick:()=>{this.toggleSection()}},w?a.createElement(l.default,null):a.createElement(o.default,null)),a.createElement(r.default,{className:"observability-azure-add-integration__service__section__header",color:"content-color-primary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},"Service (",this.props.serialNumber,") Setup")),!this.props.isRemoveHidden&&a.createElement(s.default,{alignItems:"center",className:"observability-azure-add-integration__service__section__header__link"},a.createElement("div",{onClick:()=>{this.hideContainer()}},a.createElement(c.default,null)),a.createElement("div",{className:"observability-azure-add-integration__service__section__remove",onClick:()=>{this.hideContainer()}},a.createElement(r.default,{className:"observability-azure-add-integration__service__section__header",color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},"Remove"))))),!w&&a.createElement("div",{className:"observability-azure-add-integration__service__section"},a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectSubscription,options:e||[],value:t,label:"Subscription",placeholder:i?this.renderLoadingState():"Select Subscription",className:i?"dropdown-icon-remove":"",isDisabled:i,emptyStateMessage:"No Subscriptions found",validationState:this.getSubscriptionValidationState()})),a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectResourceGroup,options:n||[],value:d,label:"Resource Group",placeholder:p?this.renderLoadingState():"Select Resource Group",className:p?"dropdown-icon-remove":"",isDisabled:!u().get(t,"value")||p,emptyStateMessage:"No Resource Groups found",validationState:this.getResourceGroupValidationState()})),a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectService,options:h||[],value:g,label:"Service",placeholder:m?this.renderLoadingState():"Select Service",className:m?"dropdown-icon-remove":"",isDisabled:!u().get(d,"value")||m,emptyStateMessage:"No Services found",validationState:this.getServiceValidationState()})),a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectApi,options:y||[],value:v,label:"API Version",placeholder:_?this.renderLoadingState():"Select API Version",className:_?"dropdown-icon-remove":"",isDisabled:!u().get(g,"value")||_,emptyStateMessage:"No APIs found",validationState:this.getApiValidationState(),customOptionComponent:this.getApiDropdownOption,asyncLoader:async({search:e})=>{this.shouldSetFetchedApis=e,e||this.filterApis(b),this.setState({azureApiSearchQuery:e}),e&&await this.fetchApisWithSearchQuery(e)}})))):a.createElement("div",null)}})||n},"./integrations/api-observability/components/base/CancelButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("./appsdk/workbench/TabService.js"),o=i("./js/services/NavigationService.js"),l=i("./api-dev/constants/APISubViews.js"),c=i("./js/stores/StoreManager.js"),d=i("./integrations/api-observability/stores/APIObservabilityStore.js");let u=(0,i("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(n=class extends a.Component{constructor(e){super(e),this.navigateToDeploymentsTab=()=>{let{apiId:e,apiVersionId:t,integrationId:i,redirectUrl:n}=this.props,a={apiId:e,versionId:t},s={apiId:e};i&&(s.integrationId=i),r.default.closeByRoute(n,s),o.default.transitionTo("build.apiVersion",a,{tab:l.DEPLOYMENT})},this.state={}}render(){return a.createElement(s.default,{type:"secondary",size:"medium",onClick:()=>{this.props.isBrowseIntegrationFlow?o.default.back():this.navigateToDeploymentsTab()},text:this.props.text,isDisabled:this.props.isDisabled||(0,c.resolveStoreInstance)(d.default).isAdding})}})||n},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,i){i.r(t);var n=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const a=(0,i("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(n.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=a},"./integrations/api-observability/components/base/CustomMultiSelect.js":function(e,t,i){i.r(t);var n=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),s=i("./integrations/api-observability/constants.ts");const r=(0,n.default)(a.default)`
  & .aether-multiselect-dropdown__menu {
    width: ${s.DROPDOWN_WIDTH}px;
  }
`;t.default=r},"./integrations/api-observability/components/base/DeploySchemaActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),a=i("./appsdk/workbench/TabService.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),o=i("./integrations/navigation/constants.js"),l=i("./node_modules/lodash/lodash.js");class c extends n.Component{constructor(e){super(e),this.state={deployingAPI:!1}}render(){const{disabled:e,loading:t,onDeploy:i,payload:c,deployButtonText:d}=this.props;return n.createElement(s.default,{className:"deploy-form-container__segment__actions-container"},n.createElement(r.default,{className:"deploy-form-container__segment__actions-container__deploy",type:"primary",size:"medium",text:l.isEmpty(d)?"Deploy":d,onClick:i,tooltip:e&&"Make sure that you have entered all the mandatory fields",isDisabled:e,isLoading:t}),n.createElement(r.default,{className:"deploy-form-container__segment__actions-container__cancel",type:"secondary",size:"medium",text:"Cancel",onClick:()=>{a.default.closeByRoute(o.V10_API_DEPLOY_URL,{apiId:l.get(c,"apiId"),integrationId:l.get(c,"integrationId","").toString()})},isDisabled:t}))}}},"./integrations/api-observability/components/base/EditIntegration.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n,a=i("../../node_modules/react/index.js"),s=i("./js/components/base/Buttons.js"),r=i("./js/components/base/LoadingIndicator.js"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=i("./js/stores/StoreManager.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("./js/stores/IntegrationsStore.js"),u=i("./js/services/NavigationService.js"),p=i("./appsdk/workbench/TabService.js"),h=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=i("./js/modules/services/AnalyticsService.js"),m=i("./integrations/navigation/constants.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./node_modules/lodash/lodash.js");function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},y.apply(this,arguments)}let v=(0,h.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.state={isUpdating:!1}}render(){const{disabled:e,payload:t,integrationId:i,service:n,alignLeft:l,setIsUpdatingIntegration:c,...d}=this.props,{rule:h}=t;return a.createElement("div",{className:"integrations-add-actions__button--container"},a.createElement(s.Button,y({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.state.isUpdating,size:"small",tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:()=>{this.setState({isUpdating:!0},(()=>{c(!0),o.default.updateIntegration(i,t).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${b.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),g.default.addEventV2({category:"integrations",action:h+"_edited_integration",label:"team_integrations_edit_forms",value:1}),this.setState({isUpdating:!1}),c(!1),this.integrationsStore.setRuleSpecificTeamIntegrations(h,null),this.store.fetchIntegrationInstance("apiversion",t.executor),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-edited`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:i}),u.default.transitionTo("build.apiVersion",{apiId:t.api_id,versionId:t.executor},{tab:f.DEPLOYMENT_TAB}),p.default.closeByRoute(m.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:t.api_id,integrationId:i})):(pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.setState({isUpdating:!1}),c(!1))})).catch((e=>{this.setState({isUpdating:!1}),c(!1),pm.toasts.error(b.get(e,"error.details")&&b.get(e,"error.details.message")||b.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}))}},d)," ",this.state.isUpdating?a.createElement(r.default,null):this.props.children))}})||n},"./integrations/api-observability/components/base/EditIntegrationV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),s=i("./appsdk/workbench/TabService.js"),r=i("./integrations/navigation/constants.js"),o=i("./js/services/NavigationService.js"),l=i("./api-dev/constants/APISubViews.js"),c=i("./node_modules/lodash/lodash.js"),d=i.n(c),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=i("./js/modules/services/AnalyticsService.js"),h=i("./js/stores/StoreManager.js"),g=i("./integrations/api-observability/stores/APIObservabilityStore.js"),m=i("./js/stores/IntegrationsStore.js"),f=i("./integrations/api-observability/constants.ts");function b(e){let t=(0,h.resolveStoreInstance)(g.default),i=(0,h.resolveStoreInstance)(m.default);const c=(0,n.useCallback)((e=>{let{apiId:i,apiVersionId:n,redirectUrl:a,integrationId:r}=e,c={apiId:i,versionId:n,integrationId:r};s.default.closeByRoute(a,{apiId:i,integrationId:r}),t.initializeApiObservabilityStore({apiId:i,apiVersionId:n,category:f.API_OBSERVABILITY}),o.default.transitionTo("build.apiVersion",c,{tab:l.DEPLOYMENT})}),[]),b=(0,n.useCallback)((e=>{let{service:t,rule:i}=e;o.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:i})}),[]),y=(0,n.useCallback)(((e,n)=>{const{rule:a,integrationId:s,isBrowseIntegrationFlow:r}=e;n||(n=d().get(e,"payload")),t.updateIsAdding(!0),u.default.updateIntegration(s,n).then((n=>{t.updateIsAdding(!1),200===d().get(n,"status")&&d().get(n,"body.model_id")?(pm.toasts.success("Successfully updated integration"),p.default.addEventV2({category:"integrations",action:a+"_edited_integration",label:"team_integrations_edit_forms",value:1}),r?(i.setRuleSpecificTeamIntegrations(a,null),i.refetchTeamIntegrations(),i.resetAddIntegrationDependencies(),t.fetchIntegrationInstance("apiversion",e.apiVersionId),b(e)):c(e)):pm.toasts.error("Something went wrong while updating integration")})).catch((e=>{t.updateIsAdding(!1),"integrationFoundError"===d().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while updating integration. Please try again."),pm.logger.error("Something went wrong while updating integration",e)}))}),[]);return n.createElement(a.default,{type:"primary",size:"medium",onClick:()=>{d().isFunction(e.customUpdateIntegrationHandler)?e.customUpdateIntegrationHandler().then((t=>{y(e,t)})):y(e)},isDisabled:t.isAdding||e.isDisabled,text:e.text,isLoading:e.isLoading||t.isAdding})}},"./integrations/api-observability/components/base/ImportSchemaActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var n=i("./node_modules/lodash/lodash.js"),a=i.n(n),s=i("../../node_modules/react/index.js"),r=i("./appsdk/workbench/TabService.js"),o=i("../../packages/api-design/schema-service/index.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("./integrations/navigation/constants.js"),u=i("./js/services/NavigationService.js"),p=i("./api-dev/constants/APISubViews.js"),h=i("./integrations/api-observability/constants.ts"),g=i("./js/modules/services/AnalyticsService.js"),m=(i("../../packages/api-design/api-definition-service/index.js"),i("./node_modules/uuid/v4.js")),f=i.n(m),b=i("../../packages/api-design/api-definition-store/index.js"),y=(i("./js/stores/StoreManager.js"),i("./api-dev/services/APIDevService.js")),v=i("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),_=i("./api-dev/interfaces/APIInterface.js"),S=i("../../packages/api-design/api-definition-ui/index.js");class I extends s.Component{constructor(e){super(e),this.state={isImporting:!1,errorImport:!1,apiRelationId:null,fileId:null},this.handleImport=this.handleImport.bind(this),this.handleNavigation=this.handleNavigation.bind(this),this.addSchema=this.addSchema.bind(this)}handleNavigation(){const{apiId:e,versionId:t}=a().get(this.props,"payload",{}),{formSource:i}=this.props;if(r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),a().isEqual(i,h.IMPORT_FORM_SOURCES.INTEGRATION_SETUP))u.default.transitionTo(h.API_BUILDER_ROUTE_IDENTIFIERS.API_VERSION,{apiId:e,versionId:t},{tab:p.DEPLOYMENT});else{let i=a().get(u.default.getActiveQueryParams().get(),"branch");setTimeout((()=>{u.default.transitionTo("build.apiDefinitionFile",{apiId:e,apiVersionId:t,apiDefinitionId:this.state.apiRelationId,fileId:this.state.fileId},i&&{branch:i})}),3e3)}}handleCancel(){const{apiId:e}=a().get(this.props,"payload",{});r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e})}async createOrReplaceApiDefinition(e,t,i,n){try{const i=f()(),s=b.APIDefinitionTypeService.getDefinitionTypeFromSchemaType(a().get(n,"type")),r=`${i}.${a().get(n,"language","json")}`,o=[{type:v.FILE,name:r,path:r,content:a().get(n,"content")}],l=await(0,S.createOrReplaceDefinition)({apiId:e,apiVersionId:t,items:o,options:{type:s}});let c=await l.getRedirectionFileId();return Promise.resolve({id:c})}catch(e){return Promise.reject(e)}}addSchema(){const{payload:e,apiDefinition:t}=this.props,i=a().get(e,"schemaContent",{}),n=a().get(e,"apiId"),s=a().get(e,"versionId");return y.default.getRelations(n,s).then((e=>{const r=a().get(e,"apiDefinition")&&a().get(a().keys(e.apiDefinition),0),l=a().get(e,"schema")&&a().get(a().keys(e.schema),0);return this.setState({apiRelationId:null!=r?r:l}),l?(0,o.updateSchema)(l,i):this.createOrReplaceApiDefinition(n,s,a().get(t,"id",r),i)}))}async handleImport(){const{onImport:e,rule:t,formSource:i,payload:n,onCancel:s}=this.props,{apiId:r}=n,o=(await(0,_.getAPI)(r)).version.apiRepositoryStore;if(!o.canEditAPISource.allowed)return s&&s(),void o.openEditDisabledModal();this.setState({isImporting:!0,errorImport:!1},(()=>{this.addSchema().then((n=>{g.default.addEventV2({category:"gateway-integration",action:`import-schema-${i}`,label:t,value:1}),this.setState({fileId:a().get(n,"id")},(()=>{this.handleNavigation()})),pm.toasts.success("Successfully imported definition."),this.setState({isImporting:!1,errorImport:!1}),a().isFunction(e)&&e()})).catch((e=>{pm.logger.error("Import definition via gateway error ~"+e),pm.toasts.error("Error occurred while importing definition"),this.setState({isImporting:!1,errorImport:e})}))}))}render(){const{disabled:e,tooltipText:t,formSource:i,isLoading:n}=this.props,{isImporting:r}=this.state,o=a().isEqual(i,h.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),d=t||"Make sure that you have entered all the mandatory fields",u=!o&&"Maybe later";return s.createElement(l.default,{justifyContent:"flex-start",direction:o?"row-reverse":"row",grow:1,shrink:1,gap:"spacing-s"},s.createElement(c.default,{className:"deploy-form-container__segment__actions-container__deploy",type:"primary",size:"medium",text:"Import",onClick:this.handleImport,tooltip:e&&d,isDisabled:e||r||n,isLoading:r||n}),s.createElement(c.default,{className:"deploy-form-container__segment__actions-container__cancel",type:"secondary",size:"medium",text:u||"Cancel",onClick:()=>{a().isFunction(this.props.onCancel)&&this.props.onCancel(),this.handleCancel()},isDisabled:r}))}}},"./integrations/api-observability/components/base/NativeChart.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/chart.js/auto/auto.esm.js"),s=i("./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js"),r=(i("./node_modules/chartjs-adapter-moment/dist/chartjs-adapter-moment.esm.js"),i("../../node_modules/mobx-react/dist/mobx-react.module.js"));function o(e){const[t,i]=(0,n.useState)(null),r=(0,n.useRef)(null);return(0,n.useEffect)((()=>{let t={data:e.data,plugins:[s.default],options:e.options};e.type&&(t.type=e.type);let n=new a.default(r.current,t);return i(n),()=>{n.destroy(),i(null)}}),[e.data,e.options]),n.createElement("div",{className:"native-chart"},n.createElement("canvas",{ref:r}))}o.propTypes={type:r.PropTypes.string,data:r.PropTypes.object,options:r.PropTypes.object}},"./integrations/api-observability/components/base/TableEmptyState.js":function(e,t,i){i.r(t);var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js");t.default=function({title:e,description:t,secondaryAction:i,illustration:s}){return n.createElement(a.default,{title:e,description:t,secondaryAction:i},s)}},"./integrations/api-observability/components/common/ErrorState.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),r=i("./node_modules/lodash/lodash.js");class o extends n.Component{constructor(e){super(e)}render(){return n.createElement("div",{className:"team-integrations-error-state"},n.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=e.illustration||n.createElement(a.default,null);return r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t=n.createElement(s.default,null)),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===r.get(e,"error.details.code","")?t="Your request timed out":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404===e.status||400===e.status?t="Looks like the page you're looking for doesn't exist.":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}},"./integrations/api-observability/components/common/ImportSchemaBanner.js":function(e,t,i){i.r(t);var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=function({isSchemaPresent:e}){let t=e?"Importing a definition will replace the existing definition":"Importing a definition will create a new definition";return n.createElement(a.default,{status:"info"},n.createElement(s.default,null,t))}},"./integrations/api-observability/components/common/SchemaSourceSelector.js":function(e,t,i){i.r(t),i.d(t,{SchemaSourceSelector:function(){return S}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx/lib/mobx.module.js"),r=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=i("./node_modules/prop-types/index.js"),l=i.n(o),c=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),h=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke.js"),g=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),f=i("./api-dev/services/APIDevService.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./api-dev/interfaces/APIInterface.js"),v=i("./node_modules/lodash/lodash.js");function _({label:e,type:t,isDisabled:i}){let n=null;switch(t){case b.SCHEMA_SOURCE_TYPE.BRANCH:n=a.createElement(h.default,{color:i?"content-color-tertiary":"content-color-primary"});break;case b.SCHEMA_SOURCE_TYPE.RELEASE:n=a.createElement(g.default,{color:"content-color-primary"});break;case b.SCHEMA_SOURCE_TYPE.SCHEMA:n=a.createElement(m.default,{color:"content-color-primary"})}const s=a.createElement(c.default,{alignItems:"center",gap:"spacing-xs"},n,a.createElement(d.default,null,e));return i?a.createElement(u.default,{content:"Changes in this branch need to be pushed before deploying."},s):s}let S=(0,r.observer)(n=class extends a.Component{constructor(e){super(e),this.state={sources:[],releases:[],branch:null,loadingAPI:!1,isAPISynced:!1,loadingSources:!1,errorSources:!1,selectedSource:null,apiId:v.get(e,"apiId",null),versionId:v.get(e,"versionId",null),fetchingFilesOnBranch:!1},this.populate=this.populate.bind(this),this.handleSourceChange=this.handleSourceChange.bind(this),this.fetchFilesOnBranch=this.fetchFilesOnBranch.bind(this),this.handleBranchSwitch=this.handleBranchSwitch.bind(this)}componentDidMount(){this.setState({loadingAPI:!0}),(0,y.getAPI)(this.state.apiId).then((async e=>{this.api=e,await(0,s.when)((()=>e.version.isLoaded));const t=v.get(this,"api.version.apiRepositoryStore.sourceControlStore.stagedFilesList",[]),i=v.get(this,"api.version.apiRepositoryStore.sourceControlStore.unStagedFilesList",[]),n=v.get(this,"api.version.apiRepositoryStore.branch");this.setState({loadingAPI:!1,isAPISynced:v.isEmpty(t)&&v.isEmpty(i),branch:n},this.populate())})).catch((e=>{this.setState({loadingAPI:!1,errorSources:"Something went wrong. Please refresh."}),pm.logger.error("Error occurred while fetching API",e)}))}fetchAPIGitLinkStatus(e){return(0,y.isAPIGitLinked)(e).then((e=>Promise.resolve(e))).catch((e=>(pm.logger.error("Error occurred while fetching API<>Git link status",e),Promise.resolve(!1))))}getReleases(e,t){return f.default.getAllReleases(e,t).then((e=>(this.setState({releases:e}),Promise.resolve(e)))).catch((e=>Promise.reject(e)))}handleBranchSwitch(){const e=v.clone(this.state.sources),{isAPISynced:t,branch:i}=this.state,n=v.filter(e,(e=>e.type!==b.SCHEMA_SOURCE_TYPE.BRANCH)),a=[{label:i,value:i,type:b.SCHEMA_SOURCE_TYPE.BRANCH,isDisabled:!t},...n];this.setState({sources:a},(()=>this.handleSourceChange({label:"Select",value:null})))}populate(){let{apiId:e,versionId:t}=this.props;e&&t&&(this.branchReactionDisposer=(0,s.reaction)((()=>v.get(this,"api.version.apiRepositoryStore.branch")),(e=>{this.setState({branch:e},this.handleBranchSwitch)})),this.isAPISyncedDisposer=(0,s.reaction)((()=>{const e=v.get(this,"api.version.apiRepositoryStore.sourceControlStore.stagedFilesList",[]),t=v.get(this,"api.version.apiRepositoryStore.sourceControlStore.unStagedFilesList",[]);return v.isEmpty(e)&&v.isEmpty(t)}),(e=>{this.setState({isAPISynced:e},this.handleBranchSwitch)})),this.setState({loadingSources:!0,errorSources:!1}),Promise.all([this.getReleases(e,t),this.fetchAPIGitLinkStatus(e)]).then((e=>{let t=e[0],i=e[1],n=[],a=v.get(this,"api.version.apiRepositoryStore.branch"),s=this.state.isAPISynced,r=v.keys(v.get(this,"api.version.relationsStore.relations.schema")),o=v.keys(v.get(this,"api.version.relationsStore.relations.apiDefinition")),l=v.isEmpty(r)&&v.isEmpty(o);if(i&&n.push({label:a,value:a,type:b.SCHEMA_SOURCE_TYPE.BRANCH,isDisabled:!s}),v.each(t,(e=>{let t={label:v.get(e,"name"),value:v.get(e,"id"),type:b.SCHEMA_SOURCE_TYPE.RELEASE,isDisabled:!1};v.get(e,"entities.apiDefinitions")?(t.apiDefinitionId=v.get(e,"entities.apiDefinitions.0.entityId"),t.tagId=v.get(e,"entities.apiDefinitions.0.tag")):(t.schemaId=v.get(e,"entities.schemas.0.entityId"),t.tagId=v.get(e,"entities.schemas.0.tag")),n.push(t)})),!l&&!i){let e={label:b.API_DEFINITION,type:b.SCHEMA_SOURCE_TYPE.SCHEMA,isDisabled:!1};e=v.isEmpty(o)?v.merge({},e,{schemaId:r[0],value:r[0]}):v.merge({},e,{apiDefinitionId:o[0],value:o[0]}),n.push(e)}v.isEmpty(n)&&n.push({label:"Add API definition to export/deploy API",type:"empty",value:null,isDisabled:!0}),this.setState({sources:n,loadingSources:!1,errorSources:!1})})).catch((e=>{pm.logger.error("Error while populating sources",e),this.setState({loadingSources:!1,errorSources:"Something went wrong while fetching sources."})})))}handleSourceChange(e){if(!e||!e.value)return this.setState({selectedSource:e}),void(v.isFunction(this.props.onSourceChange)&&this.props.onSourceChange(null));let t=v.cloneDeep(e);v.isEqual(b.SCHEMA_SOURCE_TYPE.BRANCH,e.type)?this.fetchFilesOnBranch(this.state.apiId,((e,i=[])=>{v.isEmpty(e)&&(t=v.merge(t,{files:i}),this.setState({selectedSource:t,errorSources:!1},(()=>{v.isFunction(this.props.onSourceChange)&&this.props.onSourceChange(t)})))})):this.setState({selectedSource:t,errorSources:!1},(()=>{v.isFunction(this.props.onSourceChange)&&this.props.onSourceChange(t)}))}fetchFilesOnBranch(e,t){v.isEmpty(e)||this.setState({fetchingFilesOnBranch:!0,errorSources:!1},(()=>{(0,y.getAPILinkedEntityDataOnBranch)(e,b.SCHEMA_SOURCE_TYPE.API_DEFINITION).then((e=>{let i=[];return v.forEach(e,(e=>{i.push(v.pick(e,["name","path","language"]))})),this.setState({fetchingFilesOnBranch:!1}),t(null,i)})).catch((e=>(this.setState({fetchingFilesOnBranch:!1,errorSources:"Error occurred while fetching API definition files. Please refresh."}),pm.logger.error("Error occurred while fetching API definition files.",e),t(e))))}))}componentWillUnmount(){this.branchReactionDisposer(),this.isAPISyncedDisposer()}render(){const{sources:e,loadingSources:t,loadingAPI:i,errorSources:n,selectedSource:s,fetchingFilesOnBranch:r}=this.state;return a.createElement(p.default,{label:"Definition Source",options:e||[],placeholder:t||i?"Loading...":r?"Fetching files...":"Select",isDisabled:!!t,value:s,customOptionComponent:_,onChange:this.handleSourceChange,validationState:!v.isEmpty(n)&&{status:"error",message:n},isOptionDisabled:e=>e.isDisabled,triggerWidth:"parent"})}})||n;S.propTypes={apiId:l().string.isRequired,versionId:l().string.isRequired,onSourceChange:l().func.isRequired,preSelectedSource:l().object},t.default=S},"./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");class s extends n.Component{constructor(e){super(e),this.state={value:""},this.handleCopyToClipboard=this.handleCopyToClipboard.bind(this)}componentDidMount(){this.setState({value:this.props.value})}handleCopyToClipboard(){try{window.clipboardData.setData("Text",this.props.value),pm.toasts.success(`${this.props.title} copied to clipboard`)}catch(e){navigator.clipboard.writeText(this.props.value),pm.toasts.success(`${this.props.title} copied to clipboard`)}}render(){return n.createElement("div",{className:"integrations-info-segment"},n.createElement("div",{className:"integrations-info-segment__title"},this.props.title),n.createElement("div",{className:"integrations-info-segment__description"},this.props.description," ",this.props.children),n.createElement("div",{className:"integrations-info-segment__value-container"},n.createElement("div",{className:"input input-box integrations-info-segment__value-segment"},n.createElement("div",{className:"integrations-info-segment__value"},this.props.value)),n.createElement("div",{className:"input input-box integrations-info-segment__copy-btn",onClick:this.handleCopyToClipboard},n.createElement("div",{className:"integrations-info-segment__copy-btn-container"},n.createElement(a.default,{name:"icon-action-copy-stroke",color:"content-color-primary"})))))}}},"./integrations/api-observability/components/deploy/AwsDeployForm.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),p=i("./integrations/api-observability/services/ApiGatewayService.js"),h=i("./integrations/api-observability/components/base/DeploySchemaActions.js"),g=i("./js/services/NavigationService.js"),m=i("./appsdk/workbench/TabService.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./integrations/navigation/constants.js"),y=i("./integrations/api-observability/components/common/SchemaSourceSelector.js"),v=i("./js/modules/services/AnalyticsService.js");class _ extends n.Component{constructor(e){super(e),this.populateStageDropdown=this.populateStageDropdown.bind(this),this.handleSourceChange=this.handleSourceChange.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.handleDeployToStage=this.handleDeployToStage.bind(this),this.handleDeploy=this.handleDeploy.bind(this),this.getDeployPayload=this.getDeployPayload.bind(this),this.isConfigurationCorrect=this.isConfigurationCorrect.bind(this),this.state={integrationData:s().get(e,"integrationData"),context:s().get(e,"context"),stages:[],loadingStages:!1,errorStages:!1,description:"",selectedSource:null,selectedStage:null,deployToStage:!1,disableDeploy:!1,loadingDeploy:!1,apiGatewayName:null,deployButtonText:"Export"}}componentDidMount(){this.populateStageDropdown(),p.default.fetchAPIGatewayMeta(s().get(this.state,"integrationData.id")).then((e=>{this.setState({apiGatewayName:s().get(e,"Name",s().get(e,"name",null))})})).catch((e=>{pm.logger.error("Error occurred while fetching gateway meta",e)}))}isConfigurationCorrect(){let{selectedSource:e,selectedStage:t,deployToStage:i}=this.state;return!!e&&!(i&&!t)}getDeployPayload(){let{selectedSource:e,selectedStage:t,deployToStage:i,description:n}=this.state,a={exportOnly:!i},r=s().isEqual(e.type,f.SCHEMA_SOURCE_TYPE.BRANCH);return i&&(a.stage=t.value,s().isEmpty(n)||(a.description=n)),r?(a.branch=e.value,a.files=e.files||[]):(e.schemaId&&(a.schemaId=e.schemaId),e.apiDefinitionId&&(a.apiDefinitionId=e.apiDefinitionId),s().isEqual(e.type,f.SCHEMA_SOURCE_TYPE.RELEASE)&&(a.tagId=e.tagId,a.releaseId=e.value)),a}handleDeploy(){if(!this.isConfigurationCorrect())return;this.setState({loadingDeploy:!0});let e=this.getDeployPayload(),t=s().get(this.state,"integrationData.id"),i=s().get(this.state,"integrationData.variables.postman_api_id").toString(),n=s().get(this.state,"integrationData.executor").toString(),a=s().get(this.state,"apiGatewayName"),r="Successfully Deployed API",o=s().get(this.state,"integrationData.rule"),l=s().get(this.state,"context"),c={apiId:i,versionId:n},d={tab:f.DEPLOYMENT_TAB},u="build.apiVersion",h=s().get(this.state,"selectedSource.type"),y=this.state.deployToStage?f.SOURCE_TO_DEPLOY_ACTION[h]:f.SOURCE_TO_EXPORT_ACTION[h];l&&!s().isEmpty(l.releaseId)&&(u="build.release",c.releaseId=s().get(l,"releaseId")),r=a&&this.state.deployToStage?`API Deployed on ${a}`:"Successfully exported",p.default.deploySchema(t,e).then((e=>{if(!e.status||200!==e.status)throw e;m.default.closeByRoute(b.V10_API_DEPLOY_URL,{apiId:i,integrationId:s().toString(t)}),g.default.transitionTo(u,c,d),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-deploy-triggered`,{apiId:i,apiVersionId:n}),v.default.addEventV2({category:"gateway-integration",action:y,label:o,value:1}),pm.toasts.success(r),this.setState({loadingDeploy:!1})})).catch((e=>{s().isEqual(s().get(e,"error.type"),"notFoundError")?pm.toasts.error("We could not find the definition you are looking for.",{title:"Deployment failed"}):pm.toasts.error(s().get(e,"error.message")||"Error occurred while deploying.",{title:s().get(e,"error.title")||"AWS Gateway error",noIcon:!0}),pm.logger.error("Error occurred while deploying",e),this.setState({loadingDeploy:!1})}))}handleDeployToStage(){const e=this.state.deployToStage;this.setState({deployToStage:!e},(()=>{this.state.deployToStage?this.setState({deployButtonText:"Deploy"}):this.setState({deployButtonText:"Export"})}))}handleSourceChange(e){this.setState({selectedSource:e})}handleStageChange(e){this.setState({selectedStage:e})}populateStageDropdown(){const e=s().get(this.state,"integrationData.id");this.setState({loadingStages:!0,errorStages:!1}),p.default.fetchStages(e).then((e=>{let t=[];s().each(e,(e=>{t.push({label:s().get(e,"StageName")||s().get(e,"stageName"),value:s().get(e,"StageName")||s().get(e,"stageName")})})),this.setState({loadingStages:!1,errorStages:!1,stages:t})})).catch((e=>{pm.logger.error("Error occurred while fetching stages",e),this.setState({errorStages:"Error occurred while fetching stages",loadingStages:!1})}))}render(){const{selectedStage:e,loadingStages:t,deployButtonText:i,stages:a,deployToStage:p,description:g,loadingDeploy:m,disableStage:f,errorStages:b}=this.state,v=this.props.integrationData;return n.createElement("div",{className:"deploy-form-container"},n.createElement(r.default,{color:"content-color-primary",type:"h1",text:"Export and deploy definition on AWS"}),n.createElement("div",{className:"deploy-form-container__description"},n.createElement(o.default,{type:"body-large",color:"content-color-secondary"},"Deploying an API from Postman will export the definition to the gateway and trigger deployment on the selected stage.")),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(y.default,{onSourceChange:this.handleSourceChange,apiId:s().get(this.state,"integrationData.variables.postman_api_id"),versionId:s().get(this.state,"integrationData.executor")})),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(l.default,{isChecked:p,label:"Deploy on a stage",helperText:"This will push the definition from Postman onto an AWS stage.",onChange:this.handleDeployToStage,infoText:"The deployment will be successful only if at least one integration is configured over any API route in AWS"})),p&&n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(c.default,{label:"AWS Stage",options:a,placeholder:t?"Loading...":"Select",isDisabled:!!(t||f||b),value:e,onChange:this.handleStageChange,validationState:!!b&&{status:"error",message:b}})),p&&n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(d.default,{label:n.createElement(u.default,{text:"Deployment Description"}),value:g,placeholder:"Enter description",onChange:e=>this.setState({description:e.target.value})})),n.createElement("div",{className:"deploy-form-container__actions-segment"},n.createElement(h.default,{payload:{apiId:s().get(v,"variables.postman_api_id"),versionId:s().get(v,"executor"),integrationId:s().get(v,"id")},onDeploy:this.handleDeploy,disabled:!this.isConfigurationCorrect(),loading:m,deployButtonText:i})))}}},"./integrations/api-observability/components/deploy/Azure.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=i("./integrations/api-observability/services/AzureService.js"),d=i("./integrations/api-observability/components/base/DeploySchemaActions.js"),u=i("./js/services/NavigationService.js"),p=i("./appsdk/workbench/TabService.js"),h=i("./integrations/api-observability/constants.ts"),g=i("./integrations/navigation/constants.js"),m=i("./integrations/api-observability/components/common/SchemaSourceSelector.js"),f=i("./js/modules/services/AnalyticsService.js"),b=i("./node_modules/lodash/lodash.js");class y extends n.Component{constructor(e){super(e),this.populateRevisionDropdown=this.populateRevisionDropdown.bind(this),this.handleSourceChange=this.handleSourceChange.bind(this),this.handleRevisionChange=this.handleRevisionChange.bind(this),this.handleExportToExistingRevision=this.handleExportToExistingRevision.bind(this),this.handleDeploy=this.handleDeploy.bind(this),this.getDeployPayload=this.getDeployPayload.bind(this),this.isConfigurationCorrect=this.isConfigurationCorrect.bind(this),this.state={integrationData:b.get(e,"integrationData"),context:b.get(e,"context"),details:b.get(e,"details"),selectedService:null,revisions:[],loadingRevisions:!1,errorRevisions:!1,description:"",selectedSource:null,selectedRevision:null,exportOnExistingRevision:!1,loadingDeploy:!1,deployButtonText:"Export"}}componentDidMount(){const e=b.get(this.state,"integrationData"),t=b.get(e,"variables.linked_apis"),i=b.get(this.state,"details.azure_api_path"),n=b.find(t,{azure_api_path:i});if(b.isEmpty(n)){const t=b.get(e,"variables.postman_api_id"),i=b.get(e,"id");return pm.toasts.error("Service details not present"),u.default.transitionTo(g.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:t,integrationId:i})}this.setState({selectedService:n},(()=>{this.populateRevisionDropdown()}))}isConfigurationCorrect(){let{selectedSource:e,selectedRevision:t,exportOnExistingRevision:i,selectedService:n}=this.state;return!(!e||!n)&&!(i&&!t)}getDeployPayload(){let{selectedSource:e,selectedRevision:t,exportOnExistingRevision:i,description:n,selectedService:a}=this.state,s={exportOnly:!0,...a},r=b.isEqual(e.type,h.SCHEMA_SOURCE_TYPE.BRANCH);return i&&(s.azure_revision_id=t.value),b.isEmpty(n)||i||(s.azure_revision_description=n),r?(s.branch=e.value,s.files=e.files||[]):(s.schemaId=e.schemaId,s.apiDefinitionId=e.apiDefinitionId,b.isEqual(e.type,h.SCHEMA_SOURCE_TYPE.RELEASE)&&(s.tagId=e.tagId,s.releaseId=e.value)),s}handleDeploy(){if(!this.isConfigurationCorrect())return;this.setState({loadingDeploy:!0});let e=this.getDeployPayload(),t=b.get(this.state,"integrationData.id"),i=b.get(this.state,"integrationData.variables.postman_api_id").toString(),n=b.get(this.state,"integrationData.executor").toString(),a=b.get(this.state,"selectedRevision.value"),s="Successfully Deployed API",r=b.get(this.state,"integrationData.rule"),o={apiId:i,integrationId:t},l={azure_api_path:b.get(this.state,"selectedService.azure_api_path")},d=g.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,m=b.get(this.state,"selectedSource.type"),y=h.SOURCE_TO_EXPORT_ACTION[m];s=a&&this.state.exportOnExistingRevision?`Definition exported on revision ${a}`:"Definition exported on a new revision",c.default.deploySchema(t,e).then((e=>{if(!e.status||200!==e.status)throw e;p.default.closeByRoute(g.V10_API_DEPLOY_URL,{apiId:i,integrationId:b.toString(t)}),u.default.transitionTo(d,o,l),pm.windowEvents.emit(`${h.API_OBSERVABILITY}-deploy-triggered`,{apiId:i,apiVersionId:n}),f.default.addEventV2({category:"gateway-integration",action:y,label:r,value:1}),pm.toasts.success(s),this.setState({loadingDeploy:!1})})).catch((e=>{b.isEqual(b.get(e,"error.type"),"notFoundError")?pm.toasts.error("We could not find the definition you are looking for.",{title:"Deployment failed"}):b.isEqual(b.get(e,"error.type"),"badRequestError")?pm.toasts.error(b.get(e,"error.message"),{title:"Deployment failed"}):pm.toasts.error(b.get(e,"error.message","Error occurred while merging. Please try a manual merge."),{title:b.get(e,"error.title","Azure API Management error")}),pm.logger.error("Error occurred while deploying",e),this.setState({loadingDeploy:!1})}))}handleExportToExistingRevision(){const e=this.state.exportOnExistingRevision;this.setState({exportOnExistingRevision:!e})}handleSourceChange(e){this.setState({selectedSource:e})}handleRevisionChange(e){this.setState({selectedRevision:e})}populateRevisionDropdown(){const e=b.get(this.state,"integrationData.id"),t=b.get(this.state,"selectedService");this.setState({loadingRevisions:!0,errorRevisions:!1}),c.default.fetchRevisions(t,e).then((e=>{let t=[];b.each(e,(e=>{t.push({label:b.get(e,"azure_revision_id"),value:b.get(e,"azure_revision_id")})})),this.setState({loadingRevisions:!1,errorRevisions:!1,revisions:t})})).catch((e=>{pm.logger.error("Error occurred while fetching revisions",e),this.setState({errorRevisions:"Error occurred while fetching revisions",loadingRevisions:!1})}))}render(){const{selectedRevision:e,loadingRevisions:t,deployButtonText:i,revisions:c,exportOnExistingRevision:u,description:p,loadingDeploy:h,errorRevisions:g}=this.state,f=this.props.integrationData;return n.createElement("div",{className:"deploy-form-container"},n.createElement(a.default,{color:"content-color-primary",type:"h1",text:"Export definition to Azure API Management"}),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(m.default,{onSourceChange:this.handleSourceChange,apiId:b.get(this.state,"integrationData.variables.postman_api_id"),versionId:b.get(this.state,"integrationData.executor")})),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(s.default,{label:n.createElement(r.default,{text:"Description"}),value:p,placeholder:"Enter description",onChange:e=>this.setState({description:e.target.value}),isDisabled:u})),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(o.default,{isChecked:u,label:"Export definition to an existing Revision",onChange:this.handleExportToExistingRevision})),u&&n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(l.default,{label:"Revision ID",options:c||[],placeholder:t?"Loading...":"Select",isDisabled:!(!t&&!g),value:e,onChange:this.handleRevisionChange,menuMaxHeight:150,validationState:!!g&&{status:"error",message:g}})),n.createElement("div",{className:"deploy-form-container__actions-segment"},n.createElement(d.default,{payload:{apiId:b.get(f,"variables.postman_api_id"),versionId:b.get(f,"executor"),integrationId:b.get(f,"id")},onDeploy:this.handleDeploy,disabled:!this.isConfigurationCorrect(),loading:h,deployButtonText:i})))}}},"./integrations/api-observability/components/deploy/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/components/deploy/AwsDeployForm.js"),a=i("./integrations/api-observability/components/deploy/Azure.js");t.default={api_gateway_aws:n.default,api_management_azure:a.default}},"./integrations/api-observability/components/detailed-dashboard/aws/CloudWatchMetrics.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=i("../../node_modules/@postman/aether-design-tokens/esmLib/src/themes/light.js"),d=i("../../node_modules/@postman/aether-design-tokens/esmLib/src/themes/dark.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),p=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-openWeb-stroke.js"),h=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),g=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),m=i("./integrations/api-observability/components/base/NativeChart.js"),f=(i("./appsdk/workbench/TabService.js"),i("./js/services/NavigationService.js")),b=i("./integrations/api-observability/services/index.js"),y=i("./integrations/api-observability/constants.ts"),v=i("./js/components/base/LoadingIndicator.js"),_=i("./js/modules/services/AnalyticsService.js"),S=i("./js/external-navigation/ExternalNavigationService.js"),I=i("./integrations/api-observability/utils/chartHelpers.js"),w=i("./integrations/navigation/constants.js"),E=i("./js/stores/StoreManager.js"),x=i("./js/stores/ActiveWorkspaceSessionStore.js"),A=i("./integrations/constants/v10IntegrationConstants.ts"),P=i("./node_modules/lodash/lodash.js");class T extends n.Component{constructor(e){super(e),this.renderTopHeader=()=>{const{availableStages:e,selectedStage:t,availableTimeframes:i,selectedTimeframe:o,dashboardURL:l,stageUrl:c}=this.state;return n.createElement("div",{className:"observability-aws-cloudwatch-container__header"},n.createElement(a.default,{direction:"row",justifyContent:"space-between",gap:"spacing-s"},n.createElement(a.default,{direction:"row"},n.createElement(s.default,{type:"tertiary",icon:n.createElement(u.default,null),onClick:this.handleBackClick,className:"observability-aws-cloudwatch-container__header__back"}),n.createElement("div",{className:"observability-aws-cloudwatch-container__header__stages"},n.createElement(r.default,{onChange:this.handleSelectStage,options:e||[],isClearable:!1,value:t}))),n.createElement(a.default,{direction:"row",gap:"spacing-s"},n.createElement("div",{className:"observability-aws-cloudwatch-container__header__stages"},n.createElement(r.default,{onChange:this.handleSelectTimeframe,options:i,isClearable:!1,value:o})),n.createElement("div",{className:"observability-gateway-dashboard-link"},n.createElement(s.default,{type:"tertiary",icon:n.createElement(p.default,null),text:"View Dashboard",onClick:()=>this.handleViewDashboard(l)})),n.createElement("div",{className:"observability-gateway-dashboard-link"},n.createElement(s.default,{type:"tertiary",icon:n.createElement(p.default,null),text:"View Stage on AWS",onClick:()=>this.handleViewStage(c)})),n.createElement("div",{className:"observability-aws-cloudwatch-container__header__refresh"},n.createElement(s.default,{onClick:this.bootstrap,type:"tertiary",icon:n.createElement(h.default,null),text:"Refresh"})))))},this.renderLoader=()=>n.createElement(a.default,{direction:"column",justifyContent:"center",alignItems:"center"},n.createElement(a.default,{direction:"column",justifyContent:"center",alignItems:"center",width:"100%"},n.createElement(v.default,null))),this.renderErrorState=()=>n.createElement(a.default,{direction:"column",justifyContent:"center",alignItems:"center"},n.createElement(a.default,{direction:"column",justifyContent:"center",alignItems:"center",width:"100%"},n.createElement(o.default,{type:"para",color:"content-color-secondary"},y.GENERIC_CLOUDWATCH_METRICS_ERROR))),this.state={selectedStage:null,availableStages:[],dashboardURL:null,stageUrl:null,availableTimeframes:y.TIMEFRAMES,selectedTimeframe:y.TIMEFRAMES[4],loadingStages:!1,errorStages:!1,loadingMetrics:!1,currentTheme:pm.settings.getSetting("postmanTheme")},this.fetchCloudWatchTimeSeriesMetrics=this.fetchCloudWatchTimeSeriesMetrics.bind(this),this.fetchStages=this.fetchStages.bind(this),this.renderChart=this.renderChart.bind(this),this.handleSelectStage=this.handleSelectStage.bind(this),this.handleSelectTimeframe=this.handleSelectTimeframe.bind(this),this.renderTopHeader=this.renderTopHeader.bind(this),this.renderLoader=this.renderLoader.bind(this),this.renderErrorState=this.renderErrorState.bind(this),this.bootstrap=this.bootstrap.bind(this),this.populateData=this.populateData.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.handleViewDashboard=this.handleViewDashboard.bind(this),this.handleBackClick=this.handleBackClick.bind(this),this.constructDashboardURL=this.constructDashboardURL.bind(this),this.debouncedShowErrorToast=P.debounce(this.showErrorToast,1e3),this.handleThemeChange=this.handleThemeChange.bind(this)}UNSAFE_componentWillMount(){this.setState({currentTheme:pm.settings.getSetting("postmanTheme")}),pm.settings.on("setSetting:postmanTheme",this.handleThemeChange)}componentDidMount(){let{integrationData:e,context:t,details:i={}}=this.props,{stageId:n,stageName:a}=i,{availableStages:s,selectedStage:r}=t||{};!r&&n&&a&&(r={label:a,value:n}),s?this.setState({selectedStage:r,availableStages:s,integration:e},(()=>{this.populateData()})):this.setState({integration:e,selectedStage:r},(()=>{this.fetchStages(e.id,e.rule)}))}componentDidUpdate(e){P.get(this.props,"details.stageId")!==P.get(e,"details.stageId")&&this.handleStageChange()}handleStageChange(){this.setState({selectedStage:{label:P.get(this.props,"details.stageName"),value:P.get(this.props,"details.stageId")}},(()=>{this.populateData()}))}populateData(){this.bootstrap(),this.constructDashboardURL(),this.constructStageUrl()}bootstrap(){P.map(P.values(y.CLOUDWATCH_METRICS),(e=>{this.setState({[e.id]:null},(()=>this.fetchCloudWatchAllMetrics()))}))}showErrorToast(e){pm.toasts.error(P.get(e,"error.message","Something went wrong while fetching CloudWatch metrics"),{title:P.get(e,"error.title","AWS CloudWatch Error")})}fetchCloudWatchTimeSeriesMetrics(e,t,i){let{integration:n}=this.state,{id:a,rule:s}=n,r={stage:e,metric:t,period:i.period,endTime:new Date,startTime:new Date(Date.now()-i.duration)};this.setState({[t]:{loading:!0,error:!1}}),b.default[s].fetchCloudWatchTimeSeriesMetrics(a,r).then((e=>{const i=P.get(e,"body.data.MetricDataResults[0]");this.setState({[t]:{labels:i.Timestamps,data:i.Values,loading:!1,error:!1}})})).catch((e=>{this.debouncedShowErrorToast(e),this.setState({[t]:{loading:!1,error:!0}}),pm.logger.error("Error occurred while fetching AWS CloudWatch metrics",e)}))}fetchCloudWatchAllMetrics(){const{selectedStage:e,selectedTimeframe:t}=this.state;e&&t&&P.each(y.CLOUDWATCH_METRICS,(i=>{this.fetchCloudWatchTimeSeriesMetrics(e.label,i.id,t)}))}handleThemeChange(){let e;e="light"===pm.settings.getSetting("postmanTheme")?{...c.default,isDark:!1}:{...d.default,isDark:!0},this.setState({currentTheme:e})}fetchStages(e,t){this.setState({loadingStages:!0,errorStages:!1}),b.default[t].fetchStages(e).then((e=>{let t=P.orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),i=P.map(t,(e=>({label:e.StageName||e.stageName,value:e.DeploymentId||e.deploymentId,...e})));P.isEmpty(i)||this.state.selectedStage?this.setState({availableStages:i,loadingStages:!1},(()=>{this.populateData()})):this.setState({availableStages:i,loadingStages:!1},(()=>{this.handleSelectStage(i[0])}))})).catch((e=>{this.setState({errorStages:!0,loadingStages:!1}),pm.logger.error("Error occurred while fetching AWS stages",e),pm.toasts.error("Something went wrong while fetching AWS stage, please try again.")}))}constructDashboardURL(){let{integration:e}=this.state,t=P.get(e,"variables.aws_api_type"),i=P.get(e,"variables.aws_region"),n=P.get(e,"variables.aws_api_gateway_id"),a="";a=t===y.API_GATEWAY_TYPES.REST?`${y.AWS_API_GATEWAY_BASE_URL}/home?region=${i}#/apis/${n}/dashboard`:`${y.AWS_API_GATEWAY_BASE_URL}/main/monitor/metrics?api=${n}&region=${i}`,this.setState({dashboardURL:a})}constructStageUrl(){let{integration:e,selectedStage:t}=this.state,i=P.get(e,"variables.aws_api_type"),n=P.get(e,"variables.aws_region"),a=P.get(e,"variables.aws_api_gateway_id"),s=P.get(t,"label"),r="";r=i===y.API_GATEWAY_TYPES.REST?`${y.AWS_API_GATEWAY_BASE_URL}/home?region=${n}#/apis/${a}/stages/${s}`:`${y.AWS_API_GATEWAY_BASE_URL}/main/deploy/stages?api=${a}&region=${n}&stage=${s}`,this.setState({stageUrl:r})}handleViewDashboard(e){e&&(0,S.openExternalLink)(e,"_blank"),_.default.addEventV2({category:"gateway-integration",action:"view-dashboard",label:P.get(this.state.integration,"rule"),value:1})}handleViewStage(e){e&&(0,S.openExternalLink)(e,"_blank"),_.default.addEventV2({category:"gateway-integration",action:"view-stage",label:P.get(this.state.integration,"rule"),value:1})}handleSelectStage(e){if(!e)return;const{integration:t={},availableStages:i}=this.state;f.default.transitionTo(w.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:P.get(t,"variables.postman_api_id"),integrationId:t.id},{stageName:e.label,stageId:e.value},{additionalContext:{integration:t,selectedStage:e,availableStages:i}})}handleSelectTimeframe(e){this.setState({selectedTimeframe:e},(()=>this.bootstrap()))}handleBackClick(){const e=P.get(this.props,"integrationData"),t=P.get(e,"variables.postman_api_id"),i=(0,E.resolveStoreInstance)(x.default).activeEditor;f.default.transitionTo(w.API_OVERVIEW_IDENTIFIER,{apiId:t},{view:A.DEPLOYMENTS},{tabOptions:{openIn:i}})}renderChart(e={}){const{selectedTimeframe:t,currentTheme:i}=this.state,s=I.default.getChartOptions({unit:t&&t.unit,title:{y:e.yAxis},currentTheme:i}),r=[{label:e.id,data:this.state[e.id]&&this.state[e.id].data,fill:!1,borderColor:"rgb(243,108,57)"}];return n.createElement("div",{className:"aws-cloudwatch__container"},n.createElement(a.default,{direction:"column",gap:"spacing-xl"},n.createElement(a.default,{direction:"row",alignItems:"center",gap:"spacing-xs",justifyContent:"center"},n.createElement(o.default,{color:"content-color-secondary",className:"metrics__title"},e.label),n.createElement(l.default,{content:e.info,placement:"bottom"},n.createElement("span",{className:"aws-cloudwatch__tooltip"},n.createElement(g.default,null)))),this.state[e.id]&&this.state[e.id].data&&this.state[e.id].data?n.createElement(m.default,{key:e.id,type:"line",data:{labels:this.state[e.id]&&this.state[e.id].labels,datasets:r},options:s}):this.state[e.id]&&this.state[e.id].error?this.renderErrorState():this.renderLoader()))}render(){return n.createElement("div",{className:"aws-cloudwatch__container__main"},n.createElement(a.default,{direction:"column",justifyContent:"space-between"},this.renderTopHeader(),n.createElement("div",{className:"aws-cloudwatch__detailed-view"},n.createElement(a.default,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"spacing-xl"},this.renderChart(y.CLOUDWATCH_METRICS.LATENCY),this.renderChart(y.CLOUDWATCH_METRICS.INTEGRATION_LATENCY)),n.createElement(a.default,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"spacing-xl"},this.renderChart(y.CLOUDWATCH_METRICS["5XX_ERROR"]),this.renderChart(y.CLOUDWATCH_METRICS["4XX_ERROR"])),n.createElement(a.default,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"spacing-xl"},this.renderChart(y.CLOUDWATCH_METRICS.COUNT),n.createElement("div",{className:"aws-cloudwatch__container__empty"})))))}}},"./integrations/api-observability/components/detailed-dashboard/azure/Azure.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return F}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItemGroup.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),f=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),b=i("./integrations/api-observability/components/detailed-dashboard/azure/RevisionsTable.js"),y=i("./integrations/api-observability/components/detailed-dashboard/azure/ChangelogTable.js"),v=i("./integrations/api-observability/components/detailed-dashboard/azure/ExportsTable.js"),_=i("./js/external-navigation/ExternalNavigationService.js"),S=i("./integrations/api-observability/constants.ts"),I=i("./js/services/NavigationService.js"),w=i("./appsdk/workbench/TabService.js"),E=i("./integrations/navigation/constants.js"),x=i("./node_modules/lodash/lodash.js"),A=i.n(x),P=i("./integrations/api-observability/services/AzureService.js"),T=i("./integrations/api-observability/components/common/ErrorState.js"),C=i("./api-dev/constants/Permissions.js"),D=i("./js/stores/StoreManager.js"),j=i("./js/stores/CurrentUserStore.js"),O=i("./api-dev/services/APIPermissionService.js"),R=i("./integrations/api-observability/components/modals/DeleteIntegrationModal.js"),k=i("./integrations/api-observability/services/Helper.js"),M=i("./integrations/api-observability/containers/ImportSchema.js"),L=i("./js/stores/ActiveWorkspaceSessionStore.js"),N=i("./integrations/constants/v10IntegrationConstants.ts");const z=({value:e,truncatedText:t,publicIPs:i,privateIPs:u})=>{let p=A().map(i||[],(e=>n.createElement(a.default,null,n.createElement(s.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)))),h=A().map(u||[],(e=>n.createElement(a.default,null,n.createElement(s.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e))));return n.createElement("div",{className:"azure-custom-cell"},n.createElement(s.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e+"... "),n.createElement(r.default,null,n.createElement(o.default,null,n.createElement(l.default,{onClick:()=>{},type:"monochrome-plain",text:t,className:"azure-custom-cell__ip-address"})),n.createElement(c.default,{placement:"bottom-end"},i&&n.createElement(d.default,{title:"Public IPs"},p),u&&n.createElement(d.default,{title:"Private IPs"},h))))};class F extends n.Component{constructor(e){super(e),this.setShowModal=e=>{this.setState({showModal:e})},this.handleEditIntegration=()=>{const e=A().get(this.props,"integrationData"),t=A().get(e,"id"),i=A().get(e,"variables.postman_api_id");this.closeCurrentTab(),I.default.transitionTo(E.V10_API_EDIT_DEPLOYMENT_INTEGRATION_NAV_IDENTIFIER,{apiId:i,integrationId:t},{tab:S.DEPLOYMENT_TAB,category:S.API_OBSERVABILITY})},this.renderVIP=()=>{let e,{totalIPs:t,publicIPs:i,privateIPs:a,vip:s}=this.state;return Number(t)>1?(e=Number(t)-1+" more",n.createElement(z,{value:s,truncatedText:e,publicIPs:i,privateIPs:a})):n.createElement("div",null,s)},this.renderDeleteModal=()=>{const e=A().get(this.state,"integration",{});return n.createElement(R.default,{size:"small",model:{apiId:A().get(e,"variables.postman_api_id"),id:A().get(e,"executor")},isOpen:this.state.showModal,handleCloseModal:()=>this.setShowModal(!1),integrationId:e.id,ruleId:e.rule,onSuccessfulDelete:this.closeCurrentTab})},this.renderHeaderFirstRow=()=>{const{serviceName:e,resourceGroup:t,subscription:i,location:a,vip:s}=this.state;return n.createElement(u.default,{direction:"row",justifyContent:"space-between"},n.createElement(u.default,{direction:"row"},n.createElement(u.default,{direction:"column",justifyContent:"center",className:"observability-azure-detailed-dashboard-container__integration-name"},n.createElement("div",null,e))),n.createElement(u.default,{direction:"row"},n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"Resource Group:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},t)),n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"Subscription:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},i)),n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"Location:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},a)),n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"VIP:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},this.renderVIP()))))},this.renderHeaderSecondRow=()=>{const{api:e,version:t,gatewayUrl:i,developerPortalUrl:a}=this.state;return n.createElement(u.default,{direction:"row",justifyContent:"space-between",className:"observability-azure-detailed-dashboard-container__row2"},n.createElement(u.default,{direction:"row"},n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__api"},"API:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label__value"},e)),n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label"},"Version:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label__value"},t))),n.createElement(u.default,{direction:"row"},n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label"},"Gateway URL:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label__value"},n.createElement("span",{onClick:()=>(0,_.openExternalLink)(i,"_blank")},n.createElement(s.default,{isExternal:!0,type:"link-subtle"},i)))),n.createElement(u.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__portal"},n.createElement("span",{onClick:()=>(0,_.openExternalLink)(a,"_blank")},n.createElement(s.default,{isExternal:!0,type:"link-subtle"},"View Developer Portal"))))))},this.renderTopHeader=()=>{const{fetchedServices:e,selectedService:t,loadingService:i,isEditEnabled:d,integration:h}=this.state;return n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header"},n.createElement(u.default,{direction:"row",justifyContent:"space-between"},n.createElement(u.default,{direction:"row"},n.createElement(l.default,{type:"tertiary",icon:n.createElement(m.default,null),onClick:this.handleBackClick,className:"observability-azure-detailed-dashboard-container__header__back"}),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header__services"},n.createElement(p.default,{options:e||[],value:t,onChange:this.handleServiceChange,isClearable:!1,isDisabled:i}))),n.createElement(u.default,{direction:"row"},n.createElement("div",null,n.createElement(l.default,{onClick:this.handleExportApi,type:"secondary",text:"Export API",isDisabled:!d,tooltip:!d&&S.PERMISSION_ERROR||"Export definition to a Revision"})),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header__import"},n.createElement(M.default,{integrationId:A().get(h,"id"),rule:A().get(h,"rule"),apiId:A().get(h,"variables.postman_api_id"),versionId:A().get(h,"executor"),formSource:S.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD,selectedService:t})),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header__refresh"},n.createElement(l.default,{onClick:this.handleRefresh,type:"tertiary",icon:n.createElement(f.default,null),tooltip:"Refresh"})),n.createElement(r.default,null,n.createElement(o.default,null,n.createElement(l.default,{icon:"icon-action-options-stroke",type:"tertiary"})),n.createElement(c.default,null,n.createElement(a.default,{onClick:this.handleEditIntegration,isDisabled:!d,tooltip:!d&&S.PERMISSION_ERROR},n.createElement(u.default,{alignItems:"center"},n.createElement(s.default,null,"Edit Integration"))),n.createElement(a.default,{type:"destructive",onClick:()=>{this.setShowModal(!0)},isDisabled:!d,tooltip:!d&&S.PERMISSION_ERROR},n.createElement(u.default,{alignItems:"center"},n.createElement("div",null,"Delete Integration"))))),this.renderDeleteModal())))},this.renderErrorState=()=>{const{errorService:e}=this.state;return n.createElement(T.default,{errorDetails:{...e.error,title:A().get(e,"error.name"),subTitle:A().get(e,"error.message"),illustration:n.createElement(h.default,null)}})},this.renderLoadingState=()=>n.createElement("div",{className:"observability-azure-detailed-dashboard-container__loader"},n.createElement(g.default,null)),this.state={canUpdateIntegration:!0,serviceName:"",showModal:!1,status:"Online",resourceGroup:"",subscription:"",location:"",vip:"",api:"",version:"",gatewayUrl:"",developerPortalUrl:"",fetchedServices:A().map(A().get(e,"integrationData.variables.linked_apis",[]),(e=>({label:A().get(e,"azure_service_id"),value:e}))),selectedService:null,integration:A().get(e,"integrationData",null),context:A().get(e,"context",null),preSelectService:A().get(e,"details.azure_api_path"),servicesMeta:A().get(e,"context.services",{}),apisMeta:{},subscriptionsMeta:A().get(e,"context.subscriptions",{}),loadingService:!1,errorService:!1,refreshRevisions:0,refreshChangelog:0,refreshExports:0,isEditEnabled:!1},this.handleBackClick=this.handleBackClick.bind(this),this.handleExportApi=this.handleExportApi.bind(this),this.handleServiceChange=this.handleServiceChange.bind(this),this.fetchApiMeta=this.fetchApiMeta.bind(this),this.fetchSubscriptionMeta=this.fetchSubscriptionMeta.bind(this),this.fetchServiceMeta=this.fetchServiceMeta.bind(this),this.addServiceData=this.addServiceData.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.handleCurrentToggle=this.handleCurrentToggle.bind(this),this.navigateToCurrentService=this.navigateToCurrentService.bind(this),this.fetchEditPermission=this.fetchEditPermission.bind(this),this.initiatePage=this.initiatePage.bind(this),this.closeCurrentTab=this.closeCurrentTab.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${S.API_OBSERVABILITY}-deploy-triggered`,this.onIntegrationEventCaptured.bind(this)),this.initiatePage(this.state.preSelectService),this.fetchEditPermission()}componentDidUpdate(e){A().get(e,"details.azure_api_path")&&A().get(this.props,"details.azure_api_path")&&(A().isEqual(e.details.azure_api_path,this.props.details.azure_api_path)||this.initiatePage(this.props.details.azure_api_path))}initiatePage(e){let t=null;t=e?A().find(A().get(this.state,"integration.variables.linked_apis",[]),{azure_api_path:e}):A().get(this.state,"integration.variables.linked_apis.0"),t&&this.handleServiceChange({label:A().get(t,"azure_service_id"),value:t})}closeCurrentTab(){const e=A().get(this.state,"integration",{}),t=A().get(e,"variables.postman_api_id","").toString(),i=A().get(e,"id","").toString();w.default.closeByRoute(E.V10_API_DEPLOYMENT_DASHBOARD_URL,{apiId:t,integrationId:i})}fetchEditPermission(){const e=(0,D.resolveStoreInstance)(j.default).id,t=[C.UPDATE_API_META],i=A().get(this.state,"integration.variables.postman_api_id"),n=O.default.getAPIPermissionQueryObject(t,[{id:i}],e);O.default.fetchPermissions(n).then((e=>{this.setState({isEditEnabled:A().get(e,`${i}:UPDATE_API_META.allowed`)})})).catch((e=>{pm.logger.error(e)}))}onIntegrationEventCaptured(e){const{integration:t}=this.state,i=A().get(t,"variables.postman_api_id"),n=A().get(t,"executor");e.apiId===i&&e.apiVersionId===n&&this.handleRefresh()}showErrorToasts(e){pm.toasts.error("Error occurred while fetching Azure services meta.",{title:A().get(e,"error.title")||"Azure API Management error",noIcon:!0})}addServiceData(e){const{integration:t}=this.state,i=A().get(t,"id");this.setState({loadingService:!0,errorService:!1},(()=>{Promise.all([this.fetchServiceMeta(e,i),this.fetchApiMeta(e,i),this.fetchSubscriptionMeta(e,i)]).then((t=>{const i=t[0],n=t[1],a=t[2];let s=A().get(i,"privateIPAddresses")||[],r=A().get(i,"publicIPAddresses")||[],o=s.length+r.length,l=r[0]||s[0]||"-";this.setState({serviceName:A().get(e,"azure_service_id"),resourceGroup:A().get(e,"azure_resource_group_id"),subscription:A().get(a,"name"),location:A().get(i,"location"),vip:l,privateIPs:s,publicIPs:r,totalIPs:o,developerPortalUrl:A().get(i,"developerPortalUrl"),api:A().get(n,"name"),version:A().get(n,"version"),gatewayUrl:A().get(i,"gatewayUrl"),loadingService:!1})})).catch((e=>{this.showErrorToasts(e),this.setState({loadingService:!1,errorService:"Error Occurred while fetching service meta"})}))}))}handleServiceChange(e){if(!e)return null;this.setState({selectedService:e},(()=>{this.navigateToCurrentService()})),this.addServiceData(e.value)}navigateToCurrentService(){const{selectedService:e,integration:t}=this.state;I.default.transitionTo(E.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:A().get(t,"variables.postman_api_id"),integrationId:A().get(t,"id")},{azure_api_path:A().get(e,"value.azure_api_path")})}fetchApiMeta(e,t){let i={...A().get(this.state,"apisMeta",{})};return A().isEmpty(i[e.azure_api_path])?P.default.fetchApiMeta(e,t).then((t=>(i[e.azure_api_path]=t,this.setState({apisMeta:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching API meta",e),Promise.reject(e)))):Promise.resolve(i[e.azure_api_path])}fetchServiceMeta(e,t){let i={...A().get(this.state,"servicesMeta",{})};return A().isEmpty(i[e.azure_service_path])?P.default.fetchServiceMeta(e,t).then((t=>(i[e.azure_service_path]=t,this.setState({servicesMeta:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching services meta",e),Promise.reject(e)))):Promise.resolve(i[e.azure_service_path])}fetchSubscriptionMeta(e,t){let i={...A().get(this.state,"subscriptionsMeta",{})};return A().isEmpty(i[e.azure_subscription_id])?P.default.fetchSubscriptionMeta(e,t).then((t=>(i[e.azure_subscription_id]=t,this.setState({subscriptionsMeta:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching subscription meta",e),Promise.reject(e)))):Promise.resolve(i[e.azure_subscription_id])}handleRefresh(){let{refreshChangelog:e,refreshExports:t,refreshRevisions:i}=this.state;e+=1,t+=1,i+=1,this.setState({servicesMeta:null,apisMeta:null,subscriptionsMeta:null,refreshChangelog:e,refreshExports:t,refreshRevisions:i},(()=>{this.initiatePage(A().get(this.state,"selectedService.value.azure_api_path"))}))}handleCurrentToggle(){const{refreshChangelog:e,refreshRevisions:t}=this.state;return this.setState({refreshChangelog:e+1,refreshRevisions:t+1})}handleBackClick(){const e=A().get(this.props,"integrationData"),t=A().get(e,"variables.postman_api_id"),i=(0,D.resolveStoreInstance)(L.default).activeEditor;I.default.transitionTo(E.API_OVERVIEW_IDENTIFIER,{apiId:t},{view:N.DEPLOYMENTS},{tabOptions:{openIn:i}})}handleExportApi(){const{integration:e,selectedService:t}=this.state,{context:i}=this.props,n=A().get(i,"releaseId",null)?S.RELEASE_VIEW:S.DEPLOYMENT_VIEW;k.default.addDeployClickAnalytics(e,n),I.default.transitionTo(E.V10_API_DEPLOY_NAV_IDENTIFIER,{apiId:A().get(e,"variables.postman_api_id"),integrationId:A().get(e,"id")},{azure_api_path:A().get(t,"value.azure_api_path")},{additionalContext:i})}render(){const{integrationData:e}=this.props,{loadingService:t,errorService:i,selectedService:a,refreshChangelog:s,refreshRevisions:r,refreshExports:o,isEditEnabled:l}=this.state;return n.createElement(n.Fragment,null,this.renderTopHeader(),n.createElement("div",{className:"observability-azure-detailed-dashboard-container"},t?this.renderLoadingState():i?this.renderErrorState():n.createElement(u.default,{direction:"column"},this.renderHeaderFirstRow(),this.renderHeaderSecondRow()),n.createElement(b.default,{integration:e,selectedService:A().get(a,"value"),refresh:r,onCurrentToggle:this.handleCurrentToggle,isEditEnabled:l}),n.createElement(y.default,{integration:e,selectedService:A().get(a,"value"),refresh:s}),n.createElement(v.default,{integration:e,selectedService:A().get(a,"value"),refresh:o})))}}},"./integrations/api-observability/components/detailed-dashboard/azure/ChangelogTable.js":function(e,t,i){i.r(t),i.d(t,{ChangelogTable:function(){return m}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("./integrations/api-observability/services/AzureService.js"),o=i("./integrations/api-observability/components/base/TableEmptyState.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),h=i("./js/modules/services/AnalyticsService.js");const g=({value:e})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(l.default,{color:"content-color-secondary",isTruncated:!0,typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e));class m extends n.Component{constructor(e){super(e),this.state={loadingReleases:!1,releases:{},errorReleases:!1,integration:e.integration,data:[],activeData:[],columns:[{Header:"Created",accessor:"createdAt",Cell:({value:e})=>n.createElement(g,{value:e}),cellWidth:"20%"},{Header:"Updated",accessor:"updatedAt",Cell:({value:e})=>n.createElement(g,{value:e}),cellWidth:"20%"},{Header:"Description",accessor:"description",Cell:({value:e})=>n.createElement(g,{value:e})}],nextIndex:0,selectedService:e.selectedService,showLoadMoreButton:!1},this.fetchReleases=this.fetchReleases.bind(this),this.updateSelectedService=this.updateSelectedService.bind(this),this.updateRelease=this.updateRelease.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleRefresh=this.handleRefresh.bind(this)}componentDidMount(){this.updateSelectedService(this.props.selectedService)}updateRelease(e){const t=s().get(this.state,"integration.id");this.setState({loadingReleases:!0,errorReleases:!1,activeData:[]}),this.fetchReleases(e,t).then((e=>{let t=[...e],i=0,n=t.slice(i,5),a=!1;i=Math.min(t.length,5),a=t.length!==i,this.setState({loadingReleases:!1,activeData:n,data:e,nextIndex:i,showLoadMoreButton:a})})).catch((e=>{this.setState({loadingReleases:!1,errorReleases:e})}))}updateSelectedService(e){this.setState({selectedService:e}),s().isEmpty(e)||this.updateRelease(e)}componentDidUpdate(e){s().isEqual(s().get(e,"selectedService.azure_api_path"),s().get(this.props,"selectedService.azure_api_path"))||this.updateSelectedService(this.props.selectedService),s().isEqual(s().get(e,"refresh"),s().get(this.props,"refresh"))||this.handleRefresh()}handleRefresh(){this.setState({releases:{},activeData:[],data:[]},(()=>{this.updateSelectedService(this.props.selectedService)}))}handleLoadMore(){let{data:e,activeData:t,nextIndex:i,showLoadMoreButton:n}=this.state;h.default.addEventV2({category:"gateway-integration",action:"azure-load-more-changelog",label:null,value:1}),i!==e.length&&(t=[...t,...[...e].splice(i,5)],i=Math.min(e.length,i+5),n=e.length!==i,this.setState({activeData:t,nextIndex:i,showLoadMoreButton:n}))}fetchReleases(e,t){let i={...this.state.releases};return s().isEmpty(i[e.azure_api_path])?r.default.fetchChangelog(e,t).then((t=>(i[e.azure_api_path]=t,this.setState({releases:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching changelog",e),Promise.reject(e)))):Promise.resolve(i[e.azure_api_path])}render(){const{loadingReleases:e,activeData:t,columns:i,errorReleases:a,showLoadMoreButton:r}=this.state,h=!e&&!a&&0===t.length;return n.createElement("div",{className:"observability-azure-table-container"},n.createElement("div",{className:"observability-azure-table-container__heading"},n.createElement(c.default,{type:"h4",text:"Changelog"})),h?n.createElement("div",{className:"observability-azure-table-container__empty-message"},n.createElement(l.default,{color:"content-color-secondary"},"No Changelog data found")):n.createElement(d.default,{className:"observability-azure-services-table",data:t,columns:i,bodyMaxHeight:"250px",loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px",showLoadMoreButton:r,onLoadMore:this.handleLoadMore},blankState:{isEmpty:!s().isEmpty(a),component:n.createElement(o.default,{title:"Something went wrong",description:"Please try again",secondaryAction:n.createElement(u.default,{type:"outline",text:"Refresh",onClick:this.handleRefresh}),illustration:n.createElement(p.default,null)})}}))}}t.default=m},"./integrations/api-observability/components/detailed-dashboard/azure/ExportsTable.js":function(e,t,i){i.r(t),i.d(t,{ExportsTable:function(){return b}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("./integrations/api-observability/services/AzureService.js"),o=i("./integrations/api-observability/components/base/TableEmptyState.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),h=i("./integrations/api-observability/components/detailed-dashboard/azure/PostmanSource.js"),g=i("./js/modules/services/AnalyticsService.js");const m=({value:e})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(l.default,{color:"content-color-secondary",isTruncated:!0,typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)),f=({value:e,meta:t})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(h.default,{source:e,meta:t}));class b extends n.Component{constructor(e){super(e),this.state={loadingExports:!1,exports:{},errorExports:!1,data:[],activeData:[],columns:[{Header:"Created",accessor:"createdAt",Cell:({value:e})=>n.createElement(m,{value:e}),cellWidth:"20%"},{Header:"Azure Revision",accessor:"azure_revision_id",Cell:({value:e})=>n.createElement(m,{value:e}),cellWidth:"20%"},{Header:"Source from Postman",accessor:"schemaSource",Cell:({value:e})=>{const t={apiId:s().get(this.props,"integration.variables.postman_api_id"),versionId:s().get(this.props,"integration.executor")};return n.createElement(f,{meta:t,value:e})}}],integration:e.integration,nextIndex:0,selectedService:e.selectedService,showLoadMoreButton:!1},this.fetchExports=this.fetchExports.bind(this),this.updateSelectedService=this.updateSelectedService.bind(this),this.updateExports=this.updateExports.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleRefresh=this.handleRefresh.bind(this)}componentDidMount(){this.updateSelectedService(this.props.selectedService)}updateSelectedService(e){this.setState({selectedService:e}),s().isEmpty(e)||this.updateExports(e)}componentDidUpdate(e){s().isEqual(s().get(e,"selectedService.azure_api_path"),s().get(this.props,"selectedService.azure_api_path"))||this.updateSelectedService(this.props.selectedService),s().isEqual(s().get(e,"refresh"),s().get(this.props,"refresh"))||this.handleRefresh()}updateExports(e){const t=s().get(this.state,"integration.id");this.setState({loadingExports:!0,errorExports:!1,activeData:[]}),this.fetchExports(e,t).then((e=>{let t=[...e],i=0,n=t.slice(i,5),a=!1;i=Math.min(t.length,5),a=t.length!==i,this.setState({loadingExports:!1,activeData:n,data:e,nextIndex:i,showLoadMoreButton:a})})).catch((e=>{this.setState({loadingExports:!1,errorExports:e})}))}fetchExports(e,t){let i={...this.state.exports};return s().isEmpty(i[e.azure_api_path])?r.default.fetchExports(e,t).then((t=>(i[e.azure_api_path]=t,this.setState({exports:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching exports",e),Promise.reject(e)))):Promise.resolve(i[e.azure_api_path])}handleLoadMore(){let{data:e,activeData:t,nextIndex:i,showLoadMoreButton:n,integration:a}=this.state;g.default.addEventV2({category:"gateway-integration",action:"load-more-exports",label:s().get(a,"rule"),value:1}),i!==e.length&&(t=[...t,...[...e].splice(i,5)],i=Math.min(e.length,i+5),n=e.length!==i,this.setState({activeData:t,nextIndex:i,showLoadMoreButton:n}))}handleRefresh(){this.setState({exports:{},activeData:[],data:[]},(()=>{this.updateSelectedService(this.props.selectedService)}))}render(){const{loadingExports:e,activeData:t,columns:i,errorExports:a,showLoadMoreButton:r}=this.state,h=!e&&!a&&0===t.length;return n.createElement("div",{className:"observability-azure-table-container"},n.createElement("div",{className:"observability-azure-table-container__heading"},n.createElement(c.default,{type:"h4",text:"Export History"})),h?n.createElement("div",{className:"observability-azure-table-container__empty-message"},n.createElement(l.default,{color:"content-color-secondary"},"There has been no export of API definition from Postman to Azure.")):n.createElement(d.default,{className:"observability-azure-services-table",data:t,columns:i,bodyMaxHeight:"250px",loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px",showLoadMoreButton:r,onLoadMore:this.handleLoadMore},blankState:{isEmpty:!s().isEmpty(a),component:n.createElement(o.default,{title:"Something went wrong",description:"Please try again",secondaryAction:n.createElement(u.default,{type:"outline",text:"Refresh",onClick:this.handleRefresh}),illustration:n.createElement(p.default,null)})}}))}}t.default=b},"./integrations/api-observability/components/detailed-dashboard/azure/MakeRevisionCurrentModal.js":function(e,t,i){i.r(t),i.d(t,{MakeRevisionCurrentModal:function(){return c}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");class c extends n.Component{constructor(e){super(e)}render(){const{showModal:e,onClose:t,description:i,handleDescriptionChange:c,onSubmit:d,loadingRevisionModalButton:u}=this.props;return n.createElement(a.Modal,{isOpen:e,onClose:t},n.createElement(a.ModalHeader,{heading:"Make revision current"}),n.createElement(a.ModalContent,null,n.createElement(s.default,{placeholder:"The description will be published in the change log on your developer portal",value:i,label:n.createElement(r.default,{text:"Description",fieldType:"optional"}),onChange:c,isDisabled:u})),n.createElement(a.ModalFooter,null,n.createElement(o.default,{className:"azure-current-revision-modal-button-container"},n.createElement(l.default,{type:"secondary",onClick:t,text:"Cancel",isDisabled:u}),n.createElement(l.default,{type:"primary",onClick:d,text:"Confirm",isDisabled:u,isLoading:u}))))}}t.default=c},"./integrations/api-observability/components/detailed-dashboard/azure/PostmanSource.js":function(e,t,i){i.r(t);var n=i("../../node_modules/react/index.js"),a=i("./js/services/NavigationService.js"),s=i("./api-dev/services/APIDevService.js"),r=i("./integrations/api-observability/constants.ts"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),p=i("./node_modules/lodash/lodash.js");function h({message:e,onRetry:t}){return n.createElement("div",{className:"postman-source-error"},n.createElement("span",{className:"postman-source-error__message"},e+" "),n.createElement("span",{className:"postman-source-error__link",onClick:t},"Retry"))}t.default=function({source:e,meta:t}){const[i,g]=(0,n.useState)(!1),[m,f]=(0,n.useState)("-"),[b,y]=(0,n.useState)(!1);(0,n.useEffect)((()=>{p.get(e,"type")===r.SCHEMA_SOURCE_TYPE.RELEASE&&v(p.get(e,"releaseId"))}),[]);const v=e=>{const{apiId:i,versionId:n}=t;g(!0),y(!1),s.default.getRelease(i,n,e).then((e=>{f(p.get(e,"name","-")),g(!1)})).catch((e=>{pm.logger.error("Error occurred while fetching release",e),g(!1),y("Unable to load Release.")}))};return p.get(e,"type")===r.SCHEMA_SOURCE_TYPE.BRANCH?n.createElement(o.default,{color:"content-color-primary"},n.createElement("div",{className:"postman-source-item-container"},n.createElement("div",{className:"postman-source-item-container__icon"},n.createElement(c.default,{color:"content-color-primary"})),n.createElement("div",{className:"postman-source-item-container__content"},e.name))):p.get(e,"type")===r.SCHEMA_SOURCE_TYPE.RELEASE?b?n.createElement(h,{message:b,onRetry:v}):n.createElement("span",{onClick:()=>{return i=e.releaseId,void a.default.transitionTo("build.release",{apiId:p.get(t,"apiId"),versionId:p.get(t,"versionId"),releaseId:i});var i}},n.createElement(o.default,{type:"link-primary"},n.createElement("div",{className:"postman-source-item-container"},n.createElement("div",{className:"postman-source-item-container__icon"},n.createElement(d.default,{color:"content-color-link"})),n.createElement("div",{className:"postman-source-item-container__content"},i?n.createElement(l.default,null):m)))):p.get(e,"type")===r.SCHEMA_SOURCE_TYPE.HEAD?n.createElement(o.default,{color:"content-color-primary"},n.createElement("div",{className:"postman-source-item-container"},n.createElement("div",{className:"postman-source-item-container__icon"},n.createElement(u.default,{color:"content-color-primary"})),n.createElement("div",{className:"postman-source-item-container__content"},r.API_DEFINITION))):n.createElement(o.default,{color:"content-color-primary"},"-")}},"./integrations/api-observability/components/detailed-dashboard/azure/RevisionsTable.js":function(e,t,i){i.r(t),i.d(t,{RevisionsTable:function(){return I}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("./integrations/api-observability/services/AzureService.js"),o=i("./integrations/api-observability/components/base/TableEmptyState.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/ToggleSwitch/ToggleSwitch.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),m=i("./integrations/api-observability/components/detailed-dashboard/azure/PostmanSource.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./integrations/api-observability/components/detailed-dashboard/azure/MakeRevisionCurrentModal.js"),y=i("./js/modules/services/AnalyticsService.js");const v=({value:e})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(l.default,{color:"content-color-secondary",isTruncated:!0,typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)),_=({value:e,onChange:t,isEditEnabled:i})=>{if(!i)return n.createElement("div",{className:"azure-custom-cell"},n.createElement(c.default,{content:f.PERMISSION_ERROR},n.createElement(d.default,{isChecked:e.value,onChange:t,isDisabled:!0})));const a=e.disabledText;return s().isEmpty(a)?n.createElement("div",{className:"azure-custom-cell"},n.createElement(d.default,{isChecked:e.value,onChange:t,isDisabled:e.isDisabled})):n.createElement("div",{className:"azure-custom-cell"},n.createElement(c.default,{content:a},n.createElement(d.default,{isChecked:e.value,onChange:t,isDisabled:!0})))},S=({value:e,meta:t})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(m.default,{source:e,meta:t}));class I extends n.Component{constructor(e){super(e),this.state={loadingRevisions:!1,revisions:[],errorRevisions:!1,integration:this.props.integration,data:[],activeData:[],loadingRevisionAction:!1,columns:[{Header:"ID",accessor:"azure_revision_id",Cell:({value:e})=>n.createElement(v,{value:e}),cellWidth:"40px"},{Header:"Created",accessor:"createdAt",Cell:({value:e})=>n.createElement(v,{value:e}),cellWidth:"20%"},{Header:"Description",accessor:"description",Cell:({value:e})=>n.createElement(v,{value:e}),cellWidth:"20%"},{Header:"URL",accessor:"privateUrl",Cell:({value:e})=>n.createElement(v,{value:e}),cellWidth:"20%"},{Header:"Online",accessor:"isOnline",Cell:({value:e})=>n.createElement(_,{value:e,onChange:()=>this.handleOnlineToggle(e),isEditEnabled:this.props.isEditEnabled}),cellWidth:"96px"},{Header:"Current",accessor:"isCurrent",Cell:({value:e})=>n.createElement(_,{value:e,onChange:()=>this.handleCurrentToggle(e),isEditEnabled:this.props.isEditEnabled}),cellWidth:"96px"},{Header:"Postman Source",accessor:"schemaSource",Cell:({value:e})=>{const t={apiId:s().get(this.props,"integration.variables.postman_api_id"),versionId:s().get(this.props,"integration.executor")};return e?n.createElement(S,{meta:t,value:e}):n.createElement("div",{className:"azure-custom-cell"},n.createElement("span",{className:"azure-custom-cell__no-source"},"No source linked"))},cellWidth:"20%"}],nextIndex:0,selectedService:e.selectedService,showLoadMoreButton:!1,showRevisionModal:!1,azureReleaseDescription:"",focusedRevision:null,loadingRevisionModalButton:!1},this.fetchRevisions=this.fetchRevisions.bind(this),this.updateSelectedService=this.updateSelectedService.bind(this),this.updateRevisions=this.updateRevisions.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleCurrentToggle=this.handleCurrentToggle.bind(this),this.handleOnlineToggle=this.handleOnlineToggle.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.updateColumnDisabledState=this.updateColumnDisabledState.bind(this),this.handleRevisionModalClose=this.handleRevisionModalClose.bind(this),this.handleRevisionModalSubmit=this.handleRevisionModalSubmit.bind(this)}componentDidMount(){this.updateSelectedService(this.props.selectedService)}componentDidUpdate(e){s().isEqual(s().get(e,"selectedService.azure_api_path"),s().get(this.props,"selectedService.azure_api_path"))||this.updateSelectedService(this.props.selectedService),s().isEqual(s().get(e,"refresh"),s().get(this.props,"refresh"))||this.handleRefresh(),s().isEqual(s().get(e,"isEditEnabled"),s().get(this.props,"isEditEnabled"))||this.updateColumnDisabledState(this.props.isEditEnabled)}updateColumnDisabledState(e){let t=[...this.state.columns];t[4]={Header:"Online",accessor:"isOnline",Cell:({value:t})=>n.createElement(_,{value:t,onChange:()=>this.handleOnlineToggle(t),isEditEnabled:e}),cellWidth:"96px"},t[5]={Header:"Current",accessor:"isCurrent",Cell:({value:e})=>n.createElement(_,{value:e,onChange:()=>this.handleCurrentToggle(e),isEditEnabled:this.props.isEditEnabled}),cellWidth:"96px"},this.setState({columns:t})}updateRevisions(e){const t=s().get(this.state,"integration.id");this.setState({loadingRevisions:!0,errorRevisions:!1,activeData:[]}),this.fetchRevisions(e,t).then((e=>{let t=[...e],i=0,n=t.slice(i,5),a=!1;i=Math.min(t.length,5),a=t.length!==i,this.setState({loadingRevisions:!1,activeData:n,data:e,nextIndex:i,showLoadMoreButton:a})})).catch((e=>{this.setState({loadingRevisions:!1,errorRevisions:e})}))}updateSelectedService(e){this.setState({selectedService:e}),s().isEmpty(e)||this.updateRevisions(e)}fetchRevisions(e,t){return r.default.fetchRevisions(e,t).then((i=>r.default.fetchRevisionMapping(e,i,t).then((t=>{const n=s().map(i,(i=>{const n=`${e.azure_api_path};rev=${i.azure_revision_id}`;return{...i,schemaSource:t[n]}}));return this.setState({revisions:n}),Promise.resolve(n)})).catch((e=>{throw e})))).catch((e=>(pm.logger.error("Error occurred while fetching revisions",e),Promise.reject(e))))}handleLoadMore(){let{data:e,activeData:t,nextIndex:i,showLoadMoreButton:n}=this.state;y.default.addEventV2({category:"gateway-integration",action:"azure-load-more-revisions",label:null,value:1}),i!==e.length&&(t=[...t,...[...e].splice(i,5)],i=Math.min(e.length,i+5),n=e.length!==i,this.setState({activeData:t,nextIndex:i,showLoadMoreButton:n}))}updateDisabled(e,t){return s().map(e,(e=>({...e,isOnline:{...e.isOnline,isDisabled:t},isCurrent:{...e.isCurrent,isDisabled:t}})))}updateRevisionIsOnline(e,t,i){return s().map(e,(e=>e.azure_revision_id===t.azure_revision_id?{...e,isOnline:{...e.isOnline,value:i}}:e))}updateRevisionIsCurrent(e,t){return s().map(e,(e=>e.azure_revision_id===t.azure_revision_id?{...e,isCurrent:{...e.isCurrent,value:!0}}:{...e,isCurrent:{...e.isCurrent,value:!1}}))}handleOnlineToggle(e){if(e&&e.value){const t=s().find(this.state.activeData,{azure_revision_id:e.azure_revision_id});if(t&&t.isCurrent.value)return void pm.toasts.error("Current revision cannot be made offline.")}let t=[...s().get(this.state,"data")],i=[...s().get(this.state,"activeData")],n=s().get(this.state,"selectedService"),a=s().get(this.state,"integration.id");t=this.updateDisabled(t,!0),i=this.updateDisabled(i,!0),y.default.addEventV2({category:"gateway-integration",action:"azure-toggle-online",label:e.value?"off":"on",value:1}),this.setState({data:t,activeData:i},(()=>{t=[...s().get(this.state,"data")],i=[...s().get(this.state,"activeData")],r.default.toggleOnlineRevision(n,e.azure_revision_id,!e.value,a).then((n=>{t=this.updateDisabled(t,!1),i=this.updateDisabled(i,!1),t=this.updateRevisionIsOnline(t,e,!e.value),i=this.updateRevisionIsOnline(i,e,!e.value),this.setState({data:t,activeData:i}),pm.toasts.success(`Successfully made the revision ${e.value?"offline":"online"}.`)})).catch((e=>{t=this.updateDisabled(t,!1),i=this.updateDisabled(i,!1),this.setState({data:t,activeData:i}),pm.logger.error("Error occurred while toggling revision status",e),pm.toasts.error("Error occurred while toggling revision status",{title:s().get(e,"error.title")||"Azure API Management error",noIcon:!0})}))}))}handleCurrentToggle(e){if(e&&!e.value){const t=s().find(this.state.activeData,{azure_revision_id:e.azure_revision_id});if(t&&!t.isOnline.value)return void pm.toasts.error("Offline revision cannot be made current.")}let t=[...s().get(this.state,"data")],i=[...s().get(this.state,"activeData")];t=this.updateDisabled(t,!0),i=this.updateDisabled(i,!0),this.setState({data:t,activeData:i,showRevisionModal:!0,focusedRevision:e})}handleRefresh(){this.setState({revisions:{},activeData:[],data:[]},(()=>{this.updateSelectedService(this.props.selectedService)}))}handleRevisionModalSubmit(){let e=[...s().get(this.state,"data")],t=[...s().get(this.state,"activeData")],i=s().get(this.state,"selectedService"),n=s().get(this.state,"integration.id"),a=s().get(this.state,"focusedRevision"),o=s().get(this.state,"azureReleaseDescription","");y.default.addEventV2({category:"gateway-integration",action:"azure-toggle-current",label:null,value:1}),this.setState({loadingRevisionModalButton:!0},(()=>{r.default.toggleCurrentRevision(i,a.azure_revision_id,o,n).then((i=>{e=this.updateDisabled(e,!1),t=this.updateDisabled(t,!1),e=this.updateRevisionIsCurrent(e,a),t=this.updateRevisionIsCurrent(t,a),this.setState({data:e,activeData:t,showRevisionModal:!1,loadingRevisionModalButton:!1,focusedRevision:null,azureReleaseDescription:""}),s().isFunction(this.props.onCurrentToggle)&&this.props.onCurrentToggle(),pm.toasts.success("Successfully made the revision current.")})).catch((i=>{e=this.updateDisabled(e,!1),t=this.updateDisabled(t,!1),this.setState({data:e,activeData:t,showRevisionModal:!1,loadingRevisionModalButton:!1,focusedRevision:null,azureReleaseDescription:""}),pm.logger.error("Error occurred while toggling.",i),pm.toasts.error("Error occurred while toggling revision status",{title:s().get(i,"error.title")||"Azure API Management error",noIcon:!0})}))}))}handleRevisionModalClose(){if(this.state.loadingRevisionModalButton)return;let e=[...s().get(this.state,"data")],t=[...s().get(this.state,"activeData")];e=this.updateDisabled(e,!1),t=this.updateDisabled(t,!1),this.setState({data:e,activeData:t,showRevisionModal:!1,loadingRevisionModalButton:!1,focusedRevision:null,azureReleaseDescription:""})}render(){const{loadingRevisions:e,activeData:t,columns:i,errorRevisions:a,showLoadMoreButton:r,showRevisionModal:c,azureReleaseDescription:d,loadingRevisionModalButton:m}=this.state,f=!e&&!a&&0===t.length;return n.createElement("div",{className:"observability-azure-table-container"},n.createElement(b.default,{showModal:c,onClose:this.handleRevisionModalClose,onSubmit:this.handleRevisionModalSubmit,description:d,handleDescriptionChange:e=>this.setState({azureReleaseDescription:e.target.value}),loadingRevisionModalButton:m}),n.createElement("div",{className:"observability-azure-table-container__heading"},n.createElement(u.default,{type:"h4",text:"Revisions"})),f?n.createElement("div",{className:"observability-azure-table-container__empty-message"},n.createElement(l.default,null,"No Revisions found")):n.createElement(p.default,{className:"observability-azure-services-table",data:t,columns:i,bodyMaxHeight:"250px",loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px",showLoadMoreButton:r,onLoadMore:this.handleLoadMore},blankState:{isEmpty:!s().isEmpty(a),component:n.createElement(o.default,{title:"Something went wrong",description:"Please try again",secondaryAction:n.createElement(h.default,{type:"outline",text:"Refresh",onClick:this.handleRefresh}),illustration:n.createElement(g.default,null)})}}))}}t.default=I},"./integrations/api-observability/components/detailed-dashboard/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/components/detailed-dashboard/azure/Azure.js"),a=i("./integrations/api-observability/components/detailed-dashboard/aws/CloudWatchMetrics.js");t.default={api_management_azure:n.default,api_gateway_aws:a.default}},"./integrations/api-observability/components/edit/ApiGateway.js":function(e,t,i){i.r(t),i.d(t,{ApiGatewayDefault:function(){return A},ApiGatewayIam:function(){return P},default:function(){return T}});var n,a,s=i("./node_modules/lodash/lodash.js"),r=i.n(s),o=i("../../node_modules/react/index.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./js/stores/StoreManager.js"),d=i("./js/stores/CurrentUserStore.js"),u=i("./js/stores/IntegrationsStore.js"),p=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),h=i("./js/components/base/Buttons.js"),g=i("./integrations/api-observability/services/index.js"),m=i("./js/services/NavigationService.js"),f=i("./integrations/api-observability/components/base/EditIntegration.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js"),v=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),_=i("./appsdk/workbench/TabService.js"),S=i("./integrations/navigation/constants.js"),I=i("./integrations/api-observability/services/ApiGatewayService.js"),w=i("./api-dev/constants/APISubViews.js"),E=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},x.apply(this,arguments)}let A=(0,l.observer)(n=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",auth_type:b.AWS_IAM_ROLE,aws_api_type:"http",consentProvided:!1,isUpdatingIntegration:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:"",nickname:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],custom_api_gateway:"",isCustomApiGatewayMandatory:!1,showApiGatewayInputField:!1,errorGateway:!1,loadingGateway:!1,errorNickname:"",availableApiGatewayTypes:b.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:b.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:b.AVAILABLE_AUTH_TYPES,selectedAuthType:b.AVAILABLE_AUTH_TYPES[0],currentAuthType:b.AWS_IAM_ROLE,integration_name:""},this.store=(0,c.resolveStoreInstance)(u.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.handleAwsAccessKeyInput=this.handleAwsAccessKeyInput.bind(this),this.handleAwsKeyIdInput=this.handleAwsKeyIdInput.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAuthTypeChange=this.handleAuthTypeChange.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.setIsUpdatingIntegration=this.setIsUpdatingIntegration.bind(this),this.fetchApiGatewaysWithIntegrationId=this.fetchApiGatewaysWithIntegrationId.bind(this),this.getInitialState=this.getInitialState.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){let{aws_key_id:t,aws_access_key:i,aws_region:n}=this.state;this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{r().isEmpty(t)||r().isEmpty(i)||r().isEmpty(n)||this.fetchApiGateways()}))}handleAwsKeyIdInput(e){this.setState({selectedAPIGateway:"",aws_key_id:e,errorAwsKeyId:r().isEmpty(e.trim())?"Please enter an Access Key ID":""},(()=>{r().isEmpty(e)||r().isEmpty(this.state.aws_access_key)||r().isEmpty(this.state.aws_region)||this.fetchApiGateways()}))}handleAwsAccessKeyInput(e){this.setState({selectedAPIGateway:"",aws_access_key:e,errorAwsAccessKey:r().isEmpty(e.trim())?"Please enter a Secret Access Key":""},(()=>{r().isEmpty(e)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_region)||this.fetchApiGateways()}))}handleAwsRegionInput(e){this.setState({selectedAPIGateway:"",aws_region:e,errorAwsRegion:r().isEmpty(e.trim())?"Please enter the AWS region":""},(()=>{r().isEmpty(e)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_access_key)||this.fetchApiGateways()}))}handleAuthTypeChange(e){this.setState({selectedAPIGateway:{},currentAuthType:e.value,selectedAuthType:e,auth_type:e.value},(()=>{e.value!==b.AWS_KEYS||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_access_key)||this.fetchApiGateways()}))}handleNameChange(e){this.setState({integration_name:e,errorNickname:r().isEmpty(e.trim())?"Please enter the Integration name":e.trim().length>255?"Name field can't have more than 255 characters":""})}fetchApiGateways(){let{aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:a,aws_api_gateway_id:s}=this.state,{rule:o}=this.props;this.setState({verifying:!0,availableApiGateways:[],aws_api_gateway_id:"",errorApiGateways:!1}),g.default[o].fetchApiGateways({aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:a,rule:o,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),i=r().find(t,(e=>e.id===s||e.ApiId===s));this.setState({verifying:!1,availableApiGateways:t},(()=>{this.onTargetSelect(i)}))})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}fetchApiGatewaysWithIntegrationId(e){let{aws_api_gateway_id:t}=this.state,{rule:i}=this.props;this.setState({verifying:!0}),g.default[i].fetchApiGatewaysUsingIntegrationId(e).then((e=>{let i=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),n=r().find(i,(e=>e.id===t||e.ApiId===t));this.setState({verifying:!1,availableApiGateways:i,selectedAPIGateway:n})})).catch((e=>{this.setState({verifying:!1}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error("Something went wrong while fetching API Gateways, please try again."),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}componentDidMount(){const{variables:e}=this.props;this.setState(this.getInitialState(),(()=>{e.auth_type===b.AWS_KEYS&&this.fetchApiGatewaysWithIntegrationId(this.props.integrationId)}))}getInitialState(){const{variables:e,nickname:t}=this.props;return{integration_name:t,auth_type:e.auth_type,currentAuthType:e.auth_type,aws_api_type:e.aws_api_type,apiVersionId:e.executor,postman_api_id:e.postman_api_id,aws_key_id:e.aws_key_id,aws_access_key:e.aws_access_key,aws_region:e.aws_region,aws_api_gateway_id:e.aws_api_gateway_id,selectedAuthType:e.auth_type===b.AWS_IAM_ROLE?{label:"IAM",value:b.AWS_IAM_ROLE}:{label:"Access Key",value:b.AWS_KEYS},selectedAPIGatewayType:"http"===e.aws_api_type?{label:"HTTP",value:"http"}:{label:"REST",value:"rest"}}}setIsUpdatingIntegration(e){this.setState({isUpdatingIntegration:e})}render(){let{rule:e,apiId:t,apiVersionId:i,integrationId:n}=this.props,{aws_key_id:a,aws_access_key:s,aws_region:l,verifying:c,errorAwsKeyId:d,auth_type:u,aws_api_type:g,errorAwsAccessKey:y,errorAwsRegion:v,selectedAPIGateway:I,aws_api_gateway_id:A,isCustomApiGatewayMandatory:T,errorGateway:C,availableApiGateways:D,availableApiGatewayTypes:j,selectedAPIGatewayType:O,currentAuthType:R,selectedAuthType:k,availableAuthTypes:M,integration_name:L,postman_api_id:N,errorNickname:z,isUpdatingIntegration:F,errorApiGateways:V}=this.state,B={rule:e,name:L,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:u,aws_api_type:g,postman_api_id:N,...a?{aws_key_id:a}:{},...s?{aws_access_key:s}:{},aws_region:l,aws_api_gateway_id:A,role_arn:"",external_id:""}},W=L.length<256;return o.createElement("div",null,o.createElement(p.SelectSegmentV2,{title:"AWS Authentication Method",options:M,value:k,onTargetSelect:this.handleAuthTypeChange}),o.createElement(p.FieldSegment,{mandatory:!0,id:"integration-name",title:"Nickname",placeholder:"Give a nickname to your integration.",value:L,error:z,onBlur:()=>{this.handleNameChange(L.trim())},onChange:e=>{this.handleNameChange(e)}}),R===b.AWS_IAM_ROLE?o.createElement(P,x({authType:u,integration_name:L},this.props)):o.createElement("div",null,o.createElement(p.SelectSegmentV2,{title:"AWS API Type",options:j,value:O,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(p.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",maskedPlaceholderWhenEmpty:!0,description:"Enter the AWS access key id",value:a,error:d,onBlur:()=>{this.handleAwsKeyIdInput(a)},onChange:e=>{this.setState({aws_key_id:e,errorAwsKeyId:""})}}),o.createElement(p.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",description:"Enter the AWS access key",maskedPlaceholderWhenEmpty:!0,value:s,error:y,onBlur:()=>{this.handleAwsAccessKeyInput(s)},onChange:e=>{this.setState({aws_access_key:e,errorAwsAccessKey:""})}}),o.createElement(p.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:l,error:v,onBlur:()=>{this.handleAwsRegionInput(l)},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(p.SelectSegmentV2,{title:"AWS Gateway",disabled:!!T,label:"Select AWS Gateway",options:D,value:I,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:V?"Unable to load API Gateways":"",loading:c,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(f.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!s||!a||!l||c||!D||r().isEmpty(A)||r().isEmpty(L)||!W||!(0,E.isFormUpdated)(this.getInitialState(),this.state),payload:B,setIsUpdatingIntegration:this.setIsUpdatingIntegration,integrationId:n},"Update"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",disabled:F,onClick:()=>{m.default.transitionTo("build.apiVersion",{apiId:B.api_id,versionId:B.executor},{tab:w.DEPLOYMENT}),_.default.closeByRoute(S.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:B.api_id,integrationId:n})}},"Cancel")))))}})||n,P=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={aws_account_id:b.AWS_ACCOUNT_ID,external_id:"",role_arn:"",aws_region:"",consentProvided:!1,verifying:!1,verification:"",errorAwsRegion:"",aws_api_type:"http",errorRoleArn:"",showInfoBanner:!0,availableApiGatewayTypes:b.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:b.AVAILABLE_API_GATEWAY_TYPES[0]},this.store=(0,c.resolveStoreInstance)(u.default),this.currentUserStore=(0,c.resolveStoreInstance)(d.default),this.handleBannerClose=this.handleBannerClose.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.handleRoleArnInput=this.handleRoleArnInput.bind(this),this.setIsUpdatingIntegration=this.setIsUpdatingIntegration.bind(this),this.setExternalId=this.setExternalId.bind(this),this.fetchApiGatewaysWithIntegrationId=this.fetchApiGatewaysWithIntegrationId.bind(this),this.getInitialState=this.getInitialState.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{this.state.role_arn&&!r().isEmpty(this.state.role_arn)&&this.state.aws_region&&!r().isEmpty(this.state.aws_region)&&this.fetchApiGateways()}))}fetchApiGateways(){let{aws_region:e,aws_api_type:t,role_arn:i,external_id:n,aws_api_gateway_id:a}=this.state,{rule:s,authType:o}=this.props;this.setState({verifying:!0,availableApiGateways:[],aws_api_gateway_id:"",errorApiGateways:!1}),g.default[s].fetchApiGateways({role_arn:i,external_id:n,aws_region:e,auth_type:o,aws_api_type:t,rule:s,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),i=r().find(t,(e=>e.id===a||e.ApiId===a));this.setState({verifying:!1,availableApiGateways:t},(()=>{this.onTargetSelect(i)}))})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}fetchApiGatewaysWithIntegrationId(e){let{aws_api_gateway_id:t}=this.state,{rule:i}=this.props;this.setState({verifying:!0}),g.default[i].fetchApiGatewaysUsingIntegrationId(e).then((e=>{let i=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),n=r().find(i,(e=>e.id===t||e.ApiId===t));this.setState({verifying:!1,availableApiGateways:i,selectedAPIGateway:n})})).catch((e=>{this.setState({verifying:!1}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error("Something went wrong while fetching API Gateways, please try again."),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}handleBannerClose(){this.setState({showInfoBanner:!1})}handleRoleArnInput(e){this.setState({selectedAPIGateway:"",role_arn:e,errorRoleArn:r().isEmpty(e)?"Please enter the role ARN":""},(()=>{!this.state.aws_region||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.role_arn)||this.fetchApiGateways()}))}handleAwsRegionInput(e){this.setState({selectedAPIGateway:"",aws_region:e.trim(),errorAwsRegion:r().isEmpty(e.trim())?"Please enter a AWS region":""},(()=>{!this.state.role_arn||r().isEmpty(this.state.role_arn)||r().isEmpty(this.state.aws_region)||this.fetchApiGateways()}))}setIsUpdatingIntegration(e){this.setState({isUpdatingIntegration:e})}setExternalId(){let e={rule:this.props.rule,type:"fetchExternalId"};I.default.fetchExternalId(e).then((e=>{this.setState({external_id:e})})).catch((e=>{pm.toasts.error("Something went wrong, please try again."),pm.logger.error("Something went wrong while fetching External ID",e)}))}componentDidMount(){const{variables:e,authType:t}=this.props;this.setState(this.getInitialState(),(()=>{e.auth_type===b.AWS_IAM_ROLE?this.fetchApiGatewaysWithIntegrationId(this.props.integrationId):t!==b.AWS_IAM_ROLE||r().isEmpty(this.state.role_arn)||this.fetchApiGateways(),this.setExternalId()}))}getInitialState(){const{variables:e}=this.props;return{auth_type:e.auth_type,aws_api_type:e.aws_api_type,apiVersionId:e.executor,postman_api_id:e.postman_api_id,role_arn:e.role_arn,external_id:e.external_id,aws_region:e.aws_region,aws_api_gateway_id:e.aws_api_gateway_id,selectedAuthType:e.auth_type===b.AWS_IAM_ROLE?{label:"IAM",value:b.AWS_IAM_ROLE}:{label:"Access Key",value:b.AWS_KEYS},selectedAPIGatewayType:"http"===e.aws_api_type?{label:"HTTP",value:"http"}:{label:"REST",value:"rest"}}}render(){let{rule:e,apiId:t,apiVersionId:i,authType:n,integration_name:a,integrationId:s}=this.props,{role_arn:l,aws_region:c,verifying:d,errorAwsRegion:u,errorRoleArn:g,external_id:b,showInfoBanner:I,aws_api_type:x,aws_api_gateway_id:A,availableApiGateways:P,selectedAPIGateway:T,errorGateway:C,availableApiGatewayTypes:D,selectedAPIGatewayType:j,isUpdatingIntegration:O,errorApiGateways:R}=this.state,k={rule:e,name:a,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:n,aws_api_type:x,role_arn:l,external_id:b,postman_api_id:t,aws_region:c,aws_api_gateway_id:A,aws_key_id:"",aws_access_key:""}},M=a.length<256;return o.createElement("div",null,o.createElement(p.SelectSegmentV2,{title:"AWS API Type",options:D,value:j,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(y.default,{title:"AWS account ID",value:this.state.aws_account_id,description:"This assigns the IAM role to Postman."}),o.createElement(y.default,{title:"External ID",value:this.state.external_id,description:"This adds an extra level of security against malicious attacks."},o.createElement(v.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-confused-duty-problem"},"Learn more")),o.createElement(p.FieldSegment,{mandatory:!0,id:"role-arn",placeholder:"arn:aws:iam::79840258006:role/PostmanIntegration",title:"Role ARN",description:"Provided by AWS once the IAM role is created. It allows Postman to assume the IAM role.",value:l,error:g,onBlur:()=>{this.handleRoleArnInput(l)},onChange:e=>{this.setState({role_arn:e,errorRoleArn:""})}}),o.createElement(p.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:c,error:u,onBlur:()=>{this.handleAwsRegionInput(c)},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(p.SelectSegmentV2,{title:"AWS Gateway",label:"Select AWS Gateway",options:P,value:T,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:R?"Unable to load API Gateways":"",loading:d,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(f.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!l||!c||d||!P||r().isEmpty(A)||r().isEmpty(a)||!M||!(0,E.isFormUpdated)(this.getInitialState(),this.state),payload:k,setIsUpdatingIntegration:this.setIsUpdatingIntegration,integrationId:s},"Update"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",disabled:O,size:"small",onClick:()=>{m.default.transitionTo("build.apiVersion",{apiId:k.api_id,versionId:k.executor},{tab:w.DEPLOYMENT}),_.default.closeByRoute(S.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:k.api_id,integrationId:s})}},"Cancel"))))}})||a;function T(e){const{rule:t}=e;if("api_gateway_aws"===t)return o.createElement(A,e)}},"./integrations/api-observability/components/edit/ApigeeAPIGateway.js":function(e,t,i){i.r(t),i.d(t,{APIGatewayApigeeDefault:function(){return T},default:function(){return C}});var n,a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("../../node_modules/react/index.js"),o=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=i("./js/stores/StoreManager.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),b=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),y=i("./js/services/NavigationService.js"),v=i("./api-dev/constants/APISubViews.js"),_=i("./appsdk/workbench/TabService.js"),S=i("./integrations/navigation/constants.js"),I=i("./js/modules/services/AnalyticsService.js"),w=i("./js/components/base/LoadingIndicator.js"),E=i("./integrations/api-observability/constants.ts"),x=i("./integrations/api-observability/components/base/CustomMultiSelect.js"),A=i("./integrations/api-observability/components/base/CustomDropdown.js"),P=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let T=(0,o.observer)(n=class extends r.Component{constructor(e){super(e),this.setUploadedFile=e=>{let t=s().isObject(e)?e[0]:"";if(t){let e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=function(e){try{let t=JSON.parse(e.target.result),i=Object.keys(t);if(this.setState({isFileUploaded:!0,serviceAccountEmail:s().get(t,"client_email"),privateKey:s().get(t,"private_key")},(()=>this.resetFormValuesAndFetchOrganizations())),!i.includes("client_email","private_key")){let e=new Error;throw e.name="invalidFileContent",e}}catch(e){this.setState({isFileUploaded:!1}),"invalidFileContent"===e.name?(pm.toasts.error("Invalid file content. Please try selecting different file."),pm.logger.error("Something went wrong while parsing JSON file",e)):(pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Something went wrong while parsing JSON file",e))}}.bind(this)}else this.setState({isFileUploaded:!1,serviceAccountEmail:"",privateKey:""})},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e,errorServiceAccountEmail:!e},(()=>this.resetFormValuesAndFetchOrganizations()))},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n"),errorPrivateKey:!e},(()=>this.resetFormValuesAndFetchOrganizations()))},this.resetFormValuesAndFetchOrganizations=()=>{const{serviceAccountEmail:e,privateKey:t}=this.state;this.setState({selectedOrganization:[],selectedApiProxy:[],selectedEnvironments:[],fetchedOrganizations:[]}),e&&t&&this.fetchOrganizations(E.PRE_CONFIG)},this.state={fetchedOrganizations:[],selectedOrganization:null,fetchedApiProxies:[],selectedApiProxy:null,fetchedEnvironments:[],selectedEnvironments:null,integrationId:"",serviceAccountEmail:s().get(this.props,"variables.service_account_email"),privateKey:s().get(this.props,"variables.private_key"),originalState:{}},this.store=(0,l.resolveStoreInstance)(c.default),this.handleSelectOrganization=this.handleSelectOrganization.bind(this),this.handleSelectApiProxy=this.handleSelectApiProxy.bind(this),this.handleSelectEnvironments=this.handleSelectEnvironments.bind(this),this.handleConnect=this.handleConnect.bind(this),this.navigateToDeploymentsTab=this.navigateToDeploymentsTab.bind(this),this.fetchOrganizations=s().debounce(this.fetchOrganizations.bind(this),1e3),this.fetchApiProxies=this.fetchApiProxies.bind(this),this.fetchEnvironments=this.fetchEnvironments.bind(this),this.updateIntegration=this.updateIntegration.bind(this),this.renderLoadingState=this.renderLoadingState.bind(this),this.getValidationState=this.getValidationState.bind(this)}componentDidMount(){this.setState({originalState:s().pick(this.state,["selectedOrganization","selectedApiProxy","selectedEnvironments","serviceAccountEmail","privateKey"])}),this.fetchOrganizations(E.POST_CONFIG),this.fetchApiProxies(E.POST_CONFIG),this.fetchEnvironments(E.POST_CONFIG)}fetchOrganizations(e){let{serviceAccountEmail:t,privateKey:i,selectedOrganization:n}=this.state;this.setState({isFetchingOrganization:!0});let a={service_account_email:t,private_key:i},r=E.FETCH_ORGANIZATIONS,o=s().get(this.props,"variables.organization"),l=this.props.integrationId;e===E.PRE_CONFIG&&(a.classId=this.props.rule),b.default.fetchGatewayActionDetails(e,r,a,l).then((t=>{let i=s().get(t,"body.data.organizations",[]),a=s().map(i,(t=>{if(e===E.POST_CONFIG&&s().get(t,"organization")===o){n={label:o,value:o};const e={...this.state.originalState};s().set(e,"selectedOrganization",n),this.setState({selectedOrganization:n,originalState:e})}return{label:t.organization,value:t.organization}}));this.setState({fetchedOrganizations:a,isFetchingOrganization:!1,fetchErrorOrganizations:!1})})).catch((e=>{this.setState({fetchErrorOrganizations:!0,isFetchingOrganization:!1}),pm.toasts.error("Something went wrong while fetching Apigee organizations"),pm.logger.error("Something went wrong while fetching Apigee organizations",e)}))}fetchApiProxies(e){let{serviceAccountEmail:t,privateKey:i,selectedOrganization:n,selectedApiProxy:a}=this.state;this.setState({isFetchingApiProxies:!0});let r={service_account_email:t,private_key:i,organization:s().get(n,"value")},o=E.FETCH_API_PROXIES,l=s().get(this.props,"variables.api_proxy"),c=this.props.integrationId;e===E.PRE_CONFIG&&(r.classId=this.props.rule),b.default.fetchGatewayActionDetails(e,o,r,c).then((t=>{let i=s().get(t,"body.data.proxies",[]),n=s().map(i,(t=>{if(e===E.POST_CONFIG&&s().get(t,"name")===l){a={label:l,value:l};const e={...this.state.originalState};s().set(e,"selectedApiProxy",a),this.setState({selectedApiProxy:a,originalState:e})}return{label:t.name,value:t.name}}));this.setState({fetchedApiProxies:n,isFetchingApiProxies:!1,fetchErrorApiProxies:!1})})).catch((e=>{this.setState({fetchErrorApiProxies:!0,isFetchingApiProxies:!1}),pm.toasts.error("Something went wrong while Apigee API Proxies"),pm.logger.error("Something went wrong while fetching Apigee API Proxies",e)}))}fetchEnvironments(e){let{serviceAccountEmail:t,privateKey:i,selectedOrganization:n,selectedEnvironments:a}=this.state;this.setState({isFetchingEnvironments:!0});let r={service_account_email:t,private_key:i,organization:s().get(n,"value")},o=E.FETCH_ENVIRONMENTS,l=s().get(this.props,"variables.environments"),c=this.props.integrationId;a=a||[],e===E.PRE_CONFIG&&(r.classId=this.props.rule),b.default.fetchGatewayActionDetails(e,o,r,c).then((t=>{let i=s().map(s().get(t,"body.data",[]),(t=>{if(e===E.POST_CONFIG&&l.includes(t)){a.push({label:t,value:t});const e={...this.state.originalState};s().set(e,"selectedEnvironments",a),this.setState({selectedEnvironments:a,originalState:e})}return{label:t,value:t}}));this.setState({fetchedEnvironments:i,isFetchingEnvironments:!1,fetchErrorEnvironments:!1})})).catch((e=>{this.setState({fetchErrorEnvironments:!0,isFetchingEnvironments:!1}),pm.toasts.error("Something went wrong while fetching Apigee environments"),pm.logger.error("Something went wrong while fetching Apigee environments",e)}))}handleSelectOrganization(e){this.setState({selectedOrganization:e,errorOrganization:s().isEmpty(e),fetchedApiProxies:[],selectedApiProxy:[],selectedEnvironments:[],fetchedEnvironments:[]},(()=>{s().get(e,"value")&&(this.fetchApiProxies(E.PRE_CONFIG),this.fetchEnvironments(E.PRE_CONFIG))}))}handleSelectEnvironments(e){this.setState({selectedEnvironments:e,errorEnvironments:s().isEmpty(e)})}handleSelectApiProxy(e){this.setState({selectedApiProxy:e,errorApiProxy:s().isEmpty(e)})}handleConnect(){let{selectedOrganization:e,selectedApiProxy:t,selectedEnvironments:i,serviceAccountEmail:n,privateKey:a}=this.state,{rule:r,integrationId:o}=this.props,l={variables:{service_account_email:n,...a?{private_key:a}:{},organization:s().get(e,"value"),api_proxy:s().get(t,"value"),environments:s().isArray(i)?i.map((e=>s().get(e,"value"))):[]}};this.setState({isAddingIntegration:!0}),this.updateIntegration(l,r,o)}updateIntegration(e,t,i){b.default.updateIntegration(i,e).then((e=>{this.setState({isAddingIntegration:!1}),200===s().get(e,"status")&&s().get(e,"body.model_id")?(pm.toasts.success("Successfully updated integration"),I.default.addEventV2({category:"integrations",action:t+"_edited_integration",label:"team_integrations_edit_forms",value:1}),this.navigateToDeploymentsTab()):pm.toasts.error("Something went wrong while updating integration")})).catch((e=>{this.setState({isAddingIntegration:!1}),"integrationFoundError"===s().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while updating integration. Please try again."),pm.logger.error("Something went wrong while updating integration",e)}))}navigateToDeploymentsTab(){let{apiId:e,apiVersionId:t}=this.props,i={apiId:e,versionId:t};_.default.closeByRoute(S.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:e,integrationId:this.state.integrationId}),this.store.initializeApiObservabilityStore({apiId:e,apiVersionId:t,category:E.API_OBSERVABILITY}),y.default.transitionTo("build.apiVersion",i,{tab:v.DEPLOYMENT})}renderLoadingState(){return r.createElement(d.default,{justifyContent:"space-between"},r.createElement("div",null,"Loading..."),r.createElement(w.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(e){let{errorOrganization:t,fetchErrorOrganizations:i,errorApiProxy:n,fetchErrorApiProxies:a,errorEnvironments:s,fetchErrorEnvironments:o}=this.state;return"organization"===e?t||i?{status:"error",message:i?r.createElement("div",null,"Unable to load organizations.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchOrganizations(E.PRE_CONFIG)}},"Retry")):"Please select an organization."}:{}:"apiProxy"===e?n||a?{status:"error",message:a?r.createElement("div",null,"Unable to load API Proxies.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchApiProxies(E.PRE_CONFIG)}},"Retry")):"Please select an API Proxy."}:{}:s||o?{status:"error",message:o?r.createElement("div",null,"Unable to load environments.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEnvironments(E.PRE_CONFIG)}},"Retry")):"Please select one or more environments."}:{}}render(){const{fetchedOrganizations:e,selectedOrganization:t,fetchedApiProxies:i,selectedApiProxy:n,fetchedEnvironments:a,selectedEnvironments:o,isAddingIntegration:l,isFetchingOrganization:c,isFetchingApiProxies:d,isFetchingEnvironments:b,serviceAccountEmail:y,errorServiceAccountEmail:v,isFileUploaded:_,privateKey:S,errorPrivateKey:I}=this.state,w=s().isEmpty(t)||s().isEmpty(n)||s().isEmpty(o);return r.createElement("div",{className:"connect-apigee-gateway__container"},r.createElement("div",{className:"connect-apigee-gateway__form__edit"},r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(u.default,{label:"Upload private key file (Optional)",helperText:r.createElement("div",null,r.createElement("div",null,"Upload private key file or manually enter the values below. "),r.createElement("div",null,"Only JSON file format is supported.")),id:"file-uploader",accept:".json",onChange:this.setUploadedFile,actionLabel:"Select File"})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(p.default,{placeholder:"Enter service account email",helperText:"Service Account Email associated with Google Cloud Project",value:y,onChange:e=>this.handleServiceAccountEmail(e.target.value),label:r.createElement(h.default,{text:"Service Account Email"}),validationStatus:v?"error":"",validationMessage:"Please enter service account email",isDisabled:_})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(g.default,{placeholder:"Enter private key",helperText:"Private key associated with the Service Account",value:S,onChange:e=>this.handlePrivateKey(e.target.value),label:r.createElement(h.default,{text:"Private Key"}),validationStatus:I?"error":"",validationMessage:"Please enter private key",isDisabled:_,isResizable:!1})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(A.default,{onChange:this.handleSelectOrganization,options:e||[],value:t,label:"Organization",placeholder:c?this.renderLoadingState():"Select Organization",className:c?"dropdown-icon-remove":"",emptyStateMessage:"No organizations found",isDisabled:c,validationState:this.getValidationState("organization"),menuWidth:E.DROPDOWN_WIDTH})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(A.default,{onChange:this.handleSelectApiProxy,options:i||[],value:n,label:"API Proxy",helperText:"Connection between Proxy and Postman API",placeholder:d?this.renderLoadingState():"Select API Proxy",className:d?"dropdown-icon-remove":"",isDisabled:!s().get(t,"value")||d,emptyStateMessage:"No API Proxies found",validationState:this.getValidationState("apiProxy"),menuWidth:E.DROPDOWN_WIDTH})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(x.default,{onChange:this.handleSelectEnvironments,options:a,value:o,label:"Environments",helperText:"Environments configured on Apigee X over which APIs are deployed",placeholder:b?this.renderLoadingState():"Select one or more environments",isDisabled:!s().get(t,"value")||b,emptyStateMessage:"No environments found",validationState:this.getValidationState("environments")})),r.createElement("div",{className:"connect-apigee-gateway__form--buttons--update"},r.createElement(m.default,null,r.createElement(f.default,{type:"secondary",size:"small",onClick:()=>{this.navigateToDeploymentsTab()},text:"Cancel",isDisabled:l}),r.createElement(f.default,{type:"primary",size:"small",onClick:()=>{this.handleConnect()},isDisabled:w||!(0,P.isFormUpdated)(this.state.originalState,this.state),text:"Update",isLoading:l})))))}})||n;function C(e){const{rule:t}=e;return"api_gateway_apigee"===t?r.createElement(T,e):r.createElement("div",null)}},"./integrations/api-observability/components/edit/Azure.js":function(e,t,i){i.r(t),i.d(t,{AzureSetup:function(){return w},default:function(){return E}});var n,a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("../../node_modules/react/index.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),u=i("./api-dev/constants/APISubViews.js"),p=i("./integrations/api-observability/components/base/AzureServiceConfig.js"),h=i("./integrations/api-observability/components/base/CancelButton.js"),g=i("./integrations/api-observability/components/base/EditIntegrationV2.js"),m=i("./node_modules/uuid/v4.js"),f=i.n(m),b=i("./integrations/navigation/constants.js"),y=i("./js/stores/StoreManager.js"),v=i("./integrations/api-observability/stores/APIObservabilityStore.js"),_=i("./integrations/api-observability/constants.ts"),S=i("./integrations/api-observability/AzureFormHelper.js");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},I.apply(this,arguments)}let w=(0,l.observer)(n=class extends r.Component{constructor(e){super(e),this.handleLinkedApis=(e,t)=>{let{linkedApis:i}=this.state,n=!1;e&&(i[t]=e),s().each(i,(e=>{if(!(s().get(e,"azure_subscription_id")&&s().get(e,"azure_resource_group_id")&&s().get(e,"azure_service_id")&&s().get(e,"azure_api_id")))return n=!0,!1})),this.setState({linkedApis:i,isDisabled:n})},this.generatePayload=()=>{const{linkedApis:e}=this.state;let t={variables:{linked_apis:(0,S.generateApiList)(e)}};return new Promise((e=>this.setState({payload:t},(()=>e(t)))))},this.handleFetchedSubscriptions=e=>{this.setState({fetchedSubscriptions:e})},this.addSection=()=>{let{linkedApis:e}=this.state;const t=f()();e[t]={},s().each(e,(e=>{e.isCollapsed=!0})),e[t].isCollapsed=!1,this.setState({linkedApis:e})},this.removeSection=e=>{let{linkedApis:t}=this.state;t[e]&&delete t[e],this.setState({linkedApis:t})},this.handleCollapse=(e,t)=>{let{linkedApis:i}=this.state;i[e]&&(i[e].isCollapsed=t),this.setState({linkedApis:i})},this.renderSections=()=>{let{fetchedSubscriptions:e,linkedApis:t}=this.state,i=[],n=1,a=[];return s().isObject(t)&&s().each(Object.keys(t),(e=>{t[e].azure_api_path&&a.push(t[e].azure_api_path)})),s().isObject(t)&&s().each(t,((s,o)=>{let l=t[o].isCollapsed;i.push(r.createElement(p.default,I({},this.props,{key:o,index:o,handleLinkedApis:this.handleLinkedApis,linkedApis:t,config:s,fetchedSubscriptions:e,selectedApiPaths:a,handleFetchedSubscriptions:this.handleFetchedSubscriptions,handleRemoveSection:this.removeSection,handleCollapse:this.handleCollapse,isCollapsed:l,isRemoveHidden:1===Object.keys(t).length,formType:_.EDIT,serialNumber:n}))),n++})),i},this.state={fetchedSubscriptions:[]},this.store=(0,y.resolveStoreInstance)(v.default)}componentDidMount(){const e=s().get(this.props,"variables.linked_apis");let t={};s().each(e,(e=>{let i=f()();t[i]=e,t[i].isCollapsed=!1})),this.setState({linkedApis:t})}render(){const{payload:e,isDisabled:t}=this.state,{apiId:i,apiVersionId:n,rule:a}=this.props;return r.createElement("div",null,r.createElement("div",{className:"observability-azure-add-integration__service"},_.SETUP_AZURE_API_MANAGEMENT_SERVICES),this.renderSections(),r.createElement("div",{className:"observability-azure-add-integration__buttons__add-service"},r.createElement(c.default,{onClick:()=>{this.addSection()},type:"tertiary",text:"Add Service",size:"small",icon:r.createElement(d.default,null),isDisabled:t||this.store.isAdding})),r.createElement("div",{className:"observability-azure-add-integration__buttons"},r.createElement(g.default,{text:"Update",payload:e,rule:a,apiId:i,apiVersionId:n,isDisabled:t||!(0,S.isFormUpdated)(this.props,this.state),customUpdateIntegrationHandler:this.generatePayload,integrationId:this.props.integrationId,redirectUrl:b.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL}),r.createElement("span",{className:"observability-azure-add-integration__buttons__cancel"},r.createElement(h.default,{text:"Cancel",apiId:i,apiVersionId:n,integrationId:this.props.integrationId,redirectUrl:b.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL}))))}})||n;function E(e){const{rule:t,apiId:i,apiVersionId:n}=e;return"api_management_azure"===t?r.createElement(w,e):r.createElement(o.default,{apiId:i,apiVersionId:n,tab:u.DEPLOYMENT})}},"./integrations/api-observability/components/edit/index.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),a=i("./integrations/api-observability/components/edit/ApiGateway.js"),s=i("./integrations/api-observability/components/edit/ApigeeAPIGateway.js"),r=i("./integrations/api-observability/components/edit/Azure.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("./api-dev/constants/APISubViews.js");const c={api_gateway_aws:a.default,api_gateway_apigee:s.default,api_management_azure:r.default};function d(e){const{rule:t,apiId:i,apiVersionId:a}=e,s=c[t];return(0,n.useEffect)((()=>{s||e.headingHandler(!1)}),[]),s?n.createElement(s,e):n.createElement(o.default,{apiId:i,apiVersionId:a,tab:l.DEPLOYMENT})}},"./integrations/api-observability/components/import-schema/APIGatewayAWS.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var n,a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("../../node_modules/react/index.js"),o=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./integrations/api-observability/services/ApiGatewayService.js"),v=i("./integrations/api-observability/services/GatewayIntegrationsService.js"),_=i("./integrations/api-observability/components/base/ImportSchemaActions.js"),S=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),I=i("./integrations/api-observability/components/common/ErrorState.js"),w=i("./js/services/NavigationService.js"),E=i("./appsdk/workbench/TabService.js"),x=i("./integrations/navigation/constants.js"),A=i("./api-dev/constants/APISubViews.js"),P=i("./integrations/api-observability/components/common/ImportSchemaBanner.js"),T=i("./integrations/api-observability/services/Helper.js");let C=(0,o.observer)(n=class extends r.Component{constructor(e){super(e),this.state={errorStages:!1,loadingStages:!1,stages:[],loadingData:!1,errorData:!1,AWSApiType:s().get(this.props,"integration.variables.aws_api_type")||b.API_GATEWAY_TYPES.HTTP,integration:s().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedStage:null,selectedAPIGateway:null,showImportModal:!1,isImportDisabled:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchStages=this.fetchStages.bind(this),this.fetchSchema=this.fetchSchema.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.handleNoSchema=this.handleNoSchema.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.bootstrap(),this.fetchRequiredPermission()}componentDidUpdate(e){s().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap()}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),T.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchStages(){this.setState({loadingStages:!0,errorStages:!1}),y.default.fetchStages(s().get(this.state,"integration.id")).then((e=>{let t=s().orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),i=s().map(t,(e=>({label:e.StageName||e.stageName,value:e.StageName||e.stageName})));this.setState({stages:i,loadingStages:!1},(()=>{this.handleNoSchema()}))})).catch((e=>{pm.logger.error("Error occurred while fetching stages",e),this.setState({errorStages:!0,loadingStages:!1,isImportDisabled:!1})}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{selectedStage:e,integration:t}=this.state;v.default.performAction(s().get(t,"id"),{stage:s().get(e,"label")},b.AWS_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200!==e.status)throw new Error("Something went wrong while fetching schema");{const t=s().get(e,"body.data.versions.0.schemas.0"),i={content:s().get(t,"schema"),language:s().get(t,"language"),type:s().get(t,"type")};this.setState({schemaContent:i,loadingSchema:!1,errorFetchingSchema:!1})}})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),pm.toasts.error("Error occurred while fetching Definition"),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return S.default.getIntegrationData(e&&e.toString()).then((e=>{const t=s().get(e,"body.data");return 200!==e.status||s().isEmpty(t)?new Error("Something went wrong while fetching integration"):Promise.resolve(t)})).catch((e=>Promise.reject("Something went wrong while fetching integration")))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),T.default.fetchAPIDetails(e),T.default.isSchemaPresent(e,t)]).then((([e,t,i])=>{s().get(t,"isGitIntegrationLinked")&&(i=!s().isEmpty(s().get(t,"apiDefinition.fileTree.items.files"))||!s().isEmpty(s().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:i},(()=>{this.fetchStages()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleNoSchema(){const{formSource:e,integrationId:t,apiId:i,versionId:n}=this.props,{stages:a}=this.state;!s().isEmpty(a)?this.setState({isImportDisabled:!1}):s().isEqual(e,b.IMPORT_FORM_SOURCES.INTEGRATION_SETUP)?(pm.toasts.warn("Skipping definition import as no stages found on linked API Gateway",{title:"Import Definition"}),E.default.closeByRoute(x.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:i}),w.default.transitionTo("build.apiVersion",{apiId:i,versionId:n,integrationId:t},{tab:A.DEPLOYMENT})):this.setState({isImportDisabled:!0})}handleStageChange(e){this.setState({selectedStage:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,stages:[],selectedStage:null})}renderTooltip(){const{isImportDisabled:e,loadingPermission:t,hasPermission:i,errorPermission:n}=this.state,a=(e?"No stages found on linked API Gateway":t&&"Fetching required permission")||n&&"Error occurred while fetching required permission. Please try again."||!i&&b.PERMISSION_ERROR||"Import definition from AWS";return r.createElement(l.default,{content:a,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,loadingStages:t,errorStages:i,loadingSchema:n,errorFetchingSchema:a,selectedStage:o,loadingData:l,errorData:c,apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p}=this.state,h={apiId:s().get(e,"variables.postman_api_id"),versionId:s().get(e,"executor"),integrationId:s().get(e,"id"),schemaContent:s().get(this.state,"schemaContent")},g=o&&!n&&!a&&s().isEmpty(s().get(h,"schemaContent.content"));return l||c?r.createElement("div",null):r.createElement(_.default,{payload:h,disabled:!o||n||a||i||t||g,tooltipText:n?"Fetching Definition":g&&"No Definition found on selected stage.",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:n,rule:s().get(e,"rule"),apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{stages:e,loadingStages:t,loadingSchema:i,isSchemaPresent:n,selectedStage:a,loadingData:s,errorData:o,errorFetchingSchema:l}=this.state;return s?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):o?r.createElement(I.default,{errorDetails:o}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(P.default,{isSchemaPresent:n})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:e||[],value:a,isLoading:t,isDisabled:i,isSearchable:!0,onChange:this.handleStageChange,label:"AWS stage"})),l&&r.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(m.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(h.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(h.default,{type:"link-default"},"Retry"))))))}render(){const e=s().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{isImportDisabled:t,loadingPermission:i,hasPermission:n,errorPermission:a}=this.state;return s().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(g.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||i||a||!n,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||n},"./integrations/api-observability/components/import-schema/Azure.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var n,a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("../../node_modules/react/index.js"),o=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./integrations/api-observability/services/AzureService.js"),v=i("./integrations/api-observability/components/base/ImportSchemaActions.js"),_=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),S=i("./integrations/api-observability/components/common/ErrorState.js"),I=i("./integrations/api-observability/components/common/ImportSchemaBanner.js"),w=i("./integrations/api-observability/services/Helper.js");let E=(0,o.observer)(n=class extends r.Component{constructor(e){super(e),this.state={loadingData:!1,services:[],schemaTypes:b.SCHEMA_TYPES,selectedSchemaType:b.SCHEMA_TYPES[0],errorData:!1,integration:s().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedService:null,showImportModal:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchSchema=this.fetchSchema.bind(this),this.fetchServices=this.fetchServices.bind(this),this.handleServiceChange=this.handleServiceChange.bind(this),this.handleSchemaTypeChange=this.handleSchemaTypeChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.fetchRequiredPermission(),this.bootstrap(),this.setState({selectedService:this.props.selectedService})}componentDidUpdate(e){s().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap(),s().isEqual(s().get(this.props,"selectedService.value.azure_api_path"),s().get(e,"selectedService.value.azure_api_path"))||this.setState({selectedService:this.props.selectedService})}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),w.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchServices(){const{integration:e}=this.state,t=s().get(e,"variables.linked_apis",[]),i=s().map(t,(e=>({label:s().get(e,"azure_service_id"),value:e})));this.setState({services:i},(()=>{s().isArray(i)&&1===i.length&&this.handleServiceChange(i[0])}))}handleSchemaTypeChange(e){this.setState({selectedSchemaType:e},(()=>{this.state.selectedService&&this.fetchSchema()}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{integration:e,selectedSchemaType:t,selectedService:i}=this.state;y.default.fetchSchema(s().get(e,"id"),i.value,t.value).then((e=>{this.setState({schemaContent:e,loadingSchema:!1,errorFetchingSchema:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return _.default.getIntegrationData(e&&e.toString()).then((e=>{const t=s().get(e,"body.data");if(200===e.status&&!s().isEmpty(t))return Promise.resolve(t);throw e})).catch((e=>Promise.reject(e)))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),w.default.fetchAPIDetails(e),w.default.isSchemaPresent(e,t)]).then((([e,t,i])=>{s().get(t,"isGitIntegrationLinked")&&(i=!s().isEmpty(s().get(t,"apiDefinition.fileTree.items.files"))||!s().isEmpty(s().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:i},(()=>{this.fetchServices()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleServiceChange(e){e&&this.setState({selectedService:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,services:[],selectedService:null,selectedSchemaType:b.SCHEMA_TYPES[0]})}renderTooltip(){const{loadingPermission:e,hasPermission:t,errorPermission:i}=this.state,n=(e?"Fetching required permission":i&&"Error occurred while fetching required permission. Please try again.")||!t&&b.PERMISSION_ERROR||"Import definition from Azure";return r.createElement(l.default,{content:n,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,errorStages:t,loadingSchema:i,errorFetchingSchema:n,selectedService:a,loadingData:o,errorData:l,selectedSchemaType:c,apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p}=this.state,h={apiId:s().get(e,"variables.postman_api_id"),versionId:s().get(e,"executor"),integrationId:s().get(e,"id"),schemaContent:s().get(this.state,"schemaContent")};return o||l?r.createElement("div",null):r.createElement(v.default,{payload:h,disabled:!a||!c||i||n||t,tooltipText:i&&"Fetching Definition",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:i,rule:s().get(e,"rule"),apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{services:e,loadingSchema:t,schemaTypes:i,selectedSchemaType:n,selectedService:a,loadingData:o,errorData:l,errorFetchingSchema:c,isSchemaPresent:g}=this.state,f=s().isEmpty(this.props.selectedService);return o?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):l?r.createElement(S.default,{errorDetails:l}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(I.default,{isSchemaPresent:g})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:i,value:n,isDisabled:t,isSearchable:!0,isClearable:!1,onChange:this.handleSchemaTypeChange,label:"Definition type"})),f&&r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:e,value:a,isDisabled:t,isSearchable:!0,onChange:this.handleServiceChange,label:"Azure service"})),c&&r.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(m.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(h.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(h.default,{type:"link-default"},"Retry"))))))}render(){const e=s().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{loadingPermission:t,hasPermission:i,errorPermission:n}=this.state;return s().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(g.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.handleServiceChange(this.props.selectedService),this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||!i||n,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||n},"./integrations/api-observability/components/import-schema/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/components/import-schema/APIGatewayAWS.js"),a=i("./integrations/api-observability/components/import-schema/Azure.js");t.default={api_gateway_aws:n.default,api_management_azure:a.default}},"./integrations/api-observability/components/import/ImportGatewayServiceConstants.js":function(e,t,i){i.r(t),i.d(t,{API_MANAGEMENT_AZURE:function(){return a},AWS_API_GATEWAY:function(){return n},CREATE_API_MODAL:function(){return y},DEFAULT_SERVICE_NAME:function(){return r},DEFINITION:function(){return g},DISABLED_IMPORT_BUTTON_TOOLTIP_TEXT:function(){return d},FILE:function(){return m},GATEWAY_SERVICES_LIST:function(){return s},GENERIC_CREATE_INTEGRATION_ERROR:function(){return u},IMPORT_ANALYTICS_ACTION:function(){return _},IMPORT_ANALYTICS_CATEGORY:function(){return v},SERVICE_CARD_DESCRIPTION:function(){return l},SERVICE_CARD_TITLE:function(){return o},SERVICE_NOT_SUPPORTED:function(){return c},SUCCESS_IMPORT_MESSAGE:function(){return h},SUCCESS_IMPORT_SCHEMA_MESSAGE:function(){return b},SUCCESS_IMPORT_SCHEMA_TITLE:function(){return f},SUCCESS_IMPORT_TITLE:function(){return p}});const n="api_gateway_aws",a="api_management_azure",s={[n]:{serviceId:"api_gateway_aws",classId:"api_gateway_aws",serviceName:"AWS API Gateway",iconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",darkIconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",featureFlag:""},[a]:{serviceId:"api_management_azure",classId:"api_management_azure",serviceName:"Azure API Management",iconUrl:"https://static.getpostman.com/assets/azure-apim.svg",darkIconUrl:"https://static.getpostman.com/assets/azure-apim.svg",featureFlag:"land-646-azure-apim-integration",authType:"oauth2"}},r="API Gateway",o="Import from API Gateway",l="Select an API Gateway to import an API.",c="Postman has encountered an error. If you can't find what you're looking for, contact us at help@postman.com",d="Make sure that you have entered all the mandatory fields.",u="Your API is imported successfully but something went wrong while adding an integration.",p="Imported API successfully",h="Your API is imported in current workspace successfully.",g="Definition",m="file",f="Imported API definition successfully",b="Your API definition has been successfully imported in the current API.",y="build.api.new",v="import",_="import_by_api_gateway"},"./integrations/api-observability/components/modals/DeleteIntegrationModal.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var n,a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=i("../../node_modules/react/index.js"),r=i("./js/components/base/Modals.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=(i("./js/components/base/LoadingIndicator.js"),i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts")),c=(i("./js/services/NavigationService.js"),i("./js/stores/StoreManager.js")),d=i("./integrations/api-observability/stores/APIObservabilityStore.js"),u=i("./js/stores/IntegrationsStore.js"),p=i("./integrations/api-observability/constants.ts"),h=i("./api-dev/util/navigationHelper.js"),g=i("./node_modules/lodash/lodash.js");let m=(0,a.observer)(n=class extends s.Component{constructor(e){super(e),this.state={isDeleting:!1,apiId:this.props.model.apiId,apiVersionId:this.props.model.id},this.store=(0,c.resolveStoreInstance)(d.default),this.integrationsStore=(0,c.resolveStoreInstance)(u.default),this.handleReset=this.handleReset.bind(this)}handleReset(){let{apiId:e,apiVersionId:t}=this.state,i={apiId:e,apiVersionId:t,category:p.API_OBSERVABILITY};pm.windowEvents.emit(`${p.API_OBSERVABILITY}-integration-deleted`,{apiId:i.apiId,apiVersionId:i.apiVersionId}),(0,h.transitionToAPI)({apiId:e,apiVersionId:t},{view:p.DEPLOYMENTS_VIEW})}render(){const{integrationId:e,ruleId:t}=this.props,{isDeleting:i,apiVersionId:n}=this.state;return s.createElement("div",null,s.createElement(r.Modal,{isOpen:this.props.isOpen,onRequestClose:this.props.handleCloseModal,className:"observability-modal"},s.createElement(r.ModalHeader,null,"Delete Integration"),s.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),s.createElement(r.ModalFooter,null,s.createElement(o.default,{text:"Delete Integration",className:"observability-modal__delete-button",type:"destructive",isDisabled:i,isLoading:i,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),this.props.handleCloseModal(),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.handleReset(),this.store.removeIntegrationInstances(n),g.isFunction(this.props.onSuccessfulDelete)&&this.props.onSuccessfulDelete()):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while deleting your integration"),pm.logger.error("Error occurred while deleting integration",e)}))}}),s.createElement(o.default,{text:"Cancel",className:"observability-modal__cancel-button",isDisabled:i,type:"secondary",onClick:this.props.handleCloseModal}))))}})||n},"./integrations/api-observability/configs/Integrations.js":function(e,t,i){i.r(t),t.default={api_management_azure:{name:"Azure API Management",icon_url:"https://static.getpostman.com/assets/azure-apim.svg",dark_icon_url:"https://static.getpostman.com/assets/azure-apim.svg"}}},"./integrations/api-observability/containers/DeployTabContainer.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,a=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/SyncStatusStore.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),p=i("./appsdk/workbench/TabService.js"),h=i("./js/services/NavigationService.js"),g=i("./integrations/navigation/constants.js"),m=i("./integrations/api-observability/constants.ts"),f=i("./integrations/api-observability/services/index.js"),b=i("./integrations/api-observability/components/deploy/index.js");let y=(0,c.observer)(n=class extends a.Component{constructor(e){super(e),this.state={backButtonText:"API"},this.handleBackClick=this.handleBackClick.bind(this),this.isDeployEnabled=this.isDeployEnabled.bind(this)}handleBackClick(){const e=r().get(this.props,"controller.integrationData"),t=r().get(this.props,"controller.context.releaseId"),i=r().get(e,"variables.postman_api_id"),n=r().get(e,"executor");t?h.default.transitionTo("build.release",{apiId:i,versionId:n,releaseId:t}):h.default.transitionTo("build.apiVersion",{apiId:i,versionId:n},{tab:m.DEPLOYMENT_TAB}),p.default.closeByRoute(g.V10_API_DEPLOY_URL,{apiId:i,integrationId:r().get(e,"id").toString()})}isDeployEnabled(e){return!!(e&&f.default[e.rule]&&r().isFunction(f.default[e.rule].isDeployEnabled))&&f.default[e.rule].isDeployEnabled(e)}render(){let e=r().get(this.props,"controller.integrationData"),t=!(0,o.resolveStoreInstance)(l.default).isSocketConnected,i=r().get(this.props,"controller.details");if(r().get(this.props,"controller.loadingIntegrationData")||r().get(this.props,"controller.loadingAPI"))return a.createElement("div",{className:"deploy-tab-container"},a.createElement(d.default,null));if(!t&&r().get(this.props,"controller.errorInIntegrationData")){const e=r().get(this.props,"controller.errorInIntegrationData");return pm.logger.error("Error occurred while fetching integration information",e),a.createElement("div",{className:"observability-error"},a.createElement(u.default,{errorDetails:e}))}let n=b.default[e.rule];return this.isDeployEnabled(e)&&n||this.handleBackClick(),a.createElement("div",{className:"deploy-page-container"},a.createElement("div",{className:"integrations-page-container deploy-page-container__content"},a.createElement("div",{className:"integrations-add"},a.createElement("div",{className:"integrations-add-card"},a.createElement(n,{integrationData:e,context:r().get(this.props,"controller.context"),details:i})))))}})||n},"./integrations/api-observability/containers/DetailedDashboard.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var n,a=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/SyncStatusStore.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=i("./integrations/api-observability/services/index.js"),p=i("./integrations/api-observability/components/detailed-dashboard/index.js"),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");let m=(0,d.observer)(n=class extends a.Component{constructor(e){super(e),this.state={},this.isDeployEnabled=this.isDeployEnabled.bind(this),this.store=(0,o.resolveStoreInstance)(c.default)}isDeployEnabled(e){return!!(e&&u.default[e.rule]&&r().isFunction(u.default[e.rule].isDeployEnabled))&&u.default[e.rule].isDeployEnabled(e)}render(){let e=r().get(this.props,"controller.integrationData"),t=r().get(this.props,"controller.context"),i=r().get(this.props,"controller.details"),n=!(0,o.resolveStoreInstance)(l.default).isSocketConnected;if(r().get(this.props,"controller.loadingIntegrationData"))return a.createElement("div",{className:"deploy-tab-container"},a.createElement(g.default,null));if(!n&&r().get(this.props,"controller.errorInIntegrationData")){const e=r().get(this.props,"controller.errorInIntegrationData");return pm.logger.error("Error occurred while fetching integration information",e),a.createElement("div",{className:"observability-error"},a.createElement(h.default,{errorDetails:e}))}const s=p.default[r().get(e,"rule")];return s?a.createElement("div",{className:"observability-detailed-dashboard-container"},a.createElement(s,{integrationData:e,context:t,details:i})):a.createElement("div",null)}})||n},"./integrations/api-observability/containers/ImportSchema.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n,a=i("../../node_modules/react/index.js"),s=(i("./node_modules/lodash/lodash.js"),i("../../node_modules/mobx-react/dist/mobx-react.module.js")),r=i("./integrations/api-observability/components/import-schema/index.js");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}let l=(0,s.observer)(n=class extends a.Component{constructor(e){super(e)}render(){const{integrationId:e="",rule:t="",formSource:i,apiId:n,versionId:s}=this.props,l=r.default[t];return l?a.createElement("div",{className:"gateway-import-schema-tab-container"},a.createElement(l,o({},this.props,{formSource:i,integrationId:e,apiId:n,versionId:s}))):a.createElement("div",null,"Rule not found")}})||n},"./integrations/api-observability/containers/ObservabilityEdit.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("./js/stores/StoreManager.js"),o=i("./integrations/api-observability/stores/APIObservabilityStore.js"),l=i("./integrations/api-observability/components/edit/index.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("./js/components/base/LoadingIndicator.js"),p=i("./integrations/components/error-states/ErrorIntegrations.js"),h=i("./appsdk/workbench/TabService.js"),g=i("./js/services/NavigationService.js"),m=i("./integrations/navigation/constants.js"),f=i("./api-dev/constants/APISubViews.js"),b=i("./node_modules/lodash/lodash.js");let y=(0,s.observer)(n=class extends a.Component{constructor(e){super(e),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",variables:{},showHeading:!0},this.store=(0,r.resolveStoreInstance)(o.default),this.fetchIntegrationDetails=this.fetchIntegrationDetails.bind(this),this.handleTabSwitch=this.handleTabSwitch.bind(this),this.renderHeading=this.renderHeading.bind(this)}componentDidMount(){this.fetchIntegrationDetails()}fetchIntegrationDetails(){const e=this.store.getSelectedIntegration();this.setState({loading:!0},(()=>{d.default.getIntegrationData(e).then((t=>{if(200===t.status){const i=b.get(t.body,"data.executor");this.props.controller.setVersionId(i),this.setState({selectedIntegrationId:e,executor:b.get(t.body,"data.executor"),variables:b.get(t.body,"data.variables"),rule:b.get(t.body,"data.rule"),nickname:b.get(t.body,"data.name"),loading:!1})}else this.setState({error:!0,loading:!1,errorDetails:t.body})})).catch((e=>{this.setState({loading:!1,error:!0,errorDetails:e})}))}))}handleTabSwitch(){const{selectedIntegrationId:e}=this.state;h.default.closeByRoute(m.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:this.props.controller.apiId,integrationId:e}),g.default.transitionTo("build.apiVersion",{apiId:b.get(this.props,"controller.apiId",void 0),versionId:b.get(this.props,"controller.version",void 0)},{tab:f.DEPLOYMENT})}renderHeading(e){this.setState({showHeading:e})}render(){if(this.state.error){let e={...this.state.errorDetails};return pm.logger.error("Error occurred while loading page",this.state.errorDetails),e&&"instanceNotFoundError"==b.get(e,"error.name")&&(pm.toasts.error("The integration you are looking for does not exist!"),this.handleTabSwitch()),a.createElement("div",{className:"observability-error"},a.createElement(p.default,null))}return this.state.loading?a.createElement("div",{className:"integrations-page-container"},a.createElement(u.default,null)):a.createElement("div",{className:"integrations-page-container"},a.createElement("div",{className:"integrations-add"},a.createElement("div",{className:"integrations-add-card"},this.state.showHeading&&a.createElement(c.default,{type:"h1",text:"Edit Integration"}),a.createElement(l.default,{integrationId:this.state.selectedIntegrationId,nickname:this.state.nickname,apiId:this.state.variables.postman_api_id,apiVersionId:this.state.executor,variables:this.state.variables,rule:this.state.rule,additionalContext:this.props.controller.additionalContext,headingHandler:this.renderHeading}))))}})||n},"./integrations/api-observability/containers/ObservabilitySetup.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/mobx/lib/mobx.module.js"),o=i("./js/stores/StoreManager.js"),l=i("./integrations/api-observability/stores/APIObservabilityStore.js"),c=i("./integrations/api-observability/components/add/index.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),b=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),y=i("./js/components/base/LoadingIndicator.js"),v=i("./integrations/api-observability/oauth/GatewayOauthConnectingView.js"),_=i("./integrations/api-observability/oauth/GatewayOauthFailedView.js"),S=i("./integrations/utils/OauthUtilityMethods.js"),I=i("./appsdk/workbench/TabService.js"),w=i("./integrations/navigation/constants.js"),E=i("./integrations/api-observability/constants.ts"),x=i("./integrations/api-observability/components/import-schema/index.js"),A=i("./integrations/api-observability/containers/ImportSchema.js"),P=i("./node_modules/lodash/lodash.js");const T={api_gateway_aws:{title:"Connect to AWS API Gateway",description:"View deployment status and history directly from Postman."},api_management_azure:{title:"Connect to Azure API Management",description:"View deployment status of your API directly from Postman."}};let C=(0,s.observer)(n=class extends a.Component{constructor(e){super(e),this.setActiveTab=e=>this.setState({activeTab:e}),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",pollingParams:{},rule:null,activeTab:"authenticate",activeStepIndex:0,stepStatus:[E.AETHER_STEPPER_STATUS.PROGRESS,E.AETHER_STEPPER_STATUS.PENDING],integrationId:null},this.store=(0,o.resolveStoreInstance)(l.default),this.setActiveTab=this.setActiveTab.bind(this),this.populateRuleDetails=this.populateRuleDetails.bind(this),this.handleOauthFlow=this.handleOauthFlow.bind(this),this.handleOauthCancel=this.handleOauthCancel.bind(this),this.handleRetry=this.handleRetry.bind(this),this.setActiveStepIndex=this.setActiveStepIndex.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${E.API_OBSERVABILITY}-integration-added`,this.onIntegrationEventCaptured.bind(this)),this.populateRuleDetails(),this.ruleWatchDisposer=(0,r.reaction)((()=>this.store.selectedRule&&this.state.rule!==this.store.selectedRule),(e=>{this.setState({loading:!0,oauthState:null},(()=>{this.handleOauthCancel(),e&&this.populateRuleDetails()}))}))}onIntegrationEventCaptured(e){let{selectedAPI:t,selectedAPIVersion:i}=this.store;e.apiId===t&&e.apiVersionId===i&&this.setState({integrationId:e.integrationId},(()=>{this.setState({activeStepIndex:1,stepStatus:[E.AETHER_STEPPER_STATUS.COMPLETED,E.AETHER_STEPPER_STATUS.PROGRESS]})}))}componentWillUnmount(){this.state.oauthState===E.INITIATED&&this.handleOauthCancel(!1),this.ruleWatchDisposer()}populateRuleDetails(){const{selectedService:e,selectedRule:t}=this.store;this.setState({loading:!0,rule:t},(()=>{b.default.getAvailableIntegrations({service:e}).then((e=>{let i=P.get(e,["body","integrations",t],{});200!==e.status||P.isEmpty(i)?this.setState({description:"",authType:"",error:!0,errorDetails:{status:e.status}}):this.setState({description:i.description,authType:P.get(i,"auth_type","")},(()=>{this.handleOauthFlow()})),this.setState({loading:!1})})).catch((e=>{pm.logger.error("Error in fetching service specific rule details for create forms",e),this.setState({description:"",authType:"",loading:!1,error:!0,errorDetails:{status:e.status}})}))}))}async handleOauthFlow(){if("oauth2"===this.state.authType){this.setState({oauthState:E.INITIATED});try{let e={sessionId:await S.default.handleInitiateOAuth(this.store.selectedService)};this.setState({pollingParams:e});let t=await S.default.pollForToken(e);t&&this.setState({oauthDetails:t,oauthState:E.SUCCESS})}catch(e){this.setState({oauthState:E.FAILED})}}}handleOauthCancel(e){let t=this.state.pollingParams;t.cancelOauth=!0,this.setState({pollingParams:t}),e&&I.default.closeByRoute(w.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:P.get(this.props,"controller._routeParams.apiId")})}handleRetry(){this.handleOauthFlow()}setActiveStepIndex(e){this.setState({activeStepIndex:e})}render(){const{selectedService:e,selectedRule:t,selectedAPI:i,selectedAPIVersion:n,selectedServiceName:s}=this.store,{activeStepIndex:r,stepStatus:o}=this.state;return this.state.loading?a.createElement("div",{className:"integrations-page-container"},a.createElement(y.default,null)):this.state.oauthState===E.INITIATED?a.createElement("div",null,a.createElement(v.default,{serviceId:e,serviceName:s,cancelOauth:this.handleOauthCancel})):this.state.oauthState===E.FAILED?a.createElement(_.default,{selectedServiceName:s,retryHandler:this.handleRetry,selectedService:s}):a.createElement("div",{className:"integrations-page-container"},a.createElement("div",{className:"integrations-add"},a.createElement("div",{className:"integrations-add-card"},T[t]&&a.createElement("div",null,a.createElement(d.default,{type:"h1",text:T[t].title}),a.createElement(u.default,{type:"lead",className:"integrations-add-card__description"},T[t].description)),x.default[t]?a.createElement(p.default,{activeStepIndex:r,onChange:this.setActiveStepIndex},a.createElement(h.default,null,a.createElement(g.default,{status:o[0],label:"Configure Integration",isDisabled:"completed"===o[0]}),a.createElement(g.default,{status:o[1],label:"Import Definition",isDisabled:"pending"===o[1]})),a.createElement(m.default,null,a.createElement(f.default,null,a.createElement(c.default,{rule:t,service:e,apiId:i,apiVersionId:n,additionalContext:this.props.controller.additionalContext,accessToken:P.get(this.state,"oauthDetails.accessToken"),refreshToken:P.get(this.state,"oauthDetails.refreshToken")})),a.createElement(f.default,null,a.createElement(A.default,{integrationId:this.state.integrationId,apiId:i,versionId:n,formSource:E.IMPORT_FORM_SOURCES.INTEGRATION_SETUP,rule:t})))):a.createElement(c.default,{rule:t,service:e,apiId:i,apiVersionId:n,additionalContext:this.props.controller.additionalContext,accessToken:P.get(this.state,"oauthDetails.accessToken"),refreshToken:P.get(this.state,"oauthDetails.refreshToken")}))))}})||n},"./integrations/api-observability/controllers/DeployController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n,a,s,r,o,l,c,d=i("./appsdk/workbench/BaseWorkbenchController.js"),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=i("../../node_modules/mobx/lib/mobx.module.js"),h=i("./js/stores/StoreManager.js"),g=i("./js/stores/SyncStatusStore.js"),m=i("./integrations/utils/CommonHelperMethods.ts"),f=i("./node_modules/lodash/lodash.js");function b(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function y(e,t,i,n,a){var s={};return Object.keys(n).forEach((function(e){s[e]=n[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let v=(n=class extends d.default{constructor(...e){super(...e),b(this,"integrationData",a,this),b(this,"loadingIntegrationData",s,this),b(this,"errorInIntegrationData",r,this),b(this,"integrationDataErrorDetails",o,this),b(this,"versionName",l,this),b(this,"LoadingAPI",c,this)}updateIntegrationDataStatus(e,t,i){this.loadingIntegrationData=e,this.errorInIntegrationData=t,this.integrationDataErrorDetails=i}updateIntegrationData(e){this.integrationData=e}setVersionName(e){this.versionName=e}setLoadingAPI(e){this.LoadingAPI=e}didCreate({routeParams:e,queryParams:t,additionalContext:i}){this.apiId=f.get(e,"apiId",null),this.version=f.get(t,"version",null),this.integrationId=f.get(e,"integrationId"),this.rule=f.get(t,"rule"),this.context=i,this.details=t,this.setTitle("Loading..."),(0,h.resolveStoreInstance)(g.default).onSyncAvailable({timeout:8e3}).then((async()=>{this.updateIntegrationDataStatus(!0,!1,"");try{let e=await u.default.getIntegrationData(this.integrationId),t=f.get(e,"body.data");if(200!==e.status||f.isEmpty(t))this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,"");else{if(this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,""),!this.version){const e=f.get(t,"executor");this.version=e}let e="";try{const t=await(0,m.getAPIDetails)(this.apiId);e=f.get(t,"name")}catch(e){pm.logger.error("DeployController ~ Unable to get api version details",e)}finally{this.setLoadingAPI(!1),e?(this.setVersionName(e),this.setTitle(e)):(this.setVersionName(""),this.setTitle("Unable to load"))}}}catch(e){this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e)}})).catch((()=>{this.updateIntegrationDataStatus(!1,!1,"")}))}didQueryParamsChange(e){this.rule=f.get(e,"rule"),this.details=e}},a=y(n.prototype,"integrationData",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=y(n.prototype,"loadingIntegrationData",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r=y(n.prototype,"errorInIntegrationData",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=y(n.prototype,"integrationDataErrorDetails",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=y(n.prototype,"versionName",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=y(n.prototype,"LoadingAPI",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y(n.prototype,"updateIntegrationDataStatus",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationDataStatus"),n.prototype),y(n.prototype,"updateIntegrationData",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationData"),n.prototype),y(n.prototype,"setVersionName",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"setVersionName"),n.prototype),y(n.prototype,"setLoadingAPI",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingAPI"),n.prototype),n)},"./integrations/api-observability/controllers/DetailedDashboardController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n,a,s,r,o,l,c,d=i("./appsdk/workbench/BaseWorkbenchController.js"),u=i("./js/stores/StoreManager.js"),p=i("./js/stores/SyncStatusStore.js"),h=i("./integrations/api-observability/stores/APIObservabilityStore.js"),g=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=i("../../node_modules/mobx/lib/mobx.module.js"),f=i("./integrations/utils/CommonHelperMethods.ts"),b=i("./node_modules/lodash/lodash.js");function y(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function v(e,t,i,n,a){var s={};return Object.keys(n).forEach((function(e){s[e]=n[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let _=(n=class extends d.default{constructor(...e){super(...e),y(this,"integrationData",a,this),y(this,"loadingIntegrationData",s,this),y(this,"errorInIntegrationData",r,this),y(this,"integrationDataErrorDetails",o,this),y(this,"details",l,this),y(this,"version",c,this)}setVersionId(e){this.version=e}updateIntegrationDataStatus(e,t,i){this.loadingIntegrationData=e,this.errorInIntegrationData=t,this.integrationDataErrorDetails=i}updateIntegrationData(e){this.integrationData=e}updateDetails(e){this.details=e}didCreate({routeParams:e,queryParams:t,additionalContext:i}){const n=b.get(t,"version",null);if(this.setVersionId(n),this.store=(0,u.resolveStoreInstance)(h.default),this.apiId=b.get(e,"apiId",null),this.integrationId=b.get(e,"integrationId"),this.rule=b.get(t,"rule"),this.updateDetails(t),this.context=i,this.setTitle("Loading..."),b.get(this.context,"integration")){const e=b.get(this.context,"integration"),t=b.get(e,"executor");this.updateIntegrationData(e),this.updateIntegrationDataStatus(!1,!1,""),!this.version&&this.setVersionId(t),this.updateTabTitleUsingVersionName()}else(0,u.resolveStoreInstance)(p.default).onSyncAvailable({timeout:8e3}).then((async()=>{this.updateIntegrationDataStatus(!0,!1,"");try{let e=await g.default.getIntegrationData(this.integrationId),t=b.get(e,"body.data");if(200!==e.status||b.isEmpty(t))this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,"");else{const e=b.get(t,"executor");!this.version&&this.setVersionId(e),this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,"")}}catch(e){this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e)}})).then((()=>{this.updateTabTitleUsingVersionName()})).catch((()=>{this.updateIntegrationDataStatus(!1,!1,"")}))}async updateTabTitleUsingVersionName(){let e="";try{const t=await(0,f.getAPIDetails)(this.apiId);e=b.get(t,"name")}catch(e){pm.logger.error("DetailedDashboardController ~ Error while fetching API meta",e)}finally{this.LoadingAPI=!1,this.versionName=e,e?this.setTitle(e):this.setTitle("Unable to load")}}didQueryParamsChange(e){this.updateDetails(e)}},a=v(n.prototype,"integrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=v(n.prototype,"loadingIntegrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r=v(n.prototype,"errorInIntegrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=v(n.prototype,"integrationDataErrorDetails",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=v(n.prototype,"details",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=v(n.prototype,"version",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v(n.prototype,"setVersionId",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"setVersionId"),n.prototype),v(n.prototype,"updateIntegrationDataStatus",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationDataStatus"),n.prototype),v(n.prototype,"updateIntegrationData",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationData"),n.prototype),v(n.prototype,"updateDetails",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"updateDetails"),n.prototype),n)},"./integrations/api-observability/controllers/ObservabilityController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n,a,s=i("./appsdk/workbench/BaseWorkbenchController.js"),r=i("./js/stores/StoreManager.js"),o=i("./integrations/api-observability/stores/APIObservabilityStore.js"),l=i("../../node_modules/mobx/lib/mobx.module.js"),c=i("./integrations/utils/CommonHelperMethods.ts"),d=i("./node_modules/lodash/lodash.js");function u(e,t,i,n,a){var s={};return Object.keys(n).forEach((function(e){s[e]=n[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let p=(n=class extends s.default{constructor(...e){var t,i,n,s;super(...e),t=this,i="version",s=this,(n=a)&&Object.defineProperty(t,i,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}setVersionId(e){this.version=e,this.store.setSelectedAPIVersion(e)}didCreate({routeParams:e,queryParams:t,additionalContext:i}){this.store=(0,r.resolveStoreInstance)(o.default),t&&t.category&&this.store.setActiveCategory(t.category),t&&t.service&&this.store.setSelectedService(t.service),t&&t.rule&&this.store.setSelectedRule(t.rule),t&&t.name&&this.store.setSelectedServiceName(t.name);const n=d.get(e,"integrationId")||d.get(t,"integration_id"),a=d.get(t,"version",null);n&&this.store.setSelectedIntegration(n),this.apiId=d.get(e,"apiId",null),this.apiId&&this.store.setSelectedAPI(this.apiId),a?this.setVersionId(a):(0,c.getAPIDetails)(this.apiId).then((e=>{const t=d.get(e,"version.id");this.setVersionId(t)})),this.additionalContext=i}didQueryParamsChange(e){e&&e.version&&this.store.setSelectedAPIVersion(e.version),e&&e.category&&this.store.setActiveCategory(e.category),e&&e.integration_id&&this.store.setSelectedIntegration(e.integration_id),e&&e.service&&this.store.setSelectedService(e.service),e&&e.rule&&this.store.setSelectedRule(e.rule)}beforeDestroy(){this.store=null}},a=u(n.prototype,"version",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u(n.prototype,"setVersionId",[l.action],Object.getOwnPropertyDescriptor(n.prototype,"setVersionId"),n.prototype),n)},"./integrations/api-observability/gateway-actions.js":function(e,t,i){i.r(t),i.d(t,{FETCH_API_GATEWAY_META:function(){return a},FETCH_AWS_GATEWAY_APIS:function(){return n},FETCH_EXTERNAL_ID:function(){return r},FETCH_STAGES:function(){return s}});const n="fetch-aws-gateway-apis",a="fetch-api-gateway-meta",s="fetch-stages",r="fetch-external-id"},"./integrations/api-observability/oauth/GatewayOauthConnectingView.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");let o=(0,s.observer)(n=class extends a.Component{constructor(e){super(e),this.state={}}render(){const{serviceId:e,serviceName:t}=this.props;return a.createElement("div",{className:"connect-api-gateway-tab"},a.createElement("div",{className:"api-gateway-connecting"},a.createElement("div",{className:"api-gateway-connecting__illustration_wrapper"},a.createElement("div",{className:`api-gateway-connecting__illustration__${e}`})),a.createElement("span",{className:"api-gateway-connecting__text-primary"},"Connecting to ",t,"..."),a.createElement("span",{className:"api-gateway-connecting__text-secondary"},"This may take up to 60 seconds."),a.createElement(r.default,{className:"api-gateway-connecting__cancel-btn",type:"outline",text:"Cancel",onClick:()=>{this.props.cancelOauth(!0)}})))}})||n},"./integrations/api-observability/oauth/GatewayOauthFailedView.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n,a=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),o=i("./api-dev/components/common/ErrorHandler/ErrorHandler.js");let l=(0,s.observer)(n=class extends a.Component{render(){const{selectedServiceName:e}=this.props;return a.createElement("div",{className:"connect-api-gateway-tab"},a.createElement(o.default,{blankState:a.createElement(r.default,null),title:`${e} authorization failed`,description:"Please try again.",handler:this.props.retryHandler,buttonText:"Try Again",buttonType:"outline"}))}})||n},"./integrations/api-observability/services/ApiGatewayService.js":function(e,t,i){i.r(t);var n=i("./node_modules/lodash/lodash.js"),a=i.n(n),s=(i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),i("./integrations/api-observability/services/GatewayIntegrationsService.js")),r=i("./integrations/api-observability/constants.ts"),o=i("./integrations/api-observability/gateway-actions.js");t.default={fetchApiGateways:e=>s.default.performPreConfigAction(a().get(e,"rule"),e,o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e.body,"data.Items")||a().get(e.body,"data.items"));throw e})).catch((e=>Promise.reject(e))),fetchApiGatewaysUsingIntegrationId:e=>s.default.performAction(e,{},o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e.body.data,"Items")||a().get(e.body.data,"items"));throw e})).catch((e=>Promise.reject(e))),fetchDeployments:e=>s.default.listDeployments(e).then((e=>{if(e.status&&200===e.status){let t=a().get(e,"body.data.items")||a().get(e,"body.data.Items")||[];return t.sort(((e,t)=>{let i=e.CreatedDate||e.createdDate,n=t.CreatedDate||t.createdDate;return new Date(n)-new Date(i)})),Promise.resolve(t.splice(0,r.AWS_TOTAL_DEPLOYMENTS))}return Promise.reject({statusCode:e.status,...e.body})})).catch((e=>Promise.reject(e))),fetchAPIGatewayMeta:e=>s.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>e.status&&200===e.status?Promise.resolve(a().get(e.body,"data")):Promise.reject({statusCode:e.status,...e.body}))).catch((e=>Promise.reject(e))),fetchStages:e=>s.default.performAction(e,{},o.FETCH_STAGES).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e.body,"data.Items")||a().get(e.body,"data.item"));throw e})).catch((e=>Promise.reject(e))),fetchCloudWatchAggregateMetrics:(e,t)=>new Promise(((i,n)=>{s.default.performAction(e,{stage:t},r.FETCH_CLOUDWATCH_AGGREGATE_METRICS).then((e=>{i(a().get(e,"body.data"))})).catch((e=>{n(e)}))})),fetchCloudWatchTimeSeriesMetrics:(e,t)=>s.default.performAction(e,t,r.FETCH_CLOUDWATCH_TIMESERIES_METRICS),fetchExternalId:e=>new Promise(((t,i)=>{s.default.performPreConfigAction(a().get(e,"rule"),e,o.FETCH_EXTERNAL_ID).then((e=>{t(a().get(e,"body.data.externalId"))})).catch((e=>{i(e)}))})),deploySchema:(e,t)=>s.default.createDeployment(e,t),fetchPostmanExports:e=>s.default.listDeployments(e,!1,!0).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body.data);throw e})).catch((e=>Promise.reject(e))),isDeployEnabled:(e,t)=>a().get(e,"variables.aws_api_type")===r.API_GATEWAY_TYPES.HTTP,isOverviewEnabled:e=>!0,fetchDeployOptionString:e=>s.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>{if(e.status&&200===e.status)return Promise.resolve(`Deploy Schema on ${a().get(e,"body.data.Name")||a().get(e,"body.data.name")}`);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/api-observability/services/AzureService.js":function(e,t,i){i.r(t);var n=i("./node_modules/lodash/lodash.js"),a=i.n(n),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=i("./integrations/api-observability/services/GatewayIntegrationsService.js"),o=i("./integrations/api-observability/constants.ts"),l=i("./integrations/utils/CommonHelperMethods.ts");t.default={fetchServicesMeta:(e=[],t)=>Promise.all(a().map(e,(e=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:a}=e,s={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:a};return r.default.performAction(t,s,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META)}))).then((e=>{const t={};return a().each(e,(e=>{if(200!==e.status)throw e;{const i=a().get(e,"body.data");t[a().get(e,"body.data.id")]={id:a().get(i,"id"),name:a().get(i,"name"),location:a().get(i,"location"),gatewayUrl:a().get(i,"properties.gatewayUrl"),developerPortalUrl:a().get(i,"properties.developerPortalUrl"),publicIPAddresses:a().get(i,"properties.publicIPAddresses"),privateIPAddresses:a().get(i,"properties.privateIPAddresses")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchApiMeta:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:s,azure_api_id:l}=e,c={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:s,azure_api_id:l};return r.default.performAction(t,c,o.AZURE_GATEWAY_ACTIONS.GET_API_META).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),i={id:a().get(t,"id"),name:a().get(t,"properties.displayName"),version:a().get(t,"properties.apiVersion")};return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchServiceMeta:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:s}=e,l={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:s};return r.default.performAction(t,l,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),i={id:a().get(t,"id"),name:a().get(t,"name"),location:a().get(t,"location"),gatewayUrl:a().get(t,"properties.gatewayUrl"),developerPortalUrl:a().get(t,"properties.developerPortalUrl"),publicIPAddresses:a().get(t,"properties.publicIPAddresses"),privateIPAddresses:a().get(t,"properties.privateIPAddresses")};return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionMeta:(e,t)=>{const{azure_subscription_id:i}=e,n={azure_subscription_id:i};return r.default.performAction(t,n,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),i={id:a().get(t,"subscriptionId"),name:a().get(t,"displayName")};return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionsMeta:(e=[],t)=>Promise.all(a().map(e,(e=>{const{azure_subscription_id:i}=e,n={azure_subscription_id:i};return r.default.performAction(t,n,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META)}))).then((e=>{const t={};return a().each(e,(e=>{if(200!==e.status)throw e;{const i=a().get(e,"body.data");t[a().get(e,"body.data.subscriptionId")]={id:a().get(i,"subscriptionId"),name:a().get(i,"displayName")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchChangelog:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:s,azure_api_id:c}=e,d={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:s,azure_api_id:c};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.LIST_API_RELEASES).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),i=a().map(t.value,(e=>({createdAt:(0,l.formatUtcDate)(a().get(e,"properties.createdDateTime")),updatedAt:(0,l.formatUtcDate)(a().get(e,"properties.updatedDateTime")),description:a().get(e,"properties.notes")})));return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchExports:(e,t)=>s.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${t}/list`,query:{exportOnly:!0,internal:!0,azure_api_path:a().get(e,"azure_api_path")}}}).then((e=>{if(200==e.status&&a().get(e,"body.data")){const t=a().map(e.body.data,(e=>({createdAt:(0,l.formatUtcDate)(e.createdAt),azure_api_path:a().get(e,"data.azure_api_path"),azure_revision_id:a().get(e,"data.azure_revision_id"),schemaSource:a().get(e,"data.schemaSource")})));return Promise.resolve(t)}throw e})).catch((e=>Promise.reject(e))),fetchRevisions:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:s,azure_api_id:c}=e,d={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:s,azure_api_id:c};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.LIST_API_REVISIONS).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),i=(a().map(t.value,(e=>({azure_revision_id:a().get(e,"apiRevision"),createdAt:(0,l.formatUtcDate)(a().get(e,"createdDateTime")),description:a().get(e,"description"),privateUrl:a().get(e,"privateUrl"),isOnline:{value:a().get(e,"isOnline"),azure_revision_id:a().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be made offline."},isCurrent:{value:a().get(e,"isCurrent"),azure_revision_id:a().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be disabled."}})))||[]).reduce(((e,t)=>t.isCurrent.value?[t,...e]:[...e,t]),[]);return Promise.resolve(i||[])}throw e})).catch((e=>Promise.reject(e)))},toggleOnlineRevision:(e,t,i=!1,n)=>{const{azure_resource_group_id:a,azure_subscription_id:s,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,u={azure_subscription_id:s,azure_resource_group_id:a,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_revision_action_type:"toggle-revision-status",azure_revision_online:i};return r.default.performAction(n,u,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},toggleCurrentRevision:(e,t,i,n)=>{const{azure_resource_group_id:a,azure_subscription_id:s,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,u={azure_subscription_id:s,azure_resource_group_id:a,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_release_notes:i,azure_revision_action_type:"make-revision-current"};return r.default.performAction(n,u,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},fetchRevisionMapping:(e,t,i)=>{const n=a().map(t,(e=>e.azure_revision_id)),{azure_api_path:s}=e,l={azure_api_path:s,azure_revisions:n,integrationId:i};return r.default.performAction(i,l,o.AZURE_GATEWAY_ACTIONS.GET_REVISION_SOURCE_MAPPING).then((e=>{if(200===e.status)return Promise.resolve(a().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e)))},isDeployEnabled:(e,t)=>t!==o.RELEASE_CONTEXTBAR,deploySchema:(e,t)=>r.default.createDeployment(e,t),fetchSubscriptions:(e,t,i)=>new Promise(((n,s)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));n(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Subscriptions"),pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),s(e)}))})),fetchSubscriptionsWithIntegrationId:(e,t,i)=>new Promise(((n,s)=>{r.default.performAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));n(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),s(e)}))})),fetchResourceGroups:(e,t,i)=>new Promise(((n,s)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().map(t,(e=>({label:e.name,value:e.name})));n(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Resource Groups"),pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),s(e)}))})),fetchResourceGroupsWithIntegrationId:(e,t,i)=>new Promise(((n,s)=>{r.default.performAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().map(t,(e=>({label:e.name,value:e.name})));n(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),s(e)}))})),fetchServices:(e,t,i)=>new Promise(((n,s)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().map(t,(e=>({label:e.name,value:e.name,path:e.id})));n(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Services"),pm.logger.error("Something went wrong while fetching Azure Services",e),s(e)}))})),fetchServicesWithIntegrationId:(e,t,i)=>new Promise(((n,s)=>{r.default.performAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().map(t,(e=>({label:e.name,value:e.name,path:e.id})));n(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Services",e),s(e)}))})),fetchApis:(e,t,i)=>new Promise(((n,s)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().filter(t,(e=>!a().get(e,"properties.type")||"http"===a().get(e,"properties.type"))),s=a().map(i,(e=>({label:e.name,value:e.name,path:e.id})));n(s)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure APIs"),pm.logger.error("Something went wrong while fetching Azure APIs",e),s(e)}))})),fetchApisWithIntegrationId:(e,t,i)=>new Promise(((n,s)=>{r.default.performAction(e,t,i).then((e=>{let t=a().get(e,"body.data.value",[]),i=a().filter(t,(e=>!a().get(e,"properties.type")||"http"===a().get(e,"properties.type"))),s=a().map(i,(e=>({label:e.name,value:e.name,path:e.id})));n(s)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure APIs",e),s(e)}))})),fetchSchema:(e,t,i)=>{const{azure_resource_group_id:n,azure_subscription_id:s,azure_service_id:l,azure_api_id:c}=t,d={azure_subscription_id:s,azure_resource_group_id:n,azure_service_id:l,azure_api_id:c,azure_export_format:i};return r.default.performAction(e,d,o.AZURE_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200===e.status){const t=a().get(e,"body.data.versions.0.schemas.0"),i={content:a().get(t,"schema",""),language:a().get(t,"language"),type:a().get(t,"type")};return Promise.resolve(i)}throw new Error("Something went wrong while fetching schema")})).catch((e=>Promise.reject(e)))}}},"./integrations/api-observability/services/GatewayIntegrationsService.js":function(e,t,i){i.r(t);var n=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");t.default={createDeployment:(e,t)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/deploy`,body:t}}),listDeployments:(e,t=!1,i=!1)=>{const a={};return t&&(a.exportOnly=!0,a.internal=!0),i&&(a.internal=!0),n.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${e}/list`,query:{...a}}})},performAction:(e,t,i)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/actions/${i}`,body:t}}),performPreConfigAction:(e,t,i)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/actions/${i}`,body:{...t,classId:e}}})}},"./integrations/api-observability/services/Helper.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/services/index.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s=i("./integrations/api-observability/constants.ts"),r=i("./js/modules/services/AnalyticsService.js"),o=i("./node_modules/async/dist/async.js"),l=i.n(o),c=i("./js/stores/StoreManager.js"),d=i("./js/stores/SyncStatusStore.js"),u=i("./js/stores/CurrentUserStore.js"),p=i("./onboarding/src/common/LaunchDarkly.js"),h=i("./api-dev/constants/Permissions.js"),g=i("./api-dev/services/APIPermissionService.js"),m=i("./api-dev/interfaces/APIInterface.js"),f=i("./api-dev/services/APIDevService.js"),b=i("./node_modules/lodash/lodash.js");t.default={shouldRenderDeploy:(e,t)=>!!(e&&e.rule&&n.default[e.rule]&&b.isFunction(n.default[e.rule].isDeployEnabled))&&n.default[e.rule].isDeployEnabled(e,t),getDeployOptionContext:(e,t)=>{if(!e)return t("API version missing");l().waterfall([function(t){return a.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,[s.API_OBSERVABILITY]).then((e=>e[s.API_OBSERVABILITY].length>0?t(null,e[s.API_OBSERVABILITY][0]):t(null,null))).catch((e=>t(e)))},function(e,t){return e&&e.rule?n.default[e.rule]&&b.isFunction(n.default[e.rule].fetchDeployOptionString)?n.default[e.rule].fetchDeployOptionString(e.id).then((i=>t(null,{integration:e,deployString:i}))).catch((i=>t(null,{integration:e,deployString:"Deploy Schema"}))):t(null,{integration:e,deployString:"Deploy Schema"}):t(null,{integration:null,deployString:"Deploy Schema"})}],((e,i)=>(e&&(pm.logger.error("Error occurred while fetching configured integration",e),pm.toasts.error("Error occurred while fetching configured integration")),t(e,i))))},shouldRenderGatewayIntegration:e=>{const t=(0,c.resolveStoreInstance)(u.default).isLoggedIn||!1,i=b.get(e,"apiPermissionStore.canViewAPIIntegrations",!1),n=p.launchDarkly.getFlag("api-deployments-tab-enabled",!1);return!!(t&&i&&n)},truncate:e=>e.length>35?e.substring(0,35)+"...":e,addDeployClickAnalytics:(e,t)=>{e&&e.rule&&r.default.addEventV2({category:"gateway-integration",action:t,label:e.rule,value:1})},hasEditPermissionOnAPI:e=>e?(0,c.resolveStoreInstance)(d.default).onSyncAvailable({timeout:8e3}).then((()=>{const t=(0,c.resolveStoreInstance)(u.default).id,i=[h.UPDATE_API_META],n=g.default.getAPIPermissionQueryObject(i,[{id:e}],t);return g.default.fetchPermissions(n).then((t=>Promise.resolve(b.get(t,`${e}:UPDATE_API_META.allowed`)))).catch((e=>{throw e}))})).catch((e=>Promise.reject(e))):Promise.reject("API id is required to fetch permissions"),fetchAPIDetails:async e=>{if(!e)return{};try{let t=await(0,m.getAPI)(e),i=await(0,m.isAPIGitLinked)(e),n={apiDetails:t,isGitIntegrationLinked:i,apiDefinition:{}};if(i){const t=await(0,m.getAPILinkedEntityModel)(e,{name:"branch"},"apiDefinition","");return n=b.merge({},n,{apiDefinition:t}),n}return n}catch(e){return Promise.reject(e)}},isSchemaPresent:(e,t)=>f.default.getRelations(e,t).then((e=>{const t=b.get(e,"apiDefinition")&&b.get(b.keys(e.apiDefinition),0),i=b.get(e,"schema")&&b.get(b.keys(e.schema),0);return!b.isEmpty(t)||!b.isEmpty(i)})).catch((e=>Promise.reject(e))),addAzureServicesAnalytics:e=>{const t=b.get(e,"rule",""),i=b.get(e,"variables.linked_apis",[]),n=b.size(i)||0;r.default.addEventV2({category:s.GATEWAY_INTEGRATION_ANALYTICS_EVENT_CATEGORY,action:s.AZURE_APIM.SERVICE_ANALYTICS_ACTION,label:t,value:n})}}},"./integrations/api-observability/services/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/services/ApiGatewayService.js"),a=i("./integrations/api-observability/services/AzureService.js");t.default={api_gateway_aws:n.default,api_management_azure:a.default}},"./integrations/api-observability/stores/APIObservabilityStore.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return F}});var n,a,s,r,o,l,c,d,u,p,h,g,m,f,b,y,v,_,S,I,w,E,x,A=i("../../node_modules/mobx/lib/mobx.module.js"),P=i("./node_modules/lodash/lodash.js"),T=i.n(P),C=i("./js/stores/StoreManager.js"),D=i("./js/stores/SyncStatusStore.js"),j=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),O=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),R=i("./integrations/api-observability/stores/fallbackCategoryIntegrations.js"),k=i("./integrations/api-observability/configs/Integrations.js"),M=i("./js/stores/IntegrationsStore.js"),L=i("./integrations/api-observability/constants.ts");function N(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function z(e,t,i,n,a){var s={};return Object.keys(n).forEach((function(e){s[e]=n[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let F=(a=z((n=class{constructor(){N(this,"isHydrating",a,this),N(this,"availableIntegrations",s,this),N(this,"configuredIntegrations",r,this),N(this,"categoryIntegrations",o,this),N(this,"builds",l,this),N(this,"activeRule",c,this),N(this,"activeService",d,this),N(this,"errorAvailableIntegrations",u,this),N(this,"errorConfiguredIntegrations",p,this),N(this,"loadingAvailableIntegrations",h,this),N(this,"loadingConfiguredIntegrations",g,this),N(this,"selectedAPI",m,this),N(this,"selectedAPIVersion",f,this),N(this,"selectedService",b,this),N(this,"selectedServiceName",y,this),N(this,"selectedIntegration",v,this),N(this,"selectedRule",_,this),N(this,"category",S,this),N(this,"isAdding",I,this),N(this,"integrationInstance",w,this),N(this,"integrationClass",E,this),N(this,"loadingIntegrationInstanceAndClass",x,this),this.integrationsStore=(0,C.resolveStoreInstance)(M.default)}initializeApiObservabilityStore(e){(0,C.resolveStoreInstance)(D.default).onSyncAvailable({timeout:L.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:i,category:n}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(i),this.setActiveCategory(n),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(i,L.categoryToEntityType[n],[L.categoryToClientCategory[n]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiObservabilityStoreV2(e){(0,C.resolveStoreInstance)(D.default).onSyncAvailable({timeout:L.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:i,category:n}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(i),this.setActiveCategory(n),this.fetchConfiguredIntegrations(i,L.categoryToEntityType[n],[L.categoryToClientCategory[n]])})).catch((e=>{pm.logger.error("APIObservabilityStore~InitializeApiObservabilityStoreV2~Error while initialising API Observability Store: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setActiveCategory(e){this.category=e}setSelectedIntegration(e){this.selectedIntegration[this.category]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,L.categoryToEntityType[this.category],[L.categoryToClientCategory[this.category]])}getAvailableIntegrations(){return(0,A.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.category]}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){T().isEmpty(e)?this.categoryIntegrations=[...R.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,A.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,A.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=L.categoryToClientCategory[this.category];T().forEach((0,A.toJS)(this.availableIntegrations),(i=>{const n={},a=i.integrations[i.id];T().forEach(a,((e,i)=>{e.client_categories.includes(t)&&(n[i]=e)})),T().isEmpty(n)||(i.integrations[i.id]={...n},e.push(i))})),this.updateCategoryIntegrations(T().map(e,(e=>e.id&&!T().isEmpty(k.default[e.id])?{...e,...k.default[e.id]}:e)))}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),j.default.getAvailableIntegrations().then((e=>{const t=T().get(e,"body.services",[]);if(200!==e.status||T().isEmpty(t))throw e;this.updateAvailableIntegrations(T().map(t,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t,i){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),j.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,i).then((e=>{this.updateConfiguredIntegrations(e[i[0]]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const i=await O.default.getConfiguredIntegrationsForAnEntity(e,t,[L.API_OBSERVABILITY]);let n=T().get(i,"body.data",[]),a=T().map(n,"class"),s=[];if(!T().isEmpty(a)){const e=this.integrationsStore.getIntegrationClasses(),t=a[0];s=T().find(e,(e=>e.id===t))}this.updateIntegrationClass([s],t),this.updateIntegrationInstance(n,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIObservabilityStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=z(n.prototype,"availableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=z(n.prototype,"configuredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=z(n.prototype,"categoryIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.fallbackCategoryIntegrations}}),l=z(n.prototype,"builds",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=z(n.prototype,"activeRule",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=z(n.prototype,"activeService",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=z(n.prototype,"errorAvailableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=z(n.prototype,"errorConfiguredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=z(n.prototype,"loadingAvailableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=z(n.prototype,"loadingConfiguredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=z(n.prototype,"selectedAPI",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=z(n.prototype,"selectedAPIVersion",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=z(n.prototype,"selectedService",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=z(n.prototype,"selectedServiceName",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=z(n.prototype,"selectedIntegration",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=z(n.prototype,"selectedRule",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=z(n.prototype,"category",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=z(n.prototype,"isAdding",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=z(n.prototype,"integrationInstance",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=z(n.prototype,"integrationClass",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=z(n.prototype,"loadingIntegrationInstanceAndClass",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z(n.prototype,"initializeApiObservabilityStore",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"initializeApiObservabilityStore"),n.prototype),z(n.prototype,"clearStore",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"clearStore"),n.prototype),z(n.prototype,"setActiveCategory",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveCategory"),n.prototype),z(n.prototype,"setSelectedIntegration",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedIntegration"),n.prototype),z(n.prototype,"setActiveService",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveService"),n.prototype),z(n.prototype,"setSelectedServiceName",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedServiceName"),n.prototype),z(n.prototype,"setActiveRule",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveRule"),n.prototype),z(n.prototype,"setSelectedAPI",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedAPI"),n.prototype),z(n.prototype,"setSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedAPIVersion"),n.prototype),z(n.prototype,"setSelectedRule",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedRule"),n.prototype),z(n.prototype,"setSelectedService",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedService"),n.prototype),z(n.prototype,"updateLoadingAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateLoadingAvailableIntegrations"),n.prototype),z(n.prototype,"updateLoadingConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateLoadingConfiguredIntegrations"),n.prototype),z(n.prototype,"updateErrorAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateErrorAvailableIntegrations"),n.prototype),z(n.prototype,"updateErrorConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateErrorConfiguredIntegrations"),n.prototype),z(n.prototype,"updateAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateAvailableIntegrations"),n.prototype),z(n.prototype,"updateSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateSelectedAPIVersion"),n.prototype),z(n.prototype,"getAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getAvailableIntegrations"),n.prototype),z(n.prototype,"getSelectedIntegration",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getSelectedIntegration"),n.prototype),z(n.prototype,"getSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getSelectedAPIVersion"),n.prototype),z(n.prototype,"updateConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateConfiguredIntegrations"),n.prototype),z(n.prototype,"updateCategoryIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateCategoryIntegrations"),n.prototype),z(n.prototype,"getConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getConfiguredIntegrations"),n.prototype),z(n.prototype,"getCategoryIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getCategoryIntegrations"),n.prototype),z(n.prototype,"updateIsHydrating",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIsHydrating"),n.prototype),z(n.prototype,"updateIsAdding",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIsAdding"),n.prototype),z(n.prototype,"findIntegrationsByCategory",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"findIntegrationsByCategory"),n.prototype),z(n.prototype,"fetchAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchAvailableIntegrations"),n.prototype),z(n.prototype,"fetchConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchConfiguredIntegrations"),n.prototype),z(n.prototype,"fetchIntegrationInstance",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchIntegrationInstance"),n.prototype),z(n.prototype,"setLoadingIntegrationInstancesAndClass",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingIntegrationInstancesAndClass"),n.prototype),z(n.prototype,"updateIntegrationInstance",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationInstance"),n.prototype),z(n.prototype,"updateIntegrationClass",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationClass"),n.prototype),z(n.prototype,"resetPowerUpVariables",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"resetPowerUpVariables"),n.prototype),z(n.prototype,"removeIntegrationInstances",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"removeIntegrationInstances"),n.prototype),n)},"./integrations/api-observability/stores/fallbackCategoryIntegrations.js":function(e,t,i){i.r(t),i.d(t,{fallbackCategoryIntegrations:function(){return n}});const n=[{id:"api_gateway_aws",categories:["Deployment"],name:"AWS API Gateway",icon:"pm-icon-aws-api-gateway",icon_url:"https://static.getpostman.com/assets/aws_api_gateway.png",dark_icon_url:null,description:"Stay on top of your API Deployments",extended_description:"Observe deployments inside Postman",integrations:{api_gateway_aws:{api_gateway_aws:{name:"Observe API deployments",description:"Connect to AWS API Gateway to view deployments from across all stages, logs and metrics inside Postman",categories:["Deployment"],summary:"",client_categories:["api-gateway-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./integrations/api-observability/utils/chartHelpers.js":function(e,t,i){i.r(t),t.default={getChartOptions(e){const{unit:t,title:i,currentTheme:n}=e;return{scales:{x:{type:"time",color:n["content-color-secondary"],time:{unit:t},title:{display:!(!i||!i.x),text:i&&i.x?i.x:"",color:n["content-color-secondary"],font:"Inter",padding:{top:4,bottom:4}},ticks:{display:!0,color:n["content-color-secondary"],padding:8,align:"end"},grid:{drawOnChartArea:!1,drawTicks:!1,borderColor:n["grey-05"],color:n["grey-05"],z:-1},offset:!0},y:{title:{display:!(!i||!i.y),text:i&&i.y?i.y:"",color:n["content-color-secondary"],font:"Inter",padding:{top:4,bottom:4}},grid:{drawOnChartArea:!1,drawTicks:!1,borderColor:n["grey-05"],color:n["grey-05"]},ticks:{display:!0,padding:8,precision:0,crossAlign:"near",color:n["content-color-secondary"],autoSkipPadding:20},beginAtZero:!0}},plugins:{legend:{display:!1},responsive:!0,datalabels:{display:!1,anchor:"center",clamp:!0,font:{weight:600,size:11,lineHeight:1.8}}}}}}},"./integrations/components/error-states/ErrorIntegrations.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n,a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=i("../../node_modules/react/index.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js");let c=(0,a.observer)(n=class extends s.Component{constructor(e){super(e),this.state={error:{}}}componentDidMount(){let{error:e}=this.props;e?this.setState({statusCode:e.statusCode,title:e.title,message:e.message}):this.setState({title:"Something went wrong",message:"Something went wrong while performing this action. Please refresh the page and try again."})}render(){let{statusCode:e,title:t,message:i}=this.state;return s.createElement("div",null,s.createElement("div",{className:"team-integrations-error-state"},s.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},(!e||e>499&&e<600)&&s.createElement(r.default,null),404===e&&s.createElement(o.default,null),e>399&&e<500&&404!==e&&s.createElement(l.default,null)),s.createElement("div",{className:"team-integrations-error-state__title"},t),s.createElement("div",{className:"team-integrations-error-state__subtitle"},i)))}})||n},"./integrations/components/error-states/IntegrationNotSupported.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),r=i("../../node_modules/react/index.js"),o=i("./integrations/utils/CommonHelperMethods.ts"),l=i("./js/services/NavigationService.js"),c=i("./js/external-navigation/ExternalNavigationService.js"),d=i("./integrations/constants/integrationsConstants.ts");function u(e){let{apiId:t,apiVersionId:i,tab:a}=e,s={apiId:t,versionId:i},u={tab:a},p=(0,o.getURLFromBasePathAndRoute)(pm.artemisUrl,l.default.getURLForRoute("build.apiVersion",s,u));return r.createElement("div",{className:"unsupported-integrations-error-cta__subtitle"},"browser"===window.SDK_PLATFORM?r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_WEB_APP):r.createElement("div",null,r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_DESKTOP),r.createElement("span",{onClick:()=>(0,c.openExternalLink)(p||"#","_blank"),className:"unsupported-integrations-error-cta__subtitle__link"},r.createElement(n.default,{type:"link-primary",isExternal:!0},"web app"))))}function p(e){let t={title:"browser"===window.SDK_PLATFORM?d.INTEGRATION_NOT_SUPPORTED_TITLE_WEB_APP:d.INTEGRATION_NOT_SUPPORTED_TITLE_DESKTOP,subtitle:u(e)};return r.createElement("div",{className:"unsupported-integrations-error-cta"},r.createElement(a.default,{direction:"column",justifyContent:"center",alignItem:"center",alignSelf:"center"},r.createElement(s.default,{errorDetails:t})))}},"./integrations/monitoring/services/NewRelicService.js":function(e,t,i){i.r(t);var n=i("./node_modules/lodash/lodash.js"),a=i.n(n),s=i("./node_modules/moment/moment.js"),r=i.n(s),o=i("./node_modules/async/dist/async.js"),l=i.n(o),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=i("./integrations/monitoring/constants.js");t.default={listServices:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listDashboards:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchChartUrls:(e,t,i,n)=>{let s={};l().parallel([function(n){c.default.fetchActionDetails(e,{type:"fetchWebTransactionsChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return s.webTransactionsChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),n();throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchApdexScoreChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return s.apdexScoreChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),n();throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchErrorRateChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return s.errorRateChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),n();throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchThroughputChartUrl",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status)return s.throughputChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),n();throw e})).catch((e=>n(e)))}],(e=>e?n(e):n(null,s)))},fetchStatistics:(e,t,i,n)=>{let s={};l().parallel([function(i){c.default.fetchActionDetails(e,{type:"fetchDeployments",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=a().map(a().get(e.body,"data.data.actor.entity.deployments"),(e=>({...e,timestamp:r()(a().get(e,"timestamp")).format("MMM DD h:mm A")})));return s.deployments=t,i()}throw e})).catch((e=>i(e)))},function(i){c.default.fetchActionDetails(e,{type:"fetchViolationEvents",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=a().map(a().get(e.body,"data.data.actor.entities[0].recentAlertViolations"),(e=>({...e,openedAt:r()(a().get(e,"openedAt")).format("MMM DD h:mm A"),closedAt:a().get(e,"closedAt")?r()(a().get(e,"closedAt")).format("MMM DD h:mm A"):"-"})));return s.violationEvents=t,i()}throw e})).catch((e=>i(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchSlowestWebTransactions",service_guid:t,time:i}).then((e=>{if(e.status&&200===e.status){let t=a().map(a().get(e.body,"data.data.actor.entity.nrdbQuery.results"),(e=>({name:a().replace(e.name,"WebTransaction/Custom/",""),avg_time:`${a().round(e.avg_time,2)} ms`,error_rate:`${a().round(e.error_rate,1)}%`})));return s.slowestTransactions=t,n()}throw e})).catch((e=>n(e)))}],(e=>e?n(e):n(null,s)))},fetchMetricsForLinkedServices:e=>c.default.fetchActionDetails(e,{type:"fetchMetricsForLinkedServices"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchLinkedDashboards:e=>c.default.fetchActionDetails(e,{type:"fetchLinkedDashboards"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listSevicesWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_SERVICES,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),listDashboardsWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_DASHBOARDS,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),authenticateApiKey:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/utils/OauthUtilityMethods.js":function(e,t,i){i.r(t);var n=i("./integrations/services/OAuthService.js"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=i("./js/stores/StoreManager.js"),o=i("./js/stores/SyncStatusStore.js"),l=i("./js/services/NavigationService.js");t.default={handleInitiateOAuth:(e,t)=>{let i={};return t&&(i.tokenType=t),new Promise(((t,a)=>{n.default.initiateAuthorization(e,i).then((i=>{let n,r=i.body;if(200===i.status&&!s().isEmpty(r))return n=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${r.sessionId}`,l.default.openURL(n,{target:"_blank"}),t(s().get(r,"sessionId"));pm.logger.warn("OauthUtilityMethods~handleInitiateOAuth: Something went wrong while opening authorization",i.body),pm.toasts.error("Something went wrong while initiating authorization"),a(new Error("Something went wrong"))})).catch((e=>{let t=!(0,r.resolveStoreInstance)(o.default).isSocketConnected?"You need to be online to complete the authorization ":"Something went wrong while initiating authorization";pm.logger.warn("OauthUtilityMethods~handleInitiateOAuth: Something went wrong while opening authorization",e),pm.toasts.error(t),a(e)}))}))},pollForToken(e){let t=0;if(!e.sessionId){let e="Something went wrong while fetching authorization information";throw pm.logger.warn("OauthUtilityMethods~pollForToken: sessionId is required."),pm.toasts.error(e),new Error(e)}const i=(a,l)=>{t++,n.default.getSession(e.sessionId).then((n=>{let r=n.body;return 30===t?(pm.toasts.error("Service timed out while performing authorization"),l(new Error("Exceeded max attempts"))):e.cancelOauth?a():r.token&&!s().isEmpty(r.token)?r.error?(pm.logger.warn("OauthUtilityMethods~pollForToken: Error while getting a session for the user",r.error),pm.toasts.error("Something went wrong while fetching authorization information"),l(new Error("Error while getting a session for the user"))):r.token?a(r.token):(pm.toasts.error("Authorization failed. Please try again."),l(new Error("Authorization could not be completed."))):void setTimeout(i,2e3,a,l)})).catch((e=>{if(e.error){let t=!(0,r.resolveStoreInstance)(o.default).isSocketConnected?"You need to be online to complete the authorization ":"Something went wrong while fetching authorization information";pm.logger.warn("OauthUtilityMethods~pollForToken: Error while getting a session for the user",e.error),pm.toasts.error(t)}return l(e)}))};return new Promise(i)}}},"./js/components/base/PasswordInput.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/classnames/index.js"),s=i.n(a),r=i("./js/components/base/Inputs.js"),o=i("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=i("./js/components/base/Buttons.js"),c=i("./node_modules/prop-types/index.js"),d=i.n(c),u=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},p.apply(this,arguments)}class h extends n.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:i}=e;if(t){let n,a;for(let s=0;s<t.length;s++){const{validator:r,message:o,type:l}=t[s]||{};if("function"==typeof r&&!r(i,e)){n=l,a=o;break}}if(n)return this.state[n]!==a&&this.setState({[n]:a})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?n.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},n.createElement(u.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?n.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},n.createElement(u.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?n.createElement(r.Input,p({},e,{type:"password"})):n.createElement(o.AutoSuggestInput,p({},e,{enableVariableSuggestions:!0,type:"text"})):n.createElement(r.Input,p({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return n.createElement("div",{className:s()("password-input",e)},this.getPasswordInput(t),n.createElement("div",{className:"password-input-message"},this.getValidationIcon()),n.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?n.createElement(u.default,{name:"icon-action-hide-stroke",title:"Show"}):n.createElement(u.default,{name:"icon-action-view-stroke",title:"Hide"})))}}h.propTypes={className:d().string,inputStyle:d().oneOf(["box","line"]),size:d().oneOf(["huge"]),enableVariableSuggestions:d().bool,validation:d().arrayOf(d().shape({validator:d().func.isRequired,message:d().string,type:d().oneOf(["error","warning"])}))},h.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,i){i.r(t),i.d(t,{LoadingLabel:function(){return c},default:function(){return d}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/classnames/index.js"),s=i.n(a),r=i("./node_modules/react-select-v1/dist/react-select.es.js"),o=i("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function c(e){return n.createElement(n.Fragment,null,e.loadingLabel||"Loading...",n.createElement("span",{className:"pm-select-loader"},n.createElement(o.default,null)))}class d extends n.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:i,className:a,label:o,isClearable:d,isCreatable:u,autoBlur:p=!0}=this.props;return u?n.createElement(r.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:s()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${i}`,a),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?n.createElement(c,this.props):o,scrollMenuIntoView:!1})):n.createElement(r.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:s()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${i}`,a),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?n.createElement(c,this.props):o,scrollMenuIntoView:!1}))}}d.defaultProps={size:"sm"},d.displayName="SelectDropdown"},"./js/stores/IntegrationsStore.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return ye}});var n,a,s,r,o,l,c,d,u,p,h,g,m,f,b,y,v,_,S,I,w,E,x,A,P,T,C,D,j,O,R,k,M,L,N,z,F,V,B,W,H,G,U,Y,$,q,K,X,J,Q,Z,ee,te,ie,ne,ae,se=i("../../node_modules/mobx/lib/mobx.module.js"),re=i("./integrations/constants/integrationsConstants.ts"),oe=i("./js/stores/StoreManager.js"),le=i("./js/stores/SyncStatusStore.js"),ce=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),de=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),ue=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),pe=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),he=(i("./integrations/monitoring/services/NewRelicService.js"),i("./integrations/monitoring/constants.js"),i("./node_modules/lodash/lodash.js"));function ge(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function me(e,t,i,n,a){var s={};return Object.keys(n).forEach((function(e){s[e]=n[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}const fe=3e5,be=8e3;let ye=(a=me((n=class{constructor(){ge(this,"activeIntegrationsView",a,this),ge(this,"serviceId",s,this),ge(this,"activeServiceDetailsId",r,this),ge(this,"ruleId",o,this),ge(this,"teamIntegrations",l,this),ge(this,"availableIntegrations",c,this),ge(this,"loadingAvailableIntegrations",d,this),ge(this,"loadingIntegrationClasses",u,this),ge(this,"loadingIntegrationServices",p,this),ge(this,"errorFetchingAvailableIntegrations",h,this),ge(this,"availableIntegrationsErrorDetails",g,this),ge(this,"filteredAvailableIntegrations",m,this),ge(this,"filterByCategoryAvailableIntegrations",f,this),ge(this,"integrationCategories",b,this),ge(this,"noTeamIntegrations",y,this),ge(this,"loadingTeamIntegrations",v,this),ge(this,"errorInFetchingTeamIntegrations",_,this),ge(this,"errorDetails",S,this),ge(this,"ruleSpecificTeamIntegrations",I,this),ge(this,"ruleSpecificTeamIntegrationErrors",w,this),ge(this,"serviceDetails",E,this),ge(this,"ruleDetails",x,this),ge(this,"noRuleSpecificTeamIntegrations",A,this),ge(this,"isHydrating",P,this),ge(this,"isAdding",T,this),ge(this,"categoryFilter",C,this),ge(this,"createFormActiveRuleId",D,this),ge(this,"createFormActiveServiceId",j,this),ge(this,"workspaces",O,this),ge(this,"entities",R,this),ge(this,"selectedWorkspace",k,this),ge(this,"selectedEntity",M,this),ge(this,"selectedEntityVersion",L,this),ge(this,"authDetails",N,this),ge(this,"errorFetchingAuthDetails",z,this),ge(this,"authDetailsError",F,this),ge(this,"runLogPageData",V,this),ge(this,"loadingRunLogPage",B,this),ge(this,"errorInFetchingRunLogPageData",W,this),ge(this,"runLogPageErrorDetails",H,this),ge(this,"sourceConflicting",G,this),ge(this,"refreshingRunLog",U,this),ge(this,"authType",Y,this),ge(this,"availableIntegrationClasses",$,this),ge(this,"integrationCategories",q,this),ge(this,"availableIntegrationServices",K,this),ge(this,"availableIntegrationServicesByCategory",X,this),ge(this,"filteredIntegrationServices",J,this),ge(this,"preferredEntities",Q,this),ge(this,"integrationClass",Z,this),ge(this,"loadingIntegrationClass",ee,this),ge(this,"errorFetchingIntegrationClass",te,this),ge(this,"integrationInstance",ie,this),ge(this,"loadingIntegrationInstance",ne,this),ge(this,"errorFetchingIntegrationInstance",ae,this),this.initializeFetchingTeamIntegrations=he.debounce(this.initializeFetchingTeamIntegrations.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationClasses=he.debounce(this.getAvailableIntegrationClasses.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationServices=he.debounce(this.getAvailableIntegrationServices.bind(this),fe,{leading:!0,trailing:!1}),this.initializeRuleSpecificTeamIntegrations=((e,t,i)=>{const n={};return(...a)=>{const[s,r]=a;return"function"==typeof n[r]||(n[r]=he.debounce(e,t,{...i,leading:!0})),n[r](...a)}})(this.initializeRuleSpecificTeamIntegrations.bind(this),3e5,{leading:!0,trailing:!1})}setActiveIntegrationsView(e){this.activeIntegrationsView=e}readRuleSpecificTeamIntegrations(e){return(0,se.toJS)(this.ruleSpecificTeamIntegrations[e])}readServiceDetails(e){return(0,se.toJS)(this.serviceDetails[e])}readRuleDetails(e){return(0,se.toJS)(this.ruleDetails[e])}setAuthType(e){this.authType=e}setRuleSpecificTeamIntegrations(e,t){this.ruleSpecificTeamIntegrations[e]=t}resetRuleSpecificTeamIntegrations(e){delete this.ruleSpecificTeamIntegrations[e]}setServiceDetails(e,t){this.serviceDetails[e]=t}setRuleDetails(e,t){this.ruleDetails[e]=t}resetServiceDetails(e){delete this.serviceDetails[e]}setActiveIntegrationRule(e,t){this.serviceId=e,this.ruleId=t}updateCategoryfilter(e){this.categoryFilter=e,this.updateIntegrationServicesPerCategory(e)}updateRuleSpecificTeamIntegrationsDataStatus(e,t,i,n){this.ruleSpecificTeamIntegrationErrors[n]={loading:e,error:t,errorDetails:i}}readRuleSpecificTeamIntegrationsDataStatus(e){return{loading:!0,...(0,se.toJS)(this.ruleSpecificTeamIntegrationErrors[e])}}getRuleSpecificTeamIntegrationData(e,t){return this.updateRuleSpecificTeamIntegrationsDataStatus(!0,!1,"",t),Promise.all([de.default.fetchIntegrationClassDetails(t),de.default.fetchIntegrationServiceDetails(e),ce.default.getTeamIntegrationInstances(t)]).then((([i,n,a])=>{const s=he.get(a,"body.data",[]),r=he.get(i,"body.data",{}),o=he.get(n,"body.data",{});if(200!==i.status||200!==a.status||200!==n.status||he.isEmpty(r)||he.isEmpty(o)){let e={};(200!==i.status||he.isEmpty(r))&&(e.errorFetchingClassDetails=i),(200!==n.status||he.isEmpty(o))&&(e.errorFetchingServiceDetatils=n),200!==a.status&&(e.errorFetchingTeamIntegrations=a),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}else{if(he.isEmpty(s))this.setRuleSpecificTeamIntegrations(t,[]);else{let e=he.map(s,(e=>({id:e.id,name:e.name,userId:e.createdBy.id,userName:he.get(e,"createdBy.name")||he.get(e,"createdBy.username")||he.get(e,"createdBy.email")||"A user",isUserNameClickable:Boolean(he.get(e,"createdBy.name")||he.get(e,"createdBy.username")||he.get(e,"createdBy.email")),userProfileUrl:e.createdBy.profilePicUrl,status:e.status,apiDetails:e.entity.api,entityType:e.entity.type,entityId:e.entity.id,entityName:e.entity.name,lastRunAt:e.lastRunAt,clientCategories:e.clientCategories})));this.setRuleSpecificTeamIntegrations(t,e)}this.setServiceDetails(e,o),this.setRuleDetails(t,r),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!1,"",t)}})).catch((i=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,i,t),this.resetRuleSpecificTeamIntegrations(t),this.resetServiceDetails(e)}))}getTeamIntegrationsData(){return this.setLoadingIntegrationClasses(!0),this.setLoadingIntegrationServices(!0),Promise.all([de.default.fetchAvailableClasses(),de.default.fetchAvailableServices(),ce.default.getTeamIntegrations()]).then((([e,t,i])=>{const n=he.get(t,"body.data",[]),a=he.get(e,"body.data",[]),s=he.get(i,"body.data",[]);if(200!==e.status||200!==i.status||200!==t.status||he.isEmpty(n)||he.isEmpty(a)){let s={};(200!==t.status||he.isEmpty(n))&&(s.errorFetchingServices=t),(200!==e.status||he.isEmpty(a))&&(s.errorFetchingClasses=e),200!==i.status&&(s.errorFetchingTeamIntegrations=i),this.updateData(!1,[]),this.updateState(!1,!0,s)}else{if(he.isEmpty(s))this.updateData(!0,[]),this.updateState(!1,!1,"");else{const e=he.groupBy(s,"rule"),t=he.map(e,((e,t)=>{const i=e[0].service,s=he.find(a,(e=>e.id===t)),r=he.find(n,(e=>e.id===i));return{ruleName:he.get(s,"name"),ruleId:t,serviceId:i,serviceName:he.get(r,"name",""),serviceIconURL:he.get(r,"iconUrl",""),serviceDarkIconURL:he.get(r,"darkIconUrl",""),statusCount:he.countBy(e,(e=>e.status)),totalIntegrations:e.length}})),i=this.defaultSortTeamIntegrations(t);this.updateData(!1,i),this.updateState(!1,!1,"")}const e=this.addDisplayNameToIntegrationClasses(a);this.setAvailableIntegrationClasses(e),this.setAvailableIntegrationServices(n),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory)}this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!1,"")})).catch((e=>{pm.logger.error("Error in fetching team integrations",e),this.updateData(!1,[]),this.updateState(!1,!0,e),this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!0,e)}))}setIsHydrating(e){this.isHydrating=e}updateState(e,t,i){this.loadingTeamIntegrations=e,this.errorInFetchingTeamIntegrations=t,this.errorDetails=i}updateData(e,t){this.noTeamIntegrations=e,this.teamIntegrations=t}updateAvailableIntegrations(e){this.availableIntegrations=e}updateIntegrationCategories(){this.integrationCategories=ue.default.getAllCategories(this.availableIntegrations)}setAvailableIntegrationServices(e){this.availableIntegrationServices=e}addDisplayNameToIntegrationClasses(e){const t={};return he.forEach(e,(e=>{const i=he.get(e,"services",[]);he.forEach(i,(i=>{he.get(t,i.id)?t[i.id].push(e.id):t[i.id]=[e.id]}))})),he.forEach(e,(e=>{const i=he.get(e,"services.0",{});e.displayName=he.size(t[i.id])>1?e.name:i.name})),e}setAvailableIntegrationClasses(e){this.availableIntegrationClasses=e}getIntegrationCategoriesFromServices(){this.integrationCategories=ue.default.getAllIntegrationCategories(this.availableIntegrationServices)}updateIntegrationServicesPerCategory(e){let t=ue.default.filterByCategory(e,(0,se.toJS)(this.availableIntegrationServices));he.isEmpty(t)&&!he.isEmpty((0,se.toJS)(this.availableIntegrationServices))&&(this.updateCategoryfilter("all"),t=(0,se.toJS)(this.availableIntegrationServices)),this.availableIntegrationServicesByCategory=t}updateFilteredIntegrationServices(e){this.filteredIntegrationServices=e}updateAvailableIntegrationsStatus(e,t,i){this.loadingAvailableIntegrations=e,this.errorFetchingAvailableIntegrations=t,this.availableIntegrationsErrorDetails=i}setLoadingIntegrationServices(e){this.loadingIntegrationServices=e}setLoadingIntegrationClasses(e){this.loadingIntegrationClasses=e}updateFilteredAvailableIntegrations(e){this.filteredAvailableIntegrations=e}updateFilterByCategoryAvailableIntegrations(e){let t=ue.default.filterByCategory(e,(0,se.toJS)(this.availableIntegrations));he.isEmpty(t)&&!he.isEmpty((0,se.toJS)(this.availableIntegrations))&&(this.updateCategoryfilter("all"),t=(0,se.toJS)(this.availableIntegrations)),this.filterByCategoryAvailableIntegrations=t}initializeFetchingTeamIntegrations(){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}initializeRuleSpecificTeamIntegrations(e,t){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchRuleSpecificTeamIntegrations(e,t){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchTeamIntegrations(){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}getAvailableIntegrationClasses(){return this.setLoadingIntegrationClasses(!0),de.default.fetchAvailableClasses().then((e=>{const t=this.addDisplayNameToIntegrationClasses(he.get(e,"body.data",[]));this.setAvailableIntegrationClasses(t),this.updateAvailableIntegrationsStatus(!1,!1,""),this.setLoadingIntegrationClasses(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationClasses(!1),pm.logger.error("Error occurred while fetching available integration classes",e)}))}getAvailableIntegrationServices(){return this.setLoadingIntegrationServices(!0),de.default.fetchAvailableServices().then((e=>{this.setAvailableIntegrationServices(he.get(e,"body.data",[])),this.updateAvailableIntegrationsStatus(!1,!1,""),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory),this.setLoadingIntegrationServices(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationServices(!1),pm.logger.error("Error occurred while fetching available integration services",e)}))}populateIntegrationClasses(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationClasses()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}populateIntegrationServices(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationServices()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}setActiveIntegrationService(e){this.activeServiceDetailsId=e}setActiveIntegrationCreateForm(e,t){this.createFormActiveServiceId=e,this.createFormActiveRuleId=t}setSelectedWorkspace(e){this.selectedWorkspace=e}setSelectedEntity(e){this.selectedEntity=e}setSelectedEntityVersion(e){this.selectedEntityVersion=e}resetSelectedWorkspace(){this.selectedWorkspace=null}resetSelectedEntity(){this.selectedEntity=null}resetSelectedEntityVersion(){this.selectedEntityVersion=null}resetAddIntegrationDependencies(){this.resetSelectedEntityVersion(),this.resetSelectedEntity(),this.resetSelectedWorkspace()}updateIsAdding(e){this.isAdding=e}updateSourceConflicting(e){this.sourceConflicting=e}readTeamIntegrations(){return(0,se.toJS)(this.teamIntegrations)}updateIdentityResponse(e){this.authDetails=he.get(e,"body.handover")}updateIdentityResponseStatus(e,t){this.errorFetchingAuthDetails=e,this.authDetailsError=t}setAuthDetails(e){this.authDetails=e}readAuthDetails(){return(0,se.toJS)(this.authDetails)}defaultSortTeamIntegrations(e){const t=he.filter(e,(e=>!!e.statusCount.failed)),i=he.sortBy(t,(e=>he.toLower(e.ruleName))),n=he.sortBy(he.difference(e,i),(e=>he.toLower(e.ruleName)));return he.concat(i,n)}updateRunsPageResponseStatus(e,t,i){this.loadingRunLogPage=e,this.errorInFetchingRunLogPageData=t,this.runLogPageErrorDetails=i}updateRunsPageResponse(e){this.runLogPageData=e}readIntegrationRunLogData(){return(0,se.toJS)(this.runLogPageData)}updateRefreshingRunLog(e){this.refreshingRunLog=e}addPreferredEntity(e,t){const i={entityType:e,entityId:t};he.some(this.preferredEntities,i)||this.preferredEntities.push(i)}getIntegrationClassDetails(e){return this.loadingIntegrationClass=!0,new Promise(((t,i)=>{de.default.fetchIntegrationClassDetails(e).then((e=>{const i=he.get(e,"body.data");200!==e.status||he.isEmpty(i)?this.errorFetchingIntegrationClass=e:(this.integrationClass=i,this.errorFetchingIntegrationClass=!1),this.loadingIntegrationClass=!1,t()})).catch((t=>{pm.logger.error("Error in fetching integration class details",e,t),this.errorFetchingIntegrationClass=t,this.loadingIntegrationClass=!1,i(t)}))}))}getIntegrationInstanceDetails(e){this.loadingIntegrationInstance=!0,pe.default.fetchIntegrationInstanceDetails(e).then((e=>{const t=he.get(e,"body.data");200!==e.status||he.isEmpty(t)?this.errorFetchingIntegrationInstance=e:(t.allowedActions=he.get(e,"body.meta.allowedActions"),this.integrationInstance=t,this.errorFetchingIntegrationInstance=!1),this.loadingIntegrationInstance=!1})).catch((t=>{pm.logger.error("Error in fetching integration instance details",e,t),this.errorFetchingIntegrationInstance=t,this.loadingIntegrationInstance=!1}))}getIntegrationClasses(){return he.isEmpty(this.availableIntegrationClasses)&&this.populateIntegrationClasses(),this.availableIntegrationClasses}getIntegrationServices(){return he.isEmpty(this.availableIntegrationServices)&&this.populateIntegrationServices(),this.availableIntegrationServices}}).prototype,"activeIntegrationsView",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.INTEGRATIONS_VIEW.TEAM}}),s=me(n.prototype,"serviceId",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r=me(n.prototype,"activeServiceDetailsId",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=me(n.prototype,"ruleId",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=me(n.prototype,"teamIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=me(n.prototype,"availableIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=me(n.prototype,"loadingAvailableIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=me(n.prototype,"loadingIntegrationClasses",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=me(n.prototype,"loadingIntegrationServices",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=me(n.prototype,"errorFetchingAvailableIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=me(n.prototype,"availableIntegrationsErrorDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=me(n.prototype,"filteredAvailableIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=me(n.prototype,"filterByCategoryAvailableIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=me(n.prototype,"integrationCategories",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=me(n.prototype,"noTeamIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=me(n.prototype,"loadingTeamIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=me(n.prototype,"errorInFetchingTeamIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=me(n.prototype,"errorDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),I=me(n.prototype,"ruleSpecificTeamIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=me(n.prototype,"ruleSpecificTeamIntegrationErrors",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=me(n.prototype,"serviceDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=me(n.prototype,"ruleDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=me(n.prototype,"noRuleSpecificTeamIntegrations",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=me(n.prototype,"isHydrating",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=me(n.prototype,"isAdding",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=me(n.prototype,"categoryFilter",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),D=me(n.prototype,"createFormActiveRuleId",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=me(n.prototype,"createFormActiveServiceId",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=me(n.prototype,"workspaces",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=me(n.prototype,"entities",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=me(n.prototype,"selectedWorkspace",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=me(n.prototype,"selectedEntity",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=me(n.prototype,"selectedEntityVersion",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=me(n.prototype,"authDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=me(n.prototype,"errorFetchingAuthDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=me(n.prototype,"authDetailsError",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=me(n.prototype,"runLogPageData",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=me(n.prototype,"loadingRunLogPage",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),W=me(n.prototype,"errorInFetchingRunLogPageData",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=me(n.prototype,"runLogPageErrorDetails",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=me(n.prototype,"sourceConflicting",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=me(n.prototype,"refreshingRunLog",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=me(n.prototype,"authType",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$=me(n.prototype,"availableIntegrationClasses",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=me(n.prototype,"integrationCategories",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=me(n.prototype,"availableIntegrationServices",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=me(n.prototype,"availableIntegrationServicesByCategory",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=me(n.prototype,"filteredIntegrationServices",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=me(n.prototype,"preferredEntities",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=me(n.prototype,"integrationClass",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=me(n.prototype,"loadingIntegrationClass",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=me(n.prototype,"errorFetchingIntegrationClass",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=me(n.prototype,"integrationInstance",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=me(n.prototype,"loadingIntegrationInstance",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=me(n.prototype,"errorFetchingIntegrationInstance",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me(n.prototype,"setActiveIntegrationsView",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveIntegrationsView"),n.prototype),me(n.prototype,"setAuthType",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setAuthType"),n.prototype),me(n.prototype,"setRuleSpecificTeamIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setRuleSpecificTeamIntegrations"),n.prototype),me(n.prototype,"resetRuleSpecificTeamIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"resetRuleSpecificTeamIntegrations"),n.prototype),me(n.prototype,"setServiceDetails",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setServiceDetails"),n.prototype),me(n.prototype,"setRuleDetails",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setRuleDetails"),n.prototype),me(n.prototype,"resetServiceDetails",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"resetServiceDetails"),n.prototype),me(n.prototype,"setActiveIntegrationRule",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveIntegrationRule"),n.prototype),me(n.prototype,"updateCategoryfilter",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateCategoryfilter"),n.prototype),me(n.prototype,"updateRuleSpecificTeamIntegrationsDataStatus",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateRuleSpecificTeamIntegrationsDataStatus"),n.prototype),me(n.prototype,"getRuleSpecificTeamIntegrationData",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getRuleSpecificTeamIntegrationData"),n.prototype),me(n.prototype,"getTeamIntegrationsData",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getTeamIntegrationsData"),n.prototype),me(n.prototype,"setIsHydrating",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setIsHydrating"),n.prototype),me(n.prototype,"updateState",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateState"),n.prototype),me(n.prototype,"updateData",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateData"),n.prototype),me(n.prototype,"updateAvailableIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateAvailableIntegrations"),n.prototype),me(n.prototype,"updateIntegrationCategories",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationCategories"),n.prototype),me(n.prototype,"setAvailableIntegrationServices",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setAvailableIntegrationServices"),n.prototype),me(n.prototype,"setAvailableIntegrationClasses",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setAvailableIntegrationClasses"),n.prototype),me(n.prototype,"getIntegrationCategoriesFromServices",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getIntegrationCategoriesFromServices"),n.prototype),me(n.prototype,"updateIntegrationServicesPerCategory",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationServicesPerCategory"),n.prototype),me(n.prototype,"updateFilteredIntegrationServices",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateFilteredIntegrationServices"),n.prototype),me(n.prototype,"updateAvailableIntegrationsStatus",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateAvailableIntegrationsStatus"),n.prototype),me(n.prototype,"setLoadingIntegrationServices",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingIntegrationServices"),n.prototype),me(n.prototype,"setLoadingIntegrationClasses",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingIntegrationClasses"),n.prototype),me(n.prototype,"updateFilteredAvailableIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateFilteredAvailableIntegrations"),n.prototype),me(n.prototype,"updateFilterByCategoryAvailableIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateFilterByCategoryAvailableIntegrations"),n.prototype),me(n.prototype,"initializeFetchingTeamIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"initializeFetchingTeamIntegrations"),n.prototype),me(n.prototype,"initializeRuleSpecificTeamIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"initializeRuleSpecificTeamIntegrations"),n.prototype),me(n.prototype,"refetchRuleSpecificTeamIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"refetchRuleSpecificTeamIntegrations"),n.prototype),me(n.prototype,"refetchTeamIntegrations",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"refetchTeamIntegrations"),n.prototype),me(n.prototype,"getAvailableIntegrationClasses",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getAvailableIntegrationClasses"),n.prototype),me(n.prototype,"getAvailableIntegrationServices",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getAvailableIntegrationServices"),n.prototype),me(n.prototype,"populateIntegrationClasses",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"populateIntegrationClasses"),n.prototype),me(n.prototype,"populateIntegrationServices",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"populateIntegrationServices"),n.prototype),me(n.prototype,"setActiveIntegrationService",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveIntegrationService"),n.prototype),me(n.prototype,"setActiveIntegrationCreateForm",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveIntegrationCreateForm"),n.prototype),me(n.prototype,"setSelectedWorkspace",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedWorkspace"),n.prototype),me(n.prototype,"setSelectedEntity",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedEntity"),n.prototype),me(n.prototype,"setSelectedEntityVersion",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedEntityVersion"),n.prototype),me(n.prototype,"resetSelectedWorkspace",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"resetSelectedWorkspace"),n.prototype),me(n.prototype,"resetSelectedEntity",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"resetSelectedEntity"),n.prototype),me(n.prototype,"resetSelectedEntityVersion",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"resetSelectedEntityVersion"),n.prototype),me(n.prototype,"resetAddIntegrationDependencies",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"resetAddIntegrationDependencies"),n.prototype),me(n.prototype,"updateIsAdding",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIsAdding"),n.prototype),me(n.prototype,"updateSourceConflicting",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateSourceConflicting"),n.prototype),me(n.prototype,"updateIdentityResponse",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIdentityResponse"),n.prototype),me(n.prototype,"updateIdentityResponseStatus",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIdentityResponseStatus"),n.prototype),me(n.prototype,"setAuthDetails",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"setAuthDetails"),n.prototype),me(n.prototype,"updateRunsPageResponseStatus",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateRunsPageResponseStatus"),n.prototype),me(n.prototype,"updateRunsPageResponse",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateRunsPageResponse"),n.prototype),me(n.prototype,"updateRefreshingRunLog",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"updateRefreshingRunLog"),n.prototype),me(n.prototype,"addPreferredEntity",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"addPreferredEntity"),n.prototype),me(n.prototype,"getIntegrationClassDetails",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getIntegrationClassDetails"),n.prototype),me(n.prototype,"getIntegrationInstanceDetails",[se.action],Object.getOwnPropertyDescriptor(n.prototype,"getIntegrationInstanceDetails"),n.prototype),n)},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),r=i("./js/stores/StoreManager.js"),o=i("./js/stores/IntegrationsStore.js"),l=i("../../node_modules/mobx/lib/mobx.module.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},c.apply(this,arguments)}function d(e){let{disabled:t,workspaceId:i,payload:d,integrationFormActions:u,source:p,showDivider:h,...g}=e,m="basic_auth"!==(f=(0,l.toJS)((0,r.resolveStoreInstance)(o.default).authType))&&"token"!==f;var f;return p||(p="team_integrations_create_forms"),n.createElement("div",null,h&&n.createElement("hr",{className:"integration-add-actions-separator"}),n.createElement(s.default,c({disabled:t,workspaceId:i,payload:d},g,{redirect:e.redirect,integrationFormActions:u,source:p,alignLeft:m})),n.createElement(a.default,c({alignLeft:m,integrationFormActions:u,payload:d,source:p},g)))}d.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var n=i("../../node_modules/react/index.js");function a(e){const{imageSrc:t,displayField:i}=e;return n.createElement("div",{className:"integrations-add-card__authed-user"},n.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&n.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),n.createElement("span",{className:"integrations-add-card__authed-user__name"},i))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var n=i("../../node_modules/react/index.js");function a(e){const{className:t,extUrl:i,target:a}=e;return n.createElement("a",{className:t,href:i,rel:"_blank"===a?"noopener noreferrer":"",target:a,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var n,a=i("../../node_modules/react/index.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),r=i("./js/stores/ActiveWorkspaceStore.js"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("./monitors/services/MonitorService.js"),d=i("./js/services/NavigationService.js"),u=i("./api-dev/services/APIDevService.js"),p=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=(i("./js/modules/services/RemoteSyncRequestService.js"),i("./integrations/constants/integrationsConstants.ts")),m=i("./runtime-repl/collection/_api/CollectionInterface.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),y=i("./js/external-navigation/ExternalNavigationService.js"),v=i("./api-dev/interfaces/APIInterface.js"),_=i("../../node_modules/mobx/lib/mobx.module.js"),S=i("./node_modules/lodash/lodash.js"),I=i.n(S);const w="Malformed response",E={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},x={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let A=(0,p.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.workspaceStore=(0,o.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===g.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===g.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,_.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,i=[];return i=e.map((e=>e.name&&e.id?{...e,label:I().get(e,"name"),value:I().get(e,"id")}:(t=!0,{}))),{newEntities:i,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(I().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===g.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===g.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===g.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===g.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===g.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return E[this.props.entity]?E[this.props.entity]:""}fetchAndAssignPermissions(e,t,i,n){return new Promise(((n,a)=>{const s=e.map((e=>({id:I().get(e,"apiversion"===i?"api":"id")})));let r=null;g.INTEGRATION_FORM_MODE.ADD,r=h.default.fetchCreatePermissions,r(t,i,s).then((t=>(I().forEach(I().zip(e,t.body),(e=>{const[t,i]=e;t.disabled=!i.hasPermission})),n(e)))).catch((e=>{pm.logger.error(e),a(e)}))}))}fetchCollections(e){e?(0,m.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(w);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===g.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?c.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=I().get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(w);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===g.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?c.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=I().get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(w);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===g.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?u.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(w);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===g.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await u.default.getVersions(e);let{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(w);if(this.props.rule&&this.props.mode){const e="apiversion";i=await this.fetchAndAssignPermissions(i,this.props.rule,e,this.props.mode)}this.props.entity===g.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(I().find(i,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:i,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){I().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==g.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===g.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return a.createElement(f.default,{alignItems:"center",direction:"column"},a.createElement("div",null,"This workspace doesn't have any monitors."),a.createElement("div",{onClick:()=>{"workspace"===I().split(d.default.getCurrentURL(),"/",1)[0]?d.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,y.openExternalLink)(d.default.getBaseURL()+"/"+d.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},a.createElement(b.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===g.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:i}=this.state;if(e===g.entityTypes.API_VERSIONS){const e=await(0,v.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(i[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:i,entityVersions:n,firstLoad:r,shouldHideDropdown:o}=this.state,{selectedEntity:l,selectedEntityVersion:c}=this.store;return o?null:a.createElement(s.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===g.entityTypes.API_VERSIONS?n:i,value:this.props.value||(this.props.entity===g.entityTypes.API_VERSIONS?c:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||I().get(x,this.props.entity),emptyStateError:!e&&(this.props.entity===g.entityTypes.API_VERSIONS?n.length>0&&!c:i.length>0&&!l)&&!r&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n,a=i("../../node_modules/react/index.js"),s=i("./js/stores/StoreManager.js"),r=i("./js/stores/IntegrationsStore.js"),o=i("./monitors/services/MonitorService.js"),l=i("./api-dev/services/APIDevService.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("./integrations/constants/integrationsConstants.ts"),p=i("./runtime-repl/collection/_api/CollectionInterface.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=i("./js/components/base/LoadingIndicator.js"),m=i("./integrations/api-observability/components/base/CustomDropdown.js"),f=i("./node_modules/lodash/lodash.js");const b="Malformed response",y={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},v={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let _=(0,c.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,s.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===u.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,i=[];return i=e.map((e=>e.name&&e.id?{...e,label:f.get(e,"name"),value:f.get(e,"id")}:(t=!0,{}))),{newEntities:i,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(f.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===u.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===u.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===u.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return y[this.props.entity]?y[this.props.entity]:""}fetchAndAssignPermissions(e,t,i,n){return new Promise(((n,a)=>{const s=e.map((e=>({id:f.get(e,"apiversion"===i?"api":"id")})));let r=null;u.INTEGRATION_FORM_MODE.ADD,r=d.default.fetchCreatePermissions,r(t,i,s).then((t=>(f.forEach(f.zip(e,t.body),(e=>{const[t,i]=e;t.disabled=!i.hasPermission})),n(e)))).catch((e=>{pm.logger.error(e),a(e)}))}))}fetchCollections(e){e?(0,p.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?o.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(b);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?o.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(b);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(f.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){f.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==u.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===u.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:i,entityVersions:n,firstLoad:s}=this.state,{selectedEntity:r,selectedEntityVersion:o}=this.store;return t||!e&&(this.props.entity===u.entityTypes.API_VERSIONS?n.length>0&&!f.get(o,"value"):i.length>0&&!f.get(r,"value"))&&!s?{status:"error",message:t?a.createElement("div",null,t,a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return a.createElement(h.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading..."),a.createElement(g.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return v[this.props.entity]?v[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:i}=this.state,{selectedEntity:n,selectedEntityVersion:s}=this.store;return a.createElement(m.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===u.entityTypes.API_VERSIONS?i:t,value:this.props.entity===u.entityTypes.API_VERSIONS?s:n,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),a=i("./js/components/base/Inputs.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:i,optional:s,optionalText:l,id:c,disabled:d,error:u,...p}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},i," ",s?n.createElement("span",null,"(",l||"optional",")"):""),n.createElement("div",{className:"integrations-add-card__label-description"},t),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(a.Input,o({inputStyle:"box",type:"text",disabled:d,error:r().isEmpty(u)?"":"This is a mandatory field"},p)),r().isEmpty(u)?"":n.createElement("div",{className:"integrations-add-card__error"},u)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),a=i("./js/components/base/Inputs.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}function l(e){const{id:t,error:i,...s}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),n.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(a.Input,o({id:t,inputStyle:"box",type:"text",error:r().isEmpty(i)?"":"This is a mandatory field"},s)),r().isEmpty(i)?"":n.createElement("div",{className:"integrations-add-card__error"},i)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),a=(i("./js/components/base/Inputs.js"),i("./node_modules/lodash/lodash.js")),s=i.n(a),r=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function c(e){const{id:t,error:i,...a}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement(r.default,l({id:t,label:n.createElement(o.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:s().isEmpty(i)?"":"error",validationMessage:s().isEmpty(i)?"":"This is a mandatory field"},a)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n=i("../../node_modules/react/index.js"),a=i("./js/components/base/InputSelectV2.js"),s=i("./js/components/base/SearchHighlighter.js"),r=i("./node_modules/lodash/lodash.js");class o extends n.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,i={}){return!t||i.firstRender?e:r.filter(e,(e=>e.id&&r.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,i=r.find(e,(e=>e.id===t.id));return i||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,i={}){const a=e.name,r=e.id;return t&&!i.firstRender?n.createElement("div",{className:"input-select-item",key:r},n.createElement(s.default,{source:a,query:t})):n.createElement("div",{className:"input-select-item",key:r},a)}render(){var{title:e,description:t,customLabel:i,showCustomLabel:s,filterItems:r}=this.props;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},e),n.createElement("div",{className:"integrations-add-card__label-description"},t),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(a.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,r),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),s?i:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),a=i("./js/components/base/SelectDropdown.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("./version-control/common/ForkLabel.js"),c=i("./node_modules/lodash/lodash.js");class d extends n.Component{constructor(e){super(e),this.optionRenderer=e=>n.createElement(s.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!c.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,i=null;if(t&&(i=c.find(e,(e=>c.isEqual(e.value,t.value)))),i){let e,t;var a,s,d,u,p;return i.isForked?(e={id:null===(a=i)||void 0===a?void 0:a.id,forkLabel:null===(s=i)||void 0===s?void 0:s.forkLabel,model:null===(d=i)||void 0===d?void 0:d.type},t={id:null===(u=i)||void 0===u?void 0:u.baseCollectionUid,model:null===(p=i)||void 0===p?void 0:p.type},i={...i,label:n.createElement(r.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},n.createElement(o.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},i.label),n.createElement(l.default,{forkedEntity:e,baseEntity:t,label:i.forkLabel}))}):i}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:i,error:s,isCreatable:r,isClearable:o,noResultsForSearch:l,optional:d,noOptionsForDropdown:u,loading:p,disabled:h,handleRetry:g,checkForValidInput:m,customInputMessage:f,emptyStateError:b,label:y}=this.props;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},e," ",d?n.createElement("span",null,"(optional)"):""),n.createElement("div",{className:"integrations-add-card__label-description"},t),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(a.default,{isCreatable:r,isClearable:o,multi:this.props.multi,label:y,optionRenderer:this.optionRenderer,loading:p,className:(b||s)&&"is-error",disabled:h,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:i&&0!==i.length?l:u,options:i,isValidNewOption:m||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,f),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),b?n.createElement("span",{className:"integrations-add-card__error"},b):s?n.createElement("span",{className:"integrations-add-card__error"},s+". ",c.isFunction(g)&&n.createElement("span",{onClick:g,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n=i("../../node_modules/react/index.js"),a=i("./js/components/base/PasswordInput.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),o=i("./node_modules/classnames/index.js"),l=i.n(o),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u.apply(this,arguments)}const p=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function h(e){const{isInlineSaveVisible:t,inlineSaveButtonData:i,onSave:s,value:o}=e,{isSaveDisabled:l,integrationId:h,payload:g}=i||{};return n.createElement(d.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},n.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:i,optional:s,id:o,customLink:l,error:c,descriptionClass:d,maskedPlaceholderWhenEmpty:h,...g}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},i," ",s?n.createElement("span",null,"(optional)"):""),n.createElement("div",{className:d||"integrations-add-card__label-description"},t," ",l),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(a.default,u({inputStyle:"box",type:"text",error:r().isEmpty(c)?"":"This is a mandatory field",placeholder:h?"************":""},g,{className:p(e.className,e.error)})),r().isEmpty(c)?"":n.createElement("div",{className:"integrations-add-card__error"},c)))})(e)),t&&n.createElement(c.default,{isSaveDisabled:l,integrationId:h,payload:g,onSave:s,value:o}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a),r=(i("./node_modules/classnames/index.js"),i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:i,optional:a,id:l,customLink:c,error:d,descriptionClass:u,maskedPlaceholderWhenEmpty:p,...h}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title-v2"},i," ",a?n.createElement("span",null,"(optional)"):""),n.createElement("div",{className:u||"integrations-add-card__label-description"},t," ",c),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(r.default,o({type:"password",placeholder:p?"************":""},h)),s().isEmpty(d)?"":n.createElement("div",{className:"integrations-add-card__error"},d)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n,a=i("../../node_modules/react/index.js"),s=i("./collaboration/workspace/controller/WorkspaceController.ts"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./node_modules/async/dist/async.js"),u=i("./integrations/constants/integrationsConstants.ts"),p=i("./node_modules/lodash/lodash.js");let h=(0,c.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((i=>{s.default.findAll({limit:50,...e&&{cursor:e}}).then((n=>(e=p.get(n,"meta.nextCursor"),t=p.unionBy(t,n.data,"id"),i()))).catch((e=>i(e)))}),(()=>p.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let i=!1;const n=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(i=!0,{})));i&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:n,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),p.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:i,firstLoad:n,shouldDisableDropdown:s}=this.state,{selectedWorkspace:o}=this.store;return!s&&a.createElement(r.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||s,error:t,entityType:u.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&i.length>0&&!o&&!n&&"Please select a workspace",options:i,value:o,onTargetSelect:this.onTargetSelect})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var n,a=i("../../node_modules/react/index.js"),s=i("./collaboration/workspace/controller/WorkspaceController.ts"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./node_modules/async/dist/async.js"),u=i("./js/components/base/LoadingIndicator.js"),p=i("./integrations/api-observability/components/base/CustomDropdown.js"),h=i("./node_modules/lodash/lodash.js");let g=(0,c.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((i=>{s.default.findAll({limit:50,...e&&{cursor:e}}).then((n=>(e=h.get(n,"meta.nextCursor"),t=h.unionBy(t,n.data,"id"),i()))).catch((e=>i(e)))}),(()=>h.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let i=!1;const n=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(i=!0,{})));i&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:n,loading:!1})}}))}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),h.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1}))}renderLoadingState(){return a.createElement(r.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading..."),a.createElement(u.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(){let{error:e,firstLoad:t,loading:i,workspaces:n}=this.state,{selectedWorkspace:s}=this.store;return e||!i&&n.length>0&&!h.get(s,"value")&&!t?{status:"error",message:e?a.createElement("div",null,"Unable to load workspaces.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchAllWorkspaces()}},"Retry")):"Please select a workspace."}:{}}render(){const{loading:e,workspaces:t,shouldDisableDropdown:i}=this.state,{selectedWorkspace:n}=this.store;return!i&&a.createElement(p.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||i,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,validationState:this.getValidationState(),options:t||[],value:n,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found"})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,a=i("../../node_modules/react/index.js"),s=i("./js/components/base/Buttons.js"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("./js/services/NavigationService.js"),d=i("./integrations/navigation/constants.js"),u=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=i("./js/modules/services/AnalyticsService.js"),h=i("./node_modules/classnames/index.js"),g=i.n(h),m=i("./js/components/base/LoadingIndicator.js"),f=i("./node_modules/lodash/lodash.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},b.apply(this,arguments)}let y=(0,u.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:i,rule:n,service:o,alignLeft:l,integrationFormActions:u,source:h,labels:y,...v}=this.props,_=(null==y?void 0:y.add)||"Add Integration";let S=h||"team_integrations_create_forms";return a.createElement("div",{"data-testid":"add-integration-button",className:g()("integrations-add-actions__button--container",{"align-left":l})},a.createElement(s.Button,b({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():r.default.createIntegration(i||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&f.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),p.default.addEventV2({category:"integrations",action:n+"_created_integration",label:S,value:1}),u)u(t);else{if("api_github"===n&&"github"===o)c.default.transitionTo(d.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:f.get(e,"body.data.id")},{apiId:t.executor,workspaceId:i});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:i}=this.props.redirect;c.default.transitionTo(e,t,i)}else c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:o,ruleId:n});this.store.refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies(),this.store.setRuleSpecificTeamIntegrations(n,null)}else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(f.get(e,"error.details.message")||f.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},v)," ",this.store.isAdding?a.createElement(m.default,null):_))}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n,a=i("../../node_modules/react/index.js"),s=i("./js/stores/StoreManager.js"),r=i("./js/stores/IntegrationsStore.js"),o=i("./js/components/base/Buttons.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./js/services/NavigationService.js"),d=i("./node_modules/classnames/index.js"),u=i.n(d);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},p.apply(this,arguments)}let h=(0,l.observer)(n=class extends a.Component{constructor(e){super(e),this.store=(0,s.resolveStoreInstance)(r.default)}render(){const{onClickHandler:e,service:t,alignLeft:i,integrationFormActions:n,payload:s,labels:r,...l}=this.props,d=(null==r?void 0:r.cancel)||"Cancel";return a.createElement("div",{"data-testid":"cancel-integration-addition-button",className:u()("integrations-add-actions__button--container",{"align-left":i})},a.createElement(o.Button,p({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{n?n(s,"cancel"):(c.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",d," "))}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var n=i("../../node_modules/react/index.js"),a=i("./js/components/base/Tooltips.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),p=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=i("./integrations/constants/integrationsConstants.ts"),g=i("./collaboration/utils/util.js"),m=i("./version-control/common/ForkLabel.js"),f=i("./node_modules/lodash/lodash.js");class b extends n.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:i,workspaceId:b}=this.props;let y,v;return e.isForked&&(y={id:e.id,forkLabel:e.forkLabel,model:e.type},v={id:e.baseCollectionUid,model:e.type}),n.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!f.isEmpty(t)&&e.disabled&&n.createElement(a.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},n.createElement(a.TooltipBody,null,t)),n.createElement(s.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let i=e.disabled?"content-color-tertiary":"",a={[h.entityTypes.COLLECTIONS]:n.createElement(o.default,{color:i}),[h.entityTypes.COLLECTIONS_FORKED]:n.createElement(l.default,{color:i}),[h.entityTypes.APIS]:n.createElement(c.default,{color:i}),[h.entityTypes.MONITORS]:n.createElement(d.default,{color:i}),[h.entityTypes.API_VERSIONS]:n.createElement(u.default,{color:i})};return t===h.entityTypes.WORKSPACES?n.createElement(p.default,{name:g.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===h.entityTypes.COLLECTIONS&&e&&e.forkLabel?a[h.entityTypes.COLLECTIONS_FORKED]:a[t]})(e,i),n.createElement(s.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},n.createElement(r.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&n.createElement(m.default,{workspaceId:b,forkedEntity:y,baseEntity:v,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=i("./js/external-navigation/ExternalNavigationService.js");function r(e){const{extUrl:t}=e;return n.createElement("span",{onClick:()=>(0,s.openExternalLink)(t,"_blank")},n.createElement(a.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,i){i.r(t),i.d(t,{AddIntegrationActions:function(){return h.default},AuthUserSegment:function(){return m.default},CustomLink:function(){return g.default},EntitySelector:function(){return u.default},EntitySelectorV2:function(){return p.default},FieldSegment:function(){return n.default},NicknameFieldSegment:function(){return a.default},NicknameFieldSegmentV2:function(){return s.default},SelectSegment:function(){return o.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return r.default},SensitiveFieldSegmentV2:function(){return f.default},WorkspaceSelector:function(){return c.default},WorkspaceSelectorV2:function(){return d.default}});var n=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),d=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),p=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),g=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),m=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),f=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:i,payload:l,value:c}=e,[d,u]=(0,n.useState)(!1);return n.createElement(a.default,{className:"integrations-edit-actions__button--container-inline"},n.createElement(s.default,{type:"secondary",text:"Cancel",isDisabled:d,onClick:()=>{e.onSave("",o.RESET)}}),n.createElement(s.default,{type:"primary",text:"Save",isDisabled:t,isLoading:d,onClick:()=>{u(!0),r.default.updateIntegration(i,l).then((t=>{e.onSave(c)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{u(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),a=i("./node_modules/prop-types/index.js"),s=i.n(a),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=i("./node_modules/lodash/lodash.js");class c extends n.Component{constructor(e){super(e)}render(){return n.createElement("div",{className:"team-integrations-error-state"},n.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=n.createElement(r.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=n.createElement(o.default,null)),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}c.propTypes={errorDetails:s().object,origin:s().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,i){i.r(t),i.d(t,{RESET:function(){return n}});const n="reset"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js":function(e,t,i){i.r(t);var n=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");const a="integrations";t.default={fetchIntegrationClassDetails(e,t){const i=`/integration-classes/${e}`;return n.HTTPGatewayService.request({data:{service:a,method:"get",path:i,query:t}})},fetchAvailableClasses:()=>n.HTTPGatewayService.request({data:{service:a,method:"get",path:"/integration-classes"}}),fetchAvailableServices:()=>n.HTTPGatewayService.request({data:{service:a,method:"get",path:"/services"}}),fetchIntegrationServiceDetails(e,t){const i=`/services/${e}`;return n.HTTPGatewayService.request({data:{service:a,method:"get",path:i,query:t}})}}},"./node_modules/chart.js/auto/auto.esm.js":function(e,t,i){i.r(t);var n=i("./node_modules/chart.js/dist/chart.esm.js");n.Chart.register(...n.registerables),t.default=n.Chart},"./node_modules/chart.js/dist/chart.esm.js":function(e,t,i){i.r(t),i.d(t,{Animation:function(){return l},Animations:function(){return d},ArcElement:function(){return lt},BarController:function(){return P},BarElement:function(){return Tt},BasePlatform:function(){return ne},BasicPlatform:function(){return ae},BubbleController:function(){return T},CategoryScale:function(){return fi},Chart:function(){return et},DatasetController:function(){return I},Decimation:function(){return Ot},DomPlatform:function(){return be},DoughnutController:function(){return C},Element:function(){return ye},Filler:function(){return Kt},Interaction:function(){return U},Legend:function(){return Qt},LineController:function(){return D},LineElement:function(){return bt},LinearScale:function(){return vi},LogarithmicScale:function(){return Si},PieController:function(){return O},PointElement:function(){return vt},PolarAreaController:function(){return j},RadarController:function(){return R},RadialLinearScale:function(){return Ti},Scale:function(){return Ce},ScatterController:function(){return k},Ticks:function(){return _e},TimeScale:function(){return Li},TimeSeriesScale:function(){return zi},Title:function(){return ei},Tooltip:function(){return hi},_adapters:function(){return z},animator:function(){return s},controllers:function(){return M},defaults:function(){return n.d},elements:function(){return Ct},layouts:function(){return ie},plugins:function(){return gi},registerables:function(){return Vi},registry:function(){return je},scales:function(){return Fi}});var n=i("./node_modules/chart.js/dist/chunks/helpers.segment.js"),a=i("../../node_modules/console-browserify/index.js");var s=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const a=t.listeners[n],s=t.duration;a.forEach((n=>n({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(i-t.start,s)})))}_refresh(){const e=this;e._request||(e._running=!0,e._request=n.r.call(window,(()=>{e._update(),e._request=null,e._running&&e._refresh()})))}_update(e=Date.now()){const t=this;let i=0;t._charts.forEach(((n,a)=>{if(!n.running||!n.items.length)return;const s=n.items;let r,o=s.length-1,l=!1;for(;o>=0;--o)r=s[o],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(a.draw(),t._notify(a,n,e,"progress")),s.length||(n.running=!1,t._notify(a,n,e,"complete"),n.initial=!1),i+=s.length})),t._lastDate=e,0===i&&(t._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const r="transparent",o={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const a=(0,n.c)(e||r),s=a.valid&&(0,n.c)(t||r);return s&&s.valid?s.mix(a,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class l{constructor(e,t,i,a){const s=t[i];a=(0,n.a)([e.to,a,s,e.from]);const r=(0,n.a)([e.from,s,a]);this._active=!0,this._fn=e.fn||o[e.type||typeof r],this._easing=n.e[e.easing]||n.e.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,i){const a=this;if(a._active){a._notify(!1);const s=a._target[a._prop],r=i-a._start,o=a._duration-r;a._start=i,a._duration=Math.floor(Math.max(o,e.duration)),a._total+=r,a._loop=!!e.loop,a._to=(0,n.a)([e.to,t,s,e.from]),a._from=(0,n.a)([e.from,s,t])}}cancel(){const e=this;e._active&&(e.tick(Date.now()),e._active=!1,e._notify(!1))}tick(e){const t=this,i=e-t._start,n=t._duration,a=t._prop,s=t._from,r=t._loop,o=t._to;let l;if(t._active=s!==o&&(r||i<n),!t._active)return t._target[a]=o,void t._notify(!0);i<0?t._target[a]=s:(l=i/n%2,l=r&&l>1?2-l:l,l=t._easing(Math.min(1,Math.max(0,l))),t._target[a]=t._fn(s,o,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,i)=>{e.push({res:t,rej:i})}))}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}n.d.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const c=Object.keys(n.d.animation);n.d.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.d.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),n.d.describe("animations",{_fallback:"animation"}),n.d.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class d{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!(0,n.i)(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const a=e[i];if(!(0,n.i)(a))return;const s={};for(const e of c)s[e]=a[e];((0,n.b)(a.properties)&&a.properties||[i]).forEach((e=>{e!==i&&t.has(e)||t.set(e,s)}))}))}_animateOptions(e,t){const i=t.options,n=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!n)return[];const a=this._createAnimations(n,i);return i.$shared&&function(e,t){const i=[],n=Object.keys(t);for(let t=0;t<n.length;t++){const a=e[n[t]];a&&a.active()&&i.push(a.wait())}return Promise.all(i)}(e.options.$animations,i).then((()=>{e.options=i}),(()=>{})),a}_createAnimations(e,t){const i=this._properties,n=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),r=Date.now();let o;for(o=s.length-1;o>=0;--o){const c=s[o];if("$"===c.charAt(0))continue;if("options"===c){n.push(...this._animateOptions(e,t));continue}const d=t[c];let u=a[c];const p=i.get(c);if(u){if(p&&u.active()){u.update(p,d,r);continue}u.cancel()}p&&p.duration?(a[c]=u=new l(p,e,c,d),n.push(u)):e[c]=d}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(s.add(this._chart,i),!0):void 0}}function u(e,t){const i=e&&e.options||{},n=i.reverse,a=void 0===i.min?t:0,s=void 0===i.max?t:0;return{start:n?s:a,end:n?a:s}}function p(e,t){const i=[],n=e._getSortedDatasetMetas(t);let a,s;for(a=0,s=n.length;a<s;++a)i.push(n[a].index);return i}function h(e,t,i,a){const s=e.keys,r="single"===a.mode;let o,l,c,d;if(null!==t){for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===i){if(a.all)continue;break}d=e.values[c],(0,n.g)(d)&&(r||0===t||(0,n.s)(t)===(0,n.s)(d))&&(t+=d)}return t}}function g(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function m(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function f(e,t,i){for(const n of t.getMatchingVisibleMetas("bar").reverse()){const t=e[n.index];if(i&&t>0||!i&&t<0)return n.index}return null}function b(e,t){const{chart:i,_cachedMeta:n}=e,a=i._stacks||(i._stacks={}),{iScale:s,vScale:r,index:o}=n,l=s.axis,c=r.axis,d=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(s,r,n),u=t.length;let p;for(let e=0;e<u;++e){const i=t[e],{[l]:n,[c]:s}=i;p=(i._stacks||(i._stacks={}))[c]=m(a,d,n),p[o]=s,p._top=f(p,r,!0),p._bottom=f(p,r,!1)}}function y(e,t){const i=e.scales;return Object.keys(i).filter((e=>i[e].axis===t)).shift()}function v(e,t){t=t||e._parsed;for(const i of t){const t=i._stacks;if(!t||void 0===t[e.vScale.id]||void 0===t[e.vScale.id][e.index])return;delete t[e.vScale.id][e.index]}}const _=e=>"reset"===e||"none"===e,S=(e,t)=>t?e:Object.assign({},e);class I{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this,t=e._cachedMeta;e.configure(),e.linkScales(),t._stacked=g(t.vScale,t),e.addElements()}updateIndex(e){this.index!==e&&v(this._cachedMeta),this.index=e}linkScales(){const e=this,t=e.chart,i=e._cachedMeta,a=e.getDataset(),s=(e,t,i,n)=>"x"===e?t:"r"===e?n:i,r=i.xAxisID=(0,n.v)(a.xAxisID,y(t,"x")),o=i.yAxisID=(0,n.v)(a.yAxisID,y(t,"y")),l=i.rAxisID=(0,n.v)(a.rAxisID,y(t,"r")),c=i.indexAxis,d=i.iAxisID=s(c,r,o,l),u=i.vAxisID=s(c,o,r,l);i.xScale=e.getScaleForId(r),i.yScale=e.getScaleForId(o),i.rScale=e.getScaleForId(l),i.iScale=e.getScaleForId(d),i.vScale=e.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&(0,n.u)(this._data,this),e._stacked&&v(e)}_dataCheck(){const e=this,t=e.getDataset(),i=t.data||(t.data=[]),a=e._data;if((0,n.i)(i))e._data=function(e){const t=Object.keys(e),i=new Array(t.length);let n,a,s;for(n=0,a=t.length;n<a;++n)s=t[n],i[n]={x:s,y:e[s]};return i}(i);else if(a!==i){if(a){(0,n.u)(a,e);const t=e._cachedMeta;v(t),t._parsed=[]}i&&Object.isExtensible(i)&&(0,n.l)(i,e),e._syncList=[],e._data=i}}addElements(){const e=this,t=e._cachedMeta;e._dataCheck(),e.datasetElementType&&(t.dataset=new e.datasetElementType)}buildOrUpdateElements(e){const t=this,i=t._cachedMeta,n=t.getDataset();let a=!1;t._dataCheck();const s=i._stacked;i._stacked=g(i.vScale,i),i.stack!==n.stack&&(a=!0,v(i),i.stack=n.stack),t._resyncElements(e),(a||s!==i._stacked)&&b(t,i._parsed)}configure(){const e=this,t=e.chart.config,i=t.datasetScopeKeys(e._type),n=t.getOptionScopes(e.getDataset(),i,!0);e.options=t.createResolver(n,e.getContext()),e._parsing=e.options.parsing}parse(e,t){const i=this,{_cachedMeta:a,_data:s}=i,{iScale:r,_stacked:o}=a,l=r.axis;let c,d,u,p=0===e&&t===s.length||a._sorted,h=e>0&&a._parsed[e-1];if(!1===i._parsing)a._parsed=s,a._sorted=!0,u=s;else{u=(0,n.b)(s[e])?i.parseArrayData(a,s,e,t):(0,n.i)(s[e])?i.parseObjectData(a,s,e,t):i.parsePrimitiveData(a,s,e,t);const r=()=>null===d[l]||h&&d[l]<h[l];for(c=0;c<t;++c)a._parsed[c+e]=d=u[c],p&&(r()&&(p=!1),h=d);a._sorted=p}o&&b(i,u)}parsePrimitiveData(e,t,i,n){const{iScale:a,vScale:s}=e,r=a.axis,o=s.axis,l=a.getLabels(),c=a===s,d=new Array(n);let u,p,h;for(u=0,p=n;u<p;++u)h=u+i,d[u]={[r]:c||a.parse(l[h],h),[o]:s.parse(t[h],h)};return d}parseArrayData(e,t,i,n){const{xScale:a,yScale:s}=e,r=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+i,d=t[c],r[o]={x:a.parse(d[0],c),y:s.parse(d[1],c)};return r}parseObjectData(e,t,i,a){const{xScale:s,yScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(a);let d,u,p,h;for(d=0,u=a;d<u;++d)p=d+i,h=t[p],c[d]={x:s.parse((0,n.f)(h,o),p),y:r.parse((0,n.f)(h,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,a=this._cachedMeta,s=t[e.axis];return h({keys:p(n,!0),values:t._stacks[e.axis]},s,a.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const a=i[t.axis];let s=null===a?NaN:a;const r=n&&i._stacks[t.axis];n&&r&&(n.values=r,e.min=Math.min(e.min,s),e.max=Math.max(e.max,s),s=h(n,a,this._cachedMeta.index,{all:!0})),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const i=this,a=i._cachedMeta,s=a._parsed,r=a._sorted&&e===a.iScale,o=s.length,l=i._getOtherScale(e),c=t&&a._stacked&&{keys:p(i.chart,!0),values:null},d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=function(e){const{min:t,max:i,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?i:Number.POSITIVE_INFINITY}}(l);let g,m,f,b;function y(){return f=s[g],m=f[e.axis],b=f[l.axis],!(0,n.g)(m)||u>b||h<b}for(g=0;g<o&&(y()||(i.updateRangeFromParsed(d,e,f,c),!r));++g);if(r)for(g=o-1;g>=0;--g)if(!y()){i.updateRangeFromParsed(d,e,f,c);break}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a][e.axis],(0,n.g)(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this,i=t._cachedMeta;t.configure(),t._cachedDataOpts={},t.update(e||"default"),i._clip=function(e){let t,i,a,s;return(0,n.i)(e)?(t=e.top,i=e.right,a=e.bottom,s=e.left):t=i=a=s=e,{top:t,right:i,bottom:a,left:s}}((0,n.v)(t.options.clip,function(e,t,i){if(!1===i)return!1;const n=u(e,i),a=u(t,i);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(i.xScale,i.yScale,t.getMaxOverflow())))}update(e){}draw(){const e=this,t=e._ctx,i=e.chart,n=e._cachedMeta,a=n.data||[],s=i.chartArea,r=[],o=e._drawStart||0,l=e._drawCount||a.length-o;let c;for(n.dataset&&n.dataset.draw(t,s,o,l),c=o;c<o+l;++c){const e=a[c];e.active?r.push(e):e.draw(t,s)}for(c=0;c<r.length;++c)r[c].draw(t,s)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this,a=n.getDataset();let s;if(e>=0&&e<n._cachedMeta.data.length){const t=n._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,i){return Object.assign(Object.create(e),{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(n.getContext(),e,t)),s.parsed=n.getParsed(e),s.raw=a.data[e],s.index=s.dataIndex=e}else s=n.$context||(n.$context=function(e,t){return Object.assign(Object.create(e),{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(n.chart.getContext(),n.index)),s.dataset=a,s.index=s.datasetIndex=n.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const a=this,s="active"===t,r=a._cachedDataOpts,o=e+"-"+t,l=r[o],c=a.enableOptionSharing&&(0,n.h)(i);if(l)return S(l,c);const d=a.chart.config,u=d.datasetElementScopeKeys(a._type,e),p=s?[`${e}Hover`,"hover",e,""]:[e,""],h=d.getOptionScopes(a.getDataset(),u),g=Object.keys(n.d.elements[e]),m=d.resolveNamedOptions(h,g,(()=>a.getContext(i,s)),p);return m.$shared&&(m.$shared=c,r[o]=Object.freeze(S(m,c))),m}_resolveAnimations(e,t,i){const n=this,a=n.chart,s=n._cachedDataOpts,r=`animation-${t}`,o=s[r];if(o)return o;let l;if(!1!==a.options.animation){const a=n.chart.config,s=a.datasetAnimationScopeKeys(n._type,t),r=a.getOptionScopes(n.getDataset(),s);l=a.createResolver(r,n.getContext(e,i,t))}const c=new d(a,l&&l.animations);return l&&l._cacheable&&(s[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||_(e)||this.chart._animationsDisabled}updateElement(e,t,i,n){_(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!_(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this,i=t._data,n=t._cachedMeta.data;for(const[e,i,n]of t._syncList)t[e](i,n);t._syncList=[];const a=n.length,s=i.length,r=Math.min(s,a);s>a?t._insertElements(a,s-a,e):s<a&&t._removeElements(s,a-s),r&&t.parse(0,r)}_insertElements(e,t,i=!0){const n=this,a=n._cachedMeta,s=a.data,r=e+t;let o;const l=e=>{for(e.length+=t,o=e.length-1;o>=r;o--)e[o]=e[o-t]};for(l(s),o=e;o<r;++o)s[o]=new n.dataElementType;n._parsing&&l(a._parsed),n.parse(e,t),i&&n.updateElements(s,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&v(i,n)}i.data.splice(e,t)}_onDataPush(){const e=arguments.length;this._syncList.push(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._syncList.push(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._syncList.push(["_removeElements",0,1])}_onDataSplice(e,t){this._syncList.push(["_removeElements",e,t]),this._syncList.push(["_insertElements",e,arguments.length-2])}_onDataUnshift(){this._syncList.push(["_insertElements",0,arguments.length])}}function w(e){const t=function(e){if(!e._cache.$bar){const t=e.getMatchingVisibleMetas("bar");let i=[];for(let n=0,a=t.length;n<a;n++)i=i.concat(t[n].controller.getAllParsedValues(e));e._cache.$bar=(0,n._)(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(e);let i,a,s,r,o=e._length;const l=()=>{32767!==s&&-32768!==s&&((0,n.h)(r)&&(o=Math.min(o,Math.abs(s-r)||o)),r=s)};for(i=0,a=t.length;i<a;++i)s=e.getPixelForValue(t[i]),l();for(r=void 0,i=0,a=e.ticks.length;i<a;++i)s=e.getPixelForTick(i),l();return o}function E(e,t,i,a){return(0,n.b)(e)?function(e,t,i,n){const a=i.parse(e[0],n),s=i.parse(e[1],n),r=Math.min(a,s),o=Math.max(a,s);let l=r,c=o;Math.abs(r)>Math.abs(o)&&(l=o,c=r),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:s,min:r,max:o}}(e,t,i,a):t[i.axis]=i.parse(e,a),t}function x(e,t,i,n){const a=e.iScale,s=e.vScale,r=a.getLabels(),o=a===s,l=[];let c,d,u,p;for(c=i,d=i+n;c<d;++c)p=t[c],u={},u[a.axis]=o||a.parse(r[c],c),l.push(E(p,u,s,c));return l}function A(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}I.defaults={},I.prototype.datasetElementType=null,I.prototype.dataElementType=null;class P extends I{parsePrimitiveData(e,t,i,n){return x(e,t,i,n)}parseArrayData(e,t,i,n){return x(e,t,i,n)}parseObjectData(e,t,i,a){const{iScale:s,vScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c="x"===s.axis?o:l,d="x"===r.axis?o:l,u=[];let p,h,g,m;for(p=i,h=i+a;p<h;++p)m=t[p],g={},g[s.axis]=s.parse((0,n.f)(m,c),p),u.push(E((0,n.f)(m,d),g,r,p));return u}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,a=this.getParsed(e),s=a._custom,r=A(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:r}}initialize(){const e=this;e.enableOptionSharing=!0,super.initialize();e._cachedMeta.stack=e.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,a){const s=this,r="reset"===a,o=s._cachedMeta.vScale,l=o.getBasePixel(),c=o.isHorizontal(),d=s._getRuler(),u=s.resolveDataElementOptions(t,a),p=s.getSharedOptions(u),h=s.includeOptions(a,p);s.updateSharedOptions(p,a,u);for(let u=t;u<t+i;u++){const t=s.getParsed(u),i=r||(0,n.j)(t[o.axis])?{base:l,head:l}:s._calculateBarValuePixels(u),g=s._calculateBarIndexPixels(u,d),m=(t._stacks||{})[o.axis],f={horizontal:c,base:i.base,enableBorderRadius:!m||A(t._custom)||s.index===m._top||s.index===m._bottom,x:c?i.head:g.center,y:c?g.center:i.head,height:c?g.size:void 0,width:c?void 0:g.size};h&&(f.options=p||s.resolveDataElementOptions(u,a)),s.updateElement(e[u],u,f,a)}}_getStacks(e,t){const i=this._cachedMeta.iScale,a=i.getMatchingVisibleMetas(this._type),s=i.options.stacked,r=a.length,o=[];let l,c;for(l=0;l<r;++l){if(c=a[l],void 0!==t){const e=c.controller.getParsed(t)[c.controller._cachedMeta.vScale.axis];if((0,n.j)(e)||isNaN(e))continue}if((!1===s||-1===o.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&o.push(c.stack),c.index===e)break}return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const n=this._getStacks(e,i),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}_getRuler(){const e=this,t=e.options,i=e._cachedMeta,n=i.iScale,a=[];let s,r;for(s=0,r=i.data.length;s<r;++s)a.push(n.getPixelForValue(e.getParsed(s)[n.axis],s));const o=t.barThickness;return{min:o||w(n),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:e._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(e){const t=this,{vScale:i,_stacked:a}=t._cachedMeta,{base:s,minBarLength:r}=t.options,o=t.getParsed(e),l=o._custom,c=A(l);let d,u,p=o[i.axis],h=0,g=a?t.applyStack(i,o,a):p;g!==p&&(h=g-p,g=p),c&&(p=l.barStart,g=l.barEnd-l.barStart,0!==p&&(0,n.s)(p)!==(0,n.s)(l.barEnd)&&(h=0),h+=p);const m=(0,n.j)(s)||c?h:s;let f=i.getPixelForValue(m);d=this.chart.getDataVisibility(e)?i.getPixelForValue(h+g):f,u=d-f,void 0!==r&&Math.abs(u)<r&&(u=u<0?-r:r,0===p&&(f-=u/2),d=f+u);const b=s||0;if(f===i.getPixelForValue(b)){const e=i.getLineWidthForValue(b)/2;u>0?(f+=e,u-=e):u<0&&(f-=e,u+=e)}return{size:u,base:f,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const i=this,a=t.scale,s=i.options,r=s.skipNull,o=(0,n.v)(s.maxBarThickness,1/0);let l,c;if(t.grouped){const a=r?i._getStackCount(e):t.stackCount,d="flex"===s.barThickness?function(e,t,i,n){const a=t.pixels,s=a[e];let r=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null;const l=i.categoryPercentage;null===r&&(r=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-r);const c=s-(s-Math.min(r,o))/2*l;return{chunk:Math.abs(o-r)/2*l/n,ratio:i.barPercentage,start:c}}(e,t,s,a):function(e,t,i,a){const s=i.barThickness;let r,o;return(0,n.j)(s)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=s*a,o=1),{chunk:r/a,ratio:o,start:t.pixels[e]-r/2}}(e,t,s,a),u=i._getStackIndex(i.index,i._cachedMeta.stack,r?e:void 0);l=d.start+d.chunk*u+d.chunk/2,c=Math.min(o,d.chunk*d.ratio)}else l=a.getPixelForValue(i.getParsed(e)[a.axis],e),c=Math.min(o,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this,t=e.chart,i=e._cachedMeta,a=i.vScale,s=i.data,r=s.length;let o=0;for((0,n.k)(t.ctx,t.chartArea);o<r;++o)null!==e.getParsed(o)[a.axis]&&s[o].draw(e._ctx);(0,n.m)(t.ctx)}}P.id="bar",P.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},P.overrides={interaction:{mode:"index"},scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class T extends I{initialize(){this.enableOptionSharing=!0,super.initialize()}parseObjectData(e,t,i,a){const{xScale:s,yScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=[];let d,u,p;for(d=i,u=i+a;d<u;++d)p=t[d],c.push({x:s.parse((0,n.f)(p,o),d),y:r.parse((0,n.f)(p,l),d),_custom:p&&p.r&&+p.r});return c}getMaxOverflow(){const{data:e,_parsed:t}=this._cachedMeta;let i=0;for(let n=e.length-1;n>=0;--n)i=Math.max(i,e[n].size()/2,t[n]._custom);return i>0&&i}getLabelAndValue(e){const t=this._cachedMeta,{xScale:i,yScale:n}=t,a=this.getParsed(e),s=i.getLabelForValue(a.x),r=n.getLabelForValue(a.y),o=a._custom;return{label:t.label,value:"("+s+", "+r+(o?", "+o:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const a=this,s="reset"===n,{iScale:r,vScale:o}=a._cachedMeta,l=a.resolveDataElementOptions(t,n),c=a.getSharedOptions(l),d=a.includeOptions(n,c),u=r.axis,p=o.axis;for(let l=t;l<t+i;l++){const t=e[l],i=!s&&a.getParsed(l),c={},h=c[u]=s?r.getPixelForDecimal(.5):r.getPixelForValue(i[u]),g=c[p]=s?o.getBasePixel():o.getPixelForValue(i[p]);c.skip=isNaN(h)||isNaN(g),d&&(c.options=a.resolveDataElementOptions(l,n),s&&(c.options.radius=0)),a.updateElement(t,l,c,n)}a.updateSharedOptions(c,n,l)}resolveDataElementOptions(e,t){const i=this.getParsed(e);let a=super.resolveDataElementOptions(e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const s=a.radius;return"active"!==t&&(a.radius=0),a.radius+=(0,n.v)(i&&i._custom,s),a}}T.id="bubble",T.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},T.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class C extends I{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;let a,s;for(a=e,s=e+t;a<s;++a)n._parsed[a]=+i[a]}_getRotation(){return(0,n.t)(this.options.rotation-90)}_getCircumference(){return(0,n.t)(this.options.circumference)}_getRotationExtents(){let e=n.T,t=-n.T;const i=this;for(let n=0;n<i.chart.data.datasets.length;++n)if(i.chart.isDatasetVisible(n)){const a=i.chart.getDatasetMeta(n).controller,s=a._getRotation(),r=a._getCircumference();e=Math.min(e,s),t=Math.max(t,s+r)}return{rotation:e,circumference:t-e}}update(e){const t=this,i=t.chart,{chartArea:a}=i,s=t._cachedMeta,r=s.data,o=t.getMaxBorderWidth()+t.getMaxOffset(r),l=Math.max((Math.min(a.width,a.height)-o)/2,0),c=Math.min((0,n.n)(t.options.cutout,l),1),d=t._getRingWeight(t.index),{circumference:u,rotation:p}=t._getRotationExtents(),{ratioX:h,ratioY:g,offsetX:m,offsetY:f}=function(e,t,i){let a=1,s=1,r=0,o=0;if(t<n.T){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),p=Math.cos(c),h=Math.sin(c),g=(e,t,a)=>(0,n.q)(e,l,c,!0)?1:Math.max(t,t*i,a,a*i),m=(e,t,a)=>(0,n.q)(e,l,c,!0)?-1:Math.min(t,t*i,a,a*i),f=g(0,d,p),b=g(n.H,u,h),y=m(n.P,d,p),v=m(n.P+n.H,u,h);a=(f-y)/2,s=(b-v)/2,r=-(f+y)/2,o=-(b+v)/2}return{ratioX:a,ratioY:s,offsetX:r,offsetY:o}}(p,u,c),b=(a.width-o)/h,y=(a.height-o)/g,v=Math.max(Math.min(b,y)/2,0),_=(0,n.o)(t.options.radius,v),S=(_-Math.max(_*c,0))/t._getVisibleDatasetWeightTotal();t.offsetX=m*_,t.offsetY=f*_,s.total=t.calculateTotal(),t.outerRadius=_-S*t._getRingWeightOffset(t.index),t.innerRadius=Math.max(t.outerRadius-S*d,0),t.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this,a=i.options,s=i._cachedMeta,r=i._getCircumference();return t&&a.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]?0:i.calculateCircumference(s._parsed[e]*r/n.T)}updateElements(e,t,i,n){const a=this,s="reset"===n,r=a.chart,o=r.chartArea,l=r.options.animation,c=(o.left+o.right)/2,d=(o.top+o.bottom)/2,u=s&&l.animateScale,p=u?0:a.innerRadius,h=u?0:a.outerRadius,g=a.resolveDataElementOptions(t,n),m=a.getSharedOptions(g),f=a.includeOptions(n,m);let b,y=a._getRotation();for(b=0;b<t;++b)y+=a._circumference(b,s);for(b=t;b<t+i;++b){const t=a._circumference(b,s),i=e[b],r={x:c+a.offsetX,y:d+a.offsetY,startAngle:y,endAngle:y+t,circumference:t,outerRadius:h,innerRadius:p};f&&(r.options=m||a.resolveDataElementOptions(b,n)),y+=t,a.updateElement(i,b,r,n)}a.updateSharedOptions(m,n,g)}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,n=0;for(i=0;i<t.length;i++){const t=e._parsed[i];null!==t&&!isNaN(t)&&this.chart.getDataVisibility(i)&&(n+=Math.abs(t))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?n.T*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,a=i.data.labels||[],s=(0,n.p)(t._parsed[e],i.options.locale);return{label:a[e]||"",value:s}}getMaxBorderWidth(e){const t=this;let i=0;const n=t.chart;let a,s,r,o,l;if(!e)for(a=0,s=n.data.datasets.length;a<s;++a)if(n.isDatasetVisible(a)){r=n.getDatasetMeta(a),e=r.data,o=r.controller,o!==t&&o.configure();break}if(!e)return 0;for(a=0,s=e.length;a<s;++a)l=o.resolveDataElementOptions(a),"inner"!==l.borderAlign&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max((0,n.v)(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}C.id="doughnut",C.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",indexAxis:"r"},C.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(((t,i)=>{const n=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:!e.getDataVisibility(i),index:i}})):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const i=": "+e.formattedValue;return(0,n.b)(t)?(t=t.slice(),t[0]+=i):t+=i,t}}}}};class D extends I{initialize(){this.enableOptionSharing=!0,super.initialize()}update(e){const t=this,i=t._cachedMeta,{dataset:a,data:s=[],_dataset:r}=i,o=t.chart._animationsDisabled;let{start:l,count:c}=function(e,t,i){const a=t.length;let s=0,r=a;if(e._sorted){const{iScale:o,_parsed:l}=e,c=o.axis,{min:d,max:u,minDefined:p,maxDefined:h}=o.getUserBounds();p&&(s=(0,n.x)(Math.min((0,n.y)(l,o.axis,d).lo,i?a:(0,n.y)(t,c,o.getPixelForValue(d)).lo),0,a-1)),r=h?(0,n.x)(Math.max((0,n.y)(l,o.axis,u).hi+1,i?0:(0,n.y)(t,c,o.getPixelForValue(u)).hi+1),s,a)-s:a-s}return{start:s,count:r}}(i,s,o);t._drawStart=l,t._drawCount=c,function(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=a,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,a),s}(i)&&(l=0,c=s.length),a._decimated=!!r._decimated,a.points=s;const d=t.resolveDatasetElementOptions(e);t.options.showLine||(d.borderWidth=0),d.segment=t.options.segment,t.updateElement(a,void 0,{animated:!o,options:d},e),t.updateElements(s,l,c,e)}updateElements(e,t,i,a){const s=this,r="reset"===a,{iScale:o,vScale:l,_stacked:c}=s._cachedMeta,d=s.resolveDataElementOptions(t,a),u=s.getSharedOptions(d),p=s.includeOptions(a,u),h=o.axis,g=l.axis,m=s.options.spanGaps,f=(0,n.w)(m)?m:Number.POSITIVE_INFINITY,b=s.chart._animationsDisabled||r||"none"===a;let y=t>0&&s.getParsed(t-1);for(let d=t;d<t+i;++d){const t=e[d],i=s.getParsed(d),m=b?t:{},v=(0,n.j)(i[g]),_=m[h]=o.getPixelForValue(i[h],d),S=m[g]=r||v?l.getBasePixel():l.getPixelForValue(c?s.applyStack(l,i,c):i[g],d);m.skip=isNaN(_)||isNaN(S)||v,m.stop=d>0&&i[h]-y[h]>f,m.parsed=i,p&&(m.options=u||s.resolveDataElementOptions(d,a)),b||s.updateElement(t,d,m,a),y=i}s.updateSharedOptions(u,a,d)}getMaxOverflow(){const e=this,t=e._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,a=t.data||[];if(!a.length)return n;const s=a[0].size(e.resolveDataElementOptions(0)),r=a[a.length-1].size(e.resolveDataElementOptions(a.length-1));return Math.max(n,s,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}D.id="line",D.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},D.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class j extends I{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,a=i.data.labels||[],s=(0,n.p)(t._parsed[e].r,i.options.locale);return{label:a[e]||"",value:s}}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}_updateRadius(){const e=this,t=e.chart,i=t.chartArea,n=t.options,a=Math.min(i.right-i.left,i.bottom-i.top),s=Math.max(a/2,0),r=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();e.outerRadius=s-r*e.index,e.innerRadius=e.outerRadius-r}updateElements(e,t,i,a){const s=this,r="reset"===a,o=s.chart,l=s.getDataset(),c=o.options.animation,d=s._cachedMeta.rScale,u=d.xCenter,p=d.yCenter,h=d.getIndexAngle(0)-.5*n.P;let g,m=h;const f=360/s.countVisibleElements();for(g=0;g<t;++g)m+=s._computeAngle(g,a,f);for(g=t;g<t+i;g++){const t=e[g];let i=m,n=m+s._computeAngle(g,a,f),b=o.getDataVisibility(g)?d.getDistanceFromCenterForValue(l.data[g]):0;m=n,r&&(c.animateScale&&(b=0),c.animateRotate&&(i=n=h));const y={x:u,y:p,innerRadius:0,outerRadius:b,startAngle:i,endAngle:n,options:s.resolveDataElementOptions(g,a)};s.updateElement(t,g,y,a)}}countVisibleElements(){const e=this.getDataset(),t=this._cachedMeta;let i=0;return t.data.forEach(((t,n)=>{!isNaN(e.data[n])&&this.chart.getDataVisibility(n)&&i++})),i}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?(0,n.t)(this.resolveDataElementOptions(e,t).angle||i):0}}j.id="polarArea",j.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},j.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(((t,i)=>{const n=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:!e.getDataVisibility(i),index:i}})):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class O extends C{}O.id="pie",O.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class R extends I{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}update(e){const t=this,i=t._cachedMeta,n=i.dataset,a=i.data||[],s=i.iScale.getLabels();if(n.points=a,"resize"!==e){const i=t.resolveDatasetElementOptions(e);t.options.showLine||(i.borderWidth=0);const r={_loop:!0,_fullLoop:s.length===a.length,options:i};t.updateElement(n,void 0,r,e)}t.updateElements(a,0,a.length,e)}updateElements(e,t,i,n){const a=this,s=a.getDataset(),r=a._cachedMeta.rScale,o="reset"===n;for(let l=t;l<t+i;l++){const t=e[l],i=a.resolveDataElementOptions(l,n),c=r.getPointPositionForValue(l,s.data[l]),d=o?r.xCenter:c.x,u=o?r.yCenter:c.y,p={x:d,y:u,angle:c.angle,skip:isNaN(d)||isNaN(u),options:i};a.updateElement(t,l,p,n)}}}R.id="radar",R.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},R.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class k extends D{}k.id="scatter",k.defaults={showLine:!1,fill:!1},k.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var M=Object.freeze({__proto__:null,BarController:P,BubbleController:T,DoughnutController:C,LineController:D,PolarAreaController:j,PieController:O,RadarController:R,ScatterController:k});function L(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class N{constructor(e){this.options=e||{}}formats(){return L()}parse(e,t){return L()}format(e,t){return L()}add(e,t,i){return L()}diff(e,t,i){return L()}startOf(e,t,i){return L()}endOf(e,t){return L()}}N.override=function(e){Object.assign(N.prototype,e)};var z={_date:N};function F(e,t){return"native"in e?{x:e.x,y:e.y}:(0,n.z)(e,t)}function V(e,t,i,a){const{controller:s,data:r,_sorted:o}=e,l=s._cachedMeta.iScale;if(l&&t===l.axis&&o&&r.length){const e=l._reversePixels?n.B:n.y;if(!a)return e(r,t,i);if(s._sharedOptions){const n=r[0],a="function"==typeof n.getRange&&n.getRange(t);if(a){const n=e(r,t,i-a),s=e(r,t,i+a);return{lo:n.lo,hi:s.hi}}}}return{lo:0,hi:r.length-1}}function B(e,t,i,n,a){const s=e.getSortedVisibleDatasetMetas(),r=i[t];for(let e=0,i=s.length;e<i;++e){const{index:i,data:o}=s[e],{lo:l,hi:c}=V(s[e],t,r,a);for(let e=l;e<=c;++e){const t=o[e];t.skip||n(t,i,e)}}}function W(e,t,i,a){const s=[];if(!(0,n.A)(t,e.chartArea,e._minPadding))return s;return B(e,i,t,(function(e,i,n){e.inRange(t.x,t.y,a)&&s.push({element:e,datasetIndex:i,index:n})}),!0),s}function H(e,t,i,a,s){const r=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){const a=t?Math.abs(e.x-n.x):0,s=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}(i);let o=Number.POSITIVE_INFINITY,l=[];if(!(0,n.A)(t,e.chartArea,e._minPadding))return l;return B(e,i,t,(function(e,i,n){if(a&&!e.inRange(t.x,t.y,s))return;const c=e.getCenterPoint(s),d=r(t,c);d<o?(l=[{element:e,datasetIndex:i,index:n}],o=d):d===o&&l.push({element:e,datasetIndex:i,index:n})})),l}function G(e,t,i,n){const a=F(t,e),s=[],r=i.axis,o="x"===r?"inXRange":"inYRange";let l=!1;return function(e,t){const i=e.getSortedVisibleDatasetMetas();let n,a,s;for(let e=0,r=i.length;e<r;++e){({index:n,data:a}=i[e]);for(let e=0,i=a.length;e<i;++e)s=a[e],s.skip||t(s,n,e)}}(e,((e,t,i)=>{e[o](a[r],n)&&s.push({element:e,datasetIndex:t,index:i}),e.inRange(a.x,a.y,n)&&(l=!0)})),i.intersect&&!l?[]:s}var U={modes:{index(e,t,i,n){const a=F(t,e),s=i.axis||"x",r=i.intersect?W(e,a,s,n):H(e,a,s,!1,n),o=[];return r.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=r[0].index,i=e.data[t];i&&!i.skip&&o.push({element:i,datasetIndex:e.index,index:t})})),o):[]},dataset(e,t,i,n){const a=F(t,e),s=i.axis||"xy";let r=i.intersect?W(e,a,s,n):H(e,a,s,!1,n);if(r.length>0){const t=r[0].datasetIndex,i=e.getDatasetMeta(t).data;r=[];for(let e=0;e<i.length;++e)r.push({element:i[e],datasetIndex:t,index:e})}return r},point:(e,t,i,n)=>W(e,F(t,e),i.axis||"xy",n),nearest:(e,t,i,n)=>H(e,F(t,e),i.axis||"xy",i.intersect,n),x:(e,t,i,n)=>(i.axis="x",G(e,t,i,n)),y:(e,t,i,n)=>(i.axis="y",G(e,t,i,n))}};const Y=["left","top","right","bottom"];function $(e,t){return e.filter((e=>e.pos===t))}function q(e,t){return e.filter((e=>-1===Y.indexOf(e.pos)&&e.box.axis===t))}function K(e,t){return e.sort(((e,i)=>{const n=t?i:e,a=t?e:i;return n.weight===a.weight?n.index-a.index:n.weight-a.weight}))}function X(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function J(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Q(e,t,i){const a=i.box,s=e.maxPadding;(0,n.i)(i.pos)||(i.size&&(e[i.pos]-=i.size),i.size=i.horizontal?a.height:a.width,e[i.pos]+=i.size),a.getPadding&&J(s,a.getPadding());const r=Math.max(0,t.outerWidth-X(s,e,"left","right")),o=Math.max(0,t.outerHeight-X(s,e,"top","bottom")),l=r!==e.w,c=o!==e.h;return e.w=r,e.h=o,i.horizontal?{same:l,other:c}:{same:c,other:l}}function Z(e,t){const i=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(t[e],i[e])})),n}return n(e?["left","right"]:["top","bottom"])}function ee(e,t,i){const n=[];let a,s,r,o,l,c;for(a=0,s=e.length,l=0;a<s;++a){r=e[a],o=r.box,o.update(r.width||t.w,r.height||t.h,Z(r.horizontal,t));const{same:s,other:d}=Q(t,i,r);l|=s&&n.length,c=c||d,o.fullSize||n.push(r)}return l&&ee(n,t,i)||c}function te(e,t,i){const n=i.padding;let a,s,r,o,l=t.x,c=t.y;for(a=0,s=e.length;a<s;++a)r=e[a],o=r.box,r.horizontal?(o.left=o.fullSize?n.left:t.left,o.right=o.fullSize?i.outerWidth-n.right:t.left+t.w,o.top=c,o.bottom=c+o.height,o.width=o.right-o.left,c=o.bottom):(o.left=l,o.right=l+o.width,o.top=o.fullSize?n.top:t.top,o.bottom=o.fullSize?i.outerHeight-n.right:t.top+t.h,o.height=o.bottom-o.top,l=o.right);t.x=l,t.y=c}n.d.set("layout",{padding:{top:0,right:0,bottom:0,left:0}});var ie={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,a){if(!e)return;const s=(0,n.C)(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(i-s.height,0),l=function(e){const t=function(e){const t=[];let i,n,a;for(i=0,n=(e||[]).length;i<n;++i)a=e[i],t.push({index:i,box:a,pos:a.position,horizontal:a.isHorizontal(),weight:a.weight});return t}(e),i=K(t.filter((e=>e.box.fullSize)),!0),n=K($(t,"left"),!0),a=K($(t,"right")),s=K($(t,"top"),!0),r=K($(t,"bottom")),o=q(t,"x"),l=q(t,"y");return{fullSize:i,leftAndTop:n.concat(s),rightAndBottom:a.concat(l).concat(r).concat(o),chartArea:$(t,"chartArea"),vertical:n.concat(a).concat(l),horizontal:s.concat(r).concat(o)}}(e.boxes),c=l.vertical,d=l.horizontal;(0,n.D)(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const u=c.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,p=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);J(h,(0,n.C)(a));const g=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s);!function(e,t){let i,n,a;for(i=0,n=e.length;i<n;++i)a=e[i],a.horizontal?(a.width=a.box.fullSize&&t.availableWidth,a.height=t.hBoxMaxHeight):(a.width=t.vBoxMaxWidth,a.height=a.box.fullSize&&t.availableHeight)}(c.concat(d),p),ee(l.fullSize,g,p),ee(c,g,p),ee(d,g,p)&&ee(c,g,p),function(e){const t=e.maxPadding;function i(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(g),te(l.leftAndTop,g,p),g.x+=g.w,g.y+=g.h,te(l.rightAndBottom,g,p),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},(0,n.D)(l.chartArea,(t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(g.w,g.h)}))}};class ne{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}}class ae extends ne{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}}const se={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},re=e=>null===e||""===e;const oe=!!n.J&&{passive:!0};function le(e,t,i){e.canvas.removeEventListener(t,i,oe)}function ce(e,t,i){const a=e.canvas,s=a&&(0,n.F)(a)||a,r=new MutationObserver((e=>{const t=(0,n.F)(s);e.forEach((e=>{for(let n=0;n<e.addedNodes.length;n++){const a=e.addedNodes[n];a!==s&&a!==t||i(e.target)}}))}));return r.observe(document,{childList:!0,subtree:!0}),r}function de(e,t,i){const a=e.canvas,s=a&&(0,n.F)(a);if(!s)return;const r=new MutationObserver((e=>{e.forEach((e=>{for(let t=0;t<e.removedNodes.length;t++)if(e.removedNodes[t]===a){i();break}}))}));return r.observe(s,{childList:!0}),r}const ue=new Map;let pe=0;function he(){const e=window.devicePixelRatio;e!==pe&&(pe=e,ue.forEach(((t,i)=>{i.currentDevicePixelRatio!==e&&t()})))}function ge(e,t,i){const a=e.canvas,s=a&&(0,n.F)(a);if(!s)return;const r=(0,n.I)(((e,t)=>{const n=s.clientWidth;i(e,t),n<s.clientWidth&&i()}),window),o=new ResizeObserver((e=>{const t=e[0],i=t.contentRect.width,n=t.contentRect.height;0===i&&0===n||r(i,n)}));return o.observe(s),function(e,t){ue.size||window.addEventListener("resize",he),ue.set(e,t)}(e,r),o}function me(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){ue.delete(e),ue.size||window.removeEventListener("resize",he)}(e)}function fe(e,t,i){const a=e.canvas,s=(0,n.I)((t=>{null!==e.ctx&&i(function(e,t){const i=se[e.type]||e.type,{x:a,y:s}=(0,n.z)(e,t);return{type:i,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==s?s:null}}(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,i){e.addEventListener(t,i,oe)}(a,t,s),s}class be extends ne{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,a=e.getAttribute("height"),s=e.getAttribute("width");if(e.$chartjs={initial:{height:a,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",re(s)){const t=(0,n.G)(e,"width");void 0!==t&&(e.width=t)}if(re(a))if(""===e.style.height)e.height=e.width/(t||2);else{const t=(0,n.G)(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t.$chartjs)return!1;const i=t.$chartjs.initial;["height","width"].forEach((e=>{const a=i[e];(0,n.j)(a)?t.removeAttribute(e):t.setAttribute(e,a)}));const a=i.style||{};return Object.keys(a).forEach((e=>{t.style[e]=a[e]})),t.width=t.width,delete t.$chartjs,!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),a={attach:ce,detach:de,resize:ge}[t]||fe;n[t]=a(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:me,detach:me,resize:me}[t]||le)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,a){return(0,n.E)(e,t,i,a)}isAttached(e){const t=(0,n.F)(e);return!(!t||!(0,n.F)(t))}}class ye{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return(0,n.w)(this.x)&&(0,n.w)(this.y)}getProps(e,t){const i=this,n=this.$animations;if(!t||!n)return i;const a={};return e.forEach((e=>{a[e]=n[e]&&n[e].active()?n[e]._to:i[e]})),a}}ye.defaults={},ye.defaultRoutes=void 0;const ve={values:e=>(0,n.b)(e)?e:""+e,numeric(e,t,i){if(0===e)return"0";const a=this.chart.options.locale;let s,r=e;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),r=function(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e));return i}(e,i)}const o=(0,n.K)(Math.abs(r)),l=Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),(0,n.p)(e,a,c)},logarithmic(e,t,i){if(0===e)return"0";const a=e/Math.pow(10,Math.floor((0,n.K)(e)));return 1===a||2===a||5===a?ve.numeric.call(this,e,t,i):""}};var _e={formatters:ve};function Se(e,t){const i=e.options.ticks,a=i.maxTicksLimit||function(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),a=e._maxLength/i;return Math.floor(Math.min(n,a))}(e),s=i.major.enabled?function(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}(t):[],r=s.length,o=s[0],l=s[r-1],c=[];if(r>a)return function(e,t,i,n){let a,s=0,r=i[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===r&&(t.push(e[a]),s++,r=i[s*n])}(t,c,s,r/a),c;const d=function(e,t,i){const a=function(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}(e),s=t.length/i;if(!a)return Math.max(s,1);const r=(0,n.L)(a);for(let e=0,t=r.length-1;e<t;e++){const t=r[e];if(t>s)return t}return Math.max(s,1)}(s,t,a);if(r>0){let e,i;const a=r>1?Math.round((l-o)/(r-1)):null;for(Ie(t,c,d,(0,n.j)(a)?0:o-a,o),e=0,i=r-1;e<i;e++)Ie(t,c,d,s[e],s[e+1]);return Ie(t,c,d,l,(0,n.j)(a)?t.length:l+a),c}return Ie(t,c,d),c}function Ie(e,t,i,a,s){const r=(0,n.v)(a,0),o=Math.min((0,n.v)(s,e.length),e.length);let l,c,d,u=0;for(i=Math.ceil(i),s&&(l=s-a,i=l/Math.floor(l/i)),d=r;d<0;)u++,d=Math.round(r+u*i);for(c=Math.max(r,0);c<o;c++)c===d&&(t.push(e[c]),u++,d=Math.round(r+u*i))}n.d.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_e.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.d.route("scale.ticks","color","","color"),n.d.route("scale.grid","color","","borderColor"),n.d.route("scale.grid","borderColor","","borderColor"),n.d.route("scale.title","color","","color"),n.d.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),n.d.describe("scales",{_fallback:"scale"});const we=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i;function Ee(e,t){const i=[],n=e.length/t,a=e.length;let s=0;for(;s<a;s+=n)i.push(e[Math.floor(s)]);return i}function xe(e,t,i){const n=e.ticks.length,a=Math.min(t,n-1),s=e._startPixel,r=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(a);if(!(i&&(l=1===n?Math.max(c-s,r-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?l:-l,c<s-o||c>r+o)))return c}function Ae(e){return e.drawTicks?e.tickLength:0}function Pe(e,t){if(!e.display)return 0;const i=(0,n.W)(e.font,t),a=(0,n.C)(e.padding);return((0,n.b)(e.text)?e.text.length:1)*i.lineHeight+a.height}function Te(e,t,i){let a=(0,n.X)(e);return(i&&"right"!==t||!i&&"right"===t)&&(a=(e=>"left"===e?"right":"right"===e?"left":e)(a)),a}class Ce extends ye{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){const t=this;t.options=e.setContext(t.getContext()),t.axis=e.axis,t._userMin=t.parse(e.min),t._userMax=t.parse(e.max),t._suggestedMin=t.parse(e.suggestedMin),t._suggestedMax=t.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:a}=this;return e=(0,n.M)(e,Number.POSITIVE_INFINITY),t=(0,n.M)(t,Number.NEGATIVE_INFINITY),i=(0,n.M)(i,Number.POSITIVE_INFINITY),a=(0,n.M)(a,Number.NEGATIVE_INFINITY),{min:(0,n.M)(e,i),max:(0,n.M)(t,a),minDefined:(0,n.g)(e),maxDefined:(0,n.g)(t)}}getMinMax(e){const t=this;let i,{min:a,max:s,minDefined:r,maxDefined:o}=t.getUserBounds();if(r&&o)return{min:a,max:s};const l=t.getMatchingVisibleMetas();for(let n=0,c=l.length;n<c;++n)i=l[n].controller.getMinMax(t,e),r||(a=Math.min(a,i.min)),o||(s=Math.max(s,i.max));return{min:(0,n.M)(a,(0,n.M)(s,a)),max:(0,n.M)(s,(0,n.M)(a,s))}}getPadding(){const e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,n.N)(this.options.beforeUpdate,[this])}update(e,t,i){const a=this,s=a.options.ticks,r=s.sampleSize;a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),a.ticks=null,a._labelSizes=null,a._gridLineItems=null,a._labelItems=null,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a._maxLength=a.isHorizontal()?a.width+i.left+i.right:a.height+i.top+i.bottom,a._dataLimitsCached||(a.beforeDataLimits(),a.determineDataLimits(),a.afterDataLimits(),a._range=(0,n.O)(a,a.options.grace),a._dataLimitsCached=!0),a.beforeBuildTicks(),a.ticks=a.buildTicks()||[],a.afterBuildTicks();const o=r<a.ticks.length;a._convertTicksToLabels(o?Ee(a.ticks,r):a.ticks),a.configure(),a.beforeCalculateLabelRotation(),a.calculateLabelRotation(),a.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(a.ticks=Se(a,a.ticks),a._labelSizes=null),o&&a._convertTicksToLabels(a.ticks),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate()}configure(){const e=this;let t,i,n=e.options.reverse;e.isHorizontal()?(t=e.left,i=e.right):(t=e.top,i=e.bottom,n=!n),e._startPixel=t,e._endPixel=i,e._reversePixels=n,e._length=i-t,e._alignToPixels=e.options.alignToPixels}afterUpdate(){(0,n.N)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,n.N)(this.options.beforeSetDimensions,[this])}setDimensions(){const e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0}afterSetDimensions(){(0,n.N)(this.options.afterSetDimensions,[this])}_callHooks(e){const t=this;t.chart.notifyPlugins(e,t.getContext()),(0,n.N)(t.options[e],[t])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,n.N)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this,i=t.options.ticks;let a,s,r;for(a=0,s=e.length;a<s;a++)r=e[a],r.label=(0,n.N)(i.callback,[r.value,a,e],t);for(a=0;a<s;a++)(0,n.j)(e[a].label)&&(e.splice(a,1),s--,a--)}afterTickToLabelConversion(){(0,n.N)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,n.N)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this,t=e.options,i=t.ticks,a=e.ticks.length,s=i.minRotation||0,r=i.maxRotation;let o,l,c,d=s;if(!e._isVisible()||!i.display||s>=r||a<=1||!e.isHorizontal())return void(e.labelRotation=s);const u=e._getLabelSizes(),p=u.widest.width,h=u.highest.height,g=(0,n.x)(e.chart.width-p,0,e.maxWidth);o=t.offset?e.maxWidth/a:g/(a-1),p+6>o&&(o=g/(a-(t.offset?.5:1)),l=e.maxHeight-Ae(t.grid)-i.padding-Pe(t.title,e.chart.options.font),c=Math.sqrt(p*p+h*h),d=(0,n.Q)(Math.min(Math.asin(Math.min((u.highest.height+6)/o,1)),Math.asin(Math.min(l/c,1))-Math.asin(h/c))),d=Math.max(s,Math.min(r,d))),e.labelRotation=d}afterCalculateLabelRotation(){(0,n.N)(this.options.afterCalculateLabelRotation,[this])}beforeFit(){(0,n.N)(this.options.beforeFit,[this])}fit(){const e=this,t={width:0,height:0},{chart:i,options:{ticks:a,title:s,grid:r}}=e,o=e._isVisible(),l=e.isHorizontal();if(o){const o=Pe(s,i.options.font);if(l?(t.width=e.maxWidth,t.height=Ae(r)+o):(t.height=e.maxHeight,t.width=Ae(r)+o),a.display&&e.ticks.length){const{first:i,last:s,widest:r,highest:o}=e._getLabelSizes(),c=2*a.padding,d=(0,n.t)(e.labelRotation),u=Math.cos(d),p=Math.sin(d);if(l){const i=a.mirror?0:p*r.width+u*o.height;t.height=Math.min(e.maxHeight,t.height+i+c)}else{const i=a.mirror?0:u*r.width+p*o.height;t.width=Math.min(e.maxWidth,t.width+i+c)}e._calculatePadding(i,s,p,u)}}e._handleMargins(),l?(e.width=e._length=i.width-e._margins.left-e._margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=i.height-e._margins.top-e._margins.bottom)}_calculatePadding(e,t,i,n){const a=this,{ticks:{align:s,padding:r},position:o}=a.options,l=0!==a.labelRotation,c="top"!==o&&"x"===a.axis;if(a.isHorizontal()){const o=a.getPixelForTick(0)-a.left,d=a.right-a.getPixelForTick(a.ticks.length-1);let u=0,p=0;l?c?(u=n*e.width,p=i*t.height):(u=i*e.height,p=n*t.width):"start"===s?p=t.width:"end"===s?u=e.width:(u=e.width/2,p=t.width/2),a.paddingLeft=Math.max((u-o+r)*a.width/(a.width-o),0),a.paddingRight=Math.max((p-d+r)*a.width/(a.width-d),0)}else{let i=t.height/2,n=e.height/2;"start"===s?(i=0,n=e.height):"end"===s&&(i=t.height,n=0),a.paddingTop=i+r,a.paddingBottom=n+r}}_handleMargins(){const e=this;e._margins&&(e._margins.left=Math.max(e.paddingLeft,e._margins.left),e._margins.top=Math.max(e.paddingTop,e._margins.top),e._margins.right=Math.max(e.paddingRight,e._margins.right),e._margins.bottom=Math.max(e.paddingBottom,e._margins.bottom))}afterFit(){(0,n.N)(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){const t=this;t.beforeTickToLabelConversion(),t.generateTickLabels(e),t.afterTickToLabelConversion()}_getLabelSizes(){const e=this;let t=e._labelSizes;if(!t){const i=e.options.ticks.sampleSize;let n=e.ticks;i<n.length&&(n=Ee(n,i)),e._labelSizes=t=e._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(e,t){const{ctx:i,_longestTextCache:a}=this,s=[],r=[];let o,l,c,d,u,p,h,g,m,f,b,y=0,v=0;for(o=0;o<t;++o){if(d=e[o].label,u=this._resolveTickFontOptions(o),i.font=p=u.string,h=a[p]=a[p]||{data:{},gc:[]},g=u.lineHeight,m=f=0,(0,n.j)(d)||(0,n.b)(d)){if((0,n.b)(d))for(l=0,c=d.length;l<c;++l)b=d[l],(0,n.j)(b)||(0,n.b)(b)||(m=(0,n.R)(i,h.data,h.gc,m,b),f+=g)}else m=(0,n.R)(i,h.data,h.gc,m,d),f=g;s.push(m),r.push(f),y=Math.max(m,y),v=Math.max(f,v)}!function(e,t){(0,n.D)(e,(e=>{const i=e.gc,n=i.length/2;let a;if(n>t){for(a=0;a<n;++a)delete e.data[i[a]];i.splice(0,n)}}))}(a,t);const _=s.indexOf(y),S=r.indexOf(v),I=e=>({width:s[e]||0,height:r[e]||0});return{first:I(0),last:I(t-1),widest:I(_),highest:I(S),widths:s,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){const t=this;t._reversePixels&&(e=1-e);const i=t._startPixel+e*t._length;return(0,n.S)(t._alignToPixels?(0,n.U)(t.chart,i,0):i)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this,i=t.ticks||[];if(e>=0&&e<i.length){const n=i[e];return n.$context||(n.$context=function(e,t,i){return Object.assign(Object.create(e),{tick:i,index:t,type:"tick"})}(t.getContext(),e,n))}return t.$context||(t.$context=(n=t.chart.getContext(),a=t,Object.assign(Object.create(n),{scale:a,type:"scale"})));var n,a}_tickSize(){const e=this,t=e.options.ticks,i=(0,n.t)(e.labelRotation),a=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),r=e._getLabelSizes(),o=t.autoSkipPadding||0,l=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return e.isHorizontal()?c*a>l*s?l/a:c/s:c*s<l*a?c/a:l/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this,i=t.axis,a=t.chart,s=t.options,{grid:r,position:o}=s,l=r.offset,c=t.isHorizontal(),d=t.ticks.length+(l?1:0),u=Ae(r),p=[],h=r.setContext(t.getContext()),g=h.drawBorder?h.borderWidth:0,m=g/2,f=function(e){return(0,n.U)(a,e,g)};let b,y,v,_,S,I,w,E,x,A,P,T;if("top"===o)b=f(t.bottom),I=t.bottom-u,E=b-m,A=f(e.top)+m,T=e.bottom;else if("bottom"===o)b=f(t.top),A=e.top,T=f(e.bottom)-m,I=b+m,E=t.top+u;else if("left"===o)b=f(t.right),S=t.right-u,w=b-m,x=f(e.left)+m,P=e.right;else if("right"===o)b=f(t.left),x=e.left,P=f(e.right)-m,S=b+m,w=t.left+u;else if("x"===i){if("center"===o)b=f((e.top+e.bottom)/2+.5);else if((0,n.i)(o)){const e=Object.keys(o)[0],i=o[e];b=f(t.chart.scales[e].getPixelForValue(i))}A=e.top,T=e.bottom,I=b+m,E=I+u}else if("y"===i){if("center"===o)b=f((e.left+e.right)/2);else if((0,n.i)(o)){const e=Object.keys(o)[0],i=o[e];b=f(t.chart.scales[e].getPixelForValue(i))}S=b-m,w=S-u,x=e.left,P=e.right}for(y=0;y<d;++y){const e=r.setContext(t.getContext(y)),i=e.lineWidth,s=e.color,o=r.borderDash||[],d=e.borderDashOffset,u=e.tickWidth,h=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;v=xe(t,y,l),void 0!==v&&(_=(0,n.U)(a,v,i),c?S=w=x=P=_:I=E=A=T=_,p.push({tx1:S,ty1:I,tx2:w,ty2:E,x1:x,y1:A,x2:P,y2:T,width:i,color:s,borderDash:o,borderDashOffset:d,tickWidth:u,tickColor:h,tickBorderDash:g,tickBorderDashOffset:m}))}return t._ticksLength=d,t._borderValue=b,p}_computeLabelItems(e){const t=this,i=t.axis,a=t.options,{position:s,ticks:r}=a,o=t.isHorizontal(),l=t.ticks,{align:c,crossAlign:d,padding:u,mirror:p}=r,h=Ae(a.grid),g=h+u,m=p?-u:g,f=-(0,n.t)(t.labelRotation),b=[];let y,v,_,S,I,w,E,x,A,P,T,C,D="middle";if("top"===s)w=t.bottom-m,E=t._getXAxisLabelAlignment();else if("bottom"===s)w=t.top+m,E=t._getXAxisLabelAlignment();else if("left"===s){const e=t._getYAxisLabelAlignment(h);E=e.textAlign,I=e.x}else if("right"===s){const e=t._getYAxisLabelAlignment(h);E=e.textAlign,I=e.x}else if("x"===i){if("center"===s)w=(e.top+e.bottom)/2+g;else if((0,n.i)(s)){const e=Object.keys(s)[0],i=s[e];w=t.chart.scales[e].getPixelForValue(i)+g}E=t._getXAxisLabelAlignment()}else if("y"===i){if("center"===s)I=(e.left+e.right)/2-g;else if((0,n.i)(s)){const e=Object.keys(s)[0],i=s[e];I=t.chart.scales[e].getPixelForValue(i)}E=t._getYAxisLabelAlignment(h).textAlign}"y"===i&&("start"===c?D="top":"end"===c&&(D="bottom"));const j=t._getLabelSizes();for(y=0,v=l.length;y<v;++y){_=l[y],S=_.label;const e=r.setContext(t.getContext(y));x=t.getPixelForTick(y)+r.labelOffset,A=t._resolveTickFontOptions(y),P=A.lineHeight,T=(0,n.b)(S)?S.length:1;const i=T/2,a=e.color,c=e.textStrokeColor,u=e.textStrokeWidth;let h;if(o?(I=x,C="top"===s?"near"===d||0!==f?-T*P+P/2:"center"===d?-j.highest.height/2-i*P+P:-j.highest.height+P/2:"near"===d||0!==f?P/2:"center"===d?j.highest.height/2-i*P:j.highest.height-T*P,p&&(C*=-1)):(w=x,C=(1-T)*P/2),e.showLabelBackdrop){const t=(0,n.C)(e.backdropPadding),i=j.heights[y],a=j.widths[y];let s=w+C-t.top,r=I-t.left;switch(D){case"middle":s-=i/2;break;case"bottom":s-=i}switch(E){case"center":r-=a/2;break;case"right":r-=a}h={left:r,top:s,width:a+t.width,height:i+t.height,color:e.backdropColor}}b.push({rotation:f,label:S,font:A,color:a,strokeColor:c,strokeWidth:u,textOffset:C,textAlign:E,textBaseline:D,translation:[I,w],backdrop:h})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-(0,n.t)(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align&&(i="right"),i}_getYAxisLabelAlignment(e){const t=this,{position:i,ticks:{crossAlign:n,mirror:a,padding:s}}=t.options,r=e+s,o=t._getLabelSizes().widest.width;let l,c;return"left"===i?a?(l="left",c=t.right+s):(c=t.right-r,"near"===n?l="right":"center"===n?(l="center",c-=o/2):(l="left",c=t.left)):"right"===i?a?(l="right",c=t.left+s):(c=t.left+r,"near"===n?l="left":"center"===n?(l="center",c+=o/2):(l="right",c=t.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){const e=this;if(e.options.ticks.mirror)return;const t=e.chart,i=e.options.position;return"left"===i||"right"===i?{top:0,left:e.left,bottom:t.height,right:e.right}:"top"===i||"bottom"===i?{top:e.top,left:0,bottom:e.bottom,right:t.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:a,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,a,s),e.restore())}getLineWidthForValue(e){const t=this,i=t.options.grid;if(!t._isVisible()||!i.display)return 0;const n=t.ticks.findIndex((t=>t.value===e));if(n>=0){return i.setContext(t.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this,i=t.options.grid,n=t.ctx,a=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));let s,r;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(i.display)for(s=0,r=a.length;s<r;++s){const e=a[s];i.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),i.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const e=this,{chart:t,ctx:i,options:{grid:a}}=e,s=a.setContext(e.getContext()),r=a.drawBorder?s.borderWidth:0;if(!r)return;const o=a.setContext(e.getContext(0)).lineWidth,l=e._borderValue;let c,d,u,p;e.isHorizontal()?(c=(0,n.U)(t,e.left,r)-r/2,d=(0,n.U)(t,e.right,o)+o/2,u=p=l):(u=(0,n.U)(t,e.top,r)-r/2,p=(0,n.U)(t,e.bottom,o)+o/2,c=d=l),i.save(),i.lineWidth=s.borderWidth,i.strokeStyle=s.borderColor,i.beginPath(),i.moveTo(c,u),i.lineTo(d,p),i.stroke(),i.restore()}drawLabels(e){const t=this;if(!t.options.ticks.display)return;const i=t.ctx,a=t._computeLabelArea();a&&(0,n.k)(i,a);const s=t._labelItems||(t._labelItems=t._computeLabelItems(e));let r,o;for(r=0,o=s.length;r<o;++r){const e=s[r],t=e.font,a=e.label;e.backdrop&&(i.fillStyle=e.backdrop.color,i.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height));let o=e.textOffset;(0,n.V)(i,a,0,o,t,e)}a&&(0,n.m)(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:a}}=this;if(!i.display)return;const s=(0,n.W)(i.font),r=(0,n.C)(i.padding),o=i.align;let l=s.lineHeight/2;"bottom"===t?(l+=r.bottom,(0,n.b)(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:c,titleY:d,maxWidth:u,rotation:p}=function(e,t,i,a){const{top:s,left:r,bottom:o,right:l}=e;let c,d,u,p=0;return e.isHorizontal()?(d=(0,n.Y)(a,r,l),u=we(e,i,t),c=l-r):(d=we(e,i,t),u=(0,n.Y)(a,o,s),p="left"===i?-n.H:n.H),{titleX:d,titleY:u,maxWidth:c,rotation:p}}(this,l,t,o);(0,n.V)(e,i.text,0,0,s,{color:i.color,maxWidth:u,rotation:p,textAlign:Te(o,t,a),textBaseline:"middle",translation:[c,d]})}draw(e){const t=this;t._isVisible()&&(t.drawBackground(),t.drawGrid(e),t.drawBorder(),t.drawTitle(),t.drawLabels(e))}_layers(){const e=this,t=e.options,i=t.ticks&&t.ticks.z||0,n=t.grid&&t.grid.z||0;return e._isVisible()&&e.draw===Ce.prototype.draw?[{z:n,draw(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:n+1,draw(){e.drawBorder()}},{z:i,draw(t){e.drawLabels(t)}}]:[{z:i,draw(t){e.draw(t)}}]}getMatchingVisibleMetas(e){const t=this,i=t.chart.getSortedVisibleDatasetMetas(),n=t.axis+"AxisID",a=[];let s,r;for(s=0,r=i.length;s<r;++s){const r=i[s];r[n]!==t.id||e&&r.type!==e||a.push(r)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return(0,n.W)(t.font)}_maxDigits(){const e=this,t=e._resolveTickFontOptions(0).lineHeight;return(e.isHorizontal()?e.width:e.height)/t}}class De{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=this,i=Object.getPrototypeOf(e);let a;(function(e){return"id"in e&&"defaults"in e})(i)&&(a=t.register(i));const s=t.items,r=e.id,o=t.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,function(e,t,i){const a=(0,n.$)(Object.create(null),[i?n.d.get(i):{},n.d.get(t),e.defaults]);n.d.set(t,a),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((i=>{const a=i.split("."),s=a.pop(),r=[e].concat(a).join("."),o=t[i].split("."),l=o.pop(),c=o.join(".");n.d.route(r,s,c,l)}))}(t,e.defaultRoutes);e.descriptors&&n.d.describe(t,e.descriptors)}(e,o,a),t.override&&n.d.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,a=this.scope;i in t&&delete t[i],a&&i in n.d[a]&&(delete n.d[a][i],this.override&&delete n.Z[i])}}var je=new class{constructor(){this.controllers=new De(I,"datasets",!0),this.elements=new De(ye,"elements"),this.plugins=new De(Object,"plugins"),this.scales=new De(Ce,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){const a=this;[...t].forEach((t=>{const s=i||a._getRegistryForType(t);i||s.isForType(t)||s===a.plugins&&t.id?a._exec(e,s,t):(0,n.D)(t,(t=>{const n=i||a._getRegistryForType(t);a._exec(e,n,t)}))}))}_exec(e,t,i){const a=(0,n.a0)(e);(0,n.N)(i["before"+a],[],i),t[e](i),(0,n.N)(i["after"+a],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+i+".");return n}};class Oe{constructor(){this._init=[]}notify(e,t,i,n){const a=this;"beforeInit"===t&&(a._init=a._createDescriptors(e,!0),a._notify(a._init,e,"install"));const s=n?a._descriptors(e).filter(n):a._descriptors(e),r=a._notify(s,e,t,i);return"destroy"===t&&(a._notify(s,e,"stop"),a._notify(a._init,e,"uninstall")),r}_notify(e,t,i,a){a=a||{};for(const s of e){const e=s.plugin,r=e[i],o=[t,a,s.options];if(!1===(0,n.N)(r,o,e)&&a.cancelable)return!1}return!0}invalidate(){(0,n.j)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,a=(0,n.v)(i.options&&i.options.plugins,{}),s=function(e){const t=[],i=Object.keys(je.plugins.items);for(let e=0;e<i.length;e++)t.push(je.getPlugin(i[e]));const n=e.plugins||[];for(let e=0;e<n.length;e++){const i=n[e];-1===t.indexOf(i)&&t.push(i)}return t}(i);return!1!==a||t?function(e,t,i,n){const a=[],s=e.getContext();for(let r=0;r<t.length;r++){const o=t[r],l=Re(i[o.id],n);null!==l&&a.push({plugin:o,options:ke(e.config,o,l,s)})}return a}(e,s,a,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function Re(e,t){return t||!1!==e?!0===e?{}:e:null}function ke(e,t,i,n){const a=e.pluginScopeKeys(t),s=e.getOptionScopes(i,a);return e.createResolver(s,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Me(e,t){const i=n.d.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Le(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(i=t.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.charAt(0).toLowerCase();var i}function Ne(e){const t=e.options||(e.options={});t.plugins=(0,n.v)(t.plugins,{}),t.scales=function(e,t){const i=n.Z[e.type]||{scales:{}},a=t.scales||{},s=Me(e.type,t),r=Object.create(null),o=Object.create(null);return Object.keys(a).forEach((e=>{const t=a[e],l=Le(e,t),c=function(e,t){return e===t?"_index_":"_value_"}(l,s),d=i.scales||{};r[l]=r[l]||e,o[e]=(0,n.a6)(Object.create(null),[{axis:l},t,d[l],d[c]])})),e.data.datasets.forEach((i=>{const s=i.type||e.type,l=i.indexAxis||Me(s,t),c=(n.Z[s]||{}).scales||{};Object.keys(c).forEach((e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,l),s=i[t+"AxisID"]||r[t]||t;o[s]=o[s]||Object.create(null),(0,n.a6)(o[s],[{axis:t},a[s],c[e]])}))})),Object.keys(o).forEach((e=>{const t=o[e];(0,n.a6)(t,[n.d.scales[t.type],n.d.scale])})),o}(e,t)}function ze(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Fe=new Map,Ve=new Set;function Be(e,t){let i=Fe.get(e);return i||(i=t(),Fe.set(e,i),Ve.add(i)),i}const We=(e,t,i)=>{const a=(0,n.f)(t,i);void 0!==a&&e.add(a)};class He{constructor(e){this._config=function(e){return(e=e||{}).data=ze(e.data),Ne(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ze(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ne(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Be(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return Be(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return Be(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return Be(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return n&&!t||(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:a,type:s}=this,r=this._cachedScopes(e,i),o=r.get(t);if(o)return o;const l=new Set;t.forEach((t=>{e&&(l.add(e),t.forEach((t=>We(l,e,t)))),t.forEach((e=>We(l,a,e))),t.forEach((e=>We(l,n.Z[s]||{},e))),t.forEach((e=>We(l,n.d,e))),t.forEach((e=>We(l,n.a1,e)))}));const c=[...l];return Ve.has(t)&&r.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,n.Z[t]||{},n.d.datasets[t]||{},{type:t},n.d,n.a1]}resolveNamedOptions(e,t,i,a=[""]){const s={$shared:!0},{resolver:r,subPrefixes:o}=Ge(this._resolverCache,e,a);let l=r;if(function(e,t){const{isScriptable:i,isIndexable:a}=(0,n.a5)(e);for(const s of t)if(i(s)&&(0,n.a2)(e[s])||a(s)&&(0,n.b)(e[s]))return!0;return!1}(r,t)){s.$shared=!1,i=(0,n.a2)(i)?i():i;const t=this.createResolver(e,i,o);l=(0,n.a3)(r,i,t)}for(const e of t)s[e]=l[e];return s}createResolver(e,t,i=[""],a){const{resolver:s}=Ge(this._resolverCache,e,i);return(0,n.i)(t)?(0,n.a3)(s,t,void 0,a):s}}function Ge(e,t,i){let a=e.get(t);a||(a=new Map,e.set(t,a));const s=i.join();let r=a.get(s);if(!r){r={resolver:(0,n.a4)(t,i),subPrefixes:i.filter((e=>!e.toLowerCase().includes("hover")))},a.set(s,r)}return r}const Ue=["top","bottom","left","right","chartArea"];function Ye(e,t){return"top"===e||"bottom"===e||-1===Ue.indexOf(e)&&"x"===t}function $e(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function qe(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),(0,n.N)(i&&i.onComplete,[e],t)}function Ke(e){const t=e.chart,i=t.options.animation;(0,n.N)(i&&i.onProgress,[e],t)}function Xe(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Je(e){return Xe()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Qe={},Ze=e=>{const t=Je(e);return Object.values(Qe).filter((e=>e.canvas===t)).pop()};class et{constructor(e,t){const i=this;this.config=t=new He(t);const r=Je(e),o=Ze(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas can be reused.");const l=t.createResolver(t.chartOptionScopes(),i.getContext());this.platform=i._initializePlatform(r,t);const c=i.platform.acquireContext(r,l.aspectRatio),d=c&&c.canvas,u=d&&d.height,p=d&&d.width;this.id=(0,n.a7)(),this.ctx=c,this.canvas=d,this.width=p,this.height=u,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this.scale=void 0,this._plugins=new Oe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,n.a8)((()=>this.update("resize")),l.resizeDelay||0),Qe[i.id]=i,c&&d?(s.listen(i,"complete",qe),s.listen(i,"progress",Ke),i._initialize(),i.attached&&i.update()):a.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:a,_aspectRatio:s}=this;return(0,n.j)(e)?t&&s?s:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){const e=this;return e.notifyPlugins("beforeInit"),e.options.responsive?e.resize():(0,n.a9)(e,e.options.devicePixelRatio),e.bindEvents(),e.notifyPlugins("afterInit"),e}_initializePlatform(e,t){return t.platform?new t.platform:!Xe()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?new ae:new be}clear(){return(0,n.aa)(this.canvas,this.ctx),this}stop(){return s.stop(this),this}resize(e,t){s.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this,a=i.options,s=i.canvas,r=a.maintainAspectRatio&&i.aspectRatio,o=i.platform.getMaximumSize(s,e,t,r),l=a.devicePixelRatio||i.platform.getDevicePixelRatio();i.width=o.width,i.height=o.height,i._aspectRatio=i.aspectRatio,(0,n.a9)(i,l,!0)&&(i.notifyPlugins("resize",{size:o}),(0,n.N)(a.onResize,[i,o],i),i.attached&&i._doResize()&&i.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};(0,n.D)(e,((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this,t=e.options,i=t.scales,a=e.scales,s=Object.keys(a).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];i&&(r=r.concat(Object.keys(i).map((e=>{const t=i[e],n=Le(e,t),a="r"===n,s="x"===n;return{options:t,dposition:a?"chartArea":s?"bottom":"left",dtype:a?"radialLinear":s?"category":"linear"}})))),(0,n.D)(r,(i=>{const r=i.options,o=r.id,l=Le(o,r),c=(0,n.v)(r.type,i.dtype);void 0!==r.position&&Ye(r.position,l)===Ye(i.dposition)||(r.position=i.dposition),s[o]=!0;let d=null;if(o in a&&a[o].type===c)d=a[o];else{d=new(je.getScale(c))({id:o,type:c,ctx:e.ctx,chart:e}),a[d.id]=d}d.init(r,t)})),(0,n.D)(s,((e,t)=>{e||delete a[t]})),(0,n.D)(a,(t=>{ie.configure(e,t,t.options),ie.addBox(e,t)}))}_updateMetasetIndex(e,t){const i=this._metasets,n=e.index;n!==t&&(i[n]=i[t],i[t]=e,e.index=t)}_updateMetasets(){const e=this,t=e._metasets,i=e.data.datasets.length,n=t.length;if(n>i){for(let t=i;t<n;++t)e._destroyDatasetMeta(t);t.splice(i,n-i)}e._sortedMetasets=t.slice(0).sort($e("order","index"))}_removeUnreferencedMetasets(){const e=this,{_metasets:t,data:{datasets:i}}=e;t.length>i.length&&delete e._stacks,t.forEach(((t,n)=>{0===i.filter((e=>e===t._dataset)).length&&e._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=this,t=[],i=e.data.datasets;let a,s;for(e._removeUnreferencedMetasets(),a=0,s=i.length;a<s;a++){const s=i[a];let r=e.getDatasetMeta(a);const o=s.type||e.config.type;if(r.type&&r.type!==o&&(e._destroyDatasetMeta(a),r=e.getDatasetMeta(a)),r.type=o,r.indexAxis=s.indexAxis||Me(o,e.options),r.order=s.order||0,e._updateMetasetIndex(r,a),r.label=""+s.label,r.visible=e.isDatasetVisible(a),r.controller)r.controller.updateIndex(a),r.controller.linkScales();else{const i=je.getController(o),{datasetElementType:s,dataElementType:l}=n.d.datasets[o];Object.assign(i.prototype,{dataElementType:je.getElement(l),datasetElementType:s&&je.getElement(s)}),r.controller=new i(e,a),t.push(r.controller)}}return e._updateMetasets(),t}_resetElements(){const e=this;(0,n.D)(e.data.datasets,((t,i)=>{e.getDatasetMeta(i).controller.reset()}),e)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this,i=t.config;i.update(),t._options=i.createResolver(i.chartOptionScopes(),t.getContext()),(0,n.D)(t.scales,(e=>{ie.removeBox(t,e)}));const a=t._animationsDisabled=!t.options.animation;t.ensureScalesHaveIDs(),t.buildOrUpdateScales();const s=new Set(Object.keys(t._listeners)),r=new Set(t.options.events);if((0,n.ab)(s,r)&&!!this._responsiveListeners===t.options.responsive||(t.unbindEvents(),t.bindEvents()),t._plugins.invalidate(),!1===t.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=t.buildOrUpdateControllers();t.notifyPlugins("beforeElementsUpdate");let l=0;for(let e=0,i=t.data.datasets.length;e<i;e++){const{controller:i}=t.getDatasetMeta(e),n=!a&&-1===o.indexOf(i);i.buildOrUpdateElements(n),l=Math.max(+i.getMaxOverflow(),l)}t._minPadding=l,t._updateLayout(l),a||(0,n.D)(o,(e=>{e.reset()})),t._updateDatasets(e),t.notifyPlugins("afterUpdate",{mode:e}),t._layers.sort($e("z","_idx")),t._lastEvent&&t._eventHandler(t._lastEvent,!0),t.render()}_updateLayout(e){const t=this;if(!1===t.notifyPlugins("beforeLayout",{cancelable:!0}))return;ie.update(t,t.width,t.height,e);const i=t.chartArea,a=i.width<=0||i.height<=0;t._layers=[],(0,n.D)(t.boxes,(e=>{a&&"chartArea"===e.position||(e.configure&&e.configure(),t._layers.push(...e._layers()))}),t),t._layers.forEach(((e,t)=>{e._idx=t})),t.notifyPlugins("afterLayout")}_updateDatasets(e){const t=this,i="function"==typeof e;if(!1!==t.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let n=0,a=t.data.datasets.length;n<a;++n)t._updateDataset(n,i?e({datasetIndex:n}):e);t.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this,n=i.getDatasetMeta(e),a={meta:n,index:e,mode:t,cancelable:!0};!1!==i.notifyPlugins("beforeDatasetUpdate",a)&&(n.controller._update(t),a.cancelable=!1,i.notifyPlugins("afterDatasetUpdate",a))}render(){const e=this;!1!==e.notifyPlugins("beforeRender",{cancelable:!0})&&(s.has(e)?e.attached&&!s.running(e)&&s.start(e):(e.draw(),qe({chart:e})))}draw(){const e=this;let t;if(e._resizeBeforeDraw){const{width:t,height:i}=e._resizeBeforeDraw;e._resize(t,i),e._resizeBeforeDraw=null}if(e.clear(),e.width<=0||e.height<=0)return;if(!1===e.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=e._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(e.chartArea);for(e._drawDatasets();t<i.length;++t)i[t].draw(e.chartArea);e.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,a;for(n=0,a=t.length;n<a;++n){const a=t[n];e&&!a.visible||i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){const e=this;if(!1===e.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=e.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)e._drawDataset(t[i]);e.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this,i=t.ctx,a=e._clip,s=t.chartArea,r={meta:e,index:e.index,cancelable:!0};!1!==t.notifyPlugins("beforeDatasetDraw",r)&&((0,n.k)(i,{left:!1===a.left?0:s.left-a.left,right:!1===a.right?t.width:s.right+a.right,top:!1===a.top?0:s.top-a.top,bottom:!1===a.bottom?t.height:s.bottom+a.bottom}),e.controller.draw(),(0,n.m)(i),r.cancelable=!1,t.notifyPlugins("afterDatasetDraw",r))}getElementsAtEventForMode(e,t,i,n){const a=U.modes[t];return"function"==typeof a?a(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter((e=>e&&e._dataset===t)).pop();return n||(n=i[e]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1}),n}getContext(){return this.$context||(this.$context={chart:this,type:"chart"})}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateDatasetVisibility(e,t){const i=this,n=t?"show":"hide",a=i.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,n);i.setDatasetVisibility(e,t),s.update(a,{visible:t}),i.update((t=>t.datasetIndex===e?n:void 0))}hide(e){this._updateDatasetVisibility(e,!1)}show(e){this._updateDatasetVisibility(e,!0)}_destroyDatasetMeta(e){const t=this,i=t._metasets&&t._metasets[e];i&&i.controller&&(i.controller._destroy(),delete t._metasets[e])}destroy(){const e=this,{canvas:t,ctx:i}=e;let a,r;for(e.stop(),s.remove(e),a=0,r=e.data.datasets.length;a<r;++a)e._destroyDatasetMeta(a);e.config.clearCache(),t&&(e.unbindEvents(),(0,n.aa)(t,i),e.platform.releaseContext(i),e.canvas=null,e.ctx=null),e.notifyPlugins("destroy"),delete Qe[e.id]}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this,t=e._listeners,i=e.platform,a=function(t,i,n){t.offsetX=i,t.offsetY=n,e._eventHandler(t)};(0,n.D)(e.options.events,(n=>((n,a)=>{i.addEventListener(e,n,a),t[n]=a})(n,a)))}bindResponsiveEvents(){const e=this;e._responsiveListeners||(e._responsiveListeners={});const t=e._responsiveListeners,i=e.platform,n=(n,a)=>{i.addEventListener(e,n,a),t[n]=a},a=(n,a)=>{t[n]&&(i.removeEventListener(e,n,a),delete t[n])},s=(t,i)=>{e.canvas&&e.resize(t,i)};let r;const o=()=>{a("attach",o),e.attached=!0,e.resize(),n("resize",s),n("detach",r)};r=()=>{e.attached=!1,a("resize",s),n("attach",o)},i.isAttached(e.canvas)?o():r()}unbindEvents(){const e=this;(0,n.D)(e._listeners,((t,i)=>{e.platform.removeEventListener(e,i,t)})),e._listeners={},(0,n.D)(e._responsiveListeners,((t,i)=>{e.platform.removeEventListener(e,i,t)})),e._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let a,s,r,o;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),r=0,o=e.length;r<o;++r){s=e[r];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this,i=t._active||[],a=e.map((({datasetIndex:e,index:i})=>{const n=t.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[i],index:i}}));!(0,n.ac)(a,i)&&(t._active=a,t._updateHoverStyles(a,i))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}_updateHoverStyles(e,t,i){const n=this,a=n.options.hover,s=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),r=s(t,e),o=i?e:s(e,t);r.length&&n.updateHoverStyle(r,a.mode,!1),o.length&&a.mode&&n.updateHoverStyle(o,a.mode,!0)}_eventHandler(e,t){const i=this,n={event:e,replay:t,cancelable:!0},a=t=>(t.options.events||this.options.events).includes(e.type);if(!1===i.notifyPlugins("beforeEvent",n,a))return;const s=i._handleEvent(e,t);return n.cancelable=!1,i.notifyPlugins("afterEvent",n,a),(s||n.changed)&&i.render(),i}_handleEvent(e,t){const i=this,{_active:a=[],options:s}=i,r=s.hover,o=t;let l=[],c=!1,d=null;return"mouseout"!==e.type&&(l=i.getElementsAtEventForMode(e,r.mode,r,o),d="click"===e.type?i._lastEvent:e),i._lastEvent=null,(0,n.A)(e,i.chartArea,i._minPadding)&&((0,n.N)(s.onHover,[e,l,i],i),"mouseup"!==e.type&&"click"!==e.type&&"contextmenu"!==e.type||(0,n.N)(s.onClick,[e,l,i],i)),c=!(0,n.ac)(l,a),(c||t)&&(i._active=l,i._updateHoverStyles(l,a,t)),i._lastEvent=d,c}}const tt=()=>(0,n.D)(et.instances,(e=>e._plugins.invalidate())),it=!0;function nt(e,t){const{startAngle:i,endAngle:a,pixelMargin:s,x:r,y:o,outerRadius:l,innerRadius:c}=t;let d=s/l;e.beginPath(),e.arc(r,o,l,i-d,a+d),c>s?(d=s/c,e.arc(r,o,c,a+d,i-d,!0)):e.arc(r,o,s,a+n.H,i-n.H),e.closePath(),e.clip()}function at(e,t,i,a){const s=(r=e.options.borderRadius,(0,n.ae)(r,["outerStart","outerEnd","innerStart","innerEnd"]));var r;const o=(i-t)/2,l=Math.min(o,a*t/2),c=e=>{const t=(i-Math.min(o,e))*a/2;return(0,n.x)(e,0,Math.min(o,t))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:(0,n.x)(s.innerStart,0,l),innerEnd:(0,n.x)(s.innerEnd,0,l)}}function st(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function rt(e,t,i){const{x:a,y:s,startAngle:r,endAngle:o,pixelMargin:l,innerRadius:c}=t,d=Math.max(t.outerRadius+i-l,0),u=c>0?c+i+l:0,p=o-r,h=(p-Math.max(.001,p*d-i/n.P)/d)/2,g=r+h,m=o-h,{outerStart:f,outerEnd:b,innerStart:y,innerEnd:v}=at(t,u,d,m-g),_=d-f,S=d-b,I=g+f/_,w=m-b/S,E=u+y,x=u+v,A=g+y/E,P=m-v/x;if(e.beginPath(),e.arc(a,s,d,I,w),b>0){const t=st(S,w,a,s);e.arc(t.x,t.y,b,w,m+n.H)}const T=st(x,m,a,s);if(e.lineTo(T.x,T.y),v>0){const t=st(x,P,a,s);e.arc(t.x,t.y,v,m+n.H,P+Math.PI)}if(e.arc(a,s,u,m-v/u,g+y/u,!0),y>0){const t=st(E,A,a,s);e.arc(t.x,t.y,y,A+Math.PI,g-n.H)}const C=st(_,g,a,s);if(e.lineTo(C.x,C.y),f>0){const t=st(_,I,a,s);e.arc(t.x,t.y,f,g-n.H,I)}e.closePath()}function ot(e,t,i){const{options:a}=t,s="inner"===a.borderAlign;a.borderWidth&&(s?(e.lineWidth=2*a.borderWidth,e.lineJoin="round"):(e.lineWidth=a.borderWidth,e.lineJoin="bevel"),t.fullCircles&&function(e,t,i){const{x:a,y:s,startAngle:r,endAngle:o,pixelMargin:l}=t,c=Math.max(t.outerRadius-l,0),d=t.innerRadius+l;let u;for(i&&(t.endAngle=t.startAngle+n.T,nt(e,t),t.endAngle=o,t.endAngle===t.startAngle&&(t.endAngle+=n.T,t.fullCircles--)),e.beginPath(),e.arc(a,s,d,r+n.T,r,!0),u=0;u<t.fullCircles;++u)e.stroke();for(e.beginPath(),e.arc(a,s,c,r,r+n.T),u=0;u<t.fullCircles;++u)e.stroke()}(e,t,s),s&&nt(e,t),rt(e,t,i),e.stroke())}Object.defineProperties(et,{defaults:{enumerable:it,value:n.d},instances:{enumerable:it,value:Qe},overrides:{enumerable:it,value:n.Z},registry:{enumerable:it,value:je},version:{enumerable:it,value:"3.3.0"},getChart:{enumerable:it,value:Ze},register:{enumerable:it,value:(...e)=>{je.add(...e),tt()}},unregister:{enumerable:it,value:(...e)=>{je.remove(...e),tt()}}});class lt extends ye{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const a=this.getProps(["x","y"],i),{angle:s,distance:r}=(0,n.ad)(a,{x:e,y:t}),{startAngle:o,endAngle:l,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i);return(u>=n.T||(0,n.q)(s,o,l))&&(r>=c&&r<=d)}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:a,innerRadius:s,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),o=(n+a)/2,l=(s+r)/2;return{x:t+Math.cos(o)*l,y:i+Math.sin(o)*l}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const t=this,i=t.options,a=(i.offset||0)/2;if(t.pixelMargin="inner"===i.borderAlign?.33:0,t.fullCircles=Math.floor(t.circumference/n.T),0===t.circumference||t.innerRadius<0||t.outerRadius<0)return;e.save();let s=0;if(a){s=a/2;const i=(t.startAngle+t.endAngle)/2;e.translate(Math.cos(i)*s,Math.sin(i)*s),t.circumference>=n.P&&(s=a)}e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,function(e,t,i){if(t.fullCircles){t.endAngle=t.startAngle+n.T,rt(e,t,i);for(let i=0;i<t.fullCircles;++i)e.fill()}isNaN(t.circumference)||(t.endAngle=t.startAngle+t.circumference%n.T),rt(e,t,i),e.fill()}(e,t,s),ot(e,t,s),e.restore()}}function ct(e,t,i=t){e.lineCap=(0,n.v)(i.borderCapStyle,t.borderCapStyle),e.setLineDash((0,n.v)(i.borderDash,t.borderDash)),e.lineDashOffset=(0,n.v)(i.borderDashOffset,t.borderDashOffset),e.lineJoin=(0,n.v)(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=(0,n.v)(i.borderWidth,t.borderWidth),e.strokeStyle=(0,n.v)(i.borderColor,t.borderColor)}function dt(e,t,i){e.lineTo(i.x,i.y)}function ut(e,t,i={}){const n=e.length,{start:a=0,end:s=n-1}=i,{start:r,end:o}=t,l=Math.max(a,r),c=Math.min(s,o),d=a<r&&s<r||a>o&&s>o;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function pt(e,t,i,a){const{points:s,options:r}=t,{count:o,start:l,loop:c,ilen:d}=ut(s,i,a),u=function(e){return e.stepped?n.al:e.tension||"monotone"===e.cubicInterpolationMode?n.am:dt}(r);let p,h,g,{move:m=!0,reverse:f}=a||{};for(p=0;p<=d;++p)h=s[(l+(f?d-p:p))%o],h.skip||(m?(e.moveTo(h.x,h.y),m=!1):u(e,g,h,f,r.stepped),g=h);return c&&(h=s[(l+(f?d:0))%o],u(e,g,h,f,r.stepped)),!!c}function ht(e,t,i,n){const a=t.points,{count:s,start:r,ilen:o}=ut(a,i,n),{move:l=!0,reverse:c}=n||{};let d,u,p,h,g,m,f=0,b=0;const y=e=>(r+(c?o-e:e))%s,v=()=>{h!==g&&(e.lineTo(f,g),e.lineTo(f,h),e.lineTo(f,m))};for(l&&(u=a[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=a[y(d)],u.skip)continue;const t=u.x,i=u.y,n=0|t;n===p?(i<h?h=i:i>g&&(g=i),f=(b*f+t)/++b):(v(),e.lineTo(t,i),p=n,b=0,h=g=i),m=i}v()}function gt(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i)?ht:pt}lt.id="arc",lt.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,angle:void 0},lt.defaultRoutes={backgroundColor:"backgroundColor"};const mt="function"==typeof Path2D;function ft(e,t,i,n){mt&&1===t.segments.length?function(e,t,i,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,i,n)&&a.closePath()),ct(e,t.options),e.stroke(a)}(e,t,i,n):function(e,t,i,n){const{segments:a,options:s}=t,r=gt(t);for(const o of a)ct(e,s,o.style),e.beginPath(),r(e,t,o,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}(e,t,i,n)}class bt extends ye{constructor(e){super(),this.animated=!0,this.options=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this,a=i.options;if((a.tension||"monotone"===a.cubicInterpolationMode)&&!a.stepped&&!i._pointsUpdated){const s=a.spanGaps?i._loop:i._fullLoop;(0,n.af)(i._points,a,e,s,t),i._pointsUpdated=!0}}set points(e){const t=this;t._points=e,delete t._segments,delete t._path,t._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,n.ag)(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this,a=i.options,s=e[t],r=i.points,o=(0,n.ah)(i,{property:t,start:s,end:s});if(!o.length)return;const l=[],c=function(e){return e.stepped?n.ai:e.tension||"monotone"===e.cubicInterpolationMode?n.aj:n.ak}(a);let d,u;for(d=0,u=o.length;d<u;++d){const{start:i,end:n}=o[d],u=r[i],p=r[n];if(u===p){l.push(u);continue}const h=c(u,p,Math.abs((s-u[t])/(p[t]-u[t])),a.stepped);h[t]=e[t],l.push(h)}return 1===l.length?l[0]:l}pathSegment(e,t,i){return gt(this)(e,this,t,i)}path(e,t,i){const n=this,a=n.segments,s=gt(n);let r=n._loop;t=t||0,i=i||n.points.length-t;for(const o of a)r&=s(e,n,o,{start:t,end:t+i-1});return!!r}draw(e,t,i,n){const a=this,s=a.options||{};(a.points||[]).length&&s.borderWidth&&(e.save(),ft(e,a,i,n),e.restore(),a.animated&&(a._pointsUpdated=!1,a._path=void 0))}}function yt(e,t,i,n){const a=e.options,{[i]:s}=e.getProps([i],n);return Math.abs(t-s)<a.radius+a.hitRadius}bt.id="line",bt.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},bt.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},bt.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class vt extends ye{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:a,y:s}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return yt(this,e,"x",t)}inYRange(e,t){return yt(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e){const t=this,i=t.options;t.skip||i.radius<.1||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,(0,n.an)(e,i,t.x,t.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function _t(e,t){const{x:i,y:n,base:a,width:s,height:r}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=r/2,o=Math.min(i,a),l=Math.max(i,a),c=n-u,d=n+u):(u=s/2,o=i-u,l=i+u,c=Math.min(n,a),d=Math.max(n,a)),{left:o,top:c,right:l,bottom:d}}function St(e){let t=e.options.borderSkipped;const i={};return t?(t=e.horizontal?It(t,"left","right",e.base>e.x):It(t,"bottom","top",e.base<e.y),i[t]=!0,i):i}function It(e,t,i,n){var a,s,r;return n?(r=i,e=wt(e=(a=e)===(s=t)?r:a===r?s:a,i,t)):e=wt(e,t,i),e}function wt(e,t,i){return"start"===e?t:"end"===e?i:e}function Et(e,t,i,n){return e?0:Math.max(Math.min(t,n),i)}function xt(e){const t=_t(e),i=t.right-t.left,a=t.bottom-t.top,s=function(e,t,i){const a=e.options.borderWidth,s=St(e),r=(0,n.ap)(a);return{t:Et(s.top,r.top,0,i),r:Et(s.right,r.right,0,t),b:Et(s.bottom,r.bottom,0,i),l:Et(s.left,r.left,0,t)}}(e,i/2,a/2),r=function(e,t,i){const{enableBorderRadius:a}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=(0,n.aq)(s),o=Math.min(t,i),l=St(e),c=a||(0,n.i)(s);return{topLeft:Et(!c||l.top||l.left,r.topLeft,0,o),topRight:Et(!c||l.top||l.right,r.topRight,0,o),bottomLeft:Et(!c||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:Et(!c||l.bottom||l.right,r.bottomRight,0,o)}}(e,i/2,a/2);return{outer:{x:t.left,y:t.top,w:i,h:a,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:a-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function At(e,t,i,n){const a=null===t,s=null===i,r=e&&!(a&&s)&&_t(e,n);return r&&(a||t>=r.left&&t<=r.right)&&(s||i>=r.top&&i<=r.bottom)}function Pt(e,t){e.rect(t.x,t.y,t.w,t.h)}vt.id="point",vt.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},vt.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Tt extends ye{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,e&&Object.assign(this,e)}draw(e){const t=this.options,{inner:i,outer:a}=xt(this),s=(r=a.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?n.ao:Pt;var r;e.save(),a.w===i.w&&a.h===i.h||(e.beginPath(),s(e,a),e.clip(),s(e,i),e.fillStyle=t.borderColor,e.fill("evenodd")),e.beginPath(),s(e,i),e.fillStyle=t.backgroundColor,e.fill(),e.restore()}inRange(e,t,i){return At(this,e,t,i)}inXRange(e,t){return At(this,e,null,t)}inYRange(e,t){return At(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?i:(i+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Tt.id="bar",Tt.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,enableBorderRadius:!0,pointStyle:void 0},Tt.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ct=Object.freeze({__proto__:null,ArcElement:lt,LineElement:bt,PointElement:vt,BarElement:Tt});function Dt(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function jt(e){e.data.datasets.forEach((e=>{Dt(e)}))}var Ot={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled)return void jt(e);const a=e.width;e.data.datasets.forEach(((t,s)=>{const{_data:r,indexAxis:o}=t,l=e.getDatasetMeta(s),c=r||t.data;if("y"===(0,n.a)([o,e.options.indexAxis]))return;if("line"!==l.type)return;const d=e.scales[l.xAxisID];if("linear"!==d.type&&"time"!==d.type)return;if(e.options.parsing)return;let u,{start:p,count:h}=function(e,t){const i=t.length;let a,s=0;const{iScale:r}=e,{min:o,max:l,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(s=(0,n.x)((0,n.y)(t,r.axis,o).lo,0,i-1)),a=d?(0,n.x)((0,n.y)(t,r.axis,l).hi+1,s,i)-s:i-s,{start:s,count:a}}(l,c);if(h<=4*a)Dt(t);else{switch((0,n.j)(r)&&(t._data=c,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),i.algorithm){case"lttb":u=function(e,t,i,n,a){const s=a.samples||n;if(s>=i)return e.slice(t,t+i);const r=[],o=(i-2)/(s-2);let l=0;const c=t+i-1;let d,u,p,h,g,m=t;for(r[l++]=e[m],d=0;d<s-2;d++){let n,a=0,s=0;const c=Math.floor((d+1)*o)+1+t,f=Math.min(Math.floor((d+2)*o)+1,i)+t,b=f-c;for(n=c;n<f;n++)a+=e[n].x,s+=e[n].y;a/=b,s/=b;const y=Math.floor(d*o)+1+t,v=Math.floor((d+1)*o)+1+t,{x:_,y:S}=e[m];for(p=h=-1,n=y;n<v;n++)h=.5*Math.abs((_-a)*(e[n].y-S)-(_-e[n].x)*(s-S)),h>p&&(p=h,u=e[n],g=n);r[l++]=u,m=g}return r[l++]=e[c],r}(c,p,h,a,i);break;case"min-max":u=function(e,t,i,a){let s,r,o,l,c,d,u,p,h,g,m=0,f=0;const b=[],y=t+i-1,v=e[t].x,_=e[y].x-v;for(s=t;s<t+i;++s){r=e[s],o=(r.x-v)/_*a,l=r.y;const t=0|o;if(t===c)l<h?(h=l,d=s):l>g&&(g=l,u=s),m=(f*m+r.x)/++f;else{const i=s-1;if(!(0,n.j)(d)&&!(0,n.j)(u)){const t=Math.min(d,u),n=Math.max(d,u);t!==p&&t!==i&&b.push({...e[t],x:m}),n!==p&&n!==i&&b.push({...e[n],x:m})}s>0&&i!==p&&b.push(e[i]),b.push(r),c=t,f=0,h=g=l,d=u=p=s}}return b}(c,p,h,a);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}t._decimated=u}}))},destroy(e){jt(e)}};function Rt(e,t,i){const a=function(e){const t=e.options,i=t.fill;let a=(0,n.v)(i&&i.target,i);return void 0===a&&(a=!!t.backgroundColor),!1!==a&&null!==a&&(!0===a?"origin":a)}(e);if((0,n.i)(a))return!isNaN(a.value)&&a;let s=parseFloat(a);return(0,n.g)(s)&&Math.floor(s)===s?("-"!==a[0]&&"+"!==a[0]||(s=t+s),!(s===t||s<0||s>=i)&&s):["origin","start","end","stack"].indexOf(a)>=0&&a}class kt{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:a,y:s,radius:r}=this;return t=t||{start:0,end:n.T},e.arc(a,s,r,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,a=e.angle;return{x:t+Math.cos(a)*n,y:i+Math.sin(a)*n,angle:a}}}function Mt(e){return(e.scale||{}).getPointPositionForValue?function(e){const{scale:t,fill:i}=e,a=t.options,s=t.getLabels().length,r=[],o=a.reverse?t.max:t.min,l=a.reverse?t.min:t.max;let c,d,u;if(u="start"===i?o:"end"===i?l:(0,n.i)(i)?i.value:t.getBaseValue(),a.grid.circular)return d=t.getPointPositionForValue(0,o),new kt({x:d.x,y:d.y,radius:t.getDistanceFromCenterForValue(u)});for(c=0;c<s;++c)r.push(t.getPointPositionForValue(c,u));return r}(e):function(e){const{scale:t={},fill:i}=e;let a,s=null;return"start"===i?s=t.bottom:"end"===i?s=t.top:(0,n.i)(i)?s=t.getPixelForValue(i.value):t.getBasePixel&&(s=t.getBasePixel()),(0,n.g)(s)?(a=t.isHorizontal(),{x:a?s:null,y:a?null:s}):null}(e)}function Lt(e){const{chart:t,scale:i,index:n,line:a}=e,s=[],r=a.segments,o=a.points,l=function(e,t){const i=[],n=e.getSortedVisibleDatasetMetas();for(let e=0;e<n.length;e++){const a=n[e];if(a.index===t)break;Nt(a)&&i.unshift(a.dataset)}return i}(t,n);l.push(Vt({x:null,y:i.bottom},a));for(let e=0;e<r.length;e++){const t=r[e];for(let e=t.start;e<=t.end;e++)zt(s,o[e],l)}return new bt({points:s,options:{}})}const Nt=e=>"line"===e.type&&!e.hidden;function zt(e,t,i){const n=[];for(let a=0;a<i.length;a++){const s=i[a],{first:r,last:o,point:l}=Ft(s,t,"x");if(!(!l||r&&o))if(r)n.unshift(l);else if(e.push(l),!o)break}e.push(...n)}function Ft(e,t,i){const n=e.interpolate(t,i);if(!n)return{};const a=n[i],s=e.segments,r=e.points;let o=!1,l=!1;for(let e=0;e<s.length;e++){const t=s[e],n=r[t.start][i],c=r[t.end][i];if(a>=n&&a<=c){o=a===n,l=a===c;break}}return{first:o,last:l,point:n}}function Vt(e,t){let i=[],a=!1;return(0,n.b)(e)?(a=!0,i=e):i=function(e,t){const{x:i=null,y:n=null}=e||{},a=t.points,s=[];return t.segments.forEach((e=>{const t=a[e.start],r=a[e.end];null!==n?(s.push({x:t.x,y:n}),s.push({x:r.x,y:n})):null!==i&&(s.push({x:i,y:t.y}),s.push({x:i,y:r.y}))})),s}(e,t),i.length?new bt({points:i,options:{tension:0},_loop:a,_fullLoop:a}):null}function Bt(e,t,i){let a=e[t].fill;const s=[t];let r;if(!i)return a;for(;!1!==a&&-1===s.indexOf(a);){if(!(0,n.g)(a))return a;if(r=e[a],!r)return!1;if(r.visible)return a;s.push(a),a=r.fill}return!1}function Wt(e,t,i){e.beginPath(),t.path(e),e.lineTo(t.last().x,i),e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Ht(e,t,i,a){if(a)return;let s=t[e],r=i[e];return"angle"===e&&(s=(0,n.as)(s),r=(0,n.as)(r)),{property:e,start:s,end:r}}function Gt(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function Ut(e,t,i){const{top:n,bottom:a}=t.chart.chartArea,{property:s,start:r,end:o}=i||{};"x"===s&&(e.beginPath(),e.rect(r,n,o-r,a-n),e.clip())}function Yt(e,t,i,n){const a=t.interpolate(i,n);a&&e.lineTo(a.x,a.y)}function $t(e,t){const{line:i,target:a,property:s,color:r,scale:o}=t,l=function(e,t,i){const a=e.segments,s=e.points,r=t.points,o=[];for(const e of a){const a=Ht(i,s[e.start],s[e.end],e.loop);if(!t.segments){o.push({source:e,target:a,start:s[e.start],end:s[e.end]});continue}const l=(0,n.ah)(t,a);for(const t of l){const l=Ht(i,r[t.start],r[t.end],t.loop),c=(0,n.ar)(e,s,l);for(const e of c)o.push({source:e,target:t,start:{[i]:Gt(a,l,"start",Math.max)},end:{[i]:Gt(a,l,"end",Math.min)}})}}return o}(i,a,s);for(const{source:t,target:n,start:c,end:d}of l){const{style:{backgroundColor:l=r}={}}=t;e.save(),e.fillStyle=l,Ut(e,o,Ht(s,c,d)),e.beginPath();const u=!!i.pathSegment(e,t);u?e.closePath():Yt(e,a,d,s);const p=!!a.pathSegment(e,n,{move:u,reverse:!0}),h=u&&p;h||Yt(e,a,c,s),e.closePath(),e.fill(h?"evenodd":"nonzero"),e.restore()}}function qt(e,t,i){const a=function(e){const{chart:t,fill:i,line:a}=e;if((0,n.g)(i))return function(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}(t,i);if("stack"===i)return Lt(e);const s=Mt(e);return s instanceof kt?s:Vt(s,a)}(t),{line:s,scale:r,axis:o}=t,l=s.options,c=l.fill,d=l.backgroundColor,{above:u=d,below:p=d}=c||{};a&&s.points.length&&((0,n.k)(e,i),function(e,t){const{line:i,target:n,above:a,below:s,area:r,scale:o}=t,l=i._loop?"angle":t.axis;e.save(),"x"===l&&s!==a&&(Wt(e,n,r.top),$t(e,{line:i,target:n,color:a,scale:o,property:l}),e.restore(),e.save(),Wt(e,n,r.bottom)),$t(e,{line:i,target:n,color:s,scale:o,property:l}),e.restore()}(e,{line:s,target:a,above:u,below:p,area:i,scale:r,axis:o}),(0,n.m)(e))}var Kt={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,a=[];let s,r,o,l;for(r=0;r<n;++r)s=e.getDatasetMeta(r),o=s.dataset,l=null,o&&o.options&&o instanceof bt&&(l={visible:e.isDatasetVisible(r),index:r,fill:Rt(o,r,n),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,a.push(l);for(r=0;r<n;++r)l=a[r],l&&!1!==l.fill&&(l.fill=Bt(a,r,i.propagate))},beforeDraw(e,t,i){const n="beforeDraw"===i.drawTime,a=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let t=a.length-1;t>=0;--t){const i=a[t].$filler;i&&(i.line.updateControlPoints(s,i.axis),n&&qt(e.ctx,i,s))}},beforeDatasetsDraw(e,t,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let t=n.length-1;t>=0;--t){const i=n[t].$filler;i&&qt(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;n&&!1!==n.fill&&"beforeDatasetDraw"===i.drawTime&&qt(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Xt=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}};class Jt extends ye{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){const n=this;n.maxWidth=e,n.maxHeight=t,n._margins=i,n.setDimensions(),n.buildLabels(),n.fit()}setDimensions(){const e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height)}buildLabels(){const e=this,t=e.options.labels||{};let i=(0,n.N)(t.generateLabels,[e.chart],e)||[];t.filter&&(i=i.filter((i=>t.filter(i,e.chart.data)))),t.sort&&(i=i.sort(((i,n)=>t.sort(i,n,e.chart.data)))),e.options.reverse&&i.reverse(),e.legendItems=i}fit(){const e=this,{options:t,ctx:i}=e;if(!t.display)return void(e.width=e.height=0);const a=t.labels,s=(0,n.W)(a.font),r=s.size,o=e._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Xt(a,r);let d,u;i.font=s.string,e.isHorizontal()?(d=e.maxWidth,u=e._fitRows(o,r,l,c)+10):(u=e.maxHeight,d=e._fitCols(o,r,l,c)+10),e.width=Math.min(d,t.maxWidth||e.maxWidth),e.height=Math.min(u,t.maxHeight||e.maxHeight)}_fitRows(e,t,i,n){const a=this,{ctx:s,maxWidth:r,options:{labels:{padding:o}}}=a,l=a.legendHitBoxes=[],c=a.lineWidths=[0],d=n+o;let u=e;s.textAlign="left",s.textBaseline="middle";let p=-1,h=-d;return a.legendItems.forEach(((e,a)=>{const g=i+t/2+s.measureText(e.text).width;(0===a||c[c.length-1]+g+2*o>r)&&(u+=d,c[c.length-(a>0?0:1)]=0,h+=d,p++),l[a]={left:0,top:h,row:p,width:g,height:n},c[c.length-1]+=g+o})),u}_fitCols(e,t,i,n){const a=this,{ctx:s,maxHeight:r,options:{labels:{padding:o}}}=a,l=a.legendHitBoxes=[],c=a.columnSizes=[],d=r-e;let u=o,p=0,h=0,g=0,m=0,f=0;return a.legendItems.forEach(((e,a)=>{const r=i+t/2+s.measureText(e.text).width;a>0&&h+t+2*o>d&&(u+=p+o,c.push({width:p,height:h}),g+=p+o,f++,m=0,p=h=0),p=Math.max(p,r),h+=t+o,l[a]={left:g,top:m,col:f,width:r,height:n},m+=n+o})),u+=p,c.push({width:p,height:h}),u}adjustHitBoxes(){const e=this;if(!e.options.display)return;const t=e._computeTitleHeight(),{legendHitBoxes:i,options:{align:a,labels:{padding:s}}}=e;if(this.isHorizontal()){let r=0,o=(0,n.Y)(a,e.left+s,e.right-e.lineWidths[r]);for(const l of i)r!==l.row&&(r=l.row,o=(0,n.Y)(a,e.left+s,e.right-e.lineWidths[r])),l.top+=e.top+t+s,l.left=o,o+=l.width+s}else{let r=0,o=(0,n.Y)(a,e.top+t+s,e.bottom-e.columnSizes[r].height);for(const l of i)l.col!==r&&(r=l.col,o=(0,n.Y)(a,e.top+t+s,e.bottom-e.columnSizes[r].height)),l.top=o,l.left+=e.left+s,o+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){const e=this;if(e.options.display){const t=e.ctx;(0,n.k)(t,e),e._draw(),(0,n.m)(t)}}_draw(){const e=this,{options:t,columnSizes:i,lineWidths:a,ctx:s}=e,{align:r,labels:o}=t,l=n.d.color,c=(0,n.at)(t.rtl,e.left,e.width),d=(0,n.W)(o.font),{color:u,padding:p}=o,h=d.size,g=h/2;let m;e.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:f,boxHeight:b,itemHeight:y}=Xt(o,h),v=e.isHorizontal(),_=this._computeTitleHeight();m=v?{x:(0,n.Y)(r,e.left+p,e.right-a[0]),y:e.top+p+_,line:0}:{x:e.left+p,y:(0,n.Y)(r,e.top+_+p,e.bottom-i[0].height),line:0},(0,n.au)(e.ctx,t.textDirection);const S=y+p;e.legendItems.forEach(((t,I)=>{s.strokeStyle=t.fontColor||u,s.fillStyle=t.fontColor||u;const w=s.measureText(t.text).width,E=c.textAlign(t.textAlign||(t.textAlign=o.textAlign)),x=f+h/2+w;let A=m.x,P=m.y;c.setWidth(e.width),v?I>0&&A+x+p>e.right&&(P=m.y+=S,m.line++,A=m.x=(0,n.Y)(r,e.left+p,e.right-a[m.line])):I>0&&P+S>e.bottom&&(A=m.x=A+i[m.line].width+p,m.line++,P=m.y=(0,n.Y)(r,e.top+_+p,e.bottom-i[m.line].height));!function(e,t,i){if(isNaN(f)||f<=0||isNaN(b)||b<0)return;s.save();const a=(0,n.v)(i.lineWidth,1);if(s.fillStyle=(0,n.v)(i.fillStyle,l),s.lineCap=(0,n.v)(i.lineCap,"butt"),s.lineDashOffset=(0,n.v)(i.lineDashOffset,0),s.lineJoin=(0,n.v)(i.lineJoin,"miter"),s.lineWidth=a,s.strokeStyle=(0,n.v)(i.strokeStyle,l),s.setLineDash((0,n.v)(i.lineDash,[])),o.usePointStyle){const r={radius:f*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:a},o=c.xPlus(e,f/2),l=t+g;(0,n.an)(s,r,o,l)}else{const r=t+Math.max((h-b)/2,0),o=c.leftForLtr(e,f),l=(0,n.aq)(i.borderRadius);s.beginPath(),Object.values(l).some((e=>0!==e))?(0,n.ao)(s,{x:o,y:r,w:f,h:b,radius:l}):s.rect(o,r,f,b),s.fill(),0!==a&&s.stroke()}s.restore()}(c.x(A),P,t),A=(0,n.av)(E,A+f+g,e.right),function(e,t,i){(0,n.V)(s,i.text,e,t+y/2,d,{strikethrough:i.hidden,textAlign:i.textAlign})}(c.x(A),P,t),v?m.x+=x+p:m.y+=S})),(0,n.aw)(e.ctx,t.textDirection)}drawTitle(){const e=this,t=e.options,i=t.title,a=(0,n.W)(i.font),s=(0,n.C)(i.padding);if(!i.display)return;const r=(0,n.at)(t.rtl,e.left,e.width),o=e.ctx,l=i.position,c=a.size/2,d=s.top+c;let u,p=e.left,h=e.width;if(this.isHorizontal())h=Math.max(...e.lineWidths),u=e.top+d,p=(0,n.Y)(t.align,p,e.right-h);else{const i=e.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);u=d+(0,n.Y)(t.align,e.top,e.bottom-i-t.labels.padding-e._computeTitleHeight())}const g=(0,n.Y)(l,p,p+h);o.textAlign=r.textAlign((0,n.X)(l)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=a.string,(0,n.V)(o,i.text,g,u,a)}_computeTitleHeight(){const e=this.options.title,t=(0,n.W)(e.font),i=(0,n.C)(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){const i=this;let n,a,s;if(e>=i.left&&e<=i.right&&t>=i.top&&t<=i.bottom)for(s=i.legendHitBoxes,n=0;n<s.length;++n)if(a=s[n],e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height)return i.legendItems[n];return null}handleEvent(e){const t=this,i=t.options;if(!function(e,t){if("mousemove"===e&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,i))return;const a=t._getLegendItemAt(e.x,e.y);if("mousemove"===e.type){const o=t._hoveredItem,l=(r=a,null!==(s=o)&&null!==r&&s.datasetIndex===r.datasetIndex&&s.index===r.index);o&&!l&&(0,n.N)(i.onLeave,[e,o,t],t),t._hoveredItem=a,a&&!l&&(0,n.N)(i.onHover,[e,a,t],t)}else a&&(0,n.N)(i.onClick,[e,a,t],t);var s,r}}var Qt={id:"legend",_element:Jt,start(e,t,i){const n=e.legend=new Jt({ctx:e.ctx,options:i,chart:e});ie.configure(e,n,i),ie.addBox(e,n)},stop(e){ie.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;ie.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,a=i.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:a,textAlign:s,color:r}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const o=e.controller.getStyle(i?0:void 0),l=(0,n.C)(o.borderWidth);return{text:t[e.index].label,fillStyle:o.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:o.borderColor,pointStyle:a||o.pointStyle,rotation:o.rotation,textAlign:s||o.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Zt extends ye{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this,a=i.options;if(i.left=0,i.top=0,!a.display)return void(i.width=i.height=i.right=i.bottom=0);i.width=i.right=e,i.height=i.bottom=t;const s=(0,n.b)(a.text)?a.text.length:1;i._padding=(0,n.C)(a.padding);const r=s*(0,n.W)(a.font).lineHeight+i._padding.height;i.isHorizontal()?i.height=r:i.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:a,right:s,options:r}=this,o=r.align;let l,c,d,u=0;return this.isHorizontal()?(c=(0,n.Y)(o,i,s),d=t+e,l=s-i):("left"===r.position?(c=i+e,d=(0,n.Y)(o,a,t),u=-.5*n.P):(c=s-e,d=(0,n.Y)(o,t,a),u=.5*n.P),l=a-t),{titleX:c,titleY:d,maxWidth:l,rotation:u}}draw(){const e=this,t=e.ctx,i=e.options;if(!i.display)return;const a=(0,n.W)(i.font),s=a.lineHeight/2+e._padding.top,{titleX:r,titleY:o,maxWidth:l,rotation:c}=e._drawArgs(s);(0,n.V)(t,i.text,0,0,a,{color:i.color,maxWidth:l,rotation:c,textAlign:(0,n.X)(i.align),textBaseline:"middle",translation:[r,o]})}}var ei={id:"title",_element:Zt,start(e,t,i){!function(e,t){const i=new Zt({ctx:e.ctx,options:t,chart:e});ie.configure(e,i,t),ie.addBox(e,i),e.titleBlock=i}(e,i)},stop(e){const t=e.titleBlock;ie.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;ie.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ti={average(e){if(!e.length)return!1;let t,i,n=0,a=0,s=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();n+=e.x,a+=e.y,++s}}return{x:n/s,y:a/s}},nearest(e,t){if(!e.length)return!1;let i,a,s,r=t.x,o=t.y,l=Number.POSITIVE_INFINITY;for(i=0,a=e.length;i<a;++i){const a=e[i].element;if(a&&a.hasValue()){const e=a.getCenterPoint(),i=(0,n.ay)(t,e);i<l&&(l=i,s=a)}}if(s){const e=s.tooltipPosition();r=e.x,o=e.y}return{x:r,y:o}}};function ii(e,t){return t&&((0,n.b)(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ni(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ai(e,t){const{element:i,datasetIndex:n,index:a}=t,s=e.getDatasetMeta(n).controller,{label:r,value:o}=s.getLabelAndValue(a);return{chart:e,label:r,parsed:s.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:o,dataset:s.getDataset(),dataIndex:a,datasetIndex:n,element:i}}function si(e,t){const i=e._chart.ctx,{body:a,footer:s,title:r}=e,{boxWidth:o,boxHeight:l}=t,c=(0,n.W)(t.bodyFont),d=(0,n.W)(t.titleFont),u=(0,n.W)(t.footerFont),p=r.length,h=s.length,g=a.length,m=(0,n.C)(t.padding);let f=m.height,b=0,y=a.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,p&&(f+=p*d.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),y){f+=g*(t.displayColors?Math.max(l,c.lineHeight):c.lineHeight)+(y-g)*c.lineHeight+(y-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const _=function(e){b=Math.max(b,i.measureText(e).width+v)};return i.save(),i.font=d.string,(0,n.D)(e.title,_),i.font=c.string,(0,n.D)(e.beforeBody.concat(e.afterBody),_),v=t.displayColors?o+2:0,(0,n.D)(a,(e=>{(0,n.D)(e.before,_),(0,n.D)(e.lines,_),(0,n.D)(e.after,_)})),v=0,i.font=u.string,(0,n.D)(e.footer,_),i.restore(),b+=m.width,{width:b,height:f}}function ri(e,t,i,n){const{x:a,width:s}=i,{width:r,chartArea:{left:o,right:l}}=e;let c="center";return"center"===n?c=a<=(o+l)/2?"left":"right":a<=s/2?c="left":a>=r-s/2&&(c="right"),function(e,t,i,n){const{x:a,width:s}=n,r=i.caretSize+i.caretPadding;return"left"===e&&a+s+r>t.width||"right"===e&&a-s-r<0||void 0}(c,e,t,i)&&(c="center"),c}function oi(e,t,i){const n=t.yAlign||function(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}(e,i);return{xAlign:t.xAlign||ri(e,t,i,n),yAlign:n}}function li(e,t,i,a){const{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:l,yAlign:c}=i,d=s+r,u=o+r;let p=function(e,t){let{x:i,width:n}=e;return"right"===t?i-=n:"center"===t&&(i-=n/2),i}(t,l);const h=function(e,t,i){let{y:n,height:a}=e;return"top"===t?n+=i:n-="bottom"===t?a+i:a/2,n}(t,c,d);return"center"===c?"left"===l?p+=d:"right"===l&&(p-=d):"left"===l?p-=u:"right"===l&&(p+=u),{x:(0,n.x)(p,0,a.width-t.width),y:(0,n.x)(h,0,a.height-t.height)}}function ci(e,t,i){const a=(0,n.C)(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-a.right:e.x+a.left}function di(e){return ii([],ni(e))}function ui(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}class pi extends ye{constructor(e){super(),this.opacity=0,this._active=[],this._chart=e._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this,t=e._cachedAnimations;if(t)return t;const i=e._chart,n=e.options.setContext(e.getContext()),a=n.enabled&&i.options.animation&&n.animations,s=new d(e._chart,a);return a._cacheable&&(e._cachedAnimations=Object.freeze(s)),s}getContext(){const e=this;return e.$context||(e.$context=(t=e._chart.getContext(),i=e,n=e._tooltipItems,Object.assign(Object.create(t),{tooltip:i,tooltipItems:n,type:"tooltip"})));var t,i,n}getTitle(e,t){const i=this,{callbacks:n}=t,a=n.beforeTitle.apply(i,[e]),s=n.title.apply(i,[e]),r=n.afterTitle.apply(i,[e]);let o=[];return o=ii(o,ni(a)),o=ii(o,ni(s)),o=ii(o,ni(r)),o}getBeforeBody(e,t){return di(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const i=this,{callbacks:a}=t,s=[];return(0,n.D)(e,(e=>{const t={before:[],lines:[],after:[]},n=ui(a,e);ii(t.before,ni(n.beforeLabel.call(i,e))),ii(t.lines,n.label.call(i,e)),ii(t.after,ni(n.afterLabel.call(i,e))),s.push(t)})),s}getAfterBody(e,t){return di(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const i=this,{callbacks:n}=t,a=n.beforeFooter.apply(i,[e]),s=n.footer.apply(i,[e]),r=n.afterFooter.apply(i,[e]);let o=[];return o=ii(o,ni(a)),o=ii(o,ni(s)),o=ii(o,ni(r)),o}_createItems(e){const t=this,i=t._active,a=t._chart.data,s=[],r=[],o=[];let l,c,d=[];for(l=0,c=i.length;l<c;++l)d.push(ai(t._chart,i[l]));return e.filter&&(d=d.filter(((t,i,n)=>e.filter(t,i,n,a)))),e.itemSort&&(d=d.sort(((t,i)=>e.itemSort(t,i,a)))),(0,n.D)(d,(i=>{const n=ui(e.callbacks,i);s.push(n.labelColor.call(t,i)),r.push(n.labelPointStyle.call(t,i)),o.push(n.labelTextColor.call(t,i))})),t.labelColors=s,t.labelPointStyles=r,t.labelTextColors=o,t.dataPoints=d,d}update(e,t){const i=this,n=i.options.setContext(i.getContext()),a=i._active;let s,r=[];if(a.length){const e=ti[n.position].call(i,a,i._eventPosition);r=i._createItems(n),i.title=i.getTitle(r,n),i.beforeBody=i.getBeforeBody(r,n),i.body=i.getBody(r,n),i.afterBody=i.getAfterBody(r,n),i.footer=i.getFooter(r,n);const t=i._size=si(i,n),o=Object.assign({},e,t),l=oi(i._chart,n,o),c=li(n,o,l,i._chart);i.xAlign=l.xAlign,i.yAlign=l.yAlign,s={opacity:1,x:c.x,y:c.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==i.opacity&&(s={opacity:0});i._tooltipItems=r,i.$context=void 0,s&&i._resolveAnimations().update(i,s),e&&n.external&&n.external.call(i,{chart:i._chart,tooltip:i,replay:t})}drawCaret(e,t,i,n){const a=this.getCaretPosition(e,i,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:a}=this,{cornerRadius:s,caretSize:r}=i,{x:o,y:l}=e,{width:c,height:d}=t;let u,p,h,g,m,f;return"center"===a?(m=l+d/2,"left"===n?(u=o,p=u-r,g=m+r,f=m-r):(u=o+c,p=u+r,g=m-r,f=m+r),h=u):(p="left"===n?o+s+r:"right"===n?o+c-s-r:this.caretX,"top"===a?(g=l,m=g-r,u=p-r,h=p+r):(g=l+d,m=g+r,u=p+r,h=p-r),f=g),{x1:u,x2:p,x3:h,y1:g,y2:m,y3:f}}drawTitle(e,t,i){const a=this,s=a.title,r=s.length;let o,l,c;if(r){const d=(0,n.at)(i.rtl,a.x,a.width);for(e.x=ci(a,i.titleAlign,i),t.textAlign=d.textAlign(i.titleAlign),t.textBaseline="middle",o=(0,n.W)(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,c=0;c<r;++c)t.fillText(s[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===r&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,a,s){const r=this,o=r.labelColors[i],l=r.labelPointStyles[i],{boxHeight:c,boxWidth:d}=s,u=(0,n.W)(s.bodyFont),p=ci(r,"left",s),h=a.x(p),g=c<u.lineHeight?(u.lineHeight-c)/2:0,m=t.y+g;if(s.usePointStyle){const t={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},i=a.leftForLtr(h,d)+d/2,r=m+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,(0,n.an)(e,t,i,r),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,(0,n.an)(e,t,i,r)}else{e.lineWidth=o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=a.leftForLtr(h,d),i=a.leftForLtr(a.xPlus(h,1),d-2),r=(0,n.aq)(o.borderRadius);Object.values(r).some((e=>0!==e))?(e.beginPath(),e.fillStyle=s.multiKeyBackground,(0,n.ao)(e,{x:t,y:m,w:d,h:c,radius:r}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),(0,n.ao)(e,{x:i,y:m+1,w:d-2,h:c-2,radius:r}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,m,d,c),e.strokeRect(t,m,d,c),e.fillStyle=o.backgroundColor,e.fillRect(i,m+1,d-2,c-2))}e.fillStyle=r.labelTextColors[i]}drawBody(e,t,i){const a=this,{body:s}=a,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d}=i,u=(0,n.W)(i.bodyFont);let p=u.lineHeight,h=0;const g=(0,n.at)(i.rtl,a.x,a.width),m=function(i){t.fillText(i,g.x(e.x+h),e.y+p/2),e.y+=p+r},f=g.textAlign(o);let b,y,v,_,S,I,w;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=ci(a,f,i),t.fillStyle=i.bodyColor,(0,n.D)(a.beforeBody,m),h=l&&"right"!==f?"center"===o?d/2+1:d+2:0,_=0,I=s.length;_<I;++_){for(b=s[_],y=a.labelTextColors[_],t.fillStyle=y,(0,n.D)(b.before,m),v=b.lines,l&&v.length&&(a._drawColorBox(t,e,_,g,i),p=Math.max(u.lineHeight,c)),S=0,w=v.length;S<w;++S)m(v[S]),p=u.lineHeight;(0,n.D)(b.after,m)}h=0,p=u.lineHeight,(0,n.D)(a.afterBody,m),e.y-=r}drawFooter(e,t,i){const a=this,s=a.footer,r=s.length;let o,l;if(r){const c=(0,n.at)(i.rtl,a.x,a.width);for(e.x=ci(a,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",o=(0,n.W)(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:a,yAlign:s}=this,{x:r,y:o}=e,{width:l,height:c}=i,d=n.cornerRadius;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(r+d,o),"top"===s&&this.drawCaret(e,t,i,n),t.lineTo(r+l-d,o),t.quadraticCurveTo(r+l,o,r+l,o+d),"center"===s&&"right"===a&&this.drawCaret(e,t,i,n),t.lineTo(r+l,o+c-d),t.quadraticCurveTo(r+l,o+c,r+l-d,o+c),"bottom"===s&&this.drawCaret(e,t,i,n),t.lineTo(r+d,o+c),t.quadraticCurveTo(r,o+c,r,o+c-d),"center"===s&&"left"===a&&this.drawCaret(e,t,i,n),t.lineTo(r,o+d),t.quadraticCurveTo(r,o,r+d,o),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this,i=t._chart,n=t.$animations,a=n&&n.x,s=n&&n.y;if(a||s){const n=ti[e.position].call(t,t._active,t._eventPosition);if(!n)return;const r=t._size=si(t,e),o=Object.assign({},n,t._size),l=oi(i,e,o),c=li(e,o,l,i);a._to===c.x&&s._to===c.y||(t.xAlign=l.xAlign,t.yAlign=l.yAlign,t.width=r.width,t.height=r.height,t.caretX=n.x,t.caretY=n.y,t._resolveAnimations().update(t,c))}}draw(e){const t=this,i=t.options.setContext(t.getContext());let a=t.opacity;if(!a)return;t._updateAnimationTarget(i);const s={width:t.width,height:t.height},r={x:t.x,y:t.y};a=Math.abs(a)<.001?0:a;const o=(0,n.C)(i.padding),l=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=a,t.drawBackground(r,e,s,i),(0,n.au)(e,i.textDirection),r.y+=o.top,t.drawTitle(r,e,i),t.drawBody(r,e,i),t.drawFooter(r,e,i),(0,n.aw)(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this,a=i._active,s=e.map((({datasetIndex:e,index:t})=>{const n=i._chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}})),r=!(0,n.ac)(a,s),o=i._positionChanged(s,t);(r||o)&&(i._active=s,i._eventPosition=t,i.update(!0))}handleEvent(e,t){const i=this,a=i.options,s=i._active||[];let r=!1,o=[];"mouseout"!==e.type&&(o=i._chart.getElementsAtEventForMode(e,a.mode,a,t),a.reverse&&o.reverse());const l=i._positionChanged(o,e);return r=t||!(0,n.ac)(o,s)||l,r&&(i._active=o,(a.enabled||a.external)&&(i._eventPosition={x:e.x,y:e.y},i.update(!0,t))),r}_positionChanged(e,t){const{caretX:i,caretY:n,options:a}=this,s=ti[a.position].call(this,e,t);return!1!==s&&(i!==s.x||n!==s.y)}}pi.positioners=ti;var hi={id:"tooltip",_element:pi,positioners:ti,afterInit(e,t,i){i&&(e.tooltip=new pi({_chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip,i={tooltip:t};!1!==e.notifyPlugins("beforeTooltipDraw",i)&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i))},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:n.ax,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:n.ax,beforeBody:n.ax,beforeLabel:n.ax,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return(0,n.j)(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:n.ax,afterBody:n.ax,beforeFooter:n.ax,footer:n.ax,afterFooter:n.ax}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},gi=Object.freeze({__proto__:null,Decimation:Ot,Filler:Kt,Legend:Qt,Title:ei,Tooltip:hi});function mi(e,t,i){const n=e.indexOf(t);if(-1===n)return((e,t,i)=>"string"==typeof t?e.push(t)-1:isNaN(t)?null:i)(e,t,i);return n!==e.lastIndexOf(t)?i:n}class fi extends Ce{constructor(e){super(e),this._startValue=void 0,this._valueRange=0}parse(e,t){if((0,n.j)(e))return null;const i=this.getLabels();return((e,t)=>null===e?null:(0,n.x)(Math.round(e),0,t))(t=isFinite(t)&&i[t]===e?t:mi(i,e,(0,n.v)(t,e)),i.length-1)}determineDataLimits(){const e=this,{minDefined:t,maxDefined:i}=e.getUserBounds();let{min:n,max:a}=e.getMinMax(!0);"ticks"===e.options.bounds&&(t||(n=0),i||(a=e.getLabels().length-1)),e.min=n,e.max=a}buildTicks(){const e=this,t=e.min,i=e.max,n=e.options.offset,a=[];let s=e.getLabels();s=0===t&&i===s.length-1?s:s.slice(t,i+1),e._valueRange=Math.max(s.length-(n?0:1),1),e._startValue=e.min-(n?.5:0);for(let e=t;e<=i;e++)a.push({value:e});return a}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){const e=this;super.configure(),e.isHorizontal()||(e._reversePixels=!e._reversePixels)}getPixelForValue(e){const t=this;return"number"!=typeof e&&(e=t.parse(e)),null===e?NaN:t.getPixelForDecimal((e-t._startValue)/t._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){const t=this;return Math.round(t._startValue+t.getDecimalForPixel(e)*t._valueRange)}getBasePixel(){return this.bottom}}function bi(e,t,{horizontal:i,minRotation:a}){const s=(0,n.t)(a),r=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}fi.id="category",fi.defaults={ticks:{callback:fi.prototype.getLabelForValue}};class yi extends Ce{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return(0,n.j)(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const e=this,{beginAtZero:t}=e.options,{minDefined:i,maxDefined:a}=e.getUserBounds();let{min:s,max:r}=e;const o=e=>s=i?s:e,l=e=>r=a?r:e;if(t){const e=(0,n.s)(s),t=(0,n.s)(r);e<0&&t<0?l(0):e>0&&t>0&&o(0)}s===r&&(l(r+1),t||o(s-1)),e.min=s,e.max=r}getTickLimit(){const e=this,t=e.options.ticks;let i,{maxTicksLimit:n,stepSize:a}=t;return a?i=Math.ceil(e.max/a)-Math.floor(e.min/a)+1:(i=e.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this,t=e.options,i=t.ticks;let a=e.getTickLimit();a=Math.max(2,a);const s=function(e,t){const i=[],{step:a,min:s,max:r,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,p=a||1,h=c-1,{min:g,max:m}=t,f=!(0,n.j)(s),b=!(0,n.j)(r),y=!(0,n.j)(l),v=(m-g)/(d+1);let _,S,I,w,E=(0,n.aA)((m-g)/h/p)*p;if(E<1e-14&&!f&&!b)return[{value:g},{value:m}];w=Math.ceil(m/E)-Math.floor(g/E),w>h&&(E=(0,n.aA)(w*E/h/p)*p),(0,n.j)(o)||(_=Math.pow(10,o),E=Math.ceil(E*_)/_),S=Math.floor(g/E)*E,I=Math.ceil(m/E)*E,f&&b&&a&&(0,n.aB)((r-s)/a,E/1e3)?(w=Math.min((r-s)/E,c),E=(r-s)/w,S=s,I=r):y?(S=f?s:S,I=b?r:I,w=l-1,E=(I-S)/w):(w=(I-S)/E,w=(0,n.aC)(w,Math.round(w),E/1e3)?Math.round(w):Math.ceil(w));const x=Math.max((0,n.aD)(E),(0,n.aD)(S));_=Math.pow(10,(0,n.j)(o)?x:o),S=Math.round(S*_)/_,I=Math.round(I*_)/_;let A=0;for(f&&(u&&S!==s?(i.push({value:s}),S<s&&A++,(0,n.aC)(Math.round((S+A*E)*_)/_,s,bi(s,v,e))&&A++):S<s&&A++);A<w;++A)i.push({value:Math.round((S+A*E)*_)/_});return b&&u&&I!==r?(0,n.aC)(i[i.length-1].value,r,bi(r,v,e))?i[i.length-1].value=r:i.push({value:r}):b&&I!==r||i.push({value:I}),i}({maxTicks:a,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:e._maxDigits(),horizontal:e.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},e._range||e);return"ticks"===t.bounds&&(0,n.az)(s,e,"value"),t.reverse?(s.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),s}configure(){const e=this,t=e.ticks;let i=e.min,n=e.max;if(super.configure(),e.options.offset&&t.length){const e=(n-i)/Math.max(t.length-1,1)/2;i-=e,n+=e}e._startValue=i,e._endValue=n,e._valueRange=n-i}getLabelForValue(e){return(0,n.p)(e,this.chart.options.locale)}}class vi extends yi{determineDataLimits(){const e=this,{min:t,max:i}=e.getMinMax(!0);e.min=(0,n.g)(t)?t:0,e.max=(0,n.g)(i)?i:1,e.handleTickRangeOptions()}computeTickLimit(){const e=this,t=e.isHorizontal(),i=t?e.width:e.height,a=(0,n.t)(e.options.ticks.minRotation),s=(t?Math.sin(a):Math.cos(a))||.001,r=e._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function _i(e){return 1===e/Math.pow(10,Math.floor((0,n.K)(e)))}vi.id="linear",vi.defaults={ticks:{callback:_e.formatters.numeric}};class Si extends Ce{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=yi.prototype.parse.apply(this,[e,t]);if(0!==i)return(0,n.g)(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const e=this,{min:t,max:i}=e.getMinMax(!0);e.min=(0,n.g)(t)?Math.max(0,t):null,e.max=(0,n.g)(i)?Math.max(0,i):null,e.options.beginAtZero&&(e._zero=!0),e.handleTickRangeOptions()}handleTickRangeOptions(){const e=this,{minDefined:t,maxDefined:i}=e.getUserBounds();let a=e.min,s=e.max;const r=e=>a=t?a:e,o=e=>s=i?s:e,l=(e,t)=>Math.pow(10,Math.floor((0,n.K)(e))+t);a===s&&(a<=0?(r(1),o(10)):(r(l(a,-1)),o(l(s,1)))),a<=0&&r(l(s,-1)),s<=0&&o(l(a,1)),e._zero&&e.min!==e._suggestedMin&&a===l(e.min,0)&&r(l(a,-1)),e.min=a,e.max=s}buildTicks(){const e=this,t=e.options,i=function(e,t){const i=Math.floor((0,n.K)(t.max)),a=Math.ceil(t.max/Math.pow(10,i)),s=[];let r=(0,n.M)(e.min,Math.pow(10,Math.floor((0,n.K)(t.min)))),o=Math.floor((0,n.K)(r)),l=Math.floor(r/Math.pow(10,o)),c=o<0?Math.pow(10,Math.abs(o)):1;do{s.push({value:r,major:_i(r)}),++l,10===l&&(l=1,++o,c=o>=0?1:c),r=Math.round(l*Math.pow(10,o)*c)/c}while(o<i||o===i&&l<a);const d=(0,n.M)(e.max,r);return s.push({value:d,major:_i(r)}),s}({min:e._userMin,max:e._userMax},e);return"ticks"===t.bounds&&(0,n.az)(i,e,"value"),t.reverse?(i.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),i}getLabelForValue(e){return void 0===e?"0":(0,n.p)(e,this.chart.options.locale)}configure(){const e=this,t=e.min;super.configure(),e._startValue=(0,n.K)(t),e._valueRange=(0,n.K)(e.max)-(0,n.K)(t)}getPixelForValue(e){const t=this;return void 0!==e&&0!==e||(e=t.min),null===e||isNaN(e)?NaN:t.getPixelForDecimal(e===t.min?0:((0,n.K)(e)-t._startValue)/t._valueRange)}getValueForPixel(e){const t=this,i=t.getDecimalForPixel(e);return Math.pow(10,t._startValue+i*t._valueRange)}}function Ii(e){const t=e.ticks;if(t.display&&e.display){const e=(0,n.C)(t.backdropPadding);return(0,n.v)(t.font&&t.font.size,n.d.font.size)+e.height}return 0}function wi(e,t,i,n,a){return e===n||e===a?{start:t-i/2,end:t+i/2}:e<n||e>a?{start:t-i,end:t}:{start:t,end:t+i}}function Ei(e){return 0===e||180===e?"center":e<180?"left":"right"}function xi(e,t,i){90===e||270===e?i.y-=t.h/2:(e>270||e<90)&&(i.y-=t.h)}function Ai(e,t,i,a){const{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,n.T);else{let i=e.getPointPosition(0,t);s.moveTo(i.x,i.y);for(let n=1;n<a;n++)i=e.getPointPosition(n,t),s.lineTo(i.x,i.y)}}function Pi(e){return(0,n.w)(e)?e:0}Si.id="logarithmic",Si.defaults={ticks:{callback:_e.formatters.logarithmic,major:{enabled:!0}}};class Ti extends yi{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Ii(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2}determineDataLimits(){const e=this,{min:t,max:i}=e.getMinMax(!1);e.min=(0,n.g)(t)&&!isNaN(t)?t:0,e.max=(0,n.g)(i)&&!isNaN(i)?i:0,e.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ii(this.options))}generateTickLabels(e){const t=this;yi.prototype.generateTickLabels.call(t,e),t._pointLabels=t.getLabels().map(((e,i)=>{const a=(0,n.N)(t.options.pointLabels.callback,[e,i],t);return a||0===a?a:""}))}fit(){const e=this,t=e.options;t.display&&t.pointLabels.display?function(e){const t={l:0,r:e.width,t:0,b:e.height-e.paddingTop},i={};let a,s,r;const o=[],l=[],c=e.getLabels().length;for(a=0;a<c;a++){const c=e.options.pointLabels.setContext(e.getContext(a));l[a]=c.padding,r=e.getPointPosition(a,e.drawingArea+l[a]);const h=(0,n.W)(c.font);e.ctx.font=h.string,d=e.ctx,u=h.lineHeight,p=e._pointLabels[a],s=(0,n.b)(p)?{w:(0,n.aE)(d,d.font,p),h:p.length*u}:{w:d.measureText(p).width,h:u},o[a]=s;const g=e.getIndexAngle(a),m=(0,n.Q)(g),f=wi(m,r.x,s.w,0,180),b=wi(m,r.y,s.h,90,270);f.start<t.l&&(t.l=f.start,i.l=g),f.end>t.r&&(t.r=f.end,i.r=g),b.start<t.t&&(t.t=b.start,i.t=g),b.end>t.b&&(t.b=b.end,i.b=g)}var d,u,p;e._setReductions(e.drawingArea,t,i),e._pointLabelItems=[];const h=e.options,g=Ii(h),m=e.getDistanceFromCenterForValue(h.ticks.reverse?e.min:e.max);for(a=0;a<c;a++){const t=0===a?g/2:0,i=e.getPointPosition(a,m+t+l[a]),s=(0,n.Q)(e.getIndexAngle(a)),r=o[a];xi(s,r,i);const c=Ei(s);let d;d="left"===c?i.x:"center"===c?i.x-r.w/2:i.x-r.w;const u=d+r.w;e._pointLabelItems[a]={x:i.x,y:i.y,textAlign:c,left:d,top:i.y,right:u,bottom:i.y+r.h}}}(e):e.setCenterPoint(0,0,0,0)}_setReductions(e,t,i){const n=this;let a=t.l/Math.sin(i.l),s=Math.max(t.r-n.width,0)/Math.sin(i.r),r=-t.t/Math.cos(i.t),o=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(i.b);a=Pi(a),s=Pi(s),r=Pi(r),o=Pi(o),n.drawingArea=Math.max(e/2,Math.min(Math.floor(e-(a+s)/2),Math.floor(e-(r+o)/2))),n.setCenterPoint(a,s,r,o)}setCenterPoint(e,t,i,n){const a=this,s=a.width-t-a.drawingArea,r=e+a.drawingArea,o=i+a.drawingArea,l=a.height-a.paddingTop-n-a.drawingArea;a.xCenter=Math.floor((r+s)/2+a.left),a.yCenter=Math.floor((o+l)/2+a.top+a.paddingTop)}getIndexAngle(e){const t=n.T/this.getLabels().length,i=this.options.startAngle||0;return(0,n.as)(e*t+(0,n.t)(i))}getDistanceFromCenterForValue(e){const t=this;if((0,n.j)(e))return NaN;const i=t.drawingArea/(t.max-t.min);return t.options.reverse?(t.max-e)*i:(e-t.min)*i}getValueForDistanceFromCenter(e){if((0,n.j)(e))return NaN;const t=this,i=e/(t.drawingArea/(t.max-t.min));return t.options.reverse?t.max-i:t.min+i}getPointPosition(e,t){const i=this,a=i.getIndexAngle(e)-n.H;return{x:Math.cos(a)*t+i.xCenter,y:Math.sin(a)*t+i.yCenter,angle:a}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:a}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:a}}drawBackground(){const e=this,{backgroundColor:t,grid:{circular:i}}=e.options;if(t){const n=e.ctx;n.save(),n.beginPath(),Ai(e,e.getDistanceFromCenterForValue(e._endValue),i,e.getLabels().length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const e=this,t=e.ctx,i=e.options,{angleLines:a,grid:s}=i,r=e.getLabels().length;let o,l,c;if(i.pointLabels.display&&function(e,t){const{ctx:i,options:{pointLabels:a}}=e;for(let s=t-1;s>=0;s--){const t=a.setContext(e.getContext(s)),r=(0,n.W)(t.font),{x:o,y:l,textAlign:c,left:d,top:u,right:p,bottom:h}=e._pointLabelItems[s],{backdropColor:g}=t;if(!(0,n.j)(g)){const e=(0,n.C)(t.backdropPadding);i.fillStyle=g,i.fillRect(d-e.left,u-e.top,p-d+e.width,h-u+e.height)}(0,n.V)(i,e._pointLabels[s],o,l+r.lineHeight/2,r,{color:t.color,textAlign:c,textBaseline:"middle"})}}(e,r),s.display&&e.ticks.forEach(((t,i)=>{if(0!==i){l=e.getDistanceFromCenterForValue(t.value);const n=s.setContext(e.getContext(i-1));!function(e,t,i,n){const a=e.ctx,s=t.circular,{color:r,lineWidth:o}=t;!s&&!n||!r||!o||i<0||(a.save(),a.strokeStyle=r,a.lineWidth=o,a.setLineDash(t.borderDash),a.lineDashOffset=t.borderDashOffset,a.beginPath(),Ai(e,i,s,n),a.closePath(),a.stroke(),a.restore())}(e,n,l,r)}})),a.display){for(t.save(),o=e.getLabels().length-1;o>=0;o--){const n=a.setContext(e.getContext(o)),{color:s,lineWidth:r}=n;r&&s&&(t.lineWidth=r,t.strokeStyle=s,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,l=e.getDistanceFromCenterForValue(i.ticks.reverse?e.min:e.max),c=e.getPointPosition(o,l),t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const e=this,t=e.ctx,i=e.options,a=i.ticks;if(!a.display)return;const s=e.getIndexAngle(0);let r,o;t.save(),t.translate(e.xCenter,e.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",e.ticks.forEach(((s,l)=>{if(0===l&&!i.reverse)return;const c=a.setContext(e.getContext(l)),d=(0,n.W)(c.font);if(r=e.getDistanceFromCenterForValue(e.ticks[l].value),c.showLabelBackdrop){o=t.measureText(s.label).width,t.fillStyle=c.backdropColor;const e=(0,n.C)(c.backdropPadding);t.fillRect(-o/2-e.left,-r-d.size/2-e.top,o+e.width,d.size+e.height)}(0,n.V)(t,s.label,0,-r,d,{color:c.color})})),t.restore()}drawTitle(){}}Ti.id="radialLinear",Ti.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_e.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5}},Ti.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Ti.descriptors={angleLines:{_fallback:"grid"}};const Ci={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Di=Object.keys(Ci);function ji(e,t){return e-t}function Oi(e,t){if((0,n.j)(t))return null;const i=e._adapter,{parser:a,round:s,isoWeekday:r}=e._parseOpts;let o=t;return"function"==typeof a&&(o=a(o)),(0,n.g)(o)||(o="string"==typeof a?i.parse(o,a):i.parse(o)),null===o?null:(s&&(o="week"!==s||!(0,n.w)(r)&&!0!==r?i.startOf(o,s):i.startOf(o,"isoWeek",r)),+o)}function Ri(e,t,i,n){const a=Di.length;for(let s=Di.indexOf(e);s<a-1;++s){const e=Ci[Di[s]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(a*e.size))<=n)return Di[s]}return Di[a-1]}function ki(e,t,i){if(i){if(i.length){const{lo:a,hi:s}=(0,n.aG)(i,t);e[i[a]>=t?i[a]:i[s]]=!0}}else e[t]=!0}function Mi(e,t,i){const n=[],a={},s=t.length;let r,o;for(r=0;r<s;++r)o=t[r],a[o]=r,n.push({value:o,major:!1});return 0!==s&&i?function(e,t,i,n){const a=e._adapter,s=+a.startOf(t[0].value,n),r=t[t.length-1].value;let o,l;for(o=s;o<=r;o=+a.add(o,1,n))l=i[o],l>=0&&(t[l].major=!0);return t}(e,n,a,i):n}class Li extends Ce{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const i=e.time||(e.time={}),a=this._adapter=new z._date(e.adapters.date);(0,n.a6)(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Oi(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this,t=e.options,i=e._adapter,a=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:l}=e.getUserBounds();function c(e){o||isNaN(e.min)||(s=Math.min(s,e.min)),l||isNaN(e.max)||(r=Math.max(r,e.max))}o&&l||(c(e._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||c(e.getMinMax(!1))),s=(0,n.g)(s)&&!isNaN(s)?s:+i.startOf(Date.now(),a),r=(0,n.g)(r)&&!isNaN(r)?r:+i.endOf(Date.now(),a)+1,e.min=Math.min(s,r-1),e.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this,t=e.options,i=t.time,a=t.ticks,s="labels"===a.source?e.getLabelTimestamps():e._generate();"ticks"===t.bounds&&s.length&&(e.min=e._userMin||s[0],e.max=e._userMax||s[s.length-1]);const r=e.min,o=e.max,l=(0,n.aF)(s,r,o);return e._unit=i.unit||(a.autoSkip?Ri(i.minUnit,e.min,e.max,e._getLabelCapacity(r)):function(e,t,i,n,a){for(let s=Di.length-1;s>=Di.indexOf(i);s--){const i=Di[s];if(Ci[i].common&&e._adapter.diff(a,n,i)>=t-1)return i}return Di[i?Di.indexOf(i):0]}(e,l.length,i.minUnit,e.min,e.max)),e._majorUnit=a.major.enabled&&"year"!==e._unit?function(e){for(let t=Di.indexOf(e)+1,i=Di.length;t<i;++t)if(Ci[Di[t]].common)return Di[t]}(e._unit):void 0,e.initOffsets(s),t.reverse&&l.reverse(),Mi(e,l,e._majorUnit)}initOffsets(e){const t=this;let i,a,s=0,r=0;t.options.offset&&e.length&&(i=t.getDecimalForValue(e[0]),s=1===e.length?1-i:(t.getDecimalForValue(e[1])-i)/2,a=t.getDecimalForValue(e[e.length-1]),r=1===e.length?a:(a-t.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=(0,n.x)(s,0,o),r=(0,n.x)(r,0,o),t._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this,t=e._adapter,i=e.min,a=e.max,s=e.options,r=s.time,o=r.unit||Ri(r.minUnit,i,a,e._getLabelCapacity(i)),l=(0,n.v)(r.stepSize,1),c="week"===o&&r.isoWeekday,d=(0,n.w)(c)||!0===c,u={};let p,h,g=i;if(d&&(g=+t.startOf(g,"isoWeek",c)),g=+t.startOf(g,d?"day":o),t.diff(a,i,o)>1e5*l)throw new Error(i+" and "+a+" are too far apart with stepSize of "+l+" "+o);const m="data"===s.ticks.source&&e.getDataTimestamps();for(p=g,h=0;p<a;p=+t.add(p,l,o),h++)ki(u,p,m);return p!==a&&"ticks"!==s.bounds&&1!==h||ki(u,p,m),Object.keys(u).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}_tickFormatFunction(e,t,i,a){const s=this,r=s.options,o=r.time.displayFormats,l=s._unit,c=s._majorUnit,d=l&&o[l],u=c&&o[c],p=i[t],h=c&&u&&p&&p.major,g=s._adapter.format(e,a||(h?u:d)),m=r.ticks.callback;return m?(0,n.N)(m,[g,t,i],s):g}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){const t=this;return null===e?NaN:(e-t.min)/(t.max-t.min)}getPixelForValue(e){const t=this,i=t._offsets,n=t.getDecimalForValue(e);return t.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const t=this,i=t._offsets,n=t.getDecimalForPixel(e)/i.factor-i.end;return t.min+n*(t.max-t.min)}_getLabelSize(e){const t=this,i=t.options.ticks,a=t.ctx.measureText(e).width,s=(0,n.t)(t.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(s),o=Math.sin(s),l=t._resolveTickFontOptions(0).size;return{w:a*r+l*o,h:a*o+l*r}}_getLabelCapacity(e){const t=this,i=t.options.time,n=i.displayFormats,a=n[i.unit]||n.millisecond,s=t._tickFormatFunction(e,0,Mi(t,[e],t._majorUnit),a),r=t._getLabelSize(s),o=Math.floor(t.isHorizontal()?t.width/r.w:t.height/r.h)-1;return o>0?o:1}getDataTimestamps(){const e=this;let t,i,n=e._cache.data||[];if(n.length)return n;const a=e.getMatchingVisibleMetas();if(e._normalized&&a.length)return e._cache.data=a[0].controller.getAllParsedValues(e);for(t=0,i=a.length;t<i;++t)n=n.concat(a[t].controller.getAllParsedValues(e));return e._cache.data=e.normalize(n)}getLabelTimestamps(){const e=this,t=e._cache.labels||[];let i,n;if(t.length)return t;const a=e.getLabels();for(i=0,n=a.length;i<n;++i)t.push(Oi(e,a[i]));return e._cache.labels=e._normalized?t:e.normalize(t)}normalize(e){return(0,n._)(e.sort(ji))}}function Ni(e,t,i){let a,s,r,o;if(i)a=Math.floor(t),s=Math.ceil(t),r=e[a],o=e[s];else{const i=(0,n.aG)(e,t);r=i.lo,o=i.hi,a=e[r],s=e[o]}const l=s-a;return l?r+(o-r)*(t-a)/l:r}Li.id="time",Li.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class zi extends Li{constructor(e){super(e),this._table=[],this._maxIndex=void 0}initOffsets(){const e=this,t=e._getTimestampsForTable();e._table=e.buildLookupTable(t),e._maxIndex=e._table.length-1,super.initOffsets(t)}buildLookupTable(e){const{min:t,max:i}=this;if(!e.length)return[{time:t,pos:0},{time:i,pos:1}];const n=[t];let a,s,r;for(a=0,s=e.length;a<s;++a)r=e[a],r>t&&r<i&&n.push(r);return n.push(i),n}_getTimestampsForTable(){const e=this;let t=e._cache.all||[];if(t.length)return t;const i=e.getDataTimestamps(),n=e.getLabelTimestamps();return t=i.length&&n.length?e.normalize(i.concat(n)):i.length?i:n,t=e._cache.all=t,t}getPixelForValue(e,t){const i=this,a=i._offsets,s=i._normalized&&i._maxIndex>0&&!(0,n.j)(t)?t/i._maxIndex:i.getDecimalForValue(e);return i.getPixelForDecimal((a.start+s)*a.factor)}getDecimalForValue(e){return Ni(this._table,e)/this._maxIndex}getValueForPixel(e){const t=this,i=t._offsets,n=t.getDecimalForPixel(e)/i.factor-i.end;return Ni(t._table,n*this._maxIndex,!0)}}zi.id="timeseries",zi.defaults=Li.defaults;var Fi=Object.freeze({__proto__:null,CategoryScale:fi,LinearScale:vi,LogarithmicScale:Si,RadialLinearScale:Ti,TimeScale:Li,TimeSeriesScale:zi});const Vi=[M,Ct,gi,Fi]},"./node_modules/chart.js/dist/chunks/helpers.segment.js":function(e,t,i){i.r(t),i.d(t,{$:function(){return P},A:function(){return st},B:function(){return Et},C:function(){return yt},D:function(){return I},E:function(){return ai},F:function(){return Xt},G:function(){return oi},H:function(){return W},I:function(){return r},J:function(){return ri},K:function(){return U},L:function(){return q},M:function(){return b},N:function(){return S},O:function(){return St},P:function(){return N},Q:function(){return ee},R:function(){return et},S:function(){return le},T:function(){return z},U:function(){return it},V:function(){return dt},W:function(){return vt},X:function(){return l},Y:function(){return c},Z:function(){return qe},_:function(){return Ct},a:function(){return _t},a0:function(){return R},a1:function(){return Ke},a2:function(){return M},a3:function(){return jt},a4:function(){return Dt},a5:function(){return Ot},a6:function(){return T},a7:function(){return p},a8:function(){return o},a9:function(){return si},aA:function(){return $},aB:function(){return J},aC:function(){return X},aD:function(){return te},aE:function(){return tt},aF:function(){return xt},aG:function(){return It},aH:function(){return $e},aI:function(){return E},aJ:function(){return A},aK:function(){return C},aL:function(){return D},aM:function(){return Ze},aN:function(){return Yt},aO:function(){return $t},aP:function(){return Zt},aQ:function(){return a},aR:function(){return gt},aS:function(){return F},aT:function(){return V},aU:function(){return B},aV:function(){return H},aW:function(){return G},aX:function(){return ae},aa:function(){return nt},ab:function(){return L},ac:function(){return w},ad:function(){return ie},ae:function(){return mt},af:function(){return Kt},ag:function(){return _i},ah:function(){return vi},ai:function(){return ci},aj:function(){return di},ak:function(){return li},al:function(){return lt},am:function(){return ct},an:function(){return at},ao:function(){return ut},ap:function(){return ft},aq:function(){return bt},ar:function(){return yi},as:function(){return se},at:function(){return hi},au:function(){return gi},av:function(){return d},aw:function(){return mi},ax:function(){return u},ay:function(){return ne},az:function(){return Q},b:function(){return g},c:function(){return Ye},d:function(){return Qe},e:function(){return pe},f:function(){return O},g:function(){return f},h:function(){return k},i:function(){return m},j:function(){return h},k:function(){return rt},l:function(){return Pt},m:function(){return ot},n:function(){return v},o:function(){return _},p:function(){return pi},q:function(){return re},r:function(){return s},s:function(){return Y},t:function(){return Z},u:function(){return Tt},v:function(){return y},w:function(){return K},x:function(){return oe},y:function(){return wt},z:function(){return ii}});var n=i("../../node_modules/console-browserify/index.js");function a(e,t,i){return t+" "+e+"px "+i}const s="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function r(e,t,i){const n=i||(e=>Array.prototype.slice.call(e));let a=!1,r=[];return function(...i){r=n(i),a||(a=!0,s.call(window,(()=>{a=!1,e.apply(t,r)})))}}function o(e,t){let i;return function(){return t?(clearTimeout(i),i=setTimeout(e,t)):e(),t}}const l=e=>"start"===e?"left":"end"===e?"right":"center",c=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2,d=(e,t,i)=>"right"===e?i:"center"===e?(t+i)/2:t;function u(){}const p=function(){let e=0;return function(){return e++}}();function h(e){return null==e}function g(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)}function m(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const f=e=>("number"==typeof e||e instanceof Number)&&isFinite(+e);function b(e,t){return f(e)?e:t}function y(e,t){return void 0===e?t:e}const v=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:e/t,_=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function S(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function I(e,t,i,n){let a,s,r;if(g(e))if(s=e.length,n)for(a=s-1;a>=0;a--)t.call(i,e[a],a);else for(a=0;a<s;a++)t.call(i,e[a],a);else if(m(e))for(r=Object.keys(e),s=r.length,a=0;a<s;a++)t.call(i,e[r[a]],r[a])}function w(e,t){let i,n,a,s;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(a=e[i],s=t[i],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function E(e){if(g(e))return e.map(E);if(m(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let a=0;for(;a<n;++a)t[i[a]]=E(e[i[a]]);return t}return e}function x(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function A(e,t,i,n){if(!x(e))return;const a=t[e],s=i[e];m(a)&&m(s)?P(a,s,n):t[e]=E(s)}function P(e,t,i){const n=g(t)?t:[t],a=n.length;if(!m(e))return e;const s=(i=i||{}).merger||A;for(let r=0;r<a;++r){if(!m(t=n[r]))continue;const a=Object.keys(t);for(let n=0,r=a.length;n<r;++n)s(a[n],e,t,i)}return e}function T(e,t){return P(e,t,{merger:C})}function C(e,t,i){if(!x(e))return;const n=t[e],a=i[e];m(n)&&m(a)?T(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=E(a))}function D(e,t,i,a){void 0!==t&&n.warn(e+': "'+i+'" is deprecated. Please use "'+a+'" instead')}function j(e,t){const i=e.indexOf(".",t);return-1===i?e.length:i}function O(e,t){if(""===t)return e;let i=0,n=j(t,i);for(;e&&n>i;)e=e[t.substr(i,n-i)],i=n+1,n=j(t,i);return e}function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}const k=e=>void 0!==e,M=e=>"function"==typeof e,L=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0},N=Math.PI,z=2*N,F=z+N,V=Number.POSITIVE_INFINITY,B=N/180,W=N/2,H=N/4,G=2*N/3,U=Math.log10,Y=Math.sign;function $(e){const t=Math.pow(10,Math.floor(U(e))),i=e/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function q(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n==0&&(t.push(n),t.push(e/n));return i===(0|i)&&t.push(i),t.sort(((e,t)=>e-t)).pop(),t}function K(e){return!isNaN(parseFloat(e))&&isFinite(e)}function X(e,t,i){return Math.abs(e-t)<i}function J(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function Q(e,t,i){let n,a,s;for(n=0,a=e.length;n<a;n++)s=e[n][i],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Z(e){return e*(N/180)}function ee(e){return e*(180/N)}function te(e){if(!f(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function ie(e,t){const i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s<-.5*N&&(s+=z),{angle:s,distance:a}}function ne(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ae(e,t){return(e-t+F)%z-N}function se(e){return(e%z+z)%z}function re(e,t,i,n){const a=se(e),s=se(t),r=se(i),o=se(s-a),l=se(r-a),c=se(a-s),d=se(a-r);return a===s||a===r||n&&s===r||o>l&&c<d}function oe(e,t,i){return Math.max(t,Math.min(i,e))}function le(e){return oe(e,-32768,32767)}const ce=e=>0===e||1===e,de=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*z/i),ue=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*z/i)+1,pe={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*W),easeOutSine:e=>Math.sin(e*W),easeInOutSine:e=>-.5*(Math.cos(N*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ce(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ce(e)?e:de(e,.075,.3),easeOutElastic:e=>ce(e)?e:ue(e,.075,.3),easeInOutElastic(e){const t=.1125;return ce(e)?e:e<.5?.5*de(2*e,t,.45):.5+.5*ue(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-pe.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*pe.easeInBounce(2*e):.5*pe.easeOutBounce(2*e-1)+.5},he={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ge="0123456789ABCDEF",me=e=>ge[15&e],fe=e=>ge[(240&e)>>4]+ge[15&e],be=e=>(240&e)>>4==(15&e);function ye(e){var t=function(e){return be(e.r)&&be(e.g)&&be(e.b)&&be(e.a)}(e)?me:fe;return e?"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):""):e}function ve(e){return e+.5|0}const _e=(e,t,i)=>Math.max(Math.min(e,i),t);function Se(e){return _e(ve(2.55*e),0,255)}function Ie(e){return _e(ve(255*e),0,255)}function we(e){return _e(ve(e/2.55)/100,0,1)}function Ee(e){return _e(ve(100*e),0,100)}const xe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Ae=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Pe(e,t,i){const n=t*Math.min(i,1-i),a=(t,a=(t+e/30)%12)=>i-n*Math.max(Math.min(a-3,9-a,1),-1);return[a(0),a(8),a(4)]}function Te(e,t,i){const n=(n,a=(n+e/60)%6)=>i-i*t*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function Ce(e,t,i){const n=Pe(e,1,.5);let a;for(t+i>1&&(a=1/(t+i),t*=a,i*=a),a=0;a<3;a++)n[a]*=1-t-i,n[a]+=t;return n}function De(e){const t=e.r/255,i=e.g/255,n=e.b/255,a=Math.max(t,i,n),s=Math.min(t,i,n),r=(a+s)/2;let o,l,c;return a!==s&&(c=a-s,l=r>.5?c/(2-a-s):c/(a+s),o=a===t?(i-n)/c+(i<n?6:0):a===i?(n-t)/c+2:(t-i)/c+4,o=60*o+.5),[0|o,l||0,r]}function je(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Ie)}function Oe(e,t,i){return je(Pe,e,t,i)}function Re(e){return(e%360+360)%360}function ke(e){const t=Ae.exec(e);let i,n=255;if(!t)return;t[5]!==i&&(n=t[6]?Se(+t[5]):Ie(+t[5]));const a=Re(+t[2]),s=+t[3]/100,r=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return je(Ce,e,t,i)}(a,s,r):"hsv"===t[1]?function(e,t,i){return je(Te,e,t,i)}(a,s,r):Oe(a,s,r),{r:i[0],g:i[1],b:i[2],a:n}}const Me={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Le={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ne;function ze(e){Ne||(Ne=function(){const e={},t=Object.keys(Le),i=Object.keys(Me);let n,a,s,r,o;for(n=0;n<t.length;n++){for(r=o=t[n],a=0;a<i.length;a++)s=i[a],o=o.replace(s,Me[s]);s=parseInt(Le[r],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),Ne.transparent=[0,0,0,0]);const t=Ne[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}function Fe(e,t,i){if(e){let n=De(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,0===t?360:1)),n=Oe(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Ve(e,t){return e?Object.assign(t||{},e):e}function Be(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ie(e[3]))):(t=Ve(e,{r:0,g:0,b:0,a:1})).a=Ie(t.a),t}function We(e){return"r"===e.charAt(0)?function(e){const t=xe.exec(e);let i,n,a,s=255;if(t){if(t[7]!==i){const e=+t[7];s=255&(t[8]?Se(e):255*e)}return i=+t[1],n=+t[3],a=+t[5],i=255&(t[2]?Se(i):i),n=255&(t[4]?Se(n):n),a=255&(t[6]?Se(a):a),{r:i,g:n,b:a,a:s}}}(e):ke(e)}class He{constructor(e){if(e instanceof He)return e;const t=typeof e;let i;var n,a,s;"object"===t?i=Be(e):"string"===t&&(s=(n=e).length,"#"===n[0]&&(4===s||5===s?a={r:255&17*he[n[1]],g:255&17*he[n[2]],b:255&17*he[n[3]],a:5===s?17*he[n[4]]:255}:7!==s&&9!==s||(a={r:he[n[1]]<<4|he[n[2]],g:he[n[3]]<<4|he[n[4]],b:he[n[5]]<<4|he[n[6]],a:9===s?he[n[7]]<<4|he[n[8]]:255})),i=a||ze(e)||We(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Ve(this._rgb);return e&&(e.a=we(e.a)),e}set rgb(e){this._rgb=Be(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${we(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):this._rgb;var e}hexString(){return this._valid?ye(this._rgb):this._rgb}hslString(){return this._valid?function(e){if(!e)return;const t=De(e),i=t[0],n=Ee(t[1]),a=Ee(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${a}%, ${we(e.a)})`:`hsl(${i}, ${n}%, ${a}%)`}(this._rgb):this._rgb}mix(e,t){const i=this;if(e){const n=i.rgb,a=e.rgb;let s;const r=t===s?.5:t,o=2*r-1,l=n.a-a.a,c=((o*l==-1?o:(o+l)/(1+o*l))+1)/2;s=1-c,n.r=255&c*n.r+s*a.r+.5,n.g=255&c*n.g+s*a.g+.5,n.b=255&c*n.b+s*a.b+.5,n.a=r*n.a+(1-r)*a.a,i.rgb=n}return i}clone(){return new He(this.rgb)}alpha(e){return this._rgb.a=Ie(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=ve(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fe(this._rgb,2,e),this}darken(e){return Fe(this._rgb,2,-e),this}saturate(e){return Fe(this._rgb,1,e),this}desaturate(e){return Fe(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=De(e);i[0]=Re(i[0]+t),i=Oe(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}function Ge(e){return new He(e)}const Ue=e=>e instanceof CanvasGradient||e instanceof CanvasPattern;function Ye(e){return Ue(e)?e:Ge(e)}function $e(e){return Ue(e)?e:Ge(e).saturate(.5).darken(.1).hexString()}const qe=Object.create(null),Ke=Object.create(null);function Xe(e,t){if(!t)return e;const i=t.split(".");for(let t=0,n=i.length;t<n;++t){const n=i[t];e=e[n]||(e[n]=Object.create(null))}return e}function Je(e,t,i){return"string"==typeof t?P(Xe(e,t),i):P(Xe(e,""),t)}var Qe=new class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>$e(t.backgroundColor),this.hoverBorderColor=(e,t)=>$e(t.borderColor),this.hoverColor=(e,t)=>$e(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(e)}set(e,t){return Je(this,e,t)}get(e){return Xe(this,e)}describe(e,t){return Je(Ke,e,t)}override(e,t){return Je(qe,e,t)}route(e,t,i,n){const a=Xe(this,e),s=Xe(this,i),r="_"+t;Object.defineProperties(a,{[r]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[r],t=s[n];return m(e)?Object.assign({},t,e):y(e,t)},set(e){this[r]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ze(e){return!e||h(e.size)||h(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function et(e,t,i,n,a){let s=t[a];return s||(s=t[a]=e.measureText(a).width,i.push(a)),s>n&&(n=s),n}function tt(e,t,i,n){let a=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const o=i.length;let l,c,d,u,p;for(l=0;l<o;l++)if(u=i[l],null!=u&&!0!==g(u))r=et(e,a,s,r,u);else if(g(u))for(c=0,d=u.length;c<d;c++)p=u[c],null==p||g(p)||(r=et(e,a,s,r,p));e.restore();const h=s.length/2;if(h>i.length){for(l=0;l<h;l++)delete a[s[l]];s.splice(0,h)}return r}function it(e,t,i){const n=e.currentDevicePixelRatio,a=0!==i?Math.max(i/2,.5):0;return Math.round((t-a)*n)/n+a}function nt(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function at(e,t,i,n){let a,s,r,o,l;const c=t.pointStyle,d=t.rotation,u=t.radius;let p=(d||0)*B;if(c&&"object"==typeof c&&(a=c.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(i,n),e.rotate(p),e.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void e.restore();if(!(isNaN(u)||u<=0)){switch(e.beginPath(),c){default:e.arc(i,n,u,0,z),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(p)*u,n-Math.cos(p)*u),p+=G,e.lineTo(i+Math.sin(p)*u,n-Math.cos(p)*u),p+=G,e.lineTo(i+Math.sin(p)*u,n-Math.cos(p)*u),e.closePath();break;case"rectRounded":l=.516*u,o=u-l,s=Math.cos(p+H)*o,r=Math.sin(p+H)*o,e.arc(i-s,n-r,l,p-N,p-W),e.arc(i+r,n-s,l,p-W,p),e.arc(i+s,n+r,l,p,p+W),e.arc(i-r,n+s,l,p+W,p+N),e.closePath();break;case"rect":if(!d){o=Math.SQRT1_2*u,e.rect(i-o,n-o,2*o,2*o);break}p+=H;case"rectRot":s=Math.cos(p)*u,r=Math.sin(p)*u,e.moveTo(i-s,n-r),e.lineTo(i+r,n-s),e.lineTo(i+s,n+r),e.lineTo(i-r,n+s),e.closePath();break;case"crossRot":p+=H;case"cross":s=Math.cos(p)*u,r=Math.sin(p)*u,e.moveTo(i-s,n-r),e.lineTo(i+s,n+r),e.moveTo(i+r,n-s),e.lineTo(i-r,n+s);break;case"star":s=Math.cos(p)*u,r=Math.sin(p)*u,e.moveTo(i-s,n-r),e.lineTo(i+s,n+r),e.moveTo(i+r,n-s),e.lineTo(i-r,n+s),p+=H,s=Math.cos(p)*u,r=Math.sin(p)*u,e.moveTo(i-s,n-r),e.lineTo(i+s,n+r),e.moveTo(i+r,n-s),e.lineTo(i-r,n+s);break;case"line":s=Math.cos(p)*u,r=Math.sin(p)*u,e.moveTo(i-s,n-r),e.lineTo(i+s,n+r);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(p)*u,n+Math.sin(p)*u)}e.fill(),t.borderWidth>0&&e.stroke()}}function st(e,t,i){return i=i||.5,e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function rt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ot(e){e.restore()}function lt(e,t,i,n,a){if(!t)return e.lineTo(i.x,i.y);if("middle"===a){const n=(t.x+i.x)/2;e.lineTo(n,t.y),e.lineTo(n,i.y)}else"after"===a!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function ct(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function dt(e,t,i,n,a,s={}){const r=g(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),s.translation&&e.translate(s.translation[0],s.translation[1]),h(s.rotation)||e.rotate(s.rotation),e.font=a.string,s.color&&(e.fillStyle=s.color),s.textAlign&&(e.textAlign=s.textAlign),s.textBaseline&&(e.textBaseline=s.textBaseline),l=0;l<r.length;++l){if(c=r[l],o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),h(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,i,n,s.maxWidth)),e.fillText(c,i,n,s.maxWidth),s.strikethrough||s.underline){const t=e.measureText(c),a=i-t.actualBoundingBoxLeft,r=i+t.actualBoundingBoxRight,o=n-t.actualBoundingBoxAscent,l=n+t.actualBoundingBoxDescent,d=s.strikethrough?(o+l)/2:l;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(r,d),e.stroke()}n+=a.lineHeight}e.restore()}function ut(e,t){const{x:i,y:n,w:a,h:s,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-W,N,!0),e.lineTo(i,n+s-r.bottomLeft),e.arc(i+r.bottomLeft,n+s-r.bottomLeft,r.bottomLeft,N,W,!0),e.lineTo(i+a-r.bottomRight,n+s),e.arc(i+a-r.bottomRight,n+s-r.bottomRight,r.bottomRight,W,0,!0),e.lineTo(i+a,n+r.topRight),e.arc(i+a-r.topRight,n+r.topRight,r.topRight,0,-W,!0),e.lineTo(i+r.topLeft,n)}const pt=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),ht=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function gt(e,t){const i=(""+e).match(pt);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}function mt(e,t){const i={},n=m(t),a=n?Object.keys(t):t,s=m(e)?n?i=>y(e[i],e[t[i]]):t=>e[t]:()=>e;for(const e of a)i[e]=+s(e)||0;return i}function ft(e){return mt(e,{top:"y",right:"x",bottom:"y",left:"x"})}function bt(e){return mt(e,["topLeft","topRight","bottomLeft","bottomRight"])}function yt(e){const t=ft(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function vt(e,t){e=e||{},t=t||Qe.font;let i=y(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let a=y(e.style,t.style);a&&!(""+a).match(ht)&&(n.warn('Invalid font style specified: "'+a+'"'),a="");const s={family:y(e.family,t.family),lineHeight:gt(y(e.lineHeight,t.lineHeight),i),size:i,style:a,weight:y(e.weight,t.weight),string:""};return s.string=Ze(s),s}function _t(e,t,i,n){let a,s,r,o=!0;for(a=0,s=e.length;a<s;++a)if(r=e[a],void 0!==r&&(void 0!==t&&"function"==typeof r&&(r=r(t),o=!1),void 0!==i&&g(r)&&(r=r[i%r.length],o=!1),void 0!==r))return n&&!o&&(n.cacheable=!1),r}function St(e,t){const{min:i,max:n}=e;return{min:i-Math.abs(_(t,i)),max:n+_(t,n)}}function It(e,t,i){i=i||(i=>e[i]<t);let n,a=e.length-1,s=0;for(;a-s>1;)n=s+a>>1,i(n)?s=n:a=n;return{lo:s,hi:a}}const wt=(e,t,i)=>It(e,i,(n=>e[n][t]<i)),Et=(e,t,i)=>It(e,i,(n=>e[n][t]>=i));function xt(e,t,i){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>i;)a--;return n>0||a<e.length?e.slice(n,a):e}const At=["push","pop","shift","splice","unshift"];function Pt(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),At.forEach((t=>{const i="_onData"+R(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const a=n.apply(this,t);return e._chartjs.listeners.forEach((e=>{"function"==typeof e[i]&&e[i](...t)})),a}})})))}function Tt(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(At.forEach((t=>{delete e[t]})),delete e._chartjs)}function Ct(e){const t=new Set;let i,n;for(i=0,n=e.length;i<n;++i)t.add(e[i]);if(t.size===n)return e;const a=[];return t.forEach((e=>{a.push(e)})),a}function Dt(e,t=[""],i=e,n,a=(()=>e[0])){k(n)||(n=Bt("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:a,override:a=>Dt([a,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,n)=>Mt(i,n,(()=>function(e,t,i,n){let a;for(const s of t)if(a=Bt(Rt(s,e),i),k(a))return kt(e,a)?Ft(i,n,e,a):a}(n,t,e,i))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Wt(e).includes(t),ownKeys:e=>Wt(e),set:(e,t,i)=>((e._storage||(e._storage=a()))[t]=i,delete e[t],delete e._keys,!0)})}function jt(e,t,i,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Ot(e,n),setContext:t=>jt(e,t,i,n),override:a=>jt(e.override(a),t,i,n)};return new Proxy(a,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>Mt(e,t,(()=>function(e,t,i){const{_proxy:n,_context:a,_subProxy:s,_descriptors:r}=e;let o=n[t];M(o)&&r.isScriptable(t)&&(o=function(e,t,i,n){const{_proxy:a,_context:s,_subProxy:r,_stack:o}=i;if(o.has(e))throw new Error("Recursion detected: "+[...o].join("->")+"->"+e);o.add(e),t=t(s,r||n),o.delete(e),m(t)&&(t=Ft(a._scopes,a,e,t));return t}(t,o,e,i));g(o)&&o.length&&(o=function(e,t,i,n){const{_proxy:a,_context:s,_subProxy:r,_descriptors:o}=i;if(k(s.index)&&n(e))t=t[s.index%t.length];else if(m(t[0])){const i=t,n=a._scopes.filter((e=>e!==i));t=[];for(const l of i){const i=Ft(n,a,e,l);t.push(jt(i,s,r&&r[e],o))}}return t}(t,o,e,r.isIndexable));kt(t,o)&&(o=jt(o,a,s&&s[t],r));return o}(e,t,i))),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,n)=>(e[i]=n,delete t[i],!0)})}function Ot(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:i,indexable:n,isScriptable:M(i)?i:()=>i,isIndexable:M(n)?n:()=>n}}const Rt=(e,t)=>e?e+R(t):t,kt=(e,t)=>m(t)&&"adapters"!==e;function Mt(e,t,i){let n=e[t];return k(n)||(n=i(),k(n)&&(e[t]=n)),n}function Lt(e,t,i){return M(e)?e(t,i):e}const Nt=(e,t)=>!0===e?t:"string"==typeof e?O(t,e):void 0;function zt(e,t,i,n){for(const a of t){const t=Nt(i,a);if(t){e.add(t);const a=Lt(t._fallback,i,t);if(k(a)&&a!==i&&a!==n)return a}else if(!1===t&&k(n)&&i!==n)return null}return!1}function Ft(e,t,i,n){const a=t._rootScopes,s=Lt(t._fallback,i,n),r=[...e,...a],o=new Set;o.add(n);let l=Vt(o,r,i,s||i);return null!==l&&((!k(s)||s===i||(l=Vt(o,r,s,l),null!==l))&&Dt([...o],[""],a,s,(()=>function(e,t,i){const n=e._getTarget();t in n||(n[t]={});const a=n[t];if(g(a)&&m(i))return i;return a}(t,i,n))))}function Vt(e,t,i,n){for(;i;)i=zt(e,t,i,n);return i}function Bt(e,t){for(const i of t){if(!i)continue;const t=i[e];if(k(t))return t}}function Wt(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter((e=>!e.startsWith("_"))))t.add(e);return[...t]}(e._scopes)),t}const Ht=Number.EPSILON||1e-14,Gt=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ut=e=>"x"===e?"y":"x";function Yt(e,t,i,n){const a=e.skip?t:e,s=t,r=i.skip?t:i,o=ne(s,a),l=ne(r,s);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,p=n*d;return{previous:{x:s.x-u*(r.x-a.x),y:s.y-u*(r.y-a.y)},next:{x:s.x+p*(r.x-a.x),y:s.y+p*(r.y-a.y)}}}function $t(e,t="x"){const i=Ut(t),n=e.length,a=Array(n).fill(0),s=Array(n);let r,o,l,c=Gt(e,0);for(r=0;r<n;++r)if(o=l,l=c,c=Gt(e,r+1),l){if(c){const e=c[t]-l[t];a[r]=0!==e?(c[i]-l[i])/e:0}s[r]=o?c?Y(a[r-1])!==Y(a[r])?0:(a[r-1]+a[r])/2:a[r-1]:a[r]}!function(e,t,i){const n=e.length;let a,s,r,o,l,c=Gt(e,0);for(let d=0;d<n-1;++d)l=c,c=Gt(e,d+1),l&&c&&(X(t[d],0,Ht)?i[d]=i[d+1]=0:(a=i[d]/t[d],s=i[d+1]/t[d],o=Math.pow(a,2)+Math.pow(s,2),o<=9||(r=3/Math.sqrt(o),i[d]=a*r*t[d],i[d+1]=s*r*t[d])))}(e,a,s),function(e,t,i="x"){const n=Ut(i),a=e.length;let s,r,o,l=Gt(e,0);for(let c=0;c<a;++c){if(r=o,o=l,l=Gt(e,c+1),!o)continue;const a=o[i],d=o[n];r&&(s=(a-r[i])/3,o[`cp1${i}`]=a-s,o[`cp1${n}`]=d-s*t[c]),l&&(s=(l[i]-a)/3,o[`cp2${i}`]=a+s,o[`cp2${n}`]=d+s*t[c])}}(e,s,t)}function qt(e,t,i){return Math.max(Math.min(e,i),t)}function Kt(e,t,i,n,a){let s,r,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)$t(e,a);else{let i=n?e[e.length-1]:e[0];for(s=0,r=e.length;s<r;++s)o=e[s],l=Yt(i,o,e[Math.min(s+1,r-(n?0:1))%r],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,i=o}t.capBezierPoints&&function(e,t){let i,n,a,s,r,o=st(e[0],t);for(i=0,n=e.length;i<n;++i)r=s,s=o,o=i<n-1&&st(e[i+1],t),s&&(a=e[i],r&&(a.cp1x=qt(a.cp1x,t.left,t.right),a.cp1y=qt(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=qt(a.cp2x,t.left,t.right),a.cp2y=qt(a.cp2y,t.top,t.bottom)))}(e,i)}function Xt(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Jt(e,t,i){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}const Qt=e=>window.getComputedStyle(e,null);function Zt(e,t){return Qt(e).getPropertyValue(t)}const ei=["top","right","bottom","left"];function ti(e,t,i){const n={};i=i?"-"+i:"";for(let a=0;a<4;a++){const s=ei[a];n[s]=parseFloat(e[t+"-"+s+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function ii(e,t){const{canvas:i,currentDevicePixelRatio:n}=t,a=Qt(i),s="border-box"===a.boxSizing,r=ti(a,"padding"),o=ti(a,"border","width"),{x:l,y:c,box:d}=function(e,t){const i=e.native||e,n=i.touches,a=n&&n.length?n[0]:i,{offsetX:s,offsetY:r}=a;let o,l,c=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(s,r,i.target))o=s,l=r;else{const e=t.getBoundingClientRect();o=a.clientX-e.left,l=a.clientY-e.top,c=!0}return{x:o,y:l,box:c}}(e,i),u=r.left+(d&&o.left),p=r.top+(d&&o.top);let{width:h,height:g}=t;return s&&(h-=r.width+o.width,g-=r.height+o.height),{x:Math.round((l-u)/h*i.width/n),y:Math.round((c-p)/g*i.height/n)}}const ni=e=>Math.round(10*e)/10;function ai(e,t,i,n){const a=Qt(e),s=ti(a,"margin"),r=Jt(a.maxWidth,e,"clientWidth")||V,o=Jt(a.maxHeight,e,"clientHeight")||V,l=function(e,t,i){let n,a;if(void 0===t||void 0===i){const s=Xt(e);if(s){const e=s.getBoundingClientRect(),r=Qt(s),o=ti(r,"border","width"),l=ti(r,"padding");t=e.width-l.width-o.width,i=e.height-l.height-o.height,n=Jt(r.maxWidth,s,"clientWidth"),a=Jt(r.maxHeight,s,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:n||V,maxHeight:a||V}}(e,t,i);let{width:c,height:d}=l;if("content-box"===a.boxSizing){const e=ti(a,"border","width"),t=ti(a,"padding");c-=t.width+e.width,d-=t.height+e.height}return c=Math.max(0,c-s.width),d=Math.max(0,n?Math.floor(c/n):d-s.height),c=ni(Math.min(c,r,l.maxWidth)),d=ni(Math.min(d,o,l.maxHeight)),c&&!d&&(d=ni(c/2)),{width:c,height:d}}function si(e,t,i){const n=t||1,a=Math.floor(e.height*n),s=Math.floor(e.width*n);e.height=a/n,e.width=s/n;const r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||r.height!==a||r.width!==s)&&(e.currentDevicePixelRatio=n,r.height=a,r.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0)}const ri=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function oi(e,t){const i=Zt(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function li(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function ci(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:"middle"===n?i<.5?e.y:t.y:"after"===n?i<1?e.y:t.y:i>0?t.y:e.y}}function di(e,t,i,n){const a={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},r=li(e,a,i),o=li(a,s,i),l=li(s,t,i),c=li(r,o,i),d=li(o,l,i);return li(c,d,i)}const ui=new Map;function pi(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let n=ui.get(i);return n||(n=new Intl.NumberFormat(e,t),ui.set(i,n)),n}(t,i).format(e)}function hi(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function gi(e,t){let i,n;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function mi(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function fi(e){return"angle"===e?{between:re,compare:ae,normalize:se}:{between:(e,t,i)=>e>=Math.min(t,i)&&e<=Math.max(i,t),compare:(e,t)=>e-t,normalize:e=>e}}function bi({start:e,end:t,count:i,loop:n,style:a}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i==0,style:a}}function yi(e,t,i){if(!i)return[e];const{property:n,start:a,end:s}=i,r=t.length,{compare:o,between:l,normalize:c}=fi(n),{start:d,end:u,loop:p,style:h}=function(e,t,i){const{property:n,start:a,end:s}=i,{between:r,normalize:o}=fi(n),l=t.length;let c,d,{start:u,end:p,loop:h}=e;if(h){for(u+=l,p+=l,c=0,d=l;c<d&&r(o(t[u%l][n]),a,s);++c)u--,p--;u%=l,p%=l}return p<u&&(p+=l),{start:u,end:p,loop:h,style:e.style}}(e,t,i),g=[];let m,f,b,y=!1,v=null;const _=()=>y||l(a,b,m)&&0!==o(a,b),S=()=>!y||0===o(s,m)||l(s,b,m);for(let e=d,i=d;e<=u;++e)f=t[e%r],f.skip||(m=c(f[n]),m!==b&&(y=l(m,a,s),null===v&&_()&&(v=0===o(m,a)?e:i),null!==v&&S()&&(g.push(bi({start:v,end:e,loop:p,count:r,style:h})),v=null),i=e,b=m));return null!==v&&g.push(bi({start:v,end:u,loop:p,count:r,style:h})),g}function vi(e,t){const i=[],n=e.segments;for(let a=0;a<n.length;a++){const s=yi(n[a],e.points,t);s.length&&i.push(...s)}return i}function _i(e,t){const i=e.points,n=e.options.spanGaps,a=i.length;if(!a)return[];const s=!!e._loop,{start:r,end:o}=function(e,t,i,n){let a=0,s=t-1;if(i&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,i&&(s+=a);s>a&&e[s%t].skip;)s--;return s%=t,{start:a,end:s}}(i,a,s,n);if(!0===n)return Si([{start:r,end:o,loop:s}],i,t);return Si(function(e,t,i,n){const a=e.length,s=[];let r,o=t,l=e[t];for(r=t+1;r<=i;++r){const i=e[r%a];i.skip||i.stop?l.skip||(n=!1,s.push({start:t%a,end:(r-1)%a,loop:n}),t=o=i.stop?r:null):(o=r,l.skip&&(t=r)),l=i}return null!==o&&s.push({start:t%a,end:o%a,loop:n}),s}(i,r,o<r?o+a:o,!!e._fullLoop&&0===r&&o===a-1),i,t)}function Si(e,t,i){return i&&i.setContext&&t?function(e,t,i){const n=t.length,a=[];let s=e[0].start,r=s;for(const o of e){let e,l,c=t[s%n];for(r=s+1;r<=o.end;r++){const d=t[r%n];l=Ii(i.setContext({type:"segment",p0:c,p1:d})),wi(l,e)&&(a.push({start:s,end:r-1,loop:o.loop,style:e}),e=l,s=r-1),c=d,e=l}s<r-1&&(a.push({start:s,end:r-1,loop:o.loop,style:l}),s=r-1)}return a}(e,t,i):e}function Ii(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function wi(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}},"./node_modules/chart.js/dist/helpers.esm.js":function(e,t,i){i.r(t),i.d(t,{HALF_PI:function(){return n.H},INFINITY:function(){return n.aT},PI:function(){return n.P},PITAU:function(){return n.aS},QUARTER_PI:function(){return n.aV},RAD_PER_DEG:function(){return n.aU},TAU:function(){return n.T},TWO_THIRDS_PI:function(){return n.aW},_addGrace:function(){return n.O},_alignPixel:function(){return n.U},_alignStartEnd:function(){return n.Y},_angleBetween:function(){return n.q},_angleDiff:function(){return n.aX},_arrayUnique:function(){return n._},_attachContext:function(){return n.a3},_bezierCurveTo:function(){return n.am},_bezierInterpolation:function(){return n.aj},_boundSegment:function(){return n.ar},_boundSegments:function(){return n.ah},_capitalize:function(){return n.a0},_computeSegments:function(){return n.ag},_createResolver:function(){return n.a4},_decimalPlaces:function(){return n.aD},_deprecated:function(){return n.aL},_descriptors:function(){return n.a5},_elementsEqual:function(){return n.ac},_factorize:function(){return n.L},_filterBetween:function(){return n.aF},_getParentNode:function(){return n.F},_int16Range:function(){return n.S},_isPointInArea:function(){return n.A},_limitValue:function(){return n.x},_longestText:function(){return n.aE},_lookup:function(){return n.aG},_lookupByKey:function(){return n.y},_measureText:function(){return n.R},_merger:function(){return n.aJ},_mergerIf:function(){return n.aK},_normalizeAngle:function(){return n.as},_pointInLine:function(){return n.ak},_readValueToProps:function(){return n.ae},_rlookupByKey:function(){return n.B},_setMinAndMaxByKey:function(){return n.az},_steppedInterpolation:function(){return n.ai},_steppedLineTo:function(){return n.al},_textX:function(){return n.av},_toLeftRightCenter:function(){return n.X},_updateBezierControlPoints:function(){return n.af},addRoundedRectPath:function(){return n.ao},almostEquals:function(){return n.aC},almostWhole:function(){return n.aB},callback:function(){return n.N},clearCanvas:function(){return n.aa},clipArea:function(){return n.k},clone:function(){return n.aI},color:function(){return n.c},debounce:function(){return n.a8},defined:function(){return n.h},distanceBetweenPoints:function(){return n.ay},drawPoint:function(){return n.an},each:function(){return n.D},easingEffects:function(){return n.e},finiteOrDefault:function(){return n.M},fontString:function(){return n.aQ},formatNumber:function(){return n.p},getAngleFromPoint:function(){return n.ad},getHoverColor:function(){return n.aH},getMaximumSize:function(){return n.E},getRelativePosition:function(){return n.z},getRtlAdapter:function(){return n.at},getStyle:function(){return n.aP},isArray:function(){return n.b},isFinite:function(){return n.g},isFunction:function(){return n.a2},isNullOrUndef:function(){return n.j},isNumber:function(){return n.w},isObject:function(){return n.i},listenArrayEvents:function(){return n.l},log10:function(){return n.K},merge:function(){return n.$},mergeIf:function(){return n.a6},niceNum:function(){return n.aA},noop:function(){return n.ax},overrideTextDirection:function(){return n.au},readUsedSize:function(){return n.G},renderText:function(){return n.V},requestAnimFrame:function(){return n.r},resolve:function(){return n.a},resolveObjectKey:function(){return n.f},restoreTextDirection:function(){return n.aw},retinaScale:function(){return n.a9},setsEqual:function(){return n.ab},sign:function(){return n.s},splineCurve:function(){return n.aN},splineCurveMonotone:function(){return n.aO},supportsEventListenerOptions:function(){return n.J},throttled:function(){return n.I},toDegrees:function(){return n.Q},toDimension:function(){return n.o},toFont:function(){return n.W},toFontString:function(){return n.aM},toLineHeight:function(){return n.aR},toPadding:function(){return n.C},toPercentage:function(){return n.n},toRadians:function(){return n.t},toTRBL:function(){return n.ap},toTRBLCorners:function(){return n.aq},uid:function(){return n.a7},unclipArea:function(){return n.m},unlistenArrayEvents:function(){return n.u},valueOrDefault:function(){return n.v}});var n=i("./node_modules/chart.js/dist/chunks/helpers.segment.js")},"./node_modules/chart.js/helpers/helpers.esm.js":function(e,t,i){i.r(t),i.d(t,{HALF_PI:function(){return n.HALF_PI},INFINITY:function(){return n.INFINITY},PI:function(){return n.PI},PITAU:function(){return n.PITAU},QUARTER_PI:function(){return n.QUARTER_PI},RAD_PER_DEG:function(){return n.RAD_PER_DEG},TAU:function(){return n.TAU},TWO_THIRDS_PI:function(){return n.TWO_THIRDS_PI},_addGrace:function(){return n._addGrace},_alignPixel:function(){return n._alignPixel},_alignStartEnd:function(){return n._alignStartEnd},_angleBetween:function(){return n._angleBetween},_angleDiff:function(){return n._angleDiff},_arrayUnique:function(){return n._arrayUnique},_attachContext:function(){return n._attachContext},_bezierCurveTo:function(){return n._bezierCurveTo},_bezierInterpolation:function(){return n._bezierInterpolation},_boundSegment:function(){return n._boundSegment},_boundSegments:function(){return n._boundSegments},_capitalize:function(){return n._capitalize},_computeSegments:function(){return n._computeSegments},_createResolver:function(){return n._createResolver},_decimalPlaces:function(){return n._decimalPlaces},_deprecated:function(){return n._deprecated},_descriptors:function(){return n._descriptors},_elementsEqual:function(){return n._elementsEqual},_factorize:function(){return n._factorize},_filterBetween:function(){return n._filterBetween},_getParentNode:function(){return n._getParentNode},_int16Range:function(){return n._int16Range},_isPointInArea:function(){return n._isPointInArea},_limitValue:function(){return n._limitValue},_longestText:function(){return n._longestText},_lookup:function(){return n._lookup},_lookupByKey:function(){return n._lookupByKey},_measureText:function(){return n._measureText},_merger:function(){return n._merger},_mergerIf:function(){return n._mergerIf},_normalizeAngle:function(){return n._normalizeAngle},_pointInLine:function(){return n._pointInLine},_readValueToProps:function(){return n._readValueToProps},_rlookupByKey:function(){return n._rlookupByKey},_setMinAndMaxByKey:function(){return n._setMinAndMaxByKey},_steppedInterpolation:function(){return n._steppedInterpolation},_steppedLineTo:function(){return n._steppedLineTo},_textX:function(){return n._textX},_toLeftRightCenter:function(){return n._toLeftRightCenter},_updateBezierControlPoints:function(){return n._updateBezierControlPoints},addRoundedRectPath:function(){return n.addRoundedRectPath},almostEquals:function(){return n.almostEquals},almostWhole:function(){return n.almostWhole},callback:function(){return n.callback},clearCanvas:function(){return n.clearCanvas},clipArea:function(){return n.clipArea},clone:function(){return n.clone},color:function(){return n.color},debounce:function(){return n.debounce},defined:function(){return n.defined},distanceBetweenPoints:function(){return n.distanceBetweenPoints},drawPoint:function(){return n.drawPoint},each:function(){return n.each},easingEffects:function(){return n.easingEffects},finiteOrDefault:function(){return n.finiteOrDefault},fontString:function(){return n.fontString},formatNumber:function(){return n.formatNumber},getAngleFromPoint:function(){return n.getAngleFromPoint},getHoverColor:function(){return n.getHoverColor},getMaximumSize:function(){return n.getMaximumSize},getRelativePosition:function(){return n.getRelativePosition},getRtlAdapter:function(){return n.getRtlAdapter},getStyle:function(){return n.getStyle},isArray:function(){return n.isArray},isFinite:function(){return n.isFinite},isFunction:function(){return n.isFunction},isNullOrUndef:function(){return n.isNullOrUndef},isNumber:function(){return n.isNumber},isObject:function(){return n.isObject},listenArrayEvents:function(){return n.listenArrayEvents},log10:function(){return n.log10},merge:function(){return n.merge},mergeIf:function(){return n.mergeIf},niceNum:function(){return n.niceNum},noop:function(){return n.noop},overrideTextDirection:function(){return n.overrideTextDirection},readUsedSize:function(){return n.readUsedSize},renderText:function(){return n.renderText},requestAnimFrame:function(){return n.requestAnimFrame},resolve:function(){return n.resolve},resolveObjectKey:function(){return n.resolveObjectKey},restoreTextDirection:function(){return n.restoreTextDirection},retinaScale:function(){return n.retinaScale},setsEqual:function(){return n.setsEqual},sign:function(){return n.sign},splineCurve:function(){return n.splineCurve},splineCurveMonotone:function(){return n.splineCurveMonotone},supportsEventListenerOptions:function(){return n.supportsEventListenerOptions},throttled:function(){return n.throttled},toDegrees:function(){return n.toDegrees},toDimension:function(){return n.toDimension},toFont:function(){return n.toFont},toFontString:function(){return n.toFontString},toLineHeight:function(){return n.toLineHeight},toPadding:function(){return n.toPadding},toPercentage:function(){return n.toPercentage},toRadians:function(){return n.toRadians},toTRBL:function(){return n.toTRBL},toTRBLCorners:function(){return n.toTRBLCorners},uid:function(){return n.uid},unclipArea:function(){return n.unclipArea},unlistenArrayEvents:function(){return n.unlistenArrayEvents},valueOrDefault:function(){return n.valueOrDefault}});var n=i("./node_modules/chart.js/dist/helpers.esm.js")},"./node_modules/chartjs-adapter-moment/dist/chartjs-adapter-moment.esm.js":function(e,t,i){i.r(t);var n=i("./node_modules/moment/moment.js"),a=i.n(n),s=i("./node_modules/chart.js/dist/chart.esm.js");const r={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};s._adapters._date.override("function"==typeof a()?{_id:"moment",formats:function(){return r},parse:function(e,t){return"string"==typeof e&&"string"==typeof t?e=a()(e,t):e instanceof a()||(e=a()(e)),e.isValid()?e.valueOf():null},format:function(e,t){return a()(e).format(t)},add:function(e,t,i){return a()(e).add(t,i).valueOf()},diff:function(e,t,i){return a()(e).diff(a()(t),i)},startOf:function(e,t,i){return e=a()(e),"isoWeek"===t?(i=Math.trunc(Math.min(Math.max(0,i),6)),e.isoWeekday(i).startOf("day").valueOf()):e.startOf(t).valueOf()},endOf:function(e,t){return a()(e).endOf(t).valueOf()}}:{})},"./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js":function(e,t,i){i.r(t);var n=i("./node_modules/chart.js/helpers/helpers.esm.js"),a=i("./node_modules/chart.js/dist/chart.esm.js"),s=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),r=function(e){var t,i=[];for(e=[].concat(e);e.length;)"string"==typeof(t=e.pop())?i.unshift.apply(i,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):(0,n.isNullOrUndef)(e)||i.unshift(""+t);return i},o=function(e,t,i){var n,a=[].concat(t),s=a.length,r=e.font,o=0;for(e.font=i.string,n=0;n<s;++n)o=Math.max(e.measureText(a[n]).width,o);return e.font=r,{height:s*i.lineHeight,width:o}},l=function(e,t,i){return Math.max(e,Math.min(t,i))},c=function(e,t){var i,n,a,s,r=e.slice(),o=[];for(i=0,a=t.length;i<a;++i)s=t[i],-1===(n=r.indexOf(s))?o.push([s,1]):r.splice(n,1);for(i=0,a=r.length;i<a;++i)o.push([r[i],-1]);return o};function d(e,t){var i=t.x,n=t.y;if(null===i)return{x:0,y:-1};if(null===n)return{x:1,y:0};var a=e.x-i,s=e.y-n,r=Math.sqrt(a*a+s*s);return{x:r?a/r:0,y:r?s/r:-1}}function u(e,t,i){var n=0;return e<i.left?n|=1:e>i.right&&(n|=2),t<i.top?n|=8:t>i.bottom&&(n|=4),n}function p(e,t){var i,n,a=t.anchor,s=e;return t.clamp&&(s=function(e,t){for(var i,n,a,s=e.x0,r=e.y0,o=e.x1,l=e.y1,c=u(s,r,t),d=u(o,l,t);c|d&&!(c&d);)8&(i=c||d)?(n=s+(o-s)*(t.top-r)/(l-r),a=t.top):4&i?(n=s+(o-s)*(t.bottom-r)/(l-r),a=t.bottom):2&i?(a=r+(l-r)*(t.right-s)/(o-s),n=t.right):1&i&&(a=r+(l-r)*(t.left-s)/(o-s),n=t.left),i===c?c=u(s=n,r=a,t):d=u(o=n,l=a,t);return{x0:s,x1:o,y0:r,y1:l}}(s,t.area)),"start"===a?(i=s.x0,n=s.y0):"end"===a?(i=s.x1,n=s.y1):(i=(s.x0+s.x1)/2,n=(s.y0+s.y1)/2),function(e,t,i,n,a){switch(a){case"center":i=n=0;break;case"bottom":i=0,n=1;break;case"right":i=1,n=0;break;case"left":i=-1,n=0;break;case"top":i=0,n=-1;break;case"start":i=-i,n=-n;break;case"end":break;default:a*=Math.PI/180,i=Math.cos(a),n=Math.sin(a)}return{x:e,y:t,vx:i,vy:n}}(i,n,e.vx,e.vy,t.align)}var h=function(e,t){var i=(e.startAngle+e.endAngle)/2,n=Math.cos(i),a=Math.sin(i),s=e.innerRadius,r=e.outerRadius;return p({x0:e.x+n*s,y0:e.y+a*s,x1:e.x+n*r,y1:e.y+a*r,vx:n,vy:a},t)},g=function(e,t){var i=d(e,t.origin),n=i.x*e.options.radius,a=i.y*e.options.radius;return p({x0:e.x-n,y0:e.y-a,x1:e.x+n,y1:e.y+a,vx:i.x,vy:i.y},t)},m=function(e,t){var i=d(e,t.origin),n=e.x,a=e.y,s=0,r=0;return e.horizontal?(n=Math.min(e.x,e.base),s=Math.abs(e.base-e.x)):(a=Math.min(e.y,e.base),r=Math.abs(e.base-e.y)),p({x0:n,y0:a+r,x1:n+s,y1:a,vx:i.x,vy:i.y},t)},f=function(e,t){var i=d(e,t.origin);return p({x0:e.x,y0:e.y,x1:e.x,y1:e.y,vx:i.x,vy:i.y},t)},b=function(e){return Math.round(e*s)/s};function y(e,t){var i=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var n=i.getBasePixel();return e.horizontal?{x:n,y:null}:{x:null,y:n}}function v(e,t,i){var n=i.backgroundColor,a=i.borderColor,s=i.borderWidth;(n||a&&s)&&(e.beginPath(),function(e,t,i,n,a,s){var r=Math.PI/2;if(s){var o=Math.min(s,a/2,n/2),l=t+o,c=i+o,d=t+n-o,u=i+a-o;e.moveTo(t,c),l<d&&c<u?(e.arc(l,c,o,-Math.PI,-r),e.arc(d,c,o,-r,0),e.arc(d,u,o,0,r),e.arc(l,u,o,r,Math.PI)):l<d?(e.moveTo(l,i),e.arc(d,c,o,-r,r),e.arc(l,c,o,r,Math.PI+r)):c<u?(e.arc(l,c,o,-Math.PI,0),e.arc(l,u,o,0,Math.PI)):e.arc(l,c,o,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,a)}(e,b(t.x)+s/2,b(t.y)+s/2,b(t.w)-s,b(t.h)-s,i.borderRadius),e.closePath(),n&&(e.fillStyle=n,e.fill()),a&&s&&(e.strokeStyle=a,e.lineWidth=s,e.lineJoin="miter",e.stroke()))}function _(e,t,i){var n=e.shadowBlur,a=i.stroked,s=b(i.x),r=b(i.y),o=b(i.w);a&&e.strokeText(t,s,r,o),i.filled&&(n&&a&&(e.shadowBlur=0),e.fillText(t,s,r,o),n&&a&&(e.shadowBlur=n))}var S=function(e,t,i,n){var a=this;a._config=e,a._index=n,a._model=null,a._rects=null,a._ctx=t,a._el=i};(0,n.merge)(S.prototype,{_modelize:function(e,t,i,s){var r,l=this,c=l._index,d=(0,n.toFont)((0,n.resolve)([i.font,{}],s,c)),u=(0,n.resolve)([i.color,a.defaults.color],s,c);return{align:(0,n.resolve)([i.align,"center"],s,c),anchor:(0,n.resolve)([i.anchor,"center"],s,c),area:s.chart.chartArea,backgroundColor:(0,n.resolve)([i.backgroundColor,null],s,c),borderColor:(0,n.resolve)([i.borderColor,null],s,c),borderRadius:(0,n.resolve)([i.borderRadius,0],s,c),borderWidth:(0,n.resolve)([i.borderWidth,0],s,c),clamp:(0,n.resolve)([i.clamp,!1],s,c),clip:(0,n.resolve)([i.clip,!1],s,c),color:u,display:e,font:d,lines:t,offset:(0,n.resolve)([i.offset,0],s,c),opacity:(0,n.resolve)([i.opacity,1],s,c),origin:y(l._el,s),padding:(0,n.toPadding)((0,n.resolve)([i.padding,0],s,c)),positioner:(r=l._el,r instanceof a.ArcElement?h:r instanceof a.PointElement?g:r instanceof a.BarElement?m:f),rotation:(0,n.resolve)([i.rotation,0],s,c)*(Math.PI/180),size:o(l._ctx,t,d),textAlign:(0,n.resolve)([i.textAlign,"start"],s,c),textShadowBlur:(0,n.resolve)([i.textShadowBlur,0],s,c),textShadowColor:(0,n.resolve)([i.textShadowColor,u],s,c),textStrokeColor:(0,n.resolve)([i.textStrokeColor,u],s,c),textStrokeWidth:(0,n.resolve)([i.textStrokeWidth,0],s,c)}},update:function(e){var t,i,a,s=this,o=null,l=null,c=s._index,d=s._config,u=(0,n.resolve)([d.display,!0],e,c);u&&(t=e.dataset.data[c],i=(0,n.valueOrDefault)((0,n.callback)(d.formatter,[t,e]),t),(a=(0,n.isNullOrUndef)(i)?[]:r(i)).length&&(l=function(e){var t=e.borderWidth||0,i=e.padding,n=e.size.height,a=e.size.width,s=-a/2,r=-n/2;return{frame:{x:s-i.left-t,y:r-i.top-t,w:a+i.width+2*t,h:n+i.height+2*t},text:{x:s,y:r,w:a,h:n}}}(o=s._modelize(u,a,d,e)))),s._model=o,s._rects=l},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var i,n=e.ctx,a=this._model,s=this._rects;this.visible()&&(n.save(),a.clip&&(i=a.area,n.beginPath(),n.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),n.clip()),n.globalAlpha=l(0,a.opacity,1),n.translate(b(t.x),b(t.y)),n.rotate(a.rotation),v(n,s.frame,a),function(e,t,i,n){var a,s=n.textAlign,r=n.color,o=!!r,l=n.font,c=t.length,d=n.textStrokeColor,u=n.textStrokeWidth,p=d&&u;if(c&&(o||p))for(i=function(e,t,i){var n=i.lineHeight,a=e.w,s=e.x;return"center"===t?s+=a/2:"end"!==t&&"right"!==t||(s+=a),{h:n,w:a,x:s,y:e.y+n/2}}(i,s,l),e.font=l.string,e.textAlign=s,e.textBaseline="middle",e.shadowBlur=n.textShadowBlur,e.shadowColor=n.textShadowColor,o&&(e.fillStyle=r),p&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=d),a=0,c=t.length;a<c;++a)_(e,t[a],{stroked:p,filled:o,w:i.w,x:i.x,y:i.y+i.h*a})}(n,a.lines,s.text,a),n.restore())}});var I=Number.MIN_SAFE_INTEGER||-9007199254740991,w=Number.MAX_SAFE_INTEGER||9007199254740991;function E(e,t,i){var n=Math.cos(i),a=Math.sin(i),s=t.x,r=t.y;return{x:s+n*(e.x-s)-a*(e.y-r),y:r+a*(e.x-s)+n*(e.y-r)}}function x(e,t){var i,n,a,s,r,o=w,l=I,c=t.origin;for(i=0;i<e.length;++i)a=(n=e[i]).x-c.x,s=n.y-c.y,r=t.vx*a+t.vy*s,o=Math.min(o,r),l=Math.max(l,r);return{min:o,max:l}}function A(e,t){var i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n);return{vx:(t.x-e.x)/a,vy:(t.y-e.y)/a,origin:e,ln:a}}var P=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function T(e,t,i){var n=t.positioner(e,t),a=n.vx,s=n.vy;if(!a&&!s)return{x:n.x,y:n.y};var r=i.w,o=i.h,l=t.rotation,c=Math.abs(r/2*Math.cos(l))+Math.abs(o/2*Math.sin(l)),d=Math.abs(r/2*Math.sin(l))+Math.abs(o/2*Math.cos(l)),u=1/Math.max(Math.abs(a),Math.abs(s));return c*=a*u,d*=s*u,c+=t.offset*a,d+=t.offset*s,{x:n.x+c,y:n.y+d}}(0,n.merge)(P.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,i){this._rotation=i,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,i=t._rect;return!((e=E(e,t.center(),-t._rotation)).x<i.x-1||e.y<i.y-1||e.x>i.x+i.w+2||e.y>i.y+i.h+2)},intersects:function(e){var t,i,n,a=this._points(),s=e._points(),r=[A(a[0],a[1]),A(a[0],a[3])];for(this._rotation!==e._rotation&&r.push(A(s[0],s[1]),A(s[0],s[3])),t=0;t<r.length;++t)if(i=x(a,r[t]),n=x(s,r[t]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,i=e._rotation,n=e.center();return[E({x:t.x,y:t.y},n,i),E({x:t.x+t.w,y:t.y},n,i),E({x:t.x+t.w,y:t.y+t.h},n,i),E({x:t.x,y:t.y+t.h},n,i)]}});var C={prepare:function(e){var t,i,n,a,s,r=[];for(t=0,n=e.length;t<n;++t)for(i=0,a=e[t].length;i<a;++i)s=e[t][i],r.push(s),s.$layout={_box:new P,_hidable:!1,_visible:!0,_set:t,_idx:i};return r.sort((function(e,t){var i=e.$layout,n=t.$layout;return i._idx===n._idx?n._set-i._set:n._idx-i._idx})),this.update(r),r},update:function(e){var t,i,n,a,s,r=!1;for(t=0,i=e.length;t<i;++t)a=(n=e[t]).model(),(s=n.$layout)._hidable=a&&"auto"===a.display,s._visible=n.visible(),r|=s._hidable;r&&function(e){var t,i,n,a,s,r,o;for(t=0,i=e.length;t<i;++t)(a=(n=e[t]).$layout)._visible&&(o=new Proxy(n._el,{get:(e,t)=>e.getProps([t],!0)[t]}),s=n.geometry(),r=T(o,n.model(),s),a._box.update(r,s,n.rotation()));(function(e,t){var i,n,a,s;for(i=e.length-1;i>=0;--i)for(a=e[i].$layout,n=i-1;n>=0&&a._visible;--n)(s=e[n].$layout)._visible&&a._box.intersects(s._box)&&t(a,s)})(e,(function(e,t){var i=e._hidable,n=t._hidable;i&&n||n?t._visible=!1:i&&(e._visible=!1)}))}(e)},lookup:function(e,t){var i,n;for(i=e.length-1;i>=0;--i)if((n=e[i].$layout)&&n._visible&&n._box.contains(t))return e[i];return null},draw:function(e,t){var i,n,a,s,r,o;for(i=0,n=t.length;i<n;++i)(s=(a=t[i]).$layout)._visible&&(r=a.geometry(),o=T(a._el,a.model(),r),s._box.update(o,r,a.rotation()),a.draw(e,o))}},D="$default";function j(e,t,i){if(t){var a,s=i.$context,r=i.$groups;t[r._set]&&(a=t[r._set][r._key])&&!0===(0,n.callback)(a,[s])&&(e.$datalabels._dirty=!0,i.update(s))}}function O(e,t){var i,n,a=e.$datalabels,s=a._listeners;if(s.enter||s.leave){if("mousemove"===t.type)n=C.lookup(a._labels,t);else if("mouseout"!==t.type)return;i=a._hovered,a._hovered=n,function(e,t,i,n){var a,s;(i||n)&&(i?n?i!==n&&(s=a=!0):s=!0:a=!0,s&&j(e,t.leave,i),a&&j(e,t.enter,n))}(e,s,i,n)}}var R={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if((0,n.isNullOrUndef)(e))return null;var t,i,a,s=e;if((0,n.isObject)(e))if((0,n.isNullOrUndef)(e.label))if((0,n.isNullOrUndef)(e.r))for(s="",a=0,i=(t=Object.keys(e)).length;a<i;++a)s+=(0!==a?", ":"")+t[a]+": "+e[t[a]];else s=e.r;else s=e.label;return""+s},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(e){e.$datalabels={_actives:[]}},beforeUpdate:function(e){var t=e.$datalabels;t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,i){var a,s,r,o,l,c,d,u,p=t.index,h=e.$datalabels,g=h._datasets[p]=[],m=e.isDatasetVisible(p),f=e.data.datasets[p],b=function(e,t){var i,a,s,r=e.datalabels,o=[];return!1===r?null:(!0===r&&(r={}),t=(0,n.merge)({},[t,r]),a=t.labels||{},s=Object.keys(a),delete t.labels,s.length?s.forEach((function(e){a[e]&&o.push((0,n.merge)({},[t,a[e],{_key:e}]))})):o.push(t),i=o.reduce((function(e,t){return(0,n.each)(t.listeners||{},(function(i,n){e[n]=e[n]||{},e[n][t._key||D]=i})),delete t.listeners,e}),{}),{labels:o,listeners:i})}(f,i),y=t.meta.data||[],v=e.ctx;for(v.save(),a=0,r=y.length;a<r;++a)if((d=y[a]).$datalabels=[],m&&d&&e.getDataVisibility(a)&&!d.skip)for(s=0,o=b.labels.length;s<o;++s)c=(l=b.labels[s])._key,(u=new S(l,v,d,a)).$groups={_set:p,_key:c||D},u.$context={active:!1,chart:e,dataIndex:a,dataset:f,datasetIndex:p},u.update(u.$context),d.$datalabels.push(u),g.push(u);v.restore(),(0,n.merge)(h._listeners,b.listeners,{merger:function(e,i,n){i[e]=i[e]||{},i[e][t.index]=n[e],h._listened=!0}})},afterUpdate:function(e,t){e.$datalabels._labels=C.prepare(e.$datalabels._datasets,t)},afterDatasetsDraw:function(e){C.draw(e,e.$datalabels._labels)},beforeEvent:function(e,t){if(e.$datalabels._listened){var i=t.event;switch(i.type){case"mousemove":case"mouseout":O(e,i);break;case"click":!function(e,t){var i=e.$datalabels,n=i._listeners.click,a=n&&C.lookup(i._labels,t);a&&j(e,n,a)}(e,i)}}},afterEvent:function(e){var t,i,n,a,s,r,o,l=e.$datalabels,d=l._actives,u=l._actives=e.getActiveElements(),p=c(d,u);for(t=0,i=p.length;t<i;++t)if((s=p[t])[1])for(n=0,a=(o=s[0].element.$datalabels||[]).length;n<a;++n)(r=o[n]).$context.active=1===s[1],r.update(r.$context);(l._dirty||p.length)&&(C.update(l._labels),e.render()),delete l._dirty}};t.default=R},"./integrations/constants/v10IntegrationConstants.ts":function(e,t,i){i.r(t),i.d(t,{DEPLOYMENTS:function(){return a},PERFORMANCE:function(){return s},TESTS:function(){return n}});const n="tests",a="deployments",s="performance"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,i){i.r(t),i.d(t,{isFormUpdated:function(){return s}});var n=i("./node_modules/lodash/lodash.js"),a=i.n(n);function s(e,t){const i=a().pick(t,a().keys(e));return!a().isEqual(e,i)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts":function(e,t,i){i.r(t);var n=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),a=i("./node_modules/lodash/lodash.js"),s=i.n(a);const r="integrations",o="/integration-instances",l="/bulk";t.default={fetchIntegrationInstanceDetails(e,t){const i=`/integration-instances/${e}`;return n.HTTPGatewayService.request({data:{service:r,method:"get",path:i,query:t}})},getConfiguredIntegrationsForAnEntity(e,t,i){const a=s().join(i,",");return n.HTTPGatewayService.request({data:{service:r,method:"get",path:"/integration-instances",query:{entityType:e,entityId:t,clientCategory:a}}})},createIntegrationInstance(e,t,i){const a=s().map(i,((e,t)=>({key:t,value:e})));return n.HTTPGatewayService.request({data:{service:r,method:"post",path:"/integration-instances",body:{class:e,name:t,inputs:a}}})},createIntegrationInstanceBulk(e){const t=o+l;return n.HTTPGatewayService.request({data:{service:r,method:"post",path:t,body:e}})},updateIntegrationInstance(e,t,i){const a=`/integration-instances/${e}`,o=s().map(i,((e,t)=>({key:t,value:e}))),l={};return s().isNil(t)||(l.name=t),s().isEmpty(o)||(l.inputs=o),n.HTTPGatewayService.request({data:{service:r,method:"put",path:a,body:l}})}}}}]);