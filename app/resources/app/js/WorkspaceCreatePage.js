"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[74,1],{"./collaboration/components/ActionRequest/NotesToManagerInput.js":function(e,t,a){a.r(t);var s=a("../../node_modules/react/index.js"),o=a("./node_modules/lodash/lodash.js"),i=a.n(o),n=a("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=a("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),l=a("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),c=a("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=a("./collaboration/workspace/constants/visibilityStatus.ts"),u=a("./collaboration/workspace/types/WorkspaceTypes.ts");t.default=({visibilityStatus:e,isCommunityManagerEnabled:t,isCommunityManager:a,isPartnerManager:o,notes:m,handleNotesChange:p,teamId:h})=>{const b=i().find(d.VISIBILITY_OPTIONS,(t=>{let a=i().get(t,"approvalVisibility");return i().isFunction(a)&&a()===e})),g=i().get(b,"approvalVisibility"),f=i().get(b,"approvalText"),y=i().get(b,"approvalPlaceholder"),S=i().get(b,"approvalValidationMessage"),E=!!t&&(i().isFunction(g)&&g()===u.VISIBILITY_STATUS.public&&!a),v=i().isFunction(g)&&g()===u.VISIBILITY_STATUS.partner&&!o;return!b||!h||!E&&!v?null:s.createElement(n.default,{direction:"column",gap:"spacing-xl"},s.createElement(r.default,{status:"info"},i().isFunction(f)&&f({isCreateWorkspace:!0})),s.createElement(l.default,{placeholder:i().isFunction(y)&&y(),value:m,onChange:e=>{p(e.target.value)},validationStatus:m.length>500?"error":"",validationMessage:i().isFunction(S)&&S(),label:s.createElement(c.default,{text:"Add note (optional)"}),maxLength:500}))}},"./collaboration/components/CreateNewWorkspace/CreateNewWorkspaceLoader.js":function(e,t,a){a.r(t);var s=a("../../node_modules/react/index.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=a("./collaboration/workspace/components/common/SkeletonUnit.tsx"),n=a("./node_modules/lodash/lodash.js");t.default=()=>s.createElement(o.default,{direction:"column",gap:"spacing-l",grow:1,justifyContent:"space-between"},s.createElement(o.default,{direction:"column",gap:"spacing-xs"},s.createElement(i.default,{height:"16px",width:"64px"}),s.createElement(i.default,{height:"32px",width:"100%"})),s.createElement(o.default,{direction:"column",gap:"spacing-xs"},s.createElement(i.default,{height:"16px",width:"64px"}),s.createElement(i.default,{height:"16px",width:"270px"}),s.createElement(i.default,{height:"64px",width:"100%"})),s.createElement(o.default,{direction:"column",gap:"spacing-xs"},s.createElement(i.default,{height:"16px",width:"64px"}),s.createElement(i.default,{height:"16px",width:"270px"}),n.times(4,(e=>s.createElement(o.default,{key:e,direction:"row",gap:"spacing-s"},s.createElement(i.default,{height:"16px",width:"16px",className:"visibility-radio-loader"}),s.createElement(o.default,{direction:"column",gap:"spacing-xs"},s.createElement(i.default,{height:"16px",width:"64px"}),s.createElement(i.default,{height:"16px",width:"164px"})))))),s.createElement(o.default,{direction:"row",gap:"spacing-l"},s.createElement(i.default,{height:"32px",width:"128px"}),s.createElement(i.default,{height:"32px",width:"80px"})))},"./collaboration/components/CreateNewWorkspace/CreateNewWorkspacePage.js":function(e,t,a){a.r(t),a.d(t,{CreateNewWorkspacePage:function(){return se}});var s,o=a("../../node_modules/react/index.js"),i=a("./node_modules/lodash/lodash.js"),n=a.n(i),r=a("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=a("../../node_modules/mobx/lib/mobx.module.js"),c=a("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),d=a("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),u=a("../../node_modules/@postman/aether/esmLib/src/components/ResponsiveContainer/ResponsiveContainer.js"),m=a("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=a("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=a("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),b=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=a("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),f=a("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),y=a("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),S=a("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),E=a("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),v=a("./js/utils/util.js"),T=a("./js/stores/GateKeeperStore.js"),I=a("./js/stores/SyncStatusStore.js"),w=a("./js/stores/TeamStore.js"),_=a("./billing/stores/PlanFeaturesStore.js"),A=a("./js/stores/StoreManager.js"),k=a("./js/stores/CurrentUserStore.js"),C=a("./js/external-navigation/ExternalNavigationService.js"),P=a("./js/components/new-button/DisabledOperationModal.js"),R=a("./js/modules/services/UserInvitationService.js"),j=a("./js/modules/services/AnalyticsService.js"),L=a("./js/components/base/XPaths/XPath.js"),N=a("./js/services/NavigationService.js"),x=a("./onboarding/navigation/constants.js"),O=a("./js/services/WorkspaceSwitchService.js"),U=a("./js/constants/CreateNewWorkspace.js"),W=a("./onboarding/src/features/TeamOnboarding/pages/CreatingTeam/index.js"),M=a("./js/components/empty-states/AetherCrashHandler.js"),D=a("./growth/foundation/public/amplitude/AmplitudeService.js"),V=a("./collaboration/components/CreateNewWorkspace/WorkspaceVisibilityRadio.js"),B=a("./collaboration/components/CreateNewWorkspace/CreateNewWorkspaceLoader.js"),F=a("./collaboration/components/ActionRequest/NotesToManagerInput.js"),Y=a("./collaboration/workspace/types/WorkspaceTypes.ts"),q=a("./collaboration/workspace/constants/visibilityStatus.ts"),$=a("./collaboration/constants/actionRequests.js"),K=a("./collaboration/workspace/utils/WorkspaceUtils.ts"),z=a("./collaboration/workspace/controller/WorkspaceControllerWithGateway.ts"),Q=a("./collaboration/workspace/controller/ActionRequestController.ts"),H=a("./js/navigation/active-mode/constants.js"),G=a("./iam/src/common/components/withPermissions.js"),J=a("./collaboration/workspace/types/PermissionTypes.ts");function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},X.apply(this,arguments)}const Z="TEAM_SETTINGS",ee="USER_SETTINGS",te={type:"secondary",text:"Cancel"},ae=({visibilityStatus:e,currentUser:t,isTeamPublic:a,isCommunityManagerEnabled:s,isCommunityManager:i})=>{const n=e===Y.VISIBILITY_STATUS.personal,r=e===Y.VISIBILITY_STATUS.public,l=t.teamId,d=e=>{switch(e){case Z:return(0,C.openExternalLink)(`${pm.dashboardUrl}/settings/team`);case ee:return(0,C.openExternalLink)(`${pm.dashboardUrl}/settings`);default:return}};return l||n||r?r&&(l?a:t.hasPublicProfile)&&(!s||i)?o.createElement(c.default,{status:"info",className:"create-workspace-info-banner"},"All data in this workspace will be made public."):r&&l&&!a?o.createElement(c.default,{status:"info",className:"create-workspace-info-banner"},"All data in this workspace and your ",o.createElement("a",{href:"#",onClick:()=>d(Z)},"team's profile")," will be made public."):!r||l||t.hasPublicProfile?null:o.createElement(c.default,{status:"info",className:"create-workspace-info-banner"},"All data in this workspace and your ",o.createElement("a",{href:"#",onClick:()=>d(ee)},"user profile")," will be made public."):o.createElement(c.default,{status:"info",className:"create-workspace-info-banner"},"A team of your own will be created since you don’t have one now.")};let se=(0,r.observer)(s=class extends o.Component{constructor(e){super(e),this.state={loading:!1,isTrialActivating:!1,workspaceId:null,users:{},userGroups:{},limitVisibility:!1,name:"",notes:"",summary:"",teamDefaultRole:{},visibilityStatus:this.props.controller.fetchWorkspaceVisibility(),rolesAndPermissionsError:!1,rolesAndPermissionsLoaded:!1,permissions:{},nameValidationError:null},this.handleClose=this.handleClose.bind(this),this.handleChange=this.handleChange.bind(this),this.handleCreate=this.handleCreate.bind(this),this.handleCancel=this.handleCancel.bind(this),this.makeTeamProfilePublic=this.makeTeamProfilePublic.bind(this),this.makeUserProfilePublic=this.makeUserProfilePublic.bind(this),this.createActionRequest=this.createActionRequest.bind(this),this.getCTAContent=this.getCTAContent.bind(this),this.fetchRolesAndPermissions=this.fetchRolesAndPermissions.bind(this)}componentDidMount(){this.userStoreReaction=(0,l.reaction)((()=>(0,A.resolveStoreInstance)(k.default).organizations),(e=>{n().isArray(e)&&this.fetchRolesAndPermissions()}),{fireImmediately:!0}),D.Ampli.createWorkspacePageViewed((0,D.getAmpliPageViewedProperties)())}componentWillUnmount(){this.userStoreReaction&&this.userStoreReaction()}async fetchRolesAndPermissions(){this.setState({rolesAndPermissionsError:!1,rolesAndPermissionsLoaded:!1});let e=[],t=(0,A.resolveStoreInstance)(k.default).teamId;e.push(this.props.controller.fetchPermissions()),t&&e.push(this.props.controller.fetchRoles());let[a,s]=await Promise.allSettled(e);n().get(s,"status"),"fulfilled"===n().get(a,"status")?this.setState({permissions:a.value,teamDefaultRole:s?s.value.teamDefaultRole:{},rolesAndPermissionsLoaded:!0,rolesAndPermissionsError:!1}):this.setState({rolesAndPermissionsLoaded:!1,rolesAndPermissionsError:!0})}handleClose(){const e={id:this.state.workspaceId,name:this.state.name};if(e.id)return O.default.switchWorkspace(e.id).catch((()=>{}));N.default.back()}handleChange(e,t){this.setState({[e]:t}),["name","visibilityStatus"].includes(e)&&this.setState({nameValidationError:null})}handleInviteFlowsError(e){this.setState({loading:!1,isTrialActivating:!1});let t=n().get(e,"activate_trial",0),a=n().get(e,"create_workspace",0),{addToast:s}=this.props;t?a||s({status:"error",description:"Something went wrong while creating the workspace"}):s({status:"error",description:"Something went wrong while activating the trial"})}getWorkspaceData(){const e=(0,A.resolveStoreInstance)(k.default),t=n().get(e,"team.id"),{visibilityStatus:a}=this.state,s=(a===Y.VISIBILITY_STATUS.team||a===Y.VISIBILITY_STATUS.public)&&t,o=t&&this.isFeatureEnabled("community_manager_role_allowed"),i=o&&n().get(this.state.permissions,"manageWorkspaceVisibilityRequests"),r=n().get(this.state.permissions,"canCreatePartnerWorkspace"),l=t&&this.isFeatureEnabled("partner_workspace_enabled"),c={name:this.state.name,summary:this.state.summary,visibilityStatus:this.state.visibilityStatus,...s?{roles:K.default.computeUpdateRolesValue({team:this.state.teamDefaultRole})}:{}};return o&&!i&&a===Y.VISIBILITY_STATUS.public&&(c.visibilityStatus=Y.VISIBILITY_STATUS.team),l&&!r&&a===Y.VISIBILITY_STATUS.partner&&(c.visibilityStatus=Y.VISIBILITY_STATUS.private),c}async activateTrialAndInviteUsers(){this.setState({isTrialActivating:!0});let e=this.getWorkspaceData(),t={workspace:{id:v.default.guid(),type:"team",...e},emails:[]};(0,W.initiateTeamCreation)((()=>new Promise(((e,a)=>{(0,R.activateTrialAndInviteUsers)(t,"createWS",((t,s)=>{if(t){let{addToast:e}=this.props;this.props.addToast({status:"error",description:n().get(t,"message","Something went wrong while creating this workspace")}),this.setState({loading:!1,isTrialActivating:!1})}let o=n().get(s,"error.state",null);return o?(this.handleInviteFlowsError(o),a()):(this.handleClose(),e(s))}))}))),{flow:W.FLOW.CREATE_TEAM_WORKSPACE,members:t.emails.length}),j.default.addEvent("app","trial_invite_users","create_ws",null,{workspaceId:e.id})}async createWorkspace(){let e=this.getWorkspaceData(),t=this.isFeatureEnabled("community_manager_role_allowed"),a=t&&n().get(this.state.permissions,"manageWorkspaceVisibilityRequests"),s=this.isFeatureEnabled("partner_workspace_enabled"),o=n().get(this.state.permissions,"canCreatePartnerWorkspace"),i=n().get(this.props.controller,"additionalContext",{}),{addToast:r}=this.props,{intentCompletionAnalyticsInfo:l}=i;this.state.limitVisibility&&this.isLimitingVisibilityEnabled()&&j.default.addEvent("app","limiting_visibility_enabled","create_ws",null,{workspaceId:e.id});try{let i=await z.default.createWithGateway(e);if(this.setState({workspaceId:n().get(i,"data.id")}),this.state.visibilityStatus===Y.VISIBILITY_STATUS.public&&t&&!a)try{await this.createActionRequest({workspaceId:n().get(i,"data.id"),notes:this.state.notes,visibilityStatus:Y.VISIBILITY_STATUS.team,transitionVisibilityStatus:this.state.visibilityStatus});const e=n().get(q.VISIBILITY_OPTIONS[Y.VISIBILITY_STATUS.team],"requestCreatedToast");r({status:"success",title:"Request sent",description:n().isFunction(e)&&e({transitionVisibilityStatus:this.state.visibilityStatus})})}catch(e){r({status:"error",description:n().get($.ACTION_REQUEST_ERROR_STATES,n().get(e,"name"),"Something went wrong while sending a request to your manager")})}if(this.state.visibilityStatus===Y.VISIBILITY_STATUS.partner&&s&&!o)try{await this.createActionRequest({workspaceId:n().get(i,"data.id"),notes:this.state.notes,visibilityStatus:Y.VISIBILITY_STATUS.private,transitionVisibilityStatus:this.state.visibilityStatus});const e=n().get(q.VISIBILITY_OPTIONS[Y.VISIBILITY_STATUS.private],"requestCreatedToast");r({status:"success",title:"Request sent",description:n().isFunction(e)&&e({transitionVisibilityStatus:this.state.visibilityStatus})})}catch(e){pm.logger.error("Error in creating action request",e),r({status:"error",description:n().get($.ACTION_REQUEST_ERROR_STATES,n().get(e,"name"),"Something went wrong while sending a request to your manager")})}return l&&j.default.addEventV2AndPublish({category:"explore",action:"create-workspace-success",label:l,entityType:"workspace",entityId:n().get(i,"data.id")}),this.handleClose()}catch(t){if(this.setState({loading:!1}),pm.logger.error("Error while creating workspace",t),t.error&&t.error.name===U.WORKSPACE_SLUG_ALREADY_PRESENT){const{getErrorDescription:a}=U.CREATE_NEW_WORKSPACE_ERROR_MAP[n().get(t,"error.name","default")]||U.CREATE_NEW_WORKSPACE_ERROR_MAP.default,s=a(n().get(t,"error.instance",e.name));return void this.setState({nameValidationError:s})}r({status:"error",description:n().isEmpty(n().get(t,"error.detail"))?U.CREATE_NEW_WORKSPACE_ERROR_MAP.default.getErrorDescription():n().get(t,"error.detail")})}}async createActionRequest({workspaceId:e,notes:t,visibilityStatus:a,transitionVisibilityStatus:s}){try{const o=n().get(q.VISIBILITY_OPTIONS[a],"approvalAction"),i=n().isFunction(o)&&o({transitionVisibilityStatus:s});await Q.default.createRequest(t,i,e)}catch({error:e}){throw pm.logger.error(e),e}}async makeTeamProfilePublic(){return new Promise(((e,t)=>{pm.mediator.trigger("showUpdateTeamProfileModal",{description:"Before your team’s profile can be made public, update your team domain and make sure it's eligible for public visibility. Your team domain helps identify your team on Postman.",confirmCTAText:"Continue",disablePageRefresh:!0,onComplete:e,onCancel:t})}))}async makeUserProfilePublic(){return new Promise(((e,t)=>{pm.mediator.trigger("showUpdateUserProfileModal",{onComplete:e,onCancel:t})}))}async handleCreate(){if(this.isWorkspaceCreationDisabled())return;D.Ampli.createWorkspaceCreateClicked({...(0,D.getAmpliCTAProperties)({type:"primary",text:this.getCTAContent()}),workspace_type:this.state.visibilityStatus}),this.setState({loading:!0});let e=null,t=(0,A.resolveStoreInstance)(w.default),a=(0,A.resolveStoreInstance)(k.default),s=this.isFeatureEnabled("community_manager_role_allowed")&&n().get(this.state.permissions,"manageWorkspaceVisibilityRequests");if("team"===this.state.visibilityStatus&&v.default.isFreeUser(a))return this.activateTrialAndInviteUsers();if("team"===this.state.visibilityStatus&&(e=n().get(a,"organizations[0].id",null)),this.state.visibilityStatus===Y.VISIBILITY_STATUS.public)try{e=n().get(a,"teamId",null),e&&!t.hasPublicProfile&&(a.isFreeTeamUser||s)?await this.makeTeamProfilePublic():e||a.hasPublicProfile||await this.makeUserProfilePublic()}catch(e){return void this.setState({loading:!1})}this.createWorkspace()}handleCancel(){this.setState({loading:!1,isTrialActivating:!1}),N.default.transitionTo(x.OPEN_WORKSPACES_HOME_IDENTIFIER)}isLimitingVisibilityEnabled(){return!!(0,A.resolveStoreInstance)(k.default).team&&this.isFeatureEnabled("private_team_workspaces_enabled")}isFeatureEnabled(e){return n().get(_.default,["plan","features",e,"value"],!1)}isWorkspaceCreationDisabled(){const e=!(0,A.resolveStoreInstance)(k.default).team||n().get(this.state.permissions,"canCreateTeamWorkspace")||n().get(this.state.permissions,"canCreatePersonalWorkspace");return n().isEmpty(n().trim(this.state.name))||n().isEmpty(this.state.visibilityStatus)||this.state.loading||!(0,A.resolveStoreInstance)(I.default).isSocketConnected||this.state.rolesAndPermissionsError||this.state.summary.length>140||this.state.notes.length>500||!e||!n().isNull(this.state.nameValidationError)}getDisabledTooltip(){return!(0,A.resolveStoreInstance)(k.default).team||n().get(this.state.permissions,"canCreateTeamWorkspace")||n().get(this.state.permissions,"canCreatePersonalWorkspace")?null:"You don't have the permission to create workspaces"}getCTAContent(){return"team"!==this.state.visibilityStatus||(0,A.resolveStoreInstance)(k.default).teamId?"Create Workspace":"Create Workspace and Team"}render(){const e=(0,A.resolveStoreInstance)(k.default),t=(0,A.resolveStoreInstance)(w.default),a=e.isLoggedIn,s=(0,A.resolveStoreInstance)(T.default).isSyncEnabled,i=this.isWorkspaceCreationDisabled(),r=this.isFeatureEnabled("community_manager_role_allowed"),l=n().get(this.state.permissions,"manageWorkspaceVisibilityRequests"),c=n().get(this.state.permissions,"canCreatePartnerWorkspace"),{name:d,summary:E,notes:v,visibilityStatus:I,rolesAndPermissionsLoaded:_,rolesAndPermissionsError:C,nameValidationError:R}=this.state;return o.createElement(M.default,null,o.createElement(L.default,{isVisible:!0,identifier:"createNewWorkspaceModal"},o.createElement("div",{className:"create-ws-outer-container"},o.createElement("div",{className:"create-ws-container"},o.createElement(u.default,{type:"column",gap:"spacing-zero",span:6,overflow:"visible",padding:{paddingTop:"spacing-xxl",paddingBottom:"spacing-xxl"}},o.createElement(m.default,{direction:"column",gap:"spacing-xl"},a&&o.createElement(p.default,{type:"h1",text:"Create workspace",color:"content-color-primary",hasBottomSpacing:!0}),(!a||!s)&&!e.isHydrating&&o.createElement(P.default,{isLoggedIn:a,isSyncEnabled:s,entity:"workspace"}),!_&&!C&&a&&o.createElement(B.default,null),C&&o.createElement(h.default,{title:"Couldn’t load this page",description:"Just a faulty wire. Try reloading.",primaryAction:o.createElement(b.default,{type:"outline",size:"medium",text:"Reload",onClick:this.fetchRolesAndPermissions}),className:"create-new-workspace-modal__error-state"},o.createElement(g.default,null)),_&&!C&&a&&s&&o.createElement(m.default,{direction:"column",gap:"spacing-xl"},o.createElement(m.default,{direction:"column",gap:"spacing-l"},o.createElement(f.default,{autoFocus:!0,value:d,onChange:e=>this.handleChange("name",e.target.value),label:o.createElement(y.default,{text:"Name"}),id:"name","data-testid":"create-workspace-name-input",validationStatus:R?"error":null,validationMessage:R}),o.createElement(S.default,{value:E,rows:2,isResizable:!1,onChange:e=>this.handleChange("summary",e.target.value),label:o.createElement(y.default,{text:"Summary"}),helperText:"Add a brief summary about this workspace.",id:"summary",validationStatus:E.length>140?"error":"",validationMessage:"Summary can’t exceed 140 characters.","data-testid":"create-workspace-summary-input"}),o.createElement(V.default,{visibilityStatus:I,handleChange:this.handleChange}),o.createElement(ae,{visibilityStatus:I,currentUser:e,isTeamPublic:t.hasPublicProfile,isCommunityManagerEnabled:r,isCommunityManager:l}),o.createElement(F.default,{visibilityStatus:I,isCommunityManagerEnabled:r,isCommunityManager:l,isPartnerManager:c,notes:v,handleNotesChange:e=>{this.handleChange("notes",e)},teamId:e.teamId}),o.createElement(m.default,{gap:"spacing-l"},o.createElement(b.default,{className:"create-workspace-button",type:"primary",size:"medium",text:this.getCTAContent(),onClick:this.handleCreate,isLoading:this.state.loading,isDisabled:i,tooltip:this.getDisabledTooltip(),"data-testid":"create-workspace-button-cta"}),o.createElement(b.default,X({className:"cancel-create-workspace-button","data-testid":"cancel-create-workspace-cta",size:"medium",onClick:()=>{this.handleClose(),D.Ampli.createWorkspaceCancelClicked((0,D.getAmpliCTAProperties)(te))}},te)))))))))))}})||s;t.default=(0,E.default)((e=>o.createElement(r.Observer,null,(()=>{const t=n().get((0,A.resolveStoreInstance)(k.default),"teamId");let a=n().get((0,A.resolveStoreInstance)(k.default),"isCurrentUserPartner"),s={IllustrationComponent:d.default,forbiddenMessage:a?"As a partner you don't have permission to view this page.":"You don't have permission to view this page.",primaryAction:{text:a?"View Partner Workspaces":"View Workspaces",action:()=>{N.default.transitionTo(x.OPEN_WORKSPACES_HOME_IDENTIFIER)}},secondaryAction:{text:"Go To Home",action:()=>{N.default.transitionTo(H.HOME)}}};const i=(0,G.default)({permission:J.TEAM_PERMISSIONS.CREATE_PERSONAL_WORKSPACE,objectType:"team",objectId:t},s,{canView:!0,showSpinner:!1})(se);return o.createElement(i,e)}))))},"./collaboration/components/CreateNewWorkspace/WorkspaceVisibilityRadio.js":function(e,t,a){a.r(t);var s=a("../../node_modules/react/index.js"),o=a("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=a("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=a("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),l=a("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),c=a("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=a("../../node_modules/@postman/aether/esmLib/src/components/Tag/Tag.js"),u=a("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),m=a("./js/stores/StoreManager.js"),p=a("./billing/stores/PlanFeaturesStore.js"),h=a("./js/stores/CurrentUserInfoStore.js"),b=a("./js/stores/FeatureFlagsStore.js"),g=a("./iam/constants.js"),f=a("./collaboration/workspace/constants/visibilityStatus.ts"),y=a("./collaboration/workspace/types/WorkspaceTypes.ts"),S=a("./node_modules/lodash/lodash.js");const E=i.default.span`
  margin-left: var(--spacing-s);
`;t.default=e=>{const t=s.useRef(),a=s.useRef(),i=s.useRef(),v=s.useRef(),T=s.useRef(),I=e=>{let t=(0,m.resolveStoreInstance)(h.default),a=t.teamId,s=e=>S.get(p.default,["plan","features",e,"value"],!1),o=S.get(t,"organizations[0].account.plan.name","")===g.PLANS.ENTERPRISE_PLAN_NAME,i=s("partner_workspace_enabled"),n=s("private_team_workspaces_enabled"),r=!1,l="";return(0,m.resolveStoreInstance)(b.default).get("workspace:publicWorkspaceCreationEnabled")||e.value!==y.VISIBILITY_STATUS.public?a&&n||e.value!==y.VISIBILITY_STATUS.private?a&&i||e.value!==y.VISIBILITY_STATUS.partner||(r=!0,o?i||(l="Contact your team admin for details on enabling partner workspaces."):l=`Upgrade your plan to ${g.PLANS.ENTERPRISE_PLAN_NAME} to create partner workspaces.`):(r=!0,l=`Upgrade your plan to ${g.PLANS.PROFESSIONAL_PLAN_NAME} or ${g.PLANS.ENTERPRISE_PLAN_NAME} to create private workspaces.`):r=!0,{disabled:r,disabledText:l}},w=e=>{switch(e){case y.VISIBILITY_STATUS.personal:return t;case y.VISIBILITY_STATUS.private:return a;case y.VISIBILITY_STATUS.team:return i;case y.VISIBILITY_STATUS.partner:return v;case y.VISIBILITY_STATUS.public:return T}},_=()=>s.createElement(n.default,null,s.createElement(r.default,{name:"workspace-visibility",label:"Visibility",helperText:"Determines who can access this workspace.",value:e.visibilityStatus,onChange:t=>e.handleChange("visibilityStatus",t),direction:"column","data-testid":"create-workspace-visibility-input"},f.VISIBILITY_DROPDOWN_OPTIONS.map((e=>s.createElement(l.default,{id:e.value,key:e.value,value:e.value,label:s.createElement(c.default,null,e.label,e.value===y.VISIBILITY_STATUS.partner?s.createElement(E,null,s.createElement(d.default,{text:"new",color:"purple"})):null),helperText:f.VISIBILITY_OPTIONS[e.value].helpText,isDisabled:I(e).disabled,ref:w(e.value)})))),f.VISIBILITY_DROPDOWN_OPTIONS.map((e=>{if(I(e).disabled)return s.createElement(u.default,{key:e.value,content:I(e).disabledText,placement:"left",triggerRef:w(e.value)})})));return s.createElement(o.Observer,null,_)}},"./collaboration/constants/actionRequests.js":function(e,t,a){a.r(t),a.d(t,{ACTION_REQUEST_ACTIONS:function(){return i},ACTION_REQUEST_ERROR_STATES:function(){return o},ACTION_REQUEST_IDENTIFIER_TYPES:function(){return s},ACTION_REQUEST_STATES:function(){return n}});const s={APPROVER:"approver",REQUESTER:"requester"},o={notTeamWorkspace:"The workspace may be deleted or made private.",requestAlreadyExists:"Someone from your team has already raised a request to change visibility of this workspace.",approvedAccessRequest:"Looks like you or a different Community Manager already responded to this request.",expiredAccessRequest:"Looks like you or a different Community Manager already responded to this request.",failedAccessRequest:"Looks like you or a different Community Manager already responded to this request.",requestNotPending:"Looks like you or a different Community Manager already responded to this request.",workspaceSlugNotUnique:"The workspace name must be unique. Contact workspace admin to set a different workspace name."},i={MAKE_WORKSPACE_PUBLIC:"make_workspace_public",MAKE_WORKSPACE_PARTNER:"make_workspace_partner"},n={APPROVED:"approved",EXPIRED:"expired",PENDING_APPROVAL:"pending_approval",REJECTED:"rejected"}},"./iam/src/common/components/CenteredLoader.js":function(e,t,a){a.r(t);var s=a("../../node_modules/react/index.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/ResponsiveContainer/ResponsiveContainer.js"),i=a("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");t.default=({minHeight:e,size:t="small"})=>s.createElement(o.default,{type:"row"},s.createElement(o.default,{type:"column",span:12,minHeight:e||"100vh"},s.createElement(i.default,{width:"100%",justifyContent:"center",alignItems:"center",padding:"spacing-xxl"},s.createElement(n.default,{size:t}))))},"./iam/src/common/components/withPermissions.js":function(e,t,a){a.r(t);var s=a("../../node_modules/react/index.js"),o=a("./iam/src/common/components/CenteredLoader.js"),i=a("./iam/src/common/api/IAMservice.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),r=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=a("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoEnvironment.js"),c=a("./node_modules/lodash/lodash.js");t.default=(e,t,a)=>d=>u=>{const[m,p]=(0,s.useState)(c.get(a,"showSpinner",!0)),[h,b]=(0,s.useState)(c.get(a,"canView",!1));if((0,s.useEffect)((()=>{e&&e.objectId?(0,i.checkPermissionForUser)({canView:{permission:e.permission,objectType:e.objectType,objectId:e.objectId}}).then((e=>{b(c.get(e,"canView.allowed",!1))})).finally((()=>{p(!1)})):(b(!0),p(!1))}),[]),m)return s.createElement(o.default,null);if(!h){const e=null==t?void 0:t.IllustrationComponent;return s.createElement(n.default,{title:"You don't have access",description:t.forbiddenMessage,primaryAction:!c.isEmpty(t.primaryAction)&&s.createElement(r.default,{type:"primary",text:t.primaryAction.text,onClick:t.primaryAction.action}),secondaryAction:!c.isEmpty(t.secondaryAction)&&s.createElement(r.default,{type:"outline",text:t.secondaryAction.text,onClick:t.secondaryAction.action})},e?s.createElement(e,null):s.createElement(l.default,null))}return s.createElement(d,u)}},"./js/components/new-button/DisabledOperationModal.js":function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=a("../../node_modules/react/index.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),i=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/SignIn.js"),r=a("./js/modules/services/AuthHandlerService.js"),l=a("./js/external-navigation/ExternalNavigationService.js"),c=a("./js/constants/AppUrlConstants.js"),d=a("./onboarding/src/common/UTMService.js");const u={workspace:{title:"Sign in to create a workspace",description:"You need to be signed in to be able to create workspaces. A Postman account also gives you access to other free services like Syncing, Mock servers, Public API Documentation & Monitoring."},lesson:{title:"Sign in to create a lesson",description:"Create a new lesson to start collaborating on your projects."},documentation:{title:"Sign in to create a documentation",description:"You need to be signed in to be able to document your APIs. A Postman account also gives you access to other free services like Syncing, Mock servers & Monitoring."},mock:{title:"Sign in to create a mock server",description:"You need to be signed in to be able to create a mock server. A Postman account also gives you access to other free services like Syncing, Monitors & Public API Documentation."},monitor:{title:"Sign in to create a monitor",description:"You need to be signed in to be able to monitor your APIs. A Postman account also gives you access to other free services like Syncing, Mock servers & Public API Documentation."}};class m extends s.Component{constructor(e){super(e),this.handleEnableSync=this.handleEnableSync.bind(this),this.handleSignIn=this.handleSignIn.bind(this),this.handleSignUp=this.handleSignUp.bind(this)}handleEnableSync(){(0,l.openExternalLink)(c.ENABLE_SYNC_DOCS_URL)}handleSignIn(){r.default.initiateLogin()}handleSignUp(){const e=(0,d.getAllParams)({utm_content:`disabled_operation_${this.props.entity||"entity"}`,utm_term:"sign_up"});r.default.initiateLogin({isSignup:!0,queryParams:e})}render(){let e=this.props.isLoggedIn,t=this.props.isSyncEnabled;return e?t?void 0:s.createElement("div",{className:"disabled-operation-modal"},s.createElement("div",{className:"disabled-operation-modal__icon"},s.createElement("div",{className:"disabled-operation-modal__icon__icon"})),s.createElement("div",{className:"disabled-operation-modal__title"},"monitor"===this.props.entity&&"Enable Sync to create a monitor.","mock"===this.props.entity&&"Enable Sync to create a mock server.","documentation"===this.props.entity&&"Enable Sync to create documentation.","template"===this.props.entity&&"Enable Sync to use this template.","workspace"===this.props.entity&&"Enable Sync to create a workspace."),s.createElement("div",{className:"disabled-operation-modal__subtitle"},"monitor"===this.props.entity&&"You need to have Sync enabled in order to create a monitor. This allows the monitor to have access to your collection.","mock"===this.props.entity&&"You need to have Sync enabled in order to create a mock server. This allows the mock server to have access to your collection.","documentation"===this.props.entity&&"You need to have Sync enabled in order to create documentation. This allows the documentation to have access to your collection.","template"===this.props.entity&&"You need to have Sync enabled in order to use this template. This allows the template to have access to your collection.","workspace"===this.props.entity&&"You need to have Sync enabled in order to create a workspace."),s.createElement("div",{className:"disabled-operation-modal__actions"},s.createElement(i.default,{type:"primary",onClick:this.handleEnableSync},"Enable Sync"))):s.createElement(o.default,{title:u[this.props.entity].title,description:u[this.props.entity].description,primaryAction:s.createElement(i.default,{type:"primary",onClick:this.handleSignUp,text:"Create Free Account"}),secondaryAction:s.createElement(i.default,{type:"outline",onClick:this.handleSignIn,text:"Sign In"})},s.createElement(n.default,null))}}},"./js/constants/CreateNewWorkspace.js":function(e,t,a){a.r(t),a.d(t,{CREATE_NEW_WORKSPACE_ERROR_MAP:function(){return n},WORKSPACE_SLUG_ALREADY_PRESENT:function(){return i}});var s=a("../../node_modules/react/index.js"),o=a("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");const i="workspaceSlugNotUniqueError",n={[i]:{getErrorDescription:(e="")=>s.createElement(o.default,{typographyStyle:{lineHeight:"line-height-s"}},"The public workspace ",s.createElement("b",null,e)," already exists.")},default:{getErrorDescription:()=>s.createElement(o.default,null,"Unable to create the workspace")}}},"./onboarding/src/features/FeatureOverview/TeamFeatureOverviewHelper.js":function(e,t,a){a.r(t),a.d(t,{teamFeatureOverviewHelper:function(){return c}});var s,o,i,n=a("../../node_modules/mobx/lib/mobx.module.js"),r=a("./js/services/CurrentUserDetailsService.js");function l(e,t,a,s,o){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=a.slice().reverse().reduce((function(a,s){return s(e,t,a)||a}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const c=new(s=n.action.bound,i=l((o=class{constructor(){var e,t,a,s;e=this,t="isTeamFeatureOverviewModalOpen",s=this,(a=i)&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0})}update(e,t){this[e]=t}get isTeamCreated(){const e=r.default.teamId;return e&&"0"!==e}}).prototype,"isTeamFeatureOverviewModalOpen",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l(o.prototype,"update",[s],Object.getOwnPropertyDescriptor(o.prototype,"update"),o.prototype),l(o.prototype,"isTeamCreated",[n.computed],Object.getOwnPropertyDescriptor(o.prototype,"isTeamCreated"),o.prototype),o)},"./onboarding/src/features/TeamOnboarding/pages/CreatingTeam/index.js":function(e,t,a){a.r(t),a.d(t,{CreatingTeamModal:function(){return O},FLOW:function(){return C},createTeam:function(){return v.createTeam},initiateTeamCreation:function(){return v.initiateTeamCreation}});var s,o=a("../../node_modules/react/index.js"),i=a("../../node_modules/mobx-react/dist/mobx-react.module.js"),n=a("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=a("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=a("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=a("./js/components/base/Markdown.js"),d=a("./js/components/base/Modals.js"),u=a("./js/modules/services/AnalyticsService.js"),m=a("./js/utils/PluralizeHelper.js"),p=a("./js/stores/StoreManager.js"),h=a("./js/stores/CurrentUserStore.js"),b=a("./js/electron/ElectronService.js"),g=a("./js/services/NavigationService.js"),f=a("./js/external-navigation/ExternalNavigationService.js"),y=a("./js/services/UIEventService.js"),S=a("./onboarding/navigation/constants.js"),E=a("./onboarding/src/common/ExternalLinkService.js"),v=a("./onboarding/public/TeamCreation.js"),T=a("./onboarding/src/features/FeatureOverview/TeamFeatureOverviewHelper.js"),I=a("./growth/foundation/public/amplitude/AmplitudeService.js"),w=a("./onboarding/src/common/LaunchDarkly.js"),_=a("./js/services/CurrentUserDetailsService.js"),A=a("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),k=a("./node_modules/lodash/lodash.js");const C={TEAM_CREATION:"teamCreation",INVITE_MEMBERS:"inviteMember",CREATE_TEAM_WORKSPACE:"createTeamWorkspace",ADD_NEW_TEAM:"addNewTeam"},P={isOpen:!1,teamDomain:"",flow:C.TEAM_CREATION,member:0,teamWorkspaceData:{wid:"",collectionCount:0},isSetupTeamButtonLoading:!1},R="Customize your team’s profile to make it easy for your future team members to find.",j="Set Up Team",L=(0,A.default)(n.default)`
  width: fit-content !important;
`;function N(e){u.default.addEventV2AndPublish({category:"team_create_source",action:"create",label:{teamCreation:"homepage",inviteMember:"invite_member",createTeamWorkspace:"new_team_workspace"}[e]})}const x=k.once((()=>{I.Ampli.createTeamSuccessPageViewed((0,I.getAmpliPageViewedProperties)())}));let O=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.state={isOpen:!1,flow:C.TEAM_CREATION,members:0,isLoading:!1,teamWorkspaceData:{wid:"",collectionCount:0},teamDomain:"",isSetupTeamButtonLoading:!1},this.handleToggle=this.handleToggle.bind(this),this.handleEditTeamProfile=this.handleEditTeamProfile.bind(this),this.handleSetUpTeamProfile=this.handleSetUpTeamProfile.bind(this),this.handleUpgradePlan=this.handleUpgradePlan.bind(this),this.handleMaybeLater=this.handleMaybeLater.bind(this),this.handleWorkspaceSwitch=this.handleWorkspaceSwitch.bind(this),this.resetIntailState=this.resetIntailState.bind(this)}componentDidMount(){this.unsubscribeHandler=y.default.subscribe(S.CREATING_TEAM_LOADER,this.handleToggle)}componentWillUnmount(){this.unsubscribeHandler&&this.unsubscribeHandler()}componentDidUpdate(){(0,p.resolveStoreInstance)(h.default).teamId&&this.state.teamWorkspaceData.wid&&x()}handleToggle({isOpen:e=!0,flow:t=C.TEAM_CREATION,members:a=0,teamWorkspaceData:s={},teamDomain:o=""}){if(!k.isEmpty(s))return this.setState({teamWorkspaceData:s,teamDomain:o});this.setState({isOpen:e,flow:t,members:a,teamDomain:o})}resetIntailState(){this.setState(P)}async handleWorkspaceSwitch(){if("browser"===window.SDK_PLATFORM)return(0,b.openURL)(`${pm.artemisUrl}/workspace/${this.state.teamWorkspaceData.wid}/overview?isNewTeam=${0===this.state.teamWorkspaceData.collectionCount?1:0}${T.teamFeatureOverviewHelper.isTeamCreated?"&feature_overview=show":""}`);g.default.transitionTo("build.overview",{wid:this.state.teamWorkspaceData.wid},k.assign({},{isNewTeam:0===this.state.teamWorkspaceData.collectionCount?1:0},T.teamFeatureOverviewHelper.isTeamCreated&&{feature_overview:"show"})),this.resetIntailState()}handleMaybeLater(){if("browser"===window.SDK_PLATFORM)return(0,b.openURL)(`${pm.artemisUrl}/home`);this.resetIntailState()}handleUpgradePlan(){return"browser"!==window.SDK_PLATFORM&&this.resetIntailState(),(0,E.openUpgradePlanPage)({source:"app",label:"team_creation_page"})}handleEditTeamProfile(){if(this.setState({isSetupTeamButtonLoading:!0}),N(this.state.flow),"browser"===window.SDK_PLATFORM){let e=`${pm.artemisUrl}/onboarding/team`,t=[];return this.state.members&&t.push("invited=user"),this.state.teamWorkspaceData.wid&&(t.push(`wid=${this.state.teamWorkspaceData.wid}`),t.push("isNewTeam="+(0===this.state.teamWorkspaceData.collectionCount?1:0))),t.length>0&&(e+=`?${t.join("&")}`),void(0,b.openURL)(e)}g.default.transitionTo(S.TEAM_ONBOARDING_IDENTIFIER,null,k.assign({},this.state.members&&{invited:"user"},this.state.teamWorkspaceData.wid&&{wid:this.state.teamWorkspaceData.wid,isNewTeam:0===this.state.teamWorkspaceData.collectionCount?1:0})),this.resetIntailState()}handleSetUpTeamProfile(){this.setState({isSetupTeamButtonLoading:!0}),N(this.state.flow);let e=`${pm.artemisUrl}/onboarding/team`,t=`${pm.identityUrl}/teams/${this.state.teamDomain}?newteam=true&continue=${e}`;return"desktop"===window.SDK_PLATFORM&&(g.default.transitionTo(S.HOME_IDENTIFIER,null,{}),this.resetIntailState()),(0,f.openExternalLink)(t)}render(){let e=(0,p.resolveStoreInstance)(h.default),t=this.state.members,a=k.get(e.team,"account.user_addition.limit"),s=(k.get(e,"team.name","Home"),t-a),i=s>0,u="ENABLED"===w.launchDarkly.getFlag("iam_2684_multi_teams","DISABLED"),b=k.get(_.default.fetchUserFlags(),"flags.multi_team.enabled",!1)&&u,g=m.default.pluralize({count:s,singular:"person",plural:"people"}),f=m.default.pluralize({count:this.state.members,singular:"person",plural:"people"}),y=m.default.pluralize({count:this.state.members,singular:"user",plural:"users"}),S=m.default.pluralize({count:this.state.members,singular:"member",plural:"members"}),E=m.default.pluralize({count:this.state.members,singular:"invite",plural:"invites"});if(e.teamId&&this.state.teamWorkspaceData.wid){let e={teamCreation:{title:"Bravo! You’ve created a team",subtitle:b?"Your existing personal workspaces will be moved to this team. You can invite team members once you are ready to collaborate.":R,primaryActionText:b?j:"Edit Team Profile",primaryAction:this.handleEditTeamProfile},addNewTeam:{title:"Bravo! You’ve created your team",subtitle:R,primaryActionText:j,primaryAction:this.handleSetUpTeamProfile},inviteMember:{title:`Invited ${this.state.members} ${f} to your team`,subtitle:i?`You’ve invited ${s} ${g} beyond your team’s capacity.\n            Upgrade your plan to let them join and collaborate in this workspace.`:R,primaryActionText:i?"Upgrade Plan":"Edit Team profile",primaryAction:i?this.handleUpgradePlan:this.handleEditTeamProfile,secondaryActionText:"Go to Workspace",secondaryAction:this.handleWorkspaceSwitch},createTeamWorkspace:{title:"Team workspace created",subtitle:i?`You’ve invited ${s} ${g} beyond your team’s capacity.\n            Upgrade your plan to let them join and collaborate in this workspace.`:R,primaryActionText:i?"Upgrade Plan":"Edit Team profile",primaryAction:i?this.handleUpgradePlan:this.handleEditTeamProfile,secondaryActionText:"Go to Workspace",secondaryAction:this.handleWorkspaceSwitch}};return o.createElement(d.Modal,{isOpen:this.state.isOpen,fullscreen:!0,customStyles:{background:"var(--background-color-primary)"}},o.createElement("div",{className:"creating-team"},o.createElement("div",{className:"creating-team-icon"},o.createElement(l.default,{name:"icon-state-success-stroke",color:"content-color-success"})),o.createElement("h4",{className:"creating-team-title"},e[this.state.flow].title),o.createElement(c.default,{className:"creating-team-subtext",source:e[this.state.flow].subtitle}),o.createElement(L,{type:"primary",size:"medium",className:"creating-team-action",isDisabled:this.state.isSetupTeamButtonLoading,isLoading:this.state.isSetupTeamButtonLoading,text:e[this.state.flow].primaryActionText,onClick:e[this.state.flow].primaryAction}),e[this.state.flow].secondaryAction&&o.createElement(n.default,{type:"outline",size:"medium",className:"creating-team-action-outline",isDisabled:this.state.isLoading,text:e[this.state.flow].secondaryActionText,onClick:e[this.state.flow].secondaryAction})))}let v={teamCreation:{title:"Setting up your team"},addNewTeam:{title:"Setting up your team"},inviteMember:{title:`Inviting ${this.state.members} ${y} to your team`,subtitle:`Hang on while we send out ${E} to your future team ${S}.`},createTeamWorkspace:{title:"Creating your team workspace",subtitle:"Hang on while we set up your team and invite people."}};return o.createElement(d.Modal,{isOpen:this.state.isOpen,fullscreen:!0,customStyles:{background:"var(--background-color-primary)"}},o.createElement("div",{className:"creating-team"},o.createElement(r.default,null),o.createElement("h4",{className:"creating-team-title"},v[this.state.flow].title),o.createElement("div",{className:"creating-team-subtitle"},v[this.state.flow].subtitle),o.createElement("div",{className:"creating-team-info"},"Please don’t close or refresh this tab.")))}})||s},"./collaboration/workspace/controller/ActionRequestController.ts":function(e,t,a){a.r(t);var s=a("./node_modules/lodash/lodash.js"),o=a.n(s),i=a("./collaboration/workspace/service/ActionRequestService.ts"),n=a("./js/stores/StoreManager.js"),r=a("./collaboration/workspace/model/ActionRequestStore.ts"),l=a("./collaboration/workspace/controller/ActiveWorkspaceController.ts"),c=a("./collaboration/workspace/types/WorkspaceTypes.ts"),d=a("./collaboration/workspace/types/ActionRequestTypes.ts"),u=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,r)}l((s=s.apply(e,t||[])).next())}))};t.default=new class{populatePendingRequest(e,t){return u(this,void 0,void 0,(function*(){const a=this.get(),s=l.default.get().id,n=o().get(a,"context.action");if(s===a.workspaceId&&n===t&&a.lifecycle===d.ACTION_REQUEST_LIFECYCLE.loaded)return a;try{const o=yield i.default.find(e,t,s),n=o.length?o[0]:null;return a.updatePendingRequest(s,n),o.length?a.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loaded):a.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.empty),a}catch(e){throw a.clear(),a.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.error),e}}))}createRequest(e,t,a){return u(this,void 0,void 0,(function*(){const s=this.get(),o=a||l.default.get().id;s.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loading);try{let a={model:c.MODEL.workspace,modelId:o,context:{action:t},notes:e},n=yield i.default.create(a);return s.updatePendingRequest(o,n),s.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loaded),s}catch(e){throw s.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.error),e}}))}approveRequest(e){return u(this,void 0,void 0,(function*(){const t=this.get();t.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loading);try{yield i.default.approve(e),t.clear(),t.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loaded)}catch(e){throw t.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.error),e}}))}rejectRequest(e){return u(this,void 0,void 0,(function*(){const t=this.get();t.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loading);try{yield i.default.reject(e),t.clear(),t.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.loaded)}catch(e){throw t.setLifecycle(d.ACTION_REQUEST_LIFECYCLE.error),e}}))}get(){return(0,n.resolveStoreInstance)(r.default)}destroy(){this.get().clear()}}},"./collaboration/workspace/controller/CreateNewWorkspacePageController.ts":function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=a("./appsdk/pages/BasePageController.js"),o=a("./js/stores/StoreManager.js"),i=a("./collaboration/workspace/model/WorkspaceDefaultRolesStore.ts"),n=a("./collaboration/workspace/controller/WorkspaceRoleController.ts"),r=a("./collaboration/workspace/types/PermissionTypes.ts"),l=a("./collaboration/workspace/controller/TeamWorkspacePermissionController.ts"),c=a("./collaboration/workspace/types/WorkspaceTypes.ts"),d=a("./js/services/NavigationService.js"),u=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,r)}l((s=s.apply(e,t||[])).next())}))};class m extends s.default{constructor(){super(...arguments),this.fetchPermissions=()=>u(this,void 0,void 0,(function*(){let{MANAGE_WORKSPACE_PUBLIC_VISIBILITY_REQUESTS:e,CREATE_PARTNER_WORKSPACE:t,CREATE_TEAM_WORKSPACE:a,CREATE_PERSONAL_WORKSPACE:s}=yield l.default.can([r.TEAM_PERMISSIONS.MANAGE_WORKSPACE_PUBLIC_VISIBILITY_REQUESTS,r.TEAM_PERMISSIONS.CREATE_PARTNER_WORKSPACE,r.TEAM_PERMISSIONS.CREATE_TEAM_WORKSPACE,r.TEAM_PERMISSIONS.CREATE_PERSONAL_WORKSPACE]);return{manageWorkspaceVisibilityRequests:e||!1,canCreatePartnerWorkspace:t||!1,canCreateTeamWorkspace:a||!1,canCreatePersonalWorkspace:s||!1}})),this.fetchRoles=()=>u(this,void 0,void 0,(function*(){let e=(0,o.resolveStoreInstance)(i.default);return"loaded"!==e.lifecycle&&(e=yield n.default.populateDefaultRoles()),{teamDefaultRole:e.defaultTeamRoleDetails}})),this.fetchWorkspaceVisibility=()=>{const e=d.default.getActiveQueryParams().get().default;return c.VISIBILITY_STATUS[e]||c.VISIBILITY_STATUS.team}}didCreate({additionalContext:e}){this.additionalContext=e}}},"./collaboration/workspace/model/ActionRequestStore.ts":function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var s=a("../../node_modules/mobx/lib/mobx.module.js"),o=a("./collaboration/workspace/types/ActionRequestTypes.ts"),i=function(e,t,a,s){var o,i=arguments.length,n=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(i<3?o(n):i>3?o(t,a,n):o(t,a))||n);return i>3&&n&&Object.defineProperty(t,a,n),n};class n{constructor(){this.workspaceId=null,this.code=null,this.context=null,this.createdAt=null,this.createdBy=null,this.notes=null,this.responders=null,this.state=null,this.type=null,this.lifecycle=o.ACTION_REQUEST_LIFECYCLE.idle}updatePendingRequest(e,t){t?(this.workspaceId=e,this.code=t.code,this.context=t.context,this.createdAt=t.createdAt,this.createdBy=t.createdBy,this.notes=t.notes,this.responders=t.responders,this.state=t.state,this.type=t.type):(this.workspaceId=e,this.code="",this.context=null,this.createdAt="",this.createdBy="",this.notes="",this.responders=null,this.state="",this.type="")}clear(){this.workspaceId=null,this.code=null,this.context=null,this.createdAt=null,this.createdBy=null,this.notes=null,this.responders=null,this.state=null,this.type=null,this.lifecycle=o.ACTION_REQUEST_LIFECYCLE.idle}setLifecycle(e){this.lifecycle=e}}i([s.observable],n.prototype,"workspaceId",void 0),i([s.observable],n.prototype,"code",void 0),i([s.observable],n.prototype,"context",void 0),i([s.observable],n.prototype,"createdAt",void 0),i([s.observable],n.prototype,"createdBy",void 0),i([s.observable],n.prototype,"notes",void 0),i([s.observable],n.prototype,"responders",void 0),i([s.observable],n.prototype,"state",void 0),i([s.observable],n.prototype,"type",void 0),i([s.observable],n.prototype,"lifecycle",void 0),i([s.action],n.prototype,"updatePendingRequest",null),i([s.action],n.prototype,"clear",null),i([s.action],n.prototype,"setLifecycle",null)},"./collaboration/workspace/service/ActionRequestService.ts":function(e,t,a){a.r(t);var s=a("./js/utils/PostmanGatewayService.js"),o=a("./collaboration/workspace/types/ActionRequestTypes.ts"),i=a("./collaboration/services/utils/util.js"),n=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,r)}l((s=s.apply(e,t||[])).next())}))};const r="POST",l="GET",c="collaboration";t.default=new class{find(e,t,a){return n(this,void 0,void 0,(function*(){let n={state:o.ACTION_REQUEST_STATES.PENDING_APPROVAL,action:t,model:"workspace",modelId:a};e&&(n.identifierType=o.ACTION_REQUEST_IDENTIFIER_TYPES.APPROVER);let d,u=(0,i.generateSearchParamsFromObject)(n);try{d=yield s.default.request("/ws/proxy",{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({service:c,method:l,path:`/action-requests?${u}`})},{returnRawResponse:!0})}catch(e){throw e}const m=yield d.json();return d.ok?null==m?void 0:m.data:Promise.reject(d)}))}create(e){return n(this,void 0,void 0,(function*(){let t;try{t=yield s.default.request("/ws/proxy",{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({service:c,method:r,path:"/action-requests/create",body:e})},{returnRawResponse:!0})}catch(e){throw e}const a=yield t.json();return t.ok?null==a?void 0:a.data:Promise.reject(t)}))}approve({code:e,notes:t}){return n(this,void 0,void 0,(function*(){let a;try{a=yield s.default.request("/ws/proxy",{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({service:c,method:r,path:`/action-requests/${e}/approve`,body:{notes:t}})},{returnRawResponse:!0})}catch(e){throw e}const o=yield a.json();return a.ok?null==o?void 0:o.data:Promise.reject(a)}))}reject({code:e,notes:t}){return n(this,void 0,void 0,(function*(){let a;try{a=yield s.default.request("/ws/proxy",{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({service:c,method:r,path:`/action-requests/${e}/reject`,body:{notes:t}})},{returnRawResponse:!0})}catch(e){throw e}const o=yield a.json();return a.ok?null==o?void 0:o.data:Promise.reject(a)}))}}},"./collaboration/workspace/utils/WorkspaceUtils.ts":function(e,t,a){a.r(t);var s=a("./node_modules/lodash/lodash.js"),o=a.n(s);let i={transformRoleList:(e,t)=>o().reduce(e,((e,a,s)=>(e[s]={id:s,name:a.roles[0],type:t},e)),{}),computeUpdateRolesValue:e=>o().reduce(e,((e,t,a)=>(e[a]=o().reduce(t,((e,t,a)=>(e[a]=[t.name],e)),{}),e)),{}),computeActiveWorkspaceRoleState:e=>o().reduce(e,((e,t,a)=>(e[a]={roles:[t.name]},e)),{}),orderRoleList:(e,t)=>{let a=o().transform(e,((e,a)=>{const s=o().get(t,a);s&&!o().get(s,"state.isInvalid.status")&&e.push(Object.assign({value:s.name,label:s.displayName},s))}),[]);return o().orderBy(a,["state.isBlocked.status"],["asc"])}};t.default=i}}]);