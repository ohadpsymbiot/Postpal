"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[85,144],{"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPullRequest.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function r(){return o.createElement(s.default,{name:"illustration-no-pull-request"})}},"./js/components/activity-feed/Activity.js":function(e,t,n){n.r(t),n.d(t,{Activity:function(){return E},LoadFeed:function(){return y}});var o,s=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("./js/components/activity-feed/ActivityItemComponents.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./js/components/base/Icons/WarningIcon.js"),d=n("./js/utils/ActivityFeedHelper.js"),u=n("./js/utils/PluralizeHelper.js"),m=n("./js/components/base/LoadingIndicator.js"),g=n("./js/components/base/Buttons.js"),p=n("./version-control/common/index.js"),h=n("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f.apply(this,arguments)}const v="You can perform this action once you're back online";let E=(0,r.observer)(o=class extends s.Component{constructor(e){super(e)}findCurrentLabel(e){return h.find(e.tags,["system",!0])}shouldLoadCustomComponents(e){return["isPublic","isAccessible","publicProfileUrl"].every((function(t){return e.hasOwnProperty(t)}))}getProfilePicComponent(e){return this.shouldLoadCustomComponents(e)?s.createElement(p.CustomProfilePic,e):s.createElement(i.ProfilePic,e)}getUserComponent(e){return this.shouldLoadCustomComponents(e)?s.createElement(p.CustomUser,e):s.createElement(i.User,e)}render(){let e,t=this.props.activity,n=this.props.meta,o=null,r=t.trigger,a=d.default.getWhiteListedActivitiesCount(t),l=u.default.pluralize({count:a,singular:"change",plural:"changes"}),c=null,g=this.findCurrentLabel(t);t.to&&t.to.model&&(o=s.createElement("span",null,s.createElement("span",null," to the ",t.to.model," "),s.createElement("span",{className:"activity-item-model"}," ",h.get(t,"to.instance.name")," ")));const p=h.get(this.props,"isCollectionAbsoluteNamingEnabled")?s.createElement("span",{className:"activity-item-model"},"the ",h.get(t,"meta.name")):"this";switch(`${t.model}:${t.action}`){case"collection:create":e=s.createElement("span",null," created ",p," collection");break;case"collection:update":e=s.createElement("span",null,s.createElement("div",{className:"activity-item-head-content"},a>0&&s.createElement("span",null," made ",a," ",l," to "),0===a&&s.createElement("span",null," ","restore"===r?"restored":"modified"," ")),p," collection"),c=a>0&&s.createElement(i.Details,f({isVisible:this.props.isVisible},t));break;case"collection:destroy":e=s.createElement("span",null," deleted ",p," collection");break;case"folder:create":e=s.createElement("span",null," created the folder ");break;case"folder:update":e=s.createElement("span",null,s.createElement("div",{className:"activity-item-head-content"},a>0&&s.createElement("span",null," made ",a," ",l," to "),0===a&&s.createElement("span",null," modified ")),"the folder"),c=!h.isEmpty(t.input)&&!h.isEmpty(t.rollback)&&s.createElement(i.Details,f({isVisible:this.props.isVisible},t));break;case"folder:destroy":e=s.createElement("span",null," deleted the folder ");break;case"folder:transfer":e=e=s.createElement("span",null," moved the folder ");break;case"request:create":e=s.createElement("span",null," added the request ");break;case"request:update":e=s.createElement("span",null,s.createElement("div",{className:"activity-item-head-content"},a>0&&s.createElement("span",null," made ",a," ",l," to "),0===a&&s.createElement("span",null," modified ")),"the request"),c=!h.isEmpty(t.input)&&!h.isEmpty(t.rollback)&&s.createElement(i.Details,f({isVisible:this.props.isVisible},t));break;case"request:destroy":e=s.createElement("span",null," deleted the request ");break;case"request:transfer":e=s.createElement("span",null," moved the request ");break;case"response:create":e=s.createElement("span",null," created the example ");break;case"response:update":e=s.createElement("span",null," modified the example ");break;case"response:destroy":e=s.createElement("span",null," deleted the example ");break;case"response:transfer":e=s.createElement("span",null," moved the response ")}const v=this.props.enableRestore,E=!h.isEmpty(t.tags)&&!h.head(t.tags).system,y=h.get(t,"allowedActions.versionTagCreate")&&this.props.canAddVersionTag,b=v||E||y,x=(h.get(t,"genericTags")||[]).slice(0,2)||[];return s.createElement("div",{className:"activity-item-wrapper"},s.createElement("div",{className:"activity-feed-connect-line"}),s.createElement("div",{className:"activity-item-content"},s.createElement(i.Header,null,this.getProfilePicComponent(t.user),s.createElement("div",{className:"activity-item-head"},s.createElement(i.Meta,null,s.createElement(i.Time,{timestamp:t.createdAt}),(!h.isEmpty(t.tags)||!h.isEmpty(t.genericTags))&&!h.get(this.props,"hideTags",!1)&&s.createElement("div",{className:"version-label-wrapper"},x.map(((e,t)=>s.createElement("span",{className:"activity-item-tagged_version__label is-tag",title:e.message,key:t},e.message))),g&&s.createElement("span",{className:"activity-item-tagged_version__label"},"CURRENT"))),s.createElement(i.Heading,null,this.getUserComponent(t.user),e,s.createElement("span",{className:"activity-item-model"}," ","collection"!==t.model&&h.get(t,"instance.name")," "),o))),s.createElement("div",{className:"activity-item-details-wrapper"},c,b&&s.createElement("div",{className:"activity-item__action"},E&&s.createElement(i.RemoveTag,{tagId:h.head(t.tags).id,revisionId:t.id,onRemoveVersionTag:this.props.onRemoveVersionTag,isRemovingTag:this.props.isRemovingTag,isOffline:this.props.isOffline}),v&&s.createElement(i.Restore,{createdAt:t.createdAt,id:t.id,isRestoring:this.props.isRestoring,isOffline:this.props.isOffline,rollback_from:n.rollback_from,hasVersionTag:E,onRestore:this.props.onRestore}),this.props.enableRestore&&this.props.isRestoring&&s.createElement(m.default,{className:"activity-item-restore-loader"})))))}})||o;class y extends s.Component{constructor(e){super(e)}getClasses(){return l()({"activity-feed-loader":!0,"initial-fetch-error-banner":"initial"===this.props.error.type,"load-more-error-banner":"loadMore"===this.props.error.type})}handleClick(e){this.props.onRetry&&this.props.onRetry(e)}renderInitialErrorBanner(){return s.createElement("div",{className:"activity-feed-initial-fetch-error-container"},s.createElement("div",{className:"initial-fetch-error-title"},"Couldn't load changelog"),s.createElement("div",{className:"initial-fetch-error-subtitle"},"There was an unexpected error. Please try again."),s.createElement(g.Button,{className:"activity-feed-retry__btn",onClick:this.handleClick.bind(this,{initialRetry:!0}),disabled:this.props.isLoading||this.props.isOffline,tooltip:this.props.isOffline&&v,tooltipPlacement:"left"},this.props.isLoading&&s.createElement(m.default,null)||"Try again"))}renderLoadMoreErrorBanner(){return s.createElement("div",{className:"activity-feed-load-more-error-container"},s.createElement("div",{className:"load-more-error-info"},s.createElement("span",{className:"load-more-error-icon"},s.createElement(c.default,{size:"sm"})),s.createElement("span",{className:"load-more-error-subtitle"},this.props.isOffline?"Get online to view more changes.":"Something went wrong while retrieving more changelogs. Try again.")),s.createElement(g.Button,{className:"activity-feed-retry__btn",onClick:this.handleClick.bind(this,{loadMoreRetry:!0}),disabled:this.props.isLoading||this.props.isOffline,tooltip:this.props.isOffline&&v,tooltipPlacement:"left"},"Retry"))}render(){return s.createElement("div",{className:this.getClasses()},this.props.error&&"initial"===this.props.error.type&&this.renderInitialErrorBanner()||this.props.error&&"loadMore"===this.props.error.type&&this.renderLoadMoreErrorBanner()||this.props.isLoading&&s.createElement(m.default,null))}}},"./js/components/activity-feed/ActivityFeed.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var o,s=n("../../node_modules/react/index.js"),r=n("./js/components/activity-feed/Activity.js"),i=n("./node_modules/@postman/date-helper/index.js"),a=n.n(i),l=(n("./node_modules/pure-render-decorator/index.js"),n("./node_modules/prop-types/index.js")),c=n.n(l),d=n("./js/constants/AppUrlConstants.js"),u=n("./js/external-navigation/ExternalNavigationService.js"),m=n("./appsdk/contextbar/ContextBarViewHeader.js"),g=n("./js/components/base/Buttons.js"),p=n("./node_modules/classnames/index.js"),h=n.n(p),f=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),E=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),y=n("./version-control/pull-request/components/PullRequestListing/index.tsx"),b=n("./node_modules/lodash/lodash.js");let x=(0,f.observer)(o=class extends s.Component{constructor(e){super(e),this.handleScroll=this.handleScroll.bind(this),this.handleScrollDebounced=b.debounce(this.handleScroll,100),this.handleSignIn=this.handleSignIn.bind(this),this.handleRefreshFeed=this.handleRefreshFeed.bind(this),this.handleChangeLogLearn=this.handleChangeLogLearn.bind(this)}UNSAFE_componentWillReceiveProps(e){e.activityFeed&&this.props.activityFeed&&e.activityFeed.collectionUid&&e.activityFeed.collectionUid!==this.props.activityFeed.collectionUid&&this.refs.activity_feed&&(this.refs.activity_feed.scrollTop=0),e.isRestored&&e.isRestored!==this.props.isRestored&&this.handleRefreshFeed()}componentDidUpdate(e){const t=b.get(e,"activityFeed.feeds",[]),n=b.get(e,"activityFeed.meta",{}),o=b.filter(t,(e=>!("collection"===n.model&&b.includes(["subscribe","unsubscribe"],e.action)))),s=e.isOffline;s&&s!==this.props.isOffline&&b.isEmpty(o)&&this.props.onRetry({initialRetry:!0})}handleChangeLogLearn(){(0,u.openExternalLink)(d.ACTIVITY_FEED_AND_RESTORING_COLLECTION)}getRefreshTextClass(){return h()({"changelog-learn-more-header__refresh-container":!0,"is-loading-new":this.props.activityFeed.isLoadingNew})}handleSignIn(){this.props.onSignIn&&this.props.onSignIn()}handleScroll(){let e=this.refs.activity_feed;e.scrollHeight-(e.scrollTop+e.offsetHeight)<=5&&b.isEmpty(this.props.activityFeed.error)&&this.props.onLoadMore&&this.props.onLoadMore()}handleRefreshFeed(){this.props.onLoadNew&&this.props.onLoadNew().then((e=>{e&&(this.refs.activity_feed.scrollTop=0)}))}getClasses(){return h()({"activity-feed-container":!0},this.props.className)}render(){let e=this.props,t=b.get(e,"activityFeed.feeds",[]),n=b.get(e,"activityFeed.meta",{}),o=b.get(e,"activityFeed.error",{}),i=o&&"initial"===o.type,l=o&&"loadMore"===o.type,c=b.filter(t,(e=>!("collection"===n.model&&b.includes(["subscribe","unsubscribe"],e.action)))),d=b.isEmpty(c)?[]:a().getDateGroups(c,"createdAt","MMMM D, YYYY"),u=b.maxBy(c,"id");return s.createElement("div",{className:this.getClasses()},s.createElement(m.ContextBarViewHeader,{title:"Changelog",onClose:this.props.onClose},s.createElement(g.Button,{type:"tertiary",className:this.getRefreshTextClass(),onClick:this.handleRefreshFeed,disabled:e.activityFeed.isLoading||e.isOffline,tooltip:e.isOffline?"You can perform this action once you're back online":"Fetch newer feeds"},s.createElement(E.default,{name:"icon-action-refresh-stroke",className:"changelog-learn-more-header__refresh-icon pm-icon pm-icon-normal"}))),e.isOffline&&b.isEmpty(o)&&b.isEmpty(d)&&s.createElement(y.EmptyState,{illustration:s.createElement(v.default,null),title:"Check your connection",message:"Get online to view Changelog"}),s.createElement("div",{className:"activity-feed",ref:"activity_feed",onScroll:this.handleScrollDebounced},(e.activityFeed.isLoading||i)&&s.createElement(r.LoadFeed,{error:o,key:"loading",isLoading:e.activityFeed.isLoading,onRetry:this.props.onRetry}),b.map(d,(e=>!b.isEmpty(e)&&s.createElement("div",{className:"activity-feed-date-group-wrapper",key:e.name},s.createElement("div",{className:"activity-feed-date-group"}," ",e.name," "),b.map(e.items,(e=>s.createElement(r.Activity,{activity:e,canAddVersionTag:this.props.canAddVersionTag,enableRestore:!(!this.props.enableRestore||!u||u.id===e.id),isRestoring:b.get(this.props,"collectionRestoreTarget.maxId")===e.id,isRemovingTag:this.props.isRemovingTag,isVisible:this.props.isVisible,isOffline:this.props.isOffline,key:e.id,meta:n,onAddVersionTag:this.props.onAddVersionTag,onRemoveVersionTag:this.props.onRemoveVersionTag,onRestore:this.props.onRestore})))))),!e.activityFeed.isLoading&&b.isEmpty(d)&&!o&&s.createElement("div",{className:e.className},s.createElement("div",{className:"activity-feed-loading-container "},"No activities yet"))),(e.activityFeed.isLoadingMore||l)&&s.createElement(r.LoadFeed,{error:o,key:"loading-more",isLoading:e.activityFeed.isLoadingMore,isOffline:e.isOffline,onRetry:this.props.onRetry}))}})||o;x.propTypes={activityFeed:c().object.isRequired,activityName:c().string,className:c().string,onLoadMore:c().func.isRequired}},"./js/components/activity-feed/AddVersionTagModal.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var o,s=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("./node_modules/classnames/index.js"),a=n.n(i),l=n("./js/external-navigation/ExternalNavigationService.js"),c=n("./js/components/base/LoadingIndicator.js"),d=n("./js/components/base/Buttons.js"),u=n("./js/components/base/Modals.js"),m=n("./js/components/base/Dropdowns.js"),g=n("./api-dev/components/common/ErrorHandler/ErrorHandler.js"),p=n("./js/modules/services/ActivityFeedService.js"),h=n("./js/modules/services/AnalyticsService.js"),f=n("./js/constants/AppUrlConstants.js"),v=(n("./api-dev/services/APIDevService.js"),n("./node_modules/lodash/lodash.js"));const E=[{model:"collection",type:"documentation",name:"Documentation"},{model:"collection",type:"testsuite",name:"Test Suite"},{model:"collection",type:"integrationtest",name:"Integration Test"},{model:"collection",type:"contracttest",name:"Contract Test"}];let y=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={items:null,selectedAPI:null,selectedAPIVersion:null,selectedAPIContext:"",isAPIVersionSelectEnable:!1,isRequiredWarning:!0,isModalLoading:!1,isLoading:!1,isOnlyOneAPI:!1,modalOpenError:null},this.handleClose=this.handleClose.bind(this),this.handleAPISelect=this.handleAPISelect.bind(this),this.handleAPIVersionSelect=this.handleAPIVersionSelect.bind(this),this.handleAPIContextSelect=this.handleAPIContextSelect.bind(this),this.handleAddVersionTag=this.handleAddVersionTag.bind(this),this.handleActivityFeedTagsLearn=this.handleActivityFeedTagsLearn.bind(this)}componentDidMount(){let e=v.assign({},{collectionUid:this.props.collectionUid});this.store=this.props.activityFeed,this.initialFetch(e)}getCustomStyles(){return{margin:"auto",height:"384px",width:"350px"}}handleActivityFeedTagsLearn(){(0,l.openExternalLink)(f.ACTIVITY_FEED_VERSION_TAGS)}handleClose(){this.props.onRequestClose&&this.props.onRequestClose()}initialFetch(e){this.setState({isModalLoading:!0}),p.default.fetchPossibleAPIVersions(e).then((e=>{this.setState({isModalLoading:!1,items:e},(()=>{1===this.state.items.length&&this.setState({selectedAPI:v.head(this.state.items),isAPIVersionSelectEnable:!0,isOnlyOneAPI:!0})}))})).catch((e=>{this.setState({isModalLoading:!1,modalOpenError:e}),pm.logger.warn(e)}))}handleAPISelect(e){this.setState({isAPIVersionSelectEnable:!0});let t=v.find(this.state.items,["id",e]);v.isUndefined(t)?this.setState({selectedAPI:v.head(this.state.items)}):this.setState({selectedAPI:t})}handleAPIVersionSelect(e){let t=v.find(this.state.selectedAPI.versions,["id",e]);this.setState({selectedAPIVersion:t,isRequiredWarning:!this.state.selectedAPI||!this.state.selectedAPIContext})}handleAPIContextSelect(e){let t=v.find(E,["type",e]);this.setState({selectedAPIContext:t,isRequiredWarning:!this.state.selectedAPI||!this.state.selectedAPIVersion})}handleAddVersionTag(){if(this.state.selectedAPI&&this.state.selectedAPIVersion&&this.state.selectedAPIContext){this.setState({isLoading:!0});let e={collectionUid:this.props.collectionUid,revisionId:this.props.revisionId,apiVersionId:this.state.selectedAPIVersion.id,relationType:this.state.selectedAPIContext.type};this.store.addVersionTag(e).then((()=>{this.setState({isLoading:!1}),h.default.addEventV2({category:"collection",action:"successful_version_tag_create",label:"collection_changelog",entityId:this.props.collectionUid}),this.handleClose()})).catch((()=>{this.setState({isLoading:!1})}))}}getModalContentClasses(){return a()({"version-tag__modal-content":!0,"is-modal-loading":this.state.isModalLoading})}getDropdownHeadLabelClasses(e){return a()({"dropdown-head-label":!0,"placeholder-text":e})}renderModalContent(){return this.state.isModalLoading?s.createElement(c.default,null):this.state.modalOpenError?s.createElement("div",{className:"version-tag-modal-error"},s.createElement(g.default,{title:"Something went wrong",description:"There was a problem adding a version tag to this collection. Please try again after some time."})):s.createElement(s.Fragment,null,s.createElement("div",{className:"version-tag__modal-content-heading"},"Link this collection revision to a specific API version.",s.createElement("span",{className:"btn btn-text version-tag__learn-btn-text",onClick:this.handleActivityFeedTagsLearn},"Learn More")),s.createElement("div",{className:"version-tag__modal-content-dropdown"},s.createElement("div",{className:"api-select__dropdown"},s.createElement("div",{className:"dropdown-label"},"Select API"),s.createElement(m.Dropdown,{onSelect:this.handleAPISelect},s.createElement(m.DropdownButton,{type:"secondary",size:"small"},s.createElement(d.Button,{className:"dropdown-head",disabled:this.state.isOnlyOneAPI},s.createElement("span",{className:this.getDropdownHeadLabelClasses(!this.state.selectedAPI)},this.state.selectedAPI&&this.state.selectedAPI.name||"Select an API"))),s.createElement(m.DropdownMenu,{className:"dropdown-menu",fluid:!0},v.isEmpty(this.state.items)?s.createElement(m.MenuItem,{disabled:!0},s.createElement("span",null,"There are no APIs in this workspace")):this.state.items.map((e=>s.createElement(m.MenuItem,{key:e.id,refKey:e.id},s.createElement("span",null,e.name))))))),s.createElement("div",{className:"api-version-select__dropdown"},s.createElement("div",{className:"dropdown-label"},"Select version"),s.createElement(m.Dropdown,{onSelect:this.handleAPIVersionSelect},s.createElement(m.DropdownButton,{type:"secondary",size:"small"},s.createElement(d.Button,{className:"dropdown-head",disabled:!this.state.isAPIVersionSelectEnable},s.createElement("span",{className:this.getDropdownHeadLabelClasses(!this.state.selectedAPIVersion)},this.state.selectedAPIVersion&&this.state.selectedAPIVersion.name||"Select a version"))),s.createElement(m.DropdownMenu,{className:"dropdown-menu-list",fluid:!0},this.state.selectedAPI&&!v.isEmpty(this.state.selectedAPI.versions)?this.state.selectedAPI.versions.map((e=>s.createElement(m.MenuItem,{key:e.id,refKey:e.id},s.createElement("span",null,e.name)))):s.createElement(m.MenuItem,{disabled:!0},s.createElement("span",null,"There are no API versions to tag this collection."))))),s.createElement("div",{className:"api-relation-select__dropdown"},s.createElement("div",{className:"dropdown-label"},"Add to API as"),s.createElement(m.Dropdown,{onSelect:this.handleAPIContextSelect},s.createElement(m.DropdownButton,{type:"secondary",size:"small"},s.createElement(d.Button,{className:"dropdown-head",disabled:!this.state.isAPIVersionSelectEnable},s.createElement("span",{className:this.getDropdownHeadLabelClasses(!this.state.selectedAPIContext)},this.state.selectedAPIContext.name||"Add this to your API as"))),s.createElement(m.DropdownMenu,{className:"dropdown-menu-list",fluid:!0},E.map((e=>s.createElement(m.MenuItem,{key:e.type,refKey:e.type},s.createElement("span",null,e.name)))))))),s.createElement("div",{className:"version-tag__modal-content-action"},s.createElement(d.Button,{type:"secondary",onClick:this.props.onRequestClose,className:"modal-cancel-btn"},"Cancel"),s.createElement(d.Button,{type:"primary",onClick:this.handleAddVersionTag,className:"modal-version-tag-btn",disabled:this.state.isRequiredWarning||this.state.isLoading||this.props.isOffline,tooltip:this.props.isOffline?"You can perform this action once you're back online":"To add a version tag, select an API version and what you want to add the collection as."},this.state.isLoading?s.createElement(c.default,null):"Add Version Tag")))}render(){return s.createElement(u.Modal,{className:"version-tag-modal",isOpen:this.props.isOpen,onRequestClose:this.props.onRequestClose,customStyles:this.getCustomStyles()},s.createElement(u.ModalHeader,null," Add a version tag "),s.createElement(u.ModalContent,{className:this.getModalContentClasses()},this.renderModalContent()))}})||o},"./js/components/base/Icons/WarningIcon.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./js/components/base/Icons/Icon.js");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}const i=o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("defs",null,o.createElement("path",{id:"pm-icon-warning",d:"M8.89487 1.78887C8.52635 1.05182 7.47454 1.05182 7.10602 1.78887L0.724051 14.5528C0.3916 15.2177 0.875095 16 1.61848 16H14.3824C15.1258 16 15.6093 15.2177 15.2768 14.5528L8.89487 1.78887ZM9.00044 7.00976C9.00044 7.00976 9.01601 6.00002 8.00044 6.00002C6.98488 6.00002 7.00044 7.00976 7.00044 7.00976V10C7.00044 10 6.98787 11 8.00044 11C9.01302 11 9.00044 10 9.00044 10V7.00976ZM8.00064 13.9996C8.55254 13.9996 9.00044 13.5517 9.00044 12.9998C9.00044 12.4479 8.55254 12 8.00064 12C7.44873 12 7.00083 12.4479 7.00083 12.9998C7.00083 13.5517 7.44873 13.9996 8.00064 13.9996Z"})),o.createElement("use",{fill:"#ED4B48",fillRule:"evenodd",clipRule:"evenodd",xlinkHref:"#pm-icon-warning"}));function a(e){return o.createElement(s.default,r({},e,{icon:i}))}},"./js/components/collections/browser/CollectionBrowserActivityFeed.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/@postman/date-helper/index.js"),r=n.n(s),i=n("./js/components/activity-feed/ActivityFeed.js"),a=n("./js/modules/services/AuthHandlerService.js"),l=n("./js/components/activity-feed/AddVersionTagModal.js"),c=n("./js/stores/CollectionActivityFeedStore.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./js/modules/model-event.js"),m=n("./js/stores/StoreManager.js"),g=n("./js/stores/ActiveWorkspaceStore.js"),p=n("./node_modules/classnames/index.js"),h=n.n(p),f=n("../../node_modules/console-browserify/index.js");class v extends o.Component{constructor(e){super(e),this.state={collectionRestoreTarget:null,openVersionTagModal:!1,isRemovingTag:!1,isRestored:!1},this.handleLoadNew=this.handleLoadNew.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleSignIn=this.handleSignIn.bind(this),this.handleRestore=this.handleRestore.bind(this),this.handleRetry=this.handleRetry.bind(this),this.handleAddVersionTag=this.handleAddVersionTag.bind(this),this.handleRemoveVersionTag=this.handleRemoveVersionTag.bind(this),this.handleVersionTagModalClose=this.handleVersionTagModalClose.bind(this)}UNSAFE_componentWillMount(){this.store=new c.default,this.props.isOffline||this.initializeFeeds(),this.subscribeToCollectionRestore()}componentWillUnmount(){this.unsubscribe&&"function"==typeof this.unsubscribe&&this.unsubscribe()}initializeFeeds(){let e=this.props.collectionUid;this.store.initialize(e)}handleLoadNew(){return this.store.loadNew().then((e=>Promise.resolve(e)))}handleLoadMore(){this.store.loadMore()}handleSignIn(){a.default.initiateLogin()}isWorkspaceMember(){return(0,m.resolveStoreInstance)(g.default).isMember}handleAddVersionTag(e){if(!this.isWorkspaceMember())return pm.mediator.trigger("openUnjoinedWorkspaceModal");d.default.addEventV2({category:"collection",action:"initiate_version_tag_create",label:"collection_changelog",entityId:this.props.collectionUid}),this.setState({openVersionTagModal:!this.state.openVersionTagModal,revisionId:e})}handleRemoveVersionTag(e,t){if(!this.isWorkspaceMember())return pm.mediator.trigger("openUnjoinedWorkspaceModal");this.setState({isRemovingTag:!this.state.isRemovingTag});let n={collectionUid:this.props.collectionUid,tagId:t,revisionId:e};d.default.addEventV2({category:"collection",action:"version_tag_delete",label:"collection_changelog",entityId:this.props.collectionUid}),this.store.removeVersionTag(n).then((()=>{this.setState({isRemovingTag:!this.state.isRemovingTag})})).catch((()=>{this.setState({isRemovingTag:!this.state.isRemovingTag})}))}handleVersionTagModalClose(){this.setState({openVersionTagModal:!this.state.openVersionTagModal})}handleRestore(e,t){let n={collectionUid:this.props.collectionUid,maxId:e};this.restoreDate=r().getFormattedDateAndTime(t),d.default.addEventV2({category:"collection",action:"restore_collection",label:"collection_changelog",entityId:this.props.collectionUid}),this.setState({isRestored:!1}),this.setState({collectionRestoreTarget:n},(()=>{pm.syncManager.restoreCollection(n,((e,t)=>{e||t&&t.error?(this.setState({isRestored:!1,collectionRestoreTarget:null}),pm.toasts.error("We couldn't restore collection to a previous state. Please try again later.",{noIcon:!0,title:"Unable to restore collection"})):t&&t.data&&(this.setState({isRestored:!0,collectionRestoreTarget:null}),pm.toasts.success(`Your collection has been successfully restored to ${this.restoreDate||"a previous state"}.`,{noIcon:!0,title:"Collection restored"}))}))}))}subscribeToCollectionRestore(){this.unsubscribe=pm.eventBus.channel("sync-manager-internal").subscribe((e=>{if(!e)return;const t=(0,u.getEventNamespace)(e),n=(0,u.getEventName)(e),o=(0,u.getEventData)(e)||{};"collectionRestored"===n&&"command"===t&&(this.setState({isRestored:!0,collectionRestoreTarget:null}),o.error?pm.toasts.error("We couldn't restore collection to a previous state. Please try again later.",{noIcon:!0,title:"Unable to restore collection"}):pm.toasts.success(`Your collection has been successfully restored to ${this.restoreDate||"a previous state"}.`,{noIcon:!0,title:"Collection restored"}))}))}handleRetry(e){e.initialRetry?this.initializeFeeds():e.loadMoreRetry&&this.handleLoadMore()}getClasses(){return h()({"collection-browser-activity-feed-lists":!0},this.props.className)}render(){return o.createElement("div",{className:this.getClasses(),onClickCapture:e=>{f.log("|| clicked",e.target)}},o.createElement(i.default,{activityFeed:this.store,title:this.props.title,canAddVersionTag:this.props.canAddVersionTag,collectionRestoreTarget:this.state.collectionRestoreTarget,enableRestore:this.props.enableRestore,isLoggedIn:this.props.isLoggedIn,isRemovingTag:this.state.isRemovingTag,isRestored:this.state.isRestored,isVisible:this.props.isVisible,isOffline:this.props.isOffline,onLoadNew:this.handleLoadNew,onLoadMore:this.handleLoadMore,onSignIn:this.handleSignIn,onRestore:this.handleRestore,onRetry:this.handleRetry,onAddVersionTag:this.handleAddVersionTag,onRemoveVersionTag:this.handleRemoveVersionTag,onClose:this.props.onClose}),this.state.openVersionTagModal&&o.createElement(l.default,{activityFeed:this.store,revisionId:this.state.revisionId,collectionUid:this.props.collectionUid,isOffline:this.props.isOffline,isOpen:this.state.openVersionTagModal,onRequestClose:this.handleVersionTagModalClose}))}}},"./js/modules/services/ActivityFeedService.js":function(e,t,n){n.r(t);n("./js/modules/controllers/WorkspaceSessionController.js"),n("./js/common/controllers/WindowController.js");var o=n("./js/modules/services/RemoteSyncRequestService.js"),s=n("./collaboration/workspace/controller/ActiveWorkspaceController.ts"),r=n("./node_modules/lodash/lodash.js");var i={fetchActivityFeed(e,t={}){if(!e.collectionUid)return Promise.reject(new Error("ActivityFeedService~fetchPossibleAPI: collectionUid not found"));let n=r.assign({},{count:20},{populate:!0},{max_id:e.maxId?e.maxId:0},{since_id:e.sinceId?e.sinceId:0}),s=`/collection/revisions/${e.collectionUid}?count=${n.count}&populate=${n.populate}`;return t.loadMore?s=s.concat(`&max_id=${n.max_id}`):t.loadNew&&(s=s.concat(`&since_id=${n.since_id}`)),o.default.request(s,{method:"get"}).then((t=>{let n={id:e.collectionUid,meta:r.get(t.body,"meta")||{},feeds:r.get(t.body,"data")||[],error:!t.body.data||t.error||!1};return Promise.resolve(n)}))},fetchPossibleAPIVersions:e=>e.collectionUid?async function(){try{return s.default.get().id}catch(e){return pm.logger.error(e),Promise.reject(e)}}().then((t=>{if(!t)return Promise.reject(new Error("ActivityFeedService~fetchPossibleAPIVersions: workspaceId not found"));r.assign(e,{workspaceId:t});let n=`/collections/${e.collectionUid}/apiVersions?workspace=${e.workspaceId}`;return o.default.request(n,{method:"get"}).then((e=>{let t=e.body.data.apis;return Promise.resolve(t)}))})):Promise.reject(new Error("ActivityFeedService~fetchPossibleAPIVersions: collectionUid not found")),addVersionTag(e){if(!e.collectionUid)return Promise.reject(new Error("ActivityFeedService~addVersionTag: collectionUid not found"));if(!e.apiVersionId)return Promise.reject(new Error("ActivityFeedService~addVersionTag: apiVersionId not found"));if(!e.revisionId)return Promise.reject(new Error("ActivityFeedService~addVersionTag: revisionId not found"));if(!e.relationType)return Promise.reject(new Error("ActivityFeedService~addVersionTag: relationType not found"));let t=`/collections/${e.collectionUid}/versiontags`,n={apiVersion:e.apiVersionId,revision:e.revisionId,relations:[{type:e.relationType}]};return o.default.request(t,{method:"post",data:n}).then((e=>Promise.resolve(e.body.data)))},removeVersionTag(e){if(!e.collectionUid)return Promise.reject(new Error("ActivityFeedService~removeVersionTag: collectionUid not found"));if(!e.tagId)return Promise.reject(new Error("ActivityFeedService~removeVersionTag: tagId not found"));let t=`/collections/${e.collectionUid}/versiontags/${e.tagId}`;return o.default.request(t,{method:"delete"}).then((()=>Promise.resolve()))}};t.default=i},"./js/stores/CollectionActivityFeedStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var o,s,r,i,a,l,c,d,u,m=n("./js/modules/services/ActivityFeedService.js"),g=n("../../node_modules/mobx/lib/mobx.module.js"),p=n("./node_modules/lodash/lodash.js");function h(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t,n,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const v="initial",E="loadMore",y="loadNew",b="addVersionTag",x="removeVersionTag",C="add",_="remove";let I=(s=f((o=class{constructor(){this.modelEvents={namespace:"collectionactivityfeed"},h(this,"collectionUid",s,this),h(this,"feeds",r,this),h(this,"meta",i,this),h(this,"isLoaded",a,this),h(this,"isLoading",l,this),h(this,"isLoadingMore",c,this),h(this,"isLoadingNew",d,this),h(this,"error",u,this),this.collectionUid=null}add(e){p.isEmpty(e)||e.id!==this.collectionUid||(this.isLoading=!1,this.isLoadingMore=!1,this.isLoadingNew=!1,this.collectionUid=e.id,this.feeds=p.orderBy(p.unionBy(this.feeds,e.feeds,"id"),"id","desc"),e.meta.next_max_id||(this.meta.next_max_id=0),this.meta=p.merge(this.meta,e.meta),this.error={})}initialize(e){return this.collectionUid=e,this.getFeeds().then((()=>Promise.resolve()))}handleError(e,t){let n="";t===b?n="There was an issue adding the version tag on this collection. Please try again.":t===x&&(n="There was an issue removing the version tag on this collection. Please try again."),this.error.type=t,this.error.message=p.get(e.details,"message")||e.message||n,this.error.title=e.title||"",this.isLoading=!1,this.isLoadingMore=!1,this.isLoadingNew=!1}updateCurrentLabel(){let e=p.head(this.feeds);!p.isEmpty(e.tags)&&p.last(e.tags).system&&e.tags.pop()}getFeeds(){if(this.collectionUid)return this.isLoading=!0,m.default.fetchActivityFeed({collectionUid:this.collectionUid}).then((e=>{if(!p.isEmpty(e))return this.add(e),Promise.resolve()})).catch((e=>{this.handleError(e.error,v),pm.logger.warn("CollectionActivityFeedStore~getFeeds: Error occurred while fetching feeds",e)}))}loadMore(){if(!this.didReachEndOfFeed()&&!this.isLoaded)return this.isLoadingMore=!0,m.default.fetchActivityFeed({collectionUid:this.collectionUid,maxId:this.meta.next_max_id},{loadMore:this.isLoadingMore}).then((e=>{p.isEmpty(e)||this.add(e)})).catch((e=>{this.handleError(e.error,E),pm.logger.warn("CollectionActivityFeedStore~loadMore: Error occurred while fetching older feeds",e)}));this.isLoaded=!0}loadNew(){if(this.isLoadingNew=!0,p.isEmpty(this.feeds))return pm.logger.warn("CollectionActivityFeedStore~loadNew: sinceId not found");let e=p.head(this.feeds).id;return m.default.fetchActivityFeed({collectionUid:this.collectionUid,sinceId:e},{loadNew:this.isLoadingNew}).then((0,g.action)((e=>p.isEmpty(e.feeds)?(this.isLoadingNew=!1,Promise.resolve(!1)):(this.updateCurrentLabel(),this.add(e),Promise.resolve(!0))))).catch((e=>{this.handleError(e.error,y),pm.logger.warn("CollectionActivityFeedStore~loadNew: Error occurred while fetching newer feeds",e)}))}addVersionTag(e){return m.default.addVersionTag(e).then((e=>{this.updateFeed(e,C),pm.toasts.success("This tag will be associated with the selected API version.",{noIcon:!0,title:"Version tag added"})})).catch((e=>(this.handleError(e.error,b),pm.logger.warn("CollectionActivityFeedStore~addVersionTag: Error occurred while adding a version tag on collection revision",e),pm.toasts.error(this.error.message,{noIcon:!0,title:this.error.title}),Promise.reject())))}removeVersionTag(e){return m.default.removeVersionTag(e).then((()=>{this.updateFeed({revision:e.revisionId},_)})).catch((e=>{this.handleError(e.error,x),pm.logger.warn("CollectionActivityFeedStore~removeTag: Error occurred while removing a version tag on collection revision",e),pm.toasts.error(this.error.message,{noIcon:!0,title:this.error.title})}))}updateFeed(e,t){let n=p.find(this.feeds,["id",e.revision]),o=p.pick(e,["apiVersion","createdAt","createdBy","id","revision","updatedAt"]);if(n){if(t===_)n.tags.shift();else if(t===C){let t,s=p.get(e.apiVersion,"id");if(!s)return void pm.logger.warn("CollectionActivityFeedStore~Error occurred while updating revision. API version Id not found");let r=p.find(this.feeds,(e=>p.find(e.tags,(e=>e.apiVersion.id===s))));r&&(t=r.tags.shift().id,o.id=t),n.tags.unshift(o)}}else pm.logger.error("CollectionActivityFeedStore~Error occurred while updating revision. Revision not found.")}didReachEndOfFeed(){return!p.get(this.meta,"next_max_id")}}).prototype,"collectionUid",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=f(o.prototype,"feeds",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=f(o.prototype,"meta",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=f(o.prototype,"isLoaded",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=f(o.prototype,"isLoading",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=f(o.prototype,"isLoadingMore",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=f(o.prototype,"isLoadingNew",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=f(o.prototype,"error",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f(o.prototype,"add",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"add"),o.prototype),f(o.prototype,"initialize",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"initialize"),o.prototype),f(o.prototype,"handleError",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"handleError"),o.prototype),f(o.prototype,"updateCurrentLabel",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"updateCurrentLabel"),o.prototype),f(o.prototype,"getFeeds",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"getFeeds"),o.prototype),f(o.prototype,"loadMore",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"loadMore"),o.prototype),f(o.prototype,"loadNew",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"loadNew"),o.prototype),f(o.prototype,"updateFeed",[g.action],Object.getOwnPropertyDescriptor(o.prototype,"updateFeed"),o.prototype),o)},"./js/utils/ActivityFeedHelper.js":function(e,t,n){n.r(t);var o=n("./js/constants/ActivityFeedDetailsMapConstant.js"),s=n("./node_modules/lodash/lodash.js");t.default=new class{getWhiteListedActivitiesCount(e){let t=0;return e.rollback&&e.input&&s.forEach(o.default,(n=>{let o=n.entity;(e.rollback[o]||e.input[o])&&++t})),t}}},"./version-control/changelog/components/CollectionChangelog.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var o,s=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("./js/components/collections/browser/CollectionBrowserActivityFeed.js"),g=n("./js/stores/ActiveWorkspaceStore.js"),p=n("./js/stores/SyncStatusStore.js"),h=n("./js/stores/CurrentUserStore.js"),f=n("./js/stores/StoreManager.js"),v=n("./js/utils/util.js"),E=n("./js/components/base/XPaths/XPath.js"),y=n("./js/modules/services/AnalyticsService.js"),b=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),x=n("./appsdk/contextbar/ContextBarViewHeader.js"),C=n("../../node_modules/mobx/lib/mobx.module.js"),_=n("../../packages/version-control/change-recording/index.ts"),I=n("./onboarding/src/common/LaunchDarkly.js"),j=n("./node_modules/lodash/lodash.js");const k=u.default.div`
  height: 100%;
  position: relative;
`,L=u.default.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,w="enable-client-changelog-v2",A=!0,S="version";let N=(0,d.observer)(o=class extends s.Component{constructor(...e){super(...e),this.state={collection:null,isLoadingCollection:!1,errorLoadingCollection:!1,isChangelogV2Enabled:!1},this.fetchCollection=()=>{if(!(0,f.resolveStoreInstance)(p.default).isSocketConnected)return;this.setState({isLoadingCollection:!0});const e=(0,f.resolveStoreInstance)(g.default).id;"api"===j.get(this.props,"contextData.parent.type")&&j.get(this.props,"contextData.parent.mode.name")===S?this.setState({collection:{isEditable:!1,permissions:{restore:!1},uid:j.get(this.props,"contextData.collectionUid")},isLoadingCollection:!1,errorLoadingCollection:!1}):(0,b.getMeta)(e).then((async e=>{const t=e.get(j.get(this.props,"contextData.collectionUid"));t?(await t.hydratePermissions(["restore","edit"]),this.setState({collection:t,isLoadingCollection:!1})):this.setState({errorLoadingCollection:!0,isLoadingCollection:!1})})).catch((e=>{this.setState({errorLoadingCollection:!0,isLoadingCollection:!1})}))}}componentDidMount(){y.default.addEventV2({category:"collection",action:"view_changelog",label:"collection_context_bar",entityId:j.get(this.props,"contextData.collectionUid")}),this.disposeConnectionChangeReaction=(0,C.reaction)((()=>(0,f.resolveStoreInstance)(p.default).isSocketConnected),(e=>{!this.state.collection&&e&&this.fetchCollection()}),{fireImmediately:!0})}componentWillUnmount(){this.disposeConnectionChangeReaction()}render(){const e=(0,f.resolveStoreInstance)(h.default),t=v.default.isProUser(e),n=(0,f.resolveStoreInstance)(p.default).isSocketConnected,o=this.state.collection&&this.state.collection.permissions&&this.state.collection.permissions.restore,d=I.launchDarkly.getFlag(w,A),u="api"===j.get(this.props,"contextData.parent.type")&&j.get(this.props,"contextData.parent.mode.name")===S;return s.createElement(E.default,{identifier:"activityFeed"},!this.state.collection&&s.createElement(k,null,s.createElement(x.ContextBarViewHeader,{title:"Changelog",onClose:this.props.onClose}),s.createElement(L,null,this.state.isLoadingCollection&&s.createElement(r.default,null),this.state.errorLoadingCollection&&s.createElement(i.default,{title:"Unable to load the changelog",description:"Unable to find the collection.",primaryAction:s.createElement(a.default,{type:"outline",text:"Try again",onClick:this.fetchCollection,isDisabled:!n,tooltip:!n&&"You can perform this action once you're back online"})},s.createElement(l.default,null)),!n&&s.createElement(i.default,{title:"Check your connection",description:"Get online to view the changelog"},s.createElement(c.default,null)))),!d&&this.state.collection&&s.createElement(m.default,{canAddVersionTag:this.state.collection.isEditable&&e.isLoggedIn,collectionUid:this.state.collection.uid,enableRestore:t&&o,key:this.state.collection.uid,title:this.props.title,isOffline:!n,isLoggedIn:e.isLoggedIn,onClose:this.props.onClose}),this.state.collection&&d&&s.createElement(_.ChangelogRenderer,{model:"collection",modelId:this.state.collection.uid,onClose:this.props.onClose,disableRestore:u}))}})||o},"./version-control/common/UserListItem/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/classnames/index.js"),i=n.n(r),a=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),l=n("./version-control/common/CustomTooltip/index.js"),c=n("./js/models/services/DashboardService.js"),d=n("./js/services/NavigationService.js"),u=n("./node_modules/lodash/lodash.js");const m=s.default.button.attrs((()=>({role:"listitem"})))`
  all: unset;
  padding: ${({theme:e})=>e["spacing-s"]}
    ${({theme:e})=>e["spacing-s"]};
  display: flex;
  width: 100%;
  box-sizing: border-box;
  cursor: pointer;
  align-items: center;
  .user-list-item__tooltip {
    margin-left: ${({theme:e})=>e["spacing-s"]};
    display: flex;
  }
  .username {
    font-size: ${({theme:e})=>e["text-size-m"]};
    font-weight: ${({theme:e})=>e["text-weight-regular"]};
    line-height: ${({theme:e})=>e["line-height-m"]};
    color: ${({theme:e})=>e["content-color-primary"]};
  }
  &:hover .link {
    color: ${({theme:e})=>e["content-color-info"]};
  }
  .link:hover {
    text-decoration: underline;
  }
`;function g(e){const t=u.get(e,"user.name")||u.get(e,"user.username"),n=u.get(e,"privateWatchersCount",0)>1,s=()=>u.get(e,"user.isAccessible")||u.get(e,"user.isPublic")||e.isCurrentUser;return o.createElement(m,{onClick:t=>{t&&t.stopPropagation(),s()&&(()=>{if(u.get(e,"user.profileUrl"))return d.default.openURL(e.user.profileUrl);u.get(e,"user.id")&&(0,c.openTeamUserProfile)(e.user.id)})()}},o.createElement(a.default,{size:"s",userId:u.get(e,"user.id",0),src:u.get(e,"user.profilePicUrl")}),o.createElement(l.CustomTooltip,{align:"right",body:s()?"":n?"These users' profiles are not public":"This user's profile is not public",className:"user-list-item__tooltip",tooltipClassName:"user-list-item__tooltip-body"},o.createElement("span",{className:i()("username",{link:s()}),title:s()&&t},t,e.isCurrentUser&&" (You)")))}},"./version-control/pull-request/hooks/usePullRequestMergeSettingsViewPermission.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("./version-control/pull-request/services/PullRequestService.js"),r=n("./js/stores/CurrentUserStore.js"),i=n("./js/stores/StoreManager.js");function a(e,t){const[n,a]=(0,o.useState)(!1),[l,c]=(0,o.useState)(),[d,u]=(0,o.useState)(),m=(0,o.useRef)(),g=(0,i.resolveStoreInstance)(r.default).id;return(0,o.useEffect)((()=>(m.current=!0,(async()=>{try{m.current&&a(!0);const n=await(0,s.checkPullRequestMergeSettingViewPermission)({model:e,modelId:t,userId:g});m.current&&c(n)}catch(e){m.current&&u(e.error||e)}finally{m.current&&a(!1)}})(),()=>{m.current=!1})),[]),{isLoading:n,permission:l,error:d}}},"../../packages/version-control/change-recording/index.ts":function(e,t,n){n.r(t),n.d(t,{ChangelogRenderer:function(){return o.ChangelogRenderer},ExpandedDiffRenderer:function(){return o.ExpandedDiffRenderer}});var o=n("../../packages/version-control/change-recording/src/index.tsx")},"../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts":function(e,t,n){function o(e){return!1!==e.group.showChildLogs&&!0===e.group.isMaster}function s(e){return e.actors?e.actors:e.actor?[e.actor]:[]}n.r(t),n.d(t,{getChangelogActors:function(){return s},isChangelogExpandable:function(){return o}})},"../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/ChangelogDateGroup.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/index.ts"),c=n("../../packages/version-control/change-recording/src/hooks/index.ts"),d=n("../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts"),u=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/index.ts");const m=a.default.li`
  &:last-of-type {
    .changelog-timeline {
      display: ${e=>e.isExpanded?"block":"none"};
    }
  }

  .changelog-dategroup-container {
    position: relative;
    padding-left: ${e=>e.theme["spacing-xxl"]};
    padding-top: ${e=>e.theme["spacing-m"]};
    padding-bottom: ${e=>e.theme["spacing-m"]};

    &:hover {
      background-color: ${e=>e.theme["highlight-background-color-primary"]};

      .entry-header-icon {
        background-color: ${e=>e.theme["highlight-background-color-primary"]};
      }
    }
  }

  .changelog-dategroup-children {
    .changelog-entry-container:last-of-type,
    .changelog-group-container:last-of-type {
      overflow-y: hidden;
    }
  }
`,g=a.default.div`
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  position: absolute;
  background-color: ${e=>e.theme["background-color-primary"]};
  left: ${e=>e.theme["spacing-xs"]};
  top: ${e=>e.theme["spacing-m"]};
  height: ${e=>e.theme["spacing-xl"]};
  width: ${e=>e.theme["spacing-xl"]};
`,p=a.default.div`
  position: absolute;
  border-left-width: ${e=>e.theme["border-width-default"]};
  border-left-color: ${e=>e.theme["border-color-default"]};
  border-left-style: solid;
  top: ${e=>e.theme["spacing-xxl"]};
  left: ${e=>e.theme["spacing-l"]};
  height: 50%;
  width: ${e=>e.theme["spacing-zero"]};
`;function h(e){var t;const[n,a]=(0,c.useToggle)(e.isExpanded||!1);return o.createElement(m,{isExpanded:n},o.createElement("div",{className:"changelog-dategroup-container",tabIndex:0,role:"button",onClick:a,onKeyDown:a},o.createElement(p,{className:"changelog-timeline"}),o.createElement(g,{className:"entry-header-icon"},n?o.createElement(r.default,null):o.createElement(i.default,null)),o.createElement(s.default,{type:"h4",color:"content-color-primary",hasBottomSpacing:!0,text:e.dateString})),n&&o.createElement("div",{className:"changelog-dategroup-children"},null===(t=e.logs)||void 0===t?void 0:t.map((t=>(0,d.isChangelogExpandable)(t)?o.createElement(l.default,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,createdAt:t.createdAt,updatedAt:t.updatedAt,nestLevel:1,users:(0,d.getChangelogActors)(t),description:t.description,isGroup:!0,key:t.id,generatedDescription:t.generatedDescription,diff:t.diff,groupId:t.group.groupId,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline}):o.createElement(u.default,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,timestamp:t.createdAt,nestLevel:1,users:(0,d.getChangelogActors)(t),description:t.description,key:t.id,groupId:t.group.groupId,generatedDescription:t.generatedDescription,diff:t.diff,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline})))))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/ChangelogDateGroup.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/ChangelogEntry.tsx":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke-small.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),h=n("../../node_modules/lodash/lodash.js"),f=n.n(h),v=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),E=n("./js/services/NavigationService.js"),y=n("./js/components/base/Markdown.js"),b=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),x=n("../../packages/version-control/change-recording/src/hooks/index.ts"),C=n("../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/index.ts"),_=n("../../packages/version-control/change-recording/src/components/common/Modal/index.ts"),I=n("../../packages/version-control/change-recording/src/components/common/StyledText/index.ts"),j=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/index.ts"),k=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/index.ts"),L=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/index.ts"),w=n("../../packages/version-control/change-recording/src/config/index.ts"),A=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/index.ts"),S=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),N=n("../../packages/version-control/change-recording/src/utils/index.ts"),T=n("../../packages/version-control/change-recording/src/context/ChangelogContext.tsx"),R=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),D=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts"),P=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const O=v.default.div`
  position: relative;
  padding: ${e=>`${e.theme["spacing-m"]} ${e.theme["spacing-s"]}`};

  cursor: ${e=>e.isExpandable?"pointer":"default"};

  // Necessary to maintain nesting heirarchy. Unable to make do with tokens
  padding-left: ${e=>{const t=e.theme["spacing-l"],n=parseInt(t.substr(0,t.length-2),10);return`${n+n*e.nestLevel}px`}};

  .changelog-entry-description-heading {
    margin-top: ${e=>e.theme["spacing-s"]};
    font-family: ${e=>e.theme["text-family-default"]};
    font-size: ${e=>e.theme["text-size-m"]};
    font-weight: ${e=>e.theme["text-weight-regular"]};
    line-height: ${e=>e.theme["line-height-s"]};
    color: ${e=>e.theme["content-color-primary"]};

    // Only needed for flexing div
    .markdown-html-root > div > div {
      display: inline-flex;
      flex-wrap: wrap;
      align-items: center;
    }

    // Only needed for flexing div
    .markdown-html-root > div {
      display: inline-flex;
      flex-wrap: wrap;
      align-items: center;
    }

    // Only needed for fork label
    .markdown-html-root > div > div > p {
      color: ${e=>e.theme["content-color-secondary"]};
      font-weight: ${e=>e.theme["text-weight-regular"]};
      font-size: ${e=>e.theme["text-size-s"]};
      margin-right: ${e=>e.theme["spacing-xs"]};
      max-width: 150px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    // Only needed for fork label icon
    .markdown-html-root > div > div > img {
      margin-right: 2px;
    }

    // Only needed for fork name
    .markdown-html-root > div > div > strong {
      margin-left: ${e=>e.theme["spacing-xs"]};
      margin-right: 2px;
    }

    // Only needed for fork parent name
    .markdown-html-root > div > strong {
      margin-right: 2px;
    }

    // Only needed for fork parent name
    .markdown-html-root > div > div > div > p {
      margin-right: ${e=>e.theme["spacing-xs"]};
    }

    p {
      margin: 0;
    }

    strong {
      font-weight: ${e=>e.theme["text-weight-medium"]};
    }

    a {
      text-decoration: underline;
    }

    a:hover {
      color: ${e=>e.theme["content-color-link"]};
      text-decoration: underline;
    }
  }

  &:hover {
    .changelog-timeline {
      border-left-color: ${e=>e.isExpandable?e.theme["blue-30"]:e.theme["border-color-default"]};
    }

    background-color: ${e=>e.isExpandable?e.theme["highlight-background-color-primary"]:"inherit"};

    .entry-header-icon {
      background-color: ${e=>e.theme[e.isExpandable?"highlight-background-color-primary":"background-color-primary"]};
    }

    .changelog-entry-diff-wrapper {
      .changelog-entry-diff-body {
        background-color: ${e=>e.theme[e.isExpandable?"background-color-secondary":"background-color-primary"]};
      }

      .changelog-entry-diff-header {
        background-color: ${e=>e.theme[e.isExpandable?"background-color-tertiary":"background-color-secondary"]};
      }
    }
  }

  .changelog-entry-diff-text {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;

    margin-top: ${e=>e.theme["spacing-m"]};

    & > span:first-of-type {
      margin-right: ${e=>e.theme["spacing-s"]};
    }
  }

  .changelog-diff-hidden-indicator {
    margin-top: ${e=>e.theme["spacing-l"]};
  }
`,F=v.default.div`
  width: ${e=>e.theme["spacing-zero"]};
  position: absolute;
  border-left-width: ${e=>e.theme["border-width-default"]};
  border-left-color: ${e=>e.theme["border-color-default"]};
  border-left-style: solid;
  top: ${e=>e.theme["spacing-xxl"]};
  left: ${e=>e.theme["spacing-l"]};
  height: 100%;
`,$=(0,b.observer)((e=>{var t,n,h;const[v,b]=(0,o.useState)(!1),[$,q]=(0,o.useState)(null),[M,G]=(0,x.useToggle)(!1),[V,B]=(0,o.useState)(!1),[U,H]=(0,o.useState)(!1),[z,W]=(0,o.useState)((()=>e.note||"")),[Y,K]=(0,o.useState)(!1),[X,Q]=(0,o.useState)((()=>e.tag||"")),{model:Z,modelId:J,reloadChangelog:ee,store:te}=(0,o.useContext)(T.default),{isChangelogHideDiffEnabled:ne}=te,{addToast:oe}=(0,s.default)(),se=(0,o.useMemo)((()=>function(e){let t=e.template;return Object.keys(e.placeholders).forEach((n=>{const o=e.placeholders[n].value;if(o&&"string"==typeof o){let e=o;o.length>30&&(e=`${o.slice(0,28)}...`),t=t.split(n).join(e)}else t=t.split(`**${n}**`).join(""),t=t.split(n).join("")})),t}(e.generatedDescription)),[e.generatedDescription]),re=(null===(t=e.diff)||void 0===t?void 0:t.isHidden)||!1,ie=t=>te.updateChangelogDiffHidden(e.id,t,e.groupId,!0===e.isGroup),ae=e.diff&&0===Object.keys((null===(n=e.diff)||void 0===n?void 0:n.fetched)||{}).filter((t=>{var n;return!f().isEmpty(null===(n=e.diff)||void 0===n?void 0:n.fetched[t])})).length,le=!te.disableRestore&&(null===(h=e.allowedActions)||void 0===h?void 0:h.restore),ce=ne&&e.allowedActions.hideDiff&&!ae&&!re,de=ne&&e.allowedActions.hideDiff&&!ae&&re,ue=le||ce||de,me={deleteTag:{content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"This will delete the tag added to the change permanently"),header:"Delete tag?",isDestructive:!0,modalSize:"small",onConfirm:function(){Y&&K(!1),b(!1),Q("")},confirmButtonText:"Delete",confirmButtonLoadingText:"Deleting..."},deleteNote:{content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"This will delete the note added to the change permanently"),header:"Delete note?",isDestructive:!0,modalSize:"small",onConfirm:function(){U&&H(!1),b(!1),W("")},confirmButtonText:"Delete",confirmButtonLoadingText:"Deleting..."},restoreChanges:{header:"Restore changes",content:o.createElement(C.default,{createdAt:e.timestamp,model:e.changeModel,modelId:J||"",toRevision:e.id}),isDestructive:!1,modalSize:"small",onConfirm:function(){return P(this,void 0,void 0,(function*(){B(!0),R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.INITIATE_CHANGELOG_RESTORE,Z),(0,S.restoreModelToChange)(Z,J,e.restoreKey,e.id).then((()=>{oe({title:`Successfully restored ${Z}`,status:"success",description:`Your ${Z} was successfully restored to the change at ${(0,N.formatTimeAndDate)(e.timestamp)}.`,isDismissible:!0})})).catch((e=>{D.default.logError(`ChangelogEntry~restoreModelToChange: Failed to restore ${Z}`,e),R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.FAILED_CHANGELOG_RESTORE,Z),oe({title:`Failed to restore ${Z}`,status:"error",description:"Something went wrong. Please try again later.",isDismissible:!0})})).finally((()=>{b(!1),B(!1),setTimeout((()=>ee()),2e3)}))}))},confirmButtonText:"Restore",disableButtons:V,confirmButtonLoadingText:"Restoring..."},hideChangeDiff:{header:"Hide diff for this change?",content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"All users with access to this workspace will be able to see the change but the diff will be hidden. Only editors of this ",Z," ","will be able to view diff."),isDestructive:!1,modalSize:"small",onConfirm:function(){B(!0),R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.INITIATE_CHANGELOG_HIDE_DIFF,Z),(0,S.hideChangelogDiff)(Z,J,e.id).then((()=>{ie(!0),oe({title:"Diff hidden from viewers for this change",status:"success",isDismissible:!0})})).catch((e=>{D.default.logError(`ChangelogEntry~hideDiff: Failed to hide diff for ${Z}`,e),R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.FAILED_CHANGELOG_HIDE_DIFF,Z),oe({title:"Failed to hide diff for changelog",status:"error",description:"Something went wrong. Please try again later.",isDismissible:!0})})).finally((()=>{b(!1),B(!1)}))},confirmButtonText:"Hide Diff",disableButtons:V,confirmButtonLoadingText:"Hiding..."},unhideChangeDiff:{header:"Show diff to all users?",content:o.createElement(r.default,{type:"body-medium",color:"content-color-primary"},"All users with access to this workspace will be able to view diff for this change."),isDestructive:!1,modalSize:"small",onConfirm:function(){B(!0),R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.INITIATE_CHANGELOG_UNHIDE_DIFF,Z),(0,S.unhideChangelogDiff)(Z,J,e.id).then((()=>{ie(!1),oe({title:"All users with access to this workspace can now see this diff",status:"success",isDismissible:!0})})).catch((e=>{D.default.logError(`ChangelogEntry~unhideDiff: Failed to unhide diff for ${Z}`,e),R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.FAILED_CHANGELOG_UNHIDE_DIFF,Z),oe({title:"Failed to unhide diff for changelog",status:"error",description:"Something went wrong. Please try again later.",isDismissible:!0})})).finally((()=>{b(!1),B(!1)}))},confirmButtonText:"Show Diff",disableButtons:V,confirmButtonLoadingText:"Unhiding..."}};function ge(){M||R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_DIFF,Z),G()}function pe(){R.default.addEvent(w.CHANGELOG_ANALYTICS_EVENTS.VIEW_EXPANDED_DIFF,Z),E.default.transitionTo("build.changelogExpandedDiff",{model:Z,modelId:J,changelogId:btoa(e.id)},{})}function he(){H(!0)}function fe(){K(!0)}function ve(e){let t;switch(e){case"restoreChanges":t=w.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_RESTORE;break;case"hideChangeDiff":t=w.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_HIDE_DIFF;break;case"unhideChangeDiff":t=w.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_UNHIDE_DIFF;break;default:return}R.default.addEvent(t,Z),q(e),b(!0)}return o.createElement(O,{nestLevel:e.nestLevel,isExpandable:e.isGroup,className:"changelog-entry-container",onClick:e.onClick},o.createElement(F,{nestLevel:e.nestLevel,className:"changelog-timeline"}),o.createElement(L.default,{isExpanded:e.isExpanded,isCollapsible:e.isGroup,createdAt:e.timestamp,users:e.users,isDiffHidden:ne&&!0===e.allowedActions.hideDiff&&re},ue&&o.createElement("div",{role:"button",tabIndex:0,onKeyDown:t=>e.isGroup&&t.stopPropagation(),onClick:t=>{e.isGroup&&t.stopPropagation()}},o.createElement(d.default,{closeOnSelect:!0},o.createElement(u.default,null,o.createElement(m.default,{icon:"icon-action-options-stroke",type:"tertiary",size:"small"})),o.createElement(i.default,null,le&&o.createElement(a.default,{isDisabled:e.isOffline,tooltip:e.isOffline&&"You must be online to perform this action",onClick:()=>ve("restoreChanges")},"Restore to this change"),w.ENABLE_CHANGELOG_TAG&&X&&!Y&&o.createElement(a.default,{onClick:fe},"Edit tag"),w.ENABLE_CHANGELOG_TAG&&X&&!Y&&o.createElement(a.default,{onClick:()=>ve("deleteTag")},"Delete tag"),w.ENABLE_CHANGELOG_TAG&&!X&&!Y&&o.createElement(a.default,{onClick:fe},"Add a tag"),w.ENABLE_CHANGELOG_NOTE&&z&&!U&&o.createElement(a.default,{onClick:he},"Edit Note"),w.ENABLE_CHANGELOG_NOTE&&z&&!U&&o.createElement(a.default,{onClick:()=>ve("deleteNote")},"Delete Note"),w.ENABLE_CHANGELOG_NOTE&&!z&&!U&&o.createElement(a.default,{onClick:he},"Add Note"),ce&&o.createElement(a.default,{isDisabled:e.isOffline,tooltip:e.isOffline&&"You must be online to perform this action",onClick:()=>ve("hideChangeDiff")},"Hide diff for this change"),de&&o.createElement(a.default,{isDisabled:e.isOffline,tooltip:e.isOffline&&"You must be online to perform this action",onClick:()=>ve("unhideChangeDiff")},"Show diff to all users"))))),o.createElement("div",{className:"changelog-entry-description-heading"},o.createElement(y.default,{source:e.description||se})),w.ENABLE_CHANGELOG_NOTE&&o.createElement(k.default,{tag:X,isEditingTag:Y,onCancelTag:function(){K(!1)},onSaveTag:function(e){Q(e),K(!1)}}),w.ENABLE_CHANGELOG_TAG&&o.createElement(j.default,{note:z,isEditingNote:U,onCancelNote:function(){H(!1)},onSaveNote:function(e){W(e),H(!1)}}),!e.isGroup&&(ne&&!e.allowedActions.hideDiff&&re?o.createElement(l.default,{content:"Only users with edit permission can view this diff",placement:"bottom"},o.createElement(c.default,{className:"changelog-diff-hidden-indicator",justifyContent:"flex-start",gap:"spacing-xs",alignItems:"center"},o.createElement(g.default,null),o.createElement(r.default,{color:"content-color-secondary"},"Diff Hidden"))):ae?null:o.createElement(o.Fragment,null,M&&e.diff&&o.createElement("div",null,Object.keys(e.diff.fetched).map((t=>{var n;return f().isEmpty(null===(n=e.diff)||void 0===n?void 0:n.fetched[t])?null:o.createElement(A.default,{key:t,shouldClipLargerDiffs:!0,diff:e.diff.fetched[t],onClickExpand:pe,changeModelName:e.changeModelName,isOffline:e.isOffline})}))),o.createElement("div",{className:"changelog-entry-diff-text",role:"button",tabIndex:0,onKeyDown:t=>e.isGroup&&t.stopPropagation(),onClick:t=>e.isGroup&&t.stopPropagation()},o.createElement(I.SubtleLink,{onClick:e.isGroup?pe:ge},o.createElement(r.default,{type:"normal"},M?"Close":"View"," diff")),ne&&re&&e.allowedActions.hideDiff&&o.createElement(l.default,{content:`Only editors of this ${Z} can view diff. It is hidden for other users.`,placement:"bottom"},o.createElement(p.default,null))))),v&&function(){if(!$)return;const t=me[$];return t?o.createElement(_.default,{header:t.header,content:t.content,isDestructive:t.isDestructive,isOpen:v,onConfirm:t.onConfirm,onCancel:()=>b(!1),confirmButtonText:V?t.confirmButtonLoadingText:t.confirmButtonText,isOffline:e.isOffline,disableButtons:V}):null}())}));t.default=$},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/ChangelogEntry.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/ChangelogEntryHeader.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke.js"),c=n("../../packages/version-control/change-recording/src/components/common/Time/index.ts"),d=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/index.ts");const u=s.default.div`
  border-radius: ${e=>e.theme["border-radius-max"]};
  border-width: ${e=>e.theme["border-width-default"]};
  border-style: solid;
  border-color: ${e=>e.theme["content-color-secondary"]};

  width: ${e=>e.theme["spacing-xs"]};
  height: ${e=>e.theme["spacing-xs"]};
`,m=s.default.div`
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;

  position: absolute;
  background-color: ${e=>e.theme["background-color-primary"]};
  left: ${e=>e.theme["spacing-xs"]};
  top: ${e=>e.theme["spacing-m"]};

  height: ${e=>e.theme["spacing-xl"]};
  width: ${e=>e.theme["spacing-xl"]};
`,g=s.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  min-height: ${e=>e.theme["spacing-xl"]};
`;function p(e){return o.createElement(r.default,{justifyContent:"space-between"},o.createElement(m,{className:"entry-header-icon"},e.isCollapsible&&(e.isExpanded?o.createElement(i.default,null):o.createElement(a.default,null)),!e.isDiffHidden&&!e.isCollapsible&&o.createElement(u,null),e.isDiffHidden&&!e.isCollapsible&&o.createElement(l.default,null)),o.createElement(g,null,o.createElement(c.default,{timeString:e.createdAt}),o.createElement("span",{role:"button",tabIndex:0,onKeyDown:t=>e.isCollapsible&&t.stopPropagation(),onClick:t=>e.isCollapsible&&t.stopPropagation()},o.createElement(d.default,{users:e.users}))),e.children)}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryHeader/ChangelogEntryHeader.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/ChangelogEntryNote.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/index.ts");const a=r.default.div`
  margin-top: ${e=>e.theme["spacing-m"]};
`;function l(e){return o.createElement(a,null,e.note&&!e.isEditingNote&&o.createElement("div",null,o.createElement(s.default,{type:"body-medium",color:"content-color-primary"},e.note)),e.isEditingNote&&o.createElement("div",{role:"button",tabIndex:0,onKeyDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation()},o.createElement(i.InlineTextArea,{placeholder:"Add a note to explain this change",value:e.note,labelText:"Note",onSave:e.onSaveNote,onCancel:e.onCancelNote})))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryNote/ChangelogEntryNote.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/ChangelogEntryTag.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../packages/version-control/change-recording/src/components/common/Tag/Tag.tsx"),i=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/index.ts");const a=s.default.div`
  .changelog-tag-content-container {
    display: flex;
    flex-direction row;
    margin-top: ${e=>e.theme["spacing-s"]};
  }

  .changelog-tag-editor-container {
    margin-top: ${e=>e.theme["spacing-m"]};
  }
`;function l(e){const{tag:t,isEditingTag:n}=e;return o.createElement(a,null,t&&!n&&o.createElement("div",{className:"changelog-tag-content-container"},o.createElement(r.default,{text:t})),n&&o.createElement("div",{className:"changelog-tag-editor-container",role:"button",tabIndex:0,onKeyDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation()},o.createElement(i.InlineTextInput,{placeholder:"Add a tag",value:t,labelText:"Tag",helperText:"A tag creates a named reference to this change",onCancel:e.onCancelTag,onSave:e.onSaveTag})))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryTag/ChangelogEntryTag.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/ChangelogEntryUsers.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("./version-control/common/UserListItem/index.js"),l=n("./js/modules/services/APIService.js"),c=n("./js/models/services/DashboardService.js"),d=n("../../packages/version-control/change-recording/src/components/common/UserAvatars/index.ts"),u=n("../../packages/version-control/change-recording/src/components/common/StyledText/index.ts"),m=n("./appsdk/components/link/Link.js");const g=i.default.div`
  .changelog-entry-users-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: auto;
  }
`,p=i.default.div`
  .avatar {
    height: ${({theme:e})=>e["size-xs"]};
    width: ${({theme:e})=>e["size-xs"]};
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }
`;function h({user:e}){const t=(e.name||e.username||"").trim();return e.isAccessible?o.createElement(m.default,{onKeyDown:e=>e.stopPropagation(),onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),function(e){e.isAccessible&&(e.isPublic?(0,l.openAuthenticatedRoute)(e.publicHandle):(0,c.openTeamUserProfile)(e.id))}(e))},to:e.publicHandle},o.createElement(u.SubtleLink,null,t)):o.createElement(s.default,{type:"body-small"},t)}function f(e){if(!e.users)return null;function t(){return o.createElement("div",{className:"changelog-entry-users-container"},o.createElement(d.default,{users:e.users,avatarsStackingCount:2}),o.createElement(s.default,{type:"body-small",color:"content-color-secondary"},function(){if(e.users.length<1)return"";if(e.users.length<=2)return e.users.map((e=>o.createElement(h,{user:e}))).reduce(((e,t)=>o.createElement(o.Fragment,null,e," and ",t)));const t=(e.users[0].name||e.users[0].username||"").trim();return o.createElement(u.SubtleLink,null,t," and ",e.users.length-1," others")}()))}return o.createElement(g,null,e.users.length<=2?t():o.createElement(r.default,{placement:"bottom",triggerEvent:"mouseenter",trigger:t()},o.createElement(p,null,e.users.map((e=>o.createElement(a.default,{user:e}))))))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntryUsers/ChangelogEntryUsers.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/ChangelogGroup.tsx":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("../../packages/version-control/change-recording/src/hooks/index.ts"),d=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),u=n("../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts"),m=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogEntry/index.ts"),g=n("../../packages/version-control/change-recording/src/context/ChangelogContext.tsx"),p=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),h=n("../../packages/version-control/change-recording/src/config/index.ts"),f=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts"),v=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const E=s.default.div`
  &:hover {
    .changelog-timeline {
      border-left-color: ${e=>e.theme["blue-30"]};
    }
  }

  .changelog-group-load-more-container {
    position: relative;
  }

  .changelog-group-load-more-timeline {
    width: ${e=>e.theme["spacing-zero"]};
    position: absolute;
    border-left-width: ${e=>e.theme["border-width-default"]};
    border-left-color: ${e=>e.theme["border-color-default"]};
    border-left-style: solid;
    left: ${e=>e.theme["spacing-l"]};
    height: 120%;
  }
`,y=e=>o.createElement(o.Fragment,null,o.createElement("div",{className:"changelog-group-children-container"},e.logs.map((t=>(0,u.isChangelogExpandable)(t)?o.createElement(b,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,createdAt:t.createdAt,updatedAt:t.updatedAt,nestLevel:e.nestLevel,users:(0,u.getChangelogActors)(t),description:t.description,isGroup:!0,key:t.id,generatedDescription:t.generatedDescription,diff:t.diff,groupId:t.group.groupId,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline}):o.createElement(m.default,{changeModel:t.model,changeModelId:t.modelId,changeModelName:t.name,changeAction:t.action,changeTrigger:t.trigger,id:t.id,timestamp:t.createdAt,nestLevel:e.nestLevel,users:(0,u.getChangelogActors)(t),description:t.description,key:t.id,generatedDescription:t.generatedDescription,diff:t.diff,restoreKey:t.restoreKey,allowedActions:t.allowedActions,isOffline:e.isOffline,groupId:e.groupId})))),(e.isOffline||e.isLoading||e.hasMoreLogs)&&o.createElement("div",{className:"changelog-group-load-more-container"},o.createElement("div",{className:"changelog-timeline changelog-group-load-more-timeline"}),o.createElement(r.default,{justifyContent:"center",alignItems:"center",padding:"spacing-l"},e.isLoading&&o.createElement(i.default,{size:"small"}),!e.isLoading&&e.hasMoreLogs&&o.createElement(a.default,{type:"outline",text:"Load more",size:"small",isDisabled:e.isOffline,tooltip:e.isOffline?"You must be online to load more changes":"Load more changes",onClick:()=>e.onLoadMore&&e.onLoadMore()}))));function b(e){const{model:t,modelId:n,store:s}=(0,o.useContext)(g.default),{getGroupLogsNextPageId:r,setGroupLogsNextPageId:i,appendGroupLogs:a,getGroupLogs:l}=s,[u,b]=(0,c.useToggle)(!1),[x,C]=(0,o.useState)(!1),[_,I]=(0,o.useState)(!1),j=l(e.groupId);function k(){return v(this,void 0,void 0,(function*(){u&&(p.default.addEvent(h.CHANGELOG_ANALYTICS_EVENTS.INITIATE_VIEW_SESSION_GROUP,t),C(!0),I(!1),(0,d.fetchModelChangelog)(t,n,r(e.groupId),e.groupId,20).then((({data:t})=>{i(e.groupId,t.nextPageId||null),a(e.groupId,t.logs)})).catch((e=>{f.default.logError("ChangelogGroup~fetchModelChangelog: Failed to fetch changelogs",e),p.default.addEvent(h.CHANGELOG_ANALYTICS_EVENTS.FAILED_VIEW_SESSION_GROUP,t),I(!0)})).finally((()=>{C(!1)})))}))}return(0,o.useEffect)((()=>{0===j.length&&k()}),[u]),o.createElement(E,{className:"changelog-group-container"},o.createElement(m.default,{id:e.id,timestamp:e.updatedAt||e.createdAt,users:e.users,description:e.description,isGroup:!0,isExpanded:u,onClick:function(){u||p.default.addEvent(h.CHANGELOG_ANALYTICS_EVENTS.EXPAND_SESSION_GROUP,t),b()},nestLevel:e.nestLevel,changeModel:e.changeModel,changeModelId:e.changeModelId,changeModelName:e.changeModelName,generatedDescription:e.generatedDescription,changeAction:e.changeAction,changeTrigger:e.changeTrigger,key:e.id,groupId:e.groupId,restoreKey:e.restoreKey,allowedActions:e.allowedActions,isOffline:e.isOffline}),u&&o.createElement(y,{nestLevel:e.nestLevel+1,isLoading:x,logs:j,groupId:e.groupId,hasMoreLogs:null!==r(e.groupId),onLoadMore:k,isOffline:e.isOffline}))}t.default=(0,l.observer)(b)},"../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogGroup/ChangelogGroup.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/ChangelogRenderer.tsx":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),g=n("./appsdk/contextbar/ContextBarViewHeader.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=n("./js/stores/SyncStatusStore.js"),f=n("./js/stores/StoreManager.js"),v=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogDateGroup/index.ts"),E=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),y=n("../../packages/version-control/change-recording/src/components/common/ErrorBoundary/index.ts"),b=n("../../packages/version-control/change-recording/src/context/ChangelogContext.tsx"),x=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),C=n("../../packages/version-control/change-recording/src/config/index.ts"),_=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts"),I=n("../../packages/version-control/change-recording/src/models/ChangelogModel.ts"),j=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const k="You can perform this action once you're back online",L=s.default.ul`
  overflow-y: auto;
  list-style-type: none;
  padding: ${e=>e.theme["spacing-zero"]};
  margin: ${e=>e.theme["spacing-zero"]};
`,w=(0,p.observer)((e=>{const t=(0,o.useRef)(null),[n,s]=(0,o.useState)(!1),[p,I]=(0,o.useState)(!1),{resetChangelog:w,nextPageId:A,setNextPageId:S,appendDateGroupLogs:N,dateGroups:T,areChangelogsLoaded:R}=e.store,D=!(0,f.resolveStoreInstance)(h.default).isSocketConnected;function P(){w(),O(25,!0)}function O(t=10,n=!1){return j(this,void 0,void 0,(function*(){x.default.addEvent(""===A?C.CHANGELOG_ANALYTICS_EVENTS.INITIATE_VIEW_CHANGELOG:C.CHANGELOG_ANALYTICS_EVENTS.INITIATE_PAGINATE_CHANGELOG,e.model),I(!1),s(!0),(0,E.fetchModelChangelog)(e.model,e.modelId,n?null:A,null,t).then((({data:t})=>{""===A&&x.default.addEvent(C.CHANGELOG_ANALYTICS_EVENTS.VIEW_CHANGELOG_V2,e.model),S(t.nextPageId||null),N(t.logs,n)})).catch((t=>{_.default.logError("ChangelogRenderer~fetchChangelogData: Failed to fetch changelogs",t),x.default.addEvent(""===A?C.CHANGELOG_ANALYTICS_EVENTS.FAILED_VIEW_CHANGELOG_V2:C.CHANGELOG_ANALYTICS_EVENTS.FAILED_PAGINATE_CHANGELOG,e.model),I(!0)})).finally((()=>{s(!1)}))}))}function F(){if(t.current){const{scrollTop:e,scrollHeight:o,offsetHeight:s}=t.current;o-(e+s)<=500&&!n&&A&&O()}}(0,o.useEffect)((()=>{D||n||R||O(25)}),[D]);const $=P;return o.createElement(y.default,{onErrorRender:o.createElement(i.default,{title:`Unable to load the ${e.model} changelog`,description:"Something went wrong when loading the changelog.",primaryAction:o.createElement(a.default,{type:"outline",text:"Try again",onClick:()=>O(25,!0),isDisabled:D,tooltip:D&&k})},o.createElement(l.default,null))},o.createElement(o.Fragment,null,o.createElement(g.ContextBarViewHeader,{title:"Changelog",onClose:e.onClose},o.createElement(a.default,{type:"tertiary",onClick:$,isDisabled:n||D,className:"changelog-renderer-reload-changelog-button",tooltip:D?"You can perform this action once you're back online":"Reload Changelog",icon:o.createElement(m.default,null)})),o.createElement(b.default.Provider,{value:{model:e.model,modelId:e.modelId,reloadChangelog:P,store:e.store}},o.createElement(L,{className:"changelog-renderer-dategroups-container",onScroll:F,ref:t},Object.keys(T).map((e=>o.createElement(v.default,{isExpanded:!0,isOffline:D||!1,key:e,dateString:e,logs:T[e]}))),o.createElement(r.default,{justifyContent:"center",alignItems:"center",padding:"spacing-l"},n&&o.createElement(u.default,{size:"small"}),!n&&A&&o.createElement(a.default,{type:"outline",text:"Load more",onClick:()=>O()})),p||D?o.createElement(r.default,{justifyContent:"center",alignItems:"center"},!R&&!D&&p&&o.createElement(i.default,{title:`Unable to load the ${e.model} changelog`,description:"Something went wrong when loading the changelog.",primaryAction:o.createElement(a.default,{type:"outline",text:"Try again",onClick:()=>O(25,!0),isDisabled:D,tooltip:D&&k})},o.createElement(l.default,null)),!R&&D&&o.createElement(i.default,{title:"Check your connection",description:"Get online to view the changelog"},o.createElement(c.default,null)),!R&&!D&&!p&&o.createElement(i.default,{title:"No logs found",description:`Make some changes to the ${e.model} to see the change logs`},o.createElement(d.default,null))):null))))}));t.default=e=>{const[t]=(0,o.useState)(new I.default(e.disableRestore));return o.createElement(w,Object.assign({},e,{store:t}))}},"../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/ChangelogRenderer.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffAttributeRenderer.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("../../packages/version-control/diff-components/index.ts"),a=n("../../node_modules/lodash/lodash.js"),l=n.n(a),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./js/utils/ColorUtils.js");const u=c.default.div`
  position: relative;
  max-height: ${e=>e.shouldClipLargerDiffs?"150px":"100%"};
  overflow: hidden;
  margin-top: ${e=>e.theme["spacing-s"]};

  border-bottom-style: ${e=>e.theme["border-style-solid"]};
  border-bottom-color: ${e=>e.theme["border-color-default"]};
  border-bottom-width: ${e=>e.isOverlayVisible?e.theme["border-width-default"]:0};

  .changelog-entry-diff-attribute-expand-internal-container {
    display: table;
    width: 100%;
  }

  .changelog-entry-diff-attribute-expand-overlay {
    position: absolute;
    top: 0;
    left: 0;
    display: flex;
    height: 100%;
    width: 100%;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    pointer-events: none;
    background: linear-gradient(
        to bottom,
        ${e=>(0,d.convertToRGBA)(e.theme["background-color-primary"],0)}
          75%,
        ${e=>e.theme["background-color-primary"]} 100%
      ),
      linear-gradient(
        to right,
        ${e=>(0,d.convertToRGBA)(e.theme["background-color-primary"],0)}
          95%,
        ${e=>e.theme["background-color-primary"]} 100%
      );

    button {
      pointer-events: auto;
      bottom: -${e=>e.theme["spacing-xl"]};
      transition: bottom 0.25s ease;
      border-radius: ${e=>e.theme["spacing-xl"]};
    }
  }

  &:hover button {
    bottom: ${e=>e.theme["spacing-l"]};
  }
`;function m(e){const t=(0,o.useRef)(null),n=(0,o.useRef)(null),[a,c]=(0,o.useState)(!1);return(0,o.useLayoutEffect)((()=>{if(!e.shouldClipLargerDiffs)return;function o(){if(t.current&&n.current){const e=t.current.getBoundingClientRect(),o=n.current.getBoundingClientRect();e.height<o.height||e.width<o.width?c(!0):c(!1)}}o();const s=new ResizeObserver((()=>o()));return t.current&&s.observe(t.current),()=>{s&&s.disconnect()}}),[e.shouldClipLargerDiffs]),o.createElement(o.Fragment,null,o.createElement(s.default,{color:"content-color-secondary",type:"normal"},o.createElement(s.default,{type:"strong"},e.label)),o.createElement(u,{shouldClipLargerDiffs:e.shouldClipLargerDiffs,isOverlayVisible:a,ref:t},e.shouldClipLargerDiffs&&a&&o.createElement("div",{className:"changelog-entry-diff-attribute-expand-overlay"},o.createElement(r.default,{size:"small",type:"secondary",text:"View more",isDisabled:e.isOffline,onClick:e.onClickExpand,tooltip:e.isOffline&&"You must be online to view detailed diff"})),o.createElement("div",{className:"changelog-entry-diff-attribute-expand-internal-container",ref:n},function(){switch(e.diffType){case"json":return o.createElement(i.JSONDiff,{diff:e.diff});case"line":return o.createElement(i.LineDiff,{diff:e.diff,onExpand:l().noop});case"selection":return o.createElement(i.SelectionDiff,{diff:e.diff});case"selection-and-config":return o.createElement(i.SelectionAndConfigDiff,{diff:e.diff});case"table":return o.createElement(i.TruncatedTableDiff,{diff:e.diff});case"text":return o.createElement(i.TextDiff,{diff:e.diff});case"list":return o.createElement(i.ListDiff,{diff:e.diff});default:return null}}())))}},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffRenderer.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/lodash/lodash.js"),i=n.n(r),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),m=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffAttributeRenderer.tsx"),g=n("../../packages/version-control/change-recording/src/hooks/index.ts");const p=s.default.div`
  border-radius: ${e=>e.theme["border-radius-default"]};
  border-style: ${e=>e.theme["border-style-solid"]};
  border-color: ${e=>e.theme["border-color-strong"]};
  border-width: ${e=>e.theme["border-width-default"]};
  margin-top: ${e=>`${e.theme["spacing-m"]}`};

  .changelog-entry-diff-header {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: start;
    cursor: default;
    background-color: ${e=>e.theme["background-color-secondary"]};
    padding: ${e=>`${e.theme["spacing-s"]} ${e.theme["spacing-m"]}`};

    *:not(:first-child) {
      margin-left: ${e=>e.theme["spacing-xs"]};
    }

    &:hover {
      background-color: ${e=>e.theme[e.isCollapsible?"background-color-tertiary":"background-color-secondary"]};
    }
  }

  .changelog-entry-diff-body {
    padding: ${e=>`${e.theme["spacing-m"]} ${e.theme["spacing-l"]}`};
  }

  .changelog-entry-diff-body
    > .changelog-entry-diff-attribute-wrapper:not(:last-child) {
    margin-bottom: ${e=>e.theme["spacing-l"]};
  }
`;function h(e){var t,n;const[s,r]=(0,g.useToggle)(!0);return o.createElement(p,{isCollapsible:e.isCollapsible,className:"changelog-entry-diff-wrapper"},o.createElement("div",{className:"changelog-entry-diff-header",onClick:()=>e.isCollapsible&&r(),onKeyDown:()=>e.isCollapsible&&r(),role:"button",tabIndex:0},e.isCollapsible&&(s?o.createElement(d.default,null):o.createElement(u.default,null)),function(){if("string"==typeof e.diff.icon||"object"==typeof e.diff.icon)return o.createElement(c.default,{className:"entity-icon",name:e.diff.icon,color:"content-color-secondary"})}(),o.createElement(a.default,{type:"h6",color:"content-color-primary",isTruncated:!0,text:e.diff.label||e.changeModelName||(h=e.diff.entity,h?h.charAt(0).toUpperCase()+h.slice(1):"")}),null===(t=e.diff.operations)||void 0===t?void 0:t.map(((e,t)=>o.createElement(l.default,{text:e,type:"light",key:t})))),s&&o.createElement("div",{className:"changelog-entry-diff-body"},null===(n=e.diff.changedAttributes)||void 0===n?void 0:n.map(((t,n)=>function(e){return!(!i().isEmpty(e)&&!i().isEmpty(e.diff))||"line"===e.diffType&&0===e.diff.totalBits}(t)?null:o.createElement("div",{key:n,className:"changelog-entry-diff-attribute-wrapper"},o.createElement(m.default,Object.assign({isOffline:e.isOffline,onClickExpand:e.onClickExpand,shouldClipLargerDiffs:e.shouldClipLargerDiffs},t)))))));var h}},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/index.ts":function(e,t,n){n.r(t),n.d(t,{IDiffAttributeRendererProps:function(){return s.IDiffAttributeRendererProps},default:function(){return o.default}});var o=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffRenderer.tsx"),s=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/types.ts")},"../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/types.ts":function(e,t,n){n.r(t)},"../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/ExpandedDiffRenderer.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("../../node_modules/lodash/lodash.js"),p=n.n(g),h=n("./js/stores/SyncStatusStore.js"),f=n("./js/stores/StoreManager.js"),v=n("../../packages/version-control/change-recording/src/services/ChangelogService.ts"),E=n("../../packages/version-control/change-recording/src/components/changelog/DiffRenderer/DiffRenderer.tsx"),y=n("../../packages/version-control/change-recording/src/utils/index.ts"),b=n("../../packages/version-control/change-recording/src/components/common/ErrorBoundary/index.ts"),x=n("../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts"),C=n("../../packages/version-control/change-recording/src/config/index.ts"),_=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts");const I=m.default.div`
  padding: ${e=>e.theme["spacing-l"]};
  overflow-y: auto;

  .changelog-expanded-diff-renderer-title {
    margin-top: ${e=>e.theme["spacing-m"]};
    margin-bottom: ${e=>e.theme["spacing-m"]};
  }

  .changelog-expanded-diff-back-navigation {
    cursor: pointer;
    display: inline-flex;
    padding: 0;
    align-items: center;
    background-color: ${e=>e.theme["background-color-primary"]};
    outline: none;
    border: none;

    span {
      margin-left: ${e=>e.theme["spacing-xs"]};
    }
  }

  .changelog-expanded-diff-renderer-divider {
    border-top-style: ${e=>e.theme["border-style-solid"]};
    border-top-color: ${e=>e.theme["border-color-strong"]};
    border-top-width: ${e=>e.theme["border-width-default"]};
    width: 100%;
    margin-bottom: ${e=>e.theme["spacing-l"]};
    margin-top: ${e=>e.theme["spacing-m"]};
  }

  .changelog-expanded-diff-changes-container {
    margin-top: ${e=>e.theme["spacing-l"]};
  }

  .changelog-diff-renderer-view-truncated-model-name {
    display: inline-flex;
    align-items: center;
    max-width: 200px;
  }
`;function j(e){const[t,n]=(0,o.useState)(null),[m,g]=(0,o.useState)(!0),[j,k]=(0,o.useState)(!1),L=!(0,f.resolveStoreInstance)(h.default).isSocketConnected;function w(){y.ModelNavigator[e.model](e.modelId)}function A(){g(!0),k(!1),x.default.addEvent(C.CHANGELOG_ANALYTICS_EVENTS.INITIATE_VIEW_EXPANDED_DIFF,e.model),(0,v.fetchModelChangelogForChangelogId)(e.model,e.modelId,e.changelogId).then((e=>{if(!e)throw new Error(`Fetched invalid changelog data ${e}`);n(e)})).catch((t=>{_.default.logError("ExpandedDiffRenderer~fetchModelChangelogForChangelogId: Failed to fetch changelog",t),x.default.addEvent(C.CHANGELOG_ANALYTICS_EVENTS.FAILED_VIEW_EXPANDED_DIFF,e.model),k(!0)})).finally((()=>g(!1)))}return(0,o.useEffect)((()=>{A()}),[]),o.createElement(b.default,{onErrorRender:o.createElement(a.default,{title:`Unable to load the ${e.model} changelog`,description:"Something went wrong when loading the changelog.",primaryAction:o.createElement(l.default,{type:"outline",text:"Back to changelog",onClick:w,tooltip:"Back to changeloge"})},o.createElement(c.default,null))},o.createElement(I,null,!e.forceDisplayErrorState&&m&&o.createElement(r.default,{justifyContent:"center",alignItems:"center",padding:"spacing-xxl"},m&&o.createElement(i.default,{size:"small"})),!e.forceDisplayErrorState&&!m&&!j&&t&&o.createElement(o.Fragment,null,o.createElement("button",{type:"button",className:"changelog-expanded-diff-back-navigation",onClick:w,tabIndex:0},o.createElement(u.default,{color:"content-color-secondary"}),o.createElement("span",{className:"changelog-diff-renderer-view-truncated-model-name"},o.createElement(s.default,{color:"content-color-secondary",type:"body-medium",isTruncated:!0},e.modelName))),o.createElement("div",{className:"changelog-expanded-diff-renderer-title"},o.createElement(s.default,{type:"body-large",color:"content-color-primary",isTruncated:!0},o.createElement(s.default,{type:"strong"},"Changes on ",e.modelName))),t?t.group.isMaster?o.createElement(s.default,{type:"body-normal",color:"content-color-primary"},"Changes made by ",t.actors[0].name," and"," ",t.actors.length," others between"," ",o.createElement(s.default,{type:"strong"},(0,y.formatTimeAndDate)(t.createdAt))," ","and"," ",o.createElement(s.default,{type:"strong"},(0,y.formatTimeAndDate)(t.createdAt))):o.createElement(s.default,{type:"body-normal",color:"content-color-primary"},"Changes made by ",o.createElement(s.default,{type:"strong"},t.actor.name)," on"," ",o.createElement(s.default,{type:"strong"},(0,y.formatTimeAndDate)(t.createdAt))):null,o.createElement("div",{className:"changelog-expanded-diff-renderer-divider"}),t&&o.createElement("div",{className:"changelog-expanded-diff-changes-container"},Object.keys(t.diff.fetched).map(((e,n)=>p().isEmpty(t.diff.fetched[e])?null:o.createElement(E.default,{isCollapsible:!0,key:n,isOffline:L,changeModelName:t.name,diff:t.diff.fetched[e]}))))),e.forceDisplayErrorState||!m&&!L&&!t&&j&&o.createElement(a.default,{title:"Unable to load changelog diff",description:`Something went wrong fetching the diff for the ${e.model} changelog.`,primaryAction:o.createElement(l.default,{type:"outline",text:"Try again",isDisabled:L,tooltip:L&&"You can perform this action once you're back online",onClick:A})},o.createElement(c.default,null)),!e.forceDisplayErrorState&&!m&&L&&!t&&o.createElement(a.default,{title:"Check your connection",description:"Get online to view the changelog"},o.createElement(d.default,null))))}},"../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/ExpandedDiffRenderer.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/RestoreChangesModalContent.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../packages/version-control/change-recording/src/utils/index.ts");function a(e){return o.createElement(s.default,{type:"normal"},o.createElement(r.default,{direction:"column",gap:"spacing-m"},o.createElement(s.default,{type:"body-medium",color:"content-color-primary"},"This ",e.model," will revert to changes from"," ",(0,i.formatTimeAndDate)(e.createdAt),". Are you sure you want to restore?")))}},"../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/changelog/RestoreChangesModalContent/RestoreChangesModalContent.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/ErrorBoundary/ErrorBoundary.tsx":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),i=n("../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts");class a extends o.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){i.default.logError("ChangeRecordingModule~UncaughtError",e,t)}render(){return this.state.hasError?this.props.onErrorRender||o.createElement(s.default,{title:this.props.title||"Something went wrong",description:this.props.description||"Please try again later.",primaryAction:this.props.errorStateAction||null},o.createElement(r.default,null)):this.props.children}}t.default=a},"../../packages/version-control/change-recording/src/components/common/ErrorBoundary/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/ErrorBoundary/ErrorBoundary.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextArea.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function l(e){const[t,n]=(0,o.useState)((()=>e.value));return o.createElement(s.default,{direction:"column",gap:"spacing-l"},o.createElement(r.default,{placeholder:e.placeholder,value:t,onChange:e=>n(e.target.value),label:o.createElement(i.default,{text:e.labelText})}),o.createElement(s.default,{direction:"row",gap:"spacing-s"},o.createElement(a.default,{type:"primary",size:"small",text:"Save",onClick:()=>e.onSave(t)}),o.createElement(a.default,{type:"secondary",size:"small",text:"Cancel",onClick:e.onCancel})))}},"../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextInput.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function l(e){const[t,n]=(0,o.useState)((()=>e.value));return o.createElement(s.default,{direction:"column",gap:"spacing-l"},o.createElement(r.default,{placeholder:e.placeholder,value:t,onChange:e=>n(e.target.value),label:o.createElement(i.default,{text:e.labelText}),helperText:e.helperText}),o.createElement(s.default,{direction:"row",gap:"spacing-s"},o.createElement(a.default,{type:"primary",size:"small",text:"Save",onClick:()=>e.onSave(t)}),o.createElement(a.default,{type:"secondary",size:"small",text:"Cancel",onClick:e.onCancel})))}},"../../packages/version-control/change-recording/src/components/common/InlineEditor/index.ts":function(e,t,n){n.r(t),n.d(t,{InlineTextArea:function(){return o.default},InlineTextInput:function(){return s.default}});var o=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextArea.tsx"),s=n("../../packages/version-control/change-recording/src/components/common/InlineEditor/InlineTextInput.tsx")},"../../packages/version-control/change-recording/src/components/common/Modal/Modal.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function a(e){return o.createElement(s.Modal,{isOpen:e.isOpen,onClose:e.onCancel,size:e.modalSize||"small"},o.createElement(s.ModalHeader,{heading:e.header}),o.createElement(s.ModalContent,null,e.content),o.createElement(s.ModalFooter,null,e.modalFooter||o.createElement(r.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},o.createElement(i.default,{type:"secondary",text:e.cancelButtonText?e.cancelButtonText:"Cancel",onClick:e.onCancel,isDisabled:e.disableButtons}),o.createElement(i.default,{type:e.isDestructive?"destructive":"primary",text:e.confirmButtonText?e.confirmButtonText:"Submit",onClick:e.onConfirm,isDisabled:e.isOffline||e.disableButtons,tooltip:e.isOffline&&"You must be online to perform this action"}))))}},"../../packages/version-control/change-recording/src/components/common/Modal/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/Modal/Modal.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/StyledText/SubtleLink.tsx":function(e,t,n){n.r(t);const o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.span`
  color: ${e=>e.color?e.color:e.theme["content-color-secondary"]};
  cursor: pointer;

  &:hover {
    text-decoration: underline;
  }
`;t.default=o},"../../packages/version-control/change-recording/src/components/common/StyledText/index.ts":function(e,t,n){n.r(t),n.d(t,{SubtleLink:function(){return o.default}});var o=n("../../packages/version-control/change-recording/src/components/common/StyledText/SubtleLink.tsx")},"../../packages/version-control/change-recording/src/components/common/Tag/Tag.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js");function r(e){e.color&&e.color;return o.createElement(s.default,{text:e.text})}},"../../packages/version-control/change-recording/src/components/common/Time/Time.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("../../packages/version-control/change-recording/src/utils/date.ts");const c=a.default.span`
  cursor: default;
`;function d(e){return o.createElement(c,null,o.createElement(s.default,{trigger:o.createElement(r.default,{alignItems:"center"},o.createElement(i.default,{type:"body-small",color:"content-color-secondary"},(0,l.formatTime)(e.timeString))),placement:"top",triggerEvent:"mouseenter"},o.createElement(i.default,{type:"body-small",color:"content-color-primary"},(0,l.formatTimeAndDate)(e.timeString))))}},"../../packages/version-control/change-recording/src/components/common/Time/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/Time/Time.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/components/common/UserAvatars/UserAvatars.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../../node_modules/lodash/lodash.js"),a=n.n(i),l=n("./js/services/CurrentUserDetailsService.js"),c=n("./iam/src/common/utils/index.js");const d=r.default.div`
  position: relative;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-right: ${e=>e.hasMultipleAvatars?e.theme["spacing-m"]:e.theme["spacing-xs"]};
  margin-left: ${e=>e.theme["spacing-l"]};

  & > * + * {
    position: absolute;
    left: ${e=>e.theme["spacing-s"]};
  }
`;function u(e){const t=l.default.getCurrentUserDetails().organizations;if(a().size(t)>0&&e.id){const n=a().find(t[0].team_users,(t=>t.id.toString()===e.id.toString()));if(n)return n.profile_pic_url}return null}function m({users:e,avatarsStackingCount:t}){const n=e.length,r={size:"xs",userId:Math.floor(10*Math.random()+1)};if(n<1)return null;if(n<=t)return o.createElement(d,{hasMultipleAvatars:1!==n},e.map((e=>{const t=Object.assign({},r);t.userId=parseInt(e.id,10);const n=e.profilePicUrl||u(e);return n&&(t.src=n,t.alt=e.username),o.createElement(s.default,Object.assign({key:e.id},t,{isPartner:(0,c.isUserPartner)({id:parseInt(e.id,10)})}))})));const i=Object.assign({},r);i.userId=parseInt(e[0].id,10);const a=e[0].profilePicUrl||u(e[0]);return a&&(i.src=a,i.alt=e[0].username),o.createElement(d,{hasMultipleAvatars:!0},o.createElement(s.default,Object.assign({},i,{isPartner:(0,c.isUserPartner)({id:parseInt(e[0].id,10)})})),o.createElement(s.default,{type:"count",alt:n-1,size:"xs",value:n-1}))}},"../../packages/version-control/change-recording/src/components/common/UserAvatars/index.ts":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-recording/src/components/common/UserAvatars/UserAvatars.tsx");t.default=o.default},"../../packages/version-control/change-recording/src/config/index.ts":function(e,t,n){n.r(t),n.d(t,{CHANGELOG_ANALYTICS_EVENTS:function(){return r},ENABLE_CHANGELOG_NOTE:function(){return o},ENABLE_CHANGELOG_TAG:function(){return s}});const o=!1,s=!1,r=Object.freeze({VIEW_CHANGELOG_V2:"view_changelog_v2",INITIATE_VIEW_CHANGELOG:"initiate_view_changelog",INITIATE_PAGINATE_CHANGELOG:"initiate_paginate_changelog",FAILED_VIEW_CHANGELOG_V2:"failed_view_changelog",FAILED_PAGINATE_CHANGELOG:"failed_paginate_changelog",EXPAND_SESSION_GROUP:"expand_session_group",INITIATE_VIEW_SESSION_GROUP:"initiate_view_session_group",FAILED_VIEW_SESSION_GROUP:"failed_view_session_group",VIEW_CHANGELOG_DIFF:"view_changelog_diff",VIEW_EXPANDED_DIFF:"view_expanded_diff",INITIATE_VIEW_EXPANDED_DIFF:"initiate_view_expanded_diff",FAILED_VIEW_EXPANDED_DIFF:"failed_view_expanded_diff",INITIATE_CHANGELOG_RESTORE:"initiate_changelog_restore",FAILED_CHANGELOG_RESTORE:"failed_changelog_restore",INITIATE_CHANGELOG_HIDE_DIFF:"initiate_changelog_hide_diff",FAILED_CHANGELOG_HIDE_DIFF:"failed_changelog_hide_diff",INITIATE_CHANGELOG_UNHIDE_DIFF:"initiate_changelog_unhide_diff",FAILED_CHANGELOG_UNHIDE_DIFF:"failed_changelog_unhide_diff",VIEW_CHANGELOG_RESTORE:"view_changelog_restore",VIEW_CHANGELOG_HIDE_DIFF:"view_changelog_hide_diff",VIEW_CHANGELOG_UNHIDE_DIFF:"view_changelog_unhide_diff"})},"../../packages/version-control/change-recording/src/context/ChangelogContext.tsx":function(e,t,n){n.r(t);var o=n("../../node_modules/lodash/lodash.js"),s=n.n(o),r=n("../../node_modules/react/index.js"),i=n("../../packages/version-control/change-recording/src/models/ChangelogModel.ts");t.default=(0,r.createContext)({reloadChangelog:s().noop,modelId:"",model:"",store:new i.default})},"../../packages/version-control/change-recording/src/hooks/index.ts":function(e,t,n){n.r(t),n.d(t,{useToggle:function(){return o.default}});var o=n("../../packages/version-control/change-recording/src/hooks/useToggle.tsx")},"../../packages/version-control/change-recording/src/hooks/useToggle.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var o=n("../../node_modules/react/index.js");function s(e){const[t,n]=(0,o.useState)(e);return[t,function(){n(!t)}]}},"../../packages/version-control/change-recording/src/index.tsx":function(e,t,n){n.r(t),n.d(t,{ChangelogRenderer:function(){return o.default},ExpandedDiffRenderer:function(){return s.default}});var o=n("../../packages/version-control/change-recording/src/components/changelog/ChangelogRenderer/index.ts"),s=n("../../packages/version-control/change-recording/src/components/changelog/ExpandedDiffRenderer/index.ts")},"../../packages/version-control/change-recording/src/models/ChangelogModel.ts":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/lodash/lodash.js"),s=n.n(o),r=n("../../node_modules/mobx/lib/mobx.module.js"),i=n("./onboarding/src/common/LaunchDarkly.js"),a=n("../../packages/version-control/change-recording/src/components/changelog/Changelog/index.ts"),l=n("../../packages/version-control/change-recording/src/utils/date.ts"),c=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};const d="changelog-enable-diff-hide",u=!1;class m{constructor(e=!1){this.dateGroups={},this.nextPageId="",this.groupLogsObject={},this.changelogIdDateGroupMapping={},this.isChangelogHideDiffEnabled=!1,this.disableRestore=!1,this.getGroupLogs=e=>e in this.groupLogsObject?this.groupLogsObject[e].logs:[],this.getGroupLogsNextPageId=e=>e in this.groupLogsObject?this.groupLogsObject[e].nextPageId:null,this.setNextPageId=e=>{this.nextPageId=e},this.setGroupLogsNextPageId=(e,t)=>{e in this.groupLogsObject||(this.groupLogsObject[e]={logs:[],nextPageId:""}),this.groupLogsObject[e].nextPageId=t},this.clearDateGroups=()=>{this.dateGroups={}},this.resetChangelog=()=>{this.dateGroups={},this.nextPageId="",this.groupLogsObject={},this.changelogIdDateGroupMapping={}},this.appendDateGroupLogs=(e,t=!1)=>{t&&(this.dateGroups={}),e.forEach((e=>{const t=(n=e,(0,l.formatDate)(n.createdAt));var n;t in this.dateGroups||(this.dateGroups[t]=[]),this.dateGroups[t].push(e),this.changelogIdDateGroupMapping[e.id]=t,(0,a.isChangelogExpandable)(e)&&e.group.groupId&&(this.groupLogsObject[e.group.groupId]={logs:[],nextPageId:""})}))},this.appendGroupLogs=(e,t)=>{e in this.groupLogsObject||(this.groupLogsObject[e]={logs:[],nextPageId:""}),this.groupLogsObject[e].logs.push(...t)},this.updateChangelogDiffHidden=(e,t,n="",o=!0)=>{if(o||!o&&!n){const n=this.changelogIdDateGroupMapping[e];n&&this.dateGroups[n].forEach((n=>{n.id===e&&(n.diff.isHidden=t)}))}else n&&this.groupLogsObject[n]&&this.groupLogsObject[n].logs.forEach((n=>{n.id===e&&(n.diff.isHidden=t)}))},this.isChangelogHideDiffEnabled=i.launchDarkly.getFlag(d,u),this.disableRestore=Boolean(e)}get areChangelogsLoaded(){return!s().isEmpty(this.dateGroups)}}c([r.observable],m.prototype,"dateGroups",void 0),c([r.observable],m.prototype,"nextPageId",void 0),c([r.observable],m.prototype,"groupLogsObject",void 0),c([r.computed],m.prototype,"areChangelogsLoaded",null),c([r.action],m.prototype,"setNextPageId",void 0),c([r.action],m.prototype,"setGroupLogsNextPageId",void 0),c([r.action],m.prototype,"clearDateGroups",void 0),c([r.action],m.prototype,"resetChangelog",void 0),c([r.action],m.prototype,"appendDateGroupLogs",void 0),c([r.action],m.prototype,"appendGroupLogs",void 0),c([r.action],m.prototype,"updateChangelogDiffHidden",void 0)},"../../packages/version-control/change-recording/src/services/ChangelogAnalyticsService.ts":function(e,t,n){n.r(t);var o=n("./js/services/CurrentUserDetailsService.js"),s=n("./js/modules/services/AnalyticsService.js"),r=n("./js/services/NavigationService.js"),i=n("../../node_modules/lodash/lodash.js"),a=n.n(i);t.default=new class{addEvent(e,t,n="",r=""){const i=o.default.getCurrentUserDetails(),l=this._getUTMParamsFromURL();s.default.addEventV2(Object.assign({category:r||t,action:e,label:n||`${t}_changelog`,value:1,entityType:t,userId:a().get(i,"userId"),teamId:a().get(i,"teamId")},l))}_getValidUTMProperties(){return["utm_source","utm_medium","utm_campaign","utm_content","utm_term"]}_getUTMParamsFromURL(){const e=r.default.getActiveQueryParams().get();return a().pick(e,this._getValidUTMProperties())}}},"../../packages/version-control/change-recording/src/services/ChangelogLoggingService.ts":function(e,t,n){n.r(t);var o=n("../../node_modules/lodash/lodash.js"),s=n.n(o),r=n("./js/services/CurrentUserDetailsService.js");const i=pm.logger.getContext("change-recording","version-control");t.default=new class{constructor(){this.logError=(...e)=>{pm.logger.error(...e,Object.assign({context:i},this.coreLogData))},this.logErrorWithData=(e,...t)=>{pm.logger.error(...t,Object.assign(Object.assign({context:i},this.coreLogData),e))};const e=r.default.getCurrentUserDetails();this.coreLogData={userId:s().get(e,"userId"),teamId:s().get(e,"teamId")}}}},"../../packages/version-control/change-recording/src/services/ChangelogService.ts":function(e,t,n){n.r(t),n.d(t,{fetchModelChangelog:function(){return l},fetchModelChangelogForChangelogId:function(){return c},hideChangelogDiff:function(){return u},restoreModelToChange:function(){return d},unhideChangelogDiff:function(){return m}});var o=n("./js/utils/HttpService.js"),s=n("./js/modules/services/RemoteSyncRequestService.js"),r=n("../../node_modules/lodash/lodash.js"),i=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};function a(e){return e instanceof Error?e:new Error(JSON.stringify(e.error||e))}function l(e,t,n=null,r=null,l=10){return i(this,void 0,void 0,(function*(){const i={pageSize:l.toString()};n&&(i.pageId=n),r&&(i.groupId=r);const c=o.default.urlSearchParams(i),d=`/${e}/${t}/changelog/?${c}`;try{const e=yield s.default.request(d,{method:"get"});if(!e.body.data||e.body.error)throw new Error(e.body.error||"ChangelogService~fetchModelChangelog: Failed to fetch changelogs");return e.body}catch(e){throw a(e)}}))}function c(e,t,n){return i(this,void 0,void 0,(function*(){const i={changelogId:n},l=o.default.urlSearchParams(i),c=`/${e}/${t}/changelog/?${l}`;try{const e=yield s.default.request(c,{method:"get"});if(!r.get(e,"body.data.logs.0")||e.body.error)throw new Error(e.body.error||"ChangelogService~fetchModelChangelogForChangelogId: Failed to fetch changelog");return e.body.data.logs[0]}catch(e){throw a(e)}}))}function d(e,t,n,r){return i(this,void 0,void 0,(function*(){const i={max_id:n,changelogId:r},l=o.default.urlSearchParams(i),c=`/${e}/restore/${t}/?${l}`;try{yield s.default.request(c,{method:"put"})}catch(e){throw a(e)}}))}function u(e,t,n){return i(this,void 0,void 0,(function*(){try{return(yield s.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"post",path:"/v1/changelog/hide-diff",body:{changelogs:[{model:e,modelId:t,changelogIds:[n]}]}}})).body}catch(e){throw a(e)}}))}function m(e,t,n){return i(this,void 0,void 0,(function*(){try{return(yield s.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"post",path:"/v1/changelog/unhide-diff",body:{changelogs:[{model:e,modelId:t,changelogIds:[n]}]}}})).body}catch(e){throw a(e)}}))}},"../../packages/version-control/change-recording/src/utils/date.ts":function(e,t,n){n.r(t),n.d(t,{formatDate:function(){return a},formatTime:function(){return r},formatTimeAndDate:function(){return i}});var o=n("../../node_modules/moment/moment.js"),s=n.n(o);function r(e){return s()(e).format("hh:mm A")}function i(e){return s()(e).format("hh:mm A, MMMM DD, YYYY")}function a(e){return s()(e).format("DD MMMM, YYYY")}},"../../packages/version-control/change-recording/src/utils/index.ts":function(e,t,n){n.r(t),n.d(t,{ModelNavigator:function(){return s.default},formatTime:function(){return o.formatTime},formatTimeAndDate:function(){return o.formatTimeAndDate}});var o=n("../../packages/version-control/change-recording/src/utils/date.ts"),s=n("../../packages/version-control/change-recording/src/utils/modelNavigator.ts")},"../../packages/version-control/change-recording/src/utils/modelNavigator.ts":function(e,t,n){n.r(t);var o=n("./js/stores/ActiveWorkspaceStore.js"),s=n("./js/stores/StoreManager.js"),r=n("./js/services/NavigationService.js");const i={collection:e=>{const t=(0,s.resolveStoreInstance)(o.default).id;r.default.transitionTo("build.collection",{cid:e,wid:t},{ctx:"changelog"})}};t.default=i},"./version-control/pull-request/components/PullRequestListing/emptyState.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function i(e){return o.createElement(s.default,{title:e.title,description:e.message,secondaryAction:e.handleRetry&&o.createElement(r.default,{text:"Retry",type:"outline",onClick:e.handleRetry})},e.illustration)}},"./version-control/pull-request/components/PullRequestListing/index.tsx":function(e,t,n){n.r(t),n.d(t,{EmptyState:function(){return l.default},default:function(){return d},usePullRequests:function(){return c.default}});var o=n("../../node_modules/react/index.js"),s=n("./version-control/diff/constants.ts"),r=n("./version-control/pull-request/components/PullRequestListing/modelPullRequests.tsx"),i=n("./version-control/pull-request/components/PullRequestListing/modelPullRequestsV2.tsx"),a=n("./onboarding/src/common/LaunchDarkly.js"),l=n("./version-control/pull-request/components/PullRequestListing/emptyState.tsx"),c=n("./version-control/pull-request/components/PullRequestListing/usePullRequests.ts");function d(e){return a.launchDarkly.getFlag(s.ENABLE_PULL_REQUESTS_LIST_V2.key,s.ENABLE_PULL_REQUESTS_LIST_V2.defaultValue)?o.createElement(i.default,Object.assign({},e)):o.createElement(r.default,Object.assign({},e))}},"./version-control/pull-request/components/PullRequestListing/modelPullRequests.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPullRequest.js"),d=n("./node_modules/lodash/lodash.js"),u=n.n(d),m=n("./js/components/base/LoadingIndicator.js"),g=n("./appsdk/contextbar/ContextBarViewHeader.js"),p=n("./version-control/pull-request/hooks/usePullRequestMergeSettingsViewPermission.js"),h=n("./js/services/NavigationService.js"),f=n("./version-control/pull-request/components/PullRequestListing/emptyState.tsx"),v=n("./version-control/pull-request/components/PullRequestListing/usePullRequests.ts"),E=n("./version-control/hooks/useConnectionStatus.ts"),y=n("./version-control/pull-request/components/PullRequestListing/pullRequesFilter.tsx"),b=n("./version-control/pull-request/components/PullRequestListing/pullRequestList.tsx"),x=n("./version-control/pull-request/config/index.ts");const C=s.default.div`
  display: flex;
  flex-direction: column;
  height: 100%;

  .pullRequest-content-container {
    padding-left: ${({theme:e})=>e["spacing-s"]};
    padding-right: ${({theme:e})=>e["spacing-xxl"]};
    padding-bottom: ${({theme:e})=>e["spacing-m"]};
    flex: auto;
    overflow: auto;
    display: flex;
    flex-direction: column;
  }

  .pullRequest-list-container {
    flex: auto;
    overflow: auto;
    display: flex;
    flex-direction: column;
  }
`;function _(e){const[t,n]=(0,o.useState)({open:!0,approved:!0,merged:!0,declined:!0}),s=(0,E.default)(),{pullRequests:d,error:_,isLoading:I,filteredPullRequests:j}=(0,v.default)({model:e.contextData.model,modelId:e.contextData.uid,filters:t,retryOnConnection:!0}),k=!(null==d?void 0:d.length),L=!(null==j?void 0:j.length),{permission:w}=(0,p.default)(e.contextData.model,e.contextData.uid),A=u().get(x.default,`${e.contextData.model}.displayName`,"");return s||d?o.createElement(C,null,o.createElement(g.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose},o.createElement("div",{className:"pull-request-container__actions-filter"},w&&o.createElement(i.default,{type:"tertiary",icon:"icon-descriptive-setting-stroke",onClick:()=>{h.default.transitionTo("build.roles.manage",{},{collection:e.contextData.uid})},tooltip:"View merge settings"}),o.createElement(y.default,{filters:t,onChange:n,disabled:k}))),o.createElement("div",{className:"pullRequest-content-container"},o.createElement(a.default,{type:"body-medium",color:"content-color-secondary"},"Keep track of all pull requests for this ",A,"."),o.createElement("div",{className:"pullRequest-list-container"},o.createElement(o.Fragment,null,I&&o.createElement("div",{className:"collection-info-cb__pull-requests-loading"},o.createElement(m.default,null)),_&&!I&&o.createElement(f.default,{illustration:o.createElement(l.default,null),title:"Unable to load pull requests",message:"Please try refetching pull requests."}),!_&&!I&&k&&o.createElement(f.default,{illustration:o.createElement(c.default,null),title:"No pull requests right now",message:`View and keep track of all the pull requests on this ${A}.`}),!_&&!I&&!k&&L&&o.createElement(f.default,{illustration:o.createElement(c.default,null),title:"No pull requests found",message:"Change filters and try again."}),!_&&!k&&j&&o.createElement(b.default,{pullRequests:j}))))):o.createElement(C,null,o.createElement(g.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose}),o.createElement(o.Fragment,null,o.createElement(f.default,{illustration:o.createElement(r.default,null),title:"Check your connection",message:"Get online to view your list of Pull Requests"})))}},"./version-control/pull-request/components/PullRequestListing/modelPullRequestsV2.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPullRequest.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("./node_modules/lodash/lodash.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-openWeb-stroke.js"),p=n("./js/stores/ActiveWorkspaceStore.js"),h=n("./js/stores/StoreManager.js"),f=n("./appsdk/components/link/Link.js"),v=n("./appsdk/contextbar/ContextBarViewHeader.js"),E=n("./version-control/pull-request/hooks/usePullRequestMergeSettingsViewPermission.js"),y=n("./js/services/NavigationService.js"),b=n("./version-control/pull-request/components/PullRequestListing/emptyState.tsx"),x=n("./version-control/pull-request/components/PullRequestListing/usePullRequestsV2.ts"),C=n("./version-control/hooks/useConnectionStatus.ts"),_=n("./version-control/pull-request/components/PullRequestListing/pullRequestListV2.tsx"),I=n("./version-control/pull-request/config/index.ts"),j=n("./version-control/pull-request/components/PullRequestListing/useForkInfo.tsx");const k=s.default.div`
  display: flex;
  flex-direction: column;
  height: 100%;

  .pullRequest-content-container {
    padding-left: ${({theme:e})=>e["spacing-s"]};
    padding-right: ${({theme:e})=>e["spacing-s"]};
    padding-bottom: ${({theme:e})=>e["spacing-m"]};
    flex: auto;
    overflow: auto;
    display: flex;
    flex-direction: column;
  }

  .pullRequest-list-container {
    container-type: inline-size;
    flex: auto;
    display: flex;
    flex-direction: column;

    .pullRequest-lists-divider {
      margin-top: ${({theme:e})=>e["spacing-l"]};
      margin-bottom: ${({theme:e})=>e["spacing-l"]};
      border-bottom: ${({theme:e})=>`${e["border-width-default"]} solid ${e["highlight-background-color-primary"]};`};
    }
  }
`;function L(e){const[t,n]=(0,o.useState)({open:!0,approved:!0,merged:!0,declined:!0}),s=(0,C.default)(),{pullRequests:L,error:w,isLoading:A,filteredPullRequests:S,fetch:N}=(0,x.default)({model:e.contextData.model,modelId:e.contextData.uid,destinationId:e.contextData.uid,filters:t,retryOnConnection:!0}),{pullRequests:T,error:R,isLoading:D,filteredPullRequests:P,fetch:O}=(0,x.default)({model:e.contextData.model,modelId:e.contextData.uid,sourceId:e.contextData.uid,filters:{open:!0,approved:!0,merged:!1,declined:!1},retryOnConnection:!0}),F=y.default.getActiveQueryParams().get().filters;if(F){const e={open:!1,approved:!1,merged:!1,declined:!1};null==F||F.split(",").forEach((t=>{e[t]=!0})),(0,m.isEqual)(e,t)||n(e)}const{forkInfo:$}=(0,j.default)({model:e.contextData.model,modelId:e.contextData.uid}),{permission:q}=(0,E.default)(e.contextData.model,e.contextData.uid),M=()=>{y.default.transitionTo("build.pullRequestCreate",{},{source:e.contextData.uid,destination:null==$?void 0:$.baseModelUid,entityType:e.contextData.model,workspace:(0,h.resolveStoreInstance)(p.default).id,origin:"pull_request_list_empty_state"})},G=()=>{N(),O()},V=(0,m.get)(I.default,`${e.contextData.model}.displayName`,""),B=!(null==L?void 0:L.length)&&!(null==T?void 0:T.length),U=w||R,H=D||A,z=Object.keys(t).filter((e=>!1===t[e])).length>0;if(!s&&B)return o.createElement(k,null,o.createElement(v.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose}),o.createElement(o.Fragment,null,o.createElement(b.default,{illustration:o.createElement(r.default,null),title:"Check your connection",message:"Get online to view your list of Pull Requests"})));if(H)return o.createElement(k,null,o.createElement(v.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose}),o.createElement("div",{className:"collection-info-cb__pull-requests-loading"},o.createElement(i.default,null)));if(U)return o.createElement(k,null,o.createElement(v.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose}),o.createElement(b.default,{illustration:o.createElement(a.default,null),title:"Unable to load pull requests",message:"Please try refetching pull requests.",handleRetry:G}));if(B)return o.createElement(k,null,o.createElement(v.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose}),o.createElement(b.default,{illustration:o.createElement(l.default,null),title:"There are no pull requests",message:o.createElement(c.default,{direction:"column",gap:"spacing-l",alignItems:"center"},o.createElement(d.default,null,"Once a pull request is created for this"," ",(null==$?void 0:$.forkId)?"forked":""," ",V,", you will be able to manage it from here. Learn more about"," ",o.createElement(f.default,{to:"https://learning.postman.com/docs/collaborating-in-postman/version-control/#creating-pull-requests",target:"_blank"},o.createElement(c.default,{inline:!0,alignItems:"center"},o.createElement(d.default,{type:"link-default"},"pull requests"),o.createElement(g.default,null)))),(null==$?void 0:$.forkId)&&o.createElement(u.default,{"data-testid":"create-pull-request-btn",type:"primary",text:"Create Pull Request",onClick:M}))}));const W=0!==L.length;return o.createElement(k,null,o.createElement(v.ContextBarViewHeader,{title:"Pull requests",onClose:e.onClose},o.createElement("div",{className:"pull-request-container__actions-filter"},q&&o.createElement(u.default,{type:"tertiary",icon:"icon-descriptive-setting-stroke",onClick:()=>{y.default.transitionTo("build.roles.manage",{},{collection:e.contextData.uid})},tooltip:"View merge settings"}))),o.createElement("div",{className:"pullRequest-content-container"},o.createElement(d.default,{type:"body-medium",color:"content-color-secondary"},`Manage all pull requests related to this ${(null==$?void 0:$.forkId)?"forked":""} ${V}.`),o.createElement("div",{className:"pullRequest-list-container"},o.createElement(c.default,{direction:"column",padding:{paddingTop:"spacing-l"}},(null==$?void 0:$.forkId)&&o.createElement(_.default,{isEmpty:B,pullRequests:P,isForked:!0,headingText:"Sent for review",testid:"sent-for-review",emptyState:o.createElement(c.default,{direction:"column",gap:"spacing-s",alignItems:"start",padding:{paddingTop:"spacing-xs"}},o.createElement(d.default,{color:"content-color-secondary"},"Currently, there is no open pull request created from this forked ",V,"."," ",T.length>0&&o.createElement("span",{"data-testid":"view-closed-pull-requests"},o.createElement(f.default,{to:`${pm.artemisUrl}/${e.contextData.model}/${$.baseModelUid}?ctx=pull-requests&filters=merged,declined`},o.createElement(d.default,{type:"link-default"},"View closed pull requests")))),o.createElement(u.default,{type:"outline","data-testid":"create-pull-request-btn",onClick:M,text:"Create Pull Request"}))}),(null==$?void 0:$.forkId)&&o.createElement("div",{className:"pullRequest-lists-divider"}),o.createElement(_.default,{filters:t,showFilterMenu:W,setFilters:n,isEmpty:B,pullRequests:S,headingText:"Received for review",testid:"received-for-review",emptyState:o.createElement(b.default,{illustration:o.createElement(l.default,null),title:z?"No results from these filters":"No pull requests to review",message:z?o.createElement(c.default,{gap:"spacing-m",direction:"column",alignItems:"center"},o.createElement(d.default,null,"There are no pull requests to display for the selected filters. Adjust or reset your filter settings."),o.createElement(u.default,{onClick:()=>{n({open:!0,approved:!0,declined:!0,merged:!0})},text:"Reset Filters",type:"outline"})):`If a pull request is requested for review to this ${(null==$?void 0:$.forkId)?"forked":""} ${V}, you will be able to manage it from here.`})})))))}},"./version-control/pull-request/components/PullRequestListing/pullRequesFilter.tsx":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),a=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("./js/components/base/Tooltips.js");const c=a.createGlobalStyle`
  .pullRequest-status-filter__option {
    margin-top: ${({theme:e})=>e["spacing-m"]};
  }

  .pullRequest-status-filer-popover .tooltip-wrapper {
    padding: ${({theme:e})=>e["spacing-m"]};
    background-color: ${({theme:e})=>e["background-color-primary"]};
  }
`,d=[{label:"Open requests",value:"open"},{label:"Approved requests",value:"approved"},{label:"Merged requests",value:"merged"},{label:"Declined requests",value:"declined"}];function u(e){const[t,n]=(0,o.useState)(!1),[a,u]=(0,o.useState)(),{filters:m,onChange:g,disabled:p}=e,h=Object.keys(m).filter((e=>!1===m[e])).length>0;return o.createElement(o.Fragment,null,o.createElement(c,null),o.createElement(s.default,{type:"tertiary",icon:"icon-action-filter-stroke",onClick:()=>{n(!t)},ref:u,isDisabled:p,showIndicator:h,tooltip:"Filter pull requests"}),a&&o.createElement(l.Tooltip,{show:t,target:a,onClose:()=>n(!1),closeOnClickOutside:!0,immediate:!0,hideArrow:!0,placement:"bottom-right",className:"pullRequest-status-filer-popover"},o.createElement(l.TooltipBody,null,o.createElement(r.default,{type:"primary",size:"medium",text:"Show"}),o.createElement("div",null,d.map((e=>o.createElement(i.default,{className:"pullRequest-status-filter__option",key:e.value,label:e.label,isChecked:m[e.value],onChange:()=>(e=>{"function"==typeof g&&g(Object.assign(Object.assign({},m),{[e.value]:!m[e.value]}))})(e)})))))))}},"./version-control/pull-request/components/PullRequestListing/pullRequestList.tsx":function(e,t,n){n.r(t);var o=n("./node_modules/moment/moment.js"),s=n.n(o),r=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),c=n("./node_modules/lodash/lodash.js"),d=n.n(c),u=n("./js/stores/ActiveWorkspaceStore.js"),m=n("./js/stores/StoreManager.js"),g=n("./appsdk/components/link/Link.js"),p=n("./js/components/base/Avatar.js"),h=n("./version-control/common/index.js");const f={open:"neutral",approved:"warning",merged:"success",declined:"critical"},v=i.default.li`
  all: unset;
  display: flex;
  align-items: center;
  width: 100%;
  margin-top: ${({theme:e})=>e["spacing-m"]};

  .title-group {
    width: 50%;
    display: inline-flex;
    flex-direction: column;
    color: ${({theme:e})=>e["content-color-primary"]};
  }

  .avatar-container {
    width: 25%;
    display: flex;
    justify-content: center;
  }

  .status-container {
    width: 25%;
    display: flex;
    justify-content: flex-end;
  }

  .pullRequest-list-item__title {
    font-size: ${({theme:e})=>e["text-size-m"]};
    line-height: ${({theme:e})=>e["line-height-m"]};
    /** link type text sets max-content width which results in no wrapping */
    width: unset;
    display: inline-block;
  }
`;function E({pullRequest:e}){return r.createElement(v,null,r.createElement("div",{className:"title-group"},r.createElement("div",{className:"title"},r.createElement(g.default,{to:{routeIdentifier:"build.pullRequestView",routeParams:{id:e.id},queryParams:{workspace:(0,m.resolveStoreInstance)(u.default).id}}},r.createElement(a.default,{type:"link-subtle",className:"pullRequest-list-item__title"},e.title))),r.createElement(a.default,{type:"body-small",color:"content-color-tertiary"},"Last updated: ",s()(e.updatedAt).fromNow())),r.createElement("div",{className:"avatar-container"},r.createElement(h.CustomTooltip,{align:"bottom",body:d().get(e,"createdBy.name")},r.createElement(p.default,{className:"pr-author-avatar",size:"medium",userId:d().get(e,"createdBy.id",0),customPic:d().get(e,"createdBy.profilePicUrl")}))),r.createElement("div",{className:"status-container"},r.createElement(l.default,{text:e.status,status:f[e.status]})))}const y=i.default.ul`
  all: unset;
`;t.default=function(e){const{pullRequests:t}=e;return r.createElement(y,null,t.map((e=>r.createElement(E,{key:e.id,pullRequest:e}))))}},"./version-control/pull-request/components/PullRequestListing/pullRequestListV2.tsx":function(e,t,n){n.r(t);var o=n("./node_modules/moment/moment.js"),s=n.n(o),r=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=n("./node_modules/lodash/lodash.js"),h=n("./js/stores/ActiveWorkspaceStore.js"),f=n("./js/stores/StoreManager.js"),v=n("./js/stores/CurrentUserStore.js"),E=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-environment-stroke.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-user-stroke.js"),x=n("./js/utils/PluralizeHelper.js"),C=n("./version-control/common/ForkLabel.js"),_=n("./appsdk/components/link/Link.js"),I=n("./version-control/pull-request/components/PullRequestListing/pullRequesFilter.tsx"),j=n("./version-control/pull-request/components/PullRequestListing/useForkInfo.tsx");const k={open:"neutral",approved:"warning",merged:"success",declined:"critical"},L={collection:r.createElement(E.default,null),environment:r.createElement(y.default,null)},w=(0,i.default)(_.default)`
  width: calc(100% - 80px);
`,A=(0,i.default)(a.default)`
  background-color: ${({theme:e})=>e["background-color-primary"]};
  box-shadow: ${({theme:e})=>e["shadow-default"]};
  border: none;
  min-width: 200px;
  max-height: 216px;
  overflow: auto;
  border-radius: ${({theme:e})=>e["border-radius-default"]};

  .reviewer-item {
    padding: ${({theme:e})=>e["spacing-s"]}
      ${({theme:e})=>e["spacing-m"]};

    .anonymous-reviewers {
      cursor: pointer;
      .anonymous-reviewer-icon {
        width: ${({theme:e})=>e["size-s"]};
        height: ${({theme:e})=>e["size-s"]};
        border-radius: ${({theme:e})=>e["border-radius-max"]};
        background-color: ${({theme:e})=>e["background-color-secondary"]};
      }
    }
  }
`,S=i.default.li`
  all: unset;
  display: flex;
  flex-direction: column;
  width: 100%;
  margin-top: ${({theme:e})=>e["spacing-m"]};
  padding-bottom: ${({theme:e,isForked:t})=>t?"none":e["spacing-m"]};
  border-bottom: ${({theme:e,isForked:t})=>t?"none":`${e["border-width-default"]} solid ${e["highlight-background-color-primary"]}`};

  .pr-author-avatar {
    margin-top: 2px;
    margin-right: ${({theme:e})=>e["spacing-s"]};
  }

  .title-group {
    width: 100%;
    display: inline;
    color: ${({theme:e})=>e["content-color-primary"]};
    margin-right: ${({theme:e})=>e["spacing-m"]};

    .title {
      width: 100%;
      word-break: break-word;
    }
  }

  .pullRequest-list-item__info {
    width: calc(100% - ${({theme:e})=>e["spacing-xxl"]});
    margin-top: ${({theme:e})=>e["spacing-xs"]};
    margin-left: ${({theme:e})=>e["spacing-xxl"]};

    .reviewers-number {
      cursor: pointer;
    }

    .seperator {
      width: 2px;
      height: 2px;
      min-width: 2px;
      min-height: 2px;
      background-color: ${({theme:e})=>e["content-color-tertiary"]};
      border-radius: 100%;
    }
  }

  .pullRequest-list-item__title {
    font-size: ${({theme:e})=>e["text-size-m"]};
    line-height: ${({theme:e})=>e["line-height-m"]};
    /** link type text sets max-content width which results in no wrapping */
    width: unset;
    display: inline-block;
  }

  .pullRequest-list-item__badge {
    margin-top: 2px;
  }
`,N=({pullRequest:e})=>{const{forkInfo:t}=(0,j.default)({modelId:e.toId,model:e.entity}),n={id:e.toId,forkLabel:null==t?void 0:t.forkLabel,model:e.entity},o={id:null==t?void 0:t.baseModelUid,model:e.entity};return r.createElement(l.default,{alignItems:"center",gap:"spacing-xs",padding:{paddingTop:"spacing-s"},width:"100%"},r.createElement(c.default,{color:"content-color-info",typographyStyle:{fontWeight:"text-weight-medium"}},"Destination:"),r.createElement(w,{to:`${pm.artemisUrl}/${e.entity}/${e.toId}`},r.createElement(l.default,{alignItems:"center",gap:"spacing-xs",width:"100%"},L[e.entity],r.createElement(c.default,{isTruncated:!0},null==t?void 0:t.name),r.createElement(C.default,{forkedEntity:n,baseEntity:o,label:null==t?void 0:t.forkLabel}))))};function T({pullRequest:e,isForked:t}){var n,o,i,a,g;const E=(null===(n=e.reviewers)||void 0===n?void 0:n.filter((e=>e.publicProfileUrl)))||[],y=(null===(o=e.reviewers)||void 0===o?void 0:o.filter((e=>!e.publicProfileUrl)))||[],C=(0,f.resolveStoreInstance)(v.default);return r.createElement(r.Fragment,null,e.entity&&t&&r.createElement(N,{pullRequest:e}),r.createElement(S,{isForked:t},r.createElement(l.default,{alignItems:"start",justifyContent:"space-between"},r.createElement(d.default,{tooltip:(0,p.get)(e,"createdBy.name"),className:"pr-author-avatar",size:"s",userId:(0,p.get)(e,"createdBy.id",0),src:(0,p.get)(e,"createdBy.profilePicUrl")}),r.createElement("div",{className:"title-group"},r.createElement(_.default,{to:{routeIdentifier:"build.pullRequestView",routeParams:{id:e.id},queryParams:{workspace:(0,f.resolveStoreInstance)(h.default).id,origin:"pull_request_from_fork"}},className:"title"},r.createElement(c.default,{type:"link-subtle",className:"pullRequest-list-item__title"},e.title))),r.createElement("div",{className:"status-container"},r.createElement(u.default,{className:"pullRequest-list-item__badge",text:e.status,status:k[e.status]}))),r.createElement(l.default,{className:"pullRequest-list-item__info",wrap:"wrap",alignItems:"center",gap:"spacing-xs"},r.createElement(c.default,{type:"body-small",color:"content-color-secondary",className:"reviewers-number"},0===(null===(i=e.reviewers)||void 0===i?void 0:i.length)?r.createElement(m.default,{placement:"bottom",content:"No reviewers have been assigned to this pull request."},r.createElement("span",null,"No reviewers")):r.createElement(A,{placement:"bottom",triggerEvent:"mouseenter",trigger:r.createElement("span",null,null===(a=e.reviewers)||void 0===a?void 0:a.length," ",x.default.pluralize({count:null===(g=e.reviewers)||void 0===g?void 0:g.length,singular:"reviewer",plural:"reviewers"}))},r.createElement(l.default,{className:"reviewer-item",direction:"column",alignItems:"start",gap:"spacing-m"},E.map((e=>r.createElement(_.default,{to:e.username&&`${pm.dashboardUrl}/users/${e.id}`},r.createElement(l.default,{paddingTop:"spacing-xs",paddingBottom:"spacing-xs",gap:"spacing-s",alignItems:"center",justifyContent:"start"},r.createElement(d.default,{size:"s",userId:e.id,src:e.profilePicUrl}),r.createElement(c.default,{color:"content-color-primary",type:"link-subtle"},e.name," ",C.id===e.id?"You":""))))),y.length>0&&r.createElement(l.default,{paddingTop:"spacing-xs",paddingBottom:"spacing-xs",className:"anonymous-reviewers",alignItems:"center",gap:"spacing-s"},r.createElement(l.default,{className:"anonymous-reviewer-icon",alignItems:"center",justifyContent:"center"},r.createElement(b.default,null)),r.createElement(m.default,{placement:"bottom",content:"Reviewers with accounts set to private are kept anonymous."},r.createElement("div",null,y.length," anonymous"," ",x.default.pluralize({count:y.length,singular:"reviewer",plural:"reviewers"}))))))),r.createElement("div",{className:"seperator"}),r.createElement(c.default,{type:"body-small",color:"content-color-secondary"},"Last updated ",s()(e.updatedAt).fromNow()))))}const R=i.default.ul`
  all: unset;
`;t.default=function(e){const{pullRequests:t,emptyState:n,filters:o,setFilters:s,isEmpty:i,isForked:a,showFilterMenu:c}=e,d=!(null==t?void 0:t.length);return r.createElement("div",{className:"pullRequest-list"},r.createElement(l.default,{alignItems:"center",justifyContent:"space-between"},r.createElement(g.default,{type:"h4","data-testid":e.testid,text:e.headingText,color:"content-color-primary"}),o&&c&&r.createElement(I.default,{filters:o,onChange:s,disabled:i})),d&&n,!d&&r.createElement(R,null,t.map((e=>r.createElement(T,{isForked:a,key:e.id,pullRequest:e})))))}},"./version-control/pull-request/components/PullRequestListing/useForkInfo.tsx":function(e,t,n){n.r(t);var o=n("../../packages/version-control/change-management/index.ts"),s=n("../../node_modules/react/index.js");t.default=function(e){const[t,n]=(0,s.useState)(),[r,i]=(0,s.useState)(!0),[a,l]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{o.ForkConsumerService.getModel(e.model,e.modelId,!0).then((e=>{var t,o,s;n({baseModelUid:null===(t=e.forkDetails)||void 0===t?void 0:t.parent.id,name:e.name,forkLabel:null===(o=e.forkDetails)||void 0===o?void 0:o.label,forkId:null===(s=e.forkDetails)||void 0===s?void 0:s.id})})).catch((e=>l(e))).finally((()=>i(!1)))}),[]),{forkInfo:t,isLoading:r,error:a}}},"./version-control/pull-request/components/PullRequestListing/usePullRequests.ts":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("./version-control/pull-request/services/PullRequestService.js"),a=n("./version-control/hooks/useConnectionStatus.ts");function l(e){const[t,n]=(0,o.useState)(!1),[s,l]=(0,o.useState)(),[c,d]=(0,o.useState)(),u=(0,a.default)();let m;const g=()=>{n(!0),(0,i.fetchPullRequests)(e.model,e.modelId).then((e=>{l(r()(e.pullRequests).sortBy("updatedAt").reverse().value())})).catch((e=>{d(e)})).finally((()=>{n(!1)}))};if((0,o.useEffect)((()=>{u&&g()}),[]),(0,o.useEffect)((()=>{u&&e.retryOnConnection&&!t&&!s&&g()}),[u]),s)if(e.filters){const t=Object.keys(e.filters).filter((t=>e.filters&&e.filters[t]));m=s.filter((e=>t.includes(e.status)))}else m=s;return{pullRequests:s,filteredPullRequests:m,isLoading:t,error:c,fetch:g}}},"./version-control/pull-request/components/PullRequestListing/usePullRequestsV2.ts":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),i=n("./version-control/pull-request/services/PullRequestService.js"),a=n("./version-control/hooks/useConnectionStatus.ts");t.default=function(e){const[t,n]=(0,o.useState)(!1),[s,l]=(0,o.useState)([]),[c,d]=(0,o.useState)(),u=(0,a.default)();let m=[];const g=()=>{n(!0),(0,i.fetchPullRequests)(e.model,e.destinationId,e.sourceId).then((e=>{l(r()(e.pullRequests).sortBy("updatedAt").reverse().value())})).catch((e=>{d(e)})).finally((()=>{n(!1)}))};if((0,o.useEffect)((()=>{u&&g()}),[]),(0,o.useEffect)((()=>{u&&e.retryOnConnection&&!t&&g()}),[u]),s)if(e.filters){const t=Object.keys(e.filters).filter((t=>e.filters&&e.filters[t]));m=s.filter((e=>t.includes(e.status)))}else m=s;return{pullRequests:s,filteredPullRequests:m,isLoading:t,error:c,fetch:g}}}}]);