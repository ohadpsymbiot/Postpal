(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[40],{"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultMultiSelectMenuList:function(){return v},MultiSelectChip:function(){return h},MultiSelectChipCloseIcon:function(){return g},MultiSelectChipLabel:function(){return f},MultiSelectOption:function(){return u}});var s=n("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke-small.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=["isDisabled","isFocused","children"],d=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectOption",componentId:"sc-1e7h8n3-0"})(["display:flex;align-items:center;cursor:pointer;font-size:",";line-height:",";padding:",";border-radius:",";color:",";"," ",""],(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["line-height-m"]}),(function(e){return"".concat(e.theme["spacing-xs"]," ").concat(e.theme["spacing-m"],";")}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.isFocused&&!e.isDisabled&&"background-color: ".concat(e.theme["highlight-background-color-primary"],";")}),(function(e){return e.isDisabled&&"\n      cursor: not-allowed;\n      color: ".concat(e.theme["content-color-tertiary"],";\n    ")}));function u(e){var t=e.isDisabled,n=e.isFocused,i=e.children,o=(0,s.default)(e,c);return a.createElement(r.c.Option,o,a.createElement(d,{isDisabled:t,isFocused:n},i))}var p=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChipCloseIcon",componentId:"sc-1e7h8n3-1"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";margin-left:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:",";svg path{fill:",";}&:hover{background-color:",";svg path{fill:",";}}"],(function(e){return e.theme["size-s"]}),(function(e){return e.theme["size-s"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-primary"]}));function g(e){return a.createElement(r.c.MultiValueRemove,e,a.createElement(p,{className:"aether-multiselect-dropdown__multi-value-chip--remove-icon"},a.createElement(o.default,null)))}var m=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChip",componentId:"sc-1e7h8n3-2"})(["box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;height:",";padding:",";margin-bottom:",";margin-right:",";color:",";background-color:",";border-radius:",";"],(function(e){return e.theme["size-s"]}),(function(e){return"2px ".concat(e.theme["spacing-zero"]," 2px ").concat(e.theme["spacing-s"])}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["border-radius-default"]}));function h(e){var t=e.children;return a.createElement(m,{className:"aether-multiselect-dropdown__multi-select-chip"},t)}function f(e){var t=e.children;return a.createElement(l.default,{type:"body-medium"},t)}var b=(0,i.default)(r.c.MenuList).withConfig({displayName:"CustomMultiSelectComponents__StyledMenuList",componentId:"sc-1e7h8n3-3"})(["padding:8px;& .aether-multiselect-dropdown__group:not(:last-child){margin-bottom:12px;}& .aether-multiselect-dropdown__group:first-child{padding-top:4px;}"]);function v(e){var t=e.children;return a.createElement(b,e,t)}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js":function(e,t,n){"use strict";n.r(t),n.d(t,{customBaseStyles:function(){return o},postmanSpecificStyles:function(){return r}});var s=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").css)(["& .aether-multiselect-dropdown__single-value{color:",";left:",";right:",";}& .aether-multiselect-dropdown__control{box-sizing:border-box;height:auto;min-height:32px;max-height:72px;overflow-x:hidden;overflow-y:auto;border:",";transition:border-color 0.2s ease-in-out,box-shadow 0.2s ease-in-out;background-color:",";& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:none;}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__value-container,& .aether-multiselect-dropdown__single-value{color:",";}&:hover{border-color:",";}&--is-focused{outline:none;border:",";box-shadow:",";&:hover{border:",";}& .aether-multiselect-dropdown__single-value{right:",";}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:inline-flex;}}&--is-disabled{user-select:none;cursor:not-allowed;background:",";border:",";color:",";& .aether-multiselect-dropdown__dropdown-indicator svg path{fill:",";}& .aether-multiselect-dropdown__multi-select-chip{color:",";}&:hover{border-color:",";}}","}& .aether-multiselect-dropdown__input{color:"," !important;caret-color:",";height:16px;}& .aether-multiselect-dropdown__placeholder{color:",";}& .aether-multiselect-dropdown__dropdown-indicator{svg path{fill:",";}padding:",";}& .aether-multiselect-dropdown__clear-indicator{padding:",";}"],(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["spacing-xl"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-default"],";")}),(function(e){return e.theme["background-color-primary"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["input-border-color-default"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return"0 0 0 2px ".concat(e.theme["input-shadow-focus"],";")}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return e.theme["spacing-xxxl"]}),(function(e){return e.theme["spacing-zero"]}),(function(e){return e.theme["input-background-color-disabled"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"],";")}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["border-color-strong"]}),(function(e){var t=e.validationState;return t.status?"\n          border-color: ".concat(e.theme["input-border-color-".concat(t.status)],";\n\n          &:hover {\n            border-color: ").concat(e.theme["input-border-color-".concat(t.status)],";\n          }\n\n          &--is-focused,\n          &--is-focused:hover {\n            border-color: ").concat(e.theme["input-border-color-focus"],";;\n          }\n        "):""}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-s"],";")}),(function(e){return e.theme["spacing-zero"]})),o={container:function(e){return i(i({},e),{},{pointerEvents:"auto"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}}}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js":function(e,t,n){"use strict";n.r(t),n.d(t,{StyledCreatableReactSelect:function(){return b},StyledReactSelect:function(){return f},default:function(){return v}});var s=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=n("../../node_modules/@postman/aether/node_modules/react-select/dist/react-select.esm.js"),l=n("../../node_modules/@postman/aether/node_modules/react-select/creatable/dist/react-select.esm.js"),c=n("../../node_modules/prop-types/index.js"),d=n.n(c),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/CustomComponents.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,r.default)(o.default).withConfig({displayName:"DefaultMultiSelect__StyledReactSelect",componentId:"sc-14ka43a-0"})(["",""],g.postmanSpecificStyles),b=(0,r.default)(l.default).withConfig({displayName:"DefaultMultiSelect__StyledCreatableReactSelect",componentId:"sc-14ka43a-1"})(["",""],g.postmanSpecificStyles);function v(e){var t=e["aria-label"],n=e["aria-labelledby"],a=e.id,r=e.isOpen,o=e.onChange,l=e.onCreateNewOption,c=e.onClose,d=e.onOpen,g=e.options,m=e.value,v=e.placeholder,I=e.emptyStateMessage,S=e.isDisabled,y=e.isLoading,_=e.isOptionDisabled,E=e.viaPortal,A=e.closeMenuOnSelect,w=e.validationState,C=e.allowCreateNewOption,k=e.customOptionComponent,j=e.menuMaxHeight,P=e.triggerWidth,T=e.containerWidth,N=e.className;function D(e,t){var n=t.action,s=t.option;"create-option"===n&&l&&l(s),o(e,{action:n,option:s})}return i.createElement(i.Fragment,null,C?i.createElement(b,(0,s.default)({isMulti:!0,inputId:a,menuIsOpen:r},E&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:D,onMenuClose:c,onMenuOpen:d},m&&{value:m},{options:g,placeholder:v,isDisabled:S,closeMenuOnSelect:A,"aria-label":t,"aria-labelledby":n},_&&{isOptionDisabled:_},{emptyStateMessage:I,formatOptionLabel:!y&&k,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:N,maxMenuHeight:j,styles:{container:function(e){return h(h({},e),{},{pointerEvents:"auto"})},control:function(e){return h(h({},e),{},{width:P})},input:function(e){return h(h({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return h(h({},e),{},{padding:0,margin:0})},groupHeading:function(e){return h(h({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return h(h({},e),{},{width:T,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return h(h({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return h(h({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return h(h({},e),{},{padding:"0"})},option:function(e){return h(h({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return h(h({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return h(h({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:u.EmptyState,Option:p.MultiSelectOption,Menu:u.Menu,MenuList:y?u.StaticLoader:p.DefaultMultiSelectMenuList,MultiValueContainer:p.MultiSelectChip,MultiValueLabel:p.MultiSelectChipLabel,MultiValueRemove:p.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:u.GroupHeading}})):i.createElement(f,(0,s.default)({isMulti:!0,inputId:a,menuIsOpen:r},E&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:D,onMenuClose:c,onMenuOpen:d},m&&{value:m},{options:g,placeholder:v,isDisabled:S,closeMenuOnSelect:A,"aria-label":t,"aria-labelledby":n},_&&{isOptionDisabled:_},{emptyStateMessage:I,formatOptionLabel:!y&&k,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:N,maxMenuHeight:j,styles:{container:function(e){return h(h({},e),{},{pointerEvents:"auto"})},control:function(e){return h(h({},e),{},{width:P})},input:function(e){return h(h({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return h(h({},e),{},{padding:0,margin:0})},groupHeading:function(e){return h(h({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return h(h({},e),{},{width:T,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return h(h({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return h(h({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return h(h({},e),{},{padding:"0"})},option:function(e){return h(h({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return h(h({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return h(h({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:u.EmptyState,Option:p.MultiSelectOption,Menu:u.Menu,MenuList:y?u.StaticLoader:p.DefaultMultiSelectMenuList,MultiValueContainer:p.MultiSelectChip,MultiValueLabel:p.MultiSelectChipLabel,MultiValueRemove:p.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:u.GroupHeading}})))}v.defaultProps={isOpen:void 0,onClose:null,onCreateNewOption:null,onOpen:null,value:null,"aria-label":void 0,"aria-labelledby":void 0,placeholder:"Select option",emptyStateMessage:"No options found",menuMaxHeight:"auto",triggerWidth:"auto",containerWidth:"auto",className:"",isDisabled:!1,isLoading:!1,viaPortal:!1,isOptionDisabled:function(){},closeMenuOnSelect:!1,allowCreateNewOption:!1,customOptionComponent:null,validationState:{status:"",message:""}},v.propTypes={onChange:d().func.isRequired,options:d().arrayOf(d().shape({label:d().string,value:d().oneOfType([d().string,d().number])})).isRequired,id:d().string.isRequired,"aria-label":d().string,"aria-labelledby":d().string,value:d().array,isOpen:d().bool,onClose:d().func,onCreateNewOption:function(e){var t=e.allowCreateNewOption,n=e.onCreateNewOption;return!t&&n?new Error("MultiSelect: onCreateNewOption is only allowed to be used when the prop allowCreateNewOption is passed as true."):n&&"function"!=typeof n?new Error("MultiSelect: Expected the type of the onCreateNewOption to be a function."):null},onOpen:d().func,placeholder:d().string,emptyStateMessage:d().string,menuMaxHeight:d().oneOfType([d().number,d().string]),triggerWidth:d().oneOfType([d().number,d().string]),containerWidth:d().oneOfType([d().string,d().number]),className:d().string,isDisabled:d().bool,isLoading:d().bool,viaPortal:d().bool,isOptionDisabled:d().func,closeMenuOnSelect:d().bool,allowCreateNewOption:d().bool,customOptionComponent:d().func,validationState:d().shape({status:d().oneOf(["","success","error","warning"]),message:d().string})}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownContainer.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownLabel.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownValidationMessage.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js");function m(e){var t=(0,i.useRef)(null),n=(0,i.useState)(""),r=(0,a.default)(n,2),o=r[0],l=r[1],m=e.type,h=e.label,f=e.helperText,b=e.id,v=e.validationState,I=e["data-testid"],S=e["data-click"];return(0,i.useEffect)((function(){t.current&&(t.current.offsetWidth?l(t.current.offsetWidth):l("auto"))}),[]),"compact"===m?i.createElement(g.default,e):i.createElement(c.default,{ref:t,"data-aether-id":"aether-multiSelect","data-testid":I,"data-click":S},i.createElement(d.default,{id:b,label:h,helperText:f}),i.createElement(p.default,(0,s.default)({containerWidth:o},e)),i.createElement(u.default,{validationState:v}))}m.defaultProps={type:"default",id:"",label:"",helperText:"",validationState:{status:"",message:""},"data-testid":"aether-multi-select","data-click":""},m.propTypes={type:o().oneOf(["default","compact"]),id:o().string,label:function(e){var t=e.label;return t&&t.type!==l.default&&"string"!=typeof t?new Error("MultiSelect: label prop only accepts string or the Aether's Label component as valid value."):null},helperText:o().string,validationState:o().shape({status:o().oneOf(["","success","error","warning"]),message:o().string}),"data-testid":o().string,"data-click":o().string}},"../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/prop-types/index.js"),o=n.n(r),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=i.default.input.attrs({type:"file"}).withConfig({displayName:"FileUploader__StyledInputFile",componentId:"yxf6ba-0"})(["height:0.1px;opacity:0;width:0.1px;z-index:-1;&:focus + label{box-shadow:",";outline:none;}"],(function(e){return e.theme["shadow-focus"]})),g=i.default.label.withConfig({displayName:"FileUploader__StyledFileUploaderLabel",componentId:"yxf6ba-1"})(["user-select:none;color:",";font-size:",";width:max-content;height:",";vertical-align:middle;line-height:",";display:inline-block;padding:",";border:",";border-color:",";box-sizing:border-box;border-radius:",";margin-top:",";&:hover{cursor:",";border-color:",";}"],(function(e){return e.isDisabled?e.theme["content-color-tertiary"]:e.theme["content-color-primary"]}),(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["size-m"]}),(function(e){return"calc(".concat(e.theme["line-height-xxl"]," - 2px)")}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-m"])}),(function(e){return e.theme["button-outline-border"]}),(function(e){return e.theme["button-outline-border-color"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.isDisabled?"not-allowed":"pointer"}),(function(e){return!e.isDisabled&&e.theme["button-outline-hover-border-color"]})),m=i.default.div.withConfig({displayName:"FileUploader__StyleFileListWrapper",componentId:"yxf6ba-2"})(["width:320px;height:32px;border-radius:",";padding-left:",";display:flex;justify-content:space-between;align-items:'center';background-color:",";& .aether-remove-uploaded-file-btn{border-top-left-radius:0;border-bottom-left-radius:0;}color:",";"],(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["background-color-secondary"]}),(function(e){return e.theme["content-color-primary"]})),h=i.default.div.withConfig({displayName:"FileUploader__StyledFileNameContainer",componentId:"yxf6ba-3"})(["display:flex;align-items:center;width:258px;"]),f=a.forwardRef((function(e,t){var n=e.initialList,i=e.label,r=e.helperText,o=e.actionLabel,f=e.id,b=e.name,v=e.className,I=e.isDisabled,S=e.multiple,y=e.onChange,_=e.accept,E=e.autoFocus,A=e["data-testid"],w=e["data-click"],C=(0,a.useState)(!S&&Array.isArray(n)?n:[]),k=(0,s.default)(C,2),j=k[0],P=k[1],T=(0,a.useRef)(null);T=t||T;var N=(0,a.useRef)(null);return a.createElement(l.default,{direction:"column"},a.createElement(c.default,{size:"medium"},i),r&&a.createElement(d.default,{type:"_input-meta-text",color:"content-color-secondary",lineLengthType:"none"},r),a.createElement(p,{id:f,ref:T,onChange:function(e){var t=e.target,n=t&&t.files;0!==n.length?(P(Object.values(n).map((function(e){return{name:e.name}}))),N.current=n,y&&!I&&y(n)):T.current.files=N.current},multiple:S,disabled:I,accept:_,name:b,className:v,"data-testid":A,"data-click":w,autoFocus:E}),a.createElement(g,{"data-aether-id":"aether-label",htmlFor:f,isDisabled:I},o),j.length>0&&a.createElement(l.default,{direction:"column",padding:{paddingTop:"spacing-l"},gap:"spacing-xs"},j.map((function(e){return a.createElement(m,{className:"aether-file-list-wrapper","data-aether-id":"aether-fileUploader",key:e.name},a.createElement(h,null,a.createElement(d.default,{type:"body-medium",isTruncated:!0},e.name)),a.createElement(u.default,{className:"aether-remove-uploaded-file-btn",onClick:function(){!function(e){for(var t=T.current&&T.current.files,n=new DataTransfer,s=0;s<t.length;s+=1){var a=t[s];e!==a.name&&n.items.add(a)}P(j.filter((function(t){return e!==t.name}))),T.current.files=n.files,y&&!I&&y(T.current.files)}(e.name)},type:"tertiary",icon:"icon-action-close-stroke"}))}))))}));f.defaultProps={initialList:void 0,helperText:"",actionLabel:"Add Files",isDisabled:!1,multiple:!1,accept:"*",name:"",className:"",autoFocus:!1,"data-testid":"aether-file-uploader","data-click":""},f.propTypes={initialList:o().arrayOf(o().object),label:o().string.isRequired,onChange:o().func.isRequired,helperText:o().string,actionLabel:o().node,id:o().string.isRequired,name:o().string,className:o().string,isDisabled:o().bool,multiple:o().bool,accept:o().string,autoFocus:o().bool,"data-testid":o().string,"data-click":o().string},f.displayName="FileUploader",t.default=f},"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/BootcampWelcome.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function i(){return s.createElement(a.default,{name:"illustration-bootcamp-welcome"})}},"../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");function i(){return s.createElement(a.default,{name:"illustration-no-integrations"})}},"./api-dev/constants/APIRepositoryConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ACCESS_TOKEN_VALIDATION_STATUS:function(){return G},ALLOWED_ENTITIES:function(){return v},ALLOWED_ENTITIES_FOR_REPO_SYNC:function(){return u},API_DEFINITION_OPTIONS:function(){return E},API_REPO_INTEGRATION_ACTIVE_STATE:function(){return re},API_REPO_INTEGRATION_AUTHORIZATION_ERROR_MESSAGE:function(){return oe},API_REPO_INTEGRATION_ERROR_STATE:function(){return se},API_REPO_INTEGRATION_INVALID_TOKEN_ERROR_STATE:function(){return ie},API_REPO_INTEGRATION_LOCKED_ERROR_STATE:function(){return le},API_REPO_INTEGRATION_TOKEN_EXPIRED_ERROR_STATE:function(){return ae},AUTH_SOURCE_IDENTIFIER:function(){return z},BILLED_FEATURE_NAMES:function(){return U},BRANCH_SEARCH:function(){return B},COLLECTION:function(){return Z},CONFLICTS:function(){return g},CONFLICT_OPTIONS:function(){return D},CREATES:function(){return m},DEBOUNCE_TIMEOUT:function(){return F},DEFAULT_DIRECTORY_OPTION:function(){return J},DESTROYS:function(){return h},DEVELOPMENT_BRANCH_ALREADY_LINKED_STATE:function(){return q},DEVELOP_BRANCH_NAME:function(){return l},DIRECTORY_DROPDOWN_DISPLAY_OPTIONS:function(){return ne},DISPLAY_TYPE:function(){return T},EMPTY_BRANCH_FILE_CONTENT_TEMPLATE:function(){return ce},EMPTY_BRANCH_FILE_PATH:function(){return de},EMPTY_STATE_MESSAGES:function(){return W},ENTITIES_TO_BE_SYNCED:function(){return X},ENTITY_CHANGE_TYPE_FROM_CONFLICT_DESTINATION:function(){return I},ENTITY_ERROR_NAME_MAP:function(){return ee},ERROR_MESSAGES_FOR_ENTITIES:function(){return Y},FAILED_TO_FETCH_ENTITIES_ERROR_MESSAGES:function(){return K},FIRST_SYNC_COMMIT_MSG:function(){return d},GIT_SERVICES_CONFIG:function(){return x},GIT_SERVICES_LIST:function(){return O},ICONS_FROM_TYPE:function(){return N},IS_API_DEFINITION_CONFLICT_CREATE:function(){return P},IS_API_DEFINITION_CREATE:function(){return j},IS_BRANCH_SEARCH_ENABLED:function(){return L},IS_RELATION_CREATE:function(){return A},IS_RELATION_UPDATE_CONFLICT:function(){return w},IS_REPO_SEARCH_ENABLED:function(){return M},IS_SCHEMA_CONFLICT_CREATE:function(){return k},IS_SCHEMA_CREATE:function(){return C},MAIN_BRANCH_NAME:function(){return c},ON_PREM_LEARN_MORE_URL:function(){return ue},POSTMAN_CHANGES:function(){return S},POSTMAN_DEFAULT_DIRECTORY_PATH:function(){return te},RELATION_TYPES:function(){return _},REPOSITORY_CHANGES:function(){return y},REPOSITORY_INTEGRATION_ACTIONS:function(){return R},REPO_ALREADY_LINKED_STATE:function(){return $},REPO_SEARCH:function(){return H},SCHEMA:function(){return Q},TAB_STATUS_IDENTIFIER:function(){return V},TAG_TYPE_FROM_CHANGE_TYPE:function(){return b},UPDATES:function(){return p},USER_FRIENDLY_CHANGE_TYPE:function(){return f},VALIDATION_BANNER_MESSAGE:function(){return pe}});var s=n("./integrations/constants/integrationsConstants.ts"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-github.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-bitbucket.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-gitlab.js"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-devops.js");const l="develop",c="main",d="Initial changes from Postman [auto-generated]",u=["schemas","relations","apiDefinition"],p="updates",g="conflicts",m="creates",h="destroys",f={creates:{name:"ADDED"},updates:{name:"MODIFIED"},conflicts:{name:"CONFLICT"},destroys:{name:"DELETED"},renames:{name:"RENAMED"},moves:{name:"MOVED"}},b={creates:"success",updates:"info",renames:"info",moves:"info",conflicts:"warn",destroys:"error"},v=["schemas","relations","apiDefinition"],I={destroyed:"destroys",updated:"updates",created:"creates"},S="Postman",y="Repository",_=[{name:"Use as documentation",id:"documentation"},{name:"Use as test",id:"test"}],E=[{name:"Use this file",id:"Add"},{name:"Always ignore this file",id:"Ignore"}],A=(e,t)=>"relations"===e&&"creates"===t,w=(e,t)=>"relations"===e&&"updates"===t,C=(e,t)=>"schemas"===e&&"creates"===t,k=(e,t,n)=>"schemas"===e&&"conflicts"===t&&"created"===n,j=(e,t)=>"apiDefinition"===e&&"creates"===t,P=(e,t,n)=>"apiDefinition"===e&&"conflicts"===t&&"created"===n,T={apiDefinition:"Definition File",schemas:"Schema",relations:"Collection"},N={relations:"icon-entity-collection-stroke",collections:"icon-entity-collection-stroke",schemas:"icon-entity-api-stroke",apiDefinition:"icon-entity-docs-stroke"},D=[{name:"Keep local file",id:S,tooltip:"This will keep the version of the file present in Postman."},{name:"Keep remote file",id:y,tooltip:"This will keep the version of the file present in the repository."}],R=[{name:"pull",displayName:"Pull"},{name:"commit",displayName:"Commit and push"}],O={GITHUBENTERPRISE:{serviceName:"github",isOnPrem:!0,oauthConfigs:s.SERVICE_OAUTH_CONFIG.GITHUBENTERPRISE,maskedServiceName:"githubEnterprise",dropdownOptionName:"GitHub Enterprise Server",friendlyName:"GitHub",requiredScopes:"repo",billedFeatureName:"api_repo_integration_staticip_enabled",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},customDomainDescription:"GitHub domain URL",customDomainPlaceholder:"https://subdomain.companydomain.com",icon:a.default},GITHUB:{serviceName:"github",isOnPrem:!1,oauthConfigs:s.SERVICE_OAUTH_CONFIG.GITHUB,maskedServiceName:"github",dropdownOptionName:"GitHub",friendlyName:"GitHub",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},icon:a.default},BITBUCKET:{serviceName:"bitbucket",isOnPrem:!1,oauthConfigs:s.SERVICE_OAUTH_CONFIG.BITBUCKET,maskedServiceName:"bitbucket",dropdownOptionName:"Bitbucket",friendlyName:"Bitbucket",serviceProviderTerminologies:{ORGANISATION:"workspace",REPOSITORY:"repository"},icon:i.default},GITLABENTERPRISE:{serviceName:"gitlab",isOnPrem:!0,oauthConfigs:s.SERVICE_OAUTH_CONFIG.GITLABENTERPRISE,maskedServiceName:"gitlabEnterprise",dropdownOptionName:"GitLab Self-managed",friendlyName:"GitLab Self-managed",billedFeatureName:"api_repo_integration_staticip_enabled",requiredScopes:"api, read_user, read_api & write_repository",serviceProviderTerminologies:{ORGANISATION:"group",REPOSITORY:"project"},customDomainDescription:"Gitlab Self-managed domain URL",customDomainPlaceholder:"https://gitlab.companyname.com",icon:r.default},GITLAB:{serviceName:"gitlab",isOnPrem:!1,oauthConfigs:s.SERVICE_OAUTH_CONFIG.GITLAB,maskedServiceName:"gitlab",dropdownOptionName:"GitLab SaaS",friendlyName:"GitLab SaaS",serviceProviderTerminologies:{ORGANISATION:"group",REPOSITORY:"project"},icon:r.default},AZURE:{serviceName:"azure",isOnPrem:!1,oauthConfigs:s.SERVICE_OAUTH_CONFIG.AZURE,maskedServiceName:"azure",dropdownOptionName:"Azure DevOps",friendlyName:"Azure DevOps",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},icon:o.default},AZUREENTERPRISE:{serviceName:"azure",isOnPrem:!0,oauthConfigs:s.SERVICE_OAUTH_CONFIG.AZUREENTERPRISE,maskedServiceName:"azureEnterprise",dropdownOptionName:"Azure DevOps Server",friendlyName:"Azure DevOps Server",billedFeatureName:"api_repo_integration_staticip_enabled",requiredScopes:"vso.code_write, vso.graph_manage, vso.notification_write",serviceProviderTerminologies:{ORGANISATION:"organization",REPOSITORY:"repository"},customDomainDescription:"Azure DevOps Server domain URL along with the collection",customDomainPlaceholder:"{server:port}/{collection}",displayUserAndOrg:!1,featureFlag:"azure-dev-ops-server-on-prem",icon:o.default}},x={github:{debounceTimeout:{repoSearch:1500,branchSearch:500},isRepositorySearchEnabled:!0,isBranchSearchEnabled:!0},bitbucket:{debounceTimeout:{repoSearch:500,branchSearch:500},isRepositorySearchEnabled:!0,isBranchSearchEnabled:!0},gitlab:{debounceTimeout:{repoSearch:500,branchSearch:500},isRepositorySearchEnabled:!0,isBranchSearchEnabled:!0},azure:{debounceTimeout:{repoSearch:500,branchSearch:500},isBranchSearchEnabled:!0}},M="isRepositorySearchEnabled",L="isBranchSearchEnabled",F="debounceTimeout",H="repoSearch",B="branchSearch",U=["api_repo_integration_staticip_enabled"],V={LOADING:"loading",ERROR:"error",FINISHED:"finished"},G={VALID:"valid",INVALID:"invalid",SERVER_UNREACHABLE:"serverUnreachable"},z={OAUTH:"oauth",SHARED_AUTH:"sharedAuth",PERSONAL_ACCESS_TOKEN:"pat"},W={repos:"No repositories found.",orgs:"No organizations found.",branches:"No branches found for the selected repository."},K={orgs:"Failed to fetch organizations.",repos:"Failed to fetch repositories.",branches:"Failed to fetch branches.",collectionDirectories:"Failed to fetch directories.",schemaDirectories:"Failed to fetch directories.",customRepo:"Failed to fetch repository",reposFetch:"Unable to load all the repositories. Please enter the repository name."},Y={developmentBranch:{branchNotFoundError:"Branch not found. Check the branch name and try again."},collectionDirectories:{invalidParentDirectoryError:"Select a directory other than the parent of the schema directory.",invalidChildDirectoryError:"Select a directory other than the child of the schema directory."},schemaDirectories:{invalidParentDirectoryError:"Select a directory other than the parent of the collection directory.",invalidChildDirectoryError:"Select a directory other than the child of the collection directory."}},q="developmentBranchAlreadyLinked",$="repoAlreadyLinked",J={id:"default",name:"Create a directory for me"},Z="collection",Q="schema",X=[Z,Q],ee={[Z]:"collectionDirectories",[Q]:"schemaDirectories"},te={[Z]:"postman/collections",[Q]:"postman/schemas"},ne={previousLevelTrigger:"previousLevelTrigger",selectedItem:"selectedItem"},se="ERROR",ae="expired",ie="invalid",re="active",oe="Postman doesn't have the right permissions on the repository. This might have happened because your access token expired or was deleted. Please authenticate again to resume syncing with the repository.",le="locked",ce="id = {{API_ID}}\n\n[relations]\n\n[relations.collections]\nrootDirectory = postman/collections\n\n[relations.collections.metaData]\n\n[relations.apiDefinition]\nrootDirectory = postman/schemas\n\n[relations.apiDefinition.metaData]\n",de=".postman/api",ue="https://go.pstmn.io/v10-new-onprem-docs",pe="The domain and personal access token combination didn't work. Try again."},"./iam/src/common/components/CenteredLoader.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/ResponsiveContainer/ResponsiveContainer.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");t.default=({minHeight:e,size:t="small"})=>s.createElement(a.default,{type:"row"},s.createElement(a.default,{type:"column",span:12,minHeight:e||"100vh"},s.createElement(i.default,{width:"100%",justifyContent:"center",alignItems:"center",padding:"spacing-xxl"},s.createElement(r.default,{size:t}))))},"./iam/src/common/components/withPermissions.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./iam/src/common/components/CenteredLoader.js"),i=n("./iam/src/common/api/IAMservice.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoEnvironment.js"),c=n("./node_modules/lodash/lodash.js");t.default=(e,t,n)=>d=>u=>{const[p,g]=(0,s.useState)(c.get(n,"showSpinner",!0)),[m,h]=(0,s.useState)(c.get(n,"canView",!1));if((0,s.useEffect)((()=>{e&&e.objectId?(0,i.checkPermissionForUser)({canView:{permission:e.permission,objectType:e.objectType,objectId:e.objectId}}).then((e=>{h(c.get(e,"canView.allowed",!1))})).finally((()=>{g(!1)})):(h(!0),g(!1))}),[]),p)return s.createElement(a.default,null);if(!m){const e=null==t?void 0:t.IllustrationComponent;return s.createElement(r.default,{title:"You don't have access",description:t.forbiddenMessage,primaryAction:!c.isEmpty(t.primaryAction)&&s.createElement(o.default,{type:"primary",text:t.primaryAction.text,onClick:t.primaryAction.action}),secondaryAction:!c.isEmpty(t.secondaryAction)&&s.createElement(o.default,{type:"outline",text:t.secondaryAction.text,onClick:t.secondaryAction.action})},e?s.createElement(e,null):s.createElement(l.default,null))}return s.createElement(d,u)}},"./integrations/api-observability/AzureFormHelper.js":function(e,t,n){"use strict";n.r(t),n.d(t,{generateApiList:function(){return i},isFormUpdated:function(){return a}});var s=n("./node_modules/lodash/lodash.js");function a(e,t){const n=i(s.get(e,"variables.linked_apis")),{linkedApis:a}=t,r=i(a);return!s.isEqual(n,r)}function i(e){return s.map(e,(e=>s.assign({},s.pick(e,["azure_subscription_id","azure_resource_group_id","azure_service_id","azure_service_path","azure_api_id","azure_api_path"]))))}},"./integrations/api-observability/components/base/AddIntegrationV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("./appsdk/workbench/TabService.js"),r=n("./integrations/navigation/constants.js"),o=n("./js/services/NavigationService.js"),l=n("./api-dev/constants/APISubViews.js"),c=n("./node_modules/lodash/lodash.js"),d=n.n(c),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./js/modules/services/AnalyticsService.js"),g=n("./js/stores/StoreManager.js"),m=n("./integrations/api-observability/stores/APIObservabilityStore.js"),h=n("./js/stores/IntegrationsStore.js"),f=n("./integrations/api-observability/constants.ts"),b=n("./integrations/api-observability/components/import-schema/index.js");function v(e){let t=(0,g.resolveStoreInstance)(m.default),n=(0,g.resolveStoreInstance)(h.default);const c=(0,s.useCallback)((e=>{let{apiId:n,apiVersionId:s}=e,a={apiId:n,versionId:s};i.default.closeByRoute(r.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:n}),t.initializeApiObservabilityStore({apiId:n,apiVersionId:s,category:f.API_OBSERVABILITY}),o.default.transitionTo("build.apiVersion",a,{tab:l.DEPLOYMENT})}),[]),v=(0,s.useCallback)((e=>{let{service:t,rule:n}=e;o.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:n})}),[]),I=(0,s.useCallback)(((e,s)=>{const{rule:a,isBrowseIntegrationFlow:i,onSuccessfulIntegrationCreate:r}=e;s||(s=d().get(e,"payload")),t.updateIsAdding(!0),u.default.createIntegration(null,s).then((s=>{t.updateIsAdding(!1),200===d().get(s,"status")&&d().get(s,"body.model_id")?(pm.toasts.success("Added a new integration"),p.default.addEventV2({category:"integrations",action:a+"_created_integration",label:"team_integrations_create_forms",value:1}),d().isFunction(r)&&r(d().get(s,"body.data",{})),t.fetchIntegrationInstance("apiversion",e.apiVersionId),i?(n.setRuleSpecificTeamIntegrations(a,null),n.refetchTeamIntegrations(),n.resetAddIntegrationDependencies(),v(e)):b.default[e.rule]||c(e),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-added`,{apiId:e.apiId,apiVersionId:e.apiVersionId,integrationId:d().get(s,"body.model_id")})):pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{t.updateIsAdding(!1),"integrationFoundError"===d().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while adding a new integration. Please try again."),pm.logger.error("Something went wrong while adding a new integration",e)}))}),[]);return s.createElement(a.default,{type:"primary",size:"medium",onClick:()=>{d().isFunction(e.customAddIntegrationHandler)?e.customAddIntegrationHandler().then((t=>{I(e,t)})):I(e)},isDisabled:e.isDisabled||t.isAdding,text:e.text,isLoading:e.isLoading||t.isAdding})}},"./integrations/api-observability/components/base/AzureServiceConfig.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-up.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),d=n("./node_modules/lodash/lodash.js"),u=n.n(d),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./integrations/api-observability/services/AzureService.js"),h=n("./integrations/api-observability/constants.ts"),f=n("./integrations/api-observability/components/base/CustomDropdown.js"),b=n("./js/components/base/SearchHighlighter.js");let v=(0,p.observer)(s=class extends a.Component{constructor(e){super(e),this.filterApis=e=>{const{selectedApiPaths:t=[]}=this.props;let n=u().filter(e||[],(e=>!t.includes(u().get(e,"path"))||this.state.azureApiPath===u().get(e,"path")));this.setState({filteredApis:n})},this.renderLoadingState=()=>a.createElement(i.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading..."),a.createElement(g.default,{className:"loading-indicator-aether__dropdown"})),this.getSubscriptionValidationState=()=>{let{errorSubscription:e,fetchErrorSubscriptions:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load subscriptions.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===h.EDIT?this.fetchSubscriptionsWithIntegrationId():this.fetchSubscriptions()}},"Retry")):"Please select a subscription."}},this.getResourceGroupValidationState=()=>{let{errorResourceGroup:e,fetchErrorResourceGroups:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load resource groups.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===h.EDIT?this.fetchResourceGroupsWithIntegrationId():this.fetchResourceGroups()}},"Retry")):"Please select a resource group."}},this.getServiceValidationState=()=>{let{errorService:e,fetchErrorServices:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load services.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===h.EDIT?this.fetchServicesWithIntegrationId():this.fetchServices()}},"Retry")):"Please select a service."}},this.getApiValidationState=()=>{let{errorApi:e,fetchErrorApis:t}=this.state;return!e&&u().isEmpty(t)?{}:{status:"error",message:t?a.createElement("div",null,"Unable to load Apis.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===h.EDIT?this.fetchApisWithIntegrationId():this.fetchApis()}},"Retry")):"Please select an API."}},this.handleLinkedApiConfig=()=>{const{selectedSubscription:e,selectedResourceGroup:t,selectedService:n,selectedApi:s}=this.state;let{index:a}=this.props,i={azure_subscription_id:u().get(e,"value"),azure_resource_group_id:u().get(t,"value"),azure_service_id:u().get(n,"value"),azure_service_path:u().get(n,"path"),azure_api_id:u().get(s,"value"),azure_api_path:u().get(s,"path"),isCollapsed:!1};this.props.handleLinkedApis(i,a)},this.handleSelectSubscription=e=>{this.setState({selectedSubscription:e,azureSubscriptionId:u().get(e,"value"),errorSubscription:u().isEmpty(e),fetchedResourceGroups:[],selectedResourceGroup:[],fetchedServices:[],selectedService:[],fetchedApis:[],selectedApi:[],azureResourceGroupId:"",azureServiceId:"",azureApiId:""},(()=>{u().get(e,"value")&&(this.props.formType===h.EDIT?this.fetchResourceGroupsWithIntegrationId():this.fetchResourceGroups()),this.handleLinkedApiConfig()}))},this.handleSelectResourceGroup=e=>{this.setState({selectedResourceGroup:e,azureResourceGroupId:u().get(e,"value"),errorResourceGroup:u().isEmpty(e),fetchedServices:[],azureServiceId:"",azureApiId:"",selectedService:[],fetchedApis:[],selectedApi:[]},(()=>{u().get(e,"value")&&(this.props.formType===h.EDIT?this.fetchServicesWithIntegrationId():this.fetchServices()),this.handleLinkedApiConfig()}))},this.handleSelectService=e=>{this.setState({selectedService:e,errorService:u().isEmpty(e),azureServiceId:u().get(e,"value"),azureApiId:"",fetchedApis:[],selectedApi:[]},(()=>{u().get(e,"value")&&(this.props.formType===h.EDIT?this.fetchApisWithIntegrationId():this.fetchApis()),this.handleLinkedApiConfig()}))},this.handleSelectApi=e=>{this.setState({selectedApi:e,azureApiId:u().get(e,"value"),azureApiPath:u().get(e,"path"),errorApi:u().isEmpty(e)},(()=>{this.handleLinkedApiConfig()}))},this.fetchSubscriptionsWithIntegrationId=()=>{this.setState({isFetchingSubscriptions:!0});let e=[];m.default.fetchSubscriptionsWithIntegrationId(this.props.integrationId,{},h.LIST_SUBSCRIPTIONS).then((t=>{u().map(t,(t=>{u().get(t,"value")===this.state.azureSubscriptionId&&(e={label:u().get(t,"label"),value:u().get(t,"value")})})),this.setState({selectedSubscription:e,fetchedSubscriptions:t||[],isFetchingSubscriptions:!1,fetchErrorSubscriptions:!1}),this.props.handleFetchedSubscriptions(t)})).catch((e=>{this.setState({fetchErrorSubscriptions:!0,isFetchingSubscriptions:!1})}))},this.fetchSubscriptions=()=>{this.setState({isFetchingSubscriptions:!0});let{rule:e,accessToken:t}=this.props,n={azure_access_token:t};m.default.fetchSubscriptions(e,n,h.LIST_SUBSCRIPTIONS).then((e=>{this.setState({fetchedSubscriptions:e||[],isFetchingSubscriptions:!1,fetchErrorSubscriptions:!1}),this.props.handleFetchedSubscriptions(e)})).catch((e=>{this.setState({fetchErrorSubscriptions:!0,isFetchingSubscriptions:!1})}))},this.fetchResourceGroupsWithIntegrationId=()=>{this.setState({isFetchingResourceGroups:!0});let{selectedSubscription:e}=this.state,t=[],n={azure_subscription_id:this.state.azureSubscriptionId||u().get(e,"value")};m.default.fetchResourceGroupsWithIntegrationId(this.props.integrationId,n,h.LIST_RESOURCE_GROUPS).then((e=>{u().map(e,(e=>{u().get(e,"value")===this.state.azureResourceGroupId&&(t={label:u().get(e,"label"),value:u().get(e,"value")})})),this.setState({selectedResourceGroup:t,fetchedResourceGroups:e||[],isFetchingResourceGroups:!1,fetchErrorResourceGroups:!1})})).catch((e=>{this.setState({fetchErrorResourceGroups:!0,isFetchingResourceGroups:!1})}))},this.fetchResourceGroups=()=>{this.setState({isFetchingResourceGroups:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:n}=this.state,s={azure_access_token:t,azure_subscription_id:u().get(n,"value")};m.default.fetchResourceGroups(e,s,h.LIST_RESOURCE_GROUPS).then((e=>{this.setState({fetchedResourceGroups:e||[],isFetchingResourceGroups:!1,fetchErrorResourceGroups:!1})})).catch((e=>{this.setState({fetchErrorResourceGroups:!0,isFetchingResourceGroups:!1})}))},this.fetchServicesWithIntegrationId=()=>{this.setState({isFetchingServices:!0});let{selectedSubscription:e,selectedResourceGroup:t}=this.state,n=[],s={azure_subscription_id:this.state.azureSubscriptionId||u().get(e,"value"),azure_resource_group_id:this.state.azureResourceGroupId||u().get(t,"value")};m.default.fetchServicesWithIntegrationId(this.props.integrationId,s,h.LIST_SERVICES).then((e=>{u().map(e,(e=>{u().get(e,"value")===this.state.azureServiceId&&(n={label:u().get(e,"label"),value:u().get(e,"value"),path:u().get(e,"path")})})),this.setState({selectedService:n,fetchedServices:e||[],isFetchingServices:!1,fetchErrorServices:!1})})).catch((e=>{this.setState({fetchErrorServices:!0,isFetchingServices:!1})}))},this.fetchServices=()=>{this.setState({isFetchingServices:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:n,selectedResourceGroup:s}=this.state,a={azure_access_token:t,azure_subscription_id:u().get(n,"value"),azure_resource_group_id:u().get(s,"value")};m.default.fetchServices(e,a,h.LIST_SERVICES).then((e=>{this.setState({fetchedServices:e||[],isFetchingServices:!1,fetchErrorServices:!1})})).catch((e=>{this.setState({fetchErrorServices:!0,isFetchingServices:!1})}))},this.fetchApisWithIntegrationId=async()=>{this.setState({isFetchingApis:!0});let{selectedSubscription:e,selectedResourceGroup:t,selectedService:n}=this.state,s=[],a={azure_subscription_id:this.state.azureSubscriptionId||u().get(e,"value"),azure_resource_group_id:this.state.azureResourceGroupId||u().get(t,"value"),azure_service_id:this.state.azureServiceId||u().get(n,"value")};try{const e=await m.default.fetchApisWithIntegrationId(this.props.integrationId,a,h.LIST_APIS);let t=e;if(s=u().find(t,(e=>(null==e?void 0:e.value)===this.state.azureApiId)),u().isEmpty(s)){a.azureApiSearchQuery=this.state.azureApiId;const n=await m.default.fetchApisWithIntegrationId(this.props.integrationId,a,h.LIST_APIS);t=u().unionBy(n,e,"path"),s=u().find(t,(e=>(null==e?void 0:e.value)===this.state.azureApiId))}this.filterApis(t),this.setState({selectedApi:s,fetchedApis:t||[],isFetchingApis:!1,fetchErrorApis:!1})}catch(e){this.setState({fetchErrorApis:!0,isFetchingApis:!1})}},this.fetchApis=()=>{this.setState({isFetchingApis:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:n,selectedResourceGroup:s,selectedService:a}=this.state,i={azure_access_token:t,azure_subscription_id:u().get(n,"value"),azure_resource_group_id:u().get(s,"value"),azure_service_id:u().get(a,"value")};m.default.fetchApis(e,i,h.LIST_APIS).then((e=>{this.filterApis(e),this.setState({fetchedApis:e||[],isFetchingApis:!1,fetchErrorApis:!1})})).catch((e=>{this.setState({fetchErrorApis:!0,isFetchingApis:!1})}))},this.fetchApisWithSearchQuery=e=>{const{rule:t,accessToken:n,integrationId:s,formType:a}=this.props,{selectedSubscription:i,selectedResourceGroup:r,selectedService:o,azureSubscriptionId:l,azureResourceGroupId:c,fetchedApis:d,azureServiceId:p}=this.state,g={azure_access_token:n,azure_subscription_id:l||u().get(i,"value"),azure_resource_group_id:c||u().get(r,"value"),azure_service_id:p||u().get(o,"value"),azureApiSearchQuery:e};return(a===h.EDIT?m.default.fetchApisWithIntegrationId:m.default.fetchApis)(a===h.EDIT?s:t,g,h.LIST_APIS).then((e=>{const t=u().unionBy(e,d,"path");return this.setState({fetchedApis:t}),this.shouldSetFetchedApis&&this.filterApis(e),Promise.resolve()})).catch((e=>(pm.logger.error("Something went wrong while fetching APIs",e),Promise.reject(e))))},this.toggleSection=()=>{const{isCollapsed:e,index:t}=this.props;this.props.handleCollapse(t,!e)},this.hideContainer=()=>{let{isContainerVisible:e}=this.state,{index:t}=this.props;this.setState({isContainerVisible:!e}),this.props.handleRemoveSection(t),this.props.handleLinkedApis(null,t)},this.getApiDropdownOption=e=>{const{azureApiSearchQuery:t}=this.state,n=null==e?void 0:e.label;return a.createElement(b.default,{source:n,query:t,highlightClassName:"highlight-dropdown-options"})},this.state={fetchedSubscriptions:this.props.fetchedSubscriptions||[],fetchedResourceGroups:[],fetchedServices:[],isSectionVisible:!0,isContainerVisible:!0,azureSubscriptionId:u().get(this.props,"config.azure_subscription_id"),azureResourceGroupId:u().get(this.props,"config.azure_resource_group_id"),azureServiceId:u().get(this.props,"config.azure_service_id"),azureApiId:u().get(this.props,"config.azure_api_id"),azureApiPath:u().get(this.props,"config.azure_api_path"),filteredApis:[],fetchedApis:[],azureApiSearchQuery:""}}componentDidMount(){const{config:e,formType:t}=this.props;t===h.EDIT?u().isEmpty(e)?(this.props.handleLinkedApis({isCollapsed:!1},this.props.index),u().isEmpty(this.props.fetchedSubscriptions)&&this.fetchSubscriptions()):(this.props.handleLinkedApis(e,this.props.index),u().isEmpty(this.props.fetchedSubscriptions)&&(this.fetchSubscriptionsWithIntegrationId(),this.fetchResourceGroupsWithIntegrationId(),this.fetchServicesWithIntegrationId(),this.fetchApisWithIntegrationId())):(this.props.handleLinkedApis({isCollapsed:!1},this.props.index),u().isEmpty(this.props.fetchedSubscriptions)&&this.fetchSubscriptions())}componentDidUpdate(e,t,n){u().isEqual(e.selectedApiPaths,this.props.selectedApiPaths)||this.filterApis(this.state.fetchedApis)}render(){const{fetchedSubscriptions:e,selectedSubscription:t,isFetchingSubscriptions:n,fetchedResourceGroups:s,selectedResourceGroup:d,isFetchingResourceGroups:p,fetchedServices:g,selectedService:m,isFetchingServices:h,fetchedApis:b,filteredApis:v,selectedApi:I,isFetchingApis:S,isSectionVisible:y,isContainerVisible:_}=this.state,{isCollapsed:E}=this.props;return _?a.createElement(i.default,{direction:"column",className:"observability-azure-add-integration__service__section__container"},a.createElement("div",{className:E?"observability-azure-add-integration__service__section__setup-service":""},a.createElement(i.default,{justifyContent:"space-between"},a.createElement(i.default,{alignItems:"center"},a.createElement("div",{onClick:()=>{this.toggleSection()}},E?a.createElement(l.default,null):a.createElement(o.default,null)),a.createElement(r.default,{className:"observability-azure-add-integration__service__section__header",color:"content-color-primary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},"Service (",this.props.serialNumber,") Setup")),!this.props.isRemoveHidden&&a.createElement(i.default,{alignItems:"center",className:"observability-azure-add-integration__service__section__header__link"},a.createElement("div",{onClick:()=>{this.hideContainer()}},a.createElement(c.default,null)),a.createElement("div",{className:"observability-azure-add-integration__service__section__remove",onClick:()=>{this.hideContainer()}},a.createElement(r.default,{className:"observability-azure-add-integration__service__section__header",color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},"Remove"))))),!E&&a.createElement("div",{className:"observability-azure-add-integration__service__section"},a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectSubscription,options:e||[],value:t,label:"Subscription",placeholder:n?this.renderLoadingState():"Select Subscription",className:n?"dropdown-icon-remove":"",isDisabled:n,emptyStateMessage:"No Subscriptions found",validationState:this.getSubscriptionValidationState()})),a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectResourceGroup,options:s||[],value:d,label:"Resource Group",placeholder:p?this.renderLoadingState():"Select Resource Group",className:p?"dropdown-icon-remove":"",isDisabled:!u().get(t,"value")||p,emptyStateMessage:"No Resource Groups found",validationState:this.getResourceGroupValidationState()})),a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectService,options:g||[],value:m,label:"Service",placeholder:h?this.renderLoadingState():"Select Service",className:h?"dropdown-icon-remove":"",isDisabled:!u().get(d,"value")||h,emptyStateMessage:"No Services found",validationState:this.getServiceValidationState()})),a.createElement("div",{className:"observability-azure-add-integration__service__component"},a.createElement(f.default,{onChange:this.handleSelectApi,options:v||[],value:I,label:"API Version",placeholder:S?this.renderLoadingState():"Select API Version",className:S?"dropdown-icon-remove":"",isDisabled:!u().get(m,"value")||S,emptyStateMessage:"No APIs found",validationState:this.getApiValidationState(),customOptionComponent:this.getApiDropdownOption,asyncLoader:async({search:e})=>{this.shouldSetFetchedApis=e,e||this.filterApis(b),this.setState({azureApiSearchQuery:e}),e&&await this.fetchApisWithSearchQuery(e)}})))):a.createElement("div",null)}})||s},"./integrations/api-observability/components/base/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./appsdk/workbench/TabService.js"),o=n("./js/services/NavigationService.js"),l=n("./api-dev/constants/APISubViews.js"),c=n("./js/stores/StoreManager.js"),d=n("./integrations/api-observability/stores/APIObservabilityStore.js");let u=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(s=class extends a.Component{constructor(e){super(e),this.navigateToDeploymentsTab=()=>{let{apiId:e,apiVersionId:t,integrationId:n,redirectUrl:s}=this.props,a={apiId:e,versionId:t},i={apiId:e};n&&(i.integrationId=n),r.default.closeByRoute(s,i),o.default.transitionTo("build.apiVersion",a,{tab:l.DEPLOYMENT})},this.state={}}render(){return a.createElement(i.default,{type:"secondary",size:"medium",onClick:()=>{this.props.isBrowseIntegrationFlow?o.default.back():this.navigateToDeploymentsTab()},text:this.props.text,isDisabled:this.props.isDisabled||(0,c.resolveStoreInstance)(d.default).isAdding})}})||s},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const a=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(s.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=a},"./integrations/api-observability/components/base/CustomMultiSelect.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),i=n("./integrations/api-observability/constants.ts");const r=(0,s.default)(a.default)`
  & .aether-multiselect-dropdown__menu {
    width: ${i.DROPDOWN_WIDTH}px;
  }
`;t.default=r},"./integrations/api-observability/components/base/EditIntegrationV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),i=n("./appsdk/workbench/TabService.js"),r=n("./integrations/navigation/constants.js"),o=n("./js/services/NavigationService.js"),l=n("./api-dev/constants/APISubViews.js"),c=n("./node_modules/lodash/lodash.js"),d=n.n(c),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./js/modules/services/AnalyticsService.js"),g=n("./js/stores/StoreManager.js"),m=n("./integrations/api-observability/stores/APIObservabilityStore.js"),h=n("./js/stores/IntegrationsStore.js"),f=n("./integrations/api-observability/constants.ts");function b(e){let t=(0,g.resolveStoreInstance)(m.default),n=(0,g.resolveStoreInstance)(h.default);const c=(0,s.useCallback)((e=>{let{apiId:n,apiVersionId:s,redirectUrl:a,integrationId:r}=e,c={apiId:n,versionId:s,integrationId:r};i.default.closeByRoute(a,{apiId:n,integrationId:r}),t.initializeApiObservabilityStore({apiId:n,apiVersionId:s,category:f.API_OBSERVABILITY}),o.default.transitionTo("build.apiVersion",c,{tab:l.DEPLOYMENT})}),[]),b=(0,s.useCallback)((e=>{let{service:t,rule:n}=e;o.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:n})}),[]),v=(0,s.useCallback)(((e,s)=>{const{rule:a,integrationId:i,isBrowseIntegrationFlow:r}=e;s||(s=d().get(e,"payload")),t.updateIsAdding(!0),u.default.updateIntegration(i,s).then((s=>{t.updateIsAdding(!1),200===d().get(s,"status")&&d().get(s,"body.model_id")?(pm.toasts.success("Successfully updated integration"),p.default.addEventV2({category:"integrations",action:a+"_edited_integration",label:"team_integrations_edit_forms",value:1}),r?(n.setRuleSpecificTeamIntegrations(a,null),n.refetchTeamIntegrations(),n.resetAddIntegrationDependencies(),t.fetchIntegrationInstance("apiversion",e.apiVersionId),b(e)):c(e)):pm.toasts.error("Something went wrong while updating integration")})).catch((e=>{t.updateIsAdding(!1),"integrationFoundError"===d().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while updating integration. Please try again."),pm.logger.error("Something went wrong while updating integration",e)}))}),[]);return s.createElement(a.default,{type:"primary",size:"medium",onClick:()=>{d().isFunction(e.customUpdateIntegrationHandler)?e.customUpdateIntegrationHandler().then((t=>{v(e,t)})):v(e)},isDisabled:t.isAdding||e.isDisabled,text:e.text,isLoading:e.isLoading||t.isAdding})}},"./integrations/api-observability/components/base/ImportSchemaActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=n("../../node_modules/react/index.js"),r=n("./appsdk/workbench/TabService.js"),o=n("../../packages/api-design/schema-service/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("./integrations/navigation/constants.js"),u=n("./js/services/NavigationService.js"),p=n("./api-dev/constants/APISubViews.js"),g=n("./integrations/api-observability/constants.ts"),m=n("./js/modules/services/AnalyticsService.js"),h=(n("../../packages/api-design/api-definition-service/index.js"),n("./node_modules/uuid/v4.js")),f=n.n(h),b=n("../../packages/api-design/api-definition-store/index.js"),v=(n("./js/stores/StoreManager.js"),n("./api-dev/services/APIDevService.js")),I=n("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),S=n("./api-dev/interfaces/APIInterface.js"),y=n("../../packages/api-design/api-definition-ui/index.js");class _ extends i.Component{constructor(e){super(e),this.state={isImporting:!1,errorImport:!1,apiRelationId:null,fileId:null},this.handleImport=this.handleImport.bind(this),this.handleNavigation=this.handleNavigation.bind(this),this.addSchema=this.addSchema.bind(this)}handleNavigation(){const{apiId:e,versionId:t}=a().get(this.props,"payload",{}),{formSource:n}=this.props;if(r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),a().isEqual(n,g.IMPORT_FORM_SOURCES.INTEGRATION_SETUP))u.default.transitionTo(g.API_BUILDER_ROUTE_IDENTIFIERS.API_VERSION,{apiId:e,versionId:t},{tab:p.DEPLOYMENT});else{let n=a().get(u.default.getActiveQueryParams().get(),"branch");setTimeout((()=>{u.default.transitionTo("build.apiDefinitionFile",{apiId:e,apiVersionId:t,apiDefinitionId:this.state.apiRelationId,fileId:this.state.fileId},n&&{branch:n})}),3e3)}}handleCancel(){const{apiId:e}=a().get(this.props,"payload",{});r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e})}async createOrReplaceApiDefinition(e,t,n,s){try{const n=f()(),i=b.APIDefinitionTypeService.getDefinitionTypeFromSchemaType(a().get(s,"type")),r=`${n}.${a().get(s,"language","json")}`,o=[{type:I.FILE,name:r,path:r,content:a().get(s,"content")}],l=await(0,y.createOrReplaceDefinition)({apiId:e,apiVersionId:t,items:o,options:{type:i}});let c=await l.getRedirectionFileId();return Promise.resolve({id:c})}catch(e){return Promise.reject(e)}}addSchema(){const{payload:e,apiDefinition:t}=this.props,n=a().get(e,"schemaContent",{}),s=a().get(e,"apiId"),i=a().get(e,"versionId");return v.default.getRelations(s,i).then((e=>{const r=a().get(e,"apiDefinition")&&a().get(a().keys(e.apiDefinition),0),l=a().get(e,"schema")&&a().get(a().keys(e.schema),0);return this.setState({apiRelationId:null!=r?r:l}),l?(0,o.updateSchema)(l,n):this.createOrReplaceApiDefinition(s,i,a().get(t,"id",r),n)}))}async handleImport(){const{onImport:e,rule:t,formSource:n,payload:s,onCancel:i}=this.props,{apiId:r}=s,o=(await(0,S.getAPI)(r)).version.apiRepositoryStore;if(!o.canEditAPISource.allowed)return i&&i(),void o.openEditDisabledModal();this.setState({isImporting:!0,errorImport:!1},(()=>{this.addSchema().then((s=>{m.default.addEventV2({category:"gateway-integration",action:`import-schema-${n}`,label:t,value:1}),this.setState({fileId:a().get(s,"id")},(()=>{this.handleNavigation()})),pm.toasts.success("Successfully imported definition."),this.setState({isImporting:!1,errorImport:!1}),a().isFunction(e)&&e()})).catch((e=>{pm.logger.error("Import definition via gateway error ~"+e),pm.toasts.error("Error occurred while importing definition"),this.setState({isImporting:!1,errorImport:e})}))}))}render(){const{disabled:e,tooltipText:t,formSource:n,isLoading:s}=this.props,{isImporting:r}=this.state,o=a().isEqual(n,g.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),d=t||"Make sure that you have entered all the mandatory fields",u=!o&&"Maybe later";return i.createElement(l.default,{justifyContent:"flex-start",direction:o?"row-reverse":"row",grow:1,shrink:1,gap:"spacing-s"},i.createElement(c.default,{className:"deploy-form-container__segment__actions-container__deploy",type:"primary",size:"medium",text:"Import",onClick:this.handleImport,tooltip:e&&d,isDisabled:e||r||s,isLoading:r||s}),i.createElement(c.default,{className:"deploy-form-container__segment__actions-container__cancel",type:"secondary",size:"medium",text:u||"Cancel",onClick:()=>{a().isFunction(this.props.onCancel)&&this.props.onCancel(),this.handleCancel()},isDisabled:r}))}}},"./integrations/api-observability/components/common/ErrorState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),r=n("./node_modules/lodash/lodash.js");class o extends s.Component{constructor(e){super(e)}render(){return s.createElement("div",{className:"team-integrations-error-state"},s.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=e.illustration||s.createElement(a.default,null);return r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t=s.createElement(i.default,null)),t}(this.props.errorDetails)),s.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===r.get(e,"error.details.code","")?t="Your request timed out":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),s.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404===e.status||400===e.status?t="Looks like the page you're looking for doesn't exist.":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}},"./integrations/api-observability/components/common/ImportSchemaBanner.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=function({isSchemaPresent:e}){let t=e?"Importing a definition will replace the existing definition":"Importing a definition will create a new definition";return s.createElement(a.default,{status:"info"},s.createElement(i.default,null,t))}},"./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");class i extends s.Component{constructor(e){super(e),this.state={value:""},this.handleCopyToClipboard=this.handleCopyToClipboard.bind(this)}componentDidMount(){this.setState({value:this.props.value})}handleCopyToClipboard(){try{window.clipboardData.setData("Text",this.props.value),pm.toasts.success(`${this.props.title} copied to clipboard`)}catch(e){navigator.clipboard.writeText(this.props.value),pm.toasts.success(`${this.props.title} copied to clipboard`)}}render(){return s.createElement("div",{className:"integrations-info-segment"},s.createElement("div",{className:"integrations-info-segment__title"},this.props.title),s.createElement("div",{className:"integrations-info-segment__description"},this.props.description," ",this.props.children),s.createElement("div",{className:"integrations-info-segment__value-container"},s.createElement("div",{className:"input input-box integrations-info-segment__value-segment"},s.createElement("div",{className:"integrations-info-segment__value"},this.props.value)),s.createElement("div",{className:"input input-box integrations-info-segment__copy-btn",onClick:this.handleCopyToClipboard},s.createElement("div",{className:"integrations-info-segment__copy-btn-container"},s.createElement(a.default,{name:"icon-action-copy-stroke",color:"content-color-primary"})))))}}},"./integrations/api-observability/components/import-schema/APIGatewayAWS.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=n("./integrations/api-observability/constants.ts"),v=n("./integrations/api-observability/services/ApiGatewayService.js"),I=n("./integrations/api-observability/services/GatewayIntegrationsService.js"),S=n("./integrations/api-observability/components/base/ImportSchemaActions.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),_=n("./integrations/api-observability/components/common/ErrorState.js"),E=n("./js/services/NavigationService.js"),A=n("./appsdk/workbench/TabService.js"),w=n("./integrations/navigation/constants.js"),C=n("./api-dev/constants/APISubViews.js"),k=n("./integrations/api-observability/components/common/ImportSchemaBanner.js"),j=n("./integrations/api-observability/services/Helper.js");let P=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={errorStages:!1,loadingStages:!1,stages:[],loadingData:!1,errorData:!1,AWSApiType:i().get(this.props,"integration.variables.aws_api_type")||b.API_GATEWAY_TYPES.HTTP,integration:i().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedStage:null,selectedAPIGateway:null,showImportModal:!1,isImportDisabled:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchStages=this.fetchStages.bind(this),this.fetchSchema=this.fetchSchema.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.handleNoSchema=this.handleNoSchema.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.bootstrap(),this.fetchRequiredPermission()}componentDidUpdate(e){i().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap()}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),j.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchStages(){this.setState({loadingStages:!0,errorStages:!1}),v.default.fetchStages(i().get(this.state,"integration.id")).then((e=>{let t=i().orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),n=i().map(t,(e=>({label:e.StageName||e.stageName,value:e.StageName||e.stageName})));this.setState({stages:n,loadingStages:!1},(()=>{this.handleNoSchema()}))})).catch((e=>{pm.logger.error("Error occurred while fetching stages",e),this.setState({errorStages:!0,loadingStages:!1,isImportDisabled:!1})}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{selectedStage:e,integration:t}=this.state;I.default.performAction(i().get(t,"id"),{stage:i().get(e,"label")},b.AWS_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200!==e.status)throw new Error("Something went wrong while fetching schema");{const t=i().get(e,"body.data.versions.0.schemas.0"),n={content:i().get(t,"schema"),language:i().get(t,"language"),type:i().get(t,"type")};this.setState({schemaContent:n,loadingSchema:!1,errorFetchingSchema:!1})}})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),pm.toasts.error("Error occurred while fetching Definition"),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return y.default.getIntegrationData(e&&e.toString()).then((e=>{const t=i().get(e,"body.data");return 200!==e.status||i().isEmpty(t)?new Error("Something went wrong while fetching integration"):Promise.resolve(t)})).catch((e=>Promise.reject("Something went wrong while fetching integration")))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),j.default.fetchAPIDetails(e),j.default.isSchemaPresent(e,t)]).then((([e,t,n])=>{i().get(t,"isGitIntegrationLinked")&&(n=!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.files"))||!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:n},(()=>{this.fetchStages()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleNoSchema(){const{formSource:e,integrationId:t,apiId:n,versionId:s}=this.props,{stages:a}=this.state;!i().isEmpty(a)?this.setState({isImportDisabled:!1}):i().isEqual(e,b.IMPORT_FORM_SOURCES.INTEGRATION_SETUP)?(pm.toasts.warn("Skipping definition import as no stages found on linked API Gateway",{title:"Import Definition"}),A.default.closeByRoute(w.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:n}),E.default.transitionTo("build.apiVersion",{apiId:n,versionId:s,integrationId:t},{tab:C.DEPLOYMENT})):this.setState({isImportDisabled:!0})}handleStageChange(e){this.setState({selectedStage:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,stages:[],selectedStage:null})}renderTooltip(){const{isImportDisabled:e,loadingPermission:t,hasPermission:n,errorPermission:s}=this.state,a=(e?"No stages found on linked API Gateway":t&&"Fetching required permission")||s&&"Error occurred while fetching required permission. Please try again."||!n&&b.PERMISSION_ERROR||"Import definition from AWS";return r.createElement(l.default,{content:a,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,loadingStages:t,errorStages:n,loadingSchema:s,errorFetchingSchema:a,selectedStage:o,loadingData:l,errorData:c,apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p}=this.state,g={apiId:i().get(e,"variables.postman_api_id"),versionId:i().get(e,"executor"),integrationId:i().get(e,"id"),schemaContent:i().get(this.state,"schemaContent")},m=o&&!s&&!a&&i().isEmpty(i().get(g,"schemaContent.content"));return l||c?r.createElement("div",null):r.createElement(S.default,{payload:g,disabled:!o||s||a||n||t||m,tooltipText:s?"Fetching Definition":m&&"No Definition found on selected stage.",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:s,rule:i().get(e,"rule"),apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{stages:e,loadingStages:t,loadingSchema:n,isSchemaPresent:s,selectedStage:a,loadingData:i,errorData:o,errorFetchingSchema:l}=this.state;return i?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):o?r.createElement(_.default,{errorDetails:o}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(k.default,{isSchemaPresent:s})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:e||[],value:a,isLoading:t,isDisabled:n,isSearchable:!0,onChange:this.handleStageChange,label:"AWS stage"})),l&&r.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(h.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(g.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(g.default,{type:"link-default"},"Retry"))))))}render(){const e=i().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{isImportDisabled:t,loadingPermission:n,hasPermission:s,errorPermission:a}=this.state;return i().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(m.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||n||a||!s,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||s},"./integrations/api-observability/components/import-schema/Azure.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=n("./integrations/api-observability/constants.ts"),v=n("./integrations/api-observability/services/AzureService.js"),I=n("./integrations/api-observability/components/base/ImportSchemaActions.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),y=n("./integrations/api-observability/components/common/ErrorState.js"),_=n("./integrations/api-observability/components/common/ImportSchemaBanner.js"),E=n("./integrations/api-observability/services/Helper.js");let A=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={loadingData:!1,services:[],schemaTypes:b.SCHEMA_TYPES,selectedSchemaType:b.SCHEMA_TYPES[0],errorData:!1,integration:i().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedService:null,showImportModal:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchSchema=this.fetchSchema.bind(this),this.fetchServices=this.fetchServices.bind(this),this.handleServiceChange=this.handleServiceChange.bind(this),this.handleSchemaTypeChange=this.handleSchemaTypeChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.fetchRequiredPermission(),this.bootstrap(),this.setState({selectedService:this.props.selectedService})}componentDidUpdate(e){i().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap(),i().isEqual(i().get(this.props,"selectedService.value.azure_api_path"),i().get(e,"selectedService.value.azure_api_path"))||this.setState({selectedService:this.props.selectedService})}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),E.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchServices(){const{integration:e}=this.state,t=i().get(e,"variables.linked_apis",[]),n=i().map(t,(e=>({label:i().get(e,"azure_service_id"),value:e})));this.setState({services:n},(()=>{i().isArray(n)&&1===n.length&&this.handleServiceChange(n[0])}))}handleSchemaTypeChange(e){this.setState({selectedSchemaType:e},(()=>{this.state.selectedService&&this.fetchSchema()}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{integration:e,selectedSchemaType:t,selectedService:n}=this.state;v.default.fetchSchema(i().get(e,"id"),n.value,t.value).then((e=>{this.setState({schemaContent:e,loadingSchema:!1,errorFetchingSchema:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return S.default.getIntegrationData(e&&e.toString()).then((e=>{const t=i().get(e,"body.data");if(200===e.status&&!i().isEmpty(t))return Promise.resolve(t);throw e})).catch((e=>Promise.reject(e)))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),E.default.fetchAPIDetails(e),E.default.isSchemaPresent(e,t)]).then((([e,t,n])=>{i().get(t,"isGitIntegrationLinked")&&(n=!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.files"))||!i().isEmpty(i().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:n},(()=>{this.fetchServices()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleServiceChange(e){e&&this.setState({selectedService:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,services:[],selectedService:null,selectedSchemaType:b.SCHEMA_TYPES[0]})}renderTooltip(){const{loadingPermission:e,hasPermission:t,errorPermission:n}=this.state,s=(e?"Fetching required permission":n&&"Error occurred while fetching required permission. Please try again.")||!t&&b.PERMISSION_ERROR||"Import definition from Azure";return r.createElement(l.default,{content:s,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,errorStages:t,loadingSchema:n,errorFetchingSchema:s,selectedService:a,loadingData:o,errorData:l,selectedSchemaType:c,apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p}=this.state,g={apiId:i().get(e,"variables.postman_api_id"),versionId:i().get(e,"executor"),integrationId:i().get(e,"id"),schemaContent:i().get(this.state,"schemaContent")};return o||l?r.createElement("div",null):r.createElement(I.default,{payload:g,disabled:!a||!c||n||s||t,tooltipText:n&&"Fetching Definition",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:n,rule:i().get(e,"rule"),apiDetails:d,apiDefinition:u,isGitIntegrationLinked:p})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{services:e,loadingSchema:t,schemaTypes:n,selectedSchemaType:s,selectedService:a,loadingData:o,errorData:l,errorFetchingSchema:c,isSchemaPresent:m}=this.state,f=i().isEmpty(this.props.selectedService);return o?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):l?r.createElement(y.default,{errorDetails:l}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(_.default,{isSchemaPresent:m})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:n,value:s,isDisabled:t,isSearchable:!0,isClearable:!1,onChange:this.handleSchemaTypeChange,label:"Definition type"})),f&&r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(u.default,{options:e,value:a,isDisabled:t,isSearchable:!0,onChange:this.handleServiceChange,label:"Azure service"})),c&&r.createElement(p.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(h.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(g.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(g.default,{type:"link-default"},"Retry"))))))}render(){const e=i().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{loadingPermission:t,hasPermission:n,errorPermission:s}=this.state;return i().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(m.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.handleServiceChange(this.props.selectedService),this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||!n||s,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||s},"./integrations/api-observability/components/import-schema/index.js":function(e,t,n){"use strict";n.r(t);var s=n("./integrations/api-observability/components/import-schema/APIGatewayAWS.js"),a=n("./integrations/api-observability/components/import-schema/Azure.js");t.default={api_gateway_aws:s.default,api_management_azure:a.default}},"./integrations/api-observability/components/import/ImportGatewayServiceConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{API_MANAGEMENT_AZURE:function(){return a},AWS_API_GATEWAY:function(){return s},CREATE_API_MODAL:function(){return v},DEFAULT_SERVICE_NAME:function(){return r},DEFINITION:function(){return m},DISABLED_IMPORT_BUTTON_TOOLTIP_TEXT:function(){return d},FILE:function(){return h},GATEWAY_SERVICES_LIST:function(){return i},GENERIC_CREATE_INTEGRATION_ERROR:function(){return u},IMPORT_ANALYTICS_ACTION:function(){return S},IMPORT_ANALYTICS_CATEGORY:function(){return I},SERVICE_CARD_DESCRIPTION:function(){return l},SERVICE_CARD_TITLE:function(){return o},SERVICE_NOT_SUPPORTED:function(){return c},SUCCESS_IMPORT_MESSAGE:function(){return g},SUCCESS_IMPORT_SCHEMA_MESSAGE:function(){return b},SUCCESS_IMPORT_SCHEMA_TITLE:function(){return f},SUCCESS_IMPORT_TITLE:function(){return p}});const s="api_gateway_aws",a="api_management_azure",i={[s]:{serviceId:"api_gateway_aws",classId:"api_gateway_aws",serviceName:"AWS API Gateway",iconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",darkIconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",featureFlag:""},[a]:{serviceId:"api_management_azure",classId:"api_management_azure",serviceName:"Azure API Management",iconUrl:"https://static.getpostman.com/assets/azure-apim.svg",darkIconUrl:"https://static.getpostman.com/assets/azure-apim.svg",featureFlag:"land-646-azure-apim-integration",authType:"oauth2"}},r="API Gateway",o="Import from API Gateway",l="Select an API Gateway to import an API.",c="Postman has encountered an error. If you can't find what you're looking for, contact us at help@postman.com",d="Make sure that you have entered all the mandatory fields.",u="Your API is imported successfully but something went wrong while adding an integration.",p="Imported API successfully",g="Your API is imported in current workspace successfully.",m="Definition",h="file",f="Imported API definition successfully",b="Your API definition has been successfully imported in the current API.",v="build.api.new",I="import",S="import_by_api_gateway"},"./integrations/api-observability/configs/Integrations.js":function(e,t,n){"use strict";n.r(t),t.default={api_management_azure:{name:"Azure API Management",icon_url:"https://static.getpostman.com/assets/azure-apim.svg",dark_icon_url:"https://static.getpostman.com/assets/azure-apim.svg"}}},"./integrations/api-observability/gateway-actions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{FETCH_API_GATEWAY_META:function(){return a},FETCH_AWS_GATEWAY_APIS:function(){return s},FETCH_EXTERNAL_ID:function(){return r},FETCH_STAGES:function(){return i}});const s="fetch-aws-gateway-apis",a="fetch-api-gateway-meta",i="fetch-stages",r="fetch-external-id"},"./integrations/api-observability/services/ApiGatewayService.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n("./integrations/api-observability/services/GatewayIntegrationsService.js")),r=n("./integrations/api-observability/constants.ts"),o=n("./integrations/api-observability/gateway-actions.js");t.default={fetchApiGateways:e=>i.default.performPreConfigAction(a().get(e,"rule"),e,o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e.body,"data.Items")||a().get(e.body,"data.items"));throw e})).catch((e=>Promise.reject(e))),fetchApiGatewaysUsingIntegrationId:e=>i.default.performAction(e,{},o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e.body.data,"Items")||a().get(e.body.data,"items"));throw e})).catch((e=>Promise.reject(e))),fetchDeployments:e=>i.default.listDeployments(e).then((e=>{if(e.status&&200===e.status){let t=a().get(e,"body.data.items")||a().get(e,"body.data.Items")||[];return t.sort(((e,t)=>{let n=e.CreatedDate||e.createdDate,s=t.CreatedDate||t.createdDate;return new Date(s)-new Date(n)})),Promise.resolve(t.splice(0,r.AWS_TOTAL_DEPLOYMENTS))}return Promise.reject({statusCode:e.status,...e.body})})).catch((e=>Promise.reject(e))),fetchAPIGatewayMeta:e=>i.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>e.status&&200===e.status?Promise.resolve(a().get(e.body,"data")):Promise.reject({statusCode:e.status,...e.body}))).catch((e=>Promise.reject(e))),fetchStages:e=>i.default.performAction(e,{},o.FETCH_STAGES).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e.body,"data.Items")||a().get(e.body,"data.item"));throw e})).catch((e=>Promise.reject(e))),fetchCloudWatchAggregateMetrics:(e,t)=>new Promise(((n,s)=>{i.default.performAction(e,{stage:t},r.FETCH_CLOUDWATCH_AGGREGATE_METRICS).then((e=>{n(a().get(e,"body.data"))})).catch((e=>{s(e)}))})),fetchCloudWatchTimeSeriesMetrics:(e,t)=>i.default.performAction(e,t,r.FETCH_CLOUDWATCH_TIMESERIES_METRICS),fetchExternalId:e=>new Promise(((t,n)=>{i.default.performPreConfigAction(a().get(e,"rule"),e,o.FETCH_EXTERNAL_ID).then((e=>{t(a().get(e,"body.data.externalId"))})).catch((e=>{n(e)}))})),deploySchema:(e,t)=>i.default.createDeployment(e,t),fetchPostmanExports:e=>i.default.listDeployments(e,!1,!0).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body.data);throw e})).catch((e=>Promise.reject(e))),isDeployEnabled:(e,t)=>a().get(e,"variables.aws_api_type")===r.API_GATEWAY_TYPES.HTTP,isOverviewEnabled:e=>!0,fetchDeployOptionString:e=>i.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>{if(e.status&&200===e.status)return Promise.resolve(`Deploy Schema on ${a().get(e,"body.data.Name")||a().get(e,"body.data.name")}`);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/api-observability/services/AzureService.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=n("./integrations/api-observability/services/GatewayIntegrationsService.js"),o=n("./integrations/api-observability/constants.ts"),l=n("./integrations/utils/CommonHelperMethods.ts");t.default={fetchServicesMeta:(e=[],t)=>Promise.all(a().map(e,(e=>{const{azure_resource_group_id:n,azure_subscription_id:s,azure_service_id:a}=e,i={azure_subscription_id:s,azure_resource_group_id:n,azure_service_id:a};return r.default.performAction(t,i,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META)}))).then((e=>{const t={};return a().each(e,(e=>{if(200!==e.status)throw e;{const n=a().get(e,"body.data");t[a().get(e,"body.data.id")]={id:a().get(n,"id"),name:a().get(n,"name"),location:a().get(n,"location"),gatewayUrl:a().get(n,"properties.gatewayUrl"),developerPortalUrl:a().get(n,"properties.developerPortalUrl"),publicIPAddresses:a().get(n,"properties.publicIPAddresses"),privateIPAddresses:a().get(n,"properties.privateIPAddresses")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchApiMeta:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:s,azure_service_id:i,azure_api_id:l}=e,c={azure_subscription_id:s,azure_resource_group_id:n,azure_service_id:i,azure_api_id:l};return r.default.performAction(t,c,o.AZURE_GATEWAY_ACTIONS.GET_API_META).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),n={id:a().get(t,"id"),name:a().get(t,"properties.displayName"),version:a().get(t,"properties.apiVersion")};return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchServiceMeta:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:s,azure_service_id:i}=e,l={azure_subscription_id:s,azure_resource_group_id:n,azure_service_id:i};return r.default.performAction(t,l,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),n={id:a().get(t,"id"),name:a().get(t,"name"),location:a().get(t,"location"),gatewayUrl:a().get(t,"properties.gatewayUrl"),developerPortalUrl:a().get(t,"properties.developerPortalUrl"),publicIPAddresses:a().get(t,"properties.publicIPAddresses"),privateIPAddresses:a().get(t,"properties.privateIPAddresses")};return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionMeta:(e,t)=>{const{azure_subscription_id:n}=e,s={azure_subscription_id:n};return r.default.performAction(t,s,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),n={id:a().get(t,"subscriptionId"),name:a().get(t,"displayName")};return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionsMeta:(e=[],t)=>Promise.all(a().map(e,(e=>{const{azure_subscription_id:n}=e,s={azure_subscription_id:n};return r.default.performAction(t,s,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META)}))).then((e=>{const t={};return a().each(e,(e=>{if(200!==e.status)throw e;{const n=a().get(e,"body.data");t[a().get(e,"body.data.subscriptionId")]={id:a().get(n,"subscriptionId"),name:a().get(n,"displayName")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchChangelog:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:s,azure_service_id:i,azure_api_id:c}=e,d={azure_subscription_id:s,azure_resource_group_id:n,azure_service_id:i,azure_api_id:c};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.LIST_API_RELEASES).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),n=a().map(t.value,(e=>({createdAt:(0,l.formatUtcDate)(a().get(e,"properties.createdDateTime")),updatedAt:(0,l.formatUtcDate)(a().get(e,"properties.updatedDateTime")),description:a().get(e,"properties.notes")})));return Promise.resolve(n)}throw e})).catch((e=>Promise.reject(e)))},fetchExports:(e,t)=>i.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${t}/list`,query:{exportOnly:!0,internal:!0,azure_api_path:a().get(e,"azure_api_path")}}}).then((e=>{if(200==e.status&&a().get(e,"body.data")){const t=a().map(e.body.data,(e=>({createdAt:(0,l.formatUtcDate)(e.createdAt),azure_api_path:a().get(e,"data.azure_api_path"),azure_revision_id:a().get(e,"data.azure_revision_id"),schemaSource:a().get(e,"data.schemaSource")})));return Promise.resolve(t)}throw e})).catch((e=>Promise.reject(e))),fetchRevisions:(e,t)=>{const{azure_resource_group_id:n,azure_subscription_id:s,azure_service_id:i,azure_api_id:c}=e,d={azure_subscription_id:s,azure_resource_group_id:n,azure_service_id:i,azure_api_id:c};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.LIST_API_REVISIONS).then((e=>{if(200===e.status){const t=a().get(e,"body.data"),n=(a().map(t.value,(e=>({azure_revision_id:a().get(e,"apiRevision"),createdAt:(0,l.formatUtcDate)(a().get(e,"createdDateTime")),description:a().get(e,"description"),privateUrl:a().get(e,"privateUrl"),isOnline:{value:a().get(e,"isOnline"),azure_revision_id:a().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be made offline."},isCurrent:{value:a().get(e,"isCurrent"),azure_revision_id:a().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be disabled."}})))||[]).reduce(((e,t)=>t.isCurrent.value?[t,...e]:[...e,t]),[]);return Promise.resolve(n||[])}throw e})).catch((e=>Promise.reject(e)))},toggleOnlineRevision:(e,t,n=!1,s)=>{const{azure_resource_group_id:a,azure_subscription_id:i,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,u={azure_subscription_id:i,azure_resource_group_id:a,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_revision_action_type:"toggle-revision-status",azure_revision_online:n};return r.default.performAction(s,u,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},toggleCurrentRevision:(e,t,n,s)=>{const{azure_resource_group_id:a,azure_subscription_id:i,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,u={azure_subscription_id:i,azure_resource_group_id:a,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_release_notes:n,azure_revision_action_type:"make-revision-current"};return r.default.performAction(s,u,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},fetchRevisionMapping:(e,t,n)=>{const s=a().map(t,(e=>e.azure_revision_id)),{azure_api_path:i}=e,l={azure_api_path:i,azure_revisions:s,integrationId:n};return r.default.performAction(n,l,o.AZURE_GATEWAY_ACTIONS.GET_REVISION_SOURCE_MAPPING).then((e=>{if(200===e.status)return Promise.resolve(a().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e)))},isDeployEnabled:(e,t)=>t!==o.RELEASE_CONTEXTBAR,deploySchema:(e,t)=>r.default.createDeployment(e,t),fetchSubscriptions:(e,t,n)=>new Promise(((s,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));s(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Subscriptions"),pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),i(e)}))})),fetchSubscriptionsWithIntegrationId:(e,t,n)=>new Promise(((s,i)=>{r.default.performAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));s(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),i(e)}))})),fetchResourceGroups:(e,t,n)=>new Promise(((s,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().map(t,(e=>({label:e.name,value:e.name})));s(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Resource Groups"),pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),i(e)}))})),fetchResourceGroupsWithIntegrationId:(e,t,n)=>new Promise(((s,i)=>{r.default.performAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().map(t,(e=>({label:e.name,value:e.name})));s(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),i(e)}))})),fetchServices:(e,t,n)=>new Promise(((s,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().map(t,(e=>({label:e.name,value:e.name,path:e.id})));s(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Services"),pm.logger.error("Something went wrong while fetching Azure Services",e),i(e)}))})),fetchServicesWithIntegrationId:(e,t,n)=>new Promise(((s,i)=>{r.default.performAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().map(t,(e=>({label:e.name,value:e.name,path:e.id})));s(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Services",e),i(e)}))})),fetchApis:(e,t,n)=>new Promise(((s,i)=>{r.default.performPreConfigAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().filter(t,(e=>!a().get(e,"properties.type")||"http"===a().get(e,"properties.type"))),i=a().map(n,(e=>({label:e.name,value:e.name,path:e.id})));s(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure APIs"),pm.logger.error("Something went wrong while fetching Azure APIs",e),i(e)}))})),fetchApisWithIntegrationId:(e,t,n)=>new Promise(((s,i)=>{r.default.performAction(e,t,n).then((e=>{let t=a().get(e,"body.data.value",[]),n=a().filter(t,(e=>!a().get(e,"properties.type")||"http"===a().get(e,"properties.type"))),i=a().map(n,(e=>({label:e.name,value:e.name,path:e.id})));s(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure APIs",e),i(e)}))})),fetchSchema:(e,t,n)=>{const{azure_resource_group_id:s,azure_subscription_id:i,azure_service_id:l,azure_api_id:c}=t,d={azure_subscription_id:i,azure_resource_group_id:s,azure_service_id:l,azure_api_id:c,azure_export_format:n};return r.default.performAction(e,d,o.AZURE_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200===e.status){const t=a().get(e,"body.data.versions.0.schemas.0"),n={content:a().get(t,"schema",""),language:a().get(t,"language"),type:a().get(t,"type")};return Promise.resolve(n)}throw new Error("Something went wrong while fetching schema")})).catch((e=>Promise.reject(e)))}}},"./integrations/api-observability/services/GatewayIntegrationsService.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");t.default={createDeployment:(e,t)=>s.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/deploy`,body:t}}),listDeployments:(e,t=!1,n=!1)=>{const a={};return t&&(a.exportOnly=!0,a.internal=!0),n&&(a.internal=!0),s.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${e}/list`,query:{...a}}})},performAction:(e,t,n)=>s.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/actions/${n}`,body:t}}),performPreConfigAction:(e,t,n)=>s.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/actions/${n}`,body:{...t,classId:e}}})}},"./integrations/api-observability/services/Helper.js":function(e,t,n){"use strict";n.r(t);var s=n("./integrations/api-observability/services/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),i=n("./integrations/api-observability/constants.ts"),r=n("./js/modules/services/AnalyticsService.js"),o=n("./node_modules/async/dist/async.js"),l=n.n(o),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./js/stores/CurrentUserStore.js"),p=n("./onboarding/src/common/LaunchDarkly.js"),g=n("./api-dev/constants/Permissions.js"),m=n("./api-dev/services/APIPermissionService.js"),h=n("./api-dev/interfaces/APIInterface.js"),f=n("./api-dev/services/APIDevService.js"),b=n("./node_modules/lodash/lodash.js");t.default={shouldRenderDeploy:(e,t)=>!!(e&&e.rule&&s.default[e.rule]&&b.isFunction(s.default[e.rule].isDeployEnabled))&&s.default[e.rule].isDeployEnabled(e,t),getDeployOptionContext:(e,t)=>{if(!e)return t("API version missing");l().waterfall([function(t){return a.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,[i.API_OBSERVABILITY]).then((e=>e[i.API_OBSERVABILITY].length>0?t(null,e[i.API_OBSERVABILITY][0]):t(null,null))).catch((e=>t(e)))},function(e,t){return e&&e.rule?s.default[e.rule]&&b.isFunction(s.default[e.rule].fetchDeployOptionString)?s.default[e.rule].fetchDeployOptionString(e.id).then((n=>t(null,{integration:e,deployString:n}))).catch((n=>t(null,{integration:e,deployString:"Deploy Schema"}))):t(null,{integration:e,deployString:"Deploy Schema"}):t(null,{integration:null,deployString:"Deploy Schema"})}],((e,n)=>(e&&(pm.logger.error("Error occurred while fetching configured integration",e),pm.toasts.error("Error occurred while fetching configured integration")),t(e,n))))},shouldRenderGatewayIntegration:e=>{const t=(0,c.resolveStoreInstance)(u.default).isLoggedIn||!1,n=b.get(e,"apiPermissionStore.canViewAPIIntegrations",!1),s=p.launchDarkly.getFlag("api-deployments-tab-enabled",!1);return!!(t&&n&&s)},truncate:e=>e.length>35?e.substring(0,35)+"...":e,addDeployClickAnalytics:(e,t)=>{e&&e.rule&&r.default.addEventV2({category:"gateway-integration",action:t,label:e.rule,value:1})},hasEditPermissionOnAPI:e=>e?(0,c.resolveStoreInstance)(d.default).onSyncAvailable({timeout:8e3}).then((()=>{const t=(0,c.resolveStoreInstance)(u.default).id,n=[g.UPDATE_API_META],s=m.default.getAPIPermissionQueryObject(n,[{id:e}],t);return m.default.fetchPermissions(s).then((t=>Promise.resolve(b.get(t,`${e}:UPDATE_API_META.allowed`)))).catch((e=>{throw e}))})).catch((e=>Promise.reject(e))):Promise.reject("API id is required to fetch permissions"),fetchAPIDetails:async e=>{if(!e)return{};try{let t=await(0,h.getAPI)(e),n=await(0,h.isAPIGitLinked)(e),s={apiDetails:t,isGitIntegrationLinked:n,apiDefinition:{}};if(n){const t=await(0,h.getAPILinkedEntityModel)(e,{name:"branch"},"apiDefinition","");return s=b.merge({},s,{apiDefinition:t}),s}return s}catch(e){return Promise.reject(e)}},isSchemaPresent:(e,t)=>f.default.getRelations(e,t).then((e=>{const t=b.get(e,"apiDefinition")&&b.get(b.keys(e.apiDefinition),0),n=b.get(e,"schema")&&b.get(b.keys(e.schema),0);return!b.isEmpty(t)||!b.isEmpty(n)})).catch((e=>Promise.reject(e))),addAzureServicesAnalytics:e=>{const t=b.get(e,"rule",""),n=b.get(e,"variables.linked_apis",[]),s=b.size(n)||0;r.default.addEventV2({category:i.GATEWAY_INTEGRATION_ANALYTICS_EVENT_CATEGORY,action:i.AZURE_APIM.SERVICE_ANALYTICS_ACTION,label:t,value:s})}}},"./integrations/api-observability/services/index.js":function(e,t,n){"use strict";n.r(t);var s=n("./integrations/api-observability/services/ApiGatewayService.js"),a=n("./integrations/api-observability/services/AzureService.js");t.default={api_gateway_aws:s.default,api_management_azure:a.default}},"./integrations/api-observability/stores/APIObservabilityStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var s,a,i,r,o,l,c,d,u,p,g,m,h,f,b,v,I,S,y,_,E,A,w,C=n("../../node_modules/mobx/lib/mobx.module.js"),k=n("./node_modules/lodash/lodash.js"),j=n.n(k),P=n("./js/stores/StoreManager.js"),T=n("./js/stores/SyncStatusStore.js"),N=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),D=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),R=n("./integrations/api-observability/stores/fallbackCategoryIntegrations.js"),O=n("./integrations/api-observability/configs/Integrations.js"),x=n("./js/stores/IntegrationsStore.js"),M=n("./integrations/api-observability/constants.ts");function L(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function F(e,t,n,s,a){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let H=(a=F((s=class{constructor(){L(this,"isHydrating",a,this),L(this,"availableIntegrations",i,this),L(this,"configuredIntegrations",r,this),L(this,"categoryIntegrations",o,this),L(this,"builds",l,this),L(this,"activeRule",c,this),L(this,"activeService",d,this),L(this,"errorAvailableIntegrations",u,this),L(this,"errorConfiguredIntegrations",p,this),L(this,"loadingAvailableIntegrations",g,this),L(this,"loadingConfiguredIntegrations",m,this),L(this,"selectedAPI",h,this),L(this,"selectedAPIVersion",f,this),L(this,"selectedService",b,this),L(this,"selectedServiceName",v,this),L(this,"selectedIntegration",I,this),L(this,"selectedRule",S,this),L(this,"category",y,this),L(this,"isAdding",_,this),L(this,"integrationInstance",E,this),L(this,"integrationClass",A,this),L(this,"loadingIntegrationInstanceAndClass",w,this),this.integrationsStore=(0,P.resolveStoreInstance)(x.default)}initializeApiObservabilityStore(e){(0,P.resolveStoreInstance)(T.default).onSyncAvailable({timeout:M.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:s}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(s),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(n,M.categoryToEntityType[s],[M.categoryToClientCategory[s]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiObservabilityStoreV2(e){(0,P.resolveStoreInstance)(T.default).onSyncAvailable({timeout:M.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:s}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(s),this.fetchConfiguredIntegrations(n,M.categoryToEntityType[s],[M.categoryToClientCategory[s]])})).catch((e=>{pm.logger.error("APIObservabilityStore~InitializeApiObservabilityStoreV2~Error while initialising API Observability Store: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setActiveCategory(e){this.category=e}setSelectedIntegration(e){this.selectedIntegration[this.category]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,M.categoryToEntityType[this.category],[M.categoryToClientCategory[this.category]])}getAvailableIntegrations(){return(0,C.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.category]}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){j().isEmpty(e)?this.categoryIntegrations=[...R.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,C.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,C.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=M.categoryToClientCategory[this.category];j().forEach((0,C.toJS)(this.availableIntegrations),(n=>{const s={},a=n.integrations[n.id];j().forEach(a,((e,n)=>{e.client_categories.includes(t)&&(s[n]=e)})),j().isEmpty(s)||(n.integrations[n.id]={...s},e.push(n))})),this.updateCategoryIntegrations(j().map(e,(e=>e.id&&!j().isEmpty(O.default[e.id])?{...e,...O.default[e.id]}:e)))}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),N.default.getAvailableIntegrations().then((e=>{const t=j().get(e,"body.services",[]);if(200!==e.status||j().isEmpty(t))throw e;this.updateAvailableIntegrations(j().map(t,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t,n){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),N.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,n).then((e=>{this.updateConfiguredIntegrations(e[n[0]]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await D.default.getConfiguredIntegrationsForAnEntity(e,t,[M.API_OBSERVABILITY]);let s=j().get(n,"body.data",[]),a=j().map(s,"class"),i=[];if(!j().isEmpty(a)){const e=this.integrationsStore.getIntegrationClasses(),t=a[0];i=j().find(e,(e=>e.id===t))}this.updateIntegrationClass([i],t),this.updateIntegrationInstance(s,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIObservabilityStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=F(s.prototype,"availableIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=F(s.prototype,"configuredIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=F(s.prototype,"categoryIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.fallbackCategoryIntegrations}}),l=F(s.prototype,"builds",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=F(s.prototype,"activeRule",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=F(s.prototype,"activeService",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=F(s.prototype,"errorAvailableIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=F(s.prototype,"errorConfiguredIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=F(s.prototype,"loadingAvailableIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=F(s.prototype,"loadingConfiguredIntegrations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=F(s.prototype,"selectedAPI",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=F(s.prototype,"selectedAPIVersion",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=F(s.prototype,"selectedService",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=F(s.prototype,"selectedServiceName",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=F(s.prototype,"selectedIntegration",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),S=F(s.prototype,"selectedRule",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=F(s.prototype,"category",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=F(s.prototype,"isAdding",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=F(s.prototype,"integrationInstance",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=F(s.prototype,"integrationClass",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=F(s.prototype,"loadingIntegrationInstanceAndClass",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F(s.prototype,"initializeApiObservabilityStore",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"initializeApiObservabilityStore"),s.prototype),F(s.prototype,"clearStore",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"clearStore"),s.prototype),F(s.prototype,"setActiveCategory",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveCategory"),s.prototype),F(s.prototype,"setSelectedIntegration",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedIntegration"),s.prototype),F(s.prototype,"setActiveService",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveService"),s.prototype),F(s.prototype,"setSelectedServiceName",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedServiceName"),s.prototype),F(s.prototype,"setActiveRule",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveRule"),s.prototype),F(s.prototype,"setSelectedAPI",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPI"),s.prototype),F(s.prototype,"setSelectedAPIVersion",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPIVersion"),s.prototype),F(s.prototype,"setSelectedRule",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedRule"),s.prototype),F(s.prototype,"setSelectedService",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedService"),s.prototype),F(s.prototype,"updateLoadingAvailableIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingAvailableIntegrations"),s.prototype),F(s.prototype,"updateLoadingConfiguredIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingConfiguredIntegrations"),s.prototype),F(s.prototype,"updateErrorAvailableIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorAvailableIntegrations"),s.prototype),F(s.prototype,"updateErrorConfiguredIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorConfiguredIntegrations"),s.prototype),F(s.prototype,"updateAvailableIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateAvailableIntegrations"),s.prototype),F(s.prototype,"updateSelectedAPIVersion",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateSelectedAPIVersion"),s.prototype),F(s.prototype,"getAvailableIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"getAvailableIntegrations"),s.prototype),F(s.prototype,"getSelectedIntegration",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedIntegration"),s.prototype),F(s.prototype,"getSelectedAPIVersion",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPIVersion"),s.prototype),F(s.prototype,"updateConfiguredIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateConfiguredIntegrations"),s.prototype),F(s.prototype,"updateCategoryIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateCategoryIntegrations"),s.prototype),F(s.prototype,"getConfiguredIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"getConfiguredIntegrations"),s.prototype),F(s.prototype,"getCategoryIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"getCategoryIntegrations"),s.prototype),F(s.prototype,"updateIsHydrating",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsHydrating"),s.prototype),F(s.prototype,"updateIsAdding",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsAdding"),s.prototype),F(s.prototype,"findIntegrationsByCategory",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"findIntegrationsByCategory"),s.prototype),F(s.prototype,"fetchAvailableIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchAvailableIntegrations"),s.prototype),F(s.prototype,"fetchConfiguredIntegrations",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchConfiguredIntegrations"),s.prototype),F(s.prototype,"fetchIntegrationInstance",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchIntegrationInstance"),s.prototype),F(s.prototype,"setLoadingIntegrationInstancesAndClass",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingIntegrationInstancesAndClass"),s.prototype),F(s.prototype,"updateIntegrationInstance",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationInstance"),s.prototype),F(s.prototype,"updateIntegrationClass",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationClass"),s.prototype),F(s.prototype,"resetPowerUpVariables",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"resetPowerUpVariables"),s.prototype),F(s.prototype,"removeIntegrationInstances",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"removeIntegrationInstances"),s.prototype),s)},"./integrations/api-observability/stores/fallbackCategoryIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fallbackCategoryIntegrations:function(){return s}});const s=[{id:"api_gateway_aws",categories:["Deployment"],name:"AWS API Gateway",icon:"pm-icon-aws-api-gateway",icon_url:"https://static.getpostman.com/assets/aws_api_gateway.png",dark_icon_url:null,description:"Stay on top of your API Deployments",extended_description:"Observe deployments inside Postman",integrations:{api_gateway_aws:{api_gateway_aws:{name:"Observe API deployments",description:"Connect to AWS API Gateway to view deployments from across all stages, logs and metrics inside Postman",categories:["Deployment"],summary:"",client_categories:["api-gateway-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./integrations/ci-cd/CircleCIHelper.js":function(e,t,n){"use strict";n.r(t),n.d(t,{translateToValidSlug:function(){return a}});var s=n("./node_modules/lodash/lodash.js");function a(e){const t=s.split(e,"/"),n=s.first(t);return"bb"===n?`bitbucket/${s.join(s.slice(t,1),"/")}`:"gh"===n?`github/${s.join(s.slice(t,1),"/")}`:e}},"./integrations/ci-cd/components/AddIntegrationApiVersionSelectorForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/StoreManager.js"),o=n("./js/stores/IntegrationsStore.js"),l=n("./integrations/constants/integrationsConstants.ts"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./js/services/NavigationService.js"),u=n("./node_modules/prop-types/index.js"),p=n.n(u),g=n("./integrations/navigation/constants.js"),m=n("./integrations/utils/CommonHelperMethods.ts"),h=n("./js/stores/ActiveWorkspaceSessionStore.js"),f=n("./node_modules/lodash/lodash.js");let b=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(o.default);const{rule:t,service:n,classId:s,serviceId:a}=this.props,i=t||s,l=n||a;this.integrationClass=i,this.integrationService=l,this.handleAddIntegration=this.handleAddIntegration.bind(this)}handleAddIntegration(){const e=f.get(this.store,"selectedEntity.value"),t={wid:f.get(this.store,"selectedWorkspace.value"),apiId:e},n={rule:this.integrationClass,service:this.integrationService},s={originalTabId:(0,r.resolveStoreInstance)(h.default).activeEditor};(0,m.getSanitizedRouteAndQueryParamsForV10APIUrls)(t,n,e).then((([e,t])=>{d.default.transitionTo(g.V10_API_ADD_CI_INTEGRATION_NAV_IDENTIFIER,e,t,{additionalContext:s})})).finally((()=>{this.store.resetAddIntegrationDependencies(),this.store.updateIsAdding(!1)}))}render(){const e=f.get(this.store,"selectedWorkspace.value"),t=f.get(this.store,"selectedEntity.value"),n=f.get(this.store,"selectedEntityVersion.value"),s=!f.every([e,t,n],Boolean);return a.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},a.createElement(c.WorkspaceSelector,{selectedWorkspace:e,description:"Select the workspace your API is in"}),a.createElement(c.EntitySelector,{id:"api-schemas",entity:l.entityTypes.APIS,workspaceId:e,title:"Select API",description:"Select the API to connect",rule:this.integrationClass,mode:l.INTEGRATION_FORM_MODE.ADD,disabled:!e}),a.createElement(c.EntitySelector,{id:"api-schema-versions",entity:l.entityTypes.API_VERSIONS,apiId:t,title:"Select API Version",description:"Select API version to connect",rule:this.integrationClass,mode:l.INTEGRATION_FORM_MODE.ADD,disabled:!t}),a.createElement(c.AddIntegrationActions,{disabled:s,service:this.integrationService,rule:this.integrationClass,handleAddIntegration:this.handleAddIntegration}))}})||s;b.propTypes={rule:p().string,service:p().string,classId:p().string,serviceId:p().string}},"./integrations/ci-cd/components/Button/AddIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./js/components/base/LoadingIndicator.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),p=n("./js/services/NavigationService.js"),g=n("./appsdk/workbench/TabService.js"),m=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=n("./js/modules/services/AnalyticsService.js"),f=n("./node_modules/classnames/index.js"),b=n.n(f),v=n("./integrations/navigation/constants.js"),I=n("./node_modules/lodash/lodash.js");function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S.apply(this,arguments)}let y=(0,m.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,d.resolveStoreInstance)(u.default),this.integrationsStore=(0,d.resolveStoreInstance)(c.default),this.state={isProcessing:!1},this.handleProcessing=this.handleProcessing.bind(this),this.getExistingIntegrations=this.getExistingIntegrations.bind(this)}async getExistingIntegrations(e){const t=["continuous-integration"];await o.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,t).then((e=>{if(e[t[0]].length>0)throw e})).catch((e=>{throw pm.logger.error("Something went wrong. Please try again."),e}))}handleProcessing(e){this.setState({isProcessing:e})}render(){const{disabled:e,payload:t,workspaceId:n,service:s,useInstanceApi:c,alignLeft:d,isBrowseIntegration:u,originalTabId:m,...f}=this.props;let y=t.rule||t.classId,_=I.get(t,"variables.api_id")||I.get(t,"inputs.api_id"),E=I.get(t,"executor")||I.get(t,"inputs.apiversion");return a.createElement("div",{className:b()("integrations-add-actions__button--container",{"align-left":d})},a.createElement(i.Button,S({type:"primary",className:"integrations-add-actions__button--proceed",disabled:e||this.store.isAdding||this.state.isProcessing,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:async e=>{this.handleProcessing(!0);try{let e;u&&await this.getExistingIntegrations(E),e=c?l.default.createIntegrationInstance(t.classId,t.name,t.inputs):o.default.createIntegration(n||null,t),e.then((e=>{if(200===e.status&&(I.get(e,"body.model_id")||I.get(e,"body.data.id"))){pm.toasts.success("Added a new integration");const t=I.get(e,"body.model_id")||I.get(e,"body.data.id");if(this.integrationsStore.setRuleSpecificTeamIntegrations(y,null),this.integrationsStore.refetchTeamIntegrations(),this.store.fetchIntegrationInstance("apiversion",E),u){if(h.default.addEventV2({category:"integrations",action:y+"_created_integration",label:"team_integrations_create_forms",value:1}),this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;p.default.transitionTo(e,t,n)}else p.default.transitionTo(v.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:s,ruleId:y});this.integrationsStore.resetAddIntegrationDependencies()}else if(h.default.addEventV2({category:"ci_integrations",action:"click",label:"api_builder_completed",type:{rule:y},value:1}),g.default.closeByRoute(v.V10_API_ADD_CI_INTEGRATION_URL,{apiId:_}),this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;p.default.transitionTo(e,t,n)}else{const e=v.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,n={apiId:_,integrationId:t},s={additionalContext:{isIntegrationAdded:!0},...m&&{tabOptions:{openIn:m}}};p.default.transitionTo(e,n,{},s)}}else pm.toasts.error("Something went wrong while adding a new integration.");this.handleProcessing(!1)})).catch((e=>{this.handleProcessing(!1),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration."),pm.logger.error("Something went wrong while adding a new integration",e)}))}catch(e){this.handleProcessing(!1),pm.toasts.error("The integration already exists for the provided API version. Please select a different version or delete the existing integration!")}}},f),this.state.isProcessing?a.createElement(r.default,null):this.props.children))}})||s},"./integrations/ci-cd/components/Button/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n("../../node_modules/react/index.js"),a=n("./appsdk/workbench/TabService.js"),i=n("./integrations/navigation/constants.js"),r=n("./js/components/base/Buttons.js"),o=n("./node_modules/classnames/index.js"),l=n.n(o),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./api-dev/util/navigationHelper.js"),p=n("./integrations/ci-cd/constants.ts");function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},g.apply(this,arguments)}class m extends s.Component{constructor(e){super(e),this.store=(0,c.resolveStoreInstance)(d.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,...o}=this.props;return s.createElement("div",{className:`${this.props.isBrowseIntegration?l()("integrations-add-actions__button--container",{"align-left":n}):"cancel-button"}`},s.createElement(r.Button,g({className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{a.default.closeByRoute(i.V10_API_ADD_CI_INTEGRATION_URL,{apiId:this.props.apiId}),setTimeout((()=>{(0,u.transitionToAPI)({apiId:this.props.apiId},{view:p.TEST_AND_AUTOMATION_VIEW})}),0),this.store.resetAddIntegrationDependencies()}},o),"Cancel"))}}},"./integrations/ci-cd/components/CIStatusBadge.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),o=n("./integrations/ci-cd/constants.ts"),l=n("./node_modules/lodash/lodash.js");const c=e=>{const{status:t}=e,n=l.lowerCase(t)||"-",i=l.get(o.BUILD_STATUS_TO_BADGE_TYPE_MAP,n,o.AETHER_BADGE_STATUS.NEUTRAL);return s.createElement(a.default,{status:i,text:n})};c.propTypes={status:r().string.isRequired},t.default=c},"./integrations/ci-cd/components/CircleCIFormData.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),l=n("./integrations/ci-cd/services/Circleci.js"),c=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./js/stores/StoreManager.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./integrations/constants/integrationsConstants.ts"),f=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),b=n("./integrations/ci-cd/constants.ts"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),I=n("./integrations/ci-cd/CircleCIHelper.js"),S=n("./node_modules/lodash/lodash.js");const{UNABLE_TO_FETCH_PROJECTS:y,FETCH_PROJECTS_AUTHENTICATION_ERROR:_,UNABLE_TO_FETCH_CLASS_DATA:E}=b.ERRORS;let A=(0,f.observer)(s=class extends a.Component{constructor(e){super(e),this.state={selectedWorkspace:{},selectedApi:{},selectedApiVersion:{},selectedProject:{},projects:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorToken:"",integrationId:null},this.debouncedFetchProjects=S.debounce(this.fetchProjects.bind(this),1e3),this.store=(0,p.resolveStoreInstance)(u.default),this.setProjectInputClassData=this.setProjectInputClassData.bind(this),this.getInitialState=this.getInitialState.bind(this),this.addToast=this.props.addToast,this.addProjectSlugToCurrentStateData=this.addProjectSlugToCurrentStateData.bind(this)}componentDidMount(){const{classData:e,classId:t}=this.props;this.setState(this.getInitialState()),S.isEmpty(e)?d.default.fetchIntegrationClassDetails(t).then((e=>{const t=S.get(e,"body.data");200!==e.status||S.isEmpty(t)?(pm.logger.error("CircleCI Service ~ Error in fetching class details",e,{errorContext:b.errorContext}),this.addToast({description:E,status:"error"})):this.setProjectInputClassData(t)})).catch((e=>{pm.logger.error("CircleCI Service ~ Unknown error in fetching class details",e,{errorContext:b.errorContext}),this.addToast({description:E,status:"error"})})):this.setProjectInputClassData(e)}getInitialState(){const{defaultName:e,defaultCircleCIToken:t,defaultSelectedProjectSlug:n}=this.props;return{nickname:e,circleCIToken:t,selectedProjectSlug:(0,I.translateToValidSlug)(n)}}addProjectSlugToCurrentStateData(){return{...this.state,selectedProjectSlug:(0,I.translateToValidSlug)(S.get(this.state,["selectedProject","value"],""))}}setProjectInputClassData(e){const t=S.get(e,"inputs"),{defaultCircleCIToken:n}=this.props,s=S.first(S.filter(t,{key:"project_slug"}));this.setState({projectClassInputData:s},(()=>{n&&this.fetchProjects()}))}fetchProjects(){const{circleCIToken:e,projectClassInputData:t}=this.state,{integrationId:n,defaultSelectedProjectSlug:s}=this.props,a={circleci_token:e};this.setState({loadingProjects:!0,errorProjects:""}),l.default.fetchProjects(a,t,n).then((e=>{let t={};if(s){const n=(0,I.translateToValidSlug)(s);t=S.find(e,{value:n})||{}}this.setState({projects:e,loadingProjects:!1,errorProjects:"",selectedProject:t})})).catch((e=>{const t=S.get(e,"error.details.statusCode");let n=y;!t||401!==t&&403!==t||(n=_),this.setState({loadingProjects:!1,errorProjects:n}),pm.logger.error("CircleCIFormData ~ "+n,e,{errorContext:b.errorContext})}))}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:s,errorToken:o,errorProjects:l,circleCIToken:d}=this.state,{optionalFormComponents:u,renderDisabledApiApiversionSelector:p,apiId:g,apiVersionId:m,renderApiApiversionSelector:f,classId:b}=this.props,I=g||this.store.selectedEntity&&this.store.selectedEntity.value,y=m||this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,_=this.store.selectedWorkspace&&this.store.selectedWorkspace.value,E={classId:b,name:e,inputs:{api_id:I,apiversion:y,circleci_token:d,project_slug:S.get(s,"value","")}},A=S.get(E,"name")&&S.every(S.values(S.get(E,"inputs",{})),Boolean);return a.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},a.createElement(i.NicknameFieldSegment,{id:"circleci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),p&&a.createElement(c.default,{apiId:g,apiVersionId:m}),f&&a.createElement(a.Fragment,null,a.createElement(i.WorkspaceSelector,{description:"Select the workspace your API is in"}),a.createElement(i.EntitySelector,{id:"api-schemas",entity:h.entityTypes.APIS,workspaceId:_,title:"Select API",description:"Select the API to connect",rule:b,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),a.createElement(i.EntitySelector,{id:"api-schema-versions",entity:h.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:b,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity})),a.createElement(i.SensitiveFieldSegment,{title:"API Key",description:"Enter CircleCI token or ",customLink:a.createElement(r.default,{extUrl:"https://go.pstmn.io/docs-circleci-apikey"},"generate one here"),error:o,value:d,onChange:e=>{this.setState({circleCIToken:e.trim(),selectedProject:"",projects:[]},this.debouncedFetchProjects)}}),a.createElement(i.SelectSegmentV2,{title:"Choose your CI project",description:"If your project is not listed, please make sure you follow it on CircleCI.",label:"Select",disabled:n||!S.isEmpty(l),options:t,value:s,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:l,loading:n,handleRetry:this.debouncedFetchProjects}),u&&u(A,E,(0,v.isFormUpdated)(this.getInitialState(),this.addProjectSlugToCurrentStateData())))}})||s;A.propTypes={classData:m().object,defaultCircleCIToken:m().string,defaultSelectedProjectSlug:m().string,defaultName:m().string,integrationId:m().string,apiId:m().string,apiVersionId:m().string,classId:m().string.isRequired,renderDisabledApiApiversionSelector:m().bool,renderApiApiversionSelector:m().bool,optionalFormComponents:m().func},t.default=(0,o.default)(A)},"./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),o=n("./node_modules/prop-types/index.js"),l=n.n(o),c=n("./node_modules/lodash/lodash.js");class d extends s.Component{constructor(e){super(e),this.state={selectedApi:{},selectedApiVersion:{}}}componentDidMount(){const{addToast:e,apiId:t,apiVersionId:n}=this.props;r.default.fetchAPIMeta(t).then((e=>{this.setState({selectedApi:{id:c.get(e,"id"),name:c.get(e,"name")}})})).catch((t=>{pm.logger.error("Error occurred while fetching APIs",t),e({title:"Error",description:"Something went wrong while fetching APIs, please try again",status:"error"})})),r.default.fetchAPIVersionMeta(t,n).then((e=>{this.setState({selectedApiVersion:{id:c.get(e,"versionId"),name:c.get(e,"name")}})})).catch((t=>{pm.logger.error("Error occurred while fetching API versions",t),e({title:"Error",description:"Something went wrong while fetching API versions, please try again",status:"error"})}))}render(){const{selectedApi:e,selectedApiVersion:t}=this.state;return s.createElement(s.Fragment,null,s.createElement(a.SelectSegment,{disabled:!0,id:"integrations-selected-api",title:"Selected API",description:"The selected API is connected with this integration",selectedTarget:e,filterItems:[e],initialLabel:"Loading API..."}),s.createElement(a.SelectSegment,{disabled:!0,id:"integrations-selected-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",selectedTarget:t,filterItems:[t],initialLabel:"Loading API version..."}))}}d.propTypes={apiId:l().string.isRequired,apiVersionId:l().string.isRequired},t.default=(0,i.default)(d)},"./integrations/ci-cd/components/GithubCIFormData.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),r=n("./integrations/ci-cd/services/GithubCI.js"),o=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),u=n("./node_modules/lodash/lodash.js");class p extends s.Component{constructor(e){super(e),this.fetchWorkspace=()=>{const{addToast:e,oAuthTokenId:t,defaultDomain:n}=this.props;return this.setState({loadingWorkspaces:!0,errorWorkspace:""}),r.default.fetchWorkspaces(t,n).then((e=>{this.setState({workspaces:e,loadingWorkspaces:!1,errorWorkspace:""})})).catch((t=>{const n="401"==t.status?": "+u.get(t,"error.message"):"";this.setState({loadingWorkspaces:!1,errorWorkspace:"Error occurred while fetching GitHub organizations"}),pm.logger.error("GitHubCIFormData ~ Error occurred while fetching GitHub organizations",t),e({title:"Error",description:"Error occurred while fetching GitHub organizations"+n,status:"error"})}))},this.fetchRepositories=()=>{const{selectedWorkspace:e}=this.state,{addToast:t,oAuthTokenId:n,defaultDomain:s}=this.props,a={tokenId:n,domain:s,workspace:e};this.setState({loadingProjects:!0,errorProjects:""}),r.default.fetchRepositories(a).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{const n="401"==e.status?": "+u.get(e,"error.message"):"";this.setState({loadingProjects:!1,errorProjects:"Error occurred while fetching repositories"}),pm.logger.error("GitHubCiFormData ~ Error occurred while fetching repositories",e),t({title:"Error",description:"Error occurred while fetching repositories"+n,status:"error"})}))},this.fetchWorkspace=this.fetchWorkspace.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.getInitialState=this.getInitialState.bind(this),this.state={...this.getInitialState(),projects:[],workspaces:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorWorkspaces:"",integrationId:null,rule:null}}componentDidMount(){const{defaultSelectedProject:e}=this.props;this.fetchWorkspace(),e&&this.fetchRepositories()}getInitialState(){const{defaultSelectedProject:e,defaultSelectedWorkspace:t,defaultName:n}=this.props;return{nickname:n,selectedProject:e,selectedWorkspace:t}}getPayload(){const{nickname:e,selectedProject:t,selectedWorkspace:n}=this.state,{rule:s,apiId:a,apiVersionId:i,oAuthTokenId:r,defaultDomain:o}=this.props,l={classId:s,name:e,inputs:{api_id:a,apiversion:i,repository:t,workspace:n,oauth_token_id:r}};return o&&(l.inputs.domain=o),l}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:i,errorProjects:r,workspaces:l,selectedWorkspace:c,loadingWorkspaces:p,errorWorkspaces:g}=this.state,{optionalFormComponents:m,renderDisabledApiApiversionSelector:h,apiId:f,apiVersionId:b}=this.props,v=this.getPayload(),I=e&&u.every(u.values(u.get(v,"inputs",{})),Boolean);return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(a.NicknameFieldSegment,{id:"githubci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),h&&s.createElement(o.default,{apiId:f,apiVersionId:b}),s.createElement(a.SelectSegmentV2,{title:"Choose your organization",description:"Select the GitHub organization",label:"Select",disabled:p||!u.isEmpty(g),options:l,value:{label:c,value:c},onTargetSelect:e=>{this.setState({selectedWorkspace:u.get(e,"value"),selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No organizations found",error:g,loading:p,handleRetry:this.fetchWorkspace}),s.createElement(a.SelectSegmentV2,{title:"Choose your repository",description:"Select the repository where the GitHub Actions workflows are configured",label:"Select",disabled:n||!u.isEmpty(r),options:t,value:{label:i,value:i},onTargetSelect:e=>{this.setState({selectedProject:u.get(e,"value")})},noOptionsForDropdown:"No repositories found",error:r,loading:n,handleRetry:this.fetchRepositories}),m&&m(I,v,(0,d.isFormUpdated)(this.getInitialState(),this.state)))}}p.propTypes={oAuthTokenId:c().string.isRequired,apiId:c().string.isRequired,apiVersionId:c().string.isRequired,rule:c().string.isRequired,optionalFormComponents:c().func,renderDisabledApiApiversionSelector:c().bool,defaultSelectedProject:c().string,defaultSelectedWorkspace:c().string,defaultName:c().string,defaultDomain:c().string},t.default=(0,i.default)(p)},"./integrations/ci-cd/components/GitlabCIFormData.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),r=n("./integrations/ci-cd/services/GitLabCI.js"),o=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),u=n("./node_modules/lodash/lodash.js");class p extends s.Component{constructor(e){super(e),this.fetchWorkspace=()=>{const{addToast:e,oAuthTokenId:t,defaultDomain:n}=this.props;return this.setState({loadingWorkspaces:!0,errorWorkspace:""}),r.default.fetchWorkspaces(t,n).then((e=>{this.setState({workspaces:e,loadingWorkspaces:!1,errorWorkspace:""})})).catch((t=>{this.setState({loadingWorkspaces:!1,errorWorkspace:"Error occured while fetching Gitlab workspaces"}),pm.logger.error("GitlabCiFormData ~ Error occurred while fetching Gitlab workspaces",t),e({title:"Error",description:"Error occurred while fetching Gitlab workspaces",status:"error"})}))},this.fetchRepositories=()=>{const{selectedWorkspace:e}=this.state,{addToast:t,oAuthTokenId:n,defaultDomain:s}=this.props,a={tokenId:n,domain:s,workspaceId:u.get(e,"value.workspaceId")};this.setState({loadingProjects:!0,errorProjects:""}),r.default.fetchRepositories(a).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.logger.error("GitlabCiFormData ~ Error occurred while fetching projects",e),t({title:"Error",description:"Error occurred while fetching projects",status:"error"})}))},this.state={...this.getInitialState(),projects:[],workspaces:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorWorkspaces:"",integrationId:null,rule:null},this.fetchWorkspace=this.fetchWorkspace.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{defaultSelectedProject:e}=this.props;this.fetchWorkspace(),u.isEmpty(e)||this.fetchRepositories()}getInitialState(){const{defaultSelectedProject:e,defaultSelectedWorkspace:t,defaultName:n}=this.props;return{nickname:n,selectedProject:e,selectedWorkspace:t}}getPayload(){const{nickname:e,selectedProject:t,selectedWorkspace:n}=this.state,{rule:s,apiId:a,apiVersionId:i,oAuthTokenId:r,defaultDomain:o}=this.props,l={classId:s,name:e,inputs:{api_id:a,apiversion:i,project_id:u.toString(u.get(t,"value.repoId","")),workspace_id:u.toString(u.get(n,"value.workspaceId","")),project_name:u.get(t,"value.repoName",""),workspace_name:u.get(n,"value.workspaceName",""),oauth_token_id:r}};return o&&(l.inputs.domain=o),l}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:i,errorProjects:r,workspaces:l,selectedWorkspace:c,loadingWorkspaces:p,errorWorkspaces:g}=this.state,{optionalFormComponents:m,renderDisabledApiApiversionSelector:h,apiId:f,apiVersionId:b}=this.props,v=this.getPayload(),I=e&&u.every(u.values(u.get(v,"inputs",{})),Boolean);return s.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},s.createElement(a.NicknameFieldSegment,{id:"gitlabci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),h&&s.createElement(o.default,{apiId:f,apiVersionId:b}),s.createElement(a.SelectSegmentV2,{title:"Choose your workspace",description:"Select the Gitlab workspace",label:"Select",disabled:p||!u.isEmpty(g),options:l,value:c,onTargetSelect:e=>{this.setState({selectedWorkspace:e,selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No workspaces found",error:g,loading:p,handleRetry:this.fetchWorkspace}),s.createElement(a.SelectSegmentV2,{title:"Choose your CI project",description:"Select the Gitlab repository where the pipeline is configured",label:"Select",disabled:n||!u.isEmpty(r),options:t,value:i,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:r,loading:n,handleRetry:this.fetchRepositories}),m&&m(I,v,(0,d.isFormUpdated)(this.getInitialState(),this.state)))}}p.propTypes={oAuthTokenId:c().string.isRequired,apiId:c().string.isRequired,apiVersionId:c().string.isRequired,rule:c().string.isRequired,optionalFormComponents:c().func,renderDisabledApiApiversionSelector:c().bool,defaultSelectedProject:c().object,defaultSelectedWorkspace:c().object,defaultName:c().string,defaultDomain:c().string},t.default=(0,i.default)(p)},"./integrations/ci-cd/components/Jenkins/constants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{BUILDS_STATUS:function(){return I},BUILDS_TABLE_COLUMNS:function(){return y},BUILDS_TABLE_COLUMNS_WITHOUT_BRANCH:function(){return _},ON_DEMAND_TRIGGER_ACTIONS:function(){return C},PROJECT_TYPES:function(){return v},RULE:function(){return b},SERVICE_ACTIONS:function(){return A},SERVICE_ACTION_PAYLOAD:function(){return w},STATUS_BUILD_IN_PROGRESS:function(){return S},getMultiBranchProjectTableColumns:function(){return E}});var s=n("../../node_modules/react/index.js"),a=n("./appsdk/components/link/Link.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-console-stroke.js"),o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("./integrations/ci-cd/components/CIStatusBadge.js"),c=n("./integrations/ci-cd/timeUtils.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./js/services/NavigationService.js"),p=n("./integrations/navigation/constants.js"),g=n("./integrations/ci-cd/helpers.js"),m=n("./node_modules/lodash/lodash.js");const h=o.default.div`
    display: flex;
    align-items: center;
  `,f=o.default.div`
    display: flex;
    align-items: center;
    margin-right: var(--spacing-s);
  `,b="jenkins_ci",v={FREESTYLE:"FreeStyleProject",WORKFLOW:"WorkflowJob",MULTI_BRANCH_PIPELINE:"WorkflowMultiBranchProject"},I=["SUCCESS","FAILURE","BUILDING","UNSTABLE","NOT BUILT","ABORTED"],S="BUILDING",y=[{Header:"Name",accessor:e=>({buildName:m.get(e,"name"),buildUrl:m.get(e,"url"),rowData:e}),Cell:({value:e})=>{const{buildName:t,buildUrl:n,rowData:o}=e;return s.createElement("div",{id:(0,g.getRowIdForBuildsTable)(o)},s.createElement(h,null,s.createElement(f,null,s.createElement(r.default,{color:"content-color-primary"})),s.createElement(a.default,{to:n,target:"_blank"},s.createElement(i.default,{type:"link-default",isExternal:!0,isTruncated:!0},t))))}},{Header:"Branch",accessor:"branch",Cell:e=>s.createElement(i.default,{isTruncated:!0},e.value)},{Header:"Timestamp",accessor:"timestamp",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Duration",accessor:"duration",cellWidth:"100px",Cell:e=>`${c.default.getFormattedDuration(e.value)}`},{Header:"Status",accessor:"status",cellWidth:"200px",Cell:e=>s.createElement(l.default,{status:m.get(e,"value")}),align:"center"}],_=m.reject(y,{Header:"Branch"}),E=e=>[{Header:"",accessor:"empty",Cell:e=>s.createElement(s.Fragment,null),disableSortBy:!0,cellWidth:"32px"},{Header:"Branch",accessor:"name",Cell:t=>s.createElement(a.default,{onClick:()=>{const n=e.integration,s=n.rule;d.default.addEventV2({category:"ci-integration",action:"click-all-builds",label:s,value:1}),u.default.transitionTo(p.V10_API_CI_INTEGRATION_BUILDS_NAV_IDENTIFIER,{apiId:n.variables.api_id,integrationId:n.id},{},{additionalContext:{branch:t.value}})}},s.createElement(i.default,{type:"link-default",isExternal:!0,isTruncated:!0},t.value))},{Header:"Status",accessor:"status",Cell:e=>s.createElement(l.default,{status:m.get(e,"value")}),align:"center"},{Header:"Last runtime",accessor:"lastTimestamp",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last success",accessor:"lastSuccess",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last failure",accessor:"lastFailure",Cell:e=>`${c.default.timeSince(e.value)}`},{Header:"Last duration",accessor:"lastDuration",Cell:e=>`${c.default.getFormattedDuration(e.value)}`}],A={VALIDATE_USER:"validateUser",GET_PROJECTS:"getProjects",GET_PROJECT:"getProject",GET_NEWMAN_CONFIG:"getNewmanConfig"},w={type:"handleActions"},C={GET_PROJECTS:"get_projects",GET_PROJECT:"get_project",GET_BUILDS:"get_builds",TRIGGER_BUILD:"trigger_build"}},"./integrations/ci-cd/components/TravisCIFormData.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),l=n("./integrations/ci-cd/services/TravisCI.js"),c=n("./integrations/ci-cd/components/DisabledApiAndApiVersionSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./js/stores/StoreManager.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./integrations/constants/integrationsConstants.ts"),f=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),b=n("./integrations/ci-cd/constants.ts"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),I=n("./node_modules/lodash/lodash.js");const{UNABLE_TO_FETCH_PROJECTS:S,FETCH_PROJECTS_AUTHENTICATION_ERROR:y,UNABLE_TO_FETCH_CLASS_DATA:_}=b.ERRORS;let E=(0,f.observer)(s=class extends a.Component{constructor(e){super(e);const{addToast:t}=e;this.state={...this.getInitialState(),selectedWorkspace:{},selectedApi:{},selectedApiVersion:{},selectedProject:{},projects:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorToken:"",integrationId:null},this.debouncedFetchProjects=I.debounce(this.fetchProjects.bind(this),1e3),this.store=(0,p.resolveStoreInstance)(u.default),this.setProjectInputClassData=this.setProjectInputClassData.bind(this),this.getInitialState=this.getInitialState.bind(this),this.addToast=t}componentDidMount(){const{classData:e,classId:t}=this.props;I.isEmpty(e)?d.default.fetchIntegrationClassDetails(t).then((e=>{const t=I.get(e,"body.data");200!==e.status||I.isEmpty(t)?(pm.logger.error("TravisCI Service ~ Error in fetching class details",e,{errorContext:b.errorContext}),this.addToast({description:_,status:"error"})):this.setProjectInputClassData(t)})).catch((e=>{pm.logger.error("TravisCI Service ~ Unknown error in fetching class details",e,{errorContext:b.errorContext}),this.addToast({description:_,status:"error"})})):this.setProjectInputClassData(e)}getInitialState(){const{defaultName:e,defaultTravisCIToken:t,defaultSelectedProjectId:n}=this.props;return{nickname:e,travisCIToken:t,selectedProjectId:n}}setProjectInputClassData(e){const t=I.get(e,"inputs"),{defaultTravisCIToken:n}=this.props,s=I.first(I.filter(t,{key:"repository_id"}));this.setState({projectClassInputData:s},(()=>{n&&this.fetchProjects()}))}fetchProjects(){const{travisCIToken:e,projectClassInputData:t}=this.state,{integrationId:n,defaultSelectedProjectId:s}=this.props,a={travisci_token:e};this.setState({loadingProjects:!0,errorProjects:""}),l.default.fetchProjects(a,t,n).then((e=>{let t={};s&&(t=I.find(e,{value:s})||{}),this.setState({projects:e,loadingProjects:!1,errorProjects:"",selectedProject:t,selectedProjectId:t.value})})).catch((e=>{const t=I.get(e,"error.details.statusCode");let n=S;!t||401!==t&&403!==t||(n=y),this.setState({loadingProjects:!1,errorProjects:n}),pm.logger.error("TravisCIFormData ~ "+n,e,{errorContext:b.errorContext})}))}render(){const{nickname:e,projects:t,loadingProjects:n,selectedProject:s,errorToken:o,errorProjects:l,travisCIToken:d}=this.state,{optionalFormComponents:u,renderDisabledApiApiversionSelector:p,apiId:g,apiVersionId:m,renderApiApiversionSelector:f,classId:b}=this.props,S=g||this.store.selectedEntity&&this.store.selectedEntity.value,y=m||this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,_=this.store.selectedWorkspace&&this.store.selectedWorkspace.value,E={classId:b,name:e,inputs:{api_id:S,apiversion:y,travisci_token:d,repository_name:I.get(s,"label",""),repository_id:I.get(s,"value","")}},A=I.get(E,"name")&&I.every(I.values(I.get(E,"inputs",{})),Boolean);return a.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},a.createElement(i.NicknameFieldSegment,{id:"travisci-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),p&&a.createElement(c.default,{apiId:g,apiVersionId:m}),f&&a.createElement(a.Fragment,null,a.createElement(i.WorkspaceSelector,{description:"Select the workspace your API is in"}),a.createElement(i.EntitySelector,{id:"api-schemas",entity:h.entityTypes.APIS,workspaceId:_,title:"Select API",description:"Select the API to connect",rule:b,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),a.createElement(i.EntitySelector,{id:"api-schema-versions",entity:h.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:b,mode:h.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity})),a.createElement(i.SensitiveFieldSegment,{title:"API Key",description:"Enter Travis CI token or ",customLink:a.createElement(r.default,{extUrl:"https://go.pstmn.io/docs-travisci-apikey"},"generate one here"),error:o,value:d,onChange:e=>{this.setState({travisCIToken:e.trim(),selectedProject:"",projects:[]},this.debouncedFetchProjects)}}),a.createElement(i.SelectSegmentV2,{title:"Choose your CI project",label:"Select",disabled:n||!I.isEmpty(l),options:t,value:s,onTargetSelect:e=>{this.setState({selectedProject:e,selectedProjectId:e.value})},noOptionsForDropdown:"No projects found",error:l,loading:n,handleRetry:this.debouncedFetchProjects}),u&&u(A,E,(0,v.isFormUpdated)(this.getInitialState(),this.state)))}})||s;E.propTypes={classData:m().object,defaultTravisCIToken:m().string,defaultSelectedProjectId:m().string,defaultName:m().string,integrationId:m().string,apiId:m().string,apiVersionId:m().string,classId:m().string.isRequired,renderDisabledApiApiversionSelector:m().bool,renderApiApiversionSelector:m().bool,optionalFormComponents:m().func},t.default=(0,o.default)(E)},"./integrations/ci-cd/helpers.js":function(e,t,n){"use strict";n.r(t),n.d(t,{convertNewmanRunMetrics:function(){return I},getActiveBranchNameFromApiId:function(){return A},getBuildFilterStatus:function(){return f},getCollectionRunStatusSummary:function(){return v},getFilterInlineLabel:function(){return _},getFilteredBuilds:function(){return b},getIconForCIIntegration:function(){return E},getProjectName:function(){return S},getRowIdForBuildsTable:function(){return C},getSanitizedSelectedBranchName:function(){return w},getUniqueItemsFromBuilds:function(){return y}});var s=n("../../node_modules/react/index.js"),a=n("./integrations/ci-cd/constants.ts"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-bitbucket.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-travisci.js"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-gitlab.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-github.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-circleci.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-jenkins.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-brandLogo-devops.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),g=n("./js/stores/StoreManager.js"),m=n("./api-dev/stores/APIListStore.js"),h=n("./node_modules/lodash/lodash.js");function f(e){return h.get(a.BUILD_STATUS_TO_FILTER_STATUS_MAP,h.lowerCase(e),a.BUILD_FILTER_STATUS.DEFAULT)}function b(e,t,n){return h.filter(e,(e=>!(!h.isEmpty(t)&&!h.includes(t,e.branch))&&!(!h.isEmpty(n)&&!h.includes(n,e.filterStatus))))}function v(e){if(h.isEmpty(e))return{status:"neutral",text:"N/A"};let t=h.size(e),n=h(e).filter((e=>"critical"===h.get(e,"status.status"))).size();return 0===n?{status:"success",text:`${t}/${t} passed`}:{status:"critical",text:`${n}/${t} failed`}}function I(e){let t=h.get(e,"runOverview"),n=h.get(t,"totalDataReceivedInBytes",""),s=h.get(t,"averageResponseTimeInMiliseconds","")+" ms",a=h.get(t,"runDurationInMiliseconds","");n=n<=1024?"1 KB":h.round(n/1024)+" KB",a<1e3?a+=" ms":a=h.round(a/1e3)+" s";const i={name:h.get(t,"collectionName","Collection"),data:n,internalLink:h.get(t,"newmanRunUrl",""),responseTime:s,duration:a,metrics:[{name:"Iterations",status:{totalCount:h.get(t,"statistics.iterations.total",0),failedCount:h.get(t,"statistics.iterations.failed",0)}},{name:"Requests",status:{totalCount:h.get(t,"statistics.requests.total",0),failedCount:h.get(t,"statistics.requests.failed",0)}},{name:"Pre-request Scripts",status:{totalCount:h.get(t,"statistics.prerequestScripts.total",0),failedCount:h.get(t,"statistics.prerequestScripts.failed",0)}},{name:"Test Scripts",status:{totalCount:h.get(t,"statistics.testScripts.total",0),failedCount:h.get(t,"statistics.testScripts.failed",0)}},{name:"Assertions",status:{totalCount:h.get(t,"statistics.assertions.total",0),failedCount:h.get(t,"statistics.assertions.failed",0)}}]};return h.some(h.map(i.metrics,"status.failedCount"),(e=>0!==e))?i.status={status:"critical",text:"Failure"}:i.status={status:"success",text:"Success"},i}function S(e){switch(h.get(e,"rule")){case a.BITBUCKET_PIPELINES_CLASS_ID:case a.TRAVIS_CLASS_ID:return h.get(e,["variables","repository_name"]);case a.GITLAB_SELF_HOSTED_CLASS_ID:case a.GITLAB_CI_CLASS_ID:return h.get(e,["variables","project_name"]);case a.GITHUB_CI_CLASS_ID:return h.get(e,["variables","repository"]);case a.JENKINS_CLASS_ID:return h.get(e,["variables","project"]);case a.DEVOPS_CI_CLASS_ID:return h.get(e,["variables","repository_name"]);case a.CIRCLE_CI_CLASS_ID:const t=h.get(e,["variables","project_slug"]);return h.last(h.split(t,"/"))||""}}function y(e,t){return h(e).map((e=>{const n=h.get(e,t);return{label:n,value:n}})).uniqBy((e=>h.get(e,"value"))).value()}function _(e,t){const n=h.size(e);return 0===n?"":1===n?h.get(h.first(e),"value"):`${n} ${t}`}function E(e){switch(e){case a.BITBUCKET_PIPELINES_CLASS_ID:return s.createElement(i.default,null);case a.TRAVIS_CLASS_ID:return s.createElement(r.default,null);case a.GITLAB_SELF_HOSTED_CLASS_ID:case a.GITLAB_CI_CLASS_ID:return s.createElement(o.default,null);case a.GITHUB_CI_CLASS_ID:return s.createElement(l.default,null);case a.CIRCLE_CI_CLASS_ID:return s.createElement(c.default,null);case a.JENKINS_CLASS_ID:return s.createElement(d.default,null);case a.DEVOPS_CI_CLASS_ID:return s.createElement(u.default,null);default:return s.createElement(p.default,null)}}function A(e){const t=(0,g.resolveStoreInstance)(m.default).find(e),n=h.head(h.get(t,"childEntities.values"));return h.get(n,"apiRepositoryStore.branch")}function w(e,t){let n=t;return t&&h.forEach(e,(e=>{const s=h.split(e,"/");if(e===t)return!1;if(h.size(s)>1){if(h.join(h.slice(s,1),"/")===t)return n=e,!1}})),n}function C(e){return`${h.get(e,"branch")}-${h.get(e,"buildIdentifier")}`}},"./integrations/ci-cd/services/BitbucketCI.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./api-dev/services/IntegrationService.js"),i=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/lodash/lodash.js");const o="list_pipelines",l="run_pipeline",c="stop_pipeline",d="list_pipeline_steps",u="newman_template";function p(e){let t="PENDING",n=r.get(e,"name");return n?t=r.get(e,"result.name"):"IN_PROGRESS"===n&&(t="PAUSED"===r.get(e,"stage.name")?"SUCCESSFUL":r.get(e,"stage.name")),t}t.default={fetchRepositories:e=>new Promise(((t,n)=>{a.default.getRepositories(e.tokenId,e.workspaceSlug).then((e=>{if(r.get(e,"repositories")){const n=r.map(e.repositories,(e=>({label:e.name,value:{workspace_uuid:e.owner.id,repo_uuid:e.id,repo_name:e.name}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:e=>new Promise(((t,n)=>{a.default.getOrgs(e).then((e=>{if(r.get(e,"orgs")){const n=r.map(e.orgs,(e=>({label:e.name,value:{workspace_uuid:e.id,workspace_name:e.name}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchAPIRepoLinkDetails:e=>{let t={};return new Promise(((n,s)=>{a.default.getAPIRepoLinkInfo(e).then((e=>{if(e){const{repository:s,tokenId:a,tokenType:i}=e;"bitbucket"===r.get(s,"service")&&"integration_oauth"===i&&(t={project:{slug:r.get(s,"info.id"),name:r.get(s,"info.name")},workspace:{slug:r.get(s,"info.owner.id"),name:r.get(s,"info.owner.name")}}),n(t)}s()})).catch(s)}))},getBranches:e=>Promise.resolve([]),getBuilds:e=>new Promise(((t,n)=>{const a=r.assign({},{inputs:{limit:r.get(e,"limit")}});s.default.triggerIntegrationOnDemand(e.integrationId,o,a).then((e=>{if(e.status&&200===e.status){let n,s=r.get(e,"body.builds",[]),a=r.get(e,"body.showCollectionRuns",!1),o=r.get(e,"body.showBuildSteps",!1),l=r.map(s,(e=>{const t=r.get(e,"collectionRunMetrics")||r.map(r.get(e,"collectionRunData",[]),i.convertNewmanRunMetrics);let s="CREATED";return"COMPLETED"===r.get(e,"state.name")?s=r.get(e,"state.result.name"):"IN_PROGRESS"===r.get(e,"state.name")&&(s="PAUSED"===r.get(e,"state.stage.name")?"SUCCESSFUL":r.get(e,"state.stage.name")),"branch"===r.get(e,"target.ref_type")&&(n=r.get(e,"target.ref_name")),{showCollectionRuns:a,showBuildSteps:o,collectionRunSummary:(0,i.getCollectionRunStatusSummary)(t),collectionRunDetails:t,build_num:"Build "+e.build_number,start_time:e.created_on,branch:n,duration:1e3*e.duration_in_seconds,outcome:s,filterStatus:(0,i.getBuildFilterStatus)(s),pipeline_uuid:e.uuid,buildIdentifier:e.build_number,build_url:`https://bitbucket.org/${e.repository.full_name}/addon/pipelines/home#!/results/${e.build_number}`}}));return t(l)}return n(e)})).catch(n)})),triggerBuild:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{branch:r.get(t,"branch.name")}});s.default.triggerIntegrationOnDemand(e,l,i).then((e=>e.status&&200===e.status?n(e):a(e))).catch(a)})),getNewmanConfig:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,u).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBuildSteps:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{pipelineUuid:r.get(t,"pipeline_uuid")}});s.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=r.get(e,"body",[]),s=r.map(t,(e=>({name:r.get(e,"name"),status:p(r.get(e,"state")),duration:1e3*r.get(e,"duration_in_seconds")})));return n(s)}return a(e)})).catch(a)})),cancelBuild:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{pipelineUuid:r.get(t,"pipeline_uuid")}});s.default.triggerIntegrationOnDemand(e,c,i).then((e=>e.status&&200===e.status?n(!0):a(!1))).catch(a)}))}},"./integrations/ci-cd/services/Circleci.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./integrations/ci-cd/helpers.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./node_modules/lodash/lodash.js");const o="list_builds",l="trigger_build",c="cancel_build",d="newman_template",u=e=>{let t=r.get(e,"subject",null),n=r.get(e,"workflows.job_name",null),s=r.get(e,"workflows.workflow_name",null),a=r.get(e,"build_num"),i=t||a;return n?i+=": "+n:s&&(i+=": "+s),i};t.default={triggerBuild:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{branchName:r.get(t,"branch.name")}});s.default.triggerIntegrationOnDemand(e,l,i).then((e=>e.status&&200===e.status?n(e):a(e))).catch(a)})),fetchProjects:(e,t,n)=>{const s=t.options,a=r.reduce(r.get(s,"inputs",[]),((t,n,s)=>(t[s]=r.get(e,n,""),t)),{});return new Promise(((e,o)=>{i.default.runServiceAction(s.service,s.serviceActionId,a,t.integrationClass,t.id,n||null).then((t=>{const n=r.get(t,"body",[]),s=r.map(n,(e=>{const t=r.get(e,"username"),n=r.get(e,"vcs_type"),s=r.get(e,"reponame");return{label:`${t}/${s}`,value:`${n}/${t}/${s}`}}));return e(s)})).catch((e=>(pm.logger.error("CircleCI.fetchProjects ~ Error occurred while fetching projects",e),o(e))))}))},getBuilds:e=>new Promise(((t,n)=>{const i={inputs:{offset:e.offset,limit:e.limit}};s.default.triggerIntegrationOnDemand(e.integrationId,o,i).then((e=>{if(e.status&&200===e.status){const n=r.get(e,"body.builds",[]).map((t=>{const n=r.get(t,"status",""),s=r.get(t,"build_num",""),i=r.get(t,"build_url",""),o=r.get(t,"branch",""),l=r.get(t,"start_time",""),c=r.map(r.get(t,"collectionRunData",[]),a.convertNewmanRunMetrics),d=r.get(t,"build_time_millis");return{showCollectionRuns:r.get(e,"body.showCollectionRuns",!1),showBuildSteps:r.get(e,"body.showBuildSteps",!1),collectionRunSummary:(0,a.getCollectionRunStatusSummary)(c),collectionRunDetails:c,build_num:u(t),branch:o,start_time:l,outcome:n,filterStatus:(0,a.getBuildFilterStatus)(n),duration:d,build_url:i,buildNumber:s,buildIdentifier:s}}));return t(n)}return n(e)})).catch((e=>n(e)))})),getNewmanConfig:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,d).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBranches:e=>Promise.resolve([]),cancelBuild:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{buildNumber:r.get(t,"buildNumber")}});s.default.triggerIntegrationOnDemand(e,c,i).then((e=>e.status&&200===e.status?n(!0):a(!1))).catch(a)}))}},"./integrations/ci-cd/services/GitLabCI.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./api-dev/services/IntegrationService.js"),i=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/lodash/lodash.js");const o="list_pipeline",l="run_pipeline",c="stop_pipeline",d="list_pipeline_jobs",u="newman_template";t.default={fetchRepositories:e=>new Promise(((t,n)=>{a.default.getRepositories(e.tokenId,e.workspaceId,e.domain).then((e=>{if(r.get(e,"repositories")){const n=r.map(r.get(e,"repositories"),(e=>({label:e.name,value:{workspaceId:r.toString(r.get(e,"owner.id")),repoId:r.toString(r.get(e,"id")),repoName:r.get(e,"name")}})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:(e,t)=>new Promise(((n,s)=>{a.default.getOrgs(e,t).then((e=>{if(r.get(e,"orgs")){const t=r.map(e.orgs,(e=>({label:r.get(e,"name"),value:{workspaceId:r.toString(r.get(e,"id")),workspaceName:r.get(e,"name")}})));return n(t)}return s(e)})).catch((e=>s(e)))})),fetchAPIRepoLinkDetails:e=>new Promise(((t,n)=>{a.default.getAPIRepoLinkInfo(e).then((e=>{if(e){let{repository:n}=e,s=null;"gitlab"===r.get(n,"service")&&(s={project:{id:r.get(n,"info.id"),name:r.get(n,"info.name")},workspace:{id:r.get(n,"info.owner.id"),name:r.get(n,"info.owner.name")}}),t(s)}})).catch(n)})),getBranches:e=>Promise.resolve([]),getBuilds:e=>new Promise(((t,n)=>{const a=r.assign({},{inputs:{limit:r.get(e,"limit")}});s.default.triggerIntegrationOnDemand(e.integrationId,o,a).then((e=>{if(e.status&&200===e.status){let n=r.get(e,"body.builds",[]),s=r.get(e,"body.showCollectionRuns",!1),a=r.get(e,"body.showBuildSteps",!1),o=r.map(n,(e=>{const t=r.get(e,"status","created"),n=r.map(r.get(e,"collectionRunData",[]),i.convertNewmanRunMetrics);return{showCollectionRuns:s,showBuildSteps:a,collectionRunSummary:(0,i.getCollectionRunStatusSummary)(n),collectionRunDetails:n,build_num:"Build "+r.get(e,"iid"),start_time:r.get(e,"created_at"),branch:r.get(e,"ref"),duration:1e3*r.get(e,"duration",0),outcome:t,filterStatus:(0,i.getBuildFilterStatus)(t),pipelineId:r.get(e,"id"),build_url:r.get(e,"web_url"),buildIdentifier:r.get(e,"id")}}));return t(o)}return n(e)})).catch(n)})),triggerBuild:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{target_branch:r.get(t,"branch.name")}});s.default.triggerIntegrationOnDemand(e,l,i).then((e=>e.status&&200===e.status?n(e):a(e))).catch(a)})),getNewmanConfig:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,u).then((e=>e.status&&200===e.status?t(r.get(e,"body")):n(e))).catch(n)})),getBuildSteps:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{pipelineId:r.get(t,"pipelineId")}});s.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=r.get(e,"body",[]),s=r.map(t,(e=>({name:r.get(e,"name"),status:r.get(e,"status"),duration:1e3*r.get(e,"duration")})));return n(s)}return a(e)})).catch(a)})),cancelBuild:(e,t)=>new Promise(((n,a)=>{const i=r.assign({},{inputs:{pipelineId:r.get(t,"pipelineId")}});s.default.triggerIntegrationOnDemand(e,c,i).then((e=>e.status&&200===e.status?n(!0):a(!1))).catch(a)}))}},"./integrations/ci-cd/services/GithubCI.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./api-dev/services/IntegrationService.js"),i=n("./integrations/ci-cd/helpers.js"),r=n("./node_modules/moment/moment.js"),o=n.n(r),l=n("./node_modules/lodash/lodash.js");const c="list_workflow_runs",d="get_workflow_jobs",u="cancel_workflow_run",p="newman_template",g=e=>l.get(e,"conclusion")?l.get(e,"created_at")?o()(l.get(e,"updated_at")).diff(o()(l.get(e,"created_at"))):l.get(e,"started_at")?o()(l.get(e,"completed_at")).diff(o()(l.get(e,"started_at"))):void 0:0,m=e=>"workflow_dispatch"==l.get(e,"event")?l.get(e,"name")+" #"+l.get(e,"run_number"):l.get(e,["head_commit","message"])+" - "+l.get(e,"name")+" #"+l.get(e,"run_number");t.default={fetchRepositories:e=>new Promise(((t,n)=>{const{tokenId:s,workspace:i,domain:r}=e;a.default.getRepositories(s,i,r).then((e=>{if(l.get(e,"repositories")){const n=l.map(l.get(e,"repositories"),(e=>({label:e.name,value:e.id})));return t(n)}return n(e)})).catch((e=>n(e)))})),fetchWorkspaces:(e,t)=>new Promise(((n,s)=>{a.default.getOrgs(e,t).then((e=>{if(l.get(e,"orgs")){const t=l.map(e.orgs,(e=>({label:l.get(e,"name"),value:l.get(e,"name")})));return n(t)}return s(e)})).catch((e=>s(e)))})),fetchAPIRepoLinkDetails:e=>new Promise(((t,n)=>{a.default.getAPIRepoLinkInfo(e).then((e=>{if(e){let{repository:n}=e,s=null;"github"===l.get(n,"service")&&(s={project:{id:l.get(n,"info.id"),name:l.get(n,"info.name")},workspace:{id:l.get(n,"info.owner.id"),name:l.get(n,"info.owner.name")}}),t(s)}})).catch(n)})),getBranches:e=>Promise.resolve([]),getBuilds:({limit:e,integrationId:t})=>new Promise(((n,a)=>{const r=l.assign({},{inputs:{limit:e}});s.default.triggerIntegrationOnDemand(t,c,r).then((e=>{if(e.status&&200===e.status){let t=l.get(e,"body.workflow_runs",[]),s=l.get(e,"body.showCollectionRuns",!1),a=l.get(e,"body.showBuildSteps",!1),r=l.map(t,(e=>{const t=l.get(e,"conclusion")||l.get(e,"status"),n=l.map(l.get(e,"collectionRunData",[]),i.convertNewmanRunMetrics);return{showCollectionRuns:s,showBuildSteps:a,collectionRunSummary:(0,i.getCollectionRunStatusSummary)(n),collectionRunDetails:n,build_num:m(e),start_time:l.get(e,"created_at"),branch:l.get(e,"head_branch"),duration:g(e),outcome:t,filterStatus:(0,i.getBuildFilterStatus)(t),runId:l.get(e,"id"),build_url:l.get(e,"html_url"),buildIdentifier:l.get(e,"run_number")}}));return n(r)}return a(e)})).catch(a)})),getBuildSteps:(e,{runId:t})=>new Promise(((n,a)=>{const i=l.assign({},{inputs:{runId:t}});s.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=l.get(e,"body.jobs",[]),s=l.map(t,(e=>({name:l.get(e,"name"),status:l.get(e,"conclusion")||l.get(e,"status"),duration:g(e)})));return n(s)}return a(e)})).catch(a)})),getNewmanConfig:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,p).then((e=>e.status&&200===e.status?t(l.get(e,"body")):n(e))).catch(n)})),cancelBuild:(e,{runId:t})=>new Promise(((n,a)=>{const i=l.assign({},{inputs:{runId:t}});s.default.triggerIntegrationOnDemand(e,u,i).then((e=>e.status&&200===e.status?n(!0):a(!1))).catch(a)}))}},"./integrations/ci-cd/services/JenkinsCI.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./js/modules/services/AnalyticsService.js"),o=n("./integrations/ci-cd/components/Jenkins/constants.js"),l=n("./integrations/ci-cd/helpers.js");t.default={validateUser:e=>new Promise(((t,n)=>{const s=a().assign({},o.SERVICE_ACTION_PAYLOAD,{action:o.SERVICE_ACTIONS.VALIDATE_USER,rule:o.RULE},a().pick(e,["host_url","username","auth_token"]));i.default.fetchActionDetailsWithoutIntegration(s).then((e=>200===e.status?t():n(e))).catch(n)})),getProjects:e=>new Promise(((t,n)=>{const s=a().assign({},o.SERVICE_ACTION_PAYLOAD,{action:o.SERVICE_ACTIONS.GET_PROJECTS,rule:o.RULE},a().pick(e,["host_url","username","auth_token"]));i.default.fetchActionDetailsWithoutIntegration(s).then((e=>{if(200===e.status&&a().get(e,"body")){const n=a().map(e.body,(e=>({label:e.name,value:e.name,type:a()(e._class).split(".").last()})));return t(n)}return r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e)})).catch((e=>(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e))))})),getProjectsByIntegrationId:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,o.ON_DEMAND_TRIGGER_ACTIONS.GET_PROJECTS).then((e=>{if(200===e.status&&a().get(e,"body")){const n=a().map(e.body,(e=>({label:e.name,value:e.name,type:a()(e._class).split(".").last()})));return t(n)}return n(e)})).catch(n)})),getProjectInfo:e=>new Promise(((t,n)=>{const s=a().assign({},o.SERVICE_ACTION_PAYLOAD,{action:o.SERVICE_ACTIONS.GET_PROJECT,rule:o.RULE},a().pick(e,["host_url","username","auth_token","project"]));i.default.fetchActionDetailsWithoutIntegration(s).then((e=>200===e.status&&a().get(e,"body")?t(a().get(e,"body")):(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e)))).catch((e=>(r.default.addEventV2({category:"ci_integrations",action:"fetch-projects",label:"fetch_projects_error",value:1}),n(e))))})),getProjectInfoByIntegrationId:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,o.ON_DEMAND_TRIGGER_ACTIONS.GET_PROJECT).then((e=>e.status&&200===e.status?t(a().get(e,"body")):n(e))).catch(n)})),getBuilds:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e.integrationId,o.ON_DEMAND_TRIGGER_ACTIONS.GET_BUILDS,{inputs:a().pick(e,["offset","limit"])}).then((e=>{const s=a().get(e,"body.showCollectionRuns",!1),i=a().get(e,"body.showBuildSteps",!1);if(200===e.status&&a().get(e,"body")){const n=a().map(a().get(e,"body.builds",[]),(e=>{const t=e.result||(e.building?o.STATUS_BUILD_IN_PROGRESS:""),n=a().get(e,"collectionRunMetrics")||a().map(a().get(e,"collectionRunData",[]),l.convertNewmanRunMetrics);return a().assign({},{name:"Build "+e.id,status:t,filterStatus:(0,l.getBuildFilterStatus)(t),url:e.url+"console",collectionRunSummary:(0,l.getCollectionRunStatusSummary)(n),collectionRunDetails:n,showCollectionRuns:s,showBuildSteps:i,buildIdentifier:e.number},a().pick(e,["branch","timestamp","duration"]))}));return t(n)}return n(e)})).catch(n)})),getMultiBranchProjectBuilds:(e,t)=>new Promise(((n,s)=>{i.default.triggerIntegrationOnDemand(e,o.ON_DEMAND_TRIGGER_ACTIONS.GET_BUILDS,{inputs:a().pick(t,["project","offset","limit"])}).then((e=>{const t=a().get(e,"body.showCollectionRuns",!1),i=a().get(e,"body.showBuildSteps",!1);if(200===e.status&&a().get(e,"body")){const s=a().map(a().get(e,"body.builds",[]),(e=>{const n=e.result||(e.building?o.STATUS_BUILD_IN_PROGRESS:"");return a().assign({},{name:"Build "+e.id,status:n,filterStatus:(0,l.getBuildFilterStatus)(n),url:e.url+"console",collectionRunSummary:(0,l.getCollectionRunStatusSummary)(a().get(e,"collectionRunMetrics")),collectionRunDetails:a().get(e,"collectionRunMetrics"),showCollectionRuns:t,showBuildSteps:i,buildIdentifier:e.number},a().pick(e,["branch","timestamp","duration"]))}));return n(s)}return s(e)})).catch(s)})),triggerBuild:e=>new Promise(((t,n)=>{i.default.triggerIntegrationOnDemand(e,o.ON_DEMAND_TRIGGER_ACTIONS.TRIGGER_BUILD).then((e=>e.status&&200===e.status?t(e):n(e))).catch(n)})),triggerMultiBranchProjectBuild:(e,t)=>new Promise(((n,s)=>{i.default.triggerIntegrationOnDemand(e,o.ON_DEMAND_TRIGGER_ACTIONS.TRIGGER_BUILD,{inputs:a().pick(t,["project"])}).then((e=>e.status&&200===e.status?n(e):s(e))).catch(s)})),getNewmanConfig:e=>new Promise(((t,n)=>{const s=a().assign({},o.SERVICE_ACTION_PAYLOAD,{action:o.SERVICE_ACTIONS.GET_NEWMAN_CONFIG});i.default.fetchActionDetails(e,s).then((e=>{if(e.status&&200===e.status){let n=a().get(e,"body.data",[]);return t(n)}return n(e)})).catch(n)})),getBranches:e=>Promise.resolve([])}},"./integrations/ci-cd/services/TravisCI.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./integrations/ci-cd/helpers.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./node_modules/moment/moment.js"),o=n.n(r),l=n("./node_modules/lodash/lodash.js");const c="list_builds",d="list_build_jobs",u="cancel_build",p="trigger_build",g="newman_template";t.default={triggerBuild:(e,t)=>{const n={inputs:{branchName:l.get(t,"branch.name")}};return s.default.triggerIntegrationOnDemand(e,p,n).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},getBuilds:e=>{const t={inputs:{offset:e.offset,limit:e.limit}};return s.default.triggerIntegrationOnDemand(e.integrationId,c,t).then((e=>{const t=l.get(e,"body.showBuildSteps",!1),n=l.get(e,"body.showCollectionRuns",!1);if(e.status&&200===e.status){const s=l.get(e,"body.builds",[]),i=l.map(s,(e=>{const s=l.get(e,"commit.message",""),i=l.map(l.get(e,"collectionRunData",[]),a.convertNewmanRunMetrics),r=l.get(e,"id",""),o=l.get(e,"branch.name",""),c=l.get(e,"started_at",""),d=l.get(e,"state",""),u=1e3*l.get(e,"duration",0),p=`https://app.travis-ci.com/${l.get(e,"repository.slug","")}/build/${l.get(e,"id")}`;return{buildId:r,collectionRunSummary:(0,a.getCollectionRunStatusSummary)(i),collectionRunDetails:i,build_num:s,branch:o,start_time:c,outcome:d,filterStatus:(0,a.getBuildFilterStatus)(d),duration:u,build_url:p,showBuildSteps:t,showCollectionRuns:n,buildIdentifier:l.get(e,"number","")}}));return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},getBuildSteps:(e,t)=>new Promise(((n,a)=>{const i=l.assign({},{inputs:{buildId:l.get(t,"buildId")}});s.default.triggerIntegrationOnDemand(e,d,i).then((e=>{if(e.status&&200===e.status){const t=l.get(e,"body.jobs",[]),s=l.map(t,(e=>{const t=l.get(e,"number",""),n=l.get(e,"started_at",""),s=l.get(e,"finished_at",""),a=n&&s?o()(s)-o()(n):null,i=l.get(e,"stage.name","");return{name:i?`${i} - ${t}`:t,status:l.get(e,"state"),duration:a}}));return n(s)}return a(e)})).catch(a)})),getNewmanConfig:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,g).then((e=>e.status&&200===e.status?t(l.get(e,"body")):n(e))).catch(n)})),cancelBuild:(e,t)=>new Promise(((n,a)=>{const i=l.assign({},{inputs:{buildId:l.get(t,"buildId")}});s.default.triggerIntegrationOnDemand(e,u,i).then((e=>e.status&&200===e.status?n(!0):a(!1))).catch(a)})),fetchProjects:(e,t,n)=>{e.travisci_domain=e.travisci_domain||"com";const s=t.options,a=l.reduce(l.get(s,"inputs",[]),((t,n,s)=>(t[s]=l.get(e,n,""),t)),{});return new Promise(((e,r)=>{i.default.runServiceAction(s.service,s.serviceActionId,a,t.integrationClass,t.id,n||null).then((t=>{const n=l.get(t,"body.repositories",[]),a=l.map(n,(e=>({label:l.get(e,l.get(s,"labelPath","")),value:l.toString(l.get(e,l.get(s,"valuePath","")))})));return e(a)})).catch((e=>(pm.logger.error("TravisCI.fetchProjects ~ Error occurred while fetching projects",e),r(e))))}))},getBranches:e=>Promise.resolve([])}},"./integrations/ci-cd/stores/APIIntegrationsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var s,a,i,r,o,l,c,d,u,p,g,m,h,f,b,v,I,S,y,_,E,A,w,C,k,j,P,T,N,D,R,O,x,M=n("../../node_modules/mobx/lib/mobx.module.js"),L=n("./node_modules/lodash/lodash.js"),F=n.n(L),H=n("./js/stores/StoreManager.js"),B=n("./js/stores/SyncStatusStore.js"),U=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),V=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),G=n("./js/stores/IntegrationsStore.js"),z=n("./integrations/ci-cd/constants.ts"),W=n("./integrations/ci-cd/services/index.ts"),K=n("./node_modules/async/dist/async.js"),Y=n.n(K),q=n("./integrations/services/AuthenticationInstanceService.ts");function $(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function J(e,t,n,s,a){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const Z={[z.CI_CD_BUILDS]:"apiversion"},Q={[z.CI_CD_BUILDS]:"continuous-integration"};let X=(a=J((s=class{constructor(){$(this,"isHydrating",a,this),$(this,"availableIntegrations",i,this),$(this,"configuredIntegrations",r,this),$(this,"categoryIntegrations",o,this),$(this,"activeRule",l,this),$(this,"activeService",c,this),$(this,"errorAvailableIntegrations",d,this),$(this,"errorConfiguredIntegrations",u,this),$(this,"loadingAvailableIntegrations",p,this),$(this,"loadingConfiguredIntegrations",g,this),$(this,"isAuthenticationError",m,this),$(this,"selectedAPI",h,this),$(this,"selectedAPIVersion",f,this),$(this,"selectedService",b,this),$(this,"selectedRule",v,this),$(this,"category",I,this),$(this,"isAdding",S,this),$(this,"builds",y,this),$(this,"loadingBuilds",_,this),$(this,"errorBuilds",E,this),$(this,"branches",A,this),$(this,"loadingBranches",w,this),$(this,"errorBranches",C,this),$(this,"loadingBuildsPage",k,this),$(this,"errorBuildsPage",j,this),$(this,"isIntegrationSupported",P,this),$(this,"authenticationInstances",T,this),$(this,"loadingAuthenticationInstances",N,this),$(this,"errorAuthenticationInstances",D,this),$(this,"integrationInstance",R,this),$(this,"integrationClass",O,this),$(this,"loadingIntegrationInstanceAndClass",x,this),this.integrationsStore=(0,H.resolveStoreInstance)(G.default)}initializeApiIntegrationsStore(e){(0,H.resolveStoreInstance)(B.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:s}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(s),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(n,Z[s],[Q[s]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiIntegrationsStoreV2(e){(0,H.resolveStoreInstance)(B.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:n,category:s}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(n),this.setActiveCategory(s),this.fetchConfiguredIntegrations(n,Z[s],[Q[s]])})).catch((e=>{pm.logger.error("APIObservabilityStore~initializeApiIntegrationsStoreV2~Error while initialising APIObservabilityStore: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}setActiveCategory(e){this.category=e}setActiveService(e){this.activeService=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,Z[this.category],[Q[this.category]])}getAvailableIntegrations(){return(0,M.toJS)(this.availableIntegrations)}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){this.categoryIntegrations=e}getConfiguredIntegrations(e){return(0,M.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,M.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=Q[this.category];F().forEach((0,M.toJS)(this.availableIntegrations),(n=>{const s={},a=n.integrations[n.id];F().forEach(a,((e,n)=>{e.client_categories.includes(t)&&(s[n]=e)})),F().isEmpty(s)||(n.integrations[n.id]={...s},e.push(n))})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(e){this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),U.default.getAvailableIntegrations().then((t=>{const n=F().get(t,"body.services",[]);if(200!==t.status||F().isEmpty(n))throw t;this.updateAvailableIntegrations(F().map(n,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1),F().isFunction(e)&&e(null)})).catch((t=>{this.updateErrorAvailableIntegrations((0,M.toJS)(t)),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations"),F().isFunction(e)&&e(t)}))}fetchConfiguredIntegrations(e,t,n,s){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),U.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,n).then((e=>{this.updateConfiguredIntegrations(e[n[0]]),this.updateLoadingConfiguredIntegrations(!1),F().isFunction(s)&&s(null)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations"),F().isFunction(s)&&s(e)}))}updateBuildsStatus(e,t,n,s){t&&(this.builds[e]=t),this.errorBuilds=n,this.loadingBuilds=s}updateBranchesStatus(e,t,n){e&&(this.branches=e),this.errorBuilds=t,this.loadingBuilds=n}setIsAuthenticationError(e){this.isAuthenticationError=e}fetchBuilds(e,t,n){let s=W.default[t];if(!s||!F().isFunction(s.getBuilds)){let e=new Error;return e.name="integrationNotSupported",n(e)}this.updateBuildsStatus(e,[],null,!0),s.getBuilds({integrationId:e,offset:0,limit:100}).then((t=>{this.updateBuildsStatus(e,t||[],null,!1),this.setIsAuthenticationError(!1),F().isFunction(n)&&n(null)})).catch((t=>{const s=F().get(t,"error.details.statusCode",-1);401!==s&&403!==s||this.setIsAuthenticationError(!0),this.updateBuildsStatus(e,null,t,!1),F().isFunction(n)&&n(t)}))}fetchBranches(e,t,n){let s=W.default[t];if(!s||!F().isFunction(s.getBranches)){let e=new Error;return e.name="integrationNotSupported",n(e)}this.updateBranchesStatus([],null,!0),s.getBranches(e).then((e=>{this.updateBranchesStatus(e||[],null,!1),F().isFunction(n)&&n(null)})).catch((e=>{this.updateBranchesStatus(null,e,!1),F().isFunction(n)&&n(e)}))}clearBuilds(){this.builds=[],this.errorBuilds=null}clearBranches(){this.branches=[],this.errorBranches=null}updateStatusBuildsPage(e,t,n){this.loadingBuildsPage=t,this.errorBuildsPage=e,this.isIntegrationSupported=n}initialiseBuildsPage(e,t){this.updateStatusBuildsPage(null,!0),Y().series([n=>{this.fetchBuilds(e,t,n)},n=>{this.fetchBranches(e,t,n)}],(e=>{"integrationNotSupported"===F().get(e,"name")?this.updateStatusBuildsPage(null,!1,!1):this.updateStatusBuildsPage(e,!1,!0)}))}setloadingAuthenticationInstances(e){this.loadingAuthenticationInstances=e}setErrorAuthenticationInstances(e){this.errorAuthenticationInstances=e}setAuthenticationInstances(e){this.authenticationInstances=e}fetchAuthenticationInstances(e){pm.logger.info("APIIntegrationsStore~Initializing fetching auth instances: ",e),this.setloadingAuthenticationInstances(!0),this.setErrorAuthenticationInstances(null),q.default.listAuthenticationInstancesOnApi(e).then((({body:e})=>{F().isNil(e.data)?pm.logger.error("Error loading authentication instances! Received null response!",{body:e}):pm.logger.info("APIIntegrationsStore~Successfully fetched auth instances: ",e),this.setAuthenticationInstances(e.data||[]),this.setloadingAuthenticationInstances(!1)})).catch((e=>{pm.logger.error("APIIntegrationsStore~Something went wrong while fetching authentication instances: ",e),this.setloadingAuthenticationInstances(!1),this.setErrorAuthenticationInstances(e)}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await V.default.getConfiguredIntegrationsForAnEntity(e,t,[z.CI_CD_CLIENT_CATEGORY]);let s=F().get(n,"body.data",[]),a=F().map(s,"class"),i=[];if(!F().isEmpty(a)){const e=this.integrationsStore.getIntegrationClasses(),t=a[0];i=F().find(e,(e=>e.id===t))}this.updateIntegrationClass([i],t),this.updateIntegrationInstance(s,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIIntegrationsStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=J(s.prototype,"availableIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=J(s.prototype,"configuredIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=J(s.prototype,"categoryIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n("./integrations/ci-cd/stores/fixture.json")}}),l=J(s.prototype,"activeRule",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=J(s.prototype,"activeService",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=J(s.prototype,"errorAvailableIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=J(s.prototype,"errorConfiguredIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=J(s.prototype,"loadingAvailableIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=J(s.prototype,"loadingConfiguredIntegrations",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=J(s.prototype,"isAuthenticationError",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=J(s.prototype,"selectedAPI",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=J(s.prototype,"selectedAPIVersion",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=J(s.prototype,"selectedService",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=J(s.prototype,"selectedRule",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=J(s.prototype,"category",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=J(s.prototype,"isAdding",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=J(s.prototype,"builds",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=J(s.prototype,"loadingBuilds",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=J(s.prototype,"errorBuilds",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=J(s.prototype,"branches",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=J(s.prototype,"loadingBranches",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=J(s.prototype,"errorBranches",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=J(s.prototype,"loadingBuildsPage",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=J(s.prototype,"errorBuildsPage",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=J(s.prototype,"isIntegrationSupported",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=J(s.prototype,"authenticationInstances",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=J(s.prototype,"loadingAuthenticationInstances",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=J(s.prototype,"errorAuthenticationInstances",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=J(s.prototype,"integrationInstance",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),O=J(s.prototype,"integrationClass",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=J(s.prototype,"loadingIntegrationInstanceAndClass",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),J(s.prototype,"initializeApiIntegrationsStore",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"initializeApiIntegrationsStore"),s.prototype),J(s.prototype,"setActiveCategory",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveCategory"),s.prototype),J(s.prototype,"setActiveService",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveService"),s.prototype),J(s.prototype,"setActiveRule",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveRule"),s.prototype),J(s.prototype,"setSelectedAPI",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPI"),s.prototype),J(s.prototype,"setSelectedAPIVersion",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPIVersion"),s.prototype),J(s.prototype,"setSelectedRule",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedRule"),s.prototype),J(s.prototype,"setSelectedService",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedService"),s.prototype),J(s.prototype,"updateLoadingAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingAvailableIntegrations"),s.prototype),J(s.prototype,"updateLoadingConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingConfiguredIntegrations"),s.prototype),J(s.prototype,"updateErrorAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorAvailableIntegrations"),s.prototype),J(s.prototype,"updateErrorConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorConfiguredIntegrations"),s.prototype),J(s.prototype,"updateAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateAvailableIntegrations"),s.prototype),J(s.prototype,"updateSelectedAPIVersion",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateSelectedAPIVersion"),s.prototype),J(s.prototype,"updateConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateConfiguredIntegrations"),s.prototype),J(s.prototype,"updateCategoryIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateCategoryIntegrations"),s.prototype),J(s.prototype,"getConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"getConfiguredIntegrations"),s.prototype),J(s.prototype,"updateIsHydrating",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsHydrating"),s.prototype),J(s.prototype,"updateIsAdding",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsAdding"),s.prototype),J(s.prototype,"findIntegrationsByCategory",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"findIntegrationsByCategory"),s.prototype),J(s.prototype,"fetchAvailableIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchAvailableIntegrations"),s.prototype),J(s.prototype,"fetchConfiguredIntegrations",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchConfiguredIntegrations"),s.prototype),J(s.prototype,"updateBuildsStatus",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateBuildsStatus"),s.prototype),J(s.prototype,"updateBranchesStatus",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateBranchesStatus"),s.prototype),J(s.prototype,"setIsAuthenticationError",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setIsAuthenticationError"),s.prototype),J(s.prototype,"fetchBuilds",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchBuilds"),s.prototype),J(s.prototype,"fetchBranches",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchBranches"),s.prototype),J(s.prototype,"clearBuilds",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"clearBuilds"),s.prototype),J(s.prototype,"clearBranches",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"clearBranches"),s.prototype),J(s.prototype,"updateStatusBuildsPage",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateStatusBuildsPage"),s.prototype),J(s.prototype,"initialiseBuildsPage",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"initialiseBuildsPage"),s.prototype),J(s.prototype,"setloadingAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setloadingAuthenticationInstances"),s.prototype),J(s.prototype,"setErrorAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setErrorAuthenticationInstances"),s.prototype),J(s.prototype,"setAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setAuthenticationInstances"),s.prototype),J(s.prototype,"fetchAuthenticationInstances",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchAuthenticationInstances"),s.prototype),J(s.prototype,"fetchIntegrationInstance",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchIntegrationInstance"),s.prototype),J(s.prototype,"updateIntegrationInstance",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationInstance"),s.prototype),J(s.prototype,"updateIntegrationClass",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationClass"),s.prototype),J(s.prototype,"setLoadingIntegrationInstancesAndClass",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingIntegrationInstancesAndClass"),s.prototype),J(s.prototype,"resetPowerUpVariables",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"resetPowerUpVariables"),s.prototype),J(s.prototype,"removeIntegrationInstances",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"removeIntegrationInstances"),s.prototype),s)},"./integrations/ci-cd/timeUtils.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/moment/moment.js"),a=n.n(s),i=n("./node_modules/lodash/lodash.js");t.default={timeDifference:function(e,t){var n=6e4,s=36e5,a=864e5,r=e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*n-e.getHours()*s-(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*n-t.getHours()*s);return 0==r/a?"Today":r/a==1?"Yesterday":i.round(r/a)+" days ago"},timeSince:function(e){if(!e)return"N/A";var t=new Date,n=new Date(e),s=n.getHours()%12||12,a=n.getMinutes()<10?`0${n.getMinutes()}`:n.getMinutes(),i=n.getHours()<12?"am":"pm";return`${this.timeDifference(t,n)}, ${s}:${a} ${i}`},getFormattedDuration:function(e){if(!e||"0"===e)return"N/A";e=parseInt(e);let t=a().duration(e),n=t.hours(),s=t.minutes(),i=t.seconds(),r="";return n>0&&(r+=`${n}h`),s>0&&(r+=` ${s}m`),i>0&&(r+=` ${i}s`),""===r&&(r+=e/1e3+"s"),r}}},"./integrations/monitoring/components/DatadogMonitorStatus.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),o=(n("./js/external-navigation/ExternalNavigationService.js"),n("./integrations/monitoring/constants.js")),l=n("./node_modules/prop-types/index.js"),c=n.n(l);const{ALERT:d,WARN:u,NO_DATA:p,OK:g,NO_MONITORS:m,UNAVAILABLE:h}=o.DATADOG_MONITOR_STATUSES;function f(e){const t=e.numMonitors?`${e.numMonitors} `:"",n={[u]:s.createElement(a.default,{status:"warning",text:`${t+u}`,className:"health-status-badge"}),[d]:s.createElement(a.default,{status:"critical",text:`${t+d}`,className:"health-status-badge"}),[g]:s.createElement(a.default,{status:"success",text:`${t+g}`,className:"health-status-badge"}),[p]:s.createElement(a.default,{status:"neutral",text:`${t+p}`,className:"health-status-badge"}),[m]:s.createElement(i.default,{type:"para"},"No Monitors"),[h]:s.createElement(r.default,{size:"small"})};return n[e.alertSeverity]||n[m]}f.defaultProps={alertSeverity:m,numMonitors:0},f.propTypes={alertSeverity:c().string,numMonitors:c().number}},"./integrations/monitoring/components/NewRelic/AddComponents.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AddMonitorButtonContainer:function(){return o},MonitorSetupSectionSeparator:function(){return r},MonitoringSetupFormTitle:function(){return i},MonitoringSetupFormTitleContainer:function(){return a},MultiSelectContainer:function(){return d},MultiSelectDiv:function(){return u},MultiSelectWrapper:function(){return c},RadioButtonDiv:function(){return p},RemoveButtonContainer:function(){return l}});var s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const a=s.default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`,i=s.default.div`
  color: var(--content-color-primary);
  font-weight: var(--text-weight-medium);
  font-size: var(--text-size-m);
  line-height: var(--line-height-m);
`,r=s.default.div`
  border-top: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
`,o=s.default.div`width: fit-content;`,l=s.default.div`width: fit-content; float: right; margin-left: auto;`,c=s.default.div`display: flex; flex-direction: column; padding-right: 10px; padding-top: 16px`,d=s.default.div`display: flex; flex-direction: column`,u=s.default.div`padding: 10px`,p=s.default.div`margin-bottom: var(--spacing-l); padding-top: var(--spacing-l)`},"./integrations/monitoring/containers/helpers/DatadogAPMUtils.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),i=n("./integrations/monitoring/constants.js"),r=n("./node_modules/uuid/index.js"),o=n.n(r),l=n("./node_modules/lodash/lodash.js");t.default={getDatadogMonitorHealthStatusObject:function(e){const{ALERT:t,WARN:n,NO_DATA:r,OK:o,NO_MONITORS:c}=i.DATADOG_MONITOR_STATUSES;let d={status:c,component:s.createElement(a.default,{alertSeverity:c})};return l.get(e,t)>0?d={status:t,component:s.createElement(a.default,{numMonitors:l.get(e,t),alertSeverity:t})}:l.get(e,n)>0?d={status:n,component:s.createElement(a.default,{numMonitors:l.get(e,n),alertSeverity:n})}:l.get(e,r)>0?d={status:r,component:s.createElement(a.default,{numMonitors:l.get(e,r),alertSeverity:r})}:l.get(e,o)>0&&(d={status:o,component:s.createElement(a.default,{numMonitors:l.get(e,o),alertSeverity:o})}),d},getDatadogHostname:function(e){return"https://app.datadoghq"+("eu"===e?".eu":".com")},areEnvironmentsValid:function(e){const t=l.some(e,(e=>l.isEmpty(e.name)||l.isEmpty(e.services))),n=l(e).map("name").uniq().value().length!==e.length;return!t&&!n},getEmptyEnvironmentsList:function(){return[{name:"none",services:[],id:o().v4()}]}}},"./integrations/monitoring/sentry/components/FormComponent.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),o=n("./integrations/monitoring/sentry/service.js"),l=n("./node_modules/prop-types/index.js"),c=n.n(l),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),g=n("./integrations/monitoring/sentry/constants.js"),m=n("./js/stores/StoreManager.js"),h=n("./js/stores/IntegrationsStore.js"),f=n("./integrations/constants/integrationsConstants.ts"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),v=n("./integrations/monitoring/sentry/helper.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),y=n("./node_modules/lodash/lodash.js");let _,E=(0,a.observer)(s=class extends i.Component{constructor(e){super(e);const{defaultOrganisation:t,defaultAccessToken:n,defaultName:s,defaultDomain:a}=this.props;_={nickname:s,organisationSlug:t,accessToken:n,domain:a},this.state={projects:[],projectClassInputData:{},loadingProjects:!1,selectedProject:null,errorProjects:"",integrationApi:{},integrationApiVersion:{},..._},this.store=(0,m.resolveStoreInstance)(h.default),this.fetchProjects=y.debounce(this.fetchProjects,500),this.addToast=this.props.addToast}componentDidMount(){const{showDisabledApiVersionSelector:e,defaultProject:t,classData:n}=this.props;if(e&&(p.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({integrationApi:{id:y.get(e,"id"),name:y.get(e,"name")}})})).catch((e=>{this.addToast({description:g.ERROR_MESSAGES.UNABLE_TO_FETCH_API,status:"error"}),pm.logger.error("SentryFormComponents ~ Error occurred while fetching APIs",e)})),p.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({integrationApiVersion:{id:y.get(e,"versionId"),name:y.get(e,"name")}})})).catch((e=>{this.addToast({description:g.ERROR_MESSAGES.UNABLE_TO_FETCH_API_VERSIONS,status:"error"}),pm.logger.error("SentryFormComponents ~ Error occurred while fetching API versions",e)}))),y.isEmpty(n))b.default.fetchIntegrationClassDetails(g.INTEGRATION_CLASS_NAME).then((e=>{const n=y.get(e,"body.data");if(200!==e.status||y.isEmpty(n))pm.logger.error("SentryFormComponents ~ Error in fetching class details",e),this.addToast({description:g.ERROR_MESSAGES.DEFAULT,status:"error"});else{const e=y.get(n,"inputs"),s=y.first(y.filter(e,{key:"project_slug"}));this.setState({projectClassInputData:s},(()=>{t&&this.fetchProjects(t)}))}})).catch((e=>{pm.logger.error("SentryFormComponents ~ Unknown error in fetching class details",e),this.addToast({description:g.ERROR_MESSAGES.DEFAULT,status:"error"})}));else{const e=y.get(n,"inputs"),s=y.first(y.filter(e,{key:"project_slug"}));this.setState({projectClassInputData:s},(()=>{t&&this.fetchProjects(t)}))}}fetchProjects(e){const{organisationSlug:t,accessToken:n,domain:s,projectClassInputData:a}=this.state,{integrationId:i}=this.props,r={access_token:n,organisation_slug:t,domain:s};t&&n||this.setState({loadingProjects:!1,errorProjects:g.ERROR_MESSAGES.NO_ACCESS_TOKEN_ORG_SLUG_FOR_PROJECT}),this.setState({loadingProjects:!0,errorProjects:""}),o.default.fetchProjects(r,a,i).then((t=>{let n={};e&&(n=y.find(t,{value:e})||{},_={..._,selectedProject:n}),this.setState({projects:t,loadingProjects:!1,errorProjects:"",selectedProject:n})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:g.ERROR_MESSAGES.UNABLE_TO_FETCH_PROJECTS}),this.addToast({title:y.get(e,"error.title"),description:y.get(e,"error.message",g.ERROR_MESSAGES.UNABLE_TO_FETCH_PROJECTS),status:"error"}),pm.logger.error("SentryIntegrationCreateForm ~ "+g.ERROR_MESSAGES.UNABLE_TO_FETCH_PROJECTS,e)}))}render(){const{loadingProjects:e,errorProjects:t,projects:n,selectedProject:s,nickname:a,domain:r,organisationSlug:o,errorOrganisationSlug:l,accessToken:c,integrationApi:p,integrationApiVersion:m}=this.state,{rule:h,source:b,apiId:E,apiVersionId:A,selectedWorkspace:w,optionalFormComponents:C,showDisabledApiVersionSelector:k}=this.props,j=E||this.store.selectedEntity&&this.store.selectedEntity.value,P=A||this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,T=this.store.selectedWorkspace&&this.store.selectedWorkspace.value,N={classId:g.INTEGRATION_CLASS_NAME,name:a,inputs:{api:j,apiversion:P,access_token:c,organisation_slug:o,domain:r||"",project_slug:s&&s.value}},D=a&&s&&c&&j&&P;return i.createElement(i.Fragment,null,i.createElement(d.NicknameFieldSegment,{id:"sentry-nickname",value:a,error:""===a?"Please enter a nickname for your integration":"",onBlur:()=>{a&&this.setState({nickname:y.isFunction(a.trim)?a.trim():a})},onChange:e=>{this.setState({nickname:e})}}),k&&i.createElement(i.Fragment,null,i.createElement(d.SelectSegment,{disabled:!0,id:"sentry-api",title:"Selected API",description:"The selected API is connected with this integration",selectedTarget:p,filterItems:[p],initialLabel:"Loading APIs..."}),i.createElement(d.SelectSegment,{disabled:!0,id:"sentry-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",selectedTarget:m,filterItems:[m],initialLabel:"Loading API versions..."})),!(0,v.isOriginApiBuilder)(b)&&!k&&i.createElement(i.Fragment,null,i.createElement(d.WorkspaceSelector,{selectedWorkspace:w,description:"Select the workspace your API is in"}),i.createElement(d.EntitySelector,{id:"api-schemas",entity:f.entityTypes.APIS,workspaceId:T,title:"Select API",description:"Select the API to connect",rule:h,mode:f.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),i.createElement(d.EntitySelector,{id:"api-schema-versions",entity:f.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:h,mode:f.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity})),i.createElement(d.FieldSegment,{title:"Sentry server domain",description:"Leave this empty if you dont use a self-hosted Sentry instance.",id:"sentry-domain",optional:!0,optionalText:"only applicable for self-hosted",value:r,error:r&&!I.default.isValidUrl(r.trim())?"Enter a valid URL of the format https://subdomain.domain.com":"",onBlur:()=>{this.state.accessToken&&this.state.organisationSlug&&this.fetchProjects()},onChange:e=>{const t=e&&e.replace(/\/$/,"")||"";this.setState({domain:y.trim(t)})}}),i.createElement(d.FieldSegment,{title:"Organization slug",description:"You can find it in your Sentry URL \n https://sentry.io/organization/<organization_slug>/...",id:"sentry-organisation-slug",value:o,error:l,onBlur:()=>{this.setState({errorOrganisationSlug:y.isEmpty(o)?"Please enter the organisation slug":""},(()=>{this.state.accessToken&&this.fetchProjects()}))},onChange:e=>{this.setState({organisationSlug:y.trim(e),errorOrganisationSlug:""})}}),i.createElement(d.SensitiveFieldSegment,{title:"Access token",description:"Enter the access token from an internal Sentry integration with read access on Project, Organization, and Issues & Events.",customLink:i.createElement(u.default,{extUrl:"https://go.pstmn.io/create-sentry-integration"},"Learn more"),value:c,error:""===c?"Please provide your sentry access token":"",onChange:e=>{this.setState({accessToken:e.trim()},(()=>{this.state.organisationSlug&&this.fetchProjects()}))}}),i.createElement(d.SelectSegmentV2,{title:"Project",description:"Select a Sentry project to fetch issues from",label:"Select...",disabled:e||!y.isEmpty(t),options:n,value:s,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:t,loading:e,handleRetry:()=>{this.fetchProjects()}}),C&&C(D,N,(0,S.isFormUpdated)(_,this.state)))}})||s;t.default=(0,r.default)(E),E.propTypes={integrationId:c().string,classData:c().object,source:c().string,apiId:c().string,apiVersionId:c().string,selectedWorkspace:c().string,defaultOrganisation:c().string,defaultProject:c().string,defaultAccessToken:c().string,defaultName:c().string,defaultDomain:c().string,showDisabledApiVersionSelector:c().bool,optionalFormComponents:c().func}},"./integrations/monitoring/sentry/helper.js":function(e,t,n){"use strict";n.r(t),n.d(t,{isOriginApiBuilder:function(){return i}});var s=n("./integrations/monitoring/constants.js"),a=n("./node_modules/lodash/lodash.js");const i=e=>a.includes([s.EDIT_SOURCE,s.CREATE_SOURCE],e)},"./integrations/monitoring/sentry/service.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./integrations/monitoring/sentry/constants.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),o=n("./node_modules/lodash/lodash.js");function l(e){return o.get(e,["inputs","sentryEnvironment"],"")===a.ALL_ENVIRONEMENT_OPTION_VALUE&&(e.inputs.sentryEnvironment=""),e}t.default={fetchIssues:(e,t)=>(t=l(t),new Promise(((n,i)=>{s.default.triggerIntegrationOnDemand(e,a.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUES,t).then((e=>e.status>=200&&e.status<300?n(o.get(e,"body",{})):i(e))).catch(i)}))),fetchIssueDetails:(e,t)=>(t=l(t),new Promise(((n,i)=>{s.default.triggerIntegrationOnDemand(e,a.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUE_DETAILS,t).then((e=>e.status>=200&&e.status<300?n(o.get(e,"body",{})):i(e))).catch(i)}))),fetchEnvironments:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,a.SENTRY_ONDEMAND_TRIGGERS.FETCH_ENVIRONMENTS,{}).then((e=>e.status>=200&&e.status<300?t(o.get(e,"body",[])):n(e))).catch(n)})),fetchProjectDetails:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,a.SENTRY_ONDEMAND_TRIGGERS.FETCH_PROJECT_DETAILS,{}).then((e=>e.status>=200&&e.status<300?t(o.get(e,"body",{})):n(e))).catch(n)})),fetchProjects:(e,t,n)=>{if(!t)return new Promise;const s=t.options,a=o.reduce(o.get(s,"inputs",[]),((t,n,s)=>(t[s]=o.get(e,n,""),t)),{});return new Promise(((e,l)=>{i.default.runServiceAction(s.service,s.serviceActionId,a,t.integrationClass,t.id,n||null).then((t=>{const n=o.get(t,"body",[]),a=o.get(s,"labelPath"),i=o.get(s,"valuePath"),l=(0,r.convertObjectListToOptions)(n,a,i);return e(l)})).catch((e=>(pm.logger.error("Sentry.service.fetchProjects ~ Error occurred while fetching projects",e),l(e))))}))}}},"./integrations/monitoring/services/DatadogService.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),o=n("./integrations/monitoring/constants.js"),l=n("./node_modules/async/dist/async.js"),c=n.n(l);function d(e,t,n,s){return new Promise(((i,l)=>{r.default.runServiceAction("datadog",n,e,o.DATADOG_APM_CLASS_ID,s,t).then((e=>{if(e.status&&200===e.status)return i(a().get(e,"body"));throw a().get(e,"body")})).catch((e=>l(e)))}))}function u(e,t,n,s){return new Promise(((i,l)=>{r.default.runServiceAction("datadog",n,e,o.DATADOG_APM_CLASS_ID,s,t).then((e=>{if(e.status&&200===e.status)return i(a().get(e,"body"));throw a().get(e,"body")})).catch((e=>l(e)))}))}t.default={listServices:e=>u(e,null),listDashboards:(e,t,n,s)=>d(e,t,n,s),listDashboardsWithIntegrationId:(e,t,n,s)=>d(e,t,n,s),listServicesWithIntegrationId:(e,t,n,s)=>u(e,t,n,s),authenticateApiKey:(e,t,n,s)=>d(e,t,n,s),fetchMetricsForLinkedServices:e=>{const t=Date.now()/1e3,n=t-1800;return i.default.triggerIntegrationOnDemand(e,"fetch_metrics_for_added_services",{inputs:{startTime:n,endTime:t}}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))},fetchGraphURLs:(e,t,n,s,r)=>{let o={};const l=(r,l,c)=>{i.default.triggerIntegrationOnDemand(e,l,{inputs:{timeFrame:t,service:n,environment:s}}).then((e=>{if(e.status&&200===e.status)return o[c]=a().get(e.body,"data"),r();throw e.body})).catch((e=>r(e)))};c().parallel([function(e){l(e,"fetch_apdex_graph_url","apdex_graphs")},function(e){l(e,"fetch_error_rate_graph_url","error_rate_graphs")},function(e){l(e,"fetch_latency_graph_url","latency_graphs")},function(e){l(e,"fetch_throughput_graph_url","throughput_graphs")}],(e=>e?r(e):r(null,o)))},fetchServiceMonitorsStatus:(e,t,n)=>i.default.triggerIntegrationOnDemand(e,"get_violations",{inputs:{service:t,environment:n}}).then((e=>{if(e&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/NewRelicService.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=n("./node_modules/moment/moment.js"),r=n.n(i),o=n("./node_modules/async/dist/async.js"),l=n.n(o),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./integrations/monitoring/constants.js");t.default={listServices:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listDashboards:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchChartUrls:(e,t,n,s)=>{let i={};l().parallel([function(s){c.default.fetchActionDetails(e,{type:"fetchWebTransactionsChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.webTransactionsChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),s();throw e})).catch((e=>s(e)))},function(s){c.default.fetchActionDetails(e,{type:"fetchApdexScoreChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.apdexScoreChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),s();throw e})).catch((e=>s(e)))},function(s){c.default.fetchActionDetails(e,{type:"fetchErrorRateChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.errorRateChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),s();throw e})).catch((e=>s(e)))},function(s){c.default.fetchActionDetails(e,{type:"fetchThroughputChartUrl",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status)return i.throughputChartUrl=a().get(e.body,"data.data.actor.entity.nrdbQuery.embeddedChartUrl"),s();throw e})).catch((e=>s(e)))}],(e=>e?s(e):s(null,i)))},fetchStatistics:(e,t,n,s)=>{let i={};l().parallel([function(n){c.default.fetchActionDetails(e,{type:"fetchDeployments",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=a().map(a().get(e.body,"data.data.actor.entity.deployments"),(e=>({...e,timestamp:r()(a().get(e,"timestamp")).format("MMM DD h:mm A")})));return i.deployments=t,n()}throw e})).catch((e=>n(e)))},function(n){c.default.fetchActionDetails(e,{type:"fetchViolationEvents",service_guid:t}).then((e=>{if(e.status&&200===e.status){let t=a().map(a().get(e.body,"data.data.actor.entities[0].recentAlertViolations"),(e=>({...e,openedAt:r()(a().get(e,"openedAt")).format("MMM DD h:mm A"),closedAt:a().get(e,"closedAt")?r()(a().get(e,"closedAt")).format("MMM DD h:mm A"):"-"})));return i.violationEvents=t,n()}throw e})).catch((e=>n(e)))},function(s){c.default.fetchActionDetails(e,{type:"fetchSlowestWebTransactions",service_guid:t,time:n}).then((e=>{if(e.status&&200===e.status){let t=a().map(a().get(e.body,"data.data.actor.entity.nrdbQuery.results"),(e=>({name:a().replace(e.name,"WebTransaction/Custom/",""),avg_time:`${a().round(e.avg_time,2)} ms`,error_rate:`${a().round(e.error_rate,1)}%`})));return i.slowestTransactions=t,s()}throw e})).catch((e=>s(e)))}],(e=>e?s(e):s(null,i)))},fetchMetricsForLinkedServices:e=>c.default.fetchActionDetails(e,{type:"fetchMetricsForLinkedServices"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),fetchLinkedDashboards:e=>c.default.fetchActionDetails(e,{type:"fetchLinkedDashboards"}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e))),listSevicesWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_SERVICES,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),listDashboardsWithIntegrationId:(e,t={})=>c.default.fetchActionDetails(e,{type:d.NEW_RELIC_SERVICE_ACTION_SLUGS.LIST_DASHBOARDS,...t}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(a().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e))),authenticateApiKey:e=>c.default.fetchActionDetailsWithoutIntegration(e).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/index.js":function(e,t,n){"use strict";n.r(t);var s=n("./integrations/monitoring/services/NewRelicService.js"),a=n("./integrations/monitoring/services/DatadogService.js");t.default={apm_new_relic:s.default,apm_datadog:a.default}},"./js/components/base/Accordion/Accordion.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("./node_modules/lodash/lodash.js");class o extends s.Component{constructor(e){super(e),this.state={activeAccordions:[...e.defaultOpenAccordions]},this.handleAccordionClick=this.handleAccordionClick.bind(this)}handleAccordionClick(e){this.props.multiple?this.setState((t=>r.includes(t.activeAccordions,e)?{activeAccordions:r.without(t.activeAccordions,e)}:{activeAccordions:[...t.activeAccordions,e]})):this.setState((t=>r.includes(t.activeAccordions,e)?{activeAccordions:[]}:{activeAccordions:[e]}))}renderChildren(){return s.Children.map(this.props.children,((e,t)=>s.cloneElement(e,{isOpen:r.includes(this.state.activeAccordions,t),onAccordionClick:this.handleAccordionClick,itemKey:t})))}render(){return s.createElement("div",{className:"accordion"},this.renderChildren())}}o.propTypes={multiple:i().bool,defaultOpenAccordions:i().array},o.defaultProps={multiple:!1,defaultOpenAccordions:[0]}},"./js/components/base/Accordion/AccordionItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("./node_modules/lodash/lodash.js");class o extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}async componentDidMount(){"function"==typeof this.props.onDidMount&&await this.props.onDidMount()}handleClick(){this.props.disabled||this.props.onAccordionClick(this.props.itemKey)}render(){return s.createElement("div",{className:"accordion-item"},s.createElement("div",{className:"title",onClick:this.handleClick},r.isFunction(this.props.renderTitle)?this.props.renderTitle(this.props.isOpen):this.props.title),this.props.isOpen&&s.createElement("div",{className:"panel"},this.props.children))}}o.propTypes={title:i().string,renderTitle:i().func},o.defaultProps={title:"Accordion item title"}},"./js/components/base/Icons/LeftArrowIcon.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Icons/Icon.js");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i.apply(this,arguments)}const r=s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{id:"left-arrow-icon",fillRule:"evenodd",clipRule:"evenodd",d:"M4.90404 8.85057L8.60145 12.548C8.93362 12.8801 8.93362 13.4187 8.60145 13.7509C8.26928 14.083 7.73072 14.083 7.39855 13.7509L2.24913 8.60145C1.91696 8.26928 1.91696 7.73072 2.24913 7.39855L7.39855 2.24913C7.73072 1.91696 8.26928 1.91696 8.60145 2.24913C8.93362 2.5813 8.93362 3.11985 8.60145 3.45202L4.90404 7.14943H13.1494C13.6192 7.14943 14 7.53024 14 8C14 8.46976 13.6192 8.85057 13.1494 8.85057H4.90404Z"}),s.createElement("use",{fill:"#A9A9A9",fillRule:"nonzero",xlinkHref:"#left-arrow-icon"}));function o(e){return s.createElement(a.default,i({},e,{icon:r}))}},"./js/components/base/PasswordInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/classnames/index.js"),i=n.n(a),r=n("./js/components/base/Inputs.js"),o=n("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=n("./js/components/base/Buttons.js"),c=n("./node_modules/prop-types/index.js"),d=n.n(c),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}class g extends s.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:n}=e;if(t){let s,a;for(let i=0;i<t.length;i++){const{validator:r,message:o,type:l}=t[i]||{};if("function"==typeof r&&!r(n,e)){s=l,a=o;break}}if(s)return this.state[s]!==a&&this.setState({[s]:a})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?s.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},s.createElement(u.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?s.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},s.createElement(u.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?s.createElement(r.Input,p({},e,{type:"password"})):s.createElement(o.AutoSuggestInput,p({},e,{enableVariableSuggestions:!0,type:"text"})):s.createElement(r.Input,p({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return s.createElement("div",{className:i()("password-input",e)},this.getPasswordInput(t),s.createElement("div",{className:"password-input-message"},this.getValidationIcon()),s.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?s.createElement(u.default,{name:"icon-action-hide-stroke",title:"Show"}):s.createElement(u.default,{name:"icon-action-view-stroke",title:"Hide"})))}}g.propTypes={className:d().string,inputStyle:d().oneOf(["box","line"]),size:d().oneOf(["huge"]),enableVariableSuggestions:d().bool,validation:d().arrayOf(d().shape({validator:d().func.isRequired,message:d().string,type:d().oneOf(["error","warning"])}))},g.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,n){"use strict";n.r(t),n.d(t,{LoadingLabel:function(){return c},default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/classnames/index.js"),i=n.n(a),r=n("./node_modules/react-select-v1/dist/react-select.es.js"),o=n("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l.apply(this,arguments)}function c(e){return s.createElement(s.Fragment,null,e.loadingLabel||"Loading...",s.createElement("span",{className:"pm-select-loader"},s.createElement(o.default,null)))}class d extends s.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:n,className:a,label:o,isClearable:d,isCreatable:u,autoBlur:p=!0}=this.props;return u?s.createElement(r.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:i()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,a),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?s.createElement(c,this.props):o,scrollMenuIntoView:!1})):s.createElement(r.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:p,className:i()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,a),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?s.createElement(c,this.props):o,scrollMenuIntoView:!1}))}}d.defaultProps={size:"sm"},d.displayName="SelectDropdown"},"./js/constants/TeamIntegrationSortConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{TEAM_INTEGRATIONS_SORT_TYPE_CREATED_BY:function(){return o},TEAM_INTEGRATIONS_SORT_TYPE_ENTITY:function(){return i},TEAM_INTEGRATIONS_SORT_TYPE_LAST_RUN:function(){return a},TEAM_INTEGRATIONS_SORT_TYPE_NAME:function(){return s},TEAM_INTEGRATIONS_SORT_TYPE_RELEVANCE:function(){return c},TEAM_INTEGRATIONS_SORT_TYPE_RULE:function(){return r},TEAM_INTEGRATIONS_SORT_TYPE_SERVICE:function(){return l}});const s="name",a="lastRunAt",i="entityName",r="ruleName",o="userName",l="serviceName",c="relevance"},"./js/constants/TeamIntegrationSortTypeMap.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/constants/TeamIntegrationSortConstants.js");const a={};a[s.TEAM_INTEGRATIONS_SORT_TYPE_NAME]="Name",a[s.TEAM_INTEGRATIONS_SORT_TYPE_ENTITY]="Entity",a[s.TEAM_INTEGRATIONS_SORT_TYPE_RULE]="Integration",a[s.TEAM_INTEGRATIONS_SORT_TYPE_SERVICE]="Service",a[s.TEAM_INTEGRATIONS_SORT_TYPE_CREATED_BY]="Created by",a[s.TEAM_INTEGRATIONS_SORT_TYPE_LAST_RUN]="Last run",a[s.TEAM_INTEGRATIONS_SORT_TYPE_RELEVANCE]="Relevance",t.default=a},"./js/stores/IntegrationsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ve}});var s,a,i,r,o,l,c,d,u,p,g,m,h,f,b,v,I,S,y,_,E,A,w,C,k,j,P,T,N,D,R,O,x,M,L,F,H,B,U,V,G,z,W,K,Y,q,$,J,Z,Q,X,ee,te,ne,se,ae,ie=n("../../node_modules/mobx/lib/mobx.module.js"),re=n("./integrations/constants/integrationsConstants.ts"),oe=n("./js/stores/StoreManager.js"),le=n("./js/stores/SyncStatusStore.js"),ce=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),de=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),ue=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),pe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),ge=(n("./integrations/monitoring/services/NewRelicService.js"),n("./integrations/monitoring/constants.js"),n("./node_modules/lodash/lodash.js"));function me(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function he(e,t,n,s,a){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const fe=3e5,be=8e3;let ve=(a=he((s=class{constructor(){me(this,"activeIntegrationsView",a,this),me(this,"serviceId",i,this),me(this,"activeServiceDetailsId",r,this),me(this,"ruleId",o,this),me(this,"teamIntegrations",l,this),me(this,"availableIntegrations",c,this),me(this,"loadingAvailableIntegrations",d,this),me(this,"loadingIntegrationClasses",u,this),me(this,"loadingIntegrationServices",p,this),me(this,"errorFetchingAvailableIntegrations",g,this),me(this,"availableIntegrationsErrorDetails",m,this),me(this,"filteredAvailableIntegrations",h,this),me(this,"filterByCategoryAvailableIntegrations",f,this),me(this,"integrationCategories",b,this),me(this,"noTeamIntegrations",v,this),me(this,"loadingTeamIntegrations",I,this),me(this,"errorInFetchingTeamIntegrations",S,this),me(this,"errorDetails",y,this),me(this,"ruleSpecificTeamIntegrations",_,this),me(this,"ruleSpecificTeamIntegrationErrors",E,this),me(this,"serviceDetails",A,this),me(this,"ruleDetails",w,this),me(this,"noRuleSpecificTeamIntegrations",C,this),me(this,"isHydrating",k,this),me(this,"isAdding",j,this),me(this,"categoryFilter",P,this),me(this,"createFormActiveRuleId",T,this),me(this,"createFormActiveServiceId",N,this),me(this,"workspaces",D,this),me(this,"entities",R,this),me(this,"selectedWorkspace",O,this),me(this,"selectedEntity",x,this),me(this,"selectedEntityVersion",M,this),me(this,"authDetails",L,this),me(this,"errorFetchingAuthDetails",F,this),me(this,"authDetailsError",H,this),me(this,"runLogPageData",B,this),me(this,"loadingRunLogPage",U,this),me(this,"errorInFetchingRunLogPageData",V,this),me(this,"runLogPageErrorDetails",G,this),me(this,"sourceConflicting",z,this),me(this,"refreshingRunLog",W,this),me(this,"authType",K,this),me(this,"availableIntegrationClasses",Y,this),me(this,"integrationCategories",q,this),me(this,"availableIntegrationServices",$,this),me(this,"availableIntegrationServicesByCategory",J,this),me(this,"filteredIntegrationServices",Z,this),me(this,"preferredEntities",Q,this),me(this,"integrationClass",X,this),me(this,"loadingIntegrationClass",ee,this),me(this,"errorFetchingIntegrationClass",te,this),me(this,"integrationInstance",ne,this),me(this,"loadingIntegrationInstance",se,this),me(this,"errorFetchingIntegrationInstance",ae,this),this.initializeFetchingTeamIntegrations=ge.debounce(this.initializeFetchingTeamIntegrations.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationClasses=ge.debounce(this.getAvailableIntegrationClasses.bind(this),fe,{leading:!0,trailing:!1}),this.getAvailableIntegrationServices=ge.debounce(this.getAvailableIntegrationServices.bind(this),fe,{leading:!0,trailing:!1}),this.initializeRuleSpecificTeamIntegrations=((e,t,n)=>{const s={};return(...a)=>{const[i,r]=a;return"function"==typeof s[r]||(s[r]=ge.debounce(e,t,{...n,leading:!0})),s[r](...a)}})(this.initializeRuleSpecificTeamIntegrations.bind(this),3e5,{leading:!0,trailing:!1})}setActiveIntegrationsView(e){this.activeIntegrationsView=e}readRuleSpecificTeamIntegrations(e){return(0,ie.toJS)(this.ruleSpecificTeamIntegrations[e])}readServiceDetails(e){return(0,ie.toJS)(this.serviceDetails[e])}readRuleDetails(e){return(0,ie.toJS)(this.ruleDetails[e])}setAuthType(e){this.authType=e}setRuleSpecificTeamIntegrations(e,t){this.ruleSpecificTeamIntegrations[e]=t}resetRuleSpecificTeamIntegrations(e){delete this.ruleSpecificTeamIntegrations[e]}setServiceDetails(e,t){this.serviceDetails[e]=t}setRuleDetails(e,t){this.ruleDetails[e]=t}resetServiceDetails(e){delete this.serviceDetails[e]}setActiveIntegrationRule(e,t){this.serviceId=e,this.ruleId=t}updateCategoryfilter(e){this.categoryFilter=e,this.updateIntegrationServicesPerCategory(e)}updateRuleSpecificTeamIntegrationsDataStatus(e,t,n,s){this.ruleSpecificTeamIntegrationErrors[s]={loading:e,error:t,errorDetails:n}}readRuleSpecificTeamIntegrationsDataStatus(e){return{loading:!0,...(0,ie.toJS)(this.ruleSpecificTeamIntegrationErrors[e])}}getRuleSpecificTeamIntegrationData(e,t){return this.updateRuleSpecificTeamIntegrationsDataStatus(!0,!1,"",t),Promise.all([de.default.fetchIntegrationClassDetails(t),de.default.fetchIntegrationServiceDetails(e),ce.default.getTeamIntegrationInstances(t)]).then((([n,s,a])=>{const i=ge.get(a,"body.data",[]),r=ge.get(n,"body.data",{}),o=ge.get(s,"body.data",{});if(200!==n.status||200!==a.status||200!==s.status||ge.isEmpty(r)||ge.isEmpty(o)){let e={};(200!==n.status||ge.isEmpty(r))&&(e.errorFetchingClassDetails=n),(200!==s.status||ge.isEmpty(o))&&(e.errorFetchingServiceDetatils=s),200!==a.status&&(e.errorFetchingTeamIntegrations=a),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}else{if(ge.isEmpty(i))this.setRuleSpecificTeamIntegrations(t,[]);else{let e=ge.map(i,(e=>({id:e.id,name:e.name,userId:e.createdBy.id,userName:ge.get(e,"createdBy.name")||ge.get(e,"createdBy.username")||ge.get(e,"createdBy.email")||"A user",isUserNameClickable:Boolean(ge.get(e,"createdBy.name")||ge.get(e,"createdBy.username")||ge.get(e,"createdBy.email")),userProfileUrl:e.createdBy.profilePicUrl,status:e.status,apiDetails:e.entity.api,entityType:e.entity.type,entityId:e.entity.id,entityName:e.entity.name,lastRunAt:e.lastRunAt,clientCategories:e.clientCategories})));this.setRuleSpecificTeamIntegrations(t,e)}this.setServiceDetails(e,o),this.setRuleDetails(t,r),this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!1,"",t)}})).catch((n=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,n,t),this.resetRuleSpecificTeamIntegrations(t),this.resetServiceDetails(e)}))}getTeamIntegrationsData(){return this.setLoadingIntegrationClasses(!0),this.setLoadingIntegrationServices(!0),Promise.all([de.default.fetchAvailableClasses(),de.default.fetchAvailableServices(),ce.default.getTeamIntegrations()]).then((([e,t,n])=>{const s=ge.get(t,"body.data",[]),a=ge.get(e,"body.data",[]),i=ge.get(n,"body.data",[]);if(200!==e.status||200!==n.status||200!==t.status||ge.isEmpty(s)||ge.isEmpty(a)){let i={};(200!==t.status||ge.isEmpty(s))&&(i.errorFetchingServices=t),(200!==e.status||ge.isEmpty(a))&&(i.errorFetchingClasses=e),200!==n.status&&(i.errorFetchingTeamIntegrations=n),this.updateData(!1,[]),this.updateState(!1,!0,i)}else{if(ge.isEmpty(i))this.updateData(!0,[]),this.updateState(!1,!1,"");else{const e=ge.groupBy(i,"rule"),t=ge.map(e,((e,t)=>{const n=e[0].service,i=ge.find(a,(e=>e.id===t)),r=ge.find(s,(e=>e.id===n));return{ruleName:ge.get(i,"name"),ruleId:t,serviceId:n,serviceName:ge.get(r,"name",""),serviceIconURL:ge.get(r,"iconUrl",""),serviceDarkIconURL:ge.get(r,"darkIconUrl",""),statusCount:ge.countBy(e,(e=>e.status)),totalIntegrations:e.length}})),n=this.defaultSortTeamIntegrations(t);this.updateData(!1,n),this.updateState(!1,!1,"")}const e=this.addDisplayNameToIntegrationClasses(a);this.setAvailableIntegrationClasses(e),this.setAvailableIntegrationServices(s),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory)}this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!1,"")})).catch((e=>{pm.logger.error("Error in fetching team integrations",e),this.updateData(!1,[]),this.updateState(!1,!0,e),this.setLoadingIntegrationServices(!1),this.setLoadingIntegrationClasses(!1),this.updateAvailableIntegrationsStatus(!1,!0,e)}))}setIsHydrating(e){this.isHydrating=e}updateState(e,t,n){this.loadingTeamIntegrations=e,this.errorInFetchingTeamIntegrations=t,this.errorDetails=n}updateData(e,t){this.noTeamIntegrations=e,this.teamIntegrations=t}updateAvailableIntegrations(e){this.availableIntegrations=e}updateIntegrationCategories(){this.integrationCategories=ue.default.getAllCategories(this.availableIntegrations)}setAvailableIntegrationServices(e){this.availableIntegrationServices=e}addDisplayNameToIntegrationClasses(e){const t={};return ge.forEach(e,(e=>{const n=ge.get(e,"services",[]);ge.forEach(n,(n=>{ge.get(t,n.id)?t[n.id].push(e.id):t[n.id]=[e.id]}))})),ge.forEach(e,(e=>{const n=ge.get(e,"services.0",{});e.displayName=ge.size(t[n.id])>1?e.name:n.name})),e}setAvailableIntegrationClasses(e){this.availableIntegrationClasses=e}getIntegrationCategoriesFromServices(){this.integrationCategories=ue.default.getAllIntegrationCategories(this.availableIntegrationServices)}updateIntegrationServicesPerCategory(e){let t=ue.default.filterByCategory(e,(0,ie.toJS)(this.availableIntegrationServices));ge.isEmpty(t)&&!ge.isEmpty((0,ie.toJS)(this.availableIntegrationServices))&&(this.updateCategoryfilter("all"),t=(0,ie.toJS)(this.availableIntegrationServices)),this.availableIntegrationServicesByCategory=t}updateFilteredIntegrationServices(e){this.filteredIntegrationServices=e}updateAvailableIntegrationsStatus(e,t,n){this.loadingAvailableIntegrations=e,this.errorFetchingAvailableIntegrations=t,this.availableIntegrationsErrorDetails=n}setLoadingIntegrationServices(e){this.loadingIntegrationServices=e}setLoadingIntegrationClasses(e){this.loadingIntegrationClasses=e}updateFilteredAvailableIntegrations(e){this.filteredAvailableIntegrations=e}updateFilterByCategoryAvailableIntegrations(e){let t=ue.default.filterByCategory(e,(0,ie.toJS)(this.availableIntegrations));ge.isEmpty(t)&&!ge.isEmpty((0,ie.toJS)(this.availableIntegrations))&&(this.updateCategoryfilter("all"),t=(0,ie.toJS)(this.availableIntegrations)),this.filterByCategoryAvailableIntegrations=t}initializeFetchingTeamIntegrations(){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}initializeRuleSpecificTeamIntegrations(e,t){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchRuleSpecificTeamIntegrations(e,t){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>this.getRuleSpecificTeamIntegrationData(e,t))).catch((e=>{this.updateRuleSpecificTeamIntegrationsDataStatus(!1,!0,e,t)}))}refetchTeamIntegrations(){(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.setIsHydrating(!0),this.getTeamIntegrationsData()))).catch((()=>{this.updateState(!1,!1,"")})).finally((()=>{this.setIsHydrating(!1)}))}getAvailableIntegrationClasses(){return this.setLoadingIntegrationClasses(!0),de.default.fetchAvailableClasses().then((e=>{const t=this.addDisplayNameToIntegrationClasses(ge.get(e,"body.data",[]));this.setAvailableIntegrationClasses(t),this.updateAvailableIntegrationsStatus(!1,!1,""),this.setLoadingIntegrationClasses(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationClasses(!1),pm.logger.error("Error occurred while fetching available integration classes",e)}))}getAvailableIntegrationServices(){return this.setLoadingIntegrationServices(!0),de.default.fetchAvailableServices().then((e=>{this.setAvailableIntegrationServices(ge.get(e,"body.data",[])),this.updateAvailableIntegrationsStatus(!1,!1,""),this.getIntegrationCategoriesFromServices(),this.updateIntegrationServicesPerCategory(this.categoryFilter),this.updateFilteredIntegrationServices(this.availableIntegrationServicesByCategory),this.setLoadingIntegrationServices(!1)})).catch((e=>{this.updateAvailableIntegrationsStatus(!1,!0,e),this.setLoadingIntegrationServices(!1),pm.logger.error("Error occurred while fetching available integration services",e)}))}populateIntegrationClasses(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationClasses()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}populateIntegrationServices(){return this.updateAvailableIntegrationsStatus(!0,!1,""),(0,oe.resolveStoreInstance)(le.default).onSyncAvailable({timeout:be}).then((()=>(this.updateAvailableIntegrationsStatus(!0,!1,""),this.getAvailableIntegrationServices()))).catch((()=>{this.updateAvailableIntegrationsStatus(!1,!1,"")}))}setActiveIntegrationService(e){this.activeServiceDetailsId=e}setActiveIntegrationCreateForm(e,t){this.createFormActiveServiceId=e,this.createFormActiveRuleId=t}setSelectedWorkspace(e){this.selectedWorkspace=e}setSelectedEntity(e){this.selectedEntity=e}setSelectedEntityVersion(e){this.selectedEntityVersion=e}resetSelectedWorkspace(){this.selectedWorkspace=null}resetSelectedEntity(){this.selectedEntity=null}resetSelectedEntityVersion(){this.selectedEntityVersion=null}resetAddIntegrationDependencies(){this.resetSelectedEntityVersion(),this.resetSelectedEntity(),this.resetSelectedWorkspace()}updateIsAdding(e){this.isAdding=e}updateSourceConflicting(e){this.sourceConflicting=e}readTeamIntegrations(){return(0,ie.toJS)(this.teamIntegrations)}updateIdentityResponse(e){this.authDetails=ge.get(e,"body.handover")}updateIdentityResponseStatus(e,t){this.errorFetchingAuthDetails=e,this.authDetailsError=t}setAuthDetails(e){this.authDetails=e}readAuthDetails(){return(0,ie.toJS)(this.authDetails)}defaultSortTeamIntegrations(e){const t=ge.filter(e,(e=>!!e.statusCount.failed)),n=ge.sortBy(t,(e=>ge.toLower(e.ruleName))),s=ge.sortBy(ge.difference(e,n),(e=>ge.toLower(e.ruleName)));return ge.concat(n,s)}updateRunsPageResponseStatus(e,t,n){this.loadingRunLogPage=e,this.errorInFetchingRunLogPageData=t,this.runLogPageErrorDetails=n}updateRunsPageResponse(e){this.runLogPageData=e}readIntegrationRunLogData(){return(0,ie.toJS)(this.runLogPageData)}updateRefreshingRunLog(e){this.refreshingRunLog=e}addPreferredEntity(e,t){const n={entityType:e,entityId:t};ge.some(this.preferredEntities,n)||this.preferredEntities.push(n)}getIntegrationClassDetails(e){return this.loadingIntegrationClass=!0,new Promise(((t,n)=>{de.default.fetchIntegrationClassDetails(e).then((e=>{const n=ge.get(e,"body.data");200!==e.status||ge.isEmpty(n)?this.errorFetchingIntegrationClass=e:(this.integrationClass=n,this.errorFetchingIntegrationClass=!1),this.loadingIntegrationClass=!1,t()})).catch((t=>{pm.logger.error("Error in fetching integration class details",e,t),this.errorFetchingIntegrationClass=t,this.loadingIntegrationClass=!1,n(t)}))}))}getIntegrationInstanceDetails(e){this.loadingIntegrationInstance=!0,pe.default.fetchIntegrationInstanceDetails(e).then((e=>{const t=ge.get(e,"body.data");200!==e.status||ge.isEmpty(t)?this.errorFetchingIntegrationInstance=e:(t.allowedActions=ge.get(e,"body.meta.allowedActions"),this.integrationInstance=t,this.errorFetchingIntegrationInstance=!1),this.loadingIntegrationInstance=!1})).catch((t=>{pm.logger.error("Error in fetching integration instance details",e,t),this.errorFetchingIntegrationInstance=t,this.loadingIntegrationInstance=!1}))}getIntegrationClasses(){return ge.isEmpty(this.availableIntegrationClasses)&&this.populateIntegrationClasses(),this.availableIntegrationClasses}getIntegrationServices(){return ge.isEmpty(this.availableIntegrationServices)&&this.populateIntegrationServices(),this.availableIntegrationServices}}).prototype,"activeIntegrationsView",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.INTEGRATIONS_VIEW.TEAM}}),i=he(s.prototype,"serviceId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r=he(s.prototype,"activeServiceDetailsId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=he(s.prototype,"ruleId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=he(s.prototype,"teamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=he(s.prototype,"availableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=he(s.prototype,"loadingAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=he(s.prototype,"loadingIntegrationClasses",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=he(s.prototype,"loadingIntegrationServices",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=he(s.prototype,"errorFetchingAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=he(s.prototype,"availableIntegrationsErrorDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=he(s.prototype,"filteredAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=he(s.prototype,"filterByCategoryAvailableIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=he(s.prototype,"integrationCategories",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=he(s.prototype,"noTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=he(s.prototype,"loadingTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=he(s.prototype,"errorInFetchingTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=he(s.prototype,"errorDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=he(s.prototype,"ruleSpecificTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=he(s.prototype,"ruleSpecificTeamIntegrationErrors",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=he(s.prototype,"serviceDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=he(s.prototype,"ruleDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=he(s.prototype,"noRuleSpecificTeamIntegrations",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=he(s.prototype,"isHydrating",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=he(s.prototype,"isAdding",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=he(s.prototype,"categoryFilter",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),T=he(s.prototype,"createFormActiveRuleId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=he(s.prototype,"createFormActiveServiceId",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=he(s.prototype,"workspaces",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=he(s.prototype,"entities",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=he(s.prototype,"selectedWorkspace",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=he(s.prototype,"selectedEntity",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=he(s.prototype,"selectedEntityVersion",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=he(s.prototype,"authDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),F=he(s.prototype,"errorFetchingAuthDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=he(s.prototype,"authDetailsError",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=he(s.prototype,"runLogPageData",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=he(s.prototype,"loadingRunLogPage",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=he(s.prototype,"errorInFetchingRunLogPageData",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=he(s.prototype,"runLogPageErrorDetails",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=he(s.prototype,"sourceConflicting",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=he(s.prototype,"refreshingRunLog",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=he(s.prototype,"authType",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=he(s.prototype,"availableIntegrationClasses",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=he(s.prototype,"integrationCategories",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=he(s.prototype,"availableIntegrationServices",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=he(s.prototype,"availableIntegrationServicesByCategory",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=he(s.prototype,"filteredIntegrationServices",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=he(s.prototype,"preferredEntities",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=he(s.prototype,"integrationClass",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=he(s.prototype,"loadingIntegrationClass",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=he(s.prototype,"errorFetchingIntegrationClass",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=he(s.prototype,"integrationInstance",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=he(s.prototype,"loadingIntegrationInstance",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=he(s.prototype,"errorFetchingIntegrationInstance",[ie.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he(s.prototype,"setActiveIntegrationsView",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveIntegrationsView"),s.prototype),he(s.prototype,"setAuthType",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setAuthType"),s.prototype),he(s.prototype,"setRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setRuleSpecificTeamIntegrations"),s.prototype),he(s.prototype,"resetRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"resetRuleSpecificTeamIntegrations"),s.prototype),he(s.prototype,"setServiceDetails",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setServiceDetails"),s.prototype),he(s.prototype,"setRuleDetails",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setRuleDetails"),s.prototype),he(s.prototype,"resetServiceDetails",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"resetServiceDetails"),s.prototype),he(s.prototype,"setActiveIntegrationRule",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveIntegrationRule"),s.prototype),he(s.prototype,"updateCategoryfilter",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateCategoryfilter"),s.prototype),he(s.prototype,"updateRuleSpecificTeamIntegrationsDataStatus",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateRuleSpecificTeamIntegrationsDataStatus"),s.prototype),he(s.prototype,"getRuleSpecificTeamIntegrationData",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getRuleSpecificTeamIntegrationData"),s.prototype),he(s.prototype,"getTeamIntegrationsData",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getTeamIntegrationsData"),s.prototype),he(s.prototype,"setIsHydrating",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setIsHydrating"),s.prototype),he(s.prototype,"updateState",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateState"),s.prototype),he(s.prototype,"updateData",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateData"),s.prototype),he(s.prototype,"updateAvailableIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateAvailableIntegrations"),s.prototype),he(s.prototype,"updateIntegrationCategories",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationCategories"),s.prototype),he(s.prototype,"setAvailableIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setAvailableIntegrationServices"),s.prototype),he(s.prototype,"setAvailableIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setAvailableIntegrationClasses"),s.prototype),he(s.prototype,"getIntegrationCategoriesFromServices",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getIntegrationCategoriesFromServices"),s.prototype),he(s.prototype,"updateIntegrationServicesPerCategory",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationServicesPerCategory"),s.prototype),he(s.prototype,"updateFilteredIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateFilteredIntegrationServices"),s.prototype),he(s.prototype,"updateAvailableIntegrationsStatus",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateAvailableIntegrationsStatus"),s.prototype),he(s.prototype,"setLoadingIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingIntegrationServices"),s.prototype),he(s.prototype,"setLoadingIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingIntegrationClasses"),s.prototype),he(s.prototype,"updateFilteredAvailableIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateFilteredAvailableIntegrations"),s.prototype),he(s.prototype,"updateFilterByCategoryAvailableIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateFilterByCategoryAvailableIntegrations"),s.prototype),he(s.prototype,"initializeFetchingTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"initializeFetchingTeamIntegrations"),s.prototype),he(s.prototype,"initializeRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"initializeRuleSpecificTeamIntegrations"),s.prototype),he(s.prototype,"refetchRuleSpecificTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"refetchRuleSpecificTeamIntegrations"),s.prototype),he(s.prototype,"refetchTeamIntegrations",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"refetchTeamIntegrations"),s.prototype),he(s.prototype,"getAvailableIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getAvailableIntegrationClasses"),s.prototype),he(s.prototype,"getAvailableIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getAvailableIntegrationServices"),s.prototype),he(s.prototype,"populateIntegrationClasses",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"populateIntegrationClasses"),s.prototype),he(s.prototype,"populateIntegrationServices",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"populateIntegrationServices"),s.prototype),he(s.prototype,"setActiveIntegrationService",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveIntegrationService"),s.prototype),he(s.prototype,"setActiveIntegrationCreateForm",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setActiveIntegrationCreateForm"),s.prototype),he(s.prototype,"setSelectedWorkspace",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedWorkspace"),s.prototype),he(s.prototype,"setSelectedEntity",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedEntity"),s.prototype),he(s.prototype,"setSelectedEntityVersion",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedEntityVersion"),s.prototype),he(s.prototype,"resetSelectedWorkspace",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"resetSelectedWorkspace"),s.prototype),he(s.prototype,"resetSelectedEntity",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"resetSelectedEntity"),s.prototype),he(s.prototype,"resetSelectedEntityVersion",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"resetSelectedEntityVersion"),s.prototype),he(s.prototype,"resetAddIntegrationDependencies",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"resetAddIntegrationDependencies"),s.prototype),he(s.prototype,"updateIsAdding",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsAdding"),s.prototype),he(s.prototype,"updateSourceConflicting",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateSourceConflicting"),s.prototype),he(s.prototype,"updateIdentityResponse",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIdentityResponse"),s.prototype),he(s.prototype,"updateIdentityResponseStatus",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIdentityResponseStatus"),s.prototype),he(s.prototype,"setAuthDetails",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"setAuthDetails"),s.prototype),he(s.prototype,"updateRunsPageResponseStatus",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateRunsPageResponseStatus"),s.prototype),he(s.prototype,"updateRunsPageResponse",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateRunsPageResponse"),s.prototype),he(s.prototype,"updateRefreshingRunLog",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"updateRefreshingRunLog"),s.prototype),he(s.prototype,"addPreferredEntity",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"addPreferredEntity"),s.prototype),he(s.prototype,"getIntegrationClassDetails",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getIntegrationClassDetails"),s.prototype),he(s.prototype,"getIntegrationInstanceDetails",[ie.action],Object.getOwnPropertyDescriptor(s.prototype,"getIntegrationInstanceDetails"),s.prototype),s)},"./onboarding/src/common/components/PageOffline/PageOffline.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");const o=e=>s.createElement("div",{className:"page-offline"},s.createElement("div",{className:"page-offline__icon-container"},s.createElement(r.default,{name:"icon-state-offline-stroke",color:"content-color-tertiary",className:"page-offline__icon-container--icon"})),s.createElement("div",{className:"page-offline__title"},e.title),s.createElement("div",{className:"page-offline__subtitle"},e.subtitle));o.defaultProps={title:"Unable to load data as you're offline",subtitle:"You can view your work once you're back online."},o.propTypes={title:i().string,subtitle:i().string},t.default=o},"./onboarding/src/features/Homepage/controllers/AuthRedirectionController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/IntegrationsStore.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/SyncStatusStore.js"),o=n("./js/modules/services/RemoteSyncRequestService.js"),l=n("./js/services/NavigationService.js"),c=n("./node_modules/lodash/lodash.js");class d extends s.default{didActivate({routeParams:e,queryParams:t}){(0,i.resolveStoreInstance)(r.default).onSyncAvailable({timeout:8e3}).then((()=>{o.default.request("/ws/proxy",{method:"post",data:{service:"identity",method:"get",path:"/api/handover",query:{handover_token:t.handover_token}}}).then((t=>{200!==t.status||c.isEmpty(t.body)?((0,i.resolveStoreInstance)(a.default).updateIdentityResponseStatus(!0,t),pm.toasts.error("something went wrong while authorizing user"),l.default.transitionTo("integrations.serviceDetails",{serviceId:e.serviceId})):((0,i.resolveStoreInstance)(a.default).updateIdentityResponse(t),l.default.transitionTo("integrations.authorized",{serviceId:e.serviceId,ruleId:e.ruleId}))})).catch((t=>{(0,i.resolveStoreInstance)(a.default).updateIdentityResponseStatus(!0,t),pm.toasts.error("something went wrong while authorizing user"),l.default.transitionTo("integrations.serviceDetails",{serviceId:e.serviceId})}))})).catch((t=>{pm.toasts.error("You should be online to create integrations"),l.default.transitionTo("integrations.serviceDetails",{serviceId:e.serviceId})}))}}t.default=d},"./onboarding/src/features/Homepage/controllers/AuthorizedIntegrationController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/IntegrationsStore.js"),r=n("./js/services/NavigationService.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),l=n("./node_modules/lodash/lodash.js");class c extends s.default{didActivate({routeParams:e,queryParams:t,additionalContext:n}){const s=(0,a.resolveStoreInstance)(i.default),c=t&&t.workspaceId||l.get(n,"selectedWorkspaceId");l.isEmpty(s.readAuthDetails())?(pm.toasts.error("User is not authorized to configure this integration"),r.default.transitionTo("integrations.serviceDetails",{serviceId:e.serviceId})):(this.serviceId=e.serviceId,this.ruleId=e.ruleId,s.setActiveIntegrationCreateForm(e.serviceId,e.ruleId),this.customComponentConfig=o.default[this.ruleId]||{},this.customComponentConfig.useLegacyDataFormat?(c&&s.setSelectedWorkspace({value:c,label:""}),l.get(n,"selectedEntityId",null)&&s.setSelectedEntity({value:l.get(n,"selectedEntityId"),label:""})):(c&&s.addPreferredEntity("workspace",c),l.get(n,"selectedEntityId")&&l.get(n,"selectedEntityType")&&s.addPreferredEntity(n.selectedEntityType,n.selectedEntityId)),this.preferredEntities=s.preferredEntities,this.additionalContext=n)}}t.default=c},"./onboarding/src/features/Homepage/controllers/BootcampController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/BootcampStore.js");class r extends s.default{didActivate(){(0,a.resolveStoreInstance)(i.default).setSkill(null),(0,a.resolveStoreInstance)(i.default).fetchSkills()}}t.default=r},"./onboarding/src/features/Homepage/controllers/BrowseIntegrationsController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/IntegrationsStore.js"),r=n("../../node_modules/mobx/lib/mobx.module.js");class o extends s.default{constructor(){super(),this.integrationsStore=(0,a.resolveStoreInstance)(i.default)}didCreate({queryParams:e}){const t=e.category||"all";this.integrationsStore.updateCategoryfilter(t)}didActivate({queryParams:e,additionalContext:t}){const n=e.category||"all";this.integrationsStore.updateCategoryfilter(n),this.integrationsStore.updateIntegrationServicesPerCategory(n),this.integrationsStore.updateFilteredIntegrationServices((0,r.toJS)(this.integrationsStore.availableIntegrationServicesByCategory)),this.additionalContext=t}}t.default=o},"./onboarding/src/features/Homepage/controllers/EditIntegrationController.js":function(e,t,n){"use strict";n.r(t);var s,a,i,r,o,l,c=n("./appsdk/pages/BasePageController.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=n("../../node_modules/mobx/lib/mobx.module.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),f=n("./onboarding/src/features/Homepage/controllers/utils.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),v=n("./node_modules/lodash/lodash.js"),I=n.n(v);function S(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function y(e,t,n,s,a){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let _=(s=class extends c.default{constructor(...e){super(...e),S(this,"allowedActions",a,this),S(this,"integrationData",i,this),S(this,"loadingIntegrationData",r,this),S(this,"errorInIntegrationData",o,this),S(this,"integrationDataErrorDetails",l,this)}updateIntegrationDataStatus(e,t,n){this.errorInIntegrationData=t,this.integrationDataErrorDetails=n,this.loadingIntegrationData=e}updateIntegrationData(e){this.integrationData=e}didActivate({routeParams:e,queryParams:t,additionalContext:n}){const s=(0,u.resolveStoreInstance)(p.default),a=t&&t.workspaceId,i=t&&t.apiId,r=t&&t.apiVersionId;this.integrationId=e.integrationId,(0,u.resolveStoreInstance)(d.default).onSyncAvailable({timeout:8e3}).then((()=>(this.updateIntegrationDataStatus(!0,!1,""),b.default.fetchIntegrationInstanceDetails(this.integrationId)))).then((e=>{const o=I().get(e,"body.data"),l=I().get(e,"body.meta.allowedActions");return 200!==e.status||I().isEmpty(o)?(this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e),Promise.reject("exit")):(this.classId=o.class,this.customComponentConfig=h.default[this.classId]||{},this.customComponentConfig.useLegacyDataFormat?(a&&s.setSelectedWorkspace({value:a}),i&&s.setSelectedEntity({value:i}),r&&s.setSelectedEntityVersion({value:r}),g.default.getIntegrationData(this.integrationId)):((0,f.parseEntitiesFromQueryParams)(t,s),I().get(n,"selectedEntityId")&&I().get(n,"selectedEntityType")&&s.addPreferredEntity(n.selectedEntityType,n.selectedEntityId),this.updateIntegrationData(o),this.allowedActions=l,this.updateIntegrationDataStatus(!1,!1,""),Promise.reject("exit")))})).then((e=>{let t=I().get(e,"body.data");return 200!==e.status||I().isEmpty(t)?Promise.reject(""):(t.allowedActions=I().get(e,["body","meta","allowedActions"]),!I().isEmpty(n)&&n.serviceId?(t.serviceId=n.serviceId,this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,""),Promise.reject("exit")):g.default.getIntegrationRuleDetails(t.rule).then((e=>{if(200!==e.status)return Promise.reject("");t.serviceId=I().get(e,"body.service.id"),this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,"")})))})).catch((e=>{this.preferredEntities=s.preferredEntities,"exit"!==e&&(this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e))}))}},a=y(s.prototype,"allowedActions",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=y(s.prototype,"integrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=y(s.prototype,"loadingIntegrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=y(s.prototype,"errorInIntegrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=y(s.prototype,"integrationDataErrorDetails",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y(s.prototype,"updateIntegrationDataStatus",[m.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationDataStatus"),s.prototype),y(s.prototype,"updateIntegrationData",[m.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIntegrationData"),s.prototype),s);t.default=_},"./onboarding/src/features/Homepage/controllers/IntegrationRunsListingController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/SyncStatusStore.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),n("./node_modules/lodash/lodash.js"));class c extends s.default{didCreate({additionalContext:e}){this.ruleName=l.get(e,"ruleName","")}didActivate({routeParams:e,queryParams:t,additionalContext:n}){let s=(0,i.resolveStoreInstance)(r.default);this.integrationId=e.integrationId,this.ruleName=l.get(n,"ruleName",""),(0,i.resolveStoreInstance)(a.default).onSyncAvailable({timeout:8e3}).then((async()=>{s.updateRunsPageResponseStatus(!0,!1,"");try{let[e,t]=await Promise.all([o.default.getIntegrationData(this.integrationId),o.default.getIntegrationRuns(this.integrationId)]);if(200===e.status&&200===t.status){let a=l.get(t,"body.data"),i=l.get(e,"body.data"),r=l.get(e,["body","meta","allowedActions"]),c={name:i.name,userId:i.createdBy,userName:l.get(n,"userName"),userProfileUrl:l.get(n,"userProfileUrl"),ruleId:i.rule,ruleName:l.get(n,"ruleName"),serviceId:l.get(n,"serviceId"),serviceName:l.get(n,"serviceName"),serviceIconURL:l.get(n,"serviceIconURL"),serviceDarkIconURL:l.get(n,"serviceDarkIconURL"),apiDetails:{id:l.get(n,["apiDetails","id"],""),name:l.get(n,["apiDetails","name"],"")},entityType:i.entity,entityId:i.executor,entityName:l.get(n,"entityName",""),integrationId:this.integrationId,integrationVariables:{postman_api_id:l.get(i,["variables","postman_api_id"])},runDetails:a,allowedActions:r};if(this.integrationVariables=l.get(i,["variables"]),l.isEmpty(n)){let e=await o.default.getIntegrationRuleDetails(i.rule);200===e.status?(c.serviceId=l.get(e,"body.service.id"),c.serviceName=l.get(e,"body.service.name"),c.serviceIconURL=l.get(e,"body.service.icon_url"),c.serviceDarkIconURL=l.get(e,"body.service.dark_icon_url"),c.ruleName=l.get(e,"body.name"),c.integrationId=this.integrationId,s.updateRunsPageResponseStatus(!1,!1,""),s.updateRunsPageResponse(c)):(s.updateRunsPageResponseStatus(!1,!0,""),s.updateRunsPageResponse([]))}else s.updateRunsPageResponseStatus(!1,!1,""),s.updateRunsPageResponse(c)}else s.updateRunsPageResponseStatus(!1,!0,""),s.updateRunsPageResponse([]),pm.logger.error("Error in fetching integration runs page data")}catch(e){s.updateRunsPageResponseStatus(!1,!0,e),s.updateRunsPageResponse([]),pm.logger.error("Error in fetching integration runs page data",e)}})).catch((()=>{s.updateRunsPageResponseStatus(!1,!1,"")}))}}t.default=c},"./onboarding/src/features/Homepage/controllers/IntegrationServiceSetupController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/IntegrationsStore.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),o=n("./onboarding/src/features/Homepage/controllers/utils.js"),l=n("./node_modules/lodash/lodash.js");class c extends s.default{didActivate({routeParams:e,queryParams:t,additionalContext:n}){const s=(0,a.resolveStoreInstance)(i.default),c=t&&t.workspaceId||l.get(n,"selectedWorkspaceId"),d=t&&t.apiId;this.serviceId=e.serviceId,this.ruleId=e.ruleId,this.classId=e.ruleId,s.setActiveIntegrationCreateForm(e.serviceId,e.ruleId),this.customComponentConfig=r.default[this.ruleId]||{},this.customComponentConfig.useLegacyDataFormat?(c&&s.setSelectedWorkspace({value:c}),d&&s.setSelectedEntity({value:d}),l.get(n,"selectedEntityId",null)&&s.setSelectedEntity({value:l.get(n,"selectedEntityId"),label:""})):((0,o.parseEntitiesFromQueryParams)(t,s),l.get(n,"selectedEntityId")&&l.get(n,"selectedEntityType")&&s.addPreferredEntity(n.selectedEntityType,n.selectedEntityId),l.get(n,"selectedWorkspaceId")&&s.addPreferredEntity("workspace",l.get(n,"selectedWorkspaceId"))),this.preferredEntities=s.preferredEntities,this.additionalContext=n}}t.default=c},"./onboarding/src/features/Homepage/controllers/IntegrationsPageController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/IntegrationsStore.js");class r extends s.default{didCreate(){}didActivate(){(0,a.resolveStoreInstance)(i.default).errorInReFetchingTeamIntegrations||(0,a.resolveStoreInstance)(i.default).errorInFetchingTeamIntegrations?(0,a.resolveStoreInstance)(i.default).refetchTeamIntegrations():(0,a.resolveStoreInstance)(i.default).initializeFetchingTeamIntegrations()}}t.default=r},"./onboarding/src/features/Homepage/controllers/ServiceDetailsPageController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/IntegrationsStore.js"),r=n("./js/modules/services/APIService.js");class o extends s.default{constructor(){super(),this.integrationsStore=(0,a.resolveStoreInstance)(i.default)}didCreate({routeParams:e,queryParams:t}){"pm_pro_api"===e.serviceId?(0,r.openAuthenticatedRoute)(`${pm.appUrl}/dpxy/settings/me/api-keys`):(this.serviceId=e.serviceId,this.integrationsStore.setActiveIntegrationService(e.serviceId))}didActivate({routeParams:e,queryParams:t,additionalContext:n}){"pm_pro_api"===e.serviceId?(0,r.openAuthenticatedRoute)(`${pm.appUrl}/dpxy/settings/me/api-keys`):(this.serviceId=e.serviceId,this.integrationsStore.setActiveIntegrationService(e.serviceId)),this.additionalContext=n}}t.default=o},"./onboarding/src/features/Homepage/controllers/TeamIntegrationsDetailsController.js":function(e,t,n){"use strict";n.r(t);var s=n("./appsdk/pages/BasePageController.js"),a=n("./js/stores/StoreManager.js"),i=n("./js/stores/IntegrationsStore.js"),r=n("./node_modules/lodash/lodash.js");class o extends s.default{didActivate({routeParams:e}){this.serviceId=e.serviceId,this.ruleId=e.ruleId,this.store=(0,a.resolveStoreInstance)(i.default),r.get(this.store.readRuleSpecificTeamIntegrationsDataStatus(this.ruleId),"error")||r.isNull(this.store.readRuleSpecificTeamIntegrations(this.ruleId))?this.store.refetchRuleSpecificTeamIntegrations(this.serviceId,this.ruleId):this.store.initializeRuleSpecificTeamIntegrations(this.serviceId,this.ruleId)}}t.default=o},"./onboarding/src/features/Homepage/controllers/utils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{parseEntitiesFromQueryParams:function(){return a}});var s=n("./node_modules/lodash/lodash.js");function a(e,t){s.forEach(e,((e,n)=>{const s=n.split("Id");if(2===s.length&&""===s[1]){const n=s[0].toLowerCase();t.addPreferredEntity(n,e)}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/StatuspageHelper.js":function(e,t,n){"use strict";n.r(t),n.d(t,{fetchSelectedOptions:function(){return r}});var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/statuspage.js"),a=n.n(s),i=n("./node_modules/lodash/lodash.js");function r(e){const{componentStatuses:t,incidentStatuses:n,impacts:s}=a();return{selectedSuccessStatus:i.find(t,["value",e.component_status_on_success])||null,selectedFailureStatus:i.find(t,["value",e.component_status_on_failure])||null,selectedIncidentStatus:i.find(n,["value",e.incident_status])||null,selectedImpact:i.find(s,["value",e.incident_impact])||null}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/Base/Announcement.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/messaging/Alert.js"),i=n("./js/services/NavigationService.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}class l extends s.Component{constructor(e){super(e),this.openExternalLink=this.openExternalLink.bind(this)}openExternalLink(e){const t=e.getAttribute("href");t&&i.default.openURL(t,{target:"_blank"})}renderIcon(){return s.createElement(r.default,{name:"icon-descriptive-announcements-stroke",color:"content-color-info",className:"alert-icon"})}render(){return s.createElement(a.default,o({className:"integration-page-banner",title:this.props.title,message:this.props.message,type:"info",renderIcon:this.renderIcon,onMessageLinkClick:this.openExternalLink},this.props))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/DatadogAddPage.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/Base/Announcement.js");function i(){return s.createElement(a.default,{title:"Datadog metrics names have changed",message:"The integration will be created with new metrics names.<br/>[Learn more](https://go.pstmn.io/docs-datadog-new-metric)."})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/DatadogRunsPage.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/Base/Announcement.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Modals/UpdateModal.js");class r extends s.Component{constructor(e){super(e),this.state={openUpdateModal:!1},this.handleModalClose=this.handleModalClose.bind(this)}handleModalClose(){this.setState({openUpdateModal:!1})}render(){return s.createElement("div",null,s.createElement(i.default,{isOpen:this.state.openUpdateModal,handleRequestClose:this.handleModalClose,updatePayload:this.props.updatePayload,hideBanner:this.props.hideBanner}),s.createElement(a.default,{title:"Update your integration",message:"Track unlimited Postman metrics for free on Datadog and get a custom dashboard to better observe your monitor performance. [Learn more](https://go.pstmn.io/docs-datadog-new-metric).",primaryAction:{label:"Update Now",onClick:()=>{this.setState({openUpdateModal:!0})}},isDismissable:!1}))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/AvailableIntegrationsList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationCard:function(){return I},default:function(){return v}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/classnames/index.js"),i=n.n(a),r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/RequestIntegration.js"),p=n("./appsdk/components/link/Link.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsLabels.js"),m=n("./integrations/navigation/constants.js"),h=n("./js/modules/services/AnalyticsService.js"),f=n("./js/controllers/theme/ThemeManager.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}function v(e){return o().isEmpty(e.services)?s.createElement(d.default,{requestNewIntegration:!0}):s.createElement(s.Fragment,null,s.createElement("ul",{className:"integrations-cards__list"},o().map(e.services,(t=>s.createElement(I,b({key:t.id},t,{additionalContext:e.additionalContext}))))),s.createElement(u.default,null))}class I extends s.Component{constructor(e){super(e),this.state={currentTheme:f.default.getCurrentTheme(),showFallbackIcon:!1},this.handleThemeChange=this.handleThemeChange.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange)}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleThemeChange(e){this.setState({currentTheme:e})}render(){const{id:e,name:t,description:n,iconUrl:a,darkIconUrl:r,additionalContext:o}=this.props;return s.createElement(p.default,{className:"integrations-cards__list-item",to:"pm_pro_api"===e?"https://go.pstmn.io/postman-api-public-workspace":{routeIdentifier:m.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,routeParams:{serviceId:e}},options:{additionalContext:o}},s.createElement("li",{onClick:()=>{h.default.addEventV2({category:"integrations",action:e+"_card_click",label:"team_integrations_browse",value:1})}},s.createElement("div",{className:"integrations-cards__list-item--heading-wrapper"},s.createElement("div",{className:"integrations-cards__list-item--heading"},s.createElement("div",{className:"integrations-cards__list-item--icon-container"},!this.state.showFallbackIcon&&s.createElement("img",{className:"integrations-cards__list-item--icon",src:r&&"dark"===this.state.currentTheme?r:a,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&s.createElement("div",{className:"integrations-cards__list-item--icon integrations-cards__list-item--fallback-icon"})),s.createElement(l.default,{type:"h4",text:t})),g.INTEGRATION_LABELS[e]?s.createElement("div",{className:i()("integrations-cards__list-item--badge",{"integrations-cards__list-item--badge-new":"new"===g.INTEGRATION_LABELS[e].toLowerCase(),"integrations-cards__list-item--badge-noteworthy":"noteworthy"===g.INTEGRATION_LABELS[e].toLowerCase()})},g.INTEGRATION_LABELS[e]):""),s.createElement("div",{className:"integrations-cards__list-item--desc"},s.createElement(c.default,{type:"body-large"},n))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/Breadcrumbs.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/CurrentUserStore.js"),d=n("./integrations/navigation/constants.js"),u=n("./js/navigation/active-mode/constants.js"),p=n("./appsdk/components/link/Link.js");let g=(0,o.observer)(s=class extends a.Component{constructor(e){super(e)}render(){let e=r().get((0,l.resolveStoreInstance)(c.default),"team.name","Home");return a.createElement("div",{className:"integrations-browse-view-breadcrumbs"},a.createElement("span",{title:e,className:"integrations-browse-view-breadcrumbs__team-name"},a.createElement(p.default,{to:{routeIdentifier:u.HOME}},e)),a.createElement("span",{className:"integrations-browse-view-breadcrumbs__divider"},"/"),a.createElement("span",{className:"integrations-browse-view-breadcrumbs__integration-page"},a.createElement(p.default,{to:{routeIdentifier:d.OPEN_INTEGRATIONS_HOME_IDENTIFIER}},"Integrations")),a.createElement("span",{className:"integrations-browse-view-breadcrumbs__divider"},"/"),a.createElement("span",{className:"integrations-browse-view-breadcrumbs__text"},"Browse"))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/BrowseIntegrationsPage.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./node_modules/classnames/index.js"),l=n.n(o),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=n("./js/components/base/FuzzySearchInput.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./js/stores/IntegrationsStore.js"),m=n("./js/stores/StoreManager.js"),h=n("./js/stores/SyncStatusStore.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),v=n("./integrations/navigation/constants.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/AvailableIntegrationsList.js"),S=n("../../node_modules/mobx/lib/mobx.module.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingAvailableIntegrations.js"),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/Breadcrumbs.js"),A=n("./js/modules/services/AnalyticsService.js"),w=n("./appsdk/components/link/Link.js"),C=n("./iam/src/common/components/withPermissions.js"),k=n("./js/stores/CurrentUserStore.js"),j=n("./js/services/NavigationService.js"),P=n("./js/navigation/active-mode/constants.js"),T=n("./onboarding/navigation/constants.js");let N=(0,p.observer)(s=class extends a.Component{constructor(e){super(e),this.state={searchTerm:""},this.handleFuzzySearch=this.handleFuzzySearch.bind(this),this.integrationsStore=(0,m.resolveStoreInstance)(g.default),this.syncStatusStore=(0,m.resolveStoreInstance)(h.default)}componentDidMount(){A.default.addEventV2({category:"integrations",action:"browse_integrations_teams_view",label:"team_integrations_browse",value:1})}handleFuzzySearch(e,t){e?this.integrationsStore.updateFilteredIntegrationServices(t):this.integrationsStore.updateFilteredIntegrationServices((0,S.toJS)(this.integrationsStore.availableIntegrationServicesByCategory)),this.setState({searchTerm:e})}render(){let e=!this.syncStatusStore.isSocketConnected,{searchTerm:t}=this.state,n=this.integrationsStore.loadingIntegrationServices,s=this.integrationsStore.getIntegrationServices(),i=this.integrationsStore.categoryFilter||"all",o=(0,S.toJS)(this.integrationsStore.integrationCategories),c=(0,S.toJS)(this.integrationsStore.availableIntegrationServicesByCategory),p=(0,S.toJS)(this.integrationsStore.filteredIntegrationServices);return n?a.createElement("div",{className:"integrations-page-container"},a.createElement(_.default,null)):e&&r().isEmpty(s)?a.createElement("div",{className:"integrations-page-container"},a.createElement(f.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."})):this.integrationsStore.errorFetchingAvailableIntegrations?a.createElement("div",{className:"integrations-page-container"},a.createElement(b.default,{errorDetails:(0,S.toJS)(this.integrationsStore.availableIntegrationsErrorDetails)})):r().isEmpty(s)?a.createElement("div",{className:"integrations-page-container"},a.createElement(f.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."})):a.createElement("div",{className:"integrations-page-container"},a.createElement("div",{className:"browse-integrations-page"},a.createElement(E.default,null),a.createElement("div",{className:"browse-integrations-page-heading"},"Browse Integrations"),a.createElement("div",{className:"browse-integrations__list--description"},"Connect Postman to your development workflows with integrations."),a.createElement("div",{className:"browse-integration-categories-sidebar visible-desktop-block"},a.createElement("div",{className:"browse-integration-categories-sidebar__list-wrapper"},a.createElement(d.default,{type:"h4",text:"Categories"}),a.createElement("ul",{className:"browse-integration-categories-sidebar__list"},o.map((e=>a.createElement(w.default,{key:e,to:{routeIdentifier:v.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:e.toLowerCase()}},options:{additionalContext:r().get(this.props,"controller.additionalContext")},onClick:()=>{this.integrationsStore.updateCategoryfilter(e)}},a.createElement("li",{className:l()("browse-integration-categories-sidebar__list--item",{"browse-integration-categories-sidebar__list--item-is-selected":i.toLowerCase()===e.toLowerCase()}),key:e},e,a.createElement("span",{className:"count"},y.default.countServicesByCategory(e,s))))))))),a.createElement("div",{className:"browse-integrations__list"},a.createElement(u.default,{ref:"fuzzySearch",searchQuery:t,placeholder:"Search",onChange:this.handleFuzzySearch,items:c,searchFields:["name","description"]}),a.createElement(I.default,{services:y.default.sortAvailableIntegrations(p),additionalContext:this.props.controller.additionalContext}))))}})||s;t.default=(0,p.observer)((e=>{let t=r().get((0,m.resolveStoreInstance)(k.default),"teamId"),n=r().get((0,m.resolveStoreInstance)(k.default),"isCurrentUserPartner"),s={IllustrationComponent:c.default,forbiddenMessage:n?"As a partner you don't have permission to view this page.":"You don't have permission to view this page.",primaryAction:{text:n?"View Partner Workspaces":"View Workspaces",action:()=>{j.default.transitionTo(T.OPEN_WORKSPACES_HOME_IDENTIFIER)}},secondaryAction:{text:"Go To Home",action:()=>{j.default.transitionTo(P.HOME)}}};const i=(0,C.default)({permission:"VIEW_INTEGRATIONS_IN_TEAM",objectType:"team",objectId:t},s,{canView:!0,showSpinner:!1})(N);return a.createElement(i,e)}))},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/RequestIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/classnames/index.js"),i=n.n(a),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("./js/services/NavigationService.js");const c="https://go.pstmn.io/new-integration-request";function d(e){const{className:t}=e;return s.createElement("div",{className:i()("request-integration",t)},s.createElement("div",{className:"request-integration__description"},s.createElement("h3",{className:"request-integration__title"},"Couldn't find the integration you were looking for?"),s.createElement("div",{className:"request-integration__action"},s.createElement("a",{className:"pm-link",href:c,rel:"noopener noreferrer",target:"_blank",onClick:e=>{e.preventDefault(),e.stopPropagation(),l.default.openURL(c,{target:"_blank"})}},"Request an Integration",s.createElement(o.default,{name:"icon-action-openWeb-stroke",color:"content-color-link"})))),s.createElement("div",{className:"request-integration__image"},s.createElement(r.default,null)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormFooter/ConnectedAccountsAddIntegrationButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n("../../node_modules/react/index.js"),a=n("./integrations/services/ConnectedAccountsService.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./node_modules/async/dist/async.js"),l=n.n(o),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./js/services/NavigationService.js"),p=n("./integrations/navigation/constants.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/default/DefaultAddIntegrationButton.js");class m extends s.Component{constructor(e){super(e),this.state={loading:!1,error:null},this.createConnectedAccountAndIntegration=this.createConnectedAccountAndIntegration.bind(this)}createConnectedAccountAndIntegration(){const{serviceId:e,connectedAccountClassInput:t,inputs:n,connectedAccountName:s,classId:i,integrationName:o}=this.props,g=r().get(t,"key",""),m=r().get(n,g,{});l().waterfall([e=>{this.setState({loading:!0,error:null},(()=>{e()}))},t=>{d.default.addEventV2AndPublish({category:"installed_apps",action:"createIntegrationWithInstalledApp",label:i+"creation with_installed_app_of_"+e,value:1}),a.default.createConnectedAccount(e,m,s).then((({body:e,status:n})=>200===n&&r().get(e,"data.id")?t(null,r().get(e,"data.id")):t({msg:"We were unable to create the connected account"}))).catch((e=>t({msg:"Unable to create connected account",details:e})))},(t,s)=>(n[g]={connectedAccountId:t},c.default.createIntegrationInstance(i,o,n).then((({body:t,status:n})=>{if(200!==n||!r().get(t,"data.id"))return s({msg:"We were able to save the auth to the team, but were unable to create the integration"});if(pm.toasts.success("Added a new integration and saved the auth to the team!"),d.default.addEventV2({category:"integrations",action:i+"_created_integration_with_ca",label:"team_integrations_create_form_ca",value:1}),r().isEmpty(this.props.redirect))u.default.transitionTo(p.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:e,ruleId:i});else{const{identifier:e,routeParams:n,queryParams:s,onCreate:a}=this.props.redirect;r().isFunction(a)?a(t.data):u.default.transitionTo(e,n,s)}})).catch((e=>s({msg:"We were able to save the auth to the team, but were unable to create the integration",details:e}))))],(e=>this.setState({error:e.msg,loading:!1},(()=>{const t="Something went wrong while creating the integration",n=e.msg;pm.toasts.error(n||t,r().assign({},n&&{title:t})),pm.logger.error("Could not create connected account + integration",e)}))))}render(){const{classId:e,disabled:t,inputs:n,integrationName:a,serviceId:i,shouldAddConnectedAccount:r}=this.props,o=!!r&&this.createConnectedAccountAndIntegration;return s.createElement(g.default,{classId:e,disabled:t||this.state.loading,handleAddIntegration:o,inputs:n,name:a,serviceId:i,redirect:this.props.redirect})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormFooter/ConnectedAccountsIntegrationFormFooter.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("./appsdk/components/link/Link.js"),o=n("./iam/src/common/RouteIdentifierConfig.js");class l extends s.Component{render(){const{userCanCreate:e,toggleState:t,onToggle:n,teamHasConnectedAccount:l,connectedAccountLoading:c,isUsingConnectedAccount:d}=this.props;return!e||c||d||l?null:s.createElement(s.Fragment,null,s.createElement(a.default,{isChecked:t,label:"Add Slack for your team",onChange:n,isDisabled:Boolean(l)}),s.createElement(i.default,{type:"para",color:"content-color-secondary",lineLengthType:"default"},"This will let members of your team access channels from your organizations Slack workspace within Postman. Learn more about ",s.createElement(r.default,{to:pm.artemisUrl+"/"+o.CONNECTED_ACCOUNT_ROUTE,target:"_blank"},s.createElement(i.default,{type:"link-default"}," installed apps."))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-success-stroke.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),u=n("./node_modules/lodash/lodash.js"),p=n.n(u);class g extends s.Component{componentDidMount(){const e=(0,d.getPreferredEntityId)(this.props.preferredEntities,"connectedAccount");e&&p().isFunction(this.props.onSelection)&&this.props.onSelection(e)}render(){const{connectedAccount:e,isLoading:t,isUsingPersonalCredentials:n,orphaned:d,reauthenticateCallback:u,primarySuccessText:p,primaryOrphanedText:g,reauthenticateText:m,reauthenticateWithAnotherAccount:h,primaryChangeAuthenticationText:f,changeAuthenticationText:b,changeAuthenticationCallback:v}=this.props;return t?s.createElement(a.default,null):h?s.createElement("div",{className:"integrations-connected-account__form__header"},s.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},s.createElement(l.default,{color:"content-color-primary"}),s.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},f,s.createElement("div",{className:"integrations-connected-account__form__header__helper"},s.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>v()}," ",b," "))))):d?s.createElement("div",{className:"integrations-connected-account__form__header"},s.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},s.createElement(l.default,{color:"base-color-error"}),s.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},g,s.createElement("div",{className:"integrations-connected-account__form__header__helper"},"To continue using this integration,",s.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>u()}," ",m," "))))):n||!e?null:s.createElement(s.Fragment,null,s.createElement("div",{className:"integrations-connected-account__form__header"},s.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},s.createElement(c.default,{color:"base-color-success"}),s.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},s.createElement(r.default,{styleAs:"h6",type:"h6",text:p,color:"content-color-secondary"}),s.createElement(o.default,{onClick:()=>u(),type:"plain",text:m})))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),o=n("./js/components/base/Buttons.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/services/NavigationService.js"),d=n("./node_modules/prop-types/index.js"),u=n.n(d);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}let g=(0,l.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{onCancel:e,...t}=this.props;return a.createElement("div",{className:"integrations-form-actions__button--container"},a.createElement(o.Button,p({className:"integrations-form-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{if(this.store.resetAddIntegrationDependencies(),e)return e();c.default.back()}},t)," Cancel "))}})||s;g.propTypes={onCancel:u().func}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/IntegrationFormInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),o=n("./js/components/base/Markdown.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PasswordInput.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/StringInput.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/NumberInput.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/FreeformTextInput.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanWorkspaceInput.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanCollectionInput.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanMonitorInput.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanAPIInput.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanAPIVersionInput.js");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},v.apply(this,arguments)}const I={postman:{collection:m.default,monitor:h.default,api:f.default,apiversion:b.default,workspace:g.default}},S=["string","boolean","number","enum","object","array"];function y(e){const{input:t}=e;let n,a=t.type,g=i().split(a,"-"),m=g.length>1,h=m&&i().has(I,g);if(i().includes(S,a)||m&&h||(i().isFunction(e.onInvalidInput)&&e.onInvalidInput(),a="string"),h)n=i().get(I,g);else if(i().isObject(t.options))n=p.default;else switch(a){case"string":n=t.sensitive?l.default:c.default;break;case"number":n=d.default;break;case"array":case"object":n=u.default;break;case"boolean":t.options=i().isEmpty(t.options)?["true","false"]:t.options,n=p.default}return n?h?s.createElement(n,v({id:t.id,input:t},e)):s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",t.name," "),t.description&&s.createElement(o.default,{className:"integrations-form__segment__label-description",source:t.description,linkTarget:"_blank"}),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(n,v({id:t.id,input:t},e)))):s.createElement(r.default,{errorDetails:{title:"Unsupported input",subtitle:"This integration is unsupported on this app. Please update the app or use the webpage to use this integration."}})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/SelectDropdown.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js");class c extends s.Component{constructor(e){super(e),this.state={selectedOption:void 0,serviceActionInputs:{},options:[],loading:!1,error:null,disabled:!1},this.isDynamicDropdown=this.isDynamicDropdown.bind(this),this.didServiceActionInputsChange=this.didServiceActionInputsChange.bind(this),this.updateDisabledState=this.updateDisabledState.bind(this),this.isDisabled=this.isDisabled.bind(this),this.fetchDynamicOptions=this.fetchDynamicOptions.bind(this),this.selectedTarget=this.selectedTarget.bind(this)}componentDidMount(){this.isDynamicDropdown()&&this.updateDisabledState(this.fetchDynamicOptions)}componentDidUpdate(e){this.isDynamicDropdown()&&this.didServiceActionInputsChange(e)&&this.updateDisabledState(this.fetchDynamicOptions)}isDynamicDropdown(){const e=r().get(this.props,"input.options");return!r().isEmpty(e)&&r().has(e,"service")&&r().has(e,"serviceActionId")}didServiceActionInputsChange(e){const t=(0,l.getServiceActionInputsMap)(r().get(e,"input.options"),e.allInputs),n=(0,l.getServiceActionInputsMap)(r().get(this.props,"input.options"),this.props.allInputs);return!r().isEqual(n,t)}updateDisabledState(e=(()=>{})){if(r().isNil(this.props.integrationInstanceId)&&(0,l.isBlockedOnAnotherInput)(r().values(r().get(this.props,"input.options.inputs",{})),this.props.allInputs)){if(!this.state.disabled)return this.setState({disabled:!0},e)}else if(this.state.disabled)return this.setState({disabled:!1},e);return e()}isDisabled(){return this.props.disabled||this.state.disabled}fetchDynamicOptions(){r().isEmpty(this.props.allInputs)||this.isDisabled()||this.setState({options:[],loading:!0,error:null},(()=>{const e=this.props.input,t=e.options||{};return o.default.runServiceAction(t.service,t.serviceActionId,(0,l.getServiceActionInputsMap)(t,this.props.allInputs),e.integrationClass,e.id,this.props.integrationInstanceId||null).then((e=>{const n=r().get(e,"body",[]),s=r().get(t,"labelPath",void 0),a=r().get(t,"valuePath",void 0),i=(0,l.convertObjectListToOptions)(n,s,a);if(!(0,l.isValidSetOfOptions)(i))throw new Error("Malformed response");return this.setState({options:i,loading:!1})})).catch((e=>this.setState({error:"Unable to load options. ",loading:!1,options:[]},(()=>{pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching options"),r().get(e,"error.title")?{title:e.error.title}:{}),pm.logger.error("Error occurred while fetching options",e)}))))}))}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}getDropdownOptions(e){return r().isNil(e)?null:r().isString(e)?{label:e,value:e}:r().isArray(e)?r().map(e,(e=>this.getDropdownOptions(e))):r().isObject(e)&&r().has(e,"label")&&r().has(e,"value")?e:{label:JSON.stringify(e),value:e}}selectedTarget(e,t,n){if(this.state.selectedOption)return this.state.selectedOption;const s=this.getDropdownOptions(n);return r().isEmpty(s)?s:t?r().map(s,(t=>r().find(e,(e=>e.value===t.value)))):r().find(e,(e=>e.value===s.value))}render(){const{input:e,currentValue:t}=this.props,n=this.isDynamicDropdown()?this.state.options:r().map(e.options,(e=>this.getDropdownOptions(e))),i="array"===e.type,o=r().get(this.props,"isCreatable","enum"!==e.type),l=this.props.error||this.state.error,c=l&&(this.state.error||r().isFunction(this.props.onRetry));return s.createElement("div",null,s.createElement(a.default,{isCreatable:o,multi:i,className:l&&"is-error",disabled:this.isDisabled()||this.state.loading,value:this.selectedTarget(n,i,t),onValueClick:e=>{this.setState({selectedOption:e},(()=>{if(r().isFunction(this.props.onUserInput)){const t=i&&r().map(e,"value")||r().get(e,"value",e);this.props.onUserInput(t,!0)}}))},loading:this.props.loading||this.state.loading,isClearable:!e.mandatory,filterOption:this.filterOnLabel,noResultsText:"No results found",options:n,ref:"inputSelect",menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),l&&s.createElement("div",{className:"integrations-form__segment__input__error"},l,c&&s.createElement("span",{onClick:()=>{this.state.error&&this.fetchDynamicOptions(),this.props.error&&r().isFunction(this.props.onRetry)&&this.props.onRetry()},className:"integrations-form__segment__input__error__btn"}," Retry ")))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/FreeformTextInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/TextArea.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{id:t,error:n,...i}=e;return s.createElement("div",null,s.createElement(a.default,o({id:t,inputStyle:"box",type:"text",error:n?"This is a mandatory field":"",onChange:t=>{r().isFunction(e.onUserInput)&&e.onUserInput(t)},value:e.currentValue},i)),n&&s.createElement("div",{className:"integrations-form__segment__input__error"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/NumberInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{id:t,error:n,...i}=e;return s.createElement("div",null,s.createElement(a.Input,o({id:t,inputStyle:"box",type:"number",error:n?"This is a mandatory field":"",onChange:t=>{r().isFunction(e.onUserInput)&&e.onUserInput(t)},value:e.currentValue},i)),n&&s.createElement("div",{className:"integrations-form__segment__input__error"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PasswordInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/PasswordInput.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./node_modules/classnames/index.js"),l=n.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}const d=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function u(e){const{id:t,error:n,...i}=e;return s.createElement("div",null,s.createElement(a.default,c({inputStyle:"box",type:"text",error:n?"This is a mandatory field":"",placeholder:"************",className:d(e.className,e.error),onChange:t=>{r().isFunction(e.onUserInput)&&e.onUserInput(t)},value:e.currentValue},i)),n&&s.createElement("div",{className:"integrations-form__segment__input__error"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanAPIInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js"),o=n("./js/components/base/Markdown.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanWorkspaceInput.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),d=n("./api-dev/services/APIDevService.js");class u extends s.Component{constructor(e){super(e),this.state={workspaceId:null,workspaceError:null,apis:[],loading:!1,error:null},this.fetchAPIsInSelectedWorkspace=this.fetchAPIsInSelectedWorkspace.bind(this)}componentDidMount(){this.fetchAPIsInSelectedWorkspace();const e=(0,c.getPreferredEntityId)(this.props.preferredEntities,"api");i().isFunction(this.props.onUserInput)&&e&&this.props.onUserInput(e)}fetchAPIsInSelectedWorkspace(){this.state.workspaceId&&!this.props.disabled&&this.setState({apis:[],loading:!0,error:null},(()=>{d.default.getWorkspaceAPIs(this.state.workspaceId).then((e=>{const t=(0,c.convertEntityListToOptions)(e);if(!(0,c.isValidSetOfOptions)(t))throw new Error("Malformed response");return this.setState({apis:t,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1},(()=>{pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error occurred while fetching APIs",e)}))}))}))}render(){const{error:e,disabled:t,input:n,currentValue:a,onUserInput:c}=this.props;return s.createElement(s.Fragment,null,s.createElement(l.default,{input:i().assign({},n,{name:"Select a Workspace",description:"The API that you choose next must be in this workspace.",id:n.id+"-ws",mandatory:!0,type:"string",key:"workspaceId"}),disabled:t,error:this.state.workspaceError,onUserInput:e=>{e!==this.state.workspaceId&&this.setState({workspaceId:e,workspaceError:i().isEmpty(e)&&"This field is mandatory"},(()=>{this.fetchAPIsInSelectedWorkspace()}))},currentValue:this.state.workspaceId,preferredEntities:this.props.preferredEntities}),s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",n.name," "),n.description&&s.createElement(o.default,{className:"integrations-form__segment__label-description",source:n.description,linkTarget:"_blank"}),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(r.default,{id:n.id,input:i().assign({},n,{options:this.state.apis}),onRetry:this.state.error&&(()=>this.fetchAPIsInSelectedWorkspace()),disabled:t||this.state.loading||i().isNil(this.state.workspaceId),error:this.state.error||e,loading:this.state.loading,currentValue:a,onUserInput:c,isCreatable:!1}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanAPIVersionInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanAPIInput.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js"),l=n("./js/components/base/Markdown.js"),c=n("./api-dev/services/APIDevService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js");function u(e,t){return i().get(i().find(t,["key",e]),"value",null)}class p extends s.Component{constructor(e){super(e);const t=(n=e.allInputs,i().pick(i().find(n,["type","postman-api"]),["key","value"]));var n;this.state={classApiInputKey:t.key,apiId:t.value,apiError:null,apiVersions:[],loading:!1,error:null,disabled:!1},this.fetchVersionsOfSelectedAPI=this.fetchVersionsOfSelectedAPI.bind(this),this.updateApiAndDisabledState=this.updateApiAndDisabledState.bind(this),this.didApiValueChange=this.didApiValueChange.bind(this),this.isDisabled=this.isDisabled.bind(this)}componentDidMount(){this.fetchVersionsOfSelectedAPI();const e=(0,d.getPreferredEntityId)(this.props.preferredEntities,"apiversion");i().isFunction(this.props.onUserInput)&&e&&this.props.onUserInput(e)}componentDidUpdate(e){this.state.classApiInputKey&&this.didApiValueChange(e)&&this.updateApiAndDisabledState(this.fetchVersionsOfSelectedAPI)}updateApiAndDisabledState(e=(()=>{})){const t=this.state.classApiInputKey&&(0,d.isBlockedOnAnotherInput)([this.state.classApiInputKey],this.props.allInputs),n=u(this.state.classApiInputKey,this.props.allInputs);if(t){if(!this.state.disabled)return this.setState({disabled:!0,apiId:n},e)}else if(this.state.disabled)return this.setState({disabled:!1,apiId:n},e);return this.setState({apiId:n},e)}didApiValueChange(e){return u(this.state.classApiInputKey,e.allInputs)!==u(this.state.classApiInputKey,this.props.allInputs)}isDisabled(){return this.props.disabled||this.state.disabled||i().isNil(this.state.apiId)}fetchVersionsOfSelectedAPI(){this.state.apiId&&this.setState({apiVersions:[],loading:!0,error:null},(()=>{c.default.getVersions(this.state.apiId).then((e=>{const t=(0,d.convertEntityListToOptions)(e);if(!(0,d.isValidSetOfOptions)(t))throw new Error("Malformed response");return this.setState({apiVersions:t,loading:!1})})).catch((e=>this.setState({error:"Unable to load API versions",loading:!1},(()=>{pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error occurred while fetching API versions",e)}))))}))}render(){const{error:e,disabled:t,input:n,currentValue:a,onUserInput:c}=this.props;return s.createElement(s.Fragment,null,!this.state.classApiInputKey&&s.createElement(r.default,{input:i().assign({},n,{name:"Select an API to integrate with",description:"The version that you choose next must belong to this API.",id:n.id+"-api",mandatory:!0,type:"string",key:"apiId"}),disabled:t,error:this.state.apiError,onUserInput:e=>{e!==this.state.apiId&&this.setState({apiId:e,apiError:i().isEmpty(e)&&"This field is mandatory"},(()=>{this.fetchVersionsOfSelectedAPI()}))},currentValue:this.state.apiId,preferredEntities:this.props.preferredEntities}),s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",n.name," "),n.description&&s.createElement(l.default,{className:"integrations-form__segment__label-description",source:n.description,linkTarget:"_blank"}),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(o.default,{id:n.id,input:i().assign({},n,{options:this.state.apiVersions}),onRetry:this.state.error&&(()=>this.fetchVersionsOfSelectedAPI()),disabled:this.isDisabled()||this.state.loading,error:this.state.error||e,loading:this.state.loading,currentValue:a,onUserInput:c,isCreatable:!1}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanCollectionInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js"),o=n("./js/components/base/Markdown.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanWorkspaceInput.js"),c=n("./runtime-repl/collection/_api/CollectionInterface.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js");class u extends s.Component{constructor(e){super(e),this.state={workspaceId:null,workspaceError:null,collections:[],loading:!1,error:null},this.fetchCollectionsInSelectedWorkspace=this.fetchCollectionsInSelectedWorkspace.bind(this)}componentDidMount(){this.fetchCollectionsInSelectedWorkspace();const e=(0,d.getPreferredEntityId)(this.props.preferredEntities,"collection");i().isFunction(this.props.onUserInput)&&e&&this.props.onUserInput(e)}fetchCollectionsInSelectedWorkspace(){this.state.workspaceId&&!this.props.disabled&&this.setState({collections:[],loading:!0,error:null},(()=>{(0,c.getCollectionsInWorkspace)(this.state.workspaceId).then((e=>{const t=(0,d.convertEntityListToOptions)(e);if(!(0,d.isValidSetOfOptions)(t))throw new Error("Malformed response");return this.setState({collections:t,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections! ",loading:!1},(()=>{pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)}))}))}))}render(){const{error:e,disabled:t,input:n,currentValue:a,onUserInput:c}=this.props;return s.createElement(s.Fragment,null,s.createElement(l.default,{input:i().assign({},n,{name:"Select a Workspace",description:"The collection that you choose next must be in this workspace.",id:n.id+"-ws",mandatory:!0,type:"string",key:"workspaceId"}),disabled:t,error:this.state.workspaceError,onUserInput:e=>{e!==this.state.workspaceId&&this.setState({workspaceId:e,workspaceError:i().isEmpty(e)&&"This field is mandatory"},(()=>{this.fetchCollectionsInSelectedWorkspace()}))},currentValue:this.state.workspaceId,preferredEntities:this.props.preferredEntities}),s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",n.name," "),n.description&&s.createElement(o.default,{className:"integrations-form__segment__label-description",source:n.description,linkTarget:"_blank"}),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(r.default,{id:n.id,input:i().assign({},n,{options:this.state.collections}),onRetry:this.state.error&&(()=>this.fetchCollectionsInSelectedWorkspace()),disabled:t||this.state.loading||i().isNil(this.state.workspaceId),error:this.state.error||e,loading:this.state.loading,currentValue:a,onUserInput:c,isCreatable:!1}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanMonitorInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js"),o=n("./js/components/base/Markdown.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanWorkspaceInput.js"),c=n("./monitors/services/MonitorService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js");class p extends s.Component{constructor(e){super(e),this.state={workspaceId:null,workspaceError:null,monitors:[],loading:!1,error:null},this.fetchMonitorInfo=this.fetchMonitorInfo.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this)}componentDidMount(){if((0,d.isEntityInputInEditFlow)(this.props))return this.fetchMonitorInfo();this.fetchMonitors();const e=(0,d.getPreferredEntityId)(this.props.preferredEntities,"monitor");i().isFunction(this.props.onUserInput)&&e&&this.props.onUserInput(e)}fetchMonitorInfo(){if(!this.props.currentValue)return null;this.setState({monitors:[],loading:!0,error:null},(()=>{u.default.fetchMonitorMeta(this.props.currentValue).then((e=>e.id&&e.name?this.setState({monitors:[{label:e.name,value:e.id}],loading:!1,error:null}):this.setState({error:"Unable to load monitor",loading:!1}))).catch((e=>this.setState({error:"Unable to load monitor",loading:!1},(()=>{pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e)}))))}))}fetchMonitors(){if((0,d.isEntityInputInEditFlow)(this.props))return this.fetchMonitorInfo();this.state.workspaceId&&!this.props.disabled&&this.setState({monitors:[],loading:!0,error:null},(()=>{c.default.getJobTemplatesByWorkspace({workspaceId:this.state.workspaceId}).then((e=>{const t=i().get(e,"body.data",[]),n=(0,d.convertEntityListToOptions)(t);if(!(0,d.isValidSetOfOptions)(n))throw new Error("Malformed response");return this.setState({monitors:n,loading:!1})})).catch((e=>this.setState({error:"Unable to load monitors",loading:!1},(()=>{pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error occurred while fetching monitors",e)}))))}))}render(){const{error:e,disabled:t,input:n,currentValue:a,onUserInput:c}=this.props;return s.createElement(s.Fragment,null,!(0,d.isEntityInputInEditFlow)(this.props)&&s.createElement(l.default,{input:i().assign({},n,{name:"Select a Workspace",description:"The monitor that you choose next must be in this workspace.",id:n.id+"-ws",mandatory:!0,type:"string",key:"workspaceId"}),disabled:t,error:this.state.workspaceError,onUserInput:e=>{e!==this.state.workspaceId&&this.setState({workspaceId:e,workspaceError:i().isEmpty(e)&&"This field is mandatory"},(()=>{this.fetchMonitors()}))},currentValue:this.state.workspaceId,preferredEntities:this.props.preferredEntities}),s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",n.name," "),n.description&&s.createElement(o.default,{className:"integrations-form__segment__label-description",source:n.description,linkTarget:"_blank"}),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(r.default,{id:n.id,input:i().assign({},n,{options:this.state.monitors}),onRetry:this.state.error&&(()=>this.fetchMonitors()),disabled:t||this.state.loading||i().isNil(this.state.workspaceId),error:this.state.error||e,loading:this.state.loading,currentValue:a,onUserInput:c,isCreatable:!1}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/PostmanWorkspaceInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./node_modules/async/dist/async.js"),o=n.n(r),l=n("./collaboration/workspace/controller/WorkspaceController.ts"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/DropdownInput.js"),d=n("./js/components/base/Markdown.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js");class p extends s.Component{constructor(e){super(e),this.state={workspaces:[],loading:!1,error:null},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this)}componentDidMount(){const e=(0,u.getPreferredEntity)(this.props.preferredEntities,"workspace");this.props.disabled||i().get(e,"force",!1)||this.fetchAllWorkspaces(),i().isFunction(this.props.onUserInput)&&e&&this.props.onUserInput(e.entityId)}fetchAllWorkspaces(){this.setState({workspaces:[],loading:!0,error:null},(()=>{let e,t=[];o().doUntil((n=>{l.default.findAll({limit:50,...e&&{cursor:e}}).then((s=>(e=i().get(s,"meta.nextCursor"),t=i().unionBy(t,s.data,"id"),n()))).catch((e=>n(e)))}),(()=>i().isEmpty(e)),(e=>{if(e)return this.setState({error:"Unable to load workspaces",loading:!1},(()=>{pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e)}));const n=(0,u.convertEntityListToOptions)(t);return(0,u.isValidSetOfOptions)(n)?this.setState({workspaces:n,loading:!1}):this.setState({error:"Unable to load workspaces",loading:!1,workspaces:n},(()=>{pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)}))}))}))}render(){const{error:e,disabled:t,input:n,currentValue:a,onUserInput:r,preferredEntities:o}=this.props,l=this.state.workspaces;return i().get((0,u.getPreferredEntity)(o,"workspace"),"force",!1)?null:s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",n.name," "),n.description&&s.createElement(d.default,{className:"integrations-form__segment__label-description",source:n.description,linkTarget:"_blank"}),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(c.default,{id:n.id,input:i().assign({},n,{options:l}),onRetry:this.state.error&&(()=>this.fetchAllWorkspaces()),disabled:t||this.state.loading,error:this.state.error||e,loading:this.state.loading,currentValue:a,onUserInput:r,isCreatable:!1})))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/StringInput.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{id:t,error:n,...i}=e;return s.createElement("div",null,s.createElement(a.Input,o({id:t,inputStyle:"box",type:"text",error:n?"This is a mandatory field":"",onChange:t=>{r().isFunction(e.onUserInput)&&e.onUserInput(t)},value:e.currentValue},i)),n&&s.createElement("div",{className:"integrations-form__segment__input__error"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{convertEntityListToOptions:function(){return i},convertObjectListToOptions:function(){return r},getInputError:function(){return p},getPreferredEntity:function(){return d},getPreferredEntityId:function(){return u},getServiceActionInputsMap:function(){return l},isBlockedOnAnotherInput:function(){return c},isEntityInputInEditFlow:function(){return g},isValidSetOfOptions:function(){return o}});var s=n("./node_modules/lodash/lodash.js"),a=n.n(s);function i(e){return r(e,"name","id")}function r(e,t="name",n="id"){return e?e.map((e=>({label:a().get(e,t),value:a().get(e,n)}))):[]}function o(e){return a().isArray(e)&&a().some(e,(e=>a().has(e,"label")&&a().has(e,"value")))}function l(e,t){return a().reduce(a().get(e,"inputs"),((e,n,s)=>(e[s]=a().get(a().find(t,["key",n]),"value"),e)),{})}function c(e,t){return a().some(e,(e=>{const n=a().find(t,["key",e]);return a().isEmpty(n)||a().isNil(n.value)||(a().isObject(n.value)||a().isString(n.value))&&a().isEmpty(n.value)||n.error}))}function d(e,t){return a().find(e,["entityType",t])||null}function u(e,t){return a().get(d(e,t),"entityId")}function p(e,t){const n=a().isNil(t)||(a().isObject(t)||a().isString(t))&&a().isEmpty(t);return e.mandatory&&n&&"This field is mandatory"}function g(e){return e.currentValue&&e.disabled}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Modals/UpdateModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=(n("./node_modules/lodash/lodash.js"),n("./js/components/base/Modals.js")),i=n("./js/components/base/Buttons.js"),r=n("./js/components/base/LoadingIndicator.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts");class l extends s.Component{constructor(e){super(e),this.state={loading:!1},this.handleUpdateClick=this.handleUpdateClick.bind(this)}handleUpdateClick(){let{integrationId:e,payload:t}=this.props.updatePayload;this.setState({loading:!0}),o.default.updateIntegration(e,t).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success("Integration updated."),this.props.hideBanner()):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.setState({loading:!1}),this.props.handleRequestClose()})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to update"}),pm.logger.error("Something went wrong while updating the integration",e),this.setState({loading:!1}),this.props.handleRequestClose()}))}render(){const{loading:e}=this.state;return s.createElement(a.Modal,{onRequestClose:this.props.handleRequestClose,isOpen:this.props.isOpen,className:"integration-modal integration-runs-page-modal",customStyles:{width:"440px",marginTop:"0px",top:"50%",transform:"translateY(-50%)"}},s.createElement(a.ModalHeader,null,"Update integration?"),s.createElement(a.ModalContent,null,"This cannot be undone."),s.createElement(a.ModalFooter,null,s.createElement(i.Button,{type:"primary",disabled:e,size:"small",onClick:this.handleUpdateClick},e?s.createElement(r.default,null):"Update Integration"),s.createElement(i.Button,{type:"secondary",size:"small",onClick:this.props.handleRequestClose},"Cancel")))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/IntegrationTypesPerService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationTypeActions:function(){return B},IntegrationTypeListItem:function(){return U},default:function(){return V}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),o=n("./node_modules/lodash/lodash.js"),l=n.n(o),c=n("./node_modules/classnames/index.js"),d=n.n(c),u=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),g=n("./js/stores/CurrentUserStore.js"),m=n("./js/stores/SyncStatusStore.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),f=n("./js/components/base/LoadingIndicator.js"),b=n("./js/components/base/Buttons.js"),v=n("./js/models/services/DashboardService.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorLoadingConfiguredIntegrations.js"),E=n("./js/modules/services/AnalyticsService.js"),A=n("./js/services/NavigationService.js"),w=n("./integrations/navigation/constants.js"),C=n("./integrations/services/OAuthService.js"),k=n("./js/modules/services/APIService.js"),j=n("./appsdk/components/link/Link.js"),P=n("./integrations/constants/notificationCenter.ts"),T=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),N=n("./js/utils/UserHelper.js"),D=n("./onboarding/src/common/LaunchDarkly.js"),R=n("./api-dev/constants/APIRepositoryConstants.js"),O=n("./integrations/constants/uptimeMonitorIntegrations.ts"),x=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/DeprecationTooltip.js"),M=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/InstanceCreationConstants.js"),L=n("./js/external-navigation/ExternalNavigationService.js");function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},F.apply(this,arguments)}const H={apiversion_repository_azure_enterprise:"AZUREENTERPRISE"};function B(e){const{configuredList:t,serviceId:n,id:s,instanceCreation:i}=e,r="Add Integration";let o=(0,u.resolveStoreInstance)(g.default),c=(0,u.resolveStoreInstance)(p.default),m={name:o.name,isLoggedIn:o.isLoggedIn,userName:o.username_email,id:o.id,organizations:o.organizations,teamSyncEnabled:o.teamSyncEnabled,profilePicUrl:o.profile_pic_url},h=(0,N.isUserAdmin)(m),I=l().get(i,"enabled",!1),S=function(e,t,n,s){const a=l()(l().map(l().get(e,"clientCategories",[]),"key")).includes(P.CLIENT_CATEGORY),i=l().get(t,"userCreatedIntegrationCount",0)>=1&&a;return("single"===l().get(e,"meta.type")||a)&&e.loading||e.isOffline||e.adding||e.authorizing||i||"single"===l().get(e,"meta.type")&&!l().isEmpty(t)&&t.count>=1||"admin"===l().get(e,"meta.scope")&&!n||!s}(e,t,h,I),y=l().get(i,"code"),_=function(e,t,n,s){return e.isOffline?"You need to be online in order to create an integration":"single"===l().get(e,"meta.type")&&!l().isEmpty(t)&&t.count>=1?"Only one team activity Integration can be created":l().get(t,"userCreatedIntegrationCount",0)>=1&&l()(l().map(l().get(e,"clientCategories",[]),"key")).includes(P.CLIENT_CATEGORY)?"You can create only one Postman Notification integration per service.":"admin"!==l().get(e,"meta.scope")||n?l().get(s,"description",""):"You should be team admin to add this integration"}(e,t,h,i),C=l().get(i,["additionalContext","upgradeLink"],null);if(!S)return a.createElement("div",{className:"pm-col-xs-12 pm-col-md-4 integration-service__types-item-actions",title:_},a.createElement(b.Button,{className:d()({"gtm-postman-api-key-generate":"pm_pro_api"===n}),disabled:S,tooltip:_,icon:"add",iconSize:"sm",type:"secondary",size:"md",onClick:()=>{E.default.addEventV2AndPublish({category:"integrations",action:"add_integration_team_service_details_view",label:s,value:1}),c.resetAddIntegrationDependencies(),"oauth2"===l().get(e,["meta","auth_type"])&&"monitor_run_slack"!==e.id&&e.id!==O.UPTIME_MONITOR_SLACK?"browser"===window.SDK_PLATFORM||l().get(T.default,[s,"customEditComponent"])?(e.handleAddIntegrationLoadState(),e.onInitiateOAuth&&e.onInitiateOAuth(n,s)):(0,k.openAuthenticatedRoute)(`${pm.artemisUrl}/integrations/service/${n}`):A.default.transitionTo(w.ADD_INTEGRATIONS_IDENTIFIER,{serviceId:n,ruleId:s},{},{additionalContext:e.additionalContext})}},e.authorizing?"Authorizing...":e.adding&&a.createElement(f.default,null)||r));switch(y){case M.INSTANCE_CREATION_CODES.SHOULD_UPGRADE:return a.createElement("div",{className:"pm-col-xs-12 pm-col-md-4 integration-service__types-item-actions",title:_},a.createElement(b.Button,{className:"integration-service__types-item-actions__upgrade",label:s,type:"secondary",size:"md",onClick:()=>{C?(0,L.openExternalLink)(C,"_blank"):(0,v.upgradeToPro)({utmParams:{utm_content:"browse_integration"}})}},"Upgrade"));case M.INSTANCE_CREATION_CODES.SHOULD_BE_A_TEAM_USER:return a.createElement("div",{className:"pm-col-xs-12 pm-col-md-4 integration-service__types-item-actions"},a.createElement(b.Button,{className:"integration-service__types-item-actions__upgrade",label:s,type:"secondary",size:"md",onClick:()=>{A.default.transitionTo(w.INTEGRATIONS_CREATE_TEAM_IDENTIFIER,null,null,{additionalContext:{integrationClassID:s}})}},"Add Integration"));default:return a.createElement("div",{className:"pm-col-xs-12 pm-col-md-4 integration-service__types-item-actions",title:_},a.createElement(b.Button,{className:d()({"gtm-postman-api-key-generate":"pm_pro_api"===n}),disabled:S,icon:"add",iconSize:"sm",type:"secondary",size:"md"},e.authorizing?"Authorizing...":e.adding&&a.createElement(f.default,null)||r))}}function U(e){const{description:t,name:n,serviceId:s,id:i,configuredList:r}=e;let o=!l().get((0,u.resolveStoreInstance)(m.default),"isSocketConnected");return a.createElement("li",{className:"integration-service__types-item clearfix"},a.createElement("div",{className:"pm-col-xs-12 pm-col-md-8 integration-service__types-item-info"},a.createElement("div",{className:"integration-service__types-item-actionables"},a.createElement("div",{className:"integration-service__types-item-actionables-description"},a.createElement(I.default,{alignItems:"center"},a.createElement(S.default,{type:"h4",text:n}),a.createElement(x.default,{classId:i})),a.createElement(y.default,{type:"body-large",color:"content-color-secondary"},t)),a.createElement(B,e)),a.createElement("div",{className:"integration-service__types-item__configured"},r&&r.loading||e.loading?a.createElement("div",{className:"integration-service__types-item__configured-integrations-loading"},a.createElement(f.default,null),"Loading added integrations..."):l().get(r,"error",!0)?a.createElement(_.default,{retry:e.retry,disable:o}):0===r.count?"":1===r.count?a.createElement("span",{className:"integration-service__types-item__configured"},"1 integration added.",a.createElement("span",{className:"link"},a.createElement(j.default,{to:{routeIdentifier:w.TEAM_INTEGRATIONS_IDENTIFIER,routeParams:{serviceId:s,ruleId:i}}},"View"))):a.createElement("span",{className:"integration-service__types-item__configured"},r.count,"integrations added.",a.createElement("span",{className:"link"},a.createElement(j.default,{to:{routeIdentifier:w.TEAM_INTEGRATIONS_IDENTIFIER,routeParams:{serviceId:s,ruleId:i}}},"View all"))))))}let V=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={configuredList:[],loading:!0,adding:[],authorizing:[],sessionId:""},this.getConfiguredIntegrations=l().debounce(this.getConfiguredIntegrations.bind(this),1e3,{leading:!0,trailing:!1}),this.handleRetry=this.handleRetry.bind(this),this.handleAddIntegrationLoadState=this.handleAddIntegrationLoadState.bind(this),this.setAuthorizationState=this.setAuthorizationState.bind(this),this.handleInitiateOAuth=this.handleInitiateOAuth.bind(this),this.pollForToken=this.pollForToken.bind(this),this.fetchAuthDetails=this.fetchAuthDetails.bind(this),this.showRule=this.showRule.bind(this),this.currentUserStore=(0,u.resolveStoreInstance)(g.default),this.integrationsStore=(0,u.resolveStoreInstance)(p.default),this.syncStatusStore=(0,u.resolveStoreInstance)(m.default)}handleAddIntegrationLoadState(e,t){if("oauth2"===t)this.setAuthorizationState(e,!0);else{let t=this.state.adding.slice();t[e]=!0,this.setState({adding:t})}}getConfiguredIntegrations(e,t){let n=l().map(e,(e=>h.default.getConfiguredIntegrationsPerRule(e,!0)));Promise.allSettled(n).then((n=>{this.setState({configuredList:l().map(n,((n,s)=>{let a=e[s];return"fulfilled"===n.status?{[a]:{loading:!1,error:!1,userCreatedIntegrationCount:l()(l().get(n,"value.body.data",[])).map("createdBy").compact().filter((e=>e===t)).size(),count:l().size(l().get(n,["value","body","data"]))}}:{[a]:{loading:!1,error:!0,userCreatedIntegrationCount:void 0,count:0}}})),loading:!1})})).catch((t=>{pm.logger.error("Error in fetching configured integrations",t),this.setState({configuredList:l().map(e,(e=>({[e]:{loading:!1,error:!0,userCreatedIntegrationCount:void 0,count:0}}))),loading:!1})}))}handleRetry(e,t){let n=this.state.configuredList;n[e][t]={loading:!0},this.setState({configuredList:n},(()=>{h.default.getConfiguredIntegrationsPerRule(t,!0).then((s=>{n[e][t]={loading:!1,error:!1,count:l().size(l().get(s,["body","data"]))},this.setState({configuredList:n})})).catch((s=>{pm.logger.error("Error in fetching configured integrations count on retry",s),n[e][t]={loading:!1,error:!0,count:0},this.setState({configuredList:n})}))}))}setAuthorizationState(e,t){let n=this.state.authorizing.slice();n[e]=t,this.setState({authorizing:n})}handleInitiateOAuth(e,t){"apimatic"===e&&(e="github"),t===P.SERVICES.slack.rule&&(e=P.SERVICES.slack.oauth_service),C.default.initiateAuthorization(e).then((n=>{let s,a=n.body;200!==n.status||l().isEmpty(a)?(pm.logger.warn("IntegrationTypesPerService~handleInitiateOAuth: Something went wrong while opening authorization",n.body),pm.toasts.error("Something went wrong while initiating authorization"),this.setAuthorizationState(t,!1)):(s=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${a.sessionId}`,A.default.openURL(s,{target:"_blank"}),this.setState({sessionId:a.sessionId},(()=>{this.pollForToken(e,t)})))})).catch((e=>{let n=!l().get((0,u.resolveStoreInstance)(m.default),"isSocketConnected")?"You need to be online to complete the authorization ":"Something went wrong while initiating authorization";pm.logger.warn("IntegrationTypesPerService~handleInitiateOAuth: Something went wrong while opening authorization",e),pm.toasts.error(n),this.setAuthorizationState(t,!1)}))}pollForToken(e,t){let n=0,s=this.state.sessionId;if(!s)return pm.logger.warn("IntegrationTypesPerService~pollForToken: sessionId is required."),pm.toasts.error("Something went wrong while fetching authorization information"),void this.setAuthorizationState(t,!1);const a=async(i,r)=>{n++,C.default.getSession(s).then((s=>{let o=s.body;if(30===n)return pm.toasts.error("Service timed out while performing authorization"),this.setAuthorizationState(t,!1),r(new Error("Exceeded max attempts"));if(!o.token||l().isEmpty(o.token))setTimeout(a,2e3,i,r);else{if(o.error)return pm.logger.warn("IntegrationTypesPerService~pollForToken: Error while getting a session for the user",o.error),pm.toasts.error("Something went wrong while fetching authorization information"),this.setAuthorizationState(t,!1),r(new Error("Error while getting a session for the user"));if(o.token)return this.fetchAuthDetails(e,t,o),i("Fetched OAuth token successfully for service ",e)}})).catch((e=>{if(e.error){let n=!l().get((0,u.resolveStoreInstance)(m.default),"isSocketConnected")?"You need to be online to complete the authorization ":"Something went wrong while fetching authorization information";return pm.logger.warn("IntegrationTypesPerService~pollForToken: Error while getting a session for the user",e.error),pm.toasts.error(n),this.setAuthorizationState(t,!1),r(e.error)}}))};return new Promise(a)}fetchAuthDetails(e,t,n){C.default.services[e].fetchAuthDetails(n,((n,s)=>{n?(pm.logger.warn(`IntegrationTypesPerService~fetchAuthDetails: Error while fetching service details for ${e} `,n),pm.toasts.error(`Something went wrong while fetching authorization information for ${e}`),this.setAuthorizationState(t,!1)):((0,u.resolveStoreInstance)(p.default).setAuthDetails(s),A.default.transitionTo(w.AUTHORIZED_INTEGRATIONS_IDENTIFIER,{serviceId:this.props.serviceId,ruleId:t},{},{additionalContext:this.props.additionalContext}))}))}showRule(e){if(H[e]){let t=H[e];if(t){let e=R.GIT_SERVICES_LIST[t].featureFlag;return D.launchDarkly.getFlag(e,!1)}return!0}return!0}componentDidMount(){const e=(0,u.resolveStoreInstance)(g.default).id,t=l().map(this.props.serviceRulesList,(e=>e.id));(0,u.resolveStoreInstance)(m.default).onSyncAvailable({timeout:8e3}).then((()=>this.getConfiguredIntegrations(t,e))).catch((()=>{this.setState({loading:!1})})),this.getConfiguredIntegrationsAutorun=(0,r.autorun)((()=>{const e=l().get((0,u.resolveStoreInstance)(m.default),"isSocketConnected"),n=(0,u.resolveStoreInstance)(g.default).id;e&&l().isEmpty(this.state.configuredList)&&this.setState({loading:!0},this.getConfiguredIntegrations(t,n))}))}componentWillUnmount(){this.getConfiguredIntegrationsAutorun&&this.getConfiguredIntegrationsAutorun()}render(){let e,t=!l().get((0,u.resolveStoreInstance)(m.default),"isSocketConnected");return a.createElement("ul",{className:"integration-service__types-list"},this.props.serviceRulesList.map(((n,s)=>{if(e=this.showRule(n.id),e)return a.createElement(U,F({},n,this.props,{onInitiateOAuth:this.handleInitiateOAuth,key:s,serviceId:this.props.serviceId,configuredList:l().get(this.state.configuredList[s],n.id),retry:()=>{this.handleRetry(s,n.id)},authorizing:this.state.authorizing[n.id]||!1,loading:this.state.loading,handleAddIntegrationLoadState:()=>{this.handleAddIntegrationLoadState(n.id,l().get(n,["meta","auth_type"]))},adding:this.state.adding[n.id]||!1,isOffline:t,additionalContext:this.props.additionalContext}))})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/IntegrationsCategoryList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationsCategoryListItem:function(){return i},default:function(){return r}});var s=n("../../node_modules/react/index.js"),a=n("../../packages/search/universal-search/index.js");function i(e){const{category:t}=e;return s.createElement("li",null,s.createElement(a.Badge,{style:"secondary"},t))}function r(e){const{categories:t,className:n}=e;return Array.isArray(t)?s.createElement("ul",{className:n},t.map((e=>s.createElement(i,{category:e,key:e})))):null}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/ServiceDetails.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/CurrentUserStore.js"),o=n("./js/stores/SyncStatusStore.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingServiceDetails.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/IntegrationTypesPerService.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/ServiceDetailsOverview.js"),h=n("./integrations/navigation/constants.js"),f=n("./js/navigation/active-mode/constants.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),v=n("./js/modules/services/AnalyticsService.js"),I=n("./appsdk/components/link/Link.js"),S=n("./node_modules/lodash/lodash.js");let y=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={serviceDetails:{},errorDetails:{status:404}},this.integrationsStore=(0,l.resolveStoreInstance)(c.default)}componentDidMount(){v.default.addEventV2({category:"integrations",label:"team_integrations_service_details_view",action:"view_team_integrations_service_details",value:1})}render(){let e=!(0,l.resolveStoreInstance)(o.default).isSocketConnected,t=S.get((0,l.resolveStoreInstance)(r.default),"team.name","Home"),n=this.integrationsStore.getIntegrationServices(),s=this.integrationsStore.getIntegrationClasses(),i=this.integrationsStore.loadingIntegrationServices,c=this.integrationsStore.loadingIntegrationClasses,v=this.integrationsStore.activeServiceDetailsId,y=S.filter(n,(e=>e.id===v)),_=S.isEmpty(y)?[]:y[0],E=S.get(_,"name",""),A=S.filter(s,(e=>{const t=S.map(S.get(e,"services"),"id");let n=!1;return S.forEach(t,(e=>{e===v&&(n=!0)})),n}));return a.createElement("div",{className:"integrations-page-container"},a.createElement("div",{className:"integration-service-details-page"},a.createElement("div",{className:"integrations-service-details-breadcrumbs"},a.createElement("span",{title:t,className:"integrations-service-details-breadcrumbs__team-name"},a.createElement(I.default,{to:{routeIdentifier:f.HOME}},t)),a.createElement("span",{className:"integrations-service-details-breadcrumbs__divider"},"/"),a.createElement("span",{className:"integrations-service-details-breadcrumbs__integration-page"},a.createElement(I.default,{to:{routeIdentifier:h.OPEN_INTEGRATIONS_HOME_IDENTIFIER}},"Integrations")),a.createElement("span",{className:"integrations-service-details-breadcrumbs__divider"},"/"),a.createElement("span",{className:"integrations-service-details-breadcrumbs__browse"},a.createElement(I.default,{to:{routeIdentifier:h.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:"all"}},options:{additionalContext:this.props.additionalContext}},"Browse")),a.createElement("span",{className:"integrations-service-details-breadcrumbs__divider"},"/"),a.createElement("span",{className:"integrations-service-details-breadcrumbs__service-text"},E)),a.createElement("div",{className:"integration-service-details"},i||c?a.createElement(p.default,null):!e&&this.integrationsStore.errorFetchingAvailableIntegrations||!e&&S.isEmpty(_)?a.createElement(d.default,{errorDetails:this.integrationsStore.availableIntegrationsErrorDetails||this.state.errorDetails}):S.isEmpty(_)?a.createElement(u.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."}):a.createElement(a.Fragment,null,a.createElement(m.default,{serviceDetails:_}),a.createElement("div",{className:"integration-service__detailed-view"},a.createElement(b.default,{type:"h1",text:E?E+" Integrations":"",className:"integration-service__title-available visible-desktop-block"}),!S.isEmpty(A)&&a.createElement(g.default,{serviceRulesList:A,serviceId:_.id,oauthHostURL:_.oauth_initiator_host,additionalContext:S.get(this,["props","controller","additionalContext"])}))))))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/ServiceDetailsOverview.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/IntegrationsCategoryList.js"),o=n("./js/components/base/Markdown.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/ShowMoreLess.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsLabels.js"),d=n("./node_modules/classnames/index.js"),u=n.n(d),p=n("./js/controllers/theme/ThemeManager.js"),g=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={currentTheme:p.default.getCurrentTheme(),showFallbackIcon:!1},this.handleThemeChange=this.handleThemeChange.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange)}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleThemeChange(e){this.setState({currentTheme:e})}render(){const{name:e,iconUrl:t,darkIconUrl:n,categories:s,extendedDescription:i,id:d}=this.props.serviceDetails;let p=g.map(s,"name");return a.createElement("div",{className:"integration-service__overview"},a.createElement("div",{className:"integration-service__icon-wrapper"},!this.state.showFallbackIcon&&a.createElement("img",{className:"integration-service__icon pm-absolute-center",src:n&&"dark"===this.state.currentTheme?n:t,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&a.createElement("div",{className:"integration-service__icon  integration-service__fallback-icon"})),c.INTEGRATION_LABELS[d]?a.createElement("div",{className:"integrations-service--badge"},a.createElement("span",{className:u()({"integrations-service--badge-new":"new"===c.INTEGRATION_LABELS[d].toLowerCase(),"integrations-service--badge-noteworthy":"noteworthy"===c.INTEGRATION_LABELS[d].toLowerCase()})},c.INTEGRATION_LABELS[d])):"",a.createElement("div",{className:"integration-service__details-wrapper"},a.createElement("h2",{className:"integration-service__name"},e),a.createElement("div",{className:"integration-service__metadata integration-service__metadata--categories"},a.createElement(r.default,{categories:p})),a.createElement(l.default,{extraPadding:6,Inner:a.createElement(o.default,{className:"integration-service__extended-description",source:i,linkTarget:"_blank"}),lineHeight:24,numLines:8,parentClass:"integration-service__details-wrapper"})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ServiceDetails/ShowMoreLess.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Buttons.js");class i extends s.Component{constructor(e){super(e),this.container=s.createRef(),this.state={hideExpansionLink:!1,expanded:!1}}componentDidMount(){const e=this.container.current,t=0!==e.clientHeight&&(e.scrollHeight===e.clientHeight||e.scrollHeight<=e.clientHeight+this.props.extraPadding),n=e.scrollHeight>e.clientHeight;t?this.setState({hideExpansionLink:!0}):this.setState({expanded:!n})}render(){const{Inner:e,lineHeight:t,numLines:n,extraPadding:i,parentClass:r}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{ref:this.container,style:{lineHeight:`${t}px`,maxHeight:`${t*n+i}px`,overflow:"hidden"}},e),s.createElement("div",{onClick:()=>{this.state.expanded?this.container.current.style.setProperty("max-height",`${t*n+i}px`):this.container.current.style.removeProperty("max-height"),this.setState({expanded:!this.state.expanded})}},s.createElement(a.Button,{className:`${r}__show-hide-details`,type:"text"},this.state.hideExpansionLink?"":this.state.expanded?"Show Less":"...Show More")))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/APIMatic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{checkForValidInput:function(){return g},default:function(){return m}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js");const p=[{label:"APIMATIC Format",value:"apimatic"},{label:"API BluePrint Format",value:"apiblueprint"},{label:"Postman Collection 2.0",value:"postman20"},{label:"RESTful API Modeling Language (RAML 0.8)",value:"raml"},{label:"RESTful API Modeling Language (RAML 1.0)",value:"raml10"},{label:"Swagger v1.2 (JSON)",value:"swagger10"},{label:"Swagger v2.0 (JSON)",value:"swagger20"},{label:"Swagger v2.0 (YAML)",value:"swaggeryaml"},{label:"WADL (W3C - 2009)",value:"wadl2009"}];function g(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}let m=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",selectedFormat:null,selectedRepository:null,repositories:[],directory:"Postman Collections",branch:"",name:"",apimaticToken:"",initialFormatLoad:!0,initialRepositoryLoad:!0,errorNickname:"",errorDirectory:"",errorFilename:"",errorApimaticToken:"",errorBranch:""},this.store=(0,l.resolveStoreInstance)(c.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.onFormatSelect=this.onFormatSelect.bind(this)}componentDidMount(){const e=this.store.readAuthDetails(),t=e.repository&&e.repository.map((e=>({label:e.full_name,owner:e.owner.login,name:e.name,value:e.id})))||[];this.setState({repositories:t})}onTargetSelect(e){i().isEmpty(e)?this.setState({selectedRepository:"",initialRepositoryLoad:!1}):this.setState({selectedRepository:e,initialRepositoryLoad:!1})}onFormatSelect(e){i().isEmpty(e)?this.setState({selectedFormat:null,initialFormatLoad:!1}):this.setState({selectedFormat:e,initialFormatLoad:!1})}render(){const{rule:e,service:t}=this.props,{nickname:n,repositories:s,selectedRepository:a,directory:o,branch:l,initialFormatLoad:c,initialRepositoryLoad:m,name:h,apimaticToken:f,selectedFormat:b,errorNickname:v,errorDirectory:I,errorFilename:S,errorApimaticToken:y,errorBranch:_}=this.state,E=this.store.readAuthDetails(),A=i().get(E,["auth","access_token"],"");let w=a&&a.label.includes("/")&&a.label.split("/")[0],C=a&&a.label.includes("/")&&a.label.split("/")[1],k=C&&C.replace(/ /g,"-"),j=w&&w.replace(/ /g,"-"),P={rule:e,name:n,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{apimatic_token:"collection_apimatic_github"!==e&&f,owner:j,repository:k,directory:o,name:h,branch:l,format:b&&b.value,access_token:A}};return r.createElement("div",null,r.createElement(u.AuthUserSegment,{displayField:E.user&&i().get(E,["user","display_field"]),imageSrc:E.user&&i().get(E,["user","avatar"])}),"collection_apimatic_github"!==e&&r.createElement(u.SensitiveFieldSegment,{className:"apimatic-apimatic_token",description:"This API key will be used for APIMatic transformations",id:"apimatic-apimatic_token",title:"APIMatic API Key",value:f,error:y,onBlur:()=>{this.setState({apimaticToken:f.trim(),errorApimaticToken:i().isEmpty(f.trim())?"Please enter an APIMatic API Key":""})},onChange:e=>{this.setState({apimaticToken:e,errorApimaticToken:""})}}),r.createElement(u.NicknameFieldSegment,{id:"apimatic-nickname",value:n,error:v,onBlur:()=>{this.setState({nickname:n.trim(),errorNickname:i().isEmpty(n.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your collection belongs to"}),r.createElement(u.EntitySelector,{entity:d.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:"The selected collection will be backed up on GitHub",rule:e,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose Repository",description:"The collection will be backed up to this repository",options:s,value:a,noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {owner}/{repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:g,emptyStateError:!a&&!m&&"Please select a repository",onTargetSelect:this.onTargetSelect}),r.createElement(u.FieldSegment,{description:"The collection will be pushed to this directory in the repository",id:"github-directory",title:"Enter Directory",value:o,error:I,onBlur:()=>{this.setState({directory:o.trim(),errorDirectory:i().isEmpty(o.trim())?"Please enter a directory":""})},onChange:e=>{this.setState({directory:e})}}),r.createElement(u.FieldSegment,{description:"This will be the name of the collection in the repository",id:"github-name",title:"Enter filename",value:h,error:S,onBlur:()=>{this.setState({name:h.trim(),errorFilename:i().isEmpty(h.trim())?"Please enter a filename":""})},onChange:e=>{this.setState({name:e,errorFilename:""})}}),r.createElement(u.SelectSegmentV2,{title:"Choose format",description:"This will be the format in which the collection be saved",placeholder:"Type to filter format",options:p,value:b,onTargetSelect:this.onFormatSelect,emptyStateError:!b&&!c&&"Please select a format",noOptionsForDropdown:"No formats found",onTargetSelect:this.onFormatSelect}),r.createElement(u.FieldSegment,{description:"The collection will be pushed to this branch in the repository",id:"apimatic-branch",title:"Enter Branch",value:l,error:_,onBlur:()=>{this.setState({branch:l.trim(),errorBranch:i().isEmpty(l.trim())?"Please enter a branch":""})},onChange:e=>{this.setState({branch:e})}}),r.createElement(u.AddIntegrationActions,{disabled:!(n&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&h&&w&&a&&b&&f&&o&&l),payload:P,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:t,rule:e,redirect:i().get(this.props,"additionalContext.redirect")}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/AWSGatewayObservability.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AWSGatewayObservabilityDefault:function(){return E},ApiGatewaySetup:function(){return _},default:function(){return A}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./js/components/base/Inputs.js"),g=n("./js/components/base/Buttons.js"),m=n("./integrations/constants/integrationsConstants.ts"),h=n("./js/components/base/LoadingIndicator.js"),f=n("./js/services/NavigationService.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),v=n("./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js"),I=n("./integrations/api-observability/constants.ts"),S=n("./integrations/api-observability/services/ApiGatewayService.js");function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},y.apply(this,arguments)}let _=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",aws_region:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],errorNickname:"",apiId:"",apiVersion:"",authType:I.AWS_KEYS,availableApiGatewayTypes:I.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:I.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:I.AVAILABLE_AUTH_TYPES,selectedAuthType:I.AVAILABLE_AUTH_TYPES[0]},this.onTargetSelect=this.onTargetSelect.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.store=(0,c.resolveStoreInstance)(d.default)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:null,name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:""}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.name,aws_api_gateway_id:e.id})}handleNameChange(e){this.setState({nickname:e,errorNickname:r().isEmpty(e.trim())?"Please enter the Integration name":e.trim().length>255?"Name field can't have more than 255 characters":""})}render(){const{rule:e,aws_access_key:t,aws_key_id:n,aws_region:s,apiGateways:a,arnRole:i,externalId:r,authType:l,awsApiType:c}=this.props,{nickname:d,selectedAPIGateway:p,aws_api_gateway_id:g,errorNickname:h}=this.state,f=a.map((e=>({name:e.Name||e.name,id:e.ApiId||e.id})));let b={rule:e,name:d,entity:"apiversion",executor:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,api_id:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{auth_type:l,aws_api_type:c,postman_api_id:this.store.selectedEntity&&this.store.selectedEntity.value,aws_key_id:n,aws_access_key:t,aws_region:s,aws_api_gateway_id:g}},v=d.length<256;return l===I.AWS_IAM_ROLE&&(b.variables={auth_type:l,aws_api_type:c,postman_api_id:this.store.selectedEntity&&this.store.selectedEntity.value,role_arn:i,external_id:r,aws_region:s,aws_api_gateway_id:g}),o.createElement("div",null,o.createElement(u.NicknameFieldSegment,{id:"aws-api-gateway-nickname",value:d,error:h,onBlur:()=>{this.handleNameChange(d.trim())},onChange:e=>{this.handleNameChange(e)}}),o.createElement(u.WorkspaceSelector,{description:"Select the workspace your API is in"}),o.createElement(u.EntitySelector,{id:"api-schemas",entity:m.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",description:"Select the API to connect",rule:e,mode:m.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),o.createElement(u.EntitySelector,{id:"api-schema-versions",entity:m.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:e,mode:m.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity}),o.createElement(u.SelectSegment,{title:"AWS Gateway",placeholder:"Type to filter API Gateways",filterItems:f,initialLabel:"Select AWS Gateway",selectedTarget:p,onTargetSelect:this.onTargetSelect}),o.createElement(u.AddIntegrationActions,{disabled:!(d&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value&&g&&v),payload:b,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule}))}})||s,E=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",externalId:"",awsAccountId:I.AWS_ACCOUNT_ID,consentProvided:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:"",authType:I.AVAILABLE_AUTH_TYPES[0].value,awsApiType:"http",arnRole:"",availableApiGatewayTypes:I.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:I.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:I.AVAILABLE_AUTH_TYPES,selectedAuthType:I.AVAILABLE_AUTH_TYPES[0],errorRoleArn:""},this.store=(0,c.resolveStoreInstance)(d.default),this.handleAuthTypeChange=this.handleAuthTypeChange.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.setExternalId=this.setExternalId.bind(this)}handleAuthTypeChange(e){this.setState({selectedAuthType:e,authType:e.value})}handleAwsAPITypeSelection(e){this.setState({awsApiType:e.value,selectedAPIGatewayType:e})}handleRoleArnInput(e){this.setState({arnRole:e,errorRoleArn:r().isEmpty(e)?"Please enter the role ARN":""})}setExternalId(){let e={rule:this.props.rule,type:"fetchExternalId"};S.default.fetchExternalId(e).then((e=>{this.setState({externalId:e})})).catch((e=>{pm.toasts.error("Something went wrong, please try again."),pm.logger.error("Something went wrong while fetching External ID",e)}))}componentDidMount(){this.setExternalId()}render(){let{rule:e}=this.props,{aws_key_id:t,aws_access_key:n,aws_region:s,apiGateways:a,verifying:i,verification:l,consentProvided:c,errorAwsKeyId:d,errorAwsAccessKey:m,errorAwsRegion:E,availableAuthTypes:A,selectedAuthType:w,selectedAPIGatewayType:C,availableApiGatewayTypes:k,awsApiType:j,authType:P,arnRole:T,errorRoleArn:N,externalId:D}=this.state;return l===I.AUTH_SUCCESS&&"api_gateway_aws"===e?P===I.AWS_KEYS?o.createElement(_,y({},this.props,{apiGateways:a,aws_access_key:n,aws_key_id:t,aws_region:s,authType:P,awsApiType:j})):o.createElement(_,y({},this.props,{apiGateways:a,arnRole:T,externalId:D,aws_region:s,authType:P,awsApiType:j})):o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS Authentication Method",placeholder:"Select AWS Authentication Type",options:A,value:w,onTargetSelect:this.handleAuthTypeChange}),o.createElement(u.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:k,value:C,onTargetSelect:this.handleAwsAPITypeSelection}),P===I.AWS_KEYS&&o.createElement("div",null,o.createElement(u.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",description:"You can find the credentials in your AWS console. ",customLink:o.createElement(b.default,{extUrl:"https://go.pstmn.io/docs-aws-api-gateway-keys"},"Learn more"),placeholder:"Enter the AWS access key id",value:t,error:d,onBlur:()=>{this.setState({aws_key_id:t.trim(),errorAwsKeyId:r().isEmpty(t.trim())?"Please enter an Access Key ID":""})},onChange:e=>{this.setState({aws_key_id:e,errorAwsKeyId:""})}}),o.createElement(u.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",placeholder:"Enter the AWS access key",value:n,error:m,onBlur:()=>{this.setState({aws_access_key:n.trim(),errorAwsAccessKey:r().isEmpty(n.trim())?"Please enter a Secret Access Key":""})},onChange:e=>{this.setState({aws_access_key:e,errorAwsAccessKey:""})}})),P===I.AWS_IAM_ROLE&&o.createElement("div",null,o.createElement("div",{className:"integrations-add-step"},o.createElement("div",{className:"integrations-add-step__title"},"Step 1: Create an IAM role"),o.createElement("div",{className:"integrations-add-step__text"},"Use the following credentials to create an IAM role for Postman in AWS. Learn how to",o.createElement(b.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-iam"},"create an IAM role"))),o.createElement(v.default,{title:"AWS account ID",value:this.state.awsAccountId,description:"This assigns the IAM role to Postman."}),o.createElement(v.default,{title:"External ID",value:this.state.externalId,description:"This adds an extra level of security against malicious attacks."},o.createElement(b.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-confused-duty-problem"},"Learn more")),o.createElement("div",{className:"integrations-add-step"},o.createElement("div",{className:"integrations-add-step__title"},"Step 2: Enter role ARN and region")),o.createElement("div",{className:"integrations-field-segment__role-arn"},o.createElement(u.FieldSegment,{mandatory:!0,id:"role-arn",placeholder:"arn:aws:iam::79840258006:role/PostmanIntegration",title:"Role ARN",description:"Provided by AWS once the IAM role is created. It allows Postman to assume the IAM role.",value:T,error:N,onBlur:()=>{this.handleRoleArnInput(T)},onChange:e=>{this.setState({arnRole:e,errorRoleArn:""})}}))),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:s,error:E,onBlur:()=>{this.setState({aws_region:s.trim(),errorAwsRegion:r().isEmpty(s.trim())?"Please enter a AWS region":""})},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement("div",{className:"integrations-checkbox__select-consent"},o.createElement(p.Checkbox,{checked:this.state.consentProvided,onChange:()=>{this.setState({consentProvided:!this.state.consentProvided})}}),P===I.AWS_KEYS?o.createElement("span",null,"I consent to Postman for collecting and storing my AWS Secret Access Key and AWS Access Key ID."):o.createElement("span",null,"I consent to Postman for collecting and storing my Role ARN.")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(g.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:(P===I.AWS_KEYS?!n||!t:!T||!D)||!s||i||!c,size:"small",onClick:()=>{this.setState({verifying:!0,verification:I.AUTH_PENDING}),P===I.AWS_KEYS?S.default.fetchApiGateways({auth_type:P,aws_api_type:j,selectedAPIGatewayType:C,aws_key_id:t,aws_access_key:n,aws_region:s,rule:e,type:"fetchAWSGatewayAPIs"}).then((e=>{this.props.setActiveTab("configure"),this.setState({verifying:!1,verification:I.AUTH_SUCCESS,apiGateways:e,authType:I.AWS_KEYS})})).catch((e=>{this.setState({verifying:!1,verification:I.AUTH_FAILED}),pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways, please try again.")),pm.logger.error("Something went wrong",e)})):S.default.fetchApiGateways({role_arn:T,external_id:D,aws_region:s,auth_type:P,aws_api_type:j,rule:e,type:"fetchAWSGatewayAPIs"}).then((e=>{this.props.setActiveTab("configure"),this.setState({verifying:!1,verification:I.AUTH_SUCCESS,apiGateways:e,authType:I.AWS_IAM_ROLE})})).catch((e=>{this.setState({verifying:!1,verification:I.AUTH_FAILED}),pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways, please try again.")),pm.logger.error("Something went wrong",e)}))}},i&&o.createElement(h.default,null)||"Authenticate and Proceed")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(g.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),f.default.back()}},"Cancel")))}})||a;function A(e){const{rule:t}=e;if("api_gateway_aws"===t)return o.createElement(E,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiGateway.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApiGatewayDefault:function(){return _},ApiGatewaySetup:function(){return y},default:function(){return E}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./js/components/base/Inputs.js"),g=n("./js/components/base/Buttons.js"),m=n("./integrations/constants/integrationsConstants.ts"),h=n("./js/components/base/LoadingIndicator.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ApiGatewayService.js"),b=n("./js/services/NavigationService.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},I.apply(this,arguments)}const S="AUTH_SUCCESS";let y=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.scrollToBottom=()=>{this.customApiGatewayInput.scrollIntoView({behavior:"smooth"})},this.state={nickname:"",aws_region:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],custom_api_gateway:"",isCustomApiGatewayMandatory:!1,showApiGatewayInputField:!1,showCustomLabel:!0,errorNickname:""},this.onTargetSelect=this.onTargetSelect.bind(this),this.store=(0,c.resolveStoreInstance)(d.default)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,showApiGatewayInputField:!1,aws_api_gateway_name:e.name,aws_api_gateway_id:e.id,showCustomLabel:!0})}handleCustomApiGatewayInput(e){e?this.setState({isCustomApiGatewayMandatory:!0,custom_api_gateway:e,aws_api_gateway_name:e,aws_api_gateway_id:"",selectedAPIGateway:""}):this.setState({isCustomApiGatewayMandatory:!1,aws_api_gateway_name:"",custom_api_gateway:"",aws_api_gateway_id:"",selectedAPIGateway:""})}render(){const{rule:e,aws_access_key:t,aws_key_id:n,aws_region:s,apiGateways:a}=this.props,{nickname:i,selectedAPIGateway:l,aws_api_gateway_id:c,aws_api_gateway_name:d,showApiGatewayInputField:p,custom_api_gateway:g,isCustomApiGatewayMandatory:h,showCustomLabel:f,errorNickname:b}=this.state,v=a.map((e=>({name:e.Name,id:e.ApiId})));let I={rule:e,name:i,entity:"apiversion",executor:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,variables:{name:`${this.store.selectedEntity&&this.store.selectedEntity.label} (${this.store.selectedEntityVersion&&this.store.selectedEntityVersion.label})`,postman_api_id:this.store.selectedEntity&&this.store.selectedEntity.value,postman_api_version_id:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,aws_key_id:n,aws_access_key:t,aws_region:s,aws_api_gateway_id:c,aws_api_gateway_name:d}};return o.createElement("div",null,o.createElement(u.NicknameFieldSegment,{id:"aws-api-gateway-nickname",value:i,error:b,onBlur:()=>{this.setState({nickname:i.trim(),errorNickname:r().isEmpty(i.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(u.WorkspaceSelector,{description:"Select the workspace your API is in"}),o.createElement(u.EntitySelector,{id:"api-schemas",entity:m.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",description:"Select the API you wish to deploy",rule:e,mode:m.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),o.createElement(u.EntitySelector,{id:"api-schema-versions",entity:m.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Add API version whose schemas will be deployed",rule:e,mode:m.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity}),o.createElement(u.SelectSegment,{title:"Select API Gateway to deploy to",disabled:!!h,placeholder:"Type to filter API Gateways",filterItems:v,initialLabel:"Select API Gateway",selectedTarget:l,onTargetSelect:this.onTargetSelect,showCustomLabel:f,customLabel:o.createElement("div",{className:"custom-apigateway__input",ref:e=>{this.customApiGatewayInput=e},onClick:()=>{this.setState({showApiGatewayInputField:!0,showCustomLabel:!1}),this.scrollToBottom()}},"Don't see your API Gateway? ",o.createElement("span",{className:"pm-link"},"Specify it manually"))}),p?o.createElement(u.FieldSegment,{description:"The API Schema will be deployed to this API Gateway",id:"custom-api-gateway",optional:!h,placeholder:"e.g. Inventory",title:"Enter name for new API Gateway",value:g,onBlur:()=>{this.setState({custom_api_gateway:g.trim()})},onChange:e=>{this.handleCustomApiGatewayInput(e)}}):"",o.createElement(u.AddIntegrationActions,{disabled:!(i&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value&&(g||c)),payload:I,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule}))}})||s,_=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",consentProvided:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:""},this.store=(0,c.resolveStoreInstance)(d.default)}render(){let{rule:e}=this.props,{aws_key_id:t,aws_access_key:n,aws_region:s,apiGateways:a,verifying:i,verification:l,consentProvided:c,errorAwsKeyId:d,errorAwsAccessKey:m,errorAwsRegion:_}=this.state;return l===S&&"aws_api_gateway"===e?o.createElement(y,I({},this.props,{apiGateways:a,aws_access_key:n,aws_key_id:t,aws_region:s})):o.createElement("div",null,o.createElement("div",{className:"integrations-consent"},"We need the following information to deploy to the AWS API Gateway on your behalf. You can find these in your AWS console.",o.createElement(v.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration"},"Learn how")),o.createElement(u.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",value:t,error:d,onBlur:()=>{this.setState({aws_key_id:t.trim(),errorAwsKeyId:r().isEmpty(t.trim())?"Please enter an Access Key ID":""})},onChange:e=>{this.setState({aws_key_id:e,errorAwsKeyId:""})}}),o.createElement(u.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",value:n,error:m,onBlur:()=>{this.setState({aws_access_key:n.trim(),errorAwsAccessKey:r().isEmpty(n.trim())?"Please enter a Secret Access Key":""})},onChange:e=>{this.setState({aws_access_key:e,errorAwsAccessKey:""})}}),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"e.g. us-east-1",title:"AWS Region",value:s,error:_,onBlur:()=>{this.setState({aws_region:s.trim(),errorAwsRegion:r().isEmpty(s.trim())?"Please enter a AWS region":""})},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement("div",{className:"integrations-checkbox__select-consent"},o.createElement(p.Checkbox,{checked:this.state.consentProvided,onChange:()=>{this.setState({consentProvided:!this.state.consentProvided})}}),o.createElement("span",null,"I consent to Postman for collecting and storing my AWS Secret Access Key and AWS Access Key ID.")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(g.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:!n||!t||!s||i||!c,size:"small",onClick:()=>{this.setState({verifying:!0,verification:"AUTH_PENDING"}),f.default.fetchApiGateways({aws_key_id:t,aws_access_key:n,aws_region:s,rule:e,type:"fetchAWSGatewayAPIs"}).then((e=>{this.props.setActiveTab("configure"),this.setState({verifying:!1,verification:S,apiGateways:e.body.Items})})).catch((e=>{this.setState({verifying:!1,verification:"AUTH_FAILED"}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error("Something went wrong while fetching API Gateways, please try again."),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}},i&&o.createElement(h.default,null)||"Authenticate and Proceed")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(g.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),b.default.back()}},"Cancel")))}})||a;function E(e){const{rule:t}=e;if("aws_api_gateway"===t)return o.createElement(_,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepository.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./js/services/NavigationService.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=n("./integrations/constants/integrationsConstants.ts"),m=n("./api-dev/interfaces/APIInterface.js"),h=n("./js/modules/services/AnalyticsService.js");const f={apiversion_repository_gitlab:"Gitlab SaaS",apiversion_repository_azure:"Azure DevOps"};let b=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.handleAddIntegration=this.handleAddIntegration.bind(this),this.redirectToAPIBuilder=this.redirectToAPIBuilder.bind(this)}handleAddIntegration(){this.store.updateIsAdding(!0),p.default.fetchV2ApiGitIntegration(this.store.selectedEntityVersion.value).then((e=>{this.store.updateIsAdding(!1),i().get(e.body,"id")?pm.toasts.error("This API Version is already linked to a repository"):i().isEmpty(e.body)&&this.redirectToAPIBuilder()})).catch((({error:e})=>{this.store.updateIsAdding(!1),pm.logger.warn(`${f[this.props.rule]}~handleAddIntegration: Failed to fetch API Repository link information`,e),pm.toasts.error("Something went wrong with the server")}))}async redirectToAPIBuilder(){const e=this.props.service,t=i().get(this.store,"selectedEntity.value"),n=i().get(this.store,"selectedEntityVersion.value"),s=i().get(this.store,"selectedWorkspace.value"),a={category:"api_repo_integration_v2",entityId:t,action:"initiate_migration",label:"add_repo_integration",value:1};await(0,m.hasAPIMigrated)(t)?(u.default.transitionTo("build.connectAPIRepository",{wid:s,apiId:t,gitService:e},{version:n}),this.store.resetAddIntegrationDependencies()):(h.default.addEventV2(a),pm.mediator.trigger("showAPIMigrationModal",{apiId:t,apiVersionId:n,onComplete:a=>{a===t?u.default.transitionTo("build.connectAPIRepository",{wid:s,apiId:t,gitService:e},{version:n}):u.default.transitionTo("build.api",{wid:s,apiId:t}),this.store.resetAddIntegrationDependencies()},onError:e=>{pm.logger.warn(`${this.state.serviceName}~handleAddIntegration: Failed to migrate the API`,e),pm.toasts.error("Something went wrong with the server",e)}}))}render(){let{rule:e,service:t}=this.props,n=!i().get(this.store,"selectedWorkspace.value")||!i().get(this.store,"selectedEntity.value")||!i().get(this.store,"selectedEntityVersion.value");return r.createElement("div",null,r.createElement(d.WorkspaceSelector,{description:"Select the workspace your API is in"}),r.createElement(d.EntitySelector,{entity:g.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",rule:e,mode:g.INTEGRATION_FORM_MODE.ADD,disabled:!i().get(this.store,"selectedWorkspace.value")}),r.createElement(d.EntitySelector,{entity:g.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:`Add API version that you want to sync to ${f[this.props.rule]}`,rule:e,mode:g.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity}),r.createElement(d.AddIntegrationActions,{disabled:n,service:t,rule:e,handleAddIntegration:this.handleAddIntegration,labels:{add:"Continue"}}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepositoryEnterprise.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApiVersionRepositoryEnterprise:function(){return b}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./js/services/NavigationService.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/ApiVersionRepositoryEnterprise.js"),h=n("./api-dev/interfaces/APIInterface.js"),f=n("./js/modules/services/AnalyticsService.js");let b=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={serviceName:i().capitalize(this.props.service)},this.store=(0,l.resolveStoreInstance)(c.default),this.handleAddIntegration=this.handleAddIntegration.bind(this),this.redirectToAPIBuilder=this.redirectToAPIBuilder.bind(this)}handleAddIntegration(){this.store.updateIsAdding(!0),g.default.fetchV2ApiGitIntegration(i().get(this.store.selectedEntityVersion,"value")).then((e=>{this.store.updateIsAdding(!1),i().get(e.body,"id")?pm.toasts.error("This API Version is already linked to a repository"):i().isEmpty(e.body)&&this.redirectToAPIBuilder()})).catch((({error:e})=>{this.store.updateIsAdding(!1),pm.logger.warn(`${this.state.serviceName}~handleAddIntegration: Failed to fetch API Repository link information`,e),pm.toasts.error("Something went wrong with the server",e)}))}async redirectToAPIBuilder(){const e=`${this.props.service}Enterprise`,t=i().get(this.store,"selectedEntity.value"),n=i().get(this.store,"selectedEntityVersion.value"),s=i().get(this.store,"selectedWorkspace.value"),a={category:"api_repo_integration_v2",entityId:t,action:"initiate_migration",label:"add_repo_integration",value:1};await(0,h.hasAPIMigrated)(t)?(p.default.transitionTo("build.connectAPIRepository",{wid:s,apiId:t,gitService:e},{version:n}),this.store.resetAddIntegrationDependencies()):(f.default.addEventV2(a),pm.mediator.trigger("showAPIMigrationModal",{apiId:t,apiVersionId:n,onComplete:a=>{a===t?p.default.transitionTo("build.connectAPIRepository",{wid:s,apiId:t,gitService:e},{version:n}):p.default.transitionTo("build.api",{wid:s,apiId:t}),this.store.resetAddIntegrationDependencies()},onError:e=>{pm.logger.warn(`${this.state.serviceName}~handleAddIntegration: Failed to migrate the API`,e),pm.toasts.error("Something went wrong with the server",e)}}))}render(){let{rule:e,service:t}=this.props,n=!i().get(this.store,"selectedWorkspace.value")||!i().get(this.store,"selectedEntity.value")||!i().get(this.store,"selectedEntityVersion.value");return r.createElement("div",null,r.createElement(d.WorkspaceSelector,{description:"Select the workspace your API is in"}),r.createElement(d.EntitySelector,{entity:u.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",rule:e,mode:u.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(d.EntitySelector,{entity:u.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:`Add API version that you want to sync to ${m.SERVICE_TO_NAME[t]}`,rule:e,mode:u.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity}),r.createElement(d.AddIntegrationActions,{disabled:n,service:t,rule:e,handleAddIntegration:this.handleAddIntegration,labels:{add:"Continue"}}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApigeeAPIGateway.js":function(e,t,n){"use strict";n.r(t),n.d(t,{APIGatewayApigeeSetup:function(){return x},ApigeeAuthenticationPanel:function(){return O},ApigeeConfigurationPanel:function(){return R},default:function(){return M}});var s,a,i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("../../node_modules/react/index.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/StoreManager.js"),u=n("./integrations/api-observability/stores/APIObservabilityStore.js"),p=n("./js/stores/IntegrationsStore.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),_=n("./js/services/NavigationService.js"),E=n("./integrations/navigation/constants.js"),A=n("./js/modules/services/AnalyticsService.js"),w=n("./js/components/base/LoadingIndicator.js"),C=n("./integrations/api-observability/constants.ts"),k=n("./integrations/constants/integrationsConstants.ts"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),P=n("./js/external-navigation/ExternalNavigationService.js"),T=n("./integrations/api-observability/components/base/CustomDropdown.js"),N=n("./integrations/api-observability/components/base/CustomMultiSelect.js");function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},D.apply(this,arguments)}let R=(0,c.observer)(s=class extends l.Component{constructor(e){super(e),this.renderWorkspaceSelectors=()=>l.createElement("div",null,l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(j.WorkspaceSelectorV2,{description:"Select the workspace your API is in"})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(j.EntitySelectorV2,{id:"api-schemas",entity:k.entityTypes.APIS,workspaceId:this.integrationsStore.selectedWorkspace&&this.integrationsStore.selectedWorkspace.value,title:"Select API",description:"Select the API you wish to connect",rule:this.props.rule,mode:k.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedWorkspace})),l.createElement(j.EntitySelectorV2,{id:"api-schema-versions",entity:k.entityTypes.API_VERSIONS,apiId:this.integrationsStore.selectedEntity&&this.integrationsStore.selectedEntity.value,title:"Select API Version",description:"Select the API version you wish to connect",rule:this.props.rule,mode:k.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedEntity})),this.state={fetchedOrganizations:[],selectedOrganization:null,fetchedApiProxies:[],selectedApiProxy:null,fetchedEnvironments:[],selectedEnvironments:null},this.store=(0,d.resolveStoreInstance)(u.default),this.integrationsStore=(0,d.resolveStoreInstance)(p.default),this.handleSelectOrganization=this.handleSelectOrganization.bind(this),this.handleSelectApiProxy=this.handleSelectApiProxy.bind(this),this.handleSelectEnvironments=this.handleSelectEnvironments.bind(this),this.handleConnect=this.handleConnect.bind(this),this.navigateToIntegrationsListPage=this.navigateToIntegrationsListPage.bind(this),this.fetchOrganizations=this.fetchOrganizations.bind(this),this.fetchApiProxies=this.fetchApiProxies.bind(this),this.fetchEnvironments=this.fetchEnvironments.bind(this),this.addIntegration=this.addIntegration.bind(this),this.renderLoadingState=this.renderLoadingState.bind(this),this.getValidationState=this.getValidationState.bind(this)}componentDidMount(){this.fetchOrganizations()}fetchOrganizations(){let{serviceAccountEmail:e,privateKey:t}=this.props;this.setState({isFetchingOrganization:!0});let n={service_account_email:e,private_key:t,classId:this.props.rule},s=C.FETCH_ORGANIZATIONS;y.default.fetchPreConfigurationGatewayActionDetails(s,n).then((e=>{let t=o().get(e,"body.data.organizations",[]),n=o().map(t,(e=>({label:e.organization,value:e.organization})));this.setState({fetchedOrganizations:n,isFetchingOrganization:!1,fetchErrorOrganizations:!1})})).catch((e=>{this.setState({fetchErrorOrganizations:!0,isFetchingOrganization:!1}),pm.toasts.error("Something went wrong while fetching Apigee organizations"),pm.logger.error("Something went wrong while fetching Apigee organizations",e)}))}fetchApiProxies(){let{serviceAccountEmail:e,privateKey:t}=this.props,{selectedOrganization:n}=this.state;this.setState({isFetchingApiProxies:!0});let s={service_account_email:e,private_key:t,organization:o().get(n,"value"),classId:this.props.rule},a=C.FETCH_API_PROXIES;y.default.fetchPreConfigurationGatewayActionDetails(a,s).then((e=>{let t=o().get(e,"body.data.proxies",[]),n=o().map(t,(e=>({label:e.name,value:e.name})));this.setState({fetchedApiProxies:n,isFetchingApiProxies:!1,fetchErrorApiProxies:!1})})).catch((e=>{this.setState({fetchErrorApiProxies:!0,isFetchingApiProxies:!1}),pm.toasts.error("Something went wrong while fetching Apigee API Proxies"),pm.logger.error("Something went wrong while fetching Apigee API Proxies",e)}))}fetchEnvironments(){let{serviceAccountEmail:e,privateKey:t}=this.props,{selectedOrganization:n}=this.state;this.setState({isFetchingEnvironments:!0});let s={service_account_email:e,private_key:t,organization:o().get(n,"value"),classId:this.props.rule},a=C.FETCH_ENVIRONMENTS;y.default.fetchPreConfigurationGatewayActionDetails(a,s).then((e=>{let t=o().map(o().get(e,"body.data",[]),(e=>({label:e,value:e})));this.setState({fetchedEnvironments:t,isFetchingEnvironments:!1,fetchErrorEnvironments:!1})})).catch((e=>{this.setState({fetchErrorEnvironments:!0,isFetchingEnvironments:!1}),pm.toasts.error("Something went wrong while fetching Apigee environments"),pm.logger.error("Something went wrong while fetching Apigee environments",e)}))}handleSelectOrganization(e){this.setState({selectedOrganization:e,errorOrganization:o().isEmpty(e),fetchedApiProxies:[],selectedApiProxy:[],selectedEnvironments:[],fetchedEnvironments:[]},(()=>{o().get(e,"value")&&(this.fetchApiProxies(C.PRE_CONFIG),this.fetchEnvironments(C.PRE_CONFIG))}))}handleSelectEnvironments(e){this.setState({selectedEnvironments:e,errorEnvironments:o().isEmpty(e)})}handleSelectApiProxy(e){this.setState({selectedApiProxy:e,errorApiProxy:o().isEmpty(e)})}handleConnect(){let{selectedOrganization:e,selectedApiProxy:t,selectedEnvironments:n}=this.state,{serviceAccountEmail:s,privateKey:a,rule:i}=this.props,r=o().get(this.integrationsStore,"selectedEntity.name"),l=o().get(this.integrationsStore,"selectedEntityVersion.name"),c={name:r+"-"+l+"-apigee",rule:i,entity:"apiversion",executor:o().get(this.integrationsStore.selectedEntityVersion,"value"),variables:{postman_api_id:o().get(this.integrationsStore.selectedEntity,"value"),service_account_email:s,private_key:a,organization:o().get(e,"value"),api_proxy:o().get(t,"value"),environments:o().isArray(n)?n.map((e=>o().get(e,"value"))):[]}};this.setState({isAddingIntegration:!0}),r&&l?this.addIntegration(c,i):pm.toasts.error("Something went wrong while adding a new integration. Please try again")}addIntegration(e,t){y.default.createIntegration(null,e).then((e=>{this.setState({isAddingIntegration:!1}),200===o().get(e,"status")&&o().get(e,"body.model_id")?(pm.toasts.success("Added a new integration"),A.default.addEventV2({category:"integrations",action:t+"_created_integration",label:"team_integrations_create_forms",value:1}),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.resetAddIntegrationDependencies(),this.navigateToIntegrationsListPage()):pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.setState({isAddingIntegration:!1}),"integrationFoundError"===o().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while adding a new integration. Please try again."),pm.logger.error("Something went wrong while adding a new integration",e)}))}navigateToIntegrationsListPage(){let{service:e,rule:t,formType:n}=this.props;_.default.transitionTo(E.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:e,ruleId:t})}renderLoadingState(){return l.createElement(g.default,{justifyContent:"space-between"},l.createElement("div",null,"Loading..."),l.createElement(w.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(e){let{errorOrganization:t,fetchErrorOrganizations:n,errorApiProxy:s,fetchErrorApiProxies:a,errorEnvironments:i,fetchErrorEnvironments:r}=this.state;return"organization"===e?t||n?{status:"error",message:n?l.createElement("div",null,"Unable to load organizations.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchOrganizations()}},"Retry")):"Please select an organization."}:{}:"apiProxy"===e?s||a?{status:"error",message:a?l.createElement("div",null,"Unable to load API Proxies.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchApiProxies()}},"Retry")):"Please select an API Proxy."}:{}:i||r?{status:"error",message:r?l.createElement("div",null,"Unable to load environments.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEnvironments()}},"Retry")):"Please select one or more environments."}:{}}render(){const{fetchedOrganizations:e,selectedOrganization:t,fetchedApiProxies:n,selectedApiProxy:s,fetchedEnvironments:a,selectedEnvironments:i,isAddingIntegration:r,isFetchingOrganization:c,isFetchingApiProxies:d,isFetchingEnvironments:u}=this.state,{serviceAccountEmail:p,privateKey:g,service:f}=this.props,b=o().isEmpty(t)||o().isEmpty(s)||o().isEmpty(i)||!p||!g||!this.integrationsStore.selectedWorkspace||!this.integrationsStore.selectedEntity||!this.integrationsStore.selectedEntityVersion;return l.createElement("div",{className:"connect-apigee-gateway__form__browse"},l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(T.default,{onChange:this.handleSelectOrganization,options:e||[],value:t,label:"Organization",placeholder:c?this.renderLoadingState():"Select Organization",className:c?"dropdown-icon-remove":"",emptyStateMessage:"No organizations found",isDisabled:c,validationState:this.getValidationState("organization"),menuWidth:C.DROPDOWN_WIDTH})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(T.default,{onChange:this.handleSelectApiProxy,options:n||[],value:s,label:"API Proxy",helperText:"Connection between Proxy and Postman API",placeholder:d?this.renderLoadingState():"Select API Proxy",className:d?"dropdown-icon-remove":"",isDisabled:!o().get(t,"value")||d,emptyStateMessage:"No API Proxies found",validationState:this.getValidationState("apiProxy"),menuWidth:C.DROPDOWN_WIDTH})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(N.default,{onChange:this.handleSelectEnvironments,options:a,value:i,label:"Environments",helperText:"Environments configured on Apigee X over which APIs are deployed",placeholder:u?this.renderLoadingState():"Select one or more environments",isDisabled:!o().get(t,"value")||u,emptyStateMessage:"No environments found",validationState:this.getValidationState("environments")})),this.renderWorkspaceSelectors(),l.createElement("div",{className:"connect-apigee-gateway__form--buttons"},l.createElement(m.default,null,l.createElement(h.default,{type:"secondary",size:"small",onClick:()=>{_.default.back()},text:"Cancel",isDisabled:r}),l.createElement(h.default,{type:"primary",size:"small",onClick:()=>{this.handleConnect()},isDisabled:b,text:"Complete Setup",isLoading:r}))))}})||s,O=(0,c.observer)(a=class extends l.Component{constructor(e){super(e),this.setUploadedFile=e=>{let t=o().isObject(e)?e[0]:"";if(t){let e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=function(e){try{let t=JSON.parse(e.target.result),n=Object.keys(t),s=o().get(t,"client_email"),a=o().get(t,"private_key");if(this.setState({isFileUploaded:!0,serviceAccountEmail:s,privateKey:a}),!n.includes("client_email","private_key")){let e=new Error;throw e.name="invalidFileContent",e}this.props.handleServiceAccountEmail(s),this.props.handlePrivateKey(a)}catch(e){this.setState({isFileUploaded:!1}),"invalidFileContent"===e.name?(pm.toasts.error("Invalid file content. Please try selecting different file."),pm.logger.error("Something went wrong while parsing JSON file",e)):(pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Something went wrong while parsing JSON file",e))}}.bind(this)}else this.setState({isFileUploaded:!1,serviceAccountEmail:"",privateKey:""}),this.props.handleServiceAccountEmail(""),this.props.handlePrivateKey("")},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e,errorServiceAccountEmail:!e}),this.props.handleServiceAccountEmail(e)},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n"),errorPrivateKey:!e}),this.props.handlePrivateKey(e)},this.renderDescription=()=>l.createElement("div",{className:"connect-apigee-gateway__stepper__description"},C.AUTHENTICATE_STEP_DESCRIPTION_1,l.createElement("div",null,"Follow these",l.createElement(f.default,{className:"connect-apigee-gateway__stepper__authorize__description",type:"link-default"},l.createElement("span",{onClick:()=>{(0,P.openExternalLink)("https://go.pstmn.io/apigee-setup-instructions","_blank")}},"instructions")),C.AUTHENTICATE_STEP_DESCRIPTION_2)),this.state={serviceAccountEmail:"",privateKey:""}}render(){const{serviceAccountEmail:e,privateKey:t,errorServiceAccountEmail:n,errorPrivateKey:s,isFileUploaded:a}=this.state;return l.createElement("div",null,l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__input"},this.renderDescription()),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__input"},l.createElement(b.default,{label:"Upload private key file (Optional)",helperText:l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__text"},l.createElement("div",null,"Upload private key file or manually enter the values below. "),l.createElement("div",null,"Only JSON file format is supported.")),id:"file-uploader",accept:".json",onChange:this.setUploadedFile,actionLabel:"Select File"})),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__private-key"},l.createElement(v.default,{placeholder:"Enter service account email",helperText:"Service Account Email associated with Google Cloud Project",value:e,onChange:e=>this.handleServiceAccountEmail(e.target.value),label:l.createElement(I.default,{text:"Service Account Email"}),validationStatus:n?"error":"",validationMessage:"Please enter service account email",isDisabled:a})),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__private-key"},l.createElement(S.default,{placeholder:"Enter private key",helperText:"Private key associated with the Service Account",value:t,onChange:e=>this.handlePrivateKey(e.target.value),label:l.createElement(I.default,{text:"Private Key"}),validationStatus:s?"error":"",validationMessage:"Please enter private key",isDisabled:a,isResizable:!1})))}})||a,x=(0,c.observer)(i=class extends l.Component{constructor(e){super(e),this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e})},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n")})},this.authenticate=()=>{const{serviceAccountEmail:e,privateKey:t}=this.state;let n={service_account_email:e,private_key:t,classId:this.props.rule};this.setState({isLoading:!0}),y.default.fetchPreConfigurationGatewayActionDetails(C.FETCH_ORGANIZATIONS,n).then((e=>{200===e.status?(this.setState({isAuthenticated:!0,activeTab:"configure",isLoading:!1}),this.props.setActiveTab("configure")):this.setState({isAuthenticated:!1,isLoading:!1})})).catch((e=>{this.setState({isLoading:!1}),pm.toasts.error("Could not authorize. Please try again."),pm.logger.error("Could not get authorized.",e)}))},this.state={activeTab:"authenticate",serviceAccountEmail:"",privateKey:""}}render(){const{serviceAccountEmail:e,privateKey:t,isLoading:n}=this.state,{service:s}=this.props;return l.createElement("div",{className:"connect-apigee-gateway__stepper"},"authenticate"===this.state.activeTab?l.createElement("div",null,l.createElement(O,{handleServiceAccountEmail:this.handleServiceAccountEmail,handlePrivateKey:this.handlePrivateKey}),l.createElement("div",{className:"connect-apigee-gateway__form--buttons"},l.createElement(m.default,null,l.createElement(h.default,{type:"secondary",size:"medium",text:"Cancel",onClick:()=>{_.default.back()},isDisabled:n}),l.createElement(h.default,{type:"primary",size:"medium",text:"Connect",onClick:()=>{this.authenticate()},isLoading:n,isDisabled:!e||!t||n})))):l.createElement("div",null,l.createElement(R,D({},this.props,{serviceAccountEmail:e,privateKey:t}))))}})||i;function M(e){const{rule:t}=e;return"api_gateway_apigee"===t?l.createElement(x,e):l.createElement("div",null)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApmDatadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApmDatadogAuthentication:function(){return k},ApmDatadogConfiguration:function(){return C},default:function(){return j}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./js/components/base/Buttons.js"),g=n("./integrations/constants/integrationsConstants.ts"),m=n("./integrations/monitoring/services/index.js"),h=n("./integrations/monitoring/constants.js"),f=n("./js/components/base/LoadingIndicator.js"),b=n("./js/services/NavigationService.js"),v=n("./node_modules/uuid/index.js"),I=n.n(v),S=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),E=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},A.apply(this,arguments)}const w=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Datadog APM Integration");let C=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",appKey:"",activeStepIndex:0,authenticationStatus:"progress",serviceSelectStatus:"pending",isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",errorApiKey:!1,errorAppKey:!1,environments:S.default.getEmptyEnvironmentsList(),region:"us1",dashboardGuids:[]},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this),this.client_category=h.API_MONITORING}componentDidMount(){this.listDashboards()}onDashboardSelect(e){if(!r().isArray(e))return;let t=r().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e,dashboardGuids:t})}async listDashboards(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(h.DATADOG_APM_CLASS_ID);const{rule:e,apiKey:t,appKey:n,region:s}=this.props,a=r().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),i=r().get(a,"options.serviceActionId"),o=r().get(a,"id");if(r().isEmpty(t)||r().isEmpty(n))return;this.setState({loadingDashboards:!0,errorDashboards:!1});const l={rule:e,api_key:t,app_key:n,region:s};m.default[e].listDashboards(l,null,i,o).then((e=>{let t=r().map(r().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${S.default.getDatadogHostname(s)}${e.url}`}))),n=r().filter(t,(e=>r().includes(r().map(this.state.dashboardGuids,"link"),e.url)));this.setState({availableDashboards:t,selectedDashboards:n,loadingDashboards:!1})})).catch((e=>{pm.logger.error("ApmDatadogConfiguration ~ Browse Integrations Page Add From ~ Error occurred while listing dashboards",e,{context:w}),this.setState({errorDashboards:!0,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]})}))}removeEnvironmentSelector(e){this.setState((t=>{let{environments:n}=t;return r()(n).splice(e,1).value(),{environments:n}}))}render(){const{selectedDashboards:e,availableDashboards:t,environments:n,loadingDashboards:s,dashboardGuids:a,errorDashboards:i}=this.state,{rule:l,apiKey:c,appKey:d,region:p,nickname:g}=this.props,m=S.default.areEnvironmentsValid(n);let f={name:g,rule:l,entity:"apiversion",executor:this.integrationsStore.selectedEntityVersion&&this.integrationsStore.selectedEntityVersion.value,api_id:this.integrationsStore.selectedEntity&&this.integrationsStore.selectedEntity.value,variables:{api_key:c,app_key:d,region:p,postman_api_id:this.integrationsStore.selectedEntity&&this.integrationsStore.selectedEntity.value,environments:r().map(n,(e=>({name:e.name,services:e.services}))),dashboard_guids:a}};return o.createElement(o.Fragment,null,o.createElement(E.default,{width:"100%",padding:{paddingBottom:"spacing-l",paddingTop:"spacing-l"}},o.createElement(y.default,{mode:h.ADD_MODE,apiKey:c,appKey:d,selectedDashboards:e,availableDashboards:t,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:s,errorDashboards:i,environments:n,rule:l,onSelectEnvironmentServices:(e,t,n)=>{this.setState((s=>(s.environments[n]={id:r().get(s.environments[n],"id"),name:e,services:t},s)))},region:p,removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{this.setState((e=>(e.environments.push({name:"",services:[],id:I().v4()}),e)))},isAddEnvironmentButtonDisabled:!m})),o.createElement(u.AddIntegrationActions,{disabled:!(g&&this.integrationsStore.selectedWorkspace&&this.integrationsStore.selectedWorkspace.value&&this.integrationsStore.selectedEntity&&this.integrationsStore.selectedEntity.value&&this.integrationsStore.selectedEntityVersion&&this.integrationsStore.selectedEntityVersion.value&&m),payload:f,workspaceId:this.integrationsStore.selectedWorkspace&&this.integrationsStore.selectedWorkspace.value,service:this.props.service,rule:this.props.rule}))}})||s,k=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",appKey:"",activeStepIndex:0,isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",verifying:!1,verification:"",errorApiKey:!1,errorAppKey:!1,region:"us1"},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.authenticateApiKey=this.authenticateApiKey.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.client_category=h.API_MONITORING}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1}}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}async authenticateApiKey(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(h.DATADOG_APM_CLASS_ID);const{rule:e}=this.props,{apiKey:t,appKey:n,region:s}=this.state,a=r().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),i=r().get(a,"options.serviceActionId"),o=r().get(a,"id");this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!0,errorServices:!1});const l={rule:e,api_key:t,app_key:n,region:s};m.default[e].authenticateApiKey(l,null,i,o).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!1,activeStepIndex:1},(()=>{this.props.setActiveTab("configure"),this.setState({verifying:!1,verification:h.AUTH_SUCCESS})}))})).catch((e=>{pm.logger.error("ApmDatadogAuthentication ~ Browse Integrations Page Add Form ~ Error occurred while authenticating api key and app key",e,{context:w}),this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,errorAppKey:!0}),this.setState({verifying:!1,verification:h.AUTH_FAILED}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}render(){const{apiKey:e,appKey:t,nickname:n,region:s,errorApiKey:a,errorAppKey:i,errorNickname:l,authenticationFailed:c,verification:d,verifying:m}=this.state,{rule:v}=this.props;return d===h.AUTH_SUCCESS&&v===h.DATADOG_APM_CLASS_ID?o.createElement(C,A({},this.props,{apiKey:e,appKey:t,region:s,nickname:n})):o.createElement("div",null,o.createElement(u.NicknameFieldSegment,{id:"datadog-nickname",value:n,error:l,onBlur:()=>{this.setState({nickname:n.trim(),errorNickname:r().isEmpty(n.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(u.WorkspaceSelector,{description:"Select the workspace your API is in"}),o.createElement(u.EntitySelector,{id:"api-schemas",entity:g.entityTypes.APIS,workspaceId:this.integrationsStore.selectedWorkspace&&this.integrationsStore.selectedWorkspace.value,title:"Select API",description:"Select the API to connect",rule:v,mode:g.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedWorkspace}),o.createElement(u.EntitySelector,{id:"api-schema-versions",entity:g.entityTypes.API_VERSIONS,apiId:this.integrationsStore.selectedEntity&&this.integrationsStore.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:v,mode:g.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedEntity}),o.createElement("br",null),o.createElement(_.default,{mode:h.ADD_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value})},handleOnApiKeyBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:r().isEmpty(e.trim()),authenticationFailed:!r().isEmpty(e.trim())})},apiKey:e,apiKeyValidationStatus:a&&(c?"error":null),apiKeyValidationMessage:a&&(c?"Invalid API Key or APP key":r().isEmpty(e.trim())&&"Please enter the API key"),handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value})},handleOnAppKeyBlur:()=>{this.setState({appKey:t.trim(),errorAppKey:r().isEmpty(t.trim()),authenticationFailed:!r().isEmpty(t.trim())})},appKey:t,appKeyValidationStatus:i&&(c?"error":null),appKeyValidationMessage:i&&(c?"Invalid API Key or APP key":r().isEmpty(t.trim())&&"Please enter the Application key"),region:s,handleOnRegionChange:this.onRegionSelectorChange,rule:v}),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:!s||!e||!t||a||i,size:"small",onClick:()=>{this.setState({verifying:!0,verification:h.AUTH_PENDING}),this.authenticateApiKey()}},m&&o.createElement(f.default,null)||"Authenticate and Proceed")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.integrationsStore.resetAddIntegrationDependencies(),b.default.back()}},"Cancel")))}})||a;function j(e){const{rule:t}=e;if(t===h.DATADOG_APM_CLASS_ID)return o.createElement(k,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApmNewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApmNewRelicAuthentication:function(){return D},ApmNewRelicConfiguration:function(){return N},default:function(){return R}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./js/components/base/Buttons.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),f=n("./integrations/constants/integrationsConstants.ts"),b=n("./integrations/monitoring/services/index.js"),v=n("./node_modules/react-radio-group/lib/index.js"),I=n("./integrations/monitoring/constants.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),y=n("./js/components/base/LoadingIndicator.js"),_=n("./js/services/NavigationService.js"),E=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),A=n("./js/stores/CurrentUserStore.js"),w=n("./integrations/services/AuthenticationInstanceService.ts"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),k=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),j=n("./js/services/CurrentUserDetailsService.js");function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},P.apply(this,arguments)}const T=pm.logger.getContext("APMNewRelic-Add","integrations");let N=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",activeStepIndex:0,authenticationStatus:"progress",serviceSelectStatus:"pending",isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",errorApiKey:"",monitor:"",region:I.NEW_RELIC_REGIONS.US},this.store=(0,c.resolveStoreInstance)(d.default),this.onServiceSelect=this.onServiceSelect.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.client_category=I.API_MONITORING}componentDidMount(){this.listServices(),this.listDashboards()}onServiceSelect(e){if(!r().isArray(e))return;let t=r().map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!r().isArray(e))return;let t=r().map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}listServices(){const{rule:e,apiKey:t,region:n,isUsingApiKeyInput:s,authenticationInstances:a}=this.props,i={rule:e,type:"listServices"};s?(i.api_key=t,i.region=n):i.serviceAuth=r().head(a).id,this.setState({loadingServices:!0,errorServices:!1}),b.default[e].listServices(i).then((e=>{let t=r().map(r().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedService:[]})}))}listDashboards(){const{rule:e,apiKey:t,region:n,isUsingApiKeyInput:s,authenticationInstances:a}=this.props,i={rule:e,type:"listDashboards"};s?(i.api_key=t,i.region=n):i.serviceAuth=r().head(a).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),b.default[e].listServices(i).then((e=>{let t=r().map(r().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableDashboards:t,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,availableDashboards:[],selectedDashboard:[]})}))}render(){const{selectedDashboard:e,availableDashboards:t,availableServices:n,selectedService:s,loadingServices:a,loadingDashboards:i,serviceGuids:l,dashboardGuids:c,errorServices:d,errorDashboards:p}=this.state,{rule:h,apiKey:f,region:b,nickname:v,isUsingApiKeyInput:I,authenticationInstances:S,authenticationInstanceId:y}=this.props;let _={name:v,rule:h,entity:"apiversion",executor:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,api_id:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{...I?{api_key:f,region:b}:{auth:S.length>0?r().head(S).id:""},postman_api_id:this.store.selectedEntity&&this.store.selectedEntity.value,service_guids:l,dashboard_guids:c}};return y?_.variables.auth=y:(_.variables.api_key=f,_.variables.region=b),o.createElement(E.MultiSelectContainer,null,o.createElement(E.MultiSelectDiv,null,o.createElement(g.default,{value:s,options:n,placeholder:"Select New Relic Services",label:o.createElement(m.default,{text:"Services",type:"secondary",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:d&&"Unable to load services",emptyStateMessage:"No services found"})),o.createElement(E.MultiSelectDiv,null,o.createElement(g.default,{value:e,options:t,placeholder:"Select Dashboards",label:o.createElement(m.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:this.onDashboardSelect,isLoading:i,error:p&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"})),o.createElement(u.AddIntegrationActions,{disabled:!v||!r().get(this.store,"selectedWorkspace.value")||!r().get(this.store,"selectedEntity.value")||!r().get(this.store,"selectedEntityVersion.value")||r().isEmpty(l),payload:_,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule}))}})||s,D=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",addNewRelicToTeam:!1,authenticationInstanceId:"",addingAuthenticationInstance:!1,activeStepIndex:0,isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",verifying:!1,verification:"",errorApiKey:"",monitor:"",region:I.NEW_RELIC_REGIONS.US,authenticationInstances:[],loadingAuthenticationInstances:!0,isUsingApiKeyInput:!1,installedAppFeatureFlag:!1},this.store=(0,c.resolveStoreInstance)(d.default),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.authenticateApiKey=this.authenticateApiKey.bind(this),this.createAuthenticationInstance=this.createAuthenticationInstance.bind(this),this.client_category=I.API_MONITORING,this.reauthenticate=this.reauthenticate.bind(this)}componentDidMount(){const e=(0,I.isFeatureFlagEnabled)(I.NEW_RELIC_APM_CLASS_ID);e?(this.setState({installedAppFeatureFlag:e}),this.fetchAuthenticationInstances()):this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1})}fetchAuthenticationInstances(){const e=(0,c.resolveStoreInstance)(A.default);this.setState({loadingAuthenticationInstances:!0}),w.default.listAuthenticationInstances({scope:[{type:I.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[I.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[I.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(r().isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:T}),this.setState({loadingAuthenticationInstances:!1});if(r().isEmpty(e.data))return this.setState({isUsingApiKeyInput:!0,authenticationInstances:[],loadingAuthenticationInstances:!1});const t=r().head(e.data);C.default.fetchUserInfo(t.createdBy,((n,s)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=r().get(s,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,isUsingApiKeyInput:!1,loadingAuthenticationInstances:!1}))))})).catch((e=>(pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances!",e,{context:T}),this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1}))))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:r().isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}authenticateApiKey(){const{rule:e}=this.props,{apiKey:t,region:n}=this.state;this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,loadingServices:!0,errorServices:!1}),b.default[e].authenticateApiKey({rule:e,type:"getUserInfo",api_key:t,region:n}).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,loadingServices:!1,activeStepIndex:1},(()=>{this.props.setActiveTab("configure"),this.setState({verifying:!1,verification:I.AUTH_SUCCESS})}))})).catch((e=>{this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0}),this.setState({verifying:!1,verification:I.AUTH_FAILED}),pm.logger.error("Something went wrong",e),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}reauthenticate(){this.setState({isUsingApiKeyInput:!0})}createAuthenticationInstance(){const{apiKey:e,region:t}=this.state,n=[{type:I.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:j.default.teamId}],s={user_key:e,region:t},a=I.AUTHENTICATION_CLASSES.NEW_RELIC_USER;this.setState({addingAuthenticationInstance:!0,authenticationInstanceId:""}),w.default.createAuthenticationInstance(a,n,s).then((e=>{this.setState({addingAuthenticationInstance:!1,authenticationInstanceId:r().get(e,"body.data[0].id")})})).catch((e=>{this.setState({addingAuthenticationInstance:!1,authenticationInstanceId:""}),e.name===I.TEAM_AUTH_FORBIDDEN_ERROR?pm.toasts.error(I.ADD_NEW_RELIC_TO_TEAM_FORBIDDEN):pm.toasts.error(I.ERROR_ADDING_NEW_RELIC_TO_TEAM),pm.logger.error("Error while adding authentication instance for New Relic",e,T),pm.toasts.error("Something went wrong while authenticating, please try again.")}))}render(){const{apiKey:e,nickname:t,region:n,errorApiKey:s,errorNickname:a,authenticationFailed:i,verification:l,verifying:c,authenticationInstances:d,isUsingApiKeyInput:g,loadingAuthenticationInstances:m,addNewRelicToTeam:b,addingAuthenticationInstance:E,authenticationInstanceId:A,installedAppFeatureFlag:w}=this.state,{rule:C}=this.props,j=e&&n||d.length,T=b&&!E&&A;return l!==I.AUTH_SUCCESS&&l!==I.AUTH_PRESENT||C!==I.NEW_RELIC_APM_CLASS_ID||!T&&b?o.createElement("div",null,g?null:o.createElement(k.default,{connectedAccount:r().head(d),isLoading:m,isUsingPersonalCredentials:g,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+r().get(r().head(d),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account"}),o.createElement(u.NicknameFieldSegment,{id:"new-relic-nickname",value:t,error:a,onBlur:()=>{this.setState({nickname:t.trim(),errorNickname:r().isEmpty(t.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(u.WorkspaceSelector,{description:"Select the workspace your API is in"}),o.createElement(u.EntitySelector,{id:"api-schemas",entity:f.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",description:"Select the API to connect",rule:C,mode:f.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),o.createElement(u.EntitySelector,{id:"api-schema-versions",entity:f.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:C,mode:f.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity}),g?o.createElement(o.Fragment,null,o.createElement(u.SensitiveFieldSegment,{title:"New Relic API Key",description:"Enter the API Key provided by New Relic or ",customLink:o.createElement(S.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:s&&(i?"Invalid API Key":r().isEmpty(e.trim())&&"Please enter the API key"),onChange:e=>{this.setState({apiKey:e,errorApiKey:!1})},onBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:!!r().isEmpty(e.trim()),authenticationFailed:!r().isEmpty(e.trim())})}}),o.createElement("div",{className:"push-double--bottom__add-to-team"},o.createElement("label",null,o.createElement("h4",{className:"integrations-add-card__label-title"},"New Relic region"),o.createElement("p",{className:"integrations-add-card__label-description"},"This helps us know what New Relic region to use")),o.createElement(v.RadioGroup,{name:"Select New Relic site",selectedValue:this.state.region,onChange:e=>{this.onRegionSelectorChange(e)}},o.createElement("div",{className:"integrations-radio-button__select-group--regions"},o.createElement("label",null,o.createElement(v.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),o.createElement("span",null,"US (.com)"))),o.createElement("div",{className:"integrations-radio-button__select-group--regions"},o.createElement("label",null,o.createElement(v.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),o.createElement("span",null,"EU (.eu)"))))),w&&r().isEmpty(d)?o.createElement("div",null,o.createElement(h.default,{isChecked:b,label:I.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:I.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!b})}})):null):null,o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:!(j&&r().get(this.store,"selectedWorkspace.value")&&r().get(this.store,"selectedEntity.value")&&r().get(this.store,"selectedEntityVersion.value")),size:"small",onClick:()=>{g?(this.setState({verifying:!0,verification:I.AUTH_PENDING}),this.authenticateApiKey(),b&&this.createAuthenticationInstance()):(this.setState({verification:I.AUTH_PRESENT}),this.props.setActiveTab("configure"))}},c&&o.createElement(y.default,null)||(g?"Authenticate and Proceed":"Proceed"))),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),_.default.back()}},"Cancel"))):o.createElement(N,P({},this.props,{isUsingApiKeyInput:g,authenticationInstances:d,apiKey:e,authenticationInstanceId:A,region:n,nickname:t}))}})||a;function R(e){const{rule:t}=e;if("apm_new_relic"===t)return o.createElement(D,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Azure.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});n("./node_modules/lodash/lodash.js");var s=n("../../node_modules/react/index.js"),a=(n("../../node_modules/mobx-react/dist/mobx-react.module.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepository.js")),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepositoryEnterprise.js");function o(e){const{rule:t}=e;return"apiversion_repository_azure"===t?s.createElement(a.default,e):"apiversion_repository_azure_enterprise"===t?s.createElement(r.ApiVersionRepositoryEnterprise,e):s.createElement(i.default,null)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/AzureAPIM.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AzureSetup:function(){return A},default:function(){return w}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),d=n("./integrations/api-observability/components/base/AzureServiceConfig.js"),u=n("./integrations/api-observability/components/base/CancelButton.js"),p=n("./integrations/api-observability/components/base/AddIntegrationV2.js"),g=n("./node_modules/uuid/v4.js"),m=n.n(g),h=n("./integrations/navigation/constants.js"),f=n("./js/stores/StoreManager.js"),b=n("./integrations/api-observability/stores/APIObservabilityStore.js"),v=n("./js/stores/IntegrationsStore.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),S=n("./integrations/constants/integrationsConstants.ts"),y=n("./integrations/api-observability/constants.ts"),_=n("./integrations/api-observability/services/Helper.js");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},E.apply(this,arguments)}let A=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.handleLinkedApis=(e,t)=>{let{linkedApis:n}=this.state,s=!1;e&&(n[t]=e),i().each(n,(e=>{if(!(i().get(e,"azure_subscription_id")&&i().get(e,"azure_resource_group_id")&&i().get(e,"azure_service_id")&&i().get(e,"azure_api_id")))return s=!0,!1})),this.setState({linkedApis:n,isDisabled:s})},this.generatePayload=()=>{const{linkedApis:e}=this.state;let t={entity:"apiversion",executor:i().get(this.integrationsStore,"selectedEntityVersion.value"),name:i().get(this.integrationsStore,"selectedEntity.name")+"-"+i().get(this.integrationsStore,"selectedEntityVersion.name")+"-azure",rule:this.props.rule,variables:{linked_apis:[],azure_access_token:i().get(this.integrationsStore,"authDetails.access_token"),azure_refresh_token:i().get(this.integrationsStore,"authDetails.refresh_token"),postman_api_id:i().get(this.integrationsStore,"selectedEntity.value"),use_refresh_token:!0}};return i().each(e,(e=>{e=i().pick(e,["azure_subscription_id","azure_resource_group_id","azure_service_id","azure_service_path","azure_api_id","azure_api_path"]),t.variables.linked_apis.push(e)})),new Promise((e=>this.setState({payload:t},(()=>e(t)))))},this.handleFetchedSubscriptions=e=>{this.setState({fetchedSubscriptions:e})},this.addSection=()=>{let{linkedApis:e}=this.state;const t=m()();e[t]={},i().each(e,(e=>{e.isCollapsed=!0})),e[t].isCollapsed=!1,this.setState({linkedApis:e})},this.removeSection=e=>{let{linkedApis:t}=this.state;t[e]&&delete t[e],this.setState({linkedApis:t})},this.handleCollapse=(e,t)=>{let{linkedApis:n}=this.state;n[e]&&(n[e].isCollapsed=t),this.setState({linkedApis:n})},this.renderSections=()=>{let{fetchedSubscriptions:e,linkedApis:t}=this.state,n=[],s=1,a=[];return i().isObject(t)&&i().each(Object.keys(t),(e=>{t[e].azure_api_path&&a.push(t[e].azure_api_path)})),i().isObject(t)&&i().each(t,((o,l)=>{let c=t[l].isCollapsed;n.push(r.createElement(d.default,E({},this.props,{key:l,index:l,handleLinkedApis:this.handleLinkedApis,linkedApis:t,fetchedSubscriptions:e,selectedApiPaths:a,handleFetchedSubscriptions:this.handleFetchedSubscriptions,handleRemoveSection:this.removeSection,handleCollapse:this.handleCollapse,isCollapsed:c,isRemoveHidden:1===Object.keys(t).length,formType:y.ADD,accessToken:i().get(this.integrationsStore,"authDetails.access_token"),serialNumber:s}))),s++})),n},this.renderWorkspaceSelectors=()=>r.createElement("div",{className:"observability-azure-add-integration__service__workspace-selectors"},r.createElement("div",{className:"observability-azure-add-integration__service__component"},r.createElement(I.WorkspaceSelectorV2,{description:"Select the workspace your API is in"})),r.createElement("div",{className:"observability-azure-add-integration__service__component"},r.createElement(I.EntitySelectorV2,{id:"api-schemas",entity:S.entityTypes.APIS,workspaceId:i().get(this.integrationsStore,"selectedWorkspace.value"),title:"Select API",description:"Select the API you wish to connect",rule:this.props.rule,mode:S.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedWorkspace||i().isEmpty(this.integrationsStore.selectedWorkspace)})),r.createElement(I.EntitySelectorV2,{id:"api-schema-versions",entity:S.entityTypes.API_VERSIONS,apiId:i().get(this.integrationsStore,"selectedEntity.value"),title:"Select API Version",description:"Select the API version you wish to connect",rule:this.props.rule,mode:S.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedEntity||i().isEmpty(this.integrationsStore.selectedEntity)})),this.state={linkedApis:{},fetchedSubscriptions:[]},this.integrationsStore=(0,f.resolveStoreInstance)(v.default),this.store=(0,f.resolveStoreInstance)(b.default)}componentDidMount(){const{linkedApis:e}=this.state;e[m()()]={isCollapsed:!1},this.setState({linkedApis:e})}render(){const{payload:e,isDisabled:t}=this.state,{rule:n,service:s}=this.props,a=t||!i().get(this.integrationsStore,"selectedWorkspace.value")||!i().get(this.integrationsStore,"selectedEntity.value")||!i().get(this.integrationsStore,"selectedEntityVersion.value");return r.createElement("div",null,this.renderWorkspaceSelectors(),r.createElement("div",{className:"observability-azure-add-integration__service"},y.SETUP_AZURE_API_MANAGEMENT_SERVICES),this.renderSections(),r.createElement("div",{className:"observability-azure-add-integration__buttons__add-service"},r.createElement(l.default,{onClick:()=>{this.addSection()},type:"tertiary",text:"Add Service",size:"small",icon:r.createElement(c.default,null),isDisabled:t||this.store.isAdding})),r.createElement("div",{className:"observability-azure-add-integration__buttons"},r.createElement(p.default,{text:"Connect",payload:e,rule:n,service:s,isDisabled:a,customAddIntegrationHandler:this.generatePayload,isBrowseIntegrationFlow:!0,redirectUrl:h.TEAM_INTEGRATIONS_IDENTIFIER,onSuccessfulIntegrationCreate:_.default.addAzureServicesAnalytics}),r.createElement("span",{className:"observability-azure-add-integration__buttons__cancel"},r.createElement(u.default,{text:"Cancel",service:s,rule:n,isBrowseIntegrationFlow:!0,redirectUrl:h.TEAM_INTEGRATIONS_IDENTIFIER}))))}})||s;function w(e){const{rule:t}=e;return"api_management_azure"===t?r.createElement(A,e):r.createElement("div",null)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Bigpanda.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js");let p=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",appKey:"",apiToken:"",errorNickname:"",errorAppKey:"",errorApiToken:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{nickname:e,appKey:t,apiToken:n,errorNickname:s,errorApiToken:a,errorAppKey:o}=this.state,{integrationFormActions:l,selectedWorkspace:c,source:p}=this.props;let g={name:e,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{app_key:t,api_token:n}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"bigpanda-nickname",value:e,error:s,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:i().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"The results of the selected monitor will be sent to BigPanda",selectedWorkspace:c}),r.createElement(u.EntitySelector,{entity:d.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to BigPanda",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.FieldSegment,{description:"Enter your BigPanda App Key",id:"bigpanda-key",title:"App Key",value:t,error:o,onBlur:()=>{this.setState({appKey:t.trim(),errorAppKey:i().isEmpty(t.trim())?"Please enter an app key":""})},onChange:e=>{this.setState({appKey:e,errorAppKey:""})}}),r.createElement(u.SensitiveFieldSegment,{className:"bigpanda-token",description:"Enter the API Token for the App",id:"bigpanda-token",title:"API Token",value:n,error:a,onBlur:()=>{this.setState({apiToken:n.trim(),errorApiToken:i().isEmpty(n.trim())?"Please enter an API token":""})},onChange:e=>{this.setState({apiToken:e,errorApiToken:""})}}),r.createElement(u.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&e&&n&&t),payload:g,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:l,source:p}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Bitbucket.js":function(e,t,n){"use strict";n.r(t),n.d(t,{CollectionBitbucketSetup:function(){return A},checkForValidInput:function(){return E},default:function(){return w}});var s,a,i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./js/components/messaging/Alert.js"),u=n("./js/components/base/Buttons.js"),p=n("./js/components/base/Inputs.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/BitbucketService.js"),h=n("./js/services/NavigationService.js"),f=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n("./integrations/services/OAuthService.js"),n("./integrations/constants/integrationsConstants.ts")),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),v=(n("./api-dev/constants/APIRepositoryConstants.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepository.js")),I=n("./node_modules/lodash/lodash.js");function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S.apply(this,arguments)}const y="AUTH_SUCCESS",_="AUTH_FAILED";function E(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}let A=(0,r.observer)(s=class extends i.Component{constructor(e){super(e),this.state={nickname:"",workspace_slug:"",repository_slug:"",directory:"Postman Collections",branch:"",name:"",repositories:[],selectedRepository:null,errorRepositories:"",loadingRepositories:!1,errorFilename:"",errorNickname:"",firstLoad:!0},this.onRepositorySelect=this.onRepositorySelect.bind(this),this.store=(0,o.resolveStoreInstance)(l.default),this.fetchRepositories=this.fetchRepositories.bind(this)}componentDidMount(){this.fetchRepositories()}fetchRepositories(){this.setState({loadingRepositories:!0,errorRepositories:""}),m.default.fetchRepositories({username:this.props.username,password:this.props.password},((e,t)=>{if(e)e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching Bitbucket repositories, please try again"),this.setState({loadingRepositories:!1});else{let e=!1,n=t.map((t=>t.full_name?{label:t.full_name,value:t.full_name}:(e=!0,{})));e?this.setState({errorRepositories:"Unable to load repositories",loadingRepositories:!1}):this.setState({repositories:n,loadingRepositories:!1})}}))}onRepositorySelect(e){if(I.isEmpty(e))this.setState({selectedRepository:null,workspace_slug:"",repository_slug:"",firstLoad:!1});else{let t=e.label.includes("/")&&e.label.split("/")[0],n=e.label.includes("/")&&e.label.split("/")[1],s=n&&n.replace(/ /g,"-"),a=t&&t.replace(/ /g,"-");this.setState({selectedRepository:e,workspace_slug:a,repository_slug:s,firstLoad:!1})}}render(){const{user:e,rule:t,service:n}=this.props,{nickname:s,workspace_slug:a,repository_slug:r,directory:o,branch:l,name:d,repositories:u,selectedRepository:p,loadingRepositories:g,errorRepositories:m,firstLoad:h,errorFilename:b,errorNickname:v}=this.state;let S={rule:this.props.rule,name:this.state.nickname,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{username:this.props.username,app_password:this.props.password,workspace_slug:a,repo_slug:r,directory:o,file_name:d,branch:l}};return i.createElement("div",null,e&&i.createElement(c.AuthUserSegment,{displayField:e.displayField,imageSrc:e.avatar}),i.createElement(c.NicknameFieldSegment,{id:"bitbucket-nickname",value:s,error:v,onBlur:()=>{this.setState({nickname:s.trim(),errorNickname:I.isEmpty(s.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),i.createElement(c.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to"}),i.createElement(c.EntitySelector,{entity:f.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:"The updates of the selected collection will be sent to Bitbucket",rule:t,mode:f.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),i.createElement(c.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose Repository",description:"The collection will be backed up to this repository",disabled:g||!I.isEmpty(m),options:u,value:p,onTargetSelect:this.onRepositorySelect,noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {workspace}/{repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:E,emptyStateError:!g&&!p&&u.length>0&&!h&&"Please select a repository",error:m,loading:g,handleRetry:()=>this.fetchRepositories()}),i.createElement(c.FieldSegment,{optional:!0,description:"The collection will be pushed to this directory in the repository",id:"bitbucket-directory",title:"Enter Directory",value:o,onBlur:()=>{this.setState({directory:o.trim()})},onChange:e=>{this.setState({directory:e})}}),i.createElement(c.FieldSegment,{description:"This will be the name of the collection in the repository",id:"bitbucket-name",title:"Enter filename",value:d,error:b,onBlur:()=>{this.setState({name:d.trim(),errorFilename:I.isEmpty(d.trim())?"Please enter a filename":""})},onChange:e=>{this.setState({name:e,errorFilename:""})}}),i.createElement(c.FieldSegment,{optional:!0,description:"The collection will be pushed to this branch in the repository",id:"bitbucket-branch",title:"Enter Branch",placeholder:"master",value:l,onBlur:()=>{this.setState({branch:l.trim()})},onChange:e=>{this.setState({branch:e})}}),i.createElement(c.AddIntegrationActions,{disabled:!(s&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&p&&this.store.selectedEntity&&this.store.selectedEntity.value&&a&&r&&d),workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,payload:S,service:n,rule:t,redirect:I.get(this.props,"additionalContext.redirect")}))}})||s,w=(0,r.observer)(a=class extends i.Component{constructor(e){super(e),this.state={username:"",password:"",errorUsername:"",errorPassword:"",verifying:!1,verification:"",user:"",consentProvided:!1},this.store=(0,o.resolveStoreInstance)(l.default)}render(){let{rule:e}=this.props,{username:t,password:n,consentProvided:s,verification:a,verifying:r,errorPassword:o,errorUsername:l}=this.state;return"apiversion_repository_bitbucket"===e?i.createElement(v.default,this.props):a===y&&"collection_bitbucket_cloud"===e?i.createElement(A,S({},this.props,{password:n,username:t,user:this.state.user})):i.createElement("div",null,i.createElement(c.FieldSegment,{description:"",id:"bitbucket-username",title:"Bitbucket username",value:t,error:l,onBlur:()=>{this.setState({username:t.trim(),errorUsername:I.isEmpty(t.trim())?"Please enter an username":""})},onChange:e=>{this.setState({username:e,errorUsername:""})}}),i.createElement(c.SensitiveFieldSegment,{customLink:i.createElement(b.default,{extUrl:"https://go.pstmn.io/docs-bitbucket-integration"},"Learn how to create a Bitbucket app password"),description:'Only the "Account: Read" and "Repositories: Write" permissions are required for your app password.',id:"bitbucket-app-password",title:"Bitbucket app password",value:n,error:o,onBlur:()=>{this.setState({password:n.trim(),errorPassword:I.isEmpty(n.trim())?"Please enter a password":""})},onChange:e=>{this.setState({password:e,errorPassword:""})}}),a===_&&i.createElement(d.default,{type:"error",className:"integrations-add-card__alert",message:"Oops! Looks like you entered an incorrect app password or username."}),i.createElement("div",{className:"integrations-checkbox__select-consent"},i.createElement(p.Checkbox,{checked:this.state.consentProvided,onChange:()=>{this.setState({consentProvided:!this.state.consentProvided})}}),i.createElement("span",null,"I consent to Postman collecting and storing my Bitbucket app password")),i.createElement("div",{className:"integrations-add-actions__button--container"},i.createElement(u.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:r||!t||!n||!s,size:"small",onClick:()=>{this.setState({verifying:!0,verification:"AUTH_PENDING"}),m.default.verifyUser({username:t,password:n},((e,t)=>{e?(pm.logger.error("Error while verifying Bitbucket user",e),this.setState({verifying:!1,verification:_})):200===t.status&&I.get(t,"body.account_id")?(this.setState({verifying:!1,verification:y,user:{id:I.get(t.body,"account_id"),avatar:I.get(t.body.links,"avatar.href"),displayField:I.get(t.body,"display_name")}}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:_})}))}},r&&i.createElement(g.default,null)||"Authenticate and Proceed")),i.createElement("div",{className:"integrations-add-actions__button--container"},i.createElement(u.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),h.default.back()}},"Cancel")))}})||a},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/CircleCI.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("./integrations/ci-cd/components/Button/AddIntegration.js"),r=n("./integrations/ci-cd/components/Button/CancelButton.js"),o=n("./integrations/ci-cd/components/CircleCIFormData.js");t.default=e=>{const{classId:t,serviceId:n}=e;return s.createElement(o.default,{classId:t,renderApiApiversionSelector:!0,optionalFormComponents:(e,o)=>s.createElement(a.default,{justifyContent:"flex-start",gap:"spacing-s"},s.createElement(i.default,{type:"primary",size:"small",disabled:!e,payload:o,service:n,rule:t,useInstanceApi:!0,isBrowseIntegration:!0},"Add Integration"),s.createElement(r.default,{isBrowseIntegration:!0,service:n}))})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Coralogix.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),g=n("./js/components/base/Inputs.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/coralogix.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js");let f=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",privateKey:"",errorNickname:"",errorPrivateKey:"",advanced:!1,selectedCollection:!0,selectedEnvironment:!0,regionOptions:[...m.regions],selectedRegion:{label:"Europe",value:"europe"}},this.store=(0,l.resolveStoreInstance)(c.default),this.toggle=this.toggle.bind(this)}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{privateKey:e,advanced:t,nickname:n,selectedCollection:s,coralogixSite:a,errorCoralogixSite:o,selectedEnvironment:l,errorNickname:c,errorPrivateKey:m,selectedRegion:f,regionOptions:b}=this.state,{integrationFormActions:v,selectedWorkspace:I,source:S}=this.props;let y={name:n,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{private_api_key:e,sendCollection:s,sendEnvironment:l,region:f.value||"europe",coralogix_site:a}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"coralogix-nickname",value:n,error:c,onBlur:()=>{this.setState({nickname:n.trim(),errorNickname:i().isEmpty(n.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:I}),r.createElement(u.EntitySelector,{id:"coralogix-monitor",entity:d.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The logs of the selected monitor will be sent to Coralogix",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.SensitiveFieldSegment,{className:"coralogix-key",description:"Enter your Coralogix private key",id:"coralogix-key",title:"Private key",value:e,error:m,onBlur:()=>{this.setState({privateKey:e.trim(),errorPrivateKey:i().isEmpty(e.trim())?"Please enter a key":""})},onChange:e=>{this.setState({privateKey:e,errorPrivateKey:""})}}),r.createElement(u.FieldSegment,{description:"Enter Coralogix site",placeholder:"https://<example>.coralogix.com",id:"coralogix-site",title:"Coralogix Site",value:a,error:o||a&&(_=a.trim(),h.default.isSecureUrl(_)?h.default.isBaseUrl(_)?"":"Use secure host URL without trailing '/'":"Use secure host URL"),onBlur:()=>{this.setState({coralogixSite:a.trim(),errorCoralogixSite:i().isEmpty(a.trim())?"Please enter the Coralogix site":""})},onChange:e=>{this.setState({coralogixSite:e,errorCoralogixSite:""})}}),r.createElement(u.SelectSegmentV2,{title:"Choose Region",className:"coralogix-region-dropdown",description:"Select the region of your cluster",options:b,value:f,onTargetSelect:e=>{this.setState({selectedRegion:e})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options",r.createElement(p.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),t&&r.createElement("div",{className:"push-double--bottom"},r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(g.Checkbox,{checked:s,onChange:()=>{this.toggle("selectedCollection")}}),r.createElement("span",null,"Send collection details")),r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(g.Checkbox,{checked:l,onChange:()=>{this.toggle("selectedEnvironment")}}),r.createElement("span",null,"Send environment details"))),r.createElement(u.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&n&&e),payload:y,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:v,source:S}));var _}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/CustomWebhook.js":function(e,t,n){"use strict";n.r(t),n.d(t,{CollectionCustomWebHookSetup:function(){return I},MonitorCustomWebHookSetup:function(){return S},TeamActivityCustomWebHookSetup:function(){return y},default:function(){return _}});var s,a,i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("../../node_modules/react/index.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./integrations/constants/integrationsConstants.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");const v=[{validator:e=>!e||g.default.isSecureUrl(e),message:"Use secure Webhook URL",type:"error"}];let I=(0,c.observer)(s=class extends l.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:""},this.store=(0,d.resolveStoreInstance)(u.default)}render(){const{nickname:e,url:t,errorNickname:n,errorUrl:s}=this.state;let a={name:e,rule:this.props.rule,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{webhook_url:t}};return l.createElement("div",null,l.createElement(m.NicknameFieldSegment,{id:"custom-webhook-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:o().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),l.createElement(m.WorkspaceSelector,{description:"Select the workspace to which your collection belongs to"}),l.createElement(m.EntitySelector,{entity:p.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:"The updates of the selected collection will be sent to custom webhook",rule:this.props.rule,mode:p.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),l.createElement(m.FieldSegment,{title:"Webhook URL",id:"custom-webhook-url",value:this.state.url,validation:v,error:s,onBlur:()=>{this.setState({url:t.trim(),errorUrl:o().isEmpty(t.trim())?"Please enter an Url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),l.createElement(m.AddIntegrationActions,{disabled:!(e&&this.store.selectedWorkspace&&g.default.isSecureUrl(t)&&this.store.selectedEntity),payload:a,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:o().get(this.props,"additionalContext.redirect")}))}})||s,S=(0,c.observer)(a=class extends l.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:"",advanced:!1,options:"all_runs"},this.store=(0,d.resolveStoreInstance)(u.default)}render(){const{nickname:e,url:t,options:n,errorNickname:s,errorUrl:a}=this.state,{integrationFormActions:i,selectedWorkspace:r,source:c}=this.props;let d={name:e,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{webhook_url:t,options:n}};return l.createElement("div",null,l.createElement(m.NicknameFieldSegment,{id:"custom-webhook-nickname",value:e,error:s,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:o().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),l.createElement(m.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:r}),l.createElement(m.EntitySelector,{entity:p.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to custom webhook",rule:this.props.rule,mode:p.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),l.createElement(m.FieldSegment,{title:"Webhook URL",id:"custom-webhook-url",value:t,error:a,validation:v,onBlur:()=>{this.setState({url:t.trim(),errorUrl:o().isEmpty(t.trim())?"Please enter a URL":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),l.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",l.createElement(b.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),this.state.advanced&&l.createElement(h.default,{value:this.state.options,onChange:e=>{this.setState({options:e})},direction:"column"},l.createElement(f.default,{value:"all_runs",label:"Notify for all completed monitor runs"}),l.createElement(f.default,{value:"only_failures",label:"Notify for 3 failures and then first success"})),l.createElement(m.AddIntegrationActions,{disabled:!(e&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&g.default.isSecureUrl(t)&&this.store.selectedEntity&&this.store.selectedEntity.value),payload:d,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:o().get(this.props,"additionalContext.redirect"),integrationFormActions:i,source:c}))}})||a,y=(0,c.observer)(i=class extends l.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:""},this.store=(0,d.resolveStoreInstance)(u.default)}render(){const{url:e,nickname:t,errorNickname:n,errorUrl:s}=this.state;let a={name:t,rule:this.props.rule,entity:"team",variables:{webhook_url:e}};return l.createElement("div",null,l.createElement(m.NicknameFieldSegment,{id:"custom-webhook-nickname",value:this.state.nickname,error:n,onBlur:()=>{this.setState({nickname:t.trim(),errorNickname:o().isEmpty(t.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),l.createElement(m.FieldSegment,{title:"Webhook URL",description:"All the updates happening within the team will be sent to this URL",id:"custom-webhook-url",value:this.state.url,validation:v,error:s,onBlur:()=>{this.setState({url:e.trim(),errorUrl:o().isEmpty(e.trim())?"Please enter an Url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),l.createElement(m.AddIntegrationActions,{disabled:!(t.trim()&&g.default.isSecureUrl(e)),payload:a,service:this.props.service,rule:this.props.rule}))}})||i;function _(e){return"monitor_run_custom_webhooks"===e.rule?l.createElement(S,e):"teamactivity_custom_webhooks"===e.rule?l.createElement(y,e):"collection_custom_webhooks"===e.rule?l.createElement(I,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Datadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),v=n("./js/components/base/Inputs.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js");let S=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",errorNickname:"",errorApiKey:"",monitor:"",metrics:!0,events:!0,advanced:!1,region:"us1"},this.store=(0,l.resolveStoreInstance)(c.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this)}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e,apiKey:""})}render(){const{apiKey:e,advanced:t,nickname:n,metrics:s,events:a,region:o,errorApiKey:l,errorNickname:c}=this.state,{integrationFormActions:S,selectedWorkspace:y,source:_}=this.props;let E={name:n,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{api_key:e,region:o,new_metric:!0,options:(a&&s?"both":a&&"events")||s&&"metrics"}};return a||s||pm.toasts.error("Please select at least one of the advanced options"),r.createElement("div",null,r.createElement(p.NicknameFieldSegment,{id:"datadog-nickname",value:n,error:c,onBlur:()=>{this.setState({nickname:n.trim(),errorNickname:i().isEmpty(n.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(p.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:y}),r.createElement(p.EntitySelector,{entity:d.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(g.default,{padding:{paddingTop:"spacing-l"}},r.createElement(m.default,{name:"Select Datadog site",value:o,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)},label:r.createElement(h.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(f.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(f.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(f.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(f.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(f.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"}))),r.createElement(p.SensitiveFieldSegment,{title:"Datadog API Key",description:"Enter the API Key provided by Datadog or ",customLink:r.createElement(I.default,{extUrl:`${u.default.getDatadogHostname(o)}/organization-settings/api-keys`},"generate one here"),id:"datadog-key",value:e,error:l,onBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())?"Please enter an API key":""})},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options",r.createElement(b.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),t&&r.createElement("div",{className:"push-double--bottom"},r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(v.Checkbox,{checked:a,onChange:()=>{this.toggle("events")}}),r.createElement("span",null,"Send events for completed runs")),r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(v.Checkbox,{checked:s,onChange:()=>{this.toggle("metrics")}}),r.createElement("span",null,"Send metrics for each run"))),r.createElement(p.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&n&&e&&o&&(a||s)),payload:E,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:S,source:_}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});n("./node_modules/lodash/lodash.js");var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),f=n("./integrations/monitoring/constants.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}let v=(0,i.observer)(s=class extends a.Component{constructor(e){super(e)}render(){const{handleOnApiKeyChange:e,handleOnApiKeyBlur:t,apiKey:n,handleOnAppKeyChange:s,handleOnAppKeyBlur:i,appKey:g,region:m,handleOnRegionChange:v,mode:I,apiKeyValidationStatus:S,apiKeyValidationMessage:y,appKeyValidationStatus:_,appKeyValidationMessage:E}=this.props,A=I===f.ADD_MODE?{fieldType:"required"}:{};return a.createElement(a.Fragment,null,a.createElement(r.default,{direction:"column",gap:"spacing-l"},a.createElement(o.default,{name:"Select Datadog site",value:m,direction:"column",onChange:v,label:a.createElement(l.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},a.createElement(c.default,{label:"US1 (datadoghq.com)",value:"us1"}),a.createElement(c.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),a.createElement(c.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),a.createElement(c.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),a.createElement(c.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),a.createElement(d.default,{id:"datadog-api-key",type:"password",label:a.createElement(l.default,b({text:"Datadog API Key"},A)),helperText:a.createElement(u.default,null,"Enter the API Key provided by Datadog or",a.createElement(h.default,{extUrl:`${p.default.getDatadogHostname(m)}/organization-settings/api-keys`},"generate one here.")),onChange:e,onBlur:t,value:n,validationStatus:S,validationMessage:y,placeholder:I===f.EDIT_MODE?"****************************":null}),a.createElement(d.default,{id:"datadog-app-key",type:"password",label:a.createElement(l.default,b({text:"Datadog Application Key"},A)),helperText:a.createElement(u.default,null,"Enter the Application Key provided by Datadog or",a.createElement(h.default,{extUrl:`${p.default.getDatadogHostname(m)}/organization-settings/application-keys`},"generate one here.")),value:g,onChange:s,onBlur:i,validationStatus:_,validationMessage:E,placeholder:I===f.EDIT_MODE?"****************************":null})))}})||s;v.propTypes={handleOnApiKeyChange:m().func.isRequired,handleOnApiKeyBlur:m().func.isRequired,apiKey:m().string.isRequired,apiKeyValidationStatus:m().string.isRequired,apiKeyValidationMessage:m().string.isRequired,handleOnAppKeyChange:m().func.isRequired,handleOnAppKeyBlur:m().func.isRequired,appKey:m().string.isRequired,appKeyValidationStatus:m().string.isRequired,appKeyValidationMessage:m().string.isRequired,region:m().string.isRequired,handleOnRegionChange:m().func.isRequired,mode:m().string.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});n("./node_modules/lodash/lodash.js");var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js"),p=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g);const h=p.default.div`
  width: fit-content;
`;let f=(0,i.observer)(s=class extends a.Component{constructor(e){super(e)}render(){const{apiKey:e,appKey:t,selectedDashboards:n,availableDashboards:s,handleDashboardsChange:i,isLoadingDashboards:p,errorDashboards:g,region:m,environments:f,rule:b,onSelectEnvironmentServices:v,removeEnvironmentSelector:I,handleAddEnvironmentButtonClick:S,isAddEnvironmentButtonDisabled:y,integrationId:_}=this.props;return a.createElement(r.default,{direction:"column",gap:"spacing-l",width:"100%"},a.createElement(u.default,{integrationId:_,mode:this.props.mode,apiKey:e,appKey:t,environments:f,region:m,rule:b,onSelectEnvironmentServices:v,removeEnvironmentSelector:I}),a.createElement(h,null,a.createElement(o.default,{type:"tertiary",onClick:S,text:"Add Environment",icon:a.createElement(d.default,null),isDisabled:y,tooltip:!y&&"Fill in the details to add a new environment."})),a.createElement(l.default,{value:n,options:s,placeholder:"Select Dashboards",label:a.createElement(c.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:i,isLoading:p,error:g&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}))}})||s;f.propTypes={mode:m().string.isRequired,apiKey:m().string.isRequired,appKey:m().string.isRequired,selectedDashboards:m().array.isRequired,availableDashboards:m().array.isRequired,handleDashboardsChange:m().func.isRequired,isLoadingDashboards:m().bool.isRequired,errorDashboards:m().bool.isRequired,region:m().string.isRequired,environments:m().array.isRequired,rule:m().string.isRequired,onSelectEnvironmentServices:m().func.isRequired,removeEnvironmentSelector:m().func.isRequired,handleAddEnvironmentButtonClick:m().func.isRequired,isAddEnvironmentButtonDisabled:m().bool.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DatadogEnvironmentSelector:function(){return y},default:function(){return S}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/monitoring/constants.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),I=n("./integrations/monitoring/services/index.js");let S=(0,l.observer)(a=class extends o.Component{constructor(e){super(e)}render(){let{environments:e,apiKey:t,appKey:n,region:s,rule:a,integrationId:i}=this.props;return o.createElement(o.Fragment,null,r().map(e,((l,c)=>o.createElement(o.Fragment,null,o.createElement(p.default,{direction:"column",gap:"spacing-l"},o.createElement(p.default,{justifyContent:"space-between",alignItems:"center"},o.createElement(g.default,{type:"h4",text:"Select services for Environment",color:"content-color-primary"}),r().size(e)>1&&o.createElement(m.default,{type:"tertiary",onClick:()=>this.props.removeEnvironmentSelector(c),text:"Remove",icon:o.createElement(v.default,null)})),o.createElement(y,{integrationId:i,mode:this.props.mode,apiKey:t,appKey:n,environments:e,environment:l,key:l.id,region:s,rule:a,onSelectEnvironmentServices:this.props.onSelectEnvironmentServices,index:c}))))))}})||a,y=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={environmentName:e.environment.name,selectedServices:r().map(e.environment.services,(e=>({label:e,value:e}))),availableServices:[],loadingServices:!1,errorServices:"",errorName:""},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.onServiceSelect=this.onServiceSelect.bind(this),this.listServicesDebounce=r().debounce(this.listServices.bind(this),1e3)}componentDidMount(){this.listServices()}onServiceSelect(e){r().isArray(e)&&this.setState({selectedServices:e},(()=>{this.props.onSelectEnvironmentServices(this.state.environmentName,r().map(e,"value"),this.props.index)}))}async listServices(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(u.DATADOG_APM_CLASS_ID);const{rule:e,apiKey:t,appKey:n,region:s,integrationId:a,mode:i}=this.props,{environmentName:o}=this.state,l=r().find(this.integrationsStore.integrationClass.inputs,{key:"environments"}),c=r().get(l,"options.serviceActionId"),d=r().get(l,"id");if((r().isEmpty(t)||r().isEmpty(n))&&i===u.ADD_MODE)return;this.setState({loadingServices:!0,errorServices:!1});let p={};p=i&&i===u.EDIT_MODE?{rule:e,...t?{api_key:t}:{},...n?{app_key:n}:{},environment:o,region:s}:{rule:e,api_key:t,app_key:n,environment:o,region:s},I.default[e].listServicesWithIntegrationId(p,a||null,c,d).then((e=>{let t=r().map(r().keys(e),(e=>({label:e,value:e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedServices:[]})}))}render(){const{selectedServices:e,availableServices:t,loadingServices:n,errorServices:s,environmentName:a,errorName:i}=this.state;let{environments:l}=this.props;return o.createElement(p.default,{direction:"column",gap:"spacing-l"},o.createElement(h.default,{id:"apm-datadog-environment",label:o.createElement(f.default,{text:"Datadog Environment",infoText:"Enter the Datadog environment for the services."}),helperText:"This will be used as a filter on the environment tag on datadog.",value:a,isDisabled:r().size(e)>0,onChange:e=>{const t=e.target.value,n=r().find(l,(e=>e.name===t&&r().size(e.services)>0));n&&r().size(n.services)?this.setState({environmentName:t,errorName:"You cannot input multiple environments with the same name.",validationStatus:"error",selectedServices:[]}):this.setState({environmentName:t,errorName:"",validationStatus:null,selectedServices:[]},(()=>{this.listServicesDebounce()}))},validationStatus:this.state.validationStatus,validationMessage:"error"===this.state.validationStatus?i:null}),o.createElement(b.default,{value:e,options:t,placeholder:"Select Datadog APM Services",label:o.createElement(f.default,{text:"Services",type:"secondary",infoText:"Datadog Metric Graphs will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:n,error:s&&"Unable to load services",isDisabled:!r().isEmpty(i)}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Dropbox.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js");let g=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",name:"",errorNickname:"",errorName:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{nickname:e,name:t,errorName:n,errorNickname:s}=this.state,a=this.store.readAuthDetails(),o=i().get(a,["auth","access_token"],""),l=i().get(a,["auth","refresh_token"],""),c=i().get(a,"user");let g={name:e,rule:this.props.rule,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{file_name:t,access_token:o,refresh_token:l,use_refresh_token:!0}};return r.createElement("div",null,r.createElement(p.default,{displayField:c&&c.display_field}),r.createElement(u.NicknameFieldSegment,{id:"dropbox-nickname",value:e,error:s,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:i().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your collection belongs to"}),r.createElement(u.EntitySelector,{id:"dropbox-collection",entity:d.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:"The selected collection will be backed up on Dropbox",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.FieldSegment,{description:"This will be the name of the file in Dropbox",id:"dropbox-name",title:"Enter filename",value:t,error:n,onBlur:()=>{this.setState({name:t.trim(),errorName:i().isEmpty(t.trim())?"Please enter a filename":""})},onChange:e=>{this.setState({name:e,errorName:""})}}),r.createElement(u.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&e&&t),payload:g,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:i().get(this.props,"additionalContext.redirect")}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Github.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApiGithubSetup:function(){return N},CollectionGithubSetup:function(){return T},GithubDefault:function(){return D},GithubHosted:function(){return R},checkForValidBranchInput:function(){return P},checkForValidInput:function(){return j},default:function(){return O}});var s,a,i,r,o=n("./node_modules/lodash/lodash.js"),l=n.n(o),c=n("../../node_modules/react/index.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=n("./js/components/messaging/Alert.js"),h=n("./js/components/base/Buttons.js"),f=n("./js/components/base/Inputs.js"),b=n("./js/components/base/LoadingIndicator.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/GithubService.js"),I=n("./integrations/constants/integrationsConstants.ts"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),y=n("./js/services/NavigationService.js"),_=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n("./integrations/services/OAuthService.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepository.js")),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepositoryEnterprise.js");function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},A.apply(this,arguments)}const w="AUTH_SUCCESS",C="AUTH_PENDING",k="AUTH_FAILED";function j(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}function P(e){return!(!e||!e.label||e.label.startsWith("/"))}let T=(0,d.observer)(s=class extends c.Component{constructor(e){super(e),this.state={nickname:"",collection:"",repository:"",repositories:[],branches:[],directory:"Postman Collections",owner:"",name:"",selectedRepository:null,selectedBranch:null,loadingRepositories:!1,loadingBranches:!1,firstLoad:!0,firstBranchLoad:!0,errorRepositories:"",errorBranches:"",errorNickname:"",errorFilename:""},this.store=(0,u.resolveStoreInstance)(p.default),this.onRepositorySelect=this.onRepositorySelect.bind(this),this.onBranchSelect=this.onBranchSelect.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.fetchBranches=this.fetchBranches.bind(this)}componentDidMount(){this.fetchRepositories()}fetchRepositories(){let{token:e,customDomain:t}=this.props;this.setState({loadingRepositories:!0,errorRepositories:""}),v.default.fetchRepositories({token:e,customDomain:t},((e,t)=>{if(e)e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching GitHub repositories, please try again"),this.setState({loadingRepositories:!1});else{let e=!1,n=t.map((t=>t.full_name?{label:t.full_name,value:t.full_name}:(e=!1,{})));e?this.setState({errorRepositories:"Unable to load repositories",loadingRepositories:!1}):this.setState({repositories:n,loadingRepositories:!1})}}))}fetchBranches(){let{token:e,customDomain:t}=this.props,{owner:n,repository:s}=this.state;this.setState({loadingBranches:!0,errorBranches:""}),v.default.fetchBranches({token:e,customDomain:t,owner:n,repository:s},((e,t)=>{if(e)e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches",loadingBranches:!1}):(this.setState({loadingBranches:!1}),pm.toasts.error("Something went wrong while fetching branches, please try again"));else{let e=!1,n=t.body&&l().map(t.body,(t=>t.name?{label:t.name,value:t.name}:(e=!0,{})));e?this.setState({errorBranches:"Unable to load branches",loadingBranches:!1}):this.setState({branches:n,loadingBranches:!1,errorBranches:""})}}))}onRepositorySelect(e){if(l().isEmpty(e))this.setState({selectedRepository:"",repository:"",owner:"",firstLoad:!1});else{let t=e.label.includes("/")&&e.label.split("/")[0],n=e.label.includes("/")&&e.label.split("/")[1];this.setState({selectedRepository:e,repository:n,owner:t,firstLoad:!1},(()=>this.fetchBranches()))}}onBranchSelect(e){l().isEmpty(e)?this.setState({selectedBranch:null,firstBranchLoad:!1}):this.setState({selectedBranch:e,firstBranchLoad:!1})}render(){const{user:e,rule:t,service:n,token:s,customDomain:a}=this.props,{nickname:i,repository:r,directory:o,name:d,repositories:u,selectedRepository:p,owner:m,selectedBranch:h,branches:f,errorBranches:b,loadingBranches:v,firstBranchLoad:S,errorRepositories:y,loadingRepositories:_,firstLoad:E,errorFilename:A,errorNickname:w}=this.state;let C={rule:t,name:i,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{access_token:s,repository:r,directory:o,owner:m,name:d,branch:h&&h.value,..."collection_github_enterprise"===t?{base_url:a}:{}}};return c.createElement("div",null,e&&c.createElement(g.AuthUserSegment,{displayField:e.displayField,imageSrc:e.avatar}),c.createElement(g.NicknameFieldSegment,{id:"github-nickname",value:i,error:w,onBlur:()=>{this.setState({nickname:i.trim(),errorNickname:l().isEmpty(i.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),c.createElement(g.WorkspaceSelector,{description:"Select the workspace to which your collection belongs to"}),c.createElement(g.EntitySelector,{entity:I.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:"The updates of the selected collection will be sent to GitHub",rule:t,mode:I.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),c.createElement(g.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose Repository",description:"The collection will be backed up to this repository",options:u,disabled:_||!l().isEmpty(y),value:p,onTargetSelect:this.onRepositorySelect,noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {owner/repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:j,error:y,emptyStateError:!_&&!p&&u.length>0&&!E&&"Please select a repository",loading:_,handleRetry:()=>this.fetchRepositories()}),c.createElement(g.FieldSegment,{optional:!0,description:"The collection will be pushed to this directory in the repository",id:"github-directory",title:"Enter Directory",value:o,onBlur:()=>{this.setState({directory:o.trim()})},onChange:e=>{this.setState({directory:e})}}),c.createElement(g.FieldSegment,{description:"This will be the name of the collection in the repository",id:"github-name",title:"Enter filename",error:A,value:d,onBlur:()=>{this.setState({name:d.trim(),errorFilename:l().isEmpty(d.trim())?"Please enter a filename":""})},onChange:e=>{this.setState({name:e,errorFilename:""})}}),c.createElement(g.SelectSegmentV2,{title:"Choose Branch",isCreatable:!0,isClearable:!0,description:"The collection will be pushed to selected branch in the repository",value:h,options:f,error:b,loading:v,disabled:v||!l().isEmpty(b),handleRetry:()=>this.fetchBranches(),onTargetSelect:this.onBranchSelect,emptyStateError:!v&&!h&&!S&&"Please select a branch",checkForValidInput:P,noOptionsForDropdown:"No branches found",noResultsForSearch:"We have limited access to your branches and couldn't find the one you're looking for. Enter it manually without a leading slash."}),c.createElement(g.AddIntegrationActions,{disabled:!(i&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&p&&this.store.selectedEntity&&this.store.selectedEntity.value&&d&&m&&r&&h),payload:C,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:n,rule:t,redirect:l().get(this.props,"additionalContext.redirect")}))}})||s,N=(0,d.observer)(a=class extends c.Component{constructor(e){super(e),this.state={nickname:"",collection:"",repository:"",repositories:[],directory:"Postman Collections",owner:"",branch:"",name:"",selectedRepository:null,loadingRepositories:!1,firstLoad:!0,errorRepositories:"",errorNickname:"",errorFilename:""},this.store=(0,u.resolveStoreInstance)(p.default),this.onRepositorySelect=this.onRepositorySelect.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this)}componentDidMount(){this.fetchRepositories()}fetchRepositories(){let{token:e}=this.props;this.setState({loadingRepositories:!0,errorRepositories:""}),v.default.fetchRepositories({token:e},((e,t)=>{if(e)e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching GitHub repositories, please try again"),this.setState({loadingRepositories:!1});else{let e=!1,n=t.map((t=>t.full_name?{label:t.full_name,value:t.full_name}:(e=!1,{})));e?this.setState({errorRepositories:"Unable to load repositories",loadingRepositories:!1}):this.setState({repositories:n,loadingRepositories:!1})}}))}onRepositorySelect(e){if(l().isEmpty(e))this.setState({selectedRepository:"",repository:"",owner:"",firstLoad:!1});else{let t=e.label.includes("/")&&e.label.split("/")[0],n=e.label.includes("/")&&e.label.split("/")[1];this.setState({selectedRepository:e,repository:n,owner:t,firstLoad:!1})}}render(){const{user:e,rule:t,service:n,token:s}=this.props,{nickname:a,repository:i,repositories:r,selectedRepository:o,owner:d,loadingRepositories:u,errorRepositories:p,firstLoad:m,errorNickname:h}=this.state;let f={rule:t,name:a,entity:"api",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{git_token:s,repository:i,owner:d,name:this.store.selectedEntity&&this.store.selectedEntity.label}};return c.createElement("div",null,e&&c.createElement(g.AuthUserSegment,{displayField:e.displayField,imageSrc:e.avatar}),c.createElement(g.NicknameFieldSegment,{id:"github-nickname",value:a,error:h,onBlur:()=>{this.setState({nickname:a.trim(),errorNickname:l().isEmpty(a.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),c.createElement(g.WorkspaceSelector,{description:"Select the workspace your API is in"}),c.createElement(g.EntitySelector,{entity:I.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",rule:t,mode:I.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),c.createElement(g.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose Repository",description:"The schemas will be backed up to this repository",options:r,disabled:u||!l().isEmpty(p),value:o,onTargetSelect:this.onRepositorySelect,noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {owner}/{repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:j,error:p,emptyStateError:!u&&!o&&r.length>0&&!m&&"Please select a repository",loading:u,handleRetry:()=>this.fetchRepositories()}),c.createElement(g.AddIntegrationActions,{disabled:!(a&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&o&&i&&d),payload:f,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:n,rule:t}))}})||a,D=(0,d.observer)(i=class extends c.Component{constructor(e){super(e),this.state={token:"",verifying:!1,verification:"",errorToken:""},this.store=(0,u.resolveStoreInstance)(p.default)}render(){const{rule:e}=this.props,{verifying:t,verification:n,token:s,user:a,errorToken:i}=this.state;let r="";return r="api_github"===e?c.createElement("span",null,"Provided by GitHub. Please ensure that you grant",c.createElement("code",null,"repo")," scope while creating an access token."):"Enter your Personal Access Token provided by GitHub.",n===w&&"collection_github"===e?c.createElement(T,A({},this.props,{token:s,user:a})):n===w&&"api_github"===e?c.createElement(N,A({},this.props,{token:s,user:a})):c.createElement("div",null,c.createElement(g.SensitiveFieldSegment,{className:"github-token",description:r,id:"github-token",title:"Personal Access Token",value:s,error:i,onBlur:()=>{this.setState({token:s.trim(),errorToken:l().isEmpty(s.trim())?"Please enter a token":""})},onChange:e=>{this.setState({token:e,errorToken:""})}}),"api_github"===e&&c.createElement("div",{className:"integrations-checkbox__select-consent"},c.createElement(f.Checkbox,{checked:this.state.consentProvided,onChange:()=>{this.setState({consentProvided:!this.state.consentProvided})}}),c.createElement("span",null,"I consent to Postman collecting and storing my GitHub Access Token.")),n===k&&c.createElement(m.default,{type:"error",className:"integrations-add-card__alert",message:"Oops! Looks like you entered an incorrect token."}),c.createElement("div",{className:"integrations-add-actions__button--container"},c.createElement(h.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:t||!s||"api_github"===e&&!this.state.consentProvided,size:"small",tooltip:"api_github"===e?"Make sure you've entered your Personal Access Token and checked the consent box.":"",onClick:()=>{this.setState({verifying:!0,verification:C}),v.default.verifyUser({token:s},((e,t)=>{e?(pm.logger.error("Error while verifying GitHub user"),this.setState({verifying:!1,verification:k})):200===t.status&&l().get(t,"body.id")?(this.setState({verifying:!1,verification:w,user:{id:l().get(t,"body.id"),avatar:l().get(t,"body.avatar_url"),displayField:l().get(t,"body.login")}}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:k})}))}},t&&c.createElement(b.default,null)||"Authenticate and Proceed")),c.createElement("div",{className:"integrations-add-actions__button--container"},c.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),y.default.back()}},"Cancel")))}})||i,R=(0,d.observer)(r=class extends c.Component{constructor(e){super(e),this.state={token:"",verifying:!1,customDomain:"",errorToken:"",verification:""},this.store=(0,u.resolveStoreInstance)(p.default)}render(){const{verifying:e,verification:t,token:n,customDomain:s,user:a,errorToken:i}=this.state;return t===w?c.createElement(T,A({},this.props,{customDomain:s,token:n,user:a})):c.createElement("div",null,c.createElement(g.SensitiveFieldSegment,{className:"github-token",description:"Enter your Personal Access Token provided by GitHub.",id:"github-token",title:"Personal Access Token",value:n,error:i,onBlur:()=>{this.setState({token:n.trim(),errorToken:l().isEmpty(n.trim())?"Please enter a token":""})},onChange:e=>{this.setState({token:e,errorToken:""})}}),c.createElement(g.FieldSegment,{description:"Enter your custom GitHub domain",id:"github-domain",title:"GitHub Custom Domain",value:s,error:s&&!S.default.isSecureUrl(s.trim())?"Enter secure custom domain":"",onBlur:()=>{this.setState({customDomain:s.trim()})},onChange:e=>{this.setState({customDomain:e,verification:C})}}),t===k&&c.createElement(m.default,{type:"error",className:"integrations-add-card__alert",message:"Oops! Looks like you did not enter the token associated with this custom domain. Please enter correct token and domain."}),c.createElement("div",{className:"integrations-add-actions__button--container"},c.createElement(h.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:e||!(n&&s&&S.default.isSecureUrl(s)),size:"small",onClick:()=>{this.setState({verifying:!0,verification:C}),v.default.verifyUser({token:n,customDomain:s},((e,t)=>{e?(pm.logger.error("Error while verifying GitHub user",e),this.setState({verifying:!1,verification:k})):200===t.status&&l().get(t,"body.id")?(this.setState({verifying:!1,verification:w,user:{id:l().get(t,"body.id"),avatar:l().get(t,"body.avatar_url"),displayField:l().get(t,"body.login")}}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:k})}))}},e&&c.createElement(b.default,null)||"Authenticate and Proceed")),c.createElement("div",{className:"integrations-add-actions__button--container"},c.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),y.default.back()}},"Cancel")))}})||r;function O(e){const{rule:t}=e;return"collection_github"===t||"api_github"===t?c.createElement(D,e):"collection_github_enterprise"===t?c.createElement(R,e):"apiversion_repository_github"===t?c.createElement(_.default,e):"apiversion_repository_github_enterprise"===t?c.createElement(E.ApiVersionRepositoryEnterprise,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Gitlab.js":function(e,t,n){"use strict";n.r(t),n.d(t,{GitlabDefault:function(){return j},GitlabHosted:function(){return P},GitlabVerified:function(){return k},checkForValidInput:function(){return C},default:function(){return T}});var s,a,i,r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./js/components/messaging/Alert.js"),g=n("./js/components/base/Buttons.js"),m=n("./js/components/base/LoadingIndicator.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/GitlabService.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),v=n("./js/services/NavigationService.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepository.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiVersionRepositoryEnterprise.js"),y=(n("./integrations/ci-cd/components/AddIntegrationApiVersionSelectorForm.js"),n("./node_modules/lodash/lodash.js"));function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_.apply(this,arguments)}const E="AUTH_SUCCESS",A="AUTH_PENDING",w="AUTH_FAILED";function C(e){if(e&&e.label){return/^\d+$/.test(e.label)}return!1}let k=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={selectedProject:null,name:"",nickname:"",directory:"Postman Collections",branch:"",projects:[],advanced:!1,errorFilename:"",errorNickname:"",loadingProjects:!1,errorProjects:"",firstLoad:!0},this.store=(0,l.resolveStoreInstance)(c.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.fetchProjects=this.fetchProjects.bind(this)}componentDidMount(){this.fetchProjects()}fetchProjects(){this.setState({loadingProjects:!0}),h.default.fetchProjects({token:this.props.token,customDomain:this.props.customDomain},((e,t)=>{if(e)e.status>=500&&e.status<600?this.setState({errorProjects:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching Gitlab projects, please try again"),pm.logger.error("Error occurred while fetching Gitlab projects",e),this.setState({loadingProjects:!1});else{let e=t.map((e=>({label:e.name,value:e.id})));this.setState({projects:e,loadingProjects:!1})}}))}onTargetSelect(e){y.isEmpty(e)?this.setState({selectedProject:null,firstLoad:!1}):this.setState({selectedProject:e,firstLoad:!1})}render(){const{token:e,rule:t,customDomain:n}=this.props,{nickname:s,selectedProject:a,name:i,directory:o,branch:l,advanced:c,projects:p,errorFilename:g,errorNickname:m,loadingProjects:h,errorProjects:b,firstLoad:v}=this.state;let I={name:s,rule:t,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{personal_access_token:e,project_id:y.get(a,"value"),directory:o,file_name:i,branch:l,..."collection_gitlab_hosted"===t?{base_url:n}:{}}},S="The updates of the selected collection will be sent to Gitlab "+("collection_gitlab"===t?"Saas":"Self-managed");return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"gitlab-nickname",value:s,error:m,onBlur:()=>{this.setState({nickname:s.trim(),errorNickname:y.isEmpty(s.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your collection belongs to"}),r.createElement(u.EntitySelector,{entity:d.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:S,rule:t,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.SelectSegmentV2,{title:"Choose Project",description:"The collection will be backed up to this project",disabled:h||!y.isEmpty(b),options:p,value:a,isCreatable:!0,isClearable:!0,emptyStateError:!h&&!v&&!a&&p.length>0&&"Please select a project",onTargetSelect:this.onTargetSelect,noResultsForSearch:"We have limited access to your projects and couldn't find the one you're looking for. Enter it manually using the {projectID} format.",noOptionsForDropdown:"No projects found",checkForValidInput:C,error:b,loading:h,handleRetry:()=>this.fetchProjects()}),r.createElement(u.FieldSegment,{description:"Enter the name of the file you want to be saved as.",id:"gitlab-name",title:"Enter Name",value:i,error:g,onBlur:()=>{this.setState({name:i.trim(),errorFilename:y.isEmpty(i.trim())?"Please enter the file name":""})},onChange:e=>{this.setState({name:e,errorFilename:""})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",r.createElement(f.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),c&&r.createElement(u.FieldSegment,{optional:!0,description:"Enter directory where you want the collection to be saved in. Default is Postman Collections.",id:"gitlab-directory",title:"Enter Directory",value:o,onBlur:()=>{this.setState({directory:o.trim()})},onChange:e=>{this.setState({directory:e})}}),c&&r.createElement(u.FieldSegment,{optional:!0,description:"Enter the branch to which you want the collection to be pushed to.",id:"gitlab-branch",title:"Enter Branch",value:l,onBlur:()=>{this.setState({branch:l.trim()})},onChange:e=>{this.setState({branch:e})}}),r.createElement(u.AddIntegrationActions,{disabled:!(s&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&a&&i&&this.store.selectedEntity&&this.store.selectedEntity.value),payload:I,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:y.get(this.props,"additionalContext.redirect")}))}})||s,j=(0,o.observer)(a=class extends r.Component{constructor(e){super(e),this.state={token:"",verifying:!1,verification:"",errorToken:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{verifying:e,verification:t,token:n,errorToken:s}=this.state;return t===E?r.createElement(k,_({},this.props,{token:n})):r.createElement("div",null,r.createElement(u.SensitiveFieldSegment,{className:"gitlab-token",description:"Enter your Personal Access Token provided by Gitlab SaaS. Please ensure that you grant api, read_user scope(s) while creating an access token.",id:"gitlab-token",title:"Gitlab SaaS Personal Token",value:n,error:s,onBlur:()=>{this.setState({token:n.trim(),errorToken:y.isEmpty(n.trim())?"Please enter Personal Access Token":""})},onChange:e=>{this.setState({token:e,verification:A,errorToken:""})}}),t===w&&r.createElement(p.default,{type:"error",className:"integrations-add-card__alert",message:"Oops! Looks like you entered an incorrect token."}),r.createElement("div",{className:"integrations-add-actions__button--container"},r.createElement(g.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:e||!n.trim(),size:"small",onClick:()=>{this.setState({verifying:!0,verification:A}),h.default.verifyUser({token:n},((e,t)=>{e?this.setState({verifying:!1,verification:w}):200===t.status&&y.get(t,"body.id")?(this.setState({verifying:!1,verification:E}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:w})}))}},e&&r.createElement(m.default,null)||"Authenticate and Proceed")),r.createElement("div",{className:"integrations-add-actions__button--container"},r.createElement(g.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),v.default.back()}},"Cancel")))}})||a,P=(0,o.observer)(i=class extends r.Component{constructor(e){super(e),this.state={token:"",verifying:!1,customDomain:"",verification:"",errorToken:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{verifying:e,verification:t,token:n,customDomain:s,errorToken:a}=this.state;return t===E?r.createElement(k,_({},this.props,{customDomain:s,token:n})):r.createElement("div",null,r.createElement(u.SensitiveFieldSegment,{className:"gitlab-token",description:"Enter your Personal Access Token provided by Gitlab Self-managed. Please ensure that you grant api, read_user scope(s) while creating an access token.",id:"gitlab-token",title:"Gitlab Self-managed Personal Token",value:n,error:a,onBlur:()=>{this.setState({token:n.trim(),errorToken:y.isEmpty(n.trim())?"Please enter Personal Access Token":""})},onChange:e=>{this.setState({token:e,verification:A,errorToken:""})}}),r.createElement(u.FieldSegment,{description:"Enter your custom Gitlab Self-managed domain",id:"gitlab-domain",title:"Gitlab Self-managed Custom Domain",value:s,error:s&&!b.default.isSecureUrl(s.trim())?"Enter secure custom domain":"",onBlur:()=>{this.setState({customDomain:s.trim()})},onChange:e=>{this.setState({customDomain:e,verification:A})}}),t===w&&r.createElement(p.default,{type:"error",className:"integrations-add-card__alert",message:"Oops! Looks like you entered an incorrect token."}),r.createElement("div",{className:"integrations-add-actions__button--container"},r.createElement(g.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:e||!n||!b.default.isSecureUrl(s),size:"small",onClick:()=>{this.setState({verifying:!0,verification:A}),h.default.verifyUser({token:n,customDomain:s},((e,t)=>{e?this.setState({verifying:!1,verification:w}):200===t.status&&y.get(t,"body.id")?(this.setState({verifying:!1,verification:E}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:w})}))}},e&&r.createElement(m.default,null)||"Authenticate and Proceed")),r.createElement("div",{className:"integrations-add-actions__button--container"},r.createElement(g.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.store.resetAddIntegrationDependencies(),v.default.back()}},"Cancel")))}})||i;function T(e){const{rule:t}=e;return"collection_gitlab"===t?r.createElement(j,e):"apiversion_repository_gitlab"===t?r.createElement(I.default,e):"apiversion_repository_gitlab_enterprise"===t?r.createElement(S.ApiVersionRepositoryEnterprise,e):"collection_gitlab_hosted"===t?r.createElement(P,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Hipchat.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MonitorHipchatSetup:function(){return b},TeamActivityHipchatSetup:function(){return v},default:function(){return I}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=n("./node_modules/react-radio-group/lib/index.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");const f=[{validator:e=>!e||p.default.isSecureUrl(e),message:"Use secure Notification URL",type:"error"}];let b=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:"",advanced:!1,options:"all_runs"},this.store=(0,c.resolveStoreInstance)(d.default)}render(){const{nickname:e,url:t,options:n,advanced:s,errorNickname:a,errorUrl:i}=this.state,{integrationFormActions:l,selectedWorkspace:c,source:d}=this.props;let b={name:e,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{url:t,options:n}};return o.createElement("div",null,o.createElement(g.NicknameFieldSegment,{id:"hipchat-nickname",value:e,error:a,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:r().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(g.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:c}),o.createElement(g.EntitySelector,{entity:u.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Hipchat",rule:this.props.rule,mode:u.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),o.createElement(g.SensitiveFieldSegment,{title:"Notification URL",id:"hipchat-url",value:t,error:i,validation:f,onBlur:()=>{this.setState({url:t.trim(),errorUrl:r().isEmpty(t.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),o.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",o.createElement(h.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),s&&o.createElement("div",{className:"push-double--bottom"},o.createElement(m.RadioGroup,{name:"Hipchat advanced options",selectedValue:n,onChange:e=>{this.setState({options:e})}},o.createElement("div",{className:"integrations-radio-button__select-group--options"},o.createElement("label",null,o.createElement(m.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--options__radio"}),o.createElement("span",null,"Notify for all completed monitor runs"))),o.createElement("div",{className:"integrations-radio-button__select-group--options"},o.createElement("label",null,o.createElement(m.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--options__radio"}),o.createElement("span",null,"Notify for 3 failures and then first success"))))),o.createElement(g.AddIntegrationActions,{disabled:!(e.trim()&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&p.default.isSecureUrl(t)&&this.store.selectedEntity&&this.store.selectedEntity.value),payload:b,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:r().get(this.props,"additionalContext.redirect"),integrationFormActions:l,source:d}))}})||s,v=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:""},this.store=(0,c.resolveStoreInstance)(d.default)}render(){const{nickname:e,url:t,errorNickname:n,errorUrl:s}=this.state;let a={name:this.state.nickname,rule:this.props.rule,entity:"team",variables:{url:t}};return o.createElement("div",null,o.createElement(g.NicknameFieldSegment,{id:"hipchat-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:r().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(g.SensitiveFieldSegment,{title:"Notification URL",id:"hipchat-url",value:t,validation:f,error:s,onBlur:()=>{this.setState({url:t.trim(),errorUrl:r().isEmpty(t.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),o.createElement(g.AddIntegrationActions,{disabled:!(e&&p.default.isSecureUrl(t)),payload:a,service:this.props.service,rule:this.props.rule}))}})||a;function I(e){return"monitor_run_hipchat"===e.rule?o.createElement(b,e):"teamactivity_hipchat"===e.rule?o.createElement(v,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Jenkins.js":function(e,t,n){"use strict";n.r(t),n.d(t,{JenkinsCIAuthenticate:function(){return w},JenkinsCIConfigure:function(){return C},default:function(){return k}});var s,a,i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("./node_modules/lodash/lodash.js"),l=n.n(o),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./js/components/base/Buttons.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),m=n("./js/services/NavigationService.js"),h=n("./integrations/navigation/constants.js"),f=n("./integrations/api-observability/constants.ts"),b=n("./integrations/ci-cd/services/JenkinsCI.js"),v=n("./integrations/ci-cd/components/Button/AddIntegration.js"),I=n("./integrations/ci-cd/components/Button/CancelButton.js"),S=n("./js/components/base/Inputs.js"),y=n("./js/components/base/LoadingIndicator.js"),_=n("./js/components/messaging/Alert.js"),E=n("./integrations/constants/integrationsConstants.ts"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js");let w=(0,r.observer)(s=class extends i.Component{constructor(e){super(e),this.store=(0,c.resolveStoreInstance)(d.default),this.state={auth_state:f.AUTH_PENDING,authorising:!1,consentProvided:!1,host_url:null,username:null,auth_token:null},this.validateUser=l().debounce(this.validateUser,500),this.validateUser=this.validateUser.bind(this)}validateUser(){this.setState({authorising:!0});const e=l().pick(this.state,["host_url","username","auth_token"]);b.default.validateUser(e).then((()=>{this.setState({authorising:!1,auth_state:f.AUTH_SUCCESS}),this.props.setActiveTab("configure")})).catch((e=>{this.setState({authorising:!1,auth_state:f.AUTH_FAILED}),pm.logger.error("Error occurred while authenticating",e)}))}render(){const{host_url:e,username:t,auth_token:n,authorising:s,auth_state:a,consentProvided:r}=this.state;if(a===f.AUTH_SUCCESS){const s={host_url:e,username:t,auth_token:n,...this.props};return i.createElement(C,s)}return i.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},i.createElement(u.FieldSegment,{description:"Enter your domain where Jenkins server is hosted.",id:"jenkins-domain",title:"Jenkins Server URL",value:e,error:e&&!A.default.isSecureUrl(e.trim())?"Enter secure server URL":"",onBlur:()=>{e&&this.setState({host_url:l().isFunction(e.trim)?e.trim():e})},onChange:e=>{this.setState({host_url:e})}}),i.createElement(u.FieldSegment,{description:"Enter your username.",id:"jenkins-username",title:"Jenkins username",value:t,error:""===t?"Please provide your username":"",onBlur:()=>{t&&this.setState({username:l().isFunction(t.trim)?t.trim():t})},onChange:e=>{this.setState({username:e})}}),i.createElement(u.SensitiveFieldSegment,{title:"Authentication token",description:"Enter your authentication token or ",customLink:i.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-jenkins-apikey"},"generate one here."),value:n,error:""===n?"Please provide your authentication token":"",onChange:e=>{this.setState({auth_token:e.trim()})}}),a===f.AUTH_FAILED&&i.createElement(_.default,{type:"error",className:"integrations-add-card__alert",message:"Please provide valid domain, username and authentication token"}),i.createElement("div",{className:"integrations-checkbox__select-consent"},i.createElement(S.Checkbox,{checked:r,onChange:()=>this.setState({consentProvided:!r})}),i.createElement("span",null,"I consent to Postman for collecting and storing my Jenkins credentials.")),i.createElement("div",{className:"integrations-add-actions__button--container"},i.createElement(p.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:!n||!t||!e||s||!r,size:"small",onClick:this.validateUser},s&&i.createElement(y.default,null)||"Authenticate and Proceed")),i.createElement("div",{className:"integrations-add-actions__button--container"},i.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{"browser"===window.SDK_PLATFORM?window.history.go(-1):m.default.transitionTo(h.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service})}},"Cancel")))}})||s,C=(0,r.observer)(a=class extends i.Component{constructor(e){super(e),this.store=(0,c.resolveStoreInstance)(d.default),this.state={projects:[],loadingProjects:!1,selectedProject:null,selectedProjectType:null,errorProjects:"",nickname:null},this.fetchProjects=this.fetchProjects.bind(this)}componentDidMount(){this.fetchProjects()}fetchProjects(){this.setState({loadingProjects:!0,errorProjects:""});const e=l().pick(this.props,["host_url","username","auth_token"]);b.default.getProjects(e).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),pm.toasts.error("Error occurred while fetching projects"),pm.logger.error("Error occurred while fetching projects",e)}))}render(){const{loadingProjects:e,errorProjects:t,projects:n,selectedProject:s,nickname:a}=this.state,{host_url:r,username:o,auth_token:c,rule:d,service:p}=this.props,g={classId:"jenkins_ci",name:a,inputs:{api_id:this.store.selectedEntity&&this.store.selectedEntity.value,apiversion:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,host_url:r&&r.replace(/\/$/,""),username:o,auth_token:c,project:s&&s.value,project_type:s&&s.type}},m=a&&s&&r&&o&&c&&l().get(this.store,"selectedWorkspace.value")&&l().get(this.store,"selectedEntity.value")&&l().get(this.store,"selectedEntityVersion.value");return i.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},i.createElement(u.NicknameFieldSegment,{id:"jenkins-nickname",value:a,error:""===a?"Please enter a nickname for your integration":"",onBlur:()=>{a&&this.setState({nickname:l().isFunction(a.trim)?a.trim():a})},onChange:e=>{this.setState({nickname:e})}}),i.createElement(u.WorkspaceSelector,{description:"Select the workspace your API is in"}),i.createElement(u.EntitySelector,{id:"api-schemas",entity:E.entityTypes.APIS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Select API",description:"Select the API to connect",rule:d,mode:E.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),i.createElement(u.EntitySelector,{id:"api-schema-versions",entity:E.entityTypes.API_VERSIONS,apiId:this.store.selectedEntity&&this.store.selectedEntity.value,title:"Select API Version",description:"Select API version to connect",rule:d,mode:E.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedEntity}),i.createElement(u.SelectSegmentV2,{title:"Choose your CI project",label:"Select",disabled:e||!l().isEmpty(t),options:n,value:s,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:t,loading:e,handleRetry:this.fetchProjects}),i.createElement(v.default,{type:"primary",size:"small",disabled:!m,payload:g,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:p,rule:d,isBrowseIntegration:!0,useInstanceApi:!0},"Add Integration"),i.createElement(I.default,{isBrowseIntegration:!0,service:p}))}})||a;function k(e){const{rule:t}=e;if("jenkins_ci"===t)return i.createElement(w,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/KeenIo.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js");let p=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",writeKey:"",projectId:"",errorProjectId:"",errorNickname:"",errorWriteKey:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{nickname:e,projectId:t,writeKey:n,errorNickname:s,errorProjectId:a,errorWriteKey:o}=this.state,{integrationFormActions:l,selectedWorkspace:c,source:p}=this.props;let g={name:e,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{project_id:t,write_key:n}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"keenio-nickname",value:this.state.nickname,error:s,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:i().isEmpty(e.trim()?"Please enter a nickname":"")})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:c}),r.createElement(u.EntitySelector,{entity:d.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Keen",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.FieldSegment,{title:"Project ID",description:"Enter your Keen Project ID",id:"keenio-project",value:t,error:a,onBlur:()=>{this.setState({projectId:t.trim(),errorProjectId:i().isEmpty(t.trim())?"Please enter a project id":""})},onChange:e=>{this.setState({projectId:e,errorProjectId:""})}}),r.createElement(u.SensitiveFieldSegment,{title:"Write Key",description:"Enter your Keen Write Key",id:"keenio-write",value:this.state.writeKey,error:o,onBlur:()=>{this.setState({writeKey:n.trim(),errorWriteKey:i().isEmpty(n.trim())?"Please enter a write key":""})},onChange:e=>{this.setState({writeKey:e,errorWriteKey:""})}}),r.createElement(u.AddIntegrationActions,{disabled:!(e&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&n&&t&&this.store.selectedEntity&&this.store.selectedEntity.value),payload:g,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:l,source:p}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/MicrosoftFlow.js":function(e,t,n){"use strict";n.r(t),n.d(t,{CollectionMicrosoftFlowSetup:function(){return y},MonitorMicrosoftFlowSetup:function(){return S},TeamActivityMicrosoftFlowSetup:function(){return _},default:function(){return E}});var s,a,i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("../../node_modules/react/index.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./integrations/constants/integrationsConstants.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),h=n("./js/services/NavigationService.js"),f=n("./integrations/navigation/constants.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),v=n("./node_modules/react-radio-group/lib/index.js");const I=[{validator:e=>!e||g.default.isSecureUrl(e.trim()),message:"Use secure Notification URL",type:"error"}];let S=(0,c.observer)(s=class extends l.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:"",monitor:"",advanced:!1,options:"all_runs"},this.store=(0,d.resolveStoreInstance)(u.default)}render(){const{url:e,advanced:t,nickname:n,options:s,errorNickname:a,errorUrl:i}=this.state,{integrationFormActions:r,selectedWorkspace:c,source:d}=this.props;let u={name:n,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{webhook_url:e,options:s}};return l.createElement("div",null,l.createElement(m.NicknameFieldSegment,{id:"microsoft-flow-nickname",value:n,error:a,onBlur:()=>{this.setState({nickname:n.trim(),errorNickname:o().isEmpty(n.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),l.createElement(m.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:c}),l.createElement(m.EntitySelector,{id:"microsoft-flow-monitor",entity:p.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Microsoft Power Automate",rule:this.props.rule,mode:p.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),l.createElement(m.FieldSegment,{className:"microsoft-flow-url",id:"microsoft-flow-url",title:"Notification URL",value:e,error:i,validation:I,onBlur:()=>{this.setState({url:e.trim(),errorUrl:o().isEmpty(e.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),l.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",l.createElement(b.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),t&&l.createElement("div",{className:"push-double--bottom"},l.createElement(v.RadioGroup,{name:"Microsoft Power Automate advanced options",selectedValue:this.state.options,onChange:e=>{this.setState({options:e})}},l.createElement("div",{className:"integrations-radio-button__select-group--options"},l.createElement("label",null,l.createElement(v.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--options__radio"}),l.createElement("span",null,"Notify for all completed monitor runs"))),l.createElement("div",{className:"integrations-radio-button__select-group--options"},l.createElement("label",null,l.createElement(v.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--options__radio"}),l.createElement("span",null,"Notify for 3 failures and then first success"))))),l.createElement(m.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&n&&g.default.isSecureUrl(e)),payload:u,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:o().get(this.props,"additionalContext.redirect"),integrationFormActions:r,source:d}))}})||s,y=(0,c.observer)(a=class extends l.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorUrl:"",errorNickname:""},this.store=(0,d.resolveStoreInstance)(u.default)}render(){const{nickname:e,url:t,errorNickname:n,errorUrl:s}=this.state;let a={name:e,rule:this.props.rule,entity:"collection",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{webhook_url:t}};return l.createElement("div",null,l.createElement(m.NicknameFieldSegment,{id:"microsoft-flow-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:o().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),l.createElement(m.WorkspaceSelector,{description:"Select the workspace to which your collection belongs to"}),l.createElement(m.EntitySelector,{id:"microsoft-flow-collection",entity:p.entityTypes.COLLECTIONS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Collection",description:"The updates of the selected collection will be sent to Microsoft Power Automate",rule:this.props.rule,mode:p.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),l.createElement(m.FieldSegment,{className:"microsoft-flow-url",id:"microsoft-flow-url",title:"Notification URL",value:t,validation:I,error:s,onBlur:()=>{this.setState({url:t.trim(),errorUrl:o().isEmpty(t.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),l.createElement(m.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&e&&g.default.isSecureUrl(t)),payload:a,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:o().get(this.props,"additionalContext.redirect")}))}})||a,_=(0,c.observer)(i=class extends l.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:""},this.store=(0,d.resolveStoreInstance)(u.default)}render(){const{nickname:e,url:t,errorNickname:n,errorUrl:s}=this.state;let a={name:this.state.nickname.trim(),rule:this.props.rule,entity:"team",variables:{webhook_url:t}};return l.createElement("div",null,l.createElement(m.NicknameFieldSegment,{id:"microsoft-flow-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:o().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),l.createElement(m.FieldSegment,{className:"microsoft-flow-url",description:"All the updates happening within the team will be sent to this URL",id:"microsoft-flow-url",title:"Webhook URL",value:t,validation:I,error:s,onBlur:()=>{this.setState({url:t.trim(),errorUrl:o().isEmpty(t.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),l.createElement(m.AddIntegrationActions,{disabled:!(e.trim()&&g.default.isSecureUrl(this.state.url)),payload:a,service:this.props.service,rule:this.props.rule}))}})||i;class E extends l.Component{render(){const{rule:e,service:t}=this.props;return"monitor_run_microsoft_flow"===e?l.createElement(S,this.props):"teamactivity_microsoft_flow"===e?l.createElement(_,this.props):"collectionactivity_microsoft_flow"===e||"collection_microsoft_flow"===e?l.createElement(y,this.props):void h.default.transitionTo(f.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:e})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/MicrosoftTeams.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MonitorMicrosoftTeamsSetup:function(){return I},TeamActivityMicrosoftTeamsSetup:function(){return S},default:function(){return y}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=n("./js/services/NavigationService.js"),h=n("./integrations/navigation/constants.js"),f=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),b=n("./node_modules/react-radio-group/lib/index.js");const v=[{validator:e=>!e||p.default.isSecureUrl(e.trim()),message:"Use secure Notification URL",type:"error"}];let I=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:"",monitor:"",advanced:!1,options:"all_runs"},this.store=(0,c.resolveStoreInstance)(d.default),this.onAdvancedOptionSelect=this.onAdvancedOptionSelect.bind(this)}onAdvancedOptionSelect(e){this.setState({options:e})}render(){const{url:e,advanced:t,nickname:n,options:s,errorNickname:a,errorUrl:i}=this.state,{integrationFormActions:l,selectedWorkspace:c,source:d}=this.props;let m={name:n,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{url:e,options:s}};return o.createElement("div",null,o.createElement(g.NicknameFieldSegment,{id:"microsoft-teams-nickname",value:n,error:a,onBlur:()=>{this.setState({nickname:n.trim(),errorNickname:r().isEmpty(n.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(g.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:c}),o.createElement(g.EntitySelector,{id:"microsoft-teams-monitor",entity:u.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Microsoft Teams",rule:this.props.rule,mode:u.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),o.createElement(g.FieldSegment,{className:"microsoft-teams-url",id:"microsoft-teams-url",title:"Notification URL",value:e,validation:v,error:i,onBlur:()=>{this.setState({url:e.trim(),errorUrl:r().isEmpty(e.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),o.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",o.createElement(f.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),t&&o.createElement("div",{className:"push-double--bottom"},o.createElement(b.RadioGroup,{name:"Microsoft Teams advanced options",selectedValue:this.state.options,onChange:e=>{this.onAdvancedOptionSelect(e)}},o.createElement("div",{className:"integrations-radio-button__select-group--regions"},o.createElement("label",null,o.createElement(b.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),o.createElement("span",null,"Notify for all completed monitor runs"))),o.createElement("div",{className:"integrations-radio-button__select-group--regions"},o.createElement("label",null,o.createElement(b.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),o.createElement("span",null,"Notify for 3 failures and then first success"))))),o.createElement(g.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&n&&p.default.isSecureUrl(e.trim())),payload:m,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:r().get(this.props,"additionalContext.redirect"),integrationFormActions:l,source:d}))}})||s,S=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={nickname:"",url:"",errorNickname:"",errorUrl:""},this.store=(0,c.resolveStoreInstance)(d.default)}render(){const{nickname:e,url:t,errorNickname:n,errorUrl:s}=this.state;let a={name:e,rule:this.props.rule,entity:"team",variables:{url:t}};return o.createElement("div",null,o.createElement(g.NicknameFieldSegment,{id:"microsoft-teams-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:r().isEmpty(e)?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(g.FieldSegment,{className:"microsoft-teams-url",id:"microsoft-teams-url",title:"Notification URL",value:t,validation:v,error:s,onBlur:()=>{this.setState({url:t.trim(),errorUrl:r().isEmpty(t.trim())?"Please enter an url":""})},onChange:e=>{this.setState({url:e,errorUrl:""})}}),o.createElement(g.AddIntegrationActions,{disabled:!(e&&p.default.isSecureUrl(t.trim())),payload:a,service:this.props.service,rule:this.props.rule}))}})||a;class y extends o.Component{render(){const{rule:e,service:t}=this.props;return"monitor_run_microsoft_teams"===e?o.createElement(I,this.props):"teamactivity_microsoft_teams"===e?o.createElement(S,this.props):void m.default.transitionTo(h.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:e})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/NewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./node_modules/react-radio-group/lib/index.js"),p=n("./integrations/constants/integrationsConstants.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js");let m=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",errorNickname:"",errorApiKey:"",monitor:"",region:"us"},this.store=(0,l.resolveStoreInstance)(c.default),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this)}onRegionSelectorChange(e){this.setState({region:e})}render(){const{apiKey:e,nickname:t,region:n,errorApiKey:s,errorNickname:a}=this.state,{integrationFormActions:o,selectedWorkspace:l,source:c}=this.props;let m={name:t,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{api_key:e,region:n}};return r.createElement("div",null,r.createElement(d.NicknameFieldSegment,{id:"new-relic-nickname",value:t,error:a,onBlur:()=>{this.setState({nickname:t.trim(),errorNickname:i().isEmpty(t.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(d.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:l}),r.createElement(d.EntitySelector,{entity:p.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",disabled:!this.store.selectedWorkspace}),r.createElement(d.SensitiveFieldSegment,{title:"New Relic API Key",description:"Enter the API Key provided by New Relic or ",customLink:r.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:s,onBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())?"Please enter an API key":""})},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}),r.createElement("div",{className:"push-double--bottom"},r.createElement("label",null,r.createElement("h4",{className:"integrations-add-card__label-title"},"Select New Relic region"),r.createElement("p",{className:"integrations-add-card__label-description"},"This helps us know what New Relic region to use")),r.createElement(u.RadioGroup,{name:"Select New Relic site",selectedValue:this.state.region,onChange:e=>{this.onRegionSelectorChange(e)}},r.createElement("div",{className:"integrations-radio-button__select-group--regions"},r.createElement("label",null,r.createElement(u.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),r.createElement("span",null,"US (.com)"))),r.createElement("div",{className:"integrations-radio-button__select-group--regions"},r.createElement("label",null,r.createElement(u.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),r.createElement("span",null,"EU (.eu)"))))),r.createElement(d.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&t&&e&&n),payload:m,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:o,source:c}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Opsgenie.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AlertsOpsgenieSetup:function(){return C},OpsgenieDefault:function(){return k},checkForValidInput:function(){return w},default:function(){return j}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),g=n("./js/components/messaging/Alert.js"),m=n("./js/components/base/Buttons.js"),h=n("./node_modules/react-radio-group/lib/index.js"),f=n("./js/components/base/LoadingIndicator.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/OpsgenieService.js"),v=n("./js/services/NavigationService.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/TagsSegment.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js");function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_.apply(this,arguments)}const E="AUTH_SUCCESS",A="AUTH_FAILED";function w(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}let C=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",monitor:"",priority:"P3",tags:[],priorityList:[{id:"1",label:"P1 - Critical",value:"P1"},{id:"2",label:"P2 - High",value:"P2"},{id:"3",label:"P3 - Moderate",value:"P3"},{id:"4",label:"P4 - Low",value:"P4"},{id:"5",label:"P5 - Informational",value:"P5"}],selectedAlertPriority:{id:"3",label:"P3 - Moderate",value:"P3"},alerts:!0,advanced:!1,region:""},this.store=(0,c.resolveStoreInstance)(d.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onAlertPrioritySelect=this.onAlertPrioritySelect.bind(this),this.handleTagsChange=this.handleTagsChange.bind(this)}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}componentDidMount(){this.setState({apiKey:this.props.apiKey,region:this.props.region})}onAlertPrioritySelect(e){this.setState({priority:e.value,selectedAlertPriority:e})}handleTagsChange(e){this.setState({tags:e})}render(){const{apiKey:e,nickname:t,region:n,priority:s,tags:a,opsgenieSite:i,errorOpsgenieSite:l}=this.state,{integrationFormActions:c,selectedWorkspace:d,source:g}=this.props;let m={name:t,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{api_key:e,region:n,alert_priority:s,tags:a,opsgenie_site:i}};return o.createElement("div",null,o.createElement(p.NicknameFieldSegment,{id:"opsgenie-nickname",value:t,onBlur:()=>{this.setState({nickname:t.trim()})},onChange:e=>{this.setState({nickname:e})}}),o.createElement(p.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:d}),o.createElement(p.EntitySelector,{entity:u.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Opsgenie",rule:this.props.rule,mode:u.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),o.createElement(I.default,{tags:this.state.tags,description:"Add tags to your Opsgenie alert",onTagsChange:this.handleTagsChange}),o.createElement(p.SelectSegmentV2,{title:"Choose alert priority",description:"Set priority for your Opsgenie alert",options:this.state.priorityList,value:this.state.selectedAlertPriority,onTargetSelect:this.onAlertPrioritySelect}),o.createElement(p.FieldSegment,{description:"Enter OpsGenie site",placeholder:"https://<example>.app.opsgenie.com",id:"opsgenie-site",title:"OpsGenie Site",value:i,error:l||i&&(h=i.trim(),y.default.isSecureUrl(h)?y.default.isBaseUrl(h)?"":"Use secure host URL without trailing '/'":"Use secure host URL"),onBlur:()=>{this.setState({opsgenieSite:i.trim(),errorOpsgenieSite:r().isEmpty(i.trim())?"Please enter the OpsGenie site":""})},onChange:e=>{this.setState({opsgenieSite:e,errorOpsgenieSite:""})}}),o.createElement(p.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&t&&e&&n),payload:m,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:r().get(this.props,"additionalContext.redirect"),integrationFormActions:c,source:g}));var h}})||s,k=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={apiKey:"",verifying:!1,verification:"",errorApiKey:"",region:"us"},this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this)}onRegionSelectorChange(e){this.setState({region:e})}render(){const{rule:e,integrationFormActions:t}=this.props,{verifying:n,verification:s,apiKey:a,user:i,errorApiKey:l,region:c}=this.state;return s===E?o.createElement(C,_({},this.props,{apiKey:a,user:i,region:this.state.region})):o.createElement("div",null,o.createElement(p.SensitiveFieldSegment,{className:"opsgenie-key",description:"Enter your API key generated in Opsgenie or",customLink:o.createElement(S.default,{extUrl:"https://go.pstmn.io/docs-opsgenie-integration-apikey"},"generate one here"),id:"opsgenie-key",title:"Opsgenie API key",value:a,error:l,onBlur:()=>{this.setState({apiKey:a.trim(),errorApiKey:r().isEmpty(a.trim())?"Please enter an API key":""})},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}),o.createElement("div",{className:"push-double--bottom"},o.createElement("label",null,o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title"}," Select Opsgenie site "),o.createElement("div",{className:"integrations-add-card__label-description"},"This helps us know what Opsgenie region to use"))),o.createElement(h.RadioGroup,{name:"Select Opsgenie site",selectedValue:this.state.region,onChange:e=>{this.onRegionSelectorChange(e)}},o.createElement("div",{className:"integrations-radio-button__select-group--regions"},o.createElement("label",null,o.createElement(h.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),o.createElement("span",null,"US (api.opsgenie.com)"))),o.createElement("div",{className:"integrations-radio-button__select-group--regions"},o.createElement("label",null,o.createElement(h.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),o.createElement("span",null,"EU (api.eu.opsgenie.com)"))))),s===A&&o.createElement(g.default,{type:"error",className:"integrations-add-card__alert",message:"Unable to authenticate. Double check your API key and region selection."}),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(m.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:n||!a||!c,size:"small",onClick:()=>{this.setState({verifying:!0,verification:"AUTH_PENDING"}),b.default.verifyUser({apiKey:a,region:c,rule:e,type:"authenticateAPIKey"},((e,t)=>{e?(pm.logger.error("Error while verifying Opsgenie user"),this.setState({verifying:!1,verification:A})):r().get(t,"result")?(this.setState({verifying:!1,verification:E,user:{name:r().get(t,"data.name")}}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:A})}))}},n&&o.createElement(f.default,null)||"Authenticate and Proceed")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(m.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{t?t({rule:e},"cancel"):v.default.back()}},"Cancel")))}})||a;function j(e){const{rule:t}=e;return o.createElement(k,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/PagerDuty.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js");let g=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",serviceKey:"",errorNickname:"",errorSeviceKey:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{nickname:e,serviceKey:t,errorNickname:n,errorSeviceKey:s}=this.state,{integrationFormActions:a,selectedWorkspace:o,source:l}=this.props;let c={name:e,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{service_key:t}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"pagerduty-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:i().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:o}),r.createElement(u.EntitySelector,{entity:d.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to PagerDuty",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.SensitiveFieldSegment,{title:"PagerDuty Integration Key",description:"Enter your PagerDuty Integration Key or",error:s,id:"pagerduty-key",customLink:r.createElement(p.default,{extUrl:"https://go.pstmn.io/docs-pagerduty-integration"},"create new one"),value:t,onBlur:()=>{this.setState({serviceKey:t.trim(),errorSeviceKey:i().isEmpty(t.trim())?"Please enter Pagerduty key":""})},onChange:e=>{this.setState({serviceKey:e,errorSeviceKey:""})}}),r.createElement(u.AddIntegrationActions,{disabled:!(e&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&t),payload:c,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:a,source:l}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Sentry.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("./js/services/NavigationService.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),u=n("./integrations/monitoring/sentry/constants.js"),p=n("./node_modules/prop-types/index.js"),g=n.n(p),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/default/DefaultAddIntegrationButton.js"),h=n("./appsdk/workbench/TabService.js"),f=n("./integrations/navigation/constants.js"),b=n("./integrations/monitoring/sentry/components/FormComponent.js"),v=n("./integrations/monitoring/sentry/helper.js"),I=n("./api-dev/constants/APISubViews.js"),S=n("./integrations/monitoring/constants.js"),y=n("./node_modules/lodash/lodash.js");function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_.apply(this,arguments)}let E=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{source:e,rule:t,apiId:n,apiVersionId:s,selectedWorkspace:i,classData:l,apiVersionName:c,apiName:p}=this.props,g=p&&c?`Sentry-${p}-${c}`:null,E=n||this.store.selectedEntity&&this.store.selectedEntity.value,A=s||this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,w=i||this.store.selectedWorkspace&&this.store.selectedWorkspace.value,C={};return(0,v.isOriginApiBuilder)(e)&&y.assign(C,{onCreate:e=>{const n=y.get(e,"id");h.default.closeByRoute(f.V10_API_ADD_APM_INTEGRATION_URL,{apiId:E}),o.default.transitionTo(u.DETAILED_ISSUES_ROUTE_IDENTIFIER,{apiId:E,versionId:A,integrationId:`${n}`}),this.store.refetchTeamIntegrations(),this.store.setRuleSpecificTeamIntegrations(t,null),pm.windowEvents.emit(`${S.API_MONITORING}-integration-added`,{apiId:E,apiVersionId:A})}}),a.createElement("div",null,a.createElement(b.default,_({selectedWorkspace:w,apiId:E,apiVersionId:A,rule:t,defaultName:g,classData:l,optionalFormComponents:(t,n)=>a.createElement(r.default,{justifyContent:"flex-start"},a.createElement(m.default,{classId:u.INTEGRATION_CLASS_NAME,disabled:!t,inputs:n.inputs,name:n.name,serviceId:u.SERVICE_ID,redirect:C}),a.createElement(d.default,{onCancel:()=>{(0,v.isOriginApiBuilder)(e)?(h.default.closeByRoute(f.V10_API_ADD_APM_INTEGRATION_URL,{apiId:E}),o.default.transitionTo("build.apiVersion",{apiId:E,versionId:A},{tab:I.MONITORING})):o.default.back()}}))},this.props)))}})||s;E.propTypes={integrationId:g().string.isRequired,apiId:g().string,apiVersionId:g().string,apiVersionName:g().string,apiName:g().string,selectedWorkspace:g().string,source:g().string,classData:g().object}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/MonitorRun.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("./node_modules/lodash/lodash.js"),l=n.n(o),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/IntegrationFormInput.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormFooter/ConnectedAccountsIntegrationFormFooter.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormFooter/ConnectedAccountsAddIntegrationButton.js"),b=n("./integrations/services/ConnectedAccountsService.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/ChannelSelector.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts");const y="all_runs";let _=(0,a.observer)(s=class extends i.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",inputs:{options:y},inputErrors:{},advanced:!1,oauth:{tokenId:null,loading:!1,error:null},connectedAccount:{userCanCreate:!0,userWantsToCreate:!1,configured:{account:null,loading:!1,error:null}}},this.toggle=this.toggle.bind(this),this.fetchConnectedAccounts=this.fetchConnectedAccounts.bind(this),this.authenticate=this.authenticate.bind(this)}toggle(e,t=(()=>{})){this.setState((t=>({[e]:!t[e]})),t)}fetchConnectedAccounts(){this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{account:null,loading:!0,error:null}}})),(()=>{b.default.fetchConfiguredConnectedAccounts(this.props.serviceId).then((e=>{if(!e||!l().isArray(e.data))throw{message:"Invalid response body",response:e};if(l().isEmpty(e.data))return this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{account:null,loading:!1,error:null}}})),(()=>this.authenticate()));const t=l().get(e,"data.0"),n=l().find(l().get(this.props,"classData.inputs",[]),["type","service-auth"])||{};S.default.fetchUserInfo(t.createdBy,((s,a)=>(s&&pm.logger.error("Error occurred while fetching user meta for connected account",s),t.createdBy=l().get(a,["body","users",t.createdBy],{id:t.createdBy}),this.setState((s=>{const a={connectedAccount:{...s.connectedAccount,userCanCreate:l().get(e,"allowedActions.create",!1),configured:{account:t,loading:!1,error:null}}};return l().isEmpty(t)||(a.inputs={...s.inputs,[n.key]:s.inputs[n.key]||{connectedAccountId:l().get(t,"id")}}),a}),(()=>{if(l().isEmpty(t))return this.authenticate()})))))})).catch((e=>this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{account:null,loading:!1,error:"Unable to load installed app"}}})),(()=>{pm.toasts.error("Something went wrong while fetching installed apps, please reload the page or reauthenticate."),pm.logger.error("Could not fetch connected account",e)}))))}))}authenticate(){const{classData:e}=this.props,t=l().get(e,"inputs",[]),n=l().find(t,["type","service-auth"])||{};this.setState({oauth:{tokenId:null,loading:!0,error:null}},(()=>{b.default.getAuthToken("slackv2",((e,t)=>{e?this.setState({oauth:{tokenId:null,loading:!1,error:e}},(()=>{pm.toasts.error(e.msg||"Something went wrong during the authorizations flow! Please try again.")})):this.setState((e=>({oauth:{tokenId:t,loading:!1,error:null},inputs:{...e.inputs,[n.key]:{tokenId:t}}})))}))}))}componentDidMount(){this.fetchConnectedAccounts()}render(){const{nickname:e,advanced:t,errorNickname:n}=this.state,{classData:s,preferredEntities:a}=this.props,o=l().get(s,"inputs",[]),b=l().find(o,["type","postman-monitor"])||{},S=l().find(o,["key","channel"])||{},_=l().find(o,["key","channelId"])||{},E=l().find(o,["key","options"])||{},A=l().find(o,["type","service-auth"])||{},w=Boolean(l().get(this.state,["inputs",A.key,"tokenId"])),C=this.state.connectedAccount.configured.account;return i.createElement(i.Fragment,null,i.createElement(m.default,{connectedAccount:C,isLoading:this.state.connectedAccount.configured.loading||this.state.oauth.loading,isUsingPersonalCredentials:w,reauthenticateCallback:()=>this.authenticate(),primarySuccessText:"Connected to "+l().get(C,"data.teamName","a")+" workspace on Slack by "+l().get(C,"createdBy.name","your team admin"),primaryOrphanedText:"Authenticated Slack workspace was removed by your team admin.",reauthenticateText:"Connect to different workspace"}),i.createElement("div",{className:"integrations-add-card__form"},i.createElement(r.NicknameFieldSegment,{id:"slack-nickname",value:e,error:n,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:l().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),i.createElement(c.default,{input:b,currentValue:l().get(this.state,["inputs",b.key]),onUserInput:e=>{this.setState((t=>({inputs:{...t.inputs,[b.key]:e},inputErrors:{...t.inputErrors,[b.key]:(0,v.getInputError)(b,e)}})))},preferredEntities:a}),i.createElement(I.default,{channelNameInput:S,channelIdInput:{..._,value:l().get(this.state,["inputs",_.key])},currentValue:{channelName:l().get(this.state,["inputs",S.key]),channelId:l().get(this.state,["inputs",_.key])},onUserInput:e=>{const t=l().get(e,"channelName",""),n=l().get(e,"channelId","");this.setState((e=>({inputs:{...e.inputs,[S.key]:t,[_.key]:n},inputErrors:{...e.inputErrors,[S.key]:(0,v.getInputError)(S,t),[_.key]:(0,v.getInputError)(_,n)}})))},authInput:{...A,value:l().get(this.state,["inputs",A.key]),error:l().get(this.state,["inputErrors",A.key])},reauthenticate:this.authenticate,includePrivateChannels:w}),i.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options"),t&&i.createElement("div",null,i.createElement(u.default,{name:"Slack advanced options",label:"Configure when monitor runs must be notified",value:l().get(this.state,["inputs",E.key],y),direction:"column",onChange:e=>{this.setState((t=>({inputs:{...t.inputs,[E.key]:e}})))}},i.createElement(p.default,{value:"all_runs",label:"Notify for all completed monitor runs"}),i.createElement(p.default,{value:"only_failures",label:"Notify for 3 failures and the first consequent successful run of the monitor"}))),i.createElement(h.default,{userCanCreate:this.state.connectedAccount.userCanCreate,toggleState:this.state.connectedAccount.userWantsToCreate,teamHasConnectedAccount:Boolean(C),connectedAccountLoading:this.state.connectedAccount.configured.loading||this.state.oauth.loading,isUsingConnectedAccount:Boolean(l().get(this.state,["inputs",A.key,"connectedAccountId"])),onToggle:()=>{this.setState((e=>({connectedAccount:{...e.connectedAccount,userWantsToCreate:!e.connectedAccount.userWantsToCreate}})))}}),i.createElement(g.default,{direction:"row",align:"left"},i.createElement(f.default,{classId:this.props.classId,disabled:l().some(this.state.inputErrors,Boolean)||!this.state.nickname||this.state.errorNickname,inputs:this.state.inputs,integrationName:this.state.nickname,connectedAccountClassInput:A,shouldAddConnectedAccount:this.state.connectedAccount.userCanCreate&&this.state.connectedAccount.userWantsToCreate&&w,serviceId:this.props.serviceId,redirect:this.props.redirect}),i.createElement(d.default,null))))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/NotificationIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/stores/StoreManager.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=n("./js/modules/services/AnalyticsService.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("./js/models/services/DashboardService.js"),p=n("./integrations/constants/notificationCenter.ts"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./js/stores/IntegrationsStore.js");let h=(0,a.observer)(s=class extends i.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(m.default),this.createNotificationCenterIntegration=this.createNotificationCenterIntegration.bind(this)}createNotificationCenterIntegration(e){o.default.createIntegration(null,e).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success("Added a new integration"),l.default.addEventV2({category:"integrations",action:this.props.rule+"_created_integration",label:"team_integrations_create_forms",value:1}),"browser"!==window.SDK_PLATFORM?(c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:this.props.service,ruleId:this.props.rule}),this.store.setRuleSpecificTeamIntegrations(this.props.rule,null),(0,r.resolveStoreInstance)(m.default).refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies()):(0,u.openNotificationPreferences)()):(pm.toasts.error("Something went wrong while adding a new integration"),c.default.transitionTo(d.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service})),this.store.updateIsAdding(!1)})).catch((e=>{pm.toasts.error(e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),c.default.transitionTo(d.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service}),this.store.updateIsAdding(!1)}))}componentDidMount(){let{bot_token:e,slack_team_id:t,slack_user_id:n,user_token:s,user:a}=this.store.readAuthDetails();if(e&&t&&n){let i={name:p.SERVICES.slack.integration_name,rule:this.props.rule,entity:"user",executor:a,variables:{botToken:e,slackTeamId:t,slackUserId:n,userToken:s}};this.createNotificationCenterIntegration(i)}else pm.toasts.error("Something went wrong while creating the integration. Please try again."),c.default.transitionTo(d.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service})}render(){return i.createElement(g.default,null)}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/TeamActivity.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/stores/StoreManager.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=n("./js/services/NavigationService.js"),c=n("./integrations/navigation/constants.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./js/stores/IntegrationsStore.js");let g=(0,a.observer)(s=class extends i.Component{constructor(e){super(e),this.store=(0,r.resolveStoreInstance)(p.default),this.createTeamActivityIntegration=this.createTeamActivityIntegration.bind(this)}createTeamActivityIntegration(e){o.default.createIntegration(null,e).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success("Added a new integration"),l.default.transitionTo(c.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:this.props.service,ruleId:this.props.rule}),d.default.addEventV2({category:"integrations",action:"teamactivity_slack_created_integration",label:"team_integrations_create_forms",value:1}),(0,r.resolveStoreInstance)(p.default).refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies()):(pm.toasts.error("Something went wrong while adding a new integration"),l.default.transitionTo(c.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service})),this.store.updateIsAdding(!1)})).catch((e=>{pm.toasts.error(e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),l.default.transitionTo(c.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service}),this.store.updateIsAdding(!1)}))}componentDidMount(){if(this.store.readAuthDetails().url&&this.store.readAuthDetails().channel){let e={name:"Slack Team Activity Integration",rule:this.props.rule,entity:"team",variables:{url:this.store.readAuthDetails().url,channel:this.store.readAuthDetails().channel}};this.createTeamActivityIntegration(e)}else pm.toasts.error("User is not authorized to configure this integration"),l.default.transitionTo(c.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service})}render(){return i.createElement(u.default,null)}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/UptimeMonitor.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=(n("../../node_modules/mobx/lib/mobx.module.js"),n("../../node_modules/react/index.js")),r=n("./js/stores/StoreManager.js"),o=n("./integrations/constants/uptimeMonitorIntegrations.ts"),l=n("./integrations/constants/integrationsConstants.ts"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),d=n("./integrations/navigation/constants.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),p=n("./monitors/constants.js"),g=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),y=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),E=n("./js/components/base/LoadingIndicator.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormFooter/ConnectedAccountsIntegrationFormFooter.js"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormFooter/ConnectedAccountsAddIntegrationButton.js"),k=n("./integrations/services/ConnectedAccountsService.js"),j=n("./js/stores/IntegrationsStore.js"),P=n("./node_modules/lodash/lodash.js");const T=pm.logger.getContext("UptimeMonitor Add Form","integrations"),N=g.default.span`
  margin-left: 2px;
  position: relative;
  top: 1px;
`;let D=(0,a.observer)(s=class extends i.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",loadingChannels:!1,selectedChannel:null,errorChannels:"",channels:[],inputs:{},inputErrors:{},oauth:{tokenId:null,loading:!1,error:null},connectedAccount:{userCanCreate:!0,userWantsToCreate:!1,configured:{account:null,loading:!1,error:null}}},this.store=(0,r.resolveStoreInstance)(j.default),this.fetchChannels=this.fetchChannels.bind(this),this.renderEntityTooltip=this.renderEntityTooltip.bind(this),this.fetchConnectedAccounts=this.fetchConnectedAccounts.bind(this),this.authenticate=this.authenticate.bind(this)}componentDidMount(){const{classData:e}=this.props,t=P.get(e,"inputs",[]);P.find(t,["key","channelName"]),P.find(t,["type","service-auth"]);this.setState({loadingChannels:!0,errorChannels:""}),this.setState(this.fetchConnectedAccounts())}fetchConnectedAccounts(){this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{account:null,loading:!0,error:null}}})),(()=>{k.default.fetchConfiguredConnectedAccounts(this.props.serviceId).then((e=>{if(!e||!P.isArray(e.data))throw{message:"Invalid response body",response:e};const t=P.get(e,"data.0"),n=P.find(P.get(this.props,"classData.inputs",[]),["type","service-auth"])||{};return this.setState((s=>{const a={connectedAccount:{...s.connectedAccount,userCanCreate:P.get(e,"allowedActions.create",!1),configured:{account:t,loading:!1,error:null}}};if(!P.isEmpty(t)){a.inputs={...s.inputs,[n.key]:s.inputs[n.key]||{connectedAccountId:P.get(t,"id")}};const e=P.find(this.props.classData.inputs,["key","channelName"])||{};this.fetchChannels(e,{key:n.key,value:a.inputs[n.key]})}return a}),(()=>{if(P.isEmpty(t))return this.authenticate()}))})).catch((e=>this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{account:null,loading:!1,error:"Unable to load connected account"}}})),(()=>{pm.toasts.error("Something went wrong while fetching connected account, please reload the page or reauthenticate."),pm.logger.error("Could not fetch connected account",e,{context:T})}))))}))}authenticate(){const{classData:e}=this.props,t=P.get(e,"inputs",[]),n=P.find(t,["type","service-auth"])||{},s=P.find(t,["key","channelName"])||{};this.setState({oauth:{tokenId:null,loading:!0,error:null}},(()=>{k.default.getAuthToken(p.UPTIME_INTEGRATION_SERVICE_NAME_AUTH.slack,((e,t)=>{e?this.setState({oauth:{tokenId:null,loading:!1,error:e}},(()=>{pm.toasts.error(e.msg||"Something went wrong during the authorizations flow! Please try again.")})):this.setState((e=>(this.fetchChannels(s,{key:n.key,value:{tokenId:t}}),{oauth:{tokenId:t,loading:!1,error:null},inputs:{...e.inputs,[n.key]:{tokenId:t}}})))}))}))}fetchChannels(e,t){const n=e.options||{},s=(0,_.getServiceActionInputsMap)(n,[t]),a=P.get(n,"service"),i=P.get(n,"serviceActionId"),r=this.props.integrationInstanceId;this.setState({loadingChannels:!0,errorChannels:""}),c.default.runServiceAction(a,i,s,this.props.classId,e.id,r||null).then((e=>e?P.map(e.body,(e=>({label:"#"+P.get(e,"name"),value:P.get(e,"id")}))):[])).then((e=>{this.setState({channels:e,loadingChannels:!1,errorChannels:""})})).catch((e=>{this.setState({loadingChannels:!1,errorChannels:"Error encountered while fetching channels"}),pm.logger.error("Error encountered while fetching channels",e,{context:T})}))}renderEntityTooltip(){return this.props.selectedWorkspace||!this.store.selectedWorkspace?i.createElement(h.default,{content:this.props.selectedWorkspace?"This field cannot be updated":"Please select a workspace first"},i.createElement(N,null,i.createElement(y.default,null))):""}render(){const{nickname:e,errorNickname:t,channels:n,selectedChannel:s,loadingChannels:a,errorChannels:r}=this.state,{classData:c,preferredEntities:p,redirect:g}=this.props,h=P.find(p,["entityType","workspace"]),_=P.get(c,"inputs",[]),k=(P.find(_,["type","postman-uptimeMonitor\t"]),P.find(_,["key","channelName"])||{}),j=P.find(_,["type","service-auth"])||{},T=Boolean(P.get(this.state,["inputs",j.key,"tokenId"])),N=this.state.connectedAccount.configured.account;return i.createElement(f.default,{direction:"column",width:"100",gap:"spacing-m"},i.createElement(A.default,{connectedAccount:this.state.connectedAccount.configured.account,isLoading:this.state.connectedAccount.configured.loading||this.state.oauth.loading,isUsingPersonalCredentials:T,primarySuccessText:"Connected to "+P.get(N,"data.teamName","a")+" workspace on Slack by "+P.get(N,"createdBy.name","your team admin"),primaryOrphanedText:"Authenticated Slack workspace was removed by your team admin.",reauthenticateCallback:()=>this.authenticate(),reauthenticateText:"Connect to different workspace"}),i.createElement(m.NicknameFieldSegmentV2,{id:"slack-nickname",value:e,error:t,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:P.isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e.target.value,errorNickname:""})}}),i.createElement(m.WorkspaceSelectorV2,{description:"Select the workspace that your uptime monitor belongs to.",selectedWorkspace:h}),i.createElement(m.EntitySelectorV2,{id:"slack-uptime-monitor",description:i.createElement(f.default,null,i.createElement(b.default,null,"The results of the selected uptime monitor would be sent to Slack.",this.renderEntityTooltip())),entity:l.entityTypes.UPTIME_MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose uptime monitor",rule:this.props.classId,mode:l.INTEGRATION_FORM_MODE.ADD,disabled:h||!this.store.selectedWorkspace}),i.createElement(v.default,{type:"h2",text:"Slack Configuration"}),i.createElement(I.default,{label:"Choose Slack channel",placeholder:a?i.createElement(f.default,{justifyContent:"space-between"},i.createElement("div",null,"Loading channels..."),i.createElement(E.default,{className:"loading-indicator-aether__dropdown"})):"Select channel",className:a?"dropdown-icon-remove":"",helperText:"The Slack channel you want to receive notifications in.",isDisabled:a||!P.isEmpty(r),options:n||[],value:s,onChange:e=>{this.setState({selectedChannel:e,inputs:{...this.state.inputs,channelName:P.get(e,"label"),channelId:P.get(e,"value")}})},emptyStateMessage:"No channels found",validationState:{status:P.isEmpty(r)?"":"error",message:P.isEmpty(r)?"":i.createElement("div",{className:"integrations-form__segment__input__error"},"Error encountered while fetching channels.",i.createElement("span",{onClick:()=>this.fetchChannels(k,{key:j.key,value:this.state.inputs[j.key]}),className:"integrations-form__segment__input__error__btn"}," Retry "))},isLoading:a}),P.isEmpty(r)&&i.createElement(f.default,{padding:"spacing-m spacing-zero spacing-zero spacing-zero",gap:"spacing-xs",alignItems:"baseline",justifyContent:"center"},i.createElement(y.default,{color:"content-color-secondary"}),i.createElement(b.default,{type:"body-medium",color:"content-color-secondary"},"For channels not found in this list, make sure the Postman app is added to these channels and ",i.createElement(S.default,{onClick:()=>this.fetchChannels(k,{key:j.key,value:this.state.inputs[j.key]}),type:"monochrome-plain",text:"retry",isDisabled:a}))),i.createElement(w.default,{userCanCreate:this.state.connectedAccount.userCanCreate,toggleState:this.state.connectedAccount.userWantsToCreate,teamHasConnectedAccount:Boolean(this.state.connectedAccount.configured.account),connectedAccountLoading:this.state.connectedAccount.configured.loading||this.state.oauth.loading,isUsingConnectedAccount:Boolean(P.get(this.state,["inputs",j.key,"connectedAccountId"])),onToggle:()=>{this.setState((e=>({connectedAccount:{...e.connectedAccount,userWantsToCreate:!e.connectedAccount.userWantsToCreate}})))}}),i.createElement(f.default,{direction:"row",width:"100"},i.createElement(C.default,{classId:this.props.classId,disabled:P.some(this.state.errorChannels,Boolean)||!this.state.nickname||this.state.errorNickname,inputs:P.assign({},this.state.inputs,{[o.ENTITY_UPTIME_MONITOR]:P.get(this.store,"selectedEntity.value")}),integrationName:this.state.nickname,connectedAccountClassInput:j,shouldAddConnectedAccount:this.state.connectedAccount.userCanCreate&&this.state.connectedAccount.userWantsToCreate&&T,serviceId:this.props.serviceId,redirect:g}),i.createElement(u.default,{defaultRedirectPageId:d.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,defaultRedirectParams:{serviceId:this.props.serviceId},onCancel:P.get(g,"onCancel")})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MonitorRun:function(){return c.default},NotificationIntegration:function(){return u.default},Slack:function(){return m},TeamActivity:function(){return d.default},UptimeMonitor:function(){return p.default}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./integrations/constants/notificationCenter.ts"),o=n("./js/services/NavigationService.js"),l=n("./integrations/navigation/constants.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/MonitorRun.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/TeamActivity.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/NotificationIntegration.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/UptimeMonitor.js"),g=n("./integrations/constants/uptimeMonitorIntegrations.ts");let m=(0,a.observer)(s=class extends i.Component{render(){const{rule:e,classId:t,service:n}=this.props,s=t||e;switch(s){case"monitor_run_slack":return i.createElement(c.default,this.props);case"teamactivity_slack":return i.createElement(d.default,this.props);case g.UPTIME_MONITOR_SLACK:return i.createElement(p.default,this.props);case r.SERVICES.slack.rule:return i.createElement(u.default,this.props)}o.default.transitionTo(l.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:n,ruleId:s})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Splunk.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./integrations/constants/integrationsConstants.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js");let m=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",hecToken:"",errorHecToken:"",splunkHost:"",errorSplunkHost:"",splunkPort:"8088",errorSplunkPort:""},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{nickname:e,errorNickname:t,hecToken:n,errorHecToken:s,splunkHost:a,errorSplunkHost:o,splunkPort:l,errorSplunkPort:c}=this.state,{integrationFormActions:m,selectedWorkspace:h,source:f}=this.props;let b={name:e,rule:this.props.rule,entity:"jobTemplate",executor:i().get(this.store.selectedEntity,"value"),variables:{hec_token:n,splunk_host:a,splunk_port:l}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"splunk-nickname",value:e,error:t,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:i().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:h}),r.createElement(u.EntitySelector,{entity:p.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose monitor",description:"The results of the selected monitor will be sent to Splunk",disabled:!this.store.selectedWorkspace}),r.createElement(u.SensitiveFieldSegment,{title:"Splunk HEC token",description:"Enter the HEC token provided by Splunk. ",customLink:r.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-splunk-integration"},"Learn more"),id:"splunk-hec-token",value:n,error:s,onBlur:()=>{this.setState({hecToken:n.trim(),errorHecToken:i().isEmpty(n.trim())?"Please enter HEC token":""})},onChange:e=>{this.setState({hecToken:e,errorHecToken:""})}}),r.createElement(u.FieldSegment,{className:"splunk-host-url",description:r.createElement("div",null,r.createElement("span",null,"Enter the Splunk HEC URL. "),r.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-splunk-host"},"Learn more")),id:"splunk-host-url",title:"Splunk HEC URL",value:a,error:o||a&&(v=a.trim(),d.default.isSecureUrl(v)?d.default.isBaseUrl(v)?"":"Use secure host URL without trailing '/'":"Use secure host URL"),onBlur:()=>{this.setState({splunkHost:a.trim(),errorSplunkHost:i().isEmpty(a.trim())?"Please enter a URL":""})},onChange:e=>{this.setState({splunkHost:e,errorSplunkHost:""})}}),r.createElement(u.FieldSegment,{className:"splunk-port",id:"splunk-port",title:"Splunk port",value:l,error:c,onBlur:()=>{this.setState({splunkPort:l.trim(),errorSplunkPort:i().isEmpty(l.trim())?"Please enter port number":""})},onChange:e=>{this.setState({splunkPort:e,errorSplunkPort:""})}}),r.createElement(u.AddIntegrationActions,{disabled:!(this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&e&&n&&l&&a&&d.default.isSecureUrl(a.trim())&&d.default.isBaseUrl(a.trim())),payload:b,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:m,source:f}));var v}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Statuspage.js":function(e,t,n){"use strict";n.r(t),n.d(t,{StatuspageDefault:function(){return k},StatuspageIncidentSetup:function(){return C},default:function(){return j}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),m=n("./js/components/messaging/Alert.js"),h=n("./js/components/base/Buttons.js"),f=n("./js/components/base/Inputs.js"),b=n("./js/components/base/LoadingIndicator.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/StatuspageService.js"),I=n("./js/services/NavigationService.js"),S=n("./integrations/navigation/constants.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/statuspage.js"),_=n.n(y);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},E.apply(this,arguments)}const A="AUTH_SUCCESS",w="AUTH_FAILED";let C=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",apiKey:"",pages:[],components:[],create_incident:!1,update_component:!1,incident_name:"",errorIncidentName:"",selectedSuccessStatus:null,selectedFailureStatus:null,selectedPage:null,selectedComponent:null,selectedIncidentStatus:null,selectedImpact:null,loading:!1},this.store=(0,c.resolveStoreInstance)(d.default),this.fetchComponents=this.fetchComponents.bind(this),this.onPageSelect=this.onPageSelect.bind(this),this.onSuccessStatusSelect=this.onSuccessStatusSelect.bind(this),this.onFailureStatusSelect=this.onFailureStatusSelect.bind(this),this.onComponentSelect=this.onComponentSelect.bind(this),this.onIncidentSelect=this.onIncidentSelect.bind(this),this.onImpactSelect=this.onImpactSelect.bind(this),this.toggle=this.toggle.bind(this),this.isDisabled=this.isDisabled.bind(this)}componentDidMount(){let e=this.props.pages.map((e=>({label:e.name,value:e.id})));this.setState({apiKey:this.props.apiKey,pages:e})}toggle(e){this.setState((t=>({[e]:!t[e]})))}onSuccessStatusSelect(e){r().isEmpty(e)?this.setState({selectedSuccessStatus:null}):this.setState({selectedSuccessStatus:e})}onFailureStatusSelect(e){r().isEmpty(e)?this.setState({selectedFailureStatus:null}):this.setState({selectedFailureStatus:e})}fetchComponents(){const{apiKey:e,selectedPage:t}=this.state;this.setState({loading:!0}),v.default.listComponents({apiKey:e,pageId:t.value},((e,t)=>{if(e)pm.toasts.error("Something went wrong while fetching components, please try again");else{let e=t.map((e=>({label:e.name,value:e.id})));this.setState({components:e,loading:!1})}}))}onPageSelect(e){r().isEmpty(e)?this.setState({selectedPage:null}):this.setState({selectedPage:e},(()=>{this.fetchComponents()}))}onComponentSelect(e){r().isEmpty(e)?this.setState({selectedComponent:null}):this.setState({selectedComponent:e})}onIncidentSelect(e){r().isEmpty(e)?this.setState({selectedIncidentStatus:null}):this.setState({selectedIncidentStatus:e})}onImpactSelect(e){r().isEmpty(e)?this.setState({selectedImpact:null}):this.setState({selectedImpact:e})}isDisabled(){let{update_component:e,selectedComponent:t,selectedSuccessStatus:n,selectedFailureStatus:s,create_incident:a,incident_name:i,selectedIncidentStatus:o,selectedImpact:l,selectedPage:c}=this.state;return!r().get(c,"value")||(!e&&!a||(!(!e||r().get(t,"value")&&r().get(s,"value")&&r().get(n,"value"))||!(!a||i&&r().get(o,"value")&&r().get(l,"value"))))}render(){const{apiKey:e,nickname:t,update_component:n,create_incident:s,incident_name:a,pages:i,selectedPage:l,errorNickname:c,selectedSuccessStatus:d,selectedFailureStatus:m,components:h,selectedComponent:b,selectedIncidentStatus:v,selectedImpact:I,loading:S,errorIncidentName:y}=this.state,{rule:E,integrationFormActions:A,selectedWorkspace:w,source:C}=this.props;let k={name:t,rule:E,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{api_key:e,page_id:r().get(l,"value"),update_component:n,component_id:r().get(b,"value"),component_status_on_failure:r().get(m,"value"),component_status_on_success:r().get(d,"value"),create_incident:s,incident_name:a,incident_status:r().get(v,"value"),incident_impact:r().get(I,"value")}},j=this.isDisabled();return o.createElement("div",null,o.createElement(p.NicknameFieldSegment,{id:"statuspage-nickname",value:t,error:c,onBlur:()=>{this.setState({nickname:t.trim(),errorNickname:r().isEmpty(t.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),o.createElement(p.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:w}),o.createElement(p.EntitySelector,{entity:u.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose monitor",description:"Results from this monitor will be sent to your status page",disabled:!this.store.selectedWorkspace}),o.createElement(p.SelectSegmentV2,{title:"Select page",description:"Where monitor updates will be sent",placeholder:"Type to filter pages",options:i,value:l,onTargetSelect:this.onPageSelect,noOptionsForDropdown:"No page found"}),o.createElement("div",{className:"integrations-checkbox__select-group"},o.createElement("div",{className:"integrations-checkbox__select-group--label-title"},"Statuspage actions"),o.createElement("div",{className:"integrations-checkbox__select-group--actions"},o.createElement(f.Checkbox,{checked:n,onChange:()=>{this.toggle("update_component")}}),o.createElement("div",{className:"checkbox__label"},"Link monitor to component",o.createElement("div",{className:"checkbox__helper-text"},"When tests fail on a monitoring run, the linked components status will automatically update.",o.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-statuspage-components"},"Learn more about components")))),n&&o.createElement("div",{className:"integrations-form__disclosed"},o.createElement(p.SelectSegmentV2,{title:"Component",disabled:!n,loading:S,placeholder:"Type to filter components",options:h,value:b,onTargetSelect:this.onComponentSelect,noOptionsForDropdown:"No component found"}),o.createElement(p.SelectSegmentV2,{title:"Component success status",description:"This status will display on a successful monitor run",disabled:!n,placeholder:"Type to filter statuses",options:_().componentStatuses,value:d,onTargetSelect:this.onSuccessStatusSelect,noOptionsForDropdown:"No Status found"}),o.createElement(p.SelectSegmentV2,{title:"Component failure status ",description:"This status will display on a failed monitor run",disabled:!n,placeholder:"Type to filter statuses",options:_().componentStatuses,value:m,onTargetSelect:this.onFailureStatusSelect,noOptionsForDropdown:"No Status found"})),o.createElement("div",{className:"integrations-checkbox__select-group--actions"},o.createElement(f.Checkbox,{checked:s,onChange:()=>{this.toggle("create_incident"),this.setState({errorIncidentName:""})}}),o.createElement("div",{className:"checkbox__label"},"Create incident when monitoring run fails",o.createElement("div",{className:"checkbox__helper-text"},"When tests fail on a monitoring run, an incident will be created on Statuspage.",o.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-statuspage-incidents"},"Learn more about incidents")))),s&&o.createElement("div",{className:"integrations-form__disclosed"},o.createElement(p.FieldSegment,{disabled:!s,id:"incident-name",title:"Incident name",value:a,error:y,onBlur:()=>{this.setState({incident_name:a.trim(),errorIncidentName:r().isEmpty(a.trim())?"Please enter the incident name":""})},onChange:e=>{this.setState({incident_name:e})},placeholder:"e.g. API requests timing out"}),o.createElement(p.SelectSegmentV2,{title:"Incident status",disabled:!s,placeholder:"Type to filter statuses",options:_().incidentStatuses,value:v,onTargetSelect:this.onIncidentSelect,noOptionsForDropdown:"No Status found"}),o.createElement(p.SelectSegmentV2,{title:"Incident impact",disabled:!s,placeholder:"Type to filter statuses",options:_().impacts,value:I,onTargetSelect:this.onImpactSelect,noOptionsForDropdown:"No impacts found"}))),o.createElement(p.AddIntegrationActions,{disabled:j||!(r().get(this.store.selectedWorkspace,"value")&&r().get(this.store.selectedEntity,"value")&&t&&e),payload:k,service:this.props.service,rule:this.props.rule,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,redirect:r().get(this.props,"additionalContext.redirect"),integrationFormActions:A,source:C}))}})||s,k=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={apiKey:"",verifying:!1,verification:"",errorApiKey:""}}render(){const{verifying:e,verification:t,apiKey:n,pages:s,errorApiKey:a}=this.state,{integrationFormActions:i,rule:l}=this.props;return t===A?o.createElement(C,E({},this.props,{apiKey:n,pages:s})):o.createElement("div",null,o.createElement(p.SensitiveFieldSegment,{className:"statuspage-key",description:"Enter your API key generated in Statuspage or",customLink:o.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-statuspage-apikey"},"generate one here"),id:"statuspage-key",title:"Statuspage API key",value:n,error:a,onBlur:()=>{this.setState({apiKey:n.trim(),errorApiKey:r().isEmpty(n.trim())?"Please enter an API key":""})},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}),t===w&&o.createElement(m.default,{type:"error",className:"integrations-add-card__alert",message:"Unable to authenticate. Double check your API key and try again."}),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--proceed",type:"primary",disabled:e||!n,size:"small",onClick:()=>{this.setState({verifying:!0,verification:"AUTH_PENDING"}),v.default.listPages({apiKey:n},((e,t)=>{e?this.setState({verifying:!1,verification:w}):200===r().get(t,"status")&&r().get(t,"body")?(this.setState({verifying:!1,verification:A,pages:r().get(t,"body")}),this.props.setActiveTab("configure")):this.setState({verifying:!1,verification:w})}))}},e&&o.createElement(b.default,null)||"Authenticate and Proceed")),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{i?i({rule:l},"cancel"):"web"===window.SDK_PRODUCT?window.history.go(-1):I.default.transitionTo(S.INTEGRATIONS_SERVICE_DETAILS_PAGE_IDENTIFIER,{serviceId:this.props.service})}},"Cancel")))}})||a;function j(e){const{rule:t}=e;if("monitor_run_statuspage"===t)return o.createElement(k,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/TravisCI.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("./integrations/ci-cd/components/Button/AddIntegration.js"),r=n("./integrations/ci-cd/components/Button/CancelButton.js"),o=n("./integrations/ci-cd/components/TravisCIFormData.js");t.default=e=>{const{classId:t,serviceId:n}=e;return s.createElement(o.default,{classId:t,renderApiApiversionSelector:!0,optionalFormComponents:(e,o)=>s.createElement(a.default,{justifyContent:"flex-start",gap:"spacing-s"},s.createElement(i.default,{type:"primary",size:"small",disabled:!e,payload:o,service:n,rule:t,useInstanceApi:!0,isBrowseIntegration:!0},"Add Integration"),s.createElement(r.default,{isBrowseIntegration:!0,service:n}))})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/VictorOps.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/constants/integrationsConstants.ts"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");let g=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",routingKey:"",errorNickname:"",errorApiKey:"",advanced:!1},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{nickname:e,apiKey:t,routingKey:n,advanced:s,errorNickname:a,errorApiKey:o}=this.state,{integrationFormActions:l,selectedWorkspace:c,source:g}=this.props;let m={name:e,rule:this.props.rule,entity:"jobTemplate",executor:this.store.selectedEntity&&this.store.selectedEntity.value,variables:{api_key:t,routing_key:n}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"victorops-nickname",value:this.state.nickname,error:a,onBlur:()=>{this.setState({nickname:e.trim(),errorNickname:i().isEmpty(e)?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:!1})}}),r.createElement(u.WorkspaceSelector,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:c}),r.createElement(u.EntitySelector,{entity:d.entityTypes.MONITORS,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Splunk On-Call",rule:this.props.rule,mode:d.INTEGRATION_FORM_MODE.ADD,disabled:!this.store.selectedWorkspace}),r.createElement(u.SensitiveFieldSegment,{title:"API Key",description:"Enter your Splunk On-Call API Key",id:"victorops-api-key",value:t,error:o,onBlur:()=>{this.setState({apiKey:t.trim(),errorApiKey:i().isEmpty(t.trim())?"Please enter an API key":""})},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",r.createElement(p.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),this.state.advanced&&r.createElement(u.FieldSegment,{optional:!0,title:"Routing Key",description:"Enter your Splunk On-Call Routing Key",id:"victorops-routing-key",value:n,onBlur:()=>{this.setState({routingKey:n.trim()})},onChange:e=>{this.setState({routingKey:e})}}),r.createElement(u.AddIntegrationActions,{disabled:!(e&&this.store.selectedWorkspace&&this.store.selectedWorkspace.value&&this.store.selectedEntity&&this.store.selectedEntity.value&&t),payload:m,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,service:this.props.service,rule:this.props.rule,redirect:i().get(this.props,"additionalContext.redirect"),integrationFormActions:l,source:g}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),r=n("./js/stores/StoreManager.js"),o=n("./js/stores/IntegrationsStore.js"),l=n("../../node_modules/mobx/lib/mobx.module.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}function d(e){let{disabled:t,workspaceId:n,payload:d,integrationFormActions:u,source:p,showDivider:g,...m}=e,h="basic_auth"!==(f=(0,l.toJS)((0,r.resolveStoreInstance)(o.default).authType))&&"token"!==f;var f;return p||(p="team_integrations_create_forms"),s.createElement("div",null,g&&s.createElement("hr",{className:"integration-add-actions-separator"}),s.createElement(i.default,c({disabled:t,workspaceId:n,payload:d},m,{redirect:e.redirect,integrationFormActions:u,source:p,alignLeft:h})),s.createElement(a.default,c({alignLeft:h,integrationFormActions:u,payload:d,source:p},m)))}d.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js");function a(e){const{imageSrc:t,displayField:n}=e;return s.createElement("div",{className:"integrations-add-card__authed-user"},s.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&s.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),s.createElement("span",{className:"integrations-add-card__authed-user__name"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js");function a(e){const{className:t,extUrl:n,target:a}=e;return s.createElement("a",{className:t,href:n,rel:"_blank"===a?"noopener noreferrer":"",target:a,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/DeprecationBanner.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/deprecatedClasses.js"),c=n("./node_modules/lodash/lodash.js");function d(e){const{classId:t}=e;if(!c.includes(l.DEPRECATED_CLASSES,t))return null;const n=c.get(l.DEPRECATED_CLASS_OPTIONS,t),{TITLE:a,BODY:i,EXTERNAL_LINK_TEXT:d}=l.DEFAULT_DEPRECATION_BANNER_OPTIONS,u=c.get(n,["banner","title"],a),p=c.get(n,["banner","body"],i),g=c.get(n,["banner","externalLink","url"]),m=c.get(n,["banner","externalLink","text"],d);return s.createElement(r.default,{title:u,type:"local",status:"warning"},p," ",g&&s.createElement(o.default,{extUrl:g},m))}d.propTypes={classId:i().string.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/DeprecationTooltip.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/deprecatedClasses.js"),c=n("./node_modules/lodash/lodash.js");function d(e){const{classId:t}=e;return c.includes(l.DEPRECATED_CLASSES,t)?s.createElement(r.default,{content:c.get(l.DEPRECATED_CLASS_OPTIONS,[t,"tooltipMessage"],l.DEPRECATION_TOOLTIP_DEFAULT_MESSAGE)},s.createElement(o.default,{text:"Deprecated",status:"warning"})):null}d.propTypes={classId:i().string.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var s,a=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),r=n("./js/stores/ActiveWorkspaceStore.js"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./monitors/services/MonitorService.js"),d=n("./js/services/NavigationService.js"),u=n("./api-dev/services/APIDevService.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=(n("./js/modules/services/RemoteSyncRequestService.js"),n("./integrations/constants/integrationsConstants.ts")),h=n("./runtime-repl/collection/_api/CollectionInterface.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),v=n("./js/external-navigation/ExternalNavigationService.js"),I=n("./api-dev/interfaces/APIInterface.js"),S=n("../../node_modules/mobx/lib/mobx.module.js"),y=n("./node_modules/lodash/lodash.js"),_=n.n(y);const E="Malformed response",A={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},w={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let C=(0,p.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.workspaceStore=(0,o.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===m.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===m.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,S.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:_().get(e,"name"),value:_().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(_().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===m.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===m.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===m.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===m.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===m.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return A[this.props.entity]?A[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,s){return new Promise(((s,a)=>{const i=e.map((e=>({id:_().get(e,"apiversion"===n?"api":"id")})));let r=null;m.INTEGRATION_FORM_MODE.ADD,r=g.default.fetchCreatePermissions,r(t,n,i).then((t=>(_().forEach(_().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),s(e)))).catch((e=>{pm.logger.error(e),a(e)}))}))}fetchCollections(e){e?(0,h.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(E);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===m.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?c.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=_().get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(E);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===m.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?c.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=_().get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(E);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===m.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?u.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(E);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===m.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await u.default.getVersions(e);let{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(E);if(this.props.rule&&this.props.mode){const e="apiversion";n=await this.fetchAndAssignPermissions(n,this.props.rule,e,this.props.mode)}this.props.entity===m.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(_().find(n,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:n,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){_().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==m.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===m.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return a.createElement(f.default,{alignItems:"center",direction:"column"},a.createElement("div",null,"This workspace doesn't have any monitors."),a.createElement("div",{onClick:()=>{"workspace"===_().split(d.default.getCurrentURL(),"/",1)[0]?d.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,v.openExternalLink)(d.default.getBaseURL()+"/"+d.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},a.createElement(b.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===m.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:n}=this.state;if(e===m.entityTypes.API_VERSIONS){const e=await(0,I.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(n[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:n,entityVersions:s,firstLoad:r,shouldHideDropdown:o}=this.state,{selectedEntity:l,selectedEntityVersion:c}=this.store;return o?null:a.createElement(i.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===m.entityTypes.API_VERSIONS?s:n,value:this.props.value||(this.props.entity===m.entityTypes.API_VERSIONS?c:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||_().get(w,this.props.entity),emptyStateError:!e&&(this.props.entity===m.entityTypes.API_VERSIONS?s.length>0&&!c:n.length>0&&!l)&&!r&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),o=n("./monitors/services/MonitorService.js"),l=n("./api-dev/services/APIDevService.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./runtime-repl/collection/_api/CollectionInterface.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("./js/components/base/LoadingIndicator.js"),h=n("./integrations/api-observability/components/base/CustomDropdown.js"),f=n("./node_modules/lodash/lodash.js");const b="Malformed response",v={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},I={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let S=(0,c.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===u.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:f.get(e,"name"),value:f.get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(f.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===u.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===u.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===u.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===u.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return v[this.props.entity]?v[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,s){return new Promise(((s,a)=>{const i=e.map((e=>({id:f.get(e,"apiversion"===n?"api":"id")})));let r=null;u.INTEGRATION_FORM_MODE.ADD,r=d.default.fetchCreatePermissions,r(t,n,i).then((t=>(f.forEach(f.zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),s(e)))).catch((e=>{pm.logger.error(e),a(e)}))}))}fetchCollections(e){e?(0,p.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?o.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(b);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?o.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(b);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===u.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(f.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){f.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==u.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===u.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:n,entityVersions:s,firstLoad:i}=this.state,{selectedEntity:r,selectedEntityVersion:o}=this.store;return t||!e&&(this.props.entity===u.entityTypes.API_VERSIONS?s.length>0&&!f.get(o,"value"):n.length>0&&!f.get(r,"value"))&&!i?{status:"error",message:t?a.createElement("div",null,t,a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return a.createElement(g.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading..."),a.createElement(m.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return I[this.props.entity]?I[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:n}=this.state,{selectedEntity:s,selectedEntityVersion:i}=this.store;return a.createElement(h.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===u.entityTypes.API_VERSIONS?n:t,value:this.props.entity===u.entityTypes.API_VERSIONS?i:s,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:n,optional:i,optionalText:l,id:c,disabled:d,error:u,...p}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},n," ",i?s.createElement("span",null,"(",l||"optional",")"):""),s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(a.Input,o({inputStyle:"box",type:"text",disabled:d,error:r().isEmpty(u)?"":"This is a mandatory field"},p)),r().isEmpty(u)?"":s.createElement("div",{className:"integrations-add-card__error"},u)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Inputs.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("./js/components/base/Buttons.js");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:n,optional:l,id:c,disabled:d,error:u,errorMessage:p,addCopy:g,handleOnClick:m,handleRetry:h,showRetry:f,...b}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},n," ",l?s.createElement("span",null,"(optional)"):""),t&&s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input integrations-add-card__input2 "},s.createElement(a.Input,o({inputStyle:"box",type:"text",disabled:d,error:u&&u},b)),s.createElement("div",null,g&&s.createElement(r.Button,{onClick:m,tooltip:"copy"},s.createElement(i.default,{name:"icon-action-copy-stroke",color:"base-color-brand"})))),u?s.createElement("div",{className:"integrations-add-card__error integrations-add-card__error2"},p," ",f?s.createElement("span",{className:"integrations-add-card__retry-btn",onClick:h}," Retry "):""):"")}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{id:t,error:n,...i}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),s.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(a.Input,o({id:t,inputStyle:"box",type:"text",error:r().isEmpty(n)?"":"This is a mandatory field"},i)),r().isEmpty(n)?"":s.createElement("div",{className:"integrations-add-card__error"},n)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n("../../node_modules/react/index.js"),a=(n("./js/components/base/Inputs.js"),n("./node_modules/lodash/lodash.js")),i=n.n(a),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l.apply(this,arguments)}function c(e){const{id:t,error:n,...a}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement(r.default,l({id:t,label:s.createElement(o.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:i().isEmpty(n)?"":"error",validationMessage:i().isEmpty(n)?"":"This is a mandatory field"},a)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/InputSelectV2.js"),i=n("./js/components/base/SearchHighlighter.js"),r=n("./node_modules/lodash/lodash.js");class o extends s.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,n={}){return!t||n.firstRender?e:r.filter(e,(e=>e.id&&r.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,n=r.find(e,(e=>e.id===t.id));return n||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,n={}){const a=e.name,r=e.id;return t&&!n.firstRender?s.createElement("div",{className:"input-select-item",key:r},s.createElement(i.default,{source:a,query:t})):s.createElement("div",{className:"input-select-item",key:r},a)}render(){var{title:e,description:t,customLabel:n,showCustomLabel:i,filterItems:r}=this.props;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},e),s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(a.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,r),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),i?n:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/SelectDropdown.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./version-control/common/ForkLabel.js"),c=n("./node_modules/lodash/lodash.js");class d extends s.Component{constructor(e){super(e),this.optionRenderer=e=>s.createElement(i.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!c.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,n=null;if(t&&(n=c.find(e,(e=>c.isEqual(e.value,t.value)))),n){let e,t;var a,i,d,u,p;return n.isForked?(e={id:null===(a=n)||void 0===a?void 0:a.id,forkLabel:null===(i=n)||void 0===i?void 0:i.forkLabel,model:null===(d=n)||void 0===d?void 0:d.type},t={id:null===(u=n)||void 0===u?void 0:u.baseCollectionUid,model:null===(p=n)||void 0===p?void 0:p.type},n={...n,label:s.createElement(r.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},s.createElement(o.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},n.label),s.createElement(l.default,{forkedEntity:e,baseEntity:t,label:n.forkLabel}))}):n}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:n,error:i,isCreatable:r,isClearable:o,noResultsForSearch:l,optional:d,noOptionsForDropdown:u,loading:p,disabled:g,handleRetry:m,checkForValidInput:h,customInputMessage:f,emptyStateError:b,label:v}=this.props;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},e," ",d?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(a.default,{isCreatable:r,isClearable:o,multi:this.props.multi,label:v,optionRenderer:this.optionRenderer,loading:p,className:(b||i)&&"is-error",disabled:g,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:n&&0!==n.length?l:u,options:n,isValidNewOption:h||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,f),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),b?s.createElement("span",{className:"integrations-add-card__error"},b):i?s.createElement("span",{className:"integrations-add-card__error"},i+". ",c.isFunction(m)&&s.createElement("span",{onClick:m,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/PasswordInput.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./node_modules/classnames/index.js"),l=n.n(o),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(this,arguments)}const p=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function g(e){const{isInlineSaveVisible:t,inlineSaveButtonData:n,onSave:i,value:o}=e,{isSaveDisabled:l,integrationId:g,payload:m}=n||{};return s.createElement(d.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},s.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:n,optional:i,id:o,customLink:l,error:c,descriptionClass:d,maskedPlaceholderWhenEmpty:g,...m}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},n," ",i?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:d||"integrations-add-card__label-description"},t," ",l),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(a.default,u({inputStyle:"box",type:"text",error:r().isEmpty(c)?"":"This is a mandatory field",placeholder:g?"************":""},m,{className:p(e.className,e.error)})),r().isEmpty(c)?"":s.createElement("div",{className:"integrations-add-card__error"},c)))})(e)),t&&s.createElement(c.default,{isSaveDisabled:l,integrationId:g,payload:m,onSave:i,value:o}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=(n("./node_modules/classnames/index.js"),n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:n,optional:a,id:l,customLink:c,error:d,descriptionClass:u,maskedPlaceholderWhenEmpty:p,...g}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",a?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:u||"integrations-add-card__label-description"},t," ",c),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(r.default,o({type:"password",placeholder:p?"************":""},g)),i().isEmpty(d)?"":s.createElement("div",{className:"integrations-add-card__error"},d)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/TagsSegment.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("./node_modules/classnames/index.js"),o=n.n(r),l=n("./node_modules/@postman/react-click-outside/dist/index.js"),c=n.n(l),d=n("./node_modules/@postman/sanitise-user-content/index.js"),u=n.n(d),p=n("./node_modules/react-contenteditable/lib/react-contenteditable.js"),g=n.n(p),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/TagCard.js"),h=n("./node_modules/lodash/lodash.js");const f="editing",b=[" ",";",","],v=[9,13,32,186,188],I=27,S=8,y=46;class _ extends s.Component{constructor(e){super(e),this.state={activeInput:{value:"",index:0,isLastNode:!0},previousValue:"",updatedLastNode:!1,containerFocused:!1,selectedTag:null},this.handleActiveInputChange=this.handleActiveInputChange.bind(this),this.handleActiveInputClick=this.handleActiveInputClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleContainerClick=this.handleContainerClick.bind(this),this.focusActiveInput=this.focusActiveInput.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleDelimiter=this.handleDelimiter.bind(this),this.renderTagContent=this.renderTagContent.bind(this),this.updateLastNode=this.updateLastNode.bind(this)}componentDidMount(){this.props.disableFocusInput&&this.setState({containerFocused:!1})}componentDidUpdate(e,t){!this.state.containerFocused||t.activeInput.index===this.state.activeInput.index&&e.tags.length===this.props.tags.length||this.focusActiveInput(),""!==this.state.activeInput.value||0!==this.state.activeInput.index||0===this.props.tags.length||this.state.updatedLastNode||this.updateLastNode()}focusActiveInput(){h.invoke(this.refs,"contentEditable.htmlEl.focus")}updateLastNode(){this.setState({activeInput:{value:"",index:this.props.tags.length,isLastNode:!0},updatedLastNode:!0})}getTagFromString(e){return{value:e,type:"regular"}}shouldRenderPlaceHolder(){return 1===this.props.tags.length&&0===this.state.activeInput.index&&!this.state.activeInput.value||!this.state.activeInput.value&&!this.props.tags.length}checkTagExists(e=this.props.tags,t){let n;return n=h.find(e,["value",t]),!(!n||n.value!==t||n.type===f)}splitInput(e){let t=[],n={},s=!1;return b.some((t=>{e.indexOf(t)>-1&&(e=e.split(t),s=!0)})),t=s?e:[e],t.filter((e=>!n.hasOwnProperty(e)&&(n[e]=!0)))}handlePaste(e){e.preventDefault();let t=e.clipboardData.getData("Text"),{activeInput:n,previousValue:s}=this.state,{tags:a}=this.props,i=a.reduce(((e,t)=>(e[t.value]=!0,e)),{}),r=this.splitInput(t).filter((e=>!(!e||i[e]||e===n.value||e===s))).map((e=>this.getTagFromString(e))),o=[...a,...r];n.isLastNode&&(n={...n,index:o.length}),this.setState({activeInput:n}),this.props.onTagsChange(o)}handleClickOutside(){this.setState({containerFocused:!1}),this.handleContainerClick()}handleContainerClick(e){e&&(this.state.containerFocused||this.setState({containerFocused:!0}),this.focusActiveInput());let{activeInput:t,previousValue:n}=this.state,{tags:s}=this.props,a={tags:s,activeInput:t,previousValue:n};a=this.saveActiveBadge(a),this.setState({activeInput:a.activeInput,previousValue:a.previousValue}),this.props.onTagsChange(a.tags)}handleRemove(e,t){t.stopPropagation();let n={tags:this.props.tags,activeInput:this.state.activeInput};n=this.removeTag(n,e),this.setState({activeInput:n.activeInput}),this.props.onTagsChange(n.tags)}handleBackspaceAndDelete(e){if(!this.state.activeInput.value){if(this.state.selectedTag&&this.state.activeInput.index){let t={tags:this.props.tags,activeInput:this.state.activeInput};return t=this.removeTag(t,e-1),this.setState({activeInput:t.activeInput,selectedTag:null}),void this.props.onTagsChange(t.tags)}this.state.activeInput.index&&this.setState({selectedTag:e})}}handleEscapeKey(e){if(!this.state.previousValue)return;let{previousValue:t}=this.state,{tags:n}=this.props,s=[...n.slice(0,e),this.getTagFromString(t),...n.slice(e+1)],a={value:"",index:s.length,isLastNode:!0};this.setState({activeInput:a,previousValue:""}),this.props.onTagsChange(s)}saveActiveBadge(e){let{tags:t,activeInput:n,previousValue:s}=e;if(!n.value||this.checkTagExists(t,n.value)){if(!n.isLastNode){let e=[...t.slice(0,n.index),...t.slice(n.index+1)];return s="",{tags:e,activeInput:{value:"",isLastNode:!0,index:e.length},previousValue:s}}return{...e,activeInput:{...n,value:""},previousValue:""}}let a=[...t.slice(0,n.index),this.getTagFromString(n.value),...t.slice(n.index+1)];return{tags:a,activeInput:{...n,value:"",index:a.length,isLastNode:!0},previousValue:""}}editTag(e,t){let{tags:n,activeInput:s}=e,a=n[t].value,i={...s,value:a,index:t,isLastNode:n.length-1===s.index};return n[t].type=f,{tags:n,activeInput:i,previousValue:a}}removeTag(e,t){let{activeInput:n,tags:s}=e;return{tags:[...s.slice(0,t),...s.slice(t+1)],activeInput:{...n,index:t<n.index?n.index-1:n.index}}}handleTagClick(e,t){t.stopPropagation(),2!==t.detail||this.handleTagDoubleClick(e)}handleTagDoubleClick(e){let t={tags:this.props.tags,activeInput:this.state.activeInput,previousValue:this.state.previousValue},n=t.tags.length;t=this.saveActiveBadge(t),t.tags.length<n&&this.state.activeInput.index<e&&e--,t=this.editTag(t,e),this.setState({activeInput:t.activeInput,previousValue:t.previousValue,containerFocused:!0}),this.props.onTagsChange(t.tags)}handleDelimiter(){if(!this.state.activeInput.isLastNode||this.state.activeInput.value){let{activeInput:e,previousValue:t}=this.state,{tags:n}=this.props,s={tags:n,activeInput:e,previousValue:t};s=this.saveActiveBadge(s),this.setState({activeInput:s.activeInput,previousValue:s.previousValue}),this.props.onTagsChange(s.tags)}}handleKeyDown(e){let t=e&&e.keyCode;t!==I?t!==S&&t!==y?v.includes(t)&&(e.preventDefault(),this.handleDelimiter()):this.handleBackspaceAndDelete(this.state.activeInput.index):this.handleEscapeKey(this.state.activeInput.index)}handleActiveInputChange(e){let t=e.target.value,n={...this.state.activeInput,value:t};this.setState({activeInput:n,selectedTag:null})}handleActiveInputClick(e){e.stopPropagation()}renderContentEditable(e,t){return s.createElement(s.Fragment,{key:t},s.createElement(g(),{ref:"contentEditable",className:"integrations-tags-segment-active__input",html:u()(e),onChange:this.handleActiveInputChange,onClick:this.handleActiveInputClick,onKeyDown:this.handleKeyDown,onPaste:this.handlePaste}))}renderTagContent(e){return s.createElement("div",{className:"invite-user-tag"},s.createElement("div",{title:e,className:"integrations-tags-segment-text__content"},e))}render(){return s.createElement("div",{className:"integrations-add-card__segment",onClick:this.handleClickOutside},s.createElement("div",{className:"integrations-add-card__label-title"}," Tags "),s.createElement("div",{className:"integrations-add-card__label-description"},this.props.description||"Add some tags"),s.createElement("div",{className:"integrations-add-card__input"},s.createElement("div",{ref:"inviteRef",className:"integrations-tags-segment-input__container"},s.createElement("div",{onClick:this.handleContainerClick,className:o()(this.props.className,{"invite-component-focused":this.state.containerFocused},"invite-container")},this.props.tags.map(((e,t)=>e.type===f?this.renderContentEditable(this.state.activeInput.value,t):s.createElement(m.default,{content:this.renderTagContent(e.value),isSelected:t===this.state.selectedTag-1,key:t,name:"tag",value:e.value,type:e.type,onClick:this.handleTagClick.bind(this,t),onClose:this.handleRemove.bind(this,t)}))),this.state.activeInput.isLastNode&&this.renderContentEditable(this.state.activeInput.value)))))}}_.propTypes={onTagsChange:i().func.isRequired,tags:i().array,renderTagContent:i().func},_.defaultProps={tags:[],tagValidator:()=>!0,renderTagContent:function(e){return s.createElement("div",null,s.createElement("div",{className:"tag-text"},e.value))}},t.default=c()(_)},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("../../node_modules/react/index.js"),i=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),u=n("./integrations/constants/integrationsConstants.ts"),p=n("./node_modules/lodash/lodash.js");let g=(0,c.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{i.default.findAll({limit:50,...e&&{cursor:e}}).then((s=>(e=p.get(s,"meta.nextCursor"),t=p.unionBy(t,s.data,"id"),n()))).catch((e=>n(e)))}),(()=>p.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const s=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:s,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),p.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:n,firstLoad:s,shouldDisableDropdown:i}=this.state,{selectedWorkspace:o}=this.store;return!i&&a.createElement(r.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||i,error:t,entityType:u.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&n.length>0&&!o&&!s&&"Please select a workspace",options:n,value:o,onTargetSelect:this.onTargetSelect})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./node_modules/async/dist/async.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./integrations/api-observability/components/base/CustomDropdown.js"),g=n("./node_modules/lodash/lodash.js");let m=(0,c.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((n=>{i.default.findAll({limit:50,...e&&{cursor:e}}).then((s=>(e=g.get(s,"meta.nextCursor"),t=g.unionBy(t,s.data,"id"),n()))).catch((e=>n(e)))}),(()=>g.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const s=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:s,loading:!1})}}))}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),g.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1}))}renderLoadingState(){return a.createElement(r.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading..."),a.createElement(u.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(){let{error:e,firstLoad:t,loading:n,workspaces:s}=this.state,{selectedWorkspace:i}=this.store;return e||!n&&s.length>0&&!g.get(i,"value")&&!t?{status:"error",message:e?a.createElement("div",null,"Unable to load workspaces.",a.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchAllWorkspaces()}},"Retry")):"Please select a workspace."}:{}}render(){const{loading:e,workspaces:t,shouldDisableDropdown:n}=this.state,{selectedWorkspace:s}=this.store;return!n&&a.createElement(p.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||n,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,validationState:this.getValidationState(),options:t||[],value:s,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found"})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./js/modules/services/AnalyticsService.js"),g=n("./node_modules/classnames/index.js"),m=n.n(g),h=n("./js/components/base/LoadingIndicator.js"),f=n("./node_modules/lodash/lodash.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}let v=(0,u.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:n,rule:s,service:o,alignLeft:l,integrationFormActions:u,source:g,labels:v,...I}=this.props,S=(null==v?void 0:v.add)||"Add Integration";let y=g||"team_integrations_create_forms";return a.createElement("div",{"data-testid":"add-integration-button",className:m()("integrations-add-actions__button--container",{"align-left":l})},a.createElement(i.Button,b({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():r.default.createIntegration(n||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&f.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),p.default.addEventV2({category:"integrations",action:s+"_created_integration",label:y,value:1}),u)u(t);else{if("api_github"===s&&"github"===o)c.default.transitionTo(d.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:f.get(e,"body.data.id")},{apiId:t.executor,workspaceId:n});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;c.default.transitionTo(e,t,n)}else c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:o,ruleId:s});this.store.refetchTeamIntegrations(),this.store.resetAddIntegrationDependencies(),this.store.setRuleSpecificTeamIntegrations(s,null)}else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(f.get(e,"error.details.message")||f.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},I)," ",this.store.isAdding?a.createElement(h.default,null):S))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),o=n("./js/components/base/Buttons.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/services/NavigationService.js"),d=n("./node_modules/classnames/index.js"),u=n.n(d);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}let g=(0,l.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,integrationFormActions:s,payload:i,labels:r,...l}=this.props,d=(null==r?void 0:r.cancel)||"Cancel";return a.createElement("div",{"data-testid":"cancel-integration-addition-button",className:u()("integrations-add-actions__button--container",{"align-left":n})},a.createElement(o.Button,p({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{s?s(i,"cancel"):(c.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",d," "))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Tooltips.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),g=n("./integrations/constants/integrationsConstants.ts"),m=n("./collaboration/utils/util.js"),h=n("./version-control/common/ForkLabel.js"),f=n("./node_modules/lodash/lodash.js");class b extends s.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:n,workspaceId:b}=this.props;let v,I;return e.isForked&&(v={id:e.id,forkLabel:e.forkLabel,model:e.type},I={id:e.baseCollectionUid,model:e.type}),s.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!f.isEmpty(t)&&e.disabled&&s.createElement(a.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},s.createElement(a.TooltipBody,null,t)),s.createElement(i.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let n=e.disabled?"content-color-tertiary":"",a={[g.entityTypes.COLLECTIONS]:s.createElement(o.default,{color:n}),[g.entityTypes.COLLECTIONS_FORKED]:s.createElement(l.default,{color:n}),[g.entityTypes.APIS]:s.createElement(c.default,{color:n}),[g.entityTypes.MONITORS]:s.createElement(d.default,{color:n}),[g.entityTypes.API_VERSIONS]:s.createElement(u.default,{color:n})};return t===g.entityTypes.WORKSPACES?s.createElement(p.default,{name:m.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===g.entityTypes.COLLECTIONS&&e&&e.forkLabel?a[g.entityTypes.COLLECTIONS_FORKED]:a[t]})(e,n),s.createElement(i.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},s.createElement(r.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&s.createElement(h.default,{workspaceId:b,forkedEntity:v,baseEntity:I,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("./js/external-navigation/ExternalNavigationService.js");function r(e){const{extUrl:t}=e;return s.createElement("span",{onClick:()=>(0,i.openExternalLink)(t,"_blank")},s.createElement(a.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/TagCard.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("./js/components/base/Icons/CloseIcon.js"),o=n("./node_modules/classnames/index.js"),l=n.n(o);const c=e=>{return s.createElement("div",{onClick:e.onClick,className:(t=e.type,n=e.isSelected,l()({"integrations-tags-segment-editable__tag":!0,[`integrations-tags-segment-editable__tag-${t}`]:!0,"is-selected":n}))},e.content,s.createElement(r.default,{className:"tag-remove-btn",onClick:e.onClose,size:"xs"}));var t,n};c.propTypes={content:i().element,onClose:i().func,onClick:i().func,value:i().string,name:i().string,type:i().oneOf(["regular","error"])},c.defaultProps={onClose:()=>{},onClick:()=>{},type:"regular",name:"tag",value:""},t.default=c},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AddIntegrationActions:function(){return g.default},AuthUserSegment:function(){return h.default},CustomLink:function(){return m.default},EntitySelector:function(){return u.default},EntitySelectorV2:function(){return p.default},FieldSegment:function(){return s.default},NicknameFieldSegment:function(){return a.default},NicknameFieldSegmentV2:function(){return i.default},SelectSegment:function(){return o.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return r.default},SensitiveFieldSegmentV2:function(){return f.default},WorkspaceSelector:function(){return c.default},WorkspaceSelectorV2:function(){return d.default}});var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/default/DefaultAddIntegrationButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./node_modules/classnames/index.js"),o=n.n(r),l=n("./js/components/base/Buttons.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("./js/services/NavigationService.js"),u=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),g=n("./integrations/navigation/constants.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),h=n("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f.apply(this,arguments)}let b=(0,a.observer)(s=class extends i.Component{constructor(e){super(e),this.state={loading:!1},this.store=(0,u.resolveStoreInstance)(p.default)}render(){const{classId:e,disabled:t,inputs:n,name:s,serviceId:a,...r}=this.props;return i.createElement("div",{className:o()("integrations-add-actions__button--container")},i.createElement(l.Button,f({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:t||this.state.loading,tooltip:t?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.setState({loading:!0},(()=>{if(!this.props.handleAddIntegration)return m.default.createIntegrationInstance(e,s,n).then((t=>{if(200===t.status&&h.get(t.body,"data.id"))if(pm.toasts.success("Added a new integration"),c.default.addEventV2({category:"integrations",action:e+"_created_integration",label:"team_integrations_create_form_default",value:1}),h.isEmpty(this.props.redirect))d.default.transitionTo(g.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:e});else{const{identifier:e,routeParams:n,queryParams:s,onCreate:a}=this.props.redirect;h.isFunction(a)?a(h.get(t,["body","data"])):d.default.transitionTo(e,n,s)}else pm.toasts.error("Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",t);return this.store.updateIsAdding(!1),this.setState({loading:!1})})).catch((e=>(pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.store.updateIsAdding(!1),this.setState({loading:!1}))));this.props.handleAddIntegration()}))}},r)," Add Integration"))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/default/DefaultIntegrationInstanceCreateComponent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/IntegrationFormInput.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/default/DefaultAddIntegrationButton.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),u=n("./js/modules/services/APIService.js"),p=n("./node_modules/lodash/lodash.js");function g(e,t){return p.map(p.get(e,"classData.inputs",[]),(e=>({...e,value:t.inputs[e.key]||null,error:t.inputErrors[e.key]||null})))}let m=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={nickname:null,inputs:{},inputErrors:{},allInputsList:g(e,{inputs:{},inputErrors:{}}),hasInvalidInput:!1},this.performValidation=this.performValidation.bind(this),this.updateAllInputsList=this.updateAllInputsList.bind(this),this.foundInvalidInput=this.foundInvalidInput.bind(this)}componentDidMount(){this.updateAllInputsList()}updateAllInputsList(){this.setState({allInputsList:g(this.props,this.state)})}getInputError(e,t){const n=p.isNil(t)||(p.isObject(t)||p.isString(t))&&p.isEmpty(t);return e.mandatory&&n&&"This field is mandatory"}performValidation(e,t=(()=>{})){d.default.getValidationError(e,this.state.inputs[e.key],this.state.allInputsList).then((n=>n?this.setState((t=>({inputErrors:{...t.inputErrors,[e.key]:n}})),t):t())).catch((n=>(pm.logger.error("Error occurred while performing validation",e.validator,n),t())))}foundInvalidInput(){this.state.hasInvalidInput||this.setState({hasInvalidInput:!0},(()=>{"browser"!==window.SDK_PLATFORM&&(0,u.openAuthenticatedRoute)(`${pm.artemisUrl}/integrations/service/${this.props.serviceId}`)}))}render(){const e=p.get(this.props,"classData.inputs",[]);return a.createElement("div",{className:"integrations-add-card__form"},a.createElement(r.NicknameFieldSegment,{id:"add-nickname",value:this.state.nickname||"",error:""===this.state.nickname?"Please enter a nickname for your integration":"",onBlur:()=>{this.setState({nickname:p.isFunction(this.state.nickname.trim)?this.state.nickname.trim():this.state.nickname})},onChange:e=>{this.setState({nickname:e})}}),e.map(((e,t)=>{if(e.meta)return a.createElement(o.default,{error:p.get(this.state.inputErrors,e.key,!1),input:e,key:t,currentValue:p.get(this.state,["inputs",e.key]),onUserInput:(t,n=!1)=>{this.setState((n=>({inputs:{...n.inputs,[e.key]:t},inputErrors:{...n.inputErrors,[e.key]:this.getInputError(e,t)}})),(()=>{n&&this.performValidation(e,this.updateAllInputsList)}))},allInputs:this.state.allInputsList,onBlur:()=>{this.performValidation(e,this.updateAllInputsList)},onInvalidInput:this.foundInvalidInput,preferredEntities:this.props.preferredEntities})})),a.createElement("hr",{className:"integration-add-actions-separator"}),a.createElement(c.default,{classId:this.props.classId,disabled:p.some(this.state.inputErrors,Boolean)||""===this.state.nickname,inputs:this.state.inputs,name:this.state.nickname,serviceId:this.props.serviceId}),a.createElement(l.default,null))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js":function(e,t,n){"use strict";n.r(t),t.default={isSecureUrl:function(e){return/^https:\/\/[^.]+\..+$/i.test(e)},isBaseUrl:function(e){return e&&"/"!==e.charAt(e.length-1)},isValidUrl:function(e){return/^https{0,1}:\/\/[^.]+\..+$/i.test(e)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/AWSGatewayObservability.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AWSGatewayObservabilityDefault:function(){return y},ApiGatewayIam:function(){return _},default:function(){return E}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./integrations/api-observability/services/index.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),h=n("./integrations/api-observability/constants.ts"),f=n("./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),v=n("./integrations/api-observability/services/ApiGatewayService.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S.apply(this,arguments)}let y=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",auth_type:"",aws_api_type:"",consentProvided:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:"",nickname:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],errorGateway:!1,loadingGateway:!1,errorNickname:"",integration_name:"",availableApiGatewayTypes:h.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:h.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:h.AVAILABLE_AUTH_TYPES,selectedAuthType:h.AVAILABLE_AUTH_TYPES[0],selectedApi:"",selectedApiVersion:""},this.store=(0,c.resolveStoreInstance)(d.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.handleAwsAccessKeyInput=this.handleAwsAccessKeyInput.bind(this),this.handleAwsKeyIdInput=this.handleAwsKeyIdInput.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAuthTypeChange=this.handleAuthTypeChange.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.getInitialState=this.getInitialState.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:""}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){this.setState({aws_api_type:e.value,selectedAPIGatewayType:e,aws_api_gateway_name:"",aws_api_gateway_id:""},(()=>{this.fetchApiGateways()}))}handleAwsKeyIdInput(e){this.setState({selectedAPIGateway:"",aws_key_id:e,errorAwsKeyId:r().isEmpty(e.trim())?"Please enter an Access Key ID":""},(()=>{this.fetchApiGateways()}))}handleAwsAccessKeyInput(e){this.setState({selectedAPIGateway:"",aws_access_key:e,errorAwsAccessKey:r().isEmpty(e.trim())?"Please enter a Secret Access Key":""},(()=>{this.fetchApiGateways()}))}handleAwsRegionInput(e){this.setState({selectedAPIGateway:"",aws_region:e,errorAwsRegion:r().isEmpty(e.trim())?"Please enter the AWS region":""},(()=>{this.fetchApiGateways()}))}handleAuthTypeChange(e){this.setState({selectedAPIGateway:{},selectedAuthType:e,auth_type:e.value},(()=>{e.value!==h.AWS_KEYS||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_access_key)||this.fetchApiGateways()}))}handleNameChange(e){this.setState({integration_name:e,errorNickname:r().isEmpty(e.trim())?"Please enter the Integration name":e.trim().length>255?"Name field can't have more than 255 characters":""})}fetchApiGateways(){let{aws_key_id:e,aws_access_key:t,aws_region:n,auth_type:s,aws_api_type:a,aws_api_gateway_id:i}=this.state,{rule:o}=this.props;r().isEmpty(e)||r().isEmpty(t)||r().isEmpty(n)||(this.setState({verifying:!0,availableApiGateways:[],aws_api_gateway_id:"",errorGateway:!1}),p.default[o].fetchApiGateways({aws_key_id:e,aws_access_key:t,aws_region:n,auth_type:s,aws_api_type:a,rule:o,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),n=r().find(t,(e=>e.id===i||e.ApiId===i));this.setState({verifying:!1,availableApiGateways:t},(()=>{this.onTargetSelect(n)}))})).catch((e=>{this.setState({verifying:!1,errorGateway:!0}),pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways, please try again.")),pm.logger.error("Something went wrong",e)})))}componentDidMount(){const{variables:e}=this.props;this.setState(this.getInitialState(),(()=>{e.auth_type===h.AWS_KEYS&&this.fetchApiGateways()})),b.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({selectedApi:{id:r().get(e,"id"),name:r().get(e,"name")}})})).catch((e=>{pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Error occurred while fetching APIs",e)})),b.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({selectedApiVersion:{id:r().get(e,"versionId"),name:r().get(e,"name")}})})).catch((e=>{pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Error occurred while fetching API versions",e)}))}getInitialState(){const{variables:e,nickname:t}=this.props;return{integration_name:t,auth_type:e.auth_type,aws_api_type:e.aws_api_type,apiVersionId:e.executor,postman_api_id:e.postman_api_id,aws_key_id:e.aws_key_id,aws_access_key:e.aws_access_key,aws_region:e.aws_region,aws_api_gateway_id:e.aws_api_gateway_id,selectedAuthType:e.auth_type===h.AWS_IAM_ROLE?{label:"IAM",value:h.AWS_IAM_ROLE}:{label:"Access Key",value:h.AWS_KEYS},selectedAPIGatewayType:"http"===e.aws_api_type?{label:"HTTP",value:"http"}:{label:"REST",value:"rest"}}}render(){let{rule:e,apiId:t,apiVersionId:n,nickname:s,integrationId:a}=this.props,{aws_key_id:i,aws_access_key:l,aws_region:c,verifying:d,errorAwsKeyId:p,auth_type:g,aws_api_type:f,errorAwsAccessKey:b,errorAwsRegion:v,selectedAPIGateway:y,aws_api_gateway_id:E,errorGateway:A,availableApiGateways:w,availableApiGatewayTypes:C,selectedAPIGatewayType:k,selectedAuthType:j,availableAuthTypes:P,integration_name:T,postman_api_id:N,errorNickname:D,selectedApi:R,selectedApiVersion:O}=this.state,x={rule:e,name:T,entity:"apiversion",executor:n,api_id:t,variables:{auth_type:g,aws_api_type:f,postman_api_id:N,aws_key_id:i,aws_access_key:l,aws_region:c,aws_api_gateway_id:E,role_arn:"",external_id:""}},M=T.length<256;return o.createElement("div",null,o.createElement(u.FieldSegment,{mandatory:!0,id:"integration-name",description:"Give a nickname to your integration.",title:"Nickname",value:T,error:D,onBlur:()=>{this.handleNameChange(T.trim())},onChange:e=>{this.handleNameChange(e)}}),o.createElement(u.SelectSegment,{disabled:!0,id:"aws-gateway-api",title:"Selected API",description:"The selected API is connected with this integration",selectedTarget:R,filterItems:[R],initialLabel:"Loading apis..."}),o.createElement(u.SelectSegment,{disabled:!0,id:"aws-gateway-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",selectedTarget:O,filterItems:[O],initialLabel:"Loading API versions..."}),o.createElement(u.SelectSegmentV2,{title:"AWS Authentication Method",placeholder:"Select AWS Authentication Type",options:P,value:j,onTargetSelect:this.handleAuthTypeChange}),g===h.AWS_IAM_ROLE?o.createElement(_,S({authType:g,integration_name:T},this.props)):o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:C,value:k,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(u.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",placeholder:"Enter the AWS access key id",value:i,error:p,onBlur:()=>{this.handleAwsKeyIdInput(i)},onChange:e=>{this.setState({aws_key_id:e,errorAwsKeyId:""})}}),o.createElement(u.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",placeholder:"Enter the AWS access key",value:l,error:b,onBlur:()=>{this.handleAwsAccessKeyInput(l)},onChange:e=>{this.setState({aws_access_key:e,errorAwsAccessKey:""})}}),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:c,error:v,onBlur:()=>{this.handleAwsRegionInput(c)},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement(u.SelectSegmentV2,{title:"AWS Gateway",label:"Select AWS Gateway",options:w,value:y,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:A?"Unable to load API Gateways":"",loading:d,handleRetry:this.fetchApiGateways}),o.createElement(m.default,{disabled:!l||!i||!c||d||!w||r().isEmpty(E)||r().isEmpty(T)||!M||!(0,I.isFormUpdated)(this.getInitialState(),this.state),integrationId:a,payload:x,rule:e,service:e})))}})||s,_=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={aws_account_id:h.AWS_ACCOUNT_ID,external_id:"",role_arn:"",aws_region:"",consentProvided:!1,verifying:!1,verification:"",errorAwsRegion:"",aws_api_type:"",errorRoleArn:"",showInfoBanner:!0,availableApiGatewayTypes:h.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:h.AVAILABLE_API_GATEWAY_TYPES[0]},this.store=(0,c.resolveStoreInstance)(d.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.handleRoleArnInput=this.handleRoleArnInput.bind(this),this.setExternalId=this.setExternalId.bind(this),this.getInitialState=this.getInitialState.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:null,name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:""}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){this.setState({aws_api_type:e.value,selectedAPIGatewayType:e,aws_api_gateway_name:"",aws_api_gateway_id:""},(()=>{this.fetchApiGateways()}))}fetchApiGateways(){let{aws_region:e,aws_api_type:t,role_arn:n,external_id:s,aws_api_gateway_id:a}=this.state,{rule:i,authType:o}=this.props;r().isEmpty(this.state.role_arn)||r().isEmpty(this.state.aws_region)||(this.setState({verifying:!0,availableApiGateways:[],aws_api_gateway_id:"",errorGateway:!1}),p.default[i].fetchApiGateways({role_arn:n,external_id:s,aws_region:e,auth_type:o,aws_api_type:t,rule:i,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),n=r().find(t,(e=>e.id===a||e.ApiId===a));this.setState({verifying:!1,availableApiGateways:t},(()=>{this.onTargetSelect(n)}))})).catch((e=>{this.setState({verifying:!1,errorGateway:!0}),pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways, please try again.")),pm.logger.error("Something went wrong",e)})))}handleRoleArnInput(e){this.setState({selectedAPIGateway:"",role_arn:e,errorRoleArn:r().isEmpty(e)?"Please enter the role ARN":""},(()=>{this.fetchApiGateways()}))}handleAwsRegionInput(e){this.setState({selectedAPIGateway:"",aws_region:e.trim(),errorAwsRegion:r().isEmpty(e.trim())?"Please enter a AWS region":""},(()=>{this.fetchApiGateways()}))}setExternalId(){let e={rule:this.props.rule,type:"fetchExternalId"};v.default.fetchExternalId(e).then((e=>{this.setState({external_id:e})})).catch((e=>{pm.toasts.error("Something went wrong, please try again."),pm.logger.error("Something went wrong while fetching External ID",e)}))}componentDidMount(){let{variables:e,authType:t}=this.props;this.setState(this.getInitialState(),(()=>{(e.auth_type===h.AWS_IAM_ROLE||t===h.AWS_IAM_ROLE&&!r().isEmpty(this.state.role_arn))&&this.fetchApiGateways(),this.setExternalId()}))}getInitialState(){const{variables:e,authType:t}=this.props;return{auth_type:e.auth_type,aws_api_type:e.aws_api_type,apiVersionId:e.executor,postman_api_id:e.postman_api_id,role_arn:e.role_arn,external_id:e.external_id,aws_region:e.aws_region,aws_api_gateway_id:e.aws_api_gateway_id,selectedAuthType:e.auth_type===h.AWS_IAM_ROLE?{label:"IAM",value:h.AWS_IAM_ROLE}:{label:"Access Key",value:h.AWS_KEYS},selectedAPIGatewayType:"http"===e.aws_api_type?{label:"HTTP",value:"http"}:{label:"REST",value:"rest"}}}render(){let{rule:e,apiId:t,apiVersionId:n,authType:s,integration_name:a,integrationId:i}=this.props,{role_arn:l,aws_region:c,verifying:d,errorAwsRegion:p,errorRoleArn:h,external_id:b,aws_api_type:v,aws_api_gateway_id:S,availableApiGateways:y,selectedAPIGateway:_,errorGateway:E,availableApiGatewayTypes:A,selectedAPIGatewayType:w}=this.state,C={rule:e,name:a,entity:"apiversion",executor:n,api_id:t,variables:{auth_type:s,aws_api_type:v,role_arn:l,external_id:b,postman_api_id:t,aws_region:c,aws_api_gateway_id:S,aws_key_id:"",aws_access_key:""}};return o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:A,value:w,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(f.default,{title:"AWS account ID",value:this.state.aws_account_id,description:"This assigns the IAM role to Postman."}),o.createElement(f.default,{title:"External ID",value:this.state.external_id,description:"This adds an extra level of security against malicious attacks."},o.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-confused-duty-problem"},"Learn more")),o.createElement(u.FieldSegment,{mandatory:!0,id:"role-arn",placeholder:"arn:aws:iam::79840258006:role/PostmanIntegration",title:"Role ARN",description:"Provided by AWS once the IAM role is created. It allows Postman to assume the IAM role.",value:l,error:h,onBlur:()=>{this.handleRoleArnInput(l)},onChange:e=>{this.setState({role_arn:e,errorRoleArn:""})}}),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:c,error:p,onBlur:()=>{this.handleAwsRegionInput(c)},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement(u.SelectSegmentV2,{title:"AWS Gateway",label:"Select AWS Gateway",options:y,value:_,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:E?"Unable to load API Gateways":"",loading:d,handleRetry:this.fetchApiGateways}),o.createElement(m.default,{disabled:!l||!c||d||!y||r().isEmpty(S)||r().isEmpty(a)||!(0,I.isFormUpdated)(this.getInitialState(),this.state),integrationId:i,payload:C,rule:e,service:e}))}})||a;function E(e){let t=e.controller.integrationData;const n=t.rule,s={apiId:t.variables.postman_api_id,apiVersionId:t.executor,integrationId:t.id,nickname:t.name,rule:t.rule,variables:t.variables};if("api_gateway_aws"===n)return o.createElement(y,s)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApiGateway.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts");let p=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.scrollToBottom=()=>{this.customApiGatewayInput.scrollIntoView({behavior:"smooth"})},this.state={name:"",apiGateways:[],configuredOn:{},variables:{},isCustomApiGatewayMandatory:!1,selectedApi:{},selectedApiVersion:{},customApiGateway:"",showApiGatewayInputField:!1,apiName:"",selectedAPIGateway:{},showCustomLabel:!0},this.onTargetSelect=this.onTargetSelect.bind(this),this.handleCustomApiGatewayInput=this.handleCustomApiGatewayInput.bind(this)}componentDidMount(){const{name:e,executor:t,variables:n,serviceId:s,rule:a,id:r}=this.props.controller.integrationData;this.setState({name:e,serviceId:s,executor:t,variables:n,ruleId:a,integrationId:r,configuredOn:n.postman_api_version_id,selectedAPIGateway:{id:n.aws_api_gateway_id,name:n.aws_api_gateway_name},errorNickname:""}),u.default.fetchActionDetails(r,{type:"fetchAWSGatewayAPIs"}).then((e=>{let t=e.body.data.map((e=>({id:e.ApiId,name:e.Name})));this.setState({apiGateways:t})})).catch((e=>{pm.toasts.error("Something went wrong while fetching API Gateways, please try again"),pm.logger.error("Error occurred while fetching API Gateways",e)})),l.default.fetchAPIMeta(n.postman_api_id).then((e=>{this.setState({selectedApi:{id:i().get(e,"id"),name:i().get(e,"name")}})})).catch((e=>{pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Error occurred while fetching APIs",e)})),l.default.fetchAPIVersionMeta(n.postman_api_id,n.postman_api_version_id).then((e=>{this.setState({selectedApiVersion:{id:i().get(e,"versionId"),name:i().get(e,"name")}})})).catch((e=>{pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Error occurred while fetching API versions",e)}))}onTargetSelect(e){i().isEmpty(e)?this.setState({selectedAPIGateway:{},showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,showApiGatewayInputField:!1,showCustomLabel:!0})}handleCustomApiGatewayInput(e){this.setState({customApiGateway:e,selectedAPIGateway:{},isCustomApiGatewayMandatory:!0}),e||this.setState({isCustomApiGatewayMandatory:!1})}render(){const{name:e,showCustomLabel:t,variables:n,apiGateways:s,isCustomApiGatewayMandatory:a,customApiGateway:o,errorNickname:l,showApiGatewayInputField:u,selectedAPIGateway:p,integrationId:g,ruleId:m,serviceId:h,selectedApi:f,selectedApiVersion:b}=this.state,v={name:e,id:g,variables:{name:f.name,postman_api_id:f.id,postman_api_version_id:b.id,aws_region:n.aws_region,...a?{aws_api_gateway_name:o}:{aws_api_gateway_id:p.id,aws_api_gateway_name:p.name},...n.aws_key_id?{aws_key_id:n.aws_key_id}:{},...n.aws_access_key?{aws_access_key:n.aws_access_key}:{}}};return r.createElement("div",null,r.createElement(c.NicknameFieldSegment,{id:"aws-api-gateway-nickname",value:e,error:l,onBlur:()=>{this.setState({name:e.trim(),errorNickname:i().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({name:e,errorNickname:""})}}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",value:n.aws_key_id||"",onChange:e=>{this.setState({variables:{...n,aws_key_id:e.trim()}})}}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",value:n.aws_access_key||"",onChange:e=>{this.setState({variables:{...n,aws_access_key:e.trim()}})}}),r.createElement(c.FieldSegment,{id:"aws-region",placeholder:"us-east-1",title:"AWS Region",value:n.aws_region||"",error:i().isEmpty(n.aws_region)?"Please enter AWS region":"",onChange:e=>{this.setState({variables:{...n,aws_region:e.trim()}})}}),r.createElement(c.SelectSegment,{disabled:!0,id:"aws-api",title:"Select API",description:"The selected API will be deployed to aws gateway",selectedTarget:f,filterItems:[f],initialLabel:"Loading apis..."}),r.createElement(c.SelectSegment,{disabled:!0,id:"aws-api-version",title:"Select API version",description:"The selected API version will be deployed to aws gateway",selectedTarget:b,filterItems:[b],initialLabel:"Loading API versions..."}),r.createElement(c.SelectSegment,{title:"Select API Gateway to deploy to",description:"The API will be deployed to this gateway",disabled:0===s.length||a,placeholder:"Type to filter gateyways",filterItems:s,initialLabel:"Select API Gateway",selectedTarget:p,onTargetSelect:this.onTargetSelect,showCustomLabel:t,customLabel:r.createElement("div",{className:"custom-owner-input-field",ref:e=>{this.customApiGatewayInput=e},onClick:()=>{this.setState({showApiGatewayInputField:!0,showCustomLabel:!1}),this.scrollToBottom()}},"Don't see your Gateway? ",r.createElement("span",{className:"pm-link"},"Specify it manually"))}),u&&r.createElement(c.FieldSegment,{title:"Select API Gateway to deploy to",description:"The API will be deployed to this gateway",id:"bitbucket-custom-repository",optional:!a,value:o,onChange:e=>{this.handleCustomApiGatewayInput(e)}}),r.createElement(d.default,{disabled:!(e&&n.aws_region&&v.variables.postman_api_id&&v.variables.postman_api_version_id&&v.variables.aws_api_gateway_name),integrationId:g,payload:v,rule:m,service:h}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApiMatic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{checkForValidInput:function(){return m},default:function(){return h}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const g=[{label:"APIMATIC Format",value:"apimatic"},{label:"API BluePrint Format",value:"apiblueprint"},{label:"Postman Collection 2.0",value:"postman20"},{label:"RESTful API Modeling Language (RAML 0.8)",value:"raml"},{label:"RESTful API Modeling Language (RAML 1.0)",value:"raml10"},{label:"Swagger v1.2 (JSON)",value:"swagger10"},{label:"Swagger v2.0 (JSON)",value:"swagger20"},{label:"Swagger v2.0 (YAML)",value:"swaggeryaml"},{label:"WADL (W3C - 2009)",value:"wadl2009"}];function m(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}let h=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,repositories:[],branches:[],selectedRepository:null,selectedBranch:null,selectedFormat:null,integrationId:"",loadingCollectionMeta:!1,errorCollectionMeta:"",loadingRepositories:!1,errorRepositories:"",loadingBranches:!1,errorBranches:""},this.toggle=this.toggle.bind(this),this.onFormatSelect=this.onFormatSelect.bind(this),this.onRepositorySelect=this.onRepositorySelect.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.fetchBranches=this.fetchBranches.bind(this),this.onBranchSelect=this.onBranchSelect.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e,id:t,variables:n}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e),this.fetchRepositories(t,n),this.fetchBranches(t,n)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:r}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:r,ruleId:s,selectedBranch:{label:r.branch,value:r.branch},owner:r.owner,repository:r.repository,selectedFormat:i().find(g,{value:r.format}),integrationId:n}}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),l.default.fetchCollectionMeta(e).then((t=>{t.name&&t.id?this.setState({configuredOn:{isForked:i().get(t,"isForked"),forkLabel:i().get(t,"forkLabel"),baseCollectionUid:i().get(t,"baseCollectionUid"),type:i().get(t,"type"),value:e,label:t.name},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}fetchRepositories(e,t){this.setState({loadingRepositories:!0,errorRepositories:""}),u.default.fetchActionDetails(e,{type:"listRepositories"}).then((e=>{if(e.status&&200===e.status&&i().get(e,"body.data")){let n=e.body.data,s=!1,a=n.map((e=>e.full_name&&e.id&&e.owner&&e.name?{label:e.full_name,owner:e.owner.login,name:e.name,value:e.id}:(s=!0,{})));s?this.setState({errorRepositories:"Unable to load repositories",loadingRepositories:!1}):this.setState({repositories:a,selectedRepository:i().find(a,{name:t.repository}),loadingRepositories:!1})}else e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching GitHub repositories, please try again"),pm.logger.error("Error occurred while fetching GitHub repositories"),this.setState({loadingRepositories:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching GitHub repositories, please try again"),pm.logger.error("Error occurred while fetching GitHub repositories",e),this.setState({loadingRepositories:!1})}))}fetchBranches(e,t){this.setState({loadingBranches:!0,errorBranches:!1}),u.default.fetchActionDetails(e,{type:"listBranches",owner:t.owner,repository:t.repository}).then((e=>{if(e.status&&200===e.status){let n=!1,s=i().map(i().get(e,"body.data"),(e=>e.name?{label:e.name,value:e.name}:(n=!1,{})));n?this.setState({errorBranches:"Unable to load branches",loadingBranches:!1}):this.setState({branches:s,selectedBranch:i().find(s,{label:t.branch}),loadingBranches:!1})}else e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches"}):pm.toasts.error("Something went wrong while fetching branches, please try again"),pm.logger.error("Error occurred while fetching branches"),this.setState({loadingBranches:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches"}):pm.toasts.error("Something went wrong while fetching branches, please try again"),pm.logger.error("Error occurred while fetching branches",e),this.setState({loadingBranches:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onFormatSelect(e){i().isEmpty(e)?this.setState({selectedFormat:null}):this.setState({selectedFormat:e})}onRepositorySelect(e){const{integrationId:t}=this.state;if(i().isEmpty(e))this.setState({selectedRepository:null,owner:"",repository:"",selectedBranch:null,branches:[]});else{let n=e.label.includes("/")&&e.label.split("/")[0],s=e.label.includes("/")&&e.label.split("/")[1],a=s&&s.replace(/ /g,"-"),i=n&&n.replace(/ /g,"-");this.setState({selectedRepository:e,owner:i,repository:a,selectedBranch:null,branches:[]}),this.fetchBranches(t,{owner:i,repository:a})}}onBranchSelect(e){i().isEmpty(e)?this.setState({selectedBranch:null}):this.setState({selectedBranch:e})}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:o,serviceId:l,repositories:u,selectedRepository:h,selectedFormat:f,selectedBranch:b,branches:v,owner:I,repository:S,errorBranches:y,errorCollectionMeta:_,errorRepositories:E,loadingBranches:A,loadingCollectionMeta:w,loadingRepositories:C}=this.state;let k={name:e,executor:n,variables:{owner:I,repository:S,directory:t.directory,name:t.name,branch:b&&b.value,format:f&&f.value,...t.apimatic_token?{apimatic_token:t.apimatic_token}:{}}};return r.createElement("div",null,r.createElement(c.NicknameFieldSegment,{id:"apimatic-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,description:"This API Key will be used for APIMatic transformations",id:"apimatic-token",title:"APIMatic API Key",value:t.apimatic_token||"",onChange:e=>{this.setState({variables:{...t,apimatic_token:e}})}}),r.createElement(c.SelectSegmentV2,{disabled:!0,title:"Choose Collection",description:"The selected collection will be backed up on GitHub",value:s,options:s?[s]:[],error:_,loading:w,handleRetry:()=>this.fetchCollectionMeta(n)}),r.createElement(c.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose Repository",description:"The collection will be backed up to this repository",disabled:C||!i().isEmpty(E),options:u,value:h,error:E,loading:C,emptyStateError:!C&&!h&&u.length>0&&"Please select a repository",noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {owner}/{repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:m,handleRetry:()=>this.fetchRepositories(a,t),onTargetSelect:this.onRepositorySelect}),r.createElement(c.SelectSegmentV2,{title:"Enter Branch",description:"The collection will be pushed to this branch in the repository",disabled:A||!i().isEmpty(y),options:v,value:b&&b,error:y,noResultsForSearch:"We have limited access to your branches and couldn't find the one you're looking for. Enter it manually.",noOptionsForDropdown:"No branches found",isCreatable:!0,isClearable:!0,loading:A,emptyStateError:!A&&!b&&"Please select a branch",handleRetry:()=>this.fetchBranches(a,{...k.variables}),onTargetSelect:this.onBranchSelect}),r.createElement(c.FieldSegment,{mandatory:!0,description:"The collection will be pushed to this directory in the repository",id:"apimatic-directory",title:"Enter Directory",error:i().isEmpty(t.directory)?"Please enter a directory name":"",value:t.directory,onBlur:()=>{this.setState({variables:{...t,directory:t.directory.trim()}})},onChange:e=>{this.setState({variables:{...t,directory:e}})}}),r.createElement(c.FieldSegment,{mandatory:!0,description:"This will be the name of the collection in the repository",id:"apimatic-name",title:"Enter filename",value:t.name,error:i().isEmpty(t.name)?"Please enter a filename":"",onBlur:()=>{this.setState({variables:{...t,name:t.name.trim()}})},onChange:e=>{this.setState({variables:{...t,name:e}})}}),r.createElement(c.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose format",description:"This will be the format in which the collection be saved",placeholder:"Type to filter format",options:g,value:f,emptyStateError:!f&&"Please select a format",noOptionsForDropdown:"No formats found",onTargetSelect:this.onFormatSelect}),r.createElement(d.default,{disabled:!(s&&e&&h&&f&&t.directory&&t.name&&b&&(0,p.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:k,rule:o,service:l}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApigeeAPIGateway.js":function(e,t,n){"use strict";n.r(t),n.d(t,{APIGatewayApigeeDefault:function(){return N},WorkspaceDetailsForm:function(){return D},default:function(){return R}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./integrations/api-observability/stores/APIObservabilityStore.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),S=n("./js/services/NavigationService.js"),y=n("./integrations/navigation/constants.js"),_=n("./js/modules/services/AnalyticsService.js"),E=n("./js/components/base/LoadingIndicator.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),w=n("./integrations/constants/integrationsConstants.ts"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),k=n("./integrations/api-observability/constants.ts"),j=n("./integrations/api-observability/components/base/CustomMultiSelect.js"),P=n("./integrations/api-observability/components/base/CustomDropdown.js"),T=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let N=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.setUploadedFile=e=>{let t=r().isObject(e)?e[0]:"";if(t){let e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=function(e){try{let t=JSON.parse(e.target.result),n=Object.keys(t);if(this.setState({isFileUploaded:!0,serviceAccountEmail:r().get(t,"client_email"),privateKey:r().get(t,"private_key")},(()=>this.resetFormValuesAndFetchOrganizations())),!n.includes("client_email","private_key")){let e=new Error;throw e.name="invalidFileContent",e}}catch(e){this.setState({isFileUploaded:!1}),"invalidFileContent"===e.name?(pm.toasts.error("Invalid file content. Please try selecting different file."),pm.logger.error("Something went wrong while parsing JSON file",e)):(pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Something went wrong while parsing JSON file",e))}}.bind(this)}else this.setState({isFileUploaded:!1,serviceAccountEmail:"",privateKey:""})},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e,errorServiceAccountEmail:!e},(()=>this.resetFormValuesAndFetchOrganizations()))},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n"),errorPrivateKey:!e},(()=>this.resetFormValuesAndFetchOrganizations()))},this.resetFormValuesAndFetchOrganizations=()=>{const{serviceAccountEmail:e,privateKey:t}=this.state;this.setState({selectedOrganization:[],selectedApiProxy:[],selectedEnvironments:[],fetchedOrganizations:[]}),e&&t&&this.fetchOrganizations(k.PRE_CONFIG)},this.state={fetchedOrganizations:[],selectedOrganization:null,fetchedApiProxies:[],selectedApiProxy:null,fetchedEnvironments:[],selectedEnvironments:null,integrationId:"",serviceAccountEmail:r().get(this.props,"variables.service_account_email"),privateKey:r().get(this.props,"variables.private_key"),originalState:{serviceAccountEmail:r().get(this.props,"variables.service_account_email"),privateKey:r().get(this.props,"variables.private_key")}},this.store=(0,c.resolveStoreInstance)(d.default),this.integrationsStore=(0,c.resolveStoreInstance)(u.default),this.handleSelectOrganization=this.handleSelectOrganization.bind(this),this.handleSelectApiProxy=this.handleSelectApiProxy.bind(this),this.handleSelectEnvironments=this.handleSelectEnvironments.bind(this),this.handleConnect=this.handleConnect.bind(this),this.navigateToIntegrationsListPage=this.navigateToIntegrationsListPage.bind(this),this.fetchOrganizations=r().debounce(this.fetchOrganizations.bind(this),1e3),this.fetchApiProxies=this.fetchApiProxies.bind(this),this.fetchEnvironments=this.fetchEnvironments.bind(this),this.updateIntegration=this.updateIntegration.bind(this),this.renderLoadingState=this.renderLoadingState.bind(this),this.getValidationState=this.getValidationState.bind(this),this.fetchConnectedApiMeta=this.fetchConnectedApiMeta.bind(this)}componentDidMount(){this.fetchConnectedApiMeta(),this.fetchOrganizations(k.POST_CONFIG),this.fetchApiProxies(k.POST_CONFIG),this.fetchEnvironments(k.POST_CONFIG)}fetchConnectedApiMeta(e){"apiVersion"!==e&&this.setState({isFetchingApiMeta:!0},(()=>{C.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({selectedApi:{value:r().get(e,"id"),label:r().get(e,"name")},isFetchingApiMeta:!1})})).catch((e=>{this.setState({isFetchingApiMeta:!1,errorApiMeta:!0}),pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Error occurred while fetching APIs",e)}))})),"api"!==e&&this.setState({isFetchingApiVersionMeta:!0},(()=>{C.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({selectedApiVersion:{value:r().get(e,"versionId"),label:r().get(e,"name")},isFetchingApiVersionMeta:!1})})).catch((e=>{this.setState({errorApiVersionMeta:!0,isFetchingApiVersionMeta:!1}),pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Error occurred while fetching API versions",e)}))}))}fetchOrganizations(e){let{serviceAccountEmail:t,privateKey:n,selectedOrganization:s}=this.state;this.setState({isFetchingOrganization:!0});let a={service_account_email:t,private_key:n},i=k.FETCH_ORGANIZATIONS,o=r().get(this.props,"variables.organization"),l=this.props.integrationId;e===k.PRE_CONFIG&&(a.classId=this.props.rule),I.default.fetchGatewayActionDetails(e,i,a,l).then((t=>{let n=r().get(t,"body.data.organizations",[]),a=r().map(n,(t=>{if(e===k.POST_CONFIG&&r().get(t,"organization")===o){s={label:o,value:o};const e={...this.state.originalState};r().set(e,"selectedOrganization",s),this.setState({selectedOrganization:s,originalState:e})}return{label:t.organization,value:t.organization}}));this.setState({fetchedOrganizations:a,isFetchingOrganization:!1,fetchErrorOrganizations:!1})})).catch((e=>{this.setState({fetchErrorOrganizations:!0,isFetchingOrganization:!1}),pm.toasts.error("Something went wrong while fetching Apigee organizations"),pm.logger.error("Something went wrong while fetching Apigee organizations",e)}))}fetchApiProxies(e){let{serviceAccountEmail:t,privateKey:n,selectedOrganization:s,selectedApiProxy:a}=this.state;this.setState({isFetchingApiProxies:!0});let i={service_account_email:t,private_key:n,organization:r().get(s,"value")},o=k.FETCH_API_PROXIES,l=r().get(this.props,"variables.api_proxy"),c=this.props.integrationId;e===k.PRE_CONFIG&&(i.classId=this.props.rule),I.default.fetchGatewayActionDetails(e,o,i,c).then((t=>{let n=r().get(t,"body.data.proxies",[]),s=r().map(n,(t=>{if(e===k.POST_CONFIG&&r().get(t,"name")===l){a={label:l,value:l};const e={...this.state.originalState};r().set(e,"selectedApiProxy",a),this.setState({selectedApiProxy:a,originalState:e})}return{label:t.name,value:t.name}}));this.setState({fetchedApiProxies:s,isFetchingApiProxies:!1,fetchErrorApiProxies:!1})})).catch((e=>{this.setState({fetchErrorApiProxies:!0,isFetchingApiProxies:!1}),pm.toasts.error("Something went wrong while Apigee API Proxies"),pm.logger.error("Something went wrong while fetching Apigee API Proxies",e)}))}fetchEnvironments(e){let{serviceAccountEmail:t,privateKey:n,selectedOrganization:s,selectedEnvironments:a}=this.state;this.setState({isFetchingEnvironments:!0});let i={service_account_email:t,private_key:n,organization:r().get(s,"value")},o=k.FETCH_ENVIRONMENTS,l=r().get(this.props,"variables.environments"),c=this.props.integrationId;a=a||[],e===k.PRE_CONFIG&&(i.classId=this.props.rule),I.default.fetchGatewayActionDetails(e,o,i,c).then((t=>{let n=r().map(r().get(t,"body.data",[]),(t=>{if(e===k.POST_CONFIG&&l.includes(t)){a.push({label:t,value:t});const e={...this.state.originalState};r().set(e,"selectedEnvironments",a),this.setState({selectedEnvironments:a,originalState:e})}return{label:t,value:t}}));this.setState({fetchedEnvironments:n,isFetchingEnvironments:!1,fetchErrorEnvironments:!1})})).catch((e=>{this.setState({fetchErrorEnvironments:!0,isFetchingEnvironments:!1}),pm.toasts.error("Something went wrong while fetching Apigee environments"),pm.logger.error("Something went wrong while fetching Apigee environments",e)}))}handleSelectOrganization(e){this.setState({selectedOrganization:e,errorOrganization:r().isEmpty(e),selectedApiProxy:[],fetchedApiProxies:[],selectedEnvironments:[],fetchedEnvironments:[]},(()=>{r().get(e,"value")&&(this.fetchApiProxies(k.PRE_CONFIG),this.fetchEnvironments(k.PRE_CONFIG))}))}handleSelectEnvironments(e){this.setState({selectedEnvironments:e,errorEnvironments:r().isEmpty(e)})}handleSelectApiProxy(e){this.setState({selectedApiProxy:e,errorApiProxy:r().isEmpty(e)})}handleConnect(){let{selectedOrganization:e,selectedApiProxy:t,selectedEnvironments:n,serviceAccountEmail:s,privateKey:a}=this.state,{rule:i,integrationId:o}=this.props,l={variables:{service_account_email:s,...a?{private_key:a}:{},organization:r().get(e,"value"),api_proxy:r().get(t,"value"),environments:r().isArray(n)?n.map((e=>r().get(e,"value"))):[]}};this.setState({isAddingIntegration:!0}),this.updateIntegration(l,i,o)}updateIntegration(e,t,n){I.default.updateIntegration(n,e).then((e=>{this.setState({isAddingIntegration:!1}),200===r().get(e,"status")&&r().get(e,"body.model_id")?(pm.toasts.success("Successfully updated integration"),_.default.addEventV2({category:"integrations",action:t+"_edited_integration",label:"team_integrations_edit_forms",value:1}),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.resetAddIntegrationDependencies(),this.navigateToIntegrationsListPage()):pm.toasts.error("Something went wrong while updating integration")})).catch((e=>{this.setState({isAddingIntegration:!1}),"integrationFoundError"===r().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while updating integration. Please try again."),pm.logger.error("Something went wrong while updating integration",e)}))}navigateToIntegrationsListPage(){let{service:e,rule:t,formType:n}=this.props;S.default.transitionTo(y.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:e,ruleId:t})}renderLoadingState(){return o.createElement(p.default,{justifyContent:"space-between"},o.createElement("div",null,"Loading..."),o.createElement(E.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(e){let{errorOrganization:t,fetchErrorOrganizations:n,errorApiProxy:s,fetchErrorApiProxies:a,errorEnvironments:i,fetchErrorEnvironments:r}=this.state;return"organization"===e?t||n?{status:"error",message:n?o.createElement("div",null,"Unable to load organizations.",o.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchOrganizations(k.PRE_CONFIG)}},"Retry")):"Please select an organization."}:{}:"apiProxy"===e?s||a?{status:"error",message:a?o.createElement("div",null,"Unable to load API Proxies.",o.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchApiProxies(k.PRE_CONFIG)}},"Retry")):"Please select an API Proxy."}:{}:i||r?{status:"error",message:r?o.createElement("div",null,"Unable to load environments.",o.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEnvironments(k.PRE_CONFIG)}},"Retry")):"Please select one or more environments."}:{}}render(){const{fetchedOrganizations:e,selectedOrganization:t,fetchedApiProxies:n,selectedApiProxy:s,fetchedEnvironments:a,selectedEnvironments:i,isAddingIntegration:l,isFetchingOrganization:c,isFetchingApiProxies:d,isFetchingEnvironments:u,isFetchingApiMeta:p,isFetchingApiVersionMeta:I,errorApiMeta:y,errorApiVersionMeta:_,serviceAccountEmail:E,errorServiceAccountEmail:A,privateKey:w,errorPrivateKey:C,isFileUploaded:N}=this.state,{rule:D,service:R}=this.props,O=r().isEmpty(t)||r().isEmpty(s)||r().isEmpty(i);return o.createElement("div",{className:"connect-apigee-gateway__container"},o.createElement("div",{className:"connect-apigee-gateway__form"},o.createElement("div",null,o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(P.default,{value:this.state.selectedApi,options:[this.state.selectedApi],label:"Selected API",placeholder:p?this.renderLoadingState():y?"No API found":"",className:p?"dropdown-icon-remove connect-apigee-gateway__form--entity-selector":"connect-apigee-gateway__form--entity-selector",emptyStateMessage:"No API found",isDisabled:!0,validationState:y&&{status:"error",message:o.createElement("div",null,"Unable to load API Meta.",o.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchConnectedApiMeta("api")}},"Retry"))}})),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(P.default,{value:this.state.selectedApiVersion,options:[this.state.selectedApiVersion],label:"Selected API Version",placeholder:I?this.renderLoadingState():_?"No API Version found":"",className:I?"dropdown-icon-remove connect-apigee-gateway__form--entity-selector":"connect-apigee-gateway__form--entity-selector",emptyStateMessage:"No API version found",isDisabled:!0,validationState:_&&{status:"error",message:o.createElement("div",null,"Unable to load API Version Meta.",o.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchConnectedApiMeta("apiVersion")}},"Retry"))}}))),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(g.default,{label:"Upload private key file (Optional)",helperText:o.createElement("div",null,o.createElement("div",null,"Upload private key file or manually enter the values below. "),o.createElement("div",null,"Only JSON file format is supported.")),id:"file-uploader",accept:".json",onChange:this.setUploadedFile,actionLabel:"Select File"})),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(m.default,{placeholder:"Enter service account email",helperText:"Service Account Email associated with Google Cloud Project",value:E,onChange:e=>this.handleServiceAccountEmail(e.target.value),label:o.createElement(h.default,{text:"Service Account Email"}),validationStatus:A?"error":"",validationMessage:"Please enter service account email",isDisabled:N})),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(f.default,{placeholder:"Enter private key",helperText:"Private key associated with the Service Account",value:w,onChange:e=>this.handlePrivateKey(e.target.value),label:o.createElement(h.default,{text:"Private Key"}),validationStatus:C?"error":"",validationMessage:"Please enter private key",isDisabled:N,isResizable:!1})),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(P.default,{onChange:this.handleSelectOrganization,options:e||[],value:t,label:"Organization",placeholder:c?this.renderLoadingState():"Select Organization",className:c?"dropdown-icon-remove":"",emptyStateMessage:"No organizations found",isDisabled:c,validationState:this.getValidationState("organization"),menuWidth:k.DROPDOWN_WIDTH})),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(P.default,{onChange:this.handleSelectApiProxy,options:n||[],value:s,label:"API Proxy",placeholder:d?this.renderLoadingState():"Select API Proxy",helperText:"Connection between Proxy and Postman API",className:d?"dropdown-icon-remove":"",isDisabled:!r().get(t,"value")||d,emptyStateMessage:"No API Proxies found",validationState:this.getValidationState("apiProxy"),menuWidth:k.DROPDOWN_WIDTH})),o.createElement("div",{className:"connect-apigee-gateway__form--component"},o.createElement(j.default,{onChange:this.handleSelectEnvironments,options:a,value:i,label:"Environments",placeholder:u?this.renderLoadingState():"Select one or more environments",helperText:"Environments configured on Apigee X over which APIs are deployed",isDisabled:!r().get(t,"value")||u,emptyStateMessage:"No environments found",validationState:this.getValidationState("environments")})),o.createElement("div",{className:"connect-apigee-gateway__form--buttons--update"},o.createElement(b.default,null,o.createElement(v.default,{type:"secondary",size:"small",onClick:()=>{S.default.back()},text:"Cancel",isDisabled:l}),o.createElement(v.default,{type:"primary",size:"small",onClick:()=>{this.handleConnect()},isDisabled:O||!(0,T.isFormUpdated)(this.state.originalState,this.state),text:"Update",isLoading:l})))))}})||s,D=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={},this.integrationsStore=(0,c.resolveStoreInstance)(u.default),this.renderWorkspaceSelectors=this.renderWorkspaceSelectors.bind(this),this.integrationsStore.resetAddIntegrationDependencies()}renderWorkspaceSelectors(){return o.createElement("div",null,o.createElement("div",null,o.createElement(A.WorkspaceSelector,{description:"Select the workspace your API is in"}),o.createElement(A.EntitySelector,{id:"api-schemas",entity:w.entityTypes.APIS,workspaceId:this.integrationsStore.selectedWorkspace&&this.integrationsStore.selectedWorkspace.value,title:"Select API",description:"Select the API you wish to connect",rule:this.props.rule,mode:w.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedWorkspace}),o.createElement(A.EntitySelector,{id:"api-schema-versions",entity:w.entityTypes.API_VERSIONS,apiId:this.integrationsStore.selectedEntity&&this.integrationsStore.selectedEntity.value,title:"Select API Version",description:"Select the API version you wish to connect",rule:this.props.rule,mode:w.INTEGRATION_FORM_MODE.ADD,disabled:!this.integrationsStore.selectedEntity}),o.createElement("div",{className:"connect-apigee-gateway__form--buttons"},o.createElement(b.default,null,o.createElement(v.default,{type:"primary",size:"small",onClick:()=>{this.setState({loadApigeeForm:!0})},isDisabled:!this.integrationsStore.selectedEntityVersion,text:"Proceed"}),o.createElement(v.default,{type:"secondary",size:"small",onClick:()=>{S.default.back()},text:"Cancel"})))))}render(){let e=r().get(this.props.controller,"integrationData");return e?o.createElement(N,{integrationId:r().get(e,"id"),variables:r().get(e,"variables"),rule:r().get(e,"rule"),service:r().get(e,"serviceId"),apiId:r().get(e,"variables.postman_api_id"),apiVersionId:r().get(e,"executor")}):o.createElement("div",null)}})||a;class R extends o.Component{constructor(e){super(e),this.integrationsStore=(0,c.resolveStoreInstance)(u.default)}render(){return"api_gateway_apigee"===r().get(this.props.controller,"integrationData.rule")?o.createElement(D,this.props):o.createElement("div",null)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApmDatadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./integrations/monitoring/services/index.js"),g=n("./integrations/monitoring/constants.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),f=n("../../node_modules/mobx/lib/mobx.module.js"),b=n("./node_modules/uuid/index.js"),v=n.n(b),I=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js"),_=n("./integrations/utils/CommonHelperMethods.ts"),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const A=(0,_.getErrorContextObject)("Datadog APM Integration");let w=(0,l.observer)(s=class extends r.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=async e=>{this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(g.DATADOG_APM_CLASS_ID);const{apiKey:t,appKey:n,rule:s,region:a,dashboardGuids:r}=this.state,o=i().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),l=i().get(o,"options.serviceActionId"),c=i().get(o,"id");this.setState({loadingDashboards:!0,errorDashboards:!1});const d={rule:s,type:"listDashboards",...t?{api_key:t}:{},...n?{app_key:n}:{},region:a};p.default[s].listDashboardsWithIntegrationId(d,e,l,c).then((e=>{let t=i().map(i().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${I.default.getDatadogHostname(a)}${e.url}`}))),n=i().filter(t,(e=>i().includes(i().map(r,"link"),e.url)));this.setState({errorDashboards:!1,availableDashboards:t,selectedDashboards:n,loadingDashboards:!1,errorApiKey:!1,errorAppKey:!1})})).catch((e=>{pm.logger.error("Browse Integrations page Edit Form ~ Error occurred while listing dashboards",e,{context:A}),this.setState({errorDashboards:!0,loadingDashboards:!1,errorApiKey:!0,errorAppKey:!0,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],environments:I.default.getEmptyEnvironmentsList()})}))},this.state={nickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,loadingDashboards:!1,errorDashboards:!1,errorNickname:"",dashboardGuids:[],selectedDashboards:[],availableDashboards:[],environments:I.default.getEmptyEnvironmentsList(),selectedApi:{},selectedApiVersion:{},region:"us1"},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.listDashboardsWithIntegrationId=i().debounce(this.listDashboardsWithIntegrationId.bind(this),500),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.client_category=g.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.getInitialData=this.getInitialData.bind(this)}componentDidMount(){let{variables:e,executor:t,id:n,name:s,rule:a}=this.props.controller.integrationData;this.setState({apiKey:e.api_key,appKey:e.app_key,errorApiKey:!1,errorAppKey:!1,region:"us"===e.region?"us1":"eu"===e.region?"eu1":e.region,apiId:e.postman_api_id,environments:i().map((0,f.toJS)(e.environments),(e=>({...e,id:v().v4()}))),dashboardGuids:(0,f.toJS)(e.dashboard_guids),apiVersionId:t,integrationId:n,nickname:s,rule:a,variables:e,loadingApi:!0,loadingApiVersion:!0},(()=>{this.listDashboardsWithIntegrationId(this.props.controller.integrationData.id)})),m.default.fetchAPIMeta(e.postman_api_id).then((e=>{this.setState({selectedApi:{value:i().get(e,"id"),label:i().get(e,"name")},loadingApi:!1})})).catch((e=>{this.setState({loadingApi:!1}),pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Browse Integrations page Edit Form ~ Error occurred while fetching API meta data",e,{context:A})})),m.default.fetchAPIVersionMeta(e.postman_api_id,t).then((e=>{this.setState({selectedApiVersion:{value:i().get(e,"versionId"),label:i().get(e,"name")},loadingApiVersion:!1})})).catch((e=>{this.setState({loadingApiVersion:!1}),pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Browse Integrations page Edit Form ~ Error occurred while fetching API versions",e,{context:A})}))}getInitialData(){const{variables:e,name:t,rule:n}=this.props.controller.integrationData;return{name:t,rule:n,variables:i().pick(e,["api_key","app_key","region","environments","dashboard_guids"])}}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],loadingDashboards:!1,errorDashboards:!1,environments:I.default.getEmptyEnvironmentsList()}}))}onDashboardSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e,dashboardGuids:t})}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1,dashboardGuids:[],environments:I.default.getEmptyEnvironmentsList()};i().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.state.integrationId)})):this.setState((n=>n.apiKey!==e.trim()?t:{apiKey:e.trim(),errorApiKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.state.integrationId)}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1,dashboardGuids:[],environments:I.default.getEmptyEnvironmentsList()};i().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.state.integrationId)})):this.setState((n=>n.appKey!==e.trim()?t:{appKey:e.trim(),errorAppKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.state.integrationId)}))}removeEnvironmentSelector(e){this.setState((t=>{let{environments:n}=t;return i()(n).splice(e,1).value(),{environments:n}}))}render(){const{apiKey:e,appKey:t,region:n,errorNickname:s,loadingDashboards:a,selectedDashboards:l,availableDashboards:c,environments:d,dashboardGuids:p,errorDashboards:m,selectedApi:f,selectedApiVersion:b,errorApiKey:_,errorAppKey:A,rule:w,apiId:C,apiVersionId:k,nickname:j,integrationId:P,loadingApi:T,loadingApiVersion:N}=this.state,D=I.default.areEnvironmentsValid(d);let R={name:j,rule:w,api_id:C,entity:"apiversion",executor:k,variables:{...e?{api_key:e}:{},...t?{app_key:t}:{},region:n,environments:i().map(d,(e=>({name:e.name,services:e.services}))),dashboard_guids:p}};return r.createElement("div",null,r.createElement(u.NicknameFieldSegment,{id:"datadog-nickname",value:j,error:s,onBlur:()=>{this.setState({nickname:j.trim(),errorNickname:i().isEmpty(j.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(u.SelectSegmentV2,{disabled:!0,id:"apm-datadog-api",title:"Selected API",description:"The selected API is connected with this integration",value:f,options:[f],loading:T}),r.createElement(u.SelectSegmentV2,{disabled:!0,id:"apm-datadog-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",value:b,options:[b],loading:N}),r.createElement(o.default,{direction:"column",gap:"spacing-l",padding:{paddingTop:"spacing-l",paddingBottom:"spacing-l"}},r.createElement(S.default,{mode:g.EDIT_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:_?"error":null,apiKeyValidationMessage:_?"Invalid API Key or APP key":null,handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value,errorAppKey:!1})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:A?"error":null,appKeyValidationMessage:A?"Invalid API Key or APP key":null,region:n,handleOnRegionChange:this.onRegionSelectorChange}),r.createElement(y.default,{mode:g.EDIT_MODE,apiKey:e,appKey:t,integrationId:P,selectedDashboards:l,availableDashboards:c,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:a,errorDashboards:m,environments:d,region:n,rule:w,onSelectEnvironmentServices:(e,t,n)=>{this.setState((s=>(s.environments[n]={id:i().get(s.environments[n],"id"),name:e,services:t},s)))},removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{this.setState((e=>(e.environments.push({name:"",services:[],id:v().v4()}),e)))},isAddEnvironmentButtonDisabled:!D})),r.createElement(h.default,{disabled:!j||a||_||A||!D||!(0,E.isFormUpdated)(this.getInitialData(),R),integrationId:P,payload:R,rule:w,service:this.props.controller.integrationData.serviceId}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApmNewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),h=n("./integrations/monitoring/services/index.js"),f=n("./integrations/monitoring/constants.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/utils.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),y=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),E=n("./js/stores/CurrentUserStore.js"),A=n("./js/stores/StoreManager.js"),w=n("./integrations/services/AuthenticationInstanceService.ts"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),k=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),j=n("./integrations/constants/integrationsConstants.ts");const P=pm.logger.getContext("APMNewRelic-Edit","integrations");let T=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.listServicesWithIntegrationId=(e,t)=>{const{rule:n,serviceGuids:s,apiKey:a,region:r,isUsingApiKeyInput:o,authToBeUsed:l,authenticationInstances:c}=this.state,d={};t&&(o?(d.api_key=a,d.region=r):l&&(d.serviceAuth=i().head(c).id)),this.setState({loadingServices:!0,errorServices:!1}),h.default[n].listSevicesWithIntegrationId(e,d).then((e=>{const t=i().map(i().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));let n=i().map(t,(e=>{if(i().includes(s,e.value))return e}));n=i().compact(n),this.setState({availableServices:t,selectedService:n,loadingServices:!1})})).catch((e=>{var t,n;this.setState({orphaned:403===(null===(t=e.error)||void 0===t?void 0:t.statusCode)&&"newRelicError"===(null===(n=e.error)||void 0===n?void 0:n.name),errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))},this.listDashboardsWithIntegrationId=(e,t)=>{const{rule:n,dashboardGuids:s,apiKey:a,region:r,isUsingApiKeyInput:o,authToBeUsed:l,authenticationInstances:c}=this.state,d={};t&&(o?(d.api_key=a,d.region=r):l&&(d.serviceAuth=i().head(c).id)),this.setState({loadingDashboards:!0,errorDashboards:!1}),h.default[n].listDashboardsWithIntegrationId(e,d).then((e=>{let t=i().map(i().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),n=i().map(t,(e=>{if(i().includes(s,e.value))return e}));n=i().compact(n),this.setState({availableDashboards:t,selectedDashboard:n,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))},this.state={nickname:"",apiKey:"",errorNickname:"",errorApiKey:"",monitor:"",selectedApi:{},selectedApiVersion:{},region:f.NEW_RELIC_REGIONS.US,isUsingApiKeyInput:!0,loadingAuthenticationInstances:!0,authenticationInstances:[],orphaned:!1,addNewRelicToTeam:!1,installedAppFeatureFlag:!1,authToBeUsed:""},this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServicesWithIntegrationId=this.listServicesWithIntegrationId.bind(this),this.listDashboardsWithIntegrationId=this.listDashboardsWithIntegrationId.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.client_category=f.API_MONITORING,this.getInitialState=this.getInitialState.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.changeAuthenticationCallback=this.changeAuthenticationCallback.bind(this)}componentDidMount(){let{variables:e,executor:t,id:n,name:s,rule:a}=this.props.controller.integrationData,r=(0,f.isFeatureFlagEnabled)(f.NEW_RELIC_APM_CLASS_ID);this.setState({...this.getInitialState(),loadingApi:!0,loadingApiVersion:!0,isUsingApiKeyInput:!e.auth,installedAppFeatureFlag:r},(()=>{this.listDashboardsWithIntegrationId(this.props.controller.integrationData.id),this.listServicesWithIntegrationId(this.props.controller.integrationData.id),r&&this.fetchAuthenticationInstance()})),I.default.fetchAPIMeta(e.postman_api_id).then((e=>{this.setState({selectedApi:{value:i().get(e,"id"),label:i().get(e,"name")},loadingApi:!1})})).catch((e=>{this.setState({loadingApi:!1}),pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Error occurred while fetching APIs",e)})),I.default.fetchAPIVersionMeta(e.postman_api_id,t).then((e=>{this.setState({selectedApiVersion:{value:i().get(e,"versionId"),label:i().get(e,"name")},loadingApiVersion:!1})})).catch((e=>{this.setState({loadingApiVersion:!1}),pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Error occurred while fetching API versions",e)}))}getInitialState(){const{variables:e,executor:t,id:n,name:s,rule:a}=this.props.controller.integrationData;return{apiKey:e.api_key,region:e.region?e.region:f.NEW_RELIC_REGIONS.US,apiId:e.postman_api_id,serviceGuids:e.service_guids,dashboardGuids:e.dashboard_guids,apiVersionId:t,integrationId:n,nickname:s,rule:a,variables:e,addNewRelicToTeam:!1,authToBeUsed:e.auth}}fetchAuthenticationInstance(){const e=(0,A.resolveStoreInstance)(E.default);this.setState({loadingAuthenticationInstances:!0}),w.default.listAuthenticationInstances({scope:[{type:f.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[f.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[f.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(i().isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:P}),this.setState({loadingAuthenticationInstances:!1});if(i().isEmpty(e.data))return this.setState({authenticationInstances:[],loadingAuthenticationInstances:!1});const t=i().head(e.data);C.default.fetchUserInfo(t.createdBy,((n,s)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=i().get(s,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,loadingAuthenticationInstances:!1}))))})).catch((e=>(pm.logger.error("BrowseIntegrations-EditNewRelic~Error loading authentication instances!",e,{context:P}),this.setState({loadingAuthenticationInstances:!1}))))}onServiceSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServicesWithIntegrationId(this.props.controller.integrationData.id,!0),this.listDashboardsWithIntegrationId(this.props.controller.integrationData.id,!0)}))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,authToBeUsed:null})}changeAuthenticationCallback(){const{authenticationInstances:e}=this.state;this.setState({orphaned:!1,authToBeUsed:i().head(e).id},(()=>{this.listServicesWithIntegrationId(this.props.controller.integrationData.id,!0),this.listDashboardsWithIntegrationId(this.props.controller.integrationData.id,!0)}))}render(){const{apiKey:e,region:t,errorApiKey:n,errorNickname:s,availableServices:a,selectedService:o,loadingServices:h,loadingDashboards:I,selectedDashboard:E,availableDashboards:A,serviceGuids:w,dashboardGuids:C,errorServices:P,errorDashboards:T,selectedApi:N,selectedApiVersion:D,authToBeUsed:R,rule:O,apiId:x,apiVersionId:M,nickname:L,integrationId:F,loadingApi:H,loadingApiVersion:B,installedAppFeatureFlag:U,isUsingApiKeyInput:V,authenticationInstances:G,loadingAuthenticationInstances:z,addNewRelicToTeam:W,orphaned:K}=this.state,Y=!z&&i().isEmpty(G)&&K,q=U&&!z&&i().isEmpty(G),$=!i().isEmpty(G)&&R!==i().head(G).id,J=e||R;let Z={name:L,rule:O,api_id:x,entity:"apiversion",executor:M,variables:{...e&&V?{api_key:e}:{},...V?{region:t,auth:""}:{auth:R},postman_api_id:x,service_guids:w,dashboard_guids:C}};return r.createElement("div",null,V?null:r.createElement(r.Fragment,null,r.createElement(k.default,{connectedAccount:i().head(G),isLoading:z,isUsingPersonalCredentials:V,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+i().get(i().head(G),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account",orphaned:Y}),$?r.createElement(l.SensitiveFieldSegment,{title:r.createElement(c.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:r.createElement(b.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):null),r.createElement(l.NicknameFieldSegment,{id:"new-relic-nickname",value:L,error:s,onBlur:()=>{this.setState({nickname:L.trim(),errorNickname:i().isEmpty(L.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,id:"new-relic-api",title:"Selected API",description:"The selected API is connected with this integration",value:N,options:[N],loading:H}),r.createElement(l.EntitySelector,{disabled:!0,id:"new-relic-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",entity:j.entityTypes.API_VERSIONS,value:D,options:[D],loading:B}),V?r.createElement(l.SensitiveFieldSegment,{title:r.createElement(c.default,{text:"New Relic API Key",type:"primary"}),description:"Enter the User Key provided by New Relic or ",customLink:r.createElement(b.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):null,r.createElement(y.MultiSelectWrapper,null,r.createElement(d.default,{value:o,options:a,placeholder:"Select New Relic Services",label:r.createElement(c.default,{text:"Services",type:"secondary",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:h,error:P&&"Unable to load services",emptyStateMessage:"No services found"})),r.createElement(y.MultiSelectWrapper,null,r.createElement(d.default,{value:E,options:A,placeholder:"Select Dashboards",label:r.createElement(c.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:this.onDashboardSelect,isLoading:I,error:T&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"})),V||$?r.createElement(r.Fragment,null,r.createElement("div",{className:"integrations-add-card__segment"},r.createElement(c.default,{text:"New Relic region",type:"primary"}),r.createElement(u.default,{type:"para"},"This helps us know what New Relic region to use"),r.createElement(p.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},r.createElement(g.default,{label:"US (.com)",value:"us"}),r.createElement(g.default,{label:"EU (.eu)",value:"eu"}))),q?r.createElement("div",{className:"add-new-relic"},r.createElement(m.default,{isChecked:W,label:f.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:f.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!W})}})):null):null,r.createElement(S.default,{disabled:!L||!J||i().isEmpty(w)||h||I||!(0,_.isFormUpdated)(this.getInitialState(),this.state),integrationId:F,generatePayload:W?v.default.createAndPopulateNewRelicAuthenticationInstance:null,payload:Z,rule:O,service:O}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/AzureAPIM.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AzureSetup:function(){return C},default:function(){return k}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),u=n("./integrations/api-observability/components/base/AzureServiceConfig.js"),p=n("./integrations/api-observability/components/base/CancelButton.js"),g=n("./integrations/api-observability/components/base/EditIntegrationV2.js"),m=n("./node_modules/uuid/v4.js"),h=n.n(m),f=n("./js/stores/StoreManager.js"),b=n("./integrations/api-observability/stores/APIObservabilityStore.js"),v=n("./js/stores/IntegrationsStore.js"),I=n("./integrations/navigation/constants.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),y=n("./js/components/base/LoadingIndicator.js"),_=n("./integrations/api-observability/constants.ts"),E=n("./integrations/api-observability/components/base/CustomDropdown.js"),A=n("./integrations/api-observability/AzureFormHelper.js");function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},w.apply(this,arguments)}let C=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.handleLinkedApis=(e,t)=>{let{linkedApis:n}=this.state,s=!1;e&&(n[t]=e),i().each(n,(e=>{if(!(i().get(e,"azure_subscription_id")&&i().get(e,"azure_resource_group_id")&&i().get(e,"azure_service_id")&&i().get(e,"azure_api_id")))return s=!0,!1})),this.setState({linkedApis:n,isDisabled:s})},this.generatePayload=()=>{const{linkedApis:e}=this.state;let t={variables:{linked_apis:(0,A.generateApiList)(e)}};return new Promise((e=>this.setState({payload:t},(()=>e(t)))))},this.handleFetchedSubscriptions=e=>{this.setState({fetchedSubscriptions:e})},this.addSection=()=>{let e={...this.state.linkedApis};const t=h()();e[t]={},i().each(e,(e=>{e.isCollapsed=!0})),e[t].isCollapsed=!1,this.setState({linkedApis:e})},this.removeSection=e=>{let{linkedApis:t}=this.state;t[e]&&delete t[e],this.setState({linkedApis:t})},this.handleCollapse=(e,t)=>{let{linkedApis:n}=this.state;n[e]&&(n[e].isCollapsed=t),this.setState({linkedApis:n})},this.fetchConnectedApiMeta=e=>{"apiVersion"!==e&&this.setState({isFetchingApiMeta:!0},(()=>{S.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({selectedApi:{value:i().get(e,"id"),label:i().get(e,"name")},isFetchingApiMeta:!1})})).catch((e=>{this.setState({isFetchingApiMeta:!1,errorApiMeta:!0}),pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Error occurred while fetching APIs",e)}))})),"api"!==e&&this.setState({isFetchingApiVersionMeta:!0},(()=>{S.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({selectedApiVersion:{value:i().get(e,"versionId"),label:i().get(e,"name")},isFetchingApiVersionMeta:!1})})).catch((e=>{this.setState({errorApiVersionMeta:!0,isFetchingApiVersionMeta:!1}),pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Error occurred while fetching API versions",e)}))}))},this.renderLoadingState=()=>r.createElement(l.default,{justifyContent:"space-between"},r.createElement("div",null,"Loading..."),r.createElement(y.default,{className:"loading-indicator-aether__dropdown"})),this.renderSections=()=>{let{fetchedSubscriptions:e,linkedApis:t}=this.state,n=[],s=1,a=[];return i().isObject(t)&&i().each(Object.keys(t),(e=>{t[e].azure_api_path&&a.push(t[e].azure_api_path)})),i().isObject(t)&&i().each(t,((i,o)=>{let l=t[o].isCollapsed;n.push(r.createElement(u.default,w({},this.props,{key:o,index:o,handleLinkedApis:this.handleLinkedApis,linkedApis:t,config:i,selectedApiPaths:a,fetchedSubscriptions:e,handleFetchedSubscriptions:this.handleFetchedSubscriptions,handleRemoveSection:this.removeSection,handleCollapse:this.handleCollapse,isCollapsed:l,isRemoveHidden:1===Object.keys(t).length,formType:_.EDIT,serialNumber:s}))),s++})),n},this.getValidationState=e=>{let t="api"===e?"Unable to load API Meta.":"Unable to load API Version Meta.";return{status:"error",message:r.createElement("div",null,t,"",r.createElement("span",{className:"dropdown-retry",onClick:()=>{"api"===e?this.fetchConnectedApiMeta("api"):this.fetchConnectedApiMeta("apiVersion")}},"Retry"))}},this.state={linkedApis:{},fetchedSubscriptions:[]},this.integrationsStore=(0,f.resolveStoreInstance)(v.default),this.store=(0,f.resolveStoreInstance)(b.default)}componentDidMount(){this.fetchConnectedApiMeta();const e=[...i().get(this.props.controller,"integrationData.variables.linked_apis",[])];let t={};i().each(e,(e=>{let n=h()();t[n]={...e||{},isCollapsed:!1}})),this.setState({linkedApis:t})}render(){const{payload:e,isDisabled:t,isFetchingApiMeta:n,errorApiMeta:s,isFetchingApiVersionMeta:a,errorApiVersionMeta:o,selectedApi:l,selectedApiVersion:u}=this.state,{rule:m,service:h}=this.props,f=t||!i().get(l,"value")||!i().get(u,"value");return r.createElement("div",null,r.createElement("div",null,r.createElement("div",{className:"observability-azure-add-integration__nickname"},r.createElement(E.default,{value:l,options:[l],label:"Selected API",placeholder:n?this.renderLoadingState():s?"No API found":"",className:n?"dropdown-icon-remove connect-apigee-gateway__form--entity-selector":"connect-apigee-gateway__form--entity-selector",emptyStateMessage:"No API found",isDisabled:!0,validationState:s&&this.getValidationState("api")})),r.createElement("div",{className:"observability-azure-add-integration__nickname"},r.createElement(E.default,{value:u,options:[u],label:"Selected API Version",placeholder:a?this.renderLoadingState():o?"No API Version found":"",className:a?"dropdown-icon-remove connect-apigee-gateway__form--entity-selector":"connect-apigee-gateway__form--entity-selector",emptyStateMessage:"No API version found",isDisabled:!0,validationState:o&&this.getValidationState("apiVersion")}))),r.createElement("div",{className:"observability-azure-add-integration__service"},_.SETUP_AZURE_API_MANAGEMENT_SERVICES),this.renderSections(),r.createElement("div",{className:"observability-azure-add-integration__buttons__add-service"},r.createElement(c.default,{onClick:()=>{this.addSection()},type:"tertiary",text:"Add Service",size:"small",icon:r.createElement(d.default,null),isDisabled:t||this.store.isAdding})),r.createElement("div",{className:"observability-azure-add-integration__buttons"},r.createElement(g.default,{text:"Update",payload:e,rule:m,service:h,isDisabled:f||!(0,A.isFormUpdated)(this.props,this.state),customUpdateIntegrationHandler:this.generatePayload,integrationId:this.props.integrationId,redirectUrl:I.TEAM_INTEGRATIONS_IDENTIFIER,isBrowseIntegrationFlow:!0}),r.createElement("span",{className:"observability-azure-add-integration__buttons__cancel"},r.createElement(p.default,{text:"Cancel",rule:m,service:h,redirectUrl:I.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,isBrowseIntegrationFlow:!0}))))}})||s;function k(e){const{rule:t,serviceId:n,executor:s,variables:a}=i().get(e.controller,"integrationData");return"api_management_azure"===i().get(e.controller,"integrationData.rule")?r.createElement(C,w({},e,{rule:t,service:n,integrationId:i().get(e.controller,"integrationData.id"),apiId:i().get(a,"postman_api_id"),apiVersionId:s})):r.createElement("div",null)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Bigpanda.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");n("./growth/activation/features/TeamJoiner/TeamJoinerPopoverHelper.js");let p=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:o,serviceId:l,errorMonitorMeta:p,loadingMonitorMeta:g}=this.state,{integrationFormActions:m,source:h}=this.props;let f={name:e,executor:n,variables:{app_key:t.app_key,...t.api_token?{api_token:t.api_token}:{}}};return r.createElement("div",null,r.createElement(c.NicknameFieldSegment,{id:"bigpanda-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(c.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to BigPanda",value:s,options:s?[s]:[],error:p,loading:g,handleRetry:()=>this.fetchMonitorMeta(n)}),r.createElement(c.FieldSegment,{description:"Enter your BigPanda App Key",id:"bigpanda-key",title:"App Key",value:t.app_key,error:i().isEmpty(t.app_key)?"Please enter app key":"",onBlur:()=>{this.setState({variables:{...t,app_key:t.app_key.trim()}})},onChange:e=>{this.setState({variables:{...t,app_key:e}})}}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,className:"bigpanda-token",description:"Enter the API Token for the App",id:"bigpanda-token",title:"API Token",value:t.api_token,onChange:e=>{this.setState({variables:{...t,app_token:e}})}}),r.createElement(d.default,{disabled:!(s&&t.app_key&&e&&(0,u.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:f,rule:o,service:l,integrationFormActions:m,source:h}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Bitbucket.js":function(e,t,n){"use strict";n.r(t),n.d(t,{checkForValidInput:function(){return h},default:function(){return f}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function h(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}let f=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",directory:"Postman Collections",name:"",repositories:[],branches:[],selectedRepository:null,selectedBranch:null,variables:{},integrationId:"",configuredOn:null,loadingCollectionMeta:!1,errorCollectionMeta:"",loadingRepositories:!1,errorRepositories:"",loadingBranches:!1,errorBranches:""},this.onRepositorySelect=this.onRepositorySelect.bind(this),this.onBranchSelect=this.onBranchSelect.bind(this),this.fetchRepositories=this.fetchRepositories.bind(this),this.fetchBranches=this.fetchBranches.bind(this),this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.getInitialState=this.getInitialState.bind(this),this.setLastSavedPassword=this.setLastSavedPassword.bind(this)}componentDidMount(){const{executor:e,id:t,variables:n}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e),this.fetchRepositories(t,n),this.fetchBranches(t,n.workspace_slug,n.repo_slug,n.branch)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,repository_slug:i.repo_slug,workspace_slug:i.workspace_slug,integrationId:n,lastSavedPassword:i.app_password,selectedRepository:{value:i.workspace_slug+"/"+i.repo_slug,label:i.workspace_slug+"/"+i.repo_slug},selectedBranch:i.branch?{value:i.branch,label:i.branch}:null}}setLastSavedPassword(e,t){const{integrationId:n,variables:s,lastSavedPassword:a}=this.state;if(t===m.RESET)return e=a,void this.setState({variables:{...s,app_password:e},lastSavedPassword:e,isInlineSaveVisible:!1});this.setState({variables:{...s,app_password:e},lastSavedPassword:e,branches:null,repositories:null,errorBranches:null,errorRepositories:null,selectedBranch:{},selectedRepository:{},isInlineSaveVisible:!1}),this.fetchRepositories(n,s,!1)}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),c.default.fetchCollectionMeta(e).then((t=>{t.name&&t.id?this.setState({configuredOn:{isForked:i().get(t,"isForked"),forkLabel:i().get(t,"forkLabel"),baseCollectionUid:i().get(t,"baseCollectionUid"),type:i().get(t,"type"),value:e,label:t.name},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}fetchRepositories(e,t,n=!0){this.setState({loadingRepositories:!0,errorRepositories:""}),u.default.fetchActionDetails(e,{type:"fetchBitbucketCloudRepos"}).then((e=>{if(e.status&&200===e.status){let s,a=i().get(e,"body.data"),r=!1;if(a&&a.length&&(s=a.filter((e=>e.scm&&"git"===e.scm)).map((e=>e.full_name?{label:e.full_name,value:e.full_name}:(r=!0,{})))),r)this.setState({errorRepositories:"Unable to load repositories",loadingRepositories:!1});else{const e=i().find(s,{value:`${t.workspace_slug}/${t.repo_slug}`})||null;this.setState({repositories:s,selectedRepository:n?e:null,loadingRepositories:!1})}}else e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching Bitbucket repositories, please try again"),pm.logger.error("Error occurred while fetching Bitbucket repositories"),this.setState({loadingRepositories:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorRepositories:"Unable to load repositories"}):pm.toasts.error("Something went wrong while fetching Bitbucket repositories, please try again"),pm.logger.error("Error occurred while fetching Bitbucket repositories",e),this.setState({loadingRepositories:!1})}))}fetchBranches(e,t,n,s){this.setState({loadingBranches:!0,errorBranches:""}),u.default.fetchActionDetails(e,{type:"fetchBitbucketCloudRepoBranches",workspace_slug:t,repo_slug:n}).then((e=>{if(e.status&&200===e.status){let t,n=i().get(e,"body.data"),a=!1;n&&n.length&&(t=n.map((e=>e.name?{label:e.name,value:e.name}:(a=!0,{})))),a?this.setState({errorBranches:"Unable to load branches",loadingBranches:!1}):this.setState({branches:t,selectedBranch:i().find(t,{label:s})||null,loadingBranches:!1})}else e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches"}):pm.toasts.error("Something went wrong while fetching Bitbucket branches, please try again"),pm.logger.error("Error occurred while fetching Bitbucket branches"),this.setState({loadingBranches:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches"}):pm.toasts.error("Something went wrong while fetching Bitbucket branches, please try again"),pm.logger.error("Error occurred while fetching Bitbucket branches",e),this.setState({loadingBranches:!1})}))}onBranchSelect(e){this.setState({selectedBranch:e})}onRepositorySelect(e){if(i().isEmpty(e))this.setState({selectedRepository:null,workspace_slug:"",repository_slug:"",selectedBranch:null,branches:[]});else{let t=e.label.includes("/")&&e.label.split("/")[0],n=e.label.includes("/")&&e.label.split("/")[1],s=n&&n.replace(/ /g,"-"),a=t&&t.replace(/ /g,"-");const{integrationId:i}=this.state;this.setState({selectedRepository:e,workspace_slug:a,repository_slug:s,selectedBranch:null,branches:[]}),this.fetchBranches(i,a,s)}}render(){const{configuredOn:e,variables:t,executor:n,workspace_slug:s,repository_slug:a,name:o,repositories:c,branches:u,selectedBranch:m,selectedRepository:f,integrationId:b,ruleId:v,serviceId:I,errorBranches:S,errorCollectionMeta:y,errorRepositories:_,loadingBranches:E,loadingCollectionMeta:A,loadingRepositories:w,isInlineSaveVisible:C,lastSavedPassword:k}=this.state;let j={name:o,executor:n,variables:{username:t.username,workspace_slug:s,repo_slug:a,file_name:t.file_name,branch:m&&m.label,directory:t.directory,...t.app_password?{app_password:t.app_password}:{}}},P={isSaveDisabled:!t.app_password,integrationId:b,payload:{variables:{...t.app_password?{app_password:t.app_password}:{}}}};return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"bitbucket-nickname",value:o,error:i().isEmpty(o)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:o.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(l.FieldSegment,{id:"bitbucket-username",title:"Bitbucket username",value:t.username,error:i().isEmpty(t.username)?"Please enter an username":"",onBlur:()=>{this.setState({variables:{...t,username:t.username.trim()}})},onChange:e=>{this.setState({variables:{...t,username:e}})}}),r.createElement(l.SensitiveFieldSegment,{isInlineSaveVisible:C,inlineSaveButtonData:P,onSave:this.setLastSavedPassword,maskedPlaceholderWhenEmpty:!0,className:"bitbucket-app-password",customLink:r.createElement(p.default,{extUrl:"https://go.pstmn.io/docs-bitbucket-integration"},"Learn how to create a Bitbucket app password"),description:'Only the "Account: Read" and "Repositories: Write" permissions are required for your app password.',id:"bitbucket-app-password",title:"Bitbucket app password",value:t.app_password||"",onChange:e=>{this.setState({variables:{...t,app_password:e},isInlineSaveVisible:e!==k})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose Collection",description:"The updates of the selected collection will be sent to Bitbucket",value:e,options:e?[e]:[],error:y,loading:A,handleRetry:()=>this.fetchCollectionMeta(n)}),r.createElement(l.SelectSegmentV2,{isCreatable:!0,isClearable:!0,title:"Choose Repository",description:"The collection will be backed up to this repository",disabled:w||!i().isEmpty(_),options:c,value:f,onTargetSelect:this.onRepositorySelect,noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {workspace}/{repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:h,emptyStateError:!w&&!f&&c.length>0&&"Please select a repository",error:_,loading:w,handleRetry:()=>this.fetchRepositories(b,t)}),r.createElement(l.FieldSegment,{optional:!0,description:"The collection will be pushed to this directory in the repository",id:"bitbucket-directory",title:"Enter Directory",value:t.directory,onChange:e=>{this.setState({variables:{...t,directory:e}})}}),r.createElement(l.FieldSegment,{description:"This will be the name of the collection in the repository",id:"bitbucket-name",title:"Enter filename",value:t.file_name,error:i().isEmpty(t.file_name)?"Please enter a filename":"",onBlur:()=>{this.setState({variables:{...t,file_name:t.file_name.trim()}})},onChange:e=>{this.setState({variables:{...t,file_name:e}})}}),r.createElement(l.SelectSegmentV2,{isCreatable:!0,isClearable:!0,optional:!0,title:"Enter Branch",description:"The collection will be pushed to this branch in the repository",disabled:E||!i().isEmpty(S),options:u,value:m,error:S,loading:E,handleRetry:()=>this.fetchBranches(b,s,a,m&&m.label),onTargetSelect:this.onBranchSelect,noResultsForSearch:"We have limited access to your branches and couldn't find the one you're looking for. Enter it manually.",noOptionsForDropdown:"No branches found"}),r.createElement(d.default,{disabled:!(e&&o&&t.username&&!C&&t.repo_slug&&t.workspace_slug&&t.file_name&&f&&(0,g.isFormUpdated)(i().omit(this.getInitialState(),["lastSavedPassword"]),this.state)),integrationId:b,payload:j,rule:v,service:I}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/BitbucketCI.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./integrations/ci-cd/services/BitbucketCI.js"),o=n("./js/stores/StoreManager.js"),l=(n("./integrations/ci-cd/stores/APIIntegrationsStore.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js")),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),p=n("./node_modules/prop-types/index.js"),g=n.n(p),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),h=n("./node_modules/lodash/lodash.js");let f=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.fetchWorkspaces=()=>{const{addToast:e}=this.props;this.setState({loadingWorkspaces:!0,errorWorkspaces:""}),r.default.fetchWorkspaces(this.props.tokenId).then((e=>{this.setState({workspaces:e,loadingWorkspaces:!1,errorWorkspaces:""})})).catch((t=>{this.setState({loadingWorkspaces:!1,errorWorkspaces:"Error occured while fetching workspaces"}),e({title:"Error",description:"Error occurred while fetching workspaces",status:"error"}),pm.logger.error("BitbucketCIEdit ~ fetchWorkspaces : Error occurred while fetching workspaces",t)}))},this.fetchRepositories=()=>{const e={tokenId:this.props.tokenId,workspaceSlug:h.get(this.state.selectedWorkspace,"value.workspace_uuid")},{addToast:t}=this.props;this.setState({loadingProjects:!0,errorProjects:""}),r.default.fetchRepositories(e).then((e=>{this.setState({projects:e,loadingProjects:!1,errorProjects:""})})).catch((e=>{this.setState({loadingProjects:!1,errorProjects:"Error occured while fetching projects"}),t({title:"Error",description:"Error occurred while fetching projects",status:"error"}),pm.logger.error("BitbucketCIEdit ~ fetchRepositories : Error occurred while fetching projects",e)}))},this.store=(0,o.resolveStoreInstance)("APIIntegrationsStore"),this.getInitialState=this.getInitialState.bind(this),this.state={...this.getInitialState(),integrationId:null,service:null,rule:null,projects:[],workspaces:[],loadingProjects:!1,loadingWorkspaces:!1,errorProjects:"",errorWorkspaces:"",selectedApi:"",selectedApiVersion:""}}getInitialState(){const{nickname:e,repoSlug:t,workspaceSlug:n,repositoryName:s,workspaceName:a,tokenId:i}=this.props;return{nickname:e,tokenId:i,selectedProject:{label:s,value:{workspace_uuid:n,repo_uuid:t,repo_name:s}},selectedWorkspace:{label:a,value:{workspace_uuid:n,workspace_name:a}}}}componentDidMount(){const{apiId:e,apiVersionId:t}=this.props,{addToast:n}=this.props;c.default.fetchAPIMeta(e).then((e=>{this.setState({selectedApi:{id:h.get(e,"id"),name:h.get(e,"name")}})})).catch((e=>{n({title:"Error",description:"Something went wrong while fetching APIs, please try again",status:"error"}),pm.logger.error("BitbucketCIEdit ~ Initialise : Error occurred while fetching APIs",e)})),c.default.fetchAPIVersionMeta(e,t).then((e=>{this.setState({selectedApiVersion:{id:h.get(e,"versionId"),name:h.get(e,"name")}})})).catch((e=>{n({title:"Error",description:"Something went wrong while fetching API versions, please try again",status:"error"}),pm.logger.error("BitbucketCIEdit ~ Initialise : Error occurred while fetching API versions",e)})),this.fetchWorkspaces(),this.fetchRepositories()}render(){const{loadingProjects:e,loadingWorkspaces:t,nickname:n,projects:s,workspaces:i,selectedProject:r,selectedWorkspace:o,selectedApi:c,selectedApiVersion:u,errorProjects:p,errorWorkspaces:g}=this.state,{integrationId:f,rule:b,service:v}=this.props,I=!r||!o||h.isEmpty(n)||p||g,S={id:f,name:n,variables:{repo_slug:h.get(r,"value.repo_uuid"),repository_name:h.get(r,"value.repo_name"),workspace_slug:h.get(o,"value.workspace_uuid"),workspace_name:h.get(o,"value.workspace_name")}};return a.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},a.createElement(l.NicknameFieldSegment,{id:"bitbucket-pipelines-nickname",value:n,error:""===n?"Please enter a nickname for your integration":"",onChange:e=>{this.setState({nickname:e})}}),a.createElement(l.SelectSegment,{disabled:!0,id:"bitbucketci-api",title:"Selected API",description:"The selected API is connected with this integration",selectedTarget:c,filterItems:[c],initialLabel:"Loading apis..."}),a.createElement(l.SelectSegment,{disabled:!0,id:"bitbucketci-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",selectedTarget:u,filterItems:[u],initialLabel:"Loading API versions..."}),a.createElement(l.SelectSegmentV2,{title:"Choose your workspace",description:"Select the Bitbucket workspace",label:"Select",disabled:t||!h.isEmpty(g),options:i,value:o,onTargetSelect:e=>{this.setState({selectedWorkspace:e,selectedProject:""},(()=>{this.fetchRepositories()}))},noOptionsForDropdown:"No workspaces found",error:g,loading:t,handleRetry:this.fetchWorkspaces}),a.createElement(l.SelectSegmentV2,{title:"Choose your CI project",description:"Select the Bitbucket repository where the pipeline is configured",label:"Select",disabled:e||!h.isEmpty(p),options:s,value:r,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",error:p,loading:e,handleRetry:this.fetchRepositories}),a.createElement(d.default,{disabled:I||!(0,m.isFormUpdated)(this.getInitialState(),this.state),integrationId:f,payload:S,rule:b,service:v}))}})||s;function b(e){const t=h.get(e,"controller.integrationData");if("bitbucket_pipelines"===h.get(t,"rule")){const e={apiId:h.get(t,"variables.api_id"),apiVersionId:h.get(t,"executor"),integrationId:h.get(t,"id"),nickname:h.get(t,"name"),rule:h.get(t,"rule"),service:h.get(t,"serviceId"),tokenId:h.get(t,"variables.oauth_token_id"),repoSlug:h.get(t,"variables.repo_slug"),workspaceSlug:h.get(t,"variables.workspace_slug"),repositoryName:h.get(t,"variables.repository_name"),workspaceName:h.get(t,"variables.workspace_name")},n=(0,u.default)(f);return a.createElement(n,e)}}b.propTypes={controller:g().shape({integrationData:g().shape({name:g().string,id:g().number,variables:g().object,rule:g().string,serviceId:g().string,executor:g().string}).isRequired,routeBack:g().bool.isRequired})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/CircleCI.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("./integrations/ci-cd/components/CircleCIFormData.js"),r=n("./integrations/navigation/constants.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),c=n("./node_modules/lodash/lodash.js");function d(e){const t=c.get(e,"integrationData"),n=c.get(e,"classData"),d=c.get(t,"class"),u=c.reduce(t.inputs,((e,t)=>(e[c.get(t,"key")]=c.get(t,"value"),e)),{}),p=c.get(u,"api_id"),g=c.get(u,"apiversion"),m=c.get(t,"id"),h=c.get(t,"name"),f=c.get(n,"services.0.id"),b=c.get(u,"project_slug"),v=c.get(u,"circleci_token");return s.createElement(i.default,{apiId:p,apiVersionId:g,classId:d,renderDisabledApiApiversionSelector:!0,defaultCircleCIToken:v,defaultSelectedProjectSlug:b,defaultName:h,optionalFormComponents:(e,t,n)=>s.createElement(a.default,{justifyContent:"flex-start",gap:"spacing-s"},s.createElement(o.default,{classId:d,disabled:!e||!n,inputs:t.inputs,name:t.name,redirectPageId:r.TEAM_INTEGRATIONS_IDENTIFIER,redirectParams:{serviceId:f,ruleId:d},integrationId:m}),s.createElement(l.default,null))})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Coralogix.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=n("./js/components/base/Inputs.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/coralogix.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let f=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1,regionOptions:[...g.regions],selectedRegion:{label:"Europe",value:"europe"}},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:r}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:r,ruleId:s,integrationId:n,coralogixSite:r.coralogix_site,selectedRegion:i().find(this.state.regionOptions,(e=>e.value===r.region))}}toggle(e){this.setState((t=>({[e]:!t[e]})))}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:o,serviceId:l,advanced:g,errorMonitorMeta:f,loadingMonitorMeta:b,regionOptions:v,selectedRegion:I,coralogixSite:S,errorCoralogixSite:y}=this.state,{integrationFormActions:_,source:E}=this.props;let A={name:e,executor:n,variables:{sendCollection:t.sendCollection,sendEnvironment:t.sendEnvironment,region:I.value||"europe",coralogix_site:S,...t.private_api_key?{private_api_key:t.private_api_key}:{}}};return r.createElement("div",null,r.createElement(c.NicknameFieldSegment,{id:"coralogix-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(c.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Coralogix",value:s,options:s?[s]:[],error:f,loading:b,handleRetry:()=>this.fetchMonitorMeta(n)}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,description:"Enter your Coralogix private key",id:"coralogix-key",title:"Private key",value:t.private_api_key||"",onChange:e=>{this.setState({variables:{...t,private_api_key:e}})}}),r.createElement(c.FieldSegment,{description:"Enter Coralogix site",placeholder:"https://<example>.coralogix.com",id:"coralogix-site",title:"Coralogix Site",value:S,error:y||S&&(w=S.trim(),m.default.isSecureUrl(w)?m.default.isBaseUrl(w)?"":"Use secure host URL without trailing '/'":"Use secure host URL"),onBlur:()=>{this.setState({coralogixSite:S.trim(),errorCoralogixSite:i().isEmpty(S.trim())?"Please enter the Coralogix site":""})},onChange:e=>{this.setState({coralogixSite:e,errorCoralogixSite:""})}}),r.createElement(c.SelectSegmentV2,{title:"Choose Region",className:"coralogix-region-dropdown",description:"Select the region of your cluster",options:v,value:I,onTargetSelect:e=>{this.setState({selectedRegion:e})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options",r.createElement(u.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),g&&r.createElement("div",{className:"push-double--bottom"},r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(p.Checkbox,{checked:t.sendCollection,onChange:()=>{this.setState({variables:{...t,sendCollection:!t.sendCollection}})}}),r.createElement("span",null,"Send collection details")),r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(p.Checkbox,{checked:t.sendEnvironment,onChange:()=>{this.setState({variables:{...t,sendEnvironment:!t.sendEnvironment}})}}),r.createElement("span",null,"Send environment details"))),r.createElement(d.default,{disabled:!(s&&e&&(0,h.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:A,rule:o,service:l,integrationFormActions:_,source:E}));var w}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/CustomWebhook.js":function(e,t,n){"use strict";n.r(t),n.d(t,{CollectionCustomWebHookSetup:function(){return I},MonitorRunCustomWebhook:function(){return v},TeamActivityCustomWebHookSetup:function(){return S},default:function(){return y}});var s,a,i,r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("../../node_modules/react/index.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),u=n("./node_modules/react-radio-group/lib/index.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const b=[{validator:e=>!e||d.default.isSecureUrl(e),message:"Use secure Notification URL",type:"error"}];let v=(0,c.observer)(s=class extends l.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),h.default.fetchMonitorMeta(e).then((t=>{this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:i,serviceId:r,advanced:c,errorMonitorMeta:h,loadingMonitorMeta:v}=this.state,{integrationFormActions:I,source:S}=this.props;let y={name:e,executor:n,variables:{...t.webhook_url?{webhook_url:t.webhook_url}:{},options:t.options}};return l.createElement("div",null,l.createElement(g.NicknameFieldSegment,{id:"custom-webhook-nickname",value:e,error:o().isEmpty(e)?"Give a nickname to your integration.":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),l.createElement(g.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Custom Webhook",value:s,options:s?[s]:[],error:h,loading:v,handleRetry:()=>this.fetchMonitorMeta(n)}),l.createElement(g.FieldSegment,{title:"Webhook URL",id:"custom-webhook-url",value:t.webhook_url||"",validation:b,onBlur:()=>{this.setState({variables:{...t,webhook_url:t.webhook_url.trim()}})},onChange:e=>{this.setState({variables:{...t,webhook_url:e}})}}),l.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",l.createElement(p.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),c&&l.createElement("div",{className:"push-double--bottom"},l.createElement(u.RadioGroup,{name:"Custom webhook advanced options",selectedValue:t.options,onChange:e=>{this.setState({variables:{...t,options:e}})}},l.createElement("div",{className:"integrations-radio-button__select-group--options"},l.createElement("label",null,l.createElement(u.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--options__radio"}),l.createElement("span",null,"Notify for all completed monitor runs"))),l.createElement("div",{className:"integrations-radio-button__select-group--options"},l.createElement("label",null,l.createElement(u.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--options__radio"}),l.createElement("span",null,"Notify for 3 failures and then first success"))))),l.createElement(m.default,{disabled:!(e&&(d.default.isSecureUrl(t.webhook_url)||!t.webhook_url)&&(0,f.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:y,rule:i,service:r,integrationFormActions:I,source:S}))}})||s,I=(0,c.observer)(a=class extends l.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorCollectionMeta:"",loadingCollectionMeta:!1},this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),h.default.fetchCollectionMeta(e).then((t=>{t.name&&t.id?this.setState({configuredOn:{isForked:o().get(t,"isForked"),forkLabel:o().get(t,"forkLabel"),baseCollectionUid:o().get(t,"baseCollectionUid"),type:o().get(t,"type"),value:e,label:t.name},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:i,serviceId:r,advanced:c,errorCollectionMeta:u,loadingCollectionMeta:p}=this.state;let h={name:e,executor:n,variables:{...t.webhook_url?{webhook_url:t.webhook_url}:{}}};return l.createElement("div",null,l.createElement(g.NicknameFieldSegment,{id:"custom-webhook-name",value:e,error:o().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),l.createElement(g.SelectSegmentV2,{disabled:!0,title:"Choose Collection",description:"The updates of the selected collection will be sent to custom webhook",value:s,options:s?[s]:[],error:u,loading:p,handleRetry:()=>this.fetchCollectionMeta(n)}),l.createElement(g.FieldSegment,{title:"Webhook URL",id:"custom-webhook-url",value:t.webhook_url||"",validation:b,onChange:e=>{this.setState({variables:{...t,webhook_url:e}})}}),l.createElement(m.default,{disabled:!(e&&(d.default.isSecureUrl(t.webhook_url)||!t.webhook_url)&&(0,f.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:h,rule:i,service:r}))}})||a,S=(0,c.observer)(i=class extends l.Component{constructor(e){super(e),this.state={name:"",variables:""},this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){this.setState(this.getInitialState())}getInitialState(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s}}render(){const{name:e,executor:t,variables:n,ruleId:s,integrationId:a,serviceId:i}=this.state;let r={name:e,executor:t,variables:{...n.webhook_url?{webhook_url:n.webhook_url}:{}}};return l.createElement("div",null,l.createElement(g.NicknameFieldSegment,{id:"custom-webhook-name",value:e,error:o().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),l.createElement(g.FieldSegment,{title:"Webhook URL",id:"custom-webhook-url",value:n.webhook_url||"",validation:b,onChange:e=>{this.setState({variables:{...n,webhook_url:e}})}}),l.createElement(m.default,{disabled:!(e&&(d.default.isSecureUrl(n.webhook_url)||!n.webhook_url)&&(0,f.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:r,rule:s,service:i}))}})||i;function y(e){const{rule:t}=e.controller.integrationData;return"teamactivity_custom_webhooks"===t?l.createElement(S,e):"collection_custom_webhooks"===t?l.createElement(I,e):"monitor_run_custom_webhooks"===t?l.createElement(v,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),d=n("./js/components/base/Inputs.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let S=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:"",advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData,r={name:e,serviceId:a,executor:t,variables:i,ruleId:s,events:"both"===i.options||"events"==i.options,metrics:"both"===i.options||"metrics"==i.options,integrationId:n};return"us"===r.variables.region?r.variables.region="us1":"eu"===r.variables.region&&(r.variables.region="eu1"),r}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),f.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}render(){const{advanced:e,name:t,metrics:n,region:s,events:a,configuredOn:o,variables:f,executor:S,integrationId:y,ruleId:_,serviceId:E,errorMonitorMeta:A,loadingMonitorMeta:w}=this.state,{integrationFormActions:C,source:k}=this.props;let j={name:t,executor:S,variables:{region:f.region,options:(a&&n?"both":a&&"events")||n&&"metrics"||"none",...f.api_key?{api_key:f.api_key}:{}}};return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"datadog-nickname",value:t,error:i().isEmpty(t)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:t.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog",value:o,options:o?[o]:[],error:A,loading:w,handleRetry:()=>this.fetchMonitorMeta(S)}),r.createElement(u.default,{padding:{paddingTop:"spacing-l"}},r.createElement(p.default,{name:"Select Datadog site",value:f.region,direction:"column",onChange:e=>{this.setState({variables:{...f,region:e,api_key:""}})},label:r.createElement(g.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(m.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(m.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(m.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(m.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(m.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"}))),r.createElement(l.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Datadog API Key",description:"Enter the API Key provided by Datadog or",customLink:r.createElement(v.default,{extUrl:`${c.default.getDatadogHostname(f.region)}/organization-settings/api-keys`},"generate one here"),id:"datadog-key",value:f.api_key||"",onChange:e=>{this.setState({variables:{...f,api_key:e}})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.toggle("advanced")}},"Advanced Options",r.createElement(h.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),e&&r.createElement("div",{className:"push-double--bottom"},r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(d.Checkbox,{checked:a,onChange:()=>{this.toggle("events")}}),r.createElement("span",null,"Send events for completed runs")),r.createElement("div",{className:"integrations-checkbox__select-group--events"},r.createElement(d.Checkbox,{checked:n,onChange:()=>{this.toggle("metrics")}}),r.createElement("span",null,"Send metrics for each run"))),r.createElement(b.default,{disabled:!(o&&t&&f.region&&(a||n)&&(0,I.isFormUpdated)(this.getInitialState(),this.state)),integrationId:y,payload:j,rule:_,service:E,integrationFormActions:C,source:k}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Dropbox.js":function(e,t,n){"use strict";n.r(t),n.d(t,{Dropbox:function(){return p}});var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let p=(0,o.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingCollectionMeta:!1,errorCollectionMeta:""},this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),l.default.fetchCollectionMeta(e).then((t=>{t.name&&t.id?this.setState({configuredOn:{isForked:r().get(t,"isForked"),forkLabel:r().get(t,"forkLabel"),baseCollectionUid:r().get(t,"baseCollectionUid"),type:r().get(t,"type"),value:e,label:t.name},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}render(){const{name:e,variables:t,configuredOn:n,serviceId:s,integrationId:i,ruleId:o,errorCollectionMeta:l,loadingCollectionMeta:p,executor:g}=this.state;let m={name:e,variables:{file_name:t.file_name}};return a.createElement("div",null,a.createElement(c.NicknameFieldSegment,{id:"dropbox-nickname",value:e,error:r().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),a.createElement(c.SelectSegmentV2,{disabled:!0,id:"dropbox-collection",title:"Choose Collection",description:"The selected collection will be backed up on Dropbox",value:n,options:n?[n]:[],error:l,loading:p,handleRetry:()=>this.fetchCollectionMeta(g)}),a.createElement(c.FieldSegment,{id:"dropbox-filename",title:"Filename",description:"This will be the file on Dropbox",value:t.file_name,error:r().isEmpty(t.file_name)?"Please enter a filename":"",onBlur:()=>{this.setState({variables:{...t,file_name:t.file_name.trim()}})},onChange:e=>{this.setState({variables:{...t,file_name:e}})}}),a.createElement(d.default,{disabled:!(n&&t.file_name&&e&&(0,u.isFormUpdated)(this.getInitialState(),this.state)),integrationId:i,payload:m,rule:o,service:s}))}})||s;t.default=p},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/GitLabCI.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./integrations/ci-cd/components/GitlabCIFormData.js"),o=n("./node_modules/prop-types/index.js"),l=n.n(o),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),u=n("./integrations/navigation/constants.js"),p=n("./integrations/ci-cd/constants.ts"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("./node_modules/lodash/lodash.js");let h=(0,i.observer)(s=class extends a.Component{constructor(e){super(e)}render(){const{nickname:e,repoId:t,workspaceId:n,repositoryName:s,workspaceName:i,domain:o,integrationId:l,rule:p,service:m,apiId:h,apiVersionId:f,tokenId:b}=this.props,v={label:s,value:{workspaceId:n,repoId:t,repoName:s}},I={label:i,value:{workspaceId:n,workspaceName:i}};return a.createElement(r.default,{apiId:h,apiVersionId:f,oAuthTokenId:b,rule:p,renderDisabledApiApiversionSelector:!0,defaultSelectedProject:v,defaultSelectedWorkspace:I,defaultName:e,defaultDomain:o,optionalFormComponents:(e,t,n)=>a.createElement(g.default,{justifyContent:"flex-start"},a.createElement(d.default,{classId:p,disabled:!e||!n,inputs:t.inputs,name:t.name,redirectPageId:u.TEAM_INTEGRATIONS_IDENTIFIER,redirectParams:{serviceId:m,ruleId:p},integrationId:l}),a.createElement(c.default,null))})}})||s;h.propTypes={apiId:l().string.isRequired,apiVersionId:l().string.isRequired,integrationId:l().string.isRequired,nickname:l().string.isRequired,rule:l().string.isRequired,domain:l().string,service:l().string.isRequired,tokenId:l().string.isRequired,repoId:l().string.isRequired,workspaceId:l().string.isRequired,repositoryName:l().string.isRequired,workspaceName:l().string.isRequired};const f=e=>{const t=m.get(e,"integrationData"),n=m.get(e,"classData"),s=m.get(t,"class"),i=m.reduce(t.inputs,((e,t)=>(e[m.get(t,"key")]=m.get(t,"value"),e)),{}),r={apiId:m.get(i,"api_id"),apiVersionId:m.get(i,"apiversion"),integrationId:m.get(t,"id"),nickname:m.get(t,"name"),rule:s,service:m.get(n,"services.0.id"),tokenId:m.get(i,"oauth_token_id"),repoId:m.get(i,"project_id"),workspaceId:m.get(i,"workspace_id"),repositoryName:m.get(i,"project_name"),workspaceName:m.get(i,"workspace_name")};return s===p.GITLAB_SELF_HOSTED_CLASS_ID&&(r.domain=m.get(i,"domain")),a.createElement(h,r)};f.propTypes={integrationData:l().object.isRequired,classData:l().object.isRequired},t.default=f},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Github.js":function(e,t,n){"use strict";n.r(t),n.d(t,{EditCollectionGithubSetup:function(){return b},checkForValidBranchInput:function(){return f},checkForValidInput:function(){return h},default:function(){return v}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function h(e){return!!(e&&e.label&&e.label.includes("/"))&&!!e.label.split("/")[1]}function f(e){return!(!e||!e.label||e.label.startsWith("/"))}let b=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",repository:"",variables:{},configuredOn:null,repositories:[],branches:[],directory:"Postman Collections",owner:"",selectedBranch:null,customDomain:"",name:"",selectedRepository:null,loadingRepositories:!1,errorRepositories:"",loadingBranches:!1,errorBranches:"",loadingCollectionMeta:!1,errorCollectionMeta:""},this.fetchRepositories=this.fetchRepositories.bind(this),this.fetchBranches=this.fetchBranches.bind(this),this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.onRepositorySelect=this.onRepositorySelect.bind(this),this.onBranchSelect=this.onBranchSelect.bind(this),this.getInitialState=this.getInitialState.bind(this),this.setLastSavedAccessToken=this.setLastSavedAccessToken.bind(this)}componentDidMount(){const{executor:e,variables:t,id:n}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e),this.fetchRepositories(n,t),this.fetchBranches(n,t.repository,t.owner,t.branch)}getInitialState(){const e=this.props.controller.integrationData;return{nickname:e.name,serviceId:e.serviceId,name:e.variables.name,executor:e.executor,variables:e.variables,ruleId:e.rule,integrationId:e.id,owner:e.variables.owner,repository:e.variables.repository,branch:e.variables.branch,directory:e.variables.directory||"Postman Collections",lastSavedAccessToken:e.variables.access_token}}setLastSavedAccessToken(e,t){const{integrationId:n,variables:s,lastSavedAccessToken:a}=this.state;if(t===m.RESET)return e=a,void this.setState({variables:{...s,access_token:e},lastSavedAccessToken:e,isInlineSaveVisible:!1});this.setState({variables:{...s,access_token:e},lastSavedAccessToken:e,branches:null,repositories:null,errorBranches:null,errorRepositories:null,selectedBranch:{},selectedRepository:{},repository:null,isInlineSaveVisible:!1}),this.fetchRepositories(n,s,!1)}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),c.default.fetchCollectionMeta(e).then((e=>{e.id&&e.name?this.setState({configuredOn:{isForked:i().get(e,"isForked"),forkLabel:i().get(e,"forkLabel"),baseCollectionUid:i().get(e,"baseCollectionUid"),value:i().get(e,"id"),label:i().get(e,"name")},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}fetchRepositories(e,t,n=!0){this.setState({loadingRepositories:!0,errorRepositories:""}),p.default.fetchActionDetails(e,{type:"listRepositories"}).then((e=>{let s=!1;if(e.status&&200===e.status&&e.body.data){let a=e.body.data.map((e=>e.full_name?{label:e.full_name,value:e.full_name}:(s=!1,{})));if(s)this.setState({errorRepositories:"Unable to load repositories",loadingRepositories:!1});else{const e=i().find(a,{label:t.owner+"/"+t.repository})||null;this.setState({repositories:a,selectedRepository:n?e:null,loadingRepositories:!1})}}else this.setState({errorRepositories:"Unable to load repositories"}),pm.logger.error("Error occurred while fetching GitHub repositories"),this.setState({loadingRepositories:!1})})).catch((e=>{this.setState({errorRepositories:"Unable to load repositories"}),pm.logger.error("Error occurred while fetching GitHub repositories",e),this.setState({loadingRepositories:!1})}))}fetchBranches(e,t,n,s){this.setState({loadingBranches:!0,errorBranches:""}),p.default.fetchActionDetails(e,{type:"listBranches",owner:n,repository:t}).then((e=>{let t=!1;if(e.status&&200===e.status&&e.body.data){let n=e.body.data.map((e=>e.name?{label:e.name,value:e.name}:(t=!0,{})));t?this.setState({errorBranches:"Unable to load branches",loadingBranches:!1}):this.setState({branches:n,selectedBranch:i().find(n,{label:s})||null,loadingBranches:!1})}else this.setState({errorBranches:"Unable to load branches"}),pm.logger.error("Error occurred while fetching GitHub branches"),this.setState({loadingBranches:!1})})).catch((e=>{this.setState({errorBranches:"Unable to load branches"}),pm.logger.error("Error occurred while fetching GitHub branches",e),this.setState({loadingBranches:!1})}))}onBranchSelect(e){this.setState({selectedBranch:e,variables:{...this.state.variables,branch:e.label}})}onRepositorySelect(e){if(i().isEmpty(e))this.setState({selectedRepository:"",branches:[],selectedBranch:null,repository:"",owner:"",variables:{...this.state.variables,branch:"",repository:"",owner:""}});else{let t=e.label.includes("/")&&e.label.split("/")[0],n=e.label.includes("/")&&e.label.split("/")[1];this.setState({selectedRepository:e,repository:n,owner:t,branches:[],selectedBranch:null,variables:{...this.state.variables,branch:"",repository:n,owner:t}}),this.fetchBranches(this.state.integrationId,n,t)}}render(){const{ruleId:e,integrationId:t,repository:n,executor:s,owner:a,serviceId:o,nickname:c,selectedRepository:p,directory:m,selectedBranch:b,name:v,repositories:I,branches:S,configuredOn:y,variables:_,errorBranches:E,errorCollectionMeta:A,errorRepositories:w,loadingBranches:C,loadingCollectionMeta:k,loadingRepositories:j,isInlineSaveVisible:P,lastSavedAccessToken:T}=this.state,N={rule:e,name:c,executor:s,variables:{..._.access_token?{access_token:_.access_token}:{},repository:n,directory:m,owner:a,name:v,branch:b&&b.label,..."collection_github_enterprise"===e?{base_url:_.base_url}:{}}},D={isSaveDisabled:!_.access_token,integrationId:t,payload:{variables:{..._.access_token?{access_token:_.access_token}:{}}}};return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"github-integration-nick-name",value:c,error:i().isEmpty(c.trim())?"Please enter a nickname":"",onBlur:e=>{this.setState({nickname:e.trim()})},onChange:e=>{this.setState({nickname:e})}}),r.createElement(l.SensitiveFieldSegment,{isInlineSaveVisible:P,inlineSaveButtonData:D,onSave:this.setLastSavedAccessToken,maskedPlaceholderWhenEmpty:!0,className:"github-token",description:"Your Personal Access Token provided by GitHub",id:"github-token",title:"GitHub Personal Access Token",value:_.access_token||"",onChange:e=>{this.setState({variables:{..._,access_token:e.trim()},isInlineSaveVisible:e!==T})}}),"collection_github_enterprise"===e&&r.createElement(l.FieldSegment,{description:"Enter your custom GitHub domain",id:"github-custom-domain",optional:!1,error:_.base_url&&!i().isEmpty(_.base_url)?d.default.isSecureUrl(_.base_url.trim())?null:"Please use a secure URL":"Please enter a secure URL",title:"GitHub custom domain",value:_.base_url,onChange:e=>{this.setState({variables:{..._,base_url:e.trim()}})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose Collection",description:"The selected collection will be pushed to GitHub",value:y,options:y?[y]:[],error:A,loading:k,handleRetry:()=>this.fetchCollectionMeta(s)}),r.createElement(l.SelectSegmentV2,{title:"Choose Repository",description:"The collection will be backed up to this repository",isCreatable:!0,isClearable:!0,options:I,disabled:j||!i().isEmpty(w),value:p,onTargetSelect:this.onRepositorySelect,noResultsForSearch:"We have limited access to your repos and couldn't find the one you're looking for. Enter it manually using the {owner}/{repository} format.",noOptionsForDropdown:"No repositories found",checkForValidInput:h,error:w,emptyStateError:!j&&!p&&I.length>0&&"Please select a repository",loading:j,handleRetry:()=>this.fetchRepositories(t,_)}),r.createElement(l.FieldSegment,{description:"The collection will be pushed to this directory in the repository",id:"github-directory",title:"Enter Directory",value:m,error:i().isEmpty(m)?"Please enter a directory name":"",onBlur:()=>{this.setState({directory:m.trim()})},onChange:e=>{this.setState({directory:e})}}),r.createElement(l.FieldSegment,{description:"This will be the name of the collection in the repository",id:"github-name",title:"Enter filename",value:v,error:i().isEmpty(v)?"Please enter a filename":"",onBlur:()=>{this.setState({name:v.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(l.SelectSegmentV2,{title:"Choose Branch",isCreatable:!0,isClearable:!0,description:"The collection will be pushed to selected branch in the repository",value:b,options:S,error:E,loading:C,disabled:C||!i().isEmpty(E),handleRetry:()=>this.fetchBranches(t,n,a,b&&b.label),onTargetSelect:this.onBranchSelect,emptyStateError:!C&&!b&&S.length>0&&"Please select a branch",checkForValidInput:f,noOptionsForDropdown:"No branches found",noResultsForSearch:"We have limited access to your branches and couldn't find the one you're looking for. Enter it manually without a leading slash."}),r.createElement(u.default,{disabled:!(y&&c&&n&&!P&&v&&m&&a&&p&&b&&(0,g.isFormUpdated)(i().omit(this.getInitialState(),["lastSavedAccessToken"]),this.state)),integrationId:t,payload:N,rule:e,service:o}))}})||s;function v(e){return r.createElement(b,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/GithubCI.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./integrations/ci-cd/components/GithubCIFormData.js"),o=n("./node_modules/prop-types/index.js"),l=n.n(o),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),u=n("./integrations/navigation/constants.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(s=class extends a.Component{constructor(e){super(e)}render(){const{nickname:e,workspace:t,repository:n,domain:s,integrationId:i,rule:o,service:l,apiId:g,apiVersionId:m,tokenId:h}=this.props,f=n,b=t;return a.createElement(r.default,{apiId:g,apiVersionId:m,oAuthTokenId:h,rule:o,renderDisabledApiApiversionSelector:!0,defaultSelectedProject:f,defaultSelectedWorkspace:b,defaultName:e,defaultDomain:s,optionalFormComponents:(e,t,n)=>a.createElement(p.default,{justifyContent:"flex-start"},a.createElement(d.default,{classId:o,disabled:!e||!n,inputs:t.inputs,name:t.name,redirectPageId:u.TEAM_INTEGRATIONS_IDENTIFIER,redirectParams:{serviceId:l,ruleId:o},integrationId:i}),a.createElement(c.default,null))})}})||s;m.propTypes={apiId:l().string.isRequired,apiVersionId:l().string.isRequired,integrationId:l().string.isRequired,nickname:l().string.isRequired,rule:l().string.isRequired,domain:l().string,service:l().string.isRequired,tokenId:l().string.isRequired,workspace:l().string.isRequired,repository:l().string.isRequired};const h=e=>{const t=g.get(e,"integrationData"),n=g.get(e,"classData"),s=g.get(t,"class"),i=g.reduce(t.inputs,((e,t)=>(e[g.get(t,"key")]=g.get(t,"value"),e)),{}),r={apiId:g.get(i,"api_id"),apiVersionId:g.get(i,"apiversion"),integrationId:g.get(t,"id"),nickname:g.get(t,"name"),rule:s,service:g.get(n,"services.0.id"),tokenId:g.get(i,"oauth_token_id"),repoId:g.get(i,"project_id"),workspace:g.get(i,"workspace"),repository:g.get(i,"repository")};return a.createElement(m,r)};h.propTypes={integrationData:l().object.isRequired,classData:l().object.isRequired},t.default=h},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Gitlab.js":function(e,t,n){"use strict";n.r(t),n.d(t,{checkForValidInput:function(){return f},default:function(){return b}});var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function f(e){if(e&&e.label){return/^\d+$/.test(e.label)}return!1}let b=(0,o.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},advanced:!1,configuredOn:null,directory:"Postman Collections",selectedBranch:null,selectedProject:null,projects:[],branches:[],projectId:"",loadingCollectionMeta:!1,errorCollectionMeta:"",loadingProjects:!1,errorProjects:"",loadingBranches:!1,errorBranches:""},this.fetchProjects=this.fetchProjects.bind(this),this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.onBranchSelect=this.onBranchSelect.bind(this),this.fetchBranches=this.fetchBranches.bind(this),this.onProjectSelect=this.onProjectSelect.bind(this),this.getInitialState=this.getInitialState.bind(this),this.setLastSavedAccessToken=this.setLastSavedAccessToken.bind(this)}componentDidMount(){const{executor:e,variables:t,id:n}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e),this.fetchProjects(n,t.project_id),this.fetchBranches(n,t.project_id,t.branch)}getInitialState(){const{name:e,executor:t,variables:n,serviceId:s,rule:a,id:i}=this.props.controller.integrationData;return{name:e,serviceId:s,executor:t,variables:n,ruleId:a,integrationId:i,projectId:n.project_id||"",branch:n.branch,directory:n.directory||"Postman Collections",lastSavedAccessToken:n.personal_access_token}}setLastSavedAccessToken(e,t){const{integrationId:n,variables:s,lastSavedAccessToken:a}=this.state;if(t===h.RESET)return e=a,void this.setState({variables:{...s,personal_access_token:e},lastSavedAccessToken:e,isInlineSaveVisible:!1});this.setState({variables:{...s,personal_access_token:e},lastSavedAccessToken:e,branches:null,projects:null,errorBranches:null,errorProjects:null,selectedBranch:{},selectedProject:{},isInlineSaveVisible:!1}),this.fetchProjects(n,r().get(s,"project_id"),!1)}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),l.default.fetchCollectionMeta(e).then((e=>{e.id&&e.name?this.setState({configuredOn:{isForked:r().get(e,"isForked"),forkLabel:r().get(e,"forkLabel"),baseCollectionUid:r().get(e,"baseCollectionUid"),type:r().get(e,"type"),value:r().get(e,"id"),label:r().get(e,"name")},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}fetchProjects(e,t,n=!0){this.setState({loadingProjects:!0,errorProjects:""}),c.default.fetchActionDetails(e,{type:"fetchProjects"}).then((e=>{if(e.status&&200===e.status&&e.body.data){let s,a=r().get(e,"body.data"),i=!1;if(a&&a.length&&(s=a.map((e=>e.id&&e.name?{value:e.id,label:e.name}:(i=!0,{})))),i)this.setState({errorProjects:"Unable to load projects",loadingProjects:!1});else{const e=r().find(s,{value:t});this.setState({projects:s,selectedProject:n?e:null,loadingProjects:!1})}}else e.status>=500&&e.status<600?this.setState({errorProjects:"Unable to load projects"}):pm.toasts.error("Something went wrong while fetching Gitlab projects, please try again"),pm.logger.error("Error occurred while fetching Gitlab projects"),this.setState({loadingProjects:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorProjects:"Unable to load projects"}):pm.toasts.error("Something went wrong while fetching Gitlab projects, please try again"),pm.logger.error("Error occurred while fetching Gitlab projects",e),this.setState({loadingProjects:!1})}))}fetchBranches(e,t,n){this.setState({loadingBranches:!0,errorBranches:""}),c.default.fetchActionDetails(e,{type:"fetchBranches",project_id:t}).then((e=>{let t=!1;if(e.status&&200===e.status&&e.body.data){let s=e.body.data.map((e=>e.name?{label:e.name,value:e.name}:(t=!0,{})));t?this.setState({errorBranches:"Unable to load branches",loadingBranches:!1}):this.setState({branches:s,selectedBranch:r().find(s,{label:n})||null,loadingBranches:!1})}else e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches"}):pm.toasts.error("Something went wrong while fetching Gitlab branches, please try again"),pm.logger.error("Error occurred while fetching Gitlab branches"),this.setState({loadingBranches:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorBranches:"Unable to load branches"}):pm.toasts.error("Something went wrong while fetching Gitlab Branches, please try again"),pm.logger.error("Error occurred while fetching Gitlab Branches",e),this.setState({loadingBranches:!1})}))}onBranchSelect(e){this.setState({selectedBranch:e,variables:{...this.state.variables,branch:e.label}})}onProjectSelect(e){r().isEmpty(e)?this.setState({selectedProject:null,branches:[],projectId:"",selectedBranch:null,variables:{...this.state.variables,branch:""}}):(this.setState({selectedProject:e,branches:[],projectId:e.value,selectedBranch:null,variables:{...this.state.variables,branch:""}}),this.fetchBranches(this.state.integrationId,e.value))}render(){const{configuredOn:e,variables:t,executor:n,name:s,projects:i,branches:o,selectedBranch:l,selectedProject:c,integrationId:h,ruleId:b,directory:v,advanced:I,serviceId:S,projectId:y,errorBranches:_,errorCollectionMeta:E,errorProjects:A,loadingBranches:w,loadingCollectionMeta:C,loadingProjects:k,isInlineSaveVisible:j,lastSavedAccessToken:P}=this.state,T={name:s,executor:n,variables:{project_id:c&&c.value,file_name:t.file_name,branch:l&&l.label,directory:v,..."collection_gitlab_hosted"===b?{base_url:t.base_url}:{},...t.personal_access_token?{personal_access_token:t.personal_access_token}:{}}},N={isSaveDisabled:!t.personal_access_token,integrationId:h,payload:{variables:{...t.personal_access_token?{personal_access_token:t.personal_access_token}:{}}}};let D="Your Personal Access Token provided by Gitlab "+("collection_gitlab"===b?"SaaS":"Self-managed");return a.createElement("div",null,a.createElement(d.NicknameFieldSegment,{id:"gitlab-nickname",value:s,error:r().isEmpty(s)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:s.trim()})},onChange:e=>{this.setState({name:e})}}),a.createElement(d.SensitiveFieldSegment,{isInlineSaveVisible:j,inlineSaveButtonData:N,onSave:this.setLastSavedAccessToken,maskedPlaceholderWhenEmpty:!0,className:"gitlab-token",description:D,id:"gitlab-access-token",title:"Gitlab Personal Token",value:t.personal_access_token||"",onChange:e=>{this.setState({variables:{...t,personal_access_token:e.trim()},isInlineSaveVisible:e!==P})}}),"collection_gitlab_hosted"===b&&a.createElement(d.FieldSegment,{description:"Enter your custom Gitlab Self-managed domain",id:"gitlab-custom-domain",optional:!1,error:t.base_url&&!r().isEmpty(t.base_url)?u.default.isSecureUrl(t.base_url.trim())?null:"Please use a secure URL":"Please enter a secure URL",title:"Gitlab Self-managed custom domain",value:t.base_url,onChange:e=>{this.setState({variables:{...t,base_url:e.trim()}})}}),a.createElement(d.SelectSegmentV2,{disabled:!0,title:"Choose Collection",description:"The selected collection will be pushed to Gitlab",value:e,options:e?[e]:[],error:E,loading:C,handleRetry:()=>this.fetchCollectionMeta(n)}),a.createElement(d.SelectSegmentV2,{title:"Choose Project",description:"The collection will be backed up to this project",disabled:k||!r().isEmpty(A),options:i,value:c,isCreatable:!0,isClearable:!0,emptyStateError:!k&&!c&&i.length>0&&"Please select a project",onTargetSelect:this.onProjectSelect,noResultsForSearch:"We have limited access to your projects and couldn't find the one you're looking for. Enter it manually using the {projectID} format.",noOptionsForDropdown:"No projects found",checkForValidInput:f,error:A,loading:k,handleRetry:()=>this.fetchProjects(h,y)}),a.createElement(d.FieldSegment,{description:"Enter the name of the file you want to be saved as.",id:"gitlab-name",title:"Enter Name",error:r().isEmpty(t.file_name)?"Please enter a filename":"",value:t.file_name,onBlur:()=>{this.setState({variables:{...t,file_name:t.file_name.trim()}})},onChange:e=>{this.setState({variables:{...t,file_name:e}})}}),a.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",a.createElement(g.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),I&&a.createElement(d.FieldSegment,{description:"Enter directory where you want the collection to be saved in. Default is Postman Collections.",id:"gitlab-directory",title:"Enter Directory",value:v,onChange:e=>{this.setState({directory:e})}}),I&&a.createElement(d.SelectSegmentV2,{optional:!0,title:"Enter Branch",description:"The collection will be pushed to this branch in the project",disabled:w||!r().isEmpty(_),isClearable:!0,isCreatable:!0,value:l,options:o,error:_,loading:w,handleRetry:()=>this.fetchBranches(h,y,l&&l.label),onTargetSelect:this.onBranchSelect,noOptionsForDropdown:"No branches found",noResultsForSearch:"We have limited access to your branches and couldn't find the one you're looking for. Enter it manually."}),a.createElement(p.default,{disabled:!e||!s||j||!T.variables.project_id||!t.file_name||"collection_gitlab_hosted"===b&&!t.base_url||!(0,m.isFormUpdated)(r().omit(this.getInitialState(),["lastSavedAccessToken"]),this.state),integrationId:h,payload:T,rule:b,service:S}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Hipchat.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MonitorHipchatSetup:function(){return f},TeamActivityHipchatSetup:function(){return b},default:function(){return v}});var s,a,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),d=n("./node_modules/react-radio-group/lib/index.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js");const h=[{validator:e=>!e||c.default.isSecureUrl(e),message:"Use secure Notification URL",type:"error"}];let f=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this)}componentDidMount(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;e&&i&&this.setState({name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}),this.fetchMonitorMeta(t)}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),m.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:i,serviceId:l,advanced:m,errorMonitorMeta:f,loadingMonitorMeta:b}=this.state,{integrationFormActions:v,source:I}=this.props;let S={name:e,executor:n,variables:{...t.url?{url:t.url}:{},options:t.options}};return o.createElement("div",null,o.createElement(p.NicknameFieldSegment,{id:"hipchat-nickname",value:e,error:r().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),o.createElement(p.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Hipchat",value:s,options:s?[s]:[],error:f,loading:b,handleRetry:()=>this.fetchMonitorMeta(n)}),o.createElement(p.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Notification URL",id:"hipchat-url",value:t.url||"",validation:h,onChange:e=>{this.setState({variables:{...t,url:e}})}}),o.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",o.createElement(u.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),m&&o.createElement("div",{className:"push-double--bottom"},o.createElement(d.RadioGroup,{name:"Hipchat advanced options",selectedValue:t.options,onChange:e=>{this.setState({variables:{...t,options:e}})}},o.createElement("div",{className:"integrations-radio-button__select-group--options"},o.createElement("label",null,o.createElement(d.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--options__radio"}),o.createElement("span",null,"Notify for all completed monitor runs"))),o.createElement("div",{className:"integrations-radio-button__select-group--options"},o.createElement("label",null,o.createElement(d.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--options__radio"}),o.createElement("span",null,"Notify for 3 failures and then first success"))))),o.createElement(g.default,{disabled:!(e&&(c.default.isSecureUrl(t.url)||!t.url)),integrationId:a,payload:S,rule:i,service:l,integrationFormActions:v,source:I}))}})||s,b=(0,l.observer)(a=class extends o.Component{constructor(e){super(e),this.state={nickname:"",url:""}}componentDidMount(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;e&&i&&this.setState({name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s})}render(){const{name:e,executor:t,variables:n,ruleId:s,integrationId:a,serviceId:i}=this.state;let l={name:e,executor:t,variables:{...n.url?{url:n.url}:{}}};return o.createElement("div",null,o.createElement(p.NicknameFieldSegment,{id:"hipchat-nickname",value:e,error:r().isEmpty(e)?"Give a nickname to your integration.":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),o.createElement(p.SensitiveFieldSegment,{title:"Notification URL",id:"hipchat-url",value:n.url||"",validation:h,onChange:e=>{this.setState({variables:{...n,url:e}})}}),o.createElement(g.default,{disabled:!(e&&(c.default.isSecureUrl(n.url)||!n.url)),integrationId:a,payload:l,rule:s,service:i}))}})||a;function v(e){const{rule:t}=e.controller.integrationData;return"monitor_run_hipchat"===t?o.createElement(f,e):"teamactivity_hipchat"===t?o.createElement(b,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Jenkins.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),u=n("./integrations/ci-cd/services/JenkinsCI.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),g=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(s=class extends a.Component{constructor(e){super(e);const{nickname:t,host_url:n,username:s,auth_token:a,project:i,projectType:r}=this.props;this.validateUser=g.debounce(this.validateUser.bind(this),500),this.fetchProjects=this.fetchProjects.bind(this),this.onProjectSelect=this.onProjectSelect.bind(this),this.getInitialState=this.getInitialState.bind(this),this.state={...this.getInitialState(),projects:[],loadingProjects:!1,selectedApi:{},selectedApiVersion:{}}}componentDidMount(){d.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({selectedApi:{id:g.get(e,"id"),name:g.get(e,"name")}})})).catch((e=>{pm.toasts.error("Something went wrong while fetching APIs, please try again"),pm.logger.error("Error occurred while fetching APIs",e)})),d.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({selectedApiVersion:{id:g.get(e,"versionId"),name:g.get(e,"name")}})})).catch((e=>{pm.toasts.error("Something went wrong while fetching API versions, please try again"),pm.logger.error("Error occurred while fetching API versions",e)})),this.fetchProjects(this.props.integrationId)}getInitialState(){const{nickname:e,host_url:t,username:n,auth_token:s,project:a,projectType:i}=this.props;return{nickname:e,host_url:t,username:n,auth_token:s,selectedProject:{label:a,value:a,type:i}}}fetchProjects(e){this.setState({loadingProjects:!0}),u.default.getProjectsByIntegrationId(e).then((e=>{let t=g.find(e,{value:this.state.selectedProject.value});this.setState({projects:e,selectedProject:t,loadingProjects:!1})})).catch((e=>{this.setState({loadingProjects:!1,projects:[]}),pm.toasts.error("Error occurred while fetching projects"),pm.logger.error("Error occurred while fetching projects",e)}))}onProjectSelect(e){return this.setState({selectedProject:e})}validateUser(){const{host_url:e,username:t,auth_token:n}=this.state,s={host_url:e,username:t,auth_token:n};u.default.validateUser(s).then((()=>{this.fetchProjects(this.props.integrationId)})).catch((e=>{pm.toasts.error("Please enter valid domain, username and authentication token"),pm.logger.error("Error occurred while authenticating",e)}))}render(){const{nickname:e,host_url:t,username:n,auth_token:s,loadingProjects:i,projects:d,selectedProject:u,selectedApi:m,selectedApiVersion:h}=this.state,{integrationId:f,rule:b,service:v}=this.props,I={id:f,name:e,variables:{host_url:t&&t.replace(/\/$/,""),username:n,...s?{auth_token:s}:{},project:u&&u.value,project_type:u&&u.type}};return a.createElement("div",{className:"ci-cd-add-integrations-form__wrapper"},a.createElement(o.NicknameFieldSegment,{id:"jenkins-nickname",value:e,error:""===e?"Please enter a nickname for your integration":"",onBlur:()=>{e&&this.setState({nickname:g.isFunction(e.trim)?e.trim():e})},onChange:e=>{this.setState({nickname:e})}}),a.createElement(o.SelectSegment,{disabled:!0,id:"jenkinsci-api",title:"Selected API",description:"The selected API is connected with this integration",selectedTarget:m,filterItems:[m],initialLabel:"Loading apis..."}),a.createElement(o.SelectSegment,{disabled:!0,id:"jenkinsci-api-version",title:"Selected API version",description:"The selected API version is connected with this integration",selectedTarget:h,filterItems:[h],initialLabel:"Loading API versions..."}),a.createElement(o.FieldSegment,{description:"Enter your domain where Jenkins server is hosted.",id:"jenkins-domain",title:"Jenkins Server URL",value:t,error:t&&!r.default.isSecureUrl(t.trim())?"Enter secure server URL":"",onBlur:()=>{t&&this.setState({host_url:g.isFunction(t.trim)?t.trim():t})},onChange:e=>{this.setState({host_url:e}),this.validateUser()}}),a.createElement(o.FieldSegment,{description:"Enter your username.",id:"jenkins-username",title:"Jenkins username",value:n,error:""===n?"Please provide your username":"",onBlur:()=>{n&&this.setState({username:g.isFunction(n.trim)?n.trim():n})},onChange:e=>{this.setState({username:e}),this.validateUser()}}),a.createElement(o.SensitiveFieldSegment,{title:"Authentication token",description:"Enter your authentication token or ",customLink:a.createElement(c.default,{extUrl:"https://go.pstmn.io/docs-jenkins-apikey"},"generate one here."),maskedPlaceholderWhenEmpty:!0,value:s,error:""===s?"Please provide your authentication token":"",onChange:e=>{this.setState({auth_token:e.trim()}),this.validateUser()}}),a.createElement(o.SelectSegmentV2,{title:"Choose your CI project",label:"Select",disabled:i||g.isEmpty(d),options:d,value:u,onTargetSelect:e=>{this.setState({selectedProject:e})},noOptionsForDropdown:"No projects found",loading:i,handleRetry:this.fetchProjects.bind(this,f)}),a.createElement(l.default,{disabled:g.isEmpty(e)||g.isEmpty(t)||g.isEmpty(n)||g.isEmpty(s)||g.isEmpty(u)||!(0,p.isFormUpdated)(this.getInitialState(),this.state),integrationId:f,payload:I,rule:b,service:v}))}})||s;function h(e){const t=g.get(e,"controller.integrationData");if("jenkins_ci"===g.get(t,"rule")){const e={apiId:g.get(t,"variables.api_id"),apiVersionId:g.get(t,"executor"),integrationId:g.get(t,"id"),nickname:g.get(t,"name"),rule:g.get(t,"rule"),service:g.get(t,"serviceId"),host_url:g.get(t,"variables.host_url"),username:g.get(t,"variables.username"),auth_token:g.get(t,"variables.auth_token"),project:g.get(t,"variables.project"),projectType:g.get(t,"variables.project_type")};return a.createElement(m,e)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/KeenIo.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let p=(0,o.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1},this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,variables:n,serviceId:s,rule:a,id:i}=this.props.controller.integrationData;return{name:e,variables:n,serviceId:s,executor:t,ruleId:a,integrationId:i}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:i,ruleId:o,serviceId:l,errorMonitorMeta:p,loadingMonitorMeta:g}=this.state,{integrationFormActions:m,source:h}=this.props,f={name:e,executor:n,variables:{...t.write_key?{write_key:t.write_key}:{},project_id:t.project_id}};return a.createElement("div",null,a.createElement(c.NicknameFieldSegment,{id:"keenio-integration-nickname",value:e,error:r().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),a.createElement(c.SelectSegmentV2,{disabled:!0,description:"The results of the selected monitor will be sent to keen",id:"keenio-monitor",title:"Choose Monitor",value:s,options:s?[s]:[],error:p,loading:g,handleRetry:()=>this.fetchMonitorMeta(n)}),a.createElement(c.FieldSegment,{id:"keenio-project",title:"Project ID",error:r().isEmpty(t.project_id)?"Please enter a project id":"",value:t.project_id,onBlur:()=>{this.setState({variables:{...t,project_id:t.project_id.trim()}})},onChange:e=>{this.setState({variables:{...t,project_id:e}})}}),a.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Write Key",id:"keenio-write-key",value:t.write_key||"",onChange:e=>{this.setState({variables:{...t,write_key:e}})}}),a.createElement(d.default,{disabled:!(e&&s&&t.project_id&&(0,u.isFormUpdated)(this.getInitialState(),this.state)),integrationId:i,payload:f,rule:o,service:l,integrationFormActions:m,source:h}))}})||s;t.default=p},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/MicrosoftFlow.js":function(e,t,n){"use strict";n.r(t),n.d(t,{CollectionMicrosoftFlowSetup:function(){return S},MonitorMicrosoftFlowSetup:function(){return v},TeamActivityMicrosoftFlowSetup:function(){return I},default:function(){return y}});var s,a,i,r=n("../../node_modules/react/index.js"),o=n("./node_modules/lodash/lodash.js"),l=n.n(o),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),m=n("./node_modules/react-radio-group/lib/index.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const b=[{validator:e=>!e||d.default.isSecureUrl(e.trim()),message:"Use secure Notification URL",type:"error"}];let v=(0,c.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",configuredOn:null,variables:{},errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1},this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),u.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:i,serviceId:o,advanced:c,errorMonitorMeta:u,loadingMonitorMeta:v}=this.state,{integrationFormActions:I,source:S}=this.props,y={name:e,executor:n,variables:{...t.webhook_url?{webhook_url:t.webhook_url}:{},options:t.options}};return r.createElement("div",null,r.createElement(p.NicknameFieldSegment,{id:"microsoft-flow-name",value:e,error:l().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(p.SelectSegmentV2,{disabled:!0,id:"microsoft-flow-monitor",title:"Choose Monitor",description:"The updates of the selected monitor will be sent to Microsoft Power Automate",value:s,options:s?[s]:[],error:u,loading:v,handleRetry:()=>this.fetchMonitorMeta(n)}),r.createElement(p.FieldSegment,{validation:b,title:"Notification URL",id:"microsoft-flow-url",value:t.webhook_url||"",onChange:e=>{this.setState({variables:{...t,webhook_url:e.trim()}})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",r.createElement(h.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),c&&r.createElement("div",{className:"push-double--bottom"},r.createElement(m.RadioGroup,{name:"Microsoft Power Automate advanced options",selectedValue:t.options,onChange:e=>{this.setState({variables:{...t,options:e}})}},r.createElement("div",{className:"integrations-radio-button__select-group--options"},r.createElement("label",null,r.createElement(m.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--options__radio"}),r.createElement("span",null,"Notify for all completed monitor runs"))),r.createElement("div",{className:"integrations-radio-button__select-group--options"},r.createElement("label",null,r.createElement(m.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--options__radio"}),r.createElement("span",null,"Notify for 3 failures and then first success"))))),r.createElement(g.default,{disabled:!s||!e||t.webhook_url&&!d.default.isSecureUrl(t.webhook_url)||!(0,f.isFormUpdated)(this.getInitialState(),this.state),integrationId:a,payload:y,rule:i,service:o,integrationFormActions:I,source:S}))}})||s,I=(0,c.observer)(a=class extends r.Component{constructor(e){super(e),this.state={name:"",configuredOn:{},variables:{},advanced:!1},this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){this.setState(this.getInitialState())}getInitialState(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s}}render(){const{name:e,variables:t,executor:n,integrationId:s,ruleId:a,serviceId:i}=this.state,o={name:e,executor:n,variables:{...t.webhook_url?{webhook_url:t.webhook_url}:{}}};return r.createElement("div",null,r.createElement(p.NicknameFieldSegment,{id:"microsoft-flow-name",value:e,error:l().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(p.FieldSegment,{validation:b,description:"All the updates happening within the team will be sent to this URL",title:"Notification URL",id:"microsoft-flow-url",value:t.webhook_url||"",onChange:e=>{this.setState({variables:{...t,webhook_url:e.trim()}})}}),r.createElement(g.default,{disabled:!e||t.webhook_url&&!d.default.isSecureUrl(t.webhook_url)||!(0,f.isFormUpdated)(this.getInitialState(),this.state),integrationId:s,payload:o,rule:a,service:i}))}})||a,S=(0,c.observer)(i=class extends r.Component{constructor(e){super(e),this.state={name:"",configuredOn:null,variables:{},errorCollectionMeta:"",loadingCollectionMeta:!1,advanced:!1},this.fetchCollectionMeta=this.fetchCollectionMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchCollectionMeta(e)}getInitialState(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s}}fetchCollectionMeta(e){this.setState({loadingCollectionMeta:!0,errorCollectionMeta:""}),u.default.fetchCollectionMeta(e).then((t=>{t.name&&t.id?this.setState({configuredOn:{isForked:l().get(t,"isForked"),forkLabel:l().get(t,"forkLabel"),baseCollectionUid:l().get(t,"baseCollectionUid"),type:l().get(t,"type"),value:e,label:t.name},loadingCollectionMeta:!1}):this.setState({errorCollectionMeta:"Unable to load collections",loadingCollectionMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorCollectionMeta:"Unable to load collections"}):pm.toasts.error("Something went wrong while fetching collections, please try again"),pm.logger.error("Error occurred while fetching collections",e),this.setState({loadingCollectionMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:i,serviceId:o,errorCollectionMeta:c,loadingCollectionMeta:u}=this.state,m={name:e,executor:n,variables:{...t.webhook_url?{webhook_url:t.webhook_url}:{}}};return r.createElement("div",null,r.createElement(p.NicknameFieldSegment,{id:"microsoft-flow-name",value:e,error:l().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(p.SelectSegmentV2,{disabled:!0,id:"microsoft-flow-collection",title:"Choose Collection",description:"The updates of the selected collection will be sent to Microsoft Power Automate",value:s,options:s?[s]:[],error:c,loading:u,handleRetry:()=>this.fetchCollectionMeta(n)}),r.createElement(p.FieldSegment,{validation:b,title:"Notification URL",id:"microsoft-flow-url",value:t.webhook_url||"",onChange:e=>{this.setState({variables:{...t,webhook_url:e.trim()}})}}),r.createElement(g.default,{disabled:!s||!e||t.webhook_url&&!d.default.isSecureUrl(t.webhook_url)||!(0,f.isFormUpdated)(this.getInitialState(),this.state),integrationId:a,payload:m,rule:i,service:o}))}})||i;function y(e){const{rule:t}=e.controller.integrationData;return"monitor_run_microsoft_flow"===t?r.createElement(v,e):"teamactivity_microsoft_flow"===t?r.createElement(I,e):"collectionactivity_microsoft_flow"===t||"collection_microsoft_flow"===t?r.createElement(S,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/MicrosoftTeams.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MonitorMicrosoftTeamsSetup:function(){return b},TeamActivityMicrosoftTeamsSetup:function(){return v},default:function(){return I}});var s,a,i=n("../../node_modules/react/index.js"),r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),g=n("./node_modules/react-radio-group/lib/index.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const f=[{validator:e=>!e||d.default.isSecureUrl(e.trim()),message:"Use secure Notification URL",type:"error"}];let b=(0,l.observer)(s=class extends i.Component{constructor(e){super(e),this.state={name:"",configuredOn:null,variables:{},errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1},this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),c.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:r,serviceId:l,advanced:c,errorMonitorMeta:b,loadingMonitorMeta:v}=this.state,{integrationFormActions:I,source:S}=this.props,y={name:e,executor:n,variables:{...t.url?{url:t.url}:{},options:t.options}};return i.createElement("div",null,i.createElement(u.NicknameFieldSegment,{id:"microsoft-teams-name",value:e,error:o().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),i.createElement(u.SelectSegmentV2,{disabled:!0,id:"microsoft-teams-monitor",title:"Choose Monitor",description:"The updates of the selected monitor will be sent to Microsoft Teams",value:s,options:s?[s]:[],error:b,loading:v,handleRetry:()=>this.fetchMonitorMeta(n)}),i.createElement(u.FieldSegment,{validation:f,title:"Notification URL",id:"microsoft-teams-url",value:t.url||"",onChange:e=>{this.setState({variables:{...t,url:e.trim()}})}}),i.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",i.createElement(m.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),c&&i.createElement("div",{className:"push-double--bottom"},i.createElement(g.RadioGroup,{name:"Microsoft Teams advanced options",selectedValue:t.options,onChange:e=>{this.setState({variables:{...t,options:e}})}},i.createElement("div",{className:"integrations-radio-button__select-group--options"},i.createElement("label",null,i.createElement(g.Radio,{value:"all_runs",className:"radio-button integrations-radio-button__select-group--options__radio"}),i.createElement("span",null,"Notify for all completed monitor runs"))),i.createElement("div",{className:"integrations-radio-button__select-group--options"},i.createElement("label",null,i.createElement(g.Radio,{value:"only_failures",className:"radio-button integrations-radio-button__select-group--options__radio"}),i.createElement("span",null,"Notify for 3 failures and then first success"))))),i.createElement(p.default,{disabled:!s||!e||t.url&&!d.default.isSecureUrl(t.url)||!(0,h.isFormUpdated)(this.getInitialState(),this.state),integrationId:a,payload:y,rule:r,service:l,integrationFormActions:I,source:S}))}})||s,v=(0,l.observer)(a=class extends i.Component{constructor(e){super(e),this.state={name:"",configuredOn:"",variables:{},advanced:!1},this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){this.setState(this.getInitialState())}getInitialState(){const{name:e,executor:t,rule:n,id:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:n,integrationId:s}}render(){const{name:e,variables:t,executor:n,integrationId:s,ruleId:a,serviceId:r}=this.state,l={name:e,executor:n,variables:{...t.url?{url:t.url}:{}}};return i.createElement("div",null,i.createElement(u.NicknameFieldSegment,{id:"microsoft-teams-name",value:e,error:o().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),i.createElement(u.FieldSegment,{validation:f,title:"Notification URL",id:"microsoft-teams-url",value:t.url||"",onChange:e=>{this.setState({variables:{...t,url:e}})}}),i.createElement(p.default,{disabled:!e||t.url&&!d.default.isSecureUrl(t.url)||!(0,h.isFormUpdated)(this.getInitialState(),this.state),integrationId:s,payload:l,rule:a,service:r}))}})||a;function I(e){const{rule:t}=e.controller.integrationData;return"monitor_run_microsoft_teams"===t?i.createElement(b,e):"teamactivity_microsoft_teams"===t?i.createElement(v,e):void 0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=(n("../../node_modules/mobx/lib/mobx.module.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js")),o=n("./node_modules/react-radio-group/lib/index.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),p=n("./node_modules/lodash/lodash.js");let g=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,configuredOn:t,variables:n,executor:s,integrationId:i,ruleId:l,serviceId:g,errorMonitorMeta:m,loadingMonitorMeta:h,region:f}=this.state,{integrationFormActions:b,source:v}=this.props;let I={name:e,executor:s,variables:{region:n.region,...n.api_key?{api_key:n.api_key}:{}}};return a.createElement("div",null,a.createElement(r.NicknameFieldSegment,{id:"new-relic-nickname",value:e,error:p.isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),a.createElement(r.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",value:t,options:t?[t]:[],error:m,loading:h,handleRetry:()=>this.fetchMonitorMeta(s)}),a.createElement(r.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"New Relic API Key",description:"Enter the API Key provided by New Relic or ",customLink:a.createElement(d.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:n.api_key||"",onChange:e=>{this.setState({variables:{...n,api_key:e}})}}),a.createElement("div",{className:"push-double--bottom"},a.createElement("label",null,a.createElement("h4",{className:"integrations-add-card__label-title"},"Select New Relic region"),a.createElement("p",{className:"integrations-add-card__label-description"},"This helps us know what New Relic region to use")),a.createElement(o.RadioGroup,{name:"Select New Relic site",selectedValue:n.region,onChange:e=>{this.setState({variables:{...n,region:e}})}},a.createElement("div",{className:"integrations-radio-button__select-group--regions"},a.createElement("label",null,a.createElement(o.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),a.createElement("span",null,"US (.com)"))),a.createElement("div",{className:"integrations-radio-button__select-group--regions"},a.createElement("label",null,a.createElement(o.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),a.createElement("span",null,"EU (.eu)"))))),a.createElement(c.default,{disabled:!(t&&e&&n.region&&(0,u.isFormUpdated)(this.getInitialState(),this.state)),integrationId:i,payload:I,rule:l,service:g,integrationFormActions:b,source:v}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Opsgenie.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("./node_modules/react-radio-group/lib/index.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/TagsSegment.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),m=n("./node_modules/lodash/lodash.js");let h=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:"",priority:"",tags:[],advanced:!1},this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onAlertPrioritySelect=this.onAlertPrioritySelect.bind(this),this.handleTagsChange=this.handleTagsChange.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState({...this.getInitialState(),errorMonitorMeta:"",loadingMonitorMeta:!1}),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData,r=[{id:"1",label:"P1 - Critical",value:"P1"},{id:"2",label:"P2 - High",value:"P2"},{id:"3",label:"P3 - Moderate",value:"P3"},{id:"4",label:"P4 - Low",value:"P4"},{id:"5",label:"P5 - Informational",value:"P5"}];return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n,priorityList:r,selectedAlertPriority:m.find(r,["value",i.alert_priority])||{id:"",label:"",value:""},tags:i.tags,priority:i.alert_priority,opsgenieSite:i.opsgenie_site,region:i.region}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}onAlertPrioritySelect(e){this.setState({priority:e.value,selectedAlertPriority:e})}handleTagsChange(e){this.setState({tags:e})}render(){const{name:e,priority:t,configuredOn:n,variables:s,tags:i,executor:l,integrationId:h,ruleId:f,serviceId:b,errorMonitorMeta:v,loadingMonitorMeta:I,opsgenieSite:S,errorOpsgenieSite:y}=this.state,{integrationFormActions:_,source:E}=this.props;let A={name:e,executor:l,variables:{region:s.region,alert_priority:t,tags:i,opsgenie_site:S,...s.api_key?{api_key:s.api_key}:{}}};return a.createElement("div",null,a.createElement(r.NicknameFieldSegment,{id:"opsgenie-nickname",value:e,onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),a.createElement(r.SelectSegmentV2,{disabled:!0,title:"Choose monitor",description:"The results of the selected monitor will be sent to Opsgenie",value:n,options:n?[n]:[],error:v,loading:I,handleRetry:()=>this.fetchMonitorMeta(l)}),a.createElement(d.default,{tags:this.state.tags,onTagsChange:this.handleTagsChange,tagValidator:this.isValidEmail,description:"Add tags to your Opsgenie alert",index:this.state.tags.length}),a.createElement(r.SelectSegmentV2,{title:"Choose alert priority",description:"Set priority for your Opsgenie alert",options:this.state.priorityList,value:this.state.selectedAlertPriority,onTargetSelect:this.onAlertPrioritySelect}),a.createElement(r.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Opsgenie API key",description:"Enter the API key provided by Opsgenie or",customLink:a.createElement(u.default,{extUrl:"https://go.pstmn.io/docs-opsgenie-apikey"},"generate one here"),id:"opsgenie-key",value:s.api_key||"",onChange:e=>{this.setState({variables:{...s,api_key:e}})}}),a.createElement(r.FieldSegment,{description:"Enter OpsGenie site",placeholder:"https://<example>.app.opsgenie.com",id:"opsgenie-site",title:"OpsGenie Site",value:S,error:y||S&&(w=S.trim(),p.default.isSecureUrl(w)?p.default.isBaseUrl(w)?"":"Use secure host URL without trailing '/'":"Use secure host URL"),onBlur:()=>{this.setState({opsgenieSite:S.trim(),errorOpsgenieSite:m.isEmpty(S.trim())?"Please enter the OpsGenie site":""})},onChange:e=>{this.setState({opsgenieSite:e,errorOpsgenieSite:""})}}),a.createElement("div",{className:"integrations-add-card__segment"},a.createElement("label",null,a.createElement("div",null,a.createElement("div",{className:"integrations-add-card__label-title"}," Select Opsgenie site "),a.createElement("div",{className:"integrations-add-card__label-description"},"This helps us know what Opsgenie region to use"))),a.createElement(o.RadioGroup,{name:"Select Opsgenie site",selectedValue:s.region,onChange:e=>{this.onRegionSelectorChange(e)}},a.createElement("div",{className:"integrations-add-card__input"},a.createElement("div",{className:"integrations-radio-button__select-group--regions",onClick:()=>{this.setState({variables:{...s,region:"us"}})}},a.createElement("label",null,a.createElement(o.Radio,{value:"us",className:"radio-button integrations-radio-button__select-group--regions__radio region-us"}),a.createElement("span",null,"US (api.opsgenie.com)"))),a.createElement("div",{className:"integrations-radio-button__select-group--regions",onClick:()=>{this.setState({variables:{...s,region:"eu"}})}},a.createElement("label",null,a.createElement(o.Radio,{value:"eu",className:"radio-button integrations-radio-button__select-group--regions__radio region-eu"}),a.createElement("span",null,"EU (api.eu.opsgenie.com)")))))),a.createElement(c.default,{disabled:!(n&&e&&s.region&&(0,g.isFormUpdated)(this.getInitialState(),this.state)),integrationId:h,payload:A,rule:f,service:b,integrationFormActions:_,source:E}));var w}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Pagerduty.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let g=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),l.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:o,serviceId:l,advanced:g,errorMonitorMeta:m,loadingMonitorMeta:h}=this.state,{integrationFormActions:f,source:b}=this.props;let v={name:e,executor:n,variables:{...t.service_key?{service_key:t.service_key}:{}}};return r.createElement("div",null,r.createElement(c.NicknameFieldSegment,{id:"pagerduty-integration-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(c.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to PagerDuty",value:s,options:s?[s]:[],error:m,loading:h,handleRetry:()=>this.fetchMonitorMeta(n)}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,customLink:r.createElement(u.default,{extUrl:"https://go.pstmn.io/docs-pagerduty-integration"},"create new one"),description:"Enter your PagerDuty Integration Key or",id:"pagerduty-key",title:"PagerDuty Integration Key",value:t.service_key||"",onChange:e=>{this.setState({variables:{...t,service_key:e}})}}),r.createElement(d.default,{disabled:!(s&&e&&(0,p.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:v,rule:o,service:l,integrationFormActions:f,source:b}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Sentry.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),o=n("./js/services/NavigationService.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),p=n("./integrations/monitoring/sentry/constants.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./appsdk/workbench/TabService.js"),f=n("./integrations/navigation/constants.js"),b=n("./integrations/monitoring/sentry/components/FormComponent.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),I=n("./integrations/monitoring/sentry/helper.js"),S=n("./api-dev/constants/APISubViews.js"),y=n("./integrations/monitoring/constants.js"),_=n("./node_modules/lodash/lodash.js");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},E.apply(this,arguments)}let A=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1},this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{rule:e,source:t,selectedWorkspace:n,showDisabledApiVersionSelector:s}=this.props,{inputs:i,name:l,id:c}=(0,r.toJS)(this.props.integrationData),g=_.reduce(i,((e,t)=>(e[_.get(t,"key")]=_.get(t,"value"),e)),{}),m=_.get(g,"api"),A=_.get(g,"apiversion"),w=n||this.store.selectedWorkspace&&this.store.selectedWorkspace.value;return a.createElement("div",null,a.createElement(b.default,E({selectedWorkspace:w,apiId:m,apiVersionId:A,showDisabledApiVersionSelector:!_.isBoolean(s)||s,rule:e,defaultName:l,defaultAccessToken:_.get(g,"access_token"),defaultProject:_.get(g,"project_slug"),defaultOrganisation:_.get(g,"organisation_slug"),defaultDomain:_.get(g,"domain"),optionalFormComponents:(n,s,i)=>a.createElement(d.default,{justifyContent:"flex-start"},a.createElement(v.default,{classId:p.INTEGRATION_CLASS_NAME,disabled:!(n&&i),inputs:s.inputs,name:s.name,integrationId:c,onEdit:()=>{(0,I.isOriginApiBuilder)(t)?(this.store.setRuleSpecificTeamIntegrations(e,null),pm.windowEvents.emit(`${y.API_MONITORING}-integration-edited`,{apiId:m,apiVersionId:A,integrationId:c}),h.default.closeByRoute(f.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:m,integrationId:`${c}`}),o.default.transitionTo(p.DETAILED_ISSUES_ROUTE_IDENTIFIER,{apiId:m,versionId:A,integrationId:`${c}`})):o.default.transitionTo(f.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,{integrationId:`${c}`})}}),a.createElement(u.default,{onCancel:()=>{(0,I.isOriginApiBuilder)(t)?(h.default.closeByRoute(f.V10_API_EDIT_APM_INTEGRATION_URL,{integrationId:`${c}`,apiId:m}),o.default.transitionTo("build.apiVersion",{apiId:m,versionId:A},{tab:S.MONITORING})):o.default.back()}}))},this.props)))}})||s;A.propTypes={integrationData:m().object.isRequired,integrationId:m().string.isRequired,showDisabledApiVersionSelector:m().bool,source:m().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Splunk.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/utils/utils.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let m=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),d.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}render(){const{name:e,configuredOn:t,variables:n,executor:s,integrationId:a,ruleId:o,serviceId:d,errorMonitorMeta:m,loadingMonitorMeta:h}=this.state,{integrationFormActions:f,source:b}=this.props;let v={name:e,executor:s,variables:{hec_token:n.hec_token,splunk_host:n.splunk_host,splunk_port:n.splunk_port}};return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"splunk-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose monitor",description:"The results of the selected monitor will be sent to Splunk",value:t,options:t?[t]:[],error:m,loading:h,handleRetry:()=>this.fetchMonitorMeta(s)}),r.createElement(l.SensitiveFieldSegment,{title:"Splunk HEC token",description:"Enter the HEC token provided by Splunk. ",customLink:r.createElement(p.default,{extUrl:"https://go.pstmn.io/docs-splunk-integration"},"Learn more"),id:"splunk-hec-token",value:n.hec_token||"",onChange:e=>{this.setState({variables:{...n,hec_token:e.trim()}})}}),r.createElement(l.FieldSegment,{className:"splunk-host-url",description:r.createElement("div",null,r.createElement("span",null,"Enter the Splunk HEC URL. "),r.createElement(p.default,{extUrl:"https://go.pstmn.io/docs-splunk-host"},"Learn more")),id:"splunk-host-url",title:"Splunk HEC URL",value:n.splunk_host,error:i().isEmpty(n.splunk_host)?"Please enter a URL":(I=n.splunk_host,c.default.isSecureUrl(I)?c.default.isBaseUrl(I)?"":"Use secure host URL without trailing '/'":"Use secure host URL"),onChange:e=>{this.setState({variables:{...n,splunk_host:e.trim()}})}}),r.createElement(l.FieldSegment,{className:"splunk-port",id:"splunk-port",title:"Splunk port",value:n.splunk_port,error:i().isEmpty(n.splunk_port)?"Please enter port number":"",onChange:e=>{this.setState({variables:{...n,splunk_port:e.trim()}})}}),r.createElement(u.default,{disabled:!(t&&e&&n.splunk_host&&c.default.isSecureUrl(n.splunk_host)&&c.default.isBaseUrl(n.splunk_host)&&n.splunk_port&&(0,g.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:v,rule:o,service:d,integrationFormActions:f,source:b}));var I}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Statuspage.js":function(e,t,n){"use strict";n.r(t),n.d(t,{EditStatuspage:function(){return v},default:function(){return I}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),d=n("./js/components/base/Inputs.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/statuspage.js"),h=n.n(m),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/StatuspageHelper.js");let v=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",errorName:"",pages:[],components:[],variables:{},create_incident:!1,update_component:!1,incident_name:"",errorIncidentName:"",selectedSuccessStatus:null,selectedFailureStatus:null,selectedPage:null,selectedComponent:null,selectedIncidentStatus:null,selectedImpact:null,configuredOn:null,loadingMonitorMeta:!1,loadingPages:!1,loadingComponents:!1,errorMonitorMeta:"",errorPages:"",errorComponents:""},this.fetchComponents=this.fetchComponents.bind(this),this.onPageSelect=this.onPageSelect.bind(this),this.onSuccessStatusSelect=this.onSuccessStatusSelect.bind(this),this.onFailureStatusSelect=this.onFailureStatusSelect.bind(this),this.onComponentSelect=this.onComponentSelect.bind(this),this.onIncidentSelect=this.onIncidentSelect.bind(this),this.onImpactSelect=this.onImpactSelect.bind(this),this.toggle=this.toggle.bind(this),this.isDisabled=this.isDisabled.bind(this),this.fetchPages=this.fetchPages.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){this.setState(this.getInitialState(),(()=>{this.fetchMonitorMeta(),this.fetchPages(),this.fetchComponents()}))}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,executor:t,serviceId:a,variables:i,create_incident:i.create_incident,update_component:i.update_component,incident_name:i.incident_name,integrationId:n,ruleId:s,...(0,b.fetchSelectedOptions)(i)}}fetchMonitorMeta(){const{executor:e}=this.state;this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),u.default.fetchMonitorMeta(e).then((t=>{this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}fetchPages(){const{integrationId:e,variables:t}=this.state;this.setState({loadingPages:!0,errorPages:""}),p.default.fetchActionDetails(e,{type:"listPages"}).then((e=>{if(200===e.status&&i().get(e,"body.data")){let n=i().get(e,"body.data").map((e=>({label:e.name,value:e.id})));this.setState({selectedPage:i().find(n,["value",t.page_id]),pages:n,loadingPages:!1,errorPages:""})}})).catch((e=>{pm.toasts.error("Something went wrong while fetching status pages, please try again"),this.setState({loadingPages:!1,errorPages:"Unable to load status pages"})}))}fetchComponents(){const{integrationId:e,variables:t}=this.state;this.setState({loadingComponents:!0,errorComponents:""}),p.default.fetchActionDetails(e,{type:"listComponents",page_id:t.page_id}).then((e=>{if(200===e.status&&i().get(e,"body.data")){let n=i().get(e,"body.data").map((e=>({label:e.name,value:e.id})));this.setState({components:n,selectedComponent:i().find(n,["value",t.component_id]),loadingComponents:!1,errorComponents:""})}})).catch((e=>{this.setState({loadingComponents:!1,errorComponents:"Unable to load components"}),pm.toasts.error("Something went wrong while fetching components, please try again")}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onSuccessStatusSelect(e){i().isEmpty(e)?this.setState({selectedSuccessStatus:null}):this.setState({selectedSuccessStatus:e})}onFailureStatusSelect(e){i().isEmpty(e)?this.setState({selectedFailureStatus:null}):this.setState({selectedFailureStatus:e})}onPageSelect(e){i().isEmpty(e)?this.setState({selectedPage:null,variables:{...this.state.variables,page_id:""}}):this.setState({selectedPage:e,variables:{...this.state.variables,page_id:e.value}},(()=>{this.fetchComponents()}))}onComponentSelect(e){i().isEmpty(e)?this.setState({selectedComponent:null,variables:{...this.state.variables,component_id:""}}):this.setState({selectedComponent:e,variables:{...this.state.variables,component_id:e.value}})}onIncidentSelect(e){i().isEmpty(e)?this.setState({selectedIncidentStatus:null}):this.setState({selectedIncidentStatus:e})}onImpactSelect(e){i().isEmpty(e)?this.setState({selectedImpact:null}):this.setState({selectedImpact:e})}isDisabled(){let{update_component:e,selectedComponent:t,selectedSuccessStatus:n,selectedFailureStatus:s,create_incident:a,incident_name:r,selectedIncidentStatus:o,selectedImpact:l,selectedPage:c}=this.state;return!i().get(c,"value")||(!e&&!a||(!(!e||i().get(t,"value")&&i().get(s,"value")&&i().get(n,"value"))||!(!a||r&&i().get(o,"value")&&i().get(l,"value"))))}render(){const{name:e,update_component:t,create_incident:n,incident_name:s,pages:a,selectedPage:o,errorName:u,selectedSuccessStatus:p,selectedFailureStatus:m,components:b,selectedComponent:v,errorMonitorMeta:I,loadingMonitorMeta:S,integrationId:y,selectedIncidentStatus:_,selectedImpact:E,loadingComponents:A,loadingPages:w,errorPages:C,errorIncidentName:k,errorComponents:j,variables:P,executor:T,configuredOn:N,ruleId:D,serviceId:R}=this.state,{integrationFormActions:O,source:x}=this.props,M={name:e,executor:T,variables:{page_id:i().get(o,"value"),update_component:t,component_id:t?i().get(v,"value"):"",component_status_on_failure:t?i().get(m,"value"):"",component_status_on_success:t?i().get(p,"value"):"",create_incident:n,incident_name:n?s:"",incident_status:n?i().get(_,"value"):"",incident_impact:n?i().get(E,"value"):"",...P.api_key?{api_key:P.api_key}:{}}},L=this.isDisabled();return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"statuspage-nickname",value:e,error:u,onBlur:()=>{this.setState({nickname:e.trim(),errorName:i().isEmpty(e.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({name:e,errorName:""})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose monitor",description:"Results from this monitor will be sent to your status page",value:N,options:N?[N]:[],error:I,loading:S,handleRetry:()=>this.fetchMonitorMeta()}),r.createElement(l.SensitiveFieldSegment,{className:"statuspage-key",description:"Enter your API key generated in Statuspage or",customLink:r.createElement(c.default,{extUrl:"https://go.pstmn.io/docs-statuspage-apikey"},"generate one here"),id:"statuspage-key",title:"Statuspage API key",value:P.api_key||"",onChange:e=>{this.setState({variables:{...P,api_key:e}})}}),r.createElement(l.SelectSegmentV2,{title:"Select page",description:"Where monitor updates will be sent",placeholder:"Type to filter pages",options:a,value:o,onTargetSelect:this.onPageSelect,loading:w,error:C,handleRetry:()=>this.fetchPages(),noOptionsForDropdown:"No page found"}),r.createElement("div",{className:"integrations-checkbox__select-group"},r.createElement("div",{className:"integrations-checkbox__select-group--label-title"},"Statuspage actions"),r.createElement("div",{className:"integrations-checkbox__select-group--actions"},r.createElement(d.Checkbox,{checked:t,onChange:()=>{this.toggle("update_component")}}),r.createElement("div",{className:"checkbox__label"},"Link monitor to component",r.createElement("div",{className:"checkbox__helper-text"},"When tests fail on a monitoring run, the linked components status will automatically update.",r.createElement(c.default,{extUrl:"https://go.pstmn.io/docs-statuspage-components"},"Learn more about components")))),t&&r.createElement("div",{className:"integrations-form__disclosed"},r.createElement(l.SelectSegmentV2,{title:"Component",disabled:!t,loading:A,placeholder:"Type to filter components",options:b,value:v,onTargetSelect:this.onComponentSelect,error:j,handleRetry:()=>this.fetchComponents(),noOptionsForDropdown:"No component found"}),r.createElement(l.SelectSegmentV2,{title:"Component success status",description:"This status will display on a successful monitor run",disabled:!t,placeholder:"Type to filter statuses",options:h().componentStatuses,value:p,onTargetSelect:this.onSuccessStatusSelect,noOptionsForDropdown:"No Status found"}),r.createElement(l.SelectSegmentV2,{title:"Component failure status",description:"This status will display on a failed monitor run",disabled:!t,placeholder:"Type to filter statuses",options:h().componentStatuses,value:m,onTargetSelect:this.onFailureStatusSelect,noOptionsForDropdown:"No Status found"})),r.createElement("div",{className:"integrations-checkbox__select-group--actions"},r.createElement(d.Checkbox,{checked:n,onChange:()=>{this.toggle("create_incident"),this.setState({errorIncidentName:""})}}),r.createElement("div",{className:"checkbox__label"},"Create incident when monitoring run fails",r.createElement("div",{className:"checkbox__helper-text"},"When tests fail on a monitoring run, an incident will be created on Statuspage for the linked component.",r.createElement(c.default,{extUrl:"https://go.pstmn.io/docs-statuspage-incidents"},"Learn more about incidents")))),n&&r.createElement("div",{className:"integrations-form__disclosed"},r.createElement(l.FieldSegment,{disabled:!n,id:"incident-name",title:"Incident name",value:s||"",error:k,onBlur:()=>{this.setState({incident_name:s.trim(),errorIncidentName:n&&i().isEmpty(s.trim())?"Please enter the incident name":""})},onChange:e=>{this.setState({incident_name:e})},placeholder:"e.g. API requests timing out"}),r.createElement(l.SelectSegmentV2,{title:"Incident status",disabled:!n,placeholder:"Type to filter statuses",options:h().incidentStatuses,value:_,onTargetSelect:this.onIncidentSelect,noOptionsForDropdown:"No Status found"}),r.createElement(l.SelectSegmentV2,{title:"Incident impact",disabled:!n,placeholder:"Type to filter statuses",options:h().impacts,value:E,onTargetSelect:this.onImpactSelect,noOptionsForDropdown:"No impacts found"}))),r.createElement(g.default,{disabled:!(N&&e)||L||!(0,f.isFormUpdated)(this.getInitialState(),this.state),integrationId:y,payload:M,rule:D,service:R,integrationFormActions:O,source:x}))}})||s;function I(e){const{rule:t}=e.controller.integrationData;if("monitor_run_statuspage"===t)return r.createElement(v,e)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/TravisCI.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("./integrations/ci-cd/components/TravisCIFormData.js"),r=n("./integrations/navigation/constants.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),c=n("./node_modules/lodash/lodash.js");function d(e){const t=c.get(e,"integrationData"),n=c.get(e,"classData"),d=c.get(t,"class"),u=c.reduce(t.inputs,((e,t)=>(e[c.get(t,"key")]=c.get(t,"value"),e)),{}),p=c.get(u,"api_id"),g=c.get(u,"apiversion"),m=c.get(t,"id"),h=c.get(t,"name"),f=c.get(n,"services.0.id"),b=c.get(u,"repository_id"),v=c.get(u,"travisci_token");return s.createElement(i.default,{apiId:p,apiVersionId:g,classId:d,renderDisabledApiApiversionSelector:!0,defaultTravisCIToken:v,defaultSelectedProjectId:b,defaultName:h,optionalFormComponents:(e,t,n)=>s.createElement(a.default,{justifyContent:"flex-start",gap:"spacing-s"},s.createElement(o.default,{classId:d,disabled:!e||!n,inputs:t.inputs,name:t.name,redirectPageId:r.TEAM_INTEGRATIONS_IDENTIFIER,redirectParams:{serviceId:f,ruleId:d},integrationId:m}),s.createElement(l.default,null))})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/VictorOps.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let g=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,errorMonitorMeta:"",loadingMonitorMeta:!1,advanced:!1},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:a,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:a,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),u.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,variables:t,executor:n,configuredOn:s,integrationId:a,ruleId:o,serviceId:u,advanced:g,errorMonitorMeta:m,loadingMonitorMeta:h}=this.state,{integrationFormActions:f,source:b}=this.props;let v={name:e,executor:n,variables:{...t.api_key?{api_key:t.api_key}:{},...t.routing_key?{routing_key:t.routing_key}:{}}};return r.createElement("div",null,r.createElement(c.NicknameFieldSegment,{id:"victorops-integration-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(c.SelectSegmentV2,{disabled:!0,id:"victorops-monitor",title:"Choose Monitor",description:"The results of the selected monitor will be sent to Splunk On-Call",value:s,options:s?[s]:[],error:m,loading:h,handleRetry:()=>this.fetchMonitorMeta(n)}),r.createElement(c.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"API Key",id:"victorops-api-key",value:t.api_key||"",onChange:e=>{this.setState({variables:{...t,api_key:e.trim()}})}}),r.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options",r.createElement(l.default,{className:"push-half--left",name:"icon-state-decrease",size:"small"})),g&&r.createElement(c.FieldSegment,{title:"Routing Key",id:"victorops-routing-key",description:"Enter your Splunk On-Call Routing Key",value:t.routing_key||"",onChange:e=>{this.setState({variables:{...t,routing_key:e.trim()}})}}),r.createElement(d.default,{disabled:!(e&&s&&(0,p.isFormUpdated)(this.getInitialState(),this.state)),integrationId:a,payload:v,rule:o,service:u,integrationFormActions:f,source:b}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),o=n("./js/components/base/Buttons.js"),l=n("./js/services/NavigationService.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}let d=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{integrationId:e,integrationFormActions:t}=this.props;return a.createElement("div",{className:"integrations-edit-actions__button--container"},a.createElement(o.Button,c({className:"integrations-edit-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{t?t(e,"cancel"):(l.default.back(),this.store.resetAddIntegrationDependencies())}},this.props)," Cancel "))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=(n("./node_modules/lodash/lodash.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js")),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(this,arguments)}function o(e){let{disabled:t,integrationId:n,payload:o,integrationFormActions:l,source:c,showDivider:d,...u}=e;return c||(c="team_integrations_edit_forms"),s.createElement("div",null,d&&s.createElement("hr",{className:"integration-edit-actions__separator"}),s.createElement("div",{className:"integration-edit-actions__button"},s.createElement(i.default,r({disabled:t,integrationId:n,payload:o,integrationFormActions:l,source:c},u)),s.createElement(a.default,r({integrationId:n,payload:o,integrationFormActions:l,source:c},u))))}o.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:n,payload:l,value:c}=e,[d,u]=(0,s.useState)(!1);return s.createElement(a.default,{className:"integrations-edit-actions__button--container-inline"},s.createElement(i.default,{type:"secondary",text:"Cancel",isDisabled:d,onClick:()=>{e.onSave("",o.RESET)}}),s.createElement(i.default,{type:"primary",text:"Save",isDisabled:t,isLoading:d,onClick:()=>{u(!0),r.default.updateIntegration(n,l).then((t=>{e.onSave(c)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{u(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./js/services/NavigationService.js"),d=n("./integrations/navigation/constants.js"),u=n("./integrations/monitoring/constants.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./js/modules/services/AnalyticsService.js"),h=n("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f.apply(this,arguments)}let b=(0,p.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:s,service:o,source:l,integrationFormActions:p,generatePayload:b,...v}=this.props,I=l||"team_integrations_edit_forms";return a.createElement("div",{className:"integrations-edit-actions__button--container"},a.createElement(i.Button,f({type:"primary",className:"integrations-edit-actions__button--save-changes",disabled:e||this.store.isAdding,size:"small",tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:async()=>{this.store.updateIsAdding(!0);let e=h.assign({},t);if(h.isFunction(b))try{e=await b(t)}catch(e){return this.store.updateIsAdding(!1),void pm.toasts.error(u.ERROR_ADDING_NEW_RELIC_TO_TEAM)}r.default.updateIntegration(n,e).then((e=>{this.store.updateIsAdding(!1),200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${h.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),m.default.addEventV2({category:"integrations",action:s+"_edited_integration",label:I,value:1}),p&&h.isFunction(p)?p(n):(c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:o,ruleId:s}),this.store.setRuleSpecificTeamIntegrations(s,null),this.store.resetAddIntegrationDependencies())):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"})})).catch((e=>{this.store.updateIsAdding(!1),this.store.resetAddIntegrationDependencies(),pm.toasts.error(h.get(e,"error.details.message")||h.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}},v)," ",this.store.isAdding?a.createElement(g.default,null):"Save Changes"))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/stores/StoreManager.js"),o=n("./js/stores/IntegrationsStore.js"),l=n("./js/components/base/Buttons.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("./js/services/NavigationService.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f.apply(this,arguments)}let b=(0,a.observer)(s=class extends i.Component{constructor(e){super(e),this.state={loading:!1},this.store=(0,r.resolveStoreInstance)(o.default)}render(){const{classId:e,disabled:t,inputs:n,name:s,integrationId:a,onEdit:r,redirectPageId:o,redirectParams:g,...m}=this.props;return i.createElement("div",{className:"integrations-edit-actions__button--container"},i.createElement(l.Button,f({type:"primary",className:"integrations-edit-actions__button--save-changes",disabled:t||this.state.loading,size:"small",tooltip:t?"Make sure that you have entered all the mandatory fields":"",onClick:()=>{this.store.updateIsAdding(!0),this.setState({loading:!0},(()=>p.default.updateIntegrationInstance(a,s||null,n).then((t=>(200===t.status&&h.get(t.body,"data.id")?(pm.toasts.success(`You updated the ${h.get(t.body,"data.name","requested")} integration`,{noIcon:!0,title:"Changes Saved"}),c.default.addEventV2({category:"integrations",action:e+"_edited_integration",label:"team_integrations_edit_forms_default",value:1}),o&&d.default.transitionTo(o,g||{}),this.store.setRuleSpecificTeamIntegrations(e,null),this.store.resetAddIntegrationDependencies()):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.store.updateIsAdding(!1),this.setState({loading:!1},(()=>{r&&r()}))))).catch((e=>(pm.toasts.error(h.get(e,"error.details.message")||h.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e),this.store.updateIsAdding(!1),this.store.resetAddIntegrationDependencies(),this.setState({loading:!1}))))))}},m)," ",this.state.loading?i.createElement(u.default,null):"Save Changes"))}})||s;b.propTypes={redirectPageId:m().string,redirectParams:m().object,onEdit:m().func}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultIntegrationInstanceEditComponent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/IntegrationFormInput.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),u=n("./integrations/navigation/constants.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),m=n("./js/modules/services/APIService.js");function h(e,t){const n=o().reduce(o().get(e,"integrationData.inputs",{}),((e,t)=>o().assign(e,{[t.key]:t.value})),{});return o().map(o().get(e,"classData.inputs",[]),(e=>({...e,value:o().has(t.inputs,e.key)?o().get(t.inputs,e.key):o().get(n,e.key,null),error:t.inputErrors[e.key]||null})))}let f=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={nickname:null,inputs:{},inputErrors:{},allInputsList:h(e,{inputs:{},inputErrors:{}}),hasInvalidInput:!1},this.updateAllInputsList=this.updateAllInputsList.bind(this),this.performValidation=this.performValidation.bind(this)}componentDidMount(){this.updateAllInputsList()}updateAllInputsList(){this.setState({allInputsList:h(this.props,this.state)})}getInputError(e,t){const n=o().isNil(t)||(o().isObject(t)||o().isString(t))&&o().isEmpty(t);return e.mandatory&&n&&"This field is mandatory"}performValidation(e,t=(()=>{})){return g.default.getValidationError(e,this.state.inputs[e.key],this.state.allInputsList).then((n=>n?this.setState((t=>({inputErrors:{...t.inputErrors,[e.key]:n}})),t):t())).catch((n=>(pm.logger.error("Error occurred while performing validation",e.validator,n),t())))}foundInvalidInput(){this.state.hasInvalidInput||this.setState({hasInvalidInput:!0},(()=>{"browser"!==window.SDK_PLATFORM?(pm.toasts.error("Your current app version does not fully support this integration. Opening the integration creation form on the browser.",{title:"Integration is not fully supported on your app."}),(0,m.openAuthenticatedRoute)(`${pm.artemisUrl}/integrations/${this.props.integrationId}`)):(pm.toasts.error("There was an issue loading one of the form inputs. The form may not function as expected."),pm.logger.error("An error occurred while rendering an input",{classId:this.props.classId,integrationId:this.props.integrationId}))}))}render(){const{classId:e,classData:t,integrationId:n,integrationData:s,preferredEntities:i}=this.props,r=t.inputs||[],g=o().reduce(s.inputs,((e,t)=>o().assign(e,{[t.key]:t.value})),{});return a.createElement(a.Fragment,null,a.createElement("div",{className:"integrations-edit-card__form"},a.createElement(l.NicknameFieldSegment,{id:"edit-nickname",value:o().isNil(this.state.nickname)?s.name:this.state.nickname,error:""===this.state.nickname?"Give a nickname to your integration.":"",onBlur:()=>{this.setState({nickname:o().isFunction(this.state.nickname.trim)?this.state.nickname.trim():this.state.nickname})},onChange:e=>{this.setState({nickname:e})}}),r.map(((e,t)=>a.createElement(c.default,{disabled:!e.editable,error:o().get(this.state.inputErrors,e.key,!1),currentValue:o().has(this.state,["inputs",e.key])?o().get(this.state.inputs,e.key):o().get(g,e.key),input:e,integrationInstanceId:n,key:t,onUserInput:(t,n=!1)=>{this.setState((n=>({inputs:{...n.inputs,[e.key]:t},inputErrors:{...n.inputErrors,[e.key]:this.getInputError(e,t)}})),(()=>{n&&this.performValidation(e,this.updateAllInputsList)}))},allInputs:this.state.allInputsList,onBlur:()=>{this.performValidation(e,this.updateAllInputsList)},preferredEntities:i}))),a.createElement("hr",{className:"integrations-edit-actions__separator"}),a.createElement("div",{className:"integrations-edit-actions__button"},a.createElement(p.default,{classId:e,disabled:o().some(this.state.inputErrors,Boolean)||""===this.state.nickname,inputs:this.state.inputs,name:this.state.nickname,integrationId:n,redirectPageId:u.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,redirectParams:{integrationId:n}}),a.createElement(d.default,null))))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/ChannelSelector.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("./node_modules/lodash/lodash.js"),u=n.n(d),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),m=n("./node_modules/async/dist/async.js"),h=n.n(m),f=n("./node_modules/prop-types/index.js"),b=n.n(f),v=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const I=(0,v.default)(a.default)`
    border-radius: var(--border-radius-default);
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
    &:hover {
      background-color: var(--background-color-tertiary);
      border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
    }
`,S=pm.logger.getContext("Channel selector","integrations"),y=v.default.div`
  padding: 6px;
  padding-left: var(--spacing-s);
  flex: 1 1 auto;
`,_=v.default.div`
  width: 424px;
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
    &:hover {
      background: var(--highlight-background-color-primary);
      cursor: pointer;
    }
`,E=v.default.div`
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
  width: 424px;
`;class A extends s.Component{constructor(e){super(e),this.state={disabled:!1,options:[],loading:!1,userGivenInput:"",channelName:this.props.currentValue.channelName||"",channelId:this.props.currentValue.channelId||"",isSuggestionOpened:!1,isNotFocused:!1,isLoading:!1,channelIdInvalid:!1,fetchedChannelName:"",error:null},this.fetchOptions=this.fetchOptions.bind(this),this.updateDisabledState=this.updateDisabledState.bind(this),this.didServiceActionInputsChange=this.didServiceActionInputsChange.bind(this),this.popoverTriggerRef=s.createRef(),this.debouncedGetSearchData=u().debounce(this.getSearchData,300),this.validateChannelId=this.validateChannelId.bind(this),this.debouncedValidateChannelId=u().debounce(this.validateChannelId,300)}fetchOptions(){if(this.state.disabled)return null;this.setState({options:[],loading:!0,error:null},(()=>{const e=this.props.channelNameInput,t=e.options||{},n=(0,g.getServiceActionInputsMap)(t,[this.props.authInput]),s=u().get(t,"service"),a=u().get(t,"serviceActionId"),i=this.props.integrationInstanceId;let r,o=this;h().doUntil((l=>{r&&u().assign(n,{cursor:r}),p.default.runServiceAction(s,a,n,e.integrationClass,e.id,i||null).then((e=>{const n=u().get(e,"body",{}),{channels:s,next_cursor:a}=n,i=u().get(t,"labelPath"),c=u().get(t,"valuePath");if(r=a,u().isEmpty(s))return l();const d=(0,g.convertObjectListToOptions)(s,i,c),p=o.state.options;if(!(0,g.isValidSetOfOptions)(d))throw new Error("Malformed response");o.setState({options:u().concat(p,d),loading:!1},(()=>l()))})).catch((e=>l(e)))}),(()=>u().isEmpty(r)),(e=>{e&&this.setState({loading:!1},(()=>{pm.logger.error("ChannelSelector ~ Service Action run ~ Error occurred while fetching channels",e,{context:S})}))}))}))}updateDisabledState(e=(()=>{})){if(u().isNil(this.props.integrationInstanceId)&&(0,g.isBlockedOnAnotherInput)(u().values(u().get(this.props,"channelNameInput.options.inputs",{})),[this.props.authInput])){if(!this.state.disabled)return this.setState({disabled:!0},e)}else if(this.state.disabled)return this.setState({disabled:!1},e);return e()}didServiceActionInputsChange(e){const t=(0,g.getServiceActionInputsMap)(u().get(e,"channelNameInput.options"),[e.authInput]),n=(0,g.getServiceActionInputsMap)(u().get(this.props,"channelNameInput.options"),[this.props.authInput]);return!u().isEqual(n,t)}componentDidMount(){this.updateDisabledState(this.fetchOptions),this.props.onUserInput({channelName:this.state.channelName,channelId:this.state.channelId})}componentDidUpdate(e){this.didServiceActionInputsChange(e)&&this.updateDisabledState(this.fetchOptions)}componentWillUnmount(){this.debouncedValidateChannelId.cancel()}getSearchData(e){if(e.length<3)return this.setState({channels:[],isSuggestionOpened:!1,error:""}),[];const t=u().filter(this.state.options,(t=>u().includes(u().toLower(t.label),u().toLower(e))));u().isEmpty(t)&&(this.setState({isLoading:!0}),this.validateChannelId()),this.state.isNotFocused||(this.setState({channels:t}),this.setState({isSuggestionOpened:!0}))}handleClick(e,t){this.debouncedValidateChannelId.cancel(),this.setState({channelName:e,channelId:t,error:"",isLoading:!1,channelIdInvalid:!1}),this.props.onUserInput({channelName:e,channelId:t}),this.setState({isSuggestionOpened:!1})}validateChannelId(){const e=u().get(this.props.channelIdInput,"value");if(!u().isEmpty(e)){const e=this.props.channelIdInput,t=e.options||{},n=u().reduce(u().get(t,"inputs"),((e,t,n)=>(e[n]=u().get(u().find([this.props.authInput,this.props.channelIdInput],["key",t]),"value"),e)),{}),s=u().get(t,"service"),a=this.props.integrationInstanceId;p.default.runServiceAction(s,"get-channel-info",n,e.integrationClass,e.id,a||null).then((e=>{const t=u().get(e,"body",{});this.setState({isLoading:!1,channelId:u().get(t,"channel.id"),channelName:u().get(t,"channel.name"),fetchedChannelName:u().get(t,"channel.name"),channelIdInvalid:!1,error:"",isSuggestionOpened:!1}),this.props.onUserInput({channelName:u().get(t,"channel.name"),channelId:u().get(t,"channel.id")})})).catch((e=>{this.setState({isLoading:!1,channelIdInvalid:!0,channelName:this.state.userGivenInput,channelId:this.state.userGivenInput,error:"Channel is not found. Ensure you enter the correct channel ID and try again."}),pm.logger.error("Channel Selector ~ Service Action run ~ Error occurred while fetching channel information",e,{context:S})}))}}handleTextInputOnChange(e){this.setState({channelId:e,channelName:e,userGivenInput:e}),this.props.onUserInput({channelName:e,channelId:e}),this.debouncedGetSearchData(e)}render(){const{channelNameInput:e}=this.props;return s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," ",e.name," "),s.createElement("div",null,s.createElement(I,{value:this.state.channelName,onChange:e=>this.handleTextInputOnChange(e.target.value),ref:this.popoverTriggerRef,onFocus:()=>{this.setState({isNotFocused:!1})},onBlur:()=>{this.setState({isNotFocused:!0}),this.debouncedValidateChannelId()},validationStatus:u().isEmpty(this.state.error)?"":"error",validationMessage:this.state.error?this.state.error:"",onClear:()=>{this.debouncedValidateChannelId.cancel(),this.setState({channelName:"",channelId:"",error:!1}),this.props.onUserInput({channelName:"",channelId:""})}}),s.createElement(i.default,{isOpen:!(!this.state.isSuggestionOpened||!this.state.options.length),onClickOutside:()=>{this.setState({isSuggestionOpened:!1})},padding:"spacing-s",triggerRef:this.popoverTriggerRef,placement:"bottom-start",maxWidth:440,xOffset:-12,gap:8,appendTo:"parent"},s.createElement(E,null,u().isEmpty(this.state.channels)?this.state.isLoading?s.createElement(o.default,{description:"Checking..."}):this.state.channelIdInvalid?s.createElement(r.default,null,"Channel not found. Try entering a valid Channel ID instead."):s.createElement(_,{key:this.state.channelId,onClick:()=>{this.handleClick(this.state.fetchedChannelName,this.state.channelId)}},s.createElement(y,null,s.createElement(r.default,{color:"content-color-primary"},this.state.fetchedChannelName))):u().map(this.state.channels,(e=>s.createElement(_,{key:e.value,onClick:()=>{this.handleClick(e.label,e.value)}},s.createElement(y,null,s.createElement(r.default,{color:"content-color-primary"},e.label)))))))),s.createElement("div",{className:"integrations-form__segment__input"},u().isEmpty(this.state.error)&&s.createElement("div",{className:"integrations-form__segment__input__error"},s.createElement(l.default,{padding:"spacing-zero",gap:"spacing-xs",alignItems:"center",justifyContent:"center"},s.createElement(r.default,{type:"body-medium",color:"content-color-secondary"},"Enter channel ID for channels not found. For private channels, make sure the Postman app is added and",s.createElement(c.default,{onClick:this.fetchOptions,type:"monochrome-plain",text:"retry",isDisabled:this.state.loading}))))))}}A.propTypes={channelNameInput:b().string.isRequired,channelIdInput:b().string.isRequired,currentValue:b().object.isRequired,onUserInput:b().func.isRequired,authInput:b().object.isRequired,reauthenticate:b().func.isRequired,includePrivateChannels:b().bool.isRequired,integrationInstanceId:b().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/MonitorRun.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx/lib/mobx.module.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),c=n("./integrations/services/ConnectedAccountsService.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/IntegrationFormInput.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),h=n("./integrations/navigation/constants.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/ChannelSelector.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/OldMonitorRun.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts");class S extends s.Component{constructor(e){super(e),this.state={name:null,inputs:{},inputErrors:{},advanced:!1,monitorDetails:{data:null,loading:!1,error:null},oauth:{tokenId:null,loading:!1,error:null},connectedAccount:{configured:{id:null,account:null,loading:!1,error:null}}},this.fetchConnectedAccount=this.fetchConnectedAccount.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.getCurrentValue=this.getCurrentValue.bind(this)}fetchConnectedAccount(){const{integrationData:e}=this.props,t=(0,a.toJS)(e),n=r().get(r().find(t.inputs,["type","service-auth"]),"value"),s=r().get(t,["connectedAccounts","0"])||r().get(n,"connectedAccountId",void 0);if(!s)return this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{id:null,account:null,loading:!1,error:null}}})));this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{id:s,account:null,loading:!0,error:null}}})),(()=>{c.default.getConnectedAccountDetails(s).then((e=>{if(r().isNil(e))return this.setState((t=>({connectedAccount:{...t.connectedAccount,configured:{id:s,account:e,loading:!1,error:null}}})));I.default.fetchUserInfo(e.createdBy,((t,n)=>(t&&pm.logger.error("Error occurred while fetching user meta for connected account",t),e.createdBy=r().get(n,["body","users",e.createdBy],{id:e.createdBy}),this.setState((t=>({connectedAccount:{...t.connectedAccount,configured:{id:s,account:e,loading:!1,error:null}}}))))))})).catch((e=>this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{id:s,account:null,loading:!1,error:"Unable to load installed app"}}})),(()=>{pm.toasts.error("Something went wrong while fetching the linked installed app"),pm.logger.error("Could not fetch connected account",e)}))))}))}reauthenticate(){const{classData:e}=this.props,t=e.inputs||[],n=r().find(t,["type","service-auth"])||{};this.setState({oauth:{tokenId:null,loading:!0,error:null}},(()=>{c.default.getAuthToken("slackv2",((e,t)=>{e?this.setState({oauth:{tokenId:null,loading:!1,error:e}},(()=>{pm.toasts.error(e.msg||"Something went wrong during the authorizations flow! Please try again.")})):this.setState((e=>({oauth:{tokenId:t,loading:!1,error:null},connectedAccount:{configured:{id:null,account:null,loading:!1,error:null}},inputs:{...e.inputs,[n.key]:{tokenId:t}}})))}))}))}componentDidMount(){this.fetchConnectedAccount()}getCurrentValue(e,t){return r().has(this.state,["inputs",e.key])?r().get(this.state.inputs,e.key):r().get(t,e.key)}render(){const{classId:e,classData:t,integrationData:n,preferredEntities:a}=this.props,i=this.props.integrationId||n.id,c=t.inputs||[],I=r().reduce(n.inputs,((e,t)=>r().assign(e,{[t.key]:t.value})),{}),S=r().find(c,["type","postman-monitor"])||{},y=r().find(c,["key","channel"])||{},_=r().find(c,["key","channelId"])||{},E=r().find(c,["key","options"])||{},A=r().find(c,["type","service-auth"])||{},w=this.state.connectedAccount.configured.account;return r().isNil(I[_.key])&&r().isNil(I[A.key])?s.createElement(v.default,this.props):s.createElement("div",{className:"integrations-edit-card__form"},s.createElement(l.default,{connectedAccount:w,isLoading:this.state.connectedAccount.configured.loading||this.state.oauth.loading,isUsingPersonalCredentials:this.state.oauth.tokenId,orphaned:this.state.connectedAccount.configured.id&&!w,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to "+r().get(w,"data.teamName","a")+" workspace on Slack by "+r().get(w,"createdBy.name","your team admin"),primaryOrphanedText:"Authenticated Slack workspace was removed by your team admin.",reauthenticateText:"Connect to different workspace"}),s.createElement(o.NicknameFieldSegment,{id:"edit-nickname",value:this.state.name||n.name,error:""===this.state.name?"Give a nickname to your integration.":"",onBlur:()=>{this.setState({name:r().isFunction(this.state.name.trim)?this.state.name.trim():this.state.name})},onChange:e=>{this.setState({name:e})}}),s.createElement(u.default,{disabled:!S.editable,input:S,currentValue:this.getCurrentValue(S,I),onUserInput:e=>{this.setState((t=>({inputs:{...t.inputs,[S.key]:e},inputErrors:{...t.inputErrors,[S.key]:(0,d.getInputError)(S,e)}})))},preferredEntities:a}),s.createElement(b.default,{channelNameInput:y,channelIdInput:{..._,value:r().get(this.state,["inputs",_.key])},currentValue:{channelName:this.getCurrentValue(y,I),channelId:this.getCurrentValue(_,I)},onUserInput:e=>{const t=r().get(e,"channelName",""),n=r().get(e,"channelId","");this.setState((e=>({inputs:{...e.inputs,[y.key]:t,[_.key]:n},inputErrors:{...e.inputErrors,[y.key]:(0,d.getInputError)(y,t),[_.key]:(0,d.getInputError)(_,n)}})))},authInput:{...A,value:r().get(this.state,["inputs",A.key]),error:r().get(this.state,["inputErrors",A.key])},reauthenticate:this.reauthenticate,integrationInstanceId:i,includePrivateChannels:Boolean(this.state.oauth.tokenId)}),s.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},"Advanced Options"),this.state.advanced&&s.createElement("div",null,s.createElement(p.default,{name:"Slack advanced options",label:"Configure when monitor runs must be notified",value:this.getCurrentValue(E,I),direction:"column",onChange:e=>{this.setState((t=>({inputs:{...t.inputs,[E.key]:e}})))}},s.createElement(g.default,{value:"all_runs",label:"Notify for all completed monitor runs"}),s.createElement(g.default,{value:"only_failures",label:"Notify for 3 failures and the first consequent successful run of the monitor"}))),s.createElement("div",{className:"integrations-edit-actions__button"},s.createElement(m.default,{classId:e,disabled:r().some(this.state.inputErrors,Boolean)||""===this.state.name,inputs:this.state.inputs,name:this.state.name,integrationId:i,redirectPageId:h.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,redirectParams:{integrationId:i}}),s.createElement(f.default,{defaultRedirectPageId:h.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,defaultRedirectParams:{integrationId:i}})))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/OldMonitorRun.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/IntegrationFormInput.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/StringInput.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-warning-stroke-small.js"),g=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-right.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),f=n("./integrations/navigation/constants.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js");class v extends s.Component{constructor(e){super(e),this.state={name:null,inputs:{},inputErrors:{},advanced:!1},this.getCurrentValue=this.getCurrentValue.bind(this)}getCurrentValue(e,t){return i().has(this.state,["inputs",e.key])?i().get(this.state.inputs,e.key):i().get(t,e.key)}render(){const{classId:e,classData:t,integrationId:n,integrationData:a,preferredEntities:v}=this.props,I=t.inputs||[],S=i().reduce(a.inputs,((e,t)=>i().assign(e,{[t.key]:t.value})),{}),y=i().find(I,["type","postman-monitor"])||{},_=i().find(I,["key","channel"])||{},E=i().find(I,["key","options"])||{};return s.createElement("div",{className:"integrations-edit-card__form"},s.createElement(r.NicknameFieldSegment,{id:"edit-nickname",value:this.state.name||a.name,error:""===this.state.name?"Give a nickname to your integration.":"",onBlur:()=>{this.setState({name:i().isFunction(this.state.name.trim)?this.state.name.trim():this.state.name})},onChange:e=>{this.setState({name:e})}}),s.createElement(l.default,{disabled:!y.editable,input:y,currentValue:this.getCurrentValue(y,S),onUserInput:e=>{this.setState((t=>({inputs:{...t.inputs,[y.key]:e},inputErrors:{...t.inputErrors,[y.key]:(0,o.getInputError)(y,e)}})))},preferredEntities:v}),s.createElement("div",{className:"integrations-form__segment"},s.createElement("div",{className:"integrations-form__segment__label-title"}," Slack Channel "),s.createElement("div",{className:"integrations-form__segment__label-description"},"The channel name will be visible to your team members in some parts of the Postman app.",s.createElement("div",null,s.createElement(p.default,{color:"base-color-warning"})," To edit the channel, delete and recreate this integration.")),s.createElement("div",{className:"integrations-form__segment__input"},s.createElement(c.default,{disabled:!0,id:_.id,currentValue:this.getCurrentValue(_,S)}))),s.createElement("h6",{className:"pm-h6 integrations-add-card__advanced",onClick:()=>{this.setState((e=>({advanced:!e.advanced})))}},this.state.advanced?s.createElement(g.default,null):s.createElement(m.default,null),"Advanced Options"),this.state.advanced&&s.createElement("div",null,s.createElement(d.default,{name:"Slack advanced options",label:"Configure when monitor runs must be notified",value:this.getCurrentValue(E,S),direction:"column",onChange:e=>{this.setState((t=>({inputs:{...t.inputs,[E.key]:e}})))}},s.createElement(u.default,{value:"all_runs",label:"Notify for all completed monitor runs"}),s.createElement(u.default,{value:"only_failures",label:"Notify for 3 failures and the first consequent successful run of the monitor"}))),s.createElement("hr",{className:"integrations-edit-actions__separator"}),s.createElement("div",{className:"integrations-edit-actions__button"},s.createElement(h.default,{classId:e,disabled:i().some(this.state.inputErrors,Boolean)||""===this.state.name,inputs:this.state.inputs,name:this.state.name,integrationId:n,redirectPageId:f.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,redirectParams:{integrationId:n}}),s.createElement(b.default,{defaultRedirectPageId:f.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,defaultRedirectParams:{integrationId:n}})))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/UptimeMonitor.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/mobx/lib/mobx.module.js"),l=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),u=n("./js/stores/StoreManager.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js")),h=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),S=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),y=(n("./integrations/constants/uptimeMonitorIntegrations.ts"),n("./js/components/base/LoadingIndicator.js")),_=n("./js/stores/IntegrationsStore.js"),E=n("./integrations/services/ConnectedAccountsService.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),C=n("./integrations/navigation/constants.js"),k=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultEditIntegrationButton.js"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/CancelButton.js"),P=n("./monitors/constants.js");const T=pm.logger.getContext("UptimeMonitor Edit Form","integrations"),N=l.default.span`
  margin-left: 2px;
  position: relative;
  top: 1px;
`;let D=(0,c.observer)(s=class extends a.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:{},errorMonitorMeta:"",loadingMonitorMeta:!1,selectedChannel:{},channels:[],inputs:{},inputErrors:{},advanced:!1,errorChannels:"",monitorDetails:{data:null,loading:!1,error:null},oauth:{tokenId:null,loading:!1,error:null},connectedAccount:{configured:{id:null,account:null,loading:!1,error:null}}},this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.fetchChannels=this.fetchChannels.bind(this),this.store=(0,u.resolveStoreInstance)(_.default),this.getCurrentValue=this.getCurrentValue.bind(this),this.fetchConnectedAccounts=this.fetchConnectedAccounts.bind(this),this.reauthenticate=this.reauthenticate.bind(this)}componentDidMount(){const{classData:e,integrationData:t}=this.props,n=e.inputs||[],s=r().reduce(t.inputs,((e,t)=>r().assign(e,{[t.key]:t.value})),{}),a=r().find(n,["type","postman-uptimeMonitor"])||{},i=r().find(n,["key","channelName"])||{},l=r().find(n,["key","channelId"])||{},c=(0,o.toJS)(t),d=r().get(c,"inputs"),u=r().find(n,["type","service-auth"])||{},p=r().get(r().find(d,["key",u.key]),"value"),g=r().get(r().find(d,["key","botToken"]),"value");this.setState({loadingChannels:!0,errorChannels:"",name:r().get(t,"name"),selectedChannel:{label:this.getCurrentValue(i,s),value:this.getCurrentValue(l,s)}}),this.fetchMonitorMeta(this.getCurrentValue(a,s)),this.fetchChannels(i,{key:u.key,value:p},{key:"botToken",value:g}),this.fetchConnectedAccounts()}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),d.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600&&this.setState({errorMonitorMeta:"Unable to load monitors, please retry"}),pm.logger.error("uptimeMonitorSlackMonitorEditInput~Error occurred while fetching monitors",e,{context:T}),this.setState({loadingMonitorMeta:!1})}))}fetchChannels(e,t,n){const s=e.options||{},a=(0,A.getServiceActionInputsMap)(s,[t,n]),i=r().get(s,"service"),o=r().get(s,"serviceActionId"),l=this.props.integrationInstanceId;this.setState({loadingChannels:!0,errorChannels:""}),p.default.runServiceAction(i,o,a,this.props.classId,e.id,l||null).then((e=>e?r().map(e.body,(e=>({label:"#"+r().get(e,"name"),value:r().get(e,"id")}))):[])).then((e=>{this.setState({channels:e,loadingChannels:!1,errorChannels:""})})).catch((e=>{this.setState({loadingChannels:!1,errorChannels:"Error encountered while fetching channels"}),pm.logger.error("Error encountered while fetching channels",e,{context:T})}))}fetchConnectedAccounts(){const{integrationData:e}=this.props,t=(0,o.toJS)(e),n=r().get(t,"inputs"),s=r().get(r().find(n,["type","service-auth"]),"value"),a=r().get(t,["connectedAccounts.0"])||r().get(s,"connectedAccountId",void 0);if(!a)return this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{id:null,account:null,loading:!1,error:null}}})));this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{id:a,account:null,loading:!0,error:null}}})),(()=>{E.default.getConnectedAccountDetails(a).then((e=>this.setState((t=>({connectedAccount:{...t.connectedAccount,configured:{id:a,account:e,loading:!1,error:null}}}))))).catch((e=>this.setState((e=>({connectedAccount:{...e.connectedAccount,configured:{id:a,account:null,loading:!1,error:"Unable to load installed app"}}})),(()=>{pm.logger.error("Could not fetch installed app",e,{context:T})}))))}))}reauthenticate(){const{classData:e}=this.props,t=r().get(e,"inputs",[]),n=r().find(t,["type","service-auth"])||{},s=r().find(t,["key","channelName"])||{};this.setState({oauth:{tokenId:null,loading:!0,error:null}},(()=>{E.default.getAuthToken(P.UPTIME_INTEGRATION_SERVICE_NAME_AUTH.slack,((e,t)=>{e?this.setState({oauth:{tokenId:null,loading:!1,error:e}},(()=>{pm.toasts.error(e.msg||"Something went wrong during the authorizations flow! Please try again.")})):this.setState((e=>(this.fetchChannels(s,{key:n.key,value:{tokenId:t}},{}),{oauth:{tokenId:t,loading:!1,error:null},connectedAccount:{configured:{id:null,account:null,loading:!1,error:null}},inputs:{...e.inputs,[n.key]:{tokenId:t}}})))}))}))}getCurrentValue(e,t){return r().has(this.state,["inputs",e.key])?r().get(this.state.inputs,e.key):r().get(t,e.key)}render(){const{name:e,errorMonitorMeta:t,configuredOn:n,loadingMonitorMeta:s,channels:i,selectedChannel:o,loadingChannels:l,errorChannels:c}=this.state,{integrationData:d,classId:u,classData:p,integrationId:_,preferredEntities:E,redirect:A}=this.props,P=p.inputs||[],T=r().reduce(d.inputs,((e,t)=>r().assign(e,{[t.key]:t.value})),{}),D=r().find(P,["type","postman-uptimeMonitor"])||{},R=r().find(P,["key","channelName"])||{},O=r().find(P,["type","service-auth"])||{},x=r().find(P,["key","botToken"])||{},M=this.getCurrentValue(O,T),L=this.getCurrentValue(x,T),F=this.state.connectedAccount.configured.account;return a.createElement(m.default,{direction:"column",width:"100",gap:"spacing-m"},a.createElement(w.default,{connectedAccount:this.state.connectedAccount.configured.account,isLoading:this.state.connectedAccount.configured.loading||this.state.oauth.loading,isUsingPersonalCredentials:this.state.oauth.tokenId,orphaned:this.state.connectedAccount.configured.id&&!F,primarySuccessText:"Connected to "+r().get(F,"data.teamName","a")+" workspace on Slack by "+r().get(F,"createdBy.name","your team admin"),primaryOrphanedText:"Authenticated Slack workspace was removed by your team admin.",reauthenticateCallback:()=>this.reauthenticate(),reauthenticateText:"Connect to different workspace"}),a.createElement(g.NicknameFieldSegmentV2,{id:"slack-integration-nickname",value:e,error:r().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e.target.value})}}),a.createElement(h.default,{isDisabled:!0,helperText:a.createElement(m.default,null,a.createElement(f.default,null,"The results of the selected monitor will be sent to Slack.",a.createElement(b.default,{content:"Uptime monitor on the integration cannot be edited "},a.createElement(N,null,a.createElement(S.default,null))))),id:"slack-uptime-monitor",label:"Choose Uptime Monitor",value:n,options:n?[n]:[],validationState:{status:r().isEmpty(t)?"":"error",message:r().isEmpty(t)?"":t},isLoading:s,handleRetry:()=>this.fetchMonitorMeta(this.getCurrentValue(D,T))}),a.createElement(v.default,{type:"h2",text:"Slack Configuration"}),a.createElement(h.default,{label:"Choose Slack channel",placeholder:l?a.createElement(m.default,{justifyContent:"space-between"},a.createElement("div",null,"Loading channels..."),a.createElement(y.default,{className:"loading-indicator-aether__dropdown"})):"Select channel",className:l?"dropdown-icon-remove":"",helperText:"The Slack channel you want to receive notifications in.",isDisabled:!r().isEmpty(c),options:i||[],value:o,onChange:e=>{this.setState({selectedChannel:e,inputs:{...this.state.inputs,channelName:r().get(e,"label"),channelId:r().get(e,"value")}})},emptyStateMessage:"No channels found",validationState:{status:r().isEmpty(c)?"":"error",message:r().isEmpty(c)?"":a.createElement("div",{className:"integrations-form__segment__input__error"},"Error encountered while fetching channels.",a.createElement("span",{onClick:()=>this.fetchChannels(R,{key:O.key,value:M},{key:"botToken",value:L}),className:"integrations-form__segment__input__error__btn"}," Retry "))},isLoading:l}),r().isEmpty(c)&&a.createElement(m.default,{padding:"spacing-m spacing-zero spacing-zero spacing-zero",gap:"spacing-xs",alignItems:"baseline",justifyContent:"center"},a.createElement(S.default,{color:"content-color-secondary"}),a.createElement(f.default,{type:"body-medium",color:"content-color-secondary"},"For channels not found in this list, make sure the Postman app is added to these channels and ",a.createElement(I.default,{onClick:()=>this.fetchChannels(R,{key:O.key,value:M},{key:"botToken",value:L}),type:"monochrome-plain",text:"retry",isDisabled:l}))),a.createElement(m.default,{direction:"row",width:"100"},a.createElement(k.default,{classId:u,disabled:r().some(this.state.inputErrors,Boolean)||""===this.state.name,inputs:this.state.inputs,name:this.state.name,integrationId:_,redirectPageId:!r().get(A,"onEdit")&&C.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,redirectParams:{integrationId:_},onEdit:r().get(A,"onEdit")}),a.createElement(j.default,{defaultRedirectPageId:C.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,defaultRedirectParams:{integrationId:_},onCancel:r().get(A,"onCancel")})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{MonitorRun:function(){return a.default},Slack:function(){return g},UptimeMonitor:function(){return u.default}});var s,a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/MonitorRun.js"),i=n("../../node_modules/react/index.js"),r=n("./node_modules/lodash/lodash.js"),o=n.n(r),l=n("./integrations/constants/notificationCenter.ts"),c=n("./js/models/services/DashboardService.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/UptimeMonitor.js"),p=n("./integrations/constants/uptimeMonitorIntegrations.ts");let g=(0,d.observer)(s=class extends i.Component{constructor(e){super(e)}render(){const e=this.props.classId||this.props.ruleId;return o().includes(o().map(l.SERVICES,"rule"),e)&&(0,c.openNotificationPreferences)(),e===p.UPTIME_MONITOR_SLACK?i.createElement(u.default,this.props):"monitor_run_slack"===e?i.createElement(a.default,this.props):null}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoCreateIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./integrations/navigation/constants.js"),o=n("./js/services/NavigationService.js");let l=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(s=class extends a.Component{constructor(e){super(e),this.handleOnClick=this.handleOnClick.bind(this)}handleOnClick(){o.default.transitionTo(r.BROWSE_INTEGRATIONS_IDENTIFIER,{},{category:"all"})}render(){return a.createElement("div",{className:"no-create-integration"},a.createElement("div",{className:"no-create-integration__illustration-wrapper no-create-integration__illustration-wrapper--integrations"},a.createElement("div",{className:"integrations-empty__illustration"})),a.createElement("div",{className:"no-create-integration__title"},"There was a problem loading this page"),a.createElement("div",{className:"no-create-integration__subtitle"},"This integration cannot be created"),a.createElement("div",{className:"no-create-integration__action"},a.createElement(i.Button,{type:"primary",onClick:this.handleOnClick},"Go back to browsing all available integrations")))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoEditIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./integrations/navigation/constants.js"),o=n("./js/services/NavigationService.js");let l=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(s=class extends a.Component{constructor(e){super(e),this.handleOnClick=this.handleOnClick.bind(this)}handleOnClick(){o.default.transitionTo(r.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,{integrationId:this.props.integrationId})}render(){return a.createElement("div",{className:"no-edit-integration"},a.createElement("div",{className:"no-edit-integration__illustration-wrapper no-edit-integration__illustration-wrapper--integrations"},a.createElement("div",{className:"integrations-empty__illustration"})),a.createElement("div",{className:"no-edit-integration__title"},"There was a problem loading this page"),a.createElement("div",{className:"no-edit-integration__subtitle"},"An edit form doesn't exist for this integration type"),a.createElement("div",{className:"no-edit-integration__action"},a.createElement(i.Button,{type:"primary",onClick:this.handleOnClick},"Go back to Integration run log")))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationDescription:function(){return o},default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),i=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function r(e){return s.createElement("a",{className:"pm-link",href:"https://go.pstmn.io/new-integration-request",rel:"noopener noreferrer",target:"_blank"},e.children)}function o(){return s.createElement("span",{className:"team-integrations-no-search-results__subtext--body"},"If you can't find what you're looking for, head to GitHub and tell us what integrations you'd like to see.",s.createElement(r,null,"Request an Integration"),s.createElement(i.default,{name:"icon-action-openWeb-stroke",className:"external-link__icon"}))}class l extends s.Component{constructor(e){super(e)}render(){return s.createElement("div",{className:"team-integrations-no-search-results"},s.createElement("div",{className:"team-integrations-no-search-results__illustration-wrapper"},s.createElement(a.default,null)),s.createElement("div",{className:"team-integrations-no-search-results__label"},"No results found"),s.createElement("div",{className:"team-integrations-no-search-results__subtext"},this.props.requestNewIntegration?s.createElement(o,null):"We couldn't find anything matching that. Check the spelling or try using a different query."))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoTeamIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./js/stores/StoreManager.js"),o=n("./js/stores/CurrentUserStore.js"),l=n("./integrations/navigation/constants.js"),c=n("./js/services/NavigationService.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoIntegrations.js");let p=(0,d.observer)(s=class extends a.Component{constructor(e){super(e),this.handleBrowseIntegrations=this.handleBrowseIntegrations.bind(this)}handleBrowseIntegrations(){c.default.transitionTo(l.BROWSE_INTEGRATIONS_IDENTIFIER,{},{category:"all"},{additionalContext:this.props.additionalContext})}render(){const e=Boolean((0,r.resolveStoreInstance)(o.default).team);return a.createElement("div",{className:"no-team-integrations"},a.createElement("div",{className:"no-team-integrations__illustration-wrapper no-team-integrations__illustration-wrapper--integrations"},a.createElement(u.default,null)),a.createElement("div",{className:"no-team-integrations__title"},e?"No team integrations yet":"No integrations yet"),a.createElement("div",{className:"no-team-integrations__subtitle"},a.createElement("span",null,e?"Integrations added by your teammates will show up here. Use integrations to connect Postman to the rest of your API workflows.":"Any integrations you add will show up here. Use integrations to connect Postman to the rest of your API workflows.")),a.createElement("div",{className:"no-team-integrations__action"},a.createElement(i.Button,{type:"primary",onClick:this.handleBrowseIntegrations},"Browse All Integrations")))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js");class a extends s.Component{render(){return s.createElement("div",{className:"team-integrations-offline-state"},s.createElement("div",{className:"team-integrations-offline-state__illustration-wrapper"},s.createElement("div",{className:"offline__illustration"})),s.createElement("div",{className:"team-integrations-offline-state__title"},this.props.title||"You're offline"),s.createElement("div",{className:"team-integrations-offline-state__subtitle"},this.props.subtitle||"You need to have an active internet connection to access integrations."))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/EntityFetchErrorComponent.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./js/components/base/Tooltips.js");const r={collection:"collection",jobTemplate:"monitor",api:"API",apiversion:"API",team:"team"};function o(e){const{entityType:t,className:n}=e,[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)();return s.createElement("div",{className:n},"Private - Unable to load",s.createElement("span",{className:"integration-entity-error-icon",onMouseEnter:e=>{!c&&d(e.currentTarget),l(!0)},onMouseLeave:()=>{l(!1)}},s.createElement(a.default,{name:"icon-state-info-stroke-small",color:"content-color-secondary",size:"small"}),s.createElement(i.Tooltip,{className:"integration-entity-error-tooltip",show:o,target:c,placement:"top"},s.createElement(i.TooltipBody,null,"You dont have access to information about this ",r[t]," because its in a personal or private workspace."))))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorLoadingConfiguredIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./node_modules/classnames/index.js"),r=n.n(i),o=n("./js/components/base/Buttons.js");function l(e){return s.createElement("div",{className:"error-loading-configured-integrations"},s.createElement(a.default,{className:"error-loading-configured-integrations__icon",name:"icon-state-error-stroke",color:"content-color-error",size:"small"}),s.createElement("span",{className:"error-loading-configured-integrations__text-error"},"Unable to load added integrations.",s.createElement(o.Button,{className:(t=e.disable,n="error-loading-configured-integrations__text-error-retry",r()({"is-disabled":t},n)),tooltip:e.disable?"You need to be online to retry":"",disable:e.disable,type:"text",onClick:()=>{!e.disable&&e.retry()}},"Retry")));var t,n}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/prop-types/index.js"),i=n.n(a),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("./node_modules/lodash/lodash.js");class c extends s.Component{constructor(e){super(e)}render(){return s.createElement("div",{className:"team-integrations-error-state"},s.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=s.createElement(r.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=s.createElement(o.default,null)),t}(this.props.errorDetails)),s.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),s.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}c.propTypes={errorDetails:i().object,origin:i().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/Breadcrumbs.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./js/stores/StoreManager.js"),o=n("./js/stores/CurrentUserStore.js"),l=n("./integrations/navigation/constants.js"),c=n("./js/navigation/active-mode/constants.js"),d=n("./appsdk/components/link/Link.js");class u extends s.Component{constructor(e){super(e)}render(){let e=i().get((0,r.resolveStoreInstance)(o.default),"team.name","Home"),{name:t,serviceId:n,ruleName:a,ruleId:u}=this.props;return s.createElement("div",{className:"integrations-run-breadcrumbs"},s.createElement("span",{title:e,className:"integrations-run-breadcrumbs__team-name"},s.createElement(d.default,{to:{routeIdentifier:c.HOME}},e)),s.createElement("span",{className:"integrations-run-breadcrumbs__divider"},"/"),s.createElement("span",{className:"integrations-run-breadcrumbs__integration-page"},s.createElement(d.default,{to:{routeIdentifier:l.OPEN_INTEGRATIONS_HOME_IDENTIFIER}},"Integrations")),a?s.createElement("span",{className:"integrations-run-breadcrumbs__divider"},"/"):null,s.createElement("span",{className:"integrations-run-breadcrumbs__integration-page"},s.createElement(d.default,{to:{routeIdentifier:l.TEAM_INTEGRATIONS_IDENTIFIER,routeParams:{serviceId:n,ruleId:u}}},a)),t?s.createElement("span",{className:"integrations-run-breadcrumbs__divider"},"/"):null,s.createElement("span",{className:"team-integrations-integration-name"},t))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{IntegrationActions:function(){return S}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/components/base/Buttons.js"),u=n("./js/components/base/Modals.js"),p=n("./js/components/base/LoadingIndicator.js"),g=n("./js/services/NavigationService.js"),m=n("./integrations/navigation/constants.js"),h=n("./js/modules/services/AnalyticsService.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),b=n("./js/models/services/DashboardService.js"),v=n("./integrations/constants/notificationCenter.ts");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},I.apply(this,arguments)}let S=(0,c.observer)(s=class extends r.Component{constructor(e){super(e),this.state={openModal:!1,isDeleting:!1},this.store=(0,o.resolveStoreInstance)(l.default),this.handleCloseModal=this.handleCloseModal.bind(this)}handleCloseModal(){this.setState({openModal:!1})}render(){const{integrationId:e,serviceId:t,ruleId:n,allowedActions:s}=this.props,a=i().includes(e,"api-git-");let c="";return s.delete||(c="Only the integration creator can delete it.",a&&(c="You do not have access to delete this integration.")),r.createElement("div",{className:"integrations-run-actions__container"},r.createElement(u.Modal,{onRequestClose:this.handleCloseModal,isOpen:this.state.openModal},r.createElement(u.ModalHeader,null,"Delete integration?"),r.createElement(u.ModalContent,null,"Deleting this integration will cease any actions it performs immediately. Are you sure you wish to continue?"),r.createElement(u.ModalFooter,null,r.createElement(d.Button,I({className:"integrations-run-actions__button--modal-delete",disabled:this.state.isDeleting,type:"primary",size:"small",onClick:()=>{this.setState({isDeleting:!0}),f.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration is deleted successfully."),this.setState({openModal:!1}),g.default.transitionTo(m.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:n}),h.default.addEventV2({category:"integrations",action:n+"_deleted_integration",label:"integration_runs_logs_view",value:1}),(0,o.resolveStoreInstance)(l.default).refetchTeamIntegrations(),this.store.setRuleSpecificTeamIntegrations(n,null)):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while deleting your integration"),pm.logger.error("Error occurred while deleting integration",e)}))}},this.props)," ",this.state.isDeleting?r.createElement(p.default,null):"Delete Integration"),r.createElement(d.Button,I({className:"integrations-run-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{this.setState({openModal:!1})}},this.props)," Cancel"))),r.createElement(d.Button,I({className:"integrations-run-actions__button--refresh",type:"secondary",size:"small",onClick:this.props.refreshRunLogHandler},this.props)," ",this.store.refreshingRunLog?r.createElement(p.default,null):"Refresh Run Log"," "),!a&&r.createElement(d.Button,I({className:"integrations-run-actions__button--edit",disabled:!s.update,tooltip:s.update?"":"Only the integration creator can edit its configuration.",type:"secondary",size:"small",onClick:()=>{i().includes(i().map(v.SERVICES,"rule"),this.props.ruleId)&&(0,b.openNotificationPreferences)(),g.default.transitionTo(m.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:e})}},this.props)," Edit Integration"),r.createElement(d.Button,I({className:"integrations-run-actions__button--delete",disabled:!s.delete,tooltip:c,type:"secondary",size:"small",onClick:()=>{this.setState({openModal:!0})}},this.props)," Delete Integration "))}})||s;t.default=S},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationRunListItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n("./node_modules/lodash/lodash.js"),a=n.n(s),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),o=n("./js/components/base/Markdown.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js"),c=n("./js/components/base/Tooltips.js"),d=n("./js/components/base/Buttons.js"),u=n("./js/utils/ClipboardHelper.js");const p={running:"running",pending:"running",succeeded:"success"};class g extends i.Component{constructor(e){super(e),this.state={showTooltip:!1,idCopySuccess:!1},this.handleShowTooltip=this.handleShowTooltip.bind(this),this.handleHideTooltip=this.handleHideTooltip.bind(this),this.copyTraceHandler=this.copyTraceHandler.bind(this)}handleHideTooltip(){const e=setTimeout((()=>{this.setState({showTooltip:!1})}),200);this.setState({timeOut:e})}handleShowTooltip(){this.state.timeOut&&clearTimeout(this.state.timeOut),this.setState({showTooltip:!0,timeOut:!1})}copyTraceHandler(e){if(this.state.idCopySuccess)return;u.default.copy(e),this.setState({idCopySuccess:!0});const t=setTimeout((()=>this.setState({idCopySuccess:!1})),3e3);this.setState({clearIdCopySuccessTimeout:t})}componentWillUnmount(){clearTimeout(this.state.clearIdCopySuccessTimeout)}render(){const{runDetails:e}=this.props,{showTooltip:t}=this.state,n=a().get(e,"extraData.details"),s=a().get(e,"extraData.error.stepsToFix"),u=a().get(e,"statusMessage"),g=a().get(e,"status"),m=a().get(e,"createdAt"),h=a().get(e,"extraData.error.traceId");return i.createElement("div",{className:"integration-runs__list-container__main__sec1__items__item"},i.createElement("div",{className:"integration-runs__list-container__main__sec1__items__item__time"},l.default.format(m,!0)),i.createElement("div",{className:"integration-runs__list-container__main__sec1__items__item__status"},p[g]?i.createElement("div",{className:`integration-runs__list-container__main__sec1__items__item__status__${p[g]}`},p[g]):i.createElement("div",{className:"integration-runs__list-container__main__sec1__items__item__status__failure"},"FAILURE")),i.createElement("div",{className:"integration-runs__list-container__main__sec1__items__item__reason"},i.createElement("div",{className:"integration-runs__list-container__main__sec1__items__item__reason__msg"},"succeeded"!==g?u:""),i.createElement("div",{ref:e=>this.infoIconRef=e,onMouseEnter:this.handleShowTooltip,onMouseLeave:this.handleHideTooltip,className:"integration-runs__list-container__main__sec1__items__item__reason__icon"},(n||s)&&"succeeded"!==g&&i.createElement(r.default,{name:"icon-state-info-stroke-small",color:"content-color-secondary",size:"small"})),i.createElement(c.Tooltip,{className:"runlog-tooltip",show:t,target:this.infoIconRef,placement:"bottom",onMouseEnter:this.handleShowTooltip,onMouseLeave:this.handleHideTooltip},n&&i.createElement(c.TooltipHeader,null,n),s&&i.createElement(c.TooltipBody,null,a().isString(s)&&i.createElement(o.default,{className:"integration-run-log__steps-to-fix",source:s,linkTarget:"_blank"}),a().isArray(s)&&i.createElement("ol",null,a().map(s,((e,t)=>i.createElement("li",{key:t},i.createElement(o.default,{source:e,className:"integration-run-log__steps-to-fix",linkTarget:"_blank"}))))),h&&i.createElement("div",{className:"trace-container"},i.createElement("div",{className:"trace-container__trace"},i.createElement("div",null,"Trace ID: ",h)),i.createElement("div",{className:"trace-container__toggle"},this.state.idCopySuccess?i.createElement("div",{className:"trace-container__toggle__success"},i.createElement("div",{className:"trace-container__toggle__success__icon-container"},i.createElement(r.default,{name:"icon-state-success-stroke-small",color:"content-color-success",size:"small",className:"trace-container__toggle__success__icon"})),i.createElement("span",null,"Copied")):i.createElement(d.Button,{type:"secondary",size:"small",className:"trace-container__toggle__copy",onClick:()=>this.copyTraceHandler(h)},"Copy")))))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationRunMetaBlock.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./js/components/base/LoadingIndicator.js"),r=(n("./js/models/services/DashboardService.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/utils.js")),o=n("./js/controllers/theme/ThemeManager.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/EntityFetchErrorComponent.js"),c=n("./integrations/navigation/constants.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/DatadogRunsPage.js"),u=n("./appsdk/components/link/Link.js"),p=n("./node_modules/lodash/lodash.js");const g={collection:"Collection",jobTemplate:"Monitor",uptimeMonitor:"Uptime Monitor",api:"API",apiversion:"API version",team:"Team"},m={collection:"icon-entity-collection-stroke",jobTemplate:"icon-entity-monitor-stroke",uptimeMonitor:"icon-descriptive-uptime-stroke",api:"icon-entity-api-stroke",apiversion:"icon-entity-api-stroke",team:"icon-descriptive-team-stroke"},h={monitor_run_datadog:d.default};function f(e){const{entityName:t,entityFetchError:n,entityType:a,entityId:o,apiDetails:c,isEntityMetaLoading:d}=e;return n?s.createElement(l.default,{className:"integration-runs__list-container__main__sec2__container__item__description__text integration-entity__error",entityType:a}):s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__text"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__text__div"},d?s.createElement(i.default,{className:"integrations-meta__loading"}):r.default.EntityLinksHelper(a,o,t,c)))}class b extends s.Component{constructor(e){super(e),this.state={currentTheme:o.default.getCurrentTheme(),showFallbackIcon:!1,hideBanner:!1},this.handleThemeChange=this.handleThemeChange.bind(this),this.handleHideBanner=this.handleHideBanner.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange)}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleThemeChange(e){this.setState({currentTheme:e})}handleHideBanner(){this.setState({hideBanner:!0})}render(){const{ruleName:e,userName:t,userId:n,userProfileUrl:r,entityType:o,serviceIconUrl:l,serviceDarkIconUrl:d,isUserMetaLoading:b,ruleId:v,serviceId:I,updatePayload:S,showUpdateBanner:y}=this.props,{currentTheme:_,hideBanner:E}=this.state,A=h[v];return s.createElement("div",{className:"integration-runs__list-container__main__sec2__container"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__title"},"Integration"),s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description"},!this.state.showFallbackIcon&&s.createElement("img",{className:"integration-runs__list-container__main__sec2__container__item__description__icon",src:d&&"dark"===_?d:l,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__icon integration-runs__list-container__main__sec2__container__item__description__fallback-icon"})," ",s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__text"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__text__div"},s.createElement(u.default,{to:{routeIdentifier:c.TEAM_INTEGRATIONS_IDENTIFIER,routeParams:{serviceId:I,ruleId:v}}},e))))),!p.isNil(o)&&"user"!==o&&s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__title"},g[o]),s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__icon"},s.createElement(a.default,{name:m[o],color:"content-color-secondary",size:"large"})),s.createElement(f,this.props))),s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__title"},"Created by"),s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__icon integration-user__link",style:{backgroundImage:`url('${r}')`,borderRadius:"50%",height:"16px"}},!r&&s.createElement(a.default,{name:"icon-descriptive-user-stroke-small",color:"content-color-secondary",size:"large"})),s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__text"},s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item__description__text__div"},b?s.createElement(i.default,{className:"integrations-meta__loading"}):s.createElement(u.default,{to:`${pm.dashboardUrl}/users/${n}`},t))))),A&&y&&!E&&s.createElement("div",{className:"integration-runs__list-container__main__sec2__container__item"},s.createElement(A,{updatePayload:S,hideBanner:this.handleHideBanner})))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationRunsList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationRunListItem.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationRunMetaBlock.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),m=n("./js/stores/StoreManager.js"),h=n("./js/stores/IntegrationsStore.js"),f=n("./js/stores/CurrentUserStore.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoReport.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/DeprecationBanner.js");let I=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={fetchingEntityMeta:!1,fetchingUserMeta:!1},this.refreshRunLogHandler=this.refreshRunLogHandler.bind(this),this.integrationsStore=(0,m.resolveStoreInstance)(h.default),this.currentUserStore=(0,m.resolveStoreInstance)(f.default)}componentDidMount(){const{entityName:e,entityType:t,entityId:n,userId:s,integrationVariables:a,userName:r,userProfileUrl:o}=this.props.runLogPageData;if(!e){let e;switch(this.setState({fetchingEntityMeta:!0}),t){case"collection":e=p.default.fetchCollectionMeta(n,!0);break;case"jobTemplate":case"uptimeMonitor":e=p.default.fetchMonitorMeta(n,!0);break;case"api":e=p.default.fetchAPIMeta(n,!0);break;case"apiversion":e=p.default.fetchAPIVersionMeta(a.postman_api_id,n,!0);break;case"team":e=Promise.resolve({name:i().get(this.currentUserStore,["team","name"],"Home")});break;case"user":e=Promise.resolve({id:s,name:i().get(this.currentUserStore,"name")});break;default:e=Promise.resolve({})}e.then((e=>{this.integrationsStore.updateRunsPageResponse({...this.props.runLogPageData,entityName:e.name}),"apiversion"!==t&&this.setState({fetchingEntityMeta:!1})})).catch((e=>{this.integrationsStore.updateRunsPageResponse({...this.props.runLogPageData,entityFetchError:e}),this.setState({fetchingEntityMeta:!1})})),"apiversion"===t&&p.default.fetchAPIMeta(a.postman_api_id,!0).then((e=>{this.integrationsStore.updateRunsPageResponse({...this.props.runLogPageData,apiDetails:{id:e.id,name:e.name}}),this.setState({fetchingEntityMeta:!1})})).catch((e=>{this.integrationsStore.updateRunsPageResponse({...this.props.runLogPageData,entityFetchError:e}),this.setState({fetchingEntityMeta:!1})}))}r||(this.setState({fetchingUserMeta:!0}),g.default.fetchUserInfo(s,((e,t)=>{e?(pm.toasts.error("Couldn't fetch user information, please try again later."),pm.logger.error("Error while fetching user information",e)):200===t.status&&i().get(t,"body.users")&&i().get(t,`body.users[${s}]`)&&this.integrationsStore.updateRunsPageResponse(i().assign({},this.props.runLogPageData,{userName:i().get(t,`body.users[${s}].name`)||i().get(t,`body.users[${s}].username`),userProfileUrl:i().get(t,`body.users[${s}].profile_pic_url`,null)})),this.setState({fetchingUserMeta:!1})})))}refreshRunLogHandler(){let e=i().get(this.props,"runLogPageData.integrationId");this.integrationsStore.updateRefreshingRunLog(!0),u.default.getIntegrationRuns(e).then((e=>{200===e.status&&i().get(e,"body.data")?(this.integrationsStore.updateRunsPageResponse({...this.props.runLogPageData,runDetails:i().get(e,"body.data")}),this.integrationsStore.updateRefreshingRunLog(!1)):(pm.toasts.error("Something went wrong while fetching run logs. Please try again later."),pm.logger.error("Something went wrong while fetching run logs",e))})).catch((e=>{pm.toasts.error("Something went wrong while fetching run logs. Please try again later."),pm.logger.error("Error occurred while fetching integration run logs",e)}))}render(){const{runLogPageData:e,integrationVariables:t}=this.props,{fetchingEntityMeta:n,fetchingUserMeta:s}=this.state,a=i().get(this.currentUserStore,"team.name","Home"),o={integrationId:e.integrationId,payload:{name:e.name,variables:{region:t.region,options:t.options,new_metric:!0}}};let u=e.entityName;return"team"!==e.entityType||u||(u=a),"apiversion"===e.entityType&&(u=`${e.entityName}`),r.createElement("div",{className:"integration-runs__list-container__content"},r.createElement("div",{className:"integration-runs__list-container__header"},r.createElement("div",{className:"integration-runs__list-container__header__sec1"},r.createElement("div",{className:"integration-runs__list-container__header__sec1__title"},"Integration run log"),r.createElement("div",{className:"integration-runs__list-container__header__sec1__subtitle"},"Showing the last 20 attempts to run the integration")),r.createElement("div",{className:"integration-runs__list-container__header__sec2"},r.createElement(d.default,{integrationId:e.integrationId,ruleId:e.ruleId,serviceId:e.serviceId,allowedActions:e.allowedActions,refreshRunLogHandler:this.refreshRunLogHandler}))),r.createElement("div",{className:"integration-runs__list-container__main"},r.createElement("div",{className:"integration-runs__list-container__main__sec1"},r.createElement("div",{className:"integration-runs__list-container__main__banner"},r.createElement(v.default,{classId:i().get(e,"ruleId")})),this.props.runLogPageData.runDetails.length>0?r.createElement("div",null,r.createElement("div",{className:"integration-runs__list-container__main__sec1__header"},r.createElement("div",{className:"integration-runs__list-container__main__sec1__header__time"},"Time"),r.createElement("div",{className:"integration-runs__list-container__main__sec1__header__status"},"Status"),r.createElement("div",{className:"integration-runs__list-container__main__sec1__header__reason"})),r.createElement("div",{className:"integration-runs__list-container__main__sec1__items"},i().map(this.props.runLogPageData.runDetails,(e=>r.createElement(l.default,{runDetails:e,key:e.id}))))):r.createElement("div",{className:"integration-runs__list-container__main__sec1__empty"},r.createElement(b.default,null),r.createElement("div",{className:"integration-runs__list-container__main__sec1__empty__text"},"No run logs found"))),r.createElement("div",{className:"integration-runs__list-container__main__sec2"},r.createElement(c.default,{apiDetails:e.apiDetails,ruleName:e.ruleName,entityId:e.entityId,entityName:u,entityType:e.entityType,entityFetchError:e.entityFetchError,userName:e.userName,userId:e.userId,userProfileUrl:e.userProfileUrl,serviceIconUrl:e.serviceIconURL,serviceDarkIconUrl:e.serviceDarkIconURL,isEntityMetaLoading:n,isUserMetaLoading:s,serviceId:e.serviceId,ruleId:e.ruleId,updatePayload:o,showUpdateBanner:!(t.new_metric||!e.allowedActions.update)}))))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js":function(e,t,n){"use strict";function s(e,t,n){if("string"==typeof e&&e.length<t){let s="",a=t-e.length;for(;s.length<a;)s+=n;return s+e}return e}n.r(t),t.default={format:function(e,t,n={}){const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(e),r=n.padDate?s(i.getDate().toString(),2,"0"):i.getDate(),o=i.getMonth(),l=i.getFullYear(),c=i.getHours()%12||12,d=s(i.getMinutes().toString(),2,"0"),u=i.getHours()<12?"AM":"PM",p=t?`${c}:${d} ${u}, ${r} ${a[o]} ${l}`:`${r} ${a[o]}, ${l}`;return"NaN"===r.toString()?"string"==typeof e&&e.indexOf(" ")>-1?this.format(e.replace(" ","T"),t):"":p}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingAvailableIntegrations.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/Breadcrumbs.js"),i=n("./node_modules/lodash/lodash.js");t.default=()=>s.createElement("div",{className:"loading-browse-integrations-page"},s.createElement(a.default,null),s.createElement("div",{className:"loading-browse-integrations-page-heading",style:{width:`${Math.floor(74*Math.random())+200}px`}}),s.createElement("div",{className:"loading-integration-categories-sidebar visible-desktop-block"},s.createElement("div",{className:"loading-integration-categories-sidebar__list-wrapper"},s.createElement("div",{className:"loading-integration-categories-sidebar__list-wrapper-heading",style:{width:`${Math.floor(74*Math.random())+100}px`}}),s.createElement("div",{className:"loading-integration-categories-sidebar__list"},i.times(5,(e=>s.createElement("li",{className:"loading-integration-categories-sidebar__list--item",key:e})))))),s.createElement("div",{className:"loading-browse-integrations__list"},s.createElement("div",{className:"loading-browse-integrations__list--search",style:{width:"275px"}}),s.createElement("div",{className:"loading-integrations-cards__list"},i.times(20,(e=>s.createElement("li",{className:"loading-integrations-cards__list-item",key:e},s.createElement("div",{className:"loading-integrations-cards__list-item--heading-wrapper"},s.createElement("div",{className:"loading-integrations-cards__list-item--heading"},s.createElement("div",{className:"loading-integrations-cards__list-item--icon-container"},s.createElement("div",{className:"loading-integrations-cards__list-item--icon",style:{width:`${Math.floor(74*Math.random())+50}px`}})))),s.createElement("div",{className:"loading-integrations-cards__list-item--desc"},s.createElement("div",{className:"loading-integrations-cards__list-item--desc-line1",style:{width:`${Math.floor(74*Math.random())+40}px`}}),s.createElement("div",{className:"loading-integrations-cards__list-item--desc-line2",style:{width:`${Math.floor(74*Math.random())+100}px`}}),s.createElement("div",{className:"loading-integrations-cards__list-item--desc-line3",style:{width:`${Math.floor(74*Math.random())+40}px`}}))))))))},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingServiceDetails.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js");t.default=()=>s.createElement(s.Fragment,null,s.createElement("div",{className:"loading-integration-service__overview"},s.createElement("div",{className:"loading-integration-service__icon-wrapper"},s.createElement("div",{className:"loading-integration-service__icon pm-absolute-center",style:{width:"120px"}})),s.createElement("div",{className:"loading-integration-service__details-wrapper"},s.createElement("div",{className:"loading-integration-service__name",style:{width:`${Math.floor(74*Math.random())+70}px`}}),s.createElement("div",{className:"loading-integration-service__metadata loading-integration-service__metadata--categories"},s.createElement("div",{className:"loading-integration-service__metadata--categories-text",style:{width:"50px"}})),s.createElement("div",{className:"loading-integration-service__extended-description-line-1",style:{width:"260px"}}),s.createElement("div",{className:"loading-integration-service__extended-description-line-2",style:{width:"260px"}}),s.createElement("div",{className:"loading-integration-service__extended-description-line-3",style:{width:"260px"}}))),s.createElement("div",{className:"loading-integration-service__detailed-view"},s.createElement("div",{className:"loading-integration-service__detailed-view-heading",style:{width:`${Math.floor(74*Math.random())+170}px`}}),s.createElement("div",{className:"loading-integration-service__types-list"},a.times(3,(e=>s.createElement("li",{key:e,className:"loading-integration-service__types-item"},s.createElement("div",{className:"loading-integration-service__types-item-info"},s.createElement("div",{className:"loading-integration-service__types-item-actionables"},s.createElement("div",{className:"loading-integration-service__types-item-actionables-description"},s.createElement("div",{className:"loading-integration-service__types-item-actionables-description-heading",style:{width:"234px"}}),s.createElement("div",{className:"loading-integration-service__types-item-actionables-description-body",style:{width:`${Math.floor(74*Math.random())+100}px`}})),s.createElement("div",{className:"loading-integration-service__types-item-actions",style:{width:"115px"}})),s.createElement("div",{className:"loading-integration-service__types-item__configured",style:{width:"172px"}}))))))))},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingTeamIntegrations.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js");t.default=()=>s.createElement("div",{className:"loading-team-integrations__list"},a.times(10,(e=>s.createElement("li",{key:e,className:"loading-team-integrations__list-item"},s.createElement("div",{className:"loading-team-integrations__service-description",style:{width:`${Math.floor(74*Math.random())+100}px`}}),s.createElement("div",{className:"loading-team-integrations__rule-details"},s.createElement("div",{className:"loading-team-integrations__service-details"},s.createElement("div",{className:"loading-team-integrations__service-icon-wrapper"},s.createElement("div",{className:"loading-team-integrations__service-icon",style:{width:`${Math.floor(74*Math.random())+50}px`}})),s.createElement("div",{className:"loading-team-integrations__service-name",style:{width:`${Math.floor(74*Math.random())+30}px`}})),s.createElement("div",{className:"loading-team-integrations__status-item team-integrations__status-summary",style:{width:`${Math.floor(74*Math.random())+40}px`}}))))))},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingTeamIntegrationsInDetail.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./node_modules/lodash/lodash.js");t.default=()=>s.createElement(s.Fragment,null,s.createElement("div",{className:"loading-team-integrations-in-detail__header"},s.createElement("div",{className:"loading-team-integrations-in-detail__service-icon-wrapper"},s.createElement("div",{className:"loading-team-integrations-in-detail__service-icon",style:{width:`${Math.floor(74*Math.random())+50}px`}})),s.createElement("div",{className:"loading-team-integrations-in-detail__header-text"},s.createElement("div",{className:"loading-team-integrations-in-detail__header-text--title",style:{width:"300px"}}),s.createElement("div",{className:"loading-team-integrations-in-detail__header-text--description",style:{width:`${Math.floor(74*Math.random())+170}px`}}))),s.createElement("div",{className:"loading-team-integrations-actionables"},s.createElement("div",{className:"loading-team-integrations-actionables__search-sort"},s.createElement("div",{className:"loading-team-integrations-actionables__sort",style:{width:`${Math.floor(74*Math.random())+100}px`}}),s.createElement("div",{className:"loading-team-integrations-actionables__search",style:{width:`${Math.floor(74*Math.random())+140}px`}})),s.createElement("div",{className:"loading-team-integrations-actionables__add-integration",style:{width:`${Math.floor(74*Math.random())+80}px`}})),s.createElement("div",{className:"loading-team-integrations-in-detail__types-list"},a.times(7,(e=>s.createElement("li",{key:e,className:"loading-team-integrations-in-detail__types-item clearfix"},s.createElement("div",{className:"pm-col-xs-12 pm-col-md-8  loading-team-integrations-in-detail__types-item-info"},s.createElement("div",{className:"loading-team-integrations-in-detail__types-item-name-status"},s.createElement("div",{className:"loading-team-integrations-in-detail__types-item-name-link",style:{width:`${Math.floor(74*Math.random())+180}px`}}),s.createElement("div",{className:"loading-team-integrations-in-detail__types-item-status team-integrations__status-summary",style:{width:`${Math.floor(74*Math.random())+40}px`}})),s.createElement("div",{className:"loading-team-integrations-in-detail__entity"},s.createElement("div",{className:"loading-team-integrations-in-detail__entity-service"},s.createElement("div",{className:"loading-team-integrations-in-detail__entity-service-link",style:{width:"140px"}}),s.createElement("div",{className:"loading-team-integrations-in-detail__user",style:{width:`${Math.floor(74*Math.random())+40}px`}})),s.createElement("div",{className:"loading-team-integrations-in-detail__lastrun",style:{width:`${Math.floor(74*Math.random())+60}px`}}))))))))},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/teamIntegrations/TeamIntegrations.js":function(e,t,n){"use strict";n.r(t),n.d(t,{TeamIntegrations:function(){return A}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("./node_modules/classnames/index.js"),l=n.n(o),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/CurrentUserStore.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./js/components/base/FuzzySearchInput.js"),g=n("./js/components/base/Buttons.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=(n("./js/models/services/DashboardService.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingTeamIntegrations.js")),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js"),b=(n("./js/services/NavigationService.js"),n("./js/navigation/active-mode/constants.js")),v=n("./integrations/navigation/constants.js"),I=n("./js/modules/services/AnalyticsService.js"),S=n("./js/controllers/theme/ThemeManager.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoTeamIntegrations.js"),_=n("./appsdk/components/link/Link.js");class E extends r.Component{constructor(e){super(e),this.state={currentTheme:S.default.getCurrentTheme(),showFallbackIcon:!1},this.handleThemeChange=this.handleThemeChange.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange)}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleThemeChange(e){this.setState({currentTheme:e})}render(){const{integration:e}=this.props;return r.createElement(_.default,{to:{routeIdentifier:v.TEAM_INTEGRATIONS_IDENTIFIER,routeParams:{serviceId:e.serviceId,ruleId:e.ruleId}},onClick:()=>{let t=e.ruleId+"_card_click";I.default.addEventV2({category:"integrations",action:t,label:"team_integrations_dashboard",value:1})}},r.createElement("li",{className:"team-integrations__list-item"},r.createElement("div",{className:"team-integrations__list-item-rule-name"},r.createElement("span",{title:e.ruleName},e.ruleName.length>65?e.ruleName.substr(0,65)+"...":e.ruleName)),r.createElement("div",{className:"team-integrations__list-item-rule-details"},r.createElement("div",{className:"team-integrations__list-item-service-details"},r.createElement("div",{className:"team-integrations__list-item-service-icon-wrapper"},!this.state.showFallbackIcon&&r.createElement("img",{className:"team-integrations__list-item-service-icon",src:e.serviceDarkIconURL&&"dark"===this.state.currentTheme?e.serviceDarkIconURL:e.serviceIconURL,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&r.createElement("div",{className:"team-integrations__list-item-service-icon-wrapper__fallback-icon"})),r.createElement("div",{className:"team-integrations__list-item-service-name"},r.createElement("div",{className:"team-integrations__list-item-service-name__div",title:e.serviceName},e.serviceName))),r.createElement("div",{className:"team-integrations__list-item-status-item team-integrations__status-summary"},e.statusCount.failed&&r.createElement(m.default,{className:"team-integrations__status-summary__icon",name:"icon-state-error-stroke",color:"content-color-error",size:"small"}),r.createElement("div",{className:l()("team-integrations__status-summary__text",{"team-integrations__status-summary__text-configured":!e.statusCount.failed,"team-integrations__status-summary__text-error":e.statusCount.failed})},e.statusCount.failed?`${e.statusCount.failed} of ${e.totalIntegrations} Failed`:e.totalIntegrations>1?`${e.totalIntegrations} integrations`:`${e.totalIntegrations} integration`)))))}}let A=(0,u.observer)(s=class extends r.Component{constructor(e){super(e),this.state={searchQuery:"",integrations:e.teamIntegrations,filteredIntegrations:e.teamIntegrations,sortType:"default",flag:!1,teamIntegrationsExists:e.teamIntegrations.length>0},this.handleBrowseIntegrations=this.handleBrowseIntegrations.bind(this),this.handleFuzzySearch=this.handleFuzzySearch.bind(this),this.defaultSort=this.defaultSort.bind(this)}componentDidMount(){this.props.teamIntegrations.length>0&&this.setState({teamIntegrationsExists:!0}),I.default.addEventV2({category:"integrations",action:"view_team_integrations",label:"team_integrations_dashboard",value:1})}UNSAFE_componentWillReceiveProps(e){e.loading||this.state.flag||this.setState({filteredIntegrations:e.teamIntegrations,integrations:e.teamIntegrations,flag:!0,teamIntegrationsExists:e.teamIntegrations.length>0})}defaultSort(e){const t=i().filter(e,(e=>!!e.statusCount.failed)),n=i().sortBy(t,(e=>i().toLower(e.ruleName))),s=i().sortBy(i().difference(e,n),(e=>i().toLower(e.ruleName)));return i().concat(n,s)}handleBrowseIntegrations(){I.default.addEventV2({category:"integrations",action:"navigate_to_browse_integrations_teams_view",label:"team_integrations_browse",value:1})}handleFuzzySearch(e,t){this.setState({searchQuery:e,filteredIntegrations:e?this.defaultSort(t):this.state.integrations})}render(){let e=i().get((0,c.resolveStoreInstance)(d.default),"team.name","Home");return r.createElement("div",{className:"pm-container team-integrations page-1"},r.createElement("div",{className:"team-integrations-breadcrumbs"},r.createElement("span",{title:e,className:"team-integrations-team-name"},r.createElement(_.default,{to:{routeIdentifier:b.HOME}},e)),r.createElement("span",{className:"team-integrations-back-btn"},"/"),r.createElement("span",{className:"team-integrations-integration-name"},"Integrations")),r.createElement("div",{className:"team-integrations-title"},"Integrations"),r.createElement("div",{className:"team-integrations-description"},"Check out the integrations your teammates have used to connect Postman to their workflows"),r.createElement("div",{className:"team-integrations-actionables"},r.createElement("div",{className:"integrations-sort-search-wrapper"},r.createElement("div",{className:"integrations-sort-search"},r.createElement("div",{className:"integrations-search"},r.createElement(p.default,{ref:"fuzzySearch",searchQuery:this.state.searchQuery,placeholder:"Search team integrations",onChange:this.handleFuzzySearch,items:this.state.integrations,searchFields:["ruleName","serviceName"]}))),r.createElement(_.default,{to:{routeIdentifier:v.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:"all"}},options:{additionalContext:this.props.additionalContext}},r.createElement(g.Button,{size:"md",type:"secondary",className:"browse-integrations",onClick:this.handleBrowseIntegrations},"Browse All Integrations")))),r.createElement("div",null,this.props.loading?r.createElement(h.default,null):this.state.teamIntegrationsExists?i().isEmpty(this.state.filteredIntegrations)?r.createElement(f.default,null):r.createElement("ul",{className:"team-integrations__list"},this.state.filteredIntegrations.map(((e,t)=>r.createElement(E,{integration:e,key:t})))):r.createElement(y.default,null)))}})||s;t.default=A},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/teamIntegrations/TeamIntegrationsInDetail.js":function(e,t,n){"use strict";n.r(t),n.d(t,{TeamIntegrationsInDetailList:function(){return q},default:function(){return $}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("./node_modules/classnames/index.js"),l=n.n(o),c=n("./js/stores/StoreManager.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./js/components/base/Avatar.js"),p=n("./js/components/base/FuzzySearchInput.js"),g=n("./js/components/base/Buttons.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=n("./js/components/base/Dropdowns.js"),f=n("./js/constants/TeamIntegrationSortTypeMap.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoSearchResults.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/loading-states/LoadingTeamIntegrationsInDetail.js"),S=n("./js/services/NavigationService.js"),y=n("./js/models/services/DashboardService.js"),_=n("./js/constants/TeamIntegrationSortConstants.js"),E=n("./js/navigation/active-mode/constants.js"),A=n("./integrations/navigation/constants.js"),w=n("./js/modules/services/AnalyticsService.js"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/utils.js"),k=n("./integrations/services/OAuthService.js"),j=n("./js/components/base/Tooltips.js"),P=n("./node_modules/moment/moment.js"),T=n.n(P),N=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js"),D=n("./js/controllers/theme/ThemeManager.js"),R=n("./js/modules/services/APIService.js"),O=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/EntityFetchErrorComponent.js"),x=n("./appsdk/components/link/Link.js"),M=n("./js/components/base/LoadingIndicator.js"),L=n("./integrations/constants/notificationCenter.ts"),F=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),H=n("./js/utils/UserHelper.js"),B=n("./integrations/constants/uptimeMonitorIntegrations.ts"),U=n("./js/stores/CurrentUserStore.js"),V=n("./js/stores/IntegrationsStore.js"),G=n("./js/stores/SyncStatusStore.js"),z=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/InstanceCreationConstants.js"),W=n("./js/external-navigation/ExternalNavigationService.js");const K={collection:"icon-entity-collection-stroke",jobTemplate:"icon-entity-monitor-stroke",uptimeMonitor:"icon-descriptive-uptime-stroke",api:"icon-entity-api-stroke",apiversion:"icon-entity-api-stroke",team:"icon-descriptive-team-stroke"},Y={failed:{text:"Failed",iconName:"icon-state-error-stroke",color:"content-color-error"},active:{text:"Active",iconName:"icon-state-success-stroke",color:"content-color-success"}};class q extends r.Component{constructor(e){super(e),this.state={showTooltip:!1},this.openTooltip=this.openTooltip.bind(this),this.closeTooltip=this.closeTooltip.bind(this)}openTooltip(){this.setState({showTooltip:!0})}closeTooltip(){this.setState({showTooltip:!1})}render(){const{integration:e,currentUserId:t}=this.props;return r.createElement("li",{className:"team-integrations-detail__types-item clearfix"},r.createElement("div",{className:"pm-col-xs-12 pm-col-md-8  team-integrations-detail__types-item-info"},r.createElement("div",{className:"team-integrations-detail__types-item-name-status"},r.createElement("span",{title:e.name,className:"team-integrations-detail__types-item-name-link",onClick:()=>{let e=this.props.ruleId+"_specific_configured_integrations";w.default.addEventV2AndPublish({category:"integrations",action:"click_on_integration_name",label:e,value:1})}},r.createElement(x.default,{to:{routeIdentifier:A.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,routeParams:{integrationId:e.id}},options:{additionalContext:{userName:e.userName,userProfileUrl:e.userProfileUrl,ruleName:this.props.ruleName,serviceId:this.props.serviceId,serviceName:this.props.serviceName,serviceIconURL:this.props.serviceIconURL,serviceDarkIconURL:this.props.serviceDarkIconURL,apiDetails:{id:i().get(e,["apiDetails","id"],""),name:i().get(e,["apiDetails","name"],"")},entityName:e.entityName}}},e.name)),"failed"===e.status?r.createElement("div",{className:"team-integrations-detail__types-item-status team-integrations__status-summary",onClick:()=>{let e=this.props.ruleId+"_specific_configured_integrations";w.default.addEventV2AndPublish({category:"integrations",action:"click_on_status",label:e,value:1})}},r.createElement(m.default,{className:"team-integrations__status-summary__icon",name:Y[e.status].iconName,color:Y[e.status].color,size:"small"}),r.createElement("span",{className:l()("team-integrations__status-summary__text",{"team-integrations__status-summary__text-error":"failed"===e.status})},r.createElement(x.default,{to:{routeIdentifier:A.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,routeParams:{integrationId:e.id}},options:{additionalContext:{userName:e.userName,userProfileUrl:e.userProfileUrl,ruleName:this.props.ruleName,serviceId:this.props.serviceId,serviceName:this.props.serviceName,serviceIconURL:this.props.serviceIconURL,serviceDarkIconURL:this.props.serviceDarkIconURL,apiDetails:{id:i().get(e,["apiDetails","id"],""),name:i().get(e,["apiDetails","name"],"")},entityName:e.entityName}}},Y[e.status].text))):r.createElement("div",null)),r.createElement("div",{className:"team-integrations-detail__entity"},r.createElement("div",{className:"team-integrations-detail__entity-service"},"user"!==e.entityType&&r.createElement("span",{className:"team-integrations-detail__entity-service-link",title:i().isNil(e.entityName)||"apiversion"!==e.entityType?e.entityName:e.apiDetails.name+" ("+e.entityName+")"},r.createElement(m.default,{className:"team-integrations-detail__entity-service__icon",name:K[e.entityType],size:"small"}),i().isNil(e.entityName)?r.createElement(O.default,{className:"team-integrations-detail__entity-service-link--name--error",entityType:e.entityType}):r.createElement("div",{className:"team-integrations-detail__entity-service-link--name"},r.createElement("div",{className:"team-integrations-detail__entity-service-link--text"},C.default.EntityLinksHelper(e.entityType,e.entityId,e.entityName,e.apiDetails)))),r.createElement("span",{className:(s=e.isUserNameClickable,a="team-integrations-detail__user",l()({"is-clickable":s},a)),title:e.userName},r.createElement(u.default,{className:"team-integrations-detail__user-icon",type:"user",size:"small",userId:e.userId,customPic:e.userProfileUrl}),r.createElement("span",{className:"team-integrations-detail__user-label"},"Created by:",r.createElement("span",{className:"team-integrations-detail__user-name"},e.isUserNameClickable?r.createElement(x.default,{to:`${pm.dashboardUrl}/users/${e.userId}`},e.userId===t?" You":e.userName):e.userId===t?" You":e.userName)))),e.lastRunAt&&r.createElement("span",{className:"team-integrations-detail__lastrun"},r.createElement(m.default,{className:"team-integrations-detail__lastrun__icon",name:"icon-descriptive-time-stroke",size:"small"}),"Last Run:",r.createElement("span",{className:"team-integrations-detail__lastrun-text",ref:e=>this.dateRef=e,onMouseEnter:this.openTooltip,onMouseOut:this.closeTooltip},(n=e.lastRunAt,T()(n).fromNow())),r.createElement(j.Tooltip,{show:this.state.showTooltip,placement:"bottom",target:this.dateRef},r.createElement(j.TooltipBody,null,N.default.format(e.lastRunAt)))))));var n,s,a}}let $=(0,d.observer)(s=class extends r.Component{constructor(e){super(e),this.state={searchQuery:"",authorizing:!1,sessionId:"",integrations:e.teamIntegrations||[],filteredIntegrations:e.teamIntegrations,sortType:_.TEAM_INTEGRATIONS_SORT_TYPE_RELEVANCE,flag:!1,adding:!1,currentTheme:D.default.getCurrentTheme(),showFallbackIcon:!1},this.handleAddIntegration=this.handleAddIntegration.bind(this),this.handleFuzzySearch=this.handleFuzzySearch.bind(this),this.defaultSort=this.defaultSort.bind(this),this.initiateAuth=this.initiateAuth.bind(this),this.pollForToken=this.pollForToken.bind(this),this.fetchAuthDetails=this.fetchAuthDetails.bind(this),this.isAddIntegrationDisabled=this.isAddIntegrationDisabled.bind(this),this.getTooltipForAddIntegration=this.getTooltipForAddIntegration.bind(this),this.handleThemeChange=this.handleThemeChange.bind(this),this.getAddIntegrationButton=this.getAddIntegrationButton.bind(this)}componentDidMount(){pm.mediator.on("themeChange",this.handleThemeChange)}componentWillUnmount(){pm.mediator.off("themeChange",this.handleThemeChange)}handleThemeChange(e){this.setState({currentTheme:e})}UNSAFE_componentWillReceiveProps(e){if(!e.loading&&!this.state.flag){const t=this.defaultSort(e.teamIntegrations);this.setState({filteredIntegrations:t,integrations:t,flag:!0})}}initiateAuth(e){this.setState({authorizing:!0,adding:!1},(()=>{"apimatic"===e&&(e="github"),k.default.initiateAuthorization(e).then((t=>{let n,s=t.body;200!==t.status||i().isEmpty(s)?(pm.logger.warn("TeamIntegrationsInDetail~initiateOAuth: Something went wrong while opening authorization",t.body),pm.toasts.error("Something went wrong while initiating authorization"),this.setState({authorizing:!1})):(n=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${s.sessionId}`,S.default.openURL(n,{target:"_blank"}),this.setState({sessionId:s.sessionId},(()=>{this.pollForToken(e)})))})).catch((e=>{let t=!(0,c.resolveStoreInstance)(G.default).isSocketConnected?"You need to be online to complete the authorization ":"Something went wrong while initiating authorization";pm.logger.warn("TeamIntegrationsInDetail~initiateOAuth: Something went wrong while opening authorization",e),pm.toasts.error(t),this.setState({authorizing:!1})}))}))}pollForToken(e){let t=0,n=this.state.sessionId;if(!n)return pm.logger.warn("TeamIntegrationsInDetail~pollForToken: sessionId is required."),pm.toasts.error("Something went wrong while fetching authorization information"),void this.setState({authorizing:!1});const s=async(a,r)=>{t++,k.default.getSession(n).then((n=>{let o=n.body;if(30===t)return pm.toasts.error("Service timed out while performing authorization"),this.setState({authorizing:!1}),r(new Error("Exceeded max attempts"));if(!o.token||i().isEmpty(o.token))setTimeout(s,2e3,a,r);else{if(o.error)return pm.logger.warn("TeamIntegrationsInDetail~pollForToken: Error while getting a session for the user",o.error),pm.toasts.error("Something went wrong while fetching authorization information"),this.setState({authorizing:!1}),r(new Error("Error while getting a session for the user"));if(o.token)return this.fetchAuthDetails(e,o),a("Fetched OAuth token successfully for service ",e)}})).catch((e=>{if(e.error){let t=!(0,c.resolveStoreInstance)(G.default).isSocketConnected?"You need to be online to complete the authorization ":"Something went wrong while fetching authorization information";return pm.logger.warn("TeamIntegrationsInDetail~pollForToken: Error while getting a session for the user",e.error),pm.toasts.error(t),this.setState({authorizing:!1}),r(e.error)}}))};return new Promise(s)}fetchAuthDetails(e,t){k.default.services[e].fetchAuthDetails(t,((t,n)=>{t?(pm.logger.warn(`TeamIntegrationsInDetail~fetchAuthDetails: Error while fetching service details for ${e} `,t),pm.toasts.error(`Something went wrong while fetching authorization information for ${e}`),this.setState({authorizing:!1})):((0,c.resolveStoreInstance)(V.default).setAuthDetails(n),S.default.transitionTo(A.AUTHORIZED_INTEGRATIONS_IDENTIFIER,{serviceId:this.props.serviceId,ruleId:this.props.ruleId}))}))}handleAddIntegration(){if(w.default.addEventV2({category:"integrations",action:"add_integration_teams_view",label:this.props.ruleId+"_specific_configured_integrations",value:1}),this.setState({adding:!0}),"oauth2"===i().get(this.props.ruleSpecificDetails,["meta","auth_type"])&&"monitor_run_slack"!==this.props.ruleId&&this.props.ruleId!==B.UPTIME_MONITOR_SLACK)if("browser"===window.SDK_PLATFORM||i().get(F.default,[this.props.ruleId,"customCreateComponent"])){let e=this.props.serviceId;this.props.ruleId===L.SERVICES.slack.rule&&(e=L.SERVICES.slack.oauth_service),this.initiateAuth(e)}else(0,R.openAuthenticatedRoute)(`${pm.artemisUrl}/integrations/service/${this.props.serviceId}`),this.setState({adding:!1});else S.default.transitionTo(A.ADD_INTEGRATIONS_IDENTIFIER,{serviceId:this.props.serviceId,ruleId:this.props.ruleId})}defaultSort(e){let t,n;const s=i().filter(e,(e=>e.userId===(0,c.resolveStoreInstance)(U.default).id)),a=i().difference(e,s),r=i().filter(s,(e=>"failed"===e.status)),o=i().filter(a,(e=>"failed"===e.status));return n=i().isEmpty(o)?this.sortByType(a,"name"):i().concat(o,i().difference(a,o)),t=i().isEmpty(r)?this.sortByType(s,"name"):i().concat(r,i().difference(s,r)),i().concat(t,n)}sortByType(e,t){switch(t){case _.TEAM_INTEGRATIONS_SORT_TYPE_RELEVANCE:return this.defaultSort(e);case _.TEAM_INTEGRATIONS_SORT_TYPE_LAST_RUN:const n=i().filter(e,(e=>e.lastRunAt)),s=i().difference(e,n);return i().concat(i().orderBy(n,["lastRunAt"],["desc"]),s);default:return i().sortBy(e,(e=>i().toLower(e[t])))}}handleFuzzySearch(e,t){this.setState({searchQuery:e,filteredIntegrations:e?this.sortByType(t,this.state.sortType):this.sortByType(this.state.integrations,this.state.sortType)})}hasAlreadyConfiguredNotificationIntegration(e,t){return i().size(e)>=1&&i()(i().get(e,"0.clientCategories",[])).includes(L.CLIENT_CATEGORY)&&i()(e).map("userId").includes(t)}isAddIntegrationDisabled(e,t,n,s,a,r){return e||this.state.adding||this.state.authorizing||this.hasAlreadyConfiguredNotificationIntegration(this.state.integrations,a)||"single"===t&&!i().isEmpty(this.state.integrations)&&i().size(this.state.integrations)>=1||"admin"===n&&!s||!r}getTooltipForAddIntegration(e,t,n,s,a,r){return e?"You need to be online in order to create an integration":"single"===t&&!i().isEmpty(this.state.integrations)&&i().size(this.state.integrations)>=1?"Only one team activity Integration can be created":"admin"!==n||s?this.hasAlreadyConfiguredNotificationIntegration(this.state.integrations,a)?"You can create only one Postman Notification integration per service.":i().get(r,"description",""):"You should be team admin to add this integration"}getAddIntegrationButton(){let e=(0,c.resolveStoreInstance)(U.default),t=e.id,n={name:e.name,isLoggedIn:e.isLoggedIn,userName:e.username_email,id:e.id,organizations:e.organizations,teamSyncEnabled:e.teamSyncEnabled,profilePicUrl:e.profile_pic_url},s=(0,H.isUserAdmin)(n),a=!(0,c.resolveStoreInstance)(G.default).isSocketConnected,o=i().get(this.props.ruleSpecificDetails,"instanceCreation"),l=i().get(o,"code","DEFAULT_CODE"),d=i().get(o,"enabled",!1),u=i().get(this.props.ruleSpecificDetails,["meta","scope"],""),p=i().get(this.props.ruleSpecificDetails,["meta","type"],""),m=this.isAddIntegrationDisabled(a,p,u,s,t,d),h=this.getTooltipForAddIntegration(a,p,u,s,t,o),f=i().get(o,["additionalContext","upgradeLink"],null);return m?l===z.INSTANCE_CREATION_CODES.SHOULD_UPGRADE?r.createElement(g.Button,{className:"add-integrations",label:this.props.ruleId,type:"secondary",tooltip:h,size:"md",onClick:()=>{f?(0,W.openExternalLink)(f,"_blank"):(0,y.upgradeToPro)({utmParams:{utm_content:"team_integration_detail"}})}},"Upgrade"):r.createElement(g.Button,{className:"add-integrations",label:this.props.ruleId,disabled:m,type:"secondary",tooltip:h,size:"md"},this.state.authorizing?"Authorizing...":this.state.adding&&r.createElement(M.default,null)||"Add Integration"):r.createElement(g.Button,{size:"md",type:"primary",disabled:m,tooltip:h,className:"add-integrations",onClick:this.handleAddIntegration},this.state.authorizing?"Authorizing...":this.state.adding&&r.createElement(M.default,null)||"Add Integration")}render(){let e=i().get(this.props.ruleSpecificDetails,"name"),t=this.props.serviceDetails&&this.props.serviceDetails.iconUrl,n=this.props.serviceDetails&&this.props.serviceDetails.darkIconUrl,s=i().get(this.props.serviceDetails,"name"),a=(0,c.resolveStoreInstance)(U.default).id,o=i().get((0,c.resolveStoreInstance)(U.default),"team.name","Home");return r.createElement("div",{className:"pm-container team-integrations page-2"},r.createElement("div",{className:"team-integrations-breadcrumbs"},r.createElement("span",{title:o,className:"team-integrations-team-name"},r.createElement(x.default,{to:{routeIdentifier:E.HOME}},o)),r.createElement("span",{className:"team-integrations-back-btn"},"/"),r.createElement("span",{className:"team-integrations-integration-page"},r.createElement(x.default,{to:{routeIdentifier:A.OPEN_INTEGRATIONS_HOME_IDENTIFIER}},"Integrations")),r.createElement("span",{className:"team-integrations-back-btn"},this.props.loading?"":"/"),r.createElement("span",{className:"team-integrations-integration-name"},this.props.loading?"":e)),this.props.loading?r.createElement(I.default,null):this.props.error?r.createElement(v.default,{errorDetails:this.props.errorDetails,origin:"team_integrations_in_detail"}):r.createElement(r.Fragment,null,r.createElement("div",{className:"team-integrations-detail__header"},r.createElement("div",{className:"team-integrations-detail__service-icon-wrapper"},!this.state.showFallbackIcon&&r.createElement("img",{className:"team-integrations-detail__service-icon",src:n&&"dark"===this.state.currentTheme?n:t,onError:()=>this.setState({showFallbackIcon:!0})}),this.state.showFallbackIcon&&r.createElement("div",{className:"team-integrations-detail__service-icon team-integrations-detail__fallback-icon"})),r.createElement("div",{className:"team-integrations-detail__header-text"},r.createElement("div",{className:"team-integrations-detail__header-text--title"},e),r.createElement("div",{className:"team-integrations-detail__header-text--description"},"View every instance of this integration on your team."))),r.createElement("div",{className:"team-integrations-actionables"},r.createElement("div",{className:"integrations-sort-search-wrapper"},r.createElement("div",{className:"integrations-sort-search"},r.createElement("div",{className:"team-integrations-filter__actions"},r.createElement("div",{className:"team-integrations-filter__actions__meta"},"Sort by: "),r.createElement(h.Dropdown,{onSelect:e=>{this.setState({sortType:e,filteredIntegrations:this.sortByType(this.state.filteredIntegrations,e)})}},r.createElement(h.DropdownButton,{type:"secondary",size:"small"},r.createElement(g.Button,{className:"team-integrations-filter__actions-sort-button"},r.createElement("div",null,f.default[this.state.sortType]))),r.createElement(h.DropdownMenu,{"align-left":!0},r.createElement(h.MenuItem,{refKey:_.TEAM_INTEGRATIONS_SORT_TYPE_RELEVANCE},r.createElement("span",null,f.default[_.TEAM_INTEGRATIONS_SORT_TYPE_RELEVANCE])),r.createElement(h.MenuItem,{refKey:_.TEAM_INTEGRATIONS_SORT_TYPE_NAME},r.createElement("span",null,f.default[_.TEAM_INTEGRATIONS_SORT_TYPE_NAME])),r.createElement(h.MenuItem,{refKey:_.TEAM_INTEGRATIONS_SORT_TYPE_LAST_RUN},r.createElement("span",null,f.default[_.TEAM_INTEGRATIONS_SORT_TYPE_LAST_RUN])),r.createElement(h.MenuItem,{refKey:_.TEAM_INTEGRATIONS_SORT_TYPE_CREATED_BY},r.createElement("span",null,f.default[_.TEAM_INTEGRATIONS_SORT_TYPE_CREATED_BY]))))),r.createElement("div",{className:"integrations-search"},r.createElement(p.default,{ref:"fuzzySearch",searchQuery:this.state.searchQuery,placeholder:"Search",onChange:this.handleFuzzySearch,items:this.state.integrations,searchFields:["name","entityName","userName","lastRun"]}))),this.getAddIntegrationButton())),r.createElement("div",null,i().isEmpty(this.state.filteredIntegrations)?r.createElement(b.default,null):r.createElement("ul",{className:"team-integrations-detail__types-list"},this.state.filteredIntegrations.map(((i,o)=>r.createElement(q,{integration:i,currentUserId:a,key:o,ruleId:this.props.ruleId,serviceId:this.props.serviceId,serviceName:s,serviceIconURL:t,serviceDarkIconURL:n,ruleName:e})))))))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/ApiVersionRepositoryEnterprise.js":function(e){e.exports={SERVICE_TO_NAME:{github:"GitHub",gitlab:"GitLab Self-managed",azure:"Azure DevOps"}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{RESET:function(){return s}});const s="reset"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/InstanceCreationConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{INSTANCE_CREATION_CODES:function(){return s}});const s={SHOULD_UPGRADE:"SHOULD_UPGRADE",CREATION_ALLOWED:"CREATION_ALLOWED",SHOULD_BE_A_TEAM_USER:"SHOULD_BE_A_TEAM_USER"}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/coralogix.js":function(e){e.exports={regions:[{label:"Europe",value:"europe"},{label:"India",value:"india"},{label:"USA",value:"usa"}]}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/deprecatedClasses.js":function(e,t,n){"use strict";n.r(t),n.d(t,{DEFAULT_DEPRECATION_BANNER_OPTIONS:function(){return c},DEPRECATED_CLASSES:function(){return o},DEPRECATED_CLASS_OPTIONS:function(){return d},DEPRECATION_TOOLTIP_DEFAULT_MESSAGE:function(){return l}});const s="api_github",a="apiversion_github",i="aws_api_gateway",r={tooltipMessage:"This integration is deprecated. Sync your API between Postman and remote Git-based repositories with enhanced capabilities using the new repository integration.",banner:{body:"Sync your API between Postman and remote Git-based repositories with enhanced capabilities using the new repository integration.",externalLink:{url:"https://go.pstmn.io/deprecation-schema-sync"}}},o=[s,a,i],l="The creation of new instances for this integration has been disabled.",c={TITLE:"This integration is deprecated.",BODY:"The creation of new instances for this integration has been disabled.",EXTERNAL_LINK_TEXT:"Learn more about the new integration."},d={[s]:r,[a]:r,[i]:{tooltipMessage:"This integration is deprecated. Connect to AWS API Gateway to view deployments from across all stages, logs and metrics inside Postman using the new AWS API Gateway integration.",banner:{body:"Connect to AWS API Gateway to view deployments from across all stages, logs and metrics inside Postman using the new AWS API Gateway integration.",externalLink:{url:"https://go.pstmn.io/deprecation-aws-api-gateway"}}}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/statuspage.js":function(e){e.exports={componentStatuses:[{label:"Operational",value:"operational"},{label:"Under Maintenance",value:"under_maintenance"},{label:"Degraded Performance",value:"degraded_performance"},{label:"Partial Outage",value:"partial_outage"},{label:"Major Outage",value:"major_outage"}],incidentStatuses:[{label:"Investigating",value:"investigating"},{label:"Identified",value:"identified"},{label:"Monitoring",value:"monitoring"},{label:"Resolved",value:"resolved"}],impacts:[{label:"None",value:"none"},{label:"Minor",value:"minor"},{label:"Major",value:"major"},{label:"Critical",value:"critical"},{label:"Maintenance",value:"maintenance"}]}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/AuthRedirectionSetup.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});n("./node_modules/lodash/lodash.js");var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/LoadingIndicator.js");class i extends s.Component{constructor(e){super(e)}render(){return s.createElement(a.default,null)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/IntegrationInstanceCreate.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s,a=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/LegacyIntegrationServiceSetup.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/IntegrationInstanceCreateContainer.js"),l=n("./node_modules/lodash/lodash.js");let c=(0,r.observer)(s=class extends a.Component{constructor(e){super(e)}render(){return l.get(this.props.controller,"customComponentConfig.useLegacyDataFormat",!1)?a.createElement(i.default,this.props):a.createElement(o.default,{additionalContext:this.props.controller.additionalContext,classId:this.props.controller.classId,serviceId:this.props.controller.serviceId,preferredEntities:this.props.controller.preferredEntities})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/IntegrationInstanceEdit.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/SyncStatusStore.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/LegacyEditIntegrationContainer.js"),l=n("./js/components/base/LoadingIndicator.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/edit/IntegrationInstanceEditContainer.js"),g=n("./node_modules/lodash/lodash.js");let m=(0,u.observer)(s=class extends a.Component{constructor(e){super(e)}render(){const e=!(0,i.resolveStoreInstance)(r.default).isSocketConnected;return this.props.controller.loadingIntegrationData?a.createElement("div",{className:"integrations-page-container"},a.createElement(l.default,null)):e?a.createElement("div",{className:"integrations-page-container"},a.createElement(d.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."})):this.props.controller.errorInIntegrationData?a.createElement("div",{className:"integrations-page-container"},a.createElement(c.default,{errorDetails:this.props.controller.integrationDataErrorDetails})):g.get(this.props.controller,"customComponentConfig.useLegacyDataFormat",!1)?a.createElement(o.default,this.props):a.createElement(p.default,{classId:this.props.controller.classId,integrationId:this.props.controller.integrationId,integrationData:this.props.controller.integrationData,allowedActions:this.props.controller.allowedActions,preferredEntities:this.props.controller.preferredEntities})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/IntegrationRunsListing.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./js/stores/SyncStatusStore.js"),d=n("./js/stores/StoreManager.js"),u=n("./js/stores/IntegrationsStore.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/IntegrationRunsList.js"),h=n("./js/components/base/LoadingIndicator.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/Breadcrumbs.js");let b=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.store=(0,d.resolveStoreInstance)(u.default)}componentWillUnmount(){this.store.updateRunsPageResponseStatus(!0,!1,""),this.store.updateRunsPageResponse([])}render(){let e=(0,l.toJS)(this.store.runLogPageData),t=!(0,d.resolveStoreInstance)(c.default).isSocketConnected;return this.store.loadingRunLogPage?r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integration-runs__list-container"},r.createElement("div",{className:"integration-runs__list-container__breadcrumb"},r.createElement(f.default,{name:e.name,serviceId:e.serviceId,ruleId:e.ruleId,ruleName:i().get(this.props.controller,"ruleName")||i().get(e,"ruleName")})),r.createElement("div",{className:"integration-runs__list-container__loading"},r.createElement(h.default,null)))):!t&&this.store.errorInFetchingRunLogPageData?r.createElement("div",{className:"integrations-page-container"},r.createElement(g.default,{errorDetails:(0,l.toJS)(this.store.runLogPageErrorDetails)})):i().isEmpty(e)?r.createElement("div",{className:"integrations-page-container"},r.createElement(p.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."})):r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integration-runs__list-container"},r.createElement("div",{className:"integration-runs__list-container__breadcrumb"},r.createElement(f.default,{name:e.name,serviceId:e.serviceId,ruleId:e.ruleId,ruleName:i().get(this.props.controller,"ruleName")||i().get(e,"ruleName")})),r.createElement(m.default,{runLogPageData:e,integrationVariables:this.props.controller.integrationVariables})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/LegacyEditIntegrationContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/services/NavigationService.js"),c=n("./integrations/navigation/constants.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js");let u=(0,o.observer)(s=class extends r.Component{constructor(e){super(e)}render(){let e=this.props.controller.integrationData,t=this.props.controller.customComponentConfig.customEditComponent;if(!i().isEmpty(e)&&e.rule)return e.allowedActions.update?r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integration-edit"},r.createElement("div",{className:"integration-edit-card"},"api_github"!==e.rule&&r.createElement(d.default,{type:"h1",text:"Edit integration",className:"integration-edit-card__head"}),r.createElement(t,this.props)))):(l.default.transitionTo(c.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,{integrationId:e.id}),r.createElement("div",null))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/TeamIntegrationsListing.js":function(e,t,n){"use strict";n.r(t);var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoTeamIntegrations.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/teamIntegrations/TeamIntegrations.js"),b=n("./iam/src/common/components/withPermissions.js"),v=n("./js/stores/CurrentUserStore.js"),I=n("./js/services/NavigationService.js"),S=n("./js/navigation/active-mode/constants.js"),y=n("./onboarding/navigation/constants.js");let _=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={data:[],loading:!0,error:!1,errorDetails:""},this.integrationsStore=(0,u.resolveStoreInstance)(p.default)}render(){let e=!(0,u.resolveStoreInstance)(d.default).isSocketConnected,t=(0,l.toJS)(this.integrationsStore.teamIntegrations);return this.integrationsStore.loadingTeamIntegrations||this.integrationsStore.isHydrating?r.createElement("div",{className:"integrations-page-container"},r.createElement(f.default,{teamIntegrations:t,loading:this.integrationsStore.loadingTeamIntegrations||this.integrationsStore.isHydrating})):!e&&this.integrationsStore.errorInFetchingTeamIntegrations?r.createElement("div",{className:"integrations-page-container"},r.createElement(h.default,{errorDetails:this.integrationsStore.errorDetails})):this.integrationsStore.noTeamIntegrations||!i().isEmpty(t)?r.createElement("div",{className:"integrations-page-container"},i().isEmpty(t)?r.createElement(g.default,null):r.createElement(f.default,{teamIntegrations:t,loading:this.integrationsStore.loadingTeamIntegrations||this.integrationsStore.isHydrating})):r.createElement("div",{className:"integrations-page-container"},r.createElement(m.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."}))}})||s;t.default=(0,o.observer)((e=>{let t=i().get((0,u.resolveStoreInstance)(v.default),"teamId"),n=i().get((0,u.resolveStoreInstance)(v.default),"isCurrentUserPartner"),s={IllustrationComponent:c.default,forbiddenMessage:n?"As a partner you don't have permission to view this page.":"You don't have permission to view this page.",primaryAction:{text:n?"View Partner Workspaces":"View Workspaces",action:()=>{I.default.transitionTo(y.OPEN_WORKSPACES_HOME_IDENTIFIER)}},secondaryAction:{text:"Go To Home",action:()=>{I.default.transitionTo(S.HOME)}}};const a=(0,b.default)({permission:"VIEW_INTEGRATIONS_IN_TEAM",objectType:"team",objectId:t},s)(_);return r.createElement(a,e)}))},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/TeamIntegrationsListingInDetail.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/SyncStatusStore.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/teamIntegrations/TeamIntegrationsInDetail.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),g=n("./js/modules/services/AnalyticsService.js"),m=n("./js/services/NavigationService.js"),h=n("./integrations/navigation/constants.js");let f=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.store=(0,c.resolveStoreInstance)(d.default)}componentDidMount(){let e=this.props.controller.ruleId+"_specific_configured_integrations";g.default.addEventV2AndPublish({category:"integrations",action:"view",label:e,value:1})}render(){const e=!(0,c.resolveStoreInstance)(l.default).isSocketConnected,{ruleId:t,serviceId:n}=this.props.controller,s=i().get(this.store.readRuleSpecificTeamIntegrationsDataStatus(t),"loading"),a=this.store.readRuleSpecificTeamIntegrations(t),o=this.store.readServiceDetails(n),d=i().get(this.store.readRuleSpecificTeamIntegrationsDataStatus(t),"error"),g=i().get(this.store.readRuleSpecificTeamIntegrationsDataStatus(t),"errorDetails"),f=this.store.readRuleDetails(t);return s?r.createElement("div",{className:"integrations-page-container"},r.createElement(u.default,{ruleId:t,ruleSpecificDetails:f,serviceDetails:o,serviceId:n,teamIntegrations:a,loading:s,error:d,errorDetails:g})):a&&i().isEmpty(a)&&!d?(m.default.transitionTo(h.OPEN_INTEGRATIONS_HOME_IDENTIFIER),r.createElement("div",null)):a||!e&&d?r.createElement("div",{className:"integrations-page-container"},r.createElement(u.default,{ruleSpecificDetails:f,ruleId:t,serviceDetails:o,serviceId:n,teamIntegrations:a,loading:s,error:d,errorDetails:g})):r.createElement("div",{className:"integrations-page-container"},r.createElement(p.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/AddApiVersionActions.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/components/base/Buttons.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/services/NavigationService.js"),u=n("./integrations/navigation/constants.js"),p=n("./js/modules/services/AnalyticsService.js"),g=n("./node_modules/lodash/lodash.js"),m=n.n(g);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},h.apply(this,arguments)}let f=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default)}render(){const{disabled:e,label:t,payload:n,integrationId:s,workspaceId:i,rule:g,service:f,onCancelHandler:b,...v}=this.props;return a.createElement("div",null,a.createElement("div",{className:"api-version-add-actions__button--container"},a.createElement(r.Button,h({className:"api-version-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:b},v)," Cancel "),a.createElement(r.Button,h({type:"primary",className:"api-version-add-actions__button--save-changes",disabled:e||this.store.isAdding,size:"small",tooltip:e?"Make sure that you've entered all the mandatory fields and a valid branch":"",onClick:()=>{this.store.updateIsAdding(!0),o.default.createIntegration(i,n).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success("Added a new API Version"),p.default.addEventV2({category:"integrations",action:g+"_created_integration",label:"team_integrations_create_forms",value:1}),this.store.updateSourceConflicting(!1),(0,l.resolveStoreInstance)(c.default).refetchTeamIntegrations(),d.default.transitionTo(u.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:s},{apiId:n.executor,workspaceId:i}),this.store.resetSelectedEntityVersion()):pm.toasts.error("Something went wrong while adding a new API Version"),this.store.updateIsAdding(!1)})).catch((e=>{"sourceNotSpecifiedError"===m().get(e,"error.name")?(pm.toasts.error("The Postman API version and GitHub file path you chose both have schemas. Select the schema you wish to keep. The other schema will be overwritten."),this.store.updateSourceConflicting(!0)):!e.error||"integrationFoundError"!==e.error.name&&"instanceFoundError"!==e.error.name?(pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding API Version",e)):pm.toasts.error(`Version ${this.props.selectedApiVersion} is already synced with GitHub. Select a different version to continue.`),this.store.updateIsAdding(!1)}))}},v)," Add API Version")))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/AddApiVersionModal.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("./js/components/base/Modals.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegmentV2.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/AddApiVersionActions.js"),p=n("./js/stores/StoreManager.js"),g=n("./js/stores/IntegrationsStore.js"),m=n("./integrations/constants/integrationsConstants.ts"),h=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),f=n("./node_modules/react-radio-group/lib/index.js");let b=(0,h.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,p.resolveStoreInstance)(g.default),this.state={branch:"",directory:"",fileName:"",errorInValidatingBranch:"",errorInDirectoryPath:"",source:"",selectedApiVersion:"",isBranchValid:!1,showRetry:!1},this.fetchBranches=this.fetchBranches.bind(this),this.debouncedFetchBranchesFn=r().find(this.fetchBranches,500),this.handleBranchChange=this.handleBranchChange.bind(this),this.validateDirectory=this.validateDirectory.bind(this),this.handleDirectoryChange=this.handleDirectoryChange.bind(this),this.handleCloseModal=this.handleCloseModal.bind(this)}fetchBranches(e,t){r().isEmpty(t)||c.default.fetchActionDetails(e,{type:"searchBranch",branchName:t}).then((e=>{200===e.status&&r().get(e,"body.data")?(this.setState({isBranchValid:!0,errorInValidatingBranch:"",showRetry:!1}),pm.toasts.success("Branch Validated")):(this.setState({errorInValidatingBranch:"Couldn't search GitHub branch.",isBranchValid:!1,showRetry:!0}),pm.logger.error("Couldn't search GitHub branch",e))})).catch((e=>{404===e.status&&"branchNotFoundError"===r().get(e,"error.name")?this.setState({errorInValidatingBranch:"Branch not found",isBranchValid:!1,showRetry:!1}):(this.setState({errorInValidatingBranch:"Error while validating branch.",isBranchValid:!1,showRetry:!0}),pm.toasts.error("Something went wrong while validating branch, please try again"),pm.logger.error("Error while validating branch",e))}))}validateDirectory(){const e=this.state.directory.trim();e.startsWith("/")?this.setState({errorInDirectoryPath:"Directory path cannot start with a slash"}):e.endsWith("/")?this.setState({errorInDirectoryPath:"Directory path cannot end with a slash"}):this.setState({errorInDirectoryPath:""})}handleDirectoryChange(e){this.setState({errorInDirectoryPath:"",directory:e.trim()})}handleBranchChange(e){this.setState({errorInValidatingBranch:"",branch:e.trim(),isBranchValid:!1})}handleCloseModal(){this.store.resetSelectedEntityVersion(),this.store.updateSourceConflicting(!1),this.setState({branch:"",directory:"",fileName:"",errorInValidatingBranch:"",errorInDirectoryPath:"",source:"",isBranchValid:!1},(()=>this.props.onRequestClose()))}render(){const{branch:e,fileName:t,directory:n,errorInValidatingBranch:s,errorInDirectoryPath:i,isBranchValid:r,source:c,showRetry:p}=this.state,{apiId:g,apiVersion:h,integrationId:b,name:v,entity:I,rule:S}=this.props,y={rule:"apiversion_github",entity:"apiversion",executor:h,variables:{directory:n,filename:t,branch:e,source:this.state.source,api:g,name:v}};return this.store.sourceConflicting?a.createElement(o.Modal,{onRequestClose:this.handleCloseModal,isOpen:this.props.openModal,className:"api-version-modal"},a.createElement(o.ModalHeader,null,a.createElement("h3",{className:"pm-h3"},"Schema Conflict")),a.createElement(o.ModalContent,null,a.createElement("div",{className:"integrations-modal-content__schema-conflict"},"The Postman API version and GitHub file path you chose both have schemas. Select the schema you wish to keep. The other schema will be overwritten."),a.createElement(f.RadioGroup,{name:"API Schema Source",selectedValue:c,onChange:e=>{this.setState({source:e})}},a.createElement("div",{className:"integrations-radio-button__select-group--options"},a.createElement("label",null,a.createElement(f.Radio,{value:"postman",className:"radio-button integrations-radio-button__select-group--options__radio"}),a.createElement("span",null,"Postman API Schema"))),a.createElement("div",{className:"integrations-radio-button__select-group--options"},a.createElement("label",null,a.createElement(f.Radio,{value:"github",className:"radio-button integrations-radio-button__select-group--options__radio"}),a.createElement("span",null,"GitHub File")))),a.createElement(u.default,{disabled:!(e&&g&&t&&h&&c&&r),payload:y,service:this.props.service,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,selectedApiVersion:this.store.selectedApiVersion&&this.store.selectedApiVersion.label,rule:"apiversion_github",integrationId:b,onCancelHandler:this.handleCloseModal}))):a.createElement(o.Modal,{onRequestClose:this.handleCloseModal,isOpen:this.props.openModal,className:"api-version-modal"},a.createElement(o.ModalHeader,null,a.createElement("h3",{className:"pm-h3"},"Add API Version")),a.createElement(o.ModalContent,null,a.createElement("div",null,"Add an existing API version to sync with your code repository."),a.createElement(l.default,{id:"api-schema-versions",entity:m.entityTypes.API_VERSIONS,apiId:g,title:"Select API Version",rule:"apiversion_github",mode:m.INTEGRATION_FORM_MODE.ADD}),a.createElement(d.default,{id:"schema-sync-branch",placeholder:"eg. feature/postman-api-integration",title:"Branch",error:!!s,errorMessage:s,value:e,onBlur:()=>{this.fetchBranches(b,this.state.branch)},handleRetry:()=>{this.fetchBranches(b,this.state.branch)},showRetry:p,onChange:this.handleBranchChange}),a.createElement(d.default,{optional:!0,id:"schema-sync-directory",placeholder:"eg. src/js",title:"Directory",error:!!i,errorMessage:i,value:n,onBlur:this.validateDirectory,onChange:this.handleDirectoryChange}),a.createElement(d.default,{id:"schema-sync-filename",placeholder:"eg. filename.extension",title:"Filename",value:t,onChange:e=>this.setState({fileName:e.trim()})}),a.createElement(u.default,{disabled:!(e&&g&&t&&h&&r),payload:y,service:this.props.service,workspaceId:this.store.selectedWorkspace&&this.store.selectedWorkspace.value,rule:"apiversion_github",selectedApiVersion:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.label,integrationId:b,onCancelHandler:this.handleCloseModal})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/GitHubSchemaSyncIntegration.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s,a=n("../../node_modules/react/index.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),d=n("./js/components/base/Buttons.js"),u=n("./js/components/base/LoadingIndicator.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/AddApiVersionModal.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegmentV2.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),b=n("./js/utils/ClipboardHelper.js"),v=n("./js/components/base/Modals.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/SaveChangesAndCancelButton.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js");let y=(0,o.observer)(s=class extends a.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.state={openModal:!1,openDeleteModal:!1,deleteIntegrationId:"",loadingRelations:!1,isDeleting:!1,loadingTable:!1,apiVersionIntegrations:[],apiId:""},this.handleClose=this.handleClose.bind(this),this.handleDeleteClose=this.handleDeleteClose.bind(this),this.handleDeleteOpen=this.handleDeleteOpen.bind(this),this.handleOpenModal=this.handleOpenModal.bind(this),this.handleCopy=this.handleCopy.bind(this),this.onApiVersionIntegrationDelete=this.onApiVersionIntegrationDelete.bind(this),this.fetchIntegrationRelations=this.fetchIntegrationRelations.bind(this)}componentDidMount(){const{variables:e,id:t,executor:n,rule:s,serviceId:a,entity:i}=this.props.controller.integrationData;this.setState({apiIntegrationName:e.name,apiId:n,entity:i,rule:s,integrationId:t,service:a,repoName:e.repository,webhookURL:e.webhook,webhookSecret:e.secret}),this.fetchIntegrationRelations()}fetchIntegrationRelations(){const{id:e}=this.props.controller.integrationData;this.setState({loadingRelations:!0}),f.default.fetchIntegrationRelations(e).then((e=>{if(200===e.status&&r().get(e,"body.data")){const t=r().get(e,"body.data");this.setState({apiVersionIntegrations:t})}else pm.toasts.error("We were unable to fetch your integration. Please try again later."),pm.logger.error("Couldn't fetch integrations",e);this.setState({loadingRelations:!1})})).catch((e=>{this.setState({loadingRelations:!1}),pm.toasts.error("Something went wrong while fetching integrations, please try again"),pm.logger.error("Error occurred while fetching integrations",e)}))}handleClose(){this.setState({openModal:!1})}handleOpenModal(){this.setState({openModal:!0})}handleDeleteClose(){this.setState({isDeleting:!1,openDeleteModal:!1,deleteIntegrationId:""})}handleDeleteOpen(e){this.setState({openDeleteModal:!0,deleteIntegrationId:e})}handleCopy(e,t){b.default.copy(e),setTimeout((()=>{pm.toasts.success(t+" Copied")}),500)}onApiVersionIntegrationDelete(){const e=this.state.deleteIntegrationId;r().isNaN(e)?(this.handleDeleteClose(),pm.toasts.error("Something went wrong while deleting integration, please try again")):(this.setState({loadingTable:!0,isDeleting:!0}),f.default.deleteIntegration(e).then((e=>{this.handleDeleteClose(),200===e.status?this.fetchIntegrationRelations():(pm.toasts.error("Something went wrong while deleting integration, please try again"),pm.logger.error("Something went wrong while deleting integration",e)),this.setState({loadingTable:!1,isDeleting:!1})})).catch((e=>{this.handleDeleteClose(),this.setState({loadingTable:!1,isDeleting:!1}),pm.toasts.error("Something went wrong while deleting integration, please try again"),pm.logger.error("Error occurred while deleting integration",e)})))}render(){const{integrationId:e,entity:t,apiId:n,service:s,apiIntegrationName:i,rule:o,apiVersionIntegrations:l,loadingTable:c,loadingRelations:f}=this.state;return a.createElement("div",{className:"api-version-integration"},a.createElement(p.default,{onRequestClose:this.handleClose,openModal:this.state.openModal,apiId:n,apiVersion:this.store.selectedEntityVersion&&this.store.selectedEntityVersion.value,integrationId:e,name:i,entity:t,rule:o,service:s}),a.createElement(v.Modal,{onRequestClose:this.handleDeleteClose,isOpen:this.state.openDeleteModal},a.createElement(v.ModalHeader,null,"Remove API Version"),a.createElement(v.ModalContent,null,"This API version will no longer be synced with the GitHub repo."),a.createElement(v.ModalFooter,null,a.createElement(d.Button,{type:"primary",size:"small",onClick:this.onApiVersionIntegrationDelete,disabled:this.state.isDeleting,className:"api-version-integration__delete-button"},this.state.isDeleting?a.createElement(u.default,null):"Delete"),a.createElement(d.Button,{type:"secondary",size:"small",onClick:this.handleDeleteClose,disabled:this.state.isDeleting},"Cancel"))),a.createElement("div",{className:"api-version-integration__header"},a.createElement("div",{className:"api-version-integration__header__title"},"Integration Created"),a.createElement("div",{className:"api-version-integration__header__icon"},a.createElement(m.default,{name:"icon-state-success-fill-small",color:"base-color-success",size:"small"})),a.createElement("div",{className:"api-version-integration__header__description"},this.state.apiIntegrationName,"  ",this.state.repoName)),a.createElement(g.default,{title:"This integration is deprecated",type:"local",status:"warning"},"Sync your API between Postman and remote Git-based repositories with enhanced capabilities using the new repository integration.",a.createElement(S.default,{extUrl:"https://learning.postman.com/docs/designing-and-developing-your-api/versioning-an-api/#connecting-a-repository"},"Learn more about the new integration")),a.createElement("div",{className:"api-version-integration__content"},a.createElement("div",{className:"api-version-integration__content__header"},a.createElement("div",{className:"api-version-integration__content__header__title"},"Add a webhook for your GitHub repo"),"To set up a webhook, go to the settings page of your repository or organization. From there, click ",a.createElement("strong",null,"Webhooks"),", then ",a.createElement("strong",null,"Add webhook"),". Ensure that Content type is set to ",a.createElement("code",null,"application/json"),".",a.createElement(S.default,{extUrl:"https://go.pstmn.io/schema-integration-webhook-setup"},"Learn more about adding a webhook")),a.createElement(h.default,{readOnly:!0,className:"api-version-integration__content__input-entity",title:"URL",value:this.state.webhookURL||"",addCopy:!0,handleOnClick:()=>{this.handleCopy(this.state.webhookURL,"URL")}}),a.createElement(h.default,{readOnly:!0,className:"api-version-integration__content__input-entity",title:"Secret",value:this.state.webhookSecret||"",addCopy:!0,handleOnClick:()=>{this.handleCopy(this.state.webhookSecret,"Secret")}})),a.createElement("div",{className:"api-version-integration__content"},a.createElement("div",{className:"api-version-integration__content__header"},a.createElement("div",{className:"api-version-integration__content__header__title"},"Select API versions to sync"),a.createElement("div",{className:"api-version-integration__content__header__description"},a.createElement("span",{className:"api-version-integration__content__header__description__content"},"Add API versions whose schemas you want to sync and specify where they should be stored in GitHub. If the file doesnt exist, well create it for you."),a.createElement("div",{className:"api-version-integration__content__header__description__button"},a.createElement(d.Button,{type:"secondary",size:"small",onClick:this.handleOpenModal},"Add API Version")))),a.createElement("div",{className:"api-version-integration__content__table"},a.createElement("div",{className:"api-version-integration__content__table__header"},a.createElement("div",{className:"api-version-integration__content__table__header__name"},"API VERSION"),a.createElement("div",{className:"api-version-integration__content__table__header__branch"},"BRANCH"),a.createElement("div",{className:"api-version-integration__content__table__header__path"},"FILE PATH"),a.createElement("div",{className:"api-version-integration__content__table__header__actions"},"")),a.createElement("div",null,c||f?a.createElement("div",{className:"api-version-integration__content__table__loader"},a.createElement(u.default,null)):l.length>0?r().map(l,(e=>{const t=r().get(e,"variables.directory")?`${r().get(e,"variables.directory")}/${r().get(e,"variables.filename")}`:`${r().get(e,"variables.filename")}`;let n=t.length>24?"..."+t.substr(t.length-24):t;return a.createElement("div",{className:"api-version-integration__content__table__item",key:e.id},a.createElement("div",{className:"api-version-integration__content__table__item__name",title:r().get(e,"variables.name")},r().get(e,"variables.name")),a.createElement("div",{className:"api-version-integration__content__table__item__branch",title:r().get(e,"variables.branch")},r().get(e,"variables.branch")),a.createElement("div",{className:"api-version-integration__content__table__item__path",title:t},n),a.createElement("div",{className:"api-version-integration__content__table__item__actions",onClick:()=>{this.handleDeleteOpen(e.id)}},a.createElement(m.default,{name:"icon-action-delete-stroke-small",color:"base-color-error",size:"small"})))})):a.createElement("div",{className:"api-version-integration__content__table__empty"},a.createElement("div",{className:"api-version-integration__content__table__empty__title"},"No API versions synced yet"),a.createElement("div",{className:"api-version-integration__content__table__empty__description"},"You can find the API versions synced to your connected repo here."),a.createElement("div",{className:"api-version-integration__content__table__empty__add-button"},a.createElement(d.Button,{type:"secondary",size:"small",onClick:this.handleOpenModal},"Add API Version"))))),a.createElement(I.default,{serviceId:s,ruleId:o})))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/IntegrationInstanceCreateContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/SyncStatusStore.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/components/base/LoadingIndicator.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/default/DefaultIntegrationInstanceCreateComponent.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),f=n("./js/modules/sync-conflict-models/response.js"),b=n("./node_modules/lodash/lodash.js");let v=(0,o.observer)(s=class extends a.Component{constructor(e){super(e),this.state={loading:!1,error:!1,errorDetails:"",classData:{}},this.customComponentConfig=b.get(u.default,e.classId,{})}fetchClassData(e){this.setState({loading:!0},(()=>{g.default.fetchIntegrationClassDetails(e).then((e=>{const t=b.get(e,"body.data");200!==e.status||b.isEmpty(t)?(pm.logger.error("Error in fetching class details for create form",e),this.setState({loading:!1,error:!0,errorDetails:{status:e.status,body:e.body}})):this.setState({loading:!1,error:!1,classData:t})})).catch((e=>{pm.logger.error("Error in fetching class details for create form",e),this.setState({loading:!1,error:!0,errorDetails:{status:f.default.status}})}))}))}componentDidMount(){(0,i.resolveStoreInstance)(r.default).onSyncAvailable({timeout:5e3}).then((()=>this.fetchClassData(this.props.classId))).catch((()=>{this.setState({loading:!1})}))}render(){const e=!1===(0,i.resolveStoreInstance)(r.default).isSocketConnected,t=this.customComponentConfig.customCreateComponent||p.default;return this.state.loading||b.isEmpty(this.state.classData)&&!e?a.createElement("div",{className:"integrations-page-container"},a.createElement(l.default,null)):e?a.createElement("div",{className:"integrations-page-container"},a.createElement(c.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."})):this.state.error?a.createElement("div",{className:"integrations-page-container"},a.createElement(d.default,{errorDetails:this.state.errorDetails})):a.createElement("div",{className:"integrations-page-container"},a.createElement("div",{className:"integrations-add"},a.createElement("div",{className:"integrations-add-card"},a.createElement(m.default,{type:"h1",text:"Add integration"}),a.createElement(h.default,{type:"lead",className:"integrations-add-card__description"},b.get(this.state.classData,"description")),a.createElement(t,{classData:this.state.classData,classId:this.props.classId,serviceId:this.props.serviceId,preferredEntities:this.props.preferredEntities}))))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/LegacyIntegrationServiceSetup.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var s,a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=(n("../../node_modules/mobx/lib/mobx.module.js"),n("./js/stores/SyncStatusStore.js")),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),u=n("./js/components/base/Tabs.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/Banners/DatadogAddPage.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),S=n("./js/modules/sync-conflict-models/response.js"),y=n("./js/components/base/LoadingIndicator.js");const _={monitor_run_datadog:h.default};let E=(0,o.observer)(s=class extends r.Component{constructor(e){super(e),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",activeTab:"authenticate"},this.integrationsStore=(0,c.resolveStoreInstance)(d.default),this.fetchServiceDetails=this.fetchServiceDetails.bind(this),this.setActiveTab=this.setActiveTab.bind(this)}fetchServiceDetails(e){this.setState({loading:!0},(()=>{I.default.getAvailableIntegrations({service:e}).then((e=>{let t=i().get(e,["body","integrations",this.props.controller.ruleId],{});200!==e.status||i().isEmpty(t)?this.setState({description:"",authType:"",loading:!1,error:!0,errorDetails:{status:e.status}}):(this.setState({description:t.description,authType:i().get(t,"auth_type",""),loading:!1}),(0,c.resolveStoreInstance)(d.default).setAuthType(i().get(t,"auth_type","")))})).catch((e=>{pm.logger.error("Error in fetching service specific rule details for create forms",e),this.setState({description:"",authType:"",loading:!1,error:!0,errorDetails:{status:S.default.status}})}))}))}componentDidMount(){let e=(0,c.resolveStoreInstance)(d.default).availableIntegrations,t=i().get(e,this.props.controller.serviceId,[]),n=i().get(t,this.props.controller.ruleId,"");(0,c.resolveStoreInstance)(d.default).setAuthType(""),i().isEmpty(i().get(e,"body.data",[]))||i().isEmpty(t)||i().isEmpty(n)?(0,c.resolveStoreInstance)(l.default).onSyncAvailable({timeout:5e3}).then((()=>this.fetchServiceDetails(this.props.controller.serviceId))).catch((()=>{this.setState({loading:!1})})):(this.setState({description:i().get(n,"description",""),authType:i().get(n,"auth_type","")}),(0,c.resolveStoreInstance)(d.default).setAuthType(i().get(n,"auth_type","")))}setActiveTab(e){this.setState({activeTab:e})}render(){let e=!(0,c.resolveStoreInstance)(l.default).isSocketConnected;if(this.state.loading)return r.createElement("div",{className:"integrations-page-container"},r.createElement(y.default,null));if(!e&&this.state.error)return r.createElement("div",{className:"integrations-page-container"},r.createElement(b.default,{errorDetails:this.state.errorDetails}));if(this.state.description){const e=_[this.props.controller.ruleId],t=v.default[this.props.controller.ruleId].customCreateComponent;return r.createElement("div",{className:"integrations-page-container"},r.createElement("div",{className:"integrations-add"},r.createElement("div",{className:"integrations-add-card"},r.createElement(p.default,{type:"h1",text:"Add integration"}),r.createElement(g.default,{type:"lead",className:"integrations-add-card__description"},this.state.description),e&&r.createElement(e,null),"basic_auth"===this.state.authType||"token"===this.state.authType?r.createElement(r.Fragment,null,r.createElement("div",{className:"integrations-add-card__auth-tabs"},r.createElement(u.Tabs,{activeRef:this.state.activeTab,className:"integrations-add-card__auth-tabs-wrapper",defaultActive:"authenticate",type:"primary"},r.createElement(u.Tab,{className:"integrations-add-card__auth-tabs-tab",refKey:"authenticate",disabled:"configure"===this.state.activeTab},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title"},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title__label"},"1. Authenticate","configure"===this.state.activeTab?r.createElement(m.default,{name:"icon-state-success-stroke",color:"content-color-primary",className:"integrations-add-card__authenticated-icon"}):""))),r.createElement(u.Tab,{className:"integrations-add-card__auth-tabs-tab",refKey:"configure",disabled:"authenticate"===this.state.activeTab},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title"},r.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title__label"},"2. Configure"))))),r.createElement(t,{rule:this.props.controller.ruleId,service:this.props.controller.serviceId,setActiveTab:e=>{this.setActiveTab(e)},additionalContext:this.props.controller.additionalContext})):r.createElement(t,{rule:this.props.controller.ruleId,service:this.props.controller.serviceId,additionalContext:this.props.controller.additionalContext}))))}return r.createElement("div",{className:"integrations-page-container"},r.createElement(f.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/SaveChangesAndCancelButton.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),a=n("./js/components/base/Buttons.js"),i=n("./js/services/NavigationService.js"),r=n("./integrations/navigation/constants.js"),o=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),c=n("./appsdk/components/link/Link.js");function d(e){const t=(0,o.resolveStoreInstance)(l.default),{serviceId:n,ruleId:d}=e;return s.createElement("div",{className:"integrations-api-schema-sync__actions"},s.createElement("hr",{className:"integration-edit-actions__separator"}),s.createElement("div",{className:"integration-edit-actions__button"},s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(a.Button,{type:"primary",className:"integrations-edit-actions__button--save-changes",size:"small",onClick:()=>{t.resetAddIntegrationDependencies()}},s.createElement(c.default,{to:{routeIdentifier:r.TEAM_INTEGRATIONS_IDENTIFIER,routeParams:{serviceId:n,ruleId:d}}},"Save Changes"))),s.createElement("div",{className:"integrations-edit-actions__button--container"},s.createElement(a.Button,{className:"integrations-edit-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{t.resetAddIntegrationDependencies(),"browser"===window.SDK_PLATFORM?window.history.go(-1):i.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:n,ruleId:d})}}," Cancel "))))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/edit/IntegrationInstanceEditContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var s,a=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("./js/components/base/LoadingIndicator.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/OfflineState.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/default/DefaultIntegrationInstanceEditComponent.js"),p=n("./js/services/NavigationService.js"),g=n("./integrations/navigation/constants.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),h=n("./node_modules/lodash/lodash.js"),f=n.n(h),b=(n("./js/modules/sync-conflict-models/response.js"),n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js")),v=n("./js/stores/SyncStatusStore.js");let I=(0,r.observer)(s=class extends a.Component{constructor(e){super(e),this.state={loading:!1,error:!1,errorDetails:"",classData:{}},this.customComponentConfig=f().get(d.default,e.classId,{})}fetchClassData(e){this.setState({loading:!0},(()=>{m.default.fetchIntegrationClassDetails(e).then((e=>{const t=f().get(e,"body.data");200!==e.status||f().isEmpty(t)?(pm.logger.error("Error in fetching class details for create form",e),this.setState({loading:!1,error:!0,errorDetails:{status:e.status,body:e.body}})):this.setState({loading:!1,error:!1,classData:t})})).catch((e=>{pm.logger.error("Error in fetching class details for create form",e),this.setState({loading:!1,error:!0,errorDetails:e})}))}))}componentDidMount(){(0,i.resolveStoreInstance)(v.default).onSyncAvailable({timeout:5e3}).then((()=>this.fetchClassData(this.props.classId))).catch((()=>{this.setState({loading:!1})}))}render(){const e=!1===(0,i.resolveStoreInstance)(v.default).isSocketConnected,t=this.props.integrationData,n=this.customComponentConfig.customEditComponent||u.default;return f().get(this.props,"allowedActions.update",!0)?this.state.loading||f().isEmpty(this.state.classData)&&!e?a.createElement("div",{className:"integrations-page-container"},a.createElement(o.default,null)):e?a.createElement("div",{className:"integrations-page-container"},a.createElement(l.default,{title:"You are offline",subtitle:"You need to have an active internet connection to access integrations."})):this.state.error?a.createElement("div",{className:"integrations-page-container"},a.createElement(c.default,{errorDetails:this.state.errorDetails})):a.createElement("div",{className:"integrations-page-container"},a.createElement("div",{className:"integrations-edit"},a.createElement("div",{className:"integrations-edit-card"},a.createElement(b.default,{type:"h1",text:"Edit integration",className:"integration-edit-card__head"}),a.createElement(n,{classData:this.state.classData,classId:this.props.classId,integrationData:t,integrationId:this.props.integrationId,preferredEntities:this.props.preferredEntities})))):(p.default.transitionTo(g.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,{integrationId:t.id}),a.createElement("div",null))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/customComponents.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoEditIntegration.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/empty-states/NoCreateIntegration.js"),i=n("./integrations/ci-cd/constants.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Bigpanda.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Coralogix.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Hipchat.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/CustomWebhook.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Pagerduty.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApiMatic.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/VictorOps.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Dropbox.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Bitbucket.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/service/Slack/index.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/KeenIo.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/MicrosoftTeams.js"),I=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/MicrosoftFlow.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Gitlab.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/containers/add/GitHubSchemaSyncIntegration.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApiGateway.js"),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Github.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Opsgenie.js"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js"),C=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Statuspage.js"),k=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Splunk.js"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/AWSGatewayObservability.js"),P=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/CircleCI.js"),T=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/TravisCI.js"),N=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApmNewRelic.js"),D=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/BitbucketCI.js"),R=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApmDatadog.js"),O=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/GitLabCI.js"),x=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Jenkins.js"),M=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/GithubCI.js"),L=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/ApigeeAPIGateway.js"),F=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Sentry.js"),H=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/AzureAPIM.js"),B=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/APIMatic.js"),U=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Bigpanda.js"),V=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Coralogix.js"),G=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Datadog.js"),z=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Dropbox.js"),W=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Github.js"),K=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Opsgenie.js"),Y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Gitlab.js"),q=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Hipchat.js"),$=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/KeenIo.js"),J=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/MicrosoftFlow.js"),Z=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/PagerDuty.js"),Q=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/MicrosoftTeams.js"),X=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Slack/index.js"),ee=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/VictorOps.js"),te=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/CustomWebhook.js"),ne=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Bitbucket.js"),se=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/AWSGatewayObservability.js"),ae=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApiGateway.js"),ie=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/NewRelic.js"),re=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Statuspage.js"),oe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Splunk.js"),le=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/CircleCI.js"),ce=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/TravisCI.js"),de=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApmNewRelic.js"),ue=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApmDatadog.js"),pe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Azure.js"),ge=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/ApigeeAPIGateway.js"),me=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Jenkins.js"),he=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/Sentry.js"),fe=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/AzureAPIM.js"),be=n("./integrations/ci-cd/components/AddIntegrationApiVersionSelectorForm.js");const ve={collection_bitbucket_cloud:{customCreateComponent:ne.default,customEditComponent:h.default,useLegacyDataFormat:!0},collection_dropbox:{customCreateComponent:z.default,customEditComponent:g.default,useLegacyDataFormat:!0},monitor_run_coralogix:{customCreateComponent:V.default,customEditComponent:o.default,useLegacyDataFormat:!0},monitor_run_datadog:{customCreateComponent:G.default,customEditComponent:m.default,useLegacyDataFormat:!0},monitor_run_bigpanda:{customCreateComponent:U.default,customEditComponent:r.default,useLegacyDataFormat:!0},monitor_run_hipchat:{customCreateComponent:q.MonitorHipchatSetup,customEditComponent:l.MonitorHipchatSetup,useLegacyDataFormat:!0},teamactivity_hipchat:{customCreateComponent:q.TeamActivityHipchatSetup,customEditComponent:l.TeamActivityHipchatSetup,useLegacyDataFormat:!0},monitor_run_keen_io:{customCreateComponent:$.default,customEditComponent:b.default,useLegacyDataFormat:!0},monitor_run_pagerduty:{customCreateComponent:Z.default,customEditComponent:d.default,useLegacyDataFormat:!0},monitor_run_victorops:{customCreateComponent:ee.default,customEditComponent:p.default,useLegacyDataFormat:!0},monitor_run_microsoft_teams:{customCreateComponent:Q.MonitorMicrosoftTeamsSetup,customEditComponent:v.MonitorMicrosoftTeamsSetup,useLegacyDataFormat:!0},teamactivity_microsoft_teams:{customCreateComponent:Q.TeamActivityMicrosoftTeamsSetup,customEditComponent:v.TeamActivityMicrosoftTeamsSetup,useLegacyDataFormat:!0},monitor_run_slack:{customCreateComponent:X.MonitorRun,customEditComponent:f.MonitorRun,useLegacyDataFormat:!1},teamactivity_slack:{customCreateComponent:X.TeamActivity,customEditComponent:s.default,useLegacyDataFormat:!0},uptime_monitor_notification_slack:{customCreateComponent:X.UptimeMonitor,customEditComponent:f.UptimeMonitor,useLegacyDataFormat:!1},monitor_run_custom_webhooks:{customCreateComponent:te.MonitorCustomWebHookSetup,customEditComponent:c.MonitorRunCustomWebhook,useLegacyDataFormat:!0},collection_custom_webhooks:{customCreateComponent:te.CollectionCustomWebHookSetup,customEditComponent:c.CollectionCustomWebHookSetup,useLegacyDataFormat:!0},teamactivity_custom_webhooks:{customCreateComponent:te.TeamActivityCustomWebHookSetup,customEditComponent:c.TeamActivityCustomWebHookSetup,useLegacyDataFormat:!0},collection_gitlab:{customCreateComponent:Y.GitlabDefault,customEditComponent:S.default,useLegacyDataFormat:!0},collection_gitlab_hosted:{customCreateComponent:Y.GitlabHosted,customEditComponent:S.default,useLegacyDataFormat:!0},monitor_run_opsgenie:{customCreateComponent:K.OpsgenieDefault,customEditComponent:A.default,useLegacyDataFormat:!0},monitor_run_new_relic:{customCreateComponent:ie.default,customEditComponent:w.default,useLegacyDataFormat:!0},monitor_run_statuspage:{customCreateComponent:re.StatuspageDefault,customEditComponent:C.EditStatuspage,useLegacyDataFormat:!0},monitor_run_splunk:{customCreateComponent:oe.default,customEditComponent:k.default,useLegacyDataFormat:!0},collection_microsoft_flow:{customCreateComponent:J.CollectionMicrosoftFlowSetup,customEditComponent:I.CollectionMicrosoftFlowSetup,useLegacyDataFormat:!0},monitor_run_microsoft_flow:{customCreateComponent:J.MonitorMicrosoftFlowSetup,customEditComponent:I.MonitorMicrosoftFlowSetup,useLegacyDataFormat:!0},teamactivity_microsoft_flow:{customCreateComponent:J.TeamActivityMicrosoftFlowSetup,customEditComponent:I.TeamActivityMicrosoftFlowSetup,useLegacyDataFormat:!0},collectionactivity_microsoft_flow:{customCreateComponent:J.CollectionMicrosoftFlowSetup,customEditComponent:I.CollectionMicrosoftFlowSetup,useLegacyDataFormat:!0},aws_api_gateway:{customCreateComponent:ae.ApiGatewayDefault,customEditComponent:_.default,useLegacyDataFormat:!0},api_gateway_aws:{customCreateComponent:se.AWSGatewayObservabilityDefault,customEditComponent:j.default,useLegacyDataFormat:!0},api_gateway_apigee:{customCreateComponent:ge.default,customEditComponent:L.default,useLegacyDataFormat:!0},api_management_azure:{customCreateComponent:fe.default,customEditComponent:H.default,useLegacyDataFormat:!0},[i.CIRCLE_CI_CLASS_ID]:{customCreateComponent:le.default,customEditComponent:P.default,useLegacyDataFormat:!1},[i.TRAVIS_CLASS_ID]:{customCreateComponent:ce.default,customEditComponent:T.default,useLegacyDataFormat:!1},[i.BITBUCKET_PIPELINES_CLASS_ID]:{customCreateComponent:be.default,customEditComponent:D.default,useLegacyDataFormat:!0},[i.GITLAB_CI_CLASS_ID]:{customCreateComponent:be.default,customEditComponent:O.default,useLegacyDataFormat:!1},[i.GITLAB_SELF_HOSTED_CLASS_ID]:{customCreateComponent:be.default,customEditComponent:O.default,useLegacyDataFormat:!1},[i.JENKINS_CLASS_ID]:{customCreateComponent:me.JenkinsCIAuthenticate,useLegacyDataFormat:!0,customEditComponent:x.default},[i.GITHUB_CI_CLASS_ID]:{customCreateComponent:be.default,customEditComponent:M.default,useLegacyDataFormat:!1},apm_new_relic:{customCreateComponent:de.ApmNewRelicAuthentication,customEditComponent:N.default,useLegacyDataFormat:!0},apm_datadog:{customCreateComponent:ue.ApmDatadogAuthentication,customEditComponent:R.default,useLegacyDataFormat:!0},collection_github:{customCreateComponent:W.GithubDefault,customEditComponent:E.EditCollectionGithubSetup,useLegacyDataFormat:!0},collection_github_enterprise:{customCreateComponent:W.GithubHosted,customEditComponent:E.EditCollectionGithubSetup,useLegacyDataFormat:!0},api_github:{customCreateComponent:W.GithubDefault,customEditComponent:y.default,useLegacyDataFormat:!0},collection_apimatic_github_v2:{customCreateComponent:B.default,customEditComponent:u.default,useLegacyDataFormat:!0},apiversion_repository_github:{customCreateComponent:W.default,customEditComponent:s.default,useLegacyDataFormat:!0},apiversion_repository_github_enterprise:{customCreateComponent:W.default,customEditComponent:s.default,useLegacyDataFormat:!0},apiversion_repository_bitbucket:{customCreateComponent:ne.default,customEditComponent:s.default,useLegacyDataFormat:!0},apiversion_repository_gitlab:{customCreateComponent:Y.default,customEditComponent:s.default,useLegacyDataFormat:!0},apiversion_repository_gitlab_enterprise:{customCreateComponent:Y.default,customEditComponent:s.default,useLegacyDataFormat:!0},apiversion_repository_azure:{customCreateComponent:pe.default,customEditComponent:s.default,useLegacyDataFormat:!0},apiversion_repository_azure_enterprise:{customCreateComponent:pe.default,customEditComponent:s.default,useLegacyDataFormat:!0},notifications_integration_slack:{customCreateComponent:X.NotificationIntegration,customEditComponent:f.Slack,useLegacyDataFormat:!0},api_version_sentry:{customEditComponent:F.default,customCreateComponent:he.default,useLegacyDataFormat:!1},teamcollection_github:{customCreateComponent:a.default,customEditComponent:s.default},postman_search:{customCreateComponent:a.default,customEditComponent:s.default},postman_search_slack:{customCreateComponent:a.default,customEditComponent:s.default},postman_reporting:{customCreateComponent:a.default,customEditComponent:s.default},collectionactivity_slack:{customCreateComponent:a.default,customEditComponent:s.default},collectionactivity_custom_webhooks:{customCreateComponent:a.default,customEditComponent:s.default},apiversion_github:{customCreateComponent:a.default,customEditComponent:s.default}};t.default=ve},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ApiGatewayService.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/modules/services/RemoteSyncRequestService.js");t.default={fetchApiGateways:e=>s.default.request("/ws/proxy",{method:"post",data:{service:"integrations",method:"post",path:"/integration/actions",body:e}})}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/BitbucketService.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/utils/HttpService.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a);const r=s.default.request.bind(s.default);t.default={verifyUser(e,t){const{username:n,password:s}=e,a=btoa(n+":"+s);r("https://api.bitbucket.org/2.0/user",{method:"GET",credentials:"omit",headers:{Authorization:`Basic ${a}`}}).then((e=>t(null,e))).catch((e=>t(e)))},fetchRepositories:async function(e,t){const{username:n,password:s}=e;let a=btoa(n+":"+s),r="https://api.bitbucket.org/2.0/repositories?role=contributor&pagelen=100",o={method:"GET",credentials:"omit",headers:{Authorization:`Basic ${a}`}},l=10,c=[];for(;l>0;)await fetch(r,o).then((async e=>{if(200!==e.status)throw l=0,new Error("Something went wrong while fetching Bitbucket repositories. Please try again.");{const t=await e.json();c=i().union(c,t.values),t.next?(r=t.next,l--):l=0}})).catch((e=>(pm.logger.error("Error in fetching Bitbucket repositories of user",e),i().isEmpty(c)?t(e):t(null,c))));return t(null,c)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/GithubService.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/utils/HttpService.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/BrowseIntegrations/IntegrationsUtils.js");const o=s.default.request.bind(s.default);t.default={verifyUser(e,t){let{token:n,customDomain:s}=e;s&&(s+="/api/v3"),o(`${s||"https://api.github.com"}/user`,{method:"GET",credentials:"omit",headers:{Authorization:`Token ${n}`}}).then((e=>t(null,e))).catch((e=>t(e)))},fetchRepositories:async function(e,t){let{customDomain:n,token:s}=e,a={method:"GET",credentials:"omit",headers:{Authorization:`Token ${s}`}};n&&(n+="/api/v3");let o=`${n||"https://api.github.com"}/user/repos?per_page=100`,l=10,c=[];for(;l>0;)await fetch(o,a).then((async e=>{if(200!==e.status)throw l=0,new Error("Something went wrong while fetching GitHub repositories. Please try again.");{const t=r.default.parseLinkHeadersForGithub(e.headers.get("link")),n=await e.json();c=i().union(c,n),t&&t.next?(o=t.next,l--):l=0}})).catch((e=>(pm.logger.error("Error in fetching GitHub repositories of user",e),i().isEmpty(c)?t(e):t(null,c))));return t(null,c)},fetchBranches:function(e,t){let n,{customDomain:s,token:a}=e;s&&(s+="/api/v3"),n=`${s||"https://api.github.com"}/${`repos/${e.owner}/${e.repository}/branches`}?per_page=100`,o(n,{method:"GET",credentials:"omit",headers:{Authorization:`Token ${a}`}}).then((e=>t(null,e))).catch((e=>t(e)))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/GitlabService.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/utils/HttpService.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a);const r=s.default.request.bind(s.default);t.default={verifyUser(e,t){const{token:n,customDomain:s}=e;r(`${s||"https://gitlab.com"}/${`api/v4/user?private_token=${n}`}`,{method:"GET",credentials:"omit"}).then((e=>t(null,e))).catch((e=>(pm.logger.error("Error in verifying gitlab user",e),t(e))))},fetchProjects:async function(e,t){const{customDomain:n,token:s}=e,a=`api/v4/projects?private_token=${s}&membership=true&per_page=100`;let r={method:"GET",credentials:"omit"},o=[],l=1,c=!0;for(;c&&l<=10;)await fetch(`${n||"https://gitlab.com"}/${a}&page=${l}`,r).then((async e=>{if(200!==e.status)throw c=!1,new Error("Something went wrong while fetching Gitlab projects. Please try again.");{const t=e.headers.get("x-next-page"),n=await e.json();o=i().union(o,n),t&&!i().isNaN(t)||(c=!1),l++}})).catch((e=>(pm.logger.error("Error in fetching gitlab projects of user",e),t(e))));return t(null,o)}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");const a="integrations";t.default={fetchIntegrationClassDetails(e,t){const n=`/integration-classes/${e}`;return s.HTTPGatewayService.request({data:{service:a,method:"get",path:n,query:t}})},fetchAvailableClasses:()=>s.HTTPGatewayService.request({data:{service:a,method:"get",path:"/integration-classes"}}),fetchAvailableServices:()=>s.HTTPGatewayService.request({data:{service:a,method:"get",path:"/services"}}),fetchIntegrationServiceDetails(e,t){const n=`/services/${e}`;return s.HTTPGatewayService.request({data:{service:a,method:"get",path:n,query:t}})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/OpsgenieService.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/utils/HttpService.js"),a=(n("./node_modules/lodash/lodash.js"),n("./js/modules/services/RemoteSyncRequestService.js"));s.default.request.bind(s.default);const i=function(e){return"us"===e?"https://api.opsgenie.com":"https://api.eu.opsgenie.com"};t.default={verifyUser(e,t){let{apiKey:n,region:s,type:r,rule:o}=e;a.default.request("/ws/proxy",{method:"post",data:{path:"/integration/actions",service:"integrations",method:"post",body:{url:i(s)+"/v2/integrations/authenticate",headers:{Authorization:`GenieKey ${n}`},method:"post",body:{type:"api"},type:r,rule:o}}}).then((({body:e})=>t(null,e))).catch((e=>(pm.logger.warn("Error while parsing url data: ",e),t(e,null))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/StatuspageService.js":function(e,t,n){"use strict";n.r(t);var s=n("./js/utils/HttpService.js"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a);const r=s.default.request.bind(s.default),o="https://api.statuspage.io/v1";t.default={listPages(e,t){const{apiKey:n}=e;r(`${o}/${`pages?api_key=${n}`}`,{method:"GET",credentials:"omit"}).then((e=>t(null,e))).catch((e=>(pm.logger.error("Error in fetching pages from Statuspage",e),t(e))))},listComponents(e,t){const{apiKey:n,pageId:s}=e;r(`${o}/${`pages/${s}/components?api_key=${n}`}`,{method:"GET",credentials:"omit"}).then((e=>t(null,i().get(e,"body")))).catch((e=>(pm.logger.error("Error in fetching components",e),t(e))))}}},"./onboarding/src/features/Skills/Bootcamp/components/BootcampViewer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Skills/Bootcamp/components/SkillCenter.js"),o=n("./js/stores/SyncStatusStore.js"),l=n("./js/stores/StoreManager.js"),c=n("./js/stores/BootcampStore.js"),d=n("./js/modules/services/AnalyticsService.js"),u=n("./onboarding/src/common/components/PageOffline/PageOffline.js"),p=n("./js/constants/SyncStatusConstants.js"),g=n("./growth/foundation/public/amplitude/AmplitudeService.js");let m=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.handleSkillClick=this.handleSkillClick.bind(this),this.handleBack=this.handleBack.bind(this),this.bootcampStore=(0,l.resolveStoreInstance)(c.default)}componentDidMount(){d.default.addEvent("onboarding","lesson_centre_opened"),g.Ampli.bootcampPageViewed((0,g.getAmpliPageViewedProperties)())}handleSkillClick(e){this.bootcampStore.setSkill(e.id)}handleBack(){this.bootcampStore.setSkill(null)}isOffline(){return[p.CONNECTION_STATUS_OFFLINE,p.CONNECTION_STATUS_CONNECTING].includes((0,l.resolveStoreInstance)(o.default).connectionStatus)}render(){if(this.isOffline())return a.createElement(u.default,null);let e=this.bootcampStore.isSkillsLoading,t=this.bootcampStore.skills;return a.createElement(r.default,{onLessonStart:this.bootcampStore.startLesson,onLessonContinue:this.bootcampStore.continueLesson,skills:t,selectedSkill:this.bootcampStore.selectedSkill,onSkillClick:this.handleSkillClick,isSkillsLoading:e,onBack:this.handleBack})}})||s},"./onboarding/src/features/Skills/Bootcamp/components/LessonItem.js":function(e,t,n){"use strict";n.r(t);var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/classnames/index.js"),o=n.n(r),l=n("./onboarding/src/features/Skills/Bootcamp/components/Spinner.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/BootcampStore.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=n("./node_modules/lodash/lodash.js");let g=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.state={hovered:!1},this.bootcampStore=(0,c.resolveStoreInstance)(d.default),this.handleStartLesson=this.handleStartLesson.bind(this),this.handleLessonContinue=this.handleLessonContinue.bind(this)}handleStartLesson(){this.props.onLessonStart(this.props.lesson.id)}handleLessonContinue(){this.props.onLessonContinue(this.props.lesson.id)}getClassName(){return o()({"lesson-actions":!0})}getLessonStatusLabel(){let e=p.get(this.props.lesson,"progress.status");return"completed"===e?a.createElement("div",{className:"lesson-list-item-status completed"},"Completed"):"inprogress"===e?a.createElement("div",{className:"lesson-list-item-status inprogress"},"In progress"):null}getLessonActions(e){let t=p.get(this.props.lesson,"progress.status"),n=this.bootcampStore.lessonContextLoadingId===e,s=this.bootcampStore.lessonLoadingId===e,i=this.bootcampStore.lessonResumed;return"inprogress"===t?a.createElement("div",{className:this.getClassName()},a.createElement("div",{className:"lesson-action",onClick:this.handleStartLesson},i||!n&&!s?a.createElement("div",{className:"action-label"},a.createElement(u.default,{name:"icon-action-refresh-stroke",className:"pm-icon",size:"small"}),"Restart"):a.createElement("div",{className:"action-label loading"},a.createElement(l.default,null),"Loading lesson")),a.createElement("div",{className:"lesson-action",onClick:this.handleLessonContinue},i&&(n||s)?a.createElement("div",{className:"action-label loading"},a.createElement(l.default,null),"Loading lesson"):a.createElement("div",{className:"action-label primary"},a.createElement(u.default,{name:"icon-descriptive-step-stroke",className:"pm-icon primary"}),"Resume"))):a.createElement("div",{className:this.getClassName()},a.createElement("div",{className:"lesson-action",onClick:this.handleStartLesson},n||s?a.createElement("div",{className:"action-label loading"}," ",a.createElement(l.default,null),"Loading Lesson"):a.createElement("div",{className:"action-label primary"},a.createElement(u.default,{name:"icon-descriptive-step-stroke",className:"pm-icon primary"}),"Learn")))}render(){let e=this.props.lesson;return a.createElement("div",{key:e.id,className:"learning-center-list-item lesson-list-item"},a.createElement("div",{className:"lesson-list-item-content"},a.createElement("div",{className:"learning-center-list-item-header lesson-list-item-header"},a.createElement("div",{className:"lesson-list-item-name"},e.name),this.getLessonStatusLabel()),a.createElement("div",{className:"lesson-list-item-description"},e.description||""),this.getLessonActions(e.id)))}})||s;t.default=g},"./onboarding/src/features/Skills/Bootcamp/components/ResumeLearningList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Skills/Bootcamp/components/ResumeLessonItem.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),c=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./js/services/NavigationService.js"),u=n("./collaboration/navigation/constants.js"),p=n("./node_modules/lodash/lodash.js");const g=(0,c.default)(o.default)`
  margin-left: var(--spacing-s);
`;let m=(0,r.observer)(s=class extends a.Component{constructor(e){super(e)}render(){if(p.isEmpty(this.props.skills))return null;let e="Start learning with Bootcamp",t=p.reduce(this.props.skills,((t,n)=>{if(p.isEmpty(n.lessons))return t;let s=p.chain(n.lessons).reject((t=>(["inprogress","completed"].includes(t.progress.status)&&(e="Continue learning with Bootcamp"),"completed"===t.progress.status))).map((e=>({...e,imgSrc:n.imgSrc}))).value();return p.concat(t,s)}),[]);return p.isEmpty(t)?null:a.createElement("div",{className:"resume-learning-list-container"},a.createElement("div",{className:"learning-center-section-title resuming-learning-list-title",onClick:()=>{d.default.transitionTo(u.ALL_WORKSPACES_IDENTIFIER)}},a.createElement(l.default,null),a.createElement(g,{type:"h3",text:e})),a.createElement("div",{className:"resume-learning-list"},a.createElement(i.default,{lesson:p.head(t),onLessonStart:this.props.onLessonStart,onLessonContinue:this.props.onLessonContinue})))}})||s},"./onboarding/src/features/Skills/Bootcamp/components/ResumeLessonItem.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),i=n("./node_modules/lodash/lodash.js");class r extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){"inprogress"!==i.get(this.props.lesson,"progress.status")?this.props.onLessonStart(this.props.lesson.id):this.props.onLessonContinue(this.props.lesson.id)}render(){let e=this.props.lesson;return s.createElement("div",{key:e.id,className:"learning-center-list-item lesson-plan-list-item"},e.imgSrc&&s.createElement("div",{className:"learning-center-list-item-icon"},s.createElement("img",{height:"32",width:"32",src:e.imgSrc})),s.createElement("div",{className:"lesson-plan-list-item-content"},s.createElement("div",{className:"learning-center-list-item-header"},e.name),s.createElement("div",{className:"lesson-plan-actions",onClick:this.handleClick},s.createElement("div",{className:"lesson-plan-start-icon"},s.createElement(a.default,{name:"icon-descriptive-step-stroke",className:"pm-icon"})),s.createElement("div",{className:"lesson-plan-start"},"inprogress"===i.get(this.props.lesson,"progress.status")?"Restart":"Start"))))}}t.default=r},"./onboarding/src/features/Skills/Bootcamp/components/Skill.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Skills/Bootcamp/components/LessonItem.js"),o=n("./js/components/base/Icons/LeftArrowIcon.js"),l=n("./js/components/base/Accordion/Accordion.js"),c=n("./js/components/base/Accordion/AccordionItem.js"),d=n("./js/components/base/Icons/DownSolidIcon.js"),u=n("./js/components/base/Icons/UpSolidIcon.js"),p=n("./js/components/base/Markdown.js"),g=n("./node_modules/lodash/lodash.js");let m=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.renderLesson=this.renderLesson.bind(this)}renderLesson(){return this.props.skill&&g.isArray(this.props.skill.lessons)?g.map(this.props.skill.lessons,(e=>a.createElement(r.default,{key:e.id,lesson:e,onLessonStart:this.props.onLessonStart,onLessonContinue:this.props.onLessonContinue}))):null}renderAccordionItems(){return g.chain(this.props.skill.lessons).filter((e=>e.additionalResources)).map((e=>a.createElement(c.default,{key:e.id,renderTitle:t=>a.createElement("div",{className:"skill-additional--lesson-detail"},a.createElement("span",null,e.name),t?a.createElement(u.default,null):a.createElement(d.default,null))},a.createElement(p.default,{className:"skill-additional-resources-content",source:e.additionalResources})))).value()}render(){let e=this.props.skill,t=this.renderAccordionItems();return a.createElement("div",{className:"learning-center-skill"},a.createElement("div",{className:"learning-center-back",onClick:this.props.onBack},a.createElement(o.default,{style:"tertiary",className:"learning-center-back-icon"}),"Back"),a.createElement("div",{className:"learning-center-skill--main"},a.createElement("div",{className:"learning-center-skill--left"},a.createElement("div",{className:"skill-details"},e.imgSrc&&a.createElement("div",{className:"skill-icon"},a.createElement("img",{src:e.imgSrc,height:"56",width:"56"})),a.createElement("div",{className:"skill-name"},e.name),a.createElement("div",{className:"skill-description"},e.description)),a.createElement("div",{className:"skill-lessons-list"},this.renderLesson())),a.createElement("div",{className:"learning-center-skill--right"},!g.isEmpty(t)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"skill-additional--label"},"Additional resources"),a.createElement(l.default,null,t)))))}})||s},"./onboarding/src/features/Skills/Bootcamp/components/SkillCenter.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Skills/Bootcamp/components/ResumeLearningList.js"),o=n("./onboarding/src/features/Skills/Bootcamp/components/SkillsList.js"),l=n("./onboarding/src/features/Skills/Bootcamp/components/Skill.js"),c=(n("./onboarding/src/common/components/PageOffline/PageOffline.js"),n("./js/components/base/LoadingIndicator.js")),d=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/BootcampWelcome.js"),u=n("./node_modules/lodash/lodash.js");let p=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.renderSkillsAndResumeLearningList=this.renderSkillsAndResumeLearningList.bind(this),this.renderSkill=this.renderSkill.bind(this),this.handleSkillClick=this.handleSkillClick.bind(this),this.handleBack=this.handleBack.bind(this)}handleSkillClick(e){this.refs.learningCenterContainer.scrollTop=0,u.isFunction(this.props.onSkillClick)&&this.props.onSkillClick(e)}handleBack(){this.refs.learningCenterContainer.scrollTop=0,u.isFunction(this.props.onBack)&&this.props.onBack()}renderSkillsAndResumeLearningList(){return a.createElement("div",null,this.props.isSkillsLoading?a.createElement(c.default,null):a.createElement("div",{className:"lesson-center-list"},a.createElement("div",{className:"lesson-center-list-column"},a.createElement(r.default,{skills:this.props.skills,onLessonStart:this.props.onLessonStart,onLessonContinue:this.props.onLessonContinue}),a.createElement(o.default,{skills:this.props.skills,onSkillClick:this.handleSkillClick})),a.createElement("div",{className:"lesson-center-list-column empty-state"},a.createElement(d.default,null),a.createElement("div",{className:"bootcamp-illustration-title"},"Postman Bootcamp"),a.createElement("div",{className:"bootcamp-illustration-content"},"Welcome to Bootcamp! Discover features inside Postman and improve your skills through interactive lessons."))))}renderSkill(){if(u.isEmpty(this.props.skills))return null;let e=u.find(this.props.skills,["id",this.props.selectedSkill]);return a.createElement("div",null,a.createElement(l.default,{skill:e,onBack:this.handleBack,onLessonStart:this.props.onLessonStart,onLessonContinue:this.props.onLessonContinue}))}render(){return a.createElement("div",{ref:"learningCenterContainer",className:"lesson-center-container"},this.props.selectedSkill?this.renderSkill():this.renderSkillsAndResumeLearningList())}})||s},"./onboarding/src/features/Skills/Bootcamp/components/SkillItem.js":function(e,t,n){"use strict";n.r(t);var s=n("../../node_modules/react/index.js"),a=n("./js/utils/PluralizeHelper.js");class i extends s.Component{constructor(e){super(e),this.handleStartLesson=this.handleStartLesson.bind(this)}handleStartLesson(){this.props.onLessonStart(this.props.lesson.id)}render(){let e=this.props.skill,t=a.default.pluralize({count:e.lessons.length,singular:"lesson",plural:"lessons"});return s.createElement("div",{key:e.id,className:"learning-center-list-item skill-list-item",onClick:this.props.onClick},e.imgSrc&&s.createElement("div",{className:"learning-center-list-item-icon"},s.createElement("img",{src:e.imgSrc,width:"56",height:"56"})),s.createElement("div",{className:"skill-list-item-content"},s.createElement("div",{className:"learning-center-list-item-header skill-list-item-header"},s.createElement("div",null,e.name)),s.createElement("div",{className:"skill-list-item-description"},e.description),s.createElement("div",{className:"skill-meta"},s.createElement("div",{className:"skill-lessons-number"},e.lessons.length," ",t),s.createElement("div",{className:"skill-progress"},this.props.skillProgress,"% completed"))))}}t.default=i},"./onboarding/src/features/Skills/Bootcamp/components/SkillsList.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s,a=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./onboarding/src/features/Skills/Bootcamp/components/SkillItem.js"),o=n("./node_modules/lodash/lodash.js");let l=(0,i.observer)(s=class extends a.Component{constructor(e){super(e),this.renderSkillsAndProgress=this.renderSkillsAndProgress.bind(this)}computeAverage(e,t){return t?o.round(e/t*100):0}renderSkillsAndProgress(){if(o.isEmpty(this.props.skills))return a.createElement("div",{className:"lesson-plan-empty"},"You do not have any pending lessons");let e=0,t=0;return{skills:o.map(this.props.skills,(n=>{if(!n.lessons||o.isEmpty(n.lessons))return;let s=0,i=n.lessons.length;o.map(n.lessons,(t=>{t.progress&&"completed"===t.progress.status&&(s++,e++)})),t+=i;let l=this.computeAverage(s,i);return a.createElement(r.default,{key:n.id,onClick:this.props.onSkillClick.bind(this,n),skill:n,skillProgress:l,onLessonStart:this.props.onLessonStart})})),progress:this.computeAverage(e,t)}}render(){let{skills:e,progress:t}=this.renderSkillsAndProgress();return a.createElement("div",{className:"skills-list-container"},a.createElement("div",{className:"learning-center-section-title skills-list-title"},"Explore skills",a.createElement("div",{className:"skills-list-progress"},t,"% completed")),a.createElement("div",{className:"skills-list"},e))}})||s},"./onboarding/src/features/Skills/Bootcamp/components/Spinner.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js");n("./node_modules/classnames/index.js");class a extends s.Component{constructor(e){super(e)}render(){return s.createElement("div",{className:"spinner"},s.createElement("div",{className:"rect-one"}),s.createElement("div",{className:"rect-two"}),s.createElement("div",{className:"rect-three"}),s.createElement("div",{className:"rect-four"}))}}},"./node_modules/date-fns/esm/_lib/requiredArgs/index.js":function(e,t,n){"use strict";function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.r(t),n.d(t,{default:function(){return s}})},"./node_modules/date-fns/esm/_lib/toInteger/index.js":function(e,t,n){"use strict";function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.r(t),n.d(t,{default:function(){return s}})},"./node_modules/date-fns/esm/constants/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{daysInWeek:function(){return s},maxTime:function(){return a},millisecondsInHour:function(){return r},millisecondsInMinute:function(){return i},millisecondsInSecond:function(){return o},minTime:function(){return l},minutesInHour:function(){return c},monthsInQuarter:function(){return d},monthsInYear:function(){return u},quartersInYear:function(){return p},secondsInHour:function(){return g},secondsInMinute:function(){return m}});var s=7,a=24*Math.pow(10,8)*60*60*1e3,i=6e4,r=36e5,o=1e3,l=-a,c=60,d=3,u=12,p=4,g=3600,m=60},"./node_modules/date-fns/esm/differenceInMilliseconds/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("./node_modules/date-fns/esm/toDate/index.js"),a=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function i(e,t){return(0,a.default)(2,arguments),(0,s.default)(e).getTime()-(0,s.default)(t).getTime()}},"./node_modules/date-fns/esm/parseISO/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var s=n("./node_modules/date-fns/esm/constants/index.js"),a=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),i=n("./node_modules/date-fns/esm/_lib/toInteger/index.js");function r(e,t){(0,a.default)(1,arguments);var n=t||{},s=null==n.additionalDigits?2:(0,i.default)(n.additionalDigits);if(2!==s&&1!==s&&0!==s)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,o=u(e);if(o.date){var l=p(o.date,s);r=g(l.restDateString,l.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var c,d=r.getTime(),m=0;if(o.time&&(m=h(o.time),isNaN(m)))return new Date(NaN);if(!o.timezone){var f=new Date(d+m),v=new Date(0);return v.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),v.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),v}return c=b(o.timezone),isNaN(c)?new Date(NaN):new Date(d+m+c)}var o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){var t,n={},s=e.split(o.dateTimeDelimiter);if(s.length>2)return n;if(/:/.test(s[0])?t=s[0]:(n.date=s[0],t=s[1],o.timeZoneDelimiter.test(n.date)&&(n.date=e.split(o.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var a=o.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}function p(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:NaN,restDateString:""};var a=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:null===i?a:100*i,restDateString:e.slice((s[1]||s[2]).length)}}function g(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var s=!!n[4],a=m(n[1]),i=m(n[2])-1,r=m(n[3]),o=m(n[4]),c=m(n[5])-1;if(s)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,c)?function(e,t,n){var s=new Date(0);s.setUTCFullYear(e,0,4);var a=s.getUTCDay()||7,i=7*(t-1)+n+1-a;return s.setUTCDate(s.getUTCDate()+i),s}(t,o,c):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(v[t]||(I(e)?29:28))}(t,i,r)&&function(e,t){return t>=1&&t<=(I(e)?366:365)}(t,a)?(d.setUTCFullYear(t,i,Math.max(a,r)),d):new Date(NaN)}function m(e){return e?parseInt(e):1}function h(e){var t=e.match(c);if(!t)return NaN;var n=f(t[1]),a=f(t[2]),i=f(t[3]);return function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,a,i)?n*s.millisecondsInHour+a*s.millisecondsInMinute+1e3*i:NaN}function f(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(d);if(!t)return 0;var n="+"===t[1]?-1:1,a=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(a*s.millisecondsInHour+i*s.millisecondsInMinute):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function I(e){return e%400==0||e%4==0&&e%100!=0}},"./node_modules/date-fns/esm/toDate/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),a=n("../../node_modules/console-browserify/index.js");function i(e){(0,s.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||void 0===a||(a.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),a.warn((new Error).stack)),new Date(NaN))}},"./node_modules/react-contenteditable/lib/react-contenteditable.js":function(e,t,n){"use strict";var s,a=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&(n[s[a]]=e[s[a]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(n("../../node_modules/react/index.js")),d=l(n("./node_modules/react-contenteditable/node_modules/fast-deep-equal/index.js")),u=o(n("./node_modules/prop-types/index.js"));function p(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}function g(e){if(e.nodeType===Node.TEXT_NODE)return e;for(var t=e.childNodes,n=t.length-1;n>=0;n--){var s=g(t[n]);if(null!==s)return s}return null}function m(e){var t=g(e);if(null!==t&&null!==t.nodeValue){var n=document.createRange(),s=window.getSelection();n.setStart(t,t.nodeValue.length),n.collapse(!0),s.removeAllRanges(),s.addRange(n),e instanceof HTMLElement&&e.focus()}}var h=function(e){function t(t){var n=e.call(this,t)||this;return n.htmlEl=null,n.emitChange=n.emitChange.bind(n),n.lastHtml=t.html,n}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,s=t.html,a=r(t,["tagName","html"]);return c.createElement(n||"div",i({},a,{ref:function(t){return e.htmlEl=t},onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:s}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.htmlEl;return!n||(p(e.html)!==p(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||!d.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){null!==this.htmlEl&&(this.props.html!==this.htmlEl.innerHTML&&(this.htmlEl.innerHTML=this.lastHtml=this.props.html),m(this.htmlEl))},t.prototype.emitChange=function(e){if(this.htmlEl){var t=this.htmlEl.innerHTML;if(this.props.onChange&&t!==this.lastHtml){var n=Object.assign({},e,{target:{value:t}});this.props.onChange(n)}this.lastHtml=t}},t.propTypes={html:u.string.isRequired,onChange:u.func,onBlur:u.func,disabled:u.bool,tagName:u.string,className:u.string,style:u.object},t}(c.Component);t.default=h},"./node_modules/react-contenteditable/node_modules/fast-deep-equal/index.js":function(e){"use strict";var t=Array.isArray,n=Object.keys,s=Object.prototype.hasOwnProperty;e.exports=function e(a,i){if(a===i)return!0;if(a&&i&&"object"==typeof a&&"object"==typeof i){var r,o,l,c=t(a),d=t(i);if(c&&d){if((o=a.length)!=i.length)return!1;for(r=o;0!=r--;)if(!e(a[r],i[r]))return!1;return!0}if(c!=d)return!1;var u=a instanceof Date,p=i instanceof Date;if(u!=p)return!1;if(u&&p)return a.getTime()==i.getTime();var g=a instanceof RegExp,m=i instanceof RegExp;if(g!=m)return!1;if(g&&m)return a.toString()==i.toString();var h=n(a);if((o=h.length)!==n(i).length)return!1;for(r=o;0!=r--;)if(!s.call(i,h[r]))return!1;for(r=o;0!=r--;)if(!e(a[l=h[r]],i[l]))return!1;return!0}return a!=a&&i!=i}},"./node_modules/react-radio-group/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(e,t,n){for(var s=!0;s;){var a=e,i=t,r=n;s=!1,null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,i);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(r)}var c=Object.getPrototypeOf(a);if(null===c)return;e=c,t=i,n=r,s=!0,o=c=void 0}};function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r(n("./node_modules/prop-types/index.js")),d=r(n("../../node_modules/react/index.js")),u=function(e){function t(){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),a(t,[{key:"render",value:function(){var e=this.context.radioGroup,t=e.name,n=e.selectedValue,a=e.onChange,i={};return void 0!==n&&(i.checked=this.props.value===n),"function"==typeof a&&(i.onChange=a.bind(null,this.props.value)),d.default.createElement("input",s({},this.props,{type:"radio",name:t},i))}}]),t}(d.default.Component);t.Radio=u,u.contextTypes={radioGroup:c.default.object};var p=function(e){function t(){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),a(t,[{key:"getChildContext",value:function(){var e=this.props;return{radioGroup:{name:e.name,selectedValue:e.selectedValue,onChange:e.onChange}}}},{key:"render",value:function(){var e=this.props,t=e.Component,n=(e.name,e.selectedValue,e.onChange,e.children),s=function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}(e,["Component","name","selectedValue","onChange","children"]);return d.default.createElement(t,s,n)}}]),t}(d.default.Component);t.RadioGroup=p,p.defaultProps={Component:"div"},p.propTypes={name:c.default.string,selectedValue:c.default.oneOfType([c.default.string,c.default.number,c.default.bool]),onChange:c.default.func,children:c.default.node.isRequired,Component:c.default.oneOfType([c.default.string,c.default.func,c.default.object])},p.childContextTypes={radioGroup:c.default.object}},"./integrations/ci-cd/constants.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{AETHER_BADGE_STATUS:function(){return T},ALL_CI_INTEGRATION_CLASSES:function(){return b},ALL_TESTS:function(){return r},API_SCHEMA_DEFAULT_NAME:function(){return M},BITBUCKET_PIPELINES_CLASS_ID:function(){return p},BUILD_FILTER_STATUS:function(){return D},BUILD_STATUS_TO_BADGE_TYPE_MAP:function(){return N},BUILD_STATUS_TO_FILTER_STATUS_MAP:function(){return R},CANCELLABLE_OUTCOMES:function(){return O},CIRCLE_CI_CLASS_ID:function(){return d},CI_CD_BUILDS:function(){return o},CI_CD_CLIENT_CATEGORY:function(){return l},COMPACT_VIEW_BUILDS_LIMIT:function(){return a},COMPACT_VIEW_DEFAULT_OFFSET:function(){return i},DEVOPS_CI_CLASS_ID:function(){return h},ERRORS:function(){return C},ERROR_INTEGRATION_NOT_FOUND:function(){return E},ERROR_UNABLE_TO_GET_INTEGRATION_DATA:function(){return A},GENERATE_API_KEY_URL:function(){return S},GITHUB_CI_CLASS_ID:function(){return f},GITLAB_CI_CLASS_ID:function(){return m},GITLAB_SELF_HOSTED_CLASS_ID:function(){return g},INITIALS_TO_EXPANDED:function(){return x},JENKINS_CLASS_ID:function(){return u},NEWMAN_TOOLTIP_URL:function(){return y},NEWMAN_URL:function(){return v},NOT_AN_API_EDITOR:function(){return w},POSTMAN_CLI_TOOLTIP_URL:function(){return _},POSTMAN_CLOUD_REPORTER_LINK:function(){return I},RULE_TO_OAUTH_SERVICE_MAPPING:function(){return j},RULE_TO_SERVICE:function(){return k},RULE_TO_TEMPLATE:function(){return P},TEST_AND_AUTOMATION_VIEW:function(){return L},TRAVIS_CLASS_ID:function(){return c},errorContext:function(){return s}});const s=pm.logger.getContext("CI CD Integration","integrations"),a=5,i=0,r="all",o="ci-builds",l="continuous-integration",c="travis_ci",d="circle_ci",u="jenkins_ci",p="bitbucket_pipelines",g="gitlab_selfhosted_ci",m="gitlab_ci",h="devops_pipelines",f="github_ci",b=[c,d,u,p,g,m,h,f],v="https://go.pstmn.io/newman-config-for-ci-cd",I="https://go.pstmn.io/newman-reporter-postman-cloud",S="https://go.pstmn.io/docs-postman-api-key",y="https://go.pstmn.io/newman-config-tooltip",_="https://go.pstmn.io/postman-cli-config-tooltip",E={TITLE:"CI Integration not found",DESCRIPTION:"The integration you are looking for might have been deleted."},A={TITLE:"Unable to get integration details",DESCRIPTION:"Something went wrong while fetching details for your integration."},w={TITLE:"",DESCRIPTION:"You do not have permission to view this page."},C={UNABLE_TO_FETCH_PROJECTS:"Error occurred while fetching projects",FETCH_PROJECTS_AUTHENTICATION_ERROR:"Unable to fetch projects, invalid access token supplied",UNABLE_TO_FETCH_CLASS_DATA:"Something went wrong while fetching integration details, please try again"},k={devops_pipelines:"Azure Pipelines",travis_ci:"Travis CI",circle_ci:"CircleCI",jenkins_ci:"Jenkins",bitbucket_pipelines:"Bitbucket Pipelines",gitlab_ci:"GitLab SaaS",gitlab_selfhosted_ci:"GitLab Self-managed",github_ci:"GitHub Actions"},j={[p]:"bitbucket",[m]:"gitlab",[g]:"gitlabenterprise",[f]:"github",[h]:"azure"},P={[p]:"bitbucket-pipelines",[u]:"jenkins",[c]:"travis",[d]:"circleci",[m]:"gitlab",[h]:"azure-pipelines",[f]:"github-actions",local:"local-env"},T={NEUTRAL:"neutral",SUCCESS:"success",INFO:"info",WARNING:"warning",CRITICAL:"critical",NEW:"new",COUNT:"count"},N={passed:T.SUCCESS,success:T.SUCCESS,successful:T.SUCCESS,succeeded:T.SUCCESS,stopped:T.WARNING,partiallySucceeded:T.WARNING,failed:T.CRITICAL,failure:T.CRITICAL,"not running":T.CRITICAL,canceled:T.NEUTRAL,cancelled:T.NEUTRAL,unstable:T.CRITICAL,"not built":T.CRITICAL,aborted:T.NEUTRAL,errored:T.CRITICAL,building:T.NEUTRAL,queued:T.NEUTRAL,created:T.NEUTRAL,running:T.NEUTRAL,in_progress:T.NEUTRAL,pending:T.NEUTRAL,"waiting for resource":T.NEUTRAL,preparing:T.NEUTRAL,skipped:T.NEUTRAL,manual:T.NEUTRAL,scheduled:T.NEUTRAL,started:T.NEUTRAL,inProgress:T.NEUTRAL,notStarted:T.NEUTRAL,received:T.NEUTRAL,none:T.NEUTRAL},D={SUCCESS:"Success",FAILED:"Failed",DEFAULT:"Other"},R={passed:D.SUCCESS,success:D.SUCCESS,successful:D.SUCCESS,succeeded:D.SUCCESS,completed:D.SUCCESS,failed:D.FAILED,failure:D.FAILED},O={[p]:["RUNNING","CREATED"],[m]:["running","created","pending","preparing","scheduled"],[g]:["running","created","pending","preparing","scheduled"],[c]:["created","received","started"],[d]:["running","queued","on_hold"],[h]:["notStarted","inProgress","postponed"],[f]:["queued","in_progress"]},x={bb:"bitbucket.com",gh:"github.com"},M="Postman API Schema",L="tests"},"./integrations/ci-cd/services/DevOps.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/date-fns/esm/differenceInMilliseconds/index.js"),a=n("./node_modules/date-fns/esm/parseISO/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=function(e,t,n,s){return new(n||(n=Promise))((function(a,i){function r(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((s=s.apply(e,t||[])).next())}))};const{getRepositories:o,getOrgs:l}=n("./api-dev/services/IntegrationService.js").default,{getBuildFilterStatus:c,getCollectionRunStatusSummary:d,convertNewmanRunMetrics:u}=n("./integrations/ci-cd/helpers.js"),p="list_builds",g="cancel_build",m="newman_template",h=pm.logger.getContext("DevOps","Integrations"),f=(e,t)=>{if(!e||!t)return null;const n=(0,a.default)(e),i=(0,a.default)(t);return(0,s.default)(i,n)};t.default={fetchOrganizations:e=>r(void 0,void 0,void 0,(function*(){const{orgs:t}=yield l(e,null);return t})),fetchRepositories:(e,t)=>r(void 0,void 0,void 0,(function*(){const{repositories:n}=yield o(e,t,null);return n.map((e=>{return{id:e.id,name:e.name,projectName:(t=e.full_name,t.split("/")[0])};var t}))})),getBuilds:({limit:e,offset:t,integrationId:n})=>r(void 0,void 0,void 0,(function*(){var s;try{const{body:a}=yield i.default.triggerIntegrationOnDemand(n,p,{inputs:{limit:e,offset:t}}),r=a?a.devOpsBuilds:null,o=a?a.newmanRuns:null,l=!0,g=(null!==(s=null==r?void 0:r.value)&&void 0!==s?s:[]).map((e=>{var t,n,s;const a=(i=e,(null!=o?o:[]).filter((e=>e.build===i.id.toString())).map(u));var i,r,p,g;return{id:e.id,branch:(g=e.sourceBranch,g.replace(/^\/?(refs\/)?(heads)?\/?/g,"")),build_url:e._links.web.href,buildNumber:e.buildNumber,build_num:(r=e.buildNumber,p=null===(t=e.definition)||void 0===t?void 0:t.name,p?`${p}: ${r}`:r),showCollectionRuns:l,showBuildSteps:!1,collectionRunSummary:d(a),collectionRunDetails:a,duration:f(e.startTime,e.finishTime),buildIdentifier:e.id,filterStatus:c(e.result),outcome:null!==(n=e.result)&&void 0!==n?n:e.status,start_time:null!==(s=e.startTime)&&void 0!==s?s:null}}));return g}catch(e){throw pm.logger.error("DevOps.getBuilds ~ Error occurred while fetching projects",e,{context:h}),e}})),triggerBuild:void 0,cancelBuild:(e,t)=>r(void 0,void 0,void 0,(function*(){return yield i.default.triggerIntegrationOnDemand(e,g,{inputs:{build_id:t.id}}),!0})),getBuildSteps:void 0,getNewmanConfig:e=>r(void 0,void 0,void 0,(function*(){try{const{body:t}=yield i.default.triggerIntegrationOnDemand(e,m);return t}catch(e){throw pm.logger.error("DevOps.getNewmanConfig ~ Error occurred while fetching newman config",e,{context:h}),e}})),getAddIntegrationPayload:(e,t,n,s,a,i,r,o,l)=>({classId:null==l?void 0:l.id,name:e,inputs:{api_id:s,organization:t,apiversion:a,oauth_token_id:n,project_name:i,repository_id:r,repository_name:o}}),getBranches:()=>Promise.resolve([])}},"./integrations/ci-cd/services/index.ts":function(e,t,n){"use strict";n.r(t);var s=n("./integrations/ci-cd/constants.ts"),a=n("./integrations/ci-cd/services/Circleci.js"),i=n("./integrations/ci-cd/services/DevOps.ts"),r=n("./integrations/ci-cd/services/TravisCI.js"),o=n("./integrations/ci-cd/services/JenkinsCI.js"),l=n("./integrations/ci-cd/services/BitbucketCI.js"),c=n("./integrations/ci-cd/services/GitLabCI.js"),d=n("./integrations/ci-cd/services/GithubCI.js");t.default={[s.CIRCLE_CI_CLASS_ID]:a.default,[s.TRAVIS_CLASS_ID]:r.default,[s.JENKINS_CLASS_ID]:o.default,[s.BITBUCKET_PIPELINES_CLASS_ID]:l.default,[s.GITLAB_CI_CLASS_ID]:c.default,[s.GITLAB_SELF_HOSTED_CLASS_ID]:c.default,[s.DEVOPS_CI_CLASS_ID]:i.default,[s.GITHUB_CI_CLASS_ID]:d.default}},"./integrations/constants/uptimeMonitorIntegrations.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{ENTITY_UPTIME_MONITOR:function(){return a},UPTIME_MONITOR_SLACK:function(){return s}});const s="uptime_monitor_notification_slack",a="uptimeMonitor"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{isFormUpdated:function(){return i}});var s=n("./node_modules/lodash/lodash.js"),a=n.n(s);function i(e,t){const n=a().pick(t,a().keys(e));return!a().isEqual(e,n)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a);const r="integrations",o="/integration-instances",l="/bulk";t.default={fetchIntegrationInstanceDetails(e,t){const n=`/integration-instances/${e}`;return s.HTTPGatewayService.request({data:{service:r,method:"get",path:n,query:t}})},getConfiguredIntegrationsForAnEntity(e,t,n){const a=i().join(n,",");return s.HTTPGatewayService.request({data:{service:r,method:"get",path:"/integration-instances",query:{entityType:e,entityId:t,clientCategory:a}}})},createIntegrationInstance(e,t,n){const a=i().map(n,((e,t)=>({key:t,value:e})));return s.HTTPGatewayService.request({data:{service:r,method:"post",path:"/integration-instances",body:{class:e,name:t,inputs:a}}})},createIntegrationInstanceBulk(e){const t=o+l;return s.HTTPGatewayService.request({data:{service:r,method:"post",path:t,body:e}})},updateIntegrationInstance(e,t,n){const a=`/integration-instances/${e}`,o=i().map(n,((e,t)=>({key:t,value:e}))),l={};return i().isNil(t)||(l.name=t),i().isEmpty(o)||(l.inputs=o),s.HTTPGatewayService.request({data:{service:r,method:"put",path:a,body:l}})}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts":function(e,t,n){"use strict";n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),a=n("./node_modules/lodash/lodash.js"),i=n.n(a),r=function(e,t,n,s){return new(n||(n=Promise))((function(a,i){function r(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((s=s.apply(e,t||[])).next())}))};t.default={runServiceAction(e,t,n,a,i,o){return r(this,void 0,void 0,(function*(){const r=`/services/${e}/actions/${t}/run`;return yield s.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:r,body:{integration:{instanceId:o||void 0,classId:a,classInputId:i},inputs:n}}})}))},getValidationError(e,t,n){return r(this,void 0,void 0,(function*(){if(i().isEmpty(e.validator)||this.state.inputErrors[e.key])return Promise.resolve();const s=e.validator,a=i().map(n,(n=>n.key===e.key?Object.assign(Object.assign({},n),{value:t}):n)),r=yield this.runServiceAction(s.service,s.serviceActionId,a,e.integrationClass,e.id,null),o=i().get(r,"body",!0);if("boolean"==typeof o&&o||i().isObject(o)&&(i().isEmpty(o)||i().isEqual(i().keys(o),["error"]))||i().isString(o)&&(i().isEmpty(o)||"true"===o.toLowerCase()))return Promise.resolve();let l="This field isn't valid";return i().isString(o)?l="false"===o.toLowerCase()?l:o:i().isObject(o)&&(l=o.message||o.msg||l),Promise.resolve(l)}))}}},"./integrations/ci-cd/stores/fixture.json":function(e){"use strict";e.exports=JSON.parse('[{"id":"circleci","name":"Circle CI","icon":"pm-icon-circle-ci","description":"Bring your pipeline builds to Postman","icon_url":"https://static.getpostman.com/assets/circleci-light.png","dark_icon_url":"https://static.getpostman.com/assets/circleci-dark.png","extended_description":"Bring your pipeline builds in Postman and also trigger your build pipleines right from Postman","categories":["CI"],"integrations":{"circleci":{"circle_ci":{"name":"Create CI with Circle CI","description":"Bring circle ci builds inside Postman","categories":["CI"],"summary":"","client_categories":["continuous-integration"],"type":"multiple","entity":"apiversion","scope":"user","sync_data":[],"variables":[],"auth_type":"token","canCreateIntegration":true}}},"setup_details":"","service_data":[],"summary":"","misc":"","oauth_initiator_host":null},{"id":"travisci","name":"TravisCI","icon":"pm-icon-travisci","description":"Bring your pipeline builds to Postman","icon_url":"https://static.getpostman.com/assets/travisci-light.png","dark_icon_url":"https://static.getpostman.com/assets/travisci-dark.png","extended_description":"Bring your pipeline builds in Postman and also trigger your build pipleines right from Postman","categories":["CI"],"integrations":{"travisci":{"travis_ci":{"name":"Trigger builds from Postman with TravisCI","description":"Bring TravisCI builds inside Postman","categories":["CI"],"summary":"","client_categories":["continuous-integration"],"type":"multiple","entity":"apiversion","scope":"user","sync_data":[],"variables":[],"auth_type":"token","canCreateIntegration":true}}},"setup_details":"","service_data":[],"summary":"","misc":"","oauth_initiator_host":null}]')}}]);