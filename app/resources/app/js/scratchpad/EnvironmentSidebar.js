"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[7],{6170:function(e,t,i){i.r(t),i.d(t,{default:function(){return n}});var s=i(1);function n(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 140 120",height:"120px",width:"140px",className:"no-environment-illustration"},s.createElement("defs",null,s.createElement("linearGradient",{id:"linear-gradient",x1:"85.15",y1:"13.79",x2:"92.06",y2:"13.79",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:"0",stopColor:"#ff7002"}),s.createElement("stop",{offset:"0.3",stopColor:"#fe7304"}),s.createElement("stop",{offset:"0.5",stopColor:"#fc7c0a"}),s.createElement("stop",{offset:"0.68",stopColor:"#f88b15"}),s.createElement("stop",{offset:"0.84",stopColor:"#f3a125"}),s.createElement("stop",{offset:"0.98",stopColor:"#ecbd39"}),s.createElement("stop",{offset:"1",stopColor:"#ebc03b"})),s.createElement("linearGradient",{id:"linear-gradient-2",x1:"39.4",y1:"66.05",x2:"42.41",y2:"66.05",xlinkHref:"#linear-gradient"}),s.createElement("linearGradient",{id:"linear-gradient-3",x1:"33.73",y1:"66.36",x2:"37.25",y2:"66.36",xlinkHref:"#linear-gradient"})),s.createElement("g",{className:"cls-1"},s.createElement("g",{id:"Layer_1","data-name":"Layer 1"},s.createElement("path",{className:"cls-2",d:"M87.89,48.75a8.21,8.21,0,0,0,7.86-12.68A8.2,8.2,0,0,1,90,46.57"}),s.createElement("circle",{className:"cls-3",cx:"88.61",cy:"13.79",r:"3.46"}),s.createElement("path",{className:"cls-2",d:"M85.28,113.61c0,2.92-13.1,5.29-29.25,5.29s-29.25-2.37-29.25-5.29c0-1.46,3.94-2.77,9.2-3.82.84-.17,1,4.86,2.52,6.12,5.3,4.35,7,1.61,10.24-.17,1.51-.84,1.87-7.28,2.59-7.32a44.22,44.22,0,0,1,4.7-.1c1.5,0,.79.1,2.23.05.67,0,.75,5.65,2,6.66.88.72,4.34,3,6.65,2.86,1.94-.11,4.24-3.41,5.22-4.06.68-.45.69-4.71,1.44-4.62C81.83,110.14,85.28,111.72,85.28,113.61Z"}),s.createElement("path",{className:"cls-4",d:"M36.21,82.72v28a7.37,7.37,0,0,0,7.36,7.36h0a7.37,7.37,0,0,0,7.36-7.36l.77-19.12c0-1.54,1.7-1.43,2.5-1.43h0a1.52,1.52,0,0,1,1.51,1.45L58.48,110c.57,4.73,3.45,7.78,7.74,7.83h0c4.36.05,7-4.39,7-8.75L70.47,61.8"}),s.createElement("path",{className:"cls-4",d:"M36.85,47.91,36,47.2a19.28,19.28,0,1,1,21,3l-.61.31"}),s.createElement("rect",{className:"cls-4",x:"26.06",y:"48.12",width:"31.68",height:"34.12",rx:"6.35"}),s.createElement("g",{className:"cls-5"},s.createElement("circle",{className:"cls-6",cx:"36.27",cy:"11.68",r:"2.73"})),s.createElement("circle",{className:"cls-4",cx:"36.27",cy:"11.68",r:"2.73"}),s.createElement("path",{className:"cls-4",d:"M66.79,38.65c-6.17-.73-10.43-5.94-10.43-12.31a11.58,11.58,0,0,1,4-9.08"}),s.createElement("path",{className:"cls-4",d:"M70.42,61.76s-3.53,10.5-12.61,8.45"}),s.createElement("path",{className:"cls-4",d:"M70.74,69.33s-3.85,8.21-12.93,6.16"}),s.createElement("line",{className:"cls-4",x1:"37.79",y1:"13.96",x2:"39.06",y2:"16.07"}),s.createElement("path",{className:"cls-4",d:"M48.91,48.49v7.4a5,5,0,0,1-5,5H26.39"}),s.createElement("g",{className:"cls-5"},s.createElement("circle",{className:"cls-7",cx:"40.9",cy:"66.05",r:"1.51"})),s.createElement("g",{className:"cls-5"},s.createElement("circle",{className:"cls-8",cx:"35.49",cy:"66.36",r:"1.76"})),s.createElement("circle",{className:"cls-4",cx:"40.9",cy:"66.14",r:"1.77"}),s.createElement("circle",{className:"cls-4",cx:"35.55",cy:"66.14",r:"1.77"}),s.createElement("path",{className:"cls-4",d:"M26.3,64.45h4.06a1.66,1.66,0,0,1,1.39,1.83h0a1.67,1.67,0,0,1-1.39,1.84H26.3Z"}),s.createElement("path",{className:"cls-4",d:"M26.3,75.12H48.36a1.67,1.67,0,0,0,1.39-1.84h0a1.66,1.66,0,0,0-1.39-1.83H26.3"}),s.createElement("circle",{className:"cls-4",cx:"49.55",cy:"36.03",r:"2.88"}),s.createElement("path",{className:"cls-4",d:"M62.11,47.4s12.2-1.08,19.62-11.84a6.43,6.43,0,0,1,9.15-1.45h0a6.19,6.19,0,0,1,1.87,7.68C90.33,46.62,84.34,56,74.22,60.51a21.65,21.65,0,0,1-2.67.93l-1.07.29"}),s.createElement("path",{className:"cls-4",d:"M72.82,43.2a15.77,15.77,0,0,1-.56-4.2A16.06,16.06,0,0,1,85.67,23.16"}),s.createElement("path",{className:"cls-4",d:"M90.76,23.13a16.05,16.05,0,1,1-7.27,31.18"}),s.createElement("path",{className:"cls-9",d:"M79.83,37.36A8.21,8.21,0,1,1,90,46.57"}),s.createElement("path",{className:"cls-4",d:"M86,30.26l1.14-8.54a.6.6,0,0,1,.61-.51l1,0a.59.59,0,0,1,.59.52l.88,8.56"}),s.createElement("circle",{className:"cls-4",cx:"88.61",cy:"13.79",r:"3.46"}),s.createElement("path",{className:"cls-4",d:"M110.44,35.69a2.76,2.76,0,0,1,5,.28,1.9,1.9,0,0,1,.63-.11,2,2,0,0,1,0,3.91h-5.38"}),s.createElement("path",{className:"cls-4",d:"M87.19,64.14h5.27a2,2,0,0,0,2-1.63,2,2,0,0,0-1.93-2.28,1.9,1.9,0,0,0-.63.11,2.76,2.76,0,0,0-5-.28,2,2,0,0,0-2.27,2.41,1.67,1.67,0,0,0,1.59,1.66Z"}),s.createElement("path",{className:"cls-4",d:"M87.19,64.14h5.27a2,2,0,0,0,2-1.63,2,2,0,0,0-1.93-2.28,1.9,1.9,0,0,0-.63.11,2.76,2.76,0,0,0-5-.28,2,2,0,0,0-2.27,2.41,1.67,1.67,0,0,0,1.59,1.66Z"}),s.createElement("circle",{className:"cls-4",cx:"109.39",cy:"37.91",r:"2.12"}),s.createElement("line",{className:"cls-4",x1:"86.83",y1:"65.9",x2:"86.83",y2:"67.07"}),s.createElement("line",{className:"cls-4",x1:"89.12",y1:"65.9",x2:"89.12",y2:"67.07"}),s.createElement("line",{className:"cls-4",x1:"91.83",y1:"65.9",x2:"91.83",y2:"67.07"}),s.createElement("line",{className:"cls-4",x1:"92.44",y1:"13.53",x2:"93.9",y2:"13.53"}),s.createElement("line",{className:"cls-4",x1:"83.69",y1:"13.53",x2:"85.16",y2:"13.53"}),s.createElement("line",{className:"cls-4",x1:"88.51",y1:"8.38",x2:"88.51",y2:"9.84"}),s.createElement("line",{className:"cls-4",x1:"88.2",y1:"17.56",x2:"88.2",y2:"19.02"}),s.createElement("line",{className:"cls-4",x1:"84.48",y1:"17.35",x2:"85.51",y2:"16.32"}),s.createElement("line",{className:"cls-4",x1:"91.19",y1:"11.08",x2:"92.23",y2:"10.05"}),s.createElement("line",{className:"cls-4",x1:"84.7",y1:"9.83",x2:"85.74",y2:"10.86"}),s.createElement("line",{className:"cls-4",x1:"90.97",y1:"16.54",x2:"92.01",y2:"17.58"}),s.createElement("line",{className:"cls-4",x1:"98.29",y1:"51.78",x2:"99.32",y2:"53.4"}),s.createElement("line",{className:"cls-4",x1:"102.76",y1:"46.48",x2:"104.63",y2:"47.39"}),s.createElement("line",{className:"cls-4",x1:"79.75",y1:"24.64",x2:"78.89",y2:"22.92"}),s.createElement("line",{className:"cls-4",x1:"74.75",y1:"29.44",x2:"72.99",y2:"28.35"}),s.createElement("line",{className:"cls-4",x1:"101.75",y1:"29.85",x2:"103.46",y2:"28.97"}),s.createElement("line",{className:"cls-4",x1:"96.88",y1:"24.92",x2:"97.95",y2:"23.14"}),s.createElement("polyline",{className:"cls-4",points:"67.95 35.08 69.71 35.08 69.71 39.75 66.88 39.9"}),s.createElement("path",{className:"cls-4",d:"M29.73,81.86s1.07,7.68,6,8"}))))}},6163:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var s,n=i(1),r=i(1588),a=i.n(r),o=i(1593),l=i(1982),c=i(6164),d=i(6165),m=i(6169);let h=(0,o.observer)(s=class extends n.Component{render(){return n.createElement("div",{className:"env-sidebar-container"},n.createElement(c.default,{model:this.props.model}),n.createElement(l.default,{identifier:"environment"},n.createElement(d.default,{model:this.props.model})))}})||s;h.propTypes={model:a().instanceOf(m.default).isRequired}},6171:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=i(1209),n=i(1013),r=i(1460),a=i(2782),o=i(6169),l=i(5077),c=i(21);class d{constructor(){this.model=null,this.adapter=null}async didCreate(){this.model=new o.default,this.model.setLoading&&this.model.setLoading(!0),this.adapter=new l.default(this.model),await this.adapter.hydrate(),this.model.setLoading&&this.model.setLoading(!1)}async fetchEnvironments(){await(0,n.getStore)("SyncStatusStore").onSyncAvailable();const e=(0,n.getStore)("ActiveWorkspaceStore").id,t=await s.default.request(a.ENVIRONMENT_LIST_AND_SUBSCRIBE`${e}`,{method:"POST"}),i=c.forEach(c.get(t,"body.data",[]),(e=>{const t={model:"environment",modelId:e.id,action:"UPDATE_ENVIRONMENT"},i=r.default.getCompositeKey(t);!(0,n.getStore)("PermissionStore").members.has(i)&&c.set(e,"attributes.permissions.userCanUpdate",!0)}));return this.model.hydrate&&this.model.hydrate(i),this.model.setLoading&&this.model.setLoading(!1),t}beforeDestroy(){this.model.dispose(),this.model=null,this.adapter&&this.adapter.dispose(),this.adapter=null}}},6165:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var s,n=i(1),r=i(1588),a=i.n(r),o=i(1007),l=i(1593),c=i(1614),d=i.n(c),m=i(4051),h=i(2424),p=i(6170),u=i(2338),E=i(1013),f=i(1982),v=i(6166),y=i(6168),b=i(6169),g=i(3497),S=i(2713),I=i(3498),C=i(2771),N=i(6136),A=i(6137),O=i(4767),T=i(21);let w=d()(s=(0,l.observer)(s=class extends n.Component{constructor(e){super(e),this.editCache=null,this.listItemRefs={},this.getItemSize=this.getItemSize.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this.setEditCache=this.setEditCache.bind(this),this.saveCachedValue=this.saveCachedValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.focusNext=this.focusNext.bind(this),this.focusPrev=this.focusPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.renameItem=this.renameItem.bind(this),this.duplicateItem=this.duplicateItem.bind(this)}componentDidMount(){this.scrollToViewReactionDisposer=(0,o.reaction)((()=>T.get(this.props,"model.activeItemIndex")),(e=>this.scrollToItem(e))),this.resetHeightReactionDisposer=(0,o.reaction)((()=>T.get(this.props,"model.items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)}))}componentWillUnmount(){this.scrollToViewReactionDisposer&&this.scrollToViewReactionDisposer(),this.resetHeightReactionDisposer&&this.resetHeightReactionDisposer(),clearTimeout(this.clearCollectionLoadingTimer)}getSidebarEmptyState(){const e=(0,E.getStore)("PermissionStore").can("addEnvironment","workspace",(0,E.getStore)("ActiveWorkspaceStore").id);return n.createElement(N.default,{illustration:n.createElement(p.default,null),title:"You donâ€™t have any environments.",message:"An environment is a set of variables that allows you to switch the context of your requests.",action:e&&{label:"Create Environment",handler:g.createEnvironment}})}getGlobalsListItem(){return n.createElement(f.default,{identifier:"globals"},n.createElement(y.default,{model:this.props.model.globals}))}getItemSize(){return 28}getListItem({style:e,index:t}){const{model:i}=this.props,s=T.get(i,["items",t]);if(!s)return null;const{id:r}=s;return n.createElement(f.default,{identifier:r},n.createElement("div",{style:e},n.createElement(v.default,{ref:e=>{this.listItemRefs[r]=e},key:r,index:t,item:s,model:i,setEditCache:this.setEditCache,editCache:T.get(this.editCache,"index")===t?this.editCache:null})))}getKeyMapHandlers(){return{quit:pm.shortcuts.handle("quit",this.setEditCache.bind(this,null)),select:pm.shortcuts.handle("select",this.saveCachedValue),nextItem:pm.shortcuts.handle("nextItem",this.focusNext),prevItem:pm.shortcuts.handle("prevItem",this.focusPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),rename:pm.shortcuts.handle("rename",this.renameItem),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItem)}}setEditCache(e){this.editCache=e}saveCachedValue(){if(!this.editCache)return;const{index:e,inlineInput:t}=this.editCache,i=T.get(this.props.model,["items",e]),s=(n=t,T.get(n,"inlineInput.value"));var n;i&&!T.isNil(s)&&this.props.model.handleAction(i.id,I.ACTION_TYPE_RENAME,{name:s})}focusNext(e){e&&e.preventDefault(),this.props.model.focusNext()}focusPrev(e){e&&e.preventDefault(),this.props.model.focusPrev()}deleteItem(){this.props.model.handleAction(T.get(this.props.model,"activeItem"),I.ACTION_TYPE_DELETE)}renameItem(){if(!(0,E.getStore)("OnlineStatusStore").userCanSave)return(0,S.showOfflineActionDisabledToast)();T.invoke(this.listItemRefs,[T.get(this.props.model,"activeItem"),"handleEditName"])}duplicateItem(){this.props.model.handleAction(T.get(this.props.model,"activeItem"),I.ACTION_TYPE_DUPLICATE)}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className);this.editCache&&!t&&this.saveCachedValue()}scrollToItem(e){!T.isEmpty(this.listRef)&&!T.isNil(e)&&this.listRef.scrollToItem(e)}render(){const{model:e}=this.props,t=T.size(e.items);if(e.isLoading)return n.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),n.createElement(O.default,null));if(T.isEmpty(e.items)){if(T.isEmpty(e.searchQuery))return n.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),this.getSidebarEmptyState());if(!C.GLOBALS.includes(e.searchQuery))return n.createElement(A.default,{searchQuery:e.searchQuery,illustration:n.createElement(p.default,null)})}const i=e=>n.createElement(l.Observer,null,this.getListItem.bind(this,e));return n.createElement(u.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers()},n.createElement("div",{className:"env-sidebar-list-container",onClick:this.handleClickOutside},this.getGlobalsListItem(),n.createElement("div",{className:"env-sidebar-list"},n.createElement(m.default,null,(({height:e,width:s})=>n.createElement(h.VariableSizeList,{height:e,width:s,itemCount:t,itemSize:this.getItemSize,overscanCount:10,ref:e=>{this.listRef=e}},i))))))}})||s)||s;w.propTypes={model:a().instanceOf(b.default).isRequired}},6166:function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var s,n=i(1),r=i(1593),a=i(1597),o=i.n(a),l=i(1588),c=i.n(l),d=i(1665),m=i(6167),h=i(1013),p=i(3240),u=i(1612),E=i(1982),f=i(3629),v=i(3498),y=i(1986),b=i(3355),g=i(2713),S=i(21);let I=(0,r.observer)(s=class extends n.Component{constructor(e){super(e),this.handleEditName=this.handleEditName.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleRenameSubmit=this.handleRenameSubmit.bind(this),this.handleSetActiveEnvironment=this.handleSetActiveEnvironment.bind(this),this.handleRemoveActiveEnvironment=this.handleRemoveActiveEnvironment.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.containerRef=this.containerRef.bind(this),this.getStatusIndicators=this.getStatusIndicators.bind(this)}componentDidMount(){this.props.editCache&&this.listItemRef&&(this.handleEditName(),this.listItemRef.setEditState(this.props.editCache.inlineInput))}componentWillUnmount(){const{listItemRef:e}=this;e&&e.isEditing()&&this.props.setEditCache({index:this.props.index,inlineInput:e.getEditState()})}getStatusIndicators(){return n.createElement(f.default,{environment:this.props.item,showForkLabel:!0})}getRightAlignedContainer(e,t){const i=o()({"env-actions-icon-container":!0,isHovered:e||t,isActive:this.props.item.isActive});return n.createElement(n.Fragment,null,n.createElement("div",{className:i},n.createElement(u.Button,{type:"icon",tooltip:"Set inactive",onClick:this.handleRemoveActiveEnvironment,className:"sidebar-action-btn active-env-icon"},n.createElement(d.default,{name:"icon-state-success-fill-small",size:"large",color:"content-color-primary"})),n.createElement(u.Button,{type:"icon",tooltip:"Set active",onClick:this.handleSetActiveEnvironment,className:"sidebar-action-btn inactive-env-icon"},n.createElement(d.default,{name:"icon-state-success-stroke",size:"large",color:"content-color-primary"}))),!e&&!t&&this.props.item.isActive&&n.createElement("div",{className:"env-actions__more-actions-placeholder"}))}getMenuItemIconClasses(e){return o()({"dropdown-menu-item-icon":!0},{"pm-icon":!0},{"pm-icon-normal":!0},`menu-icon--${e}`)}getMenuItems(){const{model:e,item:t}=this.props;return S.map(e.getActions(t.id),(e=>{const t=n.createElement("span",{className:"env-action-item"},n.createElement("div",{className:"dropdown-menu-item-label"},e.label),e.shortcut&&n.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,p.getShortcutByName)(e.shortcut)));return!e.hide&&n.createElement(y.MenuItem,{key:e.type,refKey:e.type,disabled:!e.isEnabled,disabledText:b.DISABLED_IN_SCRATCHPAD_TOOLTIP},e.xpathLabel?n.createElement(E.default,{identifier:e.xpathLabel},t):t)}))}getActionsMenuItems(){return n.createElement(y.DropdownMenu,{className:"env-dropdown-menu","align-right":!0},this.getMenuItems())}containerRef(e){this.listItemRef=e}handleSetActiveEnvironment(){this.props.model.handleAction(this.props.item.id,v.ACTION_TYPE_SET_ACTIVE)}handleRemoveActiveEnvironment(){this.props.model.handleAction(this.props.item.id,v.ACTION_TYPE_SET_ACTIVE,{noEnvironment:!0})}handleEditName(){S.invoke(this.listItemRef,"editText")}async handleRenameSubmit(e){await this.props.model.handleAction(this.props.item.id,v.ACTION_TYPE_RENAME,{name:e}),this.props.setEditCache(null)}async handleDropdownActionSelect(e){if(e===v.ACTION_TYPE_RENAME_TOGGLE)return(0,h.getStore)("OnlineStatusStore").userCanSave?this.handleEditName():(0,g.showOfflineActionDisabledToast)();await this.props.model.handleAction(this.props.item.id,e)}handleItemSelect(){this.props.model.openInTab(this.props.item.id)}render(){const{item:e,model:t}=this.props;return n.createElement(m.default,{ref:this.containerRef,text:e.name,isForked:!(!S.get(e,"attributes.fork.forkId")&&!S.get(e,"attributes.fork.id")),isSelected:t.activeItem===e.id,onClick:this.handleItemSelect,onRename:this.handleRenameSubmit,statusIndicators:this.getStatusIndicators,rightMetaComponent:(...e)=>n.createElement(r.Observer,null,this.getRightAlignedContainer.bind(this,...e)),moreActions:this.getActionsMenuItems(),onActionsDropdownSelect:this.handleDropdownActionSelect})}})||s;I.propTypes={index:c().number.isRequired,item:c().object.isRequired,model:c().object.isRequired,editCache:c().object.isRequired,setEditCache:c().func.isRequired}},6164:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s,n=i(1),r=i(1593),a=i(1013),o=i(6148),l=i(3497),c=i(2714);let d=(0,r.observer)(s=class extends n.Component{constructor(e){super(e),this.state={isEnvCreateEnabled:!0},this.handleCreate=this.handleCreate.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleCreate(){this.setState({isEnvCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isEnvCreateEnabled:!0})}),1e3),(0,l.createEnvironment)({openInTab:!0})}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const{userCanSave:e}=(0,a.getStore)("OnlineStatusStore"),t=(0,a.getStore)("PermissionStore").can("addEnvironment","workspace",(0,a.getStore)("ActiveWorkspaceStore").id),i=e&&t&&this.state.isEnvCreateEnabled;return n.createElement(o.default,{createNewConfig:{tooltip:e?t?"Create new environment":c.DISABLED_TOOLTIP_NO_PERMISSION:c.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!i,onCreate:this.handleCreate,xPathIdentifier:"addEnvironment"},onSearch:this.handleSearchChange,searchQuery:this.props.model.searchQuery})}})||s},6169:function(e,t,i){i.r(t),i.d(t,{EnvironmentModel:function(){return x},GlobalsModel:function(){return w},default:function(){return _}});var s,n,r,a,o,l,c,d,m,h,p=i(1007),u=i(1013),E=i(1212),f=i(2787),v=i(2788),y=i(1032),b=i(2771),g=i(3497),S=i(5078),I=i(2713),C=i(3498),N=i(21);function A(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function O(e,t,i,s,n){var r={};return Object.keys(s).forEach((function(e){r[e]=s[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,s){return s(e,t,i)||i}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const T=["name","createdAt"];let w=(n=O((s=class{constructor(){A(this,"isActive",n,this),this._disposer=(0,p.autorun)((()=>{const e=(0,u.getStore)("EditorStore").find((0,u.getStore)("ActiveWorkspaceSessionStore").activeEditor);e&&e.resource&&e.resource.includes(b.GLOBALS)?this.setFocus(!0):this.setFocus(!1)}))}dispose(){this._disposer()}setFocus(e){this.isActive=e}openInTab(){(0,g.openGlobalsInTab)()}}).prototype,"isActive",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O(s.prototype,"setFocus",[p.action],Object.getOwnPropertyDescriptor(s.prototype,"setFocus"),s.prototype),s),x=(O((r=class extends S.default{updateName(e){this.update({name:e})}get isActive(){return(0,u.getStore)("ActiveEnvironmentStore").id===(0,y.decomposeUID)(this.id).modelId}}).prototype,"updateName",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"updateName"),r.prototype),O(r.prototype,"isActive",[p.computed],Object.getOwnPropertyDescriptor(r.prototype,"isActive"),r.prototype),r),_=(o=O((a=class{constructor(){A(this,"activeItem",o,this),A(this,"sortBy",l,this),A(this,"searchQuery",c,this),A(this,"$items",d,this),A(this,"isLoading",m,this),A(this,"sharedEnvironments",h,this),this.globals=new w,this._dispose=(0,p.autorun)((()=>{const e=(0,u.getStore)("EditorStore").find((0,u.getStore)("ActiveWorkspaceSessionStore").activeEditor);if(e)if(e.resource.includes(b.ENVIRONMENT)){const t=e.resource.split("/").pop();this.focusItem(t)}else this.resetFocus();else this.resetFocus()})),this.openEntityInTabDebounced=N.debounce((e=>{E.default.transitionTo("build.environment",{eid:e})}),300)}dispose(){this.globals.dispose(),this._dispose()}get filtered(){if(!this.searchQuery.trim())return[...this.$items.values()];const e=N.toLower(this.searchQuery);return N.filter([...this.$items.values()],(t=>N.includes(N.toLower(t.name),e)))}isInActiveWorkspace(e){return N.get((0,u.getStore)("ActiveWorkspaceStore"),"dependencies.environments",[]).includes(e)}get items(){const e=N.filter(this.filtered,(e=>this.isInActiveWorkspace(e.id)));return N.sortBy(e,(e=>e&&[N.toLower(e[this.sortBy]),N.toLower(e.name)]))}get activeItemIndex(){return N.findIndex(this.items,(e=>e.id===this.activeItem))}setSearchQuery(e){this.searchQuery=e}setSortingKey(e){N.includes(T,e)&&(this.sortBy=e)}focusItem(e){e&&(this.activeItem=e)}resetFocus(){this.activeItem=null}setLoading(e){this.isLoading=e}setSharedEnvironments(e){this.sharedEnvironments=new Set(e)}focusNext(){if(!this.activeItem)return;if(N.isEmpty(this.items))return void this.resetFocus();const e=this.items[(this.activeItemIndex+1)%this.items.length].id;this.focusItem(e),this.openEntityInTabDebounced(e)}focusPrev(){if(!this.activeItem||1===N.size(this.items))return;if(N.isEmpty(this.items))return void this.resetFocus();const e=this.activeItemIndex<=0?N.last(this.items).id:this.items[this.activeItemIndex-1].id;this.focusItem(e),this.openEntityInTabDebounced(e)}openInTab(e){this.openEntityInTabDebounced(e)}getActions(e){const t=this.$items.get(e),i=(0,u.getStore)("ActiveWorkspaceStore").id,s=(0,u.getStore)("PermissionStore"),n=(0,u.getStore)("CurrentUserStore"),{userCanSave:r,userCanSaveAndSync:a}=(0,u.getStore)("OnlineStatusStore");return[{type:C.ACTION_TYPE_SHARE,label:"Share environment",isEnabled:a&&t.userCanShare},{type:C.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:r&&t.userCanUpdate},{type:C.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:r&&s.can("addEnvironment","workspace",i)},{type:C.ACTION_TYPE_FORK,label:"Create a Fork",shortcut:"fork",isEnabled:a},{type:C.ACTION_TYPE_PULL_REQUEST,label:"Create Pull Request",isEnabled:!1},{type:C.ACTION_TYPE_MERGE,label:"Merge changes",isEnabled:!1},{type:C.ACTION_MANAGE_ROLES,label:"Manage Roles",isEnabled:a&&!!n.team},{type:C.ACTION_REMOVE_FROM_WORKSPACE,label:"Remove from workspace",isEnabled:a&&s.can("removeEnvironment","workspace",i)},{type:C.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:r&&t.userCanDelete}]}async handleAction(e,t,i={}){const s=this.$items.get(e),n=(0,u.getStore)("PermissionStore"),r=(0,u.getStore)("ActiveWorkspaceStore").id,a=(0,u.getStore)("CurrentUserStore");if(t!==C.ACTION_TYPE_SET_ACTIVE){if(t===C.ACTION_TYPE_SHARE)return(0,u.getStore)("OnlineStatusStore").userCanSaveAndSync?s.userCanShare?void(0,f.shareEnvironment)(e,{origin:"sidebar"}):void pm.toasts.error("You do not have permissions to perform this action"):(0,I.showOfflineActionDisabledToast)();if(t===C.ACTION_TYPE_FORK)return(0,u.getStore)("OnlineStatusStore").userCanSaveAndSync?void(0,g.forkEnvironment)(e,{origin:"sidebar"}):(0,I.showOfflineActionDisabledToast)();if(t!==C.ACTION_TYPE_DUPLICATE){if(t===C.ACTION_TYPE_RENAME)return(0,u.getStore)("OnlineStatusStore").userCanSave?(await(0,g.renameEnvironment)(e,i.name),s.updateName(i.name),pm.mediator.trigger("focusSidebar"),void await(0,g.__forceUpdateNameOnDb)(e,i.name)):(0,I.showOfflineActionDisabledToast)();if(t!==C.ACTION_MANAGE_ROLES){if(t===C.ACTION_REMOVE_FROM_WORKSPACE)return(0,u.getStore)("OnlineStatusStore").userCanSaveAndSync?n.can("removeEnvironment","workspace",r)?void pm.mediator.trigger("showRemoveFromWorkspaceModal",e,{type:"environment",origin:"sidebar",disableDelete:!s.userCanDelete,disableShare:!s.userCanShare},(()=>{e===this.activeItem&&this.focusPrev({openEditor:!1}),this.remove(e),(0,g.closeAllEnvironmentTabs)(e)})):void pm.toasts.error("You do not have permissions to perform this action"):(0,I.showOfflineActionDisabledToast)();if(t!==C.ACTION_TYPE_DELETE)pm.logger.warn("EnvironmentSidebarModel~handleAction",`Unhandled action ${t} triggered`);else{if(!(0,u.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();if(!s.userCanDelete)return void pm.toasts.error("You do not have permissions to perform this action");await(0,g.deleteEnvironment)(e,{name:this.$items.get(e).name})&&(e===this.activeItem&&this.focusPrev({openEditor:!1}),this.remove(e))}}else{if(!(0,u.getStore)("OnlineStatusStore").userCanSaveAndSync)return(0,I.showOfflineActionDisabledToast)();if(!a.team)return;(0,v.manageRolesOnEnvironment)(e,{origin:"sidebar"})}}else{if(!(0,u.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();const{id:t,name:i}=await(0,g.duplicateEnvironment)(e);this.add({id:t,name:i,attributes:s.attributes})}}else try{s.isActive?await(0,g.setNoActiveEnvironment)():await(0,g.setActiveEnvironment)(e)}catch(e){pm.logger.error("EnvironmentSidebarModel~handleAction",e),pm.toasts.error("There was a error while setting the active environment")}}hydrate(e){e&&e.forEach((e=>{this.$items.set(e.id,new x(e))}))}add(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{e&&e.id&&this.$items.set(e.id,new x(e))}))}update(e){if(!e||!e.id)return;const t=this.$items.get(e.id);t&&t.update(e)}remove(e){Array.isArray(e)||(e=[e]),e.forEach((e=>this.$items.delete(e)))}clear(){this.$items.clear()}}).prototype,"activeItem",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=O(a.prototype,"sortBy",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"name"}}),c=O(a.prototype,"searchQuery",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=O(a.prototype,"$items",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),m=O(a.prototype,"isLoading",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=O(a.prototype,"sharedEnvironments",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),O(a.prototype,"filtered",[p.computed],Object.getOwnPropertyDescriptor(a.prototype,"filtered"),a.prototype),O(a.prototype,"items",[p.computed],Object.getOwnPropertyDescriptor(a.prototype,"items"),a.prototype),O(a.prototype,"activeItemIndex",[p.computed],Object.getOwnPropertyDescriptor(a.prototype,"activeItemIndex"),a.prototype),O(a.prototype,"setSearchQuery",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"setSearchQuery"),a.prototype),O(a.prototype,"setSortingKey",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"setSortingKey"),a.prototype),O(a.prototype,"focusItem",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"focusItem"),a.prototype),O(a.prototype,"resetFocus",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"resetFocus"),a.prototype),O(a.prototype,"setLoading",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"setLoading"),a.prototype),O(a.prototype,"setSharedEnvironments",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"setSharedEnvironments"),a.prototype),O(a.prototype,"handleAction",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"handleAction"),a.prototype),O(a.prototype,"hydrate",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"hydrate"),a.prototype),O(a.prototype,"add",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"add"),a.prototype),O(a.prototype,"update",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"update"),a.prototype),O(a.prototype,"remove",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"remove"),a.prototype),O(a.prototype,"clear",[p.action],Object.getOwnPropertyDescriptor(a.prototype,"clear"),a.prototype),a)},6162:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s,n=i(1),r=i(1588),a=i.n(r),o=i(1593),l=i(6163),c=i(6169);let d=(0,o.observer)(s=class extends n.Component{render(){const{controller:e}=this.props;return n.createElement(l.default,{model:e.model})}})||s;d.propTypes={controller:a().shape({model:a().instanceOf(c.default)}).isRequired}},6168:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var s,n=i(1),r=i(1593),a=i(1597),o=i.n(a),l=i(1588),c=i.n(l),d=i(6167),m=i(6169);let h=(0,r.observer)(s=class extends n.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this)}getItemClasses(){return o()({"globals-sidebar-list-item":!0,selected:this.props.model.isActive})}handleSelect(){this.props.model.openInTab()}render(){return n.createElement(n.Fragment,null,n.createElement(d.default,{text:"Globals",isSelected:this.props.model.isActive,onClick:this.handleSelect}),n.createElement("div",{className:"globals-separator"}))}})||s;h.propTypes={model:c().instanceOf(m.GlobalsModel).isRequired}}}]);