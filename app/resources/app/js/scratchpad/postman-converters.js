"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[22],{6161:function(e,t,r){r.r(t);var n=r(1530);t.default={exportSingle:n.default}},6156:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var n=r(1450),o=r(1039),a=r(3324),i=r(1285),l=r(21),s=r(5);function u(e){e=decodeURIComponent(e);var t,r=a.default.getHashVars(e);l.each(r,(function(e){var r=decodeURIComponent(e.key);if(0==r.indexOf("env[")&&"]"==r[r.length-1])try{var a="";try{a=atob(e.value)}catch(t){if(!l.endsWith(e.value,'"'))throw t;e.value=e.value.substring(0,e.value.length-1),a=atob(e.value)}var u=r.substring(4,r.length-1),c=JSON.parse(a),d=[];if(c instanceof Array){var p=c.length;for(t=0;t<p;t++)d.push(l.assign({type:"text",enabled:!0},c[t]))}else l.forOwn(c,(function(e,t){d.push({key:t,value:e,type:"text",enabled:!0})}));i.default.get().then((e=>{let t={name:"create",namespace:"environment",data:{id:o.default.guid(),name:u,values:d,owner:e.id}};(0,n.default)(t),pm.toasts.success("Environment "+u+" imported")})).catch((e=>{pm.logger.error("Error in creating evironment",e)}))}catch(e){s.log("Could not import environment")}}))}},6157:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var n=r(6155),o=r(1222),a=r(1039),i=r(3324),l=r(21);function s(e){n.default.importFileFromUrl(e,((t,r)=>{if(t)return pm.logger.error(t);n.default.checkImportEnvironmentFromUrl(e);var s=i.default.getUrlVars(e),u=l.find(s,(function(e){return"referrer"===e.key})),c=u?decodeURIComponent(u.value):"";o.default.addEvent("collection","create","run_button",null,{referrer:c,collection_id:r.id,collection_link_id:a.default.getCollectionLinkId(e)})}))}},6158:function(e,t,r){r.r(t),r.d(t,{default:function(){return u},parseUrlData:function(){return c}});var n=r(21),o=r.n(n),a=r(4540),i=(r(1039),r(1215)),l=r(1209),s=r(5);function u(e,t){i.default.request(e).then((({body:r})=>{try{a.default.importData(r,{origin:"import/link",link:e}).then((()=>{o().isFunction(t)&&t(null,r)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),o().isFunction(t)&&t("format not recognized")):(pm.mediator.trigger("failedCollectionImport","Could not import: "+e),o().isFunction(t)&&t("Could not import: "+e))}})).catch((({error:e})=>{s.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","Error response received from URL. Check the console for more."),o().isFunction(t)&&t("Error response received from URL. Check the console for more.")}))}function c(e,t=!0){return"browser"===window.SDK_PLATFORM?l.default.request("/ws/proxy",{method:"post",data:{path:"/api/v1/download",service:"importer",method:"post",body:{url:e}}}).then((({body:e})=>e.data)).catch((e=>(pm.logger.warn("Error while parsing url data: ",e),t&&pm.toasts.error("Error while fetching data from link."),null))):i.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),t&&pm.toasts.error("Error while fetching data from link."),null)))}},6159:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});r(21);var n=r(4540),o=r(859),a=r.n(o);function i(e,t,r){a().eachSeries(e,((o,a)=>{let i=new FileReader;i.onload=function(o){var i=o.currentTarget.result;if("importByFileContainer"===t&&r&&1===e.length)return r(i,{origin:"import/file"});n.default.importData(i,{origin:"import/file"},a)},i.readAsText(o)}))}},6155:function(e,t,r){r.r(t);var n=r(6156),o=r(6157),a=r(4203),i=r(6158),l=r(6159),s=r(4549),u=r(6160),c=r(4541),d=r(859),p=r.n(d),f=r(3510),m=r(21);function h(e,t){e?e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("Failed to import collection "+t.name,{dedupeId:"failed-collection-import"}):pm.toasts.success("Collection "+t.name+" imported")}t.default={checkImportEnvironmentFromUrl:n.default,importCollectionAndEnvironment:o.default,importData:async function(e,t,r){if(m.isEmpty(e))return m.isFunction(r)&&r();p().series([r=>{c.default.importCollections(e.collections,t,h,(e=>{r(null,e)}))},r=>{c.default.importGlobals(e.globals,m.pick(t,["activeWorkspace","silentToasts"]),(e=>{r(null,e)}))},r=>{c.default.importHeaderPresets(e.headerPresets,m.pick(t,["currentUserID","activeWorkspace","silentToasts"]),(e=>{r(null,e)}))},r=>{c.default.importEnvironments(e.environments,m.pick(t,["currentUserID","silentToasts","activeWorkspace"]),(e=>{r(null,e)}))},t=>{c.default.importRequests(e.requests,(e=>{t(null,e)}))},r=>{c.default.importCollectionRuns(e.runsInfo,e.events,t,f.handleCollectionRunImportStatus,(e=>{r(null,e)}))}],((e,t)=>{let n={};m.forEach(m.compact(t),(e=>{n[e.type]=m.pick(e,["total","imported","failed"])})),m.isFunction(r)&&r(n)}))},convertRawData:a.default,importDataAs:a.importDataAs,stringify:a.stringify,importFileFromUrl:i.default,parseUrlData:i.parseUrlData,importFiles:l.default,importFolder:s.default,saveEntity:u.default}},6160:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=r(1525),o=r(6161),a=r(1222),i=r(1521),l=r(21),s=r(5);const u={json:"application/json"},c="collection";function d(e,t={}){let r,d,p,f=t.type,m=l.get(t,"outputVersion","2.1.0");if(f)return o.default.exportSingle(f,e,t).then((e=>{if(!(e&&u[e.type]&&e[e.type]))throw s.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((e=>{r=e,d=u[r.type],p=l.get(r,"meta.fileName",f+".json")})).then((()=>JSON.stringify(r.json,null,"\t"))).then((e=>new Promise(((t,r)=>{(0,n.saveAndOpenFile)(p,e,d,((e,n)=>{if(e)return s.warn("Error while saving the exported entity",e),void r(e);t(n)}))})))).then((t=>{if(t!==i.EXPORT_STATE.SUCCESS)return;let r="browser"!==window.SDK_PLATFORM;switch(f){case c:a.default.addEvent(c,"download",m,null,{collection_id:e.id}),r&&pm.toasts.success("Your collection was exported successfully.");break;case"environment":a.default.addEvent(f,"download"),r&&pm.toasts.success("Your environment was exported successfully.");break;case"globals":a.default.addEvent(f,"download"),r&&pm.toasts.success("Your globals were exported successfully.")}})).catch((r=>{pm.toasts.error("Unable to export this entity. Please check the DevTools."),s.warn("Error while exporting an entity",e,t,r)}));s.warn(`Unsupported type '${f}' for exporting`)}}}]);