"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[8],{6180:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var i=s(1);function o(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 140 120",height:"120px",width:"140px",className:"no-history-illustration"},i.createElement("defs",null,i.createElement("linearGradient",{id:"linear-gradient",x1:"109.67",y1:"100.08",x2:"116.19",y2:"100.08",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#ff7002"}),i.createElement("stop",{offset:"0.3",stopColor:"#fe7304"}),i.createElement("stop",{offset:"0.5",stopColor:"#fc7c0a"}),i.createElement("stop",{offset:"0.68",stopColor:"#f88b15"}),i.createElement("stop",{offset:"0.84",stopColor:"#f3a125"}),i.createElement("stop",{offset:"0.98",stopColor:"#ecbd39"}),i.createElement("stop",{offset:"1",stopColor:"#ebc03b"})),i.createElement("linearGradient",{id:"linear-gradient-2",x1:"87.16",y1:"100.17",x2:"93.67",y2:"100.17",xlinkHref:"#linear-gradient"}),i.createElement("linearGradient",{id:"linear-gradient-3",x1:"722.95",y1:"-1532.9",x2:"730.74",y2:"-1532.9",gradientTransform:"matrix(0.82, 0.57, -0.57, 0.82, -1410.27, 925.43)",xlinkHref:"#linear-gradient"}),i.createElement("linearGradient",{id:"linear-gradient-4",x1:"109.11",y1:"96.45",x2:"110.6",y2:"96.45",xlinkHref:"#linear-gradient"}),i.createElement("linearGradient",{id:"linear-gradient-5",x1:"93.41",y1:"87.65",x2:"110",y2:"87.65",xlinkHref:"#linear-gradient"})),i.createElement("g",{className:"cls-1"},i.createElement("g",{id:"Layer_1","data-name":"Layer 1"},i.createElement("polyline",{className:"cls-2",points:"90.7 88.96 82.2 88.96 82.2 54.97 120.72 54.97 120.72 88.96 112.77 88.96"}),i.createElement("g",{className:"cls-3"},i.createElement("path",{className:"cls-4",d:"M109.67,91.71s9,2.15,5.83,16.74l-5.64-4.51"})),i.createElement("path",{className:"cls-5",d:"M93.3,91.61s-9,2.68-5.21,17.12l5.58-4.67"}),i.createElement("path",{className:"cls-2",d:"M109.67,91.71s9,2.15,5.83,16.74l-5.64-4.51"}),i.createElement("path",{className:"cls-6",d:"M52.31,76.45l-.46,1.4c.36.65.59.65,1.32.75a10,10,0,0,0,9.13-3.94c.33-.42.42-.53.45-.91a5.64,5.64,0,0,0-.61-2.93l-.49-1s1.73,4.3-4.44,6.08S52.31,76.45,52.31,76.45Z"}),i.createElement("path",{className:"cls-6",d:"M78.84,115.2c0,2-12.69,3.67-28.35,3.67s-28.36-1.64-28.36-3.67c0-1.07,3.56-2,9.23-2.71.94-.11.82.57,1.1,1.6s1.25,2.32,2.4,2.24.2,2.59,6.86.67A6.84,6.84,0,0,0,45,114.07c.55-1.21.14-2.47.78-2.48,1.53,0,3.1,0,4.7,0,2.28,0,1,0,3.1.1.8,0,.53,2.34,1.79,3.74a9.92,9.92,0,0,0,5.43,2.55c1.63.1,4-1.4,5-1.8.52-.21,2.1-3.82,2.63-3.77C74.79,113,78.84,114.06,78.84,115.2Z"}),i.createElement("path",{className:"cls-2",d:"M27,55.14l.16-8a2.3,2.3,0,0,1,2.29-2.3l4.46-.09"}),i.createElement("line",{className:"cls-2",x1:"49.68",y1:"13.49",x2:"49.76",y2:"15.64"}),i.createElement("g",{className:"cls-3"},i.createElement("ellipse",{className:"cls-7",cx:"49.81",cy:"10.83",rx:"2.68",ry:"2.7"})),i.createElement("ellipse",{className:"cls-2",cx:"49.69",cy:"10.63",rx:"2.68",ry:"2.7"}),i.createElement("path",{className:"cls-2",d:"M66,79.27l.88,13.88.32,3.8.55,13.39a6.81,6.81,0,0,1-6.79,7h0a6.8,6.8,0,0,1-6.78-6.53L52.11,94a2.63,2.63,0,0,0-2.54-2.24h0a2.62,2.62,0,0,0-2.64,2.33l-1.55,16.49a6.81,6.81,0,0,1-6.8,6.83h0a6.81,6.81,0,0,1-6.79-6.83L32.7,80"}),i.createElement("path",{className:"cls-2",d:"M47.76,81.85c1,2.56,2.72,2.81,5.31,2.81a17.6,17.6,0,0,0,4.1-.93C71,78,74.72,72.84,75.35,65.82c.83-9.14-5.68-16-9.78-19.33"}),i.createElement("path",{className:"cls-2",d:"M66,59.62c-1.26,3.48-4.59,7.33-8.21,9.7"}),i.createElement("g",{className:"cls-3"},i.createElement("path",{className:"cls-8",d:"M51.64,72.62c.22-1.41,1.37-2.09,3.57-2.93,2.76-1,5.29-1,5.9.57s-.9,3.93-3.65,5c-1.88.72-3.41,1.44-4.6.87"})),i.createElement("path",{className:"cls-2",d:"M52.31,76.3a8.12,8.12,0,0,0,4.86-.58c3.06-1.24,5-3.52,4.4-5.09s-3.63-1.82-6.68-.58a8.82,8.82,0,0,0-3.47,2.29"}),i.createElement("path",{className:"cls-2",d:"M35.24,46.39l-2.68,1.73a28.66,28.66,0,0,0-8.83,20.11c-.06,2.76,2.11,12,19.69,14,.39,0,1.19,0,1.33,0,3.7,0,7.5-1.91,7.53-6.2A6.77,6.77,0,0,0,52,73.78c-.77-2.34-2.75-3.69-6.95-4.11-5.46-.55-8.76-4.2-10.54-4.8"}),i.createElement("path",{className:"cls-2",d:"M56.4,76.09s3.07,3.88,3.36,6.43"}),i.createElement("path",{className:"cls-2",d:"M59.5,74.66s2.93,3.67,3.22,6.21"}),i.createElement("path",{className:"cls-2",d:"M31.36,49.24a24,24,0,0,1,4,15.53"}),i.createElement("path",{className:"cls-2",d:"M34.69,46.66s5.41,7.21,4.16,20.19"}),i.createElement("path",{className:"cls-2",d:"M65,61.24S63.29,52.42,66.34,47"}),i.createElement("path",{className:"cls-2",d:"M62.58,64.92a20.29,20.29,0,0,1-1.42-14.41"}),i.createElement("ellipse",{className:"cls-2",cx:"50.27",cy:"34.81",rx:"18.93",ry:"19.02"}),i.createElement("path",{className:"cls-9",d:"M109.35,94.59s0,.07.12.07.12,0,.12-.07,0-.11-.13-.11S109.23,94.52,109.35,94.59Zm.86-4.11c.06-.24.19-.44.12-.2,0,0,0,.12-.09.22S110.12,90.7,110.21,90.48Zm.38,12s0,.12-.08.24h-.05l0-.11Zm-1.3-2.46s-.12,0-.12,0,0-.07.12,0S109.41,100,109.29,100Zm.08-.69s-.11,0-.11,0-.12,0-.13-.07,0,0,.12,0S109.37,99.3,109.37,99.34Zm.17-1.24h-.12s.11-.11.12-.07S109.54,98.06,109.54,98.1Zm-.2-3.76c-.11.07-.23.08-.23,0s.11-.11.23-.11Z"}),i.createElement("path",{className:"cls-10",d:"M109.78,91.56,109.67,85a16,16,0,0,0-6.4-12.62c-.6-.43-2-1.27-2-1.27h0c-.33.19-.65.39-1,.58a15.72,15.72,0,0,0-6.93,13.5l.12,6.89.21,12,8.13,0,8.13.08Zm-8,0A5.55,5.55,0,0,1,96,86.26a5.5,5.5,0,1,1,5.72,5.32Z"}),i.createElement("path",{className:"cls-6",d:"M109.35,94.59s0,.07.12.07.12,0,.12-.07,0-.11-.13-.11S109.23,94.52,109.35,94.59Zm.86-4.11c.06-.24.19-.44.12-.2,0,0,0,.12-.09.22S110.12,90.7,110.21,90.48Zm.38,12s0,.12-.08.24h-.05l0-.11Zm-1.3-2.46s-.12,0-.12,0,0-.07.12,0S109.41,100,109.29,100Zm.08-.69s-.11,0-.11,0-.12,0-.13-.07,0,0,.12,0S109.37,99.3,109.37,99.34Zm.17-1.24h-.12s.11-.11.12-.07S109.54,98.06,109.54,98.1Zm-.2-3.76c-.11.07-.23.08-.23,0s.11-.11.23-.11Z"}),i.createElement("path",{className:"cls-2",d:"M101.26,71.19c-.34.19-.65.38-1,.58a15.68,15.68,0,0,0-6.92,13.49l.12,6.9.2,12h8.13l8.13.07-.22-12.58-.11-6.53a15.91,15.91,0,0,0-6.4-12.61c-.6-.44-2-1.28-2-1.27Z"}),i.createElement("path",{className:"cls-2",d:"M93.3,91.61s-9,2.68-5.21,17.12l5.58-4.67"}),i.createElement("ellipse",{className:"cls-2",cx:"101.48",cy:"86.11",rx:"5.49",ry:"5.52",transform:"translate(-31.34 77.6) rotate(-36.65)"}),i.createElement("line",{className:"cls-2",x1:"53.44",y1:"74.03",x2:"57.46",y2:"72.05"}),i.createElement("rect",{className:"cls-2",x:"52.86",y:"56.87",width:"4.93",height:"5.07",rx:"0.43"}),i.createElement("polyline",{className:"cls-2",points:"106.25 104.11 107.06 107.76 96.56 107.76 97.37 104.11"}),i.createElement("path",{className:"cls-2",d:"M65.53,37.16c.19,6-6.32,12.84-14.6,13.1s-15.2-6.12-15.39-12.17,0-11,14.65-11.42C64.18,26.25,65.34,31.11,65.53,37.16Z"}),i.createElement("path",{className:"cls-2",d:"M69.65,31.59l2.71,1a1.46,1.46,0,0,1,.81,1.34v2.68a1.43,1.43,0,0,1-1,1.39l-2.79.85"}),i.createElement("path",{className:"cls-2",d:"M31.17,32.14l-2.64,1.21a1.46,1.46,0,0,0-.81,1.33v2.69a1.43,1.43,0,0,0,1,1.39l2.79.84"}),i.createElement("ellipse",{className:"cls-6",cx:"101.2",cy:"115.73",rx:"11.88",ry:"2.25"}),i.createElement("line",{className:"cls-2",x1:"115.8",y1:"59.91",x2:"89.91",y2:"59.91"}),i.createElement("line",{className:"cls-2",x1:"108.69",y1:"78.91",x2:"115.8",y2:"78.91"}),i.createElement("line",{className:"cls-2",x1:"89.91",y1:"78.91",x2:"94.47",y2:"78.91"}),i.createElement("line",{className:"cls-2",x1:"106.19",y1:"75.11",x2:"115.8",y2:"75.11"}),i.createElement("line",{className:"cls-2",x1:"95.2",y1:"75.11",x2:"96.59",y2:"75.11"}),i.createElement("line",{className:"cls-2",x1:"95.2",y1:"63.71",x2:"115.8",y2:"63.71"}),i.createElement("line",{className:"cls-2",x1:"105.65",y1:"67.51",x2:"115.8",y2:"67.51"}),i.createElement("line",{className:"cls-2",x1:"105.74",y1:"71.31",x2:"115.8",y2:"71.31"}),i.createElement("rect",{className:"cls-2",x:"90.93",y:"87.22",width:"2.5",height:"3.43"}),i.createElement("rect",{className:"cls-2",x:"109.93",y:"87.22",width:"2.5",height:"3.43"}),i.createElement("line",{className:"cls-11",x1:"90",y1:"61.46",x2:"90",y2:"77.32"}),i.createElement("polyline",{className:"cls-2",points:"99.65 85.19 97.57 86.33 99.59 87.3"}),i.createElement("polyline",{className:"cls-2",points:"103.34 87.3 105.42 86.16 103.4 85.19"}),i.createElement("line",{className:"cls-2",x1:"102",y1:"84.17",x2:"100.95",y2:"88.18"}),i.createElement("polygon",{className:"cls-2",points:"56.84 70.91 58.3 73.36 59.78 70.98 56.84 70.91"}))))}},6174:function(e,t,s){s.r(t),s.d(t,{ACTION_TYPE_DELETE:function(){return l},ACTION_TYPE_DOCUMENT:function(){return n},ACTION_TYPE_DOWNLOAD:function(){return a},ACTION_TYPE_MOCK:function(){return r},ACTION_TYPE_MONITOR:function(){return o},ACTION_TYPE_SAVE:function(){return i}});const i="save",o="monitor",n="document",r="mock",l="delete",a="download"},6176:function(e,t,s){s.r(t),s.d(t,{ACTION_TYPE_DELETE_REQUESTS_TOOLTIP:function(){return o},ACTION_TYPE_DELETE_REQUEST_TOOLTIP:function(){return i},ACTION_TYPE_SAVE_REQUESTS_TOOLTIP:function(){return r},ACTION_TYPE_SAVE_REQUEST_TOOLTIP:function(){return n}});const i="Delete request",o="Delete items",n="Add request to Collection",r="Add requests to Collection"},6177:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var i,o=s(1),n=s(1597),r=s.n(n),l=s(1593),a=s(1665),c=s(2437),d=s(1612),h=s(3504),p=s(6174),m=s(3355),u=s(2714),S=s(1013),g=s(3255),E=s(3240);const y="Not available to collection run items";let T=(0,l.observer)(i=class extends o.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this),this.handleShortcutSelect=this.handleShortcutSelect.bind(this),this.handleToggle=this.handleToggle.bind(this)}getKeymapHandlers(){return{delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,p.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){pm.mediator.trigger("focusSidebar"),this.handleSelect(e)}handleSelect(e){this.props.onSelect&&this.props.onSelect(e),this.handleToggle(!1)}handleToggle(e){this.props.onToggle&&this.props.onToggle(e)}getDropDownActionWrapperClasses(){return r()({"collection-sidebar-request-dropdown-actions-wrapper":!0})}getDisabledText(e){if(e)return(0,S.getStore)("OnlineStatusStore").userCanSave?u.DISABLED_TOOLTIP_NO_PERMISSION:u.DISABLED_TOOLTIP_IS_OFFLINE}render(){const e=h.default.pluralize({count:this.props.count,singular:"Request",plural:"Requests"}),t=(0,S.getStore)("PermissionStore"),{userCanSave:s}=(0,S.getStore)("OnlineStatusStore"),i=s&&t.can("delete","history");return o.createElement("div",{className:this.getDropDownActionWrapperClasses()},o.createElement(c.Dropdown,{keyMapHandlers:this.getKeymapHandlers(),ref:"menu",onSelect:this.handleSelect,onToggle:this.handleToggle,className:"collection-sidebar-request-actions-dropdown history-sidebar-multiple-request-selected-dropdown"},o.createElement(c.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},o.createElement(d.Button,{className:"history-sidebar-list-item__button__options",tooltip:g.ACTION_TYPE_VIEW_MORE_ACTIONS_TOOLTIP}," ",o.createElement(a.default,{name:"icon-action-options-stroke",className:"history-sidebar-list-item__actions__options pm-icon pm-icon-normal"}))),o.createElement(c.DropdownMenu,{"align-right":!0},o.createElement(c.MenuItem,{refKey:p.ACTION_TYPE_SAVE,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?y:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Save ${e}`)),o.createElement(c.MenuItem,{refKey:p.ACTION_TYPE_MONITOR,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?y:m.DISABLED_IN_SCRATCHPAD_TOOLTIP:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Monitor ${e}`)),o.createElement(c.MenuItem,{refKey:p.ACTION_TYPE_DOCUMENT,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?y:m.DISABLED_IN_SCRATCHPAD_TOOLTIP:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Document ${e}`)),o.createElement(c.MenuItem,{refKey:p.ACTION_TYPE_MOCK,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?y:m.DISABLED_IN_SCRATCHPAD_TOOLTIP:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Mock ${e}`)),"browser"!==window.SDK_PLATFORM&&o.createElement(c.MenuItem,{refKey:p.ACTION_TYPE_DOWNLOAD,disabled:!s||!this.props.disableRequestSpecificActions,disabledText:s?"You can only export collection runs":u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Export")),o.createElement(c.MenuItem,{refKey:p.ACTION_TYPE_DELETE,disabled:!i,disabledText:this.getDisabledText(!i)},o.createElement("div",{className:"dropdown-menu-item-label"},"Delete"),o.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,E.getShortcutByName)("delete"))))))}})||i},6185:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var i,o=s(1),n=s(4),r=s(1597),l=s.n(r),a=s(1665),c=s(2733),d=s.n(c),h=s(1593),p=s(1612),m=s(3506),u=s(1613),S=s(6174),g=s(2714),E=s(1013),y=s(6167);let T=(0,h.observer)(i=class extends o.Component{constructor(e){super(e),this.state={dropdownOpen:!1,isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleRemoveRun=this.handleRemoveRun.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"collectionrun"},t)}getClasses(){return l()({"history-sidebar-list-item":!0,"history-sidebar-list-item__collection":!0,"is-hovered":this.state.dropdownOpen,"is-selected":this.props.selected})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){this.props.onSelectAction(e,{runs:[this.props.id]})}handleRemoveRun(e){e.stopPropagation(),this.handleDropdownActionSelect(S.ACTION_TYPE_DELETE)}getTooltipText(e){return e?(0,E.getStore)("OnlineStatusStore").userCanSave?g.DISABLED_TOOLTIP_NO_PERMISSION:g.DISABLED_TOOLTIP_IS_OFFLINE:"Delete collection run"}getLeftAlignedComponents(e,t){const s=l()({"history-sidebar-list-item-updatedBy":!0,hovered:e});if(!e&&!t)return o.createElement("div",{className:"history-sidebar__indent"});const i=(0,E.getStore)("CurrentUserStore").teamMembers.get(this.props.owner),n=i&&(i.name||i.username);return o.createElement("div",{className:s,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.owner&&"0"!==this.props.owner?o.createElement(m.default,{ref:this.userAvatar,size:"small",userId:this.props.owner}):o.createElement(a.default,{name:"icon-descriptive-user-stroke",className:"pm-icon pm-icon-normal"}),this.userAvatar.current&&o.createElement(u.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(u.TooltipBody,null,o.createElement("div",null,o.createElement("div",null,n),o.createElement("div",null,d()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e,t){const s=l()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e&&!t)return null;const i=(0,E.getStore)("PermissionStore"),{userCanSave:n}=(0,E.getStore)("OnlineStatusStore"),r=n&&i.can("delete","collectionrun",this.props.id);return o.createElement("div",{className:s},o.createElement(p.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRun,disabled:!r,tooltip:this.getTooltipText(!r)},o.createElement(a.default,{name:"icon-action-delete-stroke",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}render(){return o.createElement(y.default,{"data-index":this.props.index,text:this.props.name,icon:"icon-action-run-stroke",isSelected:this.props.selected,onClick:this.handleSelect,className:this.getClasses(),rightMetaComponent:this.getRightAlignedComponents,leftMetaComponent:this.getLeftAlignedComponents})}})||i},6184:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var i=s(1);function o(e){return i.createElement("div",{className:"history-sidebar-list-item-group"},i.createElement("div",{className:"history-sidebar-list-item-group__error"},"Unable to load items."," ",i.createElement("span",{onClick:e.onRetry},"Retry")))}},6182:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var i,o=s(1),n=s(4),r=s(1597),l=s.n(r),a=s(2733),c=s.n(a),d=s(1593),h=s(1665),p=s(1612),m=s(2437),u=s(3506),S=s(1613),g=s(6167),E=s(6174),y=s(2714),T=s(3355),b=s(1013),f=s(6176),_=s(4781),I=s(3240);let v=(0,d.observer)(i=class extends o.Component{constructor(e){super(e),this.state={dropdownOpen:!1,isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddRequestToCollectionClick=this.handleAddRequestToCollectionClick.bind(this),this.handleRemoveRequest=this.handleRemoveRequest.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);if(!e)return;e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView()}}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"request"},t)}getClasses(){return l()({"history-sidebar-list-item":!0,"history-sidebar-list-item__request":!0,"is-hovered":this.state.dropdownOpen,"is-selected":this.props.selected})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){this.props.onSelectAction(e,{requests:[this.props.id],from:"history_single"})}handleAddRequestToCollectionClick(e){e.stopPropagation(),this.handleDropdownActionSelect(E.ACTION_TYPE_SAVE,{from:"history_single"})}handleRemoveRequest(e){e.stopPropagation(),this.handleDropdownActionSelect(E.ACTION_TYPE_DELETE)}getTooltipText(e,t){return e?t?y.DISABLED_TOOLTIP_IS_OFFLINE:y.DISABLED_TOOLTIP_NO_PERMISSION:f.ACTION_TYPE_DELETE_REQUEST_TOOLTIP}getDisabledText(e,t){if(e)return t?y.DISABLED_TOOLTIP_IS_OFFLINE:y.DISABLED_TOOLTIP_NO_PERMISSION}getLeftAlignedComponents(e,t){const s=l()({"history-sidebar-list-item-updatedBy":!0,hovered:e});if(!e&&!t)return o.createElement("div",{className:"history-sidebar__indent"});const i=(0,b.getStore)("CurrentUserStore").teamMembers.get(this.props.lastUpdatedBy),n=i&&(i.name||i.username);return o.createElement("div",{className:s,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.lastUpdatedBy&&"0"!==this.props.lastUpdatedBy?o.createElement(u.default,{ref:this.userAvatar,size:"small",userId:this.props.lastUpdatedBy}):o.createElement(h.default,{name:"icon-descriptive-user-stroke",className:"pm-icon pm-icon-normal"}),this.userAvatar.current&&o.createElement(S.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(S.TooltipBody,null,o.createElement("div",null,o.createElement("div",null,n),o.createElement("div",null,c()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e,t){const s=l()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e&&!t)return null;const i=(0,b.getStore)("PermissionStore"),{userCanSave:n}=(0,b.getStore)("OnlineStatusStore"),r=n&&i.can("delete","history",this.props.id);return o.createElement("div",{className:s},o.createElement(p.Button,{className:"history-sidebar-list-item__button__add",type:"icon",onClick:this.handleAddRequestToCollectionClick,disabled:!n,tooltip:n?f.ACTION_TYPE_SAVE_REQUEST_TOOLTIP:y.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement(h.default,{size:"large",name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),o.createElement(p.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRequest,disabled:!r,tooltip:this.getTooltipText(!r,!n)},o.createElement(h.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}getActionsMenuItems(e){const{userCanSave:t,userCanSaveAndSync:s}=(0,b.getStore)("OnlineStatusStore");return o.createElement(m.DropdownMenu,{"align-right":!0},o.createElement(m.MenuItem,{refKey:E.ACTION_TYPE_SAVE,disabled:!t,disabledText:y.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Save Request")),o.createElement(m.MenuItem,{refKey:E.ACTION_TYPE_MONITOR,disabled:!s,disabledText:t?T.DISABLED_IN_SCRATCHPAD_TOOLTIP:y.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Monitor Request")),o.createElement(m.MenuItem,{refKey:E.ACTION_TYPE_DOCUMENT,disabled:!s,disabledText:t?T.DISABLED_IN_SCRATCHPAD_TOOLTIP:y.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Document Request")),o.createElement(m.MenuItem,{refKey:E.ACTION_TYPE_MOCK,disabled:!s,disabledText:t?T.DISABLED_IN_SCRATCHPAD_TOOLTIP:y.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Mock Request")),o.createElement(m.MenuItem,{refKey:E.ACTION_TYPE_DELETE,disabled:!t||!e,disabledText:this.getDisabledText(!e,!t)},o.createElement("div",{className:"dropdown-menu-item-label"},"Delete"),o.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,I.getShortcutByName)("delete"))))}render(){const e=(0,b.getStore)("PermissionStore").can("delete","history",this.props.id);return o.createElement(g.default,{"data-index":this.props.index,text:this.props.url,onClick:this.handleSelect,isSelected:this.props.selected,icon:o.createElement(_.default,{method:this.props.method||"GET"}),className:this.getClasses(),moreActions:this.getActionsMenuItems(e),rightMetaComponent:this.getRightAlignedComponents,leftMetaComponent:this.getLeftAlignedComponents,onActionsDropdownSelect:this.handleDropdownActionSelect})}})||i},6183:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=s(1),o=s(1597),n=s.n(o),r=s(1665),l=s(1612),a=s(6174),c=s(2714),d=s(1013),h=s(6176),p=s(6177),m=s(21);class u extends i.PureComponent{constructor(e){super(e),this.state={dropdownOpen:!1,isHovered:!1},this.store=(0,d.getStore)("HistorySidebarStore"),this.handleToggleGroup=this.handleToggleGroup.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddRequestToCollectionClick=this.handleAddRequestToCollectionClick.bind(this),this.handleRemoveRequest=this.handleRemoveRequest.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState({isHovered:!0})}handleMouseLeave(){!this.state.dropdownOpen&&this.setState({isHovered:!1})}getCollapseButtonClasses(){return n()({caret:!0,"pm-icon":!0,"pm-icon-normal":!0,"is-closed":this.store.isItemCollapsed(this.props.name)})}getMetaClasses(){return n()({"history-sidebar-list-item-group__meta":!0,"is-hovered":this.state.dropdownOpen})}handleToggleGroup(){const{name:e}=this.props;if(this.store.isItemCollapsed(e))return this.store.expandItem(e);this.store.collapseItem(e)}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){const t={requests:m.reduce(this.props.items,((e,t)=>("request"===t.type&&e.push(t.id),e)),[]),runs:m.reduce(this.props.items,((e,t)=>("collectionrun"===t.type&&e.push(t.id),e)),[]),websockethistory:m.reduce(this.props.items,((e,t)=>("websockethistory"===t.type&&e.push(t.id),e)),[]),defaultCollectionName:this.props.name,from:"history_date_group"};e!==a.ACTION_TYPE_DELETE?this.props.onSelectAction(e,t):pm.mediator.trigger("showDeleteHistoryModal",(()=>{this.props.onSelectAction(e,t)}),{identifier:"selected"})}handleAddRequestToCollectionClick(e){e.stopPropagation(),this.handleDropdownActionSelect(a.ACTION_TYPE_SAVE)}handleRemoveRequest(e){e.stopPropagation(),this.handleDropdownActionSelect(a.ACTION_TYPE_DELETE)}render(){const e=m.size(this.store.getSelectedItems())>1,{userCanSave:t}=(0,d.getStore)("OnlineStatusStore");return i.createElement("div",{className:"history-sidebar-list-item-group",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{className:this.getMetaClasses(),onClick:this.handleToggleGroup},i.createElement("div",{className:"history-sidebar-list-item-group__name"},i.createElement(r.default,{name:"icon-direction-down",className:this.getCollapseButtonClasses()}),i.createElement("span",null,this.props.name)),!e&&this.state.isHovered&&i.createElement("div",{className:"history-sidebar-list-item-group__actions"},i.createElement(l.Button,{className:"history-sidebar-list-item__button__add",type:"icon",disabled:!t||this.props.disableRequestSpecificActions,onClick:this.handleAddRequestToCollectionClick,tooltip:t?this.props.disableRequestSpecificActions?"Not available to collection run items":h.ACTION_TYPE_SAVE_REQUESTS_TOOLTIP:c.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(r.default,{name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),i.createElement(l.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRequest,disabled:!t,tooltip:t?h.ACTION_TYPE_DELETE_REQUESTS_TOOLTIP:c.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(r.default,{name:"icon-action-delete-stroke",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})),i.createElement(p.default,{count:m.size(this.props.items),onSelect:this.handleDropdownActionSelect,onToggle:this.handleDropdownToggle,disableRequestSpecificActions:this.props.disableRequestSpecificActions}))))}}},6173:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var i,o=s(1),n=s(4),r=s(2438),l=s.n(r),a=s(2338),c=s(1982),d=s(6174),h=s(1013),p=s(6175),m=s(6178),u=s(21);let S=l()(i=class extends o.Component{constructor(e){super(e),this.store=(0,h.getStore)("HistorySidebarStore"),this.historyStore=(0,h.getStore)("HistoryStore"),this.focus=this.focus.bind(this),this.groupItems=this.groupItems.bind(this),this.selectNext=this.selectNext.bind(this),this.selectPrev=this.selectPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.selectItem=this.selectItem.bind(this),this.multiselectNextItem=this.multiselectNextItem.bind(this),this.multiselectPrevItem=this.multiselectPrevItem.bind(this)}getKeyMapHandlers(){return{groupItems:pm.shortcuts.handle("groupItems",this.groupItems),nextItem:pm.shortcuts.handle("nextItem",this.selectNext),prevItem:pm.shortcuts.handle("prevItem",this.selectPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),multiselectNextItem:pm.shortcuts.handle("multiselectNextItem",this.multiselectNextItem),multiselectPrevItem:pm.shortcuts.handle("multiselectPrevtItem",this.multiselectPrevItem),select:pm.shortcuts.handle("select",this.selectItem),search:pm.shortcuts.handle("search"),saveCurrentRequest:e=>{e&&e.stopPropagation(),this.props.onSaveCurrentRequest()}}}focus(){const e=(0,n.findDOMNode)(this.refs.history);e&&e.focus()}selectNext(e){e&&e.preventDefault();const t=this.store.getNextItem();t&&u.invoke(this,"props.onSelect",t)}selectPrev(e){e&&e.preventDefault();const t=this.store.getPrevItem();t&&u.invoke(this,"props.onSelect",t)}deleteItem(e){if(document.activeElement.classList.contains("history-sidebar__filter"))return;e&&e.preventDefault();const t=this.store.getPrevItem();u.invoke(this,"props.onDeleteMultiple","selected",t)}selectItem(e){e&&e.preventDefault(),u.invoke(this,"refs.list.selectItem")}multiselectNextItem(e){e&&e.preventDefault();const t=this.store.getNextItem();t&&u.invoke(this,"props.onSelect",t,{metaKey:!0})}multiselectPrevItem(e){e&&e.preventDefault();const t=this.store.getPrevItem();t&&u.invoke(this,"props.onSelect",t,{metaKey:!0})}groupItems(){this.props.onSelectAction&&this.props.onSelectAction("all",d.ACTION_TYPE_SAVE,{requests:this.store.getSelectedItems(),from:"history_multiple"})}render(){return o.createElement(a.default,{handlers:this.getKeyMapHandlers(),keyMap:pm.shortcuts.getShortcuts()},o.createElement("div",{className:"history-sidebar",ref:"history"},o.createElement("div",{className:"history-sidebar-wrapper"},o.createElement(p.default,{historySidebar:this.store,historyStore:this.historyStore,enableHistoryResponseSaving:this.props.enableHistoryResponseSaving,onDeleteMultiple:this.props.onDeleteMultiple,onSelectAction:this.props.onSelectAction.bind(this,"all"),onToggleHistoryResponseSaving:this.props.onToggleHistoryResponseSaving}),o.createElement(c.default,{identifier:"history"},o.createElement(m.default,{ref:"list",initializing:this.props.initializing,isSocketConnected:this.props.isSocketConnected,isLoggedIn:this.props.isLoggedIn,workspace:this.props.workspace,onDeleteMultiple:this.props.onDeleteMultiple,onLoadMore:this.props.onLoadMore,onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction})))))}})||i},6172:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var i,o=s(1),n=s(1614),r=s.n(n),l=s(1593),a=s(1013),c=s(1012),d=s(1450),h=s(6173),p=s(1558),m=s(4937),u=s(2790),S=s(2713),g=s(1580),E=s(6174),y=s(4038),T=s(3510),b=s(21);let f=r()(i=(0,l.observer)(i=class extends o.Component{constructor(e){super(e),this.store=(0,a.getStore)("HistorySidebarStore"),this.focus=this.focus.bind(this),this.handleLoadRequestDebounced=b.debounce(this.handleLoadRequest,100,{leading:!0}).bind(this),this.handleLoadCollectionRunDebounced=b.debounce(this.handleLoadCollectionRun,100,{leading:!0}).bind(this),this.handleLoadWebSocketHistoryDebounced=b.debounce(this.handleLoadWebSocketHistory,100,{leading:!0}).bind(this),this.handleActiveRequestChange=this.handleActiveRequestChange.bind(this),this.handleAddToCollection=this.handleAddToCollection.bind(this),this.handleDeleteMultiple=this.handleDeleteMultiple.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleSelectAction=this.handleSelectAction.bind(this),this.handleSelectHistoryAction=this.handleSelectHistoryAction.bind(this),this.handleSelectCollectionRunAction=this.handleSelectCollectionRunAction.bind(this),this.handleSelectWebSocketHistoryAction=this.handleSelectWebSocketHistoryAction.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("activeRequestChanged",this.handleActiveRequestChange)}componentWillUnmount(){pm.mediator.off("activeRequestChanged",this.handleActiveRequestChange)}focus(){b.invoke(this,"refs.history.focus")}selectNext(){b.invoke(this,"refs.history.selectNext")}handleActiveRequestChange(e){this.store.itemExists(e)?this.store.resetSelection([e]):this.store.resetSelection()}handleClickOutside(e){if(!b.isEmpty(this.store.getSelectedItems())){const t=document.getElementsByClassName("ReactModal__Content")[0],s=document.querySelector(".history-sidebar-multiple-request-selected-dropdown");if(t&&t.contains(e.target)||s&&s.contains(e.target))return;this.store.resetSelection()}}handleLoadRequest(e,t=!1){e&&p.default.openHistoryInTab(e,{newTab:t,preview:!0})}handleLoadCollectionRun(e,t=!1){if(!e)return;const{uid:s}=(0,a.getStore)("RunnerRunStore").find(e)||{};(0,u.openRunInTab)(s,{newTab:t,preview:!t})}handleLoadWebSocketHistory(e,t=!1){e&&(0,y.openWebSocketHistoryTab)(e,{forceNew:t,preview:!t})}handleItemSelect({id:e,type:t},s={}){const i=b.includes(navigator.platform,"Mac");s.shiftKey&&(i?s.metaKey:s.ctrlKey)?("collectionrun"===t?this.handleLoadCollectionRunDebounced(e,!0):"websockethistory"===t?this.handleLoadWebSocketHistoryDebounced(e,!0):this.handleLoadRequestDebounced(e,!0),pm.mediator.trigger("focusSidebar")):s.ctrlKey||s.metaKey?this.store.isItemSelected(e)?this.store.unselectItem(e):this.store.selectItem(e):("collectionrun"===t?this.handleLoadCollectionRunDebounced(e,!1):"websockethistory"===t?this.handleLoadWebSocketHistoryDebounced(e,!1):this.handleLoadRequestDebounced(e,!1),pm.mediator.trigger("focusSidebar"),this.store.resetSelection([e]))}handleAddToCollection(e={}){const{requests:t}=e,s=b.isEmpty(t)?this.store.getSelectedItems():t;b.isEmpty(s)||p.default.convertHistoryToRequests(s).then((t=>{1===b.size(t)?t[0]&&pm.mediator.trigger("showAddToCollectionModal",t[0],{from:e.from}):pm.mediator.trigger("addRequestsToCollection",t,e)}))}handleToggleHistoryResponseSaving(){if(!(0,g.isWorkspaceMember)())return(0,g.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,g.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:"history_save_response"});const e=(0,a.getStore)("ActiveWorkspaceStore").settings,t={enableHistoryResponseSaving:!(e&&e.enableHistoryResponseSaving)};return(0,d.default)((0,c.createEvent)("updateSettings","workspace",{id:(0,a.getStore)("ActiveWorkspaceStore").id,settings:t})).catch((e=>{const t=e.isFriendly?e.message:"Could not update workspace settings";pm.toasts.error(t,{dedupeId:"ws-settings-error"})}))}resetHistorySelection(e){e&&e.id?this.store.resetSelection([e.id]):this.store.resetSelection()}handleDeleteMultiple(e,t){const s=(0,a.getStore)("PermissionStore"),i=(0,a.getStore)("RunnerRunStore");return(0,g.isWorkspaceMember)()?(0,a.getStore)("OnlineStatusStore").userCanSave?Promise.resolve().then((()=>{"all"===e?((0,d.default)((0,c.createEvent)("deleteAllInWorkspace","history",(0,a.getStore)("ActiveWorkspaceStore").id)),i.deleteRun(b.map(i.values,(e=>e.id))),(0,y.deleteWebSocketHistory)()):"selected"===e&&(s.can("delete","history")?(0,d.default)((0,c.createEvent)("deleteMultiple","history",{ids:this.store.getSelectedItems()},null,null)):pm.toasts.error("You do not have permissions to delete history."),s.can("delete","collectionrun")?(0,a.getStore)("RunnerRunStore").deleteRun(this.store.getSelectedItems()):pm.toasts.error("You do not have permissions to delete collection runs."),(0,y.deleteWebSocketHistory)(this.store.getSelectedItems()))})).then((()=>{this.resetHistorySelection(t)})).catch((()=>{this.resetHistorySelection(t)})):(0,S.showOfflineActionDisabledToast)():(0,g.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,g.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:"history_delete_multiple"})}handleAddRequestToService(e,t){const{requests:s,defaultCollectionName:i="",from:o=""}=e,n=b.isEmpty(s)?this.store.getSelectedItems():s;b.isEmpty(n)||p.default.convertHistoryToRequests(n).then((e=>{if(!b.isEmpty(e)){const s={name:i,from:o};m.default.create(t,{requests:e,opts:s},null,{from:"history_sidebar"})}}))}handleSelectHistoryAction(e,t){switch(e){case E.ACTION_TYPE_SAVE:if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,S.showOfflineActionDisabledToast)();this.handleAddToCollection(t);break;case E.ACTION_TYPE_MONITOR:this.handleAddRequestToService(t,"openCreateNewMonitorModal");break;case E.ACTION_TYPE_DOCUMENT:this.handleAddRequestToService(t,"openCreateNewDocumentationModal");break;case E.ACTION_TYPE_MOCK:this.handleAddRequestToService(t,"openCreateNewMockModal");break;case E.ACTION_TYPE_DELETE:if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,S.showOfflineActionDisabledToast)();(0,d.default)((0,c.createEvent)("deleteMultiple","history",{ids:t.requests},null,null))}}handleSelectCollectionRunAction(e,t){switch(e){case E.ACTION_TYPE_DELETE:if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,S.showOfflineActionDisabledToast)();(0,a.getStore)("RunnerRunStore").deleteRun(t.runs);break;case E.ACTION_TYPE_DOWNLOAD:return(0,T.exportRuns)(t.runs);default:pm.logger.warn(`HistorySidebarContainer~handleSelectCollectionRunAction: ${e} - action not handled`)}}handleSelectWebSocketHistoryAction(e,t){if(e===E.ACTION_TYPE_DELETE){if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,S.showOfflineActionDisabledToast)();(0,y.deleteWebSocketHistory)(t.websockethistory)}}handleSelectAction(e,t,s){return(0,g.isWorkspaceMember)()?"collectionrun"===e?(1===b.size(s.runs)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.runs[0]),s.runs&&this.handleSelectCollectionRunAction(t,s)):"websockethistory"===e?(1===b.size(s.websockethistory)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.websockethistory[0]),s.websockethistory&&this.handleSelectWebSocketHistoryAction(t,s)):"request"===e?(1===b.size(s.requests)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.requests[0]),this.handleSelectHistoryAction(t,s)):void("all"===e&&(s.runs&&this.handleSelectCollectionRunAction(t,s),s.requests&&this.handleSelectHistoryAction(t,s),s.websockethistory&&this.handleSelectWebSocketHistoryAction(t,s))):(0,g.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,g.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:`history_${t}`})}render(){const e=(0,a.getStore)("ActiveWorkspaceStore").settings,t=(0,a.getStore)("SyncStatusStore"),s=(0,a.getStore)("CurrentUserStore"),i=(0,a.getStore)("HistoryStore"),n=(0,a.getStore)("ActiveWorkspaceStore"),r=e&&e.enableHistoryResponseSaving;return o.createElement(h.default,{store:this.store,enableHistoryResponseSaving:r,initializing:s.isHydrating||i.isHydrating||!n.id,isLoggedIn:s.isLoggedIn,isSocketConnected:t.isSocketConnected,workspace:n.id,onSelectAction:this.handleSelectAction,onDeleteMultiple:this.handleDeleteMultiple,onSelect:this.handleItemSelect,onSaveCurrentRequest:this.handleAddToCollection,onToggleHistoryResponseSaving:this.handleToggleHistoryResponseSaving,ref:"history"})}})||i)||i},6186:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i=s(1),o=s(1612);function n(e){return i.createElement("div",{className:"history-sidebar-list-error"},i.createElement("h4",null,"Couldn't load history"),i.createElement("p",null,"Something went wrong while trying to load history items. Check your internet and try again."),i.createElement(o.Button,{type:"secondary",onClick:e.onRetry},"Retry"))}},6178:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var i,o=s(1),n=s(1593),r=s(2424),l=s(4051),a=s(2345),c=s(4801),d=s(1665),h=s(1612),p=s(3504),m=s(1013),u=s(6179),S=s(6181),g=s(6136),E=s(6182),y=s(6183),T=s(6184),b=s(6185),f=s(6186),_=s(4767),I=s(21);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},v.apply(this,arguments)}let C=(0,n.observer)(i=class extends o.Component{constructor(e){super(e),this.store=(0,m.getStore)("HistorySidebarStore"),this.requesterSidebarStore=(0,m.getStore)("RequesterSidebarStore"),this.handleToggleGroup=this.handleToggleGroup.bind(this),this.getListItem=this.getListItem.bind(this),this.getItemSize=this.getItemSize.bind(this),this.handleClearCachedHeight=this.handleClearCachedHeight.bind(this),this.observeSizeChange=this.observeSizeChange.bind(this),this.unobserveSizeChange=this.unobserveSizeChange.bind(this),this.handleItemsRender=this.handleItemsRender.bind(this),this.handleItemsRenderDebounced=I.debounce(this.handleItemsRender,1e3),this.handleListScroll=this.handleListScroll.bind(this),this.handleListScrollDebounced=I.debounce(this.handleListScroll,300),this.handleJumpToTop=this.handleJumpToTop.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.heightSet={},this.resizeObserver=new ResizeObserver((e=>{for(const t of e){if(!(t&&t.target&&t.target.dataset))return;const{index:e}=t.target.dataset;this.heightSet[e]=t.target.offsetHeight}this.handleClearCachedHeight(0)}))}componentDidMount(){this.props.initializing||this.store.load()}componentDidUpdate(e){this.props.initializing||(e.initializing?this.store.load():(this.props.workspace!==e.workspace||this.props.isLoggedIn&&!e.isLoggedIn)&&(this.store.load(),this.listRef&&this.listRef.scrollTo(0),this.store.setScrollOffset(0)))}observeSizeChange(e){this.resizeObserver&&this.resizeObserver.observe(e)}unobserveSizeChange(e,t){this.resizeObserver&&this.resizeObserver.unobserve(e),delete this.heightSet[t]}handleClearCachedHeight(e){this.listRef.resetAfterIndex(e)}handleToggleGroup(e){if(this.store.isItemCollapsed(e))return this.store.expandItem(e);this.store.collapseItem(e)}getItemSize(e){const t=I.get(this.store,["historyItems",e]);return"meta"===t.type||"error"===t.type?28:this.heightSet[e]||28}getListItem(e){const t=I.get(this.store,["historyItems",e.index]);return t?"loading"===t.type?o.createElement("div",{className:"history-list__loading",style:e.style,key:t.key},o.createElement(a.default,null)):"error"===t.type?o.createElement("div",{className:"history-list__error",style:e.style},o.createElement(T.default,{key:t.name,onRetry:()=>"load-error"===t.key?this.store.load(!0):"load-more-error"===t.key?this.store.loadMore():void 0})):"meta"===t.type?o.createElement("div",{className:"history-list__meta",style:e.style},o.createElement(y.default,{name:t.name,key:t.name,onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"all"),items:t.items,disableRequestSpecificActions:t.disableRequestSpecificActions})):"collectionrun"===t.type?o.createElement("div",{className:"history-list__collection-run",style:e.style},o.createElement(b.default,v({},t,{name:t.name,hideActions:I.size(this.store.getSelectedItems())>1,key:t.id,selected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"collectionrun"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):"websockethistory"===t.type?o.createElement("div",{className:"history-list__websocket",style:e.style},o.createElement(S.default,v({},t,{key:t.id,isSelected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"websockethistory"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):o.createElement("div",{className:"history-list__item",style:e.style},o.createElement(E.default,v({},t,{hideActions:I.size(this.store.getSelectedItems())>1,key:t.id,selected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"request"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,viewLargeBody:this.props.viewLargeBody,index:e.index}))):null}getNotification(){return this.store.showReloadNotification?o.createElement("div",{className:"history-sidebar-list__notification"},o.createElement(h.Button,{type:"primary",size:"small",className:"history-sidebar-list__refresh",onClick:this.handleRefresh},o.createElement(d.default,{name:"icon-action-refresh-stroke",color:"content-color-primary",size:"small",className:"pm-icon"}),"Refresh")):this.store.newHistoryIds.size?o.createElement("div",{className:"history-sidebar-list__notification"},o.createElement(h.Button,{type:"primary",size:"small",className:"history-sidebar-list__more-on-top",onClick:this.handleJumpToTop},o.createElement(d.default,{name:"icon-direction-up",color:"content-color-primary",size:"small",className:"pm-icon"}),o.createElement("span",null,this.store.newHistoryIds.size," ","new"," ",p.default.pluralize({count:this.store.newHistoryIds.size,singular:"item",plural:"items"})))):null}handleListScroll({scrollOffset:e}){0===e&&this.store.newHistoryIds.size&&this.store.showNewHistory(),this.store.setScrollOffset(e)}handleItemsRender(e){this.store.scrolledToEnd||this.store.loadingMore||this.requesterSidebarStore.query||e.overscanStopIndex===e.visibleStopIndex&&this.store.loadMore()}handleJumpToTop(){this.listRef&&this.listRef.scrollTo(0)}handleRefresh(){this.listRef&&this.listRef.scrollTo(0),this.store.load(!0)}render(){const e=e=>o.createElement(n.Observer,null,this.getListItem.bind(this,e)),t=({height:t,width:s})=>o.createElement(n.Observer,null,(()=>o.createElement(r.VariableSizeList,{height:t,itemCount:this.store.historyItems.length,itemSize:this.getItemSize,width:s,ref:e=>{this.listRef=e},overscanCount:10,onItemsRendered:this.handleItemsRenderDebounced,onScroll:this.handleListScrollDebounced},e)));return I.isEmpty(this.store.historyItems)?this.props.initializing||this.store.loading?o.createElement("div",{className:"history-sidebar-list"},o.createElement(_.default,{hasHierarchy:!0})):this.store.loadError?"You don't have permission to view history in this workspace"===this.store.loadError.message?o.createElement("div",{className:"history-sidebar-list-permission-error"},o.createElement(g.default,{illustration:o.createElement(c.default,null),title:"You don't have permission to view history",message:"Only team members can view history of this workspace"})):o.createElement("div",{className:"history-sidebar-list"},o.createElement(f.default,{onRetry:()=>this.store.load(!0)})):o.createElement("div",{className:"history-sidebar-list"},o.createElement(u.default,{query:this.store.searchQuery})):o.createElement("div",{className:"history-sidebar-list",ref:"history"},this.getNotification(),o.createElement(l.default,null,t))}})||i},6179:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var i,o=s(1),n=s(1593),r=s(6180),l=s(2728),a=s(1221),c=s(6136),d=s(6137);let h=(0,n.observer)(i=class extends o.Component{constructor(e){super(e),this.handleShowMeHow=this.handleShowMeHow.bind(this)}handleShowMeHow(){(0,a.openExternalLink)(l.SEND_FIRST_REQUEST_DOCS,"_blank")}render(){return this.props.query?o.createElement(d.default,{searchQuery:this.props.query,illustration:o.createElement(r.default,null)}):o.createElement(c.default,{illustration:o.createElement(r.default,null),title:"You haven't sent any requests.",message:"Any request you send in this workspace will appear here.",action:{label:"Show me how",handler:this.handleShowMeHow}})}})||i},6175:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var i,o=s(1),n=s(1597),r=s.n(n),l=s(1593),a=s(2347),c=s(1665),d=s(1612),h=s(3383),p=s(2437),m=s(1613),u=s(2713),S=s(6174),g=s(3510),E=s(1013),y=s(6148),T=s(6176),b=s(6177),f=s(21);let _=(0,l.observer)(i=class extends o.Component{constructor(e){super(e),this.state={dropdownOpen:!1,showResponseToggleTooltip:!1},this.handleDeleteClick=this.handleDeleteClick.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddToCollectionClick=this.handleAddToCollectionClick.bind(this),this.handleDeleteSelected=this.handleDeleteSelected.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.handleActionsDropdownSelect=this.handleActionsDropdownSelect.bind(this),this.handleSaveResponseToggle=this.handleSaveResponseToggle.bind(this),this.showResponseToggleTooltip=this.showResponseToggleTooltip.bind(this),this.hideResponseToggleTooltip=this.hideResponseToggleTooltip.bind(this),this.disableRequestItemOptions=this.disableRequestItemOptions.bind(this)}handleAddToCollectionClick(e){e.stopPropagation(),this.props.onSelectAction(S.ACTION_TYPE_SAVE,{requests:this.props.historySidebar.getSelectedItems(),from:"history_multiple"})}handleDeleteClick(){pm.mediator.trigger("showDeleteHistoryModal",(async()=>{try{this.props.onDeleteMultiple&&await this.props.onDeleteMultiple("all")}catch(e){pm.logger.error("Could not delete history",e),pm.toasts.error("Could not delete history")}}),{identifier:"all"})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){return e===S.ACTION_TYPE_DELETE?(0,E.getStore)("OnlineStatusStore").userCanSave?void pm.mediator.trigger("showDeleteHistoryModal",(()=>{this.props.onDeleteMultiple("selected")}),{identifier:"selected"}):(0,u.showOfflineActionDisabledToast)():e===S.ACTION_TYPE_DOWNLOAD?(0,g.exportRuns)(this.props.historySidebar.getSelectedItems()):void this.props.onSelectAction(e,{requests:this.props.historySidebar.getSelectedItems(),from:"history_multiple"})}handleActionsDropdownSelect(e){if("history-sidebar--clear-all"===e)this.handleDeleteClick()}handleDeleteSelected(){this.handleDropdownActionSelect(S.ACTION_TYPE_DELETE)}disableRequestItemOptions(){const e=f.filter(this.props.historySidebar.historyItems,(e=>this.props.historySidebar.selectedItems.has(e.id)&&"request"===e.type));return f.isEmpty(e)}showResponseToggleTooltip(){this.setState({showResponseToggleTooltip:!0})}hideResponseToggleTooltip(){this.setState({showResponseToggleTooltip:!1})}handleSaveResponseToggle(e){e&&e.stopPropagation(),this.props.onToggleHistoryResponseSaving&&this.props.onToggleHistoryResponseSaving()}handleSearchChange(e){this.props.historySidebar.setSearchQuery(e)}getToggleSaveResponseClasses(e){return r()({"dropdown-menu-item history-sidebar-menu__actions-save-response-toggle":!0,"is-disabled":e})}render(){const e=this.props.historySidebar.selectedItems.size,{isLoggedIn:t}=(0,E.getStore)("CurrentUserStore"),{isOffline:s,userCanSave:i}=(0,E.getStore)("OnlineStatusStore"),n=s&&t,r=!(0,E.getStore)("PermissionStore").can("editMeta","workspace",(0,E.getStore)("ActiveWorkspaceStore").id);return e>1?o.createElement("div",{className:"history-sidebar-menu multiple-request-selected"},o.createElement("div",{className:"history-sidebar-menu__left"},o.createElement(a.default,{type:"body-small",color:"content-color-primary"},e," ","items selected")),o.createElement("div",{className:"history-sidebar-menu__right"},o.createElement("div",{className:"history-sidebar-menu__actions-delete-history-wrapper"},o.createElement(d.Button,{disabled:!i,className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleDeleteSelected,tooltip:T.ACTION_TYPE_DELETE_REQUESTS_TOOLTIP},o.createElement(c.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})),o.createElement(b.default,{count:e,onSelect:this.handleDropdownActionSelect,onToggle:this.handleDropdownToggle,disableRequestSpecificActions:this.disableRequestItemOptions()})))):o.createElement("div",{className:"history-sidebar-menu"},o.createElement(y.default,{className:"history-sidebar__filter",onSearch:this.handleSearchChange,onActionsDropdownSelect:this.handleActionsDropdownSelect,searchQuery:this.props.historySidebar.searchQuery,moreActions:o.createElement(p.DropdownMenu,{className:"history-sidebar__header-actions-dropdown--menu"},!f.isEmpty(this.props.historySidebar.historyItems)&&o.createElement(p.MenuItem,{className:"history-sidebar__header-actions-dropdown--menu-item history-sidebar-menu__actions-delete-history-wrapper",key:"history-sidebar--clear-all",refKey:"history-sidebar--clear-all",disabled:n,disabledText:"You need to be online to clear history."},o.createElement("span",null,"Clear all")),o.createElement("div",{className:this.getToggleSaveResponseClasses(r),onClick:r?void 0:this.handleSaveResponseToggle,ref:e=>{this.saveResponseToggleContainerRef=e},onMouseEnter:this.showResponseToggleTooltip,onMouseLeave:this.hideResponseToggleTooltip},"Save Responses",o.createElement(h.default,{isActive:this.props.enableHistoryResponseSaving,activeLabel:"",inactiveLabel:""}),o.createElement(m.Tooltip,{className:"history-sidebar-menu--save-response__tooltip",show:this.state.showResponseToggleTooltip,target:this.saveResponseToggleContainerRef},o.createElement(m.TooltipBody,null,r?"You don’t have permission to take this action.":"When turned off, the response headers and body won't be saved, though the response code, time, size, and language will be saved for reporting purposes."))))}))}})||i},6181:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var i,o=s(1),n=s(4),r=s(2733),l=s.n(r),a=s(1597),c=s.n(a),d=s(2347),h=s(2722),p=s(1665),m=s(1593),u=s(3506),S=s(1613),g=s(6167),E=s(1013),y=s(6174),T=s(2714);let b=(0,m.observer)(i=class extends o.Component{constructor(e){super(e),this.state={isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleAction=this.handleAction.bind(this),this.handleDelete=this.handleDelete.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}getClasses(){return c()({"history-sidebar-list-item":!0,"history-sidebar-list-item__websocket-history":!0,"is-selected":this.props.selected})}getTooltipText(e,t){return e?t?T.DISABLED_TOOLTIP_IS_OFFLINE:T.DISABLED_TOOLTIP_NO_PERMISSION:"Delete history"}getLeftAlignedComponents(e){if(!e)return o.createElement("div",{className:"history-sidebar__indent"});const t=c()({"history-sidebar-list-item-updatedBy":!0,hovered:e}),s=(0,E.getStore)("CurrentUserStore").teamMembers.get(String(this.props.owner)),i=s&&(s.name||s.username);return o.createElement("div",{className:t,onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.owner&&"0"!==this.props.owner?o.createElement(u.default,{ref:this.userAvatar,size:"small",userId:this.props.owner}):o.createElement(p.default,{name:"icon-descriptive-user-stroke",color:"content-color-secondary"}),this.userAvatar.current&&o.createElement(S.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(S.TooltipBody,null,o.createElement("div",{className:"history-sidebar-list-item-avatar-tooltip"},o.createElement(d.default,{type:"body-medium"},i),o.createElement(d.default,{type:"body-medium"},l()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e){const t=c()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e)return null;const s=(0,E.getStore)("PermissionStore"),{userCanSave:i}=(0,E.getStore)("OnlineStatusStore"),n=i&&s.can("delete","history");return o.createElement("div",{className:t},o.createElement(h.default,{type:"tertiary",icon:"icon-action-delete-stroke",onClick:this.handleDelete,isDisabled:!n,tooltip:this.getTooltipText(!n,!i)}))}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"websockethistory"},t)}handleAction(e){this.props.onSelectAction(e,{websockethistory:[this.props.id]})}handleDelete(e){e.stopPropagation(),this.handleAction(y.ACTION_TYPE_DELETE)}render(){return o.createElement("div",{"data-index":this.props.index},o.createElement(g.default,{text:this.props.url,icon:"icon-entity-websocket-stroke",isSelected:this.props.isSelected,onClick:this.handleSelect,className:this.getClasses(),leftMetaComponent:this.getLeftAlignedComponents,rightMetaComponent:this.getRightAlignedComponents}))}})||i}}]);