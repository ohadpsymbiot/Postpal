"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[10],{"./api-dev/components/api-sidebar/APISidebarListEmptyItem/APISidebarListEmptyItem.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoAPI.js"),a=(i("./js/components/base/Buttons.js"),i("./js/stores/CurrentUserStore.js")),l=(i("./api-dev/stores/APIListStore.js"),i("./js/stores/ActiveWorkspaceStore.js")),d=i("./js/stores/StoreManager.js"),c=i("./js/stores/SyncStatusStore.js"),u=i("./js/components/base/LoadingIndicator.js"),p=i("./js/modules/services/AnalyticsService.js"),m=i("./js/modules/services/AuthHandlerService.js"),h=i("./appsdk/sidebar/SidebarEmptyState/SidebarEmptyState.js"),f=i("./appsdk/sidebar/SidebarNoResultsFound/SidebarNoResultsFound.js"),I=i("./js/services/NavigationService.js"),v=i("./api-dev/services/APIPermissionService.js"),b=i("./api-dev/util/TooltipText.js"),E=i("./node_modules/lodash/lodash.js");let g=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.state={isCreateAPIModalOpen:!1},this.handleOffline=this.handleOffline.bind(this),this.handleLoggedOut=this.handleLoggedOut.bind(this),this.getComponent=this.getComponent.bind(this),this.createAPI=this.createAPI.bind(this)}createAPI(){return p.default.addEventV2({category:"api",action:"start_create_flow",label:"api_sidebar",value:1}),I.default.transitionTo("build.createAPI")}handleOffline(){this.props.apiListStore.refresh()}handleLoggedOut(){m.default.initiateLogin()}getComponent(e,t,i,o){const s=!E.get((0,d.resolveStoreInstance)(c.default),"isSocketConnected"),a=E.get((0,d.resolveStoreInstance)(l.default),"id"),p=v.default.hasPermission(this.props.apiListStore.permissions,"create","workspace",a),m=!s&&!E.get(this.props,"apiListStore.isCreating")&&p;return n.createElement(h.default,{illustration:n.createElement(r.default,null),title:e,message:t,action:{label:n.createElement("span",null,this.props.apiListStore.isCreating?n.createElement(u.default,null):i),handler:o,tooltip:(0,b.default)(!m,!p)},hasPermissions:m})}getContent(){let e=!(0,d.resolveStoreInstance)(a.default).isLoggedIn,t=((0,d.resolveStoreInstance)(c.default).isSocketConnected,""),i="",o="";return e?(t="Sign in to create APIs",i="APIs define related collections and environments under a consistent schema.",o="Sign in to create APIs",this.getComponent(t,i,o,this.handleLoggedOut)):this.props.query&&E.isEmpty(this.props.apiListStore.sortedAPIs)?n.createElement(f.default,{searchQuery:this.props.query,illustration:n.createElement(r.default,null)}):(t="No APIs yet",i="APIs define related collections and environments under a consistent schema.",o="Create an API",n.createElement(n.Fragment,null,this.getComponent(t,i,o,this.createAPI)))}render(){return this.getContent()}})||o},"./api-dev/components/api-sidebar/APISidebarMenuGenericSidebar/APISidebarMenu.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("./js/stores/ActiveWorkspaceStore.js"),a=i("./js/stores/SyncStatusStore.js"),l=i("./js/stores/CurrentUserStore.js"),d=i("./js/stores/StoreManager.js"),c=i("./api-dev/stores/APISidebarStore.js"),u=i("./api-dev/stores/APIListStore.js"),p=(i("./node_modules/classnames/index.js"),i("./js/components/base/Buttons.js"),i("./js/modules/services/AnalyticsService.js")),m=i("./js/containers/apps/requester/sidebar/SidebarListActions.js"),h=i("./api-dev/constants/Permissions.js"),f=i("./api-dev/services/APIPermissionService.js"),I=i("./js/services/NavigationService.js"),v=i("./api-dev/constants/APITooltips.js"),b=i("./js/services/SingleTabWorkbenchService.js");let E=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.state={refreshDisabled:!1,isCreateAPIModalOpen:!1},this.getAddIconText=this.getAddIconText.bind(this),this.createAPI=this.createAPI.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.store=(0,d.resolveStoreInstance)(c.default),this.listStore=(0,d.resolveStoreInstance)(u.default)}createAPI(){if(!b.default.didUserCancelDiscard())return(0,d.resolveStoreInstance)(l.default).isLoggedIn?(p.default.addEventV2({category:"api",action:"start_create_flow",label:"api_sidebar_header",value:1}),I.default.transitionTo("build.createAPI")):pm.mediator.trigger("showSignInModal",{type:"createAPI",origin:"API_sidebar",continueUrl:new URL(window.location.href),subtitle:"You need an account to continue exploring Postman."})}getAddIconText(e,t,i){return e?v.IS_OFFLINE_TOOLTIP_MSG:t?i?v.API_ALREADY_CREATING:"Create new API":h.API_PERMISSION_ERROR}componentWillUnmount(){clearTimeout(this.enableRefreshTimeout)}handleSearchChange(e){this.store.setSearchQuery(e)}render(){const e=(0,d.resolveStoreInstance)(a.default).isSocketConnected,t=this.listStore.isCreating,i=e&&!t,o=(i&&!this.state.refreshDisabled&&this.listStore.isHydrating,(0,d.resolveStoreInstance)(r.default).id),s=f.default.hasPermission(this.listStore.permissions,"create","workspace",o);return n.createElement(m.default,{createNewConfig:{tooltip:this.getAddIconText(!e,s,t),disabled:!i||!s,onCreate:this.createAPI,xPathIdentifier:"addAPI"},onSearch:this.props.handleSearchChange,searchQuery:this.props.searchQuery})}})||o},"./api-dev/components/api/AddCollectionToAPI/AddCollectionToAPI.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=i("./api-dev/services/APIDevService.js"),u=i("./js/stores/StoreManager.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),h=i("./api-dev/util/error.js"),f=i("./js/components/base/LoadingIndicator.js"),I=i("../../packages/version-control/change-management/index.ts"),v=i("./js/modules/services/AnalyticsService.js"),b=i("./api-dev/interfaces/APIInterface.js"),E=i("./runtime-repl/collection/_api/CollectionInterface.js"),g=i("./api-dev/constants/APITabModes.js"),_=i("./node_modules/lodash/lodash.js");function A(e){const{label:t,forkLabel:i,id:r}=e;return o.createElement(n.default,{grow:1,shrink:1,minWidth:"0px",alignItems:"center",gap:"spacing-s"},o.createElement(s.default,{isTruncated:!0},t),i&&o.createElement(I.ForkLabel,{forkDetails:{id:r,label:i,type:"collection",parent:{}},disableTooltip:!0}))}class C extends o.Component{constructor(e){super(e),this.state={selectedCollections:null,collections:[],isFetchingCollections:!1,isCreatingCollections:!1,errorFetchingCollections:!1},this.handleCollectionSelection=this.handleCollectionSelection.bind(this),this.fetchCollectionsInWorkspace=this.fetchCollectionsInWorkspace.bind(this),this.handleAddCollectionsToAPI=this.handleAddCollectionsToAPI.bind(this),this.addExistingCollectionInBranch=this.addExistingCollectionInBranch.bind(this),this.addExistingCollectionInAPIWorkbench=this.addExistingCollectionInAPIWorkbench.bind(this),this.fetchVersionId=this.fetchVersionId.bind(this)}componentDidUpdate(e){this.props.showAddCollectionsModal&&this.props.showAddCollectionsModal!==e.showAddCollectionsModal&&this.fetchCollectionsInWorkspace()}async fetchCollectionsInWorkspace(){this.setState({isFetchingCollections:!0,errorFetchingCollections:!1});try{const e=await(0,c.getWorkspaceId)(),t=await(0,m.getMeta)(e),i=_.chain(t).get("list").map((e=>_.pick(e,["id","name","forkLabel"]))).value(),o=_.keyBy(i,"id");let n=[];_.isEmpty(o)||(n=await c.default.checkConstraintsForRelationLink(this.props.apiId,this.fetchVersionId(),"unclassified",_.keys(o)));const s=_.reduce(o,(function(e,t,i){return _.find(n,(e=>e.entityId===i&&!0===e.allowed))&&e.push({value:i,label:o[i].name,forkLabel:o[i].forkLabel,id:o[i].id}),e}),[]);this.setState({collections:_.sortBy(s,["label"]),isFetchingCollections:!1,errorFetchingCollections:!1})}catch(e){(0,h.handleError)(e),this.setState({errorFetchingCollections:!0,isFetchingCollections:!1})}}handleCollectionSelection(e){this.setState((t=>({selectedCollections:e})))}fetchVersionId(){const e=(0,u.resolveStoreInstance)(p.default).find(this.props.apiId);return _.get(e,"childEntities.values.0.id")}async addExistingCollectionInBranch(e){const t=this.props.apiId,i=await(0,m.cloneCollection)(e,{format:"2.1.0"});return(0,b.addCollectionOnBranch)(t,"unclassified",i).then((async e=>{const i=(null==e?void 0:e.id)||(null==e?void 0:e.modelId),o={branch:_.get(this.props.model,"apiMode.value"),collection:i},n={type:"api",id:t};return(0,E.openCollectionInTab)(i,{tabOptions:{forceNew:!0},focusContext:"info"},n,o)}))}async addExistingCollectionInAPIWorkbench(e){var t;const i=this.props.apiId,o=null===(t=this.props.model)||void 0===t?void 0:t.id;return(0,E.duplicateCollectionInAPI)(e,{type:"api",id:i,apiVersionId:o,relation:"unclassified"},{origin:"api-overview",openCollectionInTabOptions:{tabOptions:{forceNew:!0}},suffix:""})}async handleAddCollectionsToAPI(){const e=_.get(this.state,"selectedCollections.value"),t=(await(0,b.getAPI)(this.props.apiId)).version.apiRepositoryStore;if(!t.canEditAPISource.allowed)return this.props.toggleShowAddCollectionsModal(),void t.openEditDisabledModal();this.setState({isCreatingCollections:!0});try{v.default.addEventV2({category:"builder"===_.get(this.props,"mode.name")?"collection-non-git-linked":"collection-git-linked",action:"copy-collection-to-api",entityId:_.get(this.state,"selectedCollections.value")})}catch(e){pm.logger.error("AddCollectionToAPI~handleAddCollectionsToAPI Error while sending analytics events",e)}if(this.props.isAPISidebarMode){try{await this.props.onAddExistingCollectionToAPI(_.get(this.state,"selectedCollections.value"))}catch(e){pm.logger.error("AddCollectionToAPI~handleAddCollectionsToAPI Error while adding collection to API",e)}this.setState({isCreatingCollections:!1})}else try{const t=_.get(this.props.model,"apiMode.name")===g.BRANCH_VIEW,i=_.get(this.props.model,"apiMode.name")===g.BUILDER_VIEW;t&&await this.addExistingCollectionInBranch(e),i&&await this.addExistingCollectionInAPIWorkbench(e)}catch(e){(0,h.handleError)(e)}finally{this.setState({isCreatingCollections:!1,selectedCollections:null}),this.props.toggleShowAddCollectionsModal()}}render(){const e=!this.state.isFetchingCollections&&!this.state.errorFetchingCollections;return o.createElement(r.Modal,{isOpen:this.props.showAddCollectionsModal,size:"small",onClose:()=>this.props.toggleShowAddCollectionsModal()},o.createElement(r.ModalHeader,{heading:"Copy an existing collection to this API"}),o.createElement(r.ModalContent,null,this.state.isFetchingCollections&&o.createElement("div",{className:"add-collection-to-api__loader"},o.createElement(f.default,null)),this.state.errorFetchingCollections&&o.createElement(n.default,{direction:"column",gap:"spacing-m",alignItems:"center"},o.createElement(a.default,null),o.createElement(l.default,{type:"primary",text:"Try again",onClick:()=>this.fetchCollectionsInWorkspace()})),e&&o.createElement(d.default,{onChange:this.handleCollectionSelection,options:this.state.collections,value:this.state.selectedCollections,customOptionComponent:A,label:"Collection",placeholder:"Select collection",isSearchable:!0,menuPlacement:"bottom-start",menuMaxHeight:240,isClearable:!0,viaPortal:!0})),o.createElement(r.ModalFooter,null,o.createElement(n.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},o.createElement(l.default,{type:"secondary",text:"Cancel",onClick:()=>this.props.toggleShowAddCollectionsModal()}),o.createElement(l.default,{type:"primary",text:"Copy Collection",isLoading:this.state.isCreatingCollections,isDisabled:_.isNull(this.state.selectedCollections),onClick:()=>this.handleAddCollectionsToAPI()}))))}}},"./api-dev/constants/APIActionsConstants.js":function(e,t,i){i.r(t),i.d(t,{ACTION_TYPE_ADD_COLLECTION:function(){return m},ACTION_TYPE_COMMENTS:function(){return s},ACTION_TYPE_COPY_EXISTING_COLLECTION:function(){return h},ACTION_TYPE_CREATE:function(){return u},ACTION_TYPE_CREATE_NEW_COLLECTION:function(){return f},ACTION_TYPE_CREATE_VERSION:function(){return p},ACTION_TYPE_DELETE:function(){return c},ACTION_TYPE_DUPLICATE:function(){return d},ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION:function(){return I},ACTION_TYPE_MANAGE_ROLES:function(){return a},ACTION_TYPE_MOVE:function(){return n},ACTION_TYPE_RENAME:function(){return l},ACTION_TYPE_REPORTS:function(){return r},ACTION_TYPE_SHARE:function(){return o}});const o="share",n="move",s="comment",r="reports",a="manage",l="rename",d="duplicate",c="delete",u="create",p="create-version",m="add-collection",h="copy-existing-collection",f="create-new-collection",I="generate-collection-from-definition"},"./api-dev/constants/APITooltips.js":function(e,t,i){i.r(t),i.d(t,{ACTIVE_API_VERSION_DELETED_TEXT:function(){return n},API_ALREADY_CREATING:function(){return a},API_DELETED_TEXT:function(){return s},CANNOT_MOVE_API_RELATION_TEXT:function(){return r},IS_OFFLINE_TOOLTIP_MSG:function(){return o},NO_COLLECTIONS_IN_WORKSPACE_TO_COPY:function(){return l}});const o="You can take this action once you're back online",n="You can not perform this action as this API version is deleted",s="You can not perform this action as this API is deleted",r="You cannot move individual elements of an API. Move API to move its elements together.",a="Creating API",l="There are no collections in this workspace to copy."},"./api-dev/tools/generate-collection/GenerateCollection/GenerateCollection.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./node_modules/rxjs/_esm5/internal/operators/share.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),d=i("./js/modules/services/AnalyticsService.js"),c=i("../../packages/api-design/schema-service/index.js"),u=i("./api-dev/util/getConfigurationOptions.js"),p=i("./api-dev/tools/generate-collection/GenerateCollectionModal/GenerateCollectionModal.js"),m=i("./js/stores/StoreManager.js"),h=i("./js/stores/CurrentUserStore.js"),f=i("../../packages/api-design/schema-editor/index.js"),I=i("./schema/services/CollectionGenerationService/index.js"),v=i("./api-dev/interfaces/APIInterface.js"),b=i("./api-dev/constants/APITabModes.js"),E=i("./js/services/NavigationService.js"),g=i("./runtime-repl/collection/_api/CollectionInterface.js"),_=i("./node_modules/lodash/lodash.js");let A=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.state={isModalOpen:!1,collectionName:"",collectionNameError:!1,isLoading:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[],optionsPreferences:{}},this.hydrateConfigOptions=this.hydrateConfigOptions.bind(this),this.openGenerateCollectionModal=this.openGenerateCollectionModal.bind(this),this.closeGenerateCollectionModal=this.closeGenerateCollectionModal.bind(this),this.hydrateConfigOptions=this.hydrateConfigOptions.bind(this),this.handleGenerate=this.handleGenerate.bind(this),this.handleCollectionNameChange=this.handleCollectionNameChange.bind(this),this.generateCollectionFromSchema=this.generateCollectionFromSchema.bind(this),this.handleOptionsChange=this.handleOptionsChange.bind(this),this.handleConfigToggle=this.handleConfigToggle.bind(this),this.subscribeToAPIVersionEvents=this.subscribeToAPIVersionEvents.bind(this)}componentDidMount(){this.openGenerateCollectionModal()}openGenerateCollectionModal(){if(!(0,m.resolveStoreInstance)(h.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"generateCollection",origin:"api_builder_generate_collection_button",continueUrl:new URL(window.location.href)});(0,v.migrateAPI)(this.props.schemaStore.apiId,this.props.schemaStore.versionId).then((({migratedAPIId:e,apiVersionId:t})=>{d.default.addEventV2({category:"api",entityId:e,action:"initiate_generate_collection",label:this.props.schemaStore.type,value:1}),this.hydrateConfigOptions(),this.setState({isModalOpen:!0,collectionName:"",collectionNameError:!1})})).catch(_.noop)}closeGenerateCollectionModal(){this.props.onCloseModal(),this.setState({isModalOpen:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[]})}hydrateConfigOptions(){let e=_.get(this.props.schemaStore,"schemaFormat"),t=_.get(this.props.schemaStore,"advancedOptions");e&&!_.isEmpty(t)&&(t=(0,u.checkAndOverrideDefaultValue)(e,t),this.setState({schemaFormat:e.id,generationOptions:t,optionsPreferences:pm.settings.getSetting(`import.options.${e.id}`)||{}}))}handleOptionsChange(e){this.setState({optionsPreferences:e}),pm.settings.setSetting(`import.options.${this.state.schemaFormat}`,e)}handleCollectionNameChange(e){this.setState({collectionName:e,collectionNameError:_.isEmpty(e.trim())})}handleConfigToggle(e){this.setState({isConfigVisible:e})}async handleGenerate(){var e,t;d.default.addEventV2({category:"api",entityId:this.props.schemaStore.apiId,action:"confirm_generate_collection",label:`collection_from_${this.props.schemaStore.type}`,value:1}),this.setState({isLoading:!0});const i=(await(0,v.getAPI)(this.props.schemaStore.apiId)).version.apiRepositoryStore;if(!i.canEditAPISource.allowed)return this.closeGenerateCollectionModal(),i.openEditDisabledModal(),void this.setState({isLoading:!1});const o={type:"unclassified",configurations:{collection:{name:this.state.collectionName},converter:{...this.state.optionsPreferences}}};_.get(this.props,"promoteTab")&&_.isFunction(this.props.promoteTab)&&this.props.promoteTab();const n=await this.generateCollectionFromSchema(o),s=null===(e=this.props.model)||void 0===e?void 0:e.apiMode;let r=null;var a,l;"branch"===(null==s?void 0:s.name)?r=null==n?void 0:n.modelId:r=null==n||null===(a=n.body)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.modelId;const c={};return"branch"===(null==s?void 0:s.name)&&(c.branch=null==s?void 0:s.value,c.collection=r),(0,g.openCollectionInTab)(r,{tabOptions:{forceNew:!0}},{id:null===(t=this.props.schemaStore)||void 0===t?void 0:t.apiId,type:"api"},c)}async generateCollectionFromSchema(e){_.get(this.props.model,"schema.isSchema")?Object.assign(e,{schemaId:_.get(this.props.schemaStore,"schemaId")}):Object.assign(e,{apiDefinitionId:_.get(this.props.schemaStore,"apiDefinitionId")});return _.get(this.props,"model.apiMode.name")===b.BRANCH_VIEW?await this.generateCollectionOnFeatureBranch():this.props.schemaStore.generateCollectionFromSchema(e).then((e=>{var t;return this.setState({isLoading:!1,isModalOpen:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[]}),this.subscribeToAPIVersionEvents({apiId:this.props.schemaStore.apiId,apiVersionId:this.props.schemaStore.versionId||this.props.schemaStore.apiVersionId,jobId:null==e||null===(t=e.data)||void 0===t?void 0:t.jobId,apiName:this.props.schemaStore.apiName||this.props.schemaStore.name}),_.get(this.props,"promoteTab")&&_.isFunction(this.props.promoteTab)&&this.props.promoteTab(),this.props.onCloseModal(),(0,l.toast)({status:"success",description:`A collection is being generated and will show up in the sidebar for ${this.props.schemaStore.apiName||this.props.schemaStore.name} API once complete.`,duration:3e3}),Promise.resolve(e)})).catch((e=>(this.setState({isLoading:!1}),Promise.reject(e))))}async generateCollectionOnFeatureBranch(){const e={name:this.state.collectionName,options:(0,r.toJS)(this.state.optionsPreferences)};try{const t=await(0,I.generateCollectionFromDefinition)(_.pick(this.props.schemaStore,["isSchema","type"]),_.get(this.props.schemaStore,"content"),e),i=await(0,v.addCollectionOnBranch)(_.get(this.props.schemaStore,"apiId"),"unclassified",t);return this.setState({isLoading:!1,isModalOpen:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[]}),this.props.onCloseModal(),i}catch(e){throw this.setState({isLoading:!1}),e}}async subscribeToAPIVersionEvents({apiId:e,apiVersionId:t,jobId:i,apiName:o}){this.apiVersionEventSubscription=(0,c.getAPIVersionRealtimeEvents)(e,t).pipe((0,a.share)()),this.apiVersionEventSubscription.subscribe((t=>{var n,s,r,a,l;if("api"===(null==t||null===(n=t.meta)||void 0===n?void 0:n.model)&&"update"===(null==t||null===(s=t.meta)||void 0===s?void 0:s.action)&&"generate-collection-from-relation"===(null==t||null===(r=t.data)||void 0===r?void 0:r.task)&&(null==t||null===(a=t.data)||void 0===a?void 0:a.jobId)===i&&"running"!==(null==t||null===(l=t.data)||void 0===l?void 0:l.status)){var d,c;const i=null==t||null===(d=t.data)||void 0===d?void 0:d.status;if("completed"===i){var u,p;const i=null==t||null===(u=t.data)||void 0===u||null===(p=u.destination)||void 0===p?void 0:p.modelId;pm.toasts.success(`A ${this.state.collectionName} was successfully generated for ${o} API.`,{title:"Collection was generated",secondaryAction:{label:"View collection",onClick:()=>{E.default.transitionToURL(`api/${e}/collection/${i}`)}},persist:!0,iconName:"icon-state-success-stroke",iconColor:"content-color-success"})}else"failed"===i&&pm.toasts.error(`Something went wrong while generating collection for ${o} API. Try generating again.`,{title:"Unable to generate collection",persist:!0,iconName:"icon-state-error-stroke",iconColor:"content-color-error"});return(null===(c=this.apiVersionEventSubscription)||void 0===c?void 0:c.unsubscribe)&&this.apiVersionEventSubscription.unsubscribe(),void(this.apiVersionEventSubscription=null)}}))}render(){const e=!_.includes(f.GENERATE_COLLECTION_DISABLED_FORMATS,_.get(this.props,"model.schema.type"));return n.createElement(n.Fragment,null,e&&n.createElement(n.Fragment,null,n.createElement(p.default,{isOpen:this.state.isModalOpen,isLoading:this.state.isLoading,isConfigVisible:this.state.isConfigVisible,collectionName:this.state.collectionName,collectionNameError:this.state.collectionNameError,generationOptions:this.state.generationOptions,optionsPreferences:this.state.optionsPreferences,onClose:this.closeGenerateCollectionModal,onGenerateCollection:this.handleGenerate,onCollectionNameChange:this.handleCollectionNameChange,onOptionsChange:this.handleOptionsChange,onConfigToggle:this.handleConfigToggle})))}})||o},"./api-dev/tools/generate-collection/GenerateCollectionModal/GenerateCollectionModal.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var o,n=i("../../node_modules/react/index.js"),s=i("./node_modules/classnames/index.js"),r=i.n(s),a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=(i("./node_modules/react-radio-group/lib/index.js"),i("./js/components/base/Inputs.js")),d=i("./js/components/import/ConfigurationsComponent.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=i("./js/stores/StoreManager.js"),f=i("./js/stores/SyncStatusStore.js"),I=i("./api-dev/constants/APITooltips.js"),v=i("../../packages/api-design/api-design-analytics/index.js"),b=i("./node_modules/lodash/lodash.js");let E=(0,a.observer)(o=class extends n.Component{constructor(e){super(e),this.handleCollectionNameChange=this.handleCollectionNameChange.bind(this),this.handleGenerate=this.handleGenerate.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSubmitOptions=this.handleSubmitOptions.bind(this),this.handleConfigToggle=this.handleConfigToggle.bind(this)}componentDidMount(){var e,t;this.focusInput(),(0,v.logApiDesignAnalytics)({category:v.EVENT_CATEGORIES.DEFINITION,action:v.EVENT_ACTIONS.INITIATE_GC,label:null===(e=this.props)||void 0===e?void 0:e.schemaFormat,entityType:v.EVENT_ENTITY_TYPES.API_DEFINITION,entityId:null===(t=this.props)||void 0===t?void 0:t.definitionId})}componentDidUpdate(e){this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.focusInput()}focusInput(){b.invoke(this.refs,"collectionName.focus")}handleClose(e=!1){var t;(0,v.logApiDesignAnalytics)({category:v.EVENT_CATEGORIES.DEFINITION,action:e?v.EVENT_ACTIONS.CANCEL_GC:v.EVENT_ACTIONS.GC_X,entityType:v.EVENT_ENTITY_TYPES.API_DEFINITION,entityId:null===(t=this.props)||void 0===t?void 0:t.definitionId}),b.invoke(this.props,"onClose")}handleCollectionNameChange(e){this.props.onCollectionNameChange&&this.props.onCollectionNameChange(e)}handleGenerate(){var e;(0,v.logApiDesignAnalytics)({category:v.EVENT_CATEGORIES.DEFINITION,action:v.EVENT_ACTIONS.CONFIRM_GC,entityType:v.EVENT_ENTITY_TYPES.API_DEFINITION,entityId:null===(e=this.props)||void 0===e?void 0:e.definitionId}),this.props.onGenerateCollection&&this.props.onGenerateCollection()}handleSubmitOptions(e){this.props.onOptionsChange&&this.props.onOptionsChange(e)}handleConfigToggle(e){this.props.onConfigToggle&&this.props.onConfigToggle(e)}getCustomStyles(){let e=0;return e=b.isEmpty(this.props.generationOptions)?64:68,{margin:"auto",height:this.props.isConfigVisible?"80vh":`${e}vh`,maxHeight:this.props.isConfigVisible?"780px":"460px",width:"464px"}}getPrimaryActionTooltip(e){return e?I.IS_OFFLINE_TOOLTIP_MSG:this.props.collectionName?void 0:"Please name your collection to continue"}getInputClasses(){return r()({"collection-name-input":!0,"is-required":this.props.collectionNameError})}render(){const e=!(0,h.resolveStoreInstance)(f.default).isSocketConnected,t=e||!this.props.collectionName||this.props.isLoading,i=t&&this.getPrimaryActionTooltip(e);return n.createElement(c.Modal,{className:"generate-collection-modal",isOpen:this.props.isOpen,onClose:this.handleClose,size:"medium"},n.createElement(c.ModalHeader,{heading:"Generate collection from definition"}),n.createElement(c.ModalContent,null,n.createElement("div",{className:"generate-collection-content-container"},n.createElement(u.default,{type:"h6",color:"content-color-secondary",text:"Name your collection",hasBottomSpacing:!0}),n.createElement("div",{className:this.getInputClasses()},n.createElement(l.Input,{inputStyle:"box",ref:"collectionName",onChange:this.handleCollectionNameChange,value:this.props.collectionName,placeholder:"e.g. Payment API Documentation",error:this.props.collectionNameError}),n.createElement("div",{className:"collection-name__error"},"Please enter a collection name")),!b.isEmpty(this.props.generationOptions)&&n.createElement("div",{className:"generation-config-options-container"},n.createElement(u.default,{type:"h6",color:"content-color-secondary",text:"Settings",hasBottomSpacing:!0}),n.createElement("div",{className:"generation-config-options-wrapper"},n.createElement(d.default,{optionsArray:this.props.generationOptions,optionsPreference:this.props.optionsPreferences,onSubmit:this.handleSubmitOptions}))))),n.createElement(c.ModalFooter,null,n.createElement(p.default,{grow:1,shrink:1,justifyContent:"flex-end",gap:"spacing-s"},n.createElement(m.default,{className:"action-button__cancel",type:"secondary",text:"Cancel",size:"medium",onClick:()=>{this.handleClose(!0)}}),n.createElement(m.default,{className:"action-button__generate",type:"primary",size:"medium",onClick:this.handleGenerate,isDisabled:t,tooltip:i,isLoading:this.props.isLoading,text:"Generate Collection"}))))}})||o},"./api-dev/util/TooltipText.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var o=i("./js/stores/CurrentUserStore.js"),n=i("./js/stores/StoreManager.js"),s=i("./js/stores/SyncStatusStore.js"),r=i("./api-dev/constants/APITooltips.js"),a=i("./api-dev/constants/Permissions.js");function l(e,t,i){const l=!(0,n.resolveStoreInstance)(s.default).isSocketConnected;if((0,n.resolveStoreInstance)(o.default).isLoggedIn&&e)return l?r.IS_OFFLINE_TOOLTIP_MSG:i||(t?a.API_PERMISSION_ERROR:void 0)}},"./api-dev/util/getConfigurationOptions.js":function(e,t,i){i.r(t),i.d(t,{checkAndOverrideDefaultValue:function(){return s},newDefaults:function(){return n}});var o=i("./node_modules/lodash/lodash.js");const n={raml:{requestParametersResolution:"Example"},openapi3:{requestParametersResolution:"Example"},swagger:{requestParametersResolution:"Example"}};function s(e,t){let i=pm.settings.getSetting(`import.options.${e.id}`),s={},r=t.map((t=>{let i=o.get(n,[e.type,t.id]);return!i||t.availableOption&&!o.includes(t.availableOption,i)?t:(s={[t.id]:i},{...t,default:i})}));return pm.settings.setSetting(`import.options.${e.id}`,{...i,...s}),r}},"./js/components/base/FolderButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Tooltips.js"),s=i("./node_modules/prop-types/index.js"),r=i.n(s),a=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},l.apply(this,arguments)}class d extends o.Component{constructor(e){super(e),this.state={isTooltipVisible:!1},this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this)}showTooltip(e=this.state.isTooltipVisible){this.setState({isTooltipVisible:!0})}hideTooltip(e){this.setState({isTooltipVisible:!1})}render(){return o.createElement("div",{className:"folder-button"},o.createElement("div",{className:"folder-button__icon",ref:"tooltipTarget",onMouseOver:this.showTooltip,onMouseOut:this.hideTooltip},o.createElement(a.default,l({name:"icon-entity-folder-stroke"},this.props))),o.createElement(n.Tooltip,{show:this.state.isTooltipVisible&&!this.props.disabled,target:this.refs.tooltipTarget,placement:this.props.placement,immediate:!0},o.createElement(n.TooltipBody,null,this.props.tooltip)))}}d.propTypes={tooltip:r().node},d.defaultProps={tooltip:"Folder",placement:"right",disabled:!1}},"./js/components/base/Icons/MenuIcon.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Icons/Icon.js");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},s.apply(this,arguments)}const r=o.createElement("svg",{width:"16",height:"13",viewBox:"0 0 16 16"},o.createElement("defs",null,o.createElement("path",{id:"menu",d:"M1.182 12.636h13.636a1.182 1.182 0 0 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364zm0-5.318h13.636a1.182 1.182 0 1 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364zm0-5.318h13.636a1.182 1.182 0 1 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364z"})),o.createElement("use",{fill:"#A9A9A9",fillRule:"evenodd",xlinkHref:"#menu"}));function a(e){return o.createElement(n.default,s({},e,{icon:r}))}},"./js/containers/apps/requester/sidebar/SidebarFilter.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("./js/components/base/XPaths/XPath.js"),a=i("./js/components/base/Inputs.js"),l=i("./node_modules/lodash/lodash.js");let d=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.handleSearchChange=this.handleSearchChange.bind(this),this.handleSearchCancel=this.handleSearchCancel.bind(this),this.focusSearchBox=this.focusSearchBox.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("focusSearchBox",this.focusSearchBox)}componentWillUnmount(){pm.mediator.off("focusSearchBox",this.focusSearchBox)}focusSearchBox(){l.invoke(this,"refs.filter.focus")}handleSearchChange(e){this.props.onSearch&&this.props.onSearch(e)}handleSearchCancel(){this.props.onSearch&&this.props.onSearch("")}render(){return n.createElement(r.default,{identifier:"filter"},n.createElement(a.Input,{icon:"icon-action-filter-stroke",ref:"filter",inputStyle:"search",onChange:this.handleSearchChange,onCancel:this.handleSearchCancel,query:this.props.searchQuery,className:this.props.className}))}})||o},"./js/containers/apps/requester/sidebar/SidebarListActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),a=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./js/containers/apps/requester/sidebar/SidebarFilter.js"),c=i("./js/components/base/Buttons.js"),u=i("./js/components/base/Dropdowns.js"),p=i("./js/components/base/XPaths/XPath.js");let m=(0,l.observer)(o=class extends n.Component{constructor(e){super(e),this.handleDropdownSelect=this.handleDropdownSelect.bind(this)}handleDropdownSelect(e){this.props.onActionsDropdownSelect&&this.props.onActionsDropdownSelect(e)}getCreateNewButton(e){if(!e)return null;const t=n.createElement(s.default,{className:"create-new__btn",onClick:e.onCreate,tooltip:e.tooltip,isDisabled:e.disabled,icon:n.createElement(r.default,null),type:"tertiary",size:"small"});return e.xPathIdentifier?n.createElement(p.default,{identifier:e.xPathIdentifier},t):t}render(){return n.createElement("div",{className:"requester-left-sidebar__actions-container"},this.getCreateNewButton(this.props.createNewConfig),n.createElement(d.default,{onSearch:this.props.onSearch,className:this.props.className,searchQuery:this.props.searchQuery}),this.props.rightMetaContainer||this.props.moreActions?n.createElement("div",{className:"secondary-actions-container"},this.props.rightMetaContainer,this.props.moreActions?n.createElement(u.Dropdown,{ref:"menu",onSelect:this.handleDropdownSelect,className:"actions-dropdown"},n.createElement(u.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},n.createElement(c.Button,{tooltip:"View more actions"},n.createElement(a.default,{name:"icon-action-options-stroke",className:"dropdown-action-button pm-icon pm-icon-normal"}))),this.props.moreActions):null):"")}})||o},"./runtime-repl/collection/modals/AddCollectionToAPIContainer.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o,n=i("../../node_modules/react/index.js"),s=i("./api-dev/interfaces/APIInterface.js"),r=i("./node_modules/lodash/lodash.js"),a=i.n(r),l=i("./js/utils/util.js"),d=i("./js/stores/ActiveWorkspaceStore.js"),c=i("./js/stores/StoreManager.js"),u=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=i("./api-dev/util/error.js"),m=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),h=i("./js/services/NavigationService.js"),f=i("./runtime-repl/_common/NavigationConstants.js"),I=i("./runtime-repl/collection/_api/CollectionInterface.js"),v=i("./api-dev/components/api/AddCollectionToAPI/AddCollectionToAPI.js"),b=i("./api-dev/tools/generate-collection/GenerateCollection/GenerateCollection.js"),E=i("./api-dev/constants/APIActionsConstants.js");let g=(0,u.observer)(o=class extends n.Component{constructor(e){super(e),this.state={showAddCollectionsModal:!1,showGenerateCollectionModal:!1},this.toggleShowAddCollectionsModal=this.toggleShowAddCollectionsModal.bind(this),this.handleOpen=this.handleOpen.bind(this),this.handleAddExistingCollectionToAPI=this.handleAddExistingCollectionToAPI.bind(this),this.addExistingCollectionInBranch=this.addExistingCollectionInBranch.bind(this),this.addExistingCollectionInAPIWorkbench=this.addExistingCollectionInAPIWorkbench.bind(this),this.navigateToNewCollection=this.navigateToNewCollection.bind(this),this.openGenerateCollectionModal=this.openGenerateCollectionModal.bind(this),this.handleAddNewCollectionToAPI=this.handleAddNewCollectionToAPI.bind(this),this.addNewCollectionInBranch=this.addNewCollectionInBranch.bind(this),this.addNewCollectionInAPI=this.addNewCollectionInAPI.bind(this),this.addNewCollectionInBranch=this.addNewCollectionInBranch.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("showAddCollectionToAPIModal",this.handleOpen)}componentWillUnmount(){pm.mediator.off("showAddCollectionToAPIModal",this.handleOpen)}addNewCollectionInAPI(e,t){return(0,I.createCollectionInAPI)({openInTab:!0,tabOptions:{forceNew:!0}},{type:"api",id:e,versionId:t,relation:"unclassified",workspaceId:(0,c.resolveStoreInstance)(d.default).id})}addNewCollectionInBranch(e){const t={name:"New Collection",id:l.default.guid()};return(0,s.addCollectionOnBranch)(e,"unclassified",t).then((t=>this.navigateToNewCollection(t,e)))}async handleAddNewCollectionToAPI(e,t){var i;const o="branch"===(null===(i=this.apiMode)||void 0===i?void 0:i.name);try{o?await this.addNewCollectionInBranch(e):await this.addNewCollectionInAPI(e,t)}catch(e){(0,p.handleError)(e,"There was an unexpected error adding this collection to the API. Please try again.")}}handleOpen(e,t,i,o){switch(this.apiId=t,this.apiMode=i,o.definitionModel&&(this.apiDefinitionModel=o.definitionModel),o.apiVersionId&&(this.apiVersionId=o.apiVersionId),e){case E.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION:return this.openGenerateCollectionModal();case E.ACTION_TYPE_CREATE_NEW_COLLECTION:if(!this.apiId||!this.apiMode)return;return(0,s.migrateAPI)(this.apiId,this.apiVersionId).then((async({migratedAPIId:e,apiVersionId:t})=>{this.handleAddNewCollectionToAPI(e,t)})).catch((e=>{throw pm.logger.error("APISidebarListItem~handleAddCollection Error occurred",e),new Error("APISidebarListItem~handleAddCollection Error occurred",{cause:e})}));case E.ACTION_TYPE_COPY_EXISTING_COLLECTION:return this.toggleShowAddCollectionsModal();default:return pm.logger.error("AddCollectionToAPIContainer~handleOpen: Unsupported action called",e),new TypeError("action not supported")}}openGenerateCollectionModal(){this.setState({showGenerateCollectionModal:!0})}navigateToNewCollection(e,t){var i,o,n;const s="branch"===this.apiMode.name?null===(i=this.apiMode)||void 0===i?void 0:i.value:"",r="version"===(null===(o=this.apiMode)||void 0===o?void 0:o.name)?null===(n=this.apiMode)||void 0===n?void 0:n.value:"",a={};s?(a.collection=e.uid||e.id,a.branch=s):r&&(a.collection=e.uid||e.id,a.version=r);const l={apiId:t,cid:e.uid||e.id},d=f.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT;return h.default.transitionTo(d,l,a,{tabOptions:{forceNew:!0}})}async addExistingCollectionInBranch(e){const t=await(0,m.cloneCollection)(e,{format:"2.1.0"});return(0,s.addCollectionOnBranch)(this.apiId,"unclassified",t).then((e=>this.navigateToNewCollection(e,this.apiId)))}async addExistingCollectionInAPIWorkbench(e){return(0,I.duplicateCollectionInAPI)(e,{type:"api",id:this.apiId,apiVersionId:this.apiVersionId,relation:"unclassified"},{openCollectionInTabOptions:{tabOptions:{forceNew:!0}},suffix:""})}async handleAddExistingCollectionToAPI(e){var t;const i="branch"===(null===(t=this.apiMode)||void 0===t?void 0:t.name);try{i?await this.addExistingCollectionInBranch(e):await this.addExistingCollectionInAPIWorkbench(e)}catch(e){(0,p.handleError)(e,"There was an unexpected error adding this collection to the API. Please try again.")}finally{this.toggleShowAddCollectionsModal()}}toggleShowAddCollectionsModal(){(0,s.migrateAPI)(this.apiId,this.apiVersionId).then((()=>{this.setState((e=>({...e,showAddCollectionsModal:!e.showAddCollectionsModal})))})).catch(a().noop)}render(){var e;return n.createElement(n.Fragment,null,n.createElement(v.default,{showAddCollectionsModal:this.state.showAddCollectionsModal,toggleShowAddCollectionsModal:this.toggleShowAddCollectionsModal,apiId:this.apiId,isAPISidebarMode:!0,onAddExistingCollectionToAPI:this.handleAddExistingCollectionToAPI,mode:this.apiMode}),this.state.showGenerateCollectionModal&&n.createElement(b.default,{isModalOpen:this.state.showGenerateCollectionModal,onCloseModal:()=>this.setState({showGenerateCollectionModal:!1}),model:{apiMode:this.apiMode,schema:{model:this.apiDefinitionModel,isSchema:null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.isSchema}},schemaStore:this.apiDefinitionModel}))}})||o},"./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx":function(e,t,i){i.r(t),i.d(t,{BetaCollectionForkLabel:function(){return c},CollectionForkLabel:function(){return u},CollectionLockedIcon:function(){return l}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-locked-stroke.js"),r=i("../../packages/version-control/change-management/index.ts"),a=i("./version-control/common/ForkLabel.js");function l(){return o.createElement(s.default,{color:"content-color-tertiary",size:"small",title:"Read only"})}const d=n.default.div`
  margin-right: var(--spacing-xs);
`;function c({forkDetails:e}){return()=>o.createElement(d,null,o.createElement(r.ForkLabel,{forkDetails:e}))}function u({forkedEntity:e,baseEntity:t,forkInfo:i}){return()=>o.createElement(a.default,{className:"collection-meta-icon fork-label",forkedEntity:e,baseEntity:t,label:null==i?void 0:i.forkLabel,showForkLabel:!0})}},"./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var o,n=i("../../node_modules/react/index.js"),s=i("./node_modules/react-dnd/lib/index.js"),r=i("../../node_modules/react-dom/index.js"),a=i("./node_modules/classnames/index.js"),l=i.n(a),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Tag/Tag.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=i("./runtime-repl/request-http/RequestMethodHelper.js"),f=i("./js/components/base/Icons/MenuIcon.js"),I=i("./js/components/base/FolderButton.js"),v=i("./node_modules/lodash/lodash.js");const b=({id:e,type:t})=>{const[i,o]=n.useState(!1);return n.createElement(d.default,{alignItems:"center",justifyContent:"flex-start",gap:"spacing-s"},n.createElement(c.default,{color:"content-color-secondary"},"Not Found."),n.createElement(c.default,{color:"content-color-secondary"},i?e:n.createElement("div",{onClick:()=>o(!0)},`Show ${t} ID`)))},E={canDrag:e=>!e.disabled,beginDrag:e=>({index:e.index,id:e.item.id,type:e.item.type}),endDrag(e,t){const i=t.getItem().index,{dropIndex:o,position:n}=t.getDropResult()||{};i===o||v.isUndefined(o)||e.onDragDrop(i,o,n)}},g=e=>{const t=(0,r.findDOMNode)(e).getBoundingClientRect();return t.top+t.height/2},_={hover(e,t,i){t.getItem().index!==e.index&&(t.getClientOffset().y>g(i)?i.getDecoratedComponentInstance().scheduleHoverUpdate("bottom"):i.getDecoratedComponentInstance().scheduleHoverUpdate("top"))},drop:(e,t,i)=>({dropIndex:e.index,position:t.getClientOffset().y>g(i)?"after":"before"})};let A=(0,s.DropTarget)("runner-customizer-list-request",_,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(o=(0,s.DragSource)("runner-customizer-list-request",E,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(o=class extends n.PureComponent{constructor(e){super(e),this.state={dropHoverBottom:!1,dropHoverTop:!1},this.handleToggle=this.handleToggle.bind(this),this.setDropHoverTop=this.setDropHoverTop.bind(this),this.setDropHoverBottom=this.setDropHoverBottom.bind(this)}componentDidMount(){!this.props.item&&!this.props.disabled&&this.props.onInconsistency()}componentWillUnmount(){cancelAnimationFrame(this.requestedFrame)}setDropHoverTop(){!this.state.dropHoverTop&&this.setState({dropHoverBottom:!1,dropHoverTop:!0})}setDropHoverBottom(){!this.state.dropHoverBottom&&this.setState({dropHoverBottom:!0,dropHoverTop:!1})}getMethodIcon(e="GET"){const t=`customizer__row_request-icon request-method--${e=e.toUpperCase()}`;return n.createElement("div",{className:t},h.default.getMethodAbbreviation(e))}getClasses(){return l()({"runner-runs-customizer__list-item__row":!0,"is-dragged":this.props.isDragging,"is-drop-hovered-top":this.state.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.state.dropHoverBottom&&this.props.isDragOver})}getSortIconClasses(){return l()({"customizer__sort-icon":!0,"is-disabled":this.props.disabled})}scheduleHoverUpdate(e){const t="bottom"===e?this.setDropHoverBottom:this.setDropHoverTop;this.requestedFrame||(this.requestedFrame=requestAnimationFrame((()=>{try{t&&t()}finally{this.requestedFrame=null}})))}handleToggle(){this.props.onItemToggle(this.props.index)}render(){const{connectDragSource:e,connectDragPreview:t,connectDropTarget:i,item:o}=this.props;return o&&t(i(n.createElement("div",{className:"runner-runs-customizer__list-item","data-testid":null==o?void 0:o.id},n.createElement("div",{className:this.getClasses()},e(n.createElement("div",{className:this.getSortIconClasses(),"data-testid":"drag-icon"},n.createElement(f.default,{size:"xs"}))),n.createElement(p.default,{className:"customizer__row_check",isChecked:o.checked,onChange:this.handleToggle,isDisabled:this.props.disabled}),!v.isEmpty(o.parents)&&n.createElement("div",{className:"customizer__row__parents"},v.map(o.parents,((e,t)=>n.createElement("div",{key:t,className:"customizer__row_icons"},n.createElement(I.default,{className:"customizer__row_folder-icon",placement:"bottom",tooltip:e.name,disabled:this.props.disabled}),n.createElement(m.default,{name:"icon-direction-right"}))))),o.method&&this.getMethodIcon(o.method),n.createElement("span",{className:"customizer__row_name"},n.createElement(c.default,{type:"body-medium",color:"content-color-primary"},o.status?(({status:e,name:t,id:i,type:o})=>{let s,r,a=t;switch(e){case"deleted":s="orange",r="DELETED",a=n.createElement(b,{id:i,type:o});break;case"new":s="blue",r="NEW REQUEST"}return n.createElement(d.default,{grow:1,shrink:1,justifyContent:"space-between",alignItems:"center",direction:"row",gap:"spacing-m"},a,n.createElement(d.default,null,n.createElement(u.default,{text:r,color:s})))})(o):o.name))))))}})||o)||o},"./schema/services/CollectionGenerationService/index.js":function(e,t,i){i.r(t),i.d(t,{generateCollectionFromDefinition:function(){return s}});var o=i("./js/services/conversion/formats/index.js"),n=i("./node_modules/lodash/lodash.js");async function s(e,t,i){const s=n.find(o.default,(t=>e.isSchema?t.api_type===e.type:t.apiDefinitionType===e.type));if(!s||!s.convert)return new Error(`Collection generation is not supported for provided definition type: ${e.type}`);const{collections:r}=await s.convert(t,i.options,"2.1.0");let a=n.head(r);return n.isString(i.name)&&n.set(a,"info.name",i.name),a}},"./node_modules/react-radio-group/lib/index.js":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=function(e,t,i){for(var o=!0;o;){var n=e,s=t,r=i;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(r)}var d=Object.getPrototypeOf(n);if(null===d)return;e=d,t=s,i=r,o=!0,a=d=void 0}};function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=r(i("./node_modules/prop-types/index.js")),c=r(i("../../node_modules/react/index.js")),u=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),n(t,[{key:"render",value:function(){var e=this.context.radioGroup,t=e.name,i=e.selectedValue,n=e.onChange,s={};return void 0!==i&&(s.checked=this.props.value===i),"function"==typeof n&&(s.onChange=n.bind(null,this.props.value)),c.default.createElement("input",o({},this.props,{type:"radio",name:t},s))}}]),t}(c.default.Component);t.Radio=u,u.contextTypes={radioGroup:d.default.object};var p=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),n(t,[{key:"getChildContext",value:function(){var e=this.props;return{radioGroup:{name:e.name,selectedValue:e.selectedValue,onChange:e.onChange}}}},{key:"render",value:function(){var e=this.props,t=e.Component,i=(e.name,e.selectedValue,e.onChange,e.children),o=function(e,t){var i={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o]);return i}(e,["Component","name","selectedValue","onChange","children"]);return c.default.createElement(t,o,i)}}]),t}(c.default.Component);t.RadioGroup=p,p.defaultProps={Component:"div"},p.propTypes={name:d.default.string,selectedValue:d.default.oneOfType([d.default.string,d.default.number,d.default.bool]),onChange:d.default.func,children:d.default.node.isRequired,Component:d.default.oneOfType([d.default.string,d.default.func,d.default.object])},p.childContextTypes={radioGroup:d.default.object}},"./api-dev/components/api-sidebar/APISidebarBulkActions/index.ts":function(e,t,i){i.r(t),i.d(t,{allowedActions:function(){return v},allowedItems:function(){return h},handleAction:function(){return b},shouldClearPreviousSelection:function(){return I}});var o=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),n=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),s=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),r=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),a=i("./runtime-repl/example/sidebar/ResponseSidebarItem.ts"),l=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),d=i("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),c=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),u=i("./runtime-repl/example/sidebar/GitLinkedResponseSidebarItem.ts"),p=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),m=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const h=[o.default,n.default,s.default,a.default,l.default,c.default,r.default,u.default];function f(e){return h.some((t=>e instanceof t))}function I(e,t){return t.every((t=>{var i,o;return(null===(i=t._context)||void 0===i?void 0:i.apiId)===(null===(o=e._context)||void 0===o?void 0:o.apiId)}))}function v(e){if(!Array.isArray(e))throw new TypeError("Expected an array of selected items");if(!e.length)return[];if(!e.every(f))return[];let t=[];return e.some((e=>e instanceof o.default||e instanceof l.default))||t.push({name:"Copy",handler:()=>{},isDestructive:!1,isEnabled:!0,shortcut:"copy"},{name:"Cut",handler:()=>{},isDestructive:!1,isEnabled:!0,shortcut:"cut"},{name:"Duplicate",handler:()=>{},isDestructive:!1,isEnabled:!0,shortcut:"duplicate"}),t.push({name:"Delete",handler:()=>{},isDestructive:!0,isEnabled:!0,shortcut:"delete"}),t}function b(e){return m(this,void 0,void 0,(function*(){if(!Array.isArray(e)||!e.length)return;if((0,p.isGitLinkedCollectionAction)(e))return(0,p.handleGitLinkedAction)(e);if(!Array.isArray(e))throw new TypeError("Expected an array of patches");if(!e.length)return;const t=e.map((e=>{const t=e.path.clone();if(t.shift(),"from"in e){const i=e.from.clone();return i.shift(),{op:e.op,from:i.minimized().toString(),path:t.minimized({withPosition:!0}).toString({withPosition:!0})}}return{op:e.op,path:t.minimized().toString()}}));yield(0,d.handleCollectionsPatch)(t)}))}},"./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=()=>o.createElement("div",{className:"api-sidebar-list__item-empty-state"},o.createElement(n.default,{type:"body-medium",color:"content-color-secondary"},"No versions published"))},"./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemGitError.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var o=i("../../node_modules/react/index.js"),n=i("./integrations/git/constants.js");function s(e){var t,i,s,r,a,l,d,c,u;const p=o.useRef(null),{item:m}=e,h=m.parent,f=h.id,I=null===(i=null===(t=h._item.computedVersion)||void 0===t?void 0:t.apiRepositoryStore)||void 0===i?void 0:i.branch,v=null===(a=null===(r=null===(s=h._item.computedVersion)||void 0===s?void 0:s.apiRepositoryStore)||void 0===r?void 0:r.apiVersionRepositoryInterface)||void 0===a?void 0:a.configuredService,b=n.SERVICE_LABELS[v],E=null===(u=null===(c=null===(d=null===(l=h._item.computedVersion)||void 0===l?void 0:l.apiRepositoryStore)||void 0===d?void 0:d.canEditAPISource)||void 0===c?void 0:c.reason)||void 0===u?void 0:u.richText,g=null==E?void 0:E(f,I,b);return o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(p.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(p.current,e.index))),[p.current]),o.createElement("div",{className:"api-sidebar-list__item-empty-state",ref:p,"data-index":e.index},g)}},"./api-dev/components/api-sidebar/APISidebarView.tsx":function(e,t,i){i.r(t);var o=i("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),n=i("../../packages/api-design/api-definition-ui/index.js"),s=i("./runtime-repl/sidebar-core/index.ts"),r=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./js/stores/SyncStatusStore.js"),d=i("./api-dev/components/api-sidebar/APISidebarListEmptyItem/APISidebarListEmptyItem.js"),c=i("./api-dev/stores/APIListStore.js"),u=i("./js/stores/StoreManager.js"),p=i("./api-dev/components/api-sidebar/APISidebarMenuGenericSidebar/APISidebarMenu.js"),m=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=i("./appsdk/sidebar/SidebarLoadingState/SidebarLoadingState.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),I=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),v=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),b=i("./js/constants/ResourceAnalyticsConstant.js"),E=i("./js/utils/client-load-analytics.js"),g=i("./api-dev/util/newrelicHelper.js"),_=i("./js/components/base/Buttons.js"),A=i("./runtime-repl/collection/modals/AddCollectionToAPIContainer.js"),C=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),S=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),T=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),y=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),P=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),O=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),N=i("./api-dev/components/api-sidebar/APISidebarBulkActions/index.ts"),L=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},j=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};let D=class extends r.PureComponent{constructor(e){super(e),this.state={searchQuery:""},this.apiListStore=(0,u.resolveStoreInstance)(c.default),this.setQueryText=this.setQueryText.bind(this),this.setTrackerForNewSidebar=this.setTrackerForNewSidebar.bind(this)}setQueryText(e){this.setState({searchQuery:e})}componentDidMount(){this.setTrackerForNewSidebar()}componentWillUnmount(){this.analyticsReactionDisposer&&this.analyticsReactionDisposer()}setTrackerForNewSidebar(){this.props.controller._apiSidebarAnalyticsSent||(performance.mark(b.PERF_MARK_NAMES.API_SIDEBAR_LOAD_START),this.analyticsReactionDisposer=(0,a.reaction)((()=>[this.apiListStore.isStoreHydrating,this.apiListStore.isLoaded,this.apiListStore.isErrorFetchingAPIs]),(([e,t,i],o)=>{this.sendComponentPerfAnalytics({isStoreHydrating:e,isLoaded:t,hasError:i},o)}),{fireImmediately:!0}))}getLoadingState(e,t){return e||!t}sendComponentPerfAnalytics({isStoreHydrating:e,isLoaded:t,hasError:i},o){var n,s,r;const a=this.getLoadingState(e,t);if(!this.props.controller._apiSidebarAnalyticsSent&&a&&!i){try{const e=performance.measure(b.PERF_MEASURE_NAMES.API_SIDEBAR_LOAD_TIME,b.PERF_MARK_NAMES.API_SIDEBAR_LOAD_START);(0,E.sendMeasureAnalytics)(e),(0,g.newrelicPageAction)(b.NEWRELIC_ACTION_NAME,{action:e.name,startTime:e.startTime,duration:e.duration?e.duration:0,apiCount:null===(r=null===(s=null===(n=this.props.controller)||void 0===n?void 0:n.baseItems)||void 0===s?void 0:s.get())||void 0===r?void 0:r.length,hasError:!!i})}catch(e){pm.logger.error("Failed to get API Sidebar load perf measure",e)}this.props.controller._apiSidebarAnalyticsSent=!0,(null==o?void 0:o.dispose)&&o.dispose()}}render(){var e;const t=(0,u.resolveStoreInstance)(l.default).isSocketConnected,{baseItems:i,fetchAPIs:o,sidebarModel:n}=this.props.controller,a=!!n;return this.apiListStore.isErrorFetchingAPIs&&t?r.createElement("div",{className:"api-sidebar"},r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement("div",{className:"sidebar-error-view","data-testId":"test-sidebar-error-view"},r.createElement("div",{className:"sidebar-error-view__illustration"},r.createElement(f.default,null)),r.createElement("div",{className:"sidebar-error-view__head-and-body"},r.createElement("div",{className:"sidebar-error-view__title"},r.createElement(I.default,{type:"h4",color:"content-color-secondary",text:"Couldnt fetch your data"})),r.createElement("div",{className:"sidebar-error-view__description"},r.createElement(v.default,{type:"body-medium",color:"content-color-secondary"},"Just a faulty wire. Your data is safely synced to Postmans servers."))),r.createElement("div",{className:"sidebar-error-view__cta"},r.createElement(_.Button,{type:"text",onClick:()=>this.apiListStore.refresh()},"Refresh")))):this.apiListStore.isStoreHydrating||!this.apiListStore.isLoaded&&!this.apiListStore.isErrorFetchingAPIs||!a?r.createElement("div",{className:"api-sidebar"},r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement("div",{className:"api-sidebar-list is-empty","data-testId":"test-api-sidebar-list-loading"},r.createElement(h.default,null))):(null===(e=null==i?void 0:i.get())||void 0===e?void 0:e.length)?r.createElement("div",{className:"api-sidebar"},r.createElement(A.default,null),r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement(s.SidebarView,{searchQuery:this.state.searchQuery,bulkActionsConfig:{enabled:!0,onBulkAction:N.handleAction,allowedItems:N.allowedItems,allowedActions:N.allowedActions,shouldClearPreviousSelection:N.shouldClearPreviousSelection,analyticsEventCategory:"api-sidebar-bulk-actions"},onDrop:w,controller:this.props.controller})):r.createElement("div",{className:"api-sidebar"},r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement(d.default,{apiListStore:(0,u.resolveStoreInstance)(c.default)}))}};function w(e,t){return j(this,void 0,void 0,(function*(){if(null==t?void 0:t.item)return t.item instanceof C.default||t.item instanceof S.default||t.item instanceof T.default||t.item instanceof y.default||t.item instanceof P.default||t.item instanceof O.default?(0,o.handleMove)(e,t):t.item instanceof n.DefinitionFolder?(0,n.handleMove)(e,t):void 0}))}D=L([m.observer],D),t.default=D},"./api-dev/controllers/APISidebarController.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var o=i("./api-dev/interfaces/APIInterface.js"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./runtime-repl/sidebar-core/index.ts"),r=i("../../packages/api-design/api-definition-ui/index.js"),a=i("./api-dev/sidebar/APISidebarItem.ts"),l=i("./api-dev/sidebar/GitLinkedAPISidebarItem.ts"),d=i("./api-dev/sidebar/VersionViewAPISidebarItem.ts"),c=i("./js/stores/StoreManager.js"),u=i("./api-dev/stores/APISidebarStore.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./js/services/NavigationService.js"),h=i("./node_modules/lodash/lodash.js"),f=i.n(h),I=i("./api-dev/sidebar/UnmigratedGitLinkedAPISidebarItem.ts"),v=i("./api-dev/sidebar/UnmigratedVersionViewAPISidebarItem.ts"),b=i("./api-dev/sidebar/UnmigratedAPISidebarItem.ts"),E=i("./api-dev/sidebar/MigratingStateAPISidebarItem.ts"),g=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class _ extends s.BaseSidebarController{constructor(){super(...arguments),this._apiSidebarAnalyticsSent=!1,this.baseItems=(0,n.computed)((()=>[]))}getPartialPathToActiveItem(){var e,t,i;return g(this,void 0,void 0,(function*(){const{apiId:o,cid:n,fid:s,eid:a,rid:l,collectionUid:d,versionId:u}=m.default.getCurrentRouteParams(),h=(0,r.definitionActiveItemIds)();if(!o)return pm.logger.info("APISidebarController~getPartialPathToActiveItem: Did not find API ID in URL"),[];if(h.length)return h.filter(Boolean);if(d)return[o,d];if(!(n||s||l))try{const{searchParams:e}=new URL(m.default.getCurrentURL(),m.default.getBaseURL());if(e.has("collection"))return[]}catch(e){}if(u)return[u].filter(Boolean);const f=(0,c.resolveStoreInstance)(p.default).find(o);if(!f)return[];if(f.isMigrated)return[o,a,n,s,l].filter(Boolean);return[new Set(null===(i=null===(t=null===(e=f.childEntities)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map)||void 0===i?void 0:i.call(t,(e=>e.id))),a,n,s,l].filter(Boolean)}))}fetchAPIs(){return g(this,void 0,void 0,(function*(){try{const e=yield(0,o.getAllAPIsComputed)(),t=(0,n.computed)((()=>e.get().reduce(((e,t)=>{if(t)return t.isMigrated?e.push(t):e.push(...t.childEntities.values),e}),[]))),i=e=>{var t,i,n;if(!e)return;const s=(0,c.resolveStoreInstance)(p.default),r="apiVersion"===e.type?s.find(e.parentEntityId):e;if(r){if(null==r?void 0:r.isMigrating)return new E.default(e,r);if(!r.isMigrated)return(0,o.isV9GitConnected)(r.id,e.id)?new I.default(e,r):"version"===e.mode.name?new v.default(e,r):new b.default(e,r);switch(null===(i=null===(t=e.computedVersion)||void 0===t?void 0:t.mode)||void 0===i?void 0:i.name){case"branch":return new l.default(e);case"builder":return new a.default(e);case"version":return new d.default(e);default:return pm.logger.warn("APISidebarView~fetchAPIs: unknown api mode",null===(n=null==e?void 0:e.computedVersion)||void 0===n?void 0:n.mode),new a.default(e)}}},r=(e,t)=>{var i,o,n,s,r,a,l,d,u,m;if(e&&t._item&&e!==t._item)return!0;const h=(0,c.resolveStoreInstance)(p.default),f="apiVersion"===e.type?h.find(e.parentEntityId):e;if(f.isMigrating!==t.storeItemCachedProperties.isMigrating)return!0;if(f.isMigrating)return!1;if(f.isMigrated!==t.storeItemCachedProperties.isMigrated)return!0;const I={name:"",value:""};return f.isMigrated?(I.name=(null===(o=null===(i=e.computedVersion)||void 0===i?void 0:i.mode)||void 0===o?void 0:o.name)||"",I.value=(null===(s=null===(n=e.computedVersion)||void 0===n?void 0:n.mode)||void 0===s?void 0:s.value)||""):(I.name=(null===(a=null===(r=e.apiRepositoryStore)||void 0===r?void 0:r.apiVersionRepositoryInterface)||void 0===a?void 0:a.remoteGitConfigured)?"branch":(null===(l=null==e?void 0:e.mode)||void 0===l?void 0:l.name)||"",I.value=null===(d=e.mode)||void 0===d?void 0:d.value),I.name!==(null===(u=null==t?void 0:t.storeItemCachedProperties)||void 0===u?void 0:u.modeName)||I.value!==(null===(m=null==t?void 0:t.storeItemCachedProperties)||void 0===m?void 0:m.modeValue)},u=(e,t)=>{var i,o;return Object.assign(Object.assign({},t.nrLogPayload),{newModeName:null===(i=e.mode)||void 0===i?void 0:i.name,newModeValue:null===(o=e.mode)||void 0===o?void 0:o.value})},m=25,h=1e4,g=50,_=(0,s.computedArray)(t,i,r,{analyticsPayloadGenerator:u,NRThresholdCount:m,windowDuration:h,circuitBreakerThreshold:g});this.baseItems=(0,n.computed)((()=>f().sortBy(_.get(),(e=>[f().toLower(f().get(e,"name")),f().get(e,"_.item.createdAt")]))))}catch(e){pm.logger.error("APISidebarController~fetchAPIs: Failed to load apis",e)}}))}didCreate(){return g(this,void 0,void 0,(function*(){const e=(0,c.resolveStoreInstance)(p.default);!1===e.hasHydratedAtleastOnce&&e.init(),this.store=(0,c.resolveStoreInstance)(u.default),this.store.setSearchQuery(""),this.fetchAPIs().then((()=>{this.initSidebarModel(this.baseItems,this.getPartialPathToActiveItem)}))}))}beforeDestroy(){var e;null===(e=this.sidebarEnableAutorun)||void 0===e||e.call(this);(0,c.resolveStoreInstance)(p.default).dispose(),this.store=null,this.disposeSidebarModel()}}},"./api-dev/sidebar/APISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return D}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./js/stores/StoreManager.js"),r=i("./api-dev/interfaces/APIInterface.js"),a=i("../../packages/api-design/api-definition-store/index.js"),l=i("../../packages/api-design/api-definition-ui/index.js"),d=i("./api-dev/stores/APIListStore.js"),c=i("./appsdk/workbench/WorkbenchService.js"),u=i("./api-dev/services/APIPermissionService.js"),p=i("./js/modules/services/ShareModalService.js"),m=i("./js/modules/services/ManageRolesModalService.js"),h=i("./js/services/NavigationService.js"),f=i("./js/stores/CurrentUserStore.js"),I=i("./collaboration/utils/workspace.js"),v=i("./js/stores/SyncStatusStore.js"),b=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),E=i("./api-dev/sidebar/APISidebarListItemEmptyEditable.tsx"),g=i("./api-dev/constants/APIActionsConstants.js"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),C=i("./api-dev/constants/Permissions.js"),S=i("./js/utils/TabOpeningUtil.js"),T=i("./api-dev/sidebar/APISidebarListItemEmpty.tsx"),y=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),P=i("./runtime-repl/environment/_api/EnvironmentSidebarStore.ts"),O=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),N=i("./api-dev/constants/APITooltips.js"),L=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},j=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class D extends y.default{constructor(e){var t,i,o,r,d;super(e),this.definitionReaction=null,this.dataTestIdSuffix="api",this.analyticsEventCategory="api-item-builder-mode",this.collectionStore=null,this.apiDefinitionModel=void 0,this.isDefinitionLoaded=!1,this.onDropdownOpen=()=>j(this,void 0,void 0,(function*(){var e;const t=(0,s.resolveStoreInstance)(a.APIDefinitionStore),i=yield t.getDefinitionFromAPI(this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode);i&&i.getFileContent({fileId:i.mainNodeId}),(0,n.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=i}));const o=(0,s.resolveStoreInstance)(_.default).id;this.collectionStore=yield(0,O.subscribeMeta)(o)})),this.getChildren=()=>j(this,void 0,void 0,(function*(){this.registerDefinitionRelationReaction();const e=yield(0,b.getCollections)(this),t=yield(0,P.getEnvironments)(this);return yield(0,n.when)((()=>void 0!==this.apiDefinitionModel),{timeout:5e3}),this.apiDefinitionModel&&(yield(0,n.when)((()=>{var e;return null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.hasFileTreeLoaded}))),(0,n.computed)((()=>{var i;let o;if(!this.isEditable)return[];if(!this.apiDefinitionModel||this.apiDefinitionModel.isEmpty)o=[];else{const e=null===(i=this.apiDefinitionModel)||void 0===i?void 0:i.getRootNode();o=[new l.DefinitionFolder(e,this,this.apiDefinitionModel)]}return[...o,...e.get(),...t.get()]}))})),this.getApiVersionId=()=>{var e;return null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},this.onClick=()=>{h.default.transitionTo("build.api",{apiId:this.id})},this.allowedDropTargets=[],this.userCanExpand=!0,this.setContext({apiId:this._item.id,api:e,apiMode:null===(t=e.computedVersion)||void 0===t?void 0:t.mode,isApiMigrated:!0}),this.onDropdownOpen=this.onDropdownOpen.bind(this),this.apiMode={name:null===(o=null===(i=e.computedVersion)||void 0===i?void 0:i.mode)||void 0===o?void 0:o.name,value:null===(d=null===(r=e.computedVersion)||void 0===r?void 0:r.mode)||void 0===d?void 0:d.value}}get name(){return this._item.parentEntityName||this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){if(this.definitionReaction)return;const e=(0,s.resolveStoreInstance)(a.APIDefinitionStore);this.definitionReaction=(0,n.reaction)((()=>{var e,t,i;return null===(i=null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.relationsStore)||void 0===t?void 0:t.relations)||void 0===i?void 0:i.apiDefinition}),(()=>j(this,void 0,void 0,(function*(){var t,i;if(!(null===(t=this._item.computedVersion)||void 0===t?void 0:t.mode))return;const o=yield e.getDefinitionFromAPI(this.id,null===(i=this._item.computedVersion)||void 0===i?void 0:i.mode);(0,n.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=o}))}))),{fireImmediately:!0})}onDispose(){var e,t;null===(e=this.definitionReaction)||void 0===e||e.call(this),null===(t=this.collectionStore)||void 0===t||t.unsubscribe()}getSidebarRouteConfig(){var e;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this.id,versionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},isNonLink:!0}}getActions(){var e,t,i,n,a;const h=this.id;let b=!(0,s.resolveStoreInstance)(v.default).isSocketConnected;const E=(0,s.resolveStoreInstance)(d.default).permissions,_=!!(0,s.resolveStoreInstance)(f.default).team,A=this.isEditable,T=_&&!(0,I.isPublicUserForWorkspace)()&&!(0,s.resolveStoreInstance)(f.default).isCurrentUserPartner,y=this._item.isMigrating,P=u.default.hasPermission(E,"renameAPIVersion","api",h),O=u.default.hasPermission(E,"delete","api",h),L=y&&C.API_MIGRATION_DISABLED_TEXT||!A&&C.API_PERMISSION_ERROR,j=y&&C.API_MIGRATION_DISABLED_TEXT||!b&&!_&&C.MANAGE_ROLES_DISABLED_TEXT||!A&&C.API_PERMISSION_ERROR,{generateCollectionDisabledMsg:D,isGenerateCollectionButtonDisabled:w}=(0,l.getGenerateCollectionIsDisabledAndMsg)(this.apiDefinitionModel),R=this.collectionStore?this.collectionStore.list.length:0,x=!this.apiDefinitionModel||(null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.isEmpty),M=this.isDefinitionLoaded&&(!this.apiDefinitionModel||this.apiDefinitionModel.hasFileTreeLoaded),k=!(!A||b||y)&&M&&x,F=x?!L:M?l.DEFINITION_AVAILABLE_TEXT:"";return[c.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(b||y),tooltip:L,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,S.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!b,handler:()=>{(0,p.shareAPI)(this.id,{origin:"sidebar"})}},{name:"Move",isEnabled:!(!A||b||y||(0,s.resolveStoreInstance)(f.default).isCurrentUserPartner),tooltip:L,handler:()=>{(0,p.moveAPI)(this.id,this.name,{origin:"sidebar"})}},{name:"Manage Roles",isEnabled:!(!A||b||y||!T),tooltip:j,handler:()=>{(0,m.manageRolesOnAPI)(this.id,{origin:"sidebar"})}},"version"!==(null===(i=null===(t=this._item.computedVersion)||void 0===t?void 0:t.mode)||void 0===i?void 0:i.name)&&A&&{name:"Add definition",isEnabled:k,tooltip:F,subMenu:!y&&k&&[{name:"Import files",isEnabled:!0,handler:()=>{(0,l.navigateToImportDefinition)({apiId:this.id},"api-sidebar-option")}},{name:"Author from scratch",isEnabled:!0,tooltip:L,handler:()=>{(0,l.navigateToAuthorFromScratch)({apiId:this.id},"api-sidebar-option")}}]},"version"!==(null===(a=null===(n=this._item.computedVersion)||void 0===n?void 0:n.mode)||void 0===a?void 0:a.name)&&A&&{name:"Add Collection",isEnabled:!(!A||b||y),tooltip:L,subMenu:!y&&[{name:"Copy existing collection",isEnabled:!b&&R>0,tooltip:R>0?null:N.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>{var e;const t={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_COPY_EXISTING_COLLECTION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{type:g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(b||w),tooltip:D,handler:()=>{var e;const t={definitionModel:this.apiDefinitionModel};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{name:"Create new collection",isEnabled:!b,handler:()=>{var e;const t={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_CREATE_NEW_COLLECTION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(!A||b||!P||y),tooltip:L,handler:e=>{(0,r.migrateAPI)(this.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,s.resolveStoreInstance)(d.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(!A||b||!O||y),tooltip:L,handler:()=>pm.mediator.trigger("showAPIDeleteModal",this.id)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?E.default:T.default}get isEditable(){return this._item.isEditable||void 0===this._item.isEditable}get isLoading(){return!this._item.isLoaded}get meta(){var e,t;const i=[],o=(0,s.resolveStoreInstance)(_.default),n=o.isPublicWorkspace,r=o.isPartnerWorkspace,a=o.isTeamWorkspace||o.isPrivateWorkspace,l="apiVersion"===this._item.type&&"private"===this._item.visibility&&!(null===(e=this._item)||void 0===e?void 0:e.isMigrated),d=!this._item.isPublic&&Boolean(null===(t=this._item)||void 0===t?void 0:t.team)&&!a&&!r;return this.isEditable||i.push(A.ReadOnlyIcon),this._item.isPublic&&!n&&i.push(A.PublicIcon),d&&i.push(A.TeamIcon),l&&i.push(A.PrivateVersionIcon),{iconsAfterText:i}}}L([n.observable],D.prototype,"apiDefinitionModel",void 0),L([n.observable],D.prototype,"isDefinitionLoaded",void 0),L([n.computed],D.prototype,"name",null),L([n.computed],D.prototype,"id",null),L([n.computed],D.prototype,"isPendingCreate",null),L([n.computed],D.prototype,"emptyState",null),L([n.computed],D.prototype,"isEditable",null),L([n.computed],D.prototype,"isLoading",null),L([n.computed],D.prototype,"meta",null)},"./api-dev/sidebar/APISidebarItemIcons.tsx":function(e,t,i){i.r(t),i.d(t,{BranchName:function(){return E},PrivateVersionIcon:function(){return h},PublicIcon:function(){return v},ReadOnlyIcon:function(){return I},TeamIcon:function(){return f},VersionName:function(){return b}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke-small.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-team-stroke.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-locked-stroke.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-published-stroke.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke-small.js"),p=i("./node_modules/lodash/lodash.js"),m=i.n(p);function h(){return o.createElement(n.default,{content:"Only visible to editors",placement:"bottom-start"},o.createElement(a.default,{className:"hide-icon",color:"content-color-tertiary",size:"small"}))}function f(){return o.createElement(l.default,{color:"content-color-tertiary",size:"small",title:"Shared with team"})}function I(){return o.createElement(d.default,{color:"content-color-tertiary",size:"small",title:"Read only"})}function v(){return o.createElement(c.default,{color:"content-color-tertiary",size:"small",title:"Read only"})}function b(e){return()=>o.createElement(s.default,{direction:"row",alignItems:"center",gap:"spacing-xs"},o.createElement(r.default,{color:"content-color-secondary",isTruncated:!0},o.createElement("div",{title:e},e)))}function E(e){return()=>o.createElement(s.default,{alignItems:"center","data-testid":"branch-icon"},m().isEmpty(e)?o.createElement(u.default,{color:"content-color-tertiary"}):o.createElement(n.default,{content:e,placement:"right"},o.createElement(u.default,{color:"content-color-tertiary"})))}},"./api-dev/sidebar/APISidebarListItemEmpty.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=e=>{const t=o.useRef(null);return o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(t.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(t.current,e.index))),[t.current]),o.createElement("div",{className:"api-sidebar-list__item-empty-state",ref:t,"data-index":e.index},o.createElement(n.default,{type:"body-medium",color:"content-color-secondary"},"No versions published"))}},"./api-dev/sidebar/APISidebarListItemEmptyEditable.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js"),s=i("../../packages/api-design/api-definition-ui/index.js");t.default=({item:e})=>o.createElement("span",{className:"api-sidebar-list__empty-item__content","data-testId":"create-definition"},o.createElement(n.Button,{type:"text",className:"learn-more-link","data-testId":"create-definition-import",onClick:()=>{let t=e.parent.id;(0,s.navigateToImportDefinition)({apiId:t},"api-empty-state")}},"Import")," ","or"," ",o.createElement(n.Button,{type:"text",className:"learn-more-link","data-testId":"create-definition-scratch",onClick:()=>{let t=e.parent.id;(0,s.navigateToAuthorFromScratch)({apiId:t},"api-empty-state")}},"create")," ","a new definition file to get started.")},"./api-dev/sidebar/APISidebarListItemEmptyUnMigrated.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js"),s=i("../../packages/api-design/api-definition-ui/index.js"),r=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};t.default=({item:e})=>o.createElement("span",{className:"api-sidebar-list__empty-item__content","data-testId":"create-definition"},o.createElement(n.Button,{type:"text",className:"learn-more-link","data-testId":"create-definition-import",onClick:()=>r(void 0,void 0,void 0,(function*(){yield(0,s.navigateToImportDefinition)({apiId:e.parent.parentAPI.id,apiVersionId:e.parent.id},"api-empty-state")}))},"Import")," ","or"," ",o.createElement(n.Button,{type:"text",className:"learn-more-link","data-testId":"create-definition-scratch",onClick:()=>r(void 0,void 0,void 0,(function*(){yield(0,s.navigateToAuthorFromScratch)({apiId:e.parent.parentAPI.id,apiVersionId:e.parent.id},"api-empty-state")}))},"create")," ","a new definition file to get started.")},"./api-dev/sidebar/BaseAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{BaseUnmigratedAPISidebarItem:function(){return r},default:function(){return a}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};class r extends o.SidebarItem{constructor(e){var t,i,o,n;super(),this.dataTestIdSuffix="api",this.allowedDropTargets=[],this.userCanExpand=!0,this._item=e,this.storeItemCachedProperties={modeName:(null===(i=null===(t=e.apiRepositoryStore)||void 0===t?void 0:t.apiVersionRepositoryInterface)||void 0===i?void 0:i.remoteGitConfigured)?"branch":(null===(o=null==e?void 0:e.mode)||void 0===o?void 0:o.name)||"",modeValue:(null===(n=null==e?void 0:e.mode)||void 0===n?void 0:n.value)||"",isMigrated:!1,isMigrating:!1,id:e.id,itemType:"api"},this.nrLogPayload=this.storeItemCachedProperties}get id(){return this._item.id}}s([n.computed],r.prototype,"id",null);class a extends o.SidebarItem{constructor(e){var t,i,o,n;super(),this.dataTestIdSuffix="api",this.allowedDropTargets=[],this.userCanExpand=!0,this._item=e,this.storeItemCachedProperties={modeName:(null===(i=null===(t=e.computedVersion)||void 0===t?void 0:t.mode)||void 0===i?void 0:i.name)||"",modeValue:(null===(n=null===(o=e.computedVersion)||void 0===o?void 0:o.mode)||void 0===n?void 0:n.value)||"",isMigrated:!0,isMigrating:!1,id:e.id,itemType:"api"},this.nrLogPayload=this.storeItemCachedProperties}get id(){return this._item.id}}s([n.computed],a.prototype,"id",null)},"./api-dev/sidebar/GitLinkedAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/constants/Permissions.js"),d=i("../../packages/api-design/api-definition-ui/index.js"),c=i("./api-dev/interfaces/APIInterface.js"),u=i("./api-dev/stores/APIListStore.js"),p=i("./appsdk/workbench/WorkbenchService.js"),m=i("./api-dev/services/APIPermissionService.js"),h=i("./js/modules/services/ShareModalService.js"),f=i("./js/modules/services/ManageRolesModalService.js"),I=i("./js/services/NavigationService.js"),v=i("./js/stores/CurrentUserStore.js"),b=i("./collaboration/utils/workspace.js"),E=i("./js/stores/SyncStatusStore.js"),g=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),_=i("./api-dev/constants/APIActionsConstants.js"),A=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),C=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),S=i("./js/utils/TabOpeningUtil.js"),T=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx"),y=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemGitError.tsx"),P=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),O=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),N=i("./api-dev/constants/APITooltips.js"),L=i("./api-dev/sidebar/APISidebarListItemEmptyEditable.tsx"),j=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},D=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class w extends P.default{constructor(e){var t,i,o,n,l;super(e),this.dataTestIdSuffix="api",this.analyticsEventCategory="api-item-branch-mode",this.collectionStore=null,this.onDropdownOpen=()=>D(this,void 0,void 0,(function*(){const e=s().get(this._item.computedVersion,"apiRepositoryStore.entityHandlers.schemas.store");null==e||e.getFileContent({fileId:e.mainNodeId});const t=(0,a.resolveStoreInstance)(A.default).id;this.collectionStore=yield(0,O.subscribeMeta)(t)})),this.getChildren=()=>D(this,void 0,void 0,(function*(){var e,t;yield null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.populateReleaseStore();const i=yield(0,g.getCollections)(this);return yield(0,r.when)((()=>{var e,t,i,o;return null===(o=null===(i=null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===t?void 0:t.entityHandlers)||void 0===i?void 0:i.schemas)||void 0===o?void 0:o.store})),(0,r.computed)((()=>{if(!this.isChildrenRenderingAllowed)return[];let e=[];const t=s().get(this._item.computedVersion,"apiRepositoryStore.entityHandlers.schemas.store"),o=null==t?void 0:t.getRootNode();return!t||t.isEmpty?[...i.get()]:(e=[new d.DefinitionFolder(o,this,t)],[...e,...i.get()])}))})),this.getApiVersionId=()=>{var e;return null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},this.onClick=()=>{I.default.transitionTo("build.api",{apiId:this.id})},this.allowedDropTargets=[],this.userCanExpand=!0,this.setContext({apiId:this._item.id,api:e,apiMode:null===(t=e.computedVersion)||void 0===t?void 0:t.mode,isApiMigrated:!0}),this.init(),this.apiMode={name:null===(o=null===(i=e.computedVersion)||void 0===i?void 0:i.mode)||void 0===o?void 0:o.name,value:null===(l=null===(n=e.computedVersion)||void 0===n?void 0:n.mode)||void 0===l?void 0:l.value}}init(){return D(this,void 0,void 0,(function*(){this.onDropdownOpen=this.onDropdownOpen.bind(this)}))}onDispose(){var e;null===(e=this.collectionStore)||void 0===e||e.unsubscribe()}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}get isChildrenRenderingAllowed(){var e,t,i;return null===(i=null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===t?void 0:t.canEditAPISource)||void 0===i?void 0:i.allowed}getSidebarRouteConfig(){var e;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this.id,versionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},isNonLink:!0}}getActions(){const e=this.parent?this.parent.id:null;let t=!(0,a.resolveStoreInstance)(E.default).isSocketConnected;const i=(0,a.resolveStoreInstance)(u.default).permissions,n=!!(0,a.resolveStoreInstance)(v.default).team,r=n&&!(0,b.isPublicUserForWorkspace)()&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,I=this._item.isMigrating,g=m.default.hasPermission(i,"renameAPIVersion","api",e),A=m.default.hasPermission(i,"delete","api",e),C=this.isEditable,T=I&&l.API_MIGRATION_DISABLED_TEXT||!C&&l.API_PERMISSION_ERROR,y=I&&l.API_MIGRATION_DISABLED_TEXT||!t&&!n&&l.MANAGE_ROLES_DISABLED_TEXT||!C&&l.API_PERMISSION_ERROR,P=s().get(this._item.computedVersion,"apiRepositoryStore.entityHandlers.schemas.store"),{generateCollectionDisabledMsg:O,isGenerateCollectionButtonDisabled:L}=(0,d.getGenerateCollectionIsDisabledAndMsg)(P),j=this.collectionStore?this.collectionStore.list.length:0,D=!P||(null==P?void 0:P.isEmpty),w=!(!C||t||I)&&D;return[p.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(t||I),tooltip:T,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,S.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!t,handler:()=>{(0,h.shareAPI)(this.id,{origin:"sidebar"})}},{name:"Move",isEnabled:!(t||I||(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner),tooltip:T,handler:()=>{(0,h.moveAPI)(this.id,this.name,{origin:"sidebar"})}},{name:"Manage Roles",isEnabled:!(t||I||!r),tooltip:y,handler:()=>{(0,f.manageRolesOnAPI)(this.id,{origin:"sidebar"})}},"version"!==s().get(this._item,"mode.name")&&C&&{name:"Add definition",isEnabled:w,tooltip:D?!T:d.DEFINITION_AVAILABLE_TEXT,subMenu:!I&&D&&[{name:"Import files",isEnabled:!0,handler:()=>{(0,d.navigateToImportDefinition)({apiId:this.id},"api-sidebar-option")}},{name:"Author from scratch",isEnabled:!0,tooltip:T,handler:()=>{(0,d.navigateToAuthorFromScratch)({apiId:this.id},"api-sidebar-option")}}]},"version"!==s().get(this._item,"mode.name")&&C&&{name:"Add Collection",isEnabled:!(t||I),tooltip:T,subMenu:!I&&[{name:"Copy existing collection",isEnabled:!t&&j>0,tooltip:j>0?null:N.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>{var e;const t={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",_.ACTION_TYPE_COPY_EXISTING_COLLECTION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{type:_.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(t||L),tooltip:O,handler:()=>{var e;const t={definitionModel:P};pm.mediator.trigger("showAddCollectionToAPIModal",_.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{name:"Create new collection",isEnabled:!t,handler:()=>{var e,t;const i={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",_.ACTION_TYPE_CREATE_NEW_COLLECTION,this.context.apiId,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.mode,i)}}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(t||!g||I),tooltip:T,handler:e=>{(0,c.migrateAPI)(this.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(u.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(t||!A||I),tooltip:T,handler:()=>pm.mediator.trigger("showAPIDeleteModal",this.id)})].filter(Boolean)}get emptyState(){return this.isEditable?this.isChildrenRenderingAllowed?L.default:y.default:T.default}get actions(){return this.getActions()}get isEditable(){return!1!==this._item.isEditable}get isLoading(){return!this._item.isLoaded}get meta(){var e,t,i;const o=[],n=(0,a.resolveStoreInstance)(A.default),s=n.isPublicWorkspace,r=n.isPartnerWorkspace,l=n.isTeamWorkspace||n.isPrivateWorkspace,d=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!l&&!r,c=null===(i=null===(t=this._item.computedVersion)||void 0===t?void 0:t.apiRepositoryStore)||void 0===i?void 0:i.branch;return c&&o.push((0,C.BranchName)(c)),this.isEditable||o.push(C.ReadOnlyIcon),this._item.isPublic&&!s&&o.push(C.PublicIcon),d&&o.push(C.TeamIcon),{iconsAfterText:o}}}j([r.computed],w.prototype,"name",null),j([r.computed],w.prototype,"id",null),j([r.computed],w.prototype,"isPendingCreate",null),j([r.computed],w.prototype,"isChildrenRenderingAllowed",null),j([r.computed],w.prototype,"emptyState",null),j([r.computed],w.prototype,"isEditable",null),j([r.computed],w.prototype,"isLoading",null),j([r.computed],w.prototype,"meta",null)},"./api-dev/sidebar/MigratingStateAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var o=i("../../node_modules/mobx/lib/mobx.module.js"),n=i("./js/stores/StoreManager.js"),s=i("./api-dev/stores/APISidebarStore.js"),r=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),a=i("./node_modules/lodash/lodash.js"),l=i.n(a),d=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},c=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class u extends r.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,r;super(e),this.definitionReaction=null,this.dataTestIdSuffix="api",this.isMigrated=!1,this.apiDefinitionModel=void 0,this.getChildren=()=>c(this,void 0,void 0,(function*(){return(0,o.computed)((()=>[]))})),this.onClick=()=>{(0,n.resolveStoreInstance)(s.default).handleNavigationToAPI(this.id,this._item)},this.allowedDropTargets=[],this.userCanExpand=!1,this.parentAPI=t,this.apiMode={name:null===(i=e.mode)||void 0===i?void 0:i.name,value:null===(r=null==e?void 0:e.mode)||void 0===r?void 0:r.value},this.storeItemCachedProperties.isMigrating=!0,this.storeItemCachedProperties.isMigrated=!0}get name(){return`${l().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get actions(){return[]}get isEditable(){return!1}get isLoading(){return this._item.isMigrating}}d([o.observable],u.prototype,"apiDefinitionModel",void 0),d([o.computed],u.prototype,"name",null),d([o.computed],u.prototype,"id",null),d([o.computed],u.prototype,"actions",null),d([o.computed],u.prototype,"isEditable",null),d([o.computed],u.prototype,"isLoading",null)},"./api-dev/sidebar/UnmigratedAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return R}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/interfaces/APIInterface.js"),d=i("../../packages/api-design/api-definition-store/index.js"),c=i("../../packages/api-design/api-definition-ui/index.js"),u=i("./api-dev/sidebar/APISidebarListItemEmptyUnMigrated.tsx"),p=i("./api-dev/stores/APIListStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),f=i("./js/modules/services/ShareModalService.js"),I=i("./js/modules/services/ManageRolesModalService.js"),v=i("./js/stores/CurrentUserStore.js"),b=i("./collaboration/utils/workspace.js"),E=i("./js/stores/SyncStatusStore.js"),g=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),_=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),A=i("./api-dev/constants/APITooltips.js"),C=i("./api-dev/constants/APIActionsConstants.js"),S=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),T=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),y=i("./api-dev/constants/Permissions.js"),P=i("./js/utils/TabOpeningUtil.js"),O=i("./api-dev/sidebar/APISidebarListItemEmpty.tsx"),N=i("./api-dev/stores/APISidebarStore.js"),L=i("./runtime-repl/environment/_api/EnvironmentSidebarStore.ts"),j=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),D=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class R extends j.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,o;super(e),this.definitionReaction=null,this.dataTestIdSuffix="api",this.isMigrated=!1,this.analyticsEventCategory="unmigratedApi-item-builder-mode",this.collectionStore=null,this.apiDefinitionModel=void 0,this.isDefinitionLoaded=!1,this.onDropdownOpen=()=>w(this,void 0,void 0,(function*(){const e=(0,a.resolveStoreInstance)(d.APIDefinitionStore),t=yield e.getDefinitionFromAPI(this._item.parentEntityId,this._item.mode,this._item.id);t&&t.getFileContent({fileId:t.mainNodeId}),(0,r.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=t}));const i=(0,a.resolveStoreInstance)(S.default).id;this.collectionStore=yield(0,_.subscribeMeta)(i)})),this.getChildren=()=>w(this,void 0,void 0,(function*(){this.registerDefinitionRelationReaction(),yield(0,r.when)((()=>this._item.isLoaded));const e=yield(0,g.getUnmigratedCollections)(this),t=yield(0,L.getEnvironments)(this);return yield(0,r.when)((()=>void 0!==this.apiDefinitionModel)),this.apiDefinitionModel&&(yield(0,r.when)((()=>{var e;return null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.hasFileTreeLoaded}))),(0,r.computed)((()=>{var i;let o;if(this.apiDefinitionModel){const e=null===(i=this.apiDefinitionModel)||void 0===i?void 0:i.getRootNode();o=[new c.UnmigratedDefinitionFolder(e,this,this.apiDefinitionModel)]}else o=[];return[...o,...e.get(),...t.get()]}))})),this.getApiVersionId=()=>this._item.id,this.onClick=()=>{(0,a.resolveStoreInstance)(N.default).handleNavigationToAPI(this._item.id,this._item)},this.allowedDropTargets=[],this.userCanExpand=!0,this.parentAPI=t,this.setContext({apiId:this._item.parentEntityId,apiVersion:e,apiVersionId:this._item.id,apiMode:null==e?void 0:e.mode,isApiMigrated:!1}),this.onDropdownOpen=this.onDropdownOpen.bind(this),this.apiMode={name:null===(i=e.mode)||void 0===i?void 0:i.name,value:null===(o=null==e?void 0:e.mode)||void 0===o?void 0:o.value},this.storeItemCachedProperties.isMigrated=!1}get name(){var e;return 1===s().get(this.parentAPI,"childEntities.values.length")?null===(e=this.parentAPI)||void 0===e?void 0:e.name:`${s().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){if(this.definitionReaction)return;const e=(0,a.resolveStoreInstance)(d.APIDefinitionStore);this.definitionReaction=(0,r.reaction)((()=>{var e,t,i,o,n,s;return(null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.relationsStore)||void 0===t?void 0:t.relations)||void 0===i?void 0:i.schema)||(null===(s=null===(n=null===(o=this._item)||void 0===o?void 0:o.relationsStore)||void 0===n?void 0:n.relations)||void 0===s?void 0:s.apiDefinition)}),(()=>w(this,void 0,void 0,(function*(){var t;const i=yield e.getDefinitionFromAPI(this._item.parentEntityId,null===(t=this._item)||void 0===t?void 0:t.mode,this._item.id);(0,r.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=i}))}))),{fireImmediately:!0})}onDispose(){var e,t;null===(e=this.definitionReaction)||void 0===e||e.call(this),null===(t=this.collectionStore)||void 0===t||t.unsubscribe()}getSidebarRouteConfig(){var e,t;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:null===(e=this.context)||void 0===e?void 0:e.apiId,versionId:null===(t=this._item)||void 0===t?void 0:t.id},isNonLink:!0}}getActions(){var e;const t=this.parent?this.parent.id:null;let i=!(0,a.resolveStoreInstance)(E.default).isSocketConnected;const n=(0,a.resolveStoreInstance)(p.default).permissions,r=!!(0,a.resolveStoreInstance)(v.default).team,d=this.isEditable,u=r&&!(0,b.isPublicUserForWorkspace)()&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,g=this._item.isMigrating,_=h.default.hasPermission(n,"renameAPIVersion","api",t),S=h.default.hasPermission(n,"delete","api",t),T=g&&y.API_MIGRATION_DISABLED_TEXT||!d&&y.API_PERMISSION_ERROR,O=g&&y.API_MIGRATION_DISABLED_TEXT||!i&&!r&&y.MANAGE_ROLES_DISABLED_TEXT||!d&&y.API_PERMISSION_ERROR,{generateCollectionDisabledMsg:N,isGenerateCollectionButtonDisabled:L}=(0,c.getGenerateCollectionIsDisabledAndMsg)(this.apiDefinitionModel),j=this.collectionStore?this.collectionStore.list.length:0,D=this.isDefinitionLoaded&&(!this.apiDefinitionModel||this.apiDefinitionModel.hasFileTreeLoaded),R=!this.apiDefinitionModel||(null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.isEmpty),x=!(!d||i||g)&&D&&R,M=R?!T:D?c.DEFINITION_AVAILABLE_TEXT:"";return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(i||g),tooltip:T,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,P.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!i,handler:()=>{(0,f.shareAPI)(this._item.parentEntityId,{origin:"sidebar"})}},{name:"Move",isEnabled:!(!d||i||g||(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner),tooltip:T,handler:()=>{(0,f.moveAPI)(this._item.parentEntityId,this.name,{origin:"sidebar"})}},{name:"Manage Roles",isEnabled:!(!d||i||g||!u),tooltip:O,handler:()=>{(0,I.manageRolesOnAPI)(this._item.parentEntityId,{origin:"sidebar"})}},"version"!==s().get(this._item,"mode.name")&&d&&{name:"Add definition",isEnabled:x,tooltip:M,subMenu:!g&&x&&[{name:"Import files",isEnabled:!0,handler:()=>w(this,void 0,void 0,(function*(){yield(0,c.navigateToImportDefinition)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}))},{name:"Author from scratch",isEnabled:!0,tooltip:T,handler:()=>w(this,void 0,void 0,(function*(){yield(0,c.navigateToAuthorFromScratch)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}))}]},"version"!==s().get(this._item,"mode.name")&&d&&{name:"Add Collection",isEnabled:!(!d||i||g),tooltip:T,subMenu:!g&&[{name:"Copy existing collection",isEnabled:!i&&j>0,tooltip:j>0?null:A.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>w(this,void 0,void 0,(function*(){var e,t;const{migratedAPIId:i,apiVersionId:o}=yield(0,l.migrateAPI)(this._item.parentEntityId,this._item.id),n={apiVersionId:o};pm.mediator.trigger("showAddCollectionToAPIModal",C.ACTION_TYPE_COPY_EXISTING_COLLECTION,i,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.version)||void 0===t?void 0:t.mode,n)}))},{type:C.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(i||L),tooltip:N,handler:()=>w(this,void 0,void 0,(function*(){var e,t;const{migratedAPIId:i,apiVersionId:o}=yield(0,l.migrateAPI)(this._item.parentEntityId,this._item.id),n={definitionModel:this.apiDefinitionModel,apiVersionId:o};pm.mediator.trigger("showAddCollectionToAPIModal",C.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,i,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.version)||void 0===t?void 0:t.mode,n)}))},{name:"Create new collection",isEnabled:!i,handler:()=>w(this,void 0,void 0,(function*(){var e,t;const{migratedAPIId:i,apiVersionId:o}=yield(0,l.migrateAPI)(this._item.parentEntityId,this._item.id),n={apiVersionId:o};pm.mediator.trigger("showAddCollectionToAPIModal",C.ACTION_TYPE_CREATE_NEW_COLLECTION,i,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.version)||void 0===t?void 0:t.mode,n)}))}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(!d||i||!_||g),tooltip:T,handler:e=>{(0,l.migrateAPI)(this._item.parentEntityId,this._item.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(p.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(!d||i||!S||g),tooltip:T,handler:()=>pm.mediator.trigger("showAPIVersionDeleteModal",this._item)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?u.default:O.default}get isEditable(){var e;return!1!==(null===(e=this.parentAPI)||void 0===e?void 0:e.isEditable)}get isLoading(){return!1}get meta(){var e;const t=[],i=(0,a.resolveStoreInstance)(S.default),o=i.isPublicWorkspace,n=i.isPartnerWorkspace,r=i.isTeamWorkspace||i.isPrivateWorkspace,l=(0,a.resolveStoreInstance)(p.default).find(s().get(this._item,"parentEntityId")),d="apiVersion"===this._item.type&&"private"===this._item.visibility&&!(null==l?void 0:l.isMigrated),c=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!r&&!n;return this.isEditable||t.push(T.ReadOnlyIcon),this._item.isPublic&&!o&&t.push(T.PublicIcon),c&&t.push(T.TeamIcon),d&&t.push(T.PrivateVersionIcon),{iconsAfterText:t}}}D([r.observable],R.prototype,"apiDefinitionModel",void 0),D([r.observable],R.prototype,"isDefinitionLoaded",void 0),D([r.computed],R.prototype,"name",null),D([r.computed],R.prototype,"id",null),D([r.computed],R.prototype,"isPendingCreate",null),D([r.computed],R.prototype,"actions",null),D([r.computed],R.prototype,"emptyState",null),D([r.computed],R.prototype,"isEditable",null),D([r.computed],R.prototype,"isLoading",null),D([r.computed],R.prototype,"meta",null)},"./api-dev/sidebar/UnmigratedGitLinkedAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/constants/Permissions.js"),d=i("../../packages/api-design/api-definition-ui/index.js"),c=i("./api-dev/interfaces/APIInterface.js"),u=i("./api-dev/stores/APIListStore.js"),p=i("./api-dev/stores/APISidebarStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),f=i("./js/modules/services/ShareModalService.js"),I=i("./js/modules/services/ManageRolesModalService.js"),v=i("./js/stores/CurrentUserStore.js"),b=i("./collaboration/utils/workspace.js"),E=i("./js/stores/SyncStatusStore.js"),g=i("./api-dev/constants/APIActionsConstants.js"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),C=i("./js/utils/TabOpeningUtil.js"),S=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),T=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),y=i("./api-dev/constants/APITooltips.js"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends S.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,o;super(e),this.dataTestIdSuffix="api",this.isMigrated=!1,this.analyticsEventCategory="unmigratedApi-item-branch-mode",this.collectionStore=null,this.onDropdownOpen=()=>O(this,void 0,void 0,(function*(){const e=s().get(this._item,"apiRepositoryStore.entityHandlers.schemas.store");null==e||e.getFileContent({fileId:e.mainNodeId});const t=(0,a.resolveStoreInstance)(_.default).id;this.collectionStore=yield(0,T.subscribeMeta)(t)})),this.getChildren=()=>O(this,void 0,void 0,(function*(){return(0,r.computed)((()=>[]))})),this.getApiVersionId=()=>O(this,void 0,void 0,(function*(){return this._item.id})),this.onClick=()=>{(0,a.resolveStoreInstance)(p.default).handleNavigationToAPI(this._item.id,this._item)},this.allowedDropTargets=[],this.userCanExpand=!1,this._item=e,this.parentAPI=t,this.setContext({apiId:this._item.id,api:e,apiMode:null==e?void 0:e.mode,isApiMigrated:!1}),this.apiMode={name:null===(i=null==e?void 0:e.mode)||void 0===i?void 0:i.name,value:null===(o=null==e?void 0:e.mode)||void 0===o?void 0:o.value},this.storeItemCachedProperties.isMigrated=!1,this.onDropdownOpen=this.onDropdownOpen.bind(this)}onDispose(){var e;null===(e=this.collectionStore)||void 0===e||e.unsubscribe()}get name(){var e;return 1===s().get(this.parentAPI,"childEntities.values.length")?null===(e=this.parentAPI)||void 0===e?void 0:e.name:`${s().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get isPendingCreate(){return!1}get isChildrenRenderingAllowed(){var e,t;return null===(t=null===(e=this._item.apiRepositoryStore)||void 0===e?void 0:e.canEditAPISource)||void 0===t?void 0:t.allowed}getSidebarRouteConfig(){return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this._item.id,versionId:this._item.id},isNonLink:!0}}getActions(){const e=this.parent?this.parent.id:null;let t=!(0,a.resolveStoreInstance)(E.default).isSocketConnected;const i=(0,a.resolveStoreInstance)(u.default).permissions,n=!!(0,a.resolveStoreInstance)(v.default).team,r=n&&!(0,b.isPublicUserForWorkspace)()&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,p=this._item.isMigrating,_=h.default.hasPermission(i,"renameAPIVersion","api",e),A=h.default.hasPermission(i,"delete","api",e),S=this.isEditable,T=p&&l.API_MIGRATION_DISABLED_TEXT||!S&&l.API_PERMISSION_ERROR,P=p&&l.API_MIGRATION_DISABLED_TEXT||!t&&!n&&l.MANAGE_ROLES_DISABLED_TEXT||!S&&l.API_PERMISSION_ERROR,N=s().get(this._item,"apiRepositoryStore.entityHandlers.schemas.store"),{generateCollectionDisabledMsg:L,isGenerateCollectionButtonDisabled:j}=(0,d.getGenerateCollectionIsDisabledAndMsg)(N),D=this.collectionStore?this.collectionStore.list.length:0,w=!N||(null==N?void 0:N.isEmpty),R=!(!S||t||p)&&w;return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(t||p),tooltip:T,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,C.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!t,handler:()=>{(0,f.shareAPI)(this._item.parentEntityId,{origin:"sidebar"})}},{name:"Move",isEnabled:!(t||p||(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner),tooltip:T,handler:()=>{(0,f.moveAPI)(this._item.parentEntityId,this.name,{origin:"sidebar"})}},{name:"Manage Roles",isEnabled:!(t||p||!r),tooltip:P,handler:()=>{(0,I.manageRolesOnAPI)(this._item.parentEntityId,{origin:"sidebar"})}},"version"!==s().get(this._item,"mode.name")&&S&&{name:"Add definition",isEnabled:R,tooltip:w?!T:d.DEFINITION_AVAILABLE_TEXT,subMenu:!p&&w&&[{name:"Import files",isEnabled:!0,handler:()=>{(0,d.navigateToImportDefinition)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}},{name:"Author from scratch",isEnabled:!0,tooltip:T,handler:()=>{(0,d.navigateToAuthorFromScratch)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}}]},"version"!==s().get(this._item,"mode.name")&&S&&{name:"Add Collection",isEnabled:!(t||p),tooltip:T,subMenu:!p&&[{name:"Copy existing collection",isEnabled:!t&&D>0,tooltip:D>0?null:y.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>O(this,void 0,void 0,(function*(){var e;const{migratedAPIId:t,apiVersionId:i}=yield(0,c.migrateAPI)(this._item.parentEntityId,this._item.id),o={apiVersionId:i};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_COPY_EXISTING_COLLECTION,t,null===(e=this._item)||void 0===e?void 0:e.mode,o)}))},{type:g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(t||j),tooltip:L,handler:()=>O(this,void 0,void 0,(function*(){var e;const{migratedAPIId:t,apiVersionId:i}=yield(0,c.migrateAPI)(this._item.parentEntityId,this._item.id),o={definitionModel:N,apiVersionId:i};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,t,null===(e=this._item)||void 0===e?void 0:e.mode,o)}))},{name:"Create new collection",isEnabled:!t,handler:()=>O(this,void 0,void 0,(function*(){var e;const{migratedAPIId:t,apiVersionId:i}=yield(0,c.migrateAPI)(this._item.parentEntityId,this._item.id),o={apiVersionId:i};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_CREATE_NEW_COLLECTION,t,null===(e=this._item)||void 0===e?void 0:e.mode,o)}))}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(t||!_||p),tooltip:T,handler:e=>{(0,c.migrateAPI)(this._item.parentEntityId,this._item.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(u.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(t||!A||p),tooltip:T,handler:()=>pm.mediator.trigger("showAPIVersionDeleteModal",this._item)})].filter(Boolean)}get emptyState(){return null}get actions(){return this.getActions()}get isEditable(){var e;return!1!==(null===(e=this.parentAPI)||void 0===e?void 0:e.isEditable)}get isLoading(){return!1}get meta(){var e,t,i;const o=[],n=(0,a.resolveStoreInstance)(_.default),s=n.isPublicWorkspace,r=n.isPartnerWorkspace,l=n.isTeamWorkspace||n.isPrivateWorkspace,d=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!l&&!r,c=null===(i=null===(t=this._item)||void 0===t?void 0:t.apiRepositoryStore)||void 0===i?void 0:i.branch;return c&&o.push((0,A.BranchName)(c)),this.isEditable||o.push(A.ReadOnlyIcon),this._item.isPublic&&!s&&o.push(A.PublicIcon),d&&o.push(A.TeamIcon),{iconsAfterText:o}}}P([r.computed],N.prototype,"name",null),P([r.computed],N.prototype,"id",null),P([r.computed],N.prototype,"isPendingCreate",null),P([r.computed],N.prototype,"isChildrenRenderingAllowed",null),P([r.computed],N.prototype,"emptyState",null),P([r.computed],N.prototype,"isEditable",null),P([r.computed],N.prototype,"isLoading",null),P([r.computed],N.prototype,"meta",null)},"./api-dev/sidebar/UnmigratedVersionViewAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("../../packages/api-design/api-definition-store/index.js"),d=i("./api-dev/util/navigationHelper.js"),c=i("../../packages/api-design/api-definition-ui/index.js"),u=i("./api-dev/interfaces/APIInterface.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),f=i("./js/modules/services/ShareModalService.js"),I=i("./js/modules/services/ManageRolesModalService.js"),v=i("./js/stores/CurrentUserStore.js"),b=i("./collaboration/utils/workspace.js"),E=i("./js/stores/SyncStatusStore.js"),g=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),C=i("./js/utils/TabOpeningUtil.js"),S=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx"),T=i("./api-dev/constants/Permissions.js"),y=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends y.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,o;super(e),this.definitionReactionDisposer=null,this.dataTestIdSuffix="api",this.isMigrated=!1,this.apiDefinitionModel=void 0,this.analyticsEventCategory="unmigratedApi-item-version-mode",this.getChildren=()=>O(this,void 0,void 0,(function*(){var e,t;yield null===(t=null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.populateReleaseStore(),yield(0,r.when)((()=>{var e;return Boolean(null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)&&!this._item.consumerViewModel.isSwitchingRelease})),this.registerDefinitionRelationReaction();const i=yield(0,g.getUnmigratedCollections)(this);return yield(0,r.when)((()=>void 0!==this.apiDefinitionModel)),this.apiDefinitionModel&&(yield(0,r.when)((()=>{var e;return null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.hasFileTreeLoaded}))),(0,r.computed)((()=>{let e;if(this.apiDefinitionModel){const t=this.apiDefinitionModel.getRootNode();e=[new c.UnmigratedDefinitionFolder(t,this,this.apiDefinitionModel)]}else e=[];return[...e,...i.get()]}))})),this.getApiVersionId=()=>O(this,void 0,void 0,(function*(){return this._item.id})),this.onClick=()=>{const e=s().get(this._item,"consumerViewModel.activeRelease.id");return(0,d.transitionToVersion)({apiId:this._item.parentEntityId,apiVersionId:this._item.id,releaseId:e})},this.allowedDropTargets=[],this.userCanExpand=!0,this.parentAPI=t,this.setContext({apiVersionId:this._item.id,apiId:this._item.parentEntityId,apiMode:this._item.mode,apiVersion:e,isApiMigrated:!1}),this.apiMode={name:null===(i=e.mode)||void 0===i?void 0:i.name,value:null===(o=e.mode)||void 0===o?void 0:o.value},this.storeItemCachedProperties.isMigrated=!1}get name(){var e;return 1===s().get(this.parentAPI,"childEntities.values.length")?null===(e=this.parentAPI)||void 0===e?void 0:e.name:`${s().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){if(this.definitionReactionDisposer)return;const e=(0,a.resolveStoreInstance)(l.APIDefinitionStore);this.definitionReactionDisposer=(0,r.reaction)((()=>{var e,t,i;return null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.activeRelease)||void 0===i?void 0:i.id}),(()=>O(this,void 0,void 0,(function*(){var t,i,o;yield(0,r.when)((()=>{var e;return Boolean(null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)&&!this._item.consumerViewModel.isSwitchingRelease}));const n=s().get(this._item,"consumerViewModel.activeRelease.entities.schemas.0.entityId"),a=yield e.getModelForReleaseId({apiId:this._item.parentEntityId,apiVersionId:this._item.id,releaseId:null===(o=null===(i=null===(t=this._item)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.activeRelease)||void 0===o?void 0:o.id,apiDefinitionId:n});(0,r.runInAction)((()=>this.apiDefinitionModel=a))}))),{fireImmediately:!0})}onDispose(){var e;null===(e=this.definitionReactionDisposer)||void 0===e||e.call(this)}getSidebarRouteConfig(){return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this._item.parentEntityId,versionId:this._item.id},isNonLink:!0}}getActions(){let e=!(0,a.resolveStoreInstance)(E.default).isSocketConnected;const t=this._item.id,i=(0,a.resolveStoreInstance)(p.default).permissions,n=!!(0,a.resolveStoreInstance)(v.default).team,s=this.isEditable,r=n&&!(0,b.isPublicUserForWorkspace)()&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,l=this._item.isMigrating,d=l&&T.API_MIGRATION_DISABLED_TEXT||!s&&T.API_PERMISSION_ERROR,c=h.default.hasPermission(i,"renameAPIVersion","api",t),g=h.default.hasPermission(i,"delete","api",t),_=l&&T.API_MIGRATION_DISABLED_TEXT||!e&&!n&&T.MANAGE_ROLES_DISABLED_TEXT||!s&&T.API_PERMISSION_ERROR;return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!e&&!l,tooltip:d,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,C.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!e,handler:()=>{(0,f.shareAPI)(this._item.parentEntityId,{origin:"sidebar"})}},{name:"Move",isEnabled:this.isEditable&&!e&&!l&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,tooltip:d,handler:()=>{(0,f.moveAPI)(this._item.parentEntityId,this.name,{origin:"sidebar"})}},{name:"Manage Roles",isEnabled:this.isEditable&&!e&&!l&&r,tooltip:_,handler:()=>{(0,I.manageRolesOnAPI)(this._item.parentEntityId,{origin:"sidebar"})}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this.isEditable&&!e&&c&&!l,tooltip:d,handler:e=>{(0,u.migrateAPI)(this._item.parentEntityId,this._item.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(p.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:this.isEditable&&!e&&g&&!l,tooltip:d,handler:()=>pm.mediator.trigger("showAPIVersionDeleteModal",this._item)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?null:S.default}get isEditable(){var e;return!1!==(null===(e=this.parentAPI)||void 0===e?void 0:e.isEditable)}get isLoading(){return!this._item.isLoaded}get meta(){var e,t,i,o;const n=[],s=(0,a.resolveStoreInstance)(_.default),r=s.isPublicWorkspace,l=s.isPartnerWorkspace,d=s.isTeamWorkspace||s.isPrivateWorkspace,c="apiVersion"===this._item.type&&"private"===this._item.visibility,u=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!d&&!l,p=null===(o=null===(i=null===(t=this._item)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.activeRelease)||void 0===o?void 0:o.name;return p&&n.push((0,A.VersionName)(p)),this.isEditable||n.push(A.ReadOnlyIcon),this._item.isPublic&&!r&&n.push(A.PublicIcon),u&&n.push(A.TeamIcon),c&&n.push(A.PrivateVersionIcon),{iconsAfterText:n}}}P([r.observable],N.prototype,"apiDefinitionModel",void 0),P([r.computed],N.prototype,"name",null),P([r.computed],N.prototype,"id",null),P([r.computed],N.prototype,"isPendingCreate",null),P([r.computed],N.prototype,"emptyState",null),P([r.computed],N.prototype,"isEditable",null),P([r.computed],N.prototype,"isLoading",null),P([r.computed],N.prototype,"meta",null)},"./api-dev/sidebar/VersionViewAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("../../packages/api-design/api-definition-store/index.js"),d=i("./api-dev/util/navigationHelper.js"),c=i("../../packages/api-design/api-definition-ui/index.js"),u=i("./api-dev/interfaces/APIInterface.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),f=i("./js/modules/services/ShareModalService.js"),I=i("./js/modules/services/ManageRolesModalService.js"),v=i("./js/stores/CurrentUserStore.js"),b=i("./collaboration/utils/workspace.js"),E=i("./js/stores/SyncStatusStore.js"),g=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),C=i("./js/utils/TabOpeningUtil.js"),S=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx"),T=i("./api-dev/constants/Permissions.js"),y=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends y.default{constructor(e,t){var i,o,n,a,l,u;super(e),this.definitionReactionDisposer=null,this.dataTestIdSuffix="api",this.apiDefinitionModel=void 0,this.analyticsEventCategory="api-item-version-mode",this.getChildren=()=>O(this,void 0,void 0,(function*(){var e,t,i;yield null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.populateReleaseStore(),yield(0,r.when)((()=>{var e,t;return!(!(null===(t=null===(e=this._item)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.consumerViewModel)||this._item.computedVersion.consumerViewModel.isSwitchingRelease)}),{timeout:5e3}),this.registerDefinitionRelationReaction();const o=yield(0,g.getCollections)(this);return yield(0,r.when)((()=>void 0!==this.apiDefinitionModel)),this.apiDefinitionModel&&(yield(0,r.when)((()=>{var e;return null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.hasFileTreeLoaded}))),(0,r.computed)((()=>{let e;if(this.apiDefinitionModel){const t=this.apiDefinitionModel.getRootNode();e=[new c.DefinitionFolder(t,this,this.apiDefinitionModel)]}else e=[];return[...e,...o.get()]}))})),this.getApiVersionId=()=>{var e;return null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},this.onClick=()=>{var e;const t=s().get(this._item.computedVersion,"consumerViewModel.activeRelease.id");return(0,d.transitionToVersion)({apiId:this.id,apiVersionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id,releaseId:t})},this.allowedDropTargets=[],this.userCanExpand=!0,this.setContext({api:e,apiId:this._item.id,apiMode:null===(o=null===(i=this._item)||void 0===i?void 0:i.computedVersion)||void 0===o?void 0:o.mode,isApiMigrated:!0}),this.apiMode={name:null===(a=null===(n=e.computedVersion)||void 0===n?void 0:n.mode)||void 0===a?void 0:a.name,value:null===(u=null===(l=e.computedVersion)||void 0===l?void 0:l.mode)||void 0===u?void 0:u.value}}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){if(this.definitionReactionDisposer)return;const e=(0,a.resolveStoreInstance)(l.APIDefinitionStore);this.definitionReactionDisposer=(0,r.reaction)((()=>{var e,t,i;return(null===(i=null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.activeRelease)||void 0===i?void 0:i.id)&&s().get(this._item,"computedVersion.consumerViewModel.activeRelease.entities.apiDefinitions.0.entityId")}),(()=>O(this,void 0,void 0,(function*(){var t,i;if(!(null===(t=this._item.computedVersion)||void 0===t?void 0:t.mode))return;yield(0,r.when)((()=>{var e,t,i;return!(null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.isSwitchingRelease)}),{timeout:5e3});const o=yield e.getDefinitionFromAPI(this.id,null===(i=this._item.computedVersion)||void 0===i?void 0:i.mode);(0,r.runInAction)((()=>this.apiDefinitionModel=o))}))),{fireImmediately:!0})}onDispose(){var e;null===(e=this.definitionReactionDisposer)||void 0===e||e.call(this)}getSidebarRouteConfig(){var e;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this.id,versionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},isNonLink:!0}}getActions(){let e=!(0,a.resolveStoreInstance)(E.default).isSocketConnected;const t=this.id,i=(0,a.resolveStoreInstance)(p.default).permissions,n=!!(0,a.resolveStoreInstance)(v.default).team,s=this.isEditable,r=n&&!(0,b.isPublicUserForWorkspace)()&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,l=this._item.isMigrating,d=l&&T.API_MIGRATION_DISABLED_TEXT||!s&&T.API_PERMISSION_ERROR,c=h.default.hasPermission(i,"renameAPIVersion","api",t),g=h.default.hasPermission(i,"delete","api",t),_=l&&T.API_MIGRATION_DISABLED_TEXT||!e&&!n&&T.MANAGE_ROLES_DISABLED_TEXT||!s&&T.API_PERMISSION_ERROR;return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!e&&!l,tooltip:d,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,C.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!e,handler:()=>{(0,f.shareAPI)(this.id,{origin:"sidebar"})}},{name:"Move",isEnabled:this.isEditable&&!e&&!l&&!(0,a.resolveStoreInstance)(v.default).isCurrentUserPartner,tooltip:d,handler:()=>{(0,f.moveAPI)(this.id,this.name,{origin:"sidebar"})}},{name:"Manage Roles",isEnabled:this.isEditable&&!e&&!l&&r,tooltip:_,handler:()=>{(0,I.manageRolesOnAPI)(this.id,{origin:"sidebar"})}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this.isEditable&&!e&&c&&!l,tooltip:d,handler:e=>{(0,u.migrateAPI)(this.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(p.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:this.isEditable&&!e&&g&&!l,tooltip:d,handler:()=>pm.mediator.trigger("showAPIDeleteModal",this.id)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?null:S.default}get isEditable(){return!1!==this._item.isEditable}get isLoading(){return!this._item.isLoaded}get meta(){var e,t,i,o,n;const s=[],r=(0,a.resolveStoreInstance)(_.default),l=r.isPublicWorkspace,d=r.isPartnerWorkspace,c=r.isTeamWorkspace||r.isPrivateWorkspace,u="apiVersion"===this._item.type&&"private"===this._item.visibility&&!this._item.isMigrated,p=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!c&&!d,m=null===(n=null===(o=null===(i=null===(t=this._item)||void 0===t?void 0:t.computedVersion)||void 0===i?void 0:i.consumerViewModel)||void 0===o?void 0:o.activeRelease)||void 0===n?void 0:n.name;return m&&s.push((0,A.VersionName)(m)),this.isEditable||s.push(A.ReadOnlyIcon),this._item.isPublic&&!l&&s.push(A.PublicIcon),p&&s.push(A.TeamIcon),u&&s.push(A.PrivateVersionIcon),{iconsAfterText:s}}}P([r.observable],N.prototype,"apiDefinitionModel",void 0),P([r.computed],N.prototype,"name",null),P([r.computed],N.prototype,"id",null),P([r.computed],N.prototype,"isPendingCreate",null),P([r.computed],N.prototype,"emptyState",null),P([r.computed],N.prototype,"isEditable",null),P([r.computed],N.prototype,"isLoading",null),P([r.computed],N.prototype,"meta",null)},"./runtime-repl/collection/_api/CollectionSidebarStore.ts":function(e,t,i){i.r(t),i.d(t,{getCollections:function(){return D},getFolders:function(){return R},getRequests:function(){return x},getResponses:function(){return M},getUnmigratedCollections:function(){return w},isItemCollectionObject:function(){return V},isItemFolderObject:function(){return F},isItemRequestObject:function(){return k}});var o=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),l=i("./runtime-repl/folder/sidebar/VersionViewFolderSidebarItem.ts"),d=i("./api-dev/sidebar/APISidebarItem.ts"),c=i("./api-dev/sidebar/GitLinkedAPISidebarItem.ts"),u=i("./api-dev/sidebar/VersionViewAPISidebarItem.ts"),p=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),m=i("./runtime-repl/transient-collection/datastores/stores/TransientFolderStore.ts"),h=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),f=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),I=i("./runtime-repl/request-http/sidebar/VersionViewRequestSidebarItem.ts"),v=i("./runtime-repl/transient-collection/datastores/stores/TransientRequestStore.ts"),b=i("./runtime-repl/example/sidebar/ResponseSidebarItem.ts"),E=i("./runtime-repl/example/sidebar/GitLinkedResponseSidebarItem.ts"),g=i("./runtime-repl/example/sidebar/VersionViewResponseSidebarItem.ts"),_=i("./runtime-repl/transient-collection/datastores/stores/TransientExampleStore.ts"),A=i("./runtime-repl/transient-collection/datastores/stores/TransientCollectionStore.ts"),C=i("./js/stores/StoreManager.js"),S=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),T=i("./runtime-repl/collection/CollectionSorter.js"),y=i("./runtime-repl/sidebar-core/index.ts"),P=i("./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts"),O=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),N=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),L=i("./runtime-repl/collection/sidebar/VersionViewCollectionSidebarItem.ts"),j=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};function D(e){return j(this,void 0,void 0,(function*(){if(!e)return(0,n.computed)((()=>[]));if(e instanceof d.default){const t=yield(0,o.subscribePartialForAPI)(null==e?void 0:e.id),i=(0,n.computed)((()=>{const e=t.list.filter((e=>!e.isDeleting));return(0,T.sortCollections)(e)}));return(0,y.computedArray)(i,(t=>new O.default(t,e)),(()=>!1))}return e instanceof c.default?function(e){return j(this,void 0,void 0,(function*(){const t=e._item;if(!t)throw pm.logger.error("getAPILinkedCollections~ invalid api item passed"),new TypeError("Invalid argument");const i=(0,n.computed)((()=>{var e,i,o,n;const s=r().get(t,"computedVersion.apiRepositoryStore.entityHandlers.collections.transientCollectionStores")&&(null===(n=null===(o=null===(i=null===(e=t.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===i?void 0:i.entityHandlers)||void 0===o?void 0:o.collections)||void 0===n?void 0:n.collectionsOnBranch())||[];return(0,T.sortCollections)(s).map((e=>e.model))})),o=({id:t})=>{const i=A.default.find(t);if(i)return new N.default(i,e)},s=()=>!1;return(0,y.computedArray)(i,o,s)}))}(e):e instanceof u.default?function(e){return j(this,void 0,void 0,(function*(){const t=e._item;if(!t)throw pm.logger.error("getAPILinkedCollections~ invalid api item passed"),new TypeError("Invalid argument");const i=(0,n.computed)((()=>{const e=r().get(t,"computedVersion.consumerViewModel.collections",[]);return(0,T.sortCollections)(e).map((e=>({id:e.modelId})))})),o=({id:t})=>{const i=A.default.find(t);if(i)return new L.default(i,e)},s=()=>!1;return(0,y.computedArray)(i,o,s)}))}(e):(0,n.computed)((()=>[]))}))}function w(e){var t;return j(this,void 0,void 0,(function*(){if(!(null===(t=null==e?void 0:e._item)||void 0===t?void 0:t.parentEntityId))return(0,n.computed)((()=>[]));yield(0,n.when)((()=>(0,C.resolveStoreInstance)(S.default).isWorkspaceLoaded));const i=(0,C.resolveStoreInstance)(S.default).id,s=yield(0,o.subscribePartial)(i),a=(0,n.computed)((()=>{var t,i,o,n,a,l,d,c,u;const p=Object.values((null===(o=null===(i=null===(t=e._item)||void 0===t?void 0:t.relationsStore)||void 0===i?void 0:i.relations)||void 0===o?void 0:o.documentation)||{}),m=Object.values((null===(l=null===(a=null===(n=e._item)||void 0===n?void 0:n.relationsStore)||void 0===a?void 0:a.relations)||void 0===l?void 0:l.test)||{}),h=Object.values((null===(u=null===(c=null===(d=e._item)||void 0===d?void 0:d.relationsStore)||void 0===c?void 0:c.relations)||void 0===u?void 0:u.unclassified)||{}),f=r().reduce([...p,...m,...h],((e,t)=>((null==t?void 0:t.modelId)&&e.add(t.modelId),e)),new Set),I=s.list.filter((e=>f.has(e.id)&&!e.isDeleting));return(0,T.sortCollections)(I)}));return(0,y.computedArray)(a,(t=>new P.default(t,e)),(()=>!1))}))}function R(e){return j(this,void 0,void 0,(function*(){return e instanceof N.default||e instanceof p.default?(0,y.computedArray)((0,n.computed)((()=>e._item.model.ownFolders)),(t=>{const i=m.default.find(t.id);if(i)return new p.default(i,e)}),(()=>!1)):e instanceof L.default||e instanceof l.default?(0,y.computedArray)((0,n.computed)((()=>e._item.model.ownFolders)),(t=>{const i=m.default.find(t.id);if(i)return new l.default(i,e)}),(()=>!1)):(0,y.computedArray)((0,n.computed)((()=>{var t;return null===(t=null==e?void 0:e._item)||void 0===t?void 0:t.folders})),(t=>new a.default(t,e)),(()=>!1))}))}function x(e){return j(this,void 0,void 0,(function*(){if(e instanceof N.default||e instanceof p.default){const t=(0,n.computed)((()=>e._item.model.ownRequests)),i=t=>{const i=v.default.find(t.id);if(i)return new f.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}if(e instanceof L.default||e instanceof l.default){const t=(0,n.computed)((()=>e._item.model.ownRequests)),i=t=>{const i=v.default.find(t.id);if(i)return new I.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}const t=(0,n.computed)((()=>e._item.requests));return(0,y.computedArray)(t,(t=>new h.default(t,e)),(()=>!1))}))}function M(e){return j(this,void 0,void 0,(function*(){if(e instanceof f.default){const t=(0,n.computed)((()=>e._item.model.ownResponses)),i=t=>{const i=_.default.find(t.id);if(i)return new E.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}if(e instanceof I.default){const t=(0,n.computed)((()=>e._item.model.ownResponses)),i=t=>{const i=_.default.find(t.id);if(i)return new g.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}const t=(0,n.computed)((()=>e._item.responses));return(0,y.computedArray)(t,(t=>new b.default(t,e)),(()=>!1))}))}function k(e){return e instanceof h.default||e instanceof f.default||e instanceof I.default}function F(e){return e instanceof a.default||e instanceof p.default||e instanceof l.default}function V(e){return e instanceof O.default||e instanceof N.default||e instanceof L.default}},"./runtime-repl/collection/sidebar/CollectionSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js"),s=i("./runtime-repl/collection/_api/CollectionInterface.js"),r=i("./runtime-repl/collection/CollectionActionsConstants.js");class a extends o.Component{render(){const{item:e}=this.props;if(!e.parent)return pm.logger.error("CollectionSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content"},"This collection is empty",e.parent.isEditable&&o.createElement("div",null,o.createElement(n.Button,{type:"text",className:"learn-more-link",onClick:()=>{if(!e.parent)return pm.logger.error("CollectionSidebarEmptyItem~handleClick- Parent of item is undefined"),null;e.parent.isEditable&&(0,s.collectionActions)(e.parent.id,r.ACTION_TYPE_ADD_REQUEST,{},{origin:"sidebar",canPerform:()=>e.parent.isEditable,collectionId:e.parent.id,collectionName:e.parent.name,apiId:e.context.apiId},(()=>{}))}},"Add a request"),"to start working."))}}},"./runtime-repl/collection/sidebar/CollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return G}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),l=i("./collaboration/workspace/types/PermissionTypes.ts"),d=i("./appsdk/sidebar/SidebarService.ts"),c=i("./runtime-repl/collection/manifest.js"),u=i("./runtime-repl/collection/_api/CollectionInterface.js"),p=i("./runtime-repl/folder/_api/FolderInterface.js"),m=i("./runtime-repl/request-http/_api/RequestInterface.js"),h=i("./appsdk/workbench/WorkbenchService.js"),f=i("./js/stores/StoreManager.js"),I=i("./api-dev/stores/APIListStore.js"),v=i("./api-dev/services/APIPermissionService.js"),b=i("./api-dev/interfaces/APIInterface.js"),E=i("../../packages/api-design/api-definition-ui/index.js"),g=i("./js/services/SingleTabWorkbenchService.js"),_=i("./runtime-repl/_common/NavigationConstants.js"),A=i("./js/modules/services/AnalyticsService.js"),C=i("./js/services/NavigationService.js"),S=i("./js/stores/CurrentUserStore.js"),T=i("./js/utils/TabOpeningUtil.js"),y=i("./js/stores/OnlineStatusStore.js"),P=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),O=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),N=i("./runtime-repl/_common/DisabledTooltipConstants.js"),L=i("./runtime-repl/utils/EntityMetaTransformer.js"),j=i("./version-control/services/VersionControlCollectionActions.js"),D=i("./js/utils/EntityNameResolver.js"),w=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),R=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),x=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),M=i("./runtime-repl/collection/sidebar/CollectionSidebarEmptyItem.tsx"),k=i("./runtime-repl/runner/RunnerHelper.js"),F=i("./runtime-repl/_common/ToastHelpers.js"),V=i("./runtime-repl/collection/CollectionActionsConstants.js"),B=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),U=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},W=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class G extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="collection",this.type="collection",this.analyticsEventCategory="collection-item-builder-mode",this.onClick=()=>this.parent&&(0,u.openCollectionInTab)(this.id,{},{type:"api",id:this.parent.id}),this.getChildren=()=>W(this,void 0,void 0,(function*(){const e=yield(0,B.getFolders)(this),t=yield(0,B.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.userCanExpand=!0,this.allowedDropTargets=[w.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.apiStore=(0,f.resolveStoreInstance)(I.default)}get isPendingCreate(){return Boolean(this._item.isPending)}get name(){return this._item.name}get id(){return this._item.id}hasPermissionOnAPI(e){var t;return v.default.hasPermission(this.apiStore.permissions,e,"api",null===(t=this.parent)||void 0===t?void 0:t.id)}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}getForkInfo(){return this._item&&this._item.isForked?{id:this._item.baseCollectionUid,forkId:this._item.id,forkLabel:this._item.forkLabel,baseCollectionUid:this._item.baseCollectionUid}:{}}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return M.default}get actions(){var e,t;const{userCanSave:i,userCanSaveAndSync:n}=(0,f.resolveStoreInstance)(y.default),s=(0,f.resolveStoreInstance)(S.default).isLoggedIn,I=r().get(this._item,"permissions.edit",!0),v=r().get(this._item,"permissions.delete",!0),P=(0,f.resolveStoreInstance)(a.default),O=P&&P.permissions,L=!(!this._item||!this._item.isForked);return[h.default.isUseBrowserTabsActive()&&{name:V.ACTION_LABELS.OPEN_IN_NEW_TAB,shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>{var e;(0,T.openInNewBrowserTab)(_.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:null===(e=this.parent)||void 0===e?void 0:e.id},{})}},{name:V.ACTION_LABELS.RUN_COLLECTION,isEnabled:(0,k.canRunCollection)(),xpathLabel:"runCollection",handler:()=>{var e;(0,u.collectionActions)(this.id,V.ACTION_TYPE_RUN,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:null===(e=this.parent)||void 0===e?void 0:e.id},(()=>{}))}},{name:i&&I?V.ACTION_LABELS.EDIT:V.ACTION_LABELS.VIEW_DETAILS,isEnabled:!0,handler:()=>{(0,u.openCollectionInTab)(this.id,{focusContext:"info"})}},{name:V.ACTION_LABELS.ADD_REQUEST,isEnabled:i&&I,shouldExpandItem:!0,handler:()=>{if(!i)return(0,F.showOfflineActionDisabledToast)();g.default.didUserCancelDiscard()||(0,m.createRequest)({collection:this.id},{openInTab:!1}).then((e=>{C.default.transitionTo(_.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:e.uid,apiId:this.context.apiId},{},{tabOptions:{preview:!1,forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this.id}})}))}},{name:V.ACTION_LABELS.ADD_FOLDER,isEnabled:i&&I,xpathLabel:"addFolder",shouldExpandItem:!0,handler:()=>{if(!i)return(0,F.showOfflineActionDisabledToast)();g.default.didUserCancelDiscard()||(0,p.createFolder)({model:this.type,uid:this.id},{openInTab:!1}).then((e=>{C.default.transitionTo(_.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{additionalContext:{rename:!0,parentCollectionUID:this.id}})}))}},{name:o.DEFAULT_ACTIONS.FORK,shortcut:"fork",isEnabled:s&&n,tooltip:(0,j.getDisabledText)(V.ACTION_TYPE_FORK,{}),handler:()=>{var e;(0,u.collectionActions)(this._item.id,V.ACTION_TYPE_FORK,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:null===(e=this.parent)||void 0===e?void 0:e.id},(()=>{}))}},{name:V.ACTION_LABELS.PULL_REQUEST,isEnabled:s&&n&&L,tooltip:(0,j.getDisabledText)(V.ACTION_TYPE_PULL_REQUEST,{isFork:L}),handler:()=>n?L?(A.default.addEventV2({category:"pullrequest",action:"initiate_create",entityType:"collection",label:"sidebar",entityId:this.id}),(0,u.createPullRequest)(this.id,{id:this._item.baseCollectionUid,forkId:this.id})):this.showPermissionErrorToast():(0,F.showOfflineActionDisabledToast)()},{name:V.ACTION_LABELS.MERGE,isEnabled:s&&n&&L,tooltip:(0,j.getDisabledText)(V.ACTION_TYPE_MERGE,{isFork:L}),handler:()=>n?L?(0,u.mergeChanges)(this.id,{id:this._item.baseCollectionUid,forkId:this.id}):this.showPermissionErrorToast():(0,F.showOfflineActionDisabledToast)()},{name:V.ACTION_LABELS.PULL,isEnabled:s&&n&&L,tooltip:(0,j.getDisabledText)(V.ACTION_TYPE_PULL_CHANGES,{userCanPullChanges:!0,isFork:L}),handler:()=>n?L?(A.default.addEventV2({category:"collection",action:"initiate_pull_changes",label:"sidebar",entityType:"collection",entityId:this.id}),void C.default.transitionTo("build.merge",{toId:this.getForkInfo().forkId,entityType:"collection"},{"pull-changes":!0,workflow:"sync",source:this.getForkInfo().baseCollectionUid})):this.showCollectionNotAForkToast():(0,F.showOfflineActionDisabledToast)()},{name:V.ACTION_LABELS.VIEW_CHANGELOG,isEnabled:n,handler:()=>{var e;A.default.addEventV2({category:"collection",action:"view_changelog",label:"sidebar",entityType:"collection",entityId:this._item.id});return C.default.transitionTo(_.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:null===(e=this.parent)||void 0===e?void 0:e.id},{ctx:"changelog"})}},{name:V.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>{var e;(0,u.collectionActions)(this._item.id,V.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:null===(e=this.parent)||void 0===e?void 0:e.id},(()=>{}))}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,f.resolveStoreInstance)(y.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,u.renameCollection)(this.id,e)}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DUPLICATE,isEnabled:i&&(null===(t=this.hasPermissionOnAPI)||void 0===t?void 0:t.call(this,"addCollection")),handler:()=>W(this,void 0,void 0,(function*(){var e,t;if(!i)return(0,F.showOfflineActionDisabledToast)();if(!I)return this.showPermissionErrorToast();if(g.default.didUserCancelDiscard())return;const o=yield(0,E.getAPIVersionId)(this.parent.id),n={origin:"sidebar",name:this.name,apiVersionId:o,apiId:this.context.apiId};if(null===(e=this.parent)||void 0===e?void 0:e.id){if(!o)return void pm.logger.error("CollectionSidebarModel~handleAction: API version ID not found for apiId");const e=null===(t=this.parent)||void 0===t?void 0:t.id;if(!e)return;try{const t=yield(0,b.getAPI)(e);if(!t)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${e}`);if(!t.isMigrated)return void(0,b.migrateAPI)(e,o).catch(r().noop)}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting API",e)}try{return(0,u.duplicateCollectionInAPI)(this.id,{type:"api",id:e,apiVersionId:o,relation:"unclassified"},{silent:!0,currentName:(0,D.getDuplicatedEntityName)([this.name],this.name)})}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting relation data",e)}}return(0,u.duplicateCollection)(this.id,n,{silent:!0}).catch((()=>{this.showErrorToast("duplicate","collection")}))}))}),{type:V.ACTION_TYPE_COPY_TO_COLLECTIONS,name:V.ACTION_LABELS.COPY_TO_COLLECTIONS,isEnabled:r().get(O,l.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0),tooltip:N.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{const e=(0,u.duplicateCollection)(this.id,{},{currentName:this.name,suffix:""});return d.default.setActiveTab(c.SIDEBAR_COLLECTION),e.then((()=>{(0,R.toast)({status:"success",description:"Copied to collections in the sidebar."})})).catch((e=>{pm.logger.error("CollectionSidebarItem~get actions: error occurred in copy to collections",e),(0,R.toast)({status:"error",description:"Could not copy to collections in the sidebar."})}))}},{name:V.ACTION_LABELS.PASTE,shortcut:"paste",isEnabled:i&&I,tooltip:N.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:i&&v,handler:()=>W(this,void 0,void 0,(function*(){var e,t,o,n;if(!i)return(0,F.showOfflineActionDisabledToast)();if(!v)return this.showPermissionErrorToast();try{if(!(null===(e=this.parent)||void 0===e?void 0:e.id))return void pm.logger.error("CollectionSidebarModel~handleAction: API ID not found for apiId");const i=yield(0,b.getAPI)(this.parent.id);if(!i)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${null===(t=this.parent)||void 0===t?void 0:t.id}`);if(!i.isMigrated){const e=yield(0,E.getAPIVersionId)(null===(o=this.parent)||void 0===o?void 0:o.id);return(0,b.migrateAPI)(null===(n=this.parent)||void 0===n?void 0:n.id,e).catch(r().noop)}}catch(e){return void pm.logger.error("Error while checking if API is migrated",e)}let s;return L&&(s={forkModel:"collection",isForked:!0,forkLabel:this.getForkInfo().forkLabel,baseCollectionUid:this.getForkInfo().baseCollectionUid}),(0,u.deleteCollection)(this._item.id,{name:this._item.name,forkInfo:s,isAPIExclusive:!!this.parent.id}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)}))}))})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}get meta(){const e=[],t=this.id;let i=null;if(O.default.isBetaCollection(t)){const e=r().get(O.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,x.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,L.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,x.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),{iconsAfterText:e,iconBeforeText:P.default}}toString(){return"collection"}}U([n.computed],G.prototype,"isPendingCreate",null),U([n.computed],G.prototype,"name",null),U([n.computed],G.prototype,"id",null),U([n.computed],G.prototype,"emptyState",null),U([n.computed],G.prototype,"actions",null),U([n.computed],G.prototype,"isEditable",null),U([n.computed],G.prototype,"isLoading",null),U([n.computed],G.prototype,"meta",null)},"./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return S}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./js/stores/StoreManager.js"),l=i("./runtime-repl/_common/DisabledTooltipConstants.js"),d=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),c=i("./api-dev/stores/APIListStore.js"),u=i("./collaboration/workspace/types/PermissionTypes.ts"),p=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),m=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),h=i("./runtime-repl/utils/EntityMetaTransformer.js"),f=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),I=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),v=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),b=i("./runtime-repl/collection/sidebar/GitLinkedSidebarEmptyItem.tsx"),E=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),g=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),_=i("./runtime-repl/collection/CollectionActionsConstants.js"),A=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},C=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class S extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="collection",this.analyticsEventCategory="collection-item-branch-mode",this.onClick=()=>{this._item.openInWorkbench()},this.type=f.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_COLLECTION,this.getChildren=()=>C(this,void 0,void 0,(function*(){const e=yield(0,E.getFolders)(this),t=yield(0,E.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.userCanExpand=!0,this.allowedDropTargets=[I.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.apiStore=(0,a.resolveStoreInstance)(c.default),this.onClick=this.onClick.bind(this)}get isPendingCreate(){return!1}get name(){return this._item.model.name}get id(){return this._item.model.uid}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return b.default}handleAction(e,t){switch(e){case _.ACTION_LABELS.OPEN:return this._item.openInWorkbench();case _.ACTION_LABELS.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case _.ACTION_LABELS.ADD_REQUEST:return this._item.addRequest();case _.ACTION_LABELS.ADD_FOLDER:return this._item.addFolder();case _.ACTION_LABELS.RUN_COLLECTION:return this._item.run();case _.ACTION_LABELS.DUPLICATE:return this._item.duplicate();case _.ACTION_LABELS.PASTE:return()=>{};case _.ACTION_LABELS.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});case _.ACTION_LABELS.VIEW_DOCUMENTATION:return this._item.viewDocumentation();case _.ACTION_LABELS.COPY_TO_COLLECTIONS:return this._item.copyToWorkspace().then((()=>{(0,v.toast)({status:"success",description:"Copied to collections in the sidebar."})})).catch((e=>{pm.logger.error("GitLinkedCollectionSidebarItem~handleAction - Could not copy collection to workspace ",e),(0,v.toast)({status:"error",description:"Could not copy to collections in the sidebar."})}));default:pm.logger.warn("GitLinkedCollectionSidebarItem~handleAction: Unhandled action",e)}}get actions(){const e=(0,a.resolveStoreInstance)(d.default),t=e&&e.permissions,i=r().get(t,u.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0);return[{name:_.ACTION_LABELS.RUN_COLLECTION,isEnabled:!0,handler:()=>this.handleAction(_.ACTION_LABELS.RUN_COLLECTION)},{name:this.isEditable?_.ACTION_LABELS.EDIT:_.ACTION_LABELS.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(_.ACTION_LABELS.OPEN)},{name:_.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(_.ACTION_LABELS.VIEW_DOCUMENTATION)},{name:_.ACTION_LABELS.ADD_REQUEST,isEnabled:this.isEditable,handler:()=>this.handleAction(_.ACTION_LABELS.ADD_REQUEST)},{name:_.ACTION_LABELS.ADD_FOLDER,isEnabled:this.isEditable,handler:()=>this.handleAction(_.ACTION_LABELS.ADD_FOLDER)},(0,o.generateDefaultSidebarAction)({identifier:_.ACTION_LABELS.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(_.ACTION_LABELS.RENAME,{newName:e})}),(0,o.generateDefaultSidebarAction)({identifier:_.ACTION_LABELS.DUPLICATE,isEnabled:this.isEditable,handler:()=>this.handleAction(_.ACTION_LABELS.DUPLICATE)}),{name:_.ACTION_LABELS.COPY_TO_COLLECTIONS,isEnabled:i,tooltip:l.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>this.handleAction(_.ACTION_LABELS.COPY_TO_COLLECTIONS)},{name:_.ACTION_LABELS.PASTE,isEnabled:this.isEditable,handler:()=>this.handleAction(_.ACTION_LABELS.PASTE)},(0,o.generateDefaultSidebarAction)({identifier:_.ACTION_LABELS.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(_.ACTION_LABELS.DELETE)})]}get isEditable(){return this._item.model.isEditable}get meta(){const e=[],t=this.id;let i=null;if(m.default.isBetaCollection(t)){const e=r().get(m.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,g.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,h.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,g.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),{iconsAfterText:e,iconBeforeText:p.default}}toString(){return"collection"}}A([n.computed],S.prototype,"isPendingCreate",null),A([n.computed],S.prototype,"name",null),A([n.computed],S.prototype,"id",null),A([n.computed],S.prototype,"emptyState",null),A([n.action],S.prototype,"handleAction",null),A([n.computed],S.prototype,"actions",null),A([n.computed],S.prototype,"isEditable",null),A([n.computed],S.prototype,"meta",null)},"./runtime-repl/collection/sidebar/GitLinkedSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js");class s extends o.Component{render(){const{item:e}=this.props;if(!e.parent)return pm.logger.error("GitLinkedCollectionSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content"},"This collection is empty",e.parent.isEditable&&o.createElement("div",null,o.createElement(n.Button,{type:"text",className:"learn-more-link",onClick:()=>{var t,i,o;return e.parent?e.parent.isEditable&&(null===(o=null===(i=null===(t=e.parent)||void 0===t?void 0:t._item)||void 0===i?void 0:i.addRequest)||void 0===o?void 0:o.call(i)):(pm.logger.error("GitLinkedCollectionSidebarEmptyItem~handleClick- Parent of item is undefined"),null)}},"Add a request"),"to start working."))}}},"./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return W}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),l=i("./collaboration/workspace/types/PermissionTypes.ts"),d=i("./appsdk/sidebar/SidebarService.ts"),c=i("./runtime-repl/collection/manifest.js"),u=i("./runtime-repl/collection/_api/CollectionInterface.js"),p=i("./runtime-repl/folder/_api/FolderInterface.js"),m=i("./runtime-repl/request-http/_api/RequestInterface.js"),h=i("./appsdk/workbench/WorkbenchService.js"),f=i("./js/stores/StoreManager.js"),I=i("./api-dev/stores/APIListStore.js"),v=i("./api-dev/services/APIPermissionService.js"),b=i("./api-dev/interfaces/APIInterface.js"),E=i("./js/services/SingleTabWorkbenchService.js"),g=i("./runtime-repl/_common/NavigationConstants.js"),_=i("./js/modules/services/AnalyticsService.js"),A=i("./js/services/NavigationService.js"),C=i("./js/stores/CurrentUserStore.js"),S=i("./js/utils/TabOpeningUtil.js"),T=i("./js/stores/OnlineStatusStore.js"),y=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),P=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),O=i("./runtime-repl/_common/DisabledTooltipConstants.js"),N=i("./runtime-repl/utils/EntityMetaTransformer.js"),L=i("./version-control/services/VersionControlCollectionActions.js"),j=i("./js/utils/EntityNameResolver.js"),D=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),w=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),R=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),x=i("./runtime-repl/collection/sidebar/CollectionSidebarEmptyItem.tsx"),M=i("./runtime-repl/runner/RunnerHelper.js"),k=i("./runtime-repl/_common/ToastHelpers.js"),F=i("./runtime-repl/collection/CollectionActionsConstants.js"),V=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),B=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class W extends o.SidebarItem{constructor(e,t){super(t),this.isMigrated=!0,this.dataTestIdSuffix="collection",this.type="collection",this.analyticsEventCategory="unmigratedCollection-item-builder-mode",this.onClick=()=>this.parent&&(0,u.openCollectionInTab)(this.id,{},{type:"api",id:this.parentAPIId}),this.getChildren=()=>U(this,void 0,void 0,(function*(){const e=yield(0,V.getFolders)(this),t=yield(0,V.getRequests)(this);return(0,n.computed)((()=>[...e.get(),...t.get()]))})),this.userCanExpand=!0,this.allowedDropTargets=[D.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.apiStore=(0,f.resolveStoreInstance)(I.default)}get isPendingCreate(){return Boolean(this._item.isPending)}get name(){return this._item.name}get id(){return this._item.id}get parentAPIId(){var e,t;return null===(t=null===(e=this.parent)||void 0===e?void 0:e._item)||void 0===t?void 0:t.parentEntityId}hasPermissionOnAPI(e){return v.default.hasPermission(this.apiStore.permissions,e,"api",this.parentAPIId)}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}getForkInfo(){return this._item&&this._item.isForked?{id:this._item.baseCollectionUid,forkId:this._item.id,forkLabel:this._item.forkLabel,baseCollectionUid:this._item.baseCollectionUid}:{}}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return x.default}get actions(){var e,t;const{userCanSave:i,userCanSaveAndSync:n}=(0,f.resolveStoreInstance)(T.default),s=(0,f.resolveStoreInstance)(C.default).isLoggedIn,I=r().get(this._item,"permissions.edit",!0),v=r().get(this._item,"permissions.delete",!0),y=(0,f.resolveStoreInstance)(a.default),P=y&&y.permissions,N=!(!this._item||!this._item.isForked),D=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[h.default.isUseBrowserTabsActive()&&{name:F.ACTION_LABELS.OPEN_IN_NEW_TAB,shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>{(0,S.openInNewBrowserTab)(g.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:this.parentAPIId},{})}},{name:F.ACTION_LABELS.RUN_COLLECTION,isEnabled:(0,M.canRunCollection)(),xpathLabel:"runCollection",handler:()=>{(0,u.collectionActions)(this.id,F.ACTION_TYPE_RUN,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:this.parentAPIId},(()=>{}))}},!D&&{name:i&&I?F.ACTION_LABELS.EDIT:F.ACTION_LABELS.VIEW_DETAILS,isEnabled:!0,handler:()=>{(0,u.openCollectionInTab)(this.id,{focusContext:"info"})}},!D&&{name:F.ACTION_LABELS.ADD_REQUEST,isEnabled:i&&I,shouldExpandItem:!0,handler:()=>{if(!i)return(0,k.showOfflineActionDisabledToast)();E.default.didUserCancelDiscard()||(0,m.createRequest)({collection:this.id},{openInTab:!1}).then((e=>{A.default.transitionTo(g.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:e.uid,apiId:this.context.apiId},{},{tabOptions:{preview:!1,forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this.id}})}))}},!D&&{name:F.ACTION_LABELS.ADD_FOLDER,isEnabled:i&&I,xpathLabel:"addFolder",shouldExpandItem:!0,handler:()=>{if(!i)return(0,k.showOfflineActionDisabledToast)();E.default.didUserCancelDiscard()||(0,p.createFolder)({model:this.type,uid:this.id},{openInTab:!1}).then((e=>{A.default.transitionTo(g.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{additionalContext:{rename:!0,parentCollectionUID:this.id}})}))}},{name:o.DEFAULT_ACTIONS.FORK,shortcut:"fork",isEnabled:s&&n,tooltip:(0,L.getDisabledText)(F.ACTION_TYPE_FORK,{}),handler:()=>{(0,u.collectionActions)(this._item.id,F.ACTION_TYPE_FORK,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:this.parentAPIId},(()=>{}))}},!D&&{name:F.ACTION_LABELS.PULL_REQUEST,isEnabled:s&&n&&N,tooltip:(0,L.getDisabledText)(F.ACTION_TYPE_PULL_REQUEST,{isFork:N}),handler:()=>n?N?(_.default.addEventV2({category:"pullrequest",action:"initiate_create",entityType:"collection",label:"sidebar",entityId:this.id}),(0,u.createPullRequest)(this.id,{id:this._item.baseCollectionUid,forkId:this.id})):this.showPermissionErrorToast():(0,k.showOfflineActionDisabledToast)()},!D&&{name:F.ACTION_LABELS.MERGE,isEnabled:s&&n&&N,tooltip:(0,L.getDisabledText)(F.ACTION_TYPE_MERGE,{isFork:N}),handler:()=>n?N?(0,u.mergeChanges)(this.id,{id:this._item.baseCollectionUid,forkId:this.id}):this.showPermissionErrorToast():(0,k.showOfflineActionDisabledToast)()},!D&&{name:F.ACTION_LABELS.PULL,isEnabled:s&&n&&N,tooltip:(0,L.getDisabledText)(F.ACTION_TYPE_PULL_CHANGES,{userCanPullChanges:!0,isFork:N}),handler:()=>n?N?(_.default.addEventV2({category:"collection",action:"initiate_pull_changes",label:"sidebar",entityType:"collection",entityId:this.id}),void A.default.transitionTo("build.merge",{toId:this.getForkInfo().forkId,entityType:"collection"},{"pull-changes":!0,workflow:"sync",source:this.getForkInfo().baseCollectionUid})):this.showCollectionNotAForkToast():(0,k.showOfflineActionDisabledToast)()},{name:F.ACTION_LABELS.VIEW_CHANGELOG,isEnabled:n,handler:()=>{_.default.addEventV2({category:"collection",action:"view_changelog",label:"sidebar",entityType:"collection",entityId:this._item.id});return A.default.transitionTo(g.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:this.parentAPIId},{ctx:"changelog"})}},{name:F.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>{(0,u.collectionActions)(this._item.id,F.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:this.parentAPIId},(()=>{}))}},!D&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,f.resolveStoreInstance)(T.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,u.renameCollection)(this.id,e)}),!D&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DUPLICATE,isEnabled:i&&(null===(t=this.hasPermissionOnAPI)||void 0===t?void 0:t.call(this,"addCollection")),handler:()=>U(this,void 0,void 0,(function*(){var e,t;if(!i)return(0,k.showOfflineActionDisabledToast)();if(!I)return this.showPermissionErrorToast();if(E.default.didUserCancelDiscard())return;const o=this.parentAPIId,n={origin:"sidebar",name:this.name,apiVersionId:o,apiId:this.context.apiId};if(null===(e=this.parent)||void 0===e?void 0:e._item.parentEntityId){if(!o)return void pm.logger.error("CollectionSidebarModel~handleAction: API version ID not found for apiId");const e=null===(t=this.parent)||void 0===t?void 0:t._item.parentEntityId;if(!e)return;try{const t=yield(0,b.getAPI)(e);if(!t)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${e}`);if(!t.isMigrated)return void(0,b.migrateAPI)(e,this.parent._item.id).catch(r().noop)}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting API",e)}try{return(0,u.duplicateCollectionInAPI)(this.id,{type:"api",id:e,apiVersionId:o,relation:"unclassified"},{silent:!0,currentName:(0,j.getDuplicatedEntityName)([this.name],this.name)})}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting relation data",e)}}return(0,u.duplicateCollection)(this.id,n,{silent:!0}).catch((()=>{this.showErrorToast("duplicate","collection")}))}))}),!D&&{type:F.ACTION_TYPE_COPY_TO_COLLECTIONS,name:F.ACTION_LABELS.COPY_TO_COLLECTIONS,isEnabled:r().get(P,l.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0),tooltip:O.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{const e=(0,u.duplicateCollection)(this.id,{},{currentName:this.name,suffix:""});return d.default.setActiveTab(c.SIDEBAR_COLLECTION),e.then((()=>{(0,w.toast)({status:"success",description:"Copied to collections in the sidebar."})})).catch((e=>{pm.logger.error("CollectionSidebarItem~get actions: error occurred in copy to collections",e),(0,w.toast)({status:"error",description:"Could not copy to collections in the sidebar."})}))}},!D&&{name:F.ACTION_LABELS.PASTE,shortcut:"paste",isEnabled:i&&I,tooltip:O.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{}},!D&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:i&&v,handler:()=>U(this,void 0,void 0,(function*(){var e,t;if(!i)return(0,k.showOfflineActionDisabledToast)();if(!v)return this.showPermissionErrorToast();try{if(!(null===(e=this.parent)||void 0===e?void 0:e._item.parentEntityId))return void pm.logger.error("CollectionSidebarModel~handleAction: API ID not found for apiId");const i=yield(0,b.getAPI)(this.parent._item.parentEntityId);if(!i)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${this.parent._item.parentEntityId}`);if(!i.isMigrated){const e=null===(t=this.parent)||void 0===t?void 0:t.id;return(0,b.migrateAPI)(i.id,e).catch(r().noop)}}catch(e){return void pm.logger.error("Error while checking if API is migrated",e)}let o;return N&&(o={forkModel:"collection",isForked:!0,forkLabel:this.getForkInfo().forkLabel,baseCollectionUid:this.getForkInfo().baseCollectionUid}),(0,u.deleteCollection)(this._item.id,{name:this._item.name,forkInfo:o,isAPIExclusive:!!this.parentAPIId}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)}))}))})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}get meta(){const e=[],t=this.id;let i=null;if(P.default.isBetaCollection(t)){const e=r().get(P.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,R.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,N.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,R.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),{iconsAfterText:e,iconBeforeText:y.default}}toString(){return"collection"}}B([n.computed],W.prototype,"isPendingCreate",null),B([n.computed],W.prototype,"name",null),B([n.computed],W.prototype,"id",null),B([n.computed],W.prototype,"parentAPIId",null),B([n.computed],W.prototype,"emptyState",null),B([n.computed],W.prototype,"actions",null),B([n.computed],W.prototype,"isEditable",null),B([n.computed],W.prototype,"isLoading",null),B([n.computed],W.prototype,"meta",null)},"./runtime-repl/collection/sidebar/VersionViewCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/stores/APIListStore.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),c=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),u=i("./runtime-repl/utils/EntityMetaTransformer.js"),p=i("./version-control/services/VersionControlCollectionActions.js"),m=i("./api-dev/interfaces/APIInterface.js"),h=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),f=i("./runtime-repl/collection/sidebar/GitLinkedSidebarEmptyItem.tsx"),I=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),v=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),b=i("./runtime-repl/collection/CollectionActionsConstants.js"),E=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class _ extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="collection",this.latestRelease=!1,this.analyticsEventCategory="collection-item-version-mode",this.onClick=()=>{this._item.openInWorkbench()},this.getChildren=()=>g(this,void 0,void 0,(function*(){const e=yield(0,I.getFolders)(this),t=yield(0,I.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.userCanExpand=!0,this.allowedDropTargets=[h.default],this._item=e,this.apiStore=(0,a.resolveStoreInstance)(l.default),this.onClick=this.onClick.bind(this),this.fetchLatestRelease()}setLatestRelease(e){this.latestRelease=e}fetchLatestRelease(){return g(this,void 0,void 0,(function*(){const e=this.context.apiId||null;e&&this.setLatestRelease(yield(0,m.isLatestReleaseActive)(e))}))}get isPendingCreate(){return!1}get name(){return this._item.model.name}get id(){return this._item.model.uid}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return f.default}handleAction(e){switch(e){case b.ACTION_LABELS.RUN_COLLECTION:return this._item.run();case b.ACTION_LABELS.VIEW_DOCUMENTATION:return this._item.viewDocumentation();case b.ACTION_LABELS.VIEW_CHANGELOG:return this._item.viewChangelog();case o.DEFAULT_ACTIONS.FORK:return this._item.fork();default:pm.logger.warn("VersionViewCollectionSidebarItem~handleAction: Unhandled action",e)}}get actions(){return[{name:b.ACTION_LABELS.RUN_COLLECTION,isEnabled:!0,handler:()=>this.handleAction(b.ACTION_LABELS.RUN_COLLECTION)},{name:o.DEFAULT_ACTIONS.FORK,isEnabled:!0,shortcut:"fork",tooltip:(0,p.getDisabledText)(b.ACTION_TYPE_FORK,{isLatestRelease:this.latestRelease}),handler:()=>this.handleAction(b.ACTION_LABELS.FORK)},{name:b.ACTION_LABELS.VIEW_CHANGELOG,isEnabled:!0,handler:()=>this.handleAction(b.ACTION_LABELS.VIEW_CHANGELOG)},{name:b.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(b.ACTION_LABELS.VIEW_DOCUMENTATION)}]}get isEditable(){return!1}get meta(){const e=[],t=this.id;let i=null;if(c.default.isBetaCollection(t)){const e=r().get(c.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,v.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,u.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,v.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),{iconsAfterText:e,iconBeforeText:d.default}}}E([n.observable],_.prototype,"latestRelease",void 0),E([n.action],_.prototype,"setLatestRelease",null),E([n.computed],_.prototype,"isPendingCreate",null),E([n.computed],_.prototype,"name",null),E([n.computed],_.prototype,"id",null),E([n.computed],_.prototype,"emptyState",null),E([n.action],_.prototype,"handleAction",null),E([n.computed],_.prototype,"actions",null),E([n.computed],_.prototype,"isEditable",null),E([n.computed],_.prototype,"meta",null)},"./runtime-repl/environment/_api/EnvironmentSidebarStore.ts":function(e,t,i){i.r(t),i.d(t,{getEnvironments:function(){return p}});var o=i("../../node_modules/mobx/lib/mobx.module.js"),n=i("./api-dev/sidebar/APISidebarItem.ts"),s=i("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),r=i("./runtime-repl/sidebar-core/index.ts"),a=i("./api-dev/sidebar/UnmigratedAPISidebarItem.ts"),l=i("./runtime-repl/environment/sidebar/EnvironmentSidebarItem.ts"),d=i("./js/stores/StoreManager.js"),c=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),u=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};function p(e){return u(this,void 0,void 0,(function*(){if(!e)return(0,o.computed)((()=>[]));const t=(0,d.resolveStoreInstance)(c.default).id,i=yield(0,s.subscribeMeta)(t,{parent:["api","workspace"]});if(e instanceof n.default){const t=(0,o.computed)((()=>{var t,o,n,s;const r=new Set(Object.values((null===(s=null===(n=null===(o=null===(t=e._item)||void 0===t?void 0:t.computedVersion)||void 0===o?void 0:o.relationsStore)||void 0===n?void 0:n.relations)||void 0===s?void 0:s.environment)||{}).map((e=>e.modelId)));return i.list.filter((e=>r.has(e.id)&&!e.isDeleting))}));return(0,r.computedArray)(t,(t=>new l.default(t,e)),(()=>!1))}if(e instanceof a.default){const t=(0,o.computed)((()=>{var t,o,n;const s=new Set(Object.values((null===(n=null===(o=null===(t=e._item)||void 0===t?void 0:t.relationsStore)||void 0===o?void 0:o.relations)||void 0===n?void 0:n.environment)||{}).map((e=>e.modelId)));return i.list.filter((e=>s.has(e.id)&&!e.isDeleting))}));return(0,r.computedArray)(t,(t=>new l.default(t,e)),(()=>!1))}return(0,o.computed)((()=>[]))}))}},"./runtime-repl/environment/sidebar/EnvironmentSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./js/stores/StoreManager.js"),r=i("./runtime-repl/environment/_api/EnvironmentInterface.js"),a=i("./api-dev/stores/APIListStore.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-environment-stroke.js"),d=i("./api-dev/interfaces/APIInterface.js"),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class p extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="environment",this.onClick=()=>{var e,t;(0,r.openEnvironmentInTab)(this.id,{},{type:"api",id:(null===(t=null===(e=this.parent)||void 0===e?void 0:e.parentAPI)||void 0===t?void 0:t.id)||this.context.apiId})},this.getChildren=()=>u(this,void 0,void 0,(function*(){return Promise.resolve((0,n.computed)((()=>[])))})),this.userCanExpand=!1,this.allowedDropTargets=[],this._item=e,this.apiStore=(0,s.resolveStoreInstance)(a.default),this.onClick=this.onClick.bind(this)}get isPendingCreate(){return!1}get name(){return this._item.name}get id(){return this._item.id}get actions(){return[(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this.isEditable,handler:e=>(0,r.renameEnvironment)(this.id,e)}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:this.isEditable,handler:()=>u(this,void 0,void 0,(function*(){var e,t;let i;yield(0,d.migrateAPI)(null===(e=this.parent)||void 0===e?void 0:e._item.parentEntityId,null===(t=this.parent)||void 0===t?void 0:t.id),this._item.forkLabel&&(i={isForked:!!this._item.forkLabel,forkLabel:this._item.forkLabel,baseEnvironmentUid:this._item.baseEnvironmentUid}),yield(0,r.deleteEnvironment)(this.id,{name:this._item.name,forkInfo:i})}))})]}get isEditable(){return this._item.isEditable}get meta(){return{iconBeforeText:l.default}}toString(){return"environment"}}c([n.computed],p.prototype,"isPendingCreate",null),c([n.computed],p.prototype,"name",null),c([n.computed],p.prototype,"id",null),c([n.computed],p.prototype,"actions",null),c([n.computed],p.prototype,"isEditable",null),c([n.computed],p.prototype,"meta",null)},"./runtime-repl/example/sidebar/GitLinkedResponseSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),r=i("./node_modules/lodash/lodash.js"),a=i.n(r),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-example-stroke.js"),d=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};const u={EDIT:"Edit",VIEW_DETAILS:"View details",RENAME:o.DEFAULT_ACTIONS.RENAME,DUPLICATE:o.DEFAULT_ACTIONS.DUPLICATE,DELETE:o.DEFAULT_ACTIONS.DELETE,OPEN:"Open"};class p extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="response",this.analyticsEventCategory="response-item-branch-mode",this.onClick=()=>this._item.openInWorkbench(),this.type=d.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_EXAMPLE,this.getChildren=()=>Promise.resolve((0,n.computed)((()=>[]))),this._responsesList=[],this.allowedDropTargets=[s.default],this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${a().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[{name:this.isEditable?u.EDIT:u.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(u.OPEN)},(0,o.generateDefaultSidebarAction)({identifier:u.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(u.RENAME,{newName:e})}),(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:this.isEditable}),(0,o.generateDefaultSidebarAction)({identifier:u.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(u.DELETE)})]}handleAction(e,t){switch(e){case u.OPEN:return this._item.openInWorkbench();case u.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case u.DUPLICATE:return this._item.duplicate();case u.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});default:pm.logger.warn("GitLinkedExampleSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return this._item.model.isEditable}toString(){return"example"}get meta(){return{iconBeforeText:l.default}}}c([n.computed],p.prototype,"name",null),c([n.computed],p.prototype,"id",null),c([n.computed],p.prototype,"isPendingCreate",null),c([n.computed],p.prototype,"actions",null),c([n.computed],p.prototype,"isEditable",null),c([n.computed],p.prototype,"meta",null)},"./runtime-repl/example/sidebar/ResponseSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),r=i("./appsdk/workbench/WorkbenchService.js"),a=i("./js/constants/TabOpeningConstants.js"),l=i("./runtime-repl/_common/NavigationConstants.js"),d=i("./js/utils/TabOpeningUtil.js"),c=i("./runtime-repl/example/_api/ExampleInterface.js"),u=i("./js/stores/StoreManager.js"),p=i("./js/stores/OnlineStatusStore.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-example-stroke.js"),h=i("./js/services/NavigationService.js"),f=i("./runtime-repl/_common/ToastHelpers.js"),I=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};class v extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="response",this.type="response",this.analyticsEventCategory="response-item-builder-mode",this.onClick=()=>{if(this.parent||pm.logger.error("FolderSidebarItem~parent not found"),this.context.apiId)return h.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_EXAMPLE_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId},{});(0,c.openExampleInTab)(this.id,{preview:!0,collectionId:this._item.collection})},this.getChildren=()=>Promise.resolve((0,n.computed)((()=>[]))),this.allowedDropTargets=[s.default],this._item=e}toString(){return"example"}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}get actions(){var e;const{userCanSave:t}=(0,u.resolveStoreInstance)(p.default),i=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[r.default.isUseBrowserTabsActive()&&{type:a.ACTION_OPEN_IN_NEW_BROWSER_TAB,name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:t,handler:()=>(0,d.openInNewBrowserTab)(l.WORKFLOW_IDENTIFIER.OPEN_EXAMPLE_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId})},!i&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,u.resolveStoreInstance)(p.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,c.renameExample)(this.id,null,e)}),!i&&(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:t&&this._item.isEditable}),!i&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:t&&this._item.isEditable,handler:()=>t?this._item.isEditable?(0,c.deleteExample)(this.id,{name:this.name,collectionId:this._item.collection}).catch((e=>{pm.logger.error("ResponseSidebarItem~handleAction - ",e)})):this.showPermissionErrorToast():(0,f.showOfflineActionDisabledToast)()})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}get meta(){return{iconBeforeText:m.default}}}I([n.computed],v.prototype,"name",null),I([n.computed],v.prototype,"id",null),I([n.computed],v.prototype,"isPendingCreate",null),I([n.computed],v.prototype,"isEditable",null),I([n.computed],v.prototype,"isLoading",null),I([n.computed],v.prototype,"meta",null)},"./runtime-repl/example/sidebar/VersionViewResponseSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-example-stroke.js"),l=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};class d extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="response",this.analyticsEventCategory="response-item-version-mode",this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>Promise.resolve((0,n.computed)((()=>[]))),this._responsesList=[],this.allowedDropTargets=[],this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[]}get isEditable(){return this._item.model.isEditable}get meta(){return{iconBeforeText:a.default}}}l([n.computed],d.prototype,"name",null),l([n.computed],d.prototype,"id",null),l([n.computed],d.prototype,"isPendingCreate",null),l([n.computed],d.prototype,"actions",null),l([n.computed],d.prototype,"isEditable",null),l([n.computed],d.prototype,"meta",null)},"./runtime-repl/folder/sidebar/FolderSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js"),s=i("./runtime-repl/collection/CollectionActionsConstants.js"),r=i("./node_modules/lodash/lodash.js"),a=i.n(r),l=i("./runtime-repl/folder/_api/FolderInterface.js");function d(e){const{item:t}=e,i=o.useRef(null);if(o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(i.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(i.current,e.index))),[i.current]),!t.parent)return pm.logger.error("FolderSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content",ref:i,"data-index":e.index},"This folder is empty",t.parent.isEditable&&o.createElement("div",null,o.createElement(n.Button,{type:"text",className:"learn-more-link",onClick:()=>{if(!t.parent)return pm.logger.error("FolderSidebarEmptyItem~handleClick- Parent of item is undefined"),null;(0,l.folderActions)(t.parent.id,t.parent,s.ACTION_TYPE_ADD_REQUEST,{},{origin:"sidebar",canPerform:()=>t.parent.isEditable,collectionId:t.parent._item.collection},(()=>{a().noop()}))}},"Add a request"),"to start working."))}},"./runtime-repl/folder/sidebar/FolderSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return O}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./js/services/NavigationService.js"),l=i("./runtime-repl/_common/NavigationConstants.js"),d=i("./js/constants/TabOpeningConstants.js"),c=i("./appsdk/workbench/WorkbenchService.js"),u=i("./runtime-repl/_common/ToastHelpers.js"),p=i("./js/services/SingleTabWorkbenchService.js"),m=i("./js/utils/TabOpeningUtil.js"),h=i("./runtime-repl/folder/_api/FolderInterface.js"),f=i("./js/stores/StoreManager.js"),I=i("./js/stores/OnlineStatusStore.js"),v=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-folder-stroke.js"),b=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),E=i("./runtime-repl/request-http/_api/RequestInterface.js"),g=i("./runtime-repl/_common/DisabledTooltipConstants.js"),_=i("./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts"),A=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),C=i("./runtime-repl/collection/CollectionActionsConstants.js"),S=i("./runtime-repl/runner/RunnerHelper.js"),T=i("./runtime-repl/folder/sidebar/FolderSidebarEmptyItem.tsx"),y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},P=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class O extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="folder",this.type="folder",this.analyticsEventCategory="folder-item-builder-mode",this.getChildren=()=>P(this,void 0,void 0,(function*(){const e=yield(0,b.getFolders)(this),t=yield(0,b.getRequests)(this);return(0,n.computed)((()=>[...e.get(),...t.get()]))})),this.onClick=()=>{if(this.parent)return this.context.apiId?a.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId},{},{additionalContext:{parentCollectionUID:this._item.collection}}):void(0,h.openFolderInTab)(this.id,this._item.collection);pm.logger.error("FolderSidebarItem~parent not found")},this.allowedDropTargets=[O,A.default,_.default],this.isChildrenReorderingEnabled=!0,this._item=e}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}get emptyState(){return T.default}get actions(){var e,t;const{userCanSave:i}=(0,f.resolveStoreInstance)(I.default),n=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[c.default.isUseBrowserTabsActive()&&{type:d.ACTION_OPEN_IN_NEW_BROWSER_TAB,name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>(0,m.openInNewBrowserTab)(l.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId})},!n&&{type:C.ACTION_TYPE_OPEN,name:this._item.isEditable?"Edit":"View details",isEnabled:!0,xpathname:"edit",handler:()=>{(0,h.openFolderInTab)(this.id,this._item.collection,{focusContext:"info"})}},!n&&{type:C.ACTION_TYPE_ADD_REQUEST,name:"Add request",isEnabled:i&&this._item.isEditable,shouldExpandItem:!0,handler:()=>{if(!i)return(0,u.showOfflineActionDisabledToast)();p.default.didUserCancelDiscard()||(0,E.createRequest)({collection:this._item.collection,folder:this.id},{openInTab:!1}).then((e=>{a.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:e.uid,apiId:this.context.apiId},{},{tabOptions:{preview:!1,forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this._item.collection}})}))}},!n&&{type:C.ACTION_TYPE_ADD_FOLDER,name:"Add folder",isEnabled:i&&this._item.isEditable,shouldExpandItem:!0,handler:()=>{if(!i)return(0,u.showOfflineActionDisabledToast)();p.default.didUserCancelDiscard()||(0,h.createFolder)({model:this.type,uid:this.id,parentCollectionUid:this._item.collection},{openInTab:!1}).then((e=>{a.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{additionalContext:{rename:!0,parentCollectionUID:this._item.collection}})}))}},!n&&{type:C.ACTION_TYPE_RUN,name:"Run folder",isEnabled:(0,S.canRunCollection)(),xpathname:"runFolder",handler:()=>{(0,h.folderActions)(this.id,this._item,C.ACTION_TYPE_RUN,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.collection,apiId:this.context.apiId},(()=>{r().noop()}))}},{type:C.ACTION_VIEW_DOCUMENTATION,name:"View documentation",isEnabled:!0,handler:()=>{(0,h.folderActions)(this.id,this._item,C.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.collection,apiId:this.context.apiId},(()=>{r().noop()}))}},!n&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,f.resolveStoreInstance)(I.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,h.renameFolder)(this.id,null,e)}),!n&&(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:i&&this._item.isEditable}),!n&&{type:C.ACTION_TYPE_PASTE,name:"Paste",shortcut:"paste",handler:()=>{},isEnabled:this._item.isEditable&&(null===(t=(0,f.resolveStoreInstance)(I.default))||void 0===t?void 0:t.userCanSave),tooltip:g.DISABLED_TOOLTIP_NO_PERMISSION},!n&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:i&&this._item.isEditable,handler:()=>{if(i&&this._item.isEditable)return(0,h.deleteFolder)(this.id,{name:this.name,collectionId:this._item.collection}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)}))}})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}toString(){return"folder"}get meta(){return{iconBeforeText:v.default}}}y([n.computed],O.prototype,"name",null),y([n.computed],O.prototype,"id",null),y([n.computed],O.prototype,"isPendingCreate",null),y([n.computed],O.prototype,"emptyState",null),y([n.computed],O.prototype,"isEditable",null),y([n.computed],O.prototype,"isLoading",null),y([n.computed],O.prototype,"meta",null)},"./runtime-repl/folder/sidebar/GitLinkedFolderSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js");function s(e){const{item:t}=e,i=o.useRef(null);if(o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(i.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(i.current,e.index))),[i.current]),!t.parent)return pm.logger.error("GitLinkedFolderSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content",ref:i,"data-index":e.index},"This folder is empty",t.parent.isEditable&&o.createElement("div",null,o.createElement(n.Button,{type:"text",className:"learn-more-link",onClick:()=>{var e,i,o;if(!t.parent)return pm.logger.error("GitLinkedFolderSidebarEmptyItem~handleClick- Parent of item is undefined"),null;null===(o=null===(i=null===(e=t.parent)||void 0===e?void 0:e._item)||void 0===i?void 0:i.addRequest)||void 0===o||o.call(i)}},"Add a request"),"to start working."))}},"./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-folder-stroke.js"),r=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),a=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),l=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),d=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarEmptyItem.tsx"),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const p={EDIT:"Edit",VIEW_DETAILS:"View details",VIEW_DOCUMENTATION:"View documentation",ADD_REQUEST:"Add request",ADD_FOLDER:"Add folder",RENAME:o.DEFAULT_ACTIONS.RENAME,DUPLICATE:o.DEFAULT_ACTIONS.DUPLICATE,PASTE:"Paste",DELETE:o.DEFAULT_ACTIONS.DELETE,OPEN:"Open"};class m extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="folder",this.analyticsEventCategory="folder-item-branch-mode",this.onClick=()=>this._item.openInWorkbench(),this.type=l.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_FOLDER,this.getChildren=()=>u(this,void 0,void 0,(function*(){const e=yield(0,a.getFolders)(this),t=yield(0,a.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.allowedDropTargets=[m,r.default],this.isChildrenReorderingEnabled=!0,this.userCanExpand=!0,this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}get emptyState(){return d.default}get actions(){return[{name:this.isEditable?p.EDIT:p.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(p.OPEN)},{name:p.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(p.VIEW_DOCUMENTATION)},{name:p.ADD_REQUEST,isEnabled:this.isEditable,handler:()=>this.handleAction(p.ADD_REQUEST)},{name:p.ADD_FOLDER,isEnabled:this.isEditable,handler:()=>this.handleAction(p.ADD_FOLDER)},(0,o.generateDefaultSidebarAction)({identifier:p.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(p.RENAME,{newName:e})}),(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:this.isEditable}),{name:p.PASTE,isEnabled:this.isEditable,handler:()=>this.handleAction(p.PASTE)},(0,o.generateDefaultSidebarAction)({identifier:p.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(p.DELETE)})]}handleAction(e,t){switch(e){case p.OPEN:return this._item.openInWorkbench();case p.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case p.ADD_REQUEST:return this._item.addRequest();case p.ADD_FOLDER:return this._item.addFolder();case p.DUPLICATE:return this._item.duplicate();case p.PASTE:return()=>{};case p.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});case p.VIEW_DOCUMENTATION:return this._item.viewDocumentation();default:pm.logger.warn("GitLinkedFolderSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return!!this._item.model.isEditable}get meta(){return{iconBeforeText:s.default}}toString(){return"folder"}}c([n.computed],m.prototype,"name",null),c([n.computed],m.prototype,"id",null),c([n.computed],m.prototype,"isPendingCreate",null),c([n.computed],m.prototype,"emptyState",null),c([n.computed],m.prototype,"actions",null),c([n.computed],m.prototype,"isEditable",null),c([n.computed],m.prototype,"meta",null)},"./runtime-repl/folder/sidebar/VersionViewFolderSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-folder-stroke.js"),r=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),a=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarEmptyItem.tsx"),l=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},d=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const c="View documentation",u="Run Folder";class p extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="folder",this.analyticsEventCategory="folder-item-version-mode",this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>d(this,void 0,void 0,(function*(){const e=yield(0,r.getFolders)(this),t=yield(0,r.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.allowedDropTargets=[],this.userCanExpand=!0,this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}get actions(){return[{name:u,isEnabled:!0,handler:()=>this.handleAction(u)},{name:c,isEnabled:!0,handler:()=>this.handleAction(c)}]}get emptyState(){return a.default}handleAction(e){switch(e){case u:return this._item.run();case c:return this._item.viewDocumentation();default:pm.logger.warn("VersionViewFolderSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return!!this._item.model.isEditable}get meta(){return{iconBeforeText:s.default}}toString(){return"folder"}}l([n.computed],p.prototype,"name",null),l([n.computed],p.prototype,"id",null),l([n.computed],p.prototype,"isPendingCreate",null),l([n.computed],p.prototype,"actions",null),l([n.computed],p.prototype,"emptyState",null),l([n.computed],p.prototype,"isEditable",null),l([n.computed],p.prototype,"meta",null)},"./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/sidebar-core/index.ts"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./runtime-repl/request-http/RequestIcon.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),u=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),p=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),m=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),h=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const I={EDIT:"Edit",VIEW_DETAILS:"View details",VIEW_DOCUMENTATION:"View documentation",ADD_EXAMPLE:"Add example",RENAME:n.DEFAULT_ACTIONS.RENAME,DUPLICATE:n.DEFAULT_ACTIONS.DUPLICATE,PASTE:"Paste",DELETE:n.DEFAULT_ACTIONS.DELETE,OPEN:"Open"};class v extends n.SidebarItem{constructor(e,t){super(t),this.shouldExpandOnClick=!1,this.dataTestIdSuffix="request",this.analyticsEventCategory="request-item-branch-mode",this.type=m.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_REQUEST,this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>f(this,void 0,void 0,(function*(){return(0,c.getResponses)(this)})),this.allowedDropTargets=[p.default,u.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.init()}init(){return f(this,void 0,void 0,(function*(){yield this.getChildren()}))}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[{name:this.isEditable?I.EDIT:I.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(I.OPEN)},{name:I.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(I.VIEW_DOCUMENTATION)},{name:I.ADD_EXAMPLE,isEnabled:this.isEditable,handler:()=>this.handleAction(I.ADD_EXAMPLE)},(0,n.generateDefaultSidebarAction)({identifier:I.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(I.RENAME,{newName:e})}),(0,n.generateSidebarBulkAction)({identifier:n.BULK_ACTIONS.DUPLICATE,isEnabled:this.isEditable}),{name:I.PASTE,isEnabled:this.isEditable,handler:()=>this.handleAction(I.PASTE)},(0,n.generateDefaultSidebarAction)({identifier:I.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(I.DELETE)})]}handleAction(e,t){switch(e){case I.OPEN:return this._item.openInWorkbench();case I.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case I.ADD_EXAMPLE:return this._item.addExample();case I.DUPLICATE:return this._item.duplicate();case I.PASTE:return()=>{};case I.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});case I.VIEW_DOCUMENTATION:return this._item.viewDocumentation();default:pm.logger.warn("GitLinkedRequestSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return this._item.model.isEditable}get meta(){return{iconBeforeText:(0,d.observer)((()=>o.createElement(l.default,{method:this._item.model.method})))}}toString(){return"request"}}h([a.computed],v.prototype,"name",null),h([a.computed],v.prototype,"id",null),h([a.computed],v.prototype,"isPendingCreate",null),h([a.computed],v.prototype,"actions",null),h([a.computed],v.prototype,"isEditable",null),h([a.computed],v.prototype,"meta",null)},"./runtime-repl/request-http/sidebar/RequestSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/sidebar-core/index.ts"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),d=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),c=i("./js/constants/TabOpeningConstants.js"),u=i("./appsdk/workbench/WorkbenchService.js"),p=i("./js/services/SingleTabWorkbenchService.js"),m=i("./js/utils/TabOpeningUtil.js"),h=i("./runtime-repl/_common/NavigationConstants.js"),f=i("./js/services/NavigationService.js"),I=i("./runtime-repl/request-http/_api/RequestInterface.js"),v=i("./runtime-repl/request-http/RequestIcon.js"),b=i("./js/stores/StoreManager.js"),E=i("./js/stores/OnlineStatusStore.js"),g=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),_=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),A=i("./runtime-repl/example/_api/ExampleInterface.js"),C=i("./runtime-repl/_common/DisabledTooltipConstants.js"),S=i("./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts"),T=i("./runtime-repl/_common/ToastHelpers.js"),y=i("./runtime-repl/collection/CollectionActionsConstants.js"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends n.SidebarItem{constructor(e,t){super(t),this.shouldExpandOnClick=!1,this.dataTestIdSuffix="request",this.type="request",this.analyticsEventCategory="request-item-builder-mode",this.onClick=()=>{if(this.parent||pm.logger.error("FolderSidebarItem~parent not found"),this.context.apiId)return f.default.transitionTo(h.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:this.id,apiId:this.context.apiId},{});(0,I.openRequestInTab)(this.id,{preview:!0,collectionId:this._item.collection})},this.getChildren=()=>O(this,void 0,void 0,(function*(){return(0,_.getResponses)(this)})),this.allowedDropTargets=[d.default,l.default,S.default],this.isChildrenReorderingEnabled=!0,this._item=e}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){var e,t;const{userCanSave:i}=(0,b.resolveStoreInstance)(E.default),o=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[u.default.isUseBrowserTabsActive()&&{type:c.ACTION_OPEN_IN_NEW_BROWSER_TAB,name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>(0,m.openInNewBrowserTab)(h.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:this.id,apiId:this.context.apiId},{})},!u.default.isUseBrowserTabsActive()&&{type:y.ACTION_TYPE_OPEN_IN_NEW_TAB,name:"Open in Tab",isEnabled:!0,xpathname:y.ACTION_TYPE_OPEN_IN_NEW_TAB,handler:()=>{(0,I.openRequestInTab)(this.id,{preview:!1,collectionId:this._item.collection})}},!o&&{type:y.ACTION_TYPE_ADD_EXAMPLE,name:"Add example",isEnabled:i&&this._item.isEditable,xpathname:y.ACTION_TYPE_ADD_EXAMPLE,shouldExpandItem:!0,handler:()=>{p.default.didUserCancelDiscard()||(0,A.createExample)(this.id,{collectionId:this._item.collection,shouldNotOpenInTab:!0}).then((e=>{f.default.transitionTo(h.WORKFLOW_IDENTIFIER.OPEN_EXAMPLE_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{tabOptions:{forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this._item.collection}})}))}},{type:y.ACTION_VIEW_DOCUMENTATION,name:"View Documentation",isEnabled:!0,xpathname:y.ACTION_VIEW_DOCUMENTATION,handler:()=>{(0,I.requestActions)(this.id,this._item,y.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",collectionId:this._item.collection,canPerform:()=>!0,apiId:this.context.apiId},(()=>{}))}},!o&&(0,n.generateDefaultSidebarAction)({identifier:n.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,b.resolveStoreInstance)(E.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,I.renameRequest)(this.id,null,e)}),!o&&(0,n.generateSidebarBulkAction)({identifier:n.BULK_ACTIONS.DUPLICATE,isEnabled:i&&this._item.isEditable}),!o&&{type:y.ACTION_TYPE_PASTE,name:"Paste",shortcut:"paste",isEnabled:this._item.isEditable&&(null===(t=(0,b.resolveStoreInstance)(E.default))||void 0===t?void 0:t.userCanSave),tooltip:C.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{}},!o&&(0,n.generateDefaultSidebarAction)({identifier:n.DEFAULT_ACTIONS.DELETE,isEnabled:i&&this._item.isEditable,handler:()=>i?this._item.isEditable?(0,I.deleteRequest)(this.id,{name:this.name,collectionId:this._item.collection}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)})):this.showPermissionErrorToast():(0,T.showOfflineActionDisabledToast)()})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}toString(){return"request"}get meta(){return{iconBeforeText:(0,g.observer)((()=>o.createElement(v.default,{method:this._item.method})))}}}P([a.computed],N.prototype,"name",null),P([a.computed],N.prototype,"id",null),P([a.computed],N.prototype,"isPendingCreate",null),P([a.computed],N.prototype,"isEditable",null),P([a.computed],N.prototype,"isLoading",null),P([a.computed],N.prototype,"meta",null)},"./runtime-repl/request-http/sidebar/VersionViewRequestSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/sidebar-core/index.ts"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./runtime-repl/request-http/RequestIcon.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),u=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const m="View documentation";class h extends n.SidebarItem{constructor(e,t){super(t),this.shouldExpandOnClick=!1,this.dataTestIdSuffix="request",this.analyticsEventCategory="request-item-version-mode",this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>p(this,void 0,void 0,(function*(){return(0,c.getResponses)(this)})),this.allowedDropTargets=[],this._item=e,this.init()}init(){return p(this,void 0,void 0,(function*(){yield this.getChildren()}))}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[{name:m,isEnabled:!0,handler:()=>this.handleAction(m)}]}handleAction(e){if(e===m)return this._item.viewDocumentation();pm.logger.warn("VersionViewRequestSidebarItem~handleAction: Unhandled action",e)}get isEditable(){return this._item.model.isEditable}get meta(){return{iconBeforeText:(0,d.observer)((()=>o.createElement(l.default,{method:this._item.model.method})))}}toString(){return"request"}}u([a.computed],h.prototype,"name",null),u([a.computed],h.prototype,"id",null),u([a.computed],h.prototype,"isPendingCreate",null),u([a.computed],h.prototype,"actions",null),u([a.computed],h.prototype,"isEditable",null),u([a.computed],h.prototype,"meta",null)},"./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts":function(e,t,i){i.r(t),i.d(t,{BULK_ACTIONS_TYPE_STRINGS:function(){return c},handleGitLinkedAction:function(){return p},isGitLinkedCollectionAction:function(){return u}});var o=i("./runtime-repl/transient-collection/datastores/stores/TransientRequestStore.ts"),n=i("./runtime-repl/transient-collection/datastores/stores/TransientFolderStore.ts"),s=i("./runtime-repl/transient-collection/datastores/stores/TransientCollectionStore.ts"),r=i("./runtime-repl/transient-collection/datastores/stores/TransientExampleStore.ts"),a=i("./runtime-repl/_common/uid-helper.ts"),l=i("../../node_modules/mobx/lib/mobx.module.js"),d=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const c={GIT_LINKED_REQUEST:"request",GIT_LINKED_FOLDER:"folder",GIT_LINKED_EXAMPLE:"example",GIT_LINKED_COLLECTION:"collection"};function u(e){const t=e[0],i=t.from?t.from:t.path;try{return m(i.seek()),!0}catch(e){return!1}}function p(e){return d(this,void 0,void 0,(function*(){const t=new Set;yield Promise.all(e.map((e=>d(this,void 0,void 0,(function*(){switch(e.op){case"remove":return function(e){return d(this,void 0,void 0,(function*(){const t=m(e.path.seek());return yield null==t?void 0:t.delete(),[]}))}(e);case"copy":return(yield function(e){return d(this,void 0,void 0,(function*(){const t=e.from,i=e.path,o=t.seek(),{id:n,position:s}=i.seek(),r=i.seekLastParent(),l=m(o),d=m(r);return yield d.addChildren({id:l.model.id,type:l.model.type},s,{operation:"copy",silent:!0,newId:(0,a.decomposeUID)(n).modelId}),[d]}))}(e)).forEach((e=>t.add(e)));case"move":return Promise.resolve((0,l.runInAction)((()=>function(e){var t,i,o,n,s,r;const a=e.from,d=e.path,u=a.seek(),{id:p,position:h}=d.seek(),f=d.seekLastParent(),I=m(u),v=m(f),b=I.model.parentController;let E=h;const g=b===v,_=I.model.index;if(g&&_===E)return pm.logger.info("handleMoveAction: Item moved to same position"),[];g&&"number"==typeof E&&"number"==typeof _&&_<E&&E&&E--;switch((0,l.runInAction)((()=>{null==b||b.removeChildren({id:I.model.id,type:I.model.type}),v.addChildren({id:I.model.id,type:I.model.type},E,{operation:"move"})})),v.model.type){case c.GIT_LINKED_COLLECTION:null===(i=null===(t=null==I?void 0:I.model)||void 0===t?void 0:t.updateModel)||void 0===i||i.call(t,{collection:v.model.id,folder:void 0},{silent:!0});break;case c.GIT_LINKED_FOLDER:null===(n=null===(o=I.model)||void 0===o?void 0:o.updateModel)||void 0===n||n.call(o,{folder:v.model.id,collection:void 0},{silent:!0});break;case c.GIT_LINKED_REQUEST:null===(r=null===(s=null==I?void 0:I.model)||void 0===s?void 0:s.updateModel)||void 0===r||r.call(s,{request:v.model.id},{silent:!0})}return[b,v]}(e).forEach((e=>t.add(e))))))}}))))),t.forEach((e=>e.triggerUpdateEvent()))}))}function m({id:e,model:t}){let i;switch(t){case c.GIT_LINKED_REQUEST:i=o.default.find(e);break;case c.GIT_LINKED_FOLDER:i=n.default.find(e);break;case c.GIT_LINKED_COLLECTION:i=s.default.find(e);break;case c.GIT_LINKED_EXAMPLE:i=r.default.find(e);break;default:throw new TypeError("Model type not supported")}if(!i)throw new Error("Not found in store");return i}}}]);