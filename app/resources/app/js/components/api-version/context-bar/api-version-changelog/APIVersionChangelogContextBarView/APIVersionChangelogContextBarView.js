"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[93],{"./api-dev/components/api-version/context-bar/api-version-changelog/APIVersionChangelogContextBarView/APIVersionChangelogContextBarView.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var a,i=s("../../node_modules/react/index.js"),n=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("../../node_modules/mobx/lib/mobx.module.js"),o=s("./node_modules/classnames/index.js"),l=s.n(o),d=s("./appsdk/contextbar/ContextBarViewHeader.js"),c=s("./api-dev/components/api-version/context-bar/api-version-changelog/APIVersionChangelogGroup/APIVersionChangelogGroup.js"),p=s("./js/components/base/LoadingIndicator.js"),u=s("./js/stores/StoreManager.js"),m=s("./js/stores/SyncStatusStore.js"),h=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),_=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),f=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),v=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-forward.js"),y=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),b=s("./js/components/base/Buttons.js"),E=s("../../packages/api-design/schema-changelog/index.js"),C=s("./api-dev/components/release/EditRelease/EditReleaseModal.js"),I=s("./api-dev/components/release/DeleteRelease/DeleteReleaseModal.js"),A=s("./api-dev/util/TooltipText.js"),S=s("./js/components/base/Dropdowns.js"),R=s("./js/services/NavigationService.js"),T=s("./integrations/navigation/constants.js"),w=s("./js/modules/services/AnalyticsService.js"),P=s("./js/components/activity-feed/Activity.js"),j=s("./integrations/api-observability/services/Helper.js"),D=s("./integrations/api-observability/constants.ts"),N=s("./node_modules/lodash/lodash.js");let x=(0,n.observer)(a=class extends i.Component{constructor(e){super(e),this.state={releaseGroups:[],isLoading:!0,loadingErr:!1,isEditReleaseOpen:!1,releaseName:"",releaseDescription:"",releaseSummary:"",releaseToEdit:null,isDeleteReleaseOpen:!1,releaseToDelete:null,releaseVisibility:!1,configuredIntegration:null,loadingIntegration:!1,APIGatewayDeployText:"Deploy Schema"},this.fetchChangelogs=this.fetchChangelogs.bind(this),this.setEditReleaseModalOpen=this.setEditReleaseModalOpen.bind(this),this.setDeleteReleaseModalOpen=this.setDeleteReleaseModalOpen.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleScrollDebounced=N.debounce(this.handleScroll,100),this.loadMoreChanges=this.loadMoreChanges.bind(this),this.fetchDeployOptionContext=this.fetchDeployOptionContext.bind(this),this.handleDeploySchemaClick=this.handleDeploySchemaClick.bind(this)}componentDidMount(){this.fetchChangelogs(),this.fetchDeployOptionContext(),this.isReleaseChanging=(0,r.reaction)((()=>N.get(this.props,"contextData.model.isLoadingAddRelease")||N.get(this.props,"contextData.model.isUpdatingRelease")||N.get(this.props,"contextData.model.isUpdatingReleases")),(e=>{e||this.fetchChangelogs()}))}componentWillUnmount(){this.isReleaseChanging&&this.isReleaseChanging()}fetchDeployOptionContext(){if(!j.default.shouldRenderGatewayIntegration(N.get(this.props,"contextData.model")))return!1;let e=N.get(this.props,"contextData.model.id");this.setState({loadingIntegration:!0}),j.default.getDeployOptionContext(e,((e,t)=>{this.setState({loadingIntegration:!1}),e||this.setState({configuredIntegration:N.get(t,"integration",null),APIGatewayDeployText:N.get(t,"deployString","Deploy Schema")})}))}renderNoChangesFound(){return i.createElement(h.default,{justifyContent:"center",alignItems:"center",direction:"column",padding:"spacing-xxxl"},i.createElement(g.default,null),i.createElement(_.default,null,"No changes published yet"))}handleDeploySchemaClick(e){const t=N.get(e,"entities.schemas.0.entityId"),s=N.get(e,"entities.schemas.0.tag"),a=N.get(e,"id"),i=N.get(e,"name"),n=N.get(this.props,"contextData.model.apiId"),r=N.get(this.state,"configuredIntegration.id");j.default.addDeployClickAnalytics(this.state.configuredIntegration,D.RELEASE_CONTEXTBAR),R.default.transitionTo(T.V10_API_DEPLOY_NAV_IDENTIFIER,{apiId:n,integrationId:r},null,{additionalContext:{releaseId:a,schemaId:t,releaseName:i,tagId:s}})}handleScroll(){let e=this.refs.changelog_feed;if(e.scrollHeight-(e.scrollTop+e.offsetHeight)<=5){if(!N.isEmpty(N.get(this.props,"controller.loadMoreError"))||N.get(this.props,"controller.isLoaded")||!N.get(this.props,"controller.loadMore"))return;this.loadMoreChanges()}}loadMoreChanges(){return this.props.controller.loadMore().then((e=>{N.isEmpty(e)||this.setState({releaseGroups:e,isLoading:!1})}))}getRefreshTextClass(){return l()({"api-changelog-context-view-wrapper__refresh-button":!0,"api-changelog-context-view-wrapper__refresh-button__loading":this.state.isLoading})}getRefreshIconText(){return(0,u.resolveStoreInstance)(m.default).isSocketConnected?this.state.isLoading?"Please wait...":"Refresh changelog":"Get online to perform this action"}fetchChangelogs(){this.setState({releaseGroups:[],isLoading:!0,loadingErr:!1}),(0,r.when)((()=>!N.get(this.props,"contextData.schemaLoading")),(()=>{this.props.controller.fetchChangelog(N.get(this.props,"contextData.model",{})).then((e=>{this.setState({releaseGroups:e,isLoading:!1})})).catch((e=>{this.setState({isLoading:!1,loadingErr:!0})}))}))}handleReleaseActionSelect(e,t){const s=N.get(e,"id"),a=N.get(e,"name"),i=N.get(e,"summary"),n=N.get(e,"description"),r=N.get(e,"visibility");switch(t){case"edit":return w.default.addEventV2({category:"release",action:"initiate_edit",label:"changelog",value:1,entityId:s}),this.setEditReleaseModalOpen(!0,s,a,i,n,r);case"delete":return w.default.addEventV2({category:"release",action:"initiate_delete",label:"changelog",value:1,entityId:s}),this.setDeleteReleaseModalOpen(!0,s);case"deploy":return this.handleDeploySchemaClick(e)}}handleNameClick(e){const t=N.get(e,"id"),s=N.get(this.props,"contextData.model.id"),a=N.get(this.props,"contextData.model.apiId");"unreleasedChanges"!==t&&(w.default.addEventV2({category:"release",action:"view",label:"changelog",value:1,entityId:t}),N.get(this.props,"contextData.promoteTab")&&N.isFunction(this.props.contextData.promoteTab)&&this.props.contextData.promoteTab(),R.default.transitionTo("build.release",{apiId:a,apiVersionId:s,releaseId:`${t}`}))}renderViewRelease(e){if(!(e=>"unreleasedChanges"===N.get(e,"id"))(e))return i.createElement("div",{className:"api-changelog__content__view-release"},i.createElement(f.default,{onClick:this.handleNameClick.bind(this,e),type:"plain",text:"View this version"}),i.createElement(v.default,{className:"button-icon"}))}renderReleaseActions(e){const t=!N.get(this.props.contextData.model,"apiPermissionStore.canUpdateRelease"),s=!(0,u.resolveStoreInstance)(m.default).isSocketConnected||t,{loadingIntegration:a,configuredIntegration:n,APIGatewayDeployText:r}=this.state;return i.createElement("div",null,i.createElement(S.Dropdown,{className:"api-changelog__header__release-actions__dropdown",onSelect:this.handleReleaseActionSelect.bind(this,e)},i.createElement(S.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},i.createElement(f.default,{type:"tertiary",icon:"icon-action-options-stroke",size:"small",className:"api-changelog__header__release-actions__dropdown__button"})),i.createElement(S.DropdownMenu,{"align-right":!0},a?i.createElement(S.MenuItem,{disabled:!0,refKey:"deploy"},i.createElement(p.default,null)):j.default.shouldRenderDeploy(n,D.RELEASE_CONTEXTBAR)&&j.default.shouldRenderGatewayIntegration(N.get(this.props,"contextData.model"))&&i.createElement(S.MenuItem,{refKey:"deploy",disabled:s,disabledText:(0,A.default)(s,!this.canUpdateRelease)},i.createElement("span",{title:r},j.default.truncate(r))),i.createElement(S.MenuItem,{disabled:s,disabledText:(0,A.default)(s,!this.canUpdateRelease),refKey:"edit"},i.createElement("span",null,"Edit")),i.createElement(S.MenuItem,{disabled:s,disabledText:(0,A.default)(s,!this.canUpdateRelease),refKey:"delete"},i.createElement("span",null,"Delete")))))}renderChangelog(){const e=!(0,u.resolveStoreInstance)(m.default).isSocketConnected,t=N.get(this.props.contextData.model,"apiPermissionStore.canUpdateRelease");if(N.get(this.props,"contextData.emptyState",!1))return this.renderNoChangesFound();if(e&&this.state.isLoading)return i.createElement(E.OfflineChangelog,null);if(this.state.isLoading)return i.createElement(p.default,null);if(this.state.loadingErr)return i.createElement(E.ErrorChangelog,{onRetry:this.fetchChangelogs});const s=N.get(this.props,"contextData.model",{}),a=N.get(this.props,"controller.isLoadingMore"),n=N.get(this.props,"controller.loadMoreError",{});return i.createElement(i.Fragment,null,i.createElement("div",{className:"api-changelog",ref:"changelog_feed",onScroll:this.handleScrollDebounced},N.map(this.state.releaseGroups,((e,a)=>i.createElement(c.default,{model:s,release:e,promoteTab:N.get(this.props,"contextData.promoteTab"),setEditReleaseModalOpen:this.setEditReleaseModalOpen,setDeleteReleaseModalOpen:this.setDeleteReleaseModalOpen,canUpdateRelease:t,renderActions:this.renderReleaseActions.bind(this,e),renderViewRelease:this.renderViewRelease.bind(this,e),hasPreviouslyCreatedReleases:this.state.releaseGroups.length>1,isLastRelease:a===N.get(this.state.releaseGroups,"length")-1,handleRefresh:this.fetchChangelogs})))),(a||!N.isEmpty(n))&&i.createElement(P.LoadFeed,{error:n,key:"loading-more",isLoading:a,isOffline:e,onRetry:this.loadMoreChanges}))}setEditReleaseModalOpen(e,t,s,a,i,n){this.setState({isEditReleaseOpen:e,releaseToEdit:t,releaseName:s,releaseSummary:a,releaseDescription:i,releaseVisibility:n})}setDeleteReleaseModalOpen(e,t){this.setState({isDeleteReleaseOpen:e,releaseToDelete:t})}render(){const e=N.get(this.props,"contextData.model",{});return i.createElement("div",{className:"api-changelog-context-view-wrapper","data-testid":"api-version-changelog-view"},i.createElement(d.ContextBarViewHeader,{title:this.props.title,onClose:this.props.onClose},i.createElement(b.Button,{className:this.getRefreshTextClass(),tooltip:this.getRefreshIconText(),tooltipImmediate:!0,type:"tertiary",onClick:this.fetchChangelogs,disabled:this.state.isLoading||!(0,u.resolveStoreInstance)(m.default).isSocketConnected},i.createElement(y.default,{name:"icon-action-refresh-stroke"}))),this.renderChangelog(),i.createElement(C.default,{origin:"changelog",isOpen:N.get(this.state,"isEditReleaseOpen"),releaseId:this.state.releaseToEdit,releaseName:this.state.releaseName,releaseVisibility:this.state.releaseVisibility,releaseDescription:this.state.releaseDescription,releaseSummary:this.state.releaseSummary,apiId:e.apiId,apiVersionId:N.get(e,"id"),model:e,toggleUpdateReleaseModal:this.setEditReleaseModalOpen}),i.createElement(I.default,{origin:"changelog",isOpen:N.get(this.state,"isDeleteReleaseOpen"),releaseId:this.state.releaseToDelete,apiId:e.apiId,apiVersionId:e.id,deleteReleaseHandler:e.deleteRelease,model:e,isDeletingRelease:N.get(e,"isDeletingRelease"),toggleDeleteReleaseModal:this.setDeleteReleaseModalOpen}))}})||a},"./api-dev/components/api-version/context-bar/api-version-changelog/APIVersionChangelogGroup/APIVersionChangelogGroup.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var a,i=s("../../node_modules/react/index.js"),n=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("./node_modules/classnames/index.js"),o=s.n(r),l=s("./node_modules/moment/moment.js"),d=s.n(l),c=s("../../packages/api-design/schema-changelog/index.js"),p=s("../../packages/api-design/api-definition-store/index.js"),u=s("./api-dev/components/api-version/context-bar/api-version-changelog/CollectionChange/CollectionChange.js"),m=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-tag-stroke-small.js"),h=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),g=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke-small.js"),_=s("./js/components/base/Buttons.js"),f=s("./js/stores/StoreManager.js"),v=s("./js/stores/SyncStatusStore.js"),y=(s("./js/services/NavigationService.js"),s("./api-dev/constants/Permissions.js")),b=(s("./api-dev/services/APIPermissionService.js"),s("./js/modules/services/AnalyticsService.js")),E=s("./node_modules/lodash/lodash.js");function C(){return i.createElement("div",{className:"no-changes-wrapper"},i.createElement("div",null,i.createElement("div",{className:"no-changes-wrapper__content"},i.createElement("div",{className:"no-changes-wrapper__content__title"},"No changes made"))))}let I=(0,n.observer)(a=class extends i.Component{constructor(e){super(e),this.state={isOpen:!0},this.renderChangelog=this.renderChangelog.bind(this),this.handleCreateRelease=this.handleCreateRelease.bind(this),this.onToggle=this.onToggle.bind(this)}renderChangelog(e,t){var s;if(!this.state.isOpen)return;let a;const n=E.get(this.props,"model.apiId"),r=(E.get(this.props,"model.apiPermissionStore.permissions"),E.get(this.props,"model.schema.isSchema")),o=E.get(this.props,"model.schema.apiDefinitionId"),l=(0,f.resolveStoreInstance)(p.APIDefinitionStore).newAPIDefinitionModel(o,r,n,E.get(this.props,"model.id"));l.loadPermissions();const m=null===(s=l.apiDefinitionPermissions)||void 0===s?void 0:s.canRestore;a=E.isEmpty(e)?i.createElement(C,null):(e||[]).map(((e,t)=>i.createElement(i.Fragment,{key:t},i.createElement("div",{className:"activity-feed-date-group"}," ",e.name," "),(e.items||[]).map(((e,t)=>"schema"===E.get(e,"changeType")?i.createElement(c.SchemaChangeWrapper,{change:e,index:t,isSchema:r,apiName:E.get(this.props,"model.name"),updateSchemaPermission:m,model:this.props.model}):(e=>"collection"===e)(E.get(e,"changeType"))?i.createElement(u.default,{change:e,index:t,model:this.props.model}):void 0)))));const h=d()(E.get(t,"createdAt")).format("DD MMM YYYY, h:mm A");return i.createElement(i.Fragment,null,E.get(t,"createdAt")&&i.createElement("div",{className:"api-changelog__content__release-created-at"}," ",h," "),E.get(t,"summary")&&i.createElement("div",{className:"api-changelog__content__description"}," ",t.summary," "),this.props.renderViewRelease&&this.props.renderViewRelease(),a)}handleCreateRelease(){const e=E.get(this.props,"model.id");b.default.addEventV2({category:"release",action:"initiate_create",label:"changelog",value:1,entityId:e}),this.props.model.setIsCreateReleaseModalOpen(!0)}getCreateReleaseDisabledText(){if(!(0,f.resolveStoreInstance)(v.default).isSocketConnected)return"Get online to perform this action";if(!this.props.canUpdateRelease)return y.API_PERMISSION_ERROR;const e=E.get(this.props,"release.changelog");return e&&e.length?void 0:"No changes to release"}getReleaseNameClasses(){return o()({"api-changelog__header_left-section__name":!0})}onToggle(){this.setState((e=>({isOpen:!e.isOpen})))}renderGitTag(e){return i.createElement(i.Fragment,null,i.createElement("div",{className:"api-changelog__header__release-actions__tag-icon"},i.createElement(m.default,null)),i.createElement("div",{className:"api-changelog__header__release-actions__tag-text"},e))}render(){const e=E.get(this.props,"release"),t=E.get(this.props,"release.changelog"),s=E.get(this.props,"release.changesGroupedByDate"),a=!this.props.canUpdateRelease,n=this.props.hasPreviouslyCreatedReleases;(0,f.resolveStoreInstance)(v.default).isSocketConnected,!(0,f.resolveStoreInstance)(v.default).isSocketConnected||!t||t.length;return i.createElement("div",{className:"api-changelog"},i.createElement("div",{className:"api-changelog__header"},n&&i.createElement("div",{className:"api-changelog__header_left-section"},i.createElement("div",{className:"api-changelog__header_left-section__arrow"},i.createElement(_.Button,{tooltip:E.get(this.state,"isOpen")?"Show less":"Show more",onClick:()=>{this.onToggle()},tooltipPlacement:"bottom"},i.createElement(h.default,{name:E.get(this.state,"isOpen")?"icon-direction-down":"icon-direction-right"}))),i.createElement("div",{className:this.getReleaseNameClasses()},E.get(e,"name"),"private"===E.get(e,"visibility")&&i.createElement(g.default,{title:"Only visible to editors"}))),!(e=>"unreleasedChanges"===E.get(e,"id"))(e)&&i.createElement("div",{className:"api-changelog__header__release-actions"},E.get(e,"gitTag","")&&this.renderGitTag(e.gitTag),this.props.renderActions&&this.props.renderActions())),i.createElement("div",{className:o()({"api-changelog__content":n})},this.renderChangelog(s,e)),!this.props.isLastRelease&&i.createElement("hr",null))}})||a},"./api-dev/components/api-version/context-bar/api-version-changelog/CollectionChange/CollectionChange.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a,i=s("../../node_modules/react/index.js"),n=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("./node_modules/@postman/date-helper/index.js"),o=s.n(r),l=s("./js/components/activity-feed/Activity.js"),d=s("./node_modules/lodash/lodash.js");let c=(0,n.observer)(a=class extends i.Component{constructor(e){super(e),this.state={collectionRestoreTarget:null,isRestored:!1},this.handleRestore=this.handleRestore.bind(this)}handleRestore(e,t){let s={collectionUid:d.get(this.props,"change.collectionUid"),maxId:e};this.restoreDate=o().getFormattedDateAndTime(t),this.setState({isRestored:!1}),this.setState({collectionRestoreTarget:s},(()=>{pm.syncManager.restoreCollection(s,((e,t)=>{e||t&&t.error?(this.setState({isRestored:!1,collectionRestoreTarget:null}),pm.toasts.error("Couldn't restore collection. Try again.")):t&&t.data&&(this.setState({isRestored:!0,collectionRestoreTarget:null}),d.get(this.props,"model.reload")&&this.props.model.reload())}))}))}render(){const e=d.get(this.props,"change");return i.createElement("div",{className:"activity-feed"},i.createElement("div",{className:"activity-feed-date-group-wrapper",key:e.name},i.createElement(l.Activity,{activity:e,canAddVersionTag:!1,enableRestore:d.get(e,"enableRestore",!1),isRestoring:d.get(this.state,"collectionRestoreTarget.maxId")===e.id,isRemovingTag:!1,isVisible:this.props.isVisible,isOffline:this.props.isOffline,key:e.id,meta:e.meta,onAddVersionTag:d.noop,onRemoveVersionTag:d.noop,onRestore:this.handleRestore,hideTags:!0,isCollectionAbsoluteNamingEnabled:!0})))}})||a},"./api-dev/components/common/DeleteModal/DeleteModal.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var a,i=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),n=s("../../node_modules/react/index.js"),r=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=s("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),d=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=s("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),p=s("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),u=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=s("./js/stores/StoreManager.js"),h=s("./js/stores/SyncStatusStore.js"),g=s("./node_modules/lodash/lodash.js");const _=r.default.label`
  &&& {
    margin-bottom: var(--spacing-s);
  }
`;let f=(0,i.observer)(a=class extends n.Component{constructor(e){super(e),this.state={textInputValue:"",inputValueIsValid:!1},this.handleClose=this.handleClose.bind(this),this.setTextInputValue=this.setTextInputValue.bind(this),this.getTooltipMessage=this.getTooltipMessage.bind(this),this.renderModalContent=this.renderModalContent.bind(this),this.unsetComponentState=this.unsetComponentState.bind(this)}componentDidUpdate(e){e.isOpen!==this.props.isOpen&&this.unsetComponentState()}unsetComponentState(){this.setState({textInputValue:"",inputValueIsValid:!1})}setTextInputValue(e){this.setState({textInputValue:e,inputValueIsValid:!1}),e===this.props.additionalData.apiName&&this.setState({inputValueIsValid:!0})}handleClose(){this.props.onRequestClose&&this.props.onRequestClose()}renderModalContent(){return g.isEmpty(this.props,"additionalData")||"api"!==g.get(this.props,"additionalData.type")?this.props.content:n.createElement(o.default,{direction:"column",gap:"spacing-l"},n.createElement(l.default,{status:"warning"},"You cannot restore this API once deleted."),n.createElement(n.Fragment,null,n.createElement(d.default,null,n.createElement(d.default,{type:"body-medium"},"Collections, environments and definition that are part of this API will also be deleted."))),n.createElement(_,{htmlFor:"confirm-delete-api-button"},n.createElement(d.default,{color:"content-color-secondary"},"Enter ",n.createElement(d.default,{type:"strong"},this.props.additionalData.apiName)," to proceed")),n.createElement(c.default,{id:"confirm-delete-api-button",placeholder:"",value:this.state.textInputValue,onChange:e=>this.setTextInputValue(e.target.value)}))}getTooltipMessage(){return!(0,m.resolveStoreInstance)(h.default).isSocketConnected?"Please make sure you are connected to the internet":!g.isEmpty(this.props.additionalData)&&!this.state.inputValueIsValid&&"Please enter the name of this API to confirm"}render(){const e=!(0,m.resolveStoreInstance)(h.default).isSocketConnected,t=this.getTooltipMessage(),s=e||this.props.isLoading||!g.isEmpty(this.props.additionalData)&&!this.state.inputValueIsValid;return n.createElement(p.Modal,{isOpen:this.props.isOpen,onClose:this.handleClose,size:"small"},n.createElement(p.ModalHeader,{heading:"Delete API and all API elements?"}),n.createElement(p.ModalContent,null,this.renderModalContent()),n.createElement(p.ModalFooter,null,n.createElement(o.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},n.createElement(u.default,{type:"secondary",onClick:this.handleClose,text:"Cancel"}),n.createElement(u.default,{type:"destructive",onClick:this.props.onSubmit,isDisabled:s,autoFocus:!0,tooltip:t,isLoading:this.props.isLoading,text:this.props.btnContent}))))}})||a},"./api-dev/components/release/DeleteRelease/DeleteReleaseModal.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var a=s("../../node_modules/react/index.js"),i=s("./api-dev/components/common/DeleteModal/DeleteModal.js"),n=s("./js/modules/services/AnalyticsService.js"),r=s("./node_modules/lodash/lodash.js");class o extends a.Component{constructor(e){super(e),this.handleDeleteRelease=this.handleDeleteRelease.bind(this)}handleDeleteRelease(){const e=r.get(this.props,"apiVersionId"),t=r.get(this.props,"releaseId"),s=r.get(this.props,"apiId");n.default.addEventV2({category:"release",action:"confirm_delete",label:this.props.origin,value:1,entityId:t}),this.props.model.deleteRelease(s,e,t).then((()=>{this.props.postSuccessCallback&&this.props.postSuccessCallback()})).catch((()=>{pm.toasts.error("Couldn't delete the version. Please try again.")})).finally((()=>{this.props.toggleDeleteReleaseModal(!1)}))}render(){return a.createElement(i.default,{isOpen:this.props.isOpen,onRequestClose:this.props.toggleDeleteReleaseModal,headerTitle:"Delete version?",content:"This action is permanent and version can’t be restored.",btnContent:"Delete Version",onSubmit:this.handleDeleteRelease,isLoading:this.props.isDeletingRelease})}}},"./api-dev/components/release/EditRelease/EditReleaseModal.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var a,i=s("../../node_modules/react/index.js"),n=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),o=s("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),l=s("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=s("./js/components/base/keymaps/KeyMaps.js"),p=s("./js/components/base/LoadingIndicator.js"),u=s("./js/stores/StoreManager.js"),m=s("./js/stores/SyncStatusStore.js"),h=s("./js/modules/services/AnalyticsService.js"),g=s("./api-dev/components/release/VersionNotesEditor/VersionNotesEditor.js"),_=s("../../packages/documentation/mimir-editor/index.js"),f=s("./node_modules/lodash/lodash.js");let v=(0,n.observer)(a=class extends i.Component{constructor(e){super(e),this.state={isLoading:!1,releaseName:"",visibility:"public",releaseSummary:"",isErrorSummary:!1,releaseDescription:"",gitTags:[],selectedGitTag:null,tagsFetchFailed:!1,wysiwygFormat:_.ConversionFormat.MARKDOWN},this.wysiwygRef=i.createRef(),this.releaseDescriptionProps=null,this.handleClose=this.handleClose.bind(this),this.handleReleaseNameChange=this.handleReleaseNameChange.bind(this),this.handleUpdateRelease=this.handleUpdateRelease.bind(this),this.isUpdateReleaseButtonDisabled=this.isUpdateReleaseButtonDisabled.bind(this),this.renderUpdateReleaseModalContent=this.renderUpdateReleaseModalContent.bind(this)}getVersionNotes(){return f.isFunction(f.get(this.wysiwygRef,"current.slateToMD"))?this.wysiwygRef.current.slateToMD():this.state.releaseDescription}isReleaseNameEmpty(){return""===this.state.releaseName}initializeState(){const e=this.props.releaseSummary?this.props.releaseSummary:"";this.setState({releaseName:this.props.releaseName,releaseSummary:e,releaseDescription:this.props.releaseDescription,visibility:this.props.releaseVisibility,selectedGitTag:{name:"Select a tag",commit:null}})}componentDidUpdate(e){this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.initializeState()}getKeyMapHandlers(){return{quit:pm.shortcuts.handle("quit",this.handleClose)}}handleClose(){f.get(this.props.model,"isUpdatingRelease")||(this.setState({isLoading:!1,releaseName:this.props.releaseName,releaseSummary:f.get(this.props,"releaseSummary",""),releaseDescription:this.props.releaseDescription,visibility:this.props.releaseVisibility,wysiwygFormat:_.ConversionFormat.MARKDOWN}),this.releaseDescriptionProps=null),this.props.toggleUpdateReleaseModal(!1)}handleReleaseNameChange(e){this.setState({releaseName:e.target.value})}getCustomStyles(){return{width:"468px",margin:"auto"}}isUpdateReleaseButtonDisabled(){const{releaseName:e,visibility:t,releaseSummary:s,releaseDescription:a}=this.state,i=this.releaseDescriptionProps&&JSON.stringify(this.releaseDescriptionProps)!==JSON.stringify(a),n=e!==this.props.releaseName,r=t!==this.props.releaseVisibility,o=this.props.releaseSummary?this.props.releaseSummary:"",l=n||r||s!==o||i,d=!(0,u.resolveStoreInstance)(m.default).isSocketConnected,c=!f.trim(this.state.releaseName),p=f.get(this.props.model,"isUpdatingRelease");return!l||d||c||p}handleUpdateRelease(){const{releaseName:e,releaseDescription:t}=this.state,s=f.get(this.props,"apiVersionId"),a=f.get(this.props,"releaseId"),i=f.get(this.props,"apiId");let n={name:e,description:this.getVersionNotes()};h.default.addEventV2({category:"release",action:"confirm_edit",label:this.props.origin,value:1,entityId:a}),this.props.model.updateRelease(i,s,a,n).then((()=>{})).catch((()=>{pm.toasts.error("Couldn't update the version. Try again.")})).finally((()=>{this.handleClose()}))}handleToggleVisibilityCheckbox(){this.setState((e=>({visibility:"private"===e.visibility?"public":"private"})))}handleReleaseDescriptionChange({content:e,wysiwygFormat:t}){this.releaseDescriptionProps||(this.releaseDescriptionProps=this.wysiwygRef.current.mdToSlate(this.props.releaseDescription,!1)),this.setState({releaseDescription:e,wysiwygFormat:t})}renderUpdateReleaseModalContent(){return this.state.isLoading?i.createElement("div",{className:"update-release-modal__content--loader"},i.createElement(p.default,null)):i.createElement("div",{className:"update-release-modal__content","data-testId":"update-release-modal__content"},i.createElement("div",{className:"update-release-modal__content__name"},i.createElement("div",{className:"update-release-modal__content__name__input","data-testId":"update-release-modal__content__name__input"},i.createElement(r.default,{label:i.createElement(o.default,{text:"Version label"}),value:this.state.releaseName,onChange:this.handleReleaseNameChange,autoFocus:!0,validationStatus:this.isReleaseNameEmpty()?"error":null,validationMessage:this.isReleaseNameEmpty()?"Please enter a version label":null}))),i.createElement(g.default,{wysiwygRef:this.wysiwygRef,versionNotes:this.state.releaseDescription,wysiwygFormat:this.state.wysiwygFormat,onChange:e=>this.handleReleaseDescriptionChange(e)}))}render(){const e=!(0,u.resolveStoreInstance)(m.default).isSocketConnected;return i.createElement(i.Fragment,null,i.createElement(l.Modal,{className:"update-release-modal",isOpen:this.props.isOpen,size:"small",onClose:this.handleClose},i.createElement(l.ModalHeader,{className:"update-release-modal__container-header",heading:"Edit version"}),i.createElement(l.ModalContent,{className:"update-release-modal__container"},this.renderUpdateReleaseModalContent()),i.createElement(l.ModalFooter,{className:"update-release-modal__footer"},i.createElement(c.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers(),ref:this.props.keymapRef},i.createElement("div",{className:"update-release-modal__footer__buttons","data-testId":"update-release-modal__footer__buttons"},i.createElement(d.default,{type:"secondary",text:"Cancel",onClick:this.handleClose}),i.createElement(d.default,{className:"update-release-modal__footer__add-button",type:"primary",text:"Save Changes",onClick:this.handleUpdateRelease,isDisabled:this.isUpdateReleaseButtonDisabled(),isLoading:f.get(this.props.model,"isUpdatingRelease"),tooltip:e&&"Get online to perform this action"}))))))}})||a},"./api-dev/components/release/VersionNotesEditor/VersionNotesEditor.js":function(e,t,s){s.r(t);var a=s("../../packages/documentation/mimir-editor/index.js"),i=s("../../node_modules/react/index.js"),n=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=s("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");const l=n.default.div`
  margin-top: var(--spacing-xs);
  margin-bottom: var(--spacing-l);
  height: 150px;
  border-radius: var(--border-radius-default);
  border: var(--border-width-default) var(--border-style-solid)
    ${e=>e.theme["input-border-color-default"]};
  transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;

  .mimir {
    overflow: visible;
  }

  &:focus-within {
    border-color: ${e=>e.theme["input-border-color-focus"]};
    box-shadow: 0 0 0 2px ${e=>e.theme["input-shadow-focus"]};
  }

  &:active {
    border-color: ${e=>e.theme["input-border-color-focus"]};
    box-shadow: 0 0 0 2px ${e=>e.theme["input-shadow-focus"]};
  }
`;class d extends i.Component{render(){return i.createElement(r.default,{direction:"column"},i.createElement(o.default,{text:"Release notes",fieldType:"optional"}),i.createElement(o.default,{size:"small",type:"tertiary",text:"Add release notes to inform consumers about the changes in this version."}),i.createElement(l,null,i.createElement(a.default,{ref:this.props.wysiwygRef,isControlled:!0,initialValue:this.props.versionNotes,inputFormat:this.props.wysiwygFormat,context:a.EditorContext.WYSIWYG,onChange:e=>{var t,s;return null===(t=(s=this.props).onChange)||void 0===t?void 0:t.call(s,{content:e,wysiwygFormat:a.ConversionFormat.SLATE})},autoFocus:!1})))}}t.default=d},"./api-dev/constants/APITooltips.js":function(e,t,s){s.r(t),s.d(t,{ACTIVE_API_VERSION_DELETED_TEXT:function(){return i},API_ALREADY_CREATING:function(){return o},API_DELETED_TEXT:function(){return n},CANNOT_MOVE_API_RELATION_TEXT:function(){return r},IS_OFFLINE_TOOLTIP_MSG:function(){return a},NO_COLLECTIONS_IN_WORKSPACE_TO_COPY:function(){return l}});const a="You can take this action once you're back online",i="You can not perform this action as this API version is deleted",n="You can not perform this action as this API is deleted",r="You cannot move individual elements of an API. Move API to move its elements together.",o="Creating API",l="There are no collections in this workspace to copy."},"./api-dev/util/TooltipText.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var a=s("./js/stores/CurrentUserStore.js"),i=s("./js/stores/StoreManager.js"),n=s("./js/stores/SyncStatusStore.js"),r=s("./api-dev/constants/APITooltips.js"),o=s("./api-dev/constants/Permissions.js");function l(e,t,s){const l=!(0,i.resolveStoreInstance)(n.default).isSocketConnected;if((0,i.resolveStoreInstance)(a.default).isLoggedIn&&e)return l?r.IS_OFFLINE_TOOLTIP_MSG:s||(t?o.API_PERMISSION_ERROR:void 0)}},"./integrations/api-observability/gateway-actions.js":function(e,t,s){s.r(t),s.d(t,{FETCH_API_GATEWAY_META:function(){return i},FETCH_AWS_GATEWAY_APIS:function(){return a},FETCH_EXTERNAL_ID:function(){return r},FETCH_STAGES:function(){return n}});const a="fetch-aws-gateway-apis",i="fetch-api-gateway-meta",n="fetch-stages",r="fetch-external-id"},"./integrations/api-observability/services/ApiGatewayService.js":function(e,t,s){s.r(t);var a=s("./node_modules/lodash/lodash.js"),i=s.n(a),n=(s("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),s("./integrations/api-observability/services/GatewayIntegrationsService.js")),r=s("./integrations/api-observability/constants.ts"),o=s("./integrations/api-observability/gateway-actions.js");t.default={fetchApiGateways:e=>n.default.performPreConfigAction(i().get(e,"rule"),e,o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(i().get(e.body,"data.Items")||i().get(e.body,"data.items"));throw e})).catch((e=>Promise.reject(e))),fetchApiGatewaysUsingIntegrationId:e=>n.default.performAction(e,{},o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(i().get(e.body.data,"Items")||i().get(e.body.data,"items"));throw e})).catch((e=>Promise.reject(e))),fetchDeployments:e=>n.default.listDeployments(e).then((e=>{if(e.status&&200===e.status){let t=i().get(e,"body.data.items")||i().get(e,"body.data.Items")||[];return t.sort(((e,t)=>{let s=e.CreatedDate||e.createdDate,a=t.CreatedDate||t.createdDate;return new Date(a)-new Date(s)})),Promise.resolve(t.splice(0,r.AWS_TOTAL_DEPLOYMENTS))}return Promise.reject({statusCode:e.status,...e.body})})).catch((e=>Promise.reject(e))),fetchAPIGatewayMeta:e=>n.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>e.status&&200===e.status?Promise.resolve(i().get(e.body,"data")):Promise.reject({statusCode:e.status,...e.body}))).catch((e=>Promise.reject(e))),fetchStages:e=>n.default.performAction(e,{},o.FETCH_STAGES).then((e=>{if(e.status&&200===e.status)return Promise.resolve(i().get(e.body,"data.Items")||i().get(e.body,"data.item"));throw e})).catch((e=>Promise.reject(e))),fetchCloudWatchAggregateMetrics:(e,t)=>new Promise(((s,a)=>{n.default.performAction(e,{stage:t},r.FETCH_CLOUDWATCH_AGGREGATE_METRICS).then((e=>{s(i().get(e,"body.data"))})).catch((e=>{a(e)}))})),fetchCloudWatchTimeSeriesMetrics:(e,t)=>n.default.performAction(e,t,r.FETCH_CLOUDWATCH_TIMESERIES_METRICS),fetchExternalId:e=>new Promise(((t,s)=>{n.default.performPreConfigAction(i().get(e,"rule"),e,o.FETCH_EXTERNAL_ID).then((e=>{t(i().get(e,"body.data.externalId"))})).catch((e=>{s(e)}))})),deploySchema:(e,t)=>n.default.createDeployment(e,t),fetchPostmanExports:e=>n.default.listDeployments(e,!1,!0).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body.data);throw e})).catch((e=>Promise.reject(e))),isDeployEnabled:(e,t)=>i().get(e,"variables.aws_api_type")===r.API_GATEWAY_TYPES.HTTP,isOverviewEnabled:e=>!0,fetchDeployOptionString:e=>n.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>{if(e.status&&200===e.status)return Promise.resolve(`Deploy Schema on ${i().get(e,"body.data.Name")||i().get(e,"body.data.name")}`);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/api-observability/services/AzureService.js":function(e,t,s){s.r(t);var a=s("./node_modules/lodash/lodash.js"),i=s.n(a),n=s("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=s("./integrations/api-observability/services/GatewayIntegrationsService.js"),o=s("./integrations/api-observability/constants.ts"),l=s("./integrations/utils/CommonHelperMethods.ts");t.default={fetchServicesMeta:(e=[],t)=>Promise.all(i().map(e,(e=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:i}=e,n={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:i};return r.default.performAction(t,n,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META)}))).then((e=>{const t={};return i().each(e,(e=>{if(200!==e.status)throw e;{const s=i().get(e,"body.data");t[i().get(e,"body.data.id")]={id:i().get(s,"id"),name:i().get(s,"name"),location:i().get(s,"location"),gatewayUrl:i().get(s,"properties.gatewayUrl"),developerPortalUrl:i().get(s,"properties.developerPortalUrl"),publicIPAddresses:i().get(s,"properties.publicIPAddresses"),privateIPAddresses:i().get(s,"properties.privateIPAddresses")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchApiMeta:(e,t)=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:n,azure_api_id:l}=e,d={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:n,azure_api_id:l};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.GET_API_META).then((e=>{if(200===e.status){const t=i().get(e,"body.data"),s={id:i().get(t,"id"),name:i().get(t,"properties.displayName"),version:i().get(t,"properties.apiVersion")};return Promise.resolve(s)}throw e})).catch((e=>Promise.reject(e)))},fetchServiceMeta:(e,t)=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:n}=e,l={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:n};return r.default.performAction(t,l,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META).then((e=>{if(200===e.status){const t=i().get(e,"body.data"),s={id:i().get(t,"id"),name:i().get(t,"name"),location:i().get(t,"location"),gatewayUrl:i().get(t,"properties.gatewayUrl"),developerPortalUrl:i().get(t,"properties.developerPortalUrl"),publicIPAddresses:i().get(t,"properties.publicIPAddresses"),privateIPAddresses:i().get(t,"properties.privateIPAddresses")};return Promise.resolve(s)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionMeta:(e,t)=>{const{azure_subscription_id:s}=e,a={azure_subscription_id:s};return r.default.performAction(t,a,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META).then((e=>{if(200===e.status){const t=i().get(e,"body.data"),s={id:i().get(t,"subscriptionId"),name:i().get(t,"displayName")};return Promise.resolve(s)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionsMeta:(e=[],t)=>Promise.all(i().map(e,(e=>{const{azure_subscription_id:s}=e,a={azure_subscription_id:s};return r.default.performAction(t,a,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META)}))).then((e=>{const t={};return i().each(e,(e=>{if(200!==e.status)throw e;{const s=i().get(e,"body.data");t[i().get(e,"body.data.subscriptionId")]={id:i().get(s,"subscriptionId"),name:i().get(s,"displayName")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchChangelog:(e,t)=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:n,azure_api_id:d}=e,c={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:n,azure_api_id:d};return r.default.performAction(t,c,o.AZURE_GATEWAY_ACTIONS.LIST_API_RELEASES).then((e=>{if(200===e.status){const t=i().get(e,"body.data"),s=i().map(t.value,(e=>({createdAt:(0,l.formatUtcDate)(i().get(e,"properties.createdDateTime")),updatedAt:(0,l.formatUtcDate)(i().get(e,"properties.updatedDateTime")),description:i().get(e,"properties.notes")})));return Promise.resolve(s)}throw e})).catch((e=>Promise.reject(e)))},fetchExports:(e,t)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${t}/list`,query:{exportOnly:!0,internal:!0,azure_api_path:i().get(e,"azure_api_path")}}}).then((e=>{if(200==e.status&&i().get(e,"body.data")){const t=i().map(e.body.data,(e=>({createdAt:(0,l.formatUtcDate)(e.createdAt),azure_api_path:i().get(e,"data.azure_api_path"),azure_revision_id:i().get(e,"data.azure_revision_id"),schemaSource:i().get(e,"data.schemaSource")})));return Promise.resolve(t)}throw e})).catch((e=>Promise.reject(e))),fetchRevisions:(e,t)=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:n,azure_api_id:d}=e,c={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:n,azure_api_id:d};return r.default.performAction(t,c,o.AZURE_GATEWAY_ACTIONS.LIST_API_REVISIONS).then((e=>{if(200===e.status){const t=i().get(e,"body.data"),s=(i().map(t.value,(e=>({azure_revision_id:i().get(e,"apiRevision"),createdAt:(0,l.formatUtcDate)(i().get(e,"createdDateTime")),description:i().get(e,"description"),privateUrl:i().get(e,"privateUrl"),isOnline:{value:i().get(e,"isOnline"),azure_revision_id:i().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be made offline."},isCurrent:{value:i().get(e,"isCurrent"),azure_revision_id:i().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be disabled."}})))||[]).reduce(((e,t)=>t.isCurrent.value?[t,...e]:[...e,t]),[]);return Promise.resolve(s||[])}throw e})).catch((e=>Promise.reject(e)))},toggleOnlineRevision:(e,t,s=!1,a)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:l,azure_api_id:d,azure_api_path:c}=e,p={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:l,azure_api_id:d,azure_api_path:c,azure_revision_id:t,azure_revision_action_type:"toggle-revision-status",azure_revision_online:s};return r.default.performAction(a,p,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},toggleCurrentRevision:(e,t,s,a)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:l,azure_api_id:d,azure_api_path:c}=e,p={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:l,azure_api_id:d,azure_api_path:c,azure_revision_id:t,azure_release_notes:s,azure_revision_action_type:"make-revision-current"};return r.default.performAction(a,p,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},fetchRevisionMapping:(e,t,s)=>{const a=i().map(t,(e=>e.azure_revision_id)),{azure_api_path:n}=e,l={azure_api_path:n,azure_revisions:a,integrationId:s};return r.default.performAction(s,l,o.AZURE_GATEWAY_ACTIONS.GET_REVISION_SOURCE_MAPPING).then((e=>{if(200===e.status)return Promise.resolve(i().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e)))},isDeployEnabled:(e,t)=>t!==o.RELEASE_CONTEXTBAR,deploySchema:(e,t)=>r.default.createDeployment(e,t),fetchSubscriptions:(e,t,s)=>new Promise(((a,n)=>{r.default.performPreConfigAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));a(s)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Subscriptions"),pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),n(e)}))})),fetchSubscriptionsWithIntegrationId:(e,t,s)=>new Promise(((a,n)=>{r.default.performAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));a(s)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),n(e)}))})),fetchResourceGroups:(e,t,s)=>new Promise(((a,n)=>{r.default.performPreConfigAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().map(t,(e=>({label:e.name,value:e.name})));a(s)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Resource Groups"),pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),n(e)}))})),fetchResourceGroupsWithIntegrationId:(e,t,s)=>new Promise(((a,n)=>{r.default.performAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().map(t,(e=>({label:e.name,value:e.name})));a(s)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),n(e)}))})),fetchServices:(e,t,s)=>new Promise(((a,n)=>{r.default.performPreConfigAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().map(t,(e=>({label:e.name,value:e.name,path:e.id})));a(s)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Services"),pm.logger.error("Something went wrong while fetching Azure Services",e),n(e)}))})),fetchServicesWithIntegrationId:(e,t,s)=>new Promise(((a,n)=>{r.default.performAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().map(t,(e=>({label:e.name,value:e.name,path:e.id})));a(s)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Services",e),n(e)}))})),fetchApis:(e,t,s)=>new Promise(((a,n)=>{r.default.performPreConfigAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().filter(t,(e=>!i().get(e,"properties.type")||"http"===i().get(e,"properties.type"))),n=i().map(s,(e=>({label:e.name,value:e.name,path:e.id})));a(n)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure APIs"),pm.logger.error("Something went wrong while fetching Azure APIs",e),n(e)}))})),fetchApisWithIntegrationId:(e,t,s)=>new Promise(((a,n)=>{r.default.performAction(e,t,s).then((e=>{let t=i().get(e,"body.data.value",[]),s=i().filter(t,(e=>!i().get(e,"properties.type")||"http"===i().get(e,"properties.type"))),n=i().map(s,(e=>({label:e.name,value:e.name,path:e.id})));a(n)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure APIs",e),n(e)}))})),fetchSchema:(e,t,s)=>{const{azure_resource_group_id:a,azure_subscription_id:n,azure_service_id:l,azure_api_id:d}=t,c={azure_subscription_id:n,azure_resource_group_id:a,azure_service_id:l,azure_api_id:d,azure_export_format:s};return r.default.performAction(e,c,o.AZURE_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200===e.status){const t=i().get(e,"body.data.versions.0.schemas.0"),s={content:i().get(t,"schema",""),language:i().get(t,"language"),type:i().get(t,"type")};return Promise.resolve(s)}throw new Error("Something went wrong while fetching schema")})).catch((e=>Promise.reject(e)))}}},"./integrations/api-observability/services/GatewayIntegrationsService.js":function(e,t,s){s.r(t);var a=s("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");t.default={createDeployment:(e,t)=>a.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/deploy`,body:t}}),listDeployments:(e,t=!1,s=!1)=>{const i={};return t&&(i.exportOnly=!0,i.internal=!0),s&&(i.internal=!0),a.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${e}/list`,query:{...i}}})},performAction:(e,t,s)=>a.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/actions/${s}`,body:t}}),performPreConfigAction:(e,t,s)=>a.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/actions/${s}`,body:{...t,classId:e}}})}},"./integrations/api-observability/services/Helper.js":function(e,t,s){s.r(t);var a=s("./integrations/api-observability/services/index.js"),i=s("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n=s("./integrations/api-observability/constants.ts"),r=s("./js/modules/services/AnalyticsService.js"),o=s("./node_modules/async/dist/async.js"),l=s.n(o),d=s("./js/stores/StoreManager.js"),c=s("./js/stores/SyncStatusStore.js"),p=s("./js/stores/CurrentUserStore.js"),u=s("./onboarding/src/common/LaunchDarkly.js"),m=s("./api-dev/constants/Permissions.js"),h=s("./api-dev/services/APIPermissionService.js"),g=s("./api-dev/interfaces/APIInterface.js"),_=s("./api-dev/services/APIDevService.js"),f=s("./node_modules/lodash/lodash.js");t.default={shouldRenderDeploy:(e,t)=>!!(e&&e.rule&&a.default[e.rule]&&f.isFunction(a.default[e.rule].isDeployEnabled))&&a.default[e.rule].isDeployEnabled(e,t),getDeployOptionContext:(e,t)=>{if(!e)return t("API version missing");l().waterfall([function(t){return i.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,[n.API_OBSERVABILITY]).then((e=>e[n.API_OBSERVABILITY].length>0?t(null,e[n.API_OBSERVABILITY][0]):t(null,null))).catch((e=>t(e)))},function(e,t){return e&&e.rule?a.default[e.rule]&&f.isFunction(a.default[e.rule].fetchDeployOptionString)?a.default[e.rule].fetchDeployOptionString(e.id).then((s=>t(null,{integration:e,deployString:s}))).catch((s=>t(null,{integration:e,deployString:"Deploy Schema"}))):t(null,{integration:e,deployString:"Deploy Schema"}):t(null,{integration:null,deployString:"Deploy Schema"})}],((e,s)=>(e&&(pm.logger.error("Error occurred while fetching configured integration",e),pm.toasts.error("Error occurred while fetching configured integration")),t(e,s))))},shouldRenderGatewayIntegration:e=>{const t=(0,d.resolveStoreInstance)(p.default).isLoggedIn||!1,s=f.get(e,"apiPermissionStore.canViewAPIIntegrations",!1),a=u.launchDarkly.getFlag("api-deployments-tab-enabled",!1);return!!(t&&s&&a)},truncate:e=>e.length>35?e.substring(0,35)+"...":e,addDeployClickAnalytics:(e,t)=>{e&&e.rule&&r.default.addEventV2({category:"gateway-integration",action:t,label:e.rule,value:1})},hasEditPermissionOnAPI:e=>e?(0,d.resolveStoreInstance)(c.default).onSyncAvailable({timeout:8e3}).then((()=>{const t=(0,d.resolveStoreInstance)(p.default).id,s=[m.UPDATE_API_META],a=h.default.getAPIPermissionQueryObject(s,[{id:e}],t);return h.default.fetchPermissions(a).then((t=>Promise.resolve(f.get(t,`${e}:UPDATE_API_META.allowed`)))).catch((e=>{throw e}))})).catch((e=>Promise.reject(e))):Promise.reject("API id is required to fetch permissions"),fetchAPIDetails:async e=>{if(!e)return{};try{let t=await(0,g.getAPI)(e),s=await(0,g.isAPIGitLinked)(e),a={apiDetails:t,isGitIntegrationLinked:s,apiDefinition:{}};if(s){const t=await(0,g.getAPILinkedEntityModel)(e,{name:"branch"},"apiDefinition","");return a=f.merge({},a,{apiDefinition:t}),a}return a}catch(e){return Promise.reject(e)}},isSchemaPresent:(e,t)=>_.default.getRelations(e,t).then((e=>{const t=f.get(e,"apiDefinition")&&f.get(f.keys(e.apiDefinition),0),s=f.get(e,"schema")&&f.get(f.keys(e.schema),0);return!f.isEmpty(t)||!f.isEmpty(s)})).catch((e=>Promise.reject(e))),addAzureServicesAnalytics:e=>{const t=f.get(e,"rule",""),s=f.get(e,"variables.linked_apis",[]),a=f.size(s)||0;r.default.addEventV2({category:n.GATEWAY_INTEGRATION_ANALYTICS_EVENT_CATEGORY,action:n.AZURE_APIM.SERVICE_ANALYTICS_ACTION,label:t,value:a})}}},"./integrations/api-observability/services/index.js":function(e,t,s){s.r(t);var a=s("./integrations/api-observability/services/ApiGatewayService.js"),i=s("./integrations/api-observability/services/AzureService.js");t.default={api_gateway_aws:a.default,api_management_azure:i.default}},"./js/components/activity-feed/Activity.js":function(e,t,s){s.r(t),s.d(t,{Activity:function(){return v},LoadFeed:function(){return y}});var a,i=s("../../node_modules/react/index.js"),n=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("./js/components/activity-feed/ActivityItemComponents.js"),o=s("./node_modules/classnames/index.js"),l=s.n(o),d=s("./js/components/base/Icons/WarningIcon.js"),c=s("./js/utils/ActivityFeedHelper.js"),p=s("./js/utils/PluralizeHelper.js"),u=s("./js/components/base/LoadingIndicator.js"),m=s("./js/components/base/Buttons.js"),h=s("./version-control/common/index.js"),g=s("./node_modules/lodash/lodash.js");function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_.apply(this,arguments)}const f="You can perform this action once you're back online";let v=(0,n.observer)(a=class extends i.Component{constructor(e){super(e)}findCurrentLabel(e){return g.find(e.tags,["system",!0])}shouldLoadCustomComponents(e){return["isPublic","isAccessible","publicProfileUrl"].every((function(t){return e.hasOwnProperty(t)}))}getProfilePicComponent(e){return this.shouldLoadCustomComponents(e)?i.createElement(h.CustomProfilePic,e):i.createElement(r.ProfilePic,e)}getUserComponent(e){return this.shouldLoadCustomComponents(e)?i.createElement(h.CustomUser,e):i.createElement(r.User,e)}render(){let e,t=this.props.activity,s=this.props.meta,a=null,n=t.trigger,o=c.default.getWhiteListedActivitiesCount(t),l=p.default.pluralize({count:o,singular:"change",plural:"changes"}),d=null,m=this.findCurrentLabel(t);t.to&&t.to.model&&(a=i.createElement("span",null,i.createElement("span",null," to the ",t.to.model," "),i.createElement("span",{className:"activity-item-model"}," ",g.get(t,"to.instance.name")," ")));const h=g.get(this.props,"isCollectionAbsoluteNamingEnabled")?i.createElement("span",{className:"activity-item-model"},"the ",g.get(t,"meta.name")):"this";switch(`${t.model}:${t.action}`){case"collection:create":e=i.createElement("span",null," created ",h," collection");break;case"collection:update":e=i.createElement("span",null,i.createElement("div",{className:"activity-item-head-content"},o>0&&i.createElement("span",null," made ",o," ",l," to "),0===o&&i.createElement("span",null," ","restore"===n?"restored":"modified"," ")),h," collection"),d=o>0&&i.createElement(r.Details,_({isVisible:this.props.isVisible},t));break;case"collection:destroy":e=i.createElement("span",null," deleted ",h," collection");break;case"folder:create":e=i.createElement("span",null," created the folder ");break;case"folder:update":e=i.createElement("span",null,i.createElement("div",{className:"activity-item-head-content"},o>0&&i.createElement("span",null," made ",o," ",l," to "),0===o&&i.createElement("span",null," modified ")),"the folder"),d=!g.isEmpty(t.input)&&!g.isEmpty(t.rollback)&&i.createElement(r.Details,_({isVisible:this.props.isVisible},t));break;case"folder:destroy":e=i.createElement("span",null," deleted the folder ");break;case"folder:transfer":e=e=i.createElement("span",null," moved the folder ");break;case"request:create":e=i.createElement("span",null," added the request ");break;case"request:update":e=i.createElement("span",null,i.createElement("div",{className:"activity-item-head-content"},o>0&&i.createElement("span",null," made ",o," ",l," to "),0===o&&i.createElement("span",null," modified ")),"the request"),d=!g.isEmpty(t.input)&&!g.isEmpty(t.rollback)&&i.createElement(r.Details,_({isVisible:this.props.isVisible},t));break;case"request:destroy":e=i.createElement("span",null," deleted the request ");break;case"request:transfer":e=i.createElement("span",null," moved the request ");break;case"response:create":e=i.createElement("span",null," created the example ");break;case"response:update":e=i.createElement("span",null," modified the example ");break;case"response:destroy":e=i.createElement("span",null," deleted the example ");break;case"response:transfer":e=i.createElement("span",null," moved the response ")}const f=this.props.enableRestore,v=!g.isEmpty(t.tags)&&!g.head(t.tags).system,y=g.get(t,"allowedActions.versionTagCreate")&&this.props.canAddVersionTag,b=f||v||y,E=(g.get(t,"genericTags")||[]).slice(0,2)||[];return i.createElement("div",{className:"activity-item-wrapper"},i.createElement("div",{className:"activity-feed-connect-line"}),i.createElement("div",{className:"activity-item-content"},i.createElement(r.Header,null,this.getProfilePicComponent(t.user),i.createElement("div",{className:"activity-item-head"},i.createElement(r.Meta,null,i.createElement(r.Time,{timestamp:t.createdAt}),(!g.isEmpty(t.tags)||!g.isEmpty(t.genericTags))&&!g.get(this.props,"hideTags",!1)&&i.createElement("div",{className:"version-label-wrapper"},E.map(((e,t)=>i.createElement("span",{className:"activity-item-tagged_version__label is-tag",title:e.message,key:t},e.message))),m&&i.createElement("span",{className:"activity-item-tagged_version__label"},"CURRENT"))),i.createElement(r.Heading,null,this.getUserComponent(t.user),e,i.createElement("span",{className:"activity-item-model"}," ","collection"!==t.model&&g.get(t,"instance.name")," "),a))),i.createElement("div",{className:"activity-item-details-wrapper"},d,b&&i.createElement("div",{className:"activity-item__action"},v&&i.createElement(r.RemoveTag,{tagId:g.head(t.tags).id,revisionId:t.id,onRemoveVersionTag:this.props.onRemoveVersionTag,isRemovingTag:this.props.isRemovingTag,isOffline:this.props.isOffline}),f&&i.createElement(r.Restore,{createdAt:t.createdAt,id:t.id,isRestoring:this.props.isRestoring,isOffline:this.props.isOffline,rollback_from:s.rollback_from,hasVersionTag:v,onRestore:this.props.onRestore}),this.props.enableRestore&&this.props.isRestoring&&i.createElement(u.default,{className:"activity-item-restore-loader"})))))}})||a;class y extends i.Component{constructor(e){super(e)}getClasses(){return l()({"activity-feed-loader":!0,"initial-fetch-error-banner":"initial"===this.props.error.type,"load-more-error-banner":"loadMore"===this.props.error.type})}handleClick(e){this.props.onRetry&&this.props.onRetry(e)}renderInitialErrorBanner(){return i.createElement("div",{className:"activity-feed-initial-fetch-error-container"},i.createElement("div",{className:"initial-fetch-error-title"},"Couldn't load changelog"),i.createElement("div",{className:"initial-fetch-error-subtitle"},"There was an unexpected error. Please try again."),i.createElement(m.Button,{className:"activity-feed-retry__btn",onClick:this.handleClick.bind(this,{initialRetry:!0}),disabled:this.props.isLoading||this.props.isOffline,tooltip:this.props.isOffline&&f,tooltipPlacement:"left"},this.props.isLoading&&i.createElement(u.default,null)||"Try again"))}renderLoadMoreErrorBanner(){return i.createElement("div",{className:"activity-feed-load-more-error-container"},i.createElement("div",{className:"load-more-error-info"},i.createElement("span",{className:"load-more-error-icon"},i.createElement(d.default,{size:"sm"})),i.createElement("span",{className:"load-more-error-subtitle"},this.props.isOffline?"Get online to view more changes.":"Something went wrong while retrieving more changelogs. Try again.")),i.createElement(m.Button,{className:"activity-feed-retry__btn",onClick:this.handleClick.bind(this,{loadMoreRetry:!0}),disabled:this.props.isLoading||this.props.isOffline,tooltip:this.props.isOffline&&f,tooltipPlacement:"left"},"Retry"))}render(){return i.createElement("div",{className:this.getClasses()},this.props.error&&"initial"===this.props.error.type&&this.renderInitialErrorBanner()||this.props.error&&"loadMore"===this.props.error.type&&this.renderLoadMoreErrorBanner()||this.props.isLoading&&i.createElement(u.default,null))}}},"./js/components/base/Icons/WarningIcon.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var a=s("../../node_modules/react/index.js"),i=s("./js/components/base/Icons/Icon.js");function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},n.apply(this,arguments)}const r=a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("defs",null,a.createElement("path",{id:"pm-icon-warning",d:"M8.89487 1.78887C8.52635 1.05182 7.47454 1.05182 7.10602 1.78887L0.724051 14.5528C0.3916 15.2177 0.875095 16 1.61848 16H14.3824C15.1258 16 15.6093 15.2177 15.2768 14.5528L8.89487 1.78887ZM9.00044 7.00976C9.00044 7.00976 9.01601 6.00002 8.00044 6.00002C6.98488 6.00002 7.00044 7.00976 7.00044 7.00976V10C7.00044 10 6.98787 11 8.00044 11C9.01302 11 9.00044 10 9.00044 10V7.00976ZM8.00064 13.9996C8.55254 13.9996 9.00044 13.5517 9.00044 12.9998C9.00044 12.4479 8.55254 12 8.00064 12C7.44873 12 7.00083 12.4479 7.00083 12.9998C7.00083 13.5517 7.44873 13.9996 8.00064 13.9996Z"})),a.createElement("use",{fill:"#ED4B48",fillRule:"evenodd",clipRule:"evenodd",xlinkHref:"#pm-icon-warning"}));function o(e){return a.createElement(i.default,n({},e,{icon:r}))}},"./js/utils/ActivityFeedHelper.js":function(e,t,s){s.r(t);var a=s("./js/constants/ActivityFeedDetailsMapConstant.js"),i=s("./node_modules/lodash/lodash.js");t.default=new class{getWhiteListedActivitiesCount(e){let t=0;return e.rollback&&e.input&&i.forEach(a.default,(s=>{let a=s.entity;(e.rollback[a]||e.input[a])&&++t})),t}}}}]);