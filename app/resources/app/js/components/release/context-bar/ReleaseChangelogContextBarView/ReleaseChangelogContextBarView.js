"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[97],{"./api-dev/components/api-version/context-bar/api-version-changelog/APIVersionChangelogGroup/APIVersionChangelogGroup.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return j}});var n,a=s("../../node_modules/react/index.js"),o=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("./node_modules/classnames/index.js"),i=s.n(r),l=s("./node_modules/moment/moment.js"),c=s.n(l),d=s("../../packages/api-design/schema-changelog/index.js"),m=s("../../packages/api-design/api-definition-store/index.js"),p=s("./api-dev/components/api-version/context-bar/api-version-changelog/CollectionChange/CollectionChange.js"),h=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-tag-stroke-small.js"),g=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke-small.js"),f=s("./js/components/base/Buttons.js"),v=s("./js/stores/StoreManager.js"),E=s("./js/stores/SyncStatusStore.js"),b=(s("./js/services/NavigationService.js"),s("./api-dev/constants/Permissions.js")),C=(s("./api-dev/services/APIPermissionService.js"),s("./js/modules/services/AnalyticsService.js")),y=s("./node_modules/lodash/lodash.js");function _(){return a.createElement("div",{className:"no-changes-wrapper"},a.createElement("div",null,a.createElement("div",{className:"no-changes-wrapper__content"},a.createElement("div",{className:"no-changes-wrapper__content__title"},"No changes made"))))}let j=(0,o.observer)(n=class extends a.Component{constructor(e){super(e),this.state={isOpen:!0},this.renderChangelog=this.renderChangelog.bind(this),this.handleCreateRelease=this.handleCreateRelease.bind(this),this.onToggle=this.onToggle.bind(this)}renderChangelog(e,t){var s;if(!this.state.isOpen)return;let n;const o=y.get(this.props,"model.apiId"),r=(y.get(this.props,"model.apiPermissionStore.permissions"),y.get(this.props,"model.schema.isSchema")),i=y.get(this.props,"model.schema.apiDefinitionId"),l=(0,v.resolveStoreInstance)(m.APIDefinitionStore).newAPIDefinitionModel(i,r,o,y.get(this.props,"model.id"));l.loadPermissions();const h=null===(s=l.apiDefinitionPermissions)||void 0===s?void 0:s.canRestore;n=y.isEmpty(e)?a.createElement(_,null):(e||[]).map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement("div",{className:"activity-feed-date-group"}," ",e.name," "),(e.items||[]).map(((e,t)=>"schema"===y.get(e,"changeType")?a.createElement(d.SchemaChangeWrapper,{change:e,index:t,isSchema:r,apiName:y.get(this.props,"model.name"),updateSchemaPermission:h,model:this.props.model}):(e=>"collection"===e)(y.get(e,"changeType"))?a.createElement(p.default,{change:e,index:t,model:this.props.model}):void 0)))));const g=c()(y.get(t,"createdAt")).format("DD MMM YYYY, h:mm A");return a.createElement(a.Fragment,null,y.get(t,"createdAt")&&a.createElement("div",{className:"api-changelog__content__release-created-at"}," ",g," "),y.get(t,"summary")&&a.createElement("div",{className:"api-changelog__content__description"}," ",t.summary," "),this.props.renderViewRelease&&this.props.renderViewRelease(),n)}handleCreateRelease(){const e=y.get(this.props,"model.id");C.default.addEventV2({category:"release",action:"initiate_create",label:"changelog",value:1,entityId:e}),this.props.model.setIsCreateReleaseModalOpen(!0)}getCreateReleaseDisabledText(){if(!(0,v.resolveStoreInstance)(E.default).isSocketConnected)return"Get online to perform this action";if(!this.props.canUpdateRelease)return b.API_PERMISSION_ERROR;const e=y.get(this.props,"release.changelog");return e&&e.length?void 0:"No changes to release"}getReleaseNameClasses(){return i()({"api-changelog__header_left-section__name":!0})}onToggle(){this.setState((e=>({isOpen:!e.isOpen})))}renderGitTag(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:"api-changelog__header__release-actions__tag-icon"},a.createElement(h.default,null)),a.createElement("div",{className:"api-changelog__header__release-actions__tag-text"},e))}render(){const e=y.get(this.props,"release"),t=y.get(this.props,"release.changelog"),s=y.get(this.props,"release.changesGroupedByDate"),n=!this.props.canUpdateRelease,o=this.props.hasPreviouslyCreatedReleases;(0,v.resolveStoreInstance)(E.default).isSocketConnected,!(0,v.resolveStoreInstance)(E.default).isSocketConnected||!t||t.length;return a.createElement("div",{className:"api-changelog"},a.createElement("div",{className:"api-changelog__header"},o&&a.createElement("div",{className:"api-changelog__header_left-section"},a.createElement("div",{className:"api-changelog__header_left-section__arrow"},a.createElement(f.Button,{tooltip:y.get(this.state,"isOpen")?"Show less":"Show more",onClick:()=>{this.onToggle()},tooltipPlacement:"bottom"},a.createElement(g.default,{name:y.get(this.state,"isOpen")?"icon-direction-down":"icon-direction-right"}))),a.createElement("div",{className:this.getReleaseNameClasses()},y.get(e,"name"),"private"===y.get(e,"visibility")&&a.createElement(u.default,{title:"Only visible to editors"}))),!(e=>"unreleasedChanges"===y.get(e,"id"))(e)&&a.createElement("div",{className:"api-changelog__header__release-actions"},y.get(e,"gitTag","")&&this.renderGitTag(e.gitTag),this.props.renderActions&&this.props.renderActions())),a.createElement("div",{className:i()({"api-changelog__content":o})},this.renderChangelog(s,e)),!this.props.isLastRelease&&a.createElement("hr",null))}})||n},"./api-dev/components/api-version/context-bar/api-version-changelog/CollectionChange/CollectionChange.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var n,a=s("../../node_modules/react/index.js"),o=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("./node_modules/@postman/date-helper/index.js"),i=s.n(r),l=s("./js/components/activity-feed/Activity.js"),c=s("./node_modules/lodash/lodash.js");let d=(0,o.observer)(n=class extends a.Component{constructor(e){super(e),this.state={collectionRestoreTarget:null,isRestored:!1},this.handleRestore=this.handleRestore.bind(this)}handleRestore(e,t){let s={collectionUid:c.get(this.props,"change.collectionUid"),maxId:e};this.restoreDate=i().getFormattedDateAndTime(t),this.setState({isRestored:!1}),this.setState({collectionRestoreTarget:s},(()=>{pm.syncManager.restoreCollection(s,((e,t)=>{e||t&&t.error?(this.setState({isRestored:!1,collectionRestoreTarget:null}),pm.toasts.error("Couldn't restore collection. Try again.")):t&&t.data&&(this.setState({isRestored:!0,collectionRestoreTarget:null}),c.get(this.props,"model.reload")&&this.props.model.reload())}))}))}render(){const e=c.get(this.props,"change");return a.createElement("div",{className:"activity-feed"},a.createElement("div",{className:"activity-feed-date-group-wrapper",key:e.name},a.createElement(l.Activity,{activity:e,canAddVersionTag:!1,enableRestore:c.get(e,"enableRestore",!1),isRestoring:c.get(this.state,"collectionRestoreTarget.maxId")===e.id,isRemovingTag:!1,isVisible:this.props.isVisible,isOffline:this.props.isOffline,key:e.id,meta:e.meta,onAddVersionTag:c.noop,onRemoveVersionTag:c.noop,onRestore:this.handleRestore,hideTags:!0,isCollectionAbsoluteNamingEnabled:!0})))}})||n},"./api-dev/components/release/context-bar/ReleaseChangelogContextBarView/ReleaseChangelogContextBarView.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var n,a=s("../../node_modules/react/index.js"),o=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("../../node_modules/mobx/lib/mobx.module.js"),i=s("./appsdk/contextbar/ContextBarViewHeader.js"),l=s("./node_modules/classnames/index.js"),c=s.n(l),d=s("./api-dev/components/api-version/context-bar/api-version-changelog/APIVersionChangelogGroup/APIVersionChangelogGroup.js"),m=s("./js/components/base/LoadingIndicator.js"),p=s("./js/stores/StoreManager.js"),h=s("./js/stores/SyncStatusStore.js"),g=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=s("./js/components/base/Buttons.js"),f=s("../../packages/api-design/schema-changelog/index.js"),v=s("./js/components/activity-feed/Activity.js"),E=s("./node_modules/lodash/lodash.js");let b=(0,o.observer)(n=class extends a.Component{constructor(e){super(e),this.state={releaseGroup:{},isLoading:!0,loadingErr:!1},this.fetchChangelogs=this.fetchChangelogs.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleScrollDebounced=E.debounce(this.handleScroll,100),this.loadMoreChanges=this.loadMoreChanges.bind(this)}componentDidMount(){this.isReleaseChanging=(0,r.reaction)((()=>E.get(this.props,"contextData.model.activeRelease")),(()=>{this.fetchChangelogs()}),{fireImmediately:!0})}componentWillUnmount(){this.isReleaseChanging&&this.isReleaseChanging()}getRefreshTextClass(){return c()({"release-changelog-context-view-wrapper__refresh-button":!0,"release-changelog-context-view-wrapper__refresh-button__loading":this.state.isLoading})}getRefreshIconText(){return!(0,p.resolveStoreInstance)(h.default).isSocketConnected?"Get online to perform this action":this.state.isLoading?"Please wait...":"Refresh changelog"}fetchChangelogs(){this.setState({releaseGroup:{},isLoading:!0,loadingErr:!1}),this.props.controller.fetchChangelog(E.get(this.props,"contextData.model",{})).then((e=>{this.setState({releaseGroup:e,isLoading:!1})})).catch((e=>{this.setState({isLoading:!1,loadingErr:!0})}))}handleScroll(){let e=this.refs.changelog_feed;if(e.scrollHeight-(e.scrollTop+e.offsetHeight)<=5){if(!E.isEmpty(E.get(this.props,"controller.loadMoreError"))||E.get(this.props,"controller.isLoaded")||!E.get(this.props,"controller.loadMore"))return;this.loadMoreChanges()}}loadMoreChanges(){return this.props.controller.loadMore().then((e=>{E.isEmpty(e)||this.setState({releaseGroup:e,isLoading:!1})}))}renderChangelog(){const e=!(0,p.resolveStoreInstance)(h.default).isSocketConnected;if(e&&this.state.isLoading)return a.createElement(f.OfflineChangelog,null);if(this.state.isLoading)return a.createElement(m.default,null);if(this.state.loadingErr)return a.createElement(f.ErrorChangelog,{onRetry:this.fetchChangelogs});const t=E.get(this.props,"contextData.model",{}),s=E.get(this.props,"controller.isLoadingMore"),n=E.get(this.props,"controller.loadMoreError",{});return a.createElement(a.Fragment,null,a.createElement("div",{className:"release-changelog",ref:"changelog_feed",onScroll:this.handleScrollDebounced},a.createElement(d.default,{model:t,release:this.state.releaseGroup,promoteTab:E.get(this.props,"contextData.promoteTab"),hasPreviouslyCreatedReleases:!0,isLastRelease:!0})),(s||!E.isEmpty(n))&&a.createElement(v.LoadFeed,{error:n,key:"loading-more",isLoading:s,isOffline:e,onRetry:this.loadMoreChanges}))}render(){return a.createElement("div",{className:"release-changelog-context-view-wrapper"},a.createElement(i.ContextBarViewHeader,{title:this.props.title,onClose:this.props.onClose},a.createElement(u.Button,{className:this.getRefreshTextClass(),tooltip:this.getRefreshIconText(),tooltipImmediate:!0,type:"tertiary",onClick:this.fetchChangelogs,disabled:this.state.isLoading||!(0,p.resolveStoreInstance)(h.default).isSocketConnected},a.createElement(g.default,{name:"icon-action-refresh-stroke"}))),this.renderChangelog())}})||n},"./js/components/activity-feed/Activity.js":function(e,t,s){s.r(t),s.d(t,{Activity:function(){return E},LoadFeed:function(){return b}});var n,a=s("../../node_modules/react/index.js"),o=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("./js/components/activity-feed/ActivityItemComponents.js"),i=s("./node_modules/classnames/index.js"),l=s.n(i),c=s("./js/components/base/Icons/WarningIcon.js"),d=s("./js/utils/ActivityFeedHelper.js"),m=s("./js/utils/PluralizeHelper.js"),p=s("./js/components/base/LoadingIndicator.js"),h=s("./js/components/base/Buttons.js"),g=s("./version-control/common/index.js"),u=s("./node_modules/lodash/lodash.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},f.apply(this,arguments)}const v="You can perform this action once you're back online";let E=(0,o.observer)(n=class extends a.Component{constructor(e){super(e)}findCurrentLabel(e){return u.find(e.tags,["system",!0])}shouldLoadCustomComponents(e){return["isPublic","isAccessible","publicProfileUrl"].every((function(t){return e.hasOwnProperty(t)}))}getProfilePicComponent(e){return this.shouldLoadCustomComponents(e)?a.createElement(g.CustomProfilePic,e):a.createElement(r.ProfilePic,e)}getUserComponent(e){return this.shouldLoadCustomComponents(e)?a.createElement(g.CustomUser,e):a.createElement(r.User,e)}render(){let e,t=this.props.activity,s=this.props.meta,n=null,o=t.trigger,i=d.default.getWhiteListedActivitiesCount(t),l=m.default.pluralize({count:i,singular:"change",plural:"changes"}),c=null,h=this.findCurrentLabel(t);t.to&&t.to.model&&(n=a.createElement("span",null,a.createElement("span",null," to the ",t.to.model," "),a.createElement("span",{className:"activity-item-model"}," ",u.get(t,"to.instance.name")," ")));const g=u.get(this.props,"isCollectionAbsoluteNamingEnabled")?a.createElement("span",{className:"activity-item-model"},"the ",u.get(t,"meta.name")):"this";switch(`${t.model}:${t.action}`){case"collection:create":e=a.createElement("span",null," created ",g," collection");break;case"collection:update":e=a.createElement("span",null,a.createElement("div",{className:"activity-item-head-content"},i>0&&a.createElement("span",null," made ",i," ",l," to "),0===i&&a.createElement("span",null," ","restore"===o?"restored":"modified"," ")),g," collection"),c=i>0&&a.createElement(r.Details,f({isVisible:this.props.isVisible},t));break;case"collection:destroy":e=a.createElement("span",null," deleted ",g," collection");break;case"folder:create":e=a.createElement("span",null," created the folder ");break;case"folder:update":e=a.createElement("span",null,a.createElement("div",{className:"activity-item-head-content"},i>0&&a.createElement("span",null," made ",i," ",l," to "),0===i&&a.createElement("span",null," modified ")),"the folder"),c=!u.isEmpty(t.input)&&!u.isEmpty(t.rollback)&&a.createElement(r.Details,f({isVisible:this.props.isVisible},t));break;case"folder:destroy":e=a.createElement("span",null," deleted the folder ");break;case"folder:transfer":e=e=a.createElement("span",null," moved the folder ");break;case"request:create":e=a.createElement("span",null," added the request ");break;case"request:update":e=a.createElement("span",null,a.createElement("div",{className:"activity-item-head-content"},i>0&&a.createElement("span",null," made ",i," ",l," to "),0===i&&a.createElement("span",null," modified ")),"the request"),c=!u.isEmpty(t.input)&&!u.isEmpty(t.rollback)&&a.createElement(r.Details,f({isVisible:this.props.isVisible},t));break;case"request:destroy":e=a.createElement("span",null," deleted the request ");break;case"request:transfer":e=a.createElement("span",null," moved the request ");break;case"response:create":e=a.createElement("span",null," created the example ");break;case"response:update":e=a.createElement("span",null," modified the example ");break;case"response:destroy":e=a.createElement("span",null," deleted the example ");break;case"response:transfer":e=a.createElement("span",null," moved the response ")}const v=this.props.enableRestore,E=!u.isEmpty(t.tags)&&!u.head(t.tags).system,b=u.get(t,"allowedActions.versionTagCreate")&&this.props.canAddVersionTag,C=v||E||b,y=(u.get(t,"genericTags")||[]).slice(0,2)||[];return a.createElement("div",{className:"activity-item-wrapper"},a.createElement("div",{className:"activity-feed-connect-line"}),a.createElement("div",{className:"activity-item-content"},a.createElement(r.Header,null,this.getProfilePicComponent(t.user),a.createElement("div",{className:"activity-item-head"},a.createElement(r.Meta,null,a.createElement(r.Time,{timestamp:t.createdAt}),(!u.isEmpty(t.tags)||!u.isEmpty(t.genericTags))&&!u.get(this.props,"hideTags",!1)&&a.createElement("div",{className:"version-label-wrapper"},y.map(((e,t)=>a.createElement("span",{className:"activity-item-tagged_version__label is-tag",title:e.message,key:t},e.message))),h&&a.createElement("span",{className:"activity-item-tagged_version__label"},"CURRENT"))),a.createElement(r.Heading,null,this.getUserComponent(t.user),e,a.createElement("span",{className:"activity-item-model"}," ","collection"!==t.model&&u.get(t,"instance.name")," "),n))),a.createElement("div",{className:"activity-item-details-wrapper"},c,C&&a.createElement("div",{className:"activity-item__action"},E&&a.createElement(r.RemoveTag,{tagId:u.head(t.tags).id,revisionId:t.id,onRemoveVersionTag:this.props.onRemoveVersionTag,isRemovingTag:this.props.isRemovingTag,isOffline:this.props.isOffline}),v&&a.createElement(r.Restore,{createdAt:t.createdAt,id:t.id,isRestoring:this.props.isRestoring,isOffline:this.props.isOffline,rollback_from:s.rollback_from,hasVersionTag:E,onRestore:this.props.onRestore}),this.props.enableRestore&&this.props.isRestoring&&a.createElement(p.default,{className:"activity-item-restore-loader"})))))}})||n;class b extends a.Component{constructor(e){super(e)}getClasses(){return l()({"activity-feed-loader":!0,"initial-fetch-error-banner":"initial"===this.props.error.type,"load-more-error-banner":"loadMore"===this.props.error.type})}handleClick(e){this.props.onRetry&&this.props.onRetry(e)}renderInitialErrorBanner(){return a.createElement("div",{className:"activity-feed-initial-fetch-error-container"},a.createElement("div",{className:"initial-fetch-error-title"},"Couldn't load changelog"),a.createElement("div",{className:"initial-fetch-error-subtitle"},"There was an unexpected error. Please try again."),a.createElement(h.Button,{className:"activity-feed-retry__btn",onClick:this.handleClick.bind(this,{initialRetry:!0}),disabled:this.props.isLoading||this.props.isOffline,tooltip:this.props.isOffline&&v,tooltipPlacement:"left"},this.props.isLoading&&a.createElement(p.default,null)||"Try again"))}renderLoadMoreErrorBanner(){return a.createElement("div",{className:"activity-feed-load-more-error-container"},a.createElement("div",{className:"load-more-error-info"},a.createElement("span",{className:"load-more-error-icon"},a.createElement(c.default,{size:"sm"})),a.createElement("span",{className:"load-more-error-subtitle"},this.props.isOffline?"Get online to view more changes.":"Something went wrong while retrieving more changelogs. Try again.")),a.createElement(h.Button,{className:"activity-feed-retry__btn",onClick:this.handleClick.bind(this,{loadMoreRetry:!0}),disabled:this.props.isLoading||this.props.isOffline,tooltip:this.props.isOffline&&v,tooltipPlacement:"left"},"Retry"))}render(){return a.createElement("div",{className:this.getClasses()},this.props.error&&"initial"===this.props.error.type&&this.renderInitialErrorBanner()||this.props.error&&"loadMore"===this.props.error.type&&this.renderLoadMoreErrorBanner()||this.props.isLoading&&a.createElement(p.default,null))}}},"./js/components/base/Icons/WarningIcon.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return i}});var n=s("../../node_modules/react/index.js"),a=s("./js/components/base/Icons/Icon.js");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o.apply(this,arguments)}const r=n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("defs",null,n.createElement("path",{id:"pm-icon-warning",d:"M8.89487 1.78887C8.52635 1.05182 7.47454 1.05182 7.10602 1.78887L0.724051 14.5528C0.3916 15.2177 0.875095 16 1.61848 16H14.3824C15.1258 16 15.6093 15.2177 15.2768 14.5528L8.89487 1.78887ZM9.00044 7.00976C9.00044 7.00976 9.01601 6.00002 8.00044 6.00002C6.98488 6.00002 7.00044 7.00976 7.00044 7.00976V10C7.00044 10 6.98787 11 8.00044 11C9.01302 11 9.00044 10 9.00044 10V7.00976ZM8.00064 13.9996C8.55254 13.9996 9.00044 13.5517 9.00044 12.9998C9.00044 12.4479 8.55254 12 8.00064 12C7.44873 12 7.00083 12.4479 7.00083 12.9998C7.00083 13.5517 7.44873 13.9996 8.00064 13.9996Z"})),n.createElement("use",{fill:"#ED4B48",fillRule:"evenodd",clipRule:"evenodd",xlinkHref:"#pm-icon-warning"}));function i(e){return n.createElement(a.default,o({},e,{icon:r}))}},"./js/utils/ActivityFeedHelper.js":function(e,t,s){s.r(t);var n=s("./js/constants/ActivityFeedDetailsMapConstant.js"),a=s("./node_modules/lodash/lodash.js");t.default=new class{getWhiteListedActivitiesCount(e){let t=0;return e.rollback&&e.input&&a.forEach(n.default,(s=>{let n=s.entity;(e.rollback[n]||e.input[n])&&++t})),t}}}}]);